var sme=Object.defineProperty;var t=(e,r)=>sme(e,"name",{value:r,configurable:!0});import{r as lme,o as ume,a as fme,b as cme}from"./vue.esm-bundler.1591c054.js";import{i as xs,R as Hc,T as hme,U as Kx}from"./iframe.9593e81b.js";import{a as vme}from"./assert.ee5b5e11.js";import{o as Os}from"./index.8cde812d.js";var Bie={exports:{}},Oie={},W2={};W2.version="2.16.0";var dme={exports:{}};/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(e){t(function(n,i,s){i[n]=i[n]||s(),e.exports&&(e.exports=i[n])},"UMD")("Promise",typeof xs<"u"?xs:xs,t(function(){var n,i,s,o=Object.prototype.toString,a=typeof setImmediate<"u"?t(function(T){return setImmediate(T)},"timer"):setTimeout;try{Object.defineProperty({},"x",{}),n=t(function(T,_,M,w){return Object.defineProperty(T,_,{value:M,writable:!0,configurable:w!==!1})},"builtInProp")}catch{n=t(function(_,M,w){return _[M]=w,_},"builtInProp")}s=t(function(){var T,_,M;function w(x,A){this.fn=x,this.self=A,this.next=void 0}return t(w,"Item"),{add:t(function(A,S){M=new w(A,S),_?_.next=M:T=M,_=M,M=void 0},"add"),drain:t(function(){var A=T;for(T=_=i=void 0;A;)A.fn.call(A.self),A=A.next},"drain")}},"Queue")();function l(y,T){s.add(y,T),i||(i=a(s.drain))}t(l,"schedule");function u(y){var T,_=typeof y;return y!=null&&(_=="object"||_=="function")&&(T=y.then),typeof T=="function"?T:!1}t(u,"isThenable");function f(){for(var y=0;y<this.chain.length;y++)h(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}t(f,"notify");function h(y,T,_){var M,w;try{T===!1?_.reject(y.msg):(T===!0?M=y.msg:M=T.call(void 0,y.msg),M===_.promise?_.reject(TypeError("Promise-chain cycle")):(w=u(M))?w.call(M,_.resolve,_.reject):_.resolve(M))}catch(x){_.reject(x)}}t(h,"notifyIsolated");function v(y){var T,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(T=u(y))?l(function(){var M=new g(_);try{T.call(y,t(function(){v.apply(M,arguments)},"$resolve$"),t(function(){c.apply(M,arguments)},"$reject$"))}catch(w){c.call(M,w)}}):(_.msg=y,_.state=1,_.chain.length>0&&l(f,_))}catch(M){c.call(new g(_),M)}}}t(v,"resolve");function c(y){var T=this;T.triggered||(T.triggered=!0,T.def&&(T=T.def),T.msg=y,T.state=2,T.chain.length>0&&l(f,T))}t(c,"reject");function d(y,T,_,M){for(var w=0;w<T.length;w++)t(function(A){y.resolve(T[A]).then(t(function(k){_(A,k)},"$resolver$"),M)},"IIFE")(w)}t(d,"iteratePromises");function g(y){this.def=y,this.triggered=!1}t(g,"MakeDefWrapper");function p(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}t(p,"MakeDef");function b(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var T=new p(this);this.then=t(function(M,w){var x={success:typeof M=="function"?M:!0,failure:typeof w=="function"?w:!1};return x.promise=new this.constructor(t(function(S,k){if(typeof S!="function"||typeof k!="function")throw TypeError("Not a function");x.resolve=S,x.reject=k},"extractChain")),T.chain.push(x),T.state!==0&&l(f,T),x.promise},"then"),this.catch=t(function(M){return this.then(void 0,M)},"$catch$");try{y.call(void 0,t(function(M){v.call(T,M)},"publicResolve"),t(function(M){c.call(T,M)},"publicReject"))}catch(_){c.call(T,_)}}t(b,"Promise");var m=n({},"constructor",b,!1);return b.prototype=m,n(m,"__NPO__",0,!1),n(b,"resolve",t(function(T){var _=this;return T&&typeof T=="object"&&T.__NPO__===1?T:new _(t(function(w,x){if(typeof w!="function"||typeof x!="function")throw TypeError("Not a function");w(T)},"executor"))},"Promise$resolve")),n(b,"reject",t(function(T){return new this(t(function(M,w){if(typeof M!="function"||typeof w!="function")throw TypeError("Not a function");w(T)},"executor"))},"Promise$reject")),n(b,"all",t(function(T){var _=this;return o.call(T)!="[object Array]"?_.reject(TypeError("Not an array")):T.length===0?_.resolve([]):new _(t(function(w,x){if(typeof w!="function"||typeof x!="function")throw TypeError("Not a function");var A=T.length,S=Array(A),k=0;d(_,T,t(function(P,D){S[P]=D,++k===A&&w(S)},"resolver"),x)},"executor"))},"Promise$all")),n(b,"race",t(function(T){var _=this;return o.call(T)!="[object Array]"?_.reject(TypeError("Not an array")):new _(t(function(w,x){if(typeof w!="function"||typeof x!="function")throw TypeError("Not a function");d(_,T,t(function(S,k){w(k)},"resolver"),x)},"executor"))},"Promise$race")),b},"DEF"))})(dme);var Nt={exports:{}},Va={exports:{}};(function(e){(function(){var r={version:"3.8.0"},n=[].slice,i=t(function(Y){return n.call(Y)},"d3_array"),s=self.document;function o(Y){return Y&&(Y.ownerDocument||Y.document||Y).documentElement}t(o,"d3_documentElement");function a(Y){return Y&&(Y.ownerDocument&&Y.ownerDocument.defaultView||Y.document&&Y||Y.defaultView)}if(t(a,"d3_window"),s)try{i(s.documentElement.childNodes)[0].nodeType}catch{i=t(function(ve){for(var _e=ve.length,Ce=new Array(_e);_e--;)Ce[_e]=ve[_e];return Ce},"d3_array")}if(Date.now||(Date.now=function(){return+new Date}),s)try{s.createElement("DIV").style.setProperty("opacity",0,"")}catch{var l=this.Element.prototype,u=l.setAttribute,f=l.setAttributeNS,h=this.CSSStyleDeclaration.prototype,v=h.setProperty;l.setAttribute=function(ve,_e){u.call(this,ve,_e+"")},l.setAttributeNS=function(ve,_e,Ce){f.call(this,ve,_e,Ce+"")},h.setProperty=function(ve,_e,Ce){v.call(this,ve,_e+"",Ce)}}r.ascending=c;function c(Y,ve){return Y<ve?-1:Y>ve?1:Y>=ve?0:NaN}t(c,"d3_ascending"),r.descending=function(Y,ve){return ve<Y?-1:ve>Y?1:ve>=Y?0:NaN},r.min=function(Y,ve){var _e=-1,Ce=Y.length,Re,Le;if(arguments.length===1){for(;++_e<Ce;)if((Le=Y[_e])!=null&&Le>=Le){Re=Le;break}for(;++_e<Ce;)(Le=Y[_e])!=null&&Re>Le&&(Re=Le)}else{for(;++_e<Ce;)if((Le=ve.call(Y,Y[_e],_e))!=null&&Le>=Le){Re=Le;break}for(;++_e<Ce;)(Le=ve.call(Y,Y[_e],_e))!=null&&Re>Le&&(Re=Le)}return Re},r.max=function(Y,ve){var _e=-1,Ce=Y.length,Re,Le;if(arguments.length===1){for(;++_e<Ce;)if((Le=Y[_e])!=null&&Le>=Le){Re=Le;break}for(;++_e<Ce;)(Le=Y[_e])!=null&&Le>Re&&(Re=Le)}else{for(;++_e<Ce;)if((Le=ve.call(Y,Y[_e],_e))!=null&&Le>=Le){Re=Le;break}for(;++_e<Ce;)(Le=ve.call(Y,Y[_e],_e))!=null&&Le>Re&&(Re=Le)}return Re},r.extent=function(Y,ve){var _e=-1,Ce=Y.length,Re,Le,Ke;if(arguments.length===1){for(;++_e<Ce;)if((Le=Y[_e])!=null&&Le>=Le){Re=Ke=Le;break}for(;++_e<Ce;)(Le=Y[_e])!=null&&(Re>Le&&(Re=Le),Ke<Le&&(Ke=Le))}else{for(;++_e<Ce;)if((Le=ve.call(Y,Y[_e],_e))!=null&&Le>=Le){Re=Ke=Le;break}for(;++_e<Ce;)(Le=ve.call(Y,Y[_e],_e))!=null&&(Re>Le&&(Re=Le),Ke<Le&&(Ke=Le))}return[Re,Ke]};function d(Y){return Y===null?NaN:+Y}t(d,"d3_number");function g(Y){return!isNaN(Y)}t(g,"d3_numeric"),r.sum=function(Y,ve){var _e=0,Ce=Y.length,Re,Le=-1;if(arguments.length===1)for(;++Le<Ce;)g(Re=+Y[Le])&&(_e+=Re);else for(;++Le<Ce;)g(Re=+ve.call(Y,Y[Le],Le))&&(_e+=Re);return _e},r.mean=function(Y,ve){var _e=0,Ce=Y.length,Re,Le=-1,Ke=Ce;if(arguments.length===1)for(;++Le<Ce;)g(Re=d(Y[Le]))?_e+=Re:--Ke;else for(;++Le<Ce;)g(Re=d(ve.call(Y,Y[Le],Le)))?_e+=Re:--Ke;if(Ke)return _e/Ke},r.quantile=function(Y,ve){var _e=(Y.length-1)*ve+1,Ce=Math.floor(_e),Re=+Y[Ce-1],Le=_e-Ce;return Le?Re+Le*(Y[Ce]-Re):Re},r.median=function(Y,ve){var _e=[],Ce=Y.length,Re,Le=-1;if(arguments.length===1)for(;++Le<Ce;)g(Re=d(Y[Le]))&&_e.push(Re);else for(;++Le<Ce;)g(Re=d(ve.call(Y,Y[Le],Le)))&&_e.push(Re);if(_e.length)return r.quantile(_e.sort(c),.5)},r.variance=function(Y,ve){var _e=Y.length,Ce=0,Re,Le,Ke=0,Ne=-1,rt=0;if(arguments.length===1)for(;++Ne<_e;)g(Re=d(Y[Ne]))&&(Le=Re-Ce,Ce+=Le/++rt,Ke+=Le*(Re-Ce));else for(;++Ne<_e;)g(Re=d(ve.call(Y,Y[Ne],Ne)))&&(Le=Re-Ce,Ce+=Le/++rt,Ke+=Le*(Re-Ce));if(rt>1)return Ke/(rt-1)},r.deviation=function(){var Y=r.variance.apply(this,arguments);return Y&&Math.sqrt(Y)};function p(Y){return{left:function(ve,_e,Ce,Re){for(arguments.length<3&&(Ce=0),arguments.length<4&&(Re=ve.length);Ce<Re;){var Le=Ce+Re>>>1;Y(ve[Le],_e)<0?Ce=Le+1:Re=Le}return Ce},right:function(ve,_e,Ce,Re){for(arguments.length<3&&(Ce=0),arguments.length<4&&(Re=ve.length);Ce<Re;){var Le=Ce+Re>>>1;Y(ve[Le],_e)>0?Re=Le:Ce=Le+1}return Ce}}}t(p,"d3_bisector");var b=p(c);r.bisectLeft=b.left,r.bisect=r.bisectRight=b.right,r.bisector=function(Y){return p(Y.length===1?function(ve,_e){return c(Y(ve),_e)}:Y)},r.shuffle=function(Y,ve,_e){(Ce=arguments.length)<3&&(_e=Y.length,Ce<2&&(ve=0));for(var Ce=_e-ve,Re,Le;Ce;)Le=Math.random()*Ce--|0,Re=Y[Ce+ve],Y[Ce+ve]=Y[Le+ve],Y[Le+ve]=Re;return Y},r.permute=function(Y,ve){for(var _e=ve.length,Ce=new Array(_e);_e--;)Ce[_e]=Y[ve[_e]];return Ce},r.pairs=function(Y){for(var ve=0,_e=Y.length-1,Ce=Y[0],Re=new Array(_e<0?0:_e);ve<_e;)Re[ve]=[Ce,Ce=Y[++ve]];return Re},r.transpose=function(Y){if(!(Le=Y.length))return[];for(var ve=-1,_e=r.min(Y,m),Ce=new Array(_e);++ve<_e;)for(var Re=-1,Le,Ke=Ce[ve]=new Array(Le);++Re<Le;)Ke[Re]=Y[Re][ve];return Ce};function m(Y){return Y.length}t(m,"d3_transposeLength"),r.zip=function(){return r.transpose(arguments)},r.keys=function(Y){var ve=[];for(var _e in Y)ve.push(_e);return ve},r.values=function(Y){var ve=[];for(var _e in Y)ve.push(Y[_e]);return ve},r.entries=function(Y){var ve=[];for(var _e in Y)ve.push({key:_e,value:Y[_e]});return ve},r.merge=function(Y){for(var ve=Y.length,_e,Ce=-1,Re=0,Le,Ke;++Ce<ve;)Re+=Y[Ce].length;for(Le=new Array(Re);--ve>=0;)for(Ke=Y[ve],_e=Ke.length;--_e>=0;)Le[--Re]=Ke[_e];return Le};var y=Math.abs;r.range=function(Y,ve,_e){if(arguments.length<3&&(_e=1,arguments.length<2&&(ve=Y,Y=0)),(ve-Y)/_e===1/0)throw new Error("infinite range");var Ce=[],Re=T(y(_e)),Le=-1,Ke;if(Y*=Re,ve*=Re,_e*=Re,_e<0)for(;(Ke=Y+_e*++Le)>ve;)Ce.push(Ke/Re);else for(;(Ke=Y+_e*++Le)<ve;)Ce.push(Ke/Re);return Ce};function T(Y){for(var ve=1;Y*ve%1;)ve*=10;return ve}t(T,"d3_range_integerScale");function _(Y,ve){for(var _e in ve)Object.defineProperty(Y.prototype,_e,{value:ve[_e],enumerable:!1})}t(_,"d3_class"),r.map=function(Y,ve){var _e=new M;if(Y instanceof M)Y.forEach(function(Ne,rt){_e.set(Ne,rt)});else if(Array.isArray(Y)){var Ce=-1,Re=Y.length,Le;if(arguments.length===1)for(;++Ce<Re;)_e.set(Ce,Y[Ce]);else for(;++Ce<Re;)_e.set(ve.call(Y,Le=Y[Ce],Ce),Le)}else for(var Ke in Y)_e.set(Ke,Y[Ke]);return _e};function M(){this._=Object.create(null)}t(M,"d3_Map");var w="__proto__",x="\0";_(M,{has:k,get:function(Y){return this._[A(Y)]},set:function(Y,ve){return this._[A(Y)]=ve},remove:L,keys:P,values:function(){var Y=[];for(var ve in this._)Y.push(this._[ve]);return Y},entries:function(){var Y=[];for(var ve in this._)Y.push({key:S(ve),value:this._[ve]});return Y},size:D,empty:B,forEach:function(Y){for(var ve in this._)Y.call(this,S(ve),this._[ve])}});function A(Y){return(Y+="")===w||Y[0]===x?x+Y:Y}t(A,"d3_map_escape");function S(Y){return(Y+="")[0]===x?Y.slice(1):Y}t(S,"d3_map_unescape");function k(Y){return A(Y)in this._}t(k,"d3_map_has");function L(Y){return(Y=A(Y))in this._&&delete this._[Y]}t(L,"d3_map_remove");function P(){var Y=[];for(var ve in this._)Y.push(S(ve));return Y}t(P,"d3_map_keys");function D(){var Y=0;for(var ve in this._)++Y;return Y}t(D,"d3_map_size");function B(){for(var Y in this._)return!1;return!0}t(B,"d3_map_empty"),r.nest=function(){var Y={},ve=[],_e=[],Ce,Re;function Le(Ne,rt,yt){if(yt>=ve.length)return Re?Re.call(Y,rt):Ce?rt.sort(Ce):rt;for(var gt=-1,Ut=rt.length,Tt=ve[yt++],or,pr,jt,er=new M,rr;++gt<Ut;)(rr=er.get(or=Tt(pr=rt[gt])))?rr.push(pr):er.set(or,[pr]);return Ne?(pr=Ne(),jt=t(function(dr,gr){pr.set(dr,Le(Ne,gr,yt))},"setter")):(pr={},jt=t(function(dr,gr){pr[dr]=Le(Ne,gr,yt)},"setter")),er.forEach(jt),pr}t(Le,"map");function Ke(Ne,rt){if(rt>=ve.length)return Ne;var yt=[],gt=_e[rt++];return Ne.forEach(function(Ut,Tt){yt.push({key:Ut,values:Ke(Tt,rt)})}),gt?yt.sort(function(Ut,Tt){return gt(Ut.key,Tt.key)}):yt}return t(Ke,"entries"),Y.map=function(Ne,rt){return Le(rt,Ne,0)},Y.entries=function(Ne){return Ke(Le(r.map,Ne,0),0)},Y.key=function(Ne){return ve.push(Ne),Y},Y.sortKeys=function(Ne){return _e[ve.length-1]=Ne,Y},Y.sortValues=function(Ne){return Ce=Ne,Y},Y.rollup=function(Ne){return Re=Ne,Y},Y},r.set=function(Y){var ve=new z;if(Y)for(var _e=0,Ce=Y.length;_e<Ce;++_e)ve.add(Y[_e]);return ve};function z(){this._=Object.create(null)}t(z,"d3_Set"),_(z,{has:k,add:function(Y){return this._[A(Y+="")]=!0,Y},remove:L,values:P,size:D,empty:B,forEach:function(Y){for(var ve in this._)Y.call(this,S(ve))}}),r.behavior={};function R(Y){return Y}t(R,"d3_identity"),r.rebind=function(Y,ve){for(var _e=1,Ce=arguments.length,Re;++_e<Ce;)Y[Re=arguments[_e]]=F(Y,ve,ve[Re]);return Y};function F(Y,ve,_e){return function(){var Ce=_e.apply(ve,arguments);return Ce===ve?Y:Ce}}t(F,"d3_rebind");function O(Y,ve){if(ve in Y)return ve;ve=ve.charAt(0).toUpperCase()+ve.slice(1);for(var _e=0,Ce=q.length;_e<Ce;++_e){var Re=q[_e]+ve;if(Re in Y)return Re}}t(O,"d3_vendorSymbol");var q=["webkit","ms","moz","Moz","o","O"];function H(){}t(H,"d3_noop"),r.dispatch=function(){for(var Y=new j,ve=-1,_e=arguments.length;++ve<_e;)Y[arguments[ve]]=X(Y);return Y};function j(){}t(j,"d3_dispatch"),j.prototype.on=function(Y,ve){var _e=Y.indexOf("."),Ce="";if(_e>=0&&(Ce=Y.slice(_e+1),Y=Y.slice(0,_e)),Y)return arguments.length<2?this[Y].on(Ce):this[Y].on(Ce,ve);if(arguments.length===2){if(ve==null)for(Y in this)this.hasOwnProperty(Y)&&this[Y].on(Ce,null);return this}};function X(Y){var ve=[],_e=new M;function Ce(){for(var Re=ve,Le=-1,Ke=Re.length,Ne;++Le<Ke;)(Ne=Re[Le].on)&&Ne.apply(this,arguments);return Y}return t(Ce,"event"),Ce.on=function(Re,Le){var Ke=_e.get(Re),Ne;return arguments.length<2?Ke&&Ke.on:(Ke&&(Ke.on=null,ve=ve.slice(0,Ne=ve.indexOf(Ke)).concat(ve.slice(Ne+1)),_e.remove(Re)),Le&&ve.push(_e.set(Re,{on:Le})),Y)},Ce}t(X,"d3_dispatch_event"),r.event=null;function G(){r.event.preventDefault()}t(G,"d3_eventPreventDefault");function $(){for(var Y=r.event,ve;ve=Y.sourceEvent;)Y=ve;return Y}t($,"d3_eventSource");function te(Y){for(var ve=new j,_e=0,Ce=arguments.length;++_e<Ce;)ve[arguments[_e]]=X(ve);return ve.of=function(Re,Le){return function(Ke){try{var Ne=Ke.sourceEvent=r.event;Ke.target=Y,r.event=Ke,ve[Ke.type].apply(Re,Le)}finally{r.event=Ne}}},ve}t(te,"d3_eventDispatch"),r.requote=function(Y){return Y.replace(ee,"\\$&")};var ee=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ie={}.__proto__?function(Y,ve){Y.__proto__=ve}:function(Y,ve){for(var _e in ve)Y[_e]=ve[_e]};function se(Y){return ie(Y,re),Y}t(se,"d3_selection");var W=t(function(Y,ve){return ve.querySelector(Y)},"d3_select"),ne=t(function(Y,ve){return ve.querySelectorAll(Y)},"d3_selectAll"),he=t(function(Y,ve){var _e=Y.matches||Y[O(Y,"matchesSelector")];return he=t(function(Ce,Re){return _e.call(Ce,Re)},"d3_selectMatches"),he(Y,ve)},"d3_selectMatches");typeof Sizzle=="function"&&(W=t(function(Y,ve){return Sizzle(Y,ve)[0]||null},"d3_select"),ne=Sizzle,he=Sizzle.matchesSelector),r.selection=function(){return r.select(s.documentElement)};var re=r.selection.prototype=[];re.select=function(Y){var ve=[],_e,Ce,Re,Le;Y=ae(Y);for(var Ke=-1,Ne=this.length;++Ke<Ne;){ve.push(_e=[]),_e.parentNode=(Re=this[Ke]).parentNode;for(var rt=-1,yt=Re.length;++rt<yt;)(Le=Re[rt])?(_e.push(Ce=Y.call(Le,Le.__data__,rt,Ke)),Ce&&"__data__"in Le&&(Ce.__data__=Le.__data__)):_e.push(null)}return se(ve)};function ae(Y){return typeof Y=="function"?Y:function(){return W(Y,this)}}t(ae,"d3_selection_selector"),re.selectAll=function(Y){var ve=[],_e,Ce;Y=fe(Y);for(var Re=-1,Le=this.length;++Re<Le;)for(var Ke=this[Re],Ne=-1,rt=Ke.length;++Ne<rt;)(Ce=Ke[Ne])&&(ve.push(_e=i(Y.call(Ce,Ce.__data__,Ne,Re))),_e.parentNode=Ce);return se(ve)};function fe(Y){return typeof Y=="function"?Y:function(){return ne(Y,this)}}t(fe,"d3_selection_selectorAll");var ce="http://www.w3.org/1999/xhtml",xe={svg:"http://www.w3.org/2000/svg",xhtml:ce,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};r.ns={prefix:xe,qualify:function(Y){var ve=Y.indexOf(":"),_e=Y;return ve>=0&&(_e=Y.slice(0,ve))!=="xmlns"&&(Y=Y.slice(ve+1)),xe.hasOwnProperty(_e)?{space:xe[_e],local:Y}:Y}},re.attr=function(Y,ve){if(arguments.length<2){if(typeof Y=="string"){var _e=this.node();return Y=r.ns.qualify(Y),Y.local?_e.getAttributeNS(Y.space,Y.local):_e.getAttribute(Y)}for(ve in Y)this.each(Te(ve,Y[ve]));return this}return this.each(Te(Y,ve))};function Te(Y,ve){Y=r.ns.qualify(Y);function _e(){this.removeAttribute(Y)}t(_e,"attrNull");function Ce(){this.removeAttributeNS(Y.space,Y.local)}t(Ce,"attrNullNS");function Re(){this.setAttribute(Y,ve)}t(Re,"attrConstant");function Le(){this.setAttributeNS(Y.space,Y.local,ve)}t(Le,"attrConstantNS");function Ke(){var rt=ve.apply(this,arguments);rt==null?this.removeAttribute(Y):this.setAttribute(Y,rt)}t(Ke,"attrFunction");function Ne(){var rt=ve.apply(this,arguments);rt==null?this.removeAttributeNS(Y.space,Y.local):this.setAttributeNS(Y.space,Y.local,rt)}return t(Ne,"attrFunctionNS"),ve==null?Y.local?Ce:_e:typeof ve=="function"?Y.local?Ne:Ke:Y.local?Le:Re}t(Te,"d3_selection_attr");function me(Y){return Y.trim().replace(/\s+/g," ")}t(me,"d3_collapse"),re.classed=function(Y,ve){if(arguments.length<2){if(typeof Y=="string"){var _e=this.node(),Ce=(Y=oe(Y)).length,Re=-1;if(ve=_e.classList){for(;++Re<Ce;)if(!ve.contains(Y[Re]))return!1}else for(ve=_e.getAttribute("class");++Re<Ce;)if(!pe(Y[Re]).test(ve))return!1;return!0}for(ve in Y)this.each(de(ve,Y[ve]));return this}return this.each(de(Y,ve))};function pe(Y){return new RegExp("(?:^|\\s+)"+r.requote(Y)+"(?:\\s+|$)","g")}t(pe,"d3_selection_classedRe");function oe(Y){return(Y+"").trim().split(/^|\s+/)}t(oe,"d3_selection_classes");function de(Y,ve){Y=oe(Y).map(ye);var _e=Y.length;function Ce(){for(var Le=-1;++Le<_e;)Y[Le](this,ve)}t(Ce,"classedConstant");function Re(){for(var Le=-1,Ke=ve.apply(this,arguments);++Le<_e;)Y[Le](this,Ke)}return t(Re,"classedFunction"),typeof ve=="function"?Re:Ce}t(de,"d3_selection_classed");function ye(Y){var ve=pe(Y);return function(_e,Ce){if(Re=_e.classList)return Ce?Re.add(Y):Re.remove(Y);var Re=_e.getAttribute("class")||"";Ce?(ve.lastIndex=0,ve.test(Re)||_e.setAttribute("class",me(Re+" "+Y))):_e.setAttribute("class",me(Re.replace(ve," ")))}}t(ye,"d3_selection_classedName"),re.style=function(Y,ve,_e){var Ce=arguments.length;if(Ce<3){if(typeof Y!="string"){Ce<2&&(ve="");for(_e in Y)this.each(we(_e,Y[_e],ve));return this}if(Ce<2){var Re=this.node();return a(Re).getComputedStyle(Re,null).getPropertyValue(Y)}_e=""}return this.each(we(Y,ve,_e))};function we(Y,ve,_e){function Ce(){this.style.removeProperty(Y)}t(Ce,"styleNull");function Re(){this.style.setProperty(Y,ve,_e)}t(Re,"styleConstant");function Le(){var Ke=ve.apply(this,arguments);Ke==null?this.style.removeProperty(Y):this.style.setProperty(Y,Ke,_e)}return t(Le,"styleFunction"),ve==null?Ce:typeof ve=="function"?Le:Re}t(we,"d3_selection_style"),re.property=function(Y,ve){if(arguments.length<2){if(typeof Y=="string")return this.node()[Y];for(ve in Y)this.each(Ee(ve,Y[ve]));return this}return this.each(Ee(Y,ve))};function Ee(Y,ve){function _e(){delete this[Y]}t(_e,"propertyNull");function Ce(){this[Y]=ve}t(Ce,"propertyConstant");function Re(){var Le=ve.apply(this,arguments);Le==null?delete this[Y]:this[Y]=Le}return t(Re,"propertyFunction"),ve==null?_e:typeof ve=="function"?Re:Ce}t(Ee,"d3_selection_property"),re.text=function(Y){return arguments.length?this.each(typeof Y=="function"?function(){var ve=Y.apply(this,arguments);this.textContent=ve==null?"":ve}:Y==null?function(){this.textContent=""}:function(){this.textContent=Y}):this.node().textContent},re.html=function(Y){return arguments.length?this.each(typeof Y=="function"?function(){var ve=Y.apply(this,arguments);this.innerHTML=ve==null?"":ve}:Y==null?function(){this.innerHTML=""}:function(){this.innerHTML=Y}):this.node().innerHTML},re.append=function(Y){return Y=De(Y),this.select(function(){return this.appendChild(Y.apply(this,arguments))})};function De(Y){function ve(){var Ce=this.ownerDocument,Re=this.namespaceURI;return Re===ce&&Ce.documentElement.namespaceURI===ce?Ce.createElement(Y):Ce.createElementNS(Re,Y)}t(ve,"create");function _e(){return this.ownerDocument.createElementNS(Y.space,Y.local)}return t(_e,"createNS"),typeof Y=="function"?Y:(Y=r.ns.qualify(Y)).local?_e:ve}t(De,"d3_selection_creator"),re.insert=function(Y,ve){return Y=De(Y),ve=ae(ve),this.select(function(){return this.insertBefore(Y.apply(this,arguments),ve.apply(this,arguments)||null)})},re.remove=function(){return this.each(Fe)};function Fe(){var Y=this.parentNode;Y&&Y.removeChild(this)}t(Fe,"d3_selectionRemove"),re.data=function(Y,ve){var _e=-1,Ce=this.length,Re,Le;if(!arguments.length){for(Y=new Array(Ce=(Re=this[0]).length);++_e<Ce;)(Le=Re[_e])&&(Y[_e]=Le.__data__);return Y}function Ke(gt,Ut){var Tt,or=gt.length,pr=Ut.length,jt=Math.min(or,pr),er=new Array(pr),rr=new Array(pr),dr=new Array(or),gr,tr;if(ve){var Yr=new M,ia=new Array(or),ua;for(Tt=-1;++Tt<or;)(gr=gt[Tt])&&(Yr.has(ua=ve.call(gr,gr.__data__,Tt))?dr[Tt]=gr:Yr.set(ua,gr),ia[Tt]=ua);for(Tt=-1;++Tt<pr;)(gr=Yr.get(ua=ve.call(Ut,tr=Ut[Tt],Tt)))?gr!==!0&&(er[Tt]=gr,gr.__data__=tr):rr[Tt]=qe(tr),Yr.set(ua,!0);for(Tt=-1;++Tt<or;)Tt in ia&&Yr.get(ia[Tt])!==!0&&(dr[Tt]=gt[Tt])}else{for(Tt=-1;++Tt<jt;)gr=gt[Tt],tr=Ut[Tt],gr?(gr.__data__=tr,er[Tt]=gr):rr[Tt]=qe(tr);for(;Tt<pr;++Tt)rr[Tt]=qe(Ut[Tt]);for(;Tt<or;++Tt)dr[Tt]=gt[Tt]}rr.update=er,rr.parentNode=er.parentNode=dr.parentNode=gt.parentNode,Ne.push(rr),rt.push(er),yt.push(dr)}t(Ke,"bind");var Ne=Ue([]),rt=se([]),yt=se([]);if(typeof Y=="function")for(;++_e<Ce;)Ke(Re=this[_e],Y.call(Re,Re.parentNode.__data__,_e));else for(;++_e<Ce;)Ke(Re=this[_e],Y);return rt.enter=function(){return Ne},rt.exit=function(){return yt},rt};function qe(Y){return{__data__:Y}}t(qe,"d3_selection_dataNode"),re.datum=function(Y){return arguments.length?this.property("__data__",Y):this.property("__data__")},re.filter=function(Y){var ve=[],_e,Ce,Re;typeof Y!="function"&&(Y=Je(Y));for(var Le=0,Ke=this.length;Le<Ke;Le++){ve.push(_e=[]),_e.parentNode=(Ce=this[Le]).parentNode;for(var Ne=0,rt=Ce.length;Ne<rt;Ne++)(Re=Ce[Ne])&&Y.call(Re,Re.__data__,Ne,Le)&&_e.push(Re)}return se(ve)};function Je(Y){return function(){return he(this,Y)}}t(Je,"d3_selection_filter"),re.order=function(){for(var Y=-1,ve=this.length;++Y<ve;)for(var _e=this[Y],Ce=_e.length-1,Re=_e[Ce],Le;--Ce>=0;)(Le=_e[Ce])&&(Re&&Re!==Le.nextSibling&&Re.parentNode.insertBefore(Le,Re),Re=Le);return this},re.sort=function(Y){Y=Ge.apply(this,arguments);for(var ve=-1,_e=this.length;++ve<_e;)this[ve].sort(Y);return this.order()};function Ge(Y){return arguments.length||(Y=c),function(ve,_e){return ve&&_e?Y(ve.__data__,_e.__data__):!ve-!_e}}t(Ge,"d3_selection_sortComparator"),re.each=function(Y){return et(this,function(ve,_e,Ce){Y.call(ve,ve.__data__,_e,Ce)})};function et(Y,ve){for(var _e=0,Ce=Y.length;_e<Ce;_e++)for(var Re=Y[_e],Le=0,Ke=Re.length,Ne;Le<Ke;Le++)(Ne=Re[Le])&&ve(Ne,Le,_e);return Y}t(et,"d3_selection_each"),re.call=function(Y){var ve=i(arguments);return Y.apply(ve[0]=this,ve),this},re.empty=function(){return!this.node()},re.node=function(){for(var Y=0,ve=this.length;Y<ve;Y++)for(var _e=this[Y],Ce=0,Re=_e.length;Ce<Re;Ce++){var Le=_e[Ce];if(Le)return Le}return null},re.size=function(){var Y=0;return et(this,function(){++Y}),Y};function Ue(Y){return ie(Y,Ye),Y}t(Ue,"d3_selection_enter");var Ye=[];r.selection.enter=Ue,r.selection.enter.prototype=Ye,Ye.append=re.append,Ye.empty=re.empty,Ye.node=re.node,Ye.call=re.call,Ye.size=re.size,Ye.select=function(Y){for(var ve=[],_e,Ce,Re,Le,Ke,Ne=-1,rt=this.length;++Ne<rt;){Re=(Le=this[Ne]).update,ve.push(_e=[]),_e.parentNode=Le.parentNode;for(var yt=-1,gt=Le.length;++yt<gt;)(Ke=Le[yt])?(_e.push(Re[yt]=Ce=Y.call(Le.parentNode,Ke.__data__,yt,Ne)),Ce.__data__=Ke.__data__):_e.push(null)}return se(ve)},Ye.insert=function(Y,ve){return arguments.length<2&&(ve=$e(this)),re.insert.call(this,Y,ve)};function $e(Y){var ve,_e;return function(Ce,Re,Le){var Ke=Y[Le].update,Ne=Ke.length,rt;for(Le!=_e&&(_e=Le,ve=0),Re>=ve&&(ve=Re+1);!(rt=Ke[ve])&&++ve<Ne;);return rt}}t($e,"d3_selection_enterInsertBefore"),r.select=function(Y){var ve;return typeof Y=="string"?(ve=[W(Y,s)],ve.parentNode=s.documentElement):(ve=[Y],ve.parentNode=o(Y)),se([ve])},r.selectAll=function(Y){var ve;return typeof Y=="string"?(ve=i(ne(Y,s)),ve.parentNode=s.documentElement):(ve=i(Y),ve.parentNode=null),se([ve])},re.on=function(Y,ve,_e){var Ce=arguments.length;if(Ce<3){if(typeof Y!="string"){Ce<2&&(ve=!1);for(_e in Y)this.each(Ct(_e,Y[_e],ve));return this}if(Ce<2)return(Ce=this.node()["__on"+Y])&&Ce._;_e=!1}return this.each(Ct(Y,ve,_e))};function Ct(Y,ve,_e){var Ce="__on"+Y,Re=Y.indexOf("."),Le=Vt;Re>0&&(Y=Y.slice(0,Re));var Ke=It.get(Y);Ke&&(Y=Ke,Le=$t);function Ne(){var gt=this[Ce];gt&&(this.removeEventListener(Y,gt,gt.$),delete this[Ce])}t(Ne,"onRemove");function rt(){var gt=Le(ve,i(arguments));Ne.call(this),this.addEventListener(Y,this[Ce]=gt,gt.$=_e),gt._=ve}t(rt,"onAdd");function yt(){var gt=new RegExp("^__on([^.]+)"+r.requote(Y)+"$"),Ut;for(var Tt in this)if(Ut=Tt.match(gt)){var or=this[Tt];this.removeEventListener(Ut[1],or,or.$),delete this[Tt]}}return t(yt,"removeAll"),Re?ve?rt:Ne:ve?H:yt}t(Ct,"d3_selection_on");var It=r.map({mouseenter:"mouseover",mouseleave:"mouseout"});s&&It.forEach(function(Y){"on"+Y in s&&It.remove(Y)});function Vt(Y,ve){return function(_e){var Ce=r.event;r.event=_e,ve[0]=this.__data__;try{Y.apply(this,ve)}finally{r.event=Ce}}}t(Vt,"d3_selection_onListener");function $t(Y,ve){var _e=Vt(Y,ve);return function(Ce){var Re=this,Le=Ce.relatedTarget;(!Le||Le!==Re&&!(Le.compareDocumentPosition(Re)&8))&&_e.call(Re,Ce)}}t($t,"d3_selection_onFilter");var Gt,Jt=0;function kt(Y){var ve=".dragsuppress-"+ ++Jt,_e="click"+ve,Ce=r.select(a(Y)).on("touchmove"+ve,G).on("dragstart"+ve,G).on("selectstart"+ve,G);if(Gt==null&&(Gt="onselectstart"in Y?!1:O(Y.style,"userSelect")),Gt){var Re=o(Y).style,Le=Re[Gt];Re[Gt]="none"}return function(Ke){if(Ce.on(ve,null),Gt&&(Re[Gt]=Le),Ke){var Ne=t(function(){Ce.on(_e,null)},"off");Ce.on(_e,function(){G(),Ne()},!0),setTimeout(Ne,0)}}}t(kt,"d3_event_dragSuppress"),r.mouse=function(Y){return zt(Y,$())};var ft=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function zt(Y,ve){ve.changedTouches&&(ve=ve.changedTouches[0]);var _e=Y.ownerSVGElement||Y;if(_e.createSVGPoint){var Ce=_e.createSVGPoint();if(ft<0){var Re=a(Y);if(Re.scrollX||Re.scrollY){_e=r.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Le=_e[0][0].getScreenCTM();ft=!(Le.f||Le.e),_e.remove()}}return ft?(Ce.x=ve.pageX,Ce.y=ve.pageY):(Ce.x=ve.clientX,Ce.y=ve.clientY),Ce=Ce.matrixTransform(Y.getScreenCTM().inverse()),[Ce.x,Ce.y]}var Ke=Y.getBoundingClientRect();return[ve.clientX-Ke.left-Y.clientLeft,ve.clientY-Ke.top-Y.clientTop]}t(zt,"d3_mousePoint"),r.touch=function(Y,ve,_e){if(arguments.length<3&&(_e=ve,ve=$().changedTouches),ve){for(var Ce=0,Re=ve.length,Le;Ce<Re;++Ce)if((Le=ve[Ce]).identifier===_e)return zt(Y,Le)}},r.behavior.drag=function(){var Y=te(Re,"drag","dragstart","dragend"),ve=null,_e=Le(H,r.mouse,a,"mousemove","mouseup"),Ce=Le(Pt,r.touch,R,"touchmove","touchend");function Re(){this.on("mousedown.drag",_e).on("touchstart.drag",Ce)}t(Re,"drag");function Le(Ke,Ne,rt,yt,gt){return function(){var Ut=this,Tt=r.event.target.correspondingElement||r.event.target,or=Ut.parentNode,pr=Y.of(Ut,arguments),jt=0,er=Ke(),rr=".drag"+(er==null?"":"-"+er),dr,gr=r.select(rt(Tt)).on(yt+rr,ia).on(gt+rr,ua),tr=kt(Tt),Yr=Ne(or,er);ve?(dr=ve.apply(Ut,arguments),dr=[dr.x-Yr[0],dr.y-Yr[1]]):dr=[0,0],pr({type:"dragstart"});function ia(){var oa=Ne(or,er),pa,Ya;!oa||(pa=oa[0]-Yr[0],Ya=oa[1]-Yr[1],jt|=pa|Ya,Yr=oa,pr({type:"drag",x:oa[0]+dr[0],y:oa[1]+dr[1],dx:pa,dy:Ya}))}t(ia,"moved");function ua(){!Ne(or,er)||(gr.on(yt+rr,null).on(gt+rr,null),tr(jt),pr({type:"dragend"}))}t(ua,"ended")}}return t(Le,"dragstart"),Re.origin=function(Ke){return arguments.length?(ve=Ke,Re):ve},r.rebind(Re,Y,"on")};function Pt(){return r.event.changedTouches[0].identifier}t(Pt,"d3_behavior_dragTouchId"),r.touches=function(Y,ve){return arguments.length<2&&(ve=$().touches),ve?i(ve).map(function(_e){var Ce=zt(Y,_e);return Ce.identifier=_e.identifier,Ce}):[]};var Et=1e-6,Wt=Et*Et,ze=Math.PI,tt=2*ze,at=tt-Et,vt=ze/2,_t=ze/180,Rt=180/ze;function nr(Y,ve,_e){return(ve[0]-Y[0])*(_e[1]-Y[1])-(ve[1]-Y[1])*(_e[0]-Y[0])}t(nr,"d3_cross2d");function ir(Y){return Y>1?vt:Y<-1?-vt:Math.asin(Y)}t(ir,"d3_asin");function ur(Y){return((Y=Math.exp(Y))-1/Y)/2}t(ur,"d3_sinh");function qt(Y){return((Y=Math.exp(Y))+1/Y)/2}t(qt,"d3_cosh");function hr(Y){return((Y=Math.exp(2*Y))-1)/(Y+1)}t(hr,"d3_tanh");var Fr=Math.SQRT2,Br=2,na=4;r.interpolateZoom=function(Y,ve){var _e=Y[0],Ce=Y[1],Re=Y[2],Le=ve[0],Ke=ve[1],Ne=ve[2],rt=Le-_e,yt=Ke-Ce,gt=rt*rt+yt*yt,Ut,Tt;if(gt<Wt)Tt=Math.log(Ne/Re)/Fr,Ut=t(function(dr){return[_e+dr*rt,Ce+dr*yt,Re*Math.exp(Fr*dr*Tt)]},"i");else{var or=Math.sqrt(gt),pr=(Ne*Ne-Re*Re+na*gt)/(2*Re*Br*or),jt=(Ne*Ne-Re*Re-na*gt)/(2*Ne*Br*or),er=Math.log(Math.sqrt(pr*pr+1)-pr),rr=Math.log(Math.sqrt(jt*jt+1)-jt);Tt=(rr-er)/Fr,Ut=t(function(dr){var gr=dr*Tt,tr=qt(er),Yr=Re/(Br*or)*(tr*hr(Fr*gr+er)-ur(er));return[_e+Yr*rt,Ce+Yr*yt,Re*tr/qt(Fr*gr+er)]},"i")}return Ut.duration=Tt*1e3,Ut},r.behavior.zoom=function(){var Y={x:0,y:0,k:1},ve,_e,Ce,Re=[960,500],Le=Ia,Ke=250,Ne=0,rt="mousedown.zoom",yt="mousemove.zoom",gt="mouseup.zoom",Ut,Tt="touchstart.zoom",or,pr=te(gr,"zoomstart","zoom","zoomend"),jt,er,rr,dr;Er||(Er="onwheel"in s?(ea=t(function(){return-r.event.deltaY*(r.event.deltaMode?120:1)},"d3_behavior_zoomDelta"),"wheel"):"onmousewheel"in s?(ea=t(function(){return r.event.wheelDelta},"d3_behavior_zoomDelta"),"mousewheel"):(ea=t(function(){return-r.event.detail},"d3_behavior_zoomDelta"),"MozMousePixelScroll"));function gr(wa){wa.on(rt,pn).on(Er+".zoom",Hi).on("dblclick.zoom",si).on(Tt,ti)}t(gr,"zoom"),gr.event=function(wa){wa.each(function(){var En=pr.of(this,arguments),zn=Y;Nu?r.select(this).transition().each("start.zoom",function(){Y=this.__chart__||{x:0,y:0,k:1},Ya(En)}).tween("zoom:zoom",function(){var Fn=Re[0],Yi=Re[1],On=_e?_e[0]:Fn/2,fo=_e?_e[1]:Yi/2,Wi=r.interpolateZoom([(On-Y.x)/Y.k,(fo-Y.y)/Y.k,Fn/Y.k],[(On-zn.x)/zn.k,(fo-zn.y)/zn.k,Fn/zn.k]);return function(mo){var No=Wi(mo),ss=Fn/No[2];this.__chart__=Y={x:On-No[0]*ss,y:fo-No[1]*ss,k:ss},en(En)}}).each("interrupt.zoom",function(){Ca(En)}).each("end.zoom",function(){Ca(En)}):(this.__chart__=Y,Ya(En),en(En),Ca(En))})},gr.translate=function(wa){return arguments.length?(Y={x:+wa[0],y:+wa[1],k:Y.k},pa(),gr):[Y.x,Y.y]},gr.scale=function(wa){return arguments.length?(Y={x:Y.x,y:Y.y,k:null},ia(+wa),pa(),gr):Y.k},gr.scaleExtent=function(wa){return arguments.length?(Le=wa==null?Ia:[+wa[0],+wa[1]],gr):Le},gr.center=function(wa){return arguments.length?(Ce=wa&&[+wa[0],+wa[1]],gr):Ce},gr.size=function(wa){return arguments.length?(Re=wa&&[+wa[0],+wa[1]],gr):Re},gr.duration=function(wa){return arguments.length?(Ke=+wa,gr):Ke},gr.x=function(wa){return arguments.length?(er=wa,jt=wa.copy(),Y={x:0,y:0,k:1},gr):er},gr.y=function(wa){return arguments.length?(dr=wa,rr=wa.copy(),Y={x:0,y:0,k:1},gr):dr};function tr(wa){return[(wa[0]-Y.x)/Y.k,(wa[1]-Y.y)/Y.k]}t(tr,"location");function Yr(wa){return[wa[0]*Y.k+Y.x,wa[1]*Y.k+Y.y]}t(Yr,"point");function ia(wa){Y.k=Math.max(Le[0],Math.min(Le[1],wa))}t(ia,"scaleTo");function ua(wa,En){En=Yr(En),Y.x+=wa[0]-En[0],Y.y+=wa[1]-En[1]}t(ua,"translateTo");function oa(wa,En,zn,Fn){wa.__chart__={x:Y.x,y:Y.y,k:Y.k},ia(Math.pow(2,Fn)),ua(_e=En,zn),wa=r.select(wa),Ke>0&&(wa=wa.transition().duration(Ke)),wa.call(gr.event)}t(oa,"zoomTo");function pa(){er&&er.domain(jt.range().map(function(wa){return(wa-Y.x)/Y.k}).map(jt.invert)),dr&&dr.domain(rr.range().map(function(wa){return(wa-Y.y)/Y.k}).map(rr.invert))}t(pa,"rescale");function Ya(wa){Ne++||wa({type:"zoomstart"})}t(Ya,"zoomstarted");function en(wa){pa(),wa({type:"zoom",scale:Y.k,translate:[Y.x,Y.y]})}t(en,"zoomed");function Ca(wa){--Ne||(wa({type:"zoomend"}),_e=null)}t(Ca,"zoomended");function pn(){var wa=this,En=pr.of(wa,arguments),zn=0,Fn=r.select(a(wa)).on(yt,fo).on(gt,Wi),Yi=tr(r.mouse(wa)),On=kt(wa);Ou.call(wa),Ya(En);function fo(){zn=1,ua(r.mouse(wa),Yi),en(En)}t(fo,"moved");function Wi(){Fn.on(yt,null).on(gt,null),On(zn),Ca(En)}t(Wi,"ended")}t(pn,"mousedowned");function ti(){var wa=this,En=pr.of(wa,arguments),zn={},Fn=0,Yi,On=".zoom-"+r.event.changedTouches[0].identifier,fo="touchmove"+On,Wi="touchend"+On,mo=[],No=r.select(wa),ss=kt(wa);Yt(),Ya(En),No.on(rt,null).on(Tt,Yt);function st(){var br=r.touches(wa);return Yi=Y.k,br.forEach(function(kr){kr.identifier in zn&&(zn[kr.identifier]=tr(kr))}),br}t(st,"relocate");function Yt(){var br=r.event.target;r.select(br).on(fo,Zt).on(Wi,cr),mo.push(br);for(var kr=r.event.changedTouches,Pr=0,la=kr.length;Pr<la;++Pr)zn[kr[Pr].identifier]=null;var Qr=st(),fa=Date.now();if(Qr.length===1){if(fa-or<500){var ka=Qr[0];oa(wa,ka,zn[ka.identifier],Math.floor(Math.log(Y.k)/Math.LN2)+1),G()}or=fa}else if(Qr.length>1){var ka=Qr[0],sn=Qr[1],Ra=ka[0]-sn[0],La=ka[1]-sn[1];Fn=Ra*Ra+La*La}}t(Yt,"started");function Zt(){var br=r.touches(wa),kr,Pr,la,Qr;Ou.call(wa);for(var fa=0,ka=br.length;fa<ka;++fa,Qr=null)if(la=br[fa],Qr=zn[la.identifier]){if(Pr)break;kr=la,Pr=Qr}if(Qr){var sn=(sn=la[0]-kr[0])*sn+(sn=la[1]-kr[1])*sn,Ra=Fn&&Math.sqrt(sn/Fn);kr=[(kr[0]+la[0])/2,(kr[1]+la[1])/2],Pr=[(Pr[0]+Qr[0])/2,(Pr[1]+Qr[1])/2],ia(Ra*Yi)}or=null,ua(kr,Pr),en(En)}t(Zt,"moved");function cr(){if(r.event.touches.length){for(var br=r.event.changedTouches,kr=0,Pr=br.length;kr<Pr;++kr)delete zn[br[kr].identifier];for(var la in zn)return void st()}r.selectAll(mo).on(On,null),No.on(rt,pn).on(Tt,ti),ss(),Ca(En)}t(cr,"ended")}t(ti,"touchstarted");function Hi(){var wa=pr.of(this,arguments);Ut?clearTimeout(Ut):(Ou.call(this),ve=tr(_e=Ce||r.mouse(this)),Ya(wa)),Ut=setTimeout(function(){Ut=null,Ca(wa)},50),G(),ia(Math.pow(2,ea()*.002)*Y.k),ua(_e,ve),en(wa)}t(Hi,"mousewheeled");function si(){var wa=r.mouse(this),En=Math.log(Y.k)/Math.LN2;oa(this,wa,tr(wa),r.event.shiftKey?Math.ceil(En)-1:Math.floor(En)+1)}return t(si,"dblclicked"),r.rebind(gr,pr,"on")};var Ia=[0,1/0],ea,Er;r.color=dn;function dn(){}t(dn,"d3_color"),dn.prototype.toString=function(){return this.rgb()+""},r.hsl=ya;function ya(Y,ve,_e){return this instanceof ya?(this.h=+Y,this.s=+ve,void(this.l=+_e)):arguments.length<2?Y instanceof ya?new ya(Y.h,Y.s,Y.l):Sr(""+Y,xa,ya):new ya(Y,ve,_e)}t(ya,"d3_hsl");var Hr=ya.prototype=new dn;Hr.brighter=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new ya(this.h,this.s,this.l/Y)},Hr.darker=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new ya(this.h,this.s,Y*this.l)},Hr.rgb=function(){return un(this.h,this.s,this.l)};function un(Y,ve,_e){var Ce,Re;Y=isNaN(Y)?0:(Y%=360)<0?Y+360:Y,ve=isNaN(ve)||ve<0?0:ve>1?1:ve,_e=_e<0?0:_e>1?1:_e,Re=_e<=.5?_e*(1+ve):_e+ve-_e*ve,Ce=2*_e-Re;function Le(Ne){return Ne>360?Ne-=360:Ne<0&&(Ne+=360),Ne<60?Ce+(Re-Ce)*Ne/60:Ne<180?Re:Ne<240?Ce+(Re-Ce)*(240-Ne)/60:Ce}t(Le,"v");function Ke(Ne){return Math.round(Le(Ne)*255)}return t(Ke,"vv"),new Qt(Ke(Y+120),Ke(Y),Ke(Y-120))}t(un,"d3_hsl_rgb"),r.hcl=Ea;function Ea(Y,ve,_e){return this instanceof Ea?(this.h=+Y,this.c=+ve,void(this.l=+_e)):arguments.length<2?Y instanceof Ea?new Ea(Y.h,Y.c,Y.l):Y instanceof Qe?xt(Y.l,Y.a,Y.b):xt((Y=aa((Y=r.rgb(Y)).r,Y.g,Y.b)).l,Y.a,Y.b):new Ea(Y,ve,_e)}t(Ea,"d3_hcl");var nt=Ea.prototype=new dn;nt.brighter=function(Y){return new Ea(this.h,this.c,Math.min(100,this.l+ot*(arguments.length?Y:1)))},nt.darker=function(Y){return new Ea(this.h,this.c,Math.max(0,this.l-ot*(arguments.length?Y:1)))},nt.rgb=function(){return He(this.h,this.c,this.l).rgb()};function He(Y,ve,_e){return isNaN(Y)&&(Y=0),isNaN(ve)&&(ve=0),new Qe(_e,Math.cos(Y*=_t)*ve,Math.sin(Y)*ve)}t(He,"d3_hcl_lab"),r.lab=Qe;function Qe(Y,ve,_e){return this instanceof Qe?(this.l=+Y,this.a=+ve,void(this.b=+_e)):arguments.length<2?Y instanceof Qe?new Qe(Y.l,Y.a,Y.b):Y instanceof Ea?He(Y.h,Y.c,Y.l):aa((Y=Qt(Y)).r,Y.g,Y.b):new Qe(Y,ve,_e)}t(Qe,"d3_lab");var ot=18,Ae=.95047,Se=1,je=1.08883,Xe=Qe.prototype=new dn;Xe.brighter=function(Y){return new Qe(Math.min(100,this.l+ot*(arguments.length?Y:1)),this.a,this.b)},Xe.darker=function(Y){return new Qe(Math.max(0,this.l-ot*(arguments.length?Y:1)),this.a,this.b)},Xe.rgb=function(){return ut(this.l,this.a,this.b)};function ut(Y,ve,_e){var Ce=(Y+16)/116,Re=Ce+ve/500,Le=Ce-_e/200;return Re=dt(Re)*Ae,Ce=dt(Ce)*Se,Le=dt(Le)*je,new Qt(Ht(3.2404542*Re-1.5371385*Ce-.4985314*Le),Ht(-.969266*Re+1.8760108*Ce+.041556*Le),Ht(.0556434*Re-.2040259*Ce+1.0572252*Le))}t(ut,"d3_lab_rgb");function xt(Y,ve,_e){return Y>0?new Ea(Math.atan2(_e,ve)*Rt,Math.sqrt(ve*ve+_e*_e),Y):new Ea(NaN,NaN,Y)}t(xt,"d3_lab_hcl");function dt(Y){return Y>.206893034?Y*Y*Y:(Y-4/29)/7.787037}t(dt,"d3_lab_xyz");function Ot(Y){return Y>.008856?Math.pow(Y,1/3):7.787037*Y+4/29}t(Ot,"d3_xyz_lab");function Ht(Y){return Math.round(255*(Y<=.00304?12.92*Y:1.055*Math.pow(Y,1/2.4)-.055))}t(Ht,"d3_xyz_rgb"),r.rgb=Qt;function Qt(Y,ve,_e){return this instanceof Qt?(this.r=~~Y,this.g=~~ve,void(this.b=~~_e)):arguments.length<2?Y instanceof Qt?new Qt(Y.r,Y.g,Y.b):Sr(""+Y,Qt,un):new Qt(Y,ve,_e)}t(Qt,"d3_rgb");function mr(Y){return new Qt(Y>>16,Y>>8&255,Y&255)}t(mr,"d3_rgbNumber");function xr(Y){return mr(Y)+""}t(xr,"d3_rgbString");var Lr=Qt.prototype=new dn;Lr.brighter=function(Y){Y=Math.pow(.7,arguments.length?Y:1);var ve=this.r,_e=this.g,Ce=this.b,Re=30;return!ve&&!_e&&!Ce?new Qt(Re,Re,Re):(ve&&ve<Re&&(ve=Re),_e&&_e<Re&&(_e=Re),Ce&&Ce<Re&&(Ce=Re),new Qt(Math.min(255,ve/Y),Math.min(255,_e/Y),Math.min(255,Ce/Y)))},Lr.darker=function(Y){return Y=Math.pow(.7,arguments.length?Y:1),new Qt(Y*this.r,Y*this.g,Y*this.b)},Lr.hsl=function(){return xa(this.r,this.g,this.b)},Lr.toString=function(){return"#"+Zr(this.r)+Zr(this.g)+Zr(this.b)};function Zr(Y){return Y<16?"0"+Math.max(0,Y).toString(16):Math.min(255,Y).toString(16)}t(Zr,"d3_rgb_hex");function Sr(Y,ve,_e){var Ce=0,Re=0,Le=0,Ke,Ne,rt;if(Ke=/([a-z]+)\((.*)\)/.exec(Y=Y.toLowerCase()),Ke)switch(Ne=Ke[2].split(","),Ke[1]){case"hsl":return _e(parseFloat(Ne[0]),parseFloat(Ne[1])/100,parseFloat(Ne[2])/100);case"rgb":return ve(vn(Ne[0]),vn(Ne[1]),vn(Ne[2]))}return(rt=hn.get(Y))?ve(rt.r,rt.g,rt.b):(Y!=null&&Y.charAt(0)==="#"&&!isNaN(rt=parseInt(Y.slice(1),16))&&(Y.length===4?(Ce=(rt&3840)>>4,Ce=Ce>>4|Ce,Re=rt&240,Re=Re>>4|Re,Le=rt&15,Le=Le<<4|Le):Y.length===7&&(Ce=(rt&16711680)>>16,Re=(rt&65280)>>8,Le=rt&255)),ve(Ce,Re,Le))}t(Sr,"d3_rgb_parse");function xa(Y,ve,_e){var Ce=Math.min(Y/=255,ve/=255,_e/=255),Re=Math.max(Y,ve,_e),Le=Re-Ce,Ke,Ne,rt=(Re+Ce)/2;return Le?(Ne=rt<.5?Le/(Re+Ce):Le/(2-Re-Ce),Y==Re?Ke=(ve-_e)/Le+(ve<_e?6:0):ve==Re?Ke=(_e-Y)/Le+2:Ke=(Y-ve)/Le+4,Ke*=60):(Ke=NaN,Ne=rt>0&&rt<1?0:Ke),new ya(Ke,Ne,rt)}t(xa,"d3_rgb_hsl");function aa(Y,ve,_e){Y=Sa(Y),ve=Sa(ve),_e=Sa(_e);var Ce=Ot((.4124564*Y+.3575761*ve+.1804375*_e)/Ae),Re=Ot((.2126729*Y+.7151522*ve+.072175*_e)/Se),Le=Ot((.0193339*Y+.119192*ve+.9503041*_e)/je);return Qe(116*Re-16,500*(Ce-Re),200*(Re-Le))}t(aa,"d3_rgb_lab");function Sa(Y){return(Y/=255)<=.04045?Y/12.92:Math.pow((Y+.055)/1.055,2.4)}t(Sa,"d3_rgb_xyz");function vn(Y){var ve=parseFloat(Y);return Y.charAt(Y.length-1)==="%"?Math.round(ve*2.55):ve}t(vn,"d3_rgb_parseNumber");var hn=r.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});hn.forEach(function(Y,ve){hn.set(Y,mr(ve))});function ba(Y){return typeof Y=="function"?Y:function(){return Y}}t(ba,"d3_functor"),r.functor=ba,r.xhr=Tn(R);function Tn(Y){return function(ve,_e,Ce){return arguments.length===2&&typeof _e=="function"&&(Ce=_e,_e=null),Pa(ve,_e,Y,Ce)}}t(Tn,"d3_xhrType");function Pa(Y,ve,_e,Ce){var Re={},Le=r.dispatch("beforesend","progress","load","error"),Ke={},Ne=new XMLHttpRequest,rt=null;self.XDomainRequest&&!("withCredentials"in Ne)&&/^(http(s)?:)?\/\//.test(Y)&&(Ne=new XDomainRequest),"onload"in Ne?Ne.onload=Ne.onerror=yt:Ne.onreadystatechange=function(){Ne.readyState>3&&yt()};function yt(){var gt=Ne.status,Ut;if(!gt&&In(Ne)||gt>=200&&gt<300||gt===304){try{Ut=_e.call(Re,Ne)}catch(Tt){Le.error.call(Re,Tt);return}Le.load.call(Re,Ut)}else Le.error.call(Re,Ne)}return t(yt,"respond"),Ne.onprogress=function(gt){var Ut=r.event;r.event=gt;try{Le.progress.call(Re,Ne)}finally{r.event=Ut}},Re.header=function(gt,Ut){return gt=(gt+"").toLowerCase(),arguments.length<2?Ke[gt]:(Ut==null?delete Ke[gt]:Ke[gt]=Ut+"",Re)},Re.mimeType=function(gt){return arguments.length?(ve=gt==null?null:gt+"",Re):ve},Re.responseType=function(gt){return arguments.length?(rt=gt,Re):rt},Re.response=function(gt){return _e=gt,Re},["get","post"].forEach(function(gt){Re[gt]=function(){return Re.send.apply(Re,[gt].concat(i(arguments)))}}),Re.send=function(gt,Ut,Tt){if(arguments.length===2&&typeof Ut=="function"&&(Tt=Ut,Ut=null),Ne.open(gt,Y,!0),ve!=null&&!("accept"in Ke)&&(Ke.accept=ve+",*/*"),Ne.setRequestHeader)for(var or in Ke)Ne.setRequestHeader(or,Ke[or]);return ve!=null&&Ne.overrideMimeType&&Ne.overrideMimeType(ve),rt!=null&&(Ne.responseType=rt),Tt!=null&&Re.on("error",Tt).on("load",function(pr){Tt(null,pr)}),Le.beforesend.call(Re,Ne),Ne.send(Ut==null?null:Ut),Re},Re.abort=function(){return Ne.abort(),Re},r.rebind(Re,Le,"on"),Ce==null?Re:Re.get(kn(Ce))}t(Pa,"d3_xhr");function kn(Y){return Y.length===1?function(ve,_e){Y(ve==null?_e:null)}:Y}t(kn,"d3_xhr_fixCallback");function In(Y){var ve=Y.responseType;return ve&&ve!=="text"?Y.response:Y.responseText}t(In,"d3_xhrHasResponse"),r.dsv=function(Y,ve){var _e=new RegExp('["'+Y+`
]`),Ce=Y.charCodeAt(0);function Re(yt,gt,Ut){arguments.length<3&&(Ut=gt,gt=null);var Tt=Pa(yt,ve,gt==null?Le:Ke(gt),Ut);return Tt.row=function(or){return arguments.length?Tt.response((gt=or)==null?Le:Ke(or)):gt},Tt}t(Re,"dsv");function Le(yt){return Re.parse(yt.responseText)}t(Le,"response");function Ke(yt){return function(gt){return Re.parse(gt.responseText,yt)}}t(Ke,"typedResponse"),Re.parse=function(yt,gt){var Ut;return Re.parseRows(yt,function(Tt,or){if(Ut)return Ut(Tt,or-1);var pr=t(function(jt){for(var er={},rr=Tt.length,dr=0;dr<rr;++dr)er[Tt[dr]]=jt[dr];return er},"a");Ut=gt?function(jt,er){return gt(pr(jt),er)}:pr})},Re.parseRows=function(yt,gt){var Ut={},Tt={},or=[],pr=yt.length,jt=0,er=0,rr,dr;function gr(){if(jt>=pr)return Tt;if(dr)return dr=!1,Ut;var Yr=jt;if(yt.charCodeAt(Yr)===34){for(var ia=Yr;ia++<pr;)if(yt.charCodeAt(ia)===34){if(yt.charCodeAt(ia+1)!==34)break;++ia}jt=ia+2;var ua=yt.charCodeAt(ia+1);return ua===13?(dr=!0,yt.charCodeAt(ia+2)===10&&++jt):ua===10&&(dr=!0),yt.slice(Yr+1,ia).replace(/""/g,'"')}for(;jt<pr;){var ua=yt.charCodeAt(jt++),oa=1;if(ua===10)dr=!0;else if(ua===13)dr=!0,yt.charCodeAt(jt)===10&&(++jt,++oa);else if(ua!==Ce)continue;return yt.slice(Yr,jt-oa)}return yt.slice(Yr)}for(t(gr,"token");(rr=gr())!==Tt;){for(var tr=[];rr!==Ut&&rr!==Tt;)tr.push(rr),rr=gr();gt&&(tr=gt(tr,er++))==null||or.push(tr)}return or},Re.format=function(yt){if(Array.isArray(yt[0]))return Re.formatRows(yt);var gt=new z,Ut=[];return yt.forEach(function(Tt){for(var or in Tt)gt.has(or)||Ut.push(gt.add(or))}),[Ut.map(rt).join(Y)].concat(yt.map(function(Tt){return Ut.map(function(or){return rt(Tt[or])}).join(Y)})).join(`
`)},Re.formatRows=function(yt){return yt.map(Ne).join(`
`)};function Ne(yt){return yt.map(rt).join(Y)}t(Ne,"formatRow");function rt(yt){return _e.test(yt)?'"'+yt.replace(/\"/g,'""')+'"':yt}return t(rt,"formatValue"),Re},r.csv=r.dsv(",","text/csv"),r.tsv=r.dsv("	","text/tab-separated-values");var ln,Pn,Fa,Ka,Ja=this[O(this,"requestAnimationFrame")]||function(Y){setTimeout(Y,17)};r.timer=function(){Xn.apply(this,arguments)};function Xn(Y,ve,_e){var Ce=arguments.length;Ce<2&&(ve=0),Ce<3&&(_e=Date.now());var Re=_e+ve,Le={c:Y,t:Re,n:null};return Pn?Pn.n=Le:ln=Le,Pn=Le,Fa||(Ka=clearTimeout(Ka),Fa=1,Ja(Ln)),Le}t(Xn,"d3_timer");function Ln(){var Y=ni(),ve=$i()-Y;ve>24?(isFinite(ve)&&(clearTimeout(Ka),Ka=setTimeout(Ln,ve)),Fa=0):(Fa=1,Ja(Ln))}t(Ln,"d3_timer_step"),r.timer.flush=function(){ni(),$i()};function ni(){for(var Y=Date.now(),ve=ln;ve;)Y>=ve.t&&ve.c(Y-ve.t)&&(ve.c=null),ve=ve.n;return Y}t(ni,"d3_timer_mark");function $i(){for(var Y,ve=ln,_e=1/0;ve;)ve.c?(ve.t<_e&&(_e=ve.t),ve=(Y=ve).n):ve=Y?Y.n=ve.n:ln=ve.n;return Pn=Y,_e}t($i,"d3_timer_sweep"),r.round=function(Y,ve){return ve?Math.round(Y*(ve=Math.pow(10,ve)))/ve:Math.round(Y)},r.geom={};function Vi(Y){return Y[0]}t(Vi,"d3_geom_pointX");function Ai(Y){return Y[1]}t(Ai,"d3_geom_pointY"),r.geom.hull=function(Y){var ve=Vi,_e=Ai;if(arguments.length)return Ce(Y);function Ce(Re){if(Re.length<3)return[];var Le=ba(ve),Ke=ba(_e),Ne,rt=Re.length,yt=[],gt=[];for(Ne=0;Ne<rt;Ne++)yt.push([+Le.call(this,Re[Ne],Ne),+Ke.call(this,Re[Ne],Ne),Ne]);for(yt.sort(eo),Ne=0;Ne<rt;Ne++)gt.push([yt[Ne][0],-yt[Ne][1]]);var Ut=_s(yt),Tt=_s(gt),or=Tt[0]===Ut[0],pr=Tt[Tt.length-1]===Ut[Ut.length-1],jt=[];for(Ne=Ut.length-1;Ne>=0;--Ne)jt.push(Re[yt[Ut[Ne]][2]]);for(Ne=+or;Ne<Tt.length-pr;++Ne)jt.push(Re[yt[Tt[Ne]][2]]);return jt}return t(Ce,"hull"),Ce.x=function(Re){return arguments.length?(ve=Re,Ce):ve},Ce.y=function(Re){return arguments.length?(_e=Re,Ce):_e},Ce};function _s(Y){for(var ve=Y.length,_e=[0,1],Ce=2,Re=2;Re<ve;Re++){for(;Ce>1&&nr(Y[_e[Ce-2]],Y[_e[Ce-1]],Y[Re])<=0;)--Ce;_e[Ce++]=Re}return _e.slice(0,Ce)}t(_s,"d3_geom_hullUpper");function eo(Y,ve){return Y[0]-ve[0]||Y[1]-ve[1]}t(eo,"d3_geom_hullOrder"),r.geom.polygon=function(Y){return ie(Y,lo),Y};var lo=r.geom.polygon.prototype=[];lo.area=function(){for(var Y=-1,ve=this.length,_e,Ce=this[ve-1],Re=0;++Y<ve;)_e=Ce,Ce=this[Y],Re+=_e[1]*Ce[0]-_e[0]*Ce[1];return Re*.5},lo.centroid=function(Y){var ve=-1,_e=this.length,Ce=0,Re=0,Le,Ke=this[_e-1],Ne;for(arguments.length||(Y=-1/(6*this.area()));++ve<_e;)Le=Ke,Ke=this[ve],Ne=Le[0]*Ke[1]-Ke[0]*Le[1],Ce+=(Le[0]+Ke[0])*Ne,Re+=(Le[1]+Ke[1])*Ne;return[Ce*Y,Re*Y]},lo.clip=function(Y){for(var ve,_e=bl(Y),Ce=-1,Re=this.length-bl(this),Le,Ke,Ne=this[Re-1],rt,yt,gt;++Ce<Re;){for(ve=Y.slice(),Y.length=0,rt=this[Ce],yt=ve[(Ke=ve.length-_e)-1],Le=-1;++Le<Ke;)gt=ve[Le],Eo(gt,Ne,rt)?(Eo(yt,Ne,rt)||Y.push(Li(yt,gt,Ne,rt)),Y.push(gt)):Eo(yt,Ne,rt)&&Y.push(Li(yt,gt,Ne,rt)),yt=gt;_e&&Y.push(Y[0]),Ne=rt}return Y};function Eo(Y,ve,_e){return(_e[0]-ve[0])*(Y[1]-ve[1])<(_e[1]-ve[1])*(Y[0]-ve[0])}t(Eo,"d3_geom_polygonInside");function Li(Y,ve,_e,Ce){var Re=Y[0],Le=_e[0],Ke=ve[0]-Re,Ne=Ce[0]-Le,rt=Y[1],yt=_e[1],gt=ve[1]-rt,Ut=Ce[1]-yt,Tt=(Ne*(rt-yt)-Ut*(Re-Le))/(Ut*Ke-Ne*gt);return[Re+Tt*Ke,rt+Tt*gt]}t(Li,"d3_geom_polygonIntersect");function bl(Y){var ve=Y[0],_e=Y[Y.length-1];return!(ve[0]-_e[0]||ve[1]-_e[1])}t(bl,"d3_geom_polygonClosed");var Us,pi,po,wo=[],Ds,To,uo=[];function Pf(){Ul(this),this.edge=this.site=this.circle=null}t(Pf,"d3_geom_voronoiBeach");function Nl(Y){var ve=wo.pop()||new Pf;return ve.site=Y,ve}t(Nl,"d3_geom_voronoiCreateBeach");function qi(Y){Jo(Y),po.remove(Y),wo.push(Y),Ul(Y)}t(qi,"d3_geom_voronoiDetachBeach");function Hs(Y){var ve=Y.circle,_e=ve.x,Ce=ve.cy,Re={x:_e,y:Ce},Le=Y.P,Ke=Y.N,Ne=[Y];qi(Y);for(var rt=Le;rt.circle&&y(_e-rt.circle.x)<Et&&y(Ce-rt.circle.cy)<Et;)Le=rt.P,Ne.unshift(rt),qi(rt),rt=Le;Ne.unshift(rt),Jo(rt);for(var yt=Ke;yt.circle&&y(_e-yt.circle.x)<Et&&y(Ce-yt.circle.cy)<Et;)Ke=yt.N,Ne.push(yt),qi(yt),yt=Ke;Ne.push(yt),Jo(yt);var gt=Ne.length,Ut;for(Ut=1;Ut<gt;++Ut)yt=Ne[Ut],rt=Ne[Ut-1],tf(yt.edge,rt.site,yt.site,Re);rt=Ne[0],yt=Ne[gt-1],yt.edge=nl(rt.site,yt.site,null,Re),$s(rt),$s(yt)}t(Hs,"d3_geom_voronoiRemoveBeach");function Wr(Y){for(var ve=Y.x,_e=Y.y,Ce,Re,Le,Ke,Ne=po._;Ne;)if(Le=Ma(Ne,_e)-ve,Le>Et)Ne=Ne.L;else if(Ke=ve-go(Ne,_e),Ke>Et){if(!Ne.R){Ce=Ne;break}Ne=Ne.R}else{Le>-Et?(Ce=Ne.P,Re=Ne):Ke>-Et?(Ce=Ne,Re=Ne.N):Ce=Re=Ne;break}var rt=Nl(Y);if(po.insert(Ce,rt),!(!Ce&&!Re)){if(Ce===Re){Jo(Ce),Re=Nl(Ce.site),po.insert(rt,Re),rt.edge=Re.edge=nl(Ce.site,rt.site),$s(Ce),$s(Re);return}if(!Re){rt.edge=nl(Ce.site,rt.site);return}Jo(Ce),Jo(Re);var yt=Ce.site,gt=yt.x,Ut=yt.y,Tt=Y.x-gt,or=Y.y-Ut,pr=Re.site,jt=pr.x-gt,er=pr.y-Ut,rr=2*(Tt*er-or*jt),dr=Tt*Tt+or*or,gr=jt*jt+er*er,tr={x:(er*dr-or*gr)/rr+gt,y:(Tt*gr-jt*dr)/rr+Ut};tf(Re.edge,yt,pr,tr),rt.edge=nl(yt,Y,null,tr),Re.edge=nl(Y,pr,null,tr),$s(Ce),$s(Re)}}t(Wr,"d3_geom_voronoiAddBeach");function Ma(Y,ve){var _e=Y.site,Ce=_e.x,Re=_e.y,Le=Re-ve;if(!Le)return Ce;var Ke=Y.P;if(!Ke)return-1/0;_e=Ke.site;var Ne=_e.x,rt=_e.y,yt=rt-ve;if(!yt)return Ne;var gt=Ne-Ce,Ut=1/Le-1/yt,Tt=gt/yt;return Ut?(-Tt+Math.sqrt(Tt*Tt-2*Ut*(gt*gt/(-2*yt)-rt+yt/2+Re-Le/2)))/Ut+Ce:(Ce+Ne)/2}t(Ma,"d3_geom_voronoiLeftBreakPoint");function go(Y,ve){var _e=Y.N;if(_e)return Ma(_e,ve);var Ce=Y.site;return Ce.y===ve?Ce.x:1/0}t(go,"d3_geom_voronoiRightBreakPoint");function Gi(Y){this.site=Y,this.edges=[]}t(Gi,"d3_geom_voronoiCell"),Gi.prototype.prepare=function(){for(var Y=this.edges,ve=Y.length,_e;ve--;)_e=Y[ve].edge,(!_e.b||!_e.a)&&Y.splice(ve,1);return Y.sort(_l),Y.length};function Ri(Y){for(var ve=Y[0][0],_e=Y[1][0],Ce=Y[0][1],Re=Y[1][1],Le,Ke,Ne,rt,yt=pi,gt=yt.length,Ut,Tt,or,pr,jt,er;gt--;)if(Ut=yt[gt],!(!Ut||!Ut.prepare()))for(or=Ut.edges,pr=or.length,Tt=0;Tt<pr;)er=or[Tt].end(),Ne=er.x,rt=er.y,jt=or[++Tt%pr].start(),Le=jt.x,Ke=jt.y,(y(Ne-Le)>Et||y(rt-Ke)>Et)&&(or.splice(Tt,0,new rf(Kn(Ut.site,er,y(Ne-ve)<Et&&Re-rt>Et?{x:ve,y:y(Le-ve)<Et?Ke:Re}:y(rt-Re)<Et&&_e-Ne>Et?{x:y(Ke-Re)<Et?Le:_e,y:Re}:y(Ne-_e)<Et&&rt-Ce>Et?{x:_e,y:y(Le-_e)<Et?Ke:Ce}:y(rt-Ce)<Et&&Ne-ve>Et?{x:y(Ke-Ce)<Et?Le:ve,y:Ce}:null),Ut.site,null)),++pr)}t(Ri,"d3_geom_voronoiCloseCells");function _l(Y,ve){return ve.angle-Y.angle}t(_l,"d3_geom_voronoiHalfEdgeOrder");function is(){Ul(this),this.x=this.y=this.arc=this.site=this.cy=null}t(is,"d3_geom_voronoiCircle");function $s(Y){var ve=Y.P,_e=Y.N;if(!(!ve||!_e)){var Ce=ve.site,Re=Y.site,Le=_e.site;if(Ce!==Le){var Ke=Re.x,Ne=Re.y,rt=Ce.x-Ke,yt=Ce.y-Ne,gt=Le.x-Ke,er=Le.y-Ne,Ut=2*(rt*er-yt*gt);if(!(Ut>=-Wt)){var Tt=rt*rt+yt*yt,or=gt*gt+er*er,pr=(er*Tt-yt*or)/Ut,jt=(rt*or-gt*Tt)/Ut,er=jt+Ne,rr=uo.pop()||new is;rr.arc=Y,rr.site=Re,rr.x=pr+Ke,rr.y=er+Math.sqrt(pr*pr+jt*jt),rr.cy=er,Y.circle=rr;for(var dr=null,gr=To._;gr;)if(rr.y<gr.y||rr.y===gr.y&&rr.x<=gr.x)if(gr.L)gr=gr.L;else{dr=gr.P;break}else if(gr.R)gr=gr.R;else{dr=gr;break}To.insert(dr,rr),dr||(Ds=rr)}}}}t($s,"d3_geom_voronoiAttachCircle");function Jo(Y){var ve=Y.circle;ve&&(ve.P||(Ds=ve.N),To.remove(ve),uo.push(ve),Ul(ve),Y.circle=null)}t(Jo,"d3_geom_voronoiDetachCircle");function Ga(Y,ve,_e,Ce){return function(Re){var Le=Re.a,Ke=Re.b,Ne=Le.x,rt=Le.y,yt=Ke.x,gt=Ke.y,Ut=0,Tt=1,or=yt-Ne,pr=gt-rt,jt;if(jt=Y-Ne,!(!or&&jt>0)){if(jt/=or,or<0){if(jt<Ut)return;jt<Tt&&(Tt=jt)}else if(or>0){if(jt>Tt)return;jt>Ut&&(Ut=jt)}if(jt=_e-Ne,!(!or&&jt<0)){if(jt/=or,or<0){if(jt>Tt)return;jt>Ut&&(Ut=jt)}else if(or>0){if(jt<Ut)return;jt<Tt&&(Tt=jt)}if(jt=ve-rt,!(!pr&&jt>0)){if(jt/=pr,pr<0){if(jt<Ut)return;jt<Tt&&(Tt=jt)}else if(pr>0){if(jt>Tt)return;jt>Ut&&(Ut=jt)}if(jt=Ce-rt,!(!pr&&jt<0)){if(jt/=pr,pr<0){if(jt>Tt)return;jt>Ut&&(Ut=jt)}else if(pr>0){if(jt<Ut)return;jt<Tt&&(Tt=jt)}return Ut>0&&(Re.a={x:Ne+Ut*or,y:rt+Ut*pr}),Tt<1&&(Re.b={x:Ne+Tt*or,y:rt+Tt*pr}),Re}}}}}}t(Ga,"d3_geom_clipLine");function Yn(Y){for(var ve=Us,_e=Ga(Y[0][0],Y[0][1],Y[1][0],Y[1][1]),Ce=ve.length,Re;Ce--;)Re=ve[Ce],(!Bn(Re,Y)||!_e(Re)||y(Re.a.x-Re.b.x)<Et&&y(Re.a.y-Re.b.y)<Et)&&(Re.a=Re.b=null,ve.splice(Ce,1))}t(Yn,"d3_geom_voronoiClipEdges");function Bn(Y,ve){var _e=Y.b;if(_e)return!0;var Ce=Y.a,Re=ve[0][0],Le=ve[1][0],Ke=ve[0][1],Ne=ve[1][1],rt=Y.l,yt=Y.r,gt=rt.x,Ut=rt.y,Tt=yt.x,or=yt.y,pr=(gt+Tt)/2,jt=(Ut+or)/2,er,rr;if(or===Ut){if(pr<Re||pr>=Le)return;if(gt>Tt){if(!Ce)Ce={x:pr,y:Ke};else if(Ce.y>=Ne)return;_e={x:pr,y:Ne}}else{if(!Ce)Ce={x:pr,y:Ne};else if(Ce.y<Ke)return;_e={x:pr,y:Ke}}}else if(er=(gt-Tt)/(or-Ut),rr=jt-er*pr,er<-1||er>1)if(gt>Tt){if(!Ce)Ce={x:(Ke-rr)/er,y:Ke};else if(Ce.y>=Ne)return;_e={x:(Ne-rr)/er,y:Ne}}else{if(!Ce)Ce={x:(Ne-rr)/er,y:Ne};else if(Ce.y<Ke)return;_e={x:(Ke-rr)/er,y:Ke}}else if(Ut<or){if(!Ce)Ce={x:Re,y:er*Re+rr};else if(Ce.x>=Le)return;_e={x:Le,y:er*Le+rr}}else{if(!Ce)Ce={x:Le,y:er*Le+rr};else if(Ce.x<Re)return;_e={x:Re,y:er*Re+rr}}return Y.a=Ce,Y.b=_e,!0}t(Bn,"d3_geom_voronoiConnectEdge");function wl(Y,ve){this.l=Y,this.r=ve,this.a=this.b=null}t(wl,"d3_geom_voronoiEdge");function nl(Y,ve,_e,Ce){var Re=new wl(Y,ve);return Us.push(Re),_e&&tf(Re,Y,ve,_e),Ce&&tf(Re,ve,Y,Ce),pi[Y.i].edges.push(new rf(Re,Y,ve)),pi[ve.i].edges.push(new rf(Re,ve,Y)),Re}t(nl,"d3_geom_voronoiCreateEdge");function Kn(Y,ve,_e){var Ce=new wl(Y,null);return Ce.a=ve,Ce.b=_e,Us.push(Ce),Ce}t(Kn,"d3_geom_voronoiCreateBorderEdge");function tf(Y,ve,_e,Ce){!Y.a&&!Y.b?(Y.a=Ce,Y.l=ve,Y.r=_e):Y.l===_e?Y.b=Ce:Y.a=Ce}t(tf,"d3_geom_voronoiSetEdgeEnd");function rf(Y,ve,_e){var Ce=Y.a,Re=Y.b;this.edge=Y,this.site=ve,this.angle=_e?Math.atan2(_e.y-ve.y,_e.x-ve.x):Y.l===ve?Math.atan2(Re.x-Ce.x,Ce.y-Re.y):Math.atan2(Ce.x-Re.x,Re.y-Ce.y)}t(rf,"d3_geom_voronoiHalfEdge"),rf.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ql(){this._=null}t(ql,"d3_geom_voronoiRedBlackTree");function Ul(Y){Y.U=Y.C=Y.L=Y.R=Y.P=Y.N=null}t(Ul,"d3_geom_voronoiRedBlackNode"),ql.prototype={insert:function(Y,ve){var _e,Ce,Re;if(Y){if(ve.P=Y,ve.N=Y.N,Y.N&&(Y.N.P=ve),Y.N=ve,Y.R){for(Y=Y.R;Y.L;)Y=Y.L;Y.L=ve}else Y.R=ve;_e=Y}else this._?(Y=Fh(this._),ve.P=null,ve.N=Y,Y.P=Y.L=ve,_e=Y):(ve.P=ve.N=null,this._=ve,_e=null);for(ve.L=ve.R=null,ve.U=_e,ve.C=!0,Y=ve;_e&&_e.C;)Ce=_e.U,_e===Ce.L?(Re=Ce.R,Re&&Re.C?(_e.C=Re.C=!1,Ce.C=!0,Y=Ce):(Y===_e.R&&(Co(this,_e),Y=_e,_e=Y.U),_e.C=!1,Ce.C=!0,Di(this,Ce))):(Re=Ce.L,Re&&Re.C?(_e.C=Re.C=!1,Ce.C=!0,Y=Ce):(Y===_e.L&&(Di(this,_e),Y=_e,_e=Y.U),_e.C=!1,Ce.C=!0,Co(this,Ce))),_e=Y.U;this._.C=!1},remove:function(Y){Y.N&&(Y.N.P=Y.P),Y.P&&(Y.P.N=Y.N),Y.N=Y.P=null;var ve=Y.U,_e,Ce=Y.L,Re=Y.R,Le,Ke;if(Ce?Re?Le=Fh(Re):Le=Ce:Le=Re,ve?ve.L===Y?ve.L=Le:ve.R=Le:this._=Le,Ce&&Re?(Ke=Le.C,Le.C=Y.C,Le.L=Ce,Ce.U=Le,Le!==Re?(ve=Le.U,Le.U=Y.U,Y=Le.R,ve.L=Y,Le.R=Re,Re.U=Le):(Le.U=ve,ve=Le,Y=Le.R)):(Ke=Y.C,Y=Le),Y&&(Y.U=ve),!Ke){if(Y&&Y.C){Y.C=!1;return}do{if(Y===this._)break;if(Y===ve.L){if(_e=ve.R,_e.C&&(_e.C=!1,ve.C=!0,Co(this,ve),_e=ve.R),_e.L&&_e.L.C||_e.R&&_e.R.C){(!_e.R||!_e.R.C)&&(_e.L.C=!1,_e.C=!0,Di(this,_e),_e=ve.R),_e.C=ve.C,ve.C=_e.R.C=!1,Co(this,ve),Y=this._;break}}else if(_e=ve.L,_e.C&&(_e.C=!1,ve.C=!0,Di(this,ve),_e=ve.L),_e.L&&_e.L.C||_e.R&&_e.R.C){(!_e.L||!_e.L.C)&&(_e.R.C=!1,_e.C=!0,Co(this,_e),_e=ve.L),_e.C=ve.C,ve.C=_e.L.C=!1,Di(this,ve),Y=this._;break}_e.C=!0,Y=ve,ve=ve.U}while(!Y.C);Y&&(Y.C=!1)}}};function Co(Y,ve){var _e=ve,Ce=ve.R,Re=_e.U;Re?Re.L===_e?Re.L=Ce:Re.R=Ce:Y._=Ce,Ce.U=Re,_e.U=Ce,_e.R=Ce.L,_e.R&&(_e.R.U=_e),Ce.L=_e}t(Co,"d3_geom_voronoiRedBlackRotateLeft");function Di(Y,ve){var _e=ve,Ce=ve.L,Re=_e.U;Re?Re.L===_e?Re.L=Ce:Re.R=Ce:Y._=Ce,Ce.U=Re,_e.U=Ce,_e.L=Ce.R,_e.L&&(_e.L.U=_e),Ce.R=_e}t(Di,"d3_geom_voronoiRedBlackRotateRight");function Fh(Y){for(;Y.L;)Y=Y.L;return Y}t(Fh,"d3_geom_voronoiRedBlackFirst");function af(Y,ve){var _e=Y.sort(Au).pop(),Ce,Re,Le;for(Us=[],pi=new Array(Y.length),po=new ql,To=new ql;;)if(Le=Ds,_e&&(!Le||_e.y<Le.y||_e.y===Le.y&&_e.x<Le.x))(_e.x!==Ce||_e.y!==Re)&&(pi[_e.i]=new Gi(_e),Wr(_e),Ce=_e.x,Re=_e.y),_e=Y.pop();else if(Le)Hs(Le.arc);else break;ve&&(Yn(ve),Ri(ve));var Ke={cells:pi,edges:Us};return po=To=Us=pi=null,Ke}t(af,"d3_geom_voronoi");function Au(Y,ve){return ve.y-Y.y||ve.x-Y.x}t(Au,"d3_geom_voronoiVertexOrder"),r.geom.voronoi=function(Y){var ve=Vi,_e=Ai,Ce=ve,Re=_e,Le=Tl;if(Y)return Ke(Y);function Ke(rt){var yt=new Array(rt.length),gt=Le[0][0],Ut=Le[0][1],Tt=Le[1][0],or=Le[1][1];return af(Ne(rt),Le).cells.forEach(function(pr,jt){var er=pr.edges,rr=pr.site,dr=yt[jt]=er.length?er.map(function(gr){var tr=gr.start();return[tr.x,tr.y]}):rr.x>=gt&&rr.x<=Tt&&rr.y>=Ut&&rr.y<=or?[[gt,or],[Tt,or],[Tt,Ut],[gt,Ut]]:[];dr.point=rt[jt]}),yt}t(Ke,"voronoi");function Ne(rt){return rt.map(function(yt,gt){return{x:Math.round(Ce(yt,gt)/Et)*Et,y:Math.round(Re(yt,gt)/Et)*Et,i:gt}})}return t(Ne,"sites"),Ke.links=function(rt){return af(Ne(rt)).edges.filter(function(yt){return yt.l&&yt.r}).map(function(yt){return{source:rt[yt.l.i],target:rt[yt.r.i]}})},Ke.triangles=function(rt){var yt=[];return af(Ne(rt)).cells.forEach(function(gt,Ut){for(var Tt=gt.site,or=gt.edges.sort(_l),pr=-1,jt=or.length,er,rr=or[jt-1].edge,dr=rr.l===Tt?rr.r:rr.l;++pr<jt;)er=dr,rr=or[pr].edge,dr=rr.l===Tt?rr.r:rr.l,Ut<er.i&&Ut<dr.i&&Mp(Tt,er,dr)<0&&yt.push([rt[Ut],rt[er.i],rt[dr.i]])}),yt},Ke.x=function(rt){return arguments.length?(Ce=ba(ve=rt),Ke):ve},Ke.y=function(rt){return arguments.length?(Re=ba(_e=rt),Ke):_e},Ke.clipExtent=function(rt){return arguments.length?(Le=rt==null?Tl:rt,Ke):Le===Tl?null:Le},Ke.size=function(rt){return arguments.length?Ke.clipExtent(rt&&[[0,0],rt]):Le===Tl?null:Le&&Le[1]},Ke};var Tl=[[-1e6,-1e6],[1e6,1e6]];function Mp(Y,ve,_e){return(Y.x-_e.x)*(ve.y-Y.y)-(Y.x-ve.x)*(_e.y-Y.y)}t(Mp,"d3_geom_voronoiTriangleArea"),r.geom.delaunay=function(Y){return r.geom.voronoi().triangles(Y)},r.geom.quadtree=function(Y,ve,_e,Ce,Re){var Le=Vi,Ke=Ai,Ne;if(Ne=arguments.length)return Le=Vc,Ke=yi,Ne===3&&(Re=_e,Ce=ve,_e=ve=0),rt(Y);function rt(yt){var gt,Ut=ba(Le),Tt=ba(Ke),or,pr,jt,er,rr,dr,gr,tr;if(ve!=null)rr=ve,dr=_e,gr=Ce,tr=Re;else if(gr=tr=-(rr=dr=1/0),or=[],pr=[],er=yt.length,Ne)for(jt=0;jt<er;++jt)gt=yt[jt],gt.x<rr&&(rr=gt.x),gt.y<dr&&(dr=gt.y),gt.x>gr&&(gr=gt.x),gt.y>tr&&(tr=gt.y),or.push(gt.x),pr.push(gt.y);else for(jt=0;jt<er;++jt){var Yr=+Ut(gt=yt[jt],jt),ia=+Tt(gt,jt);Yr<rr&&(rr=Yr),ia<dr&&(dr=ia),Yr>gr&&(gr=Yr),ia>tr&&(tr=ia),or.push(Yr),pr.push(ia)}var ua=gr-rr,oa=tr-dr;ua>oa?tr=dr+ua:gr=rr+oa;function pa(Ca,pn,ti,Hi,si,wa,En,zn){if(!(isNaN(ti)||isNaN(Hi)))if(Ca.leaf){var Fn=Ca.x,Yi=Ca.y;if(Fn!=null)if(y(Fn-ti)+y(Yi-Hi)<.01)Ya(Ca,pn,ti,Hi,si,wa,En,zn);else{var On=Ca.point;Ca.x=Ca.y=Ca.point=null,Ya(Ca,On,Fn,Yi,si,wa,En,zn),Ya(Ca,pn,ti,Hi,si,wa,En,zn)}else Ca.x=ti,Ca.y=Hi,Ca.point=pn}else Ya(Ca,pn,ti,Hi,si,wa,En,zn)}t(pa,"insert");function Ya(Ca,pn,ti,Hi,si,wa,En,zn){var Fn=(si+En)*.5,Yi=(wa+zn)*.5,On=ti>=Fn,fo=Hi>=Yi,Wi=fo<<1|On;Ca.leaf=!1,Ca=Ca.nodes[Wi]||(Ca.nodes[Wi]=oc()),On?si=Fn:En=Fn,fo?wa=Yi:zn=Yi,pa(Ca,pn,ti,Hi,si,wa,En,zn)}t(Ya,"insertChild");var en=oc();if(en.add=function(Ca){pa(en,Ca,+Ut(Ca,++jt),+Tt(Ca,jt),rr,dr,gr,tr)},en.visit=function(Ca){Df(Ca,en,rr,dr,gr,tr)},en.find=function(Ca){return Qo(en,Ca[0],Ca[1],rr,dr,gr,tr)},jt=-1,ve==null){for(;++jt<er;)pa(en,yt[jt],or[jt],pr[jt],rr,dr,gr,tr);--jt}else yt.forEach(en.add);return or=pr=yt=gt=null,en}return t(rt,"quadtree"),rt.x=function(yt){return arguments.length?(Le=yt,rt):Le},rt.y=function(yt){return arguments.length?(Ke=yt,rt):Ke},rt.extent=function(yt){return arguments.length?(yt==null?ve=_e=Ce=Re=null:(ve=+yt[0][0],_e=+yt[0][1],Ce=+yt[1][0],Re=+yt[1][1]),rt):ve==null?null:[[ve,_e],[Ce,Re]]},rt.size=function(yt){return arguments.length?(yt==null?ve=_e=Ce=Re=null:(ve=_e=0,Ce=+yt[0],Re=+yt[1]),rt):ve==null?null:[Ce-ve,Re-_e]},rt};function Vc(Y){return Y.x}t(Vc,"d3_geom_quadtreeCompatX");function yi(Y){return Y.y}t(yi,"d3_geom_quadtreeCompatY");function oc(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}t(oc,"d3_geom_quadtreeNode");function Df(Y,ve,_e,Ce,Re,Le){if(!Y(ve,_e,Ce,Re,Le)){var Ke=(_e+Re)*.5,Ne=(Ce+Le)*.5,rt=ve.nodes;rt[0]&&Df(Y,rt[0],_e,Ce,Ke,Ne),rt[1]&&Df(Y,rt[1],Ke,Ce,Re,Ne),rt[2]&&Df(Y,rt[2],_e,Ne,Ke,Le),rt[3]&&Df(Y,rt[3],Ke,Ne,Re,Le)}}t(Df,"d3_geom_quadtreeVisit");function Qo(Y,ve,_e,Ce,Re,Le,Ke){var Ne=1/0,rt;return t(function yt(gt,Ut,Tt,or,pr){if(!(Ut>Le||Tt>Ke||or<Ce||pr<Re)){if(jt=gt.point){var jt,er=ve-gt.x,rr=_e-gt.y,dr=er*er+rr*rr;if(dr<Ne){var gr=Math.sqrt(Ne=dr);Ce=ve-gr,Re=_e-gr,Le=ve+gr,Ke=_e+gr,rt=jt}}for(var tr=gt.nodes,Yr=(Ut+or)*.5,ia=(Tt+pr)*.5,ua=ve>=Yr,oa=_e>=ia,pa=oa<<1|ua,Ya=pa+4;pa<Ya;++pa)if(gt=tr[pa&3])switch(pa&3){case 0:yt(gt,Ut,Tt,Yr,ia);break;case 1:yt(gt,Yr,Tt,or,ia);break;case 2:yt(gt,Ut,ia,Yr,pr);break;case 3:yt(gt,Yr,ia,or,pr);break}}},"find")(Y,Ce,Re,Le,Ke),rt}t(Qo,"d3_geom_quadtreeFind"),r.interpolateRgb=ws;function ws(Y,ve){Y=r.rgb(Y),ve=r.rgb(ve);var _e=Y.r,Ce=Y.g,Re=Y.b,Le=ve.r-_e,Ke=ve.g-Ce,Ne=ve.b-Re;return function(rt){return"#"+Zr(Math.round(_e+Le*rt))+Zr(Math.round(Ce+Ke*rt))+Zr(Math.round(Re+Ne*rt))}}t(ws,"d3_interpolateRgb"),r.interpolateObject=_v;function _v(Y,ve){var _e={},Ce={},Re;for(Re in Y)Re in ve?_e[Re]=Ui(Y[Re],ve[Re]):Ce[Re]=Y[Re];for(Re in ve)Re in Y||(Ce[Re]=ve[Re]);return function(Le){for(Re in _e)Ce[Re]=_e[Re](Le);return Ce}}t(_v,"d3_interpolateObject"),r.interpolateNumber=Al;function Al(Y,ve){return Y=+Y,ve=+ve,function(_e){return Y*(1-_e)+ve*_e}}t(Al,"d3_interpolateNumber"),r.interpolateString=Ao;function Ao(Y,ve){var _e=Hl.lastIndex=il.lastIndex=0,Ce,Re,Le,Ke=-1,Ne=[],rt=[];for(Y=Y+"",ve=ve+"";(Ce=Hl.exec(Y))&&(Re=il.exec(ve));)(Le=Re.index)>_e&&(Le=ve.slice(_e,Le),Ne[Ke]?Ne[Ke]+=Le:Ne[++Ke]=Le),(Ce=Ce[0])===(Re=Re[0])?Ne[Ke]?Ne[Ke]+=Re:Ne[++Ke]=Re:(Ne[++Ke]=null,rt.push({i:Ke,x:Al(Ce,Re)})),_e=il.lastIndex;return _e<ve.length&&(Le=ve.slice(_e),Ne[Ke]?Ne[Ke]+=Le:Ne[++Ke]=Le),Ne.length<2?rt[0]?(ve=rt[0].x,function(yt){return ve(yt)+""}):function(){return ve}:(ve=rt.length,function(yt){for(var gt=0,Ut;gt<ve;++gt)Ne[(Ut=rt[gt]).i]=Ut.x(yt);return Ne.join("")})}t(Ao,"d3_interpolateString");var Hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,il=new RegExp(Hl.source,"g");r.interpolate=Ui;function Ui(Y,ve){for(var _e=r.interpolators.length,Ce;--_e>=0&&!(Ce=r.interpolators[_e](Y,ve)););return Ce}t(Ui,"d3_interpolate"),r.interpolators=[function(Y,ve){var _e=typeof ve;return(_e==="string"?hn.has(ve.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ve)?ws:Ao:ve instanceof dn?ws:Array.isArray(ve)?Ts:_e==="object"&&isNaN(ve)?_v:Al)(Y,ve)}],r.interpolateArray=Ts;function Ts(Y,ve){var _e=[],Ce=[],Re=Y.length,Le=ve.length,Ke=Math.min(Y.length,ve.length),Ne;for(Ne=0;Ne<Ke;++Ne)_e.push(Ui(Y[Ne],ve[Ne]));for(;Ne<Re;++Ne)Ce[Ne]=Y[Ne];for(;Ne<Le;++Ne)Ce[Ne]=ve[Ne];return function(rt){for(Ne=0;Ne<Ke;++Ne)Ce[Ne]=_e[Ne](rt);return Ce}}t(Ts,"d3_interpolateArray");var Lo=t(function(){return R},"d3_ease_default"),Ql=r.map({linear:Lo,poly:to,quad:function(){return Mu},cubic:function(){return os},sin:function(){return ku},exp:function(){return Bh},circle:function(){return If},elastic:bd,back:Gc,bounce:function(){return kp}}),Su=r.map({in:R,out:Vs,"in-out":wv,"out-in":function(Y){return wv(Vs(Y))}});r.ease=function(Y){var ve=Y.indexOf("-"),_e=ve>=0?Y.slice(0,ve):Y,Ce=ve>=0?Y.slice(ve+1):"in";return _e=Ql.get(_e)||Lo,Ce=Su.get(Ce)||R,xd(Ce(_e.apply(null,n.call(arguments,1))))};function xd(Y){return function(ve){return ve<=0?0:ve>=1?1:Y(ve)}}t(xd,"d3_ease_clamp");function Vs(Y){return function(ve){return 1-Y(1-ve)}}t(Vs,"d3_ease_reverse");function wv(Y){return function(ve){return .5*(ve<.5?Y(2*ve):2-Y(2-2*ve))}}t(wv,"d3_ease_reflect");function Mu(Y){return Y*Y}t(Mu,"d3_ease_quad");function os(Y){return Y*Y*Y}t(os,"d3_ease_cubic");function sc(Y){if(Y<=0)return 0;if(Y>=1)return 1;var ve=Y*Y,_e=ve*Y;return 4*(Y<.5?_e:3*(Y-ve)+_e-.75)}t(sc,"d3_ease_cubicInOut");function to(Y){return function(ve){return Math.pow(ve,Y)}}t(to,"d3_ease_poly");function ku(Y){return 1-Math.cos(Y*vt)}t(ku,"d3_ease_sin");function Bh(Y){return Math.pow(2,10*(Y-1))}t(Bh,"d3_ease_exp");function If(Y){return 1-Math.sqrt(1-Y*Y)}t(If,"d3_ease_circle");function bd(Y,ve){var _e;return arguments.length<2&&(ve=.45),arguments.length?_e=ve/tt*Math.asin(1/Y):(Y=1,_e=ve/4),function(Ce){return 1+Y*Math.pow(2,-10*Ce)*Math.sin((Ce-_e)*tt/ve)}}t(bd,"d3_ease_elastic");function Gc(Y){return Y||(Y=1.70158),function(ve){return ve*ve*((Y+1)*ve-Y)}}t(Gc,"d3_ease_back");function kp(Y){return Y<1/2.75?7.5625*Y*Y:Y<2/2.75?7.5625*(Y-=1.5/2.75)*Y+.75:Y<2.5/2.75?7.5625*(Y-=2.25/2.75)*Y+.9375:7.5625*(Y-=2.625/2.75)*Y+.984375}t(kp,"d3_ease_bounce"),r.interpolateHcl=Ep;function Ep(Y,ve){Y=r.hcl(Y),ve=r.hcl(ve);var _e=Y.h,Ce=Y.c,Re=Y.l,Le=ve.h-_e,Ke=ve.c-Ce,Ne=ve.l-Re;return isNaN(Ke)&&(Ke=0,Ce=isNaN(Ce)?ve.c:Ce),isNaN(Le)?(Le=0,_e=isNaN(_e)?ve.h:_e):Le>180?Le-=360:Le<-180&&(Le+=360),function(rt){return He(_e+Le*rt,Ce+Ke*rt,Re+Ne*rt)+""}}t(Ep,"d3_interpolateHcl"),r.interpolateHsl=Cp;function Cp(Y,ve){Y=r.hsl(Y),ve=r.hsl(ve);var _e=Y.h,Ce=Y.s,Re=Y.l,Le=ve.h-_e,Ke=ve.s-Ce,Ne=ve.l-Re;return isNaN(Ke)&&(Ke=0,Ce=isNaN(Ce)?ve.s:Ce),isNaN(Le)?(Le=0,_e=isNaN(_e)?ve.h:_e):Le>180?Le-=360:Le<-180&&(Le+=360),function(rt){return un(_e+Le*rt,Ce+Ke*rt,Re+Ne*rt)+""}}t(Cp,"d3_interpolateHsl"),r.interpolateLab=Tv;function Tv(Y,ve){Y=r.lab(Y),ve=r.lab(ve);var _e=Y.l,Ce=Y.a,Re=Y.b,Le=ve.l-_e,Ke=ve.a-Ce,Ne=ve.b-Re;return function(rt){return ut(_e+Le*rt,Ce+Ke*rt,Re+Ne*rt)+""}}t(Tv,"d3_interpolateLab"),r.interpolateRound=Oh;function Oh(Y,ve){return ve-=Y,function(_e){return Math.round(Y+ve*_e)}}t(Oh,"d3_interpolateRound"),r.transform=function(Y){var ve=s.createElementNS(r.ns.prefix.svg,"g");return(r.transform=function(_e){if(_e!=null){ve.setAttribute("transform",_e);var Ce=ve.transform.baseVal.consolidate()}return new Av(Ce?Ce.matrix:wd)})(Y)};function Av(Y){var ve=[Y.a,Y.b],_e=[Y.c,Y.d],Ce=Mv(ve),Re=Sv(ve,_e),Le=Mv(_d(_e,ve,-Re))||0;ve[0]*_e[1]<_e[0]*ve[1]&&(ve[0]*=-1,ve[1]*=-1,Ce*=-1,Re*=-1),this.rotate=(Ce?Math.atan2(ve[1],ve[0]):Math.atan2(-_e[0],_e[1]))*Rt,this.translate=[Y.e,Y.f],this.scale=[Ce,Le],this.skew=Le?Math.atan2(Re,Le)*Rt:0}t(Av,"d3_transform"),Av.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Sv(Y,ve){return Y[0]*ve[0]+Y[1]*ve[1]}t(Sv,"d3_transformDot");function Mv(Y){var ve=Math.sqrt(Sv(Y,Y));return ve&&(Y[0]/=ve,Y[1]/=ve),ve}t(Mv,"d3_transformNormalize");function _d(Y,ve,_e){return Y[0]+=_e*ve[0],Y[1]+=_e*ve[1],Y}t(_d,"d3_transformCombine");var wd={a:1,b:0,c:0,d:1,e:0,f:0};r.interpolateTransform=Nh;function Eu(Y){return Y.length?Y.pop()+",":""}t(Eu,"d3_interpolateTransformPop");function kv(Y,ve,_e,Ce){if(Y[0]!==ve[0]||Y[1]!==ve[1]){var Re=_e.push("translate(",null,",",null,")");Ce.push({i:Re-4,x:Al(Y[0],ve[0])},{i:Re-2,x:Al(Y[1],ve[1])})}else(ve[0]||ve[1])&&_e.push("translate("+ve+")")}t(kv,"d3_interpolateTranslate");function Cu(Y,ve,_e,Ce){Y!==ve?(Y-ve>180?ve+=360:ve-Y>180&&(Y+=360),Ce.push({i:_e.push(Eu(_e)+"rotate(",null,")")-2,x:Al(Y,ve)})):ve&&_e.push(Eu(_e)+"rotate("+ve+")")}t(Cu,"d3_interpolateRotate");function jc(Y,ve,_e,Ce){Y!==ve?Ce.push({i:_e.push(Eu(_e)+"skewX(",null,")")-2,x:Al(Y,ve)}):ve&&_e.push(Eu(_e)+"skewX("+ve+")")}t(jc,"d3_interpolateSkew");function Td(Y,ve,_e,Ce){if(Y[0]!==ve[0]||Y[1]!==ve[1]){var Re=_e.push(Eu(_e)+"scale(",null,",",null,")");Ce.push({i:Re-4,x:Al(Y[0],ve[0])},{i:Re-2,x:Al(Y[1],ve[1])})}else(ve[0]!==1||ve[1]!==1)&&_e.push(Eu(_e)+"scale("+ve+")")}t(Td,"d3_interpolateScale");function Nh(Y,ve){var _e=[],Ce=[];return Y=r.transform(Y),ve=r.transform(ve),kv(Y.translate,ve.translate,_e,Ce),Cu(Y.rotate,ve.rotate,_e,Ce),jc(Y.skew,ve.skew,_e,Ce),Td(Y.scale,ve.scale,_e,Ce),Y=ve=null,function(Re){for(var Le=-1,Ke=Ce.length,Ne;++Le<Ke;)_e[(Ne=Ce[Le]).i]=Ne.x(Re);return _e.join("")}}t(Nh,"d3_interpolateTransform");function Ev(Y,ve){return ve=(ve-=Y=+Y)||1/ve,function(_e){return(_e-Y)/ve}}t(Ev,"d3_uninterpolateNumber");function Ad(Y,ve){return ve=(ve-=Y=+Y)||1/ve,function(_e){return Math.max(0,Math.min(1,(_e-Y)/ve))}}t(Ad,"d3_uninterpolateClamp"),r.layout={},r.layout.bundle=function(){return function(Y){for(var ve=[],_e=-1,Ce=Y.length;++_e<Ce;)ve.push(Sd(Y[_e]));return ve}};function Sd(Y){for(var ve=Y.source,_e=Y.target,Ce=Yc(ve,_e),Re=[ve];ve!==Ce;)ve=ve.parent,Re.push(ve);for(var Le=Re.length;_e!==Ce;)Re.splice(Le,0,_e),_e=_e.parent;return Re}t(Sd,"d3_layout_bundlePath");function ol(Y){for(var ve=[],_e=Y.parent;_e!=null;)ve.push(Y),Y=_e,_e=_e.parent;return ve.push(Y),ve}t(ol,"d3_layout_bundleAncestors");function Yc(Y,ve){if(Y===ve)return Y;for(var _e=ol(Y),Ce=ol(ve),Re=_e.pop(),Le=Ce.pop(),Ke=null;Re===Le;)Ke=Re,Re=_e.pop(),Le=Ce.pop();return Ke}t(Yc,"d3_layout_bundleLeastCommonAncestor"),r.layout.chord=function(){var Y={},ve,_e,Ce,Re,Le=0,Ke,Ne,rt;function yt(){var Ut={},Tt=[],or=r.range(Re),pr=[],jt,er,rr,dr,gr;for(ve=[],_e=[],jt=0,dr=-1;++dr<Re;){for(er=0,gr=-1;++gr<Re;)er+=Ce[dr][gr];Tt.push(er),pr.push(r.range(Re)),jt+=er}for(Ke&&or.sort(function(en,Ca){return Ke(Tt[en],Tt[Ca])}),Ne&&pr.forEach(function(en,Ca){en.sort(function(pn,ti){return Ne(Ce[Ca][pn],Ce[Ca][ti])})}),jt=(tt-Le*Re)/jt,er=0,dr=-1;++dr<Re;){for(rr=er,gr=-1;++gr<Re;){var tr=or[dr],Yr=pr[tr][gr],ia=Ce[tr][Yr],ua=er,oa=er+=ia*jt;Ut[tr+"-"+Yr]={index:tr,subindex:Yr,startAngle:ua,endAngle:oa,value:ia}}_e[tr]={index:tr,startAngle:rr,endAngle:er,value:Tt[tr]},er+=Le}for(dr=-1;++dr<Re;)for(gr=dr-1;++gr<Re;){var pa=Ut[dr+"-"+gr],Ya=Ut[gr+"-"+dr];(pa.value||Ya.value)&&ve.push(pa.value<Ya.value?{source:Ya,target:pa}:{source:pa,target:Ya})}rt&&gt()}t(yt,"relayout");function gt(){ve.sort(function(Ut,Tt){return rt((Ut.source.value+Ut.target.value)/2,(Tt.source.value+Tt.target.value)/2)})}return t(gt,"resort"),Y.matrix=function(Ut){return arguments.length?(Re=(Ce=Ut)&&Ce.length,ve=_e=null,Y):Ce},Y.padding=function(Ut){return arguments.length?(Le=Ut,ve=_e=null,Y):Le},Y.sortGroups=function(Ut){return arguments.length?(Ke=Ut,ve=_e=null,Y):Ke},Y.sortSubgroups=function(Ut){return arguments.length?(Ne=Ut,ve=null,Y):Ne},Y.sortChords=function(Ut){return arguments.length?(rt=Ut,ve&&gt(),Y):rt},Y.chords=function(){return ve||yt(),ve},Y.groups=function(){return _e||yt(),_e},Y},r.layout.force=function(){var Y={},ve=r.dispatch("start","tick","end"),_e,Ce=[1,1],Re,Le,Ke=.9,Ne=Sl,rt=eu,yt=-30,gt=ro,Ut=.1,Tt=.64,or=[],pr=[],jt,er,rr;function dr(tr){return function(Yr,ia,ua,oa){if(Yr.point!==tr){var pa=Yr.cx-tr.x,Ya=Yr.cy-tr.y,en=oa-ia,Ca=pa*pa+Ya*Ya;if(en*en/Tt<Ca){if(Ca<gt){var pn=Yr.charge/Ca;tr.px-=pa*pn,tr.py-=Ya*pn}return!0}if(Yr.point&&Ca&&Ca<gt){var pn=Yr.pointCharge/Ca;tr.px-=pa*pn,tr.py-=Ya*pn}}return!Yr.charge}}t(dr,"repulse"),Y.tick=function(){if((Le*=.99)<.005)return _e=null,ve.end({type:"end",alpha:Le=0}),!0;var tr=or.length,Yr=pr.length,ia,ua,oa,pa,Ya,en,Ca,pn,ti;for(ua=0;ua<Yr;++ua)oa=pr[ua],pa=oa.source,Ya=oa.target,pn=Ya.x-pa.x,ti=Ya.y-pa.y,(en=pn*pn+ti*ti)&&(en=Le*er[ua]*((en=Math.sqrt(en))-jt[ua])/en,pn*=en,ti*=en,Ya.x-=pn*(Ca=pa.weight+Ya.weight?pa.weight/(pa.weight+Ya.weight):.5),Ya.y-=ti*Ca,pa.x+=pn*(Ca=1-Ca),pa.y+=ti*Ca);if((Ca=Le*Ut)&&(pn=Ce[0]/2,ti=Ce[1]/2,ua=-1,Ca))for(;++ua<tr;)oa=or[ua],oa.x+=(pn-oa.x)*Ca,oa.y+=(ti-oa.y)*Ca;if(yt)for(qh(ia=r.geom.quadtree(or),Le,rr),ua=-1;++ua<tr;)(oa=or[ua]).fixed||ia.visit(dr(oa));for(ua=-1;++ua<tr;)oa=or[ua],oa.fixed?(oa.x=oa.px,oa.y=oa.py):(oa.x-=(oa.px-(oa.px=oa.x))*Ke,oa.y-=(oa.py-(oa.py=oa.y))*Ke);ve.tick({type:"tick",alpha:Le})},Y.nodes=function(tr){return arguments.length?(or=tr,Y):or},Y.links=function(tr){return arguments.length?(pr=tr,Y):pr},Y.size=function(tr){return arguments.length?(Ce=tr,Y):Ce},Y.linkDistance=function(tr){return arguments.length?(Ne=typeof tr=="function"?tr:+tr,Y):Ne},Y.distance=Y.linkDistance,Y.linkStrength=function(tr){return arguments.length?(rt=typeof tr=="function"?tr:+tr,Y):rt},Y.friction=function(tr){return arguments.length?(Ke=+tr,Y):Ke},Y.charge=function(tr){return arguments.length?(yt=typeof tr=="function"?tr:+tr,Y):yt},Y.chargeDistance=function(tr){return arguments.length?(gt=tr*tr,Y):Math.sqrt(gt)},Y.gravity=function(tr){return arguments.length?(Ut=+tr,Y):Ut},Y.theta=function(tr){return arguments.length?(Tt=tr*tr,Y):Math.sqrt(Tt)},Y.alpha=function(tr){return arguments.length?(tr=+tr,Le?tr>0?Le=tr:(_e.c=null,_e.t=NaN,_e=null,ve.end({type:"end",alpha:Le=0})):tr>0&&(ve.start({type:"start",alpha:Le=tr}),_e=Xn(Y.tick)),Y):Le},Y.start=function(){var tr,Yr=or.length,ia=pr.length,ua=Ce[0],oa=Ce[1],pa,Ya;for(tr=0;tr<Yr;++tr)(Ya=or[tr]).index=tr,Ya.weight=0;for(tr=0;tr<ia;++tr)Ya=pr[tr],typeof Ya.source=="number"&&(Ya.source=or[Ya.source]),typeof Ya.target=="number"&&(Ya.target=or[Ya.target]),++Ya.source.weight,++Ya.target.weight;for(tr=0;tr<Yr;++tr)Ya=or[tr],isNaN(Ya.x)&&(Ya.x=en("x",ua)),isNaN(Ya.y)&&(Ya.y=en("y",oa)),isNaN(Ya.px)&&(Ya.px=Ya.x),isNaN(Ya.py)&&(Ya.py=Ya.y);if(jt=[],typeof Ne=="function")for(tr=0;tr<ia;++tr)jt[tr]=+Ne.call(this,pr[tr],tr);else for(tr=0;tr<ia;++tr)jt[tr]=Ne;if(er=[],typeof rt=="function")for(tr=0;tr<ia;++tr)er[tr]=+rt.call(this,pr[tr],tr);else for(tr=0;tr<ia;++tr)er[tr]=rt;if(rr=[],typeof yt=="function")for(tr=0;tr<Yr;++tr)rr[tr]=+yt.call(this,or[tr],tr);else for(tr=0;tr<Yr;++tr)rr[tr]=yt;function en(Ca,pn){if(!pa){for(pa=new Array(Yr),si=0;si<Yr;++si)pa[si]=[];for(si=0;si<ia;++si){var ti=pr[si];pa[ti.source.index].push(ti.target),pa[ti.target.index].push(ti.source)}}for(var Hi=pa[tr],si=-1,wa=Hi.length,En;++si<wa;)if(!isNaN(En=Hi[si][Ca]))return En;return Math.random()*pn}return t(en,"position"),Y.resume()},Y.resume=function(){return Y.alpha(.1)},Y.stop=function(){return Y.alpha(0)},Y.drag=function(){if(Re||(Re=r.behavior.drag().origin(R).on("dragstart.force",lc).on("drag.force",gr).on("dragend.force",Wc)),!arguments.length)return Re;this.on("mouseover.force",Oo).on("mouseout.force",Lu).call(Re)};function gr(tr){tr.px=r.event.x,tr.py=r.event.y,Y.resume()}return t(gr,"dragmove"),r.rebind(Y,ve,"on")};function lc(Y){Y.fixed|=2}t(lc,"d3_layout_forceDragstart");function Wc(Y){Y.fixed&=-7}t(Wc,"d3_layout_forceDragend");function Oo(Y){Y.fixed|=4,Y.px=Y.x,Y.py=Y.y}t(Oo,"d3_layout_forceMouseover");function Lu(Y){Y.fixed&=-5}t(Lu,"d3_layout_forceMouseout");function qh(Y,ve,_e){var Ce=0,Re=0;if(Y.charge=0,!Y.leaf)for(var Le=Y.nodes,Ke=Le.length,Ne=-1,rt;++Ne<Ke;)rt=Le[Ne],rt!=null&&(qh(rt,ve,_e),Y.charge+=rt.charge,Ce+=rt.charge*rt.cx,Re+=rt.charge*rt.cy);if(Y.point){Y.leaf||(Y.point.x+=Math.random()-.5,Y.point.y+=Math.random()-.5);var yt=ve*_e[Y.point.index];Y.charge+=Y.pointCharge=yt,Ce+=yt*Y.point.x,Re+=yt*Y.point.y}Y.cx=Ce/Y.charge,Y.cy=Re/Y.charge}t(qh,"d3_layout_forceAccumulate");var Sl=20,eu=1,ro=1/0;r.layout.hierarchy=function(){var Y=Md,ve=Cv,_e=Lv;function Ce(Re){var Le=[Re],Ke=[],Ne;for(Re.depth=0;(Ne=Le.pop())!=null;)if(Ke.push(Ne),(yt=ve.call(Ce,Ne,Ne.depth))&&(rt=yt.length)){for(var rt,yt,gt;--rt>=0;)Le.push(gt=yt[rt]),gt.parent=Ne,gt.depth=Ne.depth+1;_e&&(Ne.value=0),Ne.children=yt}else _e&&(Ne.value=+_e.call(Ce,Ne,Ne.depth)||0),delete Ne.children;return Gs(Re,function(Ut){var Tt,or;Y&&(Tt=Ut.children)&&Tt.sort(Y),_e&&(or=Ut.parent)&&(or.value+=Ut.value)}),Ke}return t(Ce,"hierarchy"),Ce.sort=function(Re){return arguments.length?(Y=Re,Ce):Y},Ce.children=function(Re){return arguments.length?(ve=Re,Ce):ve},Ce.value=function(Re){return arguments.length?(_e=Re,Ce):_e},Ce.revalue=function(Re){return _e&&(fc(Re,function(Le){Le.children&&(Le.value=0)}),Gs(Re,function(Le){var Ke;Le.children||(Le.value=+_e.call(Ce,Le,Le.depth)||0),(Ke=Le.parent)&&(Ke.value+=Le.value)})),Re},Ce};function uc(Y,ve){return r.rebind(Y,ve,"sort","children","value"),Y.nodes=Y,Y.links=kd,Y}t(uc,"d3_layout_hierarchyRebind");function fc(Y,ve){for(var _e=[Y];(Y=_e.pop())!=null;)if(ve(Y),(Re=Y.children)&&(Ce=Re.length))for(var Ce,Re;--Ce>=0;)_e.push(Re[Ce])}t(fc,"d3_layout_hierarchyVisitBefore");function Gs(Y,ve){for(var _e=[Y],Ce=[];(Y=_e.pop())!=null;)if(Ce.push(Y),(Ke=Y.children)&&(Le=Ke.length))for(var Re=-1,Le,Ke;++Re<Le;)_e.push(Ke[Re]);for(;(Y=Ce.pop())!=null;)ve(Y)}t(Gs,"d3_layout_hierarchyVisitAfter");function Cv(Y){return Y.children}t(Cv,"d3_layout_hierarchyChildren");function Lv(Y){return Y.value}t(Lv,"d3_layout_hierarchyValue");function Md(Y,ve){return ve.value-Y.value}t(Md,"d3_layout_hierarchySort");function kd(Y){return r.merge(Y.map(function(ve){return(ve.children||[]).map(function(_e){return{source:ve,target:_e}})}))}t(kd,"d3_layout_hierarchyLinks"),r.layout.partition=function(){var Y=r.layout.hierarchy(),ve=[1,1];function _e(Le,Ke,Ne,rt){var yt=Le.children;if(Le.x=Ke,Le.y=Le.depth*rt,Le.dx=Ne,Le.dy=rt,yt&&(Ut=yt.length)){var gt=-1,Ut,Tt,or;for(Ne=Le.value?Ne/Le.value:0;++gt<Ut;)_e(Tt=yt[gt],Ke,or=Tt.value*Ne,rt),Ke+=or}}t(_e,"position");function Ce(Le){var Ke=Le.children,Ne=0;if(Ke&&(yt=Ke.length))for(var rt=-1,yt;++rt<yt;)Ne=Math.max(Ne,Ce(Ke[rt]));return 1+Ne}t(Ce,"depth");function Re(Le,Ke){var Ne=Y.call(this,Le,Ke);return _e(Ne[0],0,ve[0],ve[1]/Ce(Ne[0])),Ne}return t(Re,"partition"),Re.size=function(Le){return arguments.length?(ve=Le,Re):ve},uc(Re,Y)},r.layout.pie=function(){var Y=Number,ve=zf,_e=0,Ce=tt,Re=0;function Le(Ke){var Ne=Ke.length,rt=Ke.map(function(dr,gr){return+Y.call(Le,dr,gr)}),yt=+(typeof _e=="function"?_e.apply(this,arguments):_e),gt=(typeof Ce=="function"?Ce.apply(this,arguments):Ce)-yt,Ut=Math.min(Math.abs(gt)/Ne,+(typeof Re=="function"?Re.apply(this,arguments):Re)),Tt=Ut*(gt<0?-1:1),or=r.sum(rt),pr=or?(gt-Ne*Tt)/or:0,jt=r.range(Ne),er=[],rr;return ve!=null&&jt.sort(ve===zf?function(dr,gr){return rt[gr]-rt[dr]}:function(dr,gr){return ve(Ke[dr],Ke[gr])}),jt.forEach(function(dr){er[dr]={data:Ke[dr],value:rr=rt[dr],startAngle:yt,endAngle:yt+=rr*pr+Tt,padAngle:Ut}}),er}return t(Le,"pie"),Le.value=function(Ke){return arguments.length?(Y=Ke,Le):Y},Le.sort=function(Ke){return arguments.length?(ve=Ke,Le):ve},Le.startAngle=function(Ke){return arguments.length?(_e=Ke,Le):_e},Le.endAngle=function(Ke){return arguments.length?(Ce=Ke,Le):Ce},Le.padAngle=function(Ke){return arguments.length?(Re=Ke,Le):Re},Le};var zf={};r.layout.stack=function(){var Y=R,ve=Xc,_e=Zc,Ce=Rp,Re=Ed,Le=Lp;function Ke(Ne,rt){if(!(pr=Ne.length))return Ne;var yt=Ne.map(function(dr,gr){return Y.call(Ke,dr,gr)}),gt=yt.map(function(dr){return dr.map(function(gr,tr){return[Re.call(Ke,gr,tr),Le.call(Ke,gr,tr)]})}),Ut=ve.call(Ke,gt,rt);yt=r.permute(yt,Ut),gt=r.permute(gt,Ut);var Tt=_e.call(Ke,gt,rt),or=yt[0].length,pr,jt,er,rr;for(er=0;er<or;++er)for(Ce.call(Ke,yt[0][er],rr=Tt[er],gt[0][er][1]),jt=1;jt<pr;++jt)Ce.call(Ke,yt[jt][er],rr+=gt[jt-1][er][1],gt[jt][er][1]);return Ne}return t(Ke,"stack"),Ke.values=function(Ne){return arguments.length?(Y=Ne,Ke):Y},Ke.order=function(Ne){return arguments.length?(ve=typeof Ne=="function"?Ne:Rv.get(Ne)||Xc,Ke):ve},Ke.offset=function(Ne){return arguments.length?(_e=typeof Ne=="function"?Ne:cc.get(Ne)||Zc,Ke):_e},Ke.x=function(Ne){return arguments.length?(Re=Ne,Ke):Re},Ke.y=function(Ne){return arguments.length?(Le=Ne,Ke):Le},Ke.out=function(Ne){return arguments.length?(Ce=Ne,Ke):Ce},Ke};function Ed(Y){return Y.x}t(Ed,"d3_layout_stackX");function Lp(Y){return Y.y}t(Lp,"d3_layout_stackY");function Rp(Y,ve,_e){Y.y0=ve,Y.y=_e}t(Rp,"d3_layout_stackOut");var Rv=r.map({"inside-out":function(Y){var ve=Y.length,_e,Ce,Re=Y.map(Uh),Le=Y.map(Kc),Ke=r.range(ve).sort(function(Ut,Tt){return Re[Ut]-Re[Tt]}),Ne=0,rt=0,yt=[],gt=[];for(_e=0;_e<ve;++_e)Ce=Ke[_e],Ne<rt?(Ne+=Le[Ce],yt.push(Ce)):(rt+=Le[Ce],gt.push(Ce));return gt.reverse().concat(yt)},reverse:function(Y){return r.range(Y.length).reverse()},default:Xc}),cc=r.map({silhouette:function(Y){var ve=Y.length,_e=Y[0].length,Ce=[],Re=0,Le,Ke,Ne,rt=[];for(Ke=0;Ke<_e;++Ke){for(Le=0,Ne=0;Le<ve;Le++)Ne+=Y[Le][Ke][1];Ne>Re&&(Re=Ne),Ce.push(Ne)}for(Ke=0;Ke<_e;++Ke)rt[Ke]=(Re-Ce[Ke])/2;return rt},wiggle:function(Y){var ve=Y.length,_e=Y[0],Ce=_e.length,Re,Le,Ke,Ne,rt,yt,gt,Ut,Tt,or=[];for(or[0]=Ut=Tt=0,Le=1;Le<Ce;++Le){for(Re=0,Ne=0;Re<ve;++Re)Ne+=Y[Re][Le][1];for(Re=0,rt=0,gt=_e[Le][0]-_e[Le-1][0];Re<ve;++Re){for(Ke=0,yt=(Y[Re][Le][1]-Y[Re][Le-1][1])/(2*gt);Ke<Re;++Ke)yt+=(Y[Ke][Le][1]-Y[Ke][Le-1][1])/gt;rt+=yt*Y[Re][Le][1]}or[Le]=Ut-=Ne?rt/Ne*gt:0,Ut<Tt&&(Tt=Ut)}for(Le=0;Le<Ce;++Le)or[Le]-=Tt;return or},expand:function(Y){var ve=Y.length,_e=Y[0].length,Ce=1/ve,Re,Le,Ke,Ne=[];for(Le=0;Le<_e;++Le){for(Re=0,Ke=0;Re<ve;Re++)Ke+=Y[Re][Le][1];if(Ke)for(Re=0;Re<ve;Re++)Y[Re][Le][1]/=Ke;else for(Re=0;Re<ve;Re++)Y[Re][Le][1]=Ce}for(Le=0;Le<_e;++Le)Ne[Le]=0;return Ne},zero:Zc});function Xc(Y){return r.range(Y.length)}t(Xc,"d3_layout_stackOrderDefault");function Zc(Y){for(var ve=-1,_e=Y[0].length,Ce=[];++ve<_e;)Ce[ve]=0;return Ce}t(Zc,"d3_layout_stackOffsetZero");function Uh(Y){for(var ve=1,_e=0,Ce=Y[0][1],Re,Le=Y.length;ve<Le;++ve)(Re=Y[ve][1])>Ce&&(_e=ve,Ce=Re);return _e}t(Uh,"d3_layout_stackMaxIndex");function Kc(Y){return Y.reduce(Hh,0)}t(Kc,"d3_layout_stackReduceSum");function Hh(Y,ve){return Y+ve[1]}t(Hh,"d3_layout_stackSum"),r.layout.histogram=function(){var Y=!0,ve=Number,_e=ji,Ce=Pp;function Re(Le,Tt){for(var Ne=[],rt=Le.map(ve,this),yt=_e.call(this,rt,Tt),gt=Ce.call(this,yt,rt,Tt),Ut,Tt=-1,or=rt.length,pr=gt.length-1,jt=Y?1:1/or,er;++Tt<pr;)Ut=Ne[Tt]=[],Ut.dx=gt[Tt+1]-(Ut.x=gt[Tt]),Ut.y=0;if(pr>0)for(Tt=-1;++Tt<or;)er=rt[Tt],er>=yt[0]&&er<=yt[1]&&(Ut=Ne[r.bisect(gt,er,1,pr)-1],Ut.y+=jt,Ut.push(Le[Tt]));return Ne}return t(Re,"histogram"),Re.value=function(Le){return arguments.length?(ve=Le,Re):ve},Re.range=function(Le){return arguments.length?(_e=ba(Le),Re):_e},Re.bins=function(Le){return arguments.length?(Ce=typeof Le=="number"?function(Ke){return Pv(Ke,Le)}:ba(Le),Re):Ce},Re.frequency=function(Le){return arguments.length?(Y=!!Le,Re):Y},Re};function Pp(Y,ve){return Pv(Y,Math.ceil(Math.log(ve.length)/Math.LN2+1))}t(Pp,"d3_layout_histogramBinSturges");function Pv(Y,ve){for(var _e=-1,Ce=+Y[0],Re=(Y[1]-Ce)/ve,Le=[];++_e<=ve;)Le[_e]=Re*_e+Ce;return Le}t(Pv,"d3_layout_histogramBinFixed");function ji(Y){return[r.min(Y),r.max(Y)]}t(ji,"d3_layout_histogramRange"),r.layout.pack=function(){var Y=r.layout.hierarchy().sort(Dp),ve=0,_e=[1,1],Ce;function Re(Le,Ke){var Ne=Y.call(this,Le,Ke),rt=Ne[0],yt=_e[0],gt=_e[1],Ut=Ce==null?Math.sqrt:typeof Ce=="function"?Ce:function(){return Ce};if(rt.x=rt.y=0,Gs(rt,function(or){or.r=+Ut(or.value)}),Gs(rt,$h),ve){var Tt=ve*(Ce?1:Math.max(2*rt.r/yt,2*rt.r/gt))/2;Gs(rt,function(or){or.r+=Tt}),Gs(rt,$h),Gs(rt,function(or){or.r-=Tt})}return $l(rt,yt/2,gt/2,Ce?1:1/Math.max(2*rt.r/yt,2*rt.r/gt)),Ne}return t(Re,"pack"),Re.size=function(Le){return arguments.length?(_e=Le,Re):_e},Re.radius=function(Le){return arguments.length?(Ce=Le==null||typeof Le=="function"?Le:+Le,Re):Ce},Re.padding=function(Le){return arguments.length?(ve=+Le,Re):ve},uc(Re,Y)};function Dp(Y,ve){return Y.value-ve.value}t(Dp,"d3_layout_packSort");function hc(Y,ve){var _e=Y._pack_next;Y._pack_next=ve,ve._pack_prev=Y,ve._pack_next=_e,_e._pack_prev=ve}t(hc,"d3_layout_packInsert");function Ff(Y,ve){Y._pack_next=ve,ve._pack_prev=Y}t(Ff,"d3_layout_packSplice");function Bf(Y,ve){var _e=ve.x-Y.x,Ce=ve.y-Y.y,Re=Y.r+ve.r;return .999*Re*Re>_e*_e+Ce*Ce}t(Bf,"d3_layout_packIntersects");function $h(Y){if(!(ve=Y.children)||!(Tt=ve.length))return;var ve,_e=1/0,Ce=-1/0,Re=1/0,Le=-1/0,Ke,Ne,rt,yt,gt,Ut,Tt;function or(tr){_e=Math.min(tr.x-tr.r,_e),Ce=Math.max(tr.x+tr.r,Ce),Re=Math.min(tr.y-tr.r,Re),Le=Math.max(tr.y+tr.r,Le)}if(t(or,"bound"),ve.forEach(es),Ke=ve[0],Ke.x=-Ke.r,Ke.y=0,or(Ke),Tt>1&&(Ne=ve[1],Ne.x=Ne.r,Ne.y=0,or(Ne),Tt>2))for(rt=ve[2],Ru(Ke,Ne,rt),or(rt),hc(Ke,rt),Ke._pack_prev=rt,hc(rt,Ne),Ne=Ke._pack_next,yt=3;yt<Tt;yt++){Ru(Ke,Ne,rt=ve[yt]);var pr=0,jt=1,er=1;for(gt=Ne._pack_next;gt!==Ne;gt=gt._pack_next,jt++)if(Bf(gt,rt)){pr=1;break}if(pr==1)for(Ut=Ke._pack_prev;Ut!==gt._pack_prev&&!Bf(Ut,rt);Ut=Ut._pack_prev,er++);pr?(jt<er||jt==er&&Ne.r<Ke.r?Ff(Ke,Ne=gt):Ff(Ke=Ut,Ne),yt--):(hc(Ke,rt),Ne=rt,or(rt))}var rr=(_e+Ce)/2,dr=(Re+Le)/2,gr=0;for(yt=0;yt<Tt;yt++)rt=ve[yt],rt.x-=rr,rt.y-=dr,gr=Math.max(gr,rt.r+Math.sqrt(rt.x*rt.x+rt.y*rt.y));Y.r=gr,ve.forEach(Dv)}t($h,"d3_layout_packSiblings");function es(Y){Y._pack_next=Y._pack_prev=Y}t(es,"d3_layout_packLink");function Dv(Y){delete Y._pack_next,delete Y._pack_prev}t(Dv,"d3_layout_packUnlink");function $l(Y,ve,_e,Ce){var Re=Y.children;if(Y.x=ve+=Ce*Y.x,Y.y=_e+=Ce*Y.y,Y.r*=Ce,Re)for(var Le=-1,Ke=Re.length;++Le<Ke;)$l(Re[Le],ve,_e,Ce)}t($l,"d3_layout_packTransform");function Ru(Y,ve,_e){var Ce=Y.r+_e.r,Re=ve.x-Y.x,Le=ve.y-Y.y;if(Ce&&(Re||Le)){var Ke=ve.r+_e.r,Ne=Re*Re+Le*Le;Ke*=Ke,Ce*=Ce;var rt=.5+(Ce-Ke)/(2*Ne),yt=Math.sqrt(Math.max(0,2*Ke*(Ce+Ne)-(Ce-=Ne)*Ce-Ke*Ke))/(2*Ne);_e.x=Y.x+rt*Re+yt*Le,_e.y=Y.y+rt*Le-yt*Re}else _e.x=Y.x+Ce,_e.y=Y.y}t(Ru,"d3_layout_packPlace"),r.layout.tree=function(){var Y=r.layout.hierarchy().sort(null).value(null),ve=nf,_e=[1,1],Ce=null;function Re(gt,Ut){var Tt=Y.call(this,gt,Ut),or=Tt[0],pr=Le(or);if(Gs(pr,Ke),pr.parent.m=-pr.z,fc(pr,Ne),Ce)fc(or,yt);else{var jt=or,er=or,rr=or;fc(or,function(Yr){Yr.x<jt.x&&(jt=Yr),Yr.x>er.x&&(er=Yr),Yr.depth>rr.depth&&(rr=Yr)});var dr=ve(jt,er)/2-jt.x,gr=_e[0]/(er.x+ve(er,jt)/2+dr),tr=_e[1]/(rr.depth||1);fc(or,function(Yr){Yr.x=(Yr.x+dr)*gr,Yr.y=Yr.depth*tr})}return Tt}t(Re,"tree");function Le(gt){for(var Ut={A:null,children:[gt]},Tt=[Ut],or;(or=Tt.pop())!=null;)for(var pr=or.children,jt,er=0,rr=pr.length;er<rr;++er)Tt.push((pr[er]=jt={_:pr[er],parent:or,children:(jt=pr[er].children)&&jt.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:er}).a=jt);return Ut.children[0]}t(Le,"wrapTree");function Ke(gt){var Ut=gt.children,Tt=gt.parent.children,or=gt.i?Tt[gt.i-1]:null;if(Ut.length){of(gt);var pr=(Ut[0].z+Ut[Ut.length-1].z)/2;or?(gt.z=or.z+ve(gt._,or._),gt.m=gt.z-pr):gt.z=pr}else or&&(gt.z=or.z+ve(gt._,or._));gt.parent.A=rt(gt,or,gt.parent.A||Tt[0])}t(Ke,"firstWalk");function Ne(gt){gt._.x=gt.z+gt.parent.m,gt.m+=gt.parent.m}t(Ne,"secondWalk");function rt(gt,Ut,Tt){if(Ut){for(var or=gt,pr=gt,jt=Ut,er=or.parent.children[0],rr=or.m,dr=pr.m,gr=jt.m,tr=er.m,Yr;jt=tu(jt),or=Pu(or),jt&&or;)er=Pu(er),pr=tu(pr),pr.a=gt,Yr=jt.z+gr-or.z-rr+ve(jt._,or._),Yr>0&&(Of(ts(jt,gt,Tt),gt,Yr),rr+=Yr,dr+=Yr),gr+=jt.m,rr+=or.m,tr+=er.m,dr+=pr.m;jt&&!tu(pr)&&(pr.t=jt,pr.m+=gr-dr),or&&!Pu(er)&&(er.t=or,er.m+=rr-tr,Tt=gt)}return Tt}t(rt,"apportion");function yt(gt){gt.x*=_e[0],gt.y=gt.depth*_e[1]}return t(yt,"sizeNode"),Re.separation=function(gt){return arguments.length?(ve=gt,Re):ve},Re.size=function(gt){return arguments.length?(Ce=(_e=gt)==null?yt:null,Re):Ce?null:_e},Re.nodeSize=function(gt){return arguments.length?(Ce=(_e=gt)==null?null:yt,Re):Ce?_e:null},uc(Re,Y)};function nf(Y,ve){return Y.parent==ve.parent?1:2}t(nf,"d3_layout_treeSeparation");function Pu(Y){var ve=Y.children;return ve.length?ve[0]:Y.t}t(Pu,"d3_layout_treeLeft");function tu(Y){var ve=Y.children,_e;return(_e=ve.length)?ve[_e-1]:Y.t}t(tu,"d3_layout_treeRight");function Of(Y,ve,_e){var Ce=_e/(ve.i-Y.i);ve.c-=Ce,ve.s+=_e,Y.c+=Ce,ve.z+=_e,ve.m+=_e}t(Of,"d3_layout_treeMove");function of(Y){for(var ve=0,_e=0,Ce=Y.children,Re=Ce.length,Le;--Re>=0;)Le=Ce[Re],Le.z+=ve,Le.m+=ve,ve+=Le.s+(_e+=Le.c)}t(of,"d3_layout_treeShift");function ts(Y,ve,_e){return Y.a.parent===ve.parent?Y.a:_e}t(ts,"d3_layout_treeAncestor"),r.layout.cluster=function(){var Y=r.layout.hierarchy().sort(null).value(null),ve=nf,_e=[1,1],Ce=!1;function Re(Le,Ke){var Ne=Y.call(this,Le,Ke),rt=Ne[0],yt,gt=0;Gs(rt,function(jt){var er=jt.children;er&&er.length?(jt.x=Ip(er),jt.y=Iv(er)):(jt.x=yt?gt+=ve(jt,yt):0,jt.y=0,yt=jt)});var Ut=Cd(rt),Tt=Ld(rt),or=Ut.x-ve(Ut,Tt)/2,pr=Tt.x+ve(Tt,Ut)/2;return Gs(rt,Ce?function(jt){jt.x=(jt.x-rt.x)*_e[0],jt.y=(rt.y-jt.y)*_e[1]}:function(jt){jt.x=(jt.x-or)/(pr-or)*_e[0],jt.y=(1-(rt.y?jt.y/rt.y:1))*_e[1]}),Ne}return t(Re,"cluster"),Re.separation=function(Le){return arguments.length?(ve=Le,Re):ve},Re.size=function(Le){return arguments.length?(Ce=(_e=Le)==null,Re):Ce?null:_e},Re.nodeSize=function(Le){return arguments.length?(Ce=(_e=Le)!=null,Re):Ce?_e:null},uc(Re,Y)};function Iv(Y){return 1+r.max(Y,function(ve){return ve.y})}t(Iv,"d3_layout_clusterY");function Ip(Y){return Y.reduce(function(ve,_e){return ve+_e.x},0)/Y.length}t(Ip,"d3_layout_clusterX");function Cd(Y){var ve=Y.children;return ve&&ve.length?Cd(ve[0]):Y}t(Cd,"d3_layout_clusterLeft");function Ld(Y){var ve=Y.children,_e;return ve&&(_e=ve.length)?Ld(ve[_e-1]):Y}t(Ld,"d3_layout_clusterRight"),r.layout.treemap=function(){var Y=r.layout.hierarchy(),ve=Math.round,_e=[1,1],Ce=null,Re=zv,Le=!1,Ke,Ne="squarify",rt=.5*(1+Math.sqrt(5));function yt(jt,er){for(var rr=-1,dr=jt.length,gr,tr;++rr<dr;)tr=(gr=jt[rr]).value*(er<0?0:er),gr.area=isNaN(tr)||tr<=0?0:tr}t(yt,"scale");function gt(jt){var er=jt.children;if(er&&er.length){var rr=Re(jt),dr=[],gr=er.slice(),tr,Yr=1/0,ia,ua=Ne==="slice"?rr.dx:Ne==="dice"?rr.dy:Ne==="slice-dice"?jt.depth&1?rr.dy:rr.dx:Math.min(rr.dx,rr.dy),oa;for(yt(gr,rr.dx*rr.dy/jt.value),dr.area=0;(oa=gr.length)>0;)dr.push(tr=gr[oa-1]),dr.area+=tr.area,Ne!=="squarify"||(ia=Tt(dr,ua))<=Yr?(gr.pop(),Yr=ia):(dr.area-=dr.pop().area,or(dr,ua,rr,!1),ua=Math.min(rr.dx,rr.dy),dr.length=dr.area=0,Yr=1/0);dr.length&&(or(dr,ua,rr,!0),dr.length=dr.area=0),er.forEach(gt)}}t(gt,"squarify");function Ut(jt){var er=jt.children;if(er&&er.length){var rr=Re(jt),dr=er.slice(),gr,tr=[];for(yt(dr,rr.dx*rr.dy/jt.value),tr.area=0;gr=dr.pop();)tr.push(gr),tr.area+=gr.area,gr.z!=null&&(or(tr,gr.z?rr.dx:rr.dy,rr,!dr.length),tr.length=tr.area=0);er.forEach(Ut)}}t(Ut,"stickify");function Tt(jt,er){for(var rr=jt.area,dr,gr=0,tr=1/0,Yr=-1,ia=jt.length;++Yr<ia;)!(dr=jt[Yr].area)||(dr<tr&&(tr=dr),dr>gr&&(gr=dr));return rr*=rr,er*=er,rr?Math.max(er*gr*rt/rr,rr/(er*tr*rt)):1/0}t(Tt,"worst");function or(jt,er,rr,dr){var gr=-1,tr=jt.length,Yr=rr.x,ia=rr.y,ua=er?ve(jt.area/er):0,oa;if(er==rr.dx){for((dr||ua>rr.dy)&&(ua=rr.dy);++gr<tr;)oa=jt[gr],oa.x=Yr,oa.y=ia,oa.dy=ua,Yr+=oa.dx=Math.min(rr.x+rr.dx-Yr,ua?ve(oa.area/ua):0);oa.z=!0,oa.dx+=rr.x+rr.dx-Yr,rr.y+=ua,rr.dy-=ua}else{for((dr||ua>rr.dx)&&(ua=rr.dx);++gr<tr;)oa=jt[gr],oa.x=Yr,oa.y=ia,oa.dx=ua,ia+=oa.dy=Math.min(rr.y+rr.dy-ia,ua?ve(oa.area/ua):0);oa.z=!1,oa.dy+=rr.y+rr.dy-ia,rr.x+=ua,rr.dx-=ua}}t(or,"position");function pr(jt){var er=Ke||Y(jt),rr=er[0];return rr.x=rr.y=0,rr.value?(rr.dx=_e[0],rr.dy=_e[1]):rr.dx=rr.dy=0,Ke&&Y.revalue(rr),yt([rr],rr.dx*rr.dy/rr.value),(Ke?Ut:gt)(rr),Le&&(Ke=er),er}return t(pr,"treemap"),pr.size=function(jt){return arguments.length?(_e=jt,pr):_e},pr.padding=function(jt){if(!arguments.length)return Ce;function er(gr){var tr=jt.call(pr,gr,gr.depth);return tr==null?zv(gr):Rd(gr,typeof tr=="number"?[tr,tr,tr,tr]:tr)}t(er,"padFunction");function rr(gr){return Rd(gr,jt)}t(rr,"padConstant");var dr;return Re=(Ce=jt)==null?zv:(dr=typeof jt)=="function"?er:(dr==="number"&&(jt=[jt,jt,jt,jt]),rr),pr},pr.round=function(jt){return arguments.length?(ve=jt?Math.round:Number,pr):ve!=Number},pr.sticky=function(jt){return arguments.length?(Le=jt,Ke=null,pr):Le},pr.ratio=function(jt){return arguments.length?(rt=jt,pr):rt},pr.mode=function(jt){return arguments.length?(Ne=jt+"",pr):Ne},uc(pr,Y)};function zv(Y){return{x:Y.x,y:Y.y,dx:Y.dx,dy:Y.dy}}t(zv,"d3_layout_treemapPadNull");function Rd(Y,ve){var _e=Y.x+ve[3],Ce=Y.y+ve[0],Re=Y.dx-ve[1]-ve[3],Le=Y.dy-ve[0]-ve[2];return Re<0&&(_e+=Re/2,Re=0),Le<0&&(Ce+=Le/2,Le=0),{x:_e,y:Ce,dx:Re,dy:Le}}t(Rd,"d3_layout_treemapPad"),r.random={normal:function(Y,ve){var _e=arguments.length;return _e<2&&(ve=1),_e<1&&(Y=0),function(){var Ce,Re,Le;do Ce=Math.random()*2-1,Re=Math.random()*2-1,Le=Ce*Ce+Re*Re;while(!Le||Le>1);return Y+ve*Ce*Math.sqrt(-2*Math.log(Le)/Le)}},logNormal:function(){var Y=r.random.normal.apply(r,arguments);return function(){return Math.exp(Y())}},bates:function(Y){var ve=r.random.irwinHall(Y);return function(){return ve()/Y}},irwinHall:function(Y){return function(){for(var ve=0,_e=0;_e<Y;_e++)ve+=Math.random();return ve}}},r.scale={};function Vh(Y){var ve=Y[0],_e=Y[Y.length-1];return ve<_e?[ve,_e]:[_e,ve]}t(Vh,"d3_scaleExtent");function Jc(Y){return Y.rangeExtent?Y.rangeExtent():Vh(Y.range())}t(Jc,"d3_scaleRange");function zp(Y,ve,_e,Ce){var Re=_e(Y[0],Y[1]),Le=Ce(ve[0],ve[1]);return function(Ke){return Le(Re(Ke))}}t(zp,"d3_scale_bilinear");function Ro(Y,ve){var _e=0,Ce=Y.length-1,Re=Y[_e],Le=Y[Ce],Ke;return Le<Re&&(Ke=_e,_e=Ce,Ce=Ke,Ke=Re,Re=Le,Le=Ke),Y[_e]=ve.floor(Re),Y[Ce]=ve.ceil(Le),Y}t(Ro,"d3_scale_nice");function Nf(Y){return Y?{floor:function(ve){return Math.floor(ve/Y)*Y},ceil:function(ve){return Math.ceil(ve/Y)*Y}}:qf}t(Nf,"d3_scale_niceStep");var qf={floor:R,ceil:R};function Fp(Y,ve,_e,Ce){var Re=[],Le=[],Ke=0,Ne=Math.min(Y.length,ve.length)-1;for(Y[Ne]<Y[0]&&(Y=Y.slice().reverse(),ve=ve.slice().reverse());++Ke<=Ne;)Re.push(_e(Y[Ke-1],Y[Ke])),Le.push(Ce(ve[Ke-1],ve[Ke]));return function(rt){var yt=r.bisect(Y,rt,1,Ne)-1;return Le[yt](Re[yt](rt))}}t(Fp,"d3_scale_polylinear"),r.scale.linear=function(){return Ml([0,1],[0,1],Ui,!1)};function Ml(Y,ve,_e,Ce){var Re,Le;function Ke(){var rt=Math.min(Y.length,ve.length)>2?Fp:zp,yt=Ce?Ad:Ev;return Re=rt(Y,ve,yt,_e),Le=rt(ve,Y,yt,Ui),Ne}t(Ke,"rescale");function Ne(rt){return Re(rt)}return t(Ne,"scale"),Ne.invert=function(rt){return Le(rt)},Ne.domain=function(rt){return arguments.length?(Y=rt.map(Number),Ke()):Y},Ne.range=function(rt){return arguments.length?(ve=rt,Ke()):ve},Ne.rangeRound=function(rt){return Ne.range(rt).interpolate(Oh)},Ne.clamp=function(rt){return arguments.length?(Ce=rt,Ke()):Ce},Ne.interpolate=function(rt){return arguments.length?(_e=rt,Ke()):_e},Ne.ticks=function(rt){return eh(Y,rt)},Ne.tickFormat=function(rt,yt){return d3_scale_linearTickFormat(Y,rt,yt)},Ne.nice=function(rt){return Uf(Y,rt),Ke()},Ne.copy=function(){return Ml(Y,ve,_e,Ce)},Ke()}t(Ml,"d3_scale_linear");function Fv(Y,ve){return r.rebind(Y,ve,"range","rangeRound","interpolate","clamp")}t(Fv,"d3_scale_linearRebind");function Uf(Y,ve){return Ro(Y,Nf(Qc(Y,ve)[2])),Ro(Y,Nf(Qc(Y,ve)[2])),Y}t(Uf,"d3_scale_linearNice");function Qc(Y,ve){ve==null&&(ve=10);var _e=Vh(Y),Ce=_e[1]-_e[0],Re=Math.pow(10,Math.floor(Math.log(Ce/ve)/Math.LN10)),Le=ve/Ce*Re;return Le<=.15?Re*=10:Le<=.35?Re*=5:Le<=.75&&(Re*=2),_e[0]=Math.ceil(_e[0]/Re)*Re,_e[1]=Math.floor(_e[1]/Re)*Re+Re*.5,_e[2]=Re,_e}t(Qc,"d3_scale_linearTickRange");function eh(Y,ve){return r.range.apply(r,Qc(Y,ve))}t(eh,"d3_scale_linearTicks"),r.scale.log=function(){return Gh(r.scale.linear().domain([0,1]),10,!0,[1,10])};function Gh(Y,ve,_e,Ce){function Re(Ne){return(_e?Math.log(Ne<0?0:Ne):-Math.log(Ne>0?0:-Ne))/Math.log(ve)}t(Re,"log");function Le(Ne){return _e?Math.pow(ve,Ne):-Math.pow(ve,-Ne)}t(Le,"pow");function Ke(Ne){return Y(Re(Ne))}return t(Ke,"scale"),Ke.invert=function(Ne){return Le(Y.invert(Ne))},Ke.domain=function(Ne){return arguments.length?(_e=Ne[0]>=0,Y.domain((Ce=Ne.map(Number)).map(Re)),Ke):Ce},Ke.base=function(Ne){return arguments.length?(ve=+Ne,Y.domain(Ce.map(Re)),Ke):ve},Ke.nice=function(){var Ne=Ro(Ce.map(Re),_e?Math:Bv);return Y.domain(Ne),Ce=Ne.map(Le),Ke},Ke.ticks=function(){var Ne=Vh(Ce),rt=[],yt=Ne[0],gt=Ne[1],Ut=Math.floor(Re(yt)),Tt=Math.ceil(Re(gt)),or=ve%1?2:ve;if(isFinite(Tt-Ut)){if(_e){for(;Ut<Tt;Ut++)for(var pr=1;pr<or;pr++)rt.push(Le(Ut)*pr);rt.push(Le(Ut))}else for(rt.push(Le(Ut));Ut++<Tt;)for(var pr=or-1;pr>0;pr--)rt.push(Le(Ut)*pr);for(Ut=0;rt[Ut]<yt;Ut++);for(Tt=rt.length;rt[Tt-1]>gt;Tt--);rt=rt.slice(Ut,Tt)}return rt},Ke.copy=function(){return Gh(Y.copy(),ve,_e,Ce)},Fv(Ke,Y)}t(Gh,"d3_scale_log");var Bv={floor:function(Y){return-Math.ceil(-Y)},ceil:function(Y){return-Math.floor(-Y)}};r.scale.pow=function(){return ru(r.scale.linear(),1,[0,1])};function ru(Y,ve,_e){var Ce=sl(ve),Re=sl(1/ve);function Le(Ke){return Y(Ce(Ke))}return t(Le,"scale"),Le.invert=function(Ke){return Re(Y.invert(Ke))},Le.domain=function(Ke){return arguments.length?(Y.domain((_e=Ke.map(Number)).map(Ce)),Le):_e},Le.ticks=function(Ke){return eh(_e,Ke)},Le.tickFormat=function(Ke,Ne){return d3_scale_linearTickFormat(_e,Ke,Ne)},Le.nice=function(Ke){return Le.domain(Uf(_e,Ke))},Le.exponent=function(Ke){return arguments.length?(Ce=sl(ve=Ke),Re=sl(1/ve),Y.domain(_e.map(Ce)),Le):ve},Le.copy=function(){return ru(Y.copy(),ve,_e)},Fv(Le,Y)}t(ru,"d3_scale_pow");function sl(Y){return function(ve){return ve<0?-Math.pow(-ve,Y):Math.pow(ve,Y)}}t(sl,"d3_scale_powPow"),r.scale.sqrt=function(){return r.scale.pow().exponent(.5)},r.scale.ordinal=function(){return sf([],{t:"range",a:[[]]})};function sf(Y,ve){var _e,Ce,Re;function Le(Ne){return Ce[((_e.get(Ne)||(ve.t==="range"?_e.set(Ne,Y.push(Ne)):NaN))-1)%Ce.length]}t(Le,"scale");function Ke(Ne,rt){return r.range(Y.length).map(function(yt){return Ne+rt*yt})}return t(Ke,"steps"),Le.domain=function(Ne){if(!arguments.length)return Y;Y=[],_e=new M;for(var rt=-1,yt=Ne.length,gt;++rt<yt;)_e.has(gt=Ne[rt])||_e.set(gt,Y.push(gt));return Le[ve.t].apply(Le,ve.a)},Le.range=function(Ne){return arguments.length?(Ce=Ne,Re=0,ve={t:"range",a:arguments},Le):Ce},Le.rangePoints=function(Ne,rt){arguments.length<2&&(rt=0);var yt=Ne[0],gt=Ne[1],Ut=Y.length<2?(yt=(yt+gt)/2,0):(gt-yt)/(Y.length-1+rt);return Ce=Ke(yt+Ut*rt/2,Ut),Re=0,ve={t:"rangePoints",a:arguments},Le},Le.rangeRoundPoints=function(Ne,rt){arguments.length<2&&(rt=0);var yt=Ne[0],gt=Ne[1],Ut=Y.length<2?(yt=gt=Math.round((yt+gt)/2),0):(gt-yt)/(Y.length-1+rt)|0;return Ce=Ke(yt+Math.round(Ut*rt/2+(gt-yt-(Y.length-1+rt)*Ut)/2),Ut),Re=0,ve={t:"rangeRoundPoints",a:arguments},Le},Le.rangeBands=function(Ne,rt,yt){arguments.length<2&&(rt=0),arguments.length<3&&(yt=rt);var gt=Ne[1]<Ne[0],Ut=Ne[gt-0],Tt=Ne[1-gt],or=(Tt-Ut)/(Y.length-rt+2*yt);return Ce=Ke(Ut+or*yt,or),gt&&Ce.reverse(),Re=or*(1-rt),ve={t:"rangeBands",a:arguments},Le},Le.rangeRoundBands=function(Ne,rt,yt){arguments.length<2&&(rt=0),arguments.length<3&&(yt=rt);var gt=Ne[1]<Ne[0],Ut=Ne[gt-0],Tt=Ne[1-gt],or=Math.floor((Tt-Ut)/(Y.length-rt+2*yt));return Ce=Ke(Ut+Math.round((Tt-Ut-(Y.length-rt)*or)/2),or),gt&&Ce.reverse(),Re=Math.round(or*(1-rt)),ve={t:"rangeRoundBands",a:arguments},Le},Le.rangeBand=function(){return Re},Le.rangeExtent=function(){return Vh(ve.a[0])},Le.copy=function(){return sf(Y,ve)},Le.domain(Y)}t(sf,"d3_scale_ordinal"),r.scale.category10=function(){return r.scale.ordinal().range(Ov)},r.scale.category20=function(){return r.scale.ordinal().range(Nv)},r.scale.category20b=function(){return r.scale.ordinal().range(vc)},r.scale.category20c=function(){return r.scale.ordinal().range(Pd)};var Ov=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xr),Nv=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xr),vc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xr),Pd=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xr);r.scale.quantile=function(){return au([],[])};function au(Y,ve){var _e;function Ce(){var Le=0,Ke=ve.length;for(_e=[];++Le<Ke;)_e[Le-1]=r.quantile(Y,Le/Ke);return Re}t(Ce,"rescale");function Re(Le){if(!isNaN(Le=+Le))return ve[r.bisect(_e,Le)]}return t(Re,"scale"),Re.domain=function(Le){return arguments.length?(Y=Le.map(d).filter(g).sort(c),Ce()):Y},Re.range=function(Le){return arguments.length?(ve=Le,Ce()):ve},Re.quantiles=function(){return _e},Re.invertExtent=function(Le){return Le=ve.indexOf(Le),Le<0?[NaN,NaN]:[Le>0?_e[Le-1]:Y[0],Le<_e.length?_e[Le]:Y[Y.length-1]]},Re.copy=function(){return au(Y,ve)},Ce()}t(au,"d3_scale_quantile"),r.scale.quantize=function(){return dc(0,1,[0,1])};function dc(Y,ve,_e){var Ce,Re;function Le(Ne){return _e[Math.max(0,Math.min(Re,Math.floor(Ce*(Ne-Y))))]}t(Le,"scale");function Ke(){return Ce=_e.length/(ve-Y),Re=_e.length-1,Le}return t(Ke,"rescale"),Le.domain=function(Ne){return arguments.length?(Y=+Ne[0],ve=+Ne[Ne.length-1],Ke()):[Y,ve]},Le.range=function(Ne){return arguments.length?(_e=Ne,Ke()):_e},Le.invertExtent=function(Ne){return Ne=_e.indexOf(Ne),Ne=Ne<0?NaN:Ne/Ce+Y,[Ne,Ne+1/Ce]},Le.copy=function(){return dc(Y,ve,_e)},Ke()}t(dc,"d3_scale_quantize"),r.scale.threshold=function(){return Du([.5],[0,1])};function Du(Y,ve){function _e(Ce){if(Ce<=Ce)return ve[r.bisect(Y,Ce)]}return t(_e,"scale"),_e.domain=function(Ce){return arguments.length?(Y=Ce,_e):Y},_e.range=function(Ce){return arguments.length?(ve=Ce,_e):ve},_e.invertExtent=function(Ce){return Ce=ve.indexOf(Ce),[Y[Ce-1],Y[Ce]]},_e.copy=function(){return Du(Y,ve)},_e}t(Du,"d3_scale_threshold"),r.scale.identity=function(){return Iu([0,1])};function Iu(Y){function ve(_e){return+_e}return t(ve,"identity"),ve.invert=ve,ve.domain=ve.range=function(_e){return arguments.length?(Y=_e.map(ve),ve):Y},ve.ticks=function(_e){return eh(Y,_e)},ve.tickFormat=function(_e,Ce){return d3_scale_linearTickFormat(Y,_e,Ce)},ve.copy=function(){return Iu(Y)},ve}t(Iu,"d3_scale_identity"),r.svg={};function qv(){return 0}t(qv,"d3_zero"),r.svg.arc=function(){var Y=Si,ve=th,_e=qv,Ce=Hf,Re=Uv,Le=rh,Ke=$f;function Ne(){var yt=Math.max(0,+Y.apply(this,arguments)),gt=Math.max(0,+ve.apply(this,arguments)),Ut=Re.apply(this,arguments)-vt,Tt=Le.apply(this,arguments)-vt,or=Math.abs(Tt-Ut),pr=Ut>Tt?0:1;if(gt<yt&&(jt=gt,gt=yt,yt=jt),or>=at)return rt(gt,pr)+(yt?rt(yt,1-pr):"")+"Z";var jt,er,rr,dr,gr=0,tr=0,Yr,ia,ua,oa,pa,Ya,en,Ca,pn=[];if((dr=(+Ke.apply(this,arguments)||0)/2)&&(rr=Ce===Hf?Math.sqrt(yt*yt+gt*gt):+Ce.apply(this,arguments),pr||(tr*=-1),gt&&(tr=ir(rr/gt*Math.sin(dr))),yt&&(gr=ir(rr/yt*Math.sin(dr)))),gt){Yr=gt*Math.cos(Ut+tr),ia=gt*Math.sin(Ut+tr),ua=gt*Math.cos(Tt-tr),oa=gt*Math.sin(Tt-tr);var ti=Math.abs(Tt-Ut-2*tr)<=ze?0:1;if(tr&&ah(Yr,ia,ua,oa)===pr^ti){var Hi=(Ut+Tt)/2;Yr=gt*Math.cos(Hi),ia=gt*Math.sin(Hi),ua=oa=null}}else Yr=ia=0;if(yt){pa=yt*Math.cos(Tt-gr),Ya=yt*Math.sin(Tt-gr),en=yt*Math.cos(Ut+gr),Ca=yt*Math.sin(Ut+gr);var si=Math.abs(Ut-Tt+2*gr)<=ze?0:1;if(gr&&ah(pa,Ya,en,Ca)===1-pr^si){var wa=(Ut+Tt)/2;pa=yt*Math.cos(wa),Ya=yt*Math.sin(wa),en=Ca=null}}else pa=Ya=0;if(or>Et&&(jt=Math.min(Math.abs(gt-yt)/2,+_e.apply(this,arguments)))>.001){er=yt<gt^pr?0:1;var En=jt,zn=jt;if(or<ze){var Fn=en==null?[pa,Ya]:ua==null?[Yr,ia]:Li([Yr,ia],[en,Ca],[ua,oa],[pa,Ya]),Yi=Yr-Fn[0],On=ia-Fn[1],fo=ua-Fn[0],Wi=oa-Fn[1],mo=1/Math.sin(Math.acos((Yi*fo+On*Wi)/(Math.sqrt(Yi*Yi+On*On)*Math.sqrt(fo*fo+Wi*Wi)))/2),No=Math.sqrt(Fn[0]*Fn[0]+Fn[1]*Fn[1]);zn=Math.min(jt,(yt-No)/(mo-1)),En=Math.min(jt,(gt-No)/(mo+1))}if(ua!=null){var ss=Vf(en==null?[pa,Ya]:[en,Ca],[Yr,ia],gt,En,pr),st=Vf([ua,oa],[pa,Ya],gt,En,pr);jt===En?pn.push("M",ss[0],"A",En,",",En," 0 0,",er," ",ss[1],"A",gt,",",gt," 0 ",1-pr^ah(ss[1][0],ss[1][1],st[1][0],st[1][1]),",",pr," ",st[1],"A",En,",",En," 0 0,",er," ",st[0]):pn.push("M",ss[0],"A",En,",",En," 0 1,",er," ",st[0])}else pn.push("M",Yr,",",ia);if(en!=null){var Yt=Vf([Yr,ia],[en,Ca],yt,-zn,pr),Zt=Vf([pa,Ya],ua==null?[Yr,ia]:[ua,oa],yt,-zn,pr);jt===zn?pn.push("L",Zt[0],"A",zn,",",zn," 0 0,",er," ",Zt[1],"A",yt,",",yt," 0 ",pr^ah(Zt[1][0],Zt[1][1],Yt[1][0],Yt[1][1]),",",1-pr," ",Yt[1],"A",zn,",",zn," 0 0,",er," ",Yt[0]):pn.push("L",Zt[0],"A",zn,",",zn," 0 0,",er," ",Yt[0])}else pn.push("L",pa,",",Ya)}else pn.push("M",Yr,",",ia),ua!=null&&pn.push("A",gt,",",gt," 0 ",ti,",",pr," ",ua,",",oa),pn.push("L",pa,",",Ya),en!=null&&pn.push("A",yt,",",yt," 0 ",si,",",1-pr," ",en,",",Ca);return pn.push("Z"),pn.join("")}t(Ne,"arc");function rt(yt,gt){return"M0,"+yt+"A"+yt+","+yt+" 0 1,"+gt+" 0,"+-yt+"A"+yt+","+yt+" 0 1,"+gt+" 0,"+yt}return t(rt,"circleSegment"),Ne.innerRadius=function(yt){return arguments.length?(Y=ba(yt),Ne):Y},Ne.outerRadius=function(yt){return arguments.length?(ve=ba(yt),Ne):ve},Ne.cornerRadius=function(yt){return arguments.length?(_e=ba(yt),Ne):_e},Ne.padRadius=function(yt){return arguments.length?(Ce=yt==Hf?Hf:ba(yt),Ne):Ce},Ne.startAngle=function(yt){return arguments.length?(Re=ba(yt),Ne):Re},Ne.endAngle=function(yt){return arguments.length?(Le=ba(yt),Ne):Le},Ne.padAngle=function(yt){return arguments.length?(Ke=ba(yt),Ne):Ke},Ne.centroid=function(){var yt=(+Y.apply(this,arguments)+ +ve.apply(this,arguments))/2,gt=(+Re.apply(this,arguments)+ +Le.apply(this,arguments))/2-vt;return[Math.cos(gt)*yt,Math.sin(gt)*yt]},Ne};var Hf="auto";function Si(Y){return Y.innerRadius}t(Si,"d3_svg_arcInnerRadius");function th(Y){return Y.outerRadius}t(th,"d3_svg_arcOuterRadius");function Uv(Y){return Y.startAngle}t(Uv,"d3_svg_arcStartAngle");function rh(Y){return Y.endAngle}t(rh,"d3_svg_arcEndAngle");function $f(Y){return Y&&Y.padAngle}t($f,"d3_svg_arcPadAngle");function ah(Y,ve,_e,Ce){return(Y-_e)*ve-(ve-Ce)*Y>0?0:1}t(ah,"d3_svg_arcSweep");function Vf(Y,ve,_e,Ce,Re){var Le=Y[0]-ve[0],Ke=Y[1]-ve[1],Ne=(Re?Ce:-Ce)/Math.sqrt(Le*Le+Ke*Ke),rt=Ne*Ke,yt=-Ne*Le,gt=Y[0]+rt,Ut=Y[1]+yt,Tt=ve[0]+rt,or=ve[1]+yt,pr=(gt+Tt)/2,jt=(Ut+or)/2,er=Tt-gt,rr=or-Ut,dr=er*er+rr*rr,gr=_e-Ce,tr=gt*or-Tt*Ut,Yr=(rr<0?-1:1)*Math.sqrt(Math.max(0,gr*gr*dr-tr*tr)),ia=(tr*rr-er*Yr)/dr,ua=(-tr*er-rr*Yr)/dr,oa=(tr*rr+er*Yr)/dr,pa=(-tr*er+rr*Yr)/dr,Ya=ia-pr,en=ua-jt,Ca=oa-pr,pn=pa-jt;return Ya*Ya+en*en>Ca*Ca+pn*pn&&(ia=oa,ua=pa),[[ia-rt,ua-yt],[ia*_e/gr,ua*_e/gr]]}t(Vf,"d3_svg_arcCornerTangents");function nh(){return!0}t(nh,"d3_true");function Hv(Y){var ve=Vi,_e=Ai,Ce=nh,Re=As,Le=Re.key,Ke=.7;function Ne(rt){var yt=[],gt=[],Ut=-1,Tt=rt.length,or,pr=ba(ve),jt=ba(_e);function er(){yt.push("M",Re(Y(gt),Ke))}for(t(er,"segment");++Ut<Tt;)Ce.call(this,or=rt[Ut],Ut)?gt.push([+pr.call(this,or,Ut),+jt.call(this,or,Ut)]):gt.length&&(er(),gt=[]);return gt.length&&er(),yt.length?yt.join(""):null}return t(Ne,"line"),Ne.x=function(rt){return arguments.length?(ve=rt,Ne):ve},Ne.y=function(rt){return arguments.length?(_e=rt,Ne):_e},Ne.defined=function(rt){return arguments.length?(Ce=rt,Ne):Ce},Ne.interpolate=function(rt){return arguments.length?(typeof rt=="function"?Le=Re=rt:Le=(Re=ih.get(rt)||As).key,Ne):Le},Ne.tension=function(rt){return arguments.length?(Ke=rt,Ne):Ke},Ne}t(Hv,"d3_svg_line"),r.svg.line=function(){return Hv(R)};var ih=r.map({linear:As,"linear-closed":pc,step:gc,"step-before":nu,"step-after":Ss,basis:oh,"basis-open":js,"basis-closed":Gf,bundle:ff,cardinal:zu,"cardinal-open":jh,"cardinal-closed":lf,monotone:Dd});ih.forEach(function(Y,ve){ve.key=Y,ve.closed=/-closed$/.test(Y)});function As(Y){return Y.length>1?Y.join("L"):Y+"Z"}t(As,"d3_svg_lineLinear");function pc(Y){return Y.join("L")+"Z"}t(pc,"d3_svg_lineLinearClosed");function gc(Y){for(var ve=0,_e=Y.length,Ce=Y[0],Re=[Ce[0],",",Ce[1]];++ve<_e;)Re.push("H",(Ce[0]+(Ce=Y[ve])[0])/2,"V",Ce[1]);return _e>1&&Re.push("H",Ce[0]),Re.join("")}t(gc,"d3_svg_lineStep");function nu(Y){for(var ve=0,_e=Y.length,Ce=Y[0],Re=[Ce[0],",",Ce[1]];++ve<_e;)Re.push("V",(Ce=Y[ve])[1],"H",Ce[0]);return Re.join("")}t(nu,"d3_svg_lineStepBefore");function Ss(Y){for(var ve=0,_e=Y.length,Ce=Y[0],Re=[Ce[0],",",Ce[1]];++ve<_e;)Re.push("H",(Ce=Y[ve])[0],"V",Ce[1]);return Re.join("")}t(Ss,"d3_svg_lineStepAfter");function jh(Y,ve){return Y.length<4?As(Y):Y[1]+iu(Y.slice(1,-1),uf(Y,ve))}t(jh,"d3_svg_lineCardinalOpen");function lf(Y,ve){return Y.length<3?pc(Y):Y[0]+iu((Y.push(Y[0]),Y),uf([Y[Y.length-2]].concat(Y,[Y[1]]),ve))}t(lf,"d3_svg_lineCardinalClosed");function zu(Y,ve){return Y.length<3?As(Y):Y[0]+iu(Y,uf(Y,ve))}t(zu,"d3_svg_lineCardinal");function iu(Y,ve){if(ve.length<1||Y.length!=ve.length&&Y.length!=ve.length+2)return As(Y);var _e=Y.length!=ve.length,Ce="",Re=Y[0],Le=Y[1],Ke=ve[0],Ne=Ke,rt=1;if(_e&&(Ce+="Q"+(Le[0]-Ke[0]*2/3)+","+(Le[1]-Ke[1]*2/3)+","+Le[0]+","+Le[1],Re=Y[1],rt=2),ve.length>1){Ne=ve[1],Le=Y[rt],rt++,Ce+="C"+(Re[0]+Ke[0])+","+(Re[1]+Ke[1])+","+(Le[0]-Ne[0])+","+(Le[1]-Ne[1])+","+Le[0]+","+Le[1];for(var yt=2;yt<ve.length;yt++,rt++)Le=Y[rt],Ne=ve[yt],Ce+="S"+(Le[0]-Ne[0])+","+(Le[1]-Ne[1])+","+Le[0]+","+Le[1]}if(_e){var gt=Y[rt];Ce+="Q"+(Le[0]+Ne[0]*2/3)+","+(Le[1]+Ne[1]*2/3)+","+gt[0]+","+gt[1]}return Ce}t(iu,"d3_svg_lineHermite");function uf(Y,ve){for(var _e=[],Ce=(1-ve)/2,Re,Le=Y[0],Ke=Y[1],Ne=1,rt=Y.length;++Ne<rt;)Re=Le,Le=Ke,Ke=Y[Ne],_e.push([Ce*(Ke[0]-Re[0]),Ce*(Ke[1]-Re[1])]);return _e}t(uf,"d3_svg_lineCardinalTangents");function oh(Y){if(Y.length<3)return As(Y);var ve=1,_e=Y.length,Ce=Y[0],Re=Ce[0],Le=Ce[1],Ke=[Re,Re,Re,(Ce=Y[1])[0]],Ne=[Le,Le,Le,Ce[1]],rt=[Re,",",Le,"L",Go(Vl,Ke),",",Go(Vl,Ne)];for(Y.push(Y[_e-1]);++ve<=_e;)Ce=Y[ve],Ke.shift(),Ke.push(Ce[0]),Ne.shift(),Ne.push(Ce[1]),cf(rt,Ke,Ne);return Y.pop(),rt.push("L",Ce),rt.join("")}t(oh,"d3_svg_lineBasis");function js(Y){if(Y.length<4)return As(Y);for(var ve=[],_e=-1,Ce=Y.length,Re,Le=[0],Ke=[0];++_e<3;)Re=Y[_e],Le.push(Re[0]),Ke.push(Re[1]);for(ve.push(Go(Vl,Le)+","+Go(Vl,Ke)),--_e;++_e<Ce;)Re=Y[_e],Le.shift(),Le.push(Re[0]),Ke.shift(),Ke.push(Re[1]),cf(ve,Le,Ke);return ve.join("")}t(js,"d3_svg_lineBasisOpen");function Gf(Y){for(var ve,_e=-1,Ce=Y.length,Re=Ce+4,Le,Ke=[],Ne=[];++_e<4;)Le=Y[_e%Ce],Ke.push(Le[0]),Ne.push(Le[1]);for(ve=[Go(Vl,Ke),",",Go(Vl,Ne)],--_e;++_e<Re;)Le=Y[_e%Ce],Ke.shift(),Ke.push(Le[0]),Ne.shift(),Ne.push(Le[1]),cf(ve,Ke,Ne);return ve.join("")}t(Gf,"d3_svg_lineBasisClosed");function ff(Y,ve){var _e=Y.length-1;if(_e)for(var Ce=Y[0][0],Re=Y[0][1],Le=Y[_e][0]-Ce,Ke=Y[_e][1]-Re,Ne=-1,rt,yt;++Ne<=_e;)rt=Y[Ne],yt=Ne/_e,rt[0]=ve*rt[0]+(1-ve)*(Ce+yt*Le),rt[1]=ve*rt[1]+(1-ve)*(Re+yt*Ke);return oh(Y)}t(ff,"d3_svg_lineBundle");function Go(Y,ve){return Y[0]*ve[0]+Y[1]*ve[1]+Y[2]*ve[2]+Y[3]*ve[3]}t(Go,"d3_svg_lineDot4");var Fu=[0,2/3,1/3,0],Yh=[0,1/3,2/3,0],Vl=[0,1/6,2/3,1/6];function cf(Y,ve,_e){Y.push("C",Go(Fu,ve),",",Go(Fu,_e),",",Go(Yh,ve),",",Go(Yh,_e),",",Go(Vl,ve),",",Go(Vl,_e))}t(cf,"d3_svg_lineBasisBezier");function jf(Y,ve){return(ve[1]-Y[1])/(ve[0]-Y[0])}t(jf,"d3_svg_lineSlope");function yc(Y){for(var ve=0,_e=Y.length-1,Ce=[],Re=Y[0],Le=Y[1],Ke=Ce[0]=jf(Re,Le);++ve<_e;)Ce[ve]=(Ke+(Ke=jf(Re=Le,Le=Y[ve+1])))/2;return Ce[ve]=Ke,Ce}t(yc,"d3_svg_lineFiniteDifferences");function Bu(Y){for(var ve=[],_e,Ce,Re,Le,Ke=yc(Y),Ne=-1,rt=Y.length-1;++Ne<rt;)_e=jf(Y[Ne],Y[Ne+1]),y(_e)<Et?Ke[Ne]=Ke[Ne+1]=0:(Ce=Ke[Ne]/_e,Re=Ke[Ne+1]/_e,Le=Ce*Ce+Re*Re,Le>9&&(Le=_e*3/Math.sqrt(Le),Ke[Ne]=Le*Ce,Ke[Ne+1]=Le*Re));for(Ne=-1;++Ne<=rt;)Le=(Y[Math.min(rt,Ne+1)][0]-Y[Math.max(0,Ne-1)][0])/(6*(1+Ke[Ne]*Ke[Ne])),ve.push([Le||0,Ke[Ne]*Le||0]);return ve}t(Bu,"d3_svg_lineMonotoneTangents");function Dd(Y){return Y.length<3?As(Y):Y[0]+iu(Y,Bu(Y))}t(Dd,"d3_svg_lineMonotone"),r.svg.line.radial=function(){var Y=Hv($v);return Y.radius=Y.x,delete Y.x,Y.angle=Y.y,delete Y.y,Y};function $v(Y){for(var ve,_e=-1,Ce=Y.length,Re,Le;++_e<Ce;)ve=Y[_e],Re=ve[0],Le=ve[1]-vt,ve[0]=Re*Math.cos(Le),ve[1]=Re*Math.sin(Le);return Y}t($v,"d3_svg_lineRadial");function hf(Y){var ve=Vi,_e=Vi,Ce=0,Re=Ai,Le=nh,Ke=As,Ne=Ke.key,rt=Ke,yt="L",gt=.7;function Ut(Tt){var or=[],pr=[],jt=[],er=-1,rr=Tt.length,dr,gr=ba(ve),tr=ba(Ce),Yr=ve===_e?function(){return ua}:ba(_e),ia=Ce===Re?function(){return oa}:ba(Re),ua,oa;function pa(){or.push("M",Ke(Y(jt),gt),yt,rt(Y(pr.reverse()),gt),"Z")}for(t(pa,"segment");++er<rr;)Le.call(this,dr=Tt[er],er)?(pr.push([ua=+gr.call(this,dr,er),oa=+tr.call(this,dr,er)]),jt.push([+Yr.call(this,dr,er),+ia.call(this,dr,er)])):pr.length&&(pa(),pr=[],jt=[]);return pr.length&&pa(),or.length?or.join(""):null}return t(Ut,"area"),Ut.x=function(Tt){return arguments.length?(ve=_e=Tt,Ut):_e},Ut.x0=function(Tt){return arguments.length?(ve=Tt,Ut):ve},Ut.x1=function(Tt){return arguments.length?(_e=Tt,Ut):_e},Ut.y=function(Tt){return arguments.length?(Ce=Re=Tt,Ut):Re},Ut.y0=function(Tt){return arguments.length?(Ce=Tt,Ut):Ce},Ut.y1=function(Tt){return arguments.length?(Re=Tt,Ut):Re},Ut.defined=function(Tt){return arguments.length?(Le=Tt,Ut):Le},Ut.interpolate=function(Tt){return arguments.length?(typeof Tt=="function"?Ne=Ke=Tt:Ne=(Ke=ih.get(Tt)||As).key,rt=Ke.reverse||Ke,yt=Ke.closed?"M":"L",Ut):Ne},Ut.tension=function(Tt){return arguments.length?(gt=Tt,Ut):gt},Ut}t(hf,"d3_svg_area"),nu.reverse=Ss,Ss.reverse=nu,r.svg.area=function(){return hf(R)},r.svg.area.radial=function(){var Y=hf($v);return Y.radius=Y.x,delete Y.x,Y.innerRadius=Y.x0,delete Y.x0,Y.outerRadius=Y.x1,delete Y.x1,Y.angle=Y.y,delete Y.y,Y.startAngle=Y.y0,delete Y.y0,Y.endAngle=Y.y1,delete Y.y1,Y};function sh(Y){return Y.source}t(sh,"d3_source");function Vv(Y){return Y.target}t(Vv,"d3_target"),r.svg.chord=function(){var Y=sh,ve=Vv,_e=Id,Ce=Uv,Re=rh;function Le(gt,Ut){var Tt=Ke(this,Y,gt,Ut),or=Ke(this,ve,gt,Ut);return"M"+Tt.p0+rt(Tt.r,Tt.p1,Tt.a1-Tt.a0)+(Ne(Tt,or)?yt(Tt.r,Tt.p1,Tt.r,Tt.p0):yt(Tt.r,Tt.p1,or.r,or.p0)+rt(or.r,or.p1,or.a1-or.a0)+yt(or.r,or.p1,Tt.r,Tt.p0))+"Z"}t(Le,"chord");function Ke(gt,Ut,Tt,or){var pr=Ut.call(gt,Tt,or),jt=_e.call(gt,pr,or),er=Ce.call(gt,pr,or)-vt,rr=Re.call(gt,pr,or)-vt;return{r:jt,a0:er,a1:rr,p0:[jt*Math.cos(er),jt*Math.sin(er)],p1:[jt*Math.cos(rr),jt*Math.sin(rr)]}}t(Ke,"subgroup");function Ne(gt,Ut){return gt.a0==Ut.a0&&gt.a1==Ut.a1}t(Ne,"equals");function rt(gt,Ut,Tt){return"A"+gt+","+gt+" 0 "+ +(Tt>ze)+",1 "+Ut}t(rt,"arc");function yt(gt,Ut,Tt,or){return"Q 0,0 "+or}return t(yt,"curve"),Le.radius=function(gt){return arguments.length?(_e=ba(gt),Le):_e},Le.source=function(gt){return arguments.length?(Y=ba(gt),Le):Y},Le.target=function(gt){return arguments.length?(ve=ba(gt),Le):ve},Le.startAngle=function(gt){return arguments.length?(Ce=ba(gt),Le):Ce},Le.endAngle=function(gt){return arguments.length?(Re=ba(gt),Le):Re},Le};function Id(Y){return Y.radius}t(Id,"d3_svg_chordRadius"),r.svg.diagonal=function(){var Y=sh,ve=Vv,_e=vf;function Ce(Re,Le){var Ke=Y.call(this,Re,Le),Ne=ve.call(this,Re,Le),rt=(Ke.y+Ne.y)/2,yt=[Ke,{x:Ke.x,y:rt},{x:Ne.x,y:rt},Ne];return yt=yt.map(_e),"M"+yt[0]+"C"+yt[1]+" "+yt[2]+" "+yt[3]}return t(Ce,"diagonal"),Ce.source=function(Re){return arguments.length?(Y=ba(Re),Ce):Y},Ce.target=function(Re){return arguments.length?(ve=ba(Re),Ce):ve},Ce.projection=function(Re){return arguments.length?(_e=Re,Ce):_e},Ce};function vf(Y){return[Y.x,Y.y]}t(vf,"d3_svg_diagonalProjection"),r.svg.diagonal.radial=function(){var Y=r.svg.diagonal(),ve=vf,_e=Y.projection;return Y.projection=function(Ce){return arguments.length?_e(mc(ve=Ce)):ve},Y};function mc(Y){return function(){var ve=Y.apply(this,arguments),_e=ve[0],Ce=ve[1]-vt;return[_e*Math.cos(Ce),_e*Math.sin(Ce)]}}t(mc,"d3_svg_diagonalRadialProjection"),r.svg.symbol=function(){var Y=zd,ve=Gv;function _e(Ce,Re){return(Yv.get(Y.call(this,Ce,Re))||jv)(ve.call(this,Ce,Re))}return t(_e,"symbol"),_e.type=function(Ce){return arguments.length?(Y=ba(Ce),_e):Y},_e.size=function(Ce){return arguments.length?(ve=ba(Ce),_e):ve},_e};function Gv(){return 64}t(Gv,"d3_svg_symbolSize");function zd(){return"circle"}t(zd,"d3_svg_symbolType");function jv(Y){var ve=Math.sqrt(Y/ze);return"M0,"+ve+"A"+ve+","+ve+" 0 1,1 0,"+-ve+"A"+ve+","+ve+" 0 1,1 0,"+ve+"Z"}t(jv,"d3_svg_symbolCircle");var Yv=r.map({circle:jv,cross:function(Y){var ve=Math.sqrt(Y/5)/2;return"M"+-3*ve+","+-ve+"H"+-ve+"V"+-3*ve+"H"+ve+"V"+-ve+"H"+3*ve+"V"+ve+"H"+ve+"V"+3*ve+"H"+-ve+"V"+ve+"H"+-3*ve+"Z"},diamond:function(Y){var ve=Math.sqrt(Y/(2*Wv)),_e=ve*Wv;return"M0,"+-ve+"L"+_e+",0 0,"+ve+" "+-_e+",0Z"},square:function(Y){var ve=Math.sqrt(Y)/2;return"M"+-ve+","+-ve+"L"+ve+","+-ve+" "+ve+","+ve+" "+-ve+","+ve+"Z"},"triangle-down":function(Y){var ve=Math.sqrt(Y/lh),_e=ve*lh/2;return"M0,"+_e+"L"+ve+","+-_e+" "+-ve+","+-_e+"Z"},"triangle-up":function(Y){var ve=Math.sqrt(Y/lh),_e=ve*lh/2;return"M0,"+-_e+"L"+ve+","+_e+" "+-ve+","+_e+"Z"}});r.svg.symbolTypes=Yv.keys();var lh=Math.sqrt(3),Wv=Math.tan(30*_t);re.transition=function(Y){for(var ve=Nu||++df,_e=bc(Y),Ce=[],Re,Le,Ke=xc||{time:Date.now(),ease:sc,delay:0,duration:250},Ne=-1,rt=this.length;++Ne<rt;){Ce.push(Re=[]);for(var yt=this[Ne],gt=-1,Ut=yt.length;++gt<Ut;)(Le=yt[gt])&&ii(Le,gt,_e,ve,Ke),Re.push(Le)}return Yf(Ce,_e,ve)},re.interrupt=function(Y){return this.each(Y==null?Ou:Xv(bc(Y)))};var Ou=Xv(bc());function Xv(Y){return function(){var ve,_e,Ce;(ve=this[Y])&&(Ce=ve[_e=ve.active])&&(Ce.timer.c=null,Ce.timer.t=NaN,--ve.count?delete ve[_e]:delete this[Y],ve.active+=.5,Ce.event&&Ce.event.interrupt.call(this,this.__data__,Ce.index))}}t(Xv,"d3_selection_interruptNS");function Yf(Y,ve,_e){return ie(Y,yo),Y.namespace=ve,Y.id=_e,Y}t(Yf,"d3_transition");var yo=[],df=0,Nu,xc;yo.call=re.call,yo.empty=re.empty,yo.node=re.node,yo.size=re.size,r.transition=function(Y,ve){return Y&&Y.transition?Nu?Y.transition(ve):Y:r.selection().transition(Y)},r.transition.prototype=yo,yo.select=function(Y){var ve=this.id,_e=this.namespace,Ce=[],Re,Le,Ke;Y=ae(Y);for(var Ne=-1,rt=this.length;++Ne<rt;){Ce.push(Re=[]);for(var yt=this[Ne],gt=-1,Ut=yt.length;++gt<Ut;)(Ke=yt[gt])&&(Le=Y.call(Ke,Ke.__data__,gt,Ne))?("__data__"in Ke&&(Le.__data__=Ke.__data__),ii(Le,gt,_e,ve,Ke[_e][ve]),Re.push(Le)):Re.push(null)}return Yf(Ce,_e,ve)},yo.selectAll=function(Y){var ve=this.id,_e=this.namespace,Ce=[],Re,Le,Ke,Ne,rt;Y=fe(Y);for(var yt=-1,gt=this.length;++yt<gt;)for(var Ut=this[yt],Tt=-1,or=Ut.length;++Tt<or;)if(Ke=Ut[Tt]){rt=Ke[_e][ve],Le=Y.call(Ke,Ke.__data__,Tt,yt),Ce.push(Re=[]);for(var pr=-1,jt=Le.length;++pr<jt;)(Ne=Le[pr])&&ii(Ne,pr,_e,ve,rt),Re.push(Ne)}return Yf(Ce,_e,ve)},yo.filter=function(Y){var ve=[],_e,Ce,Re;typeof Y!="function"&&(Y=Je(Y));for(var Le=0,Ke=this.length;Le<Ke;Le++){ve.push(_e=[]);for(var Ce=this[Le],Ne=0,rt=Ce.length;Ne<rt;Ne++)(Re=Ce[Ne])&&Y.call(Re,Re.__data__,Ne,Le)&&_e.push(Re)}return Yf(ve,this.namespace,this.id)},yo.tween=function(Y,ve){var _e=this.id,Ce=this.namespace;return arguments.length<2?this.node()[Ce][_e].tween.get(Y):et(this,ve==null?function(Re){Re[Ce][_e].tween.remove(Y)}:function(Re){Re[Ce][_e].tween.set(Y,ve)})};function uh(Y,ve,_e,Ce){var Re=Y.id,Le=Y.namespace;return et(Y,typeof _e=="function"?function(Ke,Ne,rt){Ke[Le][Re].tween.set(ve,Ce(_e.call(Ke,Ke.__data__,Ne,rt)))}:(_e=Ce(_e),function(Ke){Ke[Le][Re].tween.set(ve,_e)}))}t(uh,"d3_transition_tween"),yo.attr=function(Y,ve){if(arguments.length<2){for(ve in Y)this.attr(ve,Y[ve]);return this}var _e=Y=="transform"?Nh:Ui,Ce=r.ns.qualify(Y);function Re(){this.removeAttribute(Ce)}t(Re,"attrNull");function Le(){this.removeAttributeNS(Ce.space,Ce.local)}t(Le,"attrNullNS");function Ke(rt){return rt==null?Re:(rt+="",function(){var yt=this.getAttribute(Ce),gt;return yt!==rt&&(gt=_e(yt,rt),function(Ut){this.setAttribute(Ce,gt(Ut))})})}t(Ke,"attrTween");function Ne(rt){return rt==null?Le:(rt+="",function(){var yt=this.getAttributeNS(Ce.space,Ce.local),gt;return yt!==rt&&(gt=_e(yt,rt),function(Ut){this.setAttributeNS(Ce.space,Ce.local,gt(Ut))})})}return t(Ne,"attrTweenNS"),uh(this,"attr."+Y,ve,Ce.local?Ne:Ke)},yo.attrTween=function(Y,ve){var _e=r.ns.qualify(Y);function Ce(Le,Ke){var Ne=ve.call(this,Le,Ke,this.getAttribute(_e));return Ne&&function(rt){this.setAttribute(_e,Ne(rt))}}t(Ce,"attrTween");function Re(Le,Ke){var Ne=ve.call(this,Le,Ke,this.getAttributeNS(_e.space,_e.local));return Ne&&function(rt){this.setAttributeNS(_e.space,_e.local,Ne(rt))}}return t(Re,"attrTweenNS"),this.tween("attr."+Y,_e.local?Re:Ce)},yo.style=function(Y,ve,_e){var Ce=arguments.length;if(Ce<3){if(typeof Y!="string"){Ce<2&&(ve="");for(_e in Y)this.style(_e,Y[_e],ve);return this}_e=""}function Re(){this.style.removeProperty(Y)}t(Re,"styleNull");function Le(Ke){return Ke==null?Re:(Ke+="",function(){var Ne=a(this).getComputedStyle(this,null).getPropertyValue(Y),rt;return Ne!==Ke&&(rt=Ui(Ne,Ke),function(yt){this.style.setProperty(Y,rt(yt),_e)})})}return t(Le,"styleString"),uh(this,"style."+Y,ve,Le)},yo.styleTween=function(Y,ve,_e){arguments.length<3&&(_e="");function Ce(Re,Le){var Ke=ve.call(this,Re,Le,a(this).getComputedStyle(this,null).getPropertyValue(Y));return Ke&&function(Ne){this.style.setProperty(Y,Ke(Ne),_e)}}return t(Ce,"styleTween"),this.tween("style."+Y,Ce)},yo.text=function(Y){return uh(this,"text",Y,ll)};function ll(Y){return Y==null&&(Y=""),function(){this.textContent=Y}}t(ll,"d3_transition_text"),yo.remove=function(){var Y=this.namespace;return this.each("end.transition",function(){var ve;this[Y].count<2&&(ve=this.parentNode)&&ve.removeChild(this)})},yo.ease=function(Y){var ve=this.id,_e=this.namespace;return arguments.length<1?this.node()[_e][ve].ease:(typeof Y!="function"&&(Y=r.ease.apply(r,arguments)),et(this,function(Ce){Ce[_e][ve].ease=Y}))},yo.delay=function(Y){var ve=this.id,_e=this.namespace;return arguments.length<1?this.node()[_e][ve].delay:et(this,typeof Y=="function"?function(Ce,Re,Le){Ce[_e][ve].delay=+Y.call(Ce,Ce.__data__,Re,Le)}:(Y=+Y,function(Ce){Ce[_e][ve].delay=Y}))},yo.duration=function(Y){var ve=this.id,_e=this.namespace;return arguments.length<1?this.node()[_e][ve].duration:et(this,typeof Y=="function"?function(Ce,Re,Le){Ce[_e][ve].duration=Math.max(1,Y.call(Ce,Ce.__data__,Re,Le))}:(Y=Math.max(1,Y),function(Ce){Ce[_e][ve].duration=Y}))},yo.each=function(Y,ve){var _e=this.id,Ce=this.namespace;if(arguments.length<2){var Re=xc,Le=Nu;try{Nu=_e,et(this,function(Ke,Ne,rt){xc=Ke[Ce][_e],Y.call(Ke,Ke.__data__,Ne,rt)})}finally{xc=Re,Nu=Le}}else et(this,function(Ke){var Ne=Ke[Ce][_e];(Ne.event||(Ne.event=r.dispatch("start","end","interrupt"))).on(Y,ve)});return this},yo.transition=function(){for(var Y=this.id,ve=++df,_e=this.namespace,Ce=[],Re,Le,Ke,Ne,rt=0,yt=this.length;rt<yt;rt++){Ce.push(Re=[]);for(var Le=this[rt],gt=0,Ut=Le.length;gt<Ut;gt++)(Ke=Le[gt])&&(Ne=Ke[_e][Y],ii(Ke,gt,_e,ve,{time:Ne.time,ease:Ne.ease,delay:Ne.delay+Ne.duration,duration:Ne.duration})),Re.push(Ke)}return Yf(Ce,_e,ve)};function bc(Y){return Y==null?"__transition__":"__transition_"+Y+"__"}t(bc,"d3_transitionNamespace");function ii(Y,ve,_e,Ce,Re){var Le=Y[_e]||(Y[_e]={active:0,count:0}),Ke=Le[Ce],Ne,rt,yt,gt,Ut;function Tt(jt){var er=Ke.delay;if(rt.t=er+Ne,er<=jt)return or(jt-er);rt.c=or}t(Tt,"schedule");function or(jt){var er=Le.active,rr=Le[er];rr&&(rr.timer.c=null,rr.timer.t=NaN,--Le.count,delete Le[er],rr.event&&rr.event.interrupt.call(Y,Y.__data__,rr.index));for(var dr in Le)if(+dr<Ce){var gr=Le[dr];gr.timer.c=null,gr.timer.t=NaN,--Le.count,delete Le[dr]}rt.c=pr,Xn(function(){return rt.c&&pr(jt||1)&&(rt.c=null,rt.t=NaN),1},0,Ne),Le.active=Ce,Ke.event&&Ke.event.start.call(Y,Y.__data__,ve),Ut=[],Ke.tween.forEach(function(tr,Yr){(Yr=Yr.call(Y,Y.__data__,ve))&&Ut.push(Yr)}),gt=Ke.ease,yt=Ke.duration}t(or,"start");function pr(jt){for(var er=jt/yt,rr=gt(er),dr=Ut.length;dr>0;)Ut[--dr].call(Y,rr);if(er>=1)return Ke.event&&Ke.event.end.call(Y,Y.__data__,ve),--Le.count?delete Le[Ce]:delete Y[_e],1}t(pr,"tick"),Ke||(Ne=Re.time,rt=Xn(Tt,0,Ne),Ke=Le[Ce]={tween:new M,time:Ne,timer:rt,delay:Re.delay,duration:Re.duration,ease:Re.ease,index:ve},Re=null,++Le.count)}t(ii,"d3_transitionNode"),r.svg.axis=function(){var Y=r.scale.linear(),ve=_c,_e=6,Ce=6,Re=3,Le=[10],Ke=null,Ne;function rt(yt){yt.each(function(){var gt=r.select(this),Ut=this.__chart__||Y,Tt=this.__chart__=Y.copy(),or=Ke==null?Tt.ticks?Tt.ticks.apply(Tt,Le):Tt.domain():Ke,pr=Ne==null?Tt.tickFormat?Tt.tickFormat.apply(Tt,Le):R:Ne,jt=gt.selectAll(".tick").data(or,Tt),er=jt.enter().insert("g",".domain").attr("class","tick").style("opacity",Et),rr=r.transition(jt.exit()).style("opacity",Et).remove(),dr=r.transition(jt.order()).style("opacity",1),gr=Math.max(_e,0)+Re,tr,Yr=Jc(Tt),ia=gt.selectAll(".domain").data([0]),ua=(ia.enter().append("path").attr("class","domain"),r.transition(ia));er.append("line"),er.append("text");var oa=er.select("line"),pa=dr.select("line"),Ya=jt.select("text").text(pr),en=er.select("text"),Ca=dr.select("text"),pn=ve==="top"||ve==="left"?-1:1,ti,Hi,si,wa;if(ve==="bottom"||ve==="top"?(tr=fl,ti="x",si="y",Hi="x2",wa="y2",Ya.attr("dy",pn<0?"0em":".71em").style("text-anchor","middle"),ua.attr("d","M"+Yr[0]+","+pn*Ce+"V0H"+Yr[1]+"V"+pn*Ce)):(tr=mi,ti="y",si="x",Hi="y2",wa="x2",Ya.attr("dy",".32em").style("text-anchor",pn<0?"end":"start"),ua.attr("d","M"+pn*Ce+","+Yr[0]+"H0V"+Yr[1]+"H"+pn*Ce)),oa.attr(wa,pn*_e),en.attr(si,pn*gr),pa.attr(Hi,0).attr(wa,pn*_e),Ca.attr(ti,0).attr(si,pn*gr),Tt.rangeBand){var En=Tt,zn=En.rangeBand()/2;Ut=Tt=t(function(Fn){return En(Fn)+zn},"scale1")}else Ut.rangeBand?Ut=Tt:rr.call(tr,Tt,Ut);er.call(tr,Ut,Tt),dr.call(tr,Tt,Tt)})}return t(rt,"axis"),rt.scale=function(yt){return arguments.length?(Y=yt,rt):Y},rt.orient=function(yt){return arguments.length?(ve=yt in ul?yt+"":_c,rt):ve},rt.ticks=function(){return arguments.length?(Le=i(arguments),rt):Le},rt.tickValues=function(yt){return arguments.length?(Ke=yt,rt):Ke},rt.tickFormat=function(yt){return arguments.length?(Ne=yt,rt):Ne},rt.tickSize=function(yt){var gt=arguments.length;return gt?(_e=+yt,Ce=+arguments[gt-1],rt):_e},rt.innerTickSize=function(yt){return arguments.length?(_e=+yt,rt):_e},rt.outerTickSize=function(yt){return arguments.length?(Ce=+yt,rt):Ce},rt.tickPadding=function(yt){return arguments.length?(Re=+yt,rt):Re},rt.tickSubdivide=function(){return arguments.length&&rt},rt};var _c="bottom",ul={top:1,right:1,bottom:1,left:1};function fl(Y,ve,_e){Y.attr("transform",function(Ce){var Re=ve(Ce);return"translate("+(isFinite(Re)?Re:_e(Ce))+",0)"})}t(fl,"d3_svg_axisX");function mi(Y,ve,_e){Y.attr("transform",function(Ce){var Re=ve(Ce);return"translate(0,"+(isFinite(Re)?Re:_e(Ce))+")"})}t(mi,"d3_svg_axisY"),r.svg.brush=function(){var Y=te(gt,"brushstart","brush","brushend"),ve=null,_e=null,Ce=[0,0],Re=[0,0],Le,Ke,Ne=!0,rt=!0,yt=fh[0];function gt(jt){jt.each(function(){var er=r.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",pr).on("touchstart.brush",pr),rr=er.selectAll(".background").data([0]);rr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),er.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var dr=er.selectAll(".resize").data(yt,R);dr.exit().remove(),dr.enter().append("g").attr("class",function(ia){return"resize "+ia}).style("cursor",function(ia){return Mi[ia]}).append("rect").attr("x",function(ia){return/[ew]$/.test(ia)?-3:null}).attr("y",function(ia){return/^[ns]/.test(ia)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),dr.style("display",gt.empty()?"none":null);var gr=r.transition(er),tr=r.transition(rr),Yr;ve&&(Yr=Jc(ve),tr.attr("x",Yr[0]).attr("width",Yr[1]-Yr[0]),Tt(gr)),_e&&(Yr=Jc(_e),tr.attr("y",Yr[0]).attr("height",Yr[1]-Yr[0]),or(gr)),Ut(gr)})}t(gt,"brush"),gt.event=function(jt){jt.each(function(){var er=Y.of(this,arguments),rr={x:Ce,y:Re,i:Le,j:Ke},dr=this.__chart__||rr;this.__chart__=rr,Nu?r.select(this).transition().each("start.brush",function(){Le=dr.i,Ke=dr.j,Ce=dr.x,Re=dr.y,er({type:"brushstart"})}).tween("brush:brush",function(){var gr=Ts(Ce,rr.x),tr=Ts(Re,rr.y);return Le=Ke=null,function(Yr){Ce=rr.x=gr(Yr),Re=rr.y=tr(Yr),er({type:"brush",mode:"resize"})}}).each("end.brush",function(){Le=rr.i,Ke=rr.j,er({type:"brush",mode:"resize"}),er({type:"brushend"})}):(er({type:"brushstart"}),er({type:"brush",mode:"resize"}),er({type:"brushend"}))})};function Ut(jt){jt.selectAll(".resize").attr("transform",function(er){return"translate("+Ce[+/e$/.test(er)]+","+Re[+/^s/.test(er)]+")"})}t(Ut,"redraw");function Tt(jt){jt.select(".extent").attr("x",Ce[0]),jt.selectAll(".extent,.n>rect,.s>rect").attr("width",Ce[1]-Ce[0])}t(Tt,"redrawX");function or(jt){jt.select(".extent").attr("y",Re[0]),jt.selectAll(".extent,.e>rect,.w>rect").attr("height",Re[1]-Re[0])}t(or,"redrawY");function pr(){var jt=this,er=r.select(r.event.target),rr=Y.of(jt,arguments),dr=r.select(jt),gr=er.datum(),tr=!/^(n|s)$/.test(gr)&&ve,Yr=!/^(e|w)$/.test(gr)&&_e,ia=er.classed("extent"),ua=kt(jt),oa,pa=r.mouse(jt),Ya,en=r.select(a(jt)).on("keydown.brush",ti).on("keyup.brush",Hi);if(r.event.changedTouches?en.on("touchmove.brush",si).on("touchend.brush",En):en.on("mousemove.brush",si).on("mouseup.brush",En),dr.interrupt().selectAll("*").interrupt(),ia)pa[0]=Ce[0]-pa[0],pa[1]=Re[0]-pa[1];else if(gr){var Ca=+/w$/.test(gr),pn=+/^n/.test(gr);Ya=[Ce[1-Ca]-pa[0],Re[1-pn]-pa[1]],pa[0]=Ce[Ca],pa[1]=Re[pn]}else r.event.altKey&&(oa=pa.slice());dr.style("pointer-events","none").selectAll(".resize").style("display",null),r.select("body").style("cursor",er.style("cursor")),rr({type:"brushstart"}),si();function ti(){r.event.keyCode==32&&(ia||(oa=null,pa[0]-=Ce[1],pa[1]-=Re[1],ia=2),G())}t(ti,"keydown");function Hi(){r.event.keyCode==32&&ia==2&&(pa[0]+=Ce[1],pa[1]+=Re[1],ia=0,G())}t(Hi,"keyup");function si(){var zn=r.mouse(jt),Fn=!1;Ya&&(zn[0]+=Ya[0],zn[1]+=Ya[1]),ia||(r.event.altKey?(oa||(oa=[(Ce[0]+Ce[1])/2,(Re[0]+Re[1])/2]),pa[0]=Ce[+(zn[0]<oa[0])],pa[1]=Re[+(zn[1]<oa[1])]):oa=null),tr&&wa(zn,ve,0)&&(Tt(dr),Fn=!0),Yr&&wa(zn,_e,1)&&(or(dr),Fn=!0),Fn&&(Ut(dr),rr({type:"brush",mode:ia?"move":"resize"}))}t(si,"brushmove");function wa(zn,Fn,Yi){var On=Jc(Fn),fo=On[0],Wi=On[1],mo=pa[Yi],No=Yi?Re:Ce,ss=No[1]-No[0],st,Yt;if(ia&&(fo-=mo,Wi-=ss+mo),st=(Yi?rt:Ne)?Math.max(fo,Math.min(Wi,zn[Yi])):zn[Yi],ia?Yt=(st+=mo)+ss:(oa&&(mo=Math.max(fo,Math.min(Wi,2*oa[Yi]-st))),mo<st?(Yt=st,st=mo):Yt=mo),No[0]!=st||No[1]!=Yt)return Yi?Ke=null:Le=null,No[0]=st,No[1]=Yt,!0}t(wa,"move1");function En(){si(),dr.style("pointer-events","all").selectAll(".resize").style("display",gt.empty()?"none":null),r.select("body").style("cursor",null),en.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),ua(),rr({type:"brushend"})}t(En,"brushend")}return t(pr,"brushstart"),gt.x=function(jt){return arguments.length?(ve=jt,yt=fh[!ve<<1|!_e],gt):ve},gt.y=function(jt){return arguments.length?(_e=jt,yt=fh[!ve<<1|!_e],gt):_e},gt.clamp=function(jt){return arguments.length?(ve&&_e?(Ne=!!jt[0],rt=!!jt[1]):ve?Ne=!!jt:_e&&(rt=!!jt),gt):ve&&_e?[Ne,rt]:ve?Ne:_e?rt:null},gt.extent=function(jt){var er,rr,dr,gr,tr;return arguments.length?(ve&&(er=jt[0],rr=jt[1],_e&&(er=er[0],rr=rr[0]),Le=[er,rr],ve.invert&&(er=ve(er),rr=ve(rr)),rr<er&&(tr=er,er=rr,rr=tr),(er!=Ce[0]||rr!=Ce[1])&&(Ce=[er,rr])),_e&&(dr=jt[0],gr=jt[1],ve&&(dr=dr[1],gr=gr[1]),Ke=[dr,gr],_e.invert&&(dr=_e(dr),gr=_e(gr)),gr<dr&&(tr=dr,dr=gr,gr=tr),(dr!=Re[0]||gr!=Re[1])&&(Re=[dr,gr])),gt):(ve&&(Le?(er=Le[0],rr=Le[1]):(er=Ce[0],rr=Ce[1],ve.invert&&(er=ve.invert(er),rr=ve.invert(rr)),rr<er&&(tr=er,er=rr,rr=tr))),_e&&(Ke?(dr=Ke[0],gr=Ke[1]):(dr=Re[0],gr=Re[1],_e.invert&&(dr=_e.invert(dr),gr=_e.invert(gr)),gr<dr&&(tr=dr,dr=gr,gr=tr))),ve&&_e?[[er,dr],[rr,gr]]:ve?[er,rr]:_e&&[dr,gr])},gt.clear=function(){return gt.empty()||(Ce=[0,0],Re=[0,0],Le=Ke=null),gt},gt.empty=function(){return!!ve&&Ce[0]==Ce[1]||!!_e&&Re[0]==Re[1]},r.rebind(gt,Y,"on")};var Mi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fh=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];r.text=Tn(function(Y){return Y.responseText}),r.json=function(Y,ve){return Pa(Y,"application/json",ou,ve)};function ou(Y){return JSON.parse(Y.responseText)}t(ou,"d3_json"),r.html=function(Y,ve){return Pa(Y,"text/html",Gl,ve)};function Gl(Y){var ve=s.createRange();return ve.selectNode(s.body),ve.createContextualFragment(Y.responseText)}t(Gl,"d3_html"),r.xml=Tn(function(Y){return Y.responseXML}),e.exports?e.exports=r:this.d3=r}).apply(self)})(Va);var nT=new Date,iT=new Date;function pl(e,r,n,i){function s(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return t(s,"interval"),s.floor=function(o){return e(o=new Date(+o)),o},s.ceil=function(o){return e(o=new Date(o-1)),r(o,1),e(o),o},s.round=function(o){var a=s(o),l=s.ceil(o);return o-a<l-o?a:l},s.offset=function(o,a){return r(o=new Date(+o),a==null?1:Math.floor(a)),o},s.range=function(o,a,l){var u=[],f;if(o=s.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return u;do u.push(f=new Date(+o)),r(o,l),e(o);while(f<o&&o<a);return u},s.filter=function(o){return pl(function(a){if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},function(a,l){if(a>=a)if(l<0)for(;++l<=0;)for(;r(a,-1),!o(a););else for(;--l>=0;)for(;r(a,1),!o(a););})},n&&(s.count=function(o,a){return nT.setTime(+o),iT.setTime(+a),e(nT),e(iT),Math.floor(n(nT,iT))},s.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?s.filter(i?function(a){return i(a)%o===0}:function(a){return s.count(0,a)%o===0}):s}),s}t(pl,"newInterval");var E_=pl(function(){},function(e,r){e.setTime(+e+r)},function(e,r){return r-e});E_.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pl(function(r){r.setTime(Math.floor(r/e)*e)},function(r,n){r.setTime(+r+n*e)},function(r,n){return(n-r)/e}):E_};const OO=E_;var NO=E_.range,C_=1e3,h0=6e4,L_=36e5,Nie=864e5,qie=6048e5,Uie=pl(function(e){e.setTime(e-e.getMilliseconds())},function(e,r){e.setTime(+e+r*C_)},function(e,r){return(r-e)/C_},function(e){return e.getUTCSeconds()});const qO=Uie;var UO=Uie.range,Hie=pl(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*C_)},function(e,r){e.setTime(+e+r*h0)},function(e,r){return(r-e)/h0},function(e){return e.getMinutes()});const pme=Hie;var gme=Hie.range,$ie=pl(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*C_-e.getMinutes()*h0)},function(e,r){e.setTime(+e+r*L_)},function(e,r){return(r-e)/L_},function(e){return e.getHours()});const yme=$ie;var mme=$ie.range,Vie=pl(function(e){e.setHours(0,0,0,0)},function(e,r){e.setDate(e.getDate()+r)},function(e,r){return(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*h0)/Nie},function(e){return e.getDate()-1});const OF=Vie;var xme=Vie.range;function w0(e){return pl(function(r){r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+n*7)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*h0)/qie})}t(w0,"weekday");var R_=w0(0),b1=w0(1),Gie=w0(2),jie=w0(3),v0=w0(4),Yie=w0(5),Wie=w0(6),HO=R_.range,bme=b1.range,_me=Gie.range,wme=jie.range,Tme=v0.range,Ame=Yie.range,Sme=Wie.range,Xie=pl(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,r){e.setMonth(e.getMonth()+r)},function(e,r){return r.getMonth()-e.getMonth()+(r.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});const Mme=Xie;var kme=Xie.range,NF=pl(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,r){e.setFullYear(e.getFullYear()+r)},function(e,r){return r.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});NF.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:pl(function(r){r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,n){r.setFullYear(r.getFullYear()+n*e)})};const Qg=NF;var Eme=NF.range,Zie=pl(function(e){e.setUTCSeconds(0,0)},function(e,r){e.setTime(+e+r*h0)},function(e,r){return(r-e)/h0},function(e){return e.getUTCMinutes()});const Cme=Zie;var Lme=Zie.range,Kie=pl(function(e){e.setUTCMinutes(0,0,0)},function(e,r){e.setTime(+e+r*L_)},function(e,r){return(r-e)/L_},function(e){return e.getUTCHours()});const Rme=Kie;var Pme=Kie.range,Jie=pl(function(e){e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCDate(e.getUTCDate()+r)},function(e,r){return(r-e)/Nie},function(e){return e.getUTCDate()-1});const qF=Jie;var Dme=Jie.range;function T0(e){return pl(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+n*7)},function(r,n){return(n-r)/qie})}t(T0,"utcWeekday");var P_=T0(0),_1=T0(1),Qie=T0(2),eoe=T0(3),d0=T0(4),toe=T0(5),roe=T0(6),$O=P_.range,Ime=_1.range,zme=Qie.range,Fme=eoe.range,Bme=d0.range,Ome=toe.range,Nme=roe.range,aoe=pl(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCMonth(e.getUTCMonth()+r)},function(e,r){return r.getUTCMonth()-e.getUTCMonth()+(r.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});const qme=aoe;var Ume=aoe.range,UF=pl(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r)},function(e,r){return r.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});UF.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:pl(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCFullYear(r.getUTCFullYear()+n*e)})};const ey=UF;var Hme=UF.range;const $me=Object.freeze(Object.defineProperty({__proto__:null,timeInterval:pl,timeMillisecond:OO,timeMilliseconds:NO,utcMillisecond:OO,utcMilliseconds:NO,timeSecond:qO,timeSeconds:UO,utcSecond:qO,utcSeconds:UO,timeMinute:pme,timeMinutes:gme,timeHour:yme,timeHours:mme,timeDay:OF,timeDays:xme,timeWeek:R_,timeWeeks:HO,timeSunday:R_,timeSundays:HO,timeMonday:b1,timeMondays:bme,timeTuesday:Gie,timeTuesdays:_me,timeWednesday:jie,timeWednesdays:wme,timeThursday:v0,timeThursdays:Tme,timeFriday:Yie,timeFridays:Ame,timeSaturday:Wie,timeSaturdays:Sme,timeMonth:Mme,timeMonths:kme,timeYear:Qg,timeYears:Eme,utcMinute:Cme,utcMinutes:Lme,utcHour:Rme,utcHours:Pme,utcDay:qF,utcDays:Dme,utcWeek:P_,utcWeeks:$O,utcSunday:P_,utcSundays:$O,utcMonday:_1,utcMondays:Ime,utcTuesday:Qie,utcTuesdays:zme,utcWednesday:eoe,utcWednesdays:Fme,utcThursday:d0,utcThursdays:Bme,utcFriday:toe,utcFridays:Ome,utcSaturday:roe,utcSaturdays:Nme,utcMonth:qme,utcMonths:Ume,utcYear:ey,utcYears:Hme},Symbol.toStringTag,{value:"Module"}));function oT(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}t(oT,"localDate");function sT(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}t(sT,"utcDate");function fm(e,r,n){return{y:e,m:r,d:n,H:0,M:0,S:0,L:0}}t(fm,"newDate");function noe(e){var r=e.dateTime,n=e.date,i=e.time,s=e.periods,o=e.days,a=e.shortDays,l=e.months,u=e.shortMonths,f=cm(s),h=hm(s),v=cm(o),c=hm(o),d=cm(a),g=hm(a),p=cm(l),b=hm(l),m=cm(u),y=hm(u),T={a:F,A:O,b:q,B:H,c:null,d:XO,e:XO,f:h1e,g:w1e,G:A1e,H:u1e,I:f1e,j:c1e,L:ioe,m:v1e,M:d1e,p:j,q:X,Q:JO,s:QO,S:p1e,u:g1e,U:y1e,V:m1e,w:x1e,W:b1e,x:null,X:null,y:_1e,Y:T1e,Z:S1e,"%":KO},_={a:G,A:$,b:te,B:ee,c:null,d:ZO,e:ZO,f:C1e,g:N1e,G:U1e,H:M1e,I:k1e,j:E1e,L:soe,m:L1e,M:R1e,p:ie,q:se,Q:JO,s:QO,S:P1e,u:D1e,U:I1e,V:z1e,w:F1e,W:B1e,x:null,X:null,y:O1e,Y:q1e,Z:H1e,"%":KO},M={a:k,A:L,b:P,B:D,c:B,d:YO,e:YO,f:i1e,g:jO,G:GO,H:WO,I:WO,j:t1e,L:n1e,m:e1e,M:r1e,p:S,q:Qme,Q:s1e,s:l1e,S:a1e,u:Wme,U:Xme,V:Zme,w:Yme,W:Kme,x:z,X:R,y:jO,Y:GO,Z:Jme,"%":o1e};T.x=w(n,T),T.X=w(i,T),T.c=w(r,T),_.x=w(n,_),_.X=w(i,_),_.c=w(r,_);function w(W,ne){return function(he){var re=[],ae=-1,fe=0,ce=W.length,xe,Te,me;for(he instanceof Date||(he=new Date(+he));++ae<ce;)W.charCodeAt(ae)===37&&(re.push(W.slice(fe,ae)),(Te=VO[xe=W.charAt(++ae)])!=null?xe=W.charAt(++ae):Te=xe==="e"?" ":"0",(me=ne[xe])&&(xe=me(he,Te)),re.push(xe),fe=ae+1);return re.push(W.slice(fe,ae)),re.join("")}}t(w,"newFormat");function x(W,ne){return function(he){var re=fm(1900,void 0,1),ae=A(re,W,he+="",0),fe,ce;if(ae!=he.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(ne&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(fe=sT(fm(re.y,0,1)),ce=fe.getUTCDay(),fe=ce>4||ce===0?_1.ceil(fe):_1(fe),fe=qF.offset(fe,(re.V-1)*7),re.y=fe.getUTCFullYear(),re.m=fe.getUTCMonth(),re.d=fe.getUTCDate()+(re.w+6)%7):(fe=oT(fm(re.y,0,1)),ce=fe.getDay(),fe=ce>4||ce===0?b1.ceil(fe):b1(fe),fe=OF.offset(fe,(re.V-1)*7),re.y=fe.getFullYear(),re.m=fe.getMonth(),re.d=fe.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),ce="Z"in re?sT(fm(re.y,0,1)).getUTCDay():oT(fm(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(ce+5)%7:re.w+re.U*7-(ce+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,sT(re)):oT(re)}}t(x,"newParse");function A(W,ne,he,re){for(var ae=0,fe=ne.length,ce=he.length,xe,Te;ae<fe;){if(re>=ce)return-1;if(xe=ne.charCodeAt(ae++),xe===37){if(xe=ne.charAt(ae++),Te=M[xe in VO?ne.charAt(ae++):xe],!Te||(re=Te(W,he,re))<0)return-1}else if(xe!=he.charCodeAt(re++))return-1}return re}t(A,"parseSpecifier");function S(W,ne,he){var re=f.exec(ne.slice(he));return re?(W.p=h[re[0].toLowerCase()],he+re[0].length):-1}t(S,"parsePeriod");function k(W,ne,he){var re=d.exec(ne.slice(he));return re?(W.w=g[re[0].toLowerCase()],he+re[0].length):-1}t(k,"parseShortWeekday");function L(W,ne,he){var re=v.exec(ne.slice(he));return re?(W.w=c[re[0].toLowerCase()],he+re[0].length):-1}t(L,"parseWeekday");function P(W,ne,he){var re=m.exec(ne.slice(he));return re?(W.m=y[re[0].toLowerCase()],he+re[0].length):-1}t(P,"parseShortMonth");function D(W,ne,he){var re=p.exec(ne.slice(he));return re?(W.m=b[re[0].toLowerCase()],he+re[0].length):-1}t(D,"parseMonth");function B(W,ne,he){return A(W,r,ne,he)}t(B,"parseLocaleDateTime");function z(W,ne,he){return A(W,n,ne,he)}t(z,"parseLocaleDate");function R(W,ne,he){return A(W,i,ne,he)}t(R,"parseLocaleTime");function F(W){return a[W.getDay()]}t(F,"formatShortWeekday");function O(W){return o[W.getDay()]}t(O,"formatWeekday");function q(W){return u[W.getMonth()]}t(q,"formatShortMonth");function H(W){return l[W.getMonth()]}t(H,"formatMonth");function j(W){return s[+(W.getHours()>=12)]}t(j,"formatPeriod");function X(W){return 1+~~(W.getMonth()/3)}t(X,"formatQuarter");function G(W){return a[W.getUTCDay()]}t(G,"formatUTCShortWeekday");function $(W){return o[W.getUTCDay()]}t($,"formatUTCWeekday");function te(W){return u[W.getUTCMonth()]}t(te,"formatUTCShortMonth");function ee(W){return l[W.getUTCMonth()]}t(ee,"formatUTCMonth");function ie(W){return s[+(W.getUTCHours()>=12)]}t(ie,"formatUTCPeriod");function se(W){return 1+~~(W.getUTCMonth()/3)}return t(se,"formatUTCQuarter"),{format:function(W){var ne=w(W+="",T);return ne.toString=function(){return W},ne},parse:function(W){var ne=x(W+="",!1);return ne.toString=function(){return W},ne},utcFormat:function(W){var ne=w(W+="",_);return ne.toString=function(){return W},ne},utcParse:function(W){var ne=x(W+="",!0);return ne.toString=function(){return W},ne}}}t(noe,"formatLocale$2");var VO={"-":"",_:" ",0:"0"},Bl=/^\s*\d+/,Vme=/^%/,Gme=/[\\^$*+?|[\]().{}]/g;function Ki(e,r,n){var i=e<0?"-":"",s=(i?-e:e)+"",o=s.length;return i+(o<n?new Array(n-o+1).join(r)+s:s)}t(Ki,"pad");function jme(e){return e.replace(Gme,"\\$&")}t(jme,"requote");function cm(e){return new RegExp("^(?:"+e.map(jme).join("|")+")","i")}t(cm,"formatRe");function hm(e){for(var r={},n=-1,i=e.length;++n<i;)r[e[n].toLowerCase()]=n;return r}t(hm,"formatLookup");function Yme(e,r,n){var i=Bl.exec(r.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}t(Yme,"parseWeekdayNumberSunday");function Wme(e,r,n){var i=Bl.exec(r.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}t(Wme,"parseWeekdayNumberMonday");function Xme(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}t(Xme,"parseWeekNumberSunday");function Zme(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}t(Zme,"parseWeekNumberISO");function Kme(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}t(Kme,"parseWeekNumberMonday");function GO(e,r,n){var i=Bl.exec(r.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}t(GO,"parseFullYear");function jO(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}t(jO,"parseYear");function Jme(e,r,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}t(Jme,"parseZone");function Qme(e,r,n){var i=Bl.exec(r.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}t(Qme,"parseQuarter");function e1e(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}t(e1e,"parseMonthNumber");function YO(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}t(YO,"parseDayOfMonth");function t1e(e,r,n){var i=Bl.exec(r.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}t(t1e,"parseDayOfYear");function WO(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}t(WO,"parseHour24");function r1e(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}t(r1e,"parseMinutes");function a1e(e,r,n){var i=Bl.exec(r.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}t(a1e,"parseSeconds");function n1e(e,r,n){var i=Bl.exec(r.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}t(n1e,"parseMilliseconds");function i1e(e,r,n){var i=Bl.exec(r.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}t(i1e,"parseMicroseconds");function o1e(e,r,n){var i=Vme.exec(r.slice(n,n+1));return i?n+i[0].length:-1}t(o1e,"parseLiteralPercent");function s1e(e,r,n){var i=Bl.exec(r.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}t(s1e,"parseUnixTimestamp");function l1e(e,r,n){var i=Bl.exec(r.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}t(l1e,"parseUnixTimestampSeconds");function XO(e,r){return Ki(e.getDate(),r,2)}t(XO,"formatDayOfMonth");function u1e(e,r){return Ki(e.getHours(),r,2)}t(u1e,"formatHour24");function f1e(e,r){return Ki(e.getHours()%12||12,r,2)}t(f1e,"formatHour12");function c1e(e,r){return Ki(1+OF.count(Qg(e),e),r,3)}t(c1e,"formatDayOfYear");function ioe(e,r){return Ki(e.getMilliseconds(),r,3)}t(ioe,"formatMilliseconds");function h1e(e,r){return ioe(e,r)+"000"}t(h1e,"formatMicroseconds");function v1e(e,r){return Ki(e.getMonth()+1,r,2)}t(v1e,"formatMonthNumber");function d1e(e,r){return Ki(e.getMinutes(),r,2)}t(d1e,"formatMinutes");function p1e(e,r){return Ki(e.getSeconds(),r,2)}t(p1e,"formatSeconds");function g1e(e){var r=e.getDay();return r===0?7:r}t(g1e,"formatWeekdayNumberMonday");function y1e(e,r){return Ki(R_.count(Qg(e)-1,e),r,2)}t(y1e,"formatWeekNumberSunday");function ooe(e){var r=e.getDay();return r>=4||r===0?v0(e):v0.ceil(e)}t(ooe,"dISO");function m1e(e,r){return e=ooe(e),Ki(v0.count(Qg(e),e)+(Qg(e).getDay()===4),r,2)}t(m1e,"formatWeekNumberISO");function x1e(e){return e.getDay()}t(x1e,"formatWeekdayNumberSunday");function b1e(e,r){return Ki(b1.count(Qg(e)-1,e),r,2)}t(b1e,"formatWeekNumberMonday");function _1e(e,r){return Ki(e.getFullYear()%100,r,2)}t(_1e,"formatYear");function w1e(e,r){return e=ooe(e),Ki(e.getFullYear()%100,r,2)}t(w1e,"formatYearISO");function T1e(e,r){return Ki(e.getFullYear()%1e4,r,4)}t(T1e,"formatFullYear");function A1e(e,r){var n=e.getDay();return e=n>=4||n===0?v0(e):v0.ceil(e),Ki(e.getFullYear()%1e4,r,4)}t(A1e,"formatFullYearISO");function S1e(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+Ki(r/60|0,"0",2)+Ki(r%60,"0",2)}t(S1e,"formatZone");function ZO(e,r){return Ki(e.getUTCDate(),r,2)}t(ZO,"formatUTCDayOfMonth");function M1e(e,r){return Ki(e.getUTCHours(),r,2)}t(M1e,"formatUTCHour24");function k1e(e,r){return Ki(e.getUTCHours()%12||12,r,2)}t(k1e,"formatUTCHour12");function E1e(e,r){return Ki(1+qF.count(ey(e),e),r,3)}t(E1e,"formatUTCDayOfYear");function soe(e,r){return Ki(e.getUTCMilliseconds(),r,3)}t(soe,"formatUTCMilliseconds");function C1e(e,r){return soe(e,r)+"000"}t(C1e,"formatUTCMicroseconds");function L1e(e,r){return Ki(e.getUTCMonth()+1,r,2)}t(L1e,"formatUTCMonthNumber");function R1e(e,r){return Ki(e.getUTCMinutes(),r,2)}t(R1e,"formatUTCMinutes");function P1e(e,r){return Ki(e.getUTCSeconds(),r,2)}t(P1e,"formatUTCSeconds");function D1e(e){var r=e.getUTCDay();return r===0?7:r}t(D1e,"formatUTCWeekdayNumberMonday");function I1e(e,r){return Ki(P_.count(ey(e)-1,e),r,2)}t(I1e,"formatUTCWeekNumberSunday");function loe(e){var r=e.getUTCDay();return r>=4||r===0?d0(e):d0.ceil(e)}t(loe,"UTCdISO");function z1e(e,r){return e=loe(e),Ki(d0.count(ey(e),e)+(ey(e).getUTCDay()===4),r,2)}t(z1e,"formatUTCWeekNumberISO");function F1e(e){return e.getUTCDay()}t(F1e,"formatUTCWeekdayNumberSunday");function B1e(e,r){return Ki(_1.count(ey(e)-1,e),r,2)}t(B1e,"formatUTCWeekNumberMonday");function O1e(e,r){return Ki(e.getUTCFullYear()%100,r,2)}t(O1e,"formatUTCYear");function N1e(e,r){return e=loe(e),Ki(e.getUTCFullYear()%100,r,2)}t(N1e,"formatUTCYearISO");function q1e(e,r){return Ki(e.getUTCFullYear()%1e4,r,4)}t(q1e,"formatUTCFullYear");function U1e(e,r){var n=e.getUTCDay();return e=n>=4||n===0?d0(e):d0.ceil(e),Ki(e.getUTCFullYear()%1e4,r,4)}t(U1e,"formatUTCFullYearISO");function H1e(){return"+0000"}t(H1e,"formatUTCZone");function KO(){return"%"}t(KO,"formatLiteralPercent");function JO(e){return+e}t(JO,"formatUnixTimestamp");function QO(e){return Math.floor(+e/1e3)}t(QO,"formatUnixTimestampSeconds");var fg,uoe,foe,HF,$F;coe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function coe(e){return fg=noe(e),uoe=fg.format,foe=fg.parse,HF=fg.utcFormat,$F=fg.utcParse,fg}t(coe,"defaultLocale$1");var hoe="%Y-%m-%dT%H:%M:%S.%LZ";function $1e(e){return e.toISOString()}t($1e,"formatIsoNative");var V1e=Date.prototype.toISOString?$1e:HF(hoe);const G1e=V1e;function j1e(e){var r=new Date(e);return isNaN(r)?null:r}t(j1e,"parseIsoNative");var Y1e=+new Date("2000-01-01T00:00:00.000Z")?j1e:$F(hoe);const W1e=Y1e,X1e=Object.freeze(Object.defineProperty({__proto__:null,timeFormatDefaultLocale:coe,get timeFormat(){return uoe},get timeParse(){return foe},get utcFormat(){return HF},get utcParse(){return $F},timeFormatLocale:noe,isoFormat:G1e,isoParse:W1e},Symbol.toStringTag,{value:"Module"})),w1=Hc(X1e);function Z1e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}t(Z1e,"formatDecimal");function D_(e,r){if((n=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}t(D_,"formatDecimalParts");function ty(e){return e=D_(Math.abs(e)),e?e[1]:NaN}t(ty,"exponent");function K1e(e,r){return function(n,i){for(var s=n.length,o=[],a=0,l=e[0],u=0;s>0&&l>0&&(u+l+1>i&&(l=Math.max(1,i-u)),o.push(n.substring(s-=l,s+l)),!((u+=l+1)>i));)l=e[a=(a+1)%e.length];return o.reverse().join(r)}}t(K1e,"formatGroup");function J1e(e){return function(r){return r.replace(/[0-9]/g,function(n){return e[+n]})}}t(J1e,"formatNumerals");var Q1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function I_(e){if(!(r=Q1e.exec(e)))throw new Error("invalid format: "+e);var r;return new X2({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}t(I_,"formatSpecifier");I_.prototype=X2.prototype;function X2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}t(X2,"FormatSpecifier");X2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function exe(e){e:for(var r=e.length,n=1,i=-1,s;n<r;++n)switch(e[n]){case".":i=s=n;break;case"0":i===0&&(i=n),s=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(s+1):e}t(exe,"formatTrim");var voe;function txe(e,r){var n=D_(e,r);if(!n)return e+"";var i=n[0],s=n[1],o=s-(voe=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+D_(e,Math.max(0,r+o-1))[0]}t(txe,"formatPrefixAuto");function eN(e,r){var n=D_(e,r);if(!n)return e+"";var i=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}t(eN,"formatRounded");const tN={"%":function(e,r){return(e*100).toFixed(r)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:Z1e,e:function(e,r){return e.toExponential(r)},f:function(e,r){return e.toFixed(r)},g:function(e,r){return e.toPrecision(r)},o:function(e){return Math.round(e).toString(8)},p:function(e,r){return eN(e*100,r)},r:eN,s:txe,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function rN(e){return e}t(rN,"identity$8");var aN=Array.prototype.map,nN=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function doe(e){var r=e.grouping===void 0||e.thousands===void 0?rN:K1e(aN.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?rN:J1e(aN.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"-":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(v){v=I_(v);var c=v.fill,d=v.align,g=v.sign,p=v.symbol,b=v.zero,m=v.width,y=v.comma,T=v.precision,_=v.trim,M=v.type;M==="n"?(y=!0,M="g"):tN[M]||(T===void 0&&(T=12),_=!0,M="g"),(b||c==="0"&&d==="=")&&(b=!0,c="0",d="=");var w=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",x=p==="$"?i:/[%p]/.test(M)?a:"",A=tN[M],S=/[defgprs%]/.test(M);T=T===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function k(L){var P=w,D=x,B,z,R;if(M==="c")D=A(L)+D,L="";else{L=+L;var F=L<0||1/L<0;if(L=isNaN(L)?u:A(Math.abs(L),T),_&&(L=exe(L)),F&&+L==0&&g!=="+"&&(F=!1),P=(F?g==="("?g:l:g==="-"||g==="("?"":g)+P,D=(M==="s"?nN[8+voe/3]:"")+D+(F&&g==="("?")":""),S){for(B=-1,z=L.length;++B<z;)if(R=L.charCodeAt(B),48>R||R>57){D=(R===46?s+L.slice(B+1):L.slice(B))+D,L=L.slice(0,B);break}}}y&&!b&&(L=r(L,1/0));var O=P.length+L.length+D.length,q=O<m?new Array(m-O+1).join(c):"";switch(y&&b&&(L=r(q+L,q.length?m-D.length:1/0),q=""),d){case"<":L=P+L+D+q;break;case"=":L=P+q+L+D;break;case"^":L=q.slice(0,O=q.length>>1)+P+L+D+q.slice(O);break;default:L=q+P+L+D;break}return o(L)}return t(k,"format"),k.toString=function(){return v+""},k}t(f,"newFormat");function h(v,c){var d=f((v=I_(v),v.type="f",v)),g=Math.max(-8,Math.min(8,Math.floor(ty(c)/3)))*3,p=Math.pow(10,-g),b=nN[8+g/3];return function(m){return d(p*m)+b}}return t(h,"formatPrefix"),{format:f,formatPrefix:h}}t(doe,"formatLocale$1");var Jx,poe,goe;yoe({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function yoe(e){return Jx=doe(e),poe=Jx.format,goe=Jx.formatPrefix,Jx}t(yoe,"defaultLocale");function rxe(e){return Math.max(0,-ty(Math.abs(e)))}t(rxe,"precisionFixed");function axe(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ty(r)/3)))*3-ty(Math.abs(e)))}t(axe,"precisionPrefix");function nxe(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,ty(r)-ty(e))+1}t(nxe,"precisionRound");const ixe=Object.freeze(Object.defineProperty({__proto__:null,formatDefaultLocale:yoe,get format(){return poe},get formatPrefix(){return goe},formatLocale:doe,formatSpecifier:I_,FormatSpecifier:X2,precisionFixed:rxe,precisionPrefix:axe,precisionRound:nxe},Symbol.toStringTag,{value:"Module"})),moe=Hc(ixe);var oxe=t(function(e){for(var r=e.length,n,i=0;i<r;i++)if(n=e.charCodeAt(i),(n<9||n>13)&&n!==32&&n!==133&&n!==160&&n!==5760&&n!==6158&&(n<8192||n>8205)&&n!==8232&&n!==8233&&n!==8239&&n!==8287&&n!==8288&&n!==12288&&n!==65279)return!1;return!0},"isStringBlank"),sxe=oxe,xn=t(function(e){var r=typeof e;if(r==="string"){var n=e;if(e=+e,e===0&&sxe(n))return!1}else if(r!=="number")return!1;return e-e<1},"fastIsnumeric"),jn={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"},Cf={},VF=Array.isArray,lxe=ArrayBuffer,uxe=DataView;function xoe(e){return lxe.isView(e)&&!(e instanceof uxe)}t(xoe,"isTypedArray$1");Cf.isTypedArray=xoe;function z_(e){return VF(e)||xoe(e)}t(z_,"isArrayOrTypedArray$6");Cf.isArrayOrTypedArray=z_;function fxe(e){return!z_(e[0])}t(fxe,"isArray1D");Cf.isArray1D=fxe;Cf.ensureArray=function(e,r){return VF(e)||(e=[]),e.length=r,e};Cf.concat=function(){var e=[],r=!0,n=0,i,s,o,a,l,u,f,h;for(o=0;o<arguments.length;o++)a=arguments[o],u=a.length,u&&(s?e.push(a):(s=a,l=u),VF(a)?i=!1:(r=!1,n?i!==a.constructor&&(i=!1):i=a.constructor),n+=u);if(!n)return[];if(!e.length)return s;if(r)return s.concat.apply(s,e);if(i){for(f=new i(n),f.set(s),o=0;o<e.length;o++)a=e[o],f.set(a,l),l+=a.length;return f}for(f=new Array(n),h=0;h<s.length;h++)f[h]=s[h];for(o=0;o<e.length;o++){for(a=e[o],h=0;h<a.length;h++)f[l+h]=a[h];l+=h}return f};Cf.maxRowLength=function(e){return boe(e,Math.max,0)};Cf.minRowLength=function(e){return boe(e,Math.min,1/0)};function boe(e,r,n){if(z_(e))if(z_(e[0])){for(var i=n,s=0;s<e.length;s++)i=r(i,e[s].length);return i}else return e.length;return 0}t(boe,"_rowLength");var _oe=xn,GF=Cf.isArrayOrTypedArray,Z2=t(function(r,n){if(_oe(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";for(var i=0,s=n.split("."),o,a,l;i<s.length;){if(o=String(s[i]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),o){if(o[1])s[i]=o[1];else if(i===0)s.splice(0,1);else throw"bad property string";for(a=o[2].substr(1,o[2].length-2).split("]["),l=0;l<a.length;l++)i++,s.splice(i,0,Number(a[l]))}i++}return typeof r!="object"?dxe(r,n,s):{set:Toe(r,s,n),get:woe(r,s),astr:n,parts:s,obj:r}},"nestedProperty");function woe(e,r){return function(){var n=e,i,s,o,a,l;for(a=0;a<r.length-1;a++){if(i=r[a],i===-1){for(s=!0,o=[],l=0;l<n.length;l++)o[l]=woe(n[l],r.slice(a+1))(),o[l]!==o[0]&&(s=!1);return s?o[0]:o}if(typeof i=="number"&&!GF(n)||(n=n[i],typeof n!="object"||n===null))return}if(!(typeof n!="object"||n===null)&&(o=n[r[a]],o!==null))return o}}t(woe,"npGet");var cxe=/(^|\.)args\[/;function vz(e,r){return e===void 0||e===null&&!r.match(cxe)}t(vz,"isDeletable");function Toe(e,r,n){return function(i){var s=e,o="",a=vz(i,n),l,u;for(u=0;u<r.length-1;u++){if(l=r[u],typeof l=="number"&&!GF(s))throw"array index but container is not an array";if(l===-1){if(a=!vxe(s,r.slice(u+1),i,n),a)break;return}if(!Aoe(s,l,r[u+1],a))break;if(s=s[l],typeof s!="object"||s===null)throw"container is not an object";o=hxe(o,l)}if(a){if(u===r.length-1&&(delete s[r[u]],Array.isArray(s)&&+r[u]===s.length-1))for(;s.length&&s[s.length-1]===void 0;)s.pop()}else s[r[u]]=i}}t(Toe,"npSet");function hxe(e,r){var n=r;return _oe(r)?n="["+r+"]":e&&(n="."+r),e+n}t(hxe,"joinPropStr");function vxe(e,r,n,i){var s=GF(n),o=!0,a=n,l=i.replace("-1",0),u=s?!1:vz(n,l),f=r[0],h;for(h=0;h<e.length;h++)l=i.replace("-1",h),s&&(a=n[h%n.length],u=vz(a,l)),u&&(o=!1),Aoe(e,h,f,u)&&Toe(e[h],r,i.replace("-1",h))(a);return o}t(vxe,"setArrayAll");function Aoe(e,r,n,i){if(e[r]===void 0){if(i)return!1;typeof n=="number"?e[r]=[]:e[r]={}}return!0}t(Aoe,"checkNewContainer");function dxe(e,r,n){return{set:function(){throw"bad container"},get:function(){},astr:r,parts:n,obj:e}}t(dxe,"badContainer");var cg=Z2,pxe=/^\w*$/,gxe=0,iN=1,Qx=2,oN=3,Vp=4,yxe=t(function(r,n,i,s){i=i||"name",s=s||"value";var o,a,l,u={};n&&n.length?(l=cg(r,n),a=l.get()):a=r,n=n||"";var f={};if(a)for(o=0;o<a.length;o++)f[a[o][i]]=o;var h=pxe.test(s),v={set:function(c,d){var g=d===null?Vp:gxe;if(!a){if(!l||g===Vp)return;a=[],l.set(a)}var p=f[c];if(p===void 0){if(g===Vp)return;g=g|oN,p=a.length,f[c]=p}else d!==(h?a[p][s]:cg(a[p],s).get())&&(g=g|Qx);var b=a[p]=a[p]||{};return b[i]=c,h?b[s]=d:cg(b,s).set(d),d!==null&&(g=g&~Vp),u[p]=u[p]|g,v},get:function(c){if(!!a){var d=f[c];if(d!==void 0)return h?a[d][s]:cg(a[d],s).get()}},rename:function(c,d){var g=f[c];return g===void 0||(u[g]=u[g]|iN,f[d]=g,delete f[c],a[g][i]=d),v},remove:function(c){var d=f[c];if(d===void 0)return v;var g=a[d];if(Object.keys(g).length>2)return u[d]=u[d]|Qx,v.set(c,null);if(h){for(o=d;o<a.length;o++)u[o]=u[o]|oN;for(o=d;o<a.length;o++)f[a[o][i]]--;a.splice(d,1),delete f[c]}else cg(g,s).set(null),u[d]=u[d]|Qx|Vp;return v},constructUpdate:function(){for(var c,d,g={},p=Object.keys(u),b=0;b<p.length;b++)d=p[b],c=n+"["+d+"]",a[d]?(u[d]&iN&&(g[c+"."+i]=a[d][i]),u[d]&Qx&&(h?g[c+"."+s]=u[d]&Vp?null:a[d][s]:g[c+"."+s]=u[d]&Vp?null:cg(a[d],s).get())):g[c]=null;return g}};return v},"keyedContainer"),mxe=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,xxe=/^[^\.\[\]]+$/,bxe=t(function(e,r){for(;r;){var n=e.match(mxe);if(n)e=n[1];else if(e.match(xxe))e="";else throw new Error("bad relativeAttr call:"+[e,r]);if(r.charAt(0)==="^")r=r.slice(1);else break}return e&&r.charAt(0)!=="["?e+"."+r:e+r},"relative_attr"),xy=t(function(r){return window&&window.process&&window.process.versions?Object.prototype.toString.call(r)==="[object Object]":Object.prototype.toString.call(r)==="[object Object]"&&Object.getPrototypeOf(r).hasOwnProperty("hasOwnProperty")},"isPlainObject"),_xe=xn,jF=t(function(r,n){if(r>0)return Math.log(r)/Math.LN10;var i=Math.log(Math.min(n[0],n[1]))/Math.LN10;return _xe(i)||(i=Math.log(Math.max(n[0],n[1]))/Math.LN10-6),i},"toLogRange"),sN=Cf.isArrayOrTypedArray,vm=xy,wxe=t(function e(r,n){for(var i in n){var s=n[i],o=r[i];if(o!==s)if(i.charAt(0)==="_"||typeof s=="function"){if(i in r)continue;r[i]=s}else if(sN(s)&&sN(o)&&vm(s[0])){if(i==="customdata"||i==="ids")continue;for(var a=Math.min(s.length,o.length),l=0;l<a;l++)o[l]!==s[l]&&vm(s[l])&&vm(o[l])&&e(o[l],s[l])}else vm(s)&&vm(o)&&(e(o,s),Object.keys(o).length||delete r[i])}},"relinkPrivateKeys");function Txe(e,r){var n=e%r;return n<0?n+r:n}t(Txe,"mod$2");function Axe(e,r){return Math.abs(e)>r/2?e-Math.round(e/r)*r:e}t(Axe,"modHalf$1");var Y1={mod:Txe,modHalf:Axe},Soe={},rl={exports:{}};(function(e){(function(r){var n=/^\s+/,i=/\s+$/,s=0,o=r.round,a=r.min,l=r.max,u=r.random;function f(ae,fe){if(ae=ae||"",fe=fe||{},ae instanceof f)return ae;if(!(this instanceof f))return new f(ae,fe);var ce=h(ae);this._originalInput=ae,this._r=ce.r,this._g=ce.g,this._b=ce.b,this._a=ce.a,this._roundA=o(100*this._a)/100,this._format=fe.format||ce.format,this._gradientType=fe.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=ce.ok,this._tc_id=s++}t(f,"tinycolor"),f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ae=this.toRgb();return(ae.r*299+ae.g*587+ae.b*114)/1e3},getLuminance:function(){var ae=this.toRgb(),fe,ce,xe,Te,me,pe;return fe=ae.r/255,ce=ae.g/255,xe=ae.b/255,fe<=.03928?Te=fe/12.92:Te=r.pow((fe+.055)/1.055,2.4),ce<=.03928?me=ce/12.92:me=r.pow((ce+.055)/1.055,2.4),xe<=.03928?pe=xe/12.92:pe=r.pow((xe+.055)/1.055,2.4),.2126*Te+.7152*me+.0722*pe},setAlpha:function(ae){return this._a=q(ae),this._roundA=o(100*this._a)/100,this},toHsv:function(){var ae=g(this._r,this._g,this._b);return{h:ae.h*360,s:ae.s,v:ae.v,a:this._a}},toHsvString:function(){var ae=g(this._r,this._g,this._b),fe=o(ae.h*360),ce=o(ae.s*100),xe=o(ae.v*100);return this._a==1?"hsv("+fe+", "+ce+"%, "+xe+"%)":"hsva("+fe+", "+ce+"%, "+xe+"%, "+this._roundA+")"},toHsl:function(){var ae=c(this._r,this._g,this._b);return{h:ae.h*360,s:ae.s,l:ae.l,a:this._a}},toHslString:function(){var ae=c(this._r,this._g,this._b),fe=o(ae.h*360),ce=o(ae.s*100),xe=o(ae.l*100);return this._a==1?"hsl("+fe+", "+ce+"%, "+xe+"%)":"hsla("+fe+", "+ce+"%, "+xe+"%, "+this._roundA+")"},toHex:function(ae){return b(this._r,this._g,this._b,ae)},toHexString:function(ae){return"#"+this.toHex(ae)},toHex8:function(ae){return m(this._r,this._g,this._b,this._a,ae)},toHex8String:function(ae){return"#"+this.toHex8(ae)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(H(this._r,255)*100)+"%",g:o(H(this._g,255)*100)+"%",b:o(H(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(H(this._r,255)*100)+"%, "+o(H(this._g,255)*100)+"%, "+o(H(this._b,255)*100)+"%)":"rgba("+o(H(this._r,255)*100)+"%, "+o(H(this._g,255)*100)+"%, "+o(H(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:F[b(this._r,this._g,this._b,!0)]||!1},toFilter:function(ae){var fe="#"+y(this._r,this._g,this._b,this._a),ce=fe,xe=this._gradientType?"GradientType = 1, ":"";if(ae){var Te=f(ae);ce="#"+y(Te._r,Te._g,Te._b,Te._a)}return"progid:DXImageTransform.Microsoft.gradient("+xe+"startColorstr="+fe+",endColorstr="+ce+")"},toString:function(ae){var fe=!!ae;ae=ae||this._format;var ce=!1,xe=this._a<1&&this._a>=0,Te=!fe&&xe&&(ae==="hex"||ae==="hex6"||ae==="hex3"||ae==="hex4"||ae==="hex8"||ae==="name");return Te?ae==="name"&&this._a===0?this.toName():this.toRgbString():(ae==="rgb"&&(ce=this.toRgbString()),ae==="prgb"&&(ce=this.toPercentageRgbString()),(ae==="hex"||ae==="hex6")&&(ce=this.toHexString()),ae==="hex3"&&(ce=this.toHexString(!0)),ae==="hex4"&&(ce=this.toHex8String(!0)),ae==="hex8"&&(ce=this.toHex8String()),ae==="name"&&(ce=this.toName()),ae==="hsl"&&(ce=this.toHslString()),ae==="hsv"&&(ce=this.toHsvString()),ce||this.toHexString())},clone:function(){return f(this.toString())},_applyModification:function(ae,fe){var ce=ae.apply(null,[this].concat([].slice.call(fe)));return this._r=ce._r,this._g=ce._g,this._b=ce._b,this.setAlpha(ce._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(A,arguments)},desaturate:function(){return this._applyModification(T,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(ae,fe){return ae.apply(null,[this].concat([].slice.call(fe)))},analogous:function(){return this._applyCombination(B,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(D,arguments)},triad:function(){return this._applyCombination(L,arguments)},tetrad:function(){return this._applyCombination(P,arguments)}},f.fromRatio=function(ae,fe){if(typeof ae=="object"){var ce={};for(var xe in ae)ae.hasOwnProperty(xe)&&(xe==="a"?ce[xe]=ae[xe]:ce[xe]=ee(ae[xe]));ae=ce}return f(ae,fe)};function h(ae){var fe={r:0,g:0,b:0},ce=1,xe=null,Te=null,me=null,pe=!1,oe=!1;return typeof ae=="string"&&(ae=he(ae)),typeof ae=="object"&&(ne(ae.r)&&ne(ae.g)&&ne(ae.b)?(fe=v(ae.r,ae.g,ae.b),pe=!0,oe=String(ae.r).substr(-1)==="%"?"prgb":"rgb"):ne(ae.h)&&ne(ae.s)&&ne(ae.v)?(xe=ee(ae.s),Te=ee(ae.v),fe=p(ae.h,xe,Te),pe=!0,oe="hsv"):ne(ae.h)&&ne(ae.s)&&ne(ae.l)&&(xe=ee(ae.s),me=ee(ae.l),fe=d(ae.h,xe,me),pe=!0,oe="hsl"),ae.hasOwnProperty("a")&&(ce=ae.a)),ce=q(ce),{ok:pe,format:ae.format||oe,r:a(255,l(fe.r,0)),g:a(255,l(fe.g,0)),b:a(255,l(fe.b,0)),a:ce}}t(h,"inputToRGB");function v(ae,fe,ce){return{r:H(ae,255)*255,g:H(fe,255)*255,b:H(ce,255)*255}}t(v,"rgbToRgb");function c(ae,fe,ce){ae=H(ae,255),fe=H(fe,255),ce=H(ce,255);var xe=l(ae,fe,ce),Te=a(ae,fe,ce),me,pe,oe=(xe+Te)/2;if(xe==Te)me=pe=0;else{var de=xe-Te;switch(pe=oe>.5?de/(2-xe-Te):de/(xe+Te),xe){case ae:me=(fe-ce)/de+(fe<ce?6:0);break;case fe:me=(ce-ae)/de+2;break;case ce:me=(ae-fe)/de+4;break}me/=6}return{h:me,s:pe,l:oe}}t(c,"rgbToHsl");function d(ae,fe,ce){var xe,Te,me;ae=H(ae,360),fe=H(fe,100),ce=H(ce,100);function pe(ye,we,Ee){return Ee<0&&(Ee+=1),Ee>1&&(Ee-=1),Ee<1/6?ye+(we-ye)*6*Ee:Ee<1/2?we:Ee<2/3?ye+(we-ye)*(2/3-Ee)*6:ye}if(t(pe,"hue2rgb"),fe===0)xe=Te=me=ce;else{var oe=ce<.5?ce*(1+fe):ce+fe-ce*fe,de=2*ce-oe;xe=pe(de,oe,ae+1/3),Te=pe(de,oe,ae),me=pe(de,oe,ae-1/3)}return{r:xe*255,g:Te*255,b:me*255}}t(d,"hslToRgb");function g(ae,fe,ce){ae=H(ae,255),fe=H(fe,255),ce=H(ce,255);var xe=l(ae,fe,ce),Te=a(ae,fe,ce),me,pe,oe=xe,de=xe-Te;if(pe=xe===0?0:de/xe,xe==Te)me=0;else{switch(xe){case ae:me=(fe-ce)/de+(fe<ce?6:0);break;case fe:me=(ce-ae)/de+2;break;case ce:me=(ae-fe)/de+4;break}me/=6}return{h:me,s:pe,v:oe}}t(g,"rgbToHsv");function p(ae,fe,ce){ae=H(ae,360)*6,fe=H(fe,100),ce=H(ce,100);var xe=r.floor(ae),Te=ae-xe,me=ce*(1-fe),pe=ce*(1-Te*fe),oe=ce*(1-(1-Te)*fe),de=xe%6,ye=[ce,pe,me,me,oe,ce][de],we=[oe,ce,ce,pe,me,me][de],Ee=[me,me,oe,ce,ce,pe][de];return{r:ye*255,g:we*255,b:Ee*255}}t(p,"hsvToRgb");function b(ae,fe,ce,xe){var Te=[te(o(ae).toString(16)),te(o(fe).toString(16)),te(o(ce).toString(16))];return xe&&Te[0].charAt(0)==Te[0].charAt(1)&&Te[1].charAt(0)==Te[1].charAt(1)&&Te[2].charAt(0)==Te[2].charAt(1)?Te[0].charAt(0)+Te[1].charAt(0)+Te[2].charAt(0):Te.join("")}t(b,"rgbToHex");function m(ae,fe,ce,xe,Te){var me=[te(o(ae).toString(16)),te(o(fe).toString(16)),te(o(ce).toString(16)),te(ie(xe))];return Te&&me[0].charAt(0)==me[0].charAt(1)&&me[1].charAt(0)==me[1].charAt(1)&&me[2].charAt(0)==me[2].charAt(1)&&me[3].charAt(0)==me[3].charAt(1)?me[0].charAt(0)+me[1].charAt(0)+me[2].charAt(0)+me[3].charAt(0):me.join("")}t(m,"rgbaToHex");function y(ae,fe,ce,xe){var Te=[te(ie(xe)),te(o(ae).toString(16)),te(o(fe).toString(16)),te(o(ce).toString(16))];return Te.join("")}t(y,"rgbaToArgbHex"),f.equals=function(ae,fe){return!ae||!fe?!1:f(ae).toRgbString()==f(fe).toRgbString()},f.random=function(){return f.fromRatio({r:u(),g:u(),b:u()})};function T(ae,fe){fe=fe===0?0:fe||10;var ce=f(ae).toHsl();return ce.s-=fe/100,ce.s=j(ce.s),f(ce)}t(T,"desaturate");function _(ae,fe){fe=fe===0?0:fe||10;var ce=f(ae).toHsl();return ce.s+=fe/100,ce.s=j(ce.s),f(ce)}t(_,"saturate");function M(ae){return f(ae).desaturate(100)}t(M,"greyscale");function w(ae,fe){fe=fe===0?0:fe||10;var ce=f(ae).toHsl();return ce.l+=fe/100,ce.l=j(ce.l),f(ce)}t(w,"lighten");function x(ae,fe){fe=fe===0?0:fe||10;var ce=f(ae).toRgb();return ce.r=l(0,a(255,ce.r-o(255*-(fe/100)))),ce.g=l(0,a(255,ce.g-o(255*-(fe/100)))),ce.b=l(0,a(255,ce.b-o(255*-(fe/100)))),f(ce)}t(x,"brighten");function A(ae,fe){fe=fe===0?0:fe||10;var ce=f(ae).toHsl();return ce.l-=fe/100,ce.l=j(ce.l),f(ce)}t(A,"darken");function S(ae,fe){var ce=f(ae).toHsl(),xe=(ce.h+fe)%360;return ce.h=xe<0?360+xe:xe,f(ce)}t(S,"spin");function k(ae){var fe=f(ae).toHsl();return fe.h=(fe.h+180)%360,f(fe)}t(k,"complement");function L(ae){var fe=f(ae).toHsl(),ce=fe.h;return[f(ae),f({h:(ce+120)%360,s:fe.s,l:fe.l}),f({h:(ce+240)%360,s:fe.s,l:fe.l})]}t(L,"triad");function P(ae){var fe=f(ae).toHsl(),ce=fe.h;return[f(ae),f({h:(ce+90)%360,s:fe.s,l:fe.l}),f({h:(ce+180)%360,s:fe.s,l:fe.l}),f({h:(ce+270)%360,s:fe.s,l:fe.l})]}t(P,"tetrad");function D(ae){var fe=f(ae).toHsl(),ce=fe.h;return[f(ae),f({h:(ce+72)%360,s:fe.s,l:fe.l}),f({h:(ce+216)%360,s:fe.s,l:fe.l})]}t(D,"splitcomplement");function B(ae,fe,ce){fe=fe||6,ce=ce||30;var xe=f(ae).toHsl(),Te=360/ce,me=[f(ae)];for(xe.h=(xe.h-(Te*fe>>1)+720)%360;--fe;)xe.h=(xe.h+Te)%360,me.push(f(xe));return me}t(B,"analogous");function z(ae,fe){fe=fe||6;for(var ce=f(ae).toHsv(),xe=ce.h,Te=ce.s,me=ce.v,pe=[],oe=1/fe;fe--;)pe.push(f({h:xe,s:Te,v:me})),me=(me+oe)%1;return pe}t(z,"monochromatic"),f.mix=function(ae,fe,ce){ce=ce===0?0:ce||50;var xe=f(ae).toRgb(),Te=f(fe).toRgb(),me=ce/100,pe={r:(Te.r-xe.r)*me+xe.r,g:(Te.g-xe.g)*me+xe.g,b:(Te.b-xe.b)*me+xe.b,a:(Te.a-xe.a)*me+xe.a};return f(pe)},f.readability=function(ae,fe){var ce=f(ae),xe=f(fe);return(r.max(ce.getLuminance(),xe.getLuminance())+.05)/(r.min(ce.getLuminance(),xe.getLuminance())+.05)},f.isReadable=function(ae,fe,ce){var xe=f.readability(ae,fe),Te,me;switch(me=!1,Te=re(ce),Te.level+Te.size){case"AAsmall":case"AAAlarge":me=xe>=4.5;break;case"AAlarge":me=xe>=3;break;case"AAAsmall":me=xe>=7;break}return me},f.mostReadable=function(ae,fe,ce){var xe=null,Te=0,me,pe,oe,de;ce=ce||{},pe=ce.includeFallbackColors,oe=ce.level,de=ce.size;for(var ye=0;ye<fe.length;ye++)me=f.readability(ae,fe[ye]),me>Te&&(Te=me,xe=f(fe[ye]));return f.isReadable(ae,xe,{level:oe,size:de})||!pe?xe:(ce.includeFallbackColors=!1,f.mostReadable(ae,["#fff","#000"],ce))};var R=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},F=f.hexNames=O(R);function O(ae){var fe={};for(var ce in ae)ae.hasOwnProperty(ce)&&(fe[ae[ce]]=ce);return fe}t(O,"flip");function q(ae){return ae=parseFloat(ae),(isNaN(ae)||ae<0||ae>1)&&(ae=1),ae}t(q,"boundAlpha");function H(ae,fe){G(ae)&&(ae="100%");var ce=$(ae);return ae=a(fe,l(0,parseFloat(ae))),ce&&(ae=parseInt(ae*fe,10)/100),r.abs(ae-fe)<1e-6?1:ae%fe/parseFloat(fe)}t(H,"bound01");function j(ae){return a(1,l(0,ae))}t(j,"clamp01");function X(ae){return parseInt(ae,16)}t(X,"parseIntFromHex");function G(ae){return typeof ae=="string"&&ae.indexOf(".")!=-1&&parseFloat(ae)===1}t(G,"isOnePointZero");function $(ae){return typeof ae=="string"&&ae.indexOf("%")!=-1}t($,"isPercentage");function te(ae){return ae.length==1?"0"+ae:""+ae}t(te,"pad2");function ee(ae){return ae<=1&&(ae=ae*100+"%"),ae}t(ee,"convertToPercentage");function ie(ae){return r.round(parseFloat(ae)*255).toString(16)}t(ie,"convertDecimalToHex");function se(ae){return X(ae)/255}t(se,"convertHexToDecimal");var W=function(){var ae="[-\\+]?\\d+%?",fe="[-\\+]?\\d*\\.\\d+%?",ce="(?:"+fe+")|(?:"+ae+")",xe="[\\s|\\(]+("+ce+")[,|\\s]+("+ce+")[,|\\s]+("+ce+")\\s*\\)?",Te="[\\s|\\(]+("+ce+")[,|\\s]+("+ce+")[,|\\s]+("+ce+")[,|\\s]+("+ce+")\\s*\\)?";return{CSS_UNIT:new RegExp(ce),rgb:new RegExp("rgb"+xe),rgba:new RegExp("rgba"+Te),hsl:new RegExp("hsl"+xe),hsla:new RegExp("hsla"+Te),hsv:new RegExp("hsv"+xe),hsva:new RegExp("hsva"+Te),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ne(ae){return!!W.CSS_UNIT.exec(ae)}t(ne,"isValidCSSUnit");function he(ae){ae=ae.replace(n,"").replace(i,"").toLowerCase();var fe=!1;if(R[ae])ae=R[ae],fe=!0;else if(ae=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ce;return(ce=W.rgb.exec(ae))?{r:ce[1],g:ce[2],b:ce[3]}:(ce=W.rgba.exec(ae))?{r:ce[1],g:ce[2],b:ce[3],a:ce[4]}:(ce=W.hsl.exec(ae))?{h:ce[1],s:ce[2],l:ce[3]}:(ce=W.hsla.exec(ae))?{h:ce[1],s:ce[2],l:ce[3],a:ce[4]}:(ce=W.hsv.exec(ae))?{h:ce[1],s:ce[2],v:ce[3]}:(ce=W.hsva.exec(ae))?{h:ce[1],s:ce[2],v:ce[3],a:ce[4]}:(ce=W.hex8.exec(ae))?{r:X(ce[1]),g:X(ce[2]),b:X(ce[3]),a:se(ce[4]),format:fe?"name":"hex8"}:(ce=W.hex6.exec(ae))?{r:X(ce[1]),g:X(ce[2]),b:X(ce[3]),format:fe?"name":"hex"}:(ce=W.hex4.exec(ae))?{r:X(ce[1]+""+ce[1]),g:X(ce[2]+""+ce[2]),b:X(ce[3]+""+ce[3]),a:se(ce[4]+""+ce[4]),format:fe?"name":"hex8"}:(ce=W.hex3.exec(ae))?{r:X(ce[1]+""+ce[1]),g:X(ce[2]+""+ce[2]),b:X(ce[3]+""+ce[3]),format:fe?"name":"hex"}:!1}t(he,"stringInputToObject");function re(ae){var fe,ce;return ae=ae||{level:"AA",size:"small"},fe=(ae.level||"AA").toUpperCase(),ce=(ae.size||"small").toLowerCase(),fe!=="AA"&&fe!=="AAA"&&(fe="AA"),ce!=="small"&&ce!=="large"&&(ce="small"),{level:fe,size:ce}}t(re,"validateWCAG2Parms"),e.exports?e.exports=f:window.tinycolor=f})(Math)})(rl);var Ho=t(function(e){var r=e.editType,n=e.colorEditType;n===void 0&&(n=r);var i={family:{valType:"string",noBlank:!0,strict:!0,editType:r,description:["HTML font family - the typeface that will be applied by the web browser.","The web browser will only be able to apply a font if it is available on the system","which it operates. Provide multiple font families, separated by commas, to indicate","the preference in which to apply fonts if they aren't available on the system.","The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server,","where only a select number of","fonts are installed and supported.","These include *Arial*, *Balto*, *Courier New*, *Droid Sans*,, *Droid Serif*,","*Droid Sans Mono*, *Gravitas One*, *Old Standard TT*, *Open Sans*, *Overpass*,","*PT Sans Narrow*, *Raleway*, *Times New Roman*."].join(" ")},size:{valType:"number",min:1,editType:r},color:{valType:"color",editType:n},editType:r,description:""+(e.description||"")};return e.autoSize&&(i.size.dflt="auto"),e.autoColor&&(i.color.dflt="auto"),e.arrayOk&&(i.family.arrayOk=!0,i.size.arrayOk=!0,i.color.arrayOk=!0),i},"font_attributes"),K2={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},Moe=K2,koe=Ho,YF=koe({editType:"none",description:"Sets the default hover label font used by all traces on the graph."});YF.family.dflt=Moe.HOVERFONT;YF.size.dflt=Moe.HOVERFONTSIZE;var fp={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"],description:["Determines the mode of single click interactions.","*event* is the default value and emits the `plotly_click`","event. In addition this mode emits the `plotly_selected` event","in drag modes *lasso* and *select*, but with no event data attached","(kept for compatibility reasons).","The *select* flag enables selecting single","data points via click. This mode also supports persistent selections,","meaning that pressing Shift while clicking, adds to / subtracts from an","existing selection. *select* with `hovermode`: *x* can be confusing, consider","explicitly setting `hovermode`: *closest* when using this feature.","Selection events are sent accordingly as long as *event* flag is set as well.","When the *event* flag is missing, `plotly_click` and `plotly_selected`","events are not fired."].join(" ")},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar",description:["Determines the mode of drag interactions.","*select* and *lasso* apply only to scatter traces with","markers or text. *orbit* and *turntable* apply only to","3D scenes."].join(" ")},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions.","If *closest*, a single hoverlabel will appear","for the *closest* point within the `hoverdistance`.","If *x* (or *y*), multiple hoverlabels will appear for multiple points","at the *closest* x- (or y-) coordinate within the `hoverdistance`,","with the caveat that no more than one hoverlabel will appear per trace.","If *x unified* (or *y unified*), a single hoverlabel will appear","multiple points at the closest x- (or y-) coordinate within the `hoverdistance`","with the caveat that no more than one hoverlabel will appear per trace.","In this mode, spikelines are enabled by default perpendicular to the specified axis.","If false, hover interactions are disabled."].join(" ")},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none",description:["Sets the default distance (in pixels) to look for data","to add hover labels (-1 means no cutoff, 0 means no looking for data).","This is only a real distance for hovering on point-like objects,","like scatter points. For area-like objects (bars, scatter fills, etc)","hovering is on inside the area and off outside, but these objects","will not supersede hover on point-like objects in case of conflict."].join(" ")},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none",description:["Sets the default distance (in pixels) to look for data to draw","spikelines to (-1 means no cutoff, 0 means no looking for data).","As with hoverdistance, distance does not apply to area-like objects.","In addition, some objects can be hovered on but will not generate","spikelines, such as scatter fills."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"none",description:["Sets the background color of all hover labels on graph"].join(" ")},bordercolor:{valType:"color",editType:"none",description:["Sets the border color of all hover labels on graph."].join(" ")},font:YF,grouptitlefont:koe({editType:"none",description:["Sets the font for group titles in hover (unified modes).","Defaults to `hoverlabel.font`."].join(" ")}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none",description:["Sets the horizontal alignment of the text content within hover label box.","Has an effect only if the hover label text spans more two or more lines"].join(" ")},namelength:{valType:"integer",min:-1,dflt:15,editType:"none",description:["Sets the default length (in number of characters) of the trace name in","the hover labels for all traces. -1 shows the whole name","regardless of length. 0-3 shows the first 0-3 characters, and","an integer >3 will show the whole name if it is less than that","many characters, but if it is longer, will truncate to","`namelength - 3` characters and add an ellipsis."].join(" ")},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",description:["When `dragmode` is set to *select*, this limits the selection of the drag to","horizontal, vertical or diagonal. *h* only allows horizontal selection,","*v* only vertical, *d* only diagonal and *any* sets no limit."].join(" "),editType:"none"}},cn={},lN=xy,dm=Array.isArray;function Sxe(e,r){var n,i;for(n=0;n<e.length;n++){if(i=e[n],i!==null&&typeof i=="object")return!1;i!==void 0&&(r[n]=i)}return!0}t(Sxe,"primitivesLoopSplice");cn.extendFlat=function(){return W1(arguments,!1,!1,!1)};cn.extendDeep=function(){return W1(arguments,!0,!1,!1)};cn.extendDeepAll=function(){return W1(arguments,!0,!0,!1)};cn.extendDeepNoArrays=function(){return W1(arguments,!0,!1,!0)};function W1(e,r,n,i){var s=e[0],o=e.length,a,l,u,f,h,v,c;if(o===2&&dm(s)&&dm(e[1])&&s.length===0){if(c=Sxe(e[1],s),c)return s;s.splice(0,s.length)}for(var d=1;d<o;d++){a=e[d];for(l in a)u=s[l],f=a[l],i&&dm(f)?s[l]=f:r&&f&&(lN(f)||(h=dm(f)))?(h?(h=!1,v=u&&dm(u)?u:[]):v=u&&lN(u)?u:{},s[l]=W1([v,f],r,n,i)):(typeof f<"u"||n)&&(s[l]=f)}return s}t(W1,"_extend");var Mxe=Ho,eb=fp.hoverlabel,tb=cn.extendFlat,X1={hoverlabel:{bgcolor:tb({},eb.bgcolor,{arrayOk:!0,description:"Sets the background color of the hover labels for this trace"}),bordercolor:tb({},eb.bordercolor,{arrayOk:!0,description:"Sets the border color of the hover labels for this trace."}),font:Mxe({arrayOk:!0,editType:"none",description:"Sets the font used in hover labels."}),align:tb({},eb.align,{arrayOk:!0}),namelength:tb({},eb.namelength,{arrayOk:!0}),editType:"none"}},kxe=Ho,Exe=X1,Ni={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc",description:["Determines whether or not this trace is visible.","If *legendonly*, the trace is not drawn,","but can appear as a legend item","(provided that the legend itself is visible)."].join(" ")},showlegend:{valType:"boolean",dflt:!0,editType:"style",description:["Determines whether or not an item corresponding to this","trace is shown in the legend."].join(" ")},legendgroup:{valType:"string",dflt:"",editType:"style",description:["Sets the legend group for this trace.","Traces part of the same legend group hide/show at the same time","when toggling legend items."].join(" ")},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style",description:["Sets the title of the legend group."].join(" ")},font:kxe({editType:"style",description:["Sets this legend group's title font."].join(" ")}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style",description:["Sets the legend rank for this trace.","Items and groups with smaller ranks are presented on top/left side while","with `*reversed* `legend.traceorder` they are on bottom/right side.","The default legendrank is 1000,","so that you can use ranks less than 1000 to place certain items before all unranked items,","and ranks greater than 1000 to go after all unranked items."].join(" ")},legendwidth:{valType:"number",min:0,editType:"style",description:"Sets the width (in px or fraction) of the legend for this trace."},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the trace."},name:{valType:"string",editType:"style",description:["Sets the trace name.","The trace name appear as the legend item and on hover."].join(" ")},uid:{valType:"string",editType:"plot",anim:!0,description:["Assign an id to this trace,","Use this to provide object constancy between traces during animations","and transitions."].join(" ")},ids:{valType:"data_array",editType:"calc",anim:!0,description:["Assigns id labels to each datum.","These ids for object constancy of data points during animation.","Should be an array of strings, not numbers or any other type."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data each datum.","This may be useful when listening to hover, click and selection events.","Note that, *scatter* traces also appends customdata items in the markers","DOM elements"].join(" ")},meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information associated with this trace","that can be used in various text attributes.","Attributes such as trace `name`, graph, axis and colorbar `title.text`, annotation `text`","`rangeselector`, `updatemenues` and `sliders` `label` text","all support `meta`.","To access the trace `meta` values in an attribute in the same trace, simply use","`%{meta[i]}` where `i` is the index or key of the `meta`","item in question.","To access trace `meta` in layout attributes, use","`%{data[n[.meta[i]}` where `i` is the index or key of the `meta`","and `n` is the trace index."].join(" ")},selectedpoints:{valType:"any",editType:"calc",description:["Array containing integer indices of selected points.","Has an effect only for traces that support selections.","Note that an empty array means an empty selection where the `unselected`","are turned on for all points, whereas, any other non-array values means no","selection all where the `selected` and `unselected` styles have no effect."].join(" ")},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none",description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:Exe.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc",description:["The stream id number links a data trace on a plot with a stream.","See https://chart-studio.plotly.com/settings for more details."].join(" ")},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc",description:["Sets the maximum number of points to keep on the plots from an","incoming stream.","If `maxpoints` is set to *50*, only the newest 50 points will","be displayed on the plot."].join(" ")},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc",description:["WARNING: All transforms are deprecated and may be removed from the API in next major version.","An array of operations that manipulate the trace data,","for example filtering or sorting the data arrays."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of some user-driven changes to the trace:","`constraintrange` in `parcoords` traces, as well as some","`editable: true` modifications such as `name` and `colorbar.title`.","Defaults to `layout.uirevision`.","Note that other user-driven trace attribute changes are controlled","by `layout` attributes:","`trace.visible` is controlled by `layout.legend.uirevision`,","`selectedpoints` is controlled by `layout.selectionrevision`,","and `colorbar.(x|y)` (accessible with `config: {editable: true}`)","is controlled by `layout.editrevision`.","Trace changes are tracked by `uid`, which only falls back on trace","index if no `uid` is provided. So if your app can add/remove traces","before the end of the `data` array, such that the same trace has a","different index, you can still preserve user-driven changes if you","give each trace a `uid` that stays with it as it moves."].join(" ")}},Cxe=rl.exports,J2={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},Eoe=J2.RdBu;function Lxe(e,r){if(r||(r=Eoe),!e)return r;function n(){try{e=J2[e]||JSON.parse(e)}catch{e=r}}return t(n,"parseScale"),typeof e=="string"&&(n(),typeof e=="string"&&n()),Coe(e)?e:r}t(Lxe,"getScale");function Coe(e){var r=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var n=0;n<e.length;n++){var i=e[n];if(i.length!==2||+i[0]<r||!Cxe(i[1]).isValid())return!1;r=+i[0]}return!0}t(Coe,"isValidScaleArray");function Rxe(e){return J2[e]!==void 0?!0:Coe(e)}t(Rxe,"isValidScale$2");var by={scales:J2,defaultScale:Eoe,get:Lxe,isValid:Rxe},$a={exports:{}},Fo={};Fo.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];Fo.defaultLine="#444";Fo.lightLine="#eee";Fo.background="#fff";Fo.borderLine="#BEC8D9";Fo.lightFraction=100*(14-4)/(15-4);var Ah=rl.exports,Pxe=xn,Dxe=Cf.isTypedArray,vl=$a.exports={},Q2=Fo;vl.defaults=Q2.defaults;var Ixe=vl.defaultLine=Q2.defaultLine;vl.lightLine=Q2.lightLine;var dz=vl.background=Q2.background;vl.tinyRGB=function(e){var r=e.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"};vl.rgb=function(e){return vl.tinyRGB(Ah(e))};vl.opacity=function(e){return e?Ah(e).getAlpha():0};vl.addOpacity=function(e,r){var n=Ah(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"};vl.combine=function(e,r){var n=Ah(e).toRgb();if(n.a===1)return Ah(e).toRgbString();var i=Ah(r||dz).toRgb(),s=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},o={r:s.r*(1-n.a)+n.r*n.a,g:s.g*(1-n.a)+n.g*n.a,b:s.b*(1-n.a)+n.b*n.a};return Ah(o).toRgbString()};vl.contrast=function(e,r,n){var i=Ah(e);i.getAlpha()!==1&&(i=Ah(vl.combine(e,dz)));var s=i.isDark()?r?i.lighten(r):dz:n?i.darken(n):Ixe;return s.toString()};vl.stroke=function(e,r){var n=Ah(r);e.style({stroke:vl.tinyRGB(n),"stroke-opacity":n.getAlpha()})};vl.fill=function(e,r){var n=Ah(r);e.style({fill:vl.tinyRGB(n),"fill-opacity":n.getAlpha()})};vl.clean=function(e){if(!(!e||typeof e!="object")){var r=Object.keys(e),n,i,s,o;for(n=0;n<r.length;n++)if(s=r[n],o=e[s],s.substr(s.length-5)==="color")if(Array.isArray(o))for(i=0;i<o.length;i++)o[i]=lT(o[i]);else e[s]=lT(o);else if(s.substr(s.length-10)==="colorscale"&&Array.isArray(o))for(i=0;i<o.length;i++)Array.isArray(o[i])&&(o[i][1]=lT(o[i][1]));else if(Array.isArray(o)){var a=o[0];if(!Array.isArray(a)&&a&&typeof a=="object")for(i=0;i<o.length;i++)vl.clean(o[i])}else o&&typeof o=="object"&&!Dxe(o)&&vl.clean(o)}};function lT(e){if(Pxe(e)||typeof e!="string")return e;var r=e.trim();if(r.substr(0,3)!=="rgb")return e;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var i=n[1].trim().split(/\s*[\s,]\s*/),s=r.charAt(3)==="a"&&i.length===4;if(!s&&i.length!==3)return e;for(var o=0;o<i.length;o++){if(!i[o].length||(i[o]=Number(i[o]),!(i[o]>=0)))return e;if(o===3)i[o]>1&&(i[o]=1);else if(i[o]>=1)return e}var a=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return s?"rgba("+a+", "+i[3]+")":"rgb("+a+")"}t(lT,"cleanOne");var A0={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2},_y={};_y.counter=function(e,r,n,i){var s=(r||"")+(n?"":"$"),o=i===!1?"":"^";return e==="xy"?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+s):new RegExp(o+e+"([2-9]|[1-9][0-9]+)?"+s)};(function(e){var r=xn,n=rl.exports,i=Ni,s=by,o=$a.exports,a=A0.DESELECTDIM,l=Z2,u=_y.counter,f=Y1.modHalf,h=Cf.isArrayOrTypedArray;e.valObjectMeta={data_array:{description:["An {array} of data.","The value MUST be an {array}, or we ignore it.","Note that typed arrays (e.g. Float32Array) are supported."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(c,d,g){h(c)?d.set(c):g!==void 0&&d.set(g)}},enumerated:{description:["Enumerated value type. The available values are listed","in `values`."].join(" "),requiredOpts:["values"],otherOpts:["dflt","coerceNumber","arrayOk"],coerceFunction:function(c,d,g,p){p.coerceNumber&&(c=+c),p.values.indexOf(c)===-1?d.set(g):d.set(c)},validateFunction:function(c,d){d.coerceNumber&&(c=+c);for(var g=d.values,p=0;p<g.length;p++){var b=String(g[p]);if(b.charAt(0)==="/"&&b.charAt(b.length-1)==="/"){var m=new RegExp(b.substr(1,b.length-2));if(m.test(c))return!0}else if(c===g[p])return!0}return!1}},boolean:{description:"A boolean (true/false) value.",requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(c,d,g){c===!0||c===!1?d.set(c):d.set(g)}},number:{description:["A number or a numeric value","(e.g. a number inside a string).","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(c,d,g,p){!r(c)||p.min!==void 0&&c<p.min||p.max!==void 0&&c>p.max?d.set(g):d.set(+c)}},integer:{description:["An integer or an integer inside a string.","When applicable, values greater (less) than `max` (`min`)","are coerced to the `dflt`."].join(" "),requiredOpts:[],otherOpts:["dflt","min","max","arrayOk"],coerceFunction:function(c,d,g,p){c%1||!r(c)||p.min!==void 0&&c<p.min||p.max!==void 0&&c>p.max?d.set(g):d.set(+c)}},string:{description:["A string value.","Numbers are converted to strings except for attributes with","`strict` set to true."].join(" "),requiredOpts:[],otherOpts:["dflt","noBlank","strict","arrayOk","values"],coerceFunction:function(c,d,g,p){if(typeof c!="string"){var b=typeof c=="number";p.strict===!0||!b?d.set(g):d.set(String(c))}else p.noBlank&&!c?d.set(g):d.set(c)}},color:{description:["A string describing color.","Supported formats:","- hex (e.g. '#d3d3d3')","- rgb (e.g. 'rgb(255, 0, 0)')","- rgba (e.g. 'rgb(255, 0, 0, 0.5)')","- hsl (e.g. 'hsl(0, 100%, 50%)')","- hsv (e.g. 'hsv(0, 100%, 100%)')","- named colors (full list: http://www.w3.org/TR/css3-color/#svg-color)"].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(c,d,g){n(c).isValid()?d.set(c):d.set(g)}},colorlist:{description:["A list of colors.","Must be an {array} containing valid colors."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(c,d,g){function p(b){return n(b).isValid()}t(p,"isColor"),!Array.isArray(c)||!c.length?d.set(g):c.every(p)?d.set(c):d.set(g)}},colorscale:{description:["A Plotly colorscale either picked by a name:","(any of",Object.keys(s.scales).join(", "),")","customized as an {array} of 2-element {arrays} where","the first element is the normalized color level value","(starting at *0* and ending at *1*),","and the second item is a valid color string."].join(" "),requiredOpts:[],otherOpts:["dflt"],coerceFunction:function(c,d,g){d.set(s.get(c,g))}},angle:{description:["A number (in degree) between -180 and 180."].join(" "),requiredOpts:[],otherOpts:["dflt","arrayOk"],coerceFunction:function(c,d,g){c==="auto"?d.set("auto"):r(c)?d.set(f(+c,360)):d.set(g)}},subplotid:{description:["An id string of a subplot type (given by dflt), optionally","followed by an integer >1. e.g. if dflt='geo', we can have","'geo', 'geo2', 'geo3', ..."].join(" "),requiredOpts:["dflt"],otherOpts:["regex"],coerceFunction:function(c,d,g,p){var b=p.regex||u(g);if(typeof c=="string"&&b.test(c)){d.set(c);return}d.set(g)},validateFunction:function(c,d){var g=d.dflt;return c===g?!0:typeof c!="string"?!1:!!u(g).test(c)}},flaglist:{description:["A string representing a combination of flags","(order does not matter here).","Combine any of the available `flags` with *+*.","(e.g. ('lines+markers')).","Values in `extras` cannot be combined."].join(" "),requiredOpts:["flags"],otherOpts:["dflt","extras","arrayOk"],coerceFunction:function(c,d,g,p){if((p.extras||[]).indexOf(c)!==-1){d.set(c);return}if(typeof c!="string"){d.set(g);return}for(var b=c.split("+"),m=0;m<b.length;){var y=b[m];p.flags.indexOf(y)===-1||b.indexOf(y)<m?b.splice(m,1):m++}b.length?d.set(b.join("+")):d.set(g)}},any:{description:"Any type.",requiredOpts:[],otherOpts:["dflt","values","arrayOk"],coerceFunction:function(c,d,g){c===void 0?d.set(g):d.set(c)}},info_array:{description:["An {array} of plot information."].join(" "),requiredOpts:["items"],otherOpts:["dflt","freeLength","dimensions"],coerceFunction:function(c,d,g,p){function b(B,z,R){var F,O={set:function(q){F=q}};return R===void 0&&(R=z.dflt),e.valObjectMeta[z.valType].coerceFunction(B,O,R,z),F}t(b,"coercePart");var m=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(c)&&Array.isArray(c[0]);if(!Array.isArray(c)){d.set(g);return}var y=p.items,T=[],_=Array.isArray(y),M=_&&m&&Array.isArray(y[0]),w=m&&_&&!M,x=_&&!w?y.length:c.length,A,S,k,L,P,D;if(g=Array.isArray(g)?g:[],m)for(A=0;A<x;A++)for(T[A]=[],k=Array.isArray(c[A])?c[A]:[],w?P=y.length:_?P=y[A].length:P=k.length,S=0;S<P;S++)w?L=y[S]:_?L=y[A][S]:L=y,D=b(k[S],L,(g[A]||[])[S]),D!==void 0&&(T[A][S]=D);else for(A=0;A<x;A++)D=b(c[A],_?y[A]:y,g[A]),D!==void 0&&(T[A]=D);d.set(T)},validateFunction:function(c,d){if(!Array.isArray(c))return!1;var g=d.items,p=Array.isArray(g),b=d.dimensions===2;if(!d.freeLength&&c.length!==g.length)return!1;for(var m=0;m<c.length;m++)if(b){if(!Array.isArray(c[m])||!d.freeLength&&c[m].length!==g[m].length)return!1;for(var y=0;y<c[m].length;y++)if(!v(c[m][y],p?g[m][y]:g))return!1}else if(!v(c[m],p?g[m]:g))return!1;return!0}}},e.coerce=function(c,d,g,p,b){var m=l(g,p).get(),y=l(c,p),T=l(d,p),_=y.get(),M=d._template;if(_===void 0&&M&&(_=l(M,p).get(),M=0),b===void 0&&(b=m.dflt),m.arrayOk&&h(_))return T.set(_),_;var w=e.valObjectMeta[m.valType].coerceFunction;w(_,T,b,m);var x=T.get();return M&&x===b&&!v(_,m)&&(_=l(M,p).get(),w(_,T,b,m),x=T.get()),x},e.coerce2=function(c,d,g,p,b){var m=l(c,p),y=e.coerce(c,d,g,p,b),T=m.get();return T!=null?y:!1},e.coerceFont=function(c,d,g){var p={};return g=g||{},p.family=c(d+".family",g.family),p.size=c(d+".size",g.size),p.color=c(d+".color",g.color),p},e.coercePattern=function(c,d,g,p){var b=c(d+".shape");if(b){c(d+".solidity"),c(d+".size");var m=c(d+".fillmode"),y=m==="overlay";if(!p){var T=c(d+".bgcolor",y?g:void 0);c(d+".fgcolor",y?o.contrast(T):g)}c(d+".fgopacity",y?.5:1)}},e.coerceHoverinfo=function(c,d,g){var p=d._module.attributes,b=p.hoverinfo?p:i,m=b.hoverinfo,y;if(g._dataLength===1){var T=m.dflt==="all"?m.flags.slice():m.dflt.split("+");T.splice(T.indexOf("name"),1),y=T.join("+")}return e.coerce(c,d,b,"hoverinfo",y)},e.coerceSelectionMarkerOpacity=function(c,d){if(!!c.marker){var g=c.marker.opacity;if(g!==void 0){var p,b;!h(g)&&!c.selected&&!c.unselected&&(p=g,b=a*g),d("selected.marker.opacity",p),d("unselected.marker.opacity",b)}}};function v(c,d){var g=e.valObjectMeta[d.valType];if(d.arrayOk&&h(c))return!0;if(g.validateFunction)return g.validateFunction(c,d);var p={},b=p,m={set:function(y){b=y}};return g.coerceFunction(c,m,p,d),b!==p}t(v,"validate"),e.validate=v})(Soe);var Loe={},cp={exports:{}},Roe={staticPlot:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are interactive or not.","If *false*, no interactivity, for export or image generation."].join(" ")},typesetMath:{valType:"boolean",dflt:!0,description:["Determines whether math should be typeset or not,","when MathJax (either v2 or v3) is present on the page."].join(" ")},plotlyServerURL:{valType:"string",dflt:"",description:["When set it determines base URL for","the 'Edit in Chart Studio' `showEditInChartStudio`/`showSendToCloud` mode bar button","and the showLink/sendData on-graph link.","To enable sending your data to Chart Studio Cloud, you need to","set both `plotlyServerURL` to 'https://chart-studio.plotly.com' and","also set `showSendToCloud` to true."].join(" ")},editable:{valType:"boolean",dflt:!1,description:["Determines whether the graph is editable or not.","Sets all pieces of `edits`","unless a separate `edits` config item overrides individual parts."].join(" ")},edits:{annotationPosition:{valType:"boolean",dflt:!1,description:["Determines if the main anchor of the annotation is editable.","The main anchor corresponds to the","text (if no arrow) or the arrow (which drags the whole thing leaving","the arrow length & direction unchanged)."].join(" ")},annotationTail:{valType:"boolean",dflt:!1,description:["Has only an effect for annotations with arrows.","Enables changing the length and direction of the arrow."].join(" ")},annotationText:{valType:"boolean",dflt:!1,description:"Enables editing annotation text."},axisTitleText:{valType:"boolean",dflt:!1,description:"Enables editing axis title text."},colorbarPosition:{valType:"boolean",dflt:!1,description:"Enables moving colorbars."},colorbarTitleText:{valType:"boolean",dflt:!1,description:"Enables editing colorbar title text."},legendPosition:{valType:"boolean",dflt:!1,description:"Enables moving the legend."},legendText:{valType:"boolean",dflt:!1,description:"Enables editing the trace name fields from the legend"},shapePosition:{valType:"boolean",dflt:!1,description:"Enables moving shapes."},titleText:{valType:"boolean",dflt:!1,description:"Enables editing the global layout title."}},editSelection:{valType:"boolean",dflt:!0,description:"Enables moving selections."},autosizable:{valType:"boolean",dflt:!1,description:["Determines whether the graphs are plotted with respect to","layout.autosize:true and infer its container size."].join(" ")},responsive:{valType:"boolean",dflt:!1,description:["Determines whether to change the layout size when window is resized.","In v3, this option will be removed and will always be true."].join(" ")},fillFrame:{valType:"boolean",dflt:!1,description:["When `layout.autosize` is turned on, determines whether the graph","fills the container (the default) or the screen (if set to *true*)."].join(" ")},frameMargins:{valType:"number",dflt:0,min:0,max:.5,description:["When `layout.autosize` is turned on, set the frame margins","in fraction of the graph size."].join(" ")},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox",description:["Determines whether mouse wheel or two-finger scroll zooms is enable.","Turned on by default for gl3d, geo and mapbox subplots","(as these subplot types do not have zoombox via pan),","but turned off by default for cartesian subplots.","Set `scrollZoom` to *false* to disable scrolling for all subplots."].join(" ")},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize",description:["Sets the double click interaction mode.","Has an effect only in cartesian plots.","If *false*, double click is disable.","If *reset*, double click resets the axis ranges to their initial values.","If *autosize*, double click set the axis ranges to their autorange values.","If *reset+autosize*, the odd double clicks resets the axis ranges","to their initial values and even double clicks set the axis ranges","to their autorange values."].join(" ")},doubleClickDelay:{valType:"number",dflt:300,min:0,description:["Sets the delay for registering a double-click in ms.","This is the time interval (in ms) between first mousedown and","2nd mouseup to constitute a double-click.","This setting propagates to all on-subplot double clicks","(except for geo and mapbox) and on-legend double clicks."].join(" ")},showAxisDragHandles:{valType:"boolean",dflt:!0,description:["Set to *false* to omit cartesian axis pan/zoom drag handles."].join(" ")},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0,description:["Set to *false* to omit direct range entry at the pan/zoom drag points,","note that `showAxisDragHandles` must be enabled to have an effect."].join(" ")},showTips:{valType:"boolean",dflt:!0,description:["Determines whether or not tips are shown while interacting","with the resulting graphs."].join(" ")},showLink:{valType:"boolean",dflt:!1,description:["Determines whether a link to Chart Studio Cloud is displayed","at the bottom right corner of resulting graphs.","Use with `sendData` and `linkText`."].join(" ")},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0,description:["Sets the text appearing in the `showLink` link."].join(" ")},sendData:{valType:"boolean",dflt:!0,description:["If *showLink* is true, does it contain data","just link to a Chart Studio Cloud file?"].join(" ")},showSources:{valType:"any",dflt:!1,description:["Adds a source-displaying function to show sources on","the resulting graphs."].join(" ")},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover",description:["Determines the mode bar display mode.","If *true*, the mode bar is always visible.","If *false*, the mode bar is always hidden.","If *hover*, the mode bar is visible while the mouse cursor","is on the graph container."].join(" ")},showSendToCloud:{valType:"boolean",dflt:!1,description:['Should we include a ModeBar button, labeled "Edit in Chart Studio",',"that sends this chart to chart-studio.plotly.com (formerly plot.ly) or another plotly server","as specified by `plotlyServerURL` for editing, export, etc? Prior to version 1.43.0","this button was included by default, now it is opt-in using this flag.","Note that this button can (depending on `plotlyServerURL` being set) send your data","to an external server. However that server does not persist your data",'until you arrive at the Chart Studio and explicitly click "Save".'].join(" ")},showEditInChartStudio:{valType:"boolean",dflt:!1,description:["Same as `showSendToCloud`, but use a pencil icon instead of a floppy-disk.","Note that if both `showSendToCloud` and `showEditInChartStudio` are turned,","only `showEditInChartStudio` will be honored."].join(" ")},modeBarButtonsToRemove:{valType:"any",dflt:[],description:["Remove mode bar buttons by name.","See ./components/modebar/buttons.js for the list of names."].join(" ")},modeBarButtonsToAdd:{valType:"any",dflt:[],description:["Add mode bar button using config objects","See ./components/modebar/buttons.js for list of arguments.","To enable predefined modebar buttons e.g. shape drawing, hover and spikelines,","simply provide their string name(s). This could include:","*v1hovermode*, *hoverclosest*, *hovercompare*, *togglehover*, *togglespikelines*,","*drawline*, *drawopenpath*, *drawclosedpath*, *drawcircle*, *drawrect* and *eraseshape*.","Please note that these predefined buttons will only be shown if they are compatible","with all trace types used in a graph."].join(" ")},modeBarButtons:{valType:"any",dflt:!1,description:["Define fully custom mode bar buttons as nested array,","where the outer arrays represents button groups, and","the inner arrays have buttons config objects or names of default buttons","See ./components/modebar/buttons.js for more info."].join(" ")},toImageButtonOptions:{valType:"any",dflt:{},description:["Statically override options for toImage modebar button","allowed keys are format, filename, width, height, scale","see ../components/modebar/buttons.js"].join(" ")},displaylogo:{valType:"boolean",dflt:!0,description:["Determines whether or not the plotly logo is displayed","on the end of the mode bar."].join(" ")},watermark:{valType:"boolean",dflt:!1,description:"watermark the images with the company's logo"},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4,description:["Set the pixel ratio during WebGL image export.","This config option was formerly named `plot3dPixelRatio`","which is now deprecated."].join(" ")},setBackground:{valType:"any",dflt:"transparent",description:["Set function to add the background color (i.e. `layout.paper_color`)","to a different container.","This function take the graph div as first argument and the current background","color as second argument.","Alternatively, set to string *opaque* to ensure there is white behind it."].join(" ")},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/",description:["Set the URL to topojson used in geo charts.","By default, the topojson files are fetched from cdn.plot.ly.","For example, set this option to:","<path-to-plotly.js>/dist/topojson/","to render geographical feature using the topojson files","that ship with the plotly.js module."].join(" ")},mapboxAccessToken:{valType:"string",dflt:null,description:["Mapbox access token (required to plot mapbox trace types)","If using an Mapbox Atlas server, set this option to ''","so that plotly.js won't attempt to authenticate to the public Mapbox server."].join(" ")},logging:{valType:"integer",min:0,max:2,dflt:1,description:["Turn all console logging on or off (errors will be thrown)","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0,description:["Set on-graph logging (notifier) level","This should ONLY be set via Plotly.setPlotConfig","Available levels:","0: no on-graph logs","1: warnings and errors, but not informational messages","2: verbose logs"].join(" ")},queueLength:{valType:"integer",min:0,dflt:0,description:"Sets the length of the undo/redo queue."},globalTransforms:{valType:"any",dflt:[],description:["Set global transform to be applied to all traces with no","specification needed"].join(" ")},locale:{valType:"string",dflt:"en-US",description:["Which localization should we use?","Should be a string like 'en' or 'en-US'."].join(" ")},locales:{valType:"any",dflt:{},description:["Localization definitions","Locales can be provided either here (specific to one chart) or globally","by registering them as modules.","Should be an object of objects {locale: {dictionary: {...}, format: {...}}}","{","  da: {","      dictionary: {'Reset axes': 'Nulstil aksler', ...},","      format: {months: [...], shortMonths: [...]}","  },","  ...","}","All parts are optional. When looking for translation or format fields, we","look first for an exact match in a config locale, then in a registered","module. If those fail, we strip off any regionalization ('en-US' -> 'en')","and try each (config, registry) again. The final fallback for translation","is untranslated (which is US English) and for formats is the base English","(the only consequence being the last fallback date format %x is DD/MM/YYYY","instead of MM/DD/YYYY). Currently `grouping` and `currency` are ignored","for our automatic number formatting, but can be used in custom formats."].join(" ")}},Poe={};function Doe(e,r){for(var n in e){var i=e[n];i.valType?r[n]=i.dflt:(r[n]||(r[n]={}),Doe(i,r[n]))}}t(Doe,"crawl$1");Doe(Roe,Poe);var wy={configAttributes:Roe,dfltConfig:Poe},uT=Va.exports,zxe=xn,pm=[],Ioe=t(function(e,r){if(pm.indexOf(e)!==-1)return;pm.push(e);var n=1e3;zxe(r)?n=r:r==="long"&&(n=3e3);var i=uT.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var s=i.selectAll(".notifier-note").data(pm);function o(a){a.duration(700).style("opacity",0).each("end",function(l){var u=pm.indexOf(l);u!==-1&&pm.splice(u,1),uT.select(this).remove()})}t(o,"killNote"),s.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var l=uT.select(this);l.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){l.transition().call(o)});for(var u=l.append("p"),f=a.split(/<br\s*\/?>/g),h=0;h<f.length;h++)h&&u.append("br"),u.append("span").text(f[h]);r==="stick"?l.transition().duration(350).style("opacity",1):l.transition().duration(700).style("opacity",1).transition().delay(n).call(o)})},"notifier$1"),ry=wy.dfltConfig,WF=Ioe,XF=cp.exports={};XF.log=function(){var e;if(ry.logging>1){var r=["LOG:"];for(e=0;e<arguments.length;e++)r.push(arguments[e]);console.trace.apply(console,r)}if(ry.notifyOnLogging>1){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);WF(n.join("<br>"),"long")}};XF.warn=function(){var e;if(ry.logging>0){var r=["WARN:"];for(e=0;e<arguments.length;e++)r.push(arguments[e]);console.trace.apply(console,r)}if(ry.notifyOnLogging>0){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);WF(n.join("<br>"),"stick")}};XF.error=function(){var e;if(ry.logging>0){var r=["ERROR:"];for(e=0;e<arguments.length;e++)r.push(arguments[e]);console.error.apply(console,r)}if(ry.notifyOnLogging>0){var n=[];for(e=0;e<arguments.length;e++)n.push(arguments[e]);WF(n.join("<br>"),"stick")}};var Na={},ZF=t(function(){},"noop"),zoe=t(function(r,n){if(n instanceof RegExp){for(var i=n.toString(),s=0;s<r.length;s++)if(r[s]instanceof RegExp&&r[s].toString()===i)return r;r.push(n)}else(n||n===0)&&r.indexOf(n)===-1&&r.push(n);return r},"pushUnique"),ew={},Fxe=Bxe;function Bxe(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t(Bxe,"create");var Oxe=Nxe;function Nxe(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}t(Nxe,"clone");var qxe=Uxe;function Uxe(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}t(Uxe,"copy$1");var Foe=Hxe;function Hxe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t(Hxe,"identity$7");var $xe=Vxe;function Vxe(e,r){if(e===r){var n=r[1],i=r[2],s=r[3],o=r[6],a=r[7],l=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=n,e[6]=r[9],e[7]=r[13],e[8]=i,e[9]=o,e[11]=r[14],e[12]=s,e[13]=a,e[14]=l}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}t(Vxe,"transpose");var Gxe=jxe;function jxe(e,r){var n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],l=r[5],u=r[6],f=r[7],h=r[8],v=r[9],c=r[10],d=r[11],g=r[12],p=r[13],b=r[14],m=r[15],y=n*l-i*a,T=n*u-s*a,_=n*f-o*a,M=i*u-s*l,w=i*f-o*l,x=s*f-o*u,A=h*p-v*g,S=h*b-c*g,k=h*m-d*g,L=v*b-c*p,P=v*m-d*p,D=c*m-d*b,B=y*D-T*P+_*L+M*k-w*S+x*A;return B?(B=1/B,e[0]=(l*D-u*P+f*L)*B,e[1]=(s*P-i*D-o*L)*B,e[2]=(p*x-b*w+m*M)*B,e[3]=(c*w-v*x-d*M)*B,e[4]=(u*k-a*D-f*S)*B,e[5]=(n*D-s*k+o*S)*B,e[6]=(b*_-g*x-m*T)*B,e[7]=(h*x-c*_+d*T)*B,e[8]=(a*P-l*k+f*A)*B,e[9]=(i*k-n*P-o*A)*B,e[10]=(g*w-p*_+m*y)*B,e[11]=(v*_-h*w-d*y)*B,e[12]=(l*S-a*L-u*A)*B,e[13]=(n*L-i*S+s*A)*B,e[14]=(p*T-g*M-b*y)*B,e[15]=(h*M-v*T+c*y)*B,e):null}t(jxe,"invert");var Yxe=Wxe;function Wxe(e,r){var n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],l=r[5],u=r[6],f=r[7],h=r[8],v=r[9],c=r[10],d=r[11],g=r[12],p=r[13],b=r[14],m=r[15];return e[0]=l*(c*m-d*b)-v*(u*m-f*b)+p*(u*d-f*c),e[1]=-(i*(c*m-d*b)-v*(s*m-o*b)+p*(s*d-o*c)),e[2]=i*(u*m-f*b)-l*(s*m-o*b)+p*(s*f-o*u),e[3]=-(i*(u*d-f*c)-l*(s*d-o*c)+v*(s*f-o*u)),e[4]=-(a*(c*m-d*b)-h*(u*m-f*b)+g*(u*d-f*c)),e[5]=n*(c*m-d*b)-h*(s*m-o*b)+g*(s*d-o*c),e[6]=-(n*(u*m-f*b)-a*(s*m-o*b)+g*(s*f-o*u)),e[7]=n*(u*d-f*c)-a*(s*d-o*c)+h*(s*f-o*u),e[8]=a*(v*m-d*p)-h*(l*m-f*p)+g*(l*d-f*v),e[9]=-(n*(v*m-d*p)-h*(i*m-o*p)+g*(i*d-o*v)),e[10]=n*(l*m-f*p)-a*(i*m-o*p)+g*(i*f-o*l),e[11]=-(n*(l*d-f*v)-a*(i*d-o*v)+h*(i*f-o*l)),e[12]=-(a*(v*b-c*p)-h*(l*b-u*p)+g*(l*c-u*v)),e[13]=n*(v*b-c*p)-h*(i*b-s*p)+g*(i*c-s*v),e[14]=-(n*(l*b-u*p)-a*(i*b-s*p)+g*(i*u-s*l)),e[15]=n*(l*c-u*v)-a*(i*c-s*v)+h*(i*u-s*l),e}t(Wxe,"adjoint");var Xxe=Zxe;function Zxe(e){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=e[9],v=e[10],c=e[11],d=e[12],g=e[13],p=e[14],b=e[15],m=r*a-n*o,y=r*l-i*o,T=r*u-s*o,_=n*l-i*a,M=n*u-s*a,w=i*u-s*l,x=f*g-h*d,A=f*p-v*d,S=f*b-c*d,k=h*p-v*g,L=h*b-c*g,P=v*b-c*p;return m*P-y*L+T*k+_*S-M*A+w*x}t(Zxe,"determinant");var Kxe=Jxe;function Jxe(e,r,n){var i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],f=r[6],h=r[7],v=r[8],c=r[9],d=r[10],g=r[11],p=r[12],b=r[13],m=r[14],y=r[15],T=n[0],_=n[1],M=n[2],w=n[3];return e[0]=T*i+_*l+M*v+w*p,e[1]=T*s+_*u+M*c+w*b,e[2]=T*o+_*f+M*d+w*m,e[3]=T*a+_*h+M*g+w*y,T=n[4],_=n[5],M=n[6],w=n[7],e[4]=T*i+_*l+M*v+w*p,e[5]=T*s+_*u+M*c+w*b,e[6]=T*o+_*f+M*d+w*m,e[7]=T*a+_*h+M*g+w*y,T=n[8],_=n[9],M=n[10],w=n[11],e[8]=T*i+_*l+M*v+w*p,e[9]=T*s+_*u+M*c+w*b,e[10]=T*o+_*f+M*d+w*m,e[11]=T*a+_*h+M*g+w*y,T=n[12],_=n[13],M=n[14],w=n[15],e[12]=T*i+_*l+M*v+w*p,e[13]=T*s+_*u+M*c+w*b,e[14]=T*o+_*f+M*d+w*m,e[15]=T*a+_*h+M*g+w*y,e}t(Jxe,"multiply$1");var Qxe=ebe;function ebe(e,r,n){var i=n[0],s=n[1],o=n[2],a,l,u,f,h,v,c,d,g,p,b,m;return r===e?(e[12]=r[0]*i+r[4]*s+r[8]*o+r[12],e[13]=r[1]*i+r[5]*s+r[9]*o+r[13],e[14]=r[2]*i+r[6]*s+r[10]*o+r[14],e[15]=r[3]*i+r[7]*s+r[11]*o+r[15]):(a=r[0],l=r[1],u=r[2],f=r[3],h=r[4],v=r[5],c=r[6],d=r[7],g=r[8],p=r[9],b=r[10],m=r[11],e[0]=a,e[1]=l,e[2]=u,e[3]=f,e[4]=h,e[5]=v,e[6]=c,e[7]=d,e[8]=g,e[9]=p,e[10]=b,e[11]=m,e[12]=a*i+h*s+g*o+r[12],e[13]=l*i+v*s+p*o+r[13],e[14]=u*i+c*s+b*o+r[14],e[15]=f*i+d*s+m*o+r[15]),e}t(ebe,"translate");var tbe=rbe;function rbe(e,r,n){var i=n[0],s=n[1],o=n[2];return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=r[3]*i,e[4]=r[4]*s,e[5]=r[5]*s,e[6]=r[6]*s,e[7]=r[7]*s,e[8]=r[8]*o,e[9]=r[9]*o,e[10]=r[10]*o,e[11]=r[11]*o,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}t(rbe,"scale$1");var abe=nbe;function nbe(e,r,n,i){var s=i[0],o=i[1],a=i[2],l=Math.sqrt(s*s+o*o+a*a),u,f,h,v,c,d,g,p,b,m,y,T,_,M,w,x,A,S,k,L,P,D,B,z;return Math.abs(l)<1e-6?null:(l=1/l,s*=l,o*=l,a*=l,u=Math.sin(n),f=Math.cos(n),h=1-f,v=r[0],c=r[1],d=r[2],g=r[3],p=r[4],b=r[5],m=r[6],y=r[7],T=r[8],_=r[9],M=r[10],w=r[11],x=s*s*h+f,A=o*s*h+a*u,S=a*s*h-o*u,k=s*o*h-a*u,L=o*o*h+f,P=a*o*h+s*u,D=s*a*h+o*u,B=o*a*h-s*u,z=a*a*h+f,e[0]=v*x+p*A+T*S,e[1]=c*x+b*A+_*S,e[2]=d*x+m*A+M*S,e[3]=g*x+y*A+w*S,e[4]=v*k+p*L+T*P,e[5]=c*k+b*L+_*P,e[6]=d*k+m*L+M*P,e[7]=g*k+y*L+w*P,e[8]=v*D+p*B+T*z,e[9]=c*D+b*B+_*z,e[10]=d*D+m*B+M*z,e[11]=g*D+y*B+w*z,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}t(nbe,"rotate$1");var ibe=obe;function obe(e,r,n){var i=Math.sin(n),s=Math.cos(n),o=r[4],a=r[5],l=r[6],u=r[7],f=r[8],h=r[9],v=r[10],c=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=o*s+f*i,e[5]=a*s+h*i,e[6]=l*s+v*i,e[7]=u*s+c*i,e[8]=f*s-o*i,e[9]=h*s-a*i,e[10]=v*s-l*i,e[11]=c*s-u*i,e}t(obe,"rotateX");var sbe=lbe;function lbe(e,r,n){var i=Math.sin(n),s=Math.cos(n),o=r[0],a=r[1],l=r[2],u=r[3],f=r[8],h=r[9],v=r[10],c=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=o*s-f*i,e[1]=a*s-h*i,e[2]=l*s-v*i,e[3]=u*s-c*i,e[8]=o*i+f*s,e[9]=a*i+h*s,e[10]=l*i+v*s,e[11]=u*i+c*s,e}t(lbe,"rotateY");var ube=fbe;function fbe(e,r,n){var i=Math.sin(n),s=Math.cos(n),o=r[0],a=r[1],l=r[2],u=r[3],f=r[4],h=r[5],v=r[6],c=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=o*s+f*i,e[1]=a*s+h*i,e[2]=l*s+v*i,e[3]=u*s+c*i,e[4]=f*s-o*i,e[5]=h*s-a*i,e[6]=v*s-l*i,e[7]=c*s-u*i,e}t(fbe,"rotateZ");var cbe=hbe;function hbe(e,r,n){var i,s,o,a=n[0],l=n[1],u=n[2],f=Math.sqrt(a*a+l*l+u*u);return Math.abs(f)<1e-6?null:(f=1/f,a*=f,l*=f,u*=f,i=Math.sin(r),s=Math.cos(r),o=1-s,e[0]=a*a*o+s,e[1]=l*a*o+u*i,e[2]=u*a*o-l*i,e[3]=0,e[4]=a*l*o-u*i,e[5]=l*l*o+s,e[6]=u*l*o+a*i,e[7]=0,e[8]=a*u*o+l*i,e[9]=l*u*o-a*i,e[10]=u*u*o+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}t(hbe,"fromRotation");var vbe=dbe;function dbe(e,r,n){var i=r[0],s=r[1],o=r[2],a=r[3],l=i+i,u=s+s,f=o+o,h=i*l,v=i*u,c=i*f,d=s*u,g=s*f,p=o*f,b=a*l,m=a*u,y=a*f;return e[0]=1-(d+p),e[1]=v+y,e[2]=c-m,e[3]=0,e[4]=v-y,e[5]=1-(h+p),e[6]=g+b,e[7]=0,e[8]=c+m,e[9]=g-b,e[10]=1-(h+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}t(dbe,"fromRotationTranslation");var pbe=gbe;function gbe(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t(gbe,"fromScaling");var ybe=mbe;function mbe(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}t(mbe,"fromTranslation");var xbe=bbe;function bbe(e,r){var n=Math.sin(r),i=Math.cos(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t(bbe,"fromXRotation");var _be=wbe;function wbe(e,r){var n=Math.sin(r),i=Math.cos(r);return e[0]=i,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t(wbe,"fromYRotation");var Tbe=Abe;function Abe(e,r){var n=Math.sin(r),i=Math.cos(r);return e[0]=i,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t(Abe,"fromZRotation");var Boe=Sbe;function Sbe(e,r){var n=r[0],i=r[1],s=r[2],o=r[3],a=n+n,l=i+i,u=s+s,f=n*a,h=i*a,v=i*l,c=s*a,d=s*l,g=s*u,p=o*a,b=o*l,m=o*u;return e[0]=1-v-g,e[1]=h+m,e[2]=c-b,e[3]=0,e[4]=h-m,e[5]=1-f-g,e[6]=d+p,e[7]=0,e[8]=c+b,e[9]=d-p,e[10]=1-f-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t(Sbe,"fromQuat");var Mbe=kbe;function kbe(e,r,n,i,s,o,a){var l=1/(n-r),u=1/(s-i),f=1/(o-a);return e[0]=o*2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*u,e[6]=0,e[7]=0,e[8]=(n+r)*l,e[9]=(s+i)*u,e[10]=(a+o)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*f,e[15]=0,e}t(kbe,"frustum");var Ebe=Cbe;function Cbe(e,r,n,i,s){var o=1/Math.tan(r/2),a=1/(i-s);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+i)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*i*a,e[15]=0,e}t(Cbe,"perspective");var Lbe=Rbe;function Rbe(e,r,n,i){var s=Math.tan(r.upDegrees*Math.PI/180),o=Math.tan(r.downDegrees*Math.PI/180),a=Math.tan(r.leftDegrees*Math.PI/180),l=Math.tan(r.rightDegrees*Math.PI/180),u=2/(a+l),f=2/(s+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-((a-l)*u*.5),e[9]=(s-o)*f*.5,e[10]=i/(n-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*n/(n-i),e[15]=0,e}t(Rbe,"perspectiveFromFieldOfView");var Pbe=Dbe;function Dbe(e,r,n,i,s,o,a){var l=1/(r-n),u=1/(i-s),f=1/(o-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(r+n)*l,e[13]=(s+i)*u,e[14]=(a+o)*f,e[15]=1,e}t(Dbe,"ortho");var Ibe=Foe,zbe=Fbe;function Fbe(e,r,n,i){var s,o,a,l,u,f,h,v,c,d,g=r[0],p=r[1],b=r[2],m=i[0],y=i[1],T=i[2],_=n[0],M=n[1],w=n[2];return Math.abs(g-_)<1e-6&&Math.abs(p-M)<1e-6&&Math.abs(b-w)<1e-6?Ibe(e):(h=g-_,v=p-M,c=b-w,d=1/Math.sqrt(h*h+v*v+c*c),h*=d,v*=d,c*=d,s=y*c-T*v,o=T*h-m*c,a=m*v-y*h,d=Math.sqrt(s*s+o*o+a*a),d?(d=1/d,s*=d,o*=d,a*=d):(s=0,o=0,a=0),l=v*a-c*o,u=c*s-h*a,f=h*o-v*s,d=Math.sqrt(l*l+u*u+f*f),d?(d=1/d,l*=d,u*=d,f*=d):(l=0,u=0,f=0),e[0]=s,e[1]=l,e[2]=h,e[3]=0,e[4]=o,e[5]=u,e[6]=v,e[7]=0,e[8]=a,e[9]=f,e[10]=c,e[11]=0,e[12]=-(s*g+o*p+a*b),e[13]=-(l*g+u*p+f*b),e[14]=-(h*g+v*p+c*b),e[15]=1,e)}t(Fbe,"lookAt");var Bbe=Obe;function Obe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}t(Obe,"str");var Ooe={create:Fxe,clone:Oxe,copy:qxe,identity:Foe,transpose:$xe,invert:Gxe,adjoint:Yxe,determinant:Xxe,multiply:Kxe,translate:Qxe,scale:tbe,rotate:abe,rotateX:ibe,rotateY:sbe,rotateZ:ube,fromRotation:cbe,fromRotationTranslation:vbe,fromScaling:pbe,fromTranslation:ybe,fromXRotation:xbe,fromYRotation:_be,fromZRotation:Tbe,fromQuat:Boe,frustum:Mbe,perspective:Ebe,perspectiveFromFieldOfView:Lbe,ortho:Pbe,lookAt:zbe,str:Bbe};(function(e){var r=Ooe;e.init2dArray=function(n,i){for(var s=new Array(n),o=0;o<n;o++)s[o]=new Array(i);return s},e.transposeRagged=function(n){var i=0,s=n.length,o,a;for(o=0;o<s;o++)i=Math.max(i,n[o].length);var l=new Array(i);for(o=0;o<i;o++)for(l[o]=new Array(s),a=0;a<s;a++)l[o][a]=n[a][o];return l},e.dot=function(n,i){if(!(n.length&&i.length)||n.length!==i.length)return null;var s=n.length,o,a;if(n[0].length)for(o=new Array(s),a=0;a<s;a++)o[a]=e.dot(n[a],i);else if(i[0].length){var l=e.transposeRagged(i);for(o=new Array(l.length),a=0;a<l.length;a++)o[a]=e.dot(n,l[a])}else for(o=0,a=0;a<s;a++)o+=n[a]*i[a];return o},e.translationMatrix=function(n,i){return[[1,0,n],[0,1,i],[0,0,1]]},e.rotationMatrix=function(n){var i=n*Math.PI/180;return[[Math.cos(i),-Math.sin(i),0],[Math.sin(i),Math.cos(i),0],[0,0,1]]},e.rotationXYMatrix=function(n,i,s){return e.dot(e.dot(e.translationMatrix(i,s),e.rotationMatrix(n)),e.translationMatrix(-i,-s))},e.apply3DTransform=function(n){return function(){var i=arguments,s=arguments.length===1?i[0]:[i[0],i[1],i[2]||0];return e.dot(n,[s[0],s[1],s[2],1]).slice(0,3)}},e.apply2DTransform=function(n){return function(){var i=arguments;i.length===3&&(i=i[0]);var s=arguments.length===1?i[0]:[i[0],i[1]];return e.dot(n,[s[0],s[1],1]).slice(0,2)}},e.apply2DTransform2=function(n){var i=e.apply2DTransform(n);return function(s){return i(s.slice(0,2)).concat(i(s.slice(2,4)))}},e.convertCssMatrix=function(n){if(n){var i=n.length;if(i===16)return n;if(i===6)return[n[0],n[1],0,0,n[2],n[3],0,0,0,0,1,0,n[4],n[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e.inverseTransformMatrix=function(n){var i=[];return r.invert(i,n),[[i[0],i[1],i[2],i[3]],[i[4],i[5],i[6],i[7]],[i[8],i[9],i[10],i[11]],[i[12],i[13],i[14],i[15]]]}})(ew);var Nbe=Va.exports,qbe=cp.exports,Ube=ew,Hbe=Ooe;function $be(e){var r;if(typeof e=="string"){if(r=document.getElementById(e),r===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return r}else if(e==null)throw new Error("DOM element provided is null or undefined");return e}t($be,"getGraphDiv$1");function Vbe(e){var r=Nbe.select(e);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")}t(Vbe,"isPlotDiv");function Noe(e){var r=e&&e.parentNode;r&&r.removeChild(e)}t(Noe,"removeElement$1");function Gbe(e,r){qoe("global",e,r)}t(Gbe,"addStyleRule");function qoe(e,r,n){var i="plotly.js-style-"+e,s=document.getElementById(i);s||(s=document.createElement("style"),s.setAttribute("id",i),s.appendChild(document.createTextNode("")),document.head.appendChild(s));var o=s.sheet;o.insertRule?o.insertRule(r+"{"+n+"}",0):o.addRule?o.addRule(r,n,0):qbe.warn("addStyleRule failed")}t(qoe,"addRelatedStyleRule");function jbe(e){var r="plotly.js-style-"+e,n=document.getElementById(r);n&&Noe(n)}t(jbe,"deleteRelatedStyleRule");function Ybe(e){var r=Hoe(e),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return r.forEach(function(i){var s=Uoe(i);if(s){var o=Ube.convertCssMatrix(s);n=Hbe.multiply(n,n,o)}}),n}t(Ybe,"getFullTransformMatrix");function Uoe(e){var r=window.getComputedStyle(e,null),n=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform")||r.getPropertyValue("transform");return n==="none"?null:n.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}t(Uoe,"getElementTransformMatrix");function Hoe(e){for(var r=[];Wbe(e);)r.push(e),e=e.parentNode;return r}t(Hoe,"getElementAndAncestors");function Wbe(e){return e&&(e instanceof Element||e instanceof HTMLElement)}t(Wbe,"isTransformableElement");function Xbe(e,r){return e&&r&&e.x===r.x&&e.y===r.y&&e.top===r.top&&e.left===r.left&&e.right===r.right&&e.bottom===r.bottom}t(Xbe,"equalDomRects");var KF={getGraphDiv:$be,isPlotDiv:Vbe,removeElement:Noe,addStyleRule:Gbe,addRelatedStyleRule:qoe,deleteRelatedStyleRule:jbe,getFullTransformMatrix:Ybe,getElementTransformMatrix:Uoe,getElementAndAncestors:Hoe,equalDomRects:Xbe},tw={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"],description:["Describes how a new animate call interacts with currently-running","animations. If `immediate`, current animations are interrupted and","the new animation is started. If `next`, the current frame is allowed","to complete, after which the new animation is started. If `afterall`","all existing frames are animated to completion before the new animation","is started."].join(" ")},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward",description:["The direction in which to play the frames triggered by the animation call"].join(" ")},fromcurrent:{valType:"boolean",dflt:!1,description:["Play frames starting at the current frame instead of the beginning."].join(" ")},frame:{duration:{valType:"number",min:0,dflt:500,description:["The duration in milliseconds of each frame. If greater than the frame","duration, it will be limited to the frame duration."].join(" ")},redraw:{valType:"boolean",dflt:!0,description:["Redraw the plot at completion of the transition. This is desirable","for transitions that include properties that cannot be transitioned,","but may significantly slow down updates that do not require a full","redraw of the plot"].join(" ")}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none",description:["The duration of the transition, in milliseconds. If equal to zero,","updates are synchronous."].join(" ")},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none",description:"The easing function used for the transition"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none",description:["Determines whether the figure's layout or traces smoothly transitions","during updates that make both traces and layout change."].join(" ")}}},yu={};yu.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style",description:["Sets the dash style of lines. Set to a dash type string","(*solid*, *dot*, *dash*, *longdash*, *dashdot*, or *longdashdot*)","or a dash length list in px (eg *5px,10px,2px,2px*)."].join(" ")};yu.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style",description:["Sets the shape of the pattern fill.","By default, no pattern is used for filling the area."].join(" ")},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style",description:["Determines whether `marker.color` should be used","as a default to `bgcolor` or a `fgcolor`."].join(" ")},bgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of background pattern fill.","Defaults to a `marker.color` background when `fillmode` is *overlay*.","Otherwise, defaults to a transparent background."].join(" ")},fgcolor:{valType:"color",arrayOk:!0,editType:"style",description:["When there is no colorscale sets the color of foreground pattern fill.","Defaults to a `marker.color` background when `fillmode` is *replace*.","Otherwise, defaults to dark grey or white","to increase contrast with the `bgcolor`."].join(" ")},fgopacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the foreground pattern fill.","Defaults to a 0.5 when `fillmode` is *overlay*.","Otherwise, defaults to 1."].join(" ")},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style",description:["Sets the size of unit squares of the pattern fill in pixels,","which corresponds to the interval of repetition of the pattern."].join(" ")},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style",description:["Sets the solidity of the pattern fill.","Solidity is roughly the fraction of the area filled by the pattern.","Solidity of 0 shows only the background color without pattern","and solidty of 1 shows only the foreground color without pattern."].join(" ")},editType:"style",description:["Sets the pattern within the marker."].join(" ")};var Zbe=yu.dash,Kbe=cn.extendFlat,Jbe={newshape:{line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:0,dflt:4,editType:"none",description:"Sets the line width (in px)."},dash:Kbe({},Zbe,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:["Sets the color filling new shapes' interior.","Please note that if using a fillcolor with alpha greater than half,","drag inside the active shape starts moving the shape underneath,","otherwise a new shape could be started over."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none",description:["Determines the path's interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none",description:"Sets the opacity of new shapes."},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none",description:"Specifies whether new shapes are drawn below or above traces."},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none",description:["When `dragmode` is set to *drawrect*, *drawline* or *drawcircle*","this limits the drag to be horizontal, vertical or diagonal.","Using *diagonal* there is no limit e.g. in drawing lines in any direction.","*ortho* limits the draw to be either horizontal or vertical.","*horizontal* allows horizontal extend.","*vertical* allows vertical extend."].join(" ")},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none",description:"Sets the color filling the active shape' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active shape."},editType:"none"}},Qbe=yu.dash,e_e=cn.extendFlat,t_e={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none",description:["Describes how a new selection is created.","If `immediate`, a new selection is created after first mouse up.","If `gradual`, a new selection is not created after first mouse.","By adding to and subtracting from the initial selection,","this option allows declaring extra outlines of the selection."].join(" ")},line:{color:{valType:"color",editType:"none",description:["Sets the line color.","By default uses either dark grey or white","to increase contrast with background color."].join(" ")},width:{valType:"number",min:1,dflt:1,editType:"none",description:"Sets the line width (in px)."},dash:e_e({},Qbe,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none",description:"Sets the color filling the active selection' interior."},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none",description:"Sets the opacity of the active selection."},editType:"none"}},JF=t(function(e){var r=e.editType;return{t:{valType:"number",dflt:0,editType:r,description:"The amount of padding (in px) along the top of the component."},r:{valType:"number",dflt:0,editType:r,description:"The amount of padding (in px) on the right side of the component."},b:{valType:"number",dflt:0,editType:r,description:"The amount of padding (in px) along the bottom of the component."},l:{valType:"number",dflt:0,editType:r,description:"The amount of padding (in px) on the left side of the component."},editType:r}},"pad_attributes"),pz=Ho,r_e=tw,s_=Fo,uN=Jbe,fN=t_e,a_e=JF,cN=cn.extendFlat,rw=pz({editType:"calc",description:["Sets the global font.","Note that fonts used in traces and other","layout components inherit from the global font."].join(" ")});rw.family.dflt='"Open Sans", verdana, arial, sans-serif';rw.size.dflt=12;rw.color.dflt=s_.defaultLine;var Ty={font:rw,title:{text:{valType:"string",editType:"layoutstyle",description:["Sets the plot's title.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:pz({editType:"layoutstyle",description:["Sets the title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `x` refers to.","*container* spans the entire `width` of the plot.","*paper* refers to the width of the plotting area only."].join(" ")},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle",description:["Sets the container `y` refers to.","*container* spans the entire `height` of the plot.","*paper* refers to the height of the plotting area only."].join(" ")},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle",description:["Sets the x position with respect to `xref` in normalized","coordinates from *0* (left) to *1* (right)."].join(" ")},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle",description:["Sets the y position with respect to `yref` in normalized","coordinates from *0* (bottom) to *1* (top).","*auto* places the baseline of the title onto the","vertical center of the top margin."].join(" ")},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle",description:["Sets the title's horizontal alignment with respect to its x position.","*left* means that the title starts at x,","*right* means that the title ends at x","and *center* means that the title's center is at x.","*auto* divides `xref` by three and calculates the `xanchor`","value automatically based on the value of `x`."].join(" ")},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle",description:["Sets the title's vertical alignment with respect to its y position.","*top* means that the title's cap line is at y,","*bottom* means that the title's baseline is at y","and *middle* means that the title's midline is at y.","*auto* divides `yref` by three and calculates the `yanchor`","value automatically based on the value of `y`."].join(" ")},pad:cN(a_e({editType:"layoutstyle"}),{description:["Sets the padding of the title.","Each padding value only applies when the corresponding","`xanchor`/`yanchor` value is set accordingly. E.g. for left","padding to take effect, `xanchor` must be set to *left*.","The same rule applies if `xanchor`/`yanchor` is determined automatically.","Padding is muted if the respective anchor value is *middle*/*center*."].join(" ")}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot",description:["Determines how the font size for various text","elements are uniformed between each trace type.","If the computed text sizes were smaller than","the minimum size defined by `uniformtext.minsize`","using *hide* option hides the text; and","using *show* option shows the text without further downscaling.","Please note that if the size defined by `minsize` is greater than","the font size defined by trace, then the `minsize` is used."].join(" ")},minsize:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the minimum text size between traces of the same type."].join(" ")},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none",description:["Determines whether or not a layout width or height","that has been left undefined by the user","is initialized on each relayout.","Note that, regardless of this attribute,","an undefined layout width or height","is always initialized on the first call to plot."].join(" ")},width:{valType:"number",min:10,dflt:700,editType:"plot",description:["Sets the plot's width (in px)."].join(" ")},height:{valType:"number",min:10,dflt:450,editType:"plot",description:["Sets the plot's height (in px)."].join(" ")},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum width of the plot with margin.automargin applied (in px)"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot",description:"Minimum height of the plot with margin.automargin applied (in px)"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the left margin (in px)."},r:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the right margin (in px)."},t:{valType:"number",min:0,dflt:100,editType:"plot",description:"Sets the top margin (in px)."},b:{valType:"number",min:0,dflt:80,editType:"plot",description:"Sets the bottom margin (in px)."},pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the amount of padding (in px)","between the plotting area and the axis lines"].join(" ")},autoexpand:{valType:"boolean",dflt:!0,editType:"plot",description:["Turns on/off margin expansion computations.","Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider","are allowed to push the margins by defaults."].join(" ")},editType:"plot"},computed:{valType:"any",editType:"none",description:["Placeholder for exporting automargin-impacting values namely","`margin.t`, `margin.b`, `margin.l` and `margin.r` in *full-json* mode."].join(" ")},paper_bgcolor:{valType:"color",dflt:s_.background,editType:"plot",description:"Sets the background color of the paper where the graph is drawn."},plot_bgcolor:{valType:"color",dflt:s_.background,editType:"layoutstyle",description:["Sets the background color of the plotting area in-between x and y axes."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","This is the default value; however it could be overridden for individual axes."].join(" ")},separators:{valType:"string",editType:"plot",description:["Sets the decimal and thousand separators.","For example, *. * puts a '.' before decimals and a space","between thousands. In English locales, dflt is *.,* but","other locales may alter this default."].join(" ")},hidesources:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether or not a text link citing the data source is","placed at the bottom-right cored of the figure.","Has only an effect only on graphs that have been generated via","forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise)."].join(" ")},showlegend:{valType:"boolean",editType:"legend",description:["Determines whether or not a legend is drawn.","Default is `true` if there is a trace to show and any of these:","a) Two or more traces would by default be shown in the legend.","b) One pie trace is shown in the legend.","c) One trace is explicitly given with `showlegend: true`."].join(" ")},colorway:{valType:"colorlist",dflt:s_.defaults,editType:"calc",description:"Sets the default trace colors."},datarevision:{valType:"any",editType:"calc",description:["If provided, a changed value tells `Plotly.react` that","one or more data arrays has changed. This way you can modify","arrays in-place rather than making a complete new copy for an","incremental change.","If NOT provided, `Plotly.react` assumes that data arrays are","being treated as immutable, thus any data array with a","different identity from its predecessor contains new data."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Used to allow user interactions with the plot to persist after","`Plotly.react` calls that are unaware of these interactions.","If `uirevision` is omitted, or if it is given and it changed from","the previous `Plotly.react` call, the exact new figure is used.","If `uirevision` is truthy and did NOT change, any attribute","that has been affected by user interactions and did not receive a","different value in the new figure will keep the interaction value.","`layout.uirevision` attribute serves as the default for","`uirevision` attributes in various sub-containers. For finer","control you can set these sub-attributes directly. For example,","if your app separately controls the data on the x and y axes you","might set `xaxis.uirevision=*time*` and `yaxis.uirevision=*cost*`.","Then if only the y data is changed, you can update","`yaxis.uirevision=*quantity*` and the y axis range will reset but","the x axis range will retain any user-driven zoom."].join(" ")},editrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in `editable: true`","configuration, other than trace names and axis titles.","Defaults to `layout.uirevision`."].join(" ")},selectionrevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in selected points","from all traces."].join(" ")},template:{valType:"any",editType:"calc",description:["Default attributes to be applied to the plot. Templates can be","created from existing plots using `Plotly.makeTemplate`, or","created manually. They should be objects with format:","`{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}`","`layoutTemplate` and `traceTemplate` are objects matching the","attribute structure of `layout` and a data trace. ","Trace templates are applied cyclically to traces of each type.","Container arrays (eg `annotations`) have special handling:","An object ending in `defaults` (eg `annotationdefaults`) is applied","to each array item. But if an item has a `templateitemname` key","we look in the template array for an item with matching `name` and","apply that instead. If no matching `name` is found we mark the item","invisible. Any named template item not referenced is appended to","the end of the array, so you can use this for a watermark annotation","or a logo image, for example. To omit one of these items on the plot,","make an item with matching `templateitemname` and `visible: false`."].join(" ")},newshape:uN.newshape,activeshape:uN.activeshape,newselection:fN.newselection,activeselection:fN.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot",description:["Assigns extra meta information that can be used in various `text` attributes.","Attributes such as the graph, axis and colorbar `title.text`, annotation `text`","`trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text","all support `meta`. One can access `meta` fields using template strings:","`%{meta[i]}` where `i` is the index of the `meta`","item in question.","`meta` can also be an object for example `{key: value}` which can be accessed","%{meta[key]}."].join(" ")},transition:cN({},r_e.transition,{description:["Sets transition options used during Plotly.react updates."].join(" "),editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the contents of the title, please use `title.text` now."].join(" ")},titlefont:pz({editType:"layoutstyle",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}};(function(e){var r=cp.exports,n=ZF,i=zoe,s=xy,o=KF.addStyleRule,a=cn,l=Ni,u=Ty,f=a.extendFlat,h=a.extendDeepAll;e.modules={},e.allCategories={},e.allTypes=[],e.subplotsRegistry={},e.transformsRegistry={},e.componentsRegistry={},e.layoutArrayContainers=[],e.layoutArrayRegexes=[],e.traceLayoutAttributes={},e.localeRegistry={},e.apiMethodRegistry={},e.collectableSubplotTypes=null,e.register=t(function(w){if(e.collectableSubplotTypes=null,w)w&&!Array.isArray(w)&&(w=[w]);else throw new Error("No argument passed to Plotly.register.");for(var x=0;x<w.length;x++){var A=w[x];if(!A)throw new Error("Invalid module was attempted to be registered!");switch(A.moduleType){case"trace":v(A);break;case"transform":g(A);break;case"component":d(A);break;case"locale":p(A);break;case"apiMethod":var S=A.name;e.apiMethodRegistry[S]=A.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},"register"),e.getModule=function(M){var w=e.modules[_(M)];return w?w._module:!1},e.traceIs=function(M,w){if(M=_(M),M==="various")return!1;var x=e.modules[M];return x||(M&&r.log("Unrecognized trace type "+M+"."),x=e.modules[l.type.dflt]),!!x.categories[w]},e.getTransformIndices=function(M,w){for(var x=[],A=M.transforms||[],S=0;S<A.length;S++)A[S].type===w&&x.push(S);return x},e.hasTransform=function(M,w){for(var x=M.transforms||[],A=0;A<x.length;A++)if(x[A].type===w)return!0;return!1},e.getComponentMethod=function(M,w){var x=e.componentsRegistry[M];return x&&x[w]||n},e.call=function(){var M=arguments[0],w=[].slice.call(arguments,1);return e.apiMethodRegistry[M].apply(null,w)};function v(M){var w=M.name,x=M.categories,A=M.meta;if(e.modules[w]){r.log("Type "+w+" already registered");return}e.subplotsRegistry[M.basePlotModule.name]||c(M.basePlotModule);for(var S={},k=0;k<x.length;k++)S[x[k]]=!0,e.allCategories[x[k]]=!0;e.modules[w]={_module:M,categories:S},A&&Object.keys(A).length&&(e.modules[w].meta=A),e.allTypes.push(w);for(var L in e.componentsRegistry)m(L,w);M.layoutAttributes&&f(e.traceLayoutAttributes,M.layoutAttributes);var P=M.basePlotModule,D=P.name;if(D==="mapbox"){var B=P.constants.styleRules;for(var z in B)o(".js-plotly-plot .plotly .mapboxgl-"+z,B[z])}(D==="geo"||D==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}t(v,"registerTraceModule");function c(M){var w=M.name;if(e.subplotsRegistry[w]){r.log("Plot type "+w+" already registered.");return}b(M),e.subplotsRegistry[w]=M;for(var x in e.componentsRegistry)T(x,M.name)}t(c,"registerSubplot");function d(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var w=M.name;e.componentsRegistry[w]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&i(e.layoutArrayContainers,w),b(M));for(var x in e.modules)m(w,x);for(var A in e.subplotsRegistry)T(w,A);for(var S in e.transformsRegistry)y(w,S);M.schema&&M.schema.layout&&h(u,M.schema.layout)}t(d,"registerComponentModule");function g(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+M.name,x=typeof M.transform=="function",A=typeof M.calcTransform=="function";if(!x&&!A)throw new Error(w+" is missing a *transform* or *calcTransform* method.");x&&A&&r.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),s(M.attributes)||r.log(w+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&r.log(w+" registered without a *supplyDefaults* method."),e.transformsRegistry[M.name]=M;for(var S in e.componentsRegistry)y(S,M.name)}t(g,"registerTransformModule");function p(M){var w=M.name,x=w.split("-")[0],A=M.dictionary,S=M.format,k=A&&Object.keys(A).length,L=S&&Object.keys(S).length,P=e.localeRegistry,D=P[w];if(D||(P[w]=D={}),x!==w){var B=P[x];B||(P[x]=B={}),k&&B.dictionary===D.dictionary&&(B.dictionary=A),L&&B.format===D.format&&(B.format=S)}k&&(D.dictionary=A),L&&(D.format=S)}t(p,"registerLocale");function b(M){if(M.layoutAttributes){var w=M.layoutAttributes._arrayAttrRegexps;if(w)for(var x=0;x<w.length;x++)i(e.layoutArrayRegexes,w[x])}}t(b,"findArrayRegexps");function m(M,w){var x=e.componentsRegistry[M].schema;if(!(!x||!x.traces)){var A=x.traces[w];A&&h(e.modules[w]._module.attributes,A)}}t(m,"mergeComponentAttrsToTrace");function y(M,w){var x=e.componentsRegistry[M].schema;if(!(!x||!x.transforms)){var A=x.transforms[w];A&&h(e.transformsRegistry[w].attributes,A)}}t(y,"mergeComponentAttrsToTransform");function T(M,w){var x=e.componentsRegistry[M].schema;if(!(!x||!x.subplots)){var A=e.subplotsRegistry[w],S=A.layoutAttributes,k=A.attr==="subplot"?A.name:A.attr;Array.isArray(k)&&(k=k[0]);var L=x.subplots[k];S&&L&&h(S,L)}}t(T,"mergeComponentAttrsToSubplot");function _(M){return typeof M=="object"&&(M=M.type),M}t(_,"getTraceType")})(Na);(function(e){var r=w1.timeFormat,n=xn,i=cp.exports,s=Y1.mod,o=jn,a=o.BADNUM,l=o.ONEDAY,u=o.ONEHOUR,f=o.ONEMIN,h=o.ONESEC,v=o.EPOCHJD,c=Na,d=w1.utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=new Date().getFullYear()-70;function m(F){return F&&c.componentsRegistry.calendars&&typeof F=="string"&&F!=="gregorian"}t(m,"isWorldCalendar"),e.dateTick0=function(F,O){var q=y(F,!!O);if(O<2)return q;var H=e.dateTime2ms(q,F);return H+=l*(O-1),e.ms2DateTime(H,0,F)};function y(F,O){return m(F)?O?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[F]:c.getComponentMethod("calendars","CANONICAL_TICK")[F]:O?"2000-01-02":"2000-01-01"}t(y,"_dateTick0"),e.dfltRange=function(F){return m(F)?c.getComponentMethod("calendars","DFLTRANGE")[F]:["2000-01-01","2001-01-01"]},e.isJSDate=function(F){return typeof F=="object"&&F!==null&&typeof F.getTime=="function"};var T,_;e.dateTime2ms=function(F,O){if(e.isJSDate(F)){var q=F.getTimezoneOffset()*f,H=(F.getUTCMinutes()-F.getMinutes())*f+(F.getUTCSeconds()-F.getSeconds())*h+(F.getUTCMilliseconds()-F.getMilliseconds());if(H){var j=3*f;q=q-j/2+s(H-q+j/2,j)}return F=Number(F)-q,F>=T&&F<=_?F:a}if(typeof F!="string"&&typeof F!="number")return a;F=String(F);var X=m(O),G=F.charAt(0);X&&(G==="G"||G==="g")&&(F=F.substr(1),O="");var $=X&&O.substr(0,7)==="chinese",te=F.match($?p:g);if(!te)return a;var ee=te[1],ie=te[3]||"1",se=Number(te[5]||1),W=Number(te[7]||0),ne=Number(te[9]||0),he=Number(te[11]||0);if(X){if(ee.length===2)return a;ee=Number(ee);var re;try{var ae=c.getComponentMethod("calendars","getCal")(O);if($){var fe=ie.charAt(ie.length-1)==="i";ie=parseInt(ie,10),re=ae.newDate(ee,ae.toMonthIndex(ee,ie,fe),se)}else re=ae.newDate(ee,Number(ie),se)}catch{return a}return re?(re.toJD()-v)*l+W*u+ne*f+he*h:a}ee.length===2?ee=(Number(ee)+2e3-b)%100+b:ee=Number(ee),ie-=1;var ce=new Date(Date.UTC(2e3,ie,se,W,ne));return ce.setUTCFullYear(ee),ce.getUTCMonth()!==ie||ce.getUTCDate()!==se?a:ce.getTime()+he*h},T=e.MIN_MS=e.dateTime2ms("-9999"),_=e.MAX_MS=e.dateTime2ms("9999-12-31 23:59:59.9999"),e.isDateTime=function(F,O){return e.dateTime2ms(F,O)!==a};function M(F,O){return String(F+Math.pow(10,O)).substr(1)}t(M,"lpad");var w=90*l,x=3*u,A=5*f;e.ms2DateTime=function(F,O,q){if(typeof F!="number"||!(F>=T&&F<=_))return a;O||(O=0);var H=Math.floor(s(F+.05,1)*10),j=Math.round(F-H/10),X,G,$,te,ee,ie;if(m(q)){var se=Math.floor(j/l)+v,W=Math.floor(s(F,l));try{X=c.getComponentMethod("calendars","getCal")(q).fromJD(se).formatDate("yyyy-mm-dd")}catch{X=d("G%Y-%m-%d")(new Date(j))}if(X.charAt(0)==="-")for(;X.length<11;)X="-0"+X.substr(1);else for(;X.length<10;)X="0"+X;G=O<w?Math.floor(W/u):0,$=O<w?Math.floor(W%u/f):0,te=O<x?Math.floor(W%f/h):0,ee=O<A?W%h*10+H:0}else ie=new Date(j),X=d("%Y-%m-%d")(ie),G=O<w?ie.getUTCHours():0,$=O<w?ie.getUTCMinutes():0,te=O<x?ie.getUTCSeconds():0,ee=O<A?ie.getUTCMilliseconds()*10+H:0;return S(X,G,$,te,ee)},e.ms2DateTimeLocal=function(F){if(!(F>=T+l&&F<=_-l))return a;var O=Math.floor(s(F+.05,1)*10),q=new Date(Math.round(F-O/10)),H=r("%Y-%m-%d")(q),j=q.getHours(),X=q.getMinutes(),G=q.getSeconds(),$=q.getUTCMilliseconds()*10+O;return S(H,j,X,G,$)};function S(F,O,q,H,j){if((O||q||H||j)&&(F+=" "+M(O,2)+":"+M(q,2),(H||j)&&(F+=":"+M(H,2),j))){for(var X=4;j%10===0;)X-=1,j/=10;F+="."+M(j,X)}return F}t(S,"includeTime"),e.cleanDate=function(F,O,q){if(F===a)return O;if(e.isJSDate(F)||typeof F=="number"&&isFinite(F)){if(m(q))return i.error("JS Dates and milliseconds are incompatible with world calendars",F),O;if(F=e.ms2DateTimeLocal(+F),!F&&O!==void 0)return O}else if(!e.isDateTime(F,q))return i.error("unrecognized date",F),O;return F};var k=/%\d?f/g,L=/%h/g,P={1:"1",2:"1",3:"2",4:"2"};function D(F,O,q,H){F=F.replace(k,function(X){var G=Math.min(+X.charAt(1)||6,6),$=(O/1e3%1+2).toFixed(G).substr(2).replace(/0+$/,"")||"0";return $});var j=new Date(Math.floor(O+.05));if(F=F.replace(L,function(){return P[q("%q")(j)]}),m(H))try{F=c.getComponentMethod("calendars","worldCalFmt")(F,O,H)}catch{return"Invalid"}return q(F)(j)}t(D,"modDateFormat");var B=[59,59.9,59.99,59.999,59.9999];function z(F,O){var q=s(F+.05,l),H=M(Math.floor(q/u),2)+":"+M(s(Math.floor(q/f),60),2);if(O!=="M"){n(O)||(O=0);var j=Math.min(s(F/h,60),B[O]),X=(100+j).toFixed(O).substr(1);O>0&&(X=X.replace(/0+$/,"").replace(/[\.]$/,"")),H+=":"+X}return H}t(z,"formatTime"),e.formatDate=function(F,O,q,H,j,X){if(j=m(j)&&j,!O)if(q==="y")O=X.year;else if(q==="m")O=X.month;else if(q==="d")O=X.dayMonth+`
`+X.year;else return z(F,q)+`
`+D(X.dayMonthYear,F,H,j);return D(O,F,H,j)};var R=3*l;e.incrementMonth=function(F,O,q){q=m(q)&&q;var H=s(F,l);if(F=Math.round(F-H),q)try{var j=Math.round(F/l)+v,X=c.getComponentMethod("calendars","getCal")(q),G=X.fromJD(j);return O%12?X.add(G,O,"m"):X.add(G,O/12,"y"),(G.toJD()-v)*l+H}catch{i.error("invalid ms "+F+" in calendar "+q)}var $=new Date(F+R);return $.setUTCMonth($.getUTCMonth()+O)+H-R},e.findExactDates=function(F,O){for(var q=0,H=0,j=0,X=0,G,$,te=m(O)&&c.getComponentMethod("calendars","getCal")(O),ee=0;ee<F.length;ee++){if($=F[ee],!n($)){X++;continue}if(!($%l))if(te)try{G=te.fromJD($/l+v),G.day()===1?G.month()===1?q++:H++:j++}catch{}else G=new Date($),G.getUTCDate()===1?G.getUTCMonth()===0?q++:H++:j++}H+=q,j+=H;var ie=F.length-X;return{exactYears:q/ie,exactMonths:H/ie,exactDays:j/ie}}})(Loe);var aw={},nw=t(function(r){return r},"identity");(function(e){var r=xn,n=cp.exports,i=nw,s=jn.BADNUM,o=1e-9;e.findBin=function(h,v,c){if(r(v.start))return c?Math.ceil((h-v.start)/v.size-o)-1:Math.floor((h-v.start)/v.size+o);var d=0,g=v.length,p=0,b=g>1?(v[g-1]-v[0])/(g-1):1,m,y;for(b>=0?y=c?a:l:y=c?f:u,h+=b*o*(c?-1:1)*(b>=0?1:-1);d<g&&p++<100;)m=Math.floor((d+g)/2),y(v[m],h)?d=m+1:g=m;return p>90&&n.log("Long binary search..."),d-1};function a(h,v){return h<v}t(a,"lessThan");function l(h,v){return h<=v}t(l,"lessOrEqual");function u(h,v){return h>v}t(u,"greaterThan");function f(h,v){return h>=v}t(f,"greaterOrEqual"),e.sorterAsc=function(h,v){return h-v},e.sorterDes=function(h,v){return v-h},e.distinctVals=function(h){var v=h.slice();v.sort(e.sorterAsc);var c;for(c=v.length-1;c>-1&&v[c]===s;c--);for(var d=v[c]-v[0]||1,g=d/(c||1)/1e4,p=[],b,m=0;m<=c;m++){var y=v[m],T=y-b;b===void 0?(p.push(y),b=y):T>g&&(d=Math.min(d,T),p.push(y),b=y)}return{vals:p,minDiff:d}},e.roundUp=function(h,v,c){for(var d=0,g=v.length-1,p,b=0,m=c?0:1,y=c?1:0,T=c?Math.ceil:Math.floor;d<g&&b++<100;)p=T((d+g)/2),v[p]<=h?d=p+m:g=p-y;return v[d]},e.sort=function(h,v){for(var c=0,d=0,g=1;g<h.length;g++){var p=v(h[g],h[g-1]);if(p<0?c=1:p>0&&(d=1),c&&d)return h.sort(v)}return d?h:h.reverse()},e.findIndexOfMin=function(h,v){v=v||i;for(var c=1/0,d,g=0;g<h.length;g++){var p=v(h[g]);p<c&&(c=p,d=g)}return d}})(aw);var Ay=t(function(r){return Object.keys(r).sort()},"sortObjectKeys"),$oe={};(function(e){var r=xn,n=Cf.isArrayOrTypedArray;e.aggNums=function(i,s,o,a){var l,u;if((!a||a>o.length)&&(a=o.length),r(s)||(s=!1),n(o[0])){for(u=new Array(a),l=0;l<a;l++)u[l]=e.aggNums(i,s,o[l]);o=u}for(l=0;l<a;l++)r(s)?r(o[l])&&(s=i(+s,+o[l])):s=o[l];return s},e.len=function(i){return e.aggNums(function(s){return s+1},0,i)},e.mean=function(i,s){return s||(s=e.len(i)),e.aggNums(function(o,a){return o+a},0,i)/s},e.midRange=function(i){if(!(i===void 0||i.length===0))return(e.aggNums(Math.max,null,i)+e.aggNums(Math.min,null,i))/2},e.variance=function(i,s,o){return s||(s=e.len(i)),r(o)||(o=e.mean(i,s)),e.aggNums(function(a,l){return a+Math.pow(l-o,2)},0,i)/s},e.stdev=function(i,s,o){return Math.sqrt(e.variance(i,s,o))},e.median=function(i){var s=i.slice().sort();return e.interp(s,.5)},e.interp=function(i,s){if(!r(s))throw"n should be a finite number";if(s=s*i.length-.5,s<0)return i[0];if(s>i.length-1)return i[i.length-1];var o=s%1;return o*i[Math.ceil(s)]+(1-o)*i[Math.floor(s)]}})($oe);var Voe=Y1,fT=Voe.mod,n_e=Voe.modHalf,T1=Math.PI,ep=2*T1;function i_e(e){return e/180*T1}t(i_e,"deg2rad$1");function o_e(e){return e/T1*180}t(o_e,"rad2deg$1");function QF(e){return Math.abs(e[1]-e[0])>ep-1e-14}t(QF,"isFullCircle");function Goe(e,r){return n_e(r-e,ep)}t(Goe,"angleDelta");function s_e(e,r){return Math.abs(Goe(e,r))}t(s_e,"angleDist");function joe(e,r){if(QF(r))return!0;var n,i;r[0]<r[1]?(n=r[0],i=r[1]):(n=r[1],i=r[0]),n=fT(n,ep),i=fT(i,ep),n>i&&(i+=ep);var s=fT(e,ep),o=s+ep;return s>=n&&s<=i||o>=n&&o<=i}t(joe,"isAngleInsideSector");function l_e(e,r,n,i){if(!joe(r,i))return!1;var s,o;return n[0]<n[1]?(s=n[0],o=n[1]):(s=n[1],o=n[0]),e>=s&&e<=o}t(l_e,"isPtInsideSector");function e8(e,r,n,i,s,o,a){s=s||0,o=o||0;var l=QF([n,i]),u,f,h,v,c;l?(u=0,f=T1,h=ep):n<i?(u=n,h=i):(u=i,h=n),e<r?(v=e,c=r):(v=r,c=e);function d(m,y){return[m*Math.cos(y)+s,o-m*Math.sin(y)]}t(d,"pt");var g=Math.abs(h-u)<=T1?0:1;function p(m,y,T){return"A"+[m,m]+" "+[0,g,T]+" "+d(m,y)}t(p,"arc");var b;return l?v===null?b="M"+d(c,u)+p(c,f,0)+p(c,h,0)+"Z":b="M"+d(v,u)+p(v,f,0)+p(v,h,0)+"ZM"+d(c,u)+p(c,f,1)+p(c,h,1)+"Z":v===null?(b="M"+d(c,u)+p(c,h,0),a&&(b+="L0,0Z")):b="M"+d(v,u)+"L"+d(c,u)+p(c,h,0)+"L"+d(v,h)+p(v,u,1)+"Z",b}t(e8,"_path");function u_e(e,r,n,i,s){return e8(null,e,r,n,i,s,0)}t(u_e,"pathArc");function f_e(e,r,n,i,s){return e8(null,e,r,n,i,s,1)}t(f_e,"pathSector");function c_e(e,r,n,i,s,o){return e8(e,r,n,i,s,o,1)}t(c_e,"pathAnnulus");var h_e={deg2rad:i_e,rad2deg:o_e,angleDelta:Goe,angleDist:s_e,isFullCircle:QF,isAngleInsideSector:joe,isPtInsideSector:l_e,pathArc:u_e,pathSector:f_e,pathAnnulus:c_e},S0={};S0.isLeftAnchor=t(function(r){return r.xanchor==="left"||r.xanchor==="auto"&&r.x<=1/3},"isLeftAnchor");S0.isCenterAnchor=t(function(r){return r.xanchor==="center"||r.xanchor==="auto"&&r.x>1/3&&r.x<2/3},"isCenterAnchor");S0.isRightAnchor=t(function(r){return r.xanchor==="right"||r.xanchor==="auto"&&r.x>=2/3},"isRightAnchor");S0.isTopAnchor=t(function(r){return r.yanchor==="top"||r.yanchor==="auto"&&r.y>=2/3},"isTopAnchor");S0.isMiddleAnchor=t(function(r){return r.yanchor==="middle"||r.yanchor==="auto"&&r.y>1/3&&r.y<2/3},"isMiddleAnchor");S0.isBottomAnchor=t(function(r){return r.yanchor==="bottom"||r.yanchor==="auto"&&r.y<=1/3},"isBottomAnchor");var M0={},cT=Y1.mod;M0.segmentsIntersect=Yoe;function Yoe(e,r,n,i,s,o,a,l){var u=n-e,f=s-e,h=a-s,v=i-r,c=o-r,d=l-o,g=u*d-h*v;if(g===0)return null;var p=(f*d-h*c)/g,b=(f*v-u*c)/g;return b<0||b>1||p<0||p>1?null:{x:e+u*p,y:r+v*p}}t(Yoe,"segmentsIntersect$1");M0.segmentDistance=t(function(r,n,i,s,o,a,l,u){if(Yoe(r,n,i,s,o,a,l,u))return 0;var f=i-r,h=s-n,v=l-o,c=u-a,d=f*f+h*h,g=v*v+c*c,p=Math.min(rb(f,h,d,o-r,a-n),rb(f,h,d,l-r,u-n),rb(v,c,g,r-o,n-a),rb(v,c,g,i-o,s-a));return Math.sqrt(p)},"segmentDistance");function rb(e,r,n,i,s){var o=i*e+s*r;if(o<0)return i*i+s*s;if(o>n){var a=i-e,l=s-r;return a*a+l*l}else{var u=i*r-s*e;return u*u/n}}t(rb,"perpDistance2");var ab,gz,hN;M0.getTextLocation=t(function(r,n,i,s){if((r!==gz||s!==hN)&&(ab={},gz=r,hN=s),ab[i])return ab[i];var o=r.getPointAtLength(cT(i-s/2,n)),a=r.getPointAtLength(cT(i+s/2,n)),l=Math.atan((a.y-o.y)/(a.x-o.x)),u=r.getPointAtLength(cT(i,n)),f=(u.x*4+o.x+a.x)/6,h=(u.y*4+o.y+a.y)/6,v={x:f,y:h,theta:l};return ab[i]=v,v},"getTextLocation");M0.clearLocationCache=function(){gz=null};M0.getVisibleSegment=t(function(r,n,i){var s=n.left,o=n.right,a=n.top,l=n.bottom,u=0,f=r.getTotalLength(),h=f,v,c;function d(p){var b=r.getPointAtLength(p);p===0?v=b:p===f&&(c=b);var m=b.x<s?s-b.x:b.x>o?b.x-o:0,y=b.y<a?a-b.y:b.y>l?b.y-l:0;return Math.sqrt(m*m+y*y)}t(d,"getDistToPlot");for(var g=d(u);g;){if(u+=g+i,u>h)return;g=d(u)}for(g=d(h);g;){if(h-=g+i,u>h)return;g=d(h)}return{min:u,max:h,len:h-u,total:f,isClosed:u===0&&h===f&&Math.abs(v.x-c.x)<.1&&Math.abs(v.y-c.y)<.1}},"getVisibleSegment");M0.findPointOnPath=t(function(r,n,i,s){s=s||{};for(var o=s.pathLength||r.getTotalLength(),a=s.tolerance||.001,l=s.iterationLimit||30,u=r.getPointAtLength(0)[i]>r.getPointAtLength(o)[i]?-1:1,f=0,h=0,v=o,c,d,g;f<l;){if(c=(h+v)/2,d=r.getPointAtLength(c),g=d[i]-n,Math.abs(g)<a)return d;u*g>0?v=c:h=c,f++}return d},"findPointOnPath");var iw={};(function(e){var r={};e.throttle=t(function(s,o,a){var l=r[s],u=Date.now();if(!l){for(var f in r)r[f].ts<u-6e4&&delete r[f];l=r[s]={ts:0,timer:null}}n(l);function h(){a(),l.ts=Date.now(),l.onDone&&(l.onDone(),l.onDone=null)}if(t(h,"exec"),u>l.ts+o){h();return}l.timer=setTimeout(function(){h(),l.timer=null},o)},"throttle"),e.done=function(i){var s=r[i];return!s||!s.timer?Promise.resolve():new Promise(function(o){var a=s.onDone;s.onDone=t(function(){a&&a(),o(),s.onDone=null},"onDone")})},e.clear=function(i){if(i)n(r[i]),delete r[i];else for(var s in r)e.clear(s)};function n(i){i&&i.timer!==null&&(clearTimeout(i.timer),i.timer=null)}t(n,"_clearTimeout")})(iw);var v_e=t(function(r){r._responsiveChartHandler&&(window.removeEventListener("resize",r._responsiveChartHandler),delete r._responsiveChartHandler)},"clearResponsive"),ow={exports:{}};ow.exports=t8;ow.exports.isMobile=t8;ow.exports.default=t8;var d_e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,p_e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function t8(e){e||(e={});var r=e.ua;if(!r&&typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var n=e.tablet?p_e.test(r):d_e.test(r);return!n&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(n=!0),n}t(t8,"isMobile");var g_e=xn,y_e=ow.exports,m_e=t(function(r){var n;if(r&&r.hasOwnProperty("userAgent")?n=r.userAgent:n=x_e(),typeof n!="string")return!0;var i=y_e({ua:{headers:{"user-agent":n}},tablet:!0,featureDetect:!1});if(!i)for(var s=n.split(" "),o=1;o<s.length;o++){var a=s[o];if(a.indexOf("Safari")!==-1)for(var l=o-1;l>-1;l--){var u=s[l];if(u.substr(0,8)==="Version/"){var f=u.substr(8).split(".")[0];if(g_e(f)&&(f=+f),f>=13)return!0}}}return i},"preserveDrawingBuffer");function x_e(){var e;return typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),e}t(x_e,"getUserAgent");var b_e=Va.exports,__e=t(function(r,n,i){var s=r.selectAll("g."+i.replace(/\s/g,".")).data(n,function(a){return a[0].trace.uid});s.exit().remove(),s.enter().append("g").attr("class",i),s.order();var o=r.classed("rangeplot")?"nodeRangePlot3":"node3";return s.each(function(a){a[0][o]=b_e.select(this)}),s},"makeTraceGroups"),w_e=Na,T_e=t(function(r,n){for(var i=r._context.locale,s=0;s<2;s++){for(var o=r._context.locales,a=0;a<2;a++){var l=(o[i]||{}).dictionary;if(l){var u=l[n];if(u)return u}o=w_e.localeRegistry}var f=i.split("-")[0];if(f===i)break;i=f}return n},"localize"),Woe=t(function(r){for(var n={},i=[],s=0,o=0;o<r.length;o++){var a=r[o];n[a]!==1&&(n[a]=1,i[s++]=a)}return i},"filterUnique"),A_e=t(function(r){for(var n=k_e(r)?M_e:S_e,i=[],s=0;s<r.length;s++){var o=r[s];n(o)&&i.push(o)}return i},"filterVisible");function S_e(e){return e.visible===!0}t(S_e,"baseFilter");function M_e(e){var r=e[0].trace;return r.visible===!0&&r._length!==0}t(M_e,"calcDataFilter");function k_e(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}t(k_e,"isCalcData");var E_e=t(function(r,n){if(!n)return r;var i=1/Math.abs(n),s=i>1?(i*r+i*n)/i:r+n,o=String(s).length;if(o>16){var a=String(n).length,l=String(r).length;if(o>=l+a){var u=parseFloat(s).toPrecision(12);u.indexOf("e+")===-1&&(s=+u)}}return s},"incrementNumeric"),C_e=xn,L_e=jn.BADNUM,R_e=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,P_e=t(function(r){return typeof r=="string"&&(r=r.replace(R_e,"")),C_e(r)?Number(r):L_e},"cleanNumber"),Wm=Va.exports,D_e=w1.utcFormat,I_e=moe.format,Xoe=xn,Zoe=jn,Koe=Zoe.FP_SAFE,z_e=-Koe,vN=Zoe.BADNUM,sr=Nt.exports={};sr.adjustFormat=t(function(r){return!r||/^\d[.]\df/.test(r)||/[.]\d%/.test(r)?r:r==="0.f"?"~f":/^\d%/.test(r)?"~%":/^\ds/.test(r)?"~s":!/^[~,.0$]/.test(r)&&/[&fps]/.test(r)?"~"+r:r},"adjustFormat");var dN={};sr.warnBadFormat=function(e){var r=String(e);dN[r]||(dN[r]=1,sr.warn('encountered bad format: "'+r+'"'))};sr.noFormat=function(e){return String(e)};sr.numberFormat=function(e){var r;try{r=I_e(sr.adjustFormat(e))}catch{return sr.warnBadFormat(e),sr.noFormat}return r};sr.nestedProperty=Z2;sr.keyedContainer=yxe;sr.relativeAttr=bxe;sr.isPlainObject=xy;sr.toLogRange=jF;sr.relinkPrivateKeys=wxe;var k0=Cf;sr.isTypedArray=k0.isTypedArray;sr.isArrayOrTypedArray=k0.isArrayOrTypedArray;sr.isArray1D=k0.isArray1D;sr.ensureArray=k0.ensureArray;sr.concat=k0.concat;sr.maxRowLength=k0.maxRowLength;sr.minRowLength=k0.minRowLength;var Joe=Y1;sr.mod=Joe.mod;sr.modHalf=Joe.modHalf;var hp=Soe;sr.valObjectMeta=hp.valObjectMeta;sr.coerce=hp.coerce;sr.coerce2=hp.coerce2;sr.coerceFont=hp.coerceFont;sr.coercePattern=hp.coercePattern;sr.coerceHoverinfo=hp.coerceHoverinfo;sr.coerceSelectionMarkerOpacity=hp.coerceSelectionMarkerOpacity;sr.validate=hp.validate;var nc=Loe;sr.dateTime2ms=nc.dateTime2ms;sr.isDateTime=nc.isDateTime;sr.ms2DateTime=nc.ms2DateTime;sr.ms2DateTimeLocal=nc.ms2DateTimeLocal;sr.cleanDate=nc.cleanDate;sr.isJSDate=nc.isJSDate;sr.formatDate=nc.formatDate;sr.incrementMonth=nc.incrementMonth;sr.dateTick0=nc.dateTick0;sr.dfltRange=nc.dfltRange;sr.findExactDates=nc.findExactDates;sr.MIN_MS=nc.MIN_MS;sr.MAX_MS=nc.MAX_MS;var E0=aw;sr.findBin=E0.findBin;sr.sorterAsc=E0.sorterAsc;sr.sorterDes=E0.sorterDes;sr.distinctVals=E0.distinctVals;sr.roundUp=E0.roundUp;sr.sort=E0.sort;sr.findIndexOfMin=E0.findIndexOfMin;sr.sortObjectKeys=Ay;var vp=$oe;sr.aggNums=vp.aggNums;sr.len=vp.len;sr.mean=vp.mean;sr.median=vp.median;sr.midRange=vp.midRange;sr.variance=vp.variance;sr.stdev=vp.stdev;sr.interp=vp.interp;var Ch=ew;sr.init2dArray=Ch.init2dArray;sr.transposeRagged=Ch.transposeRagged;sr.dot=Ch.dot;sr.translationMatrix=Ch.translationMatrix;sr.rotationMatrix=Ch.rotationMatrix;sr.rotationXYMatrix=Ch.rotationXYMatrix;sr.apply3DTransform=Ch.apply3DTransform;sr.apply2DTransform=Ch.apply2DTransform;sr.apply2DTransform2=Ch.apply2DTransform2;sr.convertCssMatrix=Ch.convertCssMatrix;sr.inverseTransformMatrix=Ch.inverseTransformMatrix;var vv=h_e;sr.deg2rad=vv.deg2rad;sr.rad2deg=vv.rad2deg;sr.angleDelta=vv.angleDelta;sr.angleDist=vv.angleDist;sr.isFullCircle=vv.isFullCircle;sr.isAngleInsideSector=vv.isAngleInsideSector;sr.isPtInsideSector=vv.isPtInsideSector;sr.pathArc=vv.pathArc;sr.pathSector=vv.pathSector;sr.pathAnnulus=vv.pathAnnulus;var Sy=S0;sr.isLeftAnchor=Sy.isLeftAnchor;sr.isCenterAnchor=Sy.isCenterAnchor;sr.isRightAnchor=Sy.isRightAnchor;sr.isTopAnchor=Sy.isTopAnchor;sr.isMiddleAnchor=Sy.isMiddleAnchor;sr.isBottomAnchor=Sy.isBottomAnchor;var My=M0;sr.segmentsIntersect=My.segmentsIntersect;sr.segmentDistance=My.segmentDistance;sr.getTextLocation=My.getTextLocation;sr.clearLocationCache=My.clearLocationCache;sr.getVisibleSegment=My.getVisibleSegment;sr.findPointOnPath=My.findPointOnPath;var sw=cn;sr.extendFlat=sw.extendFlat;sr.extendDeep=sw.extendDeep;sr.extendDeepAll=sw.extendDeepAll;sr.extendDeepNoArrays=sw.extendDeepNoArrays;var r8=cp.exports;sr.log=r8.log;sr.warn=r8.warn;sr.error=r8.error;var F_e=_y;sr.counterRegex=F_e.counter;var a8=iw;sr.throttle=a8.throttle;sr.throttleDone=a8.done;sr.clearThrottle=a8.clear;var dv=KF;sr.getGraphDiv=dv.getGraphDiv;sr.isPlotDiv=dv.isPlotDiv;sr.removeElement=dv.removeElement;sr.addStyleRule=dv.addStyleRule;sr.addRelatedStyleRule=dv.addRelatedStyleRule;sr.deleteRelatedStyleRule=dv.deleteRelatedStyleRule;sr.getFullTransformMatrix=dv.getFullTransformMatrix;sr.getElementTransformMatrix=dv.getElementTransformMatrix;sr.getElementAndAncestors=dv.getElementAndAncestors;sr.equalDomRects=dv.equalDomRects;sr.clearResponsive=v_e;sr.preserveDrawingBuffer=m_e;sr.makeTraceGroups=__e;sr._=T_e;sr.notifier=Ioe;sr.filterUnique=Woe;sr.filterVisible=A_e;sr.pushUnique=zoe;sr.increment=E_e;sr.cleanNumber=P_e;sr.ensureNumber=t(function(r){return Xoe(r)?(r=Number(r),r>Koe||r<z_e?vN:r):vN},"ensureNumber");sr.isIndex=function(e,r){return r!==void 0&&e>=r?!1:Xoe(e)&&e>=0&&e%1===0};sr.noop=ZF;sr.identity=nw;sr.repeat=function(e,r){for(var n=new Array(r),i=0;i<r;i++)n[i]=e;return n};sr.swapAttrs=function(e,r,n,i){n||(n="x"),i||(i="y");for(var s=0;s<r.length;s++){var o=r[s],a=sr.nestedProperty(e,o.replace("?",n)),l=sr.nestedProperty(e,o.replace("?",i)),u=a.get();a.set(l.get()),l.set(u)}};sr.raiseToTop=t(function(r){r.parentNode.appendChild(r)},"raiseToTop");sr.cancelTransition=function(e){return e.transition().duration(0)};sr.constrain=function(e,r,n){return r>n?Math.max(n,Math.min(r,e)):Math.max(r,Math.min(n,e))};sr.bBoxIntersect=function(e,r,n){return n=n||0,e.left<=r.right+n&&r.left<=e.right+n&&e.top<=r.bottom+n&&r.top<=e.bottom+n};sr.simpleMap=function(e,r,n,i,s){for(var o=e.length,a=new Array(o),l=0;l<o;l++)a[l]=r(e[l],n,i,s);return a};sr.randstr=t(function e(r,n,i,s){if(i||(i=16),n===void 0&&(n=24),n<=0)return"0";var o=Math.log(Math.pow(2,n))/Math.log(i),a="",l,u,f;for(l=2;o===1/0;l*=2)o=Math.log(Math.pow(2,n/l))/Math.log(i)*l;var h=o-Math.floor(o);for(l=0;l<Math.floor(o);l++)f=Math.floor(Math.random()*i).toString(i),a=f+a;h&&(u=Math.pow(i,h),f=Math.floor(Math.random()*u).toString(i),a=f+a);var v=parseInt(a,i);return r&&r[a]||v!==1/0&&v>=Math.pow(2,n)?s>10?(sr.warn("randstr failed uniqueness"),a):e(r,n,i,(s||0)+1):a},"randstr");sr.OptionControl=function(e,r){e||(e={}),r||(r="opt");var n={};return n.optionList=[],n._newoption=function(i){i[r]=e,n[i.name]=i,n.optionList.push(i)},n["_"+r]=e,n};sr.smooth=function(e,r){if(r=Math.round(r)||0,r<2)return e;var n=e.length,i=2*n,s=2*r-1,o=new Array(s),a=new Array(n),l,u,f,h;for(l=0;l<s;l++)o[l]=(1-Math.cos(Math.PI*(l+1)/r))/(2*r);for(l=0;l<n;l++){for(h=0,u=0;u<s;u++)f=l+u+1-r,f<-n?f-=i*Math.round(f/i):f>=i&&(f-=i*Math.floor(f/i)),f<0?f=-1-f:f>=n&&(f=i-1-f),h+=e[f]*o[u];a[l]=h}return a};sr.syncOrAsync=function(e,r,n){var i,s;function o(){return sr.syncOrAsync(e,r,n)}for(t(o,"continueAsync");e.length;)if(s=e.splice(0,1)[0],i=s(r),i&&i.then)return i.then(o);return n&&n(r)};sr.stripTrailingSlash=function(e){return e.substr(-1)==="/"?e.substr(0,e.length-1):e};sr.noneOrAll=function(e,r,n){if(!!e){var i=!1,s=!0,o,a;for(o=0;o<n.length;o++)a=e[n[o]],a!=null?i=!0:s=!1;if(i&&!s)for(o=0;o<n.length;o++)e[n[o]]=r[n[o]]}};sr.mergeArray=function(e,r,n,i){var s=typeof i=="function";if(sr.isArrayOrTypedArray(e))for(var o=Math.min(e.length,r.length),a=0;a<o;a++){var l=e[a];r[a][n]=s?i(l):l}};sr.mergeArrayCastPositive=function(e,r,n){return sr.mergeArray(e,r,n,function(i){var s=+i;return isFinite(s)&&s>0?s:0})};sr.fillArray=function(e,r,n,i){if(i=i||sr.identity,sr.isArrayOrTypedArray(e))for(var s=0;s<r.length;s++)r[s][n]=i(e[s])};sr.castOption=function(e,r,n,i){i=i||sr.identity;var s=sr.nestedProperty(e,n).get();return sr.isArrayOrTypedArray(s)?Array.isArray(r)&&sr.isArrayOrTypedArray(s[r[0]])?i(s[r[0]][r[1]]):i(s[r]):s};sr.extractOption=function(e,r,n,i){if(n in e)return e[n];var s=sr.nestedProperty(r,i).get();if(!Array.isArray(s))return s};function Qoe(e){var r={};for(var n in e)for(var i=e[n],s=0;s<i.length;s++)r[i[s]]=+n;return r}t(Qoe,"makePtIndex2PtNumber");sr.tagSelected=function(e,r,n){var i=r.selectedpoints,s=r._indexToPoints,o;s&&(o=Qoe(s));function a(v){return v!==void 0&&v<e.length}t(a,"isCdIndexValid");for(var l=0;l<i.length;l++){var u=i[l];if(sr.isIndex(u)||sr.isArrayOrTypedArray(u)&&sr.isIndex(u[0])&&sr.isIndex(u[1])){var f=o?o[u]:u,h=n?n[f]:f;a(h)&&(e[h].selected=1)}}};sr.selIndices2selPoints=function(e){var r=e.selectedpoints,n=e._indexToPoints;if(n){for(var i=Qoe(n),s=[],o=0;o<r.length;o++){var a=r[o];if(sr.isIndex(a)){var l=i[a];sr.isIndex(l)&&s.push(l)}}return s}else return r};sr.getTargetArray=function(e,r){var n=r.target;if(typeof n=="string"&&n){var i=sr.nestedProperty(e,n).get();return Array.isArray(i)?i:!1}else if(Array.isArray(n))return n;return!1};sr.minExtend=function(e,r){var n={};typeof r!="object"&&(r={});var i=3,s=Object.keys(e),o,a,l;for(o=0;o<s.length;o++)a=s[o],l=e[a],!(a.charAt(0)==="_"||typeof l=="function")&&(a==="module"?n[a]=l:Array.isArray(l)?a==="colorscale"?n[a]=l.slice():n[a]=l.slice(0,i):sr.isTypedArray(l)?n[a]=l.subarray(0,i):l&&typeof l=="object"?n[a]=sr.minExtend(e[a],r[a]):n[a]=l);for(s=Object.keys(r),o=0;o<s.length;o++)a=s[o],l=r[a],(typeof l!="object"||!(a in n)||typeof n[a]!="object")&&(n[a]=l);return n};sr.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};sr.containsAny=function(e,r){for(var n=0;n<r.length;n++)if(e.indexOf(r[n])!==-1)return!0;return!1};sr.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var B_e=/Version\/[\d\.]+.*Safari/;sr.isSafari=function(){return B_e.test(window.navigator.userAgent)};var O_e=/iPad|iPhone|iPod/;sr.isIOS=function(){return O_e.test(window.navigator.userAgent)};var N_e=/Firefox\/(\d+)\.\d+/;sr.getFirefoxVersion=function(){var e=N_e.exec(window.navigator.userAgent);if(e&&e.length===2){var r=parseInt(e[1]);if(!isNaN(r))return r}return null};sr.isD3Selection=function(e){return e instanceof Wm.selection};sr.ensureSingle=function(e,r,n,i){var s=e.select(r+(n?"."+n:""));if(s.size())return s;var o=e.append(r);return n&&o.classed(n,!0),i&&o.call(i),o};sr.ensureSingleById=function(e,r,n,i){var s=e.select(r+"#"+n);if(s.size())return s;var o=e.append(r).attr("id",n);return i&&o.call(i),o};sr.objectFromPath=function(e,r){for(var n=e.split("."),i,s=i={},o=0;o<n.length;o++){var a=n[o],l=null,u=n[o].match(/(.*)\[([0-9]+)\]/);u?(a=u[1],l=u[2],i=i[a]=[],o===n.length-1?i[l]=r:i[l]={},i=i[l]):(o===n.length-1?i[a]=r:i[a]={},i=i[a])}return s};var q_e=/^([^\[\.]+)\.(.+)?/,U_e=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;sr.expandObjectPaths=function(e){var r,n,i,s,o,a,l;if(typeof e=="object"&&!Array.isArray(e))for(n in e)e.hasOwnProperty(n)&&((r=n.match(q_e))?(s=e[n],i=r[1],delete e[n],e[i]=sr.extendDeepNoArrays(e[i]||{},sr.objectFromPath(n,sr.expandObjectPaths(s))[i])):(r=n.match(U_e))?(s=e[n],i=r[1],o=parseInt(r[2]),delete e[n],e[i]=e[i]||[],r[3]==="."?(l=r[4],a=e[i][o]=e[i][o]||{},sr.extendDeepNoArrays(a,sr.objectFromPath(l,sr.expandObjectPaths(s)))):e[i][o]=sr.expandObjectPaths(s)):e[n]=sr.expandObjectPaths(e[n]));return e};sr.numSeparate=function(e,r,n){if(n||(n=!1),typeof r!="string"||r.length===0)throw new Error("Separator string required for formatting!");typeof e=="number"&&(e=String(e));var i=/(\d+)(\d{3})/,s=r.charAt(0),o=r.charAt(1),a=e.split("."),l=a[0],u=a.length>1?s+a[1]:"";if(o&&(a.length>1||l.length>4||n))for(;i.test(l);)l=l.replace(i,"$1"+o+"$2");return l+u};sr.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var ese=/^\w*$/;sr.templateString=function(e,r){var n={};return e.replace(sr.TEMPLATE_STRING_REGEX,function(i,s){var o;return ese.test(s)?o=r[s]:(n[s]=n[s]||sr.nestedProperty(r,s).get,o=n[s]()),sr.isValidTextValue(o)?o:""})};var H_e={max:10,count:0,name:"hovertemplate"};sr.hovertemplateString=function(){return tse.apply(H_e,arguments)};var $_e={max:10,count:0,name:"texttemplate"};sr.texttemplateString=function(){return tse.apply($_e,arguments)};var pN=/^[:|\|]/;function tse(e,r,n){var i=this,s=arguments;r||(r={});var o={};return e.replace(sr.TEMPLATE_STRING_REGEX,function(a,l,u){var f=l==="xother"||l==="yother",h=l==="_xother"||l==="_yother",v=l==="_xother_"||l==="_yother_",c=l==="xother_"||l==="yother_",d=f||h||c||v,g=l;(h||v)&&(g=g.substring(1)),(c||v)&&(g=g.substring(0,g.length-1));var p;if(d){if(p=r[g],p===void 0)return""}else{var b,m;for(m=3;m<s.length;m++)if(b=s[m],!!b){if(b.hasOwnProperty(g)){p=b[g];break}if(ese.test(g)||(p=sr.nestedProperty(b,g).get(),p=o[g]||sr.nestedProperty(b,g).get(),p&&(o[g]=p)),p!==void 0)break}}if(p===void 0&&i)return i.count<i.max&&(sr.warn("Variable '"+g+"' in "+i.name+" could not be found!"),p=a),i.count===i.max&&sr.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,a;if(u){var y;if(u[0]===":"&&(y=n?n.numberFormat:sr.numberFormat,p=y(u.replace(pN,""))(p)),u[0]==="|"){y=n?n.timeFormat:D_e;var T=sr.dateTime2ms(p);p=sr.formatDate(T,u.replace(pN,""),!1,y)}}else{var _=g+"Label";r.hasOwnProperty(_)&&(p=r[_])}return d&&(p="("+p+")",(h||v)&&(p=" "+p),(c||v)&&(p=p+" ")),p})}t(tse,"templateFormatString");var nb=48,gN=57;sr.subplotSort=function(e,r){for(var n=Math.min(e.length,r.length)+1,i=0,s=0,o=0;o<n;o++){var a=e.charCodeAt(o)||0,l=r.charCodeAt(o)||0,u=a>=nb&&a<=gN,f=l>=nb&&l<=gN;if(u&&(i=10*i+a-nb),f&&(s=10*s+l-nb),!u||!f){if(i!==s)return i-s;if(a!==l)return a-l}}return s-i};var Pg=2e9;sr.seedPseudoRandom=function(){Pg=2e9};sr.pseudoRandom=function(){var e=Pg;return Pg=(69069*Pg+1)%4294967296,Math.abs(Pg-e)<429496729?sr.pseudoRandom():Pg/4294967296};sr.fillText=function(e,r,n){var i=Array.isArray(n)?function(a){n.push(a)}:function(a){n.text=a},s=sr.extractOption(e,r,"htx","hovertext");if(sr.isValidTextValue(s))return i(s);var o=sr.extractOption(e,r,"tx","text");if(sr.isValidTextValue(o))return i(o)};sr.isValidTextValue=function(e){return e||e===0};sr.formatPercent=function(e,r){r=r||0;for(var n=(Math.round(100*e*Math.pow(10,r))*Math.pow(.1,r)).toFixed(r)+"%",i=0;i<r;i++)n.indexOf(".")!==-1&&(n=n.replace("0%","%"),n=n.replace(".%","%"));return n};sr.isHidden=function(e){var r=window.getComputedStyle(e).display;return!r||r==="none"};sr.strTranslate=function(e,r){return e||r?"translate("+e+","+r+")":""};sr.strRotate=function(e){return e?"rotate("+e+")":""};sr.strScale=function(e){return e!==1?"scale("+e+")":""};sr.getTextTransform=function(e){var r=e.noCenter,n=e.textX,i=e.textY,s=e.targetX,o=e.targetY,a=e.anchorX||0,l=e.anchorY||0,u=e.rotate,f=e.scale;return f?f>1&&(f=1):f=0,sr.strTranslate(s-f*(n+a),o-f*(i+l))+sr.strScale(f)+(u?"rotate("+u+(r?"":" "+n+" "+i)+")":"")};sr.setTransormAndDisplay=function(e,r){e.attr("transform",sr.getTextTransform(r)),e.style("display",r.scale?null:"none")};sr.ensureUniformFontSize=function(e,r){var n=sr.extendFlat({},r);return n.size=Math.max(r.size,e._fullLayout.uniformtext.minsize||0),n};sr.join2=function(e,r,n){var i=e.length;return i>1?e.slice(0,-1).join(r)+n+e[i-1]:e.join(r)};sr.bigFont=function(e){return Math.round(1.2*e)};var yN=sr.getFirefoxVersion(),V_e=yN!==null&&yN<86;sr.getPositionFromD3Event=function(){return V_e?[Wm.event.layerX,Wm.event.layerY]:[Wm.event.offsetX,Wm.event.offsetY]};var G_e=Nt.exports,mN={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var xN in mN){var j_e=xN.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");G_e.addStyleRule(j_e,mN[xN])}var Bo={},lw={},Y_e=!0,W_e=Y_e,yz;typeof xs.matchMedia=="function"?yz=!xs.matchMedia("(hover: none)").matches:yz=W_e;var rse=yz,Z1={exports:{}},Gg=typeof Reflect=="object"?Reflect:null,bN=Gg&&typeof Gg.apply=="function"?Gg.apply:t(function(r,n,i){return Function.prototype.apply.call(r,n,i)},"ReflectApply"),l_;Gg&&typeof Gg.ownKeys=="function"?l_=Gg.ownKeys:Object.getOwnPropertySymbols?l_=t(function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))},"ReflectOwnKeys"):l_=t(function(r){return Object.getOwnPropertyNames(r)},"ReflectOwnKeys");function X_e(e){console&&console.warn&&console.warn(e)}t(X_e,"ProcessEmitWarning");var ase=Number.isNaN||t(function(r){return r!==r},"NumberIsNaN");function Mo(){Mo.init.call(this)}t(Mo,"EventEmitter$3");Z1.exports=Mo;Z1.exports.once=Q_e;Mo.EventEmitter=Mo;Mo.prototype._events=void 0;Mo.prototype._eventsCount=0;Mo.prototype._maxListeners=void 0;var _N=10;function uw(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}t(uw,"checkListener");Object.defineProperty(Mo,"defaultMaxListeners",{enumerable:!0,get:function(){return _N},set:function(e){if(typeof e!="number"||e<0||ase(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_N=e}});Mo.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Mo.prototype.setMaxListeners=t(function(r){if(typeof r!="number"||r<0||ase(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},"setMaxListeners");function nse(e){return e._maxListeners===void 0?Mo.defaultMaxListeners:e._maxListeners}t(nse,"_getMaxListeners");Mo.prototype.getMaxListeners=t(function(){return nse(this)},"getMaxListeners");Mo.prototype.emit=t(function(r){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var s=r==="error",o=this._events;if(o!==void 0)s=s&&o.error===void 0;else if(!s)return!1;if(s){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var u=o[r];if(u===void 0)return!1;if(typeof u=="function")bN(u,this,n);else for(var f=u.length,h=use(u,f),i=0;i<f;++i)bN(h[i],this,n);return!0},"emit");function ise(e,r,n,i){var s,o,a;if(uw(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",r,n.listener?n.listener:n),o=e._events),a=o[r]),a===void 0)a=o[r]=n,++e._eventsCount;else if(typeof a=="function"?a=o[r]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),s=nse(e),s>0&&a.length>s&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=r,l.count=a.length,X_e(l)}return e}t(ise,"_addListener");Mo.prototype.addListener=t(function(r,n){return ise(this,r,n,!1)},"addListener");Mo.prototype.on=Mo.prototype.addListener;Mo.prototype.prependListener=t(function(r,n){return ise(this,r,n,!0)},"prependListener");function Z_e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}t(Z_e,"onceWrapper");function ose(e,r,n){var i={fired:!1,wrapFn:void 0,target:e,type:r,listener:n},s=Z_e.bind(i);return s.listener=n,i.wrapFn=s,s}t(ose,"_onceWrap");Mo.prototype.once=t(function(r,n){return uw(n),this.on(r,ose(this,r,n)),this},"once");Mo.prototype.prependOnceListener=t(function(r,n){return uw(n),this.prependListener(r,ose(this,r,n)),this},"prependOnceListener");Mo.prototype.removeListener=t(function(r,n){var i,s,o,a,l;if(uw(n),s=this._events,s===void 0)return this;if(i=s[r],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[r],s.removeListener&&this.emit("removeListener",r,i.listener||n));else if(typeof i!="function"){for(o=-1,a=i.length-1;a>=0;a--)if(i[a]===n||i[a].listener===n){l=i[a].listener,o=a;break}if(o<0)return this;o===0?i.shift():K_e(i,o),i.length===1&&(s[r]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",r,l||n)}return this},"removeListener");Mo.prototype.off=Mo.prototype.removeListener;Mo.prototype.removeAllListeners=t(function(r){var n,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[r]),this;if(arguments.length===0){var o=Object.keys(i),a;for(s=0;s<o.length;++s)a=o[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[r],typeof n=="function")this.removeListener(r,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(r,n[s]);return this},"removeAllListeners");function sse(e,r,n){var i=e._events;if(i===void 0)return[];var s=i[r];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?J_e(s):use(s,s.length)}t(sse,"_listeners");Mo.prototype.listeners=t(function(r){return sse(this,r,!0)},"listeners");Mo.prototype.rawListeners=t(function(r){return sse(this,r,!1)},"rawListeners");Mo.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):lse.call(e,r)};Mo.prototype.listenerCount=lse;function lse(e){var r=this._events;if(r!==void 0){var n=r[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}t(lse,"listenerCount");Mo.prototype.eventNames=t(function(){return this._eventsCount>0?l_(this._events):[]},"eventNames");function use(e,r){for(var n=new Array(r),i=0;i<r;++i)n[i]=e[i];return n}t(use,"arrayClone");function K_e(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}t(K_e,"spliceOne");function J_e(e){for(var r=new Array(e.length),n=0;n<r.length;++n)r[n]=e[n].listener||e[n];return r}t(J_e,"unwrapListeners");function Q_e(e,r){return new Promise(function(n,i){function s(a){e.removeListener(r,o),i(a)}t(s,"errorListener");function o(){typeof e.removeListener=="function"&&e.removeListener("error",s),n([].slice.call(arguments))}t(o,"resolver"),fse(e,r,o,{once:!0}),r!=="error"&&e2e(e,s,{once:!0})})}t(Q_e,"once");function e2e(e,r,n){typeof e.on=="function"&&fse(e,"error",r,n)}t(e2e,"addErrorHandlerIfEventEmitter");function fse(e,r,n,i){if(typeof e.on=="function")i.once?e.once(r,n):e.on(r,n);else if(typeof e.addEventListener=="function")e.addEventListener(r,t(function s(o){i.once&&e.removeEventListener(r,s),n(o)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}t(fse,"eventTargetAgnosticAddListener");var hT=Z1.exports.EventEmitter,t2e={init:function(e){if(e._ev instanceof hT)return e;var r=new hT,n=new hT;return e._ev=r,e._internalEv=n,e.on=r.on.bind(r),e.once=r.once.bind(r),e.removeListener=r.removeListener.bind(r),e.removeAllListeners=r.removeAllListeners.bind(r),e._internalOn=n.on.bind(n),e._internalOnce=n.once.bind(n),e._removeInternalListener=n.removeListener.bind(n),e._removeAllInternalListeners=n.removeAllListeners.bind(n),e.emit=function(i,s){typeof jQuery<"u"&&jQuery(e).trigger(i,s),r.emit(i,s),n.emit(i,s)},e},triggerHandler:function(e,r,n){var i,s;typeof jQuery<"u"&&(i=jQuery(e).triggerHandler(r,n));var o=e._ev;if(!o)return i;var a=o._events[r];if(!a)return i;function l(f){if(f.listener){if(o.removeListener(r,f.listener),!f.fired)return f.fired=!0,f.listener.apply(o,[n])}else return f.apply(o,[n])}t(l,"apply"),a=Array.isArray(a)?a:[a];var u;for(u=0;u<a.length-1;u++)l(a[u]);return s=l(a[u]),i!==void 0?i:s},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}},K1=t2e,wN=Nt.exports,r2e=wy.dfltConfig;function a2e(e,r){for(var n=[],i,s=0;s<r.length;s++)i=r[s],i===e?n[s]=i:typeof i=="object"?n[s]=Array.isArray(i)?wN.extendDeep([],i):wN.extendDeepAll({},i):n[s]=i;return n}t(a2e,"copyArgArray");var ud={};ud.add=function(e,r,n,i,s){var o,a;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},a=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(a,e.undoQueue.queue.length-a,o),e.undoQueue.index+=1):o=e.undoQueue.queue[a-1],e.undoQueue.beginSequence=!1,o&&(o.undo.calls.unshift(r),o.undo.args.unshift(n),o.redo.calls.push(i),o.redo.args.push(s)),e.undoQueue.queue.length>r2e.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)};ud.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0};ud.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1};ud.undo=t(function(r){var n,i;if(!(r.undoQueue===void 0||isNaN(r.undoQueue.index)||r.undoQueue.index<=0)){for(r.undoQueue.index--,n=r.undoQueue.queue[r.undoQueue.index],r.undoQueue.inSequence=!0,i=0;i<n.undo.calls.length;i++)ud.plotDo(r,n.undo.calls[i],n.undo.args[i]);r.undoQueue.inSequence=!1,r.autoplay=!1}},"undo");ud.redo=t(function(r){var n,i;if(!(r.undoQueue===void 0||isNaN(r.undoQueue.index)||r.undoQueue.index>=r.undoQueue.queue.length)){for(n=r.undoQueue.queue[r.undoQueue.index],r.undoQueue.inSequence=!0,i=0;i<n.redo.calls.length;i++)ud.plotDo(r,n.redo.calls[i],n.redo.args[i]);r.undoQueue.inSequence=!1,r.autoplay=!1,r.undoQueue.index++}},"redo");ud.plotDo=function(e,r,n){e.autoplay=!0,n=a2e(e,n),r.apply(null,n)};var n2e=ud,dp={},cse={_isLinkedToArray:"frames_entry",group:{valType:"string",description:["An identifier that specifies the group to which the frame belongs,","used by animate to select a subset of frames."].join(" ")},name:{valType:"string",description:"A label by which to identify the frame"},traces:{valType:"any",description:["A list of trace indices that identify the respective traces in the","data attribute"].join(" ")},baseframe:{valType:"string",description:["The name of the frame into which this frame's properties are merged","before applying. This is used to unify properties and avoid needing","to specify the same values for the same properties in multiple frames."].join(" ")},data:{valType:"any",description:["A list of traces this frame modifies. The format is identical to the","normal trace definition."].join(" ")},layout:{valType:"any",description:["Layout properties which this frame modifies. The format is identical","to the normal layout definition."].join(" ")}},hse=Nt.exports,vse=hse.extendFlat,i2e=hse.isPlainObject,dse={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"],description:["trace attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*clearAxisTypes* resets the types of the axes this trace is on, because new data could","cause the automatic axis type detection to change. Log type will not be cleared, as that","is never automatically chosen so must have been user-specified.","*plot* (re)plots but without first clearing `gd.calcdata`.","*style* only calls `module.style` (or module.editStyle) for all trace modules and redraws the legend.","*markerSize* is like *style*, but propagate axis-range changes due to scatter `marker.size`","*colorbars* only redraws colorbars."].join(" ")},pse={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"],description:["layout attributes should include an `editType` string matching this flaglist.","*calc* is the most extensive: a full (re)plot starting by clearing `gd.calcdata`","to force it to be regenerated","*plot* (re)plots but without first clearing `gd.calcdata`.","*legend* only redraws the legend.","*ticks* only redraws axis ticks, labels, and gridlines.","*axrange* minimal sequence when updating axis ranges.","*layoutstyle* reapplies global and SVG cartesian axis styles.","*modebar* just updates the modebar.","*camera* just updates the camera settings for gl3d scenes.","*arraydraw* allows component arrays to invoke the redraw routines just for the","component(s) that changed.","*colorbars* only redraws colorbars."].join(" ")},o2e=dse.flags.slice().concat(["fullReplot"]),s2e=pse.flags.slice().concat("layoutReplot"),_o={traces:dse,layout:pse,traceFlags:function(){return TN(o2e)},layoutFlags:function(){return TN(s2e)},update:function(e,r){var n=r.editType;if(n&&n!=="none")for(var i=n.split("+"),s=0;s<i.length;s++)e[i[s]]=!0},overrideAll:gse};function TN(e){for(var r={},n=0;n<e.length;n++)r[e[n]]=!1;return r}t(TN,"falseObj");function gse(e,r,n){var i=vse({},e);for(var s in i){var o=i[s];i2e(o)&&(i[s]=yse(o,r,n,s))}return n==="from-root"&&(i.editType=r),i}t(gse,"overrideAll$6");function yse(e,r,n,i){if(e.valType){var s=vse({},e);if(s.editType=r,Array.isArray(e.items)){s.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++)s.items[o]=yse(e.items[o],r)}return s}else return gse(e,r,i.charAt(0)==="_"?"nested":"from-root")}t(yse,"overrideOne");(function(e){var r=Na,n=Nt.exports,i=Ni,s=Ty,o=cse,a=tw,l=wy.configAttributes,u=_o,f=n.extendDeepAll,h=n.isPlainObject,v=n.isArrayOrTypedArray,c=n.nestedProperty,d=n.valObjectMeta,g="_isSubplotObj",p="_isLinkedToArray",b="_arrayAttrRegexps",m="_deprecated",y=[g,p,b,m];e.IS_SUBPLOT_OBJ=g,e.IS_LINKED_TO_ARRAY=p,e.DEPRECATED=m,e.UNDERSCORE_ATTRS=y,e.get=function(){var R={};r.allTypes.forEach(function(O){R[O]=w(O)});var F={};return Object.keys(r.transformsRegistry).forEach(function(O){F[O]=A(O)}),{defs:{valObjects:d,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:u.traces,layout:u.layout},impliedEdits:{description:["Sometimes when an attribute is changed, other attributes","must be altered as well in order to achieve the intended","result. For example, when `range` is specified, it is","important to set `autorange` to `false` or the new `range`","value would be lost in the redraw. `impliedEdits` is the","mechanism to do this: `impliedEdits: {autorange: false}`.","Each key is a relative paths to the attribute string to","change, using *^* to ascend into the parent container,","for example `range[0]` has `impliedEdits: {*^autorange*: false}`.","A value of `undefined` means that the attribute will not be","changed, but its previous value should be recorded in case","we want to reverse this change later. For example, `autorange`","has `impliedEdits: {*range[0]*: undefined, *range[1]*:undefined}","because the range will likely be changed by redraw."].join(" ")}},traces:R,layout:x(),transforms:F,frames:S(),animation:k(a),config:k(l)}},e.crawl=function(R,F,O,q){var H=O||0;q=q||"",Object.keys(R).forEach(function(j){var X=R[j];if(y.indexOf(j)===-1){var G=(q?q+".":"")+j;F(X,j,R,H,G),!e.isValObject(X)&&h(X)&&j!=="impliedEdits"&&e.crawl(X,F,H+1,G)}})},e.isValObject=function(R){return R&&R.valType!==void 0},e.findArrayAttributes=function(R){var F=[],O=[],q=[],H,j;function X(se,W,ne,he){O=O.slice(0,he).concat([W]),q=q.slice(0,he).concat([se&&se._isLinkedToArray]);var re=se&&(se.valType==="data_array"||se.arrayOk===!0)&&!(O[he-1]==="colorbar"&&(W==="ticktext"||W==="tickvals"));!re||G(H,0,"")}t(X,"callback");function G(se,W,ne){var he=se[O[W]],re=ne+O[W];if(W===O.length-1)v(he)&&F.push(j+re);else if(q[W]){if(Array.isArray(he))for(var ae=0;ae<he.length;ae++)h(he[ae])&&G(he[ae],W+1,re+"["+ae+"].")}else h(he)&&G(he,W+1,re+".")}t(G,"crawlIntoTrace"),H=R,j="",e.crawl(i,X),R._module&&R._module.attributes&&e.crawl(R._module.attributes,X);var $=R.transforms;if($)for(var te=0;te<$.length;te++){var ee=$[te],ie=ee._module;ie&&(j="transforms["+te+"].",H=ee,e.crawl(ie.attributes,X))}return F},e.getTraceValObject=function(R,F){var O=F[0],q=1,H,j;if(O==="transforms"){if(F.length===1)return i.transforms;var X=R.transforms;if(!Array.isArray(X)||!X.length)return!1;var G=F[1];if(!M(G)||G>=X.length)return!1;H=(r.transformsRegistry[X[G].type]||{}).attributes,j=H&&H[F[2]],q=3}else{var $=R._module;if($||($=(r.modules[R.type||i.type.dflt]||{})._module),!$)return!1;if(H=$.attributes,j=H&&H[O],!j){var te=$.basePlotModule;te&&te.attributes&&(j=te.attributes[O])}j||(j=i[O])}return _(j,F,q)},e.getLayoutValObject=function(R,F){var O=T(R,F[0]);return _(O,F,1)};function T(R,F){var O,q,H,j,X=R._basePlotModules;if(X){var G;for(O=0;O<X.length;O++){if(H=X[O],H.attrRegex&&H.attrRegex.test(F)){if(H.layoutAttrOverrides)return H.layoutAttrOverrides;!G&&H.layoutAttributes&&(G=H.layoutAttributes)}var $=H.baseLayoutAttrOverrides;if($&&F in $)return $[F]}if(G)return G}var te=R._modules;if(te){for(O=0;O<te.length;O++)if(j=te[O].layoutAttributes,j&&F in j)return j[F]}for(q in r.componentsRegistry){if(H=r.componentsRegistry[q],H.name==="colorscale"&&F.indexOf("coloraxis")===0)return H.layoutAttributes[F];if(!H.schema&&F===H.name)return H.layoutAttributes}return F in s?s[F]:!1}t(T,"layoutHeadAttr");function _(R,F,O){if(!R)return!1;if(R._isLinkedToArray){if(M(F[O]))O++;else if(O<F.length)return!1}for(;O<F.length;O++){var q=R[F[O]];if(h(q))R=q;else break;if(O===F.length-1)break;if(R._isLinkedToArray){if(O++,!M(F[O]))return!1}else if(R.valType==="info_array"){O++;var H=F[O];if(!M(H))return!1;var j=R.items;if(Array.isArray(j)){if(H>=j.length)return!1;if(R.dimensions===2){if(O++,F.length===O)return R;var X=F[O];if(!M(X))return!1;R=j[H][X]}else R=j[H]}else R=j}}return R}t(_,"recurseIntoValObject");function M(R){return R===Math.round(R)&&R>=0}t(M,"isIndex");function w(R){var F,O;F=r.modules[R]._module,O=F.basePlotModule;var q={};q.type=null;var H=f({},i),j=f({},F.attributes);e.crawl(j,function($,te,ee,ie,se){c(H,se).set(void 0),$===void 0&&c(j,se).set(void 0)}),f(q,H),r.traceIs(R,"noOpacity")&&delete q.opacity,r.traceIs(R,"showLegend")||(delete q.showlegend,delete q.legendgroup),r.traceIs(R,"noHover")&&(delete q.hoverinfo,delete q.hoverlabel),F.selectPoints||delete q.selectedpoints,f(q,j),O.attributes&&f(q,O.attributes),q.type=R;var X={meta:F.meta||{},categories:F.categories||{},animatable:Boolean(F.animatable),type:R,attributes:k(q)};if(F.layoutAttributes){var G={};f(G,F.layoutAttributes),X.layoutAttributes=k(G)}return F.animatable||e.crawl(X,function($){e.isValObject($)&&"anim"in $&&delete $.anim}),X}t(w,"getTraceAttributes");function x(){var R={},F,O;f(R,s);for(F in r.subplotsRegistry)if(O=r.subplotsRegistry[F],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var q=0;q<O.attr.length;q++)B(R,O,O.attr[q]);else{var H=O.attr==="subplot"?O.name:O.attr;B(R,O,H)}for(F in r.componentsRegistry){O=r.componentsRegistry[F];var j=O.schema;if(j&&(j.subplots||j.layout)){var X=j.subplots;if(X&&X.xaxis&&!X.yaxis)for(var G in X.xaxis)delete R.yaxis[G]}else O.name==="colorscale"?f(R,O.layoutAttributes):O.layoutAttributes&&z(R,O.layoutAttributes,O.name)}return{layoutAttributes:k(R)}}t(x,"getLayoutAttributes");function A(R){var F=r.transformsRegistry[R],O=f({},F.attributes);return Object.keys(r.componentsRegistry).forEach(function(q){var H=r.componentsRegistry[q];H.schema&&H.schema.transforms&&H.schema.transforms[R]&&Object.keys(H.schema.transforms[R]).forEach(function(j){z(O,H.schema.transforms[R][j],j)})}),{attributes:k(O)}}t(A,"getTransformAttributes");function S(){var R={frames:f({},o)};return k(R),R.frames}t(S,"getFramesAttributes");function k(R){return L(R),P(R),D(R),R}t(k,"formatAttributes");function L(R){function F(q){return{valType:"string",description:"Sets the source reference on Chart Studio Cloud for `"+q+"`.",editType:"none"}}t(F,"makeSrcAttr");function O(q,H,j){e.isValObject(q)?(q.arrayOk===!0||q.valType==="data_array")&&(j[H+"src"]=F(H)):h(q)&&(q.role="object")}t(O,"callback"),e.crawl(R,O)}t(L,"mergeValTypeAndRole");function P(R){function F(O,q,H){if(!!O){var j=O[p];!j||(delete O[p],H[q]={items:{}},H[q].items[j]=O,H[q].role="object")}}t(F,"callback"),e.crawl(R,F)}t(P,"formatArrayContainers");function D(R){function F(O){for(var q in O)if(h(O[q]))F(O[q]);else if(Array.isArray(O[q]))for(var H=0;H<O[q].length;H++)F(O[q][H]);else O[q]instanceof RegExp&&(O[q]=O[q].toString())}t(F,"walk"),F(R)}t(D,"stringify");function B(R,F,O){var q=c(R,O),H=f({},F.layoutAttributes);H[g]=!0,q.set(H)}t(B,"handleBasePlotModule");function z(R,F,O){var q=c(R,O);q.set(f(q.get()||{},F))}t(z,"insertAttrs")})(dp);var so={exports:{}},ei={},jg=Nt.exports,l2e=Ni,rp="templateitemname",mz={name:{valType:"string",editType:"none",description:["When used in a template, named items are created in the output figure","in addition to any items the figure already has in this array.","You can modify these items in the output figure by making your own","item with `templateitemname` matching this `name`","alongside your modifications (including `visible: false` or","`enabled: false` to hide it).","Has no effect outside of a template."].join(" ")}};mz[rp]={valType:"string",editType:"calc",description:["Used to refer to a named item in this array in the template. Named","items from the template will be created even without a matching item","in the input figure, but you can modify one by making an item with","`templateitemname` matching its `name`, alongside your modifications","(including `visible: false` or `enabled: false` to hide it).","If there is no template or no matching item, this item will be","hidden unless you explicitly show it with `visible: true`."].join(" ")};ei.templatedArray=function(e,r){return r._isLinkedToArray=e,r.name=mz.name,r[rp]=mz[rp],r};ei.traceTemplater=function(e){var r={},n,i;for(n in e)i=e[n],Array.isArray(i)&&i.length&&(r[n]=0);function s(o){n=jg.coerce(o,{},l2e,"type");var a={type:n,_template:null};if(n in r){i=e[n];var l=r[n]%i.length;r[n]++,a._template=i[l]}return a}return t(s,"newTrace"),{newTrace:s}};ei.newContainer=function(e,r,n){var i=e._template,s=i&&(i[r]||n&&i[n]);jg.isPlainObject(s)||(s=null);var o=e[r]={_template:s};return o};ei.arrayTemplater=function(e,r,n){var i=e._template,s=i&&i[mse(r)],o=i&&i[r];(!Array.isArray(o)||!o.length)&&(o=[]);var a={};function l(f){var h={name:f.name,_input:f},v=h[rp]=f[rp];if(!AN(v))return h._template=s,h;for(var c=0;c<o.length;c++){var d=o[c];if(d.name===v)return a[v]=1,h._template=d,h}return h[n]=f[n]||!1,h._template=!1,h}t(l,"newItem");function u(){for(var f=[],h=0;h<o.length;h++){var v=o[h],c=v.name;if(AN(c)&&!a[c]){var d={_template:v,name:c,_input:{_templateitemname:c}};d[rp]=v[rp],f.push(d),a[c]=1}}return f}return t(u,"defaultItems"),{newItem:l,defaultItems:u}};function AN(e){return e&&typeof e=="string"}t(AN,"validItemName");function mse(e){var r=e.length-1;return e.charAt(r)!=="s"&&jg.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}t(mse,"arrayDefaultKey");ei.arrayDefaultKey=mse;ei.arrayEditor=function(e,r,n){var i=(jg.nestedProperty(e,r).get()||[]).length,s=n._index,o=s>=i&&(n._input||{})._templateitemname;o&&(s=i);var a=r+"["+s+"]",l;function u(){l={},o&&(l[a]={},l[a][rp]=o)}t(u,"resetUpdate"),u();function f(d,g){l[d]=g}t(f,"modifyBase");function h(d,g){o?jg.nestedProperty(l[a],d).set(g):l[a+"."+d]=g}t(h,"modifyItem");function v(){var d=l;return u(),d}t(v,"getUpdateObj");function c(d,g){d&&h(d,g);var p=v();for(var b in p)jg.nestedProperty(e,b).set(p[b])}return t(c,"applyUpdate"),{modifyBase:f,modifyItem:h,getUpdateObj:v,applyUpdate:c}};var $o={},gm=_y.counter,al={idRegex:{x:gm("x","( domain)?"),y:gm("y","( domain)?")},attrRegex:gm("[xy]axis"),xAxisMatch:gm("xaxis"),yAxisMatch:gm("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}};(function(e){var r=Na,n=al;e.id2name=t(function(o){if(!(typeof o!="string"||!o.match(n.AX_ID_PATTERN))){var a=o.split(" ")[0].substr(1);return a==="1"&&(a=""),o.charAt(0)+"axis"+a}},"id2name"),e.name2id=t(function(o){if(!!o.match(n.AX_NAME_PATTERN)){var a=o.substr(5);return a==="1"&&(a=""),o.charAt(0)+a}},"name2id"),e.cleanId=t(function(o,a,l){var u=/( domain)$/.test(o);if(!(typeof o!="string"||!o.match(n.AX_ID_PATTERN))&&!(a&&o.charAt(0)!==a)&&!(u&&!l)){var f=o.split(" ")[0].substr(1).replace(/^0+/,"");return f==="1"&&(f=""),o.charAt(0)+f+(u&&l?" domain":"")}},"cleanId"),e.list=function(s,o,a){var l=s._fullLayout;if(!l)return[];var u=e.listIds(s,o),f=new Array(u.length),h;for(h=0;h<u.length;h++){var v=u[h];f[h]=l[v.charAt(0)+"axis"+v.substr(1)]}if(!a){var c=l._subplots.gl3d||[];for(h=0;h<c.length;h++){var d=l[c[h]];o?f.push(d[o+"axis"]):f.push(d.xaxis,d.yaxis,d.zaxis)}}return f},e.listIds=function(s,o){var a=s._fullLayout;if(!a)return[];var l=a._subplots;return o?l[o+"axis"]:l.xaxis.concat(l.yaxis)},e.getFromId=function(s,o,a){var l=s._fullLayout;return o=o===void 0||typeof o!="string"?o:o.replace(" domain",""),a==="x"?o=o.replace(/y[0-9]*/,""):a==="y"&&(o=o.replace(/x[0-9]*/,"")),l[e.id2name(o)]},e.getFromTrace=function(s,o,a){var l=s._fullLayout,u=null;if(r.traceIs(o,"gl3d")){var f=o.scene;f.substr(0,5)==="scene"&&(u=l[f][a+"axis"])}else u=e.getFromId(s,o[a+"axis"]||a);return u},e.idSort=function(s,o){var a=s.charAt(0),l=o.charAt(0);return a!==l?a>l?1:-1:+(s.substr(1)||1)-+(o.substr(1)||1)},e.ref2id=function(s){return/^[xyz]/.test(s)?s.split(" ")[0]:!1};function i(s,o){if(o&&o.length){for(var a=0;a<o.length;a++)if(o[a][s])return!0}return!1}t(i,"isFound"),e.isLinked=function(s,o){return i(o,s._axisMatchGroups)||i(o,s._axisConstraintGroups)}})($o);function u2e(e){var r=e._fullLayout._zoomlayer;r&&r.selectAll(".outline-controllers").remove()}t(u2e,"clearOutlineControllers$3");function f2e(e){var r=e._fullLayout._zoomlayer;r&&r.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}t(f2e,"clearOutline$5");var C0={clearOutlineControllers:u2e,clearOutline:f2e},Ns={},i1=Na,c2e=al.SUBPLOT_PATTERN;Ns.getSubplotCalcData=function(e,r,n){var i=i1.subplotsRegistry[r];if(!i)return[];for(var s=i.attr,o=[],a=0;a<e.length;a++){var l=e[a],u=l[0].trace;u[s]===n&&o.push(l)}return o};Ns.getModuleCalcData=function(e,r){var n=[],i=[],s;if(typeof r=="string"?s=i1.getModule(r).plot:typeof r=="function"?s=r:s=r.plot,!s)return[n,e];for(var o=0;o<e.length;o++){var a=e[o],l=a[0].trace;l.visible!==!0||l._length===0||(l._module.plot===s?n.push(a):i.push(a))}return[n,i]};Ns.getSubplotData=t(function(r,n,i){if(!i1.subplotsRegistry[n])return[];var s=i1.subplotsRegistry[n].attr,o=[],a,l,u;if(n==="gl2d"){var f=i.match(c2e);l="x"+f[1],u="y"+f[2]}for(var h=0;h<r.length;h++)a=r[h],n==="gl2d"&&i1.traceIs(a,"gl2d")?a[s[0]]===l&&a[s[1]]===u&&o.push(a):a[s]===i&&o.push(a);return o},"getSubplotData");var vT={},SN;function h2e(){return SN||(SN=1,function(e){var r=Na,n=Nt.exports;e.manageCommandObserver=function(u,f,h,v){var c={},d=!0;f&&f._commandObserver&&(c=f._commandObserver),c.cache||(c.cache={}),c.lookupTable={};var g=e.hasSimpleAPICommandBindings(u,h,c.lookupTable);if(f&&f._commandObserver){if(g)return c;if(f._commandObserver.remove)return f._commandObserver.remove(),f._commandObserver=null,c}if(g){i(u,g,c.cache),c.check=t(function(){if(!!d){var y=i(u,g,c.cache);return y.changed&&v&&c.lookupTable[y.value]!==void 0&&(c.disable(),Promise.resolve(v({value:y.value,type:g.type,prop:g.prop,traces:g.traces,index:c.lookupTable[y.value]})).then(c.enable,c.enable)),y.changed}},"check");for(var p=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],b=0;b<p.length;b++)u._internalOn(p[b],c.check);c.remove=function(){for(var m=0;m<p.length;m++)u._removeInternalListener(p[m],c.check)}}else n.log("Unable to automatically bind plot updates to API command"),c.lookupTable={},c.remove=function(){};return c.disable=t(function(){d=!1},"disable"),c.enable=t(function(){d=!0},"enable"),f&&(f._commandObserver=c),c},e.hasSimpleAPICommandBindings=function(u,f,h){var v,c=f.length,d;for(v=0;v<c;v++){var g,p=f[v],b=p.method,m=p.args;if(Array.isArray(m)||(m=[]),!b)return!1;var y=e.computeAPICommandBindings(u,b,m);if(y.length!==1)return!1;if(!d)d=y[0],Array.isArray(d.traces)&&d.traces.sort();else{if(g=y[0],g.type!==d.type||g.prop!==d.prop)return!1;if(Array.isArray(d.traces))if(Array.isArray(g.traces)){g.traces.sort();for(var T=0;T<d.traces.length;T++)if(d.traces[T]!==g.traces[T])return!1}else return!1;else if(g.prop!==d.prop)return!1}g=y[0];var _=g.value;if(Array.isArray(_))if(_.length===1)_=_[0];else return!1;h&&(h[_]=v)}return d};function i(u,f,h){var v,c,d,g=!1;if(f.type==="data")v=u._fullData[f.traces!==null?f.traces[0]:0];else if(f.type==="layout")v=u._fullLayout;else return!1;return c=n.nestedProperty(v,f.prop).get(),d=h[f.type]=h[f.type]||{},d.hasOwnProperty(f.prop)&&d[f.prop]!==c&&(g=!0),d[f.prop]=c,{changed:g,value:c}}t(i,"bindingValueHasChanged"),e.executeAPICommand=function(u,f,h){if(f==="skip")return Promise.resolve();var v=r.apiMethodRegistry[f],c=[u];Array.isArray(h)||(h=[]);for(var d=0;d<h.length;d++)c.push(h[d]);return v.apply(null,c).catch(function(g){return n.warn("API call to Plotly."+f+" rejected.",g),Promise.reject(g)})},e.computeAPICommandBindings=function(u,f,h){var v;switch(Array.isArray(h)||(h=[]),f){case"restyle":v=a(u,h);break;case"relayout":v=o(u,h);break;case"update":v=a(u,[h[0],h[2]]).concat(o(u,[h[1]]));break;case"animate":v=s(u,h);break;default:v=[]}return v};function s(u,f){return Array.isArray(f[0])&&f[0].length===1&&["string","number"].indexOf(typeof f[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:f[0][0].toString()}]:[]}t(s,"computeAnimateBindings");function o(u,f){var h=[],v=f[0],c={};if(typeof v=="string")c[v]=f[1];else if(n.isPlainObject(v))c=v;else return h;return l(c,function(d,g,p){h.push({type:"layout",prop:d,value:p})},"",0),h}t(o,"computeLayoutBindings");function a(u,f){var h,v,c,d,g=[];if(v=f[0],c=f[1],h=f[2],d={},typeof v=="string")d[v]=c;else if(n.isPlainObject(v))d=v,h===void 0&&(h=c);else return g;return h===void 0&&(h=null),l(d,function(p,b,m){var y,T;if(Array.isArray(m)){T=m.slice();var _=Math.min(T.length,u.data.length);h&&(_=Math.min(_,h.length)),y=[];for(var M=0;M<_;M++)y[M]=h?h[M]:M}else T=m,y=h?h.slice():null;if(y===null)Array.isArray(T)&&(T=T[0]);else if(Array.isArray(y)){if(!Array.isArray(T)){var w=T;T=[];for(var x=0;x<y.length;x++)T[x]=w}T.length=Math.min(y.length,T.length)}g.push({type:"data",prop:p,traces:y,value:T})},"",0),g}t(a,"computeDataBindings");function l(u,f,h,v){Object.keys(u).forEach(function(c){var d=u[c];if(c[0]!=="_"){var g=h+(v>0?".":"")+c;n.isPlainObject(d)?l(d,f,g,v+1):f(g,c,d)}})}t(l,"crawl")}(vT)),vT}t(h2e,"requireCommand");var xse=Va.exports,v2e=w1.timeFormatLocale,d2e=moe.formatLocale,F_=xn,bi=Na,bse=dp,p2e=ei,Za=Nt.exports,_se=$a.exports,MN=jn.BADNUM,ec=$o,g2e=C0.clearOutline,n8=tw,y2e=cse,m2e=Ns.getModuleCalcData,xz=Za.relinkPrivateKeys,hg=Za._,ma=so.exports={};Za.extendFlat(ma,bi);ma.attributes=Ni;ma.attributes.type.values=ma.allTypes;ma.fontAttrs=Ho;ma.layoutAttributes=Ty;ma.fontWeight="normal";var fw=ma.transformsRegistry,cw=h2e();ma.executeAPICommand=cw.executeAPICommand;ma.computeAPICommandBindings=cw.computeAPICommandBindings;ma.manageCommandObserver=cw.manageCommandObserver;ma.hasSimpleAPICommandBindings=cw.hasSimpleAPICommandBindings;ma.redrawText=function(e){return e=Za.getGraphDiv(e),new Promise(function(r){setTimeout(function(){!e._fullLayout||(bi.getComponentMethod("annotations","draw")(e),bi.getComponentMethod("legend","draw")(e),bi.getComponentMethod("colorbar","draw")(e),r(ma.previousPromises(e)))},300)})};ma.resize=function(e){e=Za.getGraphDiv(e);var r,n=new Promise(function(i,s){(!e||Za.isHidden(e))&&s(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(r=e._resolveResize),e._resolveResize=i,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||Za.isHidden(e)){i(e);return}delete e.layout.width,delete e.layout.height;var o=e.changed;e.autoplay=!0,bi.call("relayout",e,{autosize:!0}).then(function(){e.changed=o,e._resolveResize===i&&(delete e._resolveResize,i(e))})},100)});return r&&r(n),n};ma.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})};ma.addLinks=function(e){if(!(!e._context.showLink&&!e._context.showSources)){var r=e._fullLayout,n=Za.ensureSingle(r._paper,"text","js-plot-link-container",function(u){u.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:_se.defaultLine,"pointer-events":"all"}).each(function(){var f=xse.select(this);f.append("tspan").classed("js-link-to-tool",!0),f.append("tspan").classed("js-link-spacer",!0),f.append("tspan").classed("js-sourcelinks",!0)})}),i=n.node(),s={y:r._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=r.width-20?(s["text-anchor"]="start",s.x=5):(s["text-anchor"]="end",s.x=r._paper.attr("width")-7),n.attr(s);var o=n.select(".js-link-to-tool"),a=n.select(".js-link-spacer"),l=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&x2e(e,o),a.text(o.text()&&l.text()?" - ":"")}};function x2e(e,r){r.text("");var n=r.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",function(){ma.sendDataToCloud(e)});else{var i=window.location.pathname.split("/"),s=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+s})}}t(x2e,"positionPlayWithData");ma.sendDataToCloud=function(e){var r=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(!!r){e.emit("plotly_beforeexport");var n=xse.select(e).append("div").attr("id","hiddenform").style("display","none"),i=n.append("form").attr({action:r+"/external",method:"post",target:"_blank"}),s=i.append("input").attr({type:"text",name:"data"});return s.node().value=ma.graphJson(e,!1,"keepdata"),i.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1}};var b2e=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_2e=["year","month","dayMonth","dayMonthYear"];ma.supplyDefaults=function(e,r){var n=r&&r.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults){delete i._skipDefaults;return}var s=e._fullLayout={},o=e.layout||{},a=e._fullData||[],l=e._fullData=[],u=e.data||[],f=e.calcdata||[],h=e._context||{},v;e._transitionData||ma.createTransitionData(e),s._dfltTitle={plot:hg(e,"Click to enter Plot title"),x:hg(e,"Click to enter X axis title"),y:hg(e,"Click to enter Y axis title"),colorbar:hg(e,"Click to enter Colorscale title"),annotation:hg(e,"new text")},s._traceWord=hg(e,"trace");var c=kN(e,b2e);if(s._mapboxAccessToken=h.mapboxAccessToken,i._initialAutoSizeIsDone){var d=i.width,g=i.height;ma.supplyLayoutGlobalDefaults(o,s,c),o.width||(s.width=d),o.height||(s.height=g),ma.sanitizeMargins(s)}else{ma.supplyLayoutGlobalDefaults(o,s,c);var p=!o.width||!o.height,b=s.autosize,m=h.autosizable,y=p&&(b||m);y?ma.plotAutoSize(e,o,s):p&&ma.sanitizeMargins(s),!b&&p&&(o.width=s.width,o.height=s.height)}s._d3locale=A2e(c,s.separators),s._extraFormat=kN(e,_2e),s._initialAutoSizeIsDone=!0,s._dataLength=u.length,s._modules=[],s._visibleModules=[],s._basePlotModules=[];var T=s._subplots=T2e(),_=s._splomAxes={x:{},y:{}},M=s._splomSubplots={};s._splomGridDflt={},s._scatterStackOpts={},s._firstScatter={},s._alignmentOpts={},s._colorAxes={},s._requestRangeslider={},s._traceUids=w2e(a,u),s._globalTransforms=(e._context||{}).globalTransforms,ma.supplyDataDefaults(u,l,o,s);var w=Object.keys(_.x),x=Object.keys(_.y);if(w.length>1&&x.length>1){for(bi.getComponentMethod("grid","sizeDefaults")(o,s),v=0;v<w.length;v++)Za.pushUnique(T.xaxis,w[v]);for(v=0;v<x.length;v++)Za.pushUnique(T.yaxis,x[v]);for(var A in M)Za.pushUnique(T.cartesian,A)}if(s._has=ma._hasPlotType.bind(s),a.length===l.length)for(v=0;v<l.length;v++)xz(l[v],a[v]);ma.supplyLayoutModuleDefaults(o,s,l,e._transitionData);var S=s._visibleModules,k=[];for(v=0;v<S.length;v++){var L=S[v].crossTraceDefaults;L&&Za.pushUnique(k,L)}for(v=0;v<k.length;v++)k[v](l,s);s._hasOnlyLargeSploms=s._basePlotModules.length===1&&s._basePlotModules[0].name==="splom"&&w.length>15&&x.length>15&&s.shapes.length===0&&s.images.length===0,ma.linkSubplots(l,s,a,i),ma.cleanPlot(l,s,a,i);var P=!!(i._has&&i._has("gl2d")),D=!!(s._has&&s._has("gl2d")),B=!!(i._has&&i._has("cartesian")),z=!!(s._has&&s._has("cartesian")),R=B||P,F=z||D;R&&!F?i._bgLayer.remove():F&&!R&&(s._shouldCreateBgLayer=!0),i._zoomlayer&&!e._dragging&&g2e({_fullLayout:i}),S2e(l,s),xz(s,i),bi.getComponentMethod("colorscale","crossTraceDefaults")(l,s),s._preGUI||(s._preGUI={}),s._tracePreGUI||(s._tracePreGUI={});var O=s._tracePreGUI,q={},H;for(H in O)q[H]="old";for(v=0;v<l.length;v++)H=l[v]._fullInput.uid,q[H]||(O[H]={}),q[H]="new";for(H in q)q[H]==="old"&&delete O[H];Tse(s),bi.getComponentMethod("rangeslider","makeData")(s),!n&&f.length===l.length&&ma.supplyDefaultsUpdateCalc(f,l)};ma.supplyDefaultsUpdateCalc=function(e,r){for(var n=0;n<r.length;n++){var i=r[n],s=(e[n]||[])[0];if(s&&s.trace){var o=s.trace;if(o._hasCalcTransform){var a=o._arrayAttrs,l,u,f;for(l=0;l<a.length;l++)u=a[l],f=Za.nestedProperty(o,u).get().slice(),Za.nestedProperty(i,u).set(f)}s.trace=i}}};function w2e(e,r){var n=r.length,i=[],s,o;for(s=0;s<e.length;s++){var a=e[s]._fullInput;a!==o&&i.push(a),o=a}var l=i.length,u=new Array(n),f={};function h(d,g){u[g]=d,f[d]=1}t(h,"setUid");function v(d,g){if(d&&typeof d=="string"&&!f[d])return h(d,g),!0}for(t(v,"tryUid"),s=0;s<n;s++){var c=r[s].uid;typeof c=="number"&&(c=String(c)),!v(c,s)&&(s<l&&v(i[s].uid,s)||h(Za.randstr(f),s))}return u}t(w2e,"getTraceUids");function T2e(){var e=bi.collectableSubplotTypes,r={},n,i;if(!e){e=[];var s=bi.subplotsRegistry;for(var o in s){var a=s[o],l=a.attr;if(l&&(e.push(o),Array.isArray(l)))for(i=0;i<l.length;i++)Za.pushUnique(e,l[i])}}for(n=0;n<e.length;n++)r[e[n]]=[];return r}t(T2e,"emptySubplotLists");function kN(e,r){var n=e._context.locale;n||(n="en-US");var i=!1,s={};function o(v){for(var c=!0,d=0;d<r.length;d++){var g=r[d];s[g]||(v[g]?s[g]=v[g]:c=!1)}c&&(i=!0)}t(o,"includeFormat");for(var a=0;a<2;a++){for(var l=e._context.locales,u=0;u<2;u++){var f=(l[n]||{}).format;if(f&&(o(f),i))break;l=bi.localeRegistry}var h=n.split("-")[0];if(i||h===n)break;n=h}return i||o(bi.localeRegistry.en.format),s}t(kN,"getFormatObj");function A2e(e,r){return e.decimal=r.charAt(0),e.thousands=r.charAt(1),{numberFormat:function(n){try{n=d2e(e).format(Za.adjustFormat(n))}catch{return Za.warnBadFormat(n),Za.noFormat}return n},timeFormat:v2e(e).utcFormat}}t(A2e,"getFormatter");function S2e(e,r){var n,i=[];r.meta&&(n=r._meta={meta:r.meta,layout:{meta:r.meta}});for(var s=0;s<e.length;s++){var o=e[s];o.meta?i[o.index]=o._meta={meta:o.meta}:r.meta&&(o._meta={meta:r.meta}),r.meta&&(o._meta.layout={meta:r.meta})}i.length&&(n||(n=r._meta={}),n.data=i)}t(S2e,"fillMetaTextHelpers");ma.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])};ma._hasPlotType=function(e){var r,n=this._basePlotModules||[];for(r=0;r<n.length;r++)if(n[r].name===e)return!0;var i=this._modules||[];for(r=0;r<i.length;r++){var s=i[r].name;if(s===e)return!0;var o=bi.modules[s];if(o&&o.categories[e])return!0}return!1};ma.cleanPlot=function(e,r,n,i){var s,o,a=i._basePlotModules||[];for(s=0;s<a.length;s++){var l=a[s];l.clean&&l.clean(e,r,n,i)}var u=i._has&&i._has("gl"),f=r._has&&r._has("gl");u&&!f&&i._glcontainer!==void 0&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var h=!!i._infolayer;e:for(s=0;s<n.length;s++){var v=n[s],c=v.uid;for(o=0;o<e.length;o++){var d=e[o];if(c===d.uid)continue e}h&&i._infolayer.select(".cb"+c).remove()}};ma.linkSubplots=function(e,r,n,i){var s,o,a=i._plots||{},l=r._plots={},u=r._subplots,f={_fullData:e,_fullLayout:r},h=u.cartesian.concat(u.gl2d||[]);for(s=0;s<h.length;s++){var v=h[s],c=a[v],d=ec.getFromId(f,v,"x"),g=ec.getFromId(f,v,"y"),p;for(c?p=l[v]=c:(p=l[v]={},p.id=v),d._counterAxes.push(g._id),g._counterAxes.push(d._id),d._subplotsWith.push(v),g._subplotsWith.push(v),p.xaxis=d,p.yaxis=g,p._hasClipOnAxisFalse=!1,o=0;o<e.length;o++){var b=e[o];if(b.xaxis===p.xaxis._id&&b.yaxis===p.yaxis._id&&b.cliponaxis===!1){p._hasClipOnAxisFalse=!0;break}}}var m=ec.list(f,null,!0),y;for(s=0;s<m.length;s++){y=m[s];var T=null;y.overlaying&&(T=ec.getFromId(f,y.overlaying),T&&T.overlaying&&(y.overlaying=!1,T=null)),y._mainAxis=T||y,T&&(y.domain=T.domain.slice()),y._anchorAxis=y.anchor==="free"?null:ec.getFromId(f,y.anchor)}for(s=0;s<m.length;s++)if(y=m[s],y._counterAxes.sort(ec.idSort),y._subplotsWith.sort(Za.subplotSort),y._mainSubplot=M2e(y,r),y._counterAxes.length&&(y.spikemode&&y.spikemode.indexOf("across")!==-1||y.automargin&&y.mirror&&y.anchor!=="free"||bi.getComponentMethod("rangeslider","isVisible")(y))){var _=1,M=0;for(o=0;o<y._counterAxes.length;o++){var w=ec.getFromId(f,y._counterAxes[o]);_=Math.min(_,w.domain[0]),M=Math.max(M,w.domain[1])}_<M&&(y._counterDomainMin=_,y._counterDomainMax=M)}};function M2e(e,r){var n={_fullLayout:r},i=e._id.charAt(0)==="x",s=e._mainAxis._anchorAxis,o="",a="",l="";if(s&&(l=s._mainAxis._id,o=i?e._id+l:l+e._id),!o||!r._plots[o]){o="";for(var u=e._counterAxes,f=0;f<u.length;f++){var h=u[f],v=i?e._id+h:h+e._id;a||(a=v);var c=ec.getFromId(n,h);if(l&&c.overlaying===l){o=v;break}}}return o||a}t(M2e,"findMainSubplot");ma.clearExpandedTraceDefaultColors=function(e){var r,n,i;function s(a,l,u,f){n[f]=l,n.length=f+1,a.valType==="color"&&a.dflt===void 0&&r.push(n.join("."))}for(t(s,"locateColorAttrs"),n=[],r=e._module._colorAttrs,r||(e._module._colorAttrs=r=[],bse.crawl(e._module.attributes,s)),i=0;i<r.length;i++){var o=Za.nestedProperty(e,"_input."+r[i]);o.get()||Za.nestedProperty(e,r[i]).set(null)}};ma.supplyDataDefaults=function(e,r,n,i){var s=i._modules,o=i._visibleModules,a=i._basePlotModules,l=0,u=0,f,h,v;i._transformModules=[];function c(x){r.push(x);var A=x._module;!A||(Za.pushUnique(s,A),x.visible===!0&&Za.pushUnique(o,A),Za.pushUnique(a,x._module.basePlotModule),l++,x._input.visible!==!1&&u++)}t(c,"pushModule");var d={},g=[],p=(n.template||{}).data||{},b=p2e.traceTemplater(p);for(f=0;f<e.length;f++){if(v=e[f],h=b.newTrace(v),h.uid=i._traceUids[f],ma.supplyTraceDefaults(v,h,u,i,f),h.index=f,h._input=v,h._expandedIndex=l,h.transforms&&h.transforms.length)for(var m=v.visible!==!1&&h.visible===!1,y=k2e(h,r,n,i),T=0;T<y.length;T++){var _=y[T],M={_template:h._template,type:h.type,uid:h.uid+T};m&&_.visible===!1&&delete _.visible,ma.supplyTraceDefaults(_,M,l,i,f),xz(M,_),M.index=f,M._input=v,M._fullInput=h,M._expandedIndex=l,M._expandedInput=_,c(M)}else h._fullInput=h,h._expandedInput=h,c(h);bi.traceIs(h,"carpetAxis")&&(d[h.carpet]=h),bi.traceIs(h,"carpetDependent")&&g.push(f)}for(f=0;f<g.length;f++)if(h=r[g[f]],!!h.visible){var w=d[h.carpet];if(h._carpet=w,!w||!w.visible){h.visible=!1;continue}h.xaxis=w.xaxis,h.yaxis=w.yaxis}};ma.supplyAnimationDefaults=function(e){e=e||{};var r,n={};function i(s,o){return Za.coerce(e||{},n,n8,s,o)}if(t(i,"coerce"),i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(n.frame=[],r=0;r<e.frame.length;r++)n.frame[r]=ma.supplyAnimationFrameDefaults(e.frame[r]||{});else n.frame=ma.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(n.transition=[],r=0;r<e.transition.length;r++)n.transition[r]=ma.supplyAnimationTransitionDefaults(e.transition[r]||{});else n.transition=ma.supplyAnimationTransitionDefaults(e.transition||{});return n};ma.supplyAnimationFrameDefaults=function(e){var r={};function n(i,s){return Za.coerce(e||{},r,n8.frame,i,s)}return t(n,"coerce"),n("duration"),n("redraw"),r};ma.supplyAnimationTransitionDefaults=function(e){var r={};function n(i,s){return Za.coerce(e||{},r,n8.transition,i,s)}return t(n,"coerce"),n("duration"),n("easing"),r};ma.supplyFrameDefaults=function(e){var r={};function n(i,s){return Za.coerce(e,r,y2e,i,s)}return t(n,"coerce"),n("group"),n("name"),n("traces"),n("baseframe"),n("data"),n("layout"),r};ma.supplyTraceDefaults=function(e,r,n,i,s){var o=i.colorway||_se.defaults,a=o[n%o.length],l;function u(y,T){return Za.coerce(e,r,ma.attributes,y,T)}t(u,"coerce");var f=u("visible");u("type"),u("name",i._traceWord+" "+s),u("uirevision",i.uirevision);var h=ma.getModule(r);if(r._module=h,h){var v=h.basePlotModule,c=v.attr,d=v.attributes;if(c&&d){var g=i._subplots,p="";if(f||v.name!=="gl2d"){if(Array.isArray(c))for(l=0;l<c.length;l++){var b=c[l],m=Za.coerce(e,r,d,b);g[b]&&Za.pushUnique(g[b],m),p+=m}else p=Za.coerce(e,r,d,c);g[v.name]&&Za.pushUnique(g[v.name],p)}}}return f&&(u("customdata"),u("ids"),u("meta"),bi.traceIs(r,"showLegend")?(Za.coerce(e,r,h.attributes.showlegend?h.attributes:ma.attributes,"showlegend"),u("legendwidth"),u("legendgroup"),u("legendgrouptitle.text"),u("legendrank"),r._dfltShowLegend=!0):r._dfltShowLegend=!1,h&&h.supplyDefaults(e,r,a,i),bi.traceIs(r,"noOpacity")||u("opacity"),bi.traceIs(r,"notLegendIsolatable")&&(r.visible=!!r.visible),bi.traceIs(r,"noHover")||(r.hovertemplate||Za.coerceHoverinfo(e,r,i),r.type!=="parcats"&&bi.getComponentMethod("fx","supplyDefaults")(e,r,a,i)),h&&h.selectPoints&&u("selectedpoints"),ma.supplyTransformDefaults(e,r,i)),r};function wse(e){var r=e.transforms;if(Array.isArray(r)&&r.length)for(var n=0;n<r.length;n++){var i=r[n],s=i._module||fw[i.type];if(s&&s.makesData)return!0}return!1}t(wse,"hasMakesDataTransform");ma.hasMakesDataTransform=wse;ma.supplyTransformDefaults=function(e,r,n){if(!!(r._length||wse(e))){var i=n._globalTransforms||[],s=n._transformModules||[];if(!(!Array.isArray(e.transforms)&&i.length===0))for(var o=e.transforms||[],a=i.concat(o),l=r.transforms=[],u=0;u<a.length;u++){var f=a[u],h=f.type,v=fw[h],c,d=!(f._module&&f._module===v),g=v&&typeof v.transform=="function";v||Za.warn("Unrecognized transform type "+h+"."),v&&v.supplyDefaults&&(d||g)?(c=v.supplyDefaults(f,r,n,e),c.type=h,c._module=v,Za.pushUnique(s,v)):c=Za.extendFlat({},f),l.push(c)}}};function k2e(e,r,n,i){for(var s=e.transforms,o=[e],a=0;a<s.length;a++){var l=s[a],u=fw[l.type];u&&u.transform&&(o=u.transform(o,{transform:l,fullTrace:e,fullData:r,layout:n,fullLayout:i,transformIndex:a}))}return o}t(k2e,"applyTransforms");ma.supplyLayoutGlobalDefaults=function(e,r,n){function i(f,h){return Za.coerce(e,r,ma.layoutAttributes,f,h)}t(i,"coerce");var s=e.template;Za.isPlainObject(s)&&(r.template=s,r._template=s.layout,r._dataTemplate=s.data),i("autotypenumbers");var o=Za.coerceFont(i,"font"),a=o.size;Za.coerceFont(i,"title.font",Za.extendFlat({},o,{size:Math.round(a*1.4)})),i("title.text",r._dfltTitle.plot),i("title.xref"),i("title.yref"),i("title.x"),i("title.y"),i("title.xanchor"),i("title.yanchor"),i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l");var l=i("uniformtext.mode");l&&i("uniformtext.minsize"),i("autosize",!(e.width&&e.height)),i("width"),i("height"),i("minreducedwidth"),i("minreducedheight"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),e.width&&e.height&&ma.sanitizeMargins(r),bi.getComponentMethod("grid","sizeDefaults")(e,r),i("paper_bgcolor"),i("separators",n.decimal+n.thousands),i("hidesources"),i("colorway"),i("datarevision");var u=i("uirevision");i("editrevision",u),i("selectionrevision",u),bi.getComponentMethod("modebar","supplyLayoutDefaults")(e,r),bi.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,r,i),bi.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,r,i),i("meta"),Za.isPlainObject(e.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),bi.getComponentMethod("calendars","handleDefaults")(e,r,"calendar"),bi.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,r,i)};function ib(e){return typeof e=="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}t(ib,"getComputedSize");ma.plotAutoSize=t(function(r,n,i){var s=r._context||{},o=s.frameMargins,a,l,u=Za.isPlotDiv(r);if(u&&r.emit("plotly_autosize"),s.fillFrame)a=window.innerWidth,l=window.innerHeight,document.body.style.overflow="hidden";else{var f=u?window.getComputedStyle(r):{};if(a=ib(f.width)||ib(f.maxWidth)||i.width,l=ib(f.height)||ib(f.maxHeight)||i.height,F_(o)&&o>0){var h=1-2*o;a=Math.round(h*a),l=Math.round(h*l)}}var v=ma.layoutAttributes.width.min,c=ma.layoutAttributes.height.min;a<v&&(a=v),l<c&&(l=c);var d=!n.width&&Math.abs(i.width-a)>1,g=!n.height&&Math.abs(i.height-l)>1;(g||d)&&(d&&(i.width=a),g&&(i.height=l)),r._initialAutoSize||(r._initialAutoSize={width:a,height:l}),ma.sanitizeMargins(i)},"plotAutoSize");ma.supplyLayoutModuleDefaults=function(e,r,n,i){var s=bi.componentsRegistry,o=r._basePlotModules,a,l,u,f=bi.subplotsRegistry.cartesian;for(a in s)u=s[a],u.includeBasePlot&&u.includeBasePlot(e,r);o.length||o.push(f),r._has("cartesian")&&(bi.getComponentMethod("grid","contentDefaults")(e,r),f.finalizeSubplots(e,r));for(var h in r._subplots)r._subplots[h].sort(Za.subplotSort);for(l=0;l<o.length;l++)u=o[l],u.supplyLayoutDefaults&&u.supplyLayoutDefaults(e,r,n);var v=r._modules;for(l=0;l<v.length;l++)u=v[l],u.supplyLayoutDefaults&&u.supplyLayoutDefaults(e,r,n);var c=r._transformModules;for(l=0;l<c.length;l++)u=c[l],u.supplyLayoutDefaults&&u.supplyLayoutDefaults(e,r,n,i);for(a in s)u=s[a],u.supplyLayoutDefaults&&u.supplyLayoutDefaults(e,r,n)};ma.purge=function(e){var r=e._fullLayout||{};r._glcontainer!==void 0&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.remove(),r._glcanvas=null),r._modeBar&&r._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),Za.clearThrottle(),Za.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()};ma.style=function(e){var r=e._fullLayout._visibleModules,n=[],i;for(i=0;i<r.length;i++){var s=r[i];s.style&&Za.pushUnique(n,s.style)}for(i=0;i<n.length;i++)n[i](e)};ma.sanitizeMargins=function(e){if(!(!e||!e.margin)){var r=e.width,n=e.height,i=e.margin,s=r-(i.l+i.r),o=n-(i.t+i.b),a;s<0&&(a=(r-1)/(i.l+i.r),i.l=Math.floor(a*i.l),i.r=Math.floor(a*i.r)),o<0&&(a=(n-1)/(i.t+i.b),i.t=Math.floor(a*i.t),i.b=Math.floor(a*i.b))}};ma.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};ma.allowAutoMargin=function(e,r){e._fullLayout._pushmarginIds[r]=1};function Tse(e){var r=e.margin;if(!e._size){var n=e._size={l:Math.round(r.l),r:Math.round(r.r),t:Math.round(r.t),b:Math.round(r.b),p:Math.round(r.pad)};n.w=Math.round(e.width)-n.l-n.r,n.h=Math.round(e.height)-n.t-n.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}t(Tse,"initMargins");var Ase=2,Sse=2;ma.autoMargin=function(e,r,n){var i=e._fullLayout,s=i.width,o=i.height,a=i.margin,l=i.minreducedwidth,u=i.minreducedheight,f=Za.constrain(s-a.l-a.r,Ase,l),h=Za.constrain(o-a.t-a.b,Sse,u),v=Math.max(0,s-f),c=Math.max(0,o-h),d=i._pushmargin,g=i._pushmarginIds;if(a.autoexpand!==!1){if(!n)delete d[r],delete g[r];else{var p=n.pad;if(p===void 0&&(p=Math.min(12,a.l,a.r,a.t,a.b)),v){var b=(n.l+n.r)/v;b>1&&(n.l/=b,n.r/=b)}if(c){var m=(n.t+n.b)/c;m>1&&(n.t/=m,n.b/=m)}var y=n.xl!==void 0?n.xl:n.x,T=n.xr!==void 0?n.xr:n.x,_=n.yt!==void 0?n.yt:n.y,M=n.yb!==void 0?n.yb:n.y;d[r]={l:{val:y,size:n.l+p},r:{val:T,size:n.r+p},b:{val:M,size:n.b+p},t:{val:_,size:n.t+p}},g[r]=1}if(!i._replotting)return ma.doAutoMargin(e)}};ma.doAutoMargin=function(e){var r=e._fullLayout,n=r.width,i=r.height;r._size||(r._size={}),Tse(r);var s=r._size,o=r.margin,a=Za.extendFlat({},s),l=o.l,u=o.r,f=o.t,h=o.b,v=r._pushmargin,c=r._pushmarginIds,d=r.minreducedwidth,g=r.minreducedheight;if(r.margin.autoexpand!==!1){for(var p in v)c[p]||delete v[p];v.base={l:{val:0,size:l},r:{val:1,size:u},t:{val:1,size:f},b:{val:0,size:h}};for(var b in v){var m=v[b].l||{},y=v[b].b||{},T=m.val,_=m.size,M=y.val,w=y.size;for(var x in v){if(F_(_)&&v[x].r){var A=v[x].r.val,S=v[x].r.size;if(A>T){var k=(_*A+(S-n)*T)/(A-T),L=(S*(1-T)+(_-n)*(1-A))/(A-T);k+L>l+u&&(l=k,u=L)}}if(F_(w)&&v[x].t){var P=v[x].t.val,D=v[x].t.size;if(P>M){var B=(w*P+(D-i)*M)/(P-M),z=(D*(1-M)+(w-i)*(1-P))/(P-M);B+z>h+f&&(h=B,f=z)}}}}}var R=Za.constrain(n-o.l-o.r,Ase,d),F=Za.constrain(i-o.t-o.b,Sse,g),O=Math.max(0,n-R),q=Math.max(0,i-F);if(O){var H=(l+u)/O;H>1&&(l/=H,u/=H)}if(q){var j=(h+f)/q;j>1&&(h/=j,f/=j)}if(s.l=Math.round(l),s.r=Math.round(u),s.t=Math.round(f),s.b=Math.round(h),s.p=Math.round(o.pad),s.w=Math.round(n)-s.l-s.r,s.h=Math.round(i)-s.t-s.b,!r._replotting&&ma.didMarginChange(a,s)){"_redrawFromAutoMarginCount"in r?r._redrawFromAutoMarginCount++:r._redrawFromAutoMarginCount=1;var X=3*(1+Object.keys(c).length);if(r._redrawFromAutoMarginCount<X)return bi.call("_doPlot",e);r._size=a,Za.warn("Too many auto-margin redraws.")}E2e(e)};function E2e(e){var r=ec.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(n){for(var i=0;i<r.length;i++){var s=r[i][n];s&&s()}})}t(E2e,"refineTicks");var EN=["l","r","t","b","p","w","h"];ma.didMarginChange=function(e,r){for(var n=0;n<EN.length;n++){var i=EN[n],s=e[i],o=r[i];if(!F_(s)||Math.abs(o-s)>1)return!0}return!1};ma.graphJson=function(e,r,n,i,s,o){(s&&r&&!e._fullData||s&&!r&&!e._fullLayout)&&ma.supplyDefaults(e);var a=s?e._fullData:e.data,l=s?e._fullLayout:e.layout,u=(e._transitionData||{})._frames;function f(c,d){if(typeof c=="function")return d?"_function_":null;if(Za.isPlainObject(c)){var g={},p;return Object.keys(c).sort().forEach(function(b){if(["_","["].indexOf(b.charAt(0))===-1){if(typeof c[b]=="function"){d&&(g[b]="_function");return}if(n==="keepdata"){if(b.substr(b.length-3)==="src")return}else if(n==="keepstream"){if(p=c[b+"src"],typeof p=="string"&&p.indexOf(":")>0&&!Za.isPlainObject(c.stream))return}else if(n!=="keepall"&&(p=c[b+"src"],typeof p=="string"&&p.indexOf(":")>0))return;g[b]=f(c[b],d)}}),g}return Array.isArray(c)?c.map(function(b){return f(b,d)}):Za.isTypedArray(c)?Za.simpleMap(c,Za.identity):Za.isJSDate(c)?Za.ms2DateTimeLocal(+c):c}t(f,"stripObj");var h={data:(a||[]).map(function(c){var d=f(c);return r&&delete d.fit,d})};if(!r&&(h.layout=f(l),s)){var v=l._size;h.layout.computed={margin:{b:v.b,l:v.l,r:v.r,t:v.t}}}return u&&(h.frames=f(u)),o&&(h.config=f(e._context,!0)),i==="object"?h:JSON.stringify(h)};ma.modifyFrames=function(e,r){var n,i,s,o=e._transitionData._frames,a=e._transitionData._frameHash;for(n=0;n<r.length;n++)switch(i=r[n],i.type){case"replace":s=i.value;var l=(o[i.index]||{}).name,u=s.name;o[i.index]=a[u]=s,u!==l&&(delete a[l],a[u]=s);break;case"insert":s=i.value,a[s.name]=s,o.splice(i.index,0,s);break;case"delete":s=o[i.index],delete a[s.name],o.splice(i.index,1);break}return Promise.resolve()};ma.computeFrame=function(e,r){var n=e._transitionData._frameHash,i,s,o,a;if(!r)throw new Error("computeFrame must be given a string frame name");var l=n[r.toString()];if(!l)return!1;for(var u=[l],f=[l.name];l.baseframe&&(l=n[l.baseframe.toString()])&&f.indexOf(l.name)===-1;)u.push(l),f.push(l.name);for(var h={};l=u.pop();)if(l.layout&&(h.layout=ma.extendLayout(h.layout,l.layout)),l.data){if(h.data||(h.data=[]),s=l.traces,!s)for(s=[],i=0;i<l.data.length;i++)s[i]=i;for(h.traces||(h.traces=[]),i=0;i<l.data.length;i++)o=s[i],o!=null&&(a=h.traces.indexOf(o),a===-1&&(a=h.data.length,h.traces[a]=o),h.data[a]=ma.extendTrace(h.data[a],l.data[i]))}return h};ma.recomputeFrameHash=function(e){for(var r=e._transitionData._frameHash={},n=e._transitionData._frames,i=0;i<n.length;i++){var s=n[i];s&&s.name&&(r[s.name]=s)}};ma.extendObjectWithContainers=function(e,r,n){var i,s,o,a,l,u,f,h,v=Za.extendDeepNoArrays({},r||{}),c=Za.expandObjectPaths(v),d={};if(n&&n.length)for(o=0;o<n.length;o++)i=Za.nestedProperty(c,n[o]),s=i.get(),s===void 0?Za.nestedProperty(d,n[o]).set(null):(i.set(null),Za.nestedProperty(d,n[o]).set(s));if(e=Za.extendDeepNoArrays(e||{},c),n&&n.length){for(o=0;o<n.length;o++)if(l=Za.nestedProperty(d,n[o]),f=l.get(),!!f){for(u=Za.nestedProperty(e,n[o]),h=u.get(),Array.isArray(h)||(h=[],u.set(h)),a=0;a<f.length;a++){var g=f[a];g===null?h[a]=null:h[a]=ma.extendObjectWithContainers(h[a],g)}u.set(h)}}return e};ma.dataArrayContainers=["transforms","dimensions"];ma.layoutArrayContainers=bi.layoutArrayContainers;ma.extendTrace=function(e,r){return ma.extendObjectWithContainers(e,r,ma.dataArrayContainers)};ma.extendLayout=function(e,r){return ma.extendObjectWithContainers(e,r,ma.layoutArrayContainers)};ma.transition=function(e,r,n,i,s,o){var a={redraw:s.redraw},l={},u=[];return a.prepareFn=function(){for(var f=Array.isArray(r)?r.length:0,h=i.slice(0,f),v=0;v<h.length;v++){var c=h[v],d=e._fullData[c],g=d._module;if(!!g){if(g.animatable){var p=g.basePlotModule.name;l[p]||(l[p]=[]),l[p].push(c)}e.data[h[v]]=ma.extendTrace(e.data[h[v]],r[v])}}var b=Za.expandObjectPaths(Za.extendDeepNoArrays({},n)),m=/^[xy]axis[0-9]*$/;for(var y in b)!m.test(y)||delete b[y].range;ma.extendLayout(e.layout,b),delete e.calcdata,ma.supplyDefaults(e),ma.doCalcdata(e);var T=Za.expandObjectPaths(n);if(T){var _=e._fullLayout._plots;for(var M in _){var w=_[M],x=w.xaxis,A=w.yaxis,S=x.range.slice(),k=A.range.slice(),L=null,P=null,D=null,B=null;Array.isArray(T[x._name+".range"])?L=T[x._name+".range"].slice():Array.isArray((T[x._name]||{}).range)&&(L=T[x._name].range.slice()),Array.isArray(T[A._name+".range"])?P=T[A._name+".range"].slice():Array.isArray((T[A._name]||{}).range)&&(P=T[A._name].range.slice()),S&&L&&(x.r2l(S[0])!==x.r2l(L[0])||x.r2l(S[1])!==x.r2l(L[1]))&&(D={xr0:S,xr1:L}),k&&P&&(A.r2l(k[0])!==A.r2l(P[0])||A.r2l(k[1])!==A.r2l(P[1]))&&(B={yr0:k,yr1:P}),(D||B)&&u.push(Za.extendFlat({plotinfo:w},D,B))}}return Promise.resolve()},a.runFn=function(f){var h,v=e._fullLayout._basePlotModules,c=u.length,d;if(n)for(d=0;d<v.length;d++)v[d].transitionAxes&&v[d].transitionAxes(e,u,o,f);c?(h=Za.extendFlat({},o),h.duration=0,delete l.cartesian):h=o;for(var g in l){var p=l[g],b=e._fullData[p[0]]._module;b.basePlotModule.plot(e,p,h,f)}},Mse(e,o,a)};ma.transitionFromReact=function(e,r,n,i){var s=e._fullLayout,o=s.transition,a={},l=[];return a.prepareFn=function(){var u=s._plots;a.redraw=!1,r.anim==="some"&&(a.redraw=!0),n.anim==="some"&&(a.redraw=!0);for(var f in u){var h=u[f],v=h.xaxis,c=h.yaxis,d=i[v._name].range.slice(),g=i[c._name].range.slice(),p=v.range.slice(),b=c.range.slice();v.setScale(),c.setScale();var m=null,y=null;(v.r2l(d[0])!==v.r2l(p[0])||v.r2l(d[1])!==v.r2l(p[1]))&&(m={xr0:d,xr1:p}),(c.r2l(g[0])!==c.r2l(b[0])||c.r2l(g[1])!==c.r2l(b[1]))&&(y={yr0:g,yr1:b}),(m||y)&&l.push(Za.extendFlat({plotinfo:h},m,y))}return Promise.resolve()},a.runFn=function(u){for(var f=e._fullData,h=e._fullLayout,v=h._basePlotModules,c,d,g,p=[],b=0;b<f.length;b++)p.push(b);function m(){if(!!e._fullLayout)for(var T=0;T<v.length;T++)v[T].transitionAxes&&v[T].transitionAxes(e,l,c,u)}t(m,"transitionAxes");function y(){if(!!e._fullLayout)for(var T=0;T<v.length;T++)v[T].plot(e,g,d,u)}t(y,"transitionTraces"),l.length&&r.anim?o.ordering==="traces first"?(c=Za.extendFlat({},o,{duration:0}),g=p,d=o,setTimeout(m,o.duration),y()):(c=o,g=null,d=Za.extendFlat({},o,{duration:0}),setTimeout(y,c.duration),m()):l.length?(c=o,m()):r.anim&&(g=p,d=o,y())},Mse(e,o,a)};function Mse(e,r,n){var i=!1;function s(v){var c=Promise.resolve();if(!v)return c;for(;v.length;)c=c.then(v.shift());return c}t(s,"executeCallbacks");function o(v){if(!!v)for(;v.length;)v.shift()}t(o,"flushCallbacks");function a(){return e.emit("plotly_transitioning",[]),new Promise(function(v){e._transitioning=!0,r.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){i=!0}),n.redraw&&e._transitionData._interruptCallbacks.push(function(){return bi.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var c=0,d=0;function g(){return c++,function(){d++,!i&&d===c&&l(v)}}t(g,"makeCallback"),n.runFn(g),setTimeout(g())})}t(a,"executeTransitions");function l(v){if(!!e._transitionData)return o(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(n.redraw)return bi.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(v)}t(l,"completeTransition");function u(){if(!!e._transitionData)return e._transitioning=!1,s(e._transitionData._interruptCallbacks)}t(u,"interruptPreviousTransitions");var f=[ma.previousPromises,u,n.prepareFn,ma.rehover,ma.reselect,a],h=Za.syncOrAsync(f,e);return(!h||!h.then)&&(h=Promise.resolve()),h.then(function(){return e})}t(Mse,"_transition");ma.doCalcdata=function(e,r){var n=ec.list(e),i=e._fullData,s=e._fullLayout,o,a,l,u,f=new Array(i.length),h=(e.calcdata||[]).slice();for(e.calcdata=f,s._numBoxes=0,s._numViolins=0,s._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,s._piecolormap={},s._sunburstcolormap={},s._treemapcolormap={},s._iciclecolormap={},s._funnelareacolormap={},l=0;l<i.length;l++)if(Array.isArray(r)&&r.indexOf(l)===-1){f[l]=h[l];continue}for(l=0;l<i.length;l++)o=i[l],o._arrayAttrs=bse.findArrayAttributes(o),o._extremes={};var v=s._subplots.polar||[];for(l=0;l<v.length;l++)n.push(s[v[l]].radialaxis,s[v[l]].angularaxis);for(var c in s._colorAxes){var d=s[c];d.cauto!==!1&&(delete d.cmin,delete d.cmax)}var g=!1;function p(y){if(o=i[y],a=o._module,o.visible===!0&&o.transforms){if(a&&a.calc){var T=a.calc(e,o);T[0]&&T[0].t&&T[0].t._scene&&delete T[0].t._scene.dirty}for(u=0;u<o.transforms.length;u++){var _=o.transforms[u];a=fw[_.type],a&&a.calcTransform&&(o._hasCalcTransform=!0,g=!0,a.calcTransform(e,o,_))}}}t(p,"transformCalci");function b(y,T){if(o=i[y],a=o._module,!!a.isContainer===T){var _=[];if(o.visible===!0&&o._length!==0){delete o._indexToPoints;var M=o.transforms||[];for(u=M.length-1;u>=0;u--)if(M[u].enabled){o._indexToPoints=M[u]._indexToPoints;break}a&&a.calc&&(_=a.calc(e,o))}(!Array.isArray(_)||!_[0])&&(_=[{x:MN,y:MN}]),_[0].t||(_[0].t={}),_[0].trace=o,f[y]=_}}for(t(b,"calci"),CN(n,i,s),l=0;l<i.length;l++)b(l,!0);for(l=0;l<i.length;l++)p(l);for(g&&CN(n,i,s),l=0;l<i.length;l++)b(l,!0);for(l=0;l<i.length;l++)b(l,!1);LN(e);var m=L2e(n,e);if(m.length){for(s._numBoxes=0,s._numViolins=0,l=0;l<m.length;l++)b(m[l],!0);for(l=0;l<m.length;l++)b(m[l],!1);LN(e)}bi.getComponentMethod("fx","calc")(e),bi.getComponentMethod("errorbars","calc")(e)};var C2e=/(total|sum|min|max|mean|median) (ascending|descending)/;function L2e(e,r){var n=[],i,s,o,a,l;function u(R,F,O){var q=F._id.charAt(0);if(R==="histogram2dcontour"){var H=F._counterAxes[0],j=ec.getFromId(r,H),X=q==="x"||H==="x"&&j.type==="category",G=q==="y"||H==="y"&&j.type==="category";return function($,te){return $===0||te===0||X&&$===O[te].length-1||G&&te===O.length-1?-1:(q==="y"?te:$)-1}}else return function($,te){return q==="y"?te:$}}t(u,"zMapCategory");var f={min:function(R){return Za.aggNums(Math.min,null,R)},max:function(R){return Za.aggNums(Math.max,null,R)},sum:function(R){return Za.aggNums(function(F,O){return F+O},null,R)},total:function(R){return Za.aggNums(function(F,O){return F+O},null,R)},mean:function(R){return Za.mean(R)},median:function(R){return Za.median(R)}};for(i=0;i<e.length;i++){var h=e[i];if(h.type==="category"){var v=h.categoryorder.match(C2e);if(v){var c=v[1],d=v[2],g=h._id.charAt(0),p=g==="x",b=[];for(s=0;s<h._categories.length;s++)b.push([h._categories[s],[]]);for(s=0;s<h._traceIndices.length;s++){var m=h._traceIndices[s],y=r._fullData[m];if(y.visible===!0){var T=y.type;bi.traceIs(y,"histogram")&&(delete y._xautoBinFinished,delete y._yautoBinFinished);var _=T==="splom",M=T==="scattergl",w=r.calcdata[m];for(o=0;o<w.length;o++){var x=w[o],A,S;if(_){var k=y._axesDim[h._id];if(!p){var L=y._diag[k][0];L&&(h=r._fullLayout[ec.id2name(L)])}var P=x.trace.dimensions[k].values;for(a=0;a<P.length;a++)for(A=h._categoriesMap[P[a]],l=0;l<x.trace.dimensions.length;l++)if(l!==k){var D=x.trace.dimensions[l];b[A][1].push(D.values[a])}}else if(M){for(a=0;a<x.t.x.length;a++)p?(A=x.t.x[a],S=x.t.y[a]):(A=x.t.y[a],S=x.t.x[a]),b[A][1].push(S);x.t&&x.t._scene&&delete x.t._scene.dirty}else if(x.hasOwnProperty("z")){S=x.z;var B=u(y.type,h,S);for(a=0;a<S.length;a++)for(l=0;l<S[a].length;l++)A=B(l,a),A+1&&b[A][1].push(S[a][l])}else for(A=x.p,A===void 0&&(A=x[g]),S=x.s,S===void 0&&(S=x.v),S===void 0&&(S=p?x.y:x.x),Array.isArray(S)||(S===void 0?S=[]:S=[S]),a=0;a<S.length;a++)b[A][1].push(S[a])}}}h._categoriesValue=b;var z=[];for(s=0;s<b.length;s++)z.push([b[s][0],f[c](b[s][1])]);z.sort(function(R,F){return R[1]-F[1]}),h._categoriesAggregatedValue=z,h._initialCategories=z.map(function(R){return R[0]}),d==="descending"&&h._initialCategories.reverse(),n=n.concat(h.sortByInitialCategories())}}}return n}t(L2e,"sortAxisCategoriesByValue");function CN(e,r,n){var i={};function s(u){u.clearCalc(),u.type==="multicategory"&&u.setupMultiCategory(r),i[u._id]=1}t(s,"setupOne"),Za.simpleMap(e,s);for(var o=n._axisMatchGroups||[],a=0;a<o.length;a++)for(var l in o[a])i[l]||s(n[ec.id2name(l)])}t(CN,"setupAxisCategories");function LN(e){var r=e._fullLayout,n=r._visibleModules,i={},s,o,a;for(o=0;o<n.length;o++){var l=n[o],u=l.crossTraceCalc;if(u){var f=l.basePlotModule.name;i[f]?Za.pushUnique(i[f],u):i[f]=[u]}}for(a in i){var h=i[a],v=r._subplots[a];if(Array.isArray(v))for(s=0;s<v.length;s++){var c=v[s],d=a==="cartesian"?r._plots[c]:r[c];for(o=0;o<h.length;o++)h[o](e,d,c)}else for(o=0;o<h.length;o++)h[o](e)}}t(LN,"doCrossTraceCalc");ma.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()};ma.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()};ma.reselect=function(e){var r=e._fullLayout,n=(e.layout||{}).selections,i=r._previousSelections;r._previousSelections=n;var s=r._reselect||JSON.stringify(n)!==JSON.stringify(i);bi.getComponentMethod("selections","reselect")(e,s)};ma.generalUpdatePerTraceModule=function(e,r,n,i){var s=r.traceHash,o={},a;for(a=0;a<n.length;a++){var l=n[a],u=l[0].trace;u.visible&&(o[u.type]=o[u.type]||[],o[u.type].push(l))}for(var f in s)if(!o[f]){var h=s[f][0],v=h[0].trace;v.visible=!1,o[f]=[h]}for(var c in o){var d=o[c],g=d[0][0].trace._module;g.plot(e,r,Za.filterVisible(d),i)}r.traceHash=o};ma.plotBasePlot=function(e,r,n,i,s){var o=bi.getModule(e),a=m2e(r.calcdata,o)[0];o.plot(r,a,i,s)};ma.cleanBasePlot=function(e,r,n,i,s){var o=s._has&&s._has(e),a=n._has&&n._has(e);o&&!a&&s["_"+e+"layer"].selectAll("g.trace").remove()};var dT={exports:{}},Ji={},ic={};(function(e){e.xmlns="http://www.w3.org/2000/xmlns/",e.svg="http://www.w3.org/2000/svg",e.xlink="http://www.w3.org/1999/xlink",e.svgAttrs={xmlns:e.svg,"xmlns:xlink":e.xlink}})(ic);var yl={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}};(function(e){var r=Va.exports,n=Nt.exports,i=n.strTranslate,s=ic,o=yl.LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;e.convertToTspans=function(q,H,j){var X=q.text(),G=!q.attr("data-notex")&&H&&H._context.typesetMath&&typeof MathJax<"u"&&X.match(a),$=r.select(q.node().parentNode);if($.empty())return;var te=q.attr("class")?q.attr("class").split(" ")[0]:"text";te+="-math",$.selectAll("svg."+te).remove(),$.selectAll("g."+te+"-group").remove(),q.style("display",null).attr({"data-unformatted":X,"data-math":"N"});function ee(){$.empty()||(te=q.attr("class")+"-math",$.select("svg."+te).remove()),q.text("").style("white-space","pre");var ie=z(q.node(),X);ie&&q.style("pointer-events","all"),e.positionText(q),j&&j.call(q)}return t(ee,"showText"),G?(H&&H._promises||[]).push(new Promise(function(ie){q.style("display","none");var se=parseInt(q.node().style.fontSize,10),W={fontSize:se};v(G[2],W,function(ne,he,re){$.selectAll("svg."+te).remove(),$.selectAll("g."+te+"-group").remove();var ae=ne&&ne.select("svg");if(!ae||!ae.node()){ee(),ie();return}var fe=$.append("g").classed(te+"-group",!0).attr({"pointer-events":"none","data-unformatted":X,"data-math":"Y"});fe.node().appendChild(ae.node()),he&&he.node()&&ae.node().insertBefore(he.node().cloneNode(!0),ae.node().firstChild);var ce=re.width,xe=re.height;ae.attr({class:te,height:xe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var Te=q.node().style.fill||"black",me=ae.select("g");me.attr({fill:Te,stroke:Te});var pe=me.node().getBoundingClientRect(),oe=pe.width,de=pe.height;(oe>ce||de>xe)&&(ae.style("overflow","hidden"),pe=ae.node().getBoundingClientRect(),oe=pe.width,de=pe.height);var ye=+q.attr("x"),we=+q.attr("y"),Ee=se||q.node().getBoundingClientRect().height,De=-Ee/4;if(te[0]==="y")fe.attr({transform:"rotate("+[-90,ye,we]+")"+i(-oe/2,De-de/2)});else if(te[0]==="l")we=De-de/2;else if(te[0]==="a"&&te.indexOf("atitle")!==0)ye=0,we=De;else{var Fe=q.attr("text-anchor");ye=ye-oe*(Fe==="middle"?.5:Fe==="end"?1:0),we=we+De-de/2}ae.attr({x:ye,y:we}),j&&j.call(q,fe),ie(fe)})})):ee(),q};var l=/(<|&lt;|&#60;)/g,u=/(>|&gt;|&#62;)/g;function f(q){return q.replace(l,"\\lt ").replace(u,"\\gt ")}t(f,"cleanEscapesForTex");var h=[["$","$"],["\\(","\\)"]];function v(q,H,j){var X=parseInt((MathJax.version||"").split(".")[0]);if(X!==2&&X!==3){n.warn("No MathJax version:",MathJax.version);return}var G,$,te,ee,ie=t(function(){return $=n.extendDeepAll({},MathJax.Hub.config),te=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:h},displayAlign:"left"})},"setConfig2"),se=t(function(){$=n.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=h},"setConfig3"),W=t(function(){if(G=MathJax.Hub.config.menuSettings.renderer,G!=="SVG")return MathJax.Hub.setRenderer("SVG")},"setRenderer2"),ne=t(function(){G=MathJax.config.startup.output,G!=="svg"&&(MathJax.config.startup.output="svg")},"setRenderer3"),he=t(function(){var Te="math-output-"+n.randstr({},64);ee=r.select("body").append("div").attr({id:Te}).style({visibility:"hidden",position:"absolute","font-size":H.fontSize+"px"}).text(f(q));var me=ee.node();return X===2?MathJax.Hub.Typeset(me):MathJax.typeset([me])},"initiateMathJax"),re=t(function(){var Te=ee.select(X===2?".MathJax_SVG":".MathJax"),me=!Te.empty()&&ee.select("svg").node();if(!me)n.log("There was an error in the tex syntax.",q),j();else{var pe=me.getBoundingClientRect(),oe;X===2?oe=r.select("body").select("#MathJax_SVG_glyphs"):oe=Te.select("defs"),j(Te,oe,pe)}ee.remove()},"finalizeMathJax"),ae=t(function(){if(G!=="SVG")return MathJax.Hub.setRenderer(G)},"resetRenderer2"),fe=t(function(){G!=="svg"&&(MathJax.config.startup.output=G)},"resetRenderer3"),ce=t(function(){return te!==void 0&&(MathJax.Hub.processSectionDelay=te),MathJax.Hub.Config($)},"resetConfig2"),xe=t(function(){MathJax.config=$},"resetConfig3");X===2?MathJax.Hub.Queue(ie,W,he,re,ae,ce):X===3&&(se(),ne(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){he(),re(),fe(),xe()}))}t(v,"texToSVG");var c={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},d={sub:"0.3em",sup:"-0.6em"},g={sub:"-0.21em",sup:"0.42em"},p="\u200B",b=["http:","https:","mailto:","",void 0,":"],m=e.NEWLINES=/(\r\n?|\n)/g,y=/(<[^<>]*>)/,T=/<(\/?)([^ >]*)(\s+(.*))?>/i,_=/<br(\s+.*)?>/i;e.BR_TAG_ALL=/<br(\s+.*)?>/gi;var M=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,A=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function S(q,H){if(!q)return null;var j=q.match(H),X=j&&(j[3]||j[4]);return X&&D(X)}t(S,"getQuotedMatch");var k=/(^|;)\s*color:/;e.plainText=function(q,H){H=H||{};for(var j=H.len!==void 0&&H.len!==-1?H.len:1/0,X=H.allowedTags!==void 0?H.allowedTags:["br"],G="...",$=G.length,te=q.split(y),ee=[],ie="",se=0,W=0;W<te.length;W++){var ne=te[W],he=ne.match(T),re=he&&he[2].toLowerCase();if(re)X.indexOf(re)!==-1&&(ee.push(ne),ie=re);else{var ae=ne.length;if(se+ae<j)ee.push(ne),se+=ae;else if(se<j){var fe=j-se;ie&&(ie!=="br"||fe<=$||ae<=$)&&ee.pop(),j>$?ee.push(ne.substr(0,fe-$)+G):ee.push(ne.substr(0,fe));break}ie=""}}return ee.join("")};var L={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},P=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function D(q){return q.replace(P,function(H,j){var X;return j.charAt(0)==="#"?X=B(j.charAt(1)==="x"?parseInt(j.substr(2),16):parseInt(j.substr(1),10)):X=L[j],X||H})}t(D,"convertEntities"),e.convertEntities=D;function B(q){if(!(q>1114111)){var H=String.fromCodePoint;if(H)return H(q);var j=String.fromCharCode;return q<=65535?j(q):j((q>>10)+55232,q%1024+56320)}}t(B,"fromCodePoint");function z(q,H){H=H.replace(m," ");var j=!1,X=[],G,$=-1;function te(){$++;var de=document.createElementNS(s.svg,"tspan");r.select(de).attr({class:"line",dy:$*o+"em"}),q.appendChild(de),G=de;var ye=X;if(X=[{node:de}],ye.length>1)for(var we=1;we<ye.length;we++)ee(ye[we])}t(te,"newLine");function ee(de){var ye=de.type,we={},Ee;if(ye==="a"){Ee="a";var De=de.target,Fe=de.href,qe=de.popup;Fe&&(we={"xlink:xlink:show":De==="_blank"||De.charAt(0)!=="_"?"new":"replace",target:De,"xlink:xlink:href":Fe},qe&&(we.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+qe+'");return false;'))}else Ee="tspan";de.style&&(we.style=de.style);var Je=document.createElementNS(s.svg,Ee);if(ye==="sup"||ye==="sub"){ie(G,p),G.appendChild(Je);var Ge=document.createElementNS(s.svg,"tspan");ie(Ge,p),r.select(Ge).attr("dy",g[ye]),we.dy=d[ye],G.appendChild(Je),G.appendChild(Ge)}else G.appendChild(Je);r.select(Je).attr(we),G=de.node=Je,X.push(de)}t(ee,"enterNode");function ie(de,ye){de.appendChild(document.createTextNode(ye))}t(ie,"addTextNode");function se(de){if(X.length===1){n.log("Ignoring unexpected end tag </"+de+">.",H);return}var ye=X.pop();de!==ye.type&&n.log("Start tag <"+ye.type+"> doesnt match end tag <"+de+">. Pretending it did match.",H),G=X[X.length-1].node}t(se,"exitNode");var W=_.test(H);W?te():(G=q,X=[{node:q}]);for(var ne=H.split(y),he=0;he<ne.length;he++){var re=ne[he],ae=re.match(T),fe=ae&&ae[2].toLowerCase(),ce=c[fe];if(fe==="br")te();else if(ce===void 0)ie(G,D(re));else if(ae[1])se(fe);else{var xe=ae[4],Te={type:fe},me=S(xe,M);if(me?(me=me.replace(k,"$1 fill:"),ce&&(me+=";"+ce)):ce&&(me=ce),me&&(Te.style=me),fe==="a"){j=!0;var pe=S(xe,w);if(pe){var oe=R(pe);oe&&(Te.href=oe,Te.target=S(xe,x)||"_blank",Te.popup=S(xe,A))}}ee(Te)}}return j}t(z,"buildSVGText");function R(q){var H=encodeURI(decodeURI(q)),j=document.createElement("a"),X=document.createElement("a");j.href=q,X.href=H;var G=j.protocol,$=X.protocol;return b.indexOf(G)!==-1&&b.indexOf($)!==-1?H:""}t(R,"sanitizeHref"),e.sanitizeHTML=t(function(H){H=H.replace(m," ");for(var j=document.createElement("p"),X=j,G=[],$=H.split(y),te=0;te<$.length;te++){var ee=$[te],ie=ee.match(T),se=ie&&ie[2].toLowerCase();if(se in c)if(ie[1])G.length&&(X=G.pop());else{var W=ie[4],ne=S(W,M),he=ne?{style:ne}:{};if(se==="a"){var re=S(W,w);if(re){var ae=R(re);if(ae){he.href=ae;var fe=S(W,x);fe&&(he.target=fe)}}}var ce=document.createElement(se);X.appendChild(ce),r.select(ce).attr(he),X=ce,G.push(ce)}else X.appendChild(document.createTextNode(D(ee)))}var xe="innerHTML";return j[xe]},"sanitizeHTML"),e.lineCount=t(function(H){return H.selectAll("tspan.line").size()||1},"lineCount"),e.positionText=t(function(H,j,X){return H.each(function(){var G=r.select(this);function $(ie,se){return se===void 0?(se=G.attr(ie),se===null&&(G.attr(ie,0),se=0)):G.attr(ie,se),se}t($,"setOrGet");var te=$("x",j),ee=$("y",X);this.nodeName==="text"&&G.selectAll("tspan.line").attr({x:te,y:ee})})},"positionText");function F(q,H,j){var X=j.horizontalAlign,G=j.verticalAlign||"top",$=q.node().getBoundingClientRect(),te=H.node().getBoundingClientRect(),ee,ie,se;return G==="bottom"?ie=t(function(){return $.bottom-ee.height},"getTop"):G==="middle"?ie=t(function(){return $.top+($.height-ee.height)/2},"getTop"):ie=t(function(){return $.top},"getTop"),X==="right"?se=t(function(){return $.right-ee.width},"getLeft"):X==="center"?se=t(function(){return $.left+($.width-ee.width)/2},"getLeft"):se=t(function(){return $.left},"getLeft"),function(){ee=this.node().getBoundingClientRect();var W=se()-te.left,ne=ie()-te.top,he=j.gd||{};if(j.gd){he._fullLayout._calcInverseTransform(he);var re=n.apply3DTransform(he._fullLayout._invTransform)(W,ne);W=re[0],ne=re[1]}return this.style({top:ne+"px",left:W+"px","z-index":1e3}),this}}t(F,"alignHTMLWith");var O="1px ";e.makeTextShadow=function(q){var H=O,j=O,X=O;return H+j+X+q+", -"+H+"-"+j+X+q+", "+H+"-"+j+X+q+", -"+H+j+X+q},e.makeEditable=function(q,H){var j=H.gd,X=H.delegate,G=r.dispatch("edit","input","cancel"),$=X||q;if(q.style({"pointer-events":X?"none":"all"}),q.size()!==1)throw new Error("boo");function te(){ie(),q.style({opacity:0});var se=$.attr("class"),W;se?W="."+se.split(" ")[0]+"-math-group":W="[class*=-math-group]",W&&r.select(q.node().parentNode).select(W).style({opacity:0})}t(te,"handleClick");function ee(se){var W=se.node(),ne=document.createRange();ne.selectNodeContents(W);var he=window.getSelection();he.removeAllRanges(),he.addRange(ne),W.focus()}t(ee,"selectElementContents");function ie(){var se=r.select(j),W=se.select(".svg-container"),ne=W.append("div"),he=q.node().style,re=parseFloat(he.fontSize||12),ae=H.text;ae===void 0&&(ae=q.attr("data-unformatted")),ne.classed("plugin-editable editable",!0).style({position:"absolute","font-family":he.fontFamily||"Arial","font-size":re,color:H.fill||he.fill||"black",opacity:1,"background-color":H.background||"transparent",outline:"#ffffff33 1px solid",margin:[-re/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ae).call(F(q,W,H)).on("blur",function(){j._editing=!1,q.text(this.textContent).style({opacity:1});var fe=r.select(this).attr("class"),ce;fe?ce="."+fe.split(" ")[0]+"-math-group":ce="[class*=-math-group]",ce&&r.select(q.node().parentNode).select(ce).style({opacity:0});var xe=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),G.edit.call(q,xe)}).on("focus",function(){var fe=this;j._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===fe)return!1;document.activeElement===ne.node()&&ne.node().blur()})}).on("keyup",function(){r.event.which===27?(j._editing=!1,q.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),G.cancel.call(q,this.textContent)):(G.input.call(q,this.textContent),r.select(this).call(F(q,W,H)))}).on("keydown",function(){r.event.which===13&&this.blur()}).call(ee)}return t(ie,"appendEditable"),H.immediate?te():$.on("click",te),r.rebind(q,G,"on")}})(Ji);var bn={exports:{}},R2e=Va.exports,u_=rl.exports,o1=xn,ob=Nt.exports,RN=$a.exports,P2e=by.isValid;function D2e(e,r,n){var i=r?ob.nestedProperty(e,r).get()||{}:e,s=i[n||"color"],o=!1;if(ob.isArrayOrTypedArray(s)){for(var a=0;a<s.length;a++)if(o1(s[a])){o=!0;break}}return ob.isPlainObject(i)&&(o||i.showscale===!0||o1(i.cmin)&&o1(i.cmax)||P2e(i.colorscale)||ob.isPlainObject(i.colorbar))}t(D2e,"hasColorscale$4");var PN=["showscale","autocolorscale","colorscale","reversescale","colorbar"],ym=["min","max","mid","auto"];function kse(e){var r=e._colorAx,n=r||e,i={},s,o,a;for(o=0;o<PN.length;o++)a=PN[o],i[a]=n[a];if(r)for(s="c",o=0;o<ym.length;o++)a=ym[o],i[a]=n["c"+a];else{var l;for(o=0;o<ym.length;o++){if(a=ym[o],l="c"+a,l in n){i[a]=n[l];continue}l="z"+a,l in n&&(i[a]=n[l])}s=l.charAt(0)}return i._sync=function(u,f){var h=ym.indexOf(u)!==-1?s+u:u;n[h]=n["_"+h]=f},i}t(kse,"extractOpts$3");function Ese(e){for(var r=kse(e),n=r.min,i=r.max,s=r.reversescale?Cse(r.colorscale):r.colorscale,o=s.length,a=new Array(o),l=new Array(o),u=0;u<o;u++){var f=s[u];a[u]=n+f[0]*(i-n),l[u]=f[1]}return{domain:a,range:l}}t(Ese,"extractScale");function Cse(e){for(var r=e.length,n=new Array(r),i=r-1,s=0;i>=0;i--,s++){var o=e[i];n[s]=[1-o[0],o[1]]}return n}t(Cse,"flipScale$1");function Lse(e,r){r=r||{};for(var n=e.domain,i=e.range,s=i.length,o=new Array(s),a=0;a<s;a++){var l=u_(i[a]).toRgb();o[a]=[l.r,l.g,l.b,l.a]}var u=R2e.scale.linear().domain(n).range(o).clamp(!0),f=r.noNumericCheck,h=r.returnArray,v;return f&&h?v=u:f?v=t(function(c){return DN(u(c))},"sclFunc"):h?v=t(function(c){return o1(c)?u(c):u_(c).isValid()?c:RN.defaultLine},"sclFunc"):v=t(function(c){return o1(c)?DN(u(c)):u_(c).isValid()?c:RN.defaultLine},"sclFunc"),v.domain=u.domain,v.range=function(){return i},v}t(Lse,"makeColorScaleFunc");function I2e(e,r){return Lse(Ese(e),r)}t(I2e,"makeColorScaleFuncFromTrace");function DN(e){var r={r:e[0],g:e[1],b:e[2],a:e[3]};return u_(r).toRgbString()}t(DN,"colorArray2rbga");var Qu={hasColorscale:D2e,extractOpts:kse,extractScale:Ese,flipScale:Cse,makeColorScaleFunc:Lse,makeColorScaleFuncFromTrace:I2e},Rse={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"},Pse=Rse,z2e=Pse.FORMAT_LINK,F2e=Pse.DATE_FORMAT_LINK;function B2e(e,r){return{valType:"string",dflt:"",editType:"none",description:(r?i8:Dse)("hover text",e)+["By default the values are formatted using "+(r?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}t(B2e,"axisHoverFormat$1");function i8(e,r){return["Sets the "+e+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+z2e+"."].join(" ")}t(i8,"descriptionOnlyNumbers");function Dse(e,r){return i8(e,r)+[" And for dates see: "+F2e+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t(Dse,"descriptionWithDates$1");var Vo={axisHoverFormat:B2e,descriptionOnlyNumbers:i8,descriptionWithDates:Dse},pT=Ho,Og=Fo,Ise=yu.dash,zse=cn.extendFlat,IN=ei.templatedArray,zN=Vo.descriptionWithDates,O2e=jn.ONEDAY,Qh=al,gT=Qh.HOUR_PATTERN,yT=Qh.WEEKDAY_PATTERN,FN={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0},description:["Sets the tick mode for this axis.","If *auto*, the number of ticks is set via `nticks`.","If *linear*, the placement of the ticks is determined by","a starting position `tick0` and a tick step `dtick`","(*linear* is the default value if `tick0` and `dtick` are provided).","If *array*, the placement of the ticks is set via `tickvals`","and the tick text is `ticktext`.","(*array* is the default value if `tickvals` is provided)."].join(" ")};function BN(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")}}t(BN,"makeNticks");var ON={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the placement of the first tick on this axis.","Use with `dtick`.","If the axis `type` is *log*, then you must take the log of your starting tick","(e.g. to set the starting tick to 100, set the `tick0` to 2)","except when `dtick`=*L<f>* (see `dtick` for more info).","If the axis `type` is *date*, it should be a date string, like date data.","If the axis `type` is *category*, it should be a number, using the scale where","each category is assigned a serial number from zero in the order it appears."].join(" ")},NN={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"},description:["Sets the step in-between ticks on this axis. Use with `tick0`.","Must be a positive number, or special strings available to *log* and *date* axes.","If the axis `type` is *log*, then ticks are set every 10^(n*dtick) where n","is the tick number. For example,","to set a tick mark at 1, 10, 100, 1000, ... set dtick to 1.","To set tick marks at 1, 100, 10000, ... set dtick to 2.","To set tick marks at 1, 5, 25, 125, 625, 3125, ... set dtick to log_10(5), or 0.69897000433.","*log* has several special values; *L<f>*, where `f` is a positive number,","gives ticks linearly spaced in value (but not position).","For example `tick0` = 0.1, `dtick` = *L0.5* will put ticks at 0.1, 0.6, 1.1, 1.6 etc.","To show powers of 10 plus small digits between, use *D1* (all digits) or *D2* (only 2 and 5).","`tick0` is ignored for *D1* and *D2*.","If the axis `type` is *date*, then you must convert the time to milliseconds.","For example, to set the interval between ticks to one day,","set `dtick` to 86400000.0.","*date* also has special values *M<n>* gives ticks spaced by a number of months.","`n` must be a positive integer.","To set ticks on the 15th of every third month, set `tick0` to *2000-01-15* and `dtick` to *M3*.","To set ticks every 4 years, set `dtick` to *M48*"].join(" ")},qN={valType:"data_array",editType:"ticks",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},UN={valType:"enumerated",values:["outside","inside",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *outside* (*inside*), this axis' are drawn outside (inside)","the axis lines."].join(" ")};function HN(e){var r={valType:"number",min:0,editType:"ticks",description:"Sets the tick length (in px)."};return e||(r.dflt=5),r}t(HN,"makeTicklen");function $N(e){var r={valType:"number",min:0,editType:"ticks",description:"Sets the tick width (in px)."};return e||(r.dflt=1),r}t($N,"makeTickwidth");var VN={valType:"color",dflt:Og.defaultLine,editType:"ticks",description:"Sets the tick color."},GN={valType:"color",dflt:Og.lightLine,editType:"ticks",description:"Sets the color of the grid lines."};function jN(e){var r={valType:"number",min:0,editType:"ticks",description:"Sets the width (in px) of the grid lines."};return e||(r.dflt=1),r}t(jN,"makeGridwidth");var YN=zse({},Ise,{editType:"ticks"}),WN={valType:"boolean",editType:"ticks",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},Jl={visible:{valType:"boolean",editType:"plot",description:["A single toggle to hide the axis while preserving interaction like dragging.","Default is true when a cheater plot is present on the axis, otherwise","false"].join(" ")},color:{valType:"color",dflt:Og.defaultLine,editType:"ticks",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},title:{text:{valType:"string",editType:"ticks",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:pT({editType:"ticks",description:["Sets this axis' title font.","Note that the title's font used to be customized","by the now deprecated `titlefont` attribute."].join(" ")}),standoff:{valType:"number",min:0,editType:"ticks",description:["Sets the standoff distance (in px) between the axis labels and the title text","The default value is a function of the axis tick labels, the title `font.size`","and the axis `linewidth`.","Note that the axis title position is always constrained within the margins,","so the actual standoff distance is always less than the set or default value.","By setting `standoff` and turning on `automargin`, plotly.js will push the","margins to fit the axis title at given standoff distance."].join(" ")},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc",description:["Using *strict* a numeric string in trace data is not converted to a number.","Using *convert types* a numeric string in trace data may be","treated as a number during automatic axis `type` detection.","Defaults to layout.autotypenumbers."].join(" ")},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","Applies only to linear axes."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0,description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},scaleanchor:{valType:"enumerated",values:[Qh.idRegex.x.toString(),Qh.idRegex.y.toString()],editType:"plot",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","changes together with the range of the corresponding axis","such that the scale of pixels per unit is in a constant ratio.","Both axes are still zoomable, but when you zoom one, the other will","zoom the same amount, keeping a fixed midpoint.","`constrain` and `constraintoward` determine how we enforce the constraint.","You can chain these, ie `yaxis: {scaleanchor: *x*}, xaxis2: {scaleanchor: *y*}`","but you can only link axes of the same `type`.","The linked axis can have the opposite letter (to constrain the aspect ratio)","or the same letter (to match scales across subplots).","Loops (`yaxis: {scaleanchor: *x*}, xaxis: {scaleanchor: *y*}` or longer) are redundant","and the last constraint encountered will be ignored to avoid possible","inconsistent constraints via `scaleratio`.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden."].join(" ")},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["If this axis is linked to another by `scaleanchor`, this determines the pixel","to unit scale ratio. For example, if this value is 10, then every unit on","this axis spans 10 times the number of pixels as a unit on the linked axis.","Use this for example to create an elevation profile where the vertical scale","is exaggerated a fixed amount with respect to the horizontal."].join(" ")},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines how that happens:","by increasing the *range*, or by decreasing the *domain*.","Default is *domain* for axes containing image traces, *range* otherwise."].join(" ")},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot",description:["If this axis needs to be compressed (either due to its own `scaleanchor` and","`scaleratio` or those of the other axis), determines which direction we push","the originally specified plot area. Options are *left*, *center* (default),","and *right* for x axes, and *top*, *middle* (default), and *bottom* for y axes."].join(" ")},matches:{valType:"enumerated",values:[Qh.idRegex.x.toString(),Qh.idRegex.y.toString()],editType:"calc",description:["If set to another axis id (e.g. `x2`, `y`), the range of this axis","will match the range of the corresponding axis in data-coordinates space.","Moreover, matching axes share auto-range values, category lists and","histogram auto-bins.","Note that setting axes simultaneously in both a `scaleanchor` and a `matches` constraint","is currently forbidden.","Moreover, note that matching axes must have the same `type`."].join(" ")},rangebreaks:IN("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this axis rangebreak is enabled or disabled.","Please note that `rangebreaks` only work for *date* axis type."].join(" ")},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the lower and upper bounds of this axis rangebreak.","Can be used with `pattern`."].join(" ")},pattern:{valType:"enumerated",values:[yT,gT,""],editType:"calc",description:["Determines a pattern on the time line that generates breaks.","If *"+yT+"* - days of the week in English e.g. 'Sunday' or `sun`","(matching is case-insensitive and considers only the first three characters),","as well as Sunday-based integers between 0 and 6.","If *"+gT+"* - hour (24-hour clock) as decimal numbers between 0 and 24.","for more info.","Examples:","- { pattern: '"+yT+"', bounds: [6, 1] }"," or simply { bounds: ['sat', 'mon'] }","  breaks from Saturday to Monday (i.e. skips the weekends).","- { pattern: '"+gT+"', bounds: [17, 8] }","  breaks from 5pm to 8am (i.e. skips non-work hours)."].join(" ")},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"},description:["Sets the coordinate values corresponding to the rangebreaks.","An alternative to `bounds`.","Use `dvalue` to set the size of the values along the axis."].join(" ")},dvalue:{valType:"number",editType:"calc",min:0,dflt:O2e,description:["Sets the size of each `values` item.","The default is one day in milliseconds."].join(" ")},editType:"calc"}),tickmode:FN,nticks:BN(),tick0:ON,dtick:NN,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks",description:["Sets the spacing between tick labels as compared to the spacing between ticks.","A value of 1 (default) means each tick gets a label.","A value of 2 means shows every 2nd label.","A larger value n means only every nth tick is labeled.","`tick0` determines which labels are shown.","Not implemented for axes with `type` *log* or *multicategory*, or when `tickmode` is *array*."].join(" ")},tickvals:qN,ticktext:{valType:"data_array",editType:"ticks",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},ticks:UN,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks",description:["Determines where ticks and grid lines are drawn with respect to their","corresponding tick labels.","Only has an effect for axes of `type` *category* or *multicategory*.","When set to *boundaries*, ticks and grid lines are drawn half a category","to the left/bottom of labels."].join(" ")},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks",description:["Determines where tick labels are drawn with respect to their","corresponding ticks and grid lines.","Only has an effect for axes of `type` *date*","When set to *period*, tick labels are drawn in the middle of the period","between ticks."].join(" ")},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc",description:["Determines where tick labels are drawn with respect to the axis","Please note that","top or bottom has no effect on x axes or when `ticklabelmode` is set to *period*.","Similarly","left or right has no effect on y axes or when `ticklabelmode` is set to *period*.","Has no effect on *multicategory* axes or when `tickson` is set to *boundaries*.","When used on axes linked by `matches` or `scaleanchor`,","no extra padding for inside labels would be added by autorange,","so that the scales could match."].join(" ")},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc",description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","Otherwise on *category* and *multicategory* axes the default is *allow*.","In other cases the default is *hide past div*."].join(" ")},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle",description:["Determines if the axis lines or/and ticks are mirrored to","the opposite side of the plotting area.","If *true*, the axis lines are mirrored.","If *ticks*, the axis lines and ticks are mirrored.","If *false*, mirroring is disable.","If *all*, axis lines are mirrored on all shared-axes subplots.","If *allticks*, axis lines and ticks are mirrored","on all shared-axes subplots."].join(" ")},ticklen:HN(),tickwidth:$N(),tickcolor:VN,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks",description:"Determines whether or not the tick labels are drawn."},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks",description:["Determines whether long tick labels automatically grow the figure","margins."].join(" ")},showspikes:{valType:"boolean",dflt:!1,editType:"modebar",description:["Determines whether or not spikes (aka droplines) are drawn for this axis.","Note: This only takes affect when hovermode = closest"].join(" ")},spikecolor:{valType:"color",dflt:null,editType:"none",description:"Sets the spike color. If undefined, will use the series color"},spikethickness:{valType:"number",dflt:3,editType:"none",description:"Sets the width (in px) of the zero line."},spikedash:zse({},Ise,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none",description:["Determines the drawing mode for the spike line","If *toaxis*, the line is drawn from the data point to the axis the ","series is plotted on.","If *across*, the line is drawn across the entire plot area, and","supercedes *toaxis*.","If *marker*, then a marker dot is drawn on the axis the series is","plotted on"].join(" ")},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none",description:"Determines whether spikelines are stuck to the cursor or to the closest datapoints."},tickfont:pT({editType:"ticks",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"ticks",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks",description:["Hide SI prefix for 10^n if |n| is below this number.","This only has an effect when `tickformat` is *SI* or *B*."].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"ticks",description:zN("tick label")},tickformatstops:IN("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not this stop is used.","If `false`, this stop is ignored even within its `dtickrange`."].join(" ")},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks",description:["range [*min*, *max*], where *min*, *max* - dtick values","which describe some zoom level, it is possible to omit *min*","or *max* value by passing *null*"].join(" ")},value:{valType:"string",dflt:"",editType:"ticks",description:["string - dtickformat for described zoom level, the same as *tickformat*"].join(" ")},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:zN("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:Og.defaultLine,editType:"layoutstyle",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle",description:"Sets the width (in px) of the axis line."},showgrid:WN,gridcolor:GN,gridwidth:jN(),griddash:YN,zeroline:{valType:"boolean",editType:"ticks",description:["Determines whether or not a line is drawn at along the 0 value","of this axis.","If *true*, the zero line is drawn on top of the grid lines."].join(" ")},zerolinecolor:{valType:"color",dflt:Og.defaultLine,editType:"ticks",description:"Sets the line color of the zero line."},zerolinewidth:{valType:"number",dflt:1,editType:"ticks",description:"Sets the width (in px) of the zero line."},showdividers:{valType:"boolean",dflt:!0,editType:"ticks",description:["Determines whether or not a dividers are drawn","between the category levels of this axis.","Only has an effect on *multicategory* axes."].join(" ")},dividercolor:{valType:"color",dflt:Og.defaultLine,editType:"ticks",description:["Sets the color of the dividers","Only has an effect on *multicategory* axes."].join(" ")},dividerwidth:{valType:"number",dflt:1,editType:"ticks",description:["Sets the width (in px) of the dividers","Only has an effect on *multicategory* axes."].join(" ")},anchor:{valType:"enumerated",values:["free",Qh.idRegex.x.toString(),Qh.idRegex.y.toString()],editType:"plot",description:["If set to an opposite-letter axis id (e.g. `x2`, `y`), this axis is bound to","the corresponding opposite-letter axis.","If set to *free*, this axis' position is determined by `position`."].join(" ")},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot",description:["Determines whether a x (y) axis is positioned","at the *bottom* (*left*) or *top* (*right*)","of the plotting area."].join(" ")},overlaying:{valType:"enumerated",values:["free",Qh.idRegex.x.toString(),Qh.idRegex.y.toString()],editType:"plot",description:["If set a same-letter axis id, this axis is overlaid on top of","the corresponding same-letter axis, with traces and axes visible for both","axes.","If *false*, this axis does not overlay any same-letter axes.","In this case, for axes with overlapping domains only the highest-numbered","axis will be visible."].join(" ")},minor:{tickmode:FN,nticks:BN("minor"),tick0:ON,dtick:NN,tickvals:qN,ticks:UN,ticklen:HN("minor"),tickwidth:$N("minor"),tickcolor:VN,gridcolor:GN,gridwidth:jN("minor"),griddash:YN,showgrid:WN,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot",description:["Sets the layer on which this axis is displayed.","If *above traces*, this axis is displayed above all the subplot's traces","If *below traces*, this axis is displayed below all the subplot's traces,","but above the grid lines.","Useful when used together with scatter-like traces with `cliponaxis`","set to *false* to show markers and/or text nodes above this axis."].join(" ")},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot",description:["Sets the domain of this axis (in plot fraction)."].join(" ")},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the position of this axis in the plotting space","(in normalized coordinates).","Only has an effect if `anchor` is set to *free*."].join(" ")},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`.","Set `categoryorder` to *total ascending* or *total descending* if order should be determined by the","numerical order of the values.","Similarly, the order can be determined by the min, max, sum, mean or median of all the values."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, and `title` if in `editable: true` configuration.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks",description:["Obsolete.","Set `tickmode` to *auto* for old `autotick` *true* behavior.","Set `tickmode` to *linear* for `autotick` *false*."].join(" ")},title:{valType:"string",editType:"ticks",description:["Value of `title` is no longer a simple *string* but a set of sub-attributes.","To set the axis' title, please use `title.text` now."].join(" ")},titlefont:pT({editType:"ticks",description:["Former `titlefont` is now the sub-attribute `font` of `title`.","To customize title font properties, please use `title.font` now."].join(" ")})}},Do=Jl,mT=Ho,XN=cn.extendFlat,N2e=_o.overrideAll,o8=N2e({orientation:{valType:"enumerated",values:["h","v"],dflt:"v",description:"Sets the orientation of the colorbar."},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",description:["Determines whether this color bar's thickness","(i.e. the measure in the constant color direction)","is set in units of plot *fraction* or in *pixels*.","Use `thickness` to set the value."].join(" ")},thickness:{valType:"number",min:0,dflt:30,description:["Sets the thickness of the color bar","This measure excludes the size of the padding, ticks and labels."].join(" ")},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this color bar's length","(i.e. the measure in the color variation direction)","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the color bar","This measure excludes the padding of both ends.","That is, the color bar length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,description:["Sets the x position of the color bar (in plot fraction).","Defaults to 1.02 when `orientation` is *v* and","0.5 when `orientation` is *h*."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],description:["Sets this color bar's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the color bar.","Defaults to *left* when `orientation` is *v* and","*center* when `orientation` is *h*."].join(" ")},xpad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the x direction."},y:{valType:"number",min:-2,max:3,description:["Sets the y position of the color bar (in plot fraction).","Defaults to 0.5 when `orientation` is *v* and","1.02 when `orientation` is *h*."].join(" ")},yanchor:{valType:"enumerated",values:["top","middle","bottom"],description:["Sets this color bar's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the color bar.","Defaults to *middle* when `orientation` is *v* and","*bottom* when `orientation` is *h*."].join(" ")},ypad:{valType:"number",min:0,dflt:10,description:"Sets the amount of padding (in px) along the y direction."},outlinecolor:Do.linecolor,outlinewidth:Do.linewidth,bordercolor:Do.linecolor,borderwidth:{valType:"number",min:0,dflt:0,description:["Sets the width (in px) or the border enclosing this color bar."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",description:"Sets the color of padded area."},tickmode:Do.tickmode,nticks:Do.nticks,tick0:Do.tick0,dtick:Do.dtick,tickvals:Do.tickvals,ticktext:Do.ticktext,ticks:XN({},Do.ticks,{dflt:""}),ticklabeloverflow:XN({},Do.ticklabeloverflow,{description:["Determines how we handle tick labels that would overflow either the graph div or the domain of the axis.","The default value for inside tick labels is *hide past domain*.","In other cases the default is *hide past div*."].join(" ")}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",description:["Determines where tick labels are drawn relative to the ticks.","Left and right options are used when `orientation` is *h*,","top and bottom when `orientation` is *v*."].join(" ")},ticklen:Do.ticklen,tickwidth:Do.tickwidth,tickcolor:Do.tickcolor,ticklabelstep:Do.ticklabelstep,showticklabels:Do.showticklabels,tickfont:mT({description:"Sets the color bar's tick label font"}),tickangle:Do.tickangle,tickformat:Do.tickformat,tickformatstops:Do.tickformatstops,tickprefix:Do.tickprefix,showtickprefix:Do.showtickprefix,ticksuffix:Do.ticksuffix,showticksuffix:Do.showticksuffix,separatethousands:Do.separatethousands,exponentformat:Do.exponentformat,minexponent:Do.minexponent,showexponent:Do.showexponent,title:{text:{valType:"string",description:["Sets the title of the color bar.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:mT({description:["Sets this color bar's title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),side:{valType:"enumerated",values:["right","top","bottom"],description:["Determines the location of color bar's title","with respect to the color bar.","Defaults to *top* when `orientation` if *v* and ","defaults to *right* when `orientation` if *h*.","Note that the title's location used to be set","by the now deprecated `titleside` attribute."].join(" ")}},_deprecated:{title:{valType:"string",description:["Deprecated in favor of color bar's `title.text`.","Note that value of color bar's `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:mT({description:"Deprecated in favor of color bar's `title.font`."}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top",description:"Deprecated in favor of color bar's `title.side`."}}},"colorbars","from-root"),q2e=o8,U2e=_y.counter,H2e=Ay,Fse=by.scales,$2e=H2e(Fse);function mm(e){return"`"+e+"`"}t(mm,"code");var Qi=t(function(r,n){r=r||"",n=n||{};var i=n.cLetter||"c",s="onlyIfNumerical"in n?n.onlyIfNumerical:Boolean(r),o="noScale"in n?n.noScale:r==="marker.line",a="showScaleDflt"in n?n.showScaleDflt:i==="z",l=typeof n.colorscaleDflt=="string"?Fse[n.colorscaleDflt]:null,u=n.editTypeOverride||"",f=r?r+".":"",h,v;"colorAttr"in n?(h=n.colorAttr,v=n.colorAttr):(h={z:"z",c:"color"}[i],v="in "+mm(f+h));var c=s?" Has an effect only if "+v+" is set to a numerical array.":"",d=i+"auto",g=i+"min",p=i+"max",b=i+"mid",m=mm(f+d),y=mm(f+g),T=mm(f+p),_=y+" and "+T,M={};M[g]=M[p]=void 0;var w={};w[d]=!1;var x={};return h==="color"&&(x.color={valType:"color",arrayOk:!0,editType:u||"style",description:["Sets the",r,"color.","It accepts either a specific color","or an array of numbers that are mapped to the colorscale","relative to the max and min values of the array or relative to",_,"if set."].join(" ")},n.anim&&(x.color.anim=!0)),x[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:M,description:["Determines whether or not the color domain is computed","with respect to the input data (here "+v+") or the bounds set in",_+c,"Defaults to `false` when",_,"are set by the user."].join(" ")},x[g]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:w,description:["Sets the lower bound of the color domain."+c,"Value should have the same units as",v,"and if set,",T,"must be set as well."].join(" ")},x[p]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:w,description:["Sets the upper bound of the color domain."+c,"Value should have the same units as",v,"and if set,",y,"must be set as well."].join(" ")},x[b]={valType:"number",dflt:null,editType:"calc",impliedEdits:M,description:["Sets the mid-point of the color domain by scaling",y,"and/or",T,"to be equidistant to this point."+c,"Value should have the same units as",v+".","Has no effect when",m,"is `false`."].join(" ")},x.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1},description:["Sets the colorscale."+c,"The colorscale must be an array containing","arrays mapping a normalized value to an","rgb, rgba, hex, hsl, hsv, or named color string.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 'rgb(0,0,255)'], [1, 'rgb(255,0,0)']]`.","To control the bounds of the colorscale in color space,","use",_+".","Alternatively, `colorscale` may be a palette name string","of the following list: "+$2e+"."].join(" ")},x.autocolorscale={valType:"boolean",dflt:n.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0},description:["Determines whether the colorscale is a default palette (`autocolorscale: true`)","or the palette determined by",mm(f+"colorscale")+"."+c,"In case `colorscale` is unspecified or `autocolorscale` is true, the default","palette will be chosen according to whether numbers in the `color` array are","all positive, all negative or mixed."].join(" ")},x.reversescale={valType:"boolean",dflt:!1,editType:"plot",description:["Reverses the color mapping if true."+c,"If true,",y,"will correspond to the last color","in the array and",T,"will correspond to the first color."].join(" ")},o||(x.showscale={valType:"boolean",dflt:a,editType:"calc",description:["Determines whether or not a colorbar is displayed for this trace."+c].join(" ")},x.colorbar=q2e),n.noColorAxis||(x.coloraxis={valType:"subplotid",regex:U2e("coloraxis"),dflt:null,editType:"calc",description:["Sets a reference to a shared color axis.","References to these shared color axes are *coloraxis*, *coloraxis2*, *coloraxis3*, etc.","Settings for these shared color axes are set in the layout, under","`layout.coloraxis`, `layout.coloraxis2`, etc.","Note that multiple color scales can be linked to the same color axis."].join(" ")}),x},"colorScaleAttrs"),V2e=cn.extendFlat,G2e=Qi,xT=by.scales,bT="Note that `autocolorscale` must be true for this attribute to work.",Bse={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:xT.Reds,editType:"calc",description:["Sets the default sequential colorscale for positive values.",bT].join(" ")},sequentialminus:{valType:"colorscale",dflt:xT.Blues,editType:"calc",description:["Sets the default sequential colorscale for negative values.",bT].join(" ")},diverging:{valType:"colorscale",dflt:xT.RdBu,editType:"calc",description:["Sets the default diverging colorscale.",bT].join(" ")}},coloraxis:V2e({_isSubplotObj:!0,editType:"calc",description:[""].join(" ")},G2e("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))},j2e=Nt.exports,Ose=t(function(r){return j2e.isPlainObject(r.colorbar)},"hasColorbar"),hw={},bz=xn,ZN=Nt.exports,Nse=jn,Y2e=Nse.ONEDAY,W2e=Nse.ONEWEEK;hw.dtick=function(e,r){var n=r==="log",i=r==="date",s=r==="category",o=i?Y2e:1;if(!e)return o;if(bz(e))return e=Number(e),e<=0?o:s?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if(typeof e!="string"||!(i||n))return o;var a=e.charAt(0),l=e.substr(1);return l=bz(l)?Number(l):0,l<=0||!(i&&a==="M"&&l===Math.round(l)||n&&a==="L"||n&&a==="D"&&(l===1||l===2))?o:e};hw.tick0=function(e,r,n,i){if(r==="date")return ZN.cleanDate(e,ZN.dateTick0(n,i%W2e===0?1:0));if(!(i==="D1"||i==="D2"))return bz(e)?Number(e):0};var KN=hw,X2e=Nt.exports.isArrayOrTypedArray,ky=t(function(r,n,i,s,o){o||(o={});var a=o.isMinor,l=a?r.minor||{}:r,u=a?n.minor:n,f=a?"minor.":"";function h(y){var T=l[y];return T!==void 0?T:(u._template||{})[y]}t(h,"readInput");var v=h("tick0"),c=h("dtick"),d=h("tickvals"),g=X2e(d)?"array":c?"linear":"auto",p=i(f+"tickmode",g);if(p==="auto")i(f+"nticks");else if(p==="linear"){var b=u.dtick=KN.dtick(c,s);u.tick0=KN.tick0(v,s,n.calendar,b)}else if(s!=="multicategory"){var m=i(f+"tickvals");m===void 0?u.tickmode="auto":a||i("ticktext")}},"handleTickValueDefaults"),_T=Nt.exports,JN=Jl,J1=t(function(r,n,i,s){var o=s.isMinor,a=o?r.minor||{}:r,l=o?n.minor:n,u=o?JN.minor:JN,f=o?"minor.":"",h=_T.coerce2(a,l,u,"ticklen",o?(n.ticklen||5)*.6:void 0),v=_T.coerce2(a,l,u,"tickwidth",o?n.tickwidth||1:void 0),c=_T.coerce2(a,l,u,"tickcolor",(o?n.tickcolor:void 0)||l.color),d=i(f+"ticks",!o&&s.outerTicks||h||v||c?"outside":"");d||(delete l.ticklen,delete l.tickwidth,delete l.tickcolor)},"handleTickMarkDefaults"),qse=t(function(r){var n=["showexponent","showtickprefix","showticksuffix"],i=n.filter(function(o){return r[o]!==void 0}),s=t(function(o){return r[o]===r[i[0]]},"sameVal");if(i.every(s)||i.length===1)return r[i[0]]},"getShowAttrDflt"),sb=Nt.exports,Z2e=ei,mu=t(function(r,n,i){var s=i.name,o=i.inclusionAttr||"visible",a=n[s],l=sb.isArrayOrTypedArray(r[s])?r[s]:[],u=n[s]=[],f=Z2e.arrayTemplater(n,s,o),h,v;for(h=0;h<l.length;h++){var c=l[h];sb.isPlainObject(c)?v=f.newItem(c):(v=f.newItem({}),v[o]=!1),v._index=h,v[o]!==!1&&i.handleItemDefaults(c,v,n,i),u.push(v)}var d=f.defaultItems();for(h=0;h<d.length;h++)v=d[h],v._index=u.length,i.handleItemDefaults({},v,n,i,{}),u.push(v);if(sb.isArrayOrTypedArray(a)){var g=Math.min(a.length,u.length);for(h=0;h<g;h++)sb.relinkPrivateKeys(u[h],a[h])}return u},"handleArrayContainerDefaults"),Use=Nt.exports,K2e=$a.exports.contrast,Hse=Jl,J2e=qse,Q2e=mu,L0=t(function(r,n,i,s,o){o||(o={});var a=J2e(r),l=i("showticklabels");if(l){var u=o.font||{},f=n.color,h=n.ticklabelposition||"",v=h.indexOf("inside")!==-1?K2e(o.bgColor):f&&f!==Hse.color.dflt?f:u.color;if(Use.coerceFont(i,"tickfont",{family:u.family,size:u.size,color:v}),!o.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&i("ticklabelstep"),o.noAng||i("tickangle"),s!=="category"){var c=i("tickformat");Q2e(r,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:ewe}),n.tickformatstops.length||delete n.tickformatstops,!o.noExp&&!c&&s!=="date"&&(i("showexponent",a),i("exponentformat"),i("minexponent"),i("separatethousands"))}}},"handleTickLabelDefaults");function ewe(e,r){function n(s,o){return Use.coerce(e,r,Hse.tickformatstops,s,o)}t(n,"coerce");var i=n("enabled");i&&(n("dtickrange"),n("value"))}t(ewe,"tickformatstopDefaults");var twe=qse,R0=t(function(r,n,i,s,o){o||(o={});var a=o.tickSuffixDflt,l=twe(r),u=i("tickprefix");u&&i("showtickprefix",l);var f=i("ticksuffix",a);f&&i("showticksuffix",l)},"handlePrefixSuffixDefaults"),vg=Nt.exports,rwe=ei,awe=ky,nwe=J1,iwe=L0,owe=R0,swe=o8,$se=t(function(r,n,i){var s=rwe.newContainer(n,"colorbar"),o=r.colorbar||{};function a(T,_){return vg.coerce(o,s,swe,T,_)}t(a,"coerce");var l=i.margin||{t:0,b:0,l:0,r:0},u=i.width-l.l-l.r,f=i.height-l.t-l.b,h=a("orientation"),v=h==="v",c=a("thicknessmode");a("thickness",c==="fraction"?30/(v?u:f):30);var d=a("lenmode");a("len",d==="fraction"?1:v?f:u),a("x",v?1.02:.5),a("xanchor",v?"left":"center"),a("xpad"),a("y",v?.5:1.02),a("yanchor",v?"middle":"bottom"),a("ypad"),vg.noneOrAll(o,s,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");var g=vg.coerce(o,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:v?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");a("ticklabeloverflow",g.indexOf("inside")!==-1?"hide past domain":"hide past div"),awe(o,s,a,"linear");var p=i.font,b={outerTicks:!1,font:p};g.indexOf("inside")!==-1&&(b.bgColor="black"),owe(o,s,a,"linear",b),iwe(o,s,a,"linear",b),nwe(o,s,a,"linear"),a("title.text",i._dfltTitle.colorbar);var m=s.tickfont,y=vg.extendFlat({},m,{color:p.color,size:vg.bigFont(m.size)});vg.coerceFont(a,"title.font",y),a("title.side",v?"top":"right")},"colorbarDefaults"),QN=xn,_z=Nt.exports,lwe=Ose,uwe=$se,eq=by.isValid,fwe=Na.traceIs;function wT(e,r){var n=r.slice(0,r.length-1);return r?_z.nestedProperty(e,n).get()||{}:e}t(wT,"npMaybe");var ml=t(function e(r,n,i,s,o){var a=o.prefix,l=o.cLetter,u="_module"in n,f=wT(r,a),h=wT(n,a),v=wT(n._template||{},a)||{},c=t(function(){return delete r.coloraxis,delete n.coloraxis,e(r,n,i,s,o)},"thisFn");if(u){var d=i._colorAxes||{},g=s(a+"coloraxis");if(g){var p=fwe(n,"contour")&&_z.nestedProperty(n,"contours.coloring").get()||"heatmap",b=d[g];b?(b[2].push(c),b[0]!==p&&(b[0]=!1,_z.warn(["Ignoring coloraxis:",g,"setting","as it is linked to incompatible colorscales."].join(" ")))):d[g]=[p,n,[c]];return}}var m=f[l+"min"],y=f[l+"max"],T=QN(m)&&QN(y)&&m<y,_=s(a+l+"auto",!T);_?s(a+l+"mid"):(s(a+l+"min"),s(a+l+"max"));var M=f.colorscale,w=v.colorscale,x;if(M!==void 0&&(x=!eq(M)),w!==void 0&&(x=!eq(w)),s(a+"autocolorscale",x),s(a+"colorscale"),s(a+"reversescale"),a!=="marker.line."){var A;a&&u&&(A=lwe(f));var S=s(a+"showscale",A);S&&(a&&v&&(h._template=v),uwe(f,h,i))}},"colorScaleDefaults"),tq=Nt.exports,cwe=ei,rq=Bse,hwe=ml,vwe=t(function(r,n){function i(v,c){return tq.coerce(r,n,rq,v,c)}t(i,"coerce"),i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var s=n._colorAxes,o,a;function l(v,c){return tq.coerce(o,a,rq.coloraxis,v,c)}t(l,"coerceAx");for(var u in s){var f=s[u];if(f[0])o=r[u]||{},a=cwe.newContainer(n,u,"coloraxis"),a._name=u,hwe(o,a,n,l,{prefix:"",cLetter:"c"});else{for(var h=0;h<f[2].length;h++)f[2][h]();delete n._colorAxes[u]}}},"supplyLayoutDefaults"),dwe=Nt.exports,pwe=Qu.hasColorscale,gwe=Qu.extractOpts,ywe=t(function(r,n){function i(h,v){var c=h["_"+v];c!==void 0&&(h[v]=c)}t(i,"replace");function s(h,v){var c=v.container?dwe.nestedProperty(h,v.container).get():h;if(c)if(c.coloraxis)c._colorAx=n[c.coloraxis];else{var d=gwe(c),g=d.auto;(g||d.min===void 0)&&i(c,v.min),(g||d.max===void 0)&&i(c,v.max),d.autocolorscale&&i(c,"colorscale")}}t(s,"relinkColorAttrs");for(var o=0;o<r.length;o++){var a=r[o],l=a._module.colorbar;if(l)if(Array.isArray(l))for(var u=0;u<l.length;u++)s(a,l[u]);else s(a,l);pwe(a,"marker.line")&&s(a,{container:"marker.line",min:"cmin",max:"cmax"})}for(var f in n._colorAxes)s(n[f],{min:"cmin",max:"cmax"})},"crossTraceDefaults"),aq=xn,TT=Nt.exports,mwe=Qu.extractOpts,Lf=t(function(r,n,i){var s=r._fullLayout,o=i.vals,a=i.containerStr,l=a?TT.nestedProperty(n,a).get():n,u=mwe(l),f=u.auto!==!1,h=u.min,v=u.max,c=u.mid,d=t(function(){return TT.aggNums(Math.min,null,o)},"minVal"),g=t(function(){return TT.aggNums(Math.max,null,o)},"maxVal");if(h===void 0?h=d():f&&(l._colorAx&&aq(h)?h=Math.min(h,d()):h=d()),v===void 0?v=g():f&&(l._colorAx&&aq(v)?v=Math.max(v,g()):v=g()),f&&c!==void 0&&(v-c>c-h?h=c-(v-c):v-c<c-h&&(v=c+(c-h))),h===v&&(h-=.5,v+=.5),u._sync("min",h),u._sync("max",v),u.autocolorscale){var p;h*v<0?p=s.colorscale.diverging:h>=0?p=s.colorscale.sequential:p=s.colorscale.sequentialminus,u._sync("colorscale",p)}},"calc"),lb=by,dg=Qu,ko={moduleType:"component",name:"colorscale",attributes:Qi,layoutAttributes:Bse,supplyLayoutDefaults:vwe,handleDefaults:ml,crossTraceDefaults:ywe,calc:Lf,scales:lb.scales,defaultScale:lb.defaultScale,getScale:lb.get,isValidScale:lb.isValid,hasColorscale:dg.hasColorscale,extractOpts:dg.extractOpts,extractScale:dg.extractScale,flipScale:dg.flipScale,makeColorScaleFunc:dg.makeColorScaleFunc,makeColorScaleFuncFromTrace:dg.makeColorScaleFuncFromTrace},nq=Nt.exports,ho={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return nq.isPlainObject(e.marker)&&nq.isArrayOrTypedArray(e.marker.size)}},xwe=xn,vw=t(function(r,n){n||(n=2);var i=r.marker,s=i.sizeref||1,o=i.sizemin||0,a=i.sizemode==="area"?function(l){return Math.sqrt(l/s)}:function(l){return l/s};return function(l){var u=a(l/n);return xwe(u)&&u>0?Math.max(u,o):0}},"makeBubbleSizeFn"),Rf={};(function(e){var r=Nt.exports;e.getSubplot=function(l){return l.subplot||l.xaxis+l.yaxis||l.geo},e.isTraceInSubplots=function(l,u){if(l.type==="splom"){for(var f=l.xaxes||[],h=l.yaxes||[],v=0;v<f.length;v++)for(var c=0;c<h.length;c++)if(u.indexOf(f[v]+h[c])!==-1)return!0;return!1}return u.indexOf(e.getSubplot(l))!==-1},e.flat=function(l,u){for(var f=new Array(l.length),h=0;h<l.length;h++)f[h]=u;return f},e.p2c=function(l,u){for(var f=new Array(l.length),h=0;h<l.length;h++)f[h]=l[h].p2c(u);return f},e.getDistanceFunction=function(l,u,f,h){return l==="closest"?h||e.quadrature(u,f):l.charAt(0)==="x"?u:f},e.getClosest=function(l,u,f){if(f.index!==!1)f.index>=0&&f.index<l.length?f.distance=0:f.index=!1;else for(var h=0;h<l.length;h++){var v=u(l[h]);v<=f.distance&&(f.index=h,f.distance=v)}return f},e.inbox=function(l,u,f){return l*u<0||l===0?f:1/0},e.quadrature=function(l,u){return function(f){var h=l(f),v=u(f);return Math.sqrt(h*h+v*v)}},e.makeEventData=function(l,u,f){var h="index"in l?l.index:l.pointNumber,v={data:u._input,fullData:u,curveNumber:u.index,pointNumber:h};if(u._indexToPoints){var c=u._indexToPoints[h];c.length===1?v.pointIndex=c[0]:v.pointIndices=c}else v.pointIndex=h;return u._module.eventData?v=u._module.eventData(v,l,u,f,h):("xVal"in l?v.x=l.xVal:"x"in l&&(v.x=l.x),"yVal"in l?v.y=l.yVal:"y"in l&&(v.y=l.y),l.xa&&(v.xaxis=l.xa),l.ya&&(v.yaxis=l.ya),l.zLabelVal!==void 0&&(v.z=l.zLabelVal)),e.appendArrayPointValue(v,u,h),v},e.appendArrayPointValue=function(l,u,f){var h=u._arrayAttrs;if(!!h)for(var v=0;v<h.length;v++){var c=h[v],d=i(c);if(l[d]===void 0){var g=r.nestedProperty(u,c).get(),p=s(g,f);p!==void 0&&(l[d]=p)}}},e.appendArrayMultiPointValues=function(l,u,f){var h=u._arrayAttrs;if(!!h)for(var v=0;v<h.length;v++){var c=h[v],d=i(c);if(l[d]===void 0){for(var g=r.nestedProperty(u,c).get(),p=new Array(f.length),b=0;b<f.length;b++)p[b]=s(g,f[b]);l[d]=p}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function i(l){return n[l]||l}t(i,"getPointKey");function s(l,u){if(Array.isArray(u)){if(Array.isArray(l)&&Array.isArray(l[u[0]]))return l[u[0]][u[1]]}else return l[u]}t(s,"getPointData");var o={x:!0,y:!0},a={"x unified":!0,"y unified":!0};e.isUnifiedHover=function(l){return typeof l!="string"?!1:!!a[l]},e.isXYhover=function(l){return typeof l!="string"?!1:!!o[l]}})(Rf);var dw=_we,AT={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},bwe=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function _we(e){var r=[];return e.replace(bwe,function(n,i,s){var o=i.toLowerCase();for(s=Twe(s),o=="m"&&s.length>2&&(r.push([i].concat(s.splice(0,2))),o="l",i=i=="m"?"l":"L");;){if(s.length==AT[o])return s.unshift(i),r.push(s);if(s.length<AT[o])throw new Error("malformed path data");r.push([i].concat(s.splice(0,AT[o])))}}),r}t(_we,"parse$1");var wwe=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function Twe(e){var r=e.match(wwe);return r?r.map(Number):[]}t(Twe,"parseValues");var ST,iq;function Awe(){if(iq)return ST;iq=1;var e=dw,r=Va.exports.round,n="M0,0Z",i=Math.sqrt(2),s=Math.sqrt(3),o=Math.PI,a=Math.cos,l=Math.sin;ST={circle:{n:0,f:function(g,p,b){if(u(p))return n;var m=r(g,2),y="M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z";return b?d(p,b,y):y}},square:{n:1,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z")}},diamond:{n:2,f:function(g,p,b){if(u(p))return n;var m=r(g*1.3,2);return d(p,b,"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"Z")}},cross:{n:3,f:function(g,p,b){if(u(p))return n;var m=r(g*.4,2),y=r(g*1.2,2);return d(p,b,"M"+y+","+m+"H"+m+"V"+y+"H-"+m+"V"+m+"H-"+y+"V-"+m+"H-"+m+"V-"+y+"H"+m+"V-"+m+"H"+y+"Z")}},x:{n:4,f:function(g,p,b){if(u(p))return n;var m=r(g*.8/i,2),y="l"+m+","+m,T="l"+m+",-"+m,_="l-"+m+",-"+m,M="l-"+m+","+m;return d(p,b,"M0,"+m+y+T+_+T+_+M+_+M+y+M+y+"Z")}},"triangle-up":{n:5,f:function(g,p,b){if(u(p))return n;var m=r(g*2/s,2),y=r(g/2,2),T=r(g,2);return d(p,b,"M-"+m+","+y+"H"+m+"L0,-"+T+"Z")}},"triangle-down":{n:6,f:function(g,p,b){if(u(p))return n;var m=r(g*2/s,2),y=r(g/2,2),T=r(g,2);return d(p,b,"M-"+m+",-"+y+"H"+m+"L0,"+T+"Z")}},"triangle-left":{n:7,f:function(g,p,b){if(u(p))return n;var m=r(g*2/s,2),y=r(g/2,2),T=r(g,2);return d(p,b,"M"+y+",-"+m+"V"+m+"L-"+T+",0Z")}},"triangle-right":{n:8,f:function(g,p,b){if(u(p))return n;var m=r(g*2/s,2),y=r(g/2,2),T=r(g,2);return d(p,b,"M-"+y+",-"+m+"V"+m+"L"+T+",0Z")}},"triangle-ne":{n:9,f:function(g,p,b){if(u(p))return n;var m=r(g*.6,2),y=r(g*1.2,2);return d(p,b,"M-"+y+",-"+m+"H"+m+"V"+y+"Z")}},"triangle-se":{n:10,f:function(g,p,b){if(u(p))return n;var m=r(g*.6,2),y=r(g*1.2,2);return d(p,b,"M"+m+",-"+y+"V"+m+"H-"+y+"Z")}},"triangle-sw":{n:11,f:function(g,p,b){if(u(p))return n;var m=r(g*.6,2),y=r(g*1.2,2);return d(p,b,"M"+y+","+m+"H-"+m+"V-"+y+"Z")}},"triangle-nw":{n:12,f:function(g,p,b){if(u(p))return n;var m=r(g*.6,2),y=r(g*1.2,2);return d(p,b,"M-"+m+","+y+"V-"+m+"H"+y+"Z")}},pentagon:{n:13,f:function(g,p,b){if(u(p))return n;var m=r(g*.951,2),y=r(g*.588,2),T=r(-g,2),_=r(g*-.309,2),M=r(g*.809,2);return d(p,b,"M"+m+","+_+"L"+y+","+M+"H-"+y+"L-"+m+","+_+"L0,"+T+"Z")}},hexagon:{n:14,f:function(g,p,b){if(u(p))return n;var m=r(g,2),y=r(g/2,2),T=r(g*s/2,2);return d(p,b,"M"+T+",-"+y+"V"+y+"L0,"+m+"L-"+T+","+y+"V-"+y+"L0,-"+m+"Z")}},hexagon2:{n:15,f:function(g,p,b){if(u(p))return n;var m=r(g,2),y=r(g/2,2),T=r(g*s/2,2);return d(p,b,"M-"+y+","+T+"H"+y+"L"+m+",0L"+y+",-"+T+"H-"+y+"L-"+m+",0Z")}},octagon:{n:16,f:function(g,p,b){if(u(p))return n;var m=r(g*.924,2),y=r(g*.383,2);return d(p,b,"M-"+y+",-"+m+"H"+y+"L"+m+",-"+y+"V"+y+"L"+y+","+m+"H-"+y+"L-"+m+","+y+"V-"+y+"Z")}},star:{n:17,f:function(g,p,b){if(u(p))return n;var m=g*1.4,y=r(m*.225,2),T=r(m*.951,2),_=r(m*.363,2),M=r(m*.588,2),w=r(-m,2),x=r(m*-.309,2),A=r(m*.118,2),S=r(m*.809,2),k=r(m*.382,2);return d(p,b,"M"+y+","+x+"H"+T+"L"+_+","+A+"L"+M+","+S+"L0,"+k+"L-"+M+","+S+"L-"+_+","+A+"L-"+T+","+x+"H-"+y+"L0,"+w+"Z")}},hexagram:{n:18,f:function(g,p,b){if(u(p))return n;var m=r(g*.66,2),y=r(g*.38,2),T=r(g*.76,2);return d(p,b,"M-"+T+",0l-"+y+",-"+m+"h"+T+"l"+y+",-"+m+"l"+y+","+m+"h"+T+"l-"+y+","+m+"l"+y+","+m+"h-"+T+"l-"+y+","+m+"l-"+y+",-"+m+"h-"+T+"Z")}},"star-triangle-up":{n:19,f:function(g,p,b){if(u(p))return n;var m=r(g*s*.8,2),y=r(g*.8,2),T=r(g*1.6,2),_=r(g*4,2),M="A "+_+","+_+" 0 0 1 ";return d(p,b,"M-"+m+","+y+M+m+","+y+M+"0,-"+T+M+"-"+m+","+y+"Z")}},"star-triangle-down":{n:20,f:function(g,p,b){if(u(p))return n;var m=r(g*s*.8,2),y=r(g*.8,2),T=r(g*1.6,2),_=r(g*4,2),M="A "+_+","+_+" 0 0 1 ";return d(p,b,"M"+m+",-"+y+M+"-"+m+",-"+y+M+"0,"+T+M+m+",-"+y+"Z")}},"star-square":{n:21,f:function(g,p,b){if(u(p))return n;var m=r(g*1.1,2),y=r(g*2,2),T="A "+y+","+y+" 0 0 1 ";return d(p,b,"M-"+m+",-"+m+T+"-"+m+","+m+T+m+","+m+T+m+",-"+m+T+"-"+m+",-"+m+"Z")}},"star-diamond":{n:22,f:function(g,p,b){if(u(p))return n;var m=r(g*1.4,2),y=r(g*1.9,2),T="A "+y+","+y+" 0 0 1 ";return d(p,b,"M-"+m+",0"+T+"0,"+m+T+m+",0"+T+"0,-"+m+T+"-"+m+",0Z")}},"diamond-tall":{n:23,f:function(g,p,b){if(u(p))return n;var m=r(g*.7,2),y=r(g*1.4,2);return d(p,b,"M0,"+y+"L"+m+",0L0,-"+y+"L-"+m+",0Z")}},"diamond-wide":{n:24,f:function(g,p,b){if(u(p))return n;var m=r(g*1.4,2),y=r(g*.7,2);return d(p,b,"M0,"+y+"L"+m+",0L0,-"+y+"L-"+m+",0Z")}},hourglass:{n:25,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M"+m+","+m+"H-"+m+"L"+m+",-"+m+"H-"+m+"Z")},noDot:!0},bowtie:{n:26,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M"+m+","+m+"V-"+m+"L-"+m+","+m+"V-"+m+"Z")},noDot:!0},"circle-cross":{n:27,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(g,p,b){if(u(p))return n;var m=r(g,2),y=r(g/i,2);return d(p,b,"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(g,p,b){if(u(p))return n;var m=r(g*1.3,2);return d(p,b,"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM0,-"+m+"V"+m+"M-"+m+",0H"+m)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(g,p,b){if(u(p))return n;var m=r(g*1.3,2),y=r(g*.65,2);return d(p,b,"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM-"+y+",-"+y+"L"+y+","+y+"M-"+y+","+y+"L"+y+",-"+y)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(g,p,b){if(u(p))return n;var m=r(g*1.4,2);return d(p,b,"M0,"+m+"V-"+m+"M"+m+",0H-"+m)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(g,p,b){if(u(p))return n;var m=r(g*1.2,2),y=r(g*.85,2);return d(p,b,"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(g,p,b){if(u(p))return n;var m=r(g/2,2),y=r(g,2);return d(p,b,"M"+m+","+y+"V-"+y+"M"+(m-y)+",-"+y+"V"+y+"M"+y+","+m+"H-"+y+"M-"+y+","+(m-y)+"H"+y)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(g,p,b){if(u(p))return n;var m=r(g*1.2,2),y=r(g*1.6,2),T=r(g*.8,2);return d(p,b,"M-"+m+","+T+"L0,0M"+m+","+T+"L0,0M0,-"+y+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(g,p,b){if(u(p))return n;var m=r(g*1.2,2),y=r(g*1.6,2),T=r(g*.8,2);return d(p,b,"M-"+m+",-"+T+"L0,0M"+m+",-"+T+"L0,0M0,"+y+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(g,p,b){if(u(p))return n;var m=r(g*1.2,2),y=r(g*1.6,2),T=r(g*.8,2);return d(p,b,"M"+T+","+m+"L0,0M"+T+",-"+m+"L0,0M-"+y+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(g,p,b){if(u(p))return n;var m=r(g*1.2,2),y=r(g*1.6,2),T=r(g*.8,2);return d(p,b,"M-"+T+","+m+"L0,0M-"+T+",-"+m+"L0,0M"+y+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(g,p,b){if(u(p))return n;var m=r(g*1.4,2);return d(p,b,"M"+m+",0H-"+m)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(g,p,b){if(u(p))return n;var m=r(g*1.4,2);return d(p,b,"M0,"+m+"V-"+m)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M"+m+",-"+m+"L-"+m+","+m)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(g,p,b){if(u(p))return n;var m=r(g,2);return d(p,b,"M"+m+","+m+"L-"+m+",-"+m)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(g,p,b){if(u(p))return n;var m=r(g,2),y=r(g*2,2);return d(p,b,"M0,0L-"+m+","+y+"H"+m+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(g,p,b){if(u(p))return n;var m=r(g,2),y=r(g*2,2);return d(p,b,"M0,0L-"+m+",-"+y+"H"+m+"Z")},noDot:!0},"arrow-left":{n:47,f:function(g,p,b){if(u(p))return n;var m=r(g*2,2),y=r(g,2);return d(p,b,"M0,0L"+m+",-"+y+"V"+y+"Z")},noDot:!0},"arrow-right":{n:48,f:function(g,p,b){if(u(p))return n;var m=r(g*2,2),y=r(g,2);return d(p,b,"M0,0L-"+m+",-"+y+"V"+y+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(g,p,b){if(u(p))return n;var m=r(g,2),y=r(g*2,2);return d(p,b,"M-"+m+",0H"+m+"M0,0L-"+m+","+y+"H"+m+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(g,p,b){if(u(p))return n;var m=r(g,2),y=r(g*2,2);return d(p,b,"M-"+m+",0H"+m+"M0,0L-"+m+",-"+y+"H"+m+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(g,p,b){if(u(p))return n;var m=r(g*2,2),y=r(g,2);return d(p,b,"M0,-"+y+"V"+y+"M0,0L"+m+",-"+y+"V"+y+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(g,p,b){if(u(p))return n;var m=r(g*2,2),y=r(g,2);return d(p,b,"M0,-"+y+"V"+y+"M0,0L-"+m+",-"+y+"V"+y+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(g,p,b){if(u(p))return n;var m=o/2.5,y=2*g*a(m),T=2*g*l(m);return d(p,b,"M0,0L"+-y+","+T+"L"+y+","+T+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(g,p,b){if(u(p))return n;var m=o/4,y=2*g*a(m),T=2*g*l(m);return d(p,b,"M0,0L"+-y+","+T+"A "+2*g+","+2*g+" 0 0 1 "+y+","+T+"Z")},backoff:.4,noDot:!0}};function u(g){return g===null}t(u,"skipAngle");var f,h,v,c;function d(g,p,b){if((!g||g%360===0)&&!p)return b;if(v===g&&c===p&&f===b)return h;v=g,c=p,f=b;function m(B,z){var R=a(B),F=l(B),O=z[0],q=z[1]+(p||0);return[O*R-q*F,O*F+q*R]}t(m,"rotate");for(var y=g/180*o,T=0,_=0,M=e(b),w="",x=0;x<M.length;x++){var A=M[x],S=A[0],k=T,L=_;if(S==="M"||S==="L")T=+A[1],_=+A[2];else if(S==="m"||S==="l")T+=+A[1],_+=+A[2];else if(S==="H")T=+A[1];else if(S==="h")T+=+A[1];else if(S==="V")_=+A[1];else if(S==="v")_+=+A[1];else if(S==="A"){T=+A[1],_=+A[2];var P=m(y,[+A[6],+A[7]]);A[6]=P[0],A[7]=P[1],A[3]=+A[3]+g}(S==="H"||S==="V")&&(S="L"),(S==="h"||S==="v")&&(S="l"),(S==="m"||S==="l")&&(T-=k,_-=L);var D=m(y,[T,_]);(S==="H"||S==="V")&&(S="L"),(S==="M"||S==="L"||S==="m"||S==="l")&&(A[1]=D[0],A[2]=D[1]),A[0]=S,w+=A[0]+A.slice(1).join(",")}return h=w,w}return t(d,"align"),ST}t(Awe,"requireSymbol_defs");var el=Va.exports,bo=Nt.exports,Swe=bo.numberFormat,p0=xn,wz=rl.exports,pw=Na,gu=$a.exports,Mwe=ko,A1=bo.strTranslate,s8=Ji,kwe=ic,Ewe=yl,Cwe=Ewe.LINE_SPACING,Vse=A0.DESELECTDIM,Lwe=ho,Rwe=vw,Pwe=Rf.appendArrayPointValue,_a=bn.exports={};_a.font=function(e,r,n,i){bo.isPlainObject(r)&&(i=r.color,n=r.size,r=r.family),r&&e.style("font-family",r),n+1&&e.style("font-size",n+"px"),i&&e.call(gu.fill,i)};_a.setPosition=function(e,r,n){e.attr("x",r).attr("y",n)};_a.setSize=function(e,r,n){e.attr("width",r).attr("height",n)};_a.setRect=function(e,r,n,i,s){e.call(_a.setPosition,r,n).call(_a.setSize,i,s)};_a.translatePoint=function(e,r,n,i){var s=n.c2p(e.x),o=i.c2p(e.y);if(p0(s)&&p0(o)&&r.node())r.node().nodeName==="text"?r.attr("x",s).attr("y",o):r.attr("transform",A1(s,o));else return!1;return!0};_a.translatePoints=function(e,r,n){e.each(function(i){var s=el.select(this);_a.translatePoint(i,s,r,n)})};_a.hideOutsideRangePoint=function(e,r,n,i,s,o){r.attr("display",n.isPtWithinRange(e,s)&&i.isPtWithinRange(e,o)?null:"none")};_a.hideOutsideRangePoints=function(e,r){if(!!r._hasClipOnAxisFalse){var n=r.xaxis,i=r.yaxis;e.each(function(s){var o=s[0].trace,a=o.xcalendar,l=o.ycalendar,u=pw.traceIs(o,"bar-like")?".bartext":".point,.textpoint";e.selectAll(u).each(function(f){_a.hideOutsideRangePoint(f,el.select(this),n,i,a,l)})})}};_a.crispRound=function(e,r,n){return!r||!p0(r)?n||0:e._context.staticPlot?r:r<1?1:Math.round(r)};_a.singleLineStyle=function(e,r,n,i,s){r.style("fill","none");var o=(((e||[])[0]||{}).trace||{}).line||{},a=n||o.width||0,l=s||o.dash||"";gu.stroke(r,i||o.color),_a.dashLine(r,l,a)};_a.lineGroupStyle=function(e,r,n,i){e.style("fill","none").each(function(s){var o=(((s||[])[0]||{}).trace||{}).line||{},a=r||o.width||0,l=i||o.dash||"";el.select(this).call(gu.stroke,n||o.color).call(_a.dashLine,l,a)})};_a.dashLine=function(e,r,n){n=+n||0,r=_a.dashStyle(r,n),e.style({"stroke-dasharray":r,"stroke-width":n+"px"})};_a.dashStyle=function(e,r){r=+r||1;var n=Math.max(r,3);return e==="solid"?e="":e==="dot"?e=n+"px,"+n+"px":e==="dash"?e=3*n+"px,"+3*n+"px":e==="longdash"?e=5*n+"px,"+5*n+"px":e==="dashdot"?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":e==="longdashdot"&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e};function Gse(e,r,n){var i=r.fillpattern,s=i&&_a.getPatternAttr(i.shape,0,"");if(s){var o=_a.getPatternAttr(i.bgcolor,0,null),a=_a.getPatternAttr(i.fgcolor,0,null),l=i.fgopacity,u=_a.getPatternAttr(i.size,0,8),f=_a.getPatternAttr(i.solidity,0,.3),h=r.uid;_a.pattern(e,"point",n,h,s,u,f,void 0,i.fillmode,o,a,l)}else r.fillcolor&&e.call(gu.fill,r.fillcolor)}t(Gse,"setFillStyle");_a.singleFillStyle=function(e,r){var n=el.select(e.node()),i=n.data(),s=((i[0]||[])[0]||{}).trace||{};Gse(e,s,r)};_a.fillGroupStyle=function(e,r){e.style("stroke-width",0).each(function(n){var i=el.select(this);n[0].trace&&Gse(i,n[0].trace,r)})};var oq=Awe();_a.symbolNames=[];_a.symbolFuncs=[];_a.symbolBackOffs=[];_a.symbolNeedLines={};_a.symbolNoDot={};_a.symbolNoFill={};_a.symbolList=[];Object.keys(oq).forEach(function(e){var r=oq[e],n=r.n;_a.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),_a.symbolNames[n]=e,_a.symbolFuncs[n]=r.f,_a.symbolBackOffs[n]=r.backoff||0,r.needLine&&(_a.symbolNeedLines[n]=!0),r.noDot?_a.symbolNoDot[n]=!0:_a.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),r.noFill&&(_a.symbolNoFill[n]=!0)});var Dwe=_a.symbolNames.length,Iwe="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";_a.symbolNumber=function(e){if(p0(e))e=+e;else if(typeof e=="string"){var r=0;e.indexOf("-open")>0&&(r=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(r+=200,e=e.replace("-dot","")),e=_a.symbolNames.indexOf(e),e>=0&&(e+=r)}return e%100>=Dwe||e>=400?0:Math.floor(Math.max(e,0))};function jse(e,r,n,i){var s=e%100;return _a.symbolFuncs[s](r,n,i)+(e>=200?Iwe:"")}t(jse,"makePointPath");var sq={x1:1,x2:0,y1:0,y2:0},lq={x1:0,x2:0,y1:1,y2:0},uq=Swe("~f"),Yse={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:sq},horizontalreversed:{node:"linearGradient",attrs:sq,reversed:!0},vertical:{node:"linearGradient",attrs:lq},verticalreversed:{node:"linearGradient",attrs:lq,reversed:!0}};_a.gradient=function(e,r,n,i,s,o){for(var a=s.length,l=Yse[i],u=new Array(a),f=0;f<a;f++)l.reversed?u[a-1-f]=[uq((1-s[f][0])*100),s[f][1]]:u[f]=[uq(s[f][0]*100),s[f][1]];var h=r._fullLayout,v="g"+h._uid+"-"+n,c=h._defs.select(".gradients").selectAll("#"+v).data([i+u.join(";")],bo.identity);c.exit().remove(),c.enter().append(l.node).each(function(){var d=el.select(this);l.attrs&&d.attr(l.attrs),d.attr("id",v);var g=d.selectAll("stop").data(u);g.exit().remove(),g.enter().append("stop"),g.each(function(p){var b=wz(p[1]);el.select(this).attr({offset:p[0]+"%","stop-color":gu.tinyRGB(b),"stop-opacity":b.getAlpha()})})}),e.style(o,l8(v,r)).style(o+"-opacity",null),e.classed("gradient_filled",!0)};_a.pattern=function(e,r,n,i,s,o,a,l,u,f,h,v){var c=r==="legend";l&&(u==="overlay"?(f=l,h=gu.contrast(f)):(f=void 0,h=l));var d=n._fullLayout,g="p"+d._uid+"-"+i,p,b,m=t(function(D,B,z,R,F){return R+(F-R)*(D-B)/(z-B)},"linearFn"),y,T,_,M,w={},x=wz(h),A=gu.tinyRGB(x),S=x.getAlpha(),k=v*S;switch(s){case"/":p=o*Math.sqrt(2),b=o*Math.sqrt(2),y="M-"+p/4+","+b/4+"l"+p/2+",-"+b/2+"M0,"+b+"L"+p+",0M"+p/4*3+","+b/4*5+"l"+p/2+",-"+b/2,T=a*o,M="path",w={d:y,opacity:k,stroke:A,"stroke-width":T+"px"};break;case"\\":p=o*Math.sqrt(2),b=o*Math.sqrt(2),y="M"+p/4*3+",-"+b/4+"l"+p/2+","+b/2+"M0,0L"+p+","+b+"M-"+p/4+","+b/4*3+"l"+p/2+","+b/2,T=a*o,M="path",w={d:y,opacity:k,stroke:A,"stroke-width":T+"px"};break;case"x":p=o*Math.sqrt(2),b=o*Math.sqrt(2),y="M-"+p/4+","+b/4+"l"+p/2+",-"+b/2+"M0,"+b+"L"+p+",0M"+p/4*3+","+b/4*5+"l"+p/2+",-"+b/2+"M"+p/4*3+",-"+b/4+"l"+p/2+","+b/2+"M0,0L"+p+","+b+"M-"+p/4+","+b/4*3+"l"+p/2+","+b/2,T=o-o*Math.sqrt(1-a),M="path",w={d:y,opacity:k,stroke:A,"stroke-width":T+"px"};break;case"|":p=o,b=o,M="path",y="M"+p/2+",0L"+p/2+","+b,T=a*o,M="path",w={d:y,opacity:k,stroke:A,"stroke-width":T+"px"};break;case"-":p=o,b=o,M="path",y="M0,"+b/2+"L"+p+","+b/2,T=a*o,M="path",w={d:y,opacity:k,stroke:A,"stroke-width":T+"px"};break;case"+":p=o,b=o,M="path",y="M"+p/2+",0L"+p/2+","+b+"M0,"+b/2+"L"+p+","+b/2,T=o-o*Math.sqrt(1-a),M="path",w={d:y,opacity:k,stroke:A,"stroke-width":T+"px"};break;case".":p=o,b=o,a<Math.PI/4?_=Math.sqrt(a*o*o/Math.PI):_=m(a,Math.PI/4,1,o/2,o/Math.sqrt(2)),M="circle",w={cx:p/2,cy:b/2,r:_,opacity:k,fill:A};break}var L=[s||"noSh",f||"noBg",h||"noFg",o,a].join(";"),P=d._defs.select(".patterns").selectAll("#"+g).data([L],bo.identity);P.exit().remove(),P.enter().append("pattern").each(function(){var D=el.select(this);if(D.attr({id:g,width:p+"px",height:b+"px",patternUnits:"userSpaceOnUse",patternTransform:c?"scale(0.8)":""}),f){var B=wz(f),z=gu.tinyRGB(B),R=B.getAlpha(),F=D.selectAll("rect").data([0]);F.exit().remove(),F.enter().append("rect").attr({width:p+"px",height:b+"px",fill:z,"fill-opacity":R})}var O=D.selectAll(M).data([0]);O.exit().remove(),O.enter().append(M).attr(w)}),e.style("fill",l8(g,n)).style("fill-opacity",null),e.classed("pattern_filled",!0)};_a.initGradients=function(e){var r=e._fullLayout,n=bo.ensureSingle(r._defs,"g","gradients");n.selectAll("linearGradient,radialGradient").remove(),el.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)};_a.initPatterns=function(e){var r=e._fullLayout,n=bo.ensureSingle(r._defs,"g","patterns");n.selectAll("pattern").remove(),el.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)};_a.getPatternAttr=function(e,r,n){return e&&bo.isArrayOrTypedArray(e)?r<e.length?e[r]:n:e};_a.pointStyle=function(e,r,n){if(!!e.size()){var i=_a.makePointStyleFns(r);e.each(function(s){_a.singlePointStyle(s,el.select(this),r,i,n)})}};_a.singlePointStyle=function(e,r,n,i,s){var o=n.marker,a=o.line;if(r.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):e.mo===void 0?o.opacity:e.mo),i.ms2mrc){var l;e.ms==="various"||o.size==="various"?l=3:l=i.ms2mrc(e.ms),e.mrc=l,i.selectedSizeFn&&(l=e.mrc=i.selectedSizeFn(e));var u=_a.symbolNumber(e.mx||o.symbol)||0;e.om=u%200>=100;var f=f8(e,n),h=u8(e,n);r.attr("d",jse(u,l,f,h))}var v=!1,c,d,g;if(e.so)g=a.outlierwidth,d=a.outliercolor,c=o.outliercolor;else{var p=(a||{}).width;g=(e.mlw+1||p+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in e?d=e.mlcc=i.lineScale(e.mlc):bo.isArrayOrTypedArray(a.color)?d=gu.defaultLine:d=a.color,bo.isArrayOrTypedArray(o.color)&&(c=gu.defaultLine,v=!0),"mc"in e?c=e.mcc=i.markerScale(e.mc):c=o.color||"rgba(0,0,0,0)",i.selectedColorFn&&(c=i.selectedColorFn(e))}if(e.om)r.call(gu.stroke,c).style({"stroke-width":(g||1)+"px",fill:"none"});else{r.style("stroke-width",(e.isBlank?0:g)+"px");var b=o.gradient,m=e.mgt;m?v=!0:m=b&&b.type,bo.isArrayOrTypedArray(m)&&(m=m[0],Yse[m]||(m=0));var y=o.pattern,T=y&&_a.getPatternAttr(y.shape,e.i,"");if(m&&m!=="none"){var _=e.mgc;_?v=!0:_=b.color;var M=n.uid;v&&(M+="-"+e.i),_a.gradient(r,s,M,m,[[0,_],[1,c]],"fill")}else if(T){var w=_a.getPatternAttr(y.bgcolor,e.i,null),x=_a.getPatternAttr(y.fgcolor,e.i,null),A=y.fgopacity,S=_a.getPatternAttr(y.size,e.i,8),k=_a.getPatternAttr(y.solidity,e.i,.3),L=e.mcc||bo.isArrayOrTypedArray(y.shape)||bo.isArrayOrTypedArray(y.bgcolor)||bo.isArrayOrTypedArray(y.size)||bo.isArrayOrTypedArray(y.solidity),P=n.uid;L&&(P+="-"+e.i),_a.pattern(r,"point",s,P,T,S,k,e.mcc,y.fillmode,w,x,A)}else gu.fill(r,c);g&&gu.stroke(r,d)}};_a.makePointStyleFns=function(e){var r={},n=e.marker;return r.markerScale=_a.tryColorscale(n,""),r.lineScale=_a.tryColorscale(n,"line"),pw.traceIs(e,"symbols")&&(r.ms2mrc=Lwe.isBubble(e)?Rwe(e):function(){return(n.size||6)/2}),e.selectedpoints&&bo.extendFlat(r,_a.makeSelectedPointStyleFns(e)),r};_a.makeSelectedPointStyleFns=function(e){var r={},n=e.selected||{},i=e.unselected||{},s=e.marker||{},o=n.marker||{},a=i.marker||{},l=s.opacity,u=o.opacity,f=a.opacity,h=u!==void 0,v=f!==void 0;(bo.isArrayOrTypedArray(l)||h||v)&&(r.selectedOpacityFn=function(_){var M=_.mo===void 0?s.opacity:_.mo;return _.selected?h?u:M:v?f:Vse*M});var c=s.color,d=o.color,g=a.color;(d||g)&&(r.selectedColorFn=function(_){var M=_.mcc||c;return _.selected?d||M:g||M});var p=s.size,b=o.size,m=a.size,y=b!==void 0,T=m!==void 0;return pw.traceIs(e,"symbols")&&(y||T)&&(r.selectedSizeFn=function(_){var M=_.mrc||p/2;return _.selected?y?b/2:M:T?m/2:M}),r};_a.makeSelectedTextStyleFns=function(e){var r={},n=e.selected||{},i=e.unselected||{},s=e.textfont||{},o=n.textfont||{},a=i.textfont||{},l=s.color,u=o.color,f=a.color;return r.selectedTextColorFn=function(h){var v=h.tc||l;return h.selected?u||v:f||(u?v:gu.addOpacity(v,Vse))},r};_a.selectedPointStyle=function(e,r){if(!(!e.size()||!r.selectedpoints)){var n=_a.makeSelectedPointStyleFns(r),i=r.marker||{},s=[];n.selectedOpacityFn&&s.push(function(o,a){o.style("opacity",n.selectedOpacityFn(a))}),n.selectedColorFn&&s.push(function(o,a){gu.fill(o,n.selectedColorFn(a))}),n.selectedSizeFn&&s.push(function(o,a){var l=a.mx||i.symbol||0,u=n.selectedSizeFn(a);o.attr("d",jse(_a.symbolNumber(l),u,f8(a,r),u8(a,r))),a.mrc2=u}),s.length&&e.each(function(o){for(var a=el.select(this),l=0;l<s.length;l++)s[l](a,o)})}};_a.tryColorscale=function(e,r){var n=r?bo.nestedProperty(e,r).get():e;if(n){var i=n.color;if((n.colorscale||n._colorAx)&&bo.isArrayOrTypedArray(i))return Mwe.makeColorScaleFuncFromTrace(n)}return bo.identity};var MT={start:1,end:-1,middle:0,bottom:1,top:-1};function Wse(e,r,n,i,s){var o=el.select(e.node().parentNode),a=r.indexOf("top")!==-1?"top":r.indexOf("bottom")!==-1?"bottom":"middle",l=r.indexOf("left")!==-1?"end":r.indexOf("right")!==-1?"start":"middle",u=i?i/.8+1:0,f=(s8.lineCount(e)-1)*Cwe+1,h=MT[l]*u,v=n*.75+MT[a]*u+(MT[a]-1)*f*n/2;e.attr("text-anchor",l),s||o.attr("transform",A1(h,v))}t(Wse,"textPointPosition");function Xse(e,r){var n=e.ts||r.textfont.size;return p0(n)&&n>0?n:0}t(Xse,"extracTextFontSize");_a.textPointStyle=function(e,r,n){if(!!e.size()){var i;if(r.selectedpoints){var s=_a.makeSelectedTextStyleFns(r);i=s.selectedTextColorFn}var o=r.texttemplate,a=n._fullLayout;e.each(function(l){var u=el.select(this),f=o?bo.extractOption(l,r,"txt","texttemplate"):bo.extractOption(l,r,"tx","text");if(!f&&f!==0){u.remove();return}if(o){var h=r._module.formatLabels,v=h?h(l,r,a):{},c={};Pwe(c,r,l.i);var d=r._meta||{};f=bo.texttemplateString(f,v,a._d3locale,c,l,d)}var g=l.tp||r.textposition,p=Xse(l,r),b=i?i(l):l.tc||r.textfont.color;u.call(_a.font,l.tf||r.textfont.family,p,b).text(f).call(s8.convertToTspans,n).call(Wse,g,p,l.mrc)})}};_a.selectedTextStyle=function(e,r){if(!(!e.size()||!r.selectedpoints)){var n=_a.makeSelectedTextStyleFns(r);e.each(function(i){var s=el.select(this),o=n.selectedTextColorFn(i),a=i.tp||r.textposition,l=Xse(i,r);gu.fill(s,o);var u=pw.traceIs(r,"bar-like");Wse(s,a,l,i.mrc2||i.mrc,u)})}};var fq=.5;_a.smoothopen=function(e,r){if(e.length<3)return"M"+e.join("L");var n="M"+e[0],i=[],s;for(s=1;s<e.length-1;s++)i.push(f_(e[s-1],e[s],e[s+1],r));for(n+="Q"+i[0][0]+" "+e[1],s=2;s<e.length-1;s++)n+="C"+i[s-2][1]+" "+i[s-1][0]+" "+e[s];return n+="Q"+i[e.length-3][1]+" "+e[e.length-1],n};_a.smoothclosed=function(e,r){if(e.length<3)return"M"+e.join("L")+"Z";var n="M"+e[0],i=e.length-1,s=[f_(e[i],e[0],e[1],r)],o;for(o=1;o<i;o++)s.push(f_(e[o-1],e[o],e[o+1],r));for(s.push(f_(e[i-1],e[i],e[0],r)),o=1;o<=i;o++)n+="C"+s[o-1][1]+" "+s[o][0]+" "+e[o];return n+="C"+s[i][1]+" "+s[0][0]+" "+e[0]+"Z",n};var Zse,Kse;function Ng(e,r,n){return n&&(e=Jse(e)),r?f0(e[1]):u0(e[0])}t(Ng,"roundEnd");function u0(e){var r=el.round(e,2);return Zse=r,r}t(u0,"roundX");function f0(e){var r=el.round(e,2);return Kse=r,r}t(f0,"roundY");function f_(e,r,n,i){var s=e[0]-r[0],o=e[1]-r[1],a=n[0]-r[0],l=n[1]-r[1],u=Math.pow(s*s+o*o,fq/2),f=Math.pow(a*a+l*l,fq/2),h=(f*f*s-u*u*a)*i,v=(f*f*o-u*u*l)*i,c=3*f*(u+f),d=3*u*(u+f);return[[u0(r[0]+(c&&h/c)),f0(r[1]+(c&&v/c))],[u0(r[0]-(d&&h/d)),f0(r[1]-(d&&v/d))]]}t(f_,"makeTangent");var zwe={hv:function(e,r,n){return"H"+u0(r[0])+"V"+Ng(r,1,n)},vh:function(e,r,n){return"V"+f0(r[1])+"H"+Ng(r,0,n)},hvh:function(e,r,n){return"H"+u0((e[0]+r[0])/2)+"V"+f0(r[1])+"H"+Ng(r,0,n)},vhv:function(e,r,n){return"V"+f0((e[1]+r[1])/2)+"H"+u0(r[0])+"V"+Ng(r,1,n)}},Fwe=t(function(e,r,n){return"L"+Ng(r,0,n)+","+Ng(r,1,n)},"STEPLINEAR");_a.steps=function(e){var r=zwe[e]||Fwe;return function(n){for(var i="M"+u0(n[0][0])+","+f0(n[0][1]),s=n.length,o=1;o<s;o++)i+=r(n[o-1],n[o],o===s-1);return i}};function Jse(e,r){var n=e.backoff,i=e.trace,s=e.d,o=e.i;if(n&&i&&i.marker&&i.marker.angle%360===0&&i.line&&i.line.shape!=="spline"){var a=bo.isArrayOrTypedArray(n),l=e,u=r?r[0]:Zse||0,f=r?r[1]:Kse||0,h=l[0],v=l[1],c=h-u,d=v-f,g=Math.atan2(d,c),p=a?n[o]:n;if(p==="auto"){var b=l.i;i.type==="scatter"&&b--;var m=l.marker;p=m?_a.symbolBackOffs[_a.symbolNumber(m.symbol)]*m.size:0,p+=_a.getMarkerStandoff(s[b],i)||0}var y=h-p*Math.cos(g),T=v-p*Math.sin(g);(y<=h&&y>=u||y>=h&&y<=u)&&(T<=v&&T>=f||T>=v&&T<=f)&&(e=[y,T])}return e}t(Jse,"applyBackoff");_a.applyBackoff=Jse;_a.makeTester=function(){var e=bo.ensureSingleById(el.select("body"),"svg","js-plotly-tester",function(n){n.attr(kwe.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),r=bo.ensureSingle(e,"path","js-reference-point",function(n){n.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});_a.tester=e,_a.testref=r};_a.savedBBoxes={};var kT=0,Bwe=1e4;_a.bBox=function(e,r,n){n||(n=cq(e));var i;if(n){if(i=_a.savedBBoxes[n],i)return bo.extendFlat({},i)}else if(e.childNodes.length===1){var s=e.childNodes[0];if(n=cq(s),n){var o=+s.getAttribute("x")||0,a=+s.getAttribute("y")||0,l=s.getAttribute("transform");if(!l){var u=_a.bBox(s,!1,n);return o&&(u.left+=o,u.right+=o),a&&(u.top+=a,u.bottom+=a),u}if(n+="~"+o+"~"+a+"~"+l,i=_a.savedBBoxes[n],i)return bo.extendFlat({},i)}}var f,h;r?f=e:(h=_a.tester.node(),f=e.cloneNode(!0),h.appendChild(f)),el.select(f).attr("transform",null).call(s8.positionText,0,0);var v=f.getBoundingClientRect(),c=_a.testref.node().getBoundingClientRect();r||h.removeChild(f);var d={height:v.height,width:v.width,left:v.left-c.left,top:v.top-c.top,right:v.right-c.left,bottom:v.bottom-c.top};return kT>=Bwe&&(_a.savedBBoxes={},kT=0),n&&(_a.savedBBoxes[n]=d),kT++,bo.extendFlat({},d)};function cq(e){var r=e.getAttribute("data-unformatted");if(r!==null)return r+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}t(cq,"nodeHash");_a.setClipUrl=function(e,r,n){e.attr("clip-path",l8(r,n))};function l8(e,r){if(!e)return null;var n=r._context,i=n._exportedPlot?"":n._baseUrl||"";return i?"url('"+i+"#"+e+"')":"url(#"+e+")"}t(l8,"getFullUrl");_a.getTranslate=function(e){var r=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,n=e.attr?"attr":"getAttribute",i=e[n]("transform")||"",s=i.replace(r,function(o,a,l){return[a,l].join(" ")}).split(" ");return{x:+s[0]||0,y:+s[1]||0}};_a.setTranslate=function(e,r,n){var i=/(\btranslate\(.*?\);?)/,s=e.attr?"attr":"getAttribute",o=e.attr?"attr":"setAttribute",a=e[s]("transform")||"";return r=r||0,n=n||0,a=a.replace(i,"").trim(),a+=A1(r,n),a=a.trim(),e[o]("transform",a),a};_a.getScale=function(e){var r=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,n=e.attr?"attr":"getAttribute",i=e[n]("transform")||"",s=i.replace(r,function(o,a,l){return[a,l].join(" ")}).split(" ");return{x:+s[0]||1,y:+s[1]||1}};_a.setScale=function(e,r,n){var i=/(\bscale\(.*?\);?)/,s=e.attr?"attr":"getAttribute",o=e.attr?"attr":"setAttribute",a=e[s]("transform")||"";return r=r||1,n=n||1,a=a.replace(i,"").trim(),a+="scale("+r+","+n+")",a=a.trim(),e[o]("transform",a),a};var Owe=/\s*sc.*/;_a.setPointGroupScale=function(e,r,n){if(r=r||1,n=n||1,!!e){var i=r===1&&n===1?"":"scale("+r+","+n+")";e.each(function(){var s=(this.getAttribute("transform")||"").replace(Owe,"");s+=i,s=s.trim(),this.setAttribute("transform",s)})}};var Nwe=/translate\([^)]*\)\s*$/;_a.setTextPointsScale=function(e,r,n){!e||e.each(function(){var i,s=el.select(this),o=s.select("text");if(!!o.node()){var a=parseFloat(o.attr("x")||0),l=parseFloat(o.attr("y")||0),u=(s.attr("transform")||"").match(Nwe);r===1&&n===1?i=[]:i=[A1(a,l),"scale("+r+","+n+")",A1(-a,-l)],u&&i.push(u),s.attr("transform",i.join(""))}})};function u8(e,r){var n;return e&&(n=e.mf),n===void 0&&(n=r.marker&&r.marker.standoff||0),!r._geo&&!r._xA?-n:n}t(u8,"getMarkerStandoff");_a.getMarkerStandoff=u8;var xm=Math.atan2,r0=Math.cos,qg=Math.sin;function hq(e,r){var n=r[0],i=r[1];return[n*r0(e)-i*qg(e),n*qg(e)+i*r0(e)]}t(hq,"rotate");var vq,dq,pq,gq,ET,CT;function f8(e,r){var n=e.ma;n===void 0&&(n=r.marker.angle||0);var i,s,o=r.marker.angleref;if(o==="previous"||o==="north"){if(r._geo){var a=r._geo.project(e.lonlat);i=a[0],s=a[1]}else{var l=r._xA,u=r._yA;if(l&&u)i=l.c2p(e.x),s=u.c2p(e.y);else return 90}if(r._geo){var f=e.lonlat[0],h=e.lonlat[1],v=r._geo.project([f,h+1e-5]),c=r._geo.project([f+1e-5,h]),d=xm(c[1]-s,c[0]-i),g=xm(v[1]-s,v[0]-i),p;if(o==="north")p=n/180*Math.PI;else if(o==="previous"){var b=f/180*Math.PI,m=h/180*Math.PI,y=vq/180*Math.PI,T=dq/180*Math.PI,_=y-b,M=r0(T)*qg(_),w=qg(T)*r0(m)-r0(T)*qg(m)*r0(_);p=-xm(M,w)-Math.PI,vq=f,dq=h}var x=hq(d,[r0(p),0]),A=hq(g,[qg(p),0]);n=xm(x[1]+A[1],x[0]+A[0])/Math.PI*180,o==="previous"&&!(CT===r.uid&&e.i===ET+1)&&(n=null)}if(o==="previous"&&!r._geo)if(CT===r.uid&&e.i===ET+1&&p0(i)&&p0(s)){var S=i-pq,k=s-gq,L=r.line&&r.line.shape||"",P=L.slice(L.length-1);P==="h"&&(k=0),P==="v"&&(S=0),n+=xm(k,S)/Math.PI*180+90}else n=null}return pq=i,gq=s,ET=e.i,CT=r.uid,n}t(f8,"getMarkerAngle");_a.getMarkerAngle=f8;var ub=Va.exports,qwe=xn,yq=so.exports,mq=Na,Dg=Nt.exports,xq=Dg.strTranslate,bq=bn.exports,_q=$a.exports,LT=Ji,wq=A0,Uwe=yl.OPPOSITE_SIDE,Tq=/ [XY][0-9]* /;function Hwe(e,r,n){var i=n.propContainer,s=n.propName,o=n.placeholder,a=n.traceIndex,l=n.avoid||{},u=n.attributes,f=n.transform,h=n.containerGroup,v=e._fullLayout,c=1,d=!1,g=i.title,p=(g&&g.text?g.text:"").trim(),b=g&&g.font?g.font:{},m=b.family,y=b.size,T=b.color,_;s==="title.text"?_="titleText":s.indexOf("axis")!==-1?_="axisTitleText":s.indexOf("colorbar"!==-1)&&(_="colorbarTitleText");var M=e._context.edits[_];p===""?c=0:p.replace(Tq," % ")===o.replace(Tq," % ")&&(c=.2,d=!0,M||(p="")),n._meta?p=Dg.templateString(p,n._meta):v._meta&&(p=Dg.templateString(p,v._meta));var w=p||M,x;h||(h=Dg.ensureSingle(v._infolayer,"g","g-"+r),x=v._hColorbarMoveTitle);var A=h.selectAll("text").data(w?[0]:[]);if(A.enter().append("text"),A.text(p).attr("class",r),A.exit().remove(),!w)return h;function S(D){Dg.syncOrAsync([k,L],D)}t(S,"titleLayout");function k(D){var B;return!f&&x&&(f={}),f?(B="",f.rotate&&(B+="rotate("+[f.rotate,u.x,u.y]+")"),(f.offset||x)&&(B+=xq(0,(f.offset||0)-(x||0)))):B=null,D.attr("transform",B),D.style({"font-family":m,"font-size":ub.round(y,2)+"px",fill:_q.rgb(T),opacity:c*_q.opacity(T),"font-weight":yq.fontWeight}).attr(u).call(LT.convertToTspans,e),yq.previousPromises(e)}t(k,"drawTitle");function L(D){var B=ub.select(D.node().parentNode);if(l&&l.selection&&l.side&&p){B.attr("transform",null);var z=Uwe[l.side],R=l.side==="left"||l.side==="top"?-1:1,F=qwe(l.pad)?l.pad:2,O=bq.bBox(B.node()),q={left:0,top:0,right:v.width,bottom:v.height},H=l.maxShift||R*(q[l.side]-O[l.side]),j=0;if(H<0)j=H;else{var X=l.offsetLeft||0,G=l.offsetTop||0;O.left-=X,O.right-=X,O.top-=G,O.bottom-=G,l.selection.each(function(){var te=bq.bBox(this);Dg.bBoxIntersect(O,te,F)&&(j=Math.max(j,R*(te[l.side]-O[z])+F))}),j=Math.min(H,j)}if(j>0||H<0){var $={left:[-j,0],right:[j,0],top:[0,-j],bottom:[0,j]}[l.side];B.attr("transform",xq($[0],$[1]))}}}t(L,"scootTitle"),A.call(S);function P(){c=0,d=!0,A.text(o).on("mouseover.opacity",function(){ub.select(this).transition().duration(wq.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){ub.select(this).transition().duration(wq.HIDE_PLACEHOLDER).style("opacity",0)})}return t(P,"setPlaceholder"),M&&(p?A.on(".opacity",null):P(),A.call(LT.makeEditable,{gd:e}).on("edit",function(D){a!==void 0?mq.call("_guiRestyle",e,s,D,a):mq.call("_guiRelayout",e,s,D)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(S)}).on("input",function(D){this.text(D||" ").call(LT.positionText,u.x,u.y)})),A.classed("js-placeholder",d),h}t(Hwe,"draw$d");var Ey={draw:Hwe},RT,Aq;function hd(){if(Aq)return RT;Aq=1;var e=Va.exports,r=w1.utcFormat,n=Nt.exports,i=n.numberFormat,s=xn,o=n.cleanNumber,a=n.ms2DateTime,l=n.dateTime2ms,u=n.ensureNumber,f=n.isArrayOrTypedArray,h=jn,v=h.FP_SAFE,c=h.BADNUM,d=h.LOG_CLIP,g=h.ONEWEEK,p=h.ONEDAY,b=h.ONEHOUR,m=h.ONEMIN,y=h.ONESEC,T=$o,_=al,M=_.HOUR_PATTERN,w=_.WEEKDAY_PATTERN;function x(S){return Math.pow(10,S)}t(x,"fromLog");function A(S){return S!=null}return t(A,"isValidCategory"),RT=t(function(k,L){L=L||{};var P=k._id||"x",D=P.charAt(0);function B(W,ne){if(W>0)return Math.log(W)/Math.LN10;if(W<=0&&ne&&k.range&&k.range.length===2){var he=k.range[0],re=k.range[1];return .5*(he+re-2*d*Math.abs(he-re))}else return c}t(B,"toLog");function z(W,ne,he,re){if((re||{}).msUTC&&s(W))return+W;var ae=l(W,he||k.calendar);if(ae===c)if(s(W)){W=+W;var fe=Math.floor(n.mod(W+.05,1)*10),ce=Math.round(W-fe/10);ae=l(new Date(ce))+fe/10}else return c;return ae}t(z,"dt2ms");function R(W,ne,he){return a(W,ne,he||k.calendar)}t(R,"ms2dt");function F(W){return k._categories[Math.round(W)]}t(F,"getCategoryName");function O(W){if(A(W)){if(k._categoriesMap===void 0&&(k._categoriesMap={}),k._categoriesMap[W]!==void 0)return k._categoriesMap[W];k._categories.push(typeof W=="number"?String(W):W);var ne=k._categories.length-1;return k._categoriesMap[W]=ne,ne}return c}t(O,"setCategoryIndex");function q(W,ne){for(var he=new Array(ne),re=0;re<ne;re++){var ae=(W[0]||[])[re],fe=(W[1]||[])[re];he[re]=H([ae,fe])}return he}t(q,"setMultiCategoryIndex");function H(W){if(k._categoriesMap)return k._categoriesMap[W]}t(H,"getCategoryIndex");function j(W){var ne=H(W);if(ne!==void 0)return ne;if(s(W))return+W}t(j,"getCategoryPosition");function X(W){return s(W)?+W:H(W)}t(X,"getRangePosition");function G(W,ne,he){return e.round(he+ne*W,2)}t(G,"_l2p");function $(W,ne,he){return(W-he)/ne}t($,"_p2l");var te=t(function(ne){return s(ne)?G(ne,k._m,k._b):c},"l2p"),ee=t(function(W){return $(W,k._m,k._b)},"p2l");if(k.rangebreaks){var ie=D==="y";te=t(function(W){if(!s(W))return c;var ne=k._rangebreaks.length;if(!ne)return G(W,k._m,k._b);var he=ie;k.range[0]>k.range[1]&&(he=!he);for(var re=he?-1:1,ae=re*W,fe=0,ce=0;ce<ne;ce++){var xe=re*k._rangebreaks[ce].min,Te=re*k._rangebreaks[ce].max;if(ae<xe)break;if(ae>Te)fe=ce+1;else{fe=ae<(xe+Te)/2?ce:ce+1;break}}var me=k._B[fe]||0;return isFinite(me)?G(W,k._m2,me):0},"l2p"),ee=t(function(W){var ne=k._rangebreaks.length;if(!ne)return $(W,k._m,k._b);for(var he=0,re=0;re<ne&&!(W<k._rangebreaks[re].pmin);re++)W>k._rangebreaks[re].pmax&&(he=re+1);return $(W,k._m2,k._B[he])},"p2l")}k.c2l=k.type==="log"?B:u,k.l2c=k.type==="log"?x:u,k.l2p=te,k.p2l=ee,k.c2p=k.type==="log"?function(W,ne){return te(B(W,ne))}:te,k.p2c=k.type==="log"?function(W){return x(ee(W))}:ee,["linear","-"].indexOf(k.type)!==-1?(k.d2r=k.r2d=k.d2c=k.r2c=k.d2l=k.r2l=o,k.c2d=k.c2r=k.l2d=k.l2r=u,k.d2p=k.r2p=function(W){return k.l2p(o(W))},k.p2d=k.p2r=ee,k.cleanPos=u):k.type==="log"?(k.d2r=k.d2l=function(W,ne){return B(o(W),ne)},k.r2d=k.r2c=function(W){return x(o(W))},k.d2c=k.r2l=o,k.c2d=k.l2r=u,k.c2r=B,k.l2d=x,k.d2p=function(W,ne){return k.l2p(k.d2r(W,ne))},k.p2d=function(W){return x(ee(W))},k.r2p=function(W){return k.l2p(o(W))},k.p2r=ee,k.cleanPos=u):k.type==="date"?(k.d2r=k.r2d=n.identity,k.d2c=k.r2c=k.d2l=k.r2l=z,k.c2d=k.c2r=k.l2d=k.l2r=R,k.d2p=k.r2p=function(W,ne,he){return k.l2p(z(W,0,he))},k.p2d=k.p2r=function(W,ne,he){return R(ee(W),ne,he)},k.cleanPos=function(W){return n.cleanDate(W,c,k.calendar)}):k.type==="category"?(k.d2c=k.d2l=O,k.r2d=k.c2d=k.l2d=F,k.d2r=k.d2l_noadd=j,k.r2c=function(W){var ne=X(W);return ne!==void 0?ne:k.fraction2r(.5)},k.l2r=k.c2r=u,k.r2l=X,k.d2p=function(W){return k.l2p(k.r2c(W))},k.p2d=function(W){return F(ee(W))},k.r2p=k.d2p,k.p2r=ee,k.cleanPos=function(W){return typeof W=="string"&&W!==""?W:u(W)}):k.type==="multicategory"&&(k.r2d=k.c2d=k.l2d=F,k.d2r=k.d2l_noadd=j,k.r2c=function(W){var ne=j(W);return ne!==void 0?ne:k.fraction2r(.5)},k.r2c_just_indices=H,k.l2r=k.c2r=u,k.r2l=j,k.d2p=function(W){return k.l2p(k.r2c(W))},k.p2d=function(W){return F(ee(W))},k.r2p=k.d2p,k.p2r=ee,k.cleanPos=function(W){return Array.isArray(W)||typeof W=="string"&&W!==""?W:u(W)},k.setupMultiCategory=function(W){var ne=k._traceIndices,he,re,ae=k._matchGroup;if(ae&&k._categories.length===0){for(var fe in ae)if(fe!==P){var ce=L[T.id2name(fe)];ne=ne.concat(ce._traceIndices)}}var xe=[[0,{}],[0,{}]],Te=[];for(he=0;he<ne.length;he++){var me=W[ne[he]];if(D in me){var pe=me[D],oe=me._length||n.minRowLength(pe);if(f(pe[0])&&f(pe[1]))for(re=0;re<oe;re++){var de=pe[0][re],ye=pe[1][re];A(de)&&A(ye)&&(Te.push([de,ye]),de in xe[0][1]||(xe[0][1][de]=xe[0][0]++),ye in xe[1][1]||(xe[1][1][ye]=xe[1][0]++))}}}for(Te.sort(function(we,Ee){var De=xe[0][1],Fe=De[we[0]]-De[Ee[0]];if(Fe)return Fe;var qe=xe[1][1];return qe[we[1]]-qe[Ee[1]]}),he=0;he<Te.length;he++)O(Te[he])}),k.fraction2r=function(W){var ne=k.r2l(k.range[0]),he=k.r2l(k.range[1]);return k.l2r(ne+W*(he-ne))},k.r2fraction=function(W){var ne=k.r2l(k.range[0]),he=k.r2l(k.range[1]);return(k.r2l(W)-ne)/(he-ne)},k.cleanRange=function(W,ne){ne||(ne={}),W||(W="range");var he=n.nestedProperty(k,W).get(),re,ae;if(k.type==="date"?ae=n.dfltRange(k.calendar):D==="y"?ae=_.DFLTRANGEY:k._name==="realaxis"?ae=[0,1]:ae=ne.dfltRange||_.DFLTRANGEX,ae=ae.slice(),(k.rangemode==="tozero"||k.rangemode==="nonnegative")&&(ae[0]=0),!he||he.length!==2){n.nestedProperty(k,W).set(ae);return}for(k.type==="date"&&!k.autorange&&(he[0]=n.cleanDate(he[0],c,k.calendar),he[1]=n.cleanDate(he[1],c,k.calendar)),re=0;re<2;re++)if(k.type==="date"){if(!n.isDateTime(he[re],k.calendar)){k[W]=ae;break}if(k.r2l(he[0])===k.r2l(he[1])){var fe=n.constrain(k.r2l(he[0]),n.MIN_MS+1e3,n.MAX_MS-1e3);he[0]=k.l2r(fe-1e3),he[1]=k.l2r(fe+1e3);break}}else{if(!s(he[re]))if(s(he[1-re]))he[re]=he[1-re]*(re?10:.1);else{k[W]=ae;break}if(he[re]<-v?he[re]=-v:he[re]>v&&(he[re]=v),he[0]===he[1]){var ce=Math.max(1,Math.abs(he[0]*1e-6));he[0]-=ce,he[1]+=ce}}},k.setScale=function(W){var ne=L._size;if(k.overlaying){var he=T.getFromId({_fullLayout:L},k.overlaying);k.domain=he.domain}var re=W&&k._r?"_r":"range",ae=k.calendar;k.cleanRange(re);var fe=k.r2l(k[re][0],ae),ce=k.r2l(k[re][1],ae),xe=D==="y";if(xe?(k._offset=ne.t+(1-k.domain[1])*ne.h,k._length=ne.h*(k.domain[1]-k.domain[0]),k._m=k._length/(fe-ce),k._b=-k._m*ce):(k._offset=ne.l+k.domain[0]*ne.w,k._length=ne.w*(k.domain[1]-k.domain[0]),k._m=k._length/(ce-fe),k._b=-k._m*fe),k._rangebreaks=[],k._lBreaks=0,k._m2=0,k._B=[],k.rangebreaks){var Te,me;if(k._rangebreaks=k.locateBreaks(Math.min(fe,ce),Math.max(fe,ce)),k._rangebreaks.length){for(Te=0;Te<k._rangebreaks.length;Te++)me=k._rangebreaks[Te],k._lBreaks+=Math.abs(me.max-me.min);var pe=xe;fe>ce&&(pe=!pe),pe&&k._rangebreaks.reverse();var oe=pe?-1:1;for(k._m2=oe*k._length/(Math.abs(ce-fe)-k._lBreaks),k._B.push(-k._m2*(xe?ce:fe)),Te=0;Te<k._rangebreaks.length;Te++)me=k._rangebreaks[Te],k._B.push(k._B[k._B.length-1]-oe*k._m2*(me.max-me.min));for(Te=0;Te<k._rangebreaks.length;Te++)me=k._rangebreaks[Te],me.pmin=te(me.min),me.pmax=te(me.max)}}if(!isFinite(k._m)||!isFinite(k._b)||k._length<0)throw L._replotting=!1,new Error("Something went wrong with axis scaling")},k.maskBreaks=function(W){var ne=k.rangebreaks||[],he,re,ae,fe,ce;ne._cachedPatterns||(ne._cachedPatterns=ne.map(function(De){return De.enabled&&De.bounds?n.simpleMap(De.bounds,De.pattern?o:k.d2c):null})),ne._cachedValues||(ne._cachedValues=ne.map(function(De){return De.enabled&&De.values?n.simpleMap(De.values,k.d2c).sort(n.sorterAsc):null}));for(var xe=0;xe<ne.length;xe++){var Te=ne[xe];if(Te.enabled){if(Te.bounds){var me=Te.pattern;switch(he=ne._cachedPatterns[xe],re=he[0],ae=he[1],me){case w:ce=new Date(W),fe=ce.getUTCDay(),re>ae&&(ae+=7,fe<re&&(fe+=7));break;case M:ce=new Date(W);var pe=ce.getUTCHours(),oe=ce.getUTCMinutes(),de=ce.getUTCSeconds(),ye=ce.getUTCMilliseconds();fe=pe+(oe/60+de/3600+ye/36e5),re>ae&&(ae+=24,fe<re&&(fe+=24));break;case"":fe=W;break}if(fe>=re&&fe<ae)return c}else for(var we=ne._cachedValues[xe],Ee=0;Ee<we.length;Ee++)if(re=we[Ee],ae=re+Te.dvalue,W>=re&&W<ae)return c}}return W},k.locateBreaks=function(W,ne){var he,re,ae,fe,ce=[];if(!k.rangebreaks)return ce;var xe=k.rangebreaks.slice().sort(function(qe,Je){return qe.pattern===w&&Je.pattern===M?-1:Je.pattern===w&&qe.pattern===M?1:0}),Te=t(function(qe,Je){if(qe=n.constrain(qe,W,ne),Je=n.constrain(Je,W,ne),qe!==Je){for(var Ge=!0,et=0;et<ce.length;et++){var Ue=ce[et];qe<Ue.max&&Je>=Ue.min&&(qe<Ue.min&&(Ue.min=qe),Je>Ue.max&&(Ue.max=Je),Ge=!1)}Ge&&ce.push({min:qe,max:Je})}},"addBreak");for(he=0;he<xe.length;he++){var me=xe[he];if(me.enabled)if(me.bounds){var pe=W,oe=ne;me.pattern&&(pe=Math.floor(pe)),re=n.simpleMap(me.bounds,me.pattern?o:k.r2l),ae=re[0],fe=re[1];var de=new Date(pe),ye,we;switch(me.pattern){case w:we=g,ye=((fe<ae?7:0)+(fe-ae))*p,pe+=ae*p-(de.getUTCDay()*p+de.getUTCHours()*b+de.getUTCMinutes()*m+de.getUTCSeconds()*y+de.getUTCMilliseconds());break;case M:we=p,ye=((fe<ae?24:0)+(fe-ae))*b,pe+=ae*b-(de.getUTCHours()*b+de.getUTCMinutes()*m+de.getUTCSeconds()*y+de.getUTCMilliseconds());break;default:pe=Math.min(re[0],re[1]),oe=Math.max(re[0],re[1]),we=oe-pe,ye=we}for(var Ee=pe;Ee<oe;Ee+=we)Te(Ee,Ee+ye)}else for(var De=n.simpleMap(me.values,k.d2c),Fe=0;Fe<De.length;Fe++)ae=De[Fe],fe=ae+me.dvalue,Te(ae,fe)}return ce.sort(function(qe,Je){return qe.min-Je.min}),ce},k.makeCalcdata=function(W,ne,he){var re,ae,fe,ce,xe=k.type,Te=xe==="date"&&W[ne+"calendar"];if(ne in W){if(re=W[ne],ce=W._length||n.minRowLength(re),n.isTypedArray(re)&&(xe==="linear"||xe==="log")){if(ce===re.length)return re;if(re.subarray)return re.subarray(0,ce)}if(xe==="multicategory")return q(re,ce);for(ae=new Array(ce),fe=0;fe<ce;fe++)ae[fe]=k.d2c(re[fe],0,Te,he)}else{var me=ne+"0"in W?k.d2c(W[ne+"0"],0,Te):0,pe=W["d"+ne]?Number(W["d"+ne]):1;for(re=W[{x:"y",y:"x"}[ne]],ce=W._length||re.length,ae=new Array(ce),fe=0;fe<ce;fe++)ae[fe]=me+fe*pe}if(k.rangebreaks)for(fe=0;fe<ce;fe++)ae[fe]=k.maskBreaks(ae[fe]);return ae},k.isValidRange=function(W){return Array.isArray(W)&&W.length===2&&s(k.r2l(W[0]))&&s(k.r2l(W[1]))},k.isPtWithinRange=function(W,ne){var he=k.c2l(W[D],null,ne),re=k.r2l(k.range[0]),ae=k.r2l(k.range[1]);return re<ae?re<=he&&he<=ae:ae<=he&&he<=re},k._emptyCategories=function(){k._categories=[],k._categoriesMap={}},k.clearCalc=function(){var W=k._matchGroup;if(W){var ne=null,he=null;for(var re in W){var ae=L[T.id2name(re)];if(ae._categories){ne=ae._categories,he=ae._categoriesMap;break}}ne&&he?(k._categories=ne,k._categoriesMap=he):k._emptyCategories()}else k._emptyCategories();if(k._initialCategories)for(var fe=0;fe<k._initialCategories.length;fe++)O(k._initialCategories[fe])},k.sortByInitialCategories=function(){var W=[];if(k._emptyCategories(),k._initialCategories)for(var ne=0;ne<k._initialCategories.length;ne++)O(k._initialCategories[ne]);W=W.concat(k._traceIndices);var he=k._matchGroup;for(var re in he)if(P!==re){var ae=L[T.id2name(re)];ae._categories=k._categories,ae._categoriesMap=k._categoriesMap,W=W.concat(ae._traceIndices)}return W};var se=L._d3locale;k.type==="date"&&(k._dateFormat=se?se.timeFormat:r,k._extraFormat=L._extraFormat),k._separators=L.separators,k._numFormat=se?se.numberFormat:i,delete k._minDtick,delete k._forceTick0},"setConvert"),RT}t(hd,"requireSet_convert$2");var PT,Sq;function Q1(){if(Sq)return PT;Sq=1;var e=xn,r=Nt.exports,n=jn.BADNUM,i=r.isArrayOrTypedArray,s=r.isDateTime,o=r.cleanNumber,a=Math.round;PT=t(function(g,p,b){var m=g,y=b.noMultiCategory;if(i(m)&&!m.length)return"-";if(!y&&c(m))return"multicategory";if(y&&Array.isArray(m[0])){for(var T=[],_=0;_<m.length;_++)if(i(m[_]))for(var M=0;M<m[_].length;M++)T.push(m[_][M]);m=T}if(f(m,p))return"date";var w=b.autotypenumbers!=="strict";return v(m,w)?"category":u(m,w)?"linear":"-"},"autoType");function l(d,g){return g?e(d):typeof d=="number"}t(l,"hasTypeNumber");function u(d,g){for(var p=d.length,b=0;b<p;b++)if(l(d[b],g))return!0;return!1}t(u,"linearOK");function f(d,g){for(var p=d.length,b=h(p),m=0,y=0,T={},_=0;_<p;_+=b){var M=a(_),w=d[M],x=String(w);T[x]||(T[x]=1,s(w,g)&&m++,e(w)&&y++)}return m>y*2}t(f,"moreDates");function h(d){return Math.max(1,(d-1)/1e3)}t(h,"getIncrement");function v(d,g){for(var p=d.length,b=h(p),m=0,y=0,T={},_=0;_<p;_+=b){var M=a(_),w=d[M],x=String(w);if(!T[x]){T[x]=1;var A=typeof w;A==="boolean"?y++:(g?o(w)!==n:A==="number")?m++:A==="string"&&y++}}return y>m*2}t(v,"category");function c(d){return i(d[0])&&i(d[1])}return t(c,"multiCategory"),PT}t(Q1,"requireAxis_autotype");var DT,Mq;function Lh(){if(Mq)return DT;Mq=1;var e=Va.exports,r=xn,n=Nt.exports,i=jn.FP_SAFE,s=Na,o=bn.exports,a=$o,l=a.getFromId,u=a.isLinked;DT={getAutoRange:f,makePadFn:v,doAutoRange:p,findExtremes:b,concatExtremes:g};function f(x,A){var S,k,L=[],P=x._fullLayout,D=v(P,A,0),B=v(P,A,1),z=g(x,A),R=z.min,F=z.max;if(R.length===0||F.length===0)return n.simpleMap(A.range,A.r2l);var O=R[0].val,q=F[0].val;for(S=1;S<R.length&&O===q;S++)O=Math.min(O,R[S].val);for(S=1;S<F.length&&O===q;S++)q=Math.max(q,F[S].val);var H=!1;if(A.range){var j=n.simpleMap(A.range,A.r2l);H=j[1]<j[0]}A.autorange==="reversed"&&(H=!0,A.autorange=!0);var X=A.rangemode,G=X==="tozero",$=X==="nonnegative",te=A._length,ee=te/10,ie=0,se,W,ne,he,re,ae;for(S=0;S<R.length;S++)for(se=R[S],k=0;k<F.length;k++)W=F[k],ae=W.val-se.val-h(A,se.val,W.val),ae>0&&(re=te-D(se)-B(W),re>ee?ae/re>ie&&(ne=se,he=W,ie=ae/re):ae/te>ie&&(ne={val:se.val,nopad:1},he={val:W.val,nopad:1},ie=ae/te));function fe(pe,oe){return Math.max(pe,B(oe))}if(t(fe,"maximumPad"),O===q){var ce=O-1,xe=O+1;if(G)if(O===0)L=[0,1];else{var Te=(O>0?F:R).reduce(fe,0),me=O/(1-Math.min(.5,Te/te));L=O>0?[0,me]:[me,0]}else $?L=[Math.max(0,ce),Math.max(1,xe)]:L=[ce,xe]}else G?(ne.val>=0&&(ne={val:0,nopad:1}),he.val<=0&&(he={val:0,nopad:1})):$&&(ne.val-ie*D(ne)<0&&(ne={val:0,nopad:1}),he.val<=0&&(he={val:1,nopad:1})),ie=(he.val-ne.val-h(A,se.val,W.val))/(te-D(ne)-B(he)),L=[ne.val-ie*D(ne),he.val+ie*B(he)];return H&&L.reverse(),n.simpleMap(L,A.l2r||Number)}t(f,"getAutoRange");function h(x,A,S){var k=0;if(x.rangebreaks)for(var L=x.locateBreaks(A,S),P=0;P<L.length;P++){var D=L[P];k+=D.max-D.min}return k}t(h,"calcBreaksLength");function v(x,A,S){var k=.05*A._length,L=A._anchorAxis||{};if((A.ticklabelposition||"").indexOf("inside")!==-1||(L.ticklabelposition||"").indexOf("inside")!==-1){var P=A.autorange==="reversed";if(!P){var D=n.simpleMap(A.range,A.r2l);P=D[1]<D[0]}P&&(S=!S)}var B=0;return u(x,A._id)||(B=d(x,A,S)),k=Math.max(B,k),A.constrain==="domain"&&A._inputDomain&&(k*=(A._inputDomain[1]-A._inputDomain[0])/(A.domain[1]-A.domain[0])),t(function(R){return R.nopad?0:R.pad+(R.extrapad?k:B)},"getPad")}t(v,"makePadFn");var c=3;function d(x,A,S){var k=0,L=A._id.charAt(0)==="x";for(var P in x._plots){var D=x._plots[P];if(!(A._id!==D.xaxis._id&&A._id!==D.yaxis._id)){var B=(L?D.yaxis:D.xaxis)||{};if((B.ticklabelposition||"").indexOf("inside")!==-1&&(!S&&(B.side==="left"||B.side==="bottom")||S&&(B.side==="top"||B.side==="right"))){if(B._vals){var z=n.deg2rad(B._tickAngles[B._id+"tick"]||0),R=Math.abs(Math.cos(z)),F=Math.abs(Math.sin(z));if(!B._vals[0].bb){var O=B._id+"tick",q=B._selections[O];q.each(function(te){var ee=e.select(this),ie=ee.select(".text-math-group");ie.empty()&&(te.bb=o.bBox(ee.node()))})}for(var H=0;H<B._vals.length;H++){var j=B._vals[H],X=j.bb;if(X){var G=2*c+X.width,$=2*c+X.height;k=Math.max(k,L?Math.max(G*R,$*F):Math.max($*R,G*F))}}}B.ticks==="inside"&&B.ticklabelposition==="inside"&&(k+=B.ticklen||0)}}}return k}t(d,"padInsideLabelsOnAnchorAxis");function g(x,A,S){var k=A._id,L=x._fullData,P=x._fullLayout,D=[],B=[],z,R,F;function O(G,$){for(z=0;z<$.length;z++){var te=G[$[z]],ee=(te._extremes||{})[k];if(te.visible===!0&&ee){for(R=0;R<ee.min.length;R++)F=ee.min[R],m(D,F.val,F.pad,{extrapad:F.extrapad});for(R=0;R<ee.max.length;R++)F=ee.max[R],y(B,F.val,F.pad,{extrapad:F.extrapad})}}}if(t(O,"_concat"),O(L,A._traceIndices),O(P.annotations||[],A._annIndices||[]),O(P.shapes||[],A._shapeIndices||[]),A._matchGroup&&!S){for(var q in A._matchGroup)if(q!==A._id){var H=l(x,q),j=g(x,H,!0),X=A._length/H._length;for(R=0;R<j.min.length;R++)F=j.min[R],m(D,F.val,F.pad*X,{extrapad:F.extrapad});for(R=0;R<j.max.length;R++)F=j.max[R],y(B,F.val,F.pad*X,{extrapad:F.extrapad})}}return{min:D,max:B}}t(g,"concatExtremes");function p(x,A,S){if(A.setScale(),A.autorange){A.range=S?S.slice():f(x,A),A._r=A.range.slice(),A._rl=n.simpleMap(A._r,A.r2l);var k=A._input,L={};L[A._attr+".range"]=A.range,L[A._attr+".autorange"]=A.autorange,s.call("_storeDirectGUIEdit",x.layout,x._fullLayout._preGUI,L),k.range=A.range.slice(),k.autorange=A.autorange}var P=A._anchorAxis;if(P&&P.rangeslider){var D=P.rangeslider[A._name];D&&D.rangemode==="auto"&&(D.range=f(x,A)),P._input.rangeslider[A._name]=n.extendFlat({},D)}}t(p,"doAutoRange");function b(x,A,S){S||(S={}),x._m||x.setScale();var k=[],L=[],P=A.length,D=S.padded||!1,B=S.tozero&&(x.type==="linear"||x.type==="-"),z=x.type==="log",R=!1,F=S.vpadLinearized||!1,O,q,H,j,X,G,$,te,ee;function ie(ce){if(Array.isArray(ce))return R=!0,function(Te){return Math.max(Number(ce[Te]||0),0)};var xe=Math.max(Number(ce||0),0);return function(){return xe}}t(ie,"makePadAccessor");var se=ie((x._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),W=ie((x._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),ne=ie(S.vpadplus||S.vpad),he=ie(S.vpadminus||S.vpad);if(!R){if(te=1/0,ee=-1/0,z)for(O=0;O<P;O++)q=A[O],q<te&&q>0&&(te=q),q>ee&&q<i&&(ee=q);else for(O=0;O<P;O++)q=A[O],q<te&&q>-i&&(te=q),q>ee&&q<i&&(ee=q);A=[te,ee],P=2}var re={tozero:B,extrapad:D};function ae(ce){H=A[ce],r(H)&&(G=se(ce),$=W(ce),F?(j=x.c2l(H)-he(ce),X=x.c2l(H)+ne(ce)):(te=H-he(ce),ee=H+ne(ce),z&&te<ee/10&&(te=ee/10),j=x.c2l(te),X=x.c2l(ee)),B&&(j=Math.min(0,j),X=Math.max(0,X)),_(j)&&m(k,j,$,re),_(X)&&y(L,X,G,re))}t(ae,"addItem");var fe=Math.min(6,P);for(O=0;O<fe;O++)ae(O);for(O=P-1;O>=fe;O--)ae(O);return{min:k,max:L,opts:S}}t(b,"findExtremes");function m(x,A,S,k){T(x,A,S,k,M)}t(m,"collapseMinArray");function y(x,A,S,k){T(x,A,S,k,w)}t(y,"collapseMaxArray");function T(x,A,S,k,L){for(var P=k.tozero,D=k.extrapad,B=!0,z=0;z<x.length&&B;z++){var R=x[z];if(L(R.val,A)&&R.pad>=S&&(R.extrapad||!D)){B=!1;break}else L(A,R.val)&&R.pad<=S&&(D||!R.extrapad)&&(x.splice(z,1),z--)}if(B){var F=P&&A===0;x.push({val:A,pad:F?0:S,extrapad:F?!1:D})}}t(T,"collapseArray");function _(x){return r(x)&&Math.abs(x)<i}t(_,"goodNumber");function M(x,A){return x<=A}t(M,"lessOrEqual");function w(x,A){return x>=A}return t(w,"greaterOrEqual"),DT}t(Lh,"requireAutorange");var kq;function nn(){if(kq)return dT.exports;kq=1;var e=Va.exports,r=xn,n=so.exports,i=Na,s=Nt.exports,o=s.strTranslate,a=Ji,l=Ey,u=$a.exports,f=bn.exports,h=Jl,v=hw,c=jn,d=c.ONEMAXYEAR,g=c.ONEAVGYEAR,p=c.ONEMINYEAR,b=c.ONEMAXQUARTER,m=c.ONEAVGQUARTER,y=c.ONEMINQUARTER,T=c.ONEMAXMONTH,_=c.ONEAVGMONTH,M=c.ONEMINMONTH,w=c.ONEWEEK,x=c.ONEDAY,A=x/2,S=c.ONEHOUR,k=c.ONEMIN,L=c.ONESEC,P=c.MINUS_SIGN,D=c.BADNUM,B={K:"zeroline"},z={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},F={K:"tick",L:"path"},O={K:"tick",L:"text"},q={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},H=yl,j=H.MID_SHIFT,X=H.CAP_SHIFT,G=H.LINE_SPACING,$=H.OPPOSITE_SIDE,te=3,ee=dT.exports={};ee.setConvert=hd();var ie=Q1(),se=$o,W=se.idSort,ne=se.isLinked;ee.id2name=se.id2name,ee.name2id=se.name2id,ee.cleanId=se.cleanId,ee.list=se.list,ee.listIds=se.listIds,ee.getFromId=se.getFromId,ee.getFromTrace=se.getFromTrace;var he=Lh();ee.getAutoRange=he.getAutoRange,ee.findExtremes=he.findExtremes;var re=1e-4;function ae(Ae){var Se=(Ae[1]-Ae[0])*re;return[Ae[0]-Se,Ae[1]+Se]}t(ae,"expandRange"),ee.coerceRef=function(Ae,Se,je,Xe,ut,xt){var dt=Xe.charAt(Xe.length-1),Ot=je._fullLayout._subplots[dt+"axis"],Ht=Xe+"ref",Qt={};return ut||(ut=Ot[0]||(typeof xt=="string"?xt:xt[0])),xt||(xt=ut),Ot=Ot.concat(Ot.map(function(mr){return mr+" domain"})),Qt[Ht]={valType:"enumerated",values:Ot.concat(xt?typeof xt=="string"?[xt]:xt:[]),dflt:ut},s.coerce(Ae,Se,Qt,Ht)},ee.getRefType=function(Ae){return Ae===void 0?Ae:Ae==="paper"?"paper":Ae==="pixel"?"pixel":/( domain)$/.test(Ae)?"domain":"range"},ee.coercePosition=function(Ae,Se,je,Xe,ut,xt){var dt,Ot,Ht=ee.getRefType(Xe);if(Ht!=="range")dt=s.ensureNumber,Ot=je(ut,xt);else{var Qt=ee.getFromId(Se,Xe);xt=Qt.fraction2r(xt),Ot=je(ut,xt),dt=Qt.cleanPos}Ae[ut]=dt(Ot)},ee.cleanPosition=function(Ae,Se,je){var Xe=je==="paper"||je==="pixel"?s.ensureNumber:ee.getFromId(Se,je).cleanPos;return Xe(Ae)},ee.redrawComponents=function(Ae,Se){Se=Se||ee.listIds(Ae);var je=Ae._fullLayout;function Xe(ut,xt,dt,Ot){for(var Ht=i.getComponentMethod(ut,xt),Qt={},mr=0;mr<Se.length;mr++)for(var xr=je[ee.id2name(Se[mr])],Lr=xr[dt],Zr=0;Zr<Lr.length;Zr++){var Sr=Lr[Zr];if(!Qt[Sr]&&(Ht(Ae,Sr),Qt[Sr]=1,Ot))return}}t(Xe,"_redrawOneComp"),Xe("annotations","drawOne","_annIndices"),Xe("shapes","drawOne","_shapeIndices"),Xe("images","draw","_imgIndices",!0),Xe("selections","drawOne","_selectionIndices")};var fe=ee.getDataConversions=function(Ae,Se,je,Xe){var ut,xt=je==="x"||je==="y"||je==="z"?je:Xe;if(Array.isArray(xt)){if(ut={type:ie(Xe,void 0,{autotypenumbers:Ae._fullLayout.autotypenumbers}),_categories:[]},ee.setConvert(ut),ut.type==="category")for(var dt=0;dt<Xe.length;dt++)ut.d2c(Xe[dt])}else ut=ee.getFromTrace(Ae,Se,xt);return ut?{d2c:ut.d2c,c2d:ut.c2d}:xt==="ids"?{d2c:xe,c2d:xe}:{d2c:ce,c2d:ce}};function ce(Ae){return+Ae}t(ce,"toNum");function xe(Ae){return String(Ae)}t(xe,"toString"),ee.getDataToCoordFunc=function(Ae,Se,je,Xe){return fe(Ae,Se,je,Xe).d2c},ee.counterLetter=function(Ae){var Se=Ae.charAt(0);if(Se==="x")return"y";if(Se==="y")return"x"},ee.minDtick=function(Ae,Se,je,Xe){["log","category","multicategory"].indexOf(Ae.type)!==-1||!Xe?Ae._minDtick=0:Ae._minDtick===void 0?(Ae._minDtick=Se,Ae._forceTick0=je):Ae._minDtick&&((Ae._minDtick/Se+1e-6)%1<2e-6&&((je-Ae._forceTick0)/Se%1+1.000001)%1<2e-6?(Ae._minDtick=Se,Ae._forceTick0=je):((Se/Ae._minDtick+1e-6)%1>2e-6||((je-Ae._forceTick0)/Ae._minDtick%1+1.000001)%1>2e-6)&&(Ae._minDtick=0))},ee.saveRangeInitial=function(Ae,Se){for(var je=ee.list(Ae,"",!0),Xe=!1,ut=0;ut<je.length;ut++){var xt=je[ut],dt=xt._rangeInitial===void 0,Ot=dt||!(xt.range[0]===xt._rangeInitial[0]&&xt.range[1]===xt._rangeInitial[1]);(dt&&xt.autorange===!1||Se&&Ot)&&(xt._rangeInitial=xt.range.slice(),Xe=!0)}return Xe},ee.saveShowSpikeInitial=function(Ae,Se){for(var je=ee.list(Ae,"",!0),Xe=!1,ut="on",xt=0;xt<je.length;xt++){var dt=je[xt],Ot=dt._showSpikeInitial===void 0,Ht=Ot||dt.showspikes!==dt._showspikes;(Ot||Se&&Ht)&&(dt._showSpikeInitial=dt.showspikes,Xe=!0),ut==="on"&&!dt.showspikes&&(ut="off")}return Ae._fullLayout._cartesianSpikesEnabled=ut,Xe},ee.autoBin=function(Ae,Se,je,Xe,ut,xt){var dt=s.aggNums(Math.min,null,Ae),Ot=s.aggNums(Math.max,null,Ae);if(Se.type==="category"||Se.type==="multicategory")return{start:dt-.5,end:Ot+.5,size:Math.max(1,Math.round(xt)||1),_dataSpan:Ot-dt};ut||(ut=Se.calendar);var Ht;if(Se.type==="log"?Ht={type:"linear",range:[dt,Ot]}:Ht={type:Se.type,range:s.simpleMap([dt,Ot],Se.c2r,0,ut),calendar:ut},ee.setConvert(Ht),xt=xt&&v.dtick(xt,Ht.type),xt)Ht.dtick=xt,Ht.tick0=v.tick0(void 0,Ht.type,ut);else{var Qt;if(je)Qt=(Ot-dt)/je;else{var mr=s.distinctVals(Ae),xr=Math.pow(10,Math.floor(Math.log(mr.minDiff)/Math.LN10)),Lr=xr*s.roundUp(mr.minDiff/xr,[.9,1.9,4.9,9.9],!0);Qt=Math.max(Lr,2*s.stdev(Ae)/Math.pow(Ae.length,Xe?.25:.4)),r(Qt)||(Qt=1)}ee.autoTicks(Ht,Qt)}var Zr=Ht.dtick,Sr=ee.tickIncrement(ee.tickFirst(Ht),Zr,"reverse",ut),xa,aa;if(typeof Zr=="number")Sr=Te(Sr,Ae,Ht,dt,Ot),aa=1+Math.floor((Ot-Sr)/Zr),xa=Sr+aa*Zr;else for(Ht.dtick.charAt(0)==="M"&&(Sr=me(Sr,Ae,Zr,dt,ut)),xa=Sr,aa=0;xa<=Ot;)xa=ee.tickIncrement(xa,Zr,!1,ut),aa++;return{start:Se.c2r(Sr,0,ut),end:Se.c2r(xa,0,ut),size:Zr,_dataSpan:Ot-dt}};function Te(Ae,Se,je,Xe,ut){var xt=0,dt=0,Ot=0,Ht=0;function Qt(Zr){return(1+(Zr-Ae)*100/je.dtick)%100<2}t(Qt,"nearEdge");for(var mr=0;mr<Se.length;mr++)Se[mr]%1===0?Ot++:r(Se[mr])||Ht++,Qt(Se[mr])&&xt++,Qt(Se[mr]+je.dtick/2)&&dt++;var xr=Se.length-Ht;if(Ot===xr&&je.type!=="date")je.dtick<1?Ae=Xe-.5*je.dtick:(Ae-=.5,Ae+je.dtick<Xe&&(Ae+=je.dtick));else if(dt<xr*.1&&(xt>xr*.3||Qt(Xe)||Qt(ut))){var Lr=je.dtick/2;Ae+=Ae+Lr<Xe?Lr:-Lr}return Ae}t(Te,"autoShiftNumericBins");function me(Ae,Se,je,Xe,ut){var xt=s.findExactDates(Se,ut),dt=.8;if(xt.exactDays>dt){var Ot=Number(je.substr(1));xt.exactYears>dt&&Ot%12===0?Ae=ee.tickIncrement(Ae,"M6","reverse")+x*1.5:xt.exactMonths>dt?Ae=ee.tickIncrement(Ae,"M1","reverse")+x*15.5:Ae-=A;var Ht=ee.tickIncrement(Ae,je);if(Ht<=Xe)return Ht}return Ae}t(me,"autoShiftMonthBins"),ee.prepMinorTicks=function(Ae,Se,je){if(!Se.minor.dtick){delete Ae.dtick;var Xe=Se.dtick&&r(Se._tmin),ut;if(Xe){var xt=ee.tickIncrement(Se._tmin,Se.dtick,!0);ut=[Se._tmin,xt*.99+Se._tmin*.01]}else{var dt=s.simpleMap(Se.range,Se.r2l);ut=[dt[0],.8*dt[0]+.2*dt[1]]}if(Ae.range=s.simpleMap(ut,Se.l2r),Ae._isMinor=!0,ee.prepTicks(Ae,je),Xe){var Ot=r(Se.dtick),Ht=r(Ae.dtick),Qt=Ot?Se.dtick:+Se.dtick.substring(1),mr=Ht?Ae.dtick:+Ae.dtick.substring(1);Ot&&Ht?pe(Qt,mr)?Qt===2*w&&mr===2*x&&(Ae.dtick=w):Qt===2*w&&mr===3*x?Ae.dtick=w:Qt===w&&!(Se._input.minor||{}).nticks?Ae.dtick=x:oe(Qt/mr,2.5)?Ae.dtick=Qt/2:Ae.dtick=Qt:String(Se.dtick).charAt(0)==="M"?Ht?Ae.dtick="M1":pe(Qt,mr)?Qt>=12&&mr===2&&(Ae.dtick="M3"):Ae.dtick=Se.dtick:String(Ae.dtick).charAt(0)==="L"?String(Se.dtick).charAt(0)==="L"?pe(Qt,mr)||(Ae.dtick=oe(Qt/mr,2.5)?Se.dtick/2:Se.dtick):Ae.dtick="D1":Ae.dtick==="D2"&&+Se.dtick>1&&(Ae.dtick=1)}Ae.range=Se.range}Se.minor._tick0Init===void 0&&(Ae.tick0=Se.tick0)};function pe(Ae,Se){return Math.abs((Ae/Se+.5)%1-.5)<.001}t(pe,"isMultiple");function oe(Ae,Se){return Math.abs(Ae/Se-1)<.001}t(oe,"isClose"),ee.prepTicks=function(Ae,Se){var je=s.simpleMap(Ae.range,Ae.r2l,void 0,void 0,Se);if(Ae.tickmode==="auto"||!Ae.dtick){var Xe=Ae.nticks,ut;Xe||(Ae.type==="category"||Ae.type==="multicategory"?(ut=Ae.tickfont?s.bigFont(Ae.tickfont.size||12):15,Xe=Ae._length/ut):(ut=Ae._id.charAt(0)==="y"?40:80,Xe=s.constrain(Ae._length/ut,4,9)+1),Ae._name==="radialaxis"&&(Xe*=2)),Ae.minor&&Ae.minor.tickmode!=="array"||Ae.tickmode==="array"&&(Xe*=100),Ae._roughDTick=Math.abs(je[1]-je[0])/Xe,ee.autoTicks(Ae,Ae._roughDTick),Ae._minDtick>0&&Ae.dtick<Ae._minDtick*2&&(Ae.dtick=Ae._minDtick,Ae.tick0=Ae.l2r(Ae._forceTick0))}Ae.ticklabelmode==="period"&&ye(Ae),Ae.tick0||(Ae.tick0=Ae.type==="date"?"2000-01-01":0),Ae.type==="date"&&Ae.dtick<.1&&(Ae.dtick=.1),$e(Ae)};function de(Ae){return+Ae.substring(1)}t(de,"nMonths");function ye(Ae){var Se;function je(){return!(r(Ae.dtick)||Ae.dtick.charAt(0)!=="M")}t(je,"mDate");var Xe=je(),ut=ee.getTickFormat(Ae);if(ut){var xt=Ae._dtickInit!==Ae.dtick;/%[fLQsSMX]/.test(ut)||(/%[HI]/.test(ut)?(Se=S,xt&&!Xe&&Ae.dtick<S&&(Ae.dtick=S)):/%p/.test(ut)?(Se=A,xt&&!Xe&&Ae.dtick<A&&(Ae.dtick=A)):/%[Aadejuwx]/.test(ut)?(Se=x,xt&&!Xe&&Ae.dtick<x&&(Ae.dtick=x)):/%[UVW]/.test(ut)?(Se=w,xt&&!Xe&&Ae.dtick<w&&(Ae.dtick=w)):/%[Bbm]/.test(ut)?(Se=_,xt&&(Xe?de(Ae.dtick)<1:Ae.dtick<M)&&(Ae.dtick="M1")):/%[q]/.test(ut)?(Se=m,xt&&(Xe?de(Ae.dtick)<3:Ae.dtick<y)&&(Ae.dtick="M3")):/%[Yy]/.test(ut)&&(Se=g,xt&&(Xe?de(Ae.dtick)<12:Ae.dtick<p)&&(Ae.dtick="M12")))}Xe=je(),Xe&&Ae.tick0===Ae._dowTick0&&(Ae.tick0=Ae._rawTick0),Ae._definedDelta=Se}t(ye,"adjustPeriodDelta");function we(Ae,Se,je){for(var Xe=0;Xe<Ae.length;Xe++){var ut=Ae[Xe].value,xt=Xe,dt=Xe+1;Xe<Ae.length-1?(xt=Xe,dt=Xe+1):Xe>0?(xt=Xe-1,dt=Xe):(xt=Xe,dt=Xe);var Ot=Ae[xt].value,Ht=Ae[dt].value,Qt=Math.abs(Ht-Ot),mr=je||Qt,xr=0;mr>=p?Qt>=p&&Qt<=d?xr=Qt:xr=g:je===m&&mr>=y?Qt>=y&&Qt<=b?xr=Qt:xr=m:mr>=M?Qt>=M&&Qt<=T?xr=Qt:xr=_:je===w&&mr>=w?xr=w:mr>=x?xr=x:je===A&&mr>=A?xr=A:je===S&&mr>=S&&(xr=S);var Lr;xr>=Qt&&(xr=Qt,Lr=!0);var Zr=ut+xr;if(Se.rangebreaks&&xr>0){for(var Sr=84,xa=0,aa=0;aa<Sr;aa++){var Sa=(aa+.5)/Sr;Se.maskBreaks(ut*(1-Sa)+Sa*Zr)!==D&&xa++}xr*=xa/Sr,xr||(Ae[Xe].drop=!0),Lr&&Qt>w&&(xr=Qt)}(xr>0||Xe===0)&&(Ae[Xe].periodX=ut+xr/2)}}t(we,"positionPeriodTicks"),ee.calcTicks=t(function(Se,je){for(var Xe=Se.type,ut=Se.calendar,xt=Se.ticklabelstep,dt=Se.ticklabelmode==="period",Ot=s.simpleMap(Se.range,Se.r2l,void 0,void 0,je),Ht=Ot[1]<Ot[0],Qt=Math.min(Ot[0],Ot[1]),mr=Math.max(Ot[0],Ot[1]),xr=Math.max(1e3,Se._length||0),Lr=[],Zr=[],Sr=[],xa=[],aa=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),Sa=1;Sa>=(aa?0:1);Sa--){var vn=!Sa;Sa?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var hn=Sa?Se:s.extendFlat({},Se,Se.minor);if(vn?ee.prepMinorTicks(hn,Se,je):ee.prepTicks(hn,je),hn.tickmode==="array"){Sa?(Sr=[],Lr=Ee(Se)):(xa=[],Zr=Ee(Se));continue}var ba=ae(Ot),Tn=ba[0],Pa=ba[1],kn=r(hn.dtick),In=Xe==="log"&&!(kn||hn.dtick.charAt(0)==="L"),ln=ee.tickFirst(hn,je);if(Sa){if(Se._tmin=ln,ln<Tn!==Ht)break;(Xe==="category"||Xe==="multicategory")&&(Pa=Ht?Math.max(-.5,Pa):Math.min(Se._categories.length-.5,Pa))}var Pn=null,Fa=ln,Ka;if(Sa){var Ja;kn?Ja=Se.dtick:Xe==="date"?typeof Se.dtick=="string"&&Se.dtick.charAt(0)==="M"&&(Ja=_*Se.dtick.substring(1)):Ja=Se._roughDTick,Ka=Math.round((Se.r2l(Fa)-Se.r2l(Se.tick0))/Ja)-1}var Xn=hn.dtick;for(hn.rangebreaks&&hn._tick0Init!==hn.tick0&&(Fa=He(Fa,Se),Ht||(Fa=ee.tickIncrement(Fa,Xn,!Ht,ut))),Sa&&dt&&(Fa=ee.tickIncrement(Fa,Xn,!Ht,ut),Ka--);Ht?Fa>=Pa:Fa<=Pa;Fa=ee.tickIncrement(Fa,Xn,Ht,ut)){if(Sa&&Ka++,hn.rangebreaks&&!Ht){if(Fa<Tn)continue;if(hn.maskBreaks(Fa)===D&&He(Fa,hn)>=mr)break}if(Sr.length>xr||Fa===Pn)break;Pn=Fa;var Ln={value:Fa};Sa?(In&&Fa!==(Fa|0)&&(Ln.simpleLabel=!0),xt>1&&Ka%xt&&(Ln.skipLabel=!0),Sr.push(Ln)):(Ln.minor=!0,xa.push(Ln))}}if(aa){var ni=Se.minor.ticks==="inside"&&Se.ticks==="outside"||Se.minor.ticks==="outside"&&Se.ticks==="inside";if(!ni){for(var $i=Sr.map(function(qi){return qi.value}),Vi=[],Ai=0;Ai<xa.length;Ai++){var _s=xa[Ai],eo=_s.value;if($i.indexOf(eo)===-1){for(var lo=!1,Eo=0;!lo&&Eo<Sr.length;Eo++)1e7+Sr[Eo].value===1e7+eo&&(lo=!0);lo||Vi.push(_s)}}xa=Vi}}dt&&we(Sr,Se,Se._definedDelta);var Li;if(Se.rangebreaks){var bl=Se._id.charAt(0)==="y",Us=1;Se.tickmode==="auto"&&(Us=Se.tickfont?Se.tickfont.size:12);var pi=NaN;for(Li=Sr.length-1;Li>-1;Li--){if(Sr[Li].drop){Sr.splice(Li,1);continue}Sr[Li].value=He(Sr[Li].value,Se);var po=Se.c2p(Sr[Li].value);(bl?pi>po-Us:pi<po+Us)?Sr.splice(Ht?Li+1:Li,1):pi=po}}nt(Se)&&Math.abs(Ot[1]-Ot[0])===360&&Sr.pop(),Se._tmax=(Sr[Sr.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var wo,Ds=t(function(qi){qi.text="",Se._prevDateHead=wo},"hideLabel");Sr=Sr.concat(xa);var To,uo;for(Li=0;Li<Sr.length;Li++){var Pf=Sr[Li].minor,Nl=Sr[Li].value;Pf?Zr.push({x:Nl,minor:!0}):(wo=Se._prevDateHead,To=ee.tickText(Se,Nl,!1,Sr[Li].simpleLabel),uo=Sr[Li].periodX,uo!==void 0&&(To.periodX=uo,(uo>mr||uo<Qt)&&(uo>mr&&(To.periodX=mr),uo<Qt&&(To.periodX=Qt),Ds(To))),Sr[Li].skipLabel&&Ds(To),Lr.push(To))}return Lr=Lr.concat(Zr),Se._inCalcTicks=!1,dt&&Lr.length&&(Lr[0].noTick=!0),Lr},"calcTicks");function Ee(Ae){var Se=s.simpleMap(Ae.range,Ae.r2l),je=ae(Se),Xe=Math.min(je[0],je[1]),ut=Math.max(je[0],je[1]),xt=Ae.type==="category"?Ae.d2l_noadd:Ae.d2l;Ae.type==="log"&&String(Ae.dtick).charAt(0)!=="L"&&(Ae.dtick="L"+Math.pow(10,Math.floor(Math.min(Ae.range[0],Ae.range[1]))-1));for(var dt=[],Ot=0;Ot<=1;Ot++)if(!(Ot&&!Ae.minor)){var Ht=Ot?Ae.minor.tickvals:Ae.tickvals,Qt=Ot?[]:Ae.ticktext;if(!!Ht){Array.isArray(Qt)||(Qt=[]);for(var mr=0;mr<Ht.length;mr++){var xr=xt(Ht[mr]);if(xr>Xe&&xr<ut){var Lr=Qt[mr]===void 0?ee.tickText(Ae,xr):Ct(Ae,xr,String(Qt[mr]));Ot&&(Lr.minor=!0,Lr.text=""),dt.push(Lr)}}}}return Ae.rangebreaks&&(dt=dt.filter(function(Zr){return Ae.maskBreaks(Zr.x)!==D})),dt}t(Ee,"arrayTicks");var De=[2,5,10],Fe=[1,2,3,6,12],qe=[1,2,5,10,15,30],Je=[1,2,3,7,14],Ge=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],et=[-.301,0,.301,.699,1],Ue=[15,30,45,90,180];function Ye(Ae,Se,je){return Se*s.roundUp(Ae/Se,je)}t(Ye,"roundDTick"),ee.autoTicks=function(Ae,Se,je){var Xe;function ut(xr){return Math.pow(xr,Math.floor(Math.log(Se)/Math.LN10))}if(t(ut,"getBase"),Ae.type==="date"){Ae.tick0=s.dateTick0(Ae.calendar,0);var xt=2*Se;if(xt>g)Se/=g,Xe=ut(10),Ae.dtick="M"+12*Ye(Se,Xe,De);else if(xt>_)Se/=_,Ae.dtick="M"+Ye(Se,1,Fe);else if(xt>x){if(Ae.dtick=Ye(Se,x,Ae._hasDayOfWeekBreaks?[1,2,7,14]:Je),!je){var dt=ee.getTickFormat(Ae),Ot=Ae.ticklabelmode==="period";Ot&&(Ae._rawTick0=Ae.tick0),/%[uVW]/.test(dt)?Ae.tick0=s.dateTick0(Ae.calendar,2):Ae.tick0=s.dateTick0(Ae.calendar,1),Ot&&(Ae._dowTick0=Ae.tick0)}}else xt>S?Ae.dtick=Ye(Se,S,Fe):xt>k?Ae.dtick=Ye(Se,k,qe):xt>L?Ae.dtick=Ye(Se,L,qe):(Xe=ut(10),Ae.dtick=Ye(Se,Xe,De))}else if(Ae.type==="log"){Ae.tick0=0;var Ht=s.simpleMap(Ae.range,Ae.r2l);if(Ae._isMinor&&(Se*=1.5),Se>.7)Ae.dtick=Math.ceil(Se);else if(Math.abs(Ht[1]-Ht[0])<1){var Qt=1.5*Math.abs((Ht[1]-Ht[0])/Se);Se=Math.abs(Math.pow(10,Ht[1])-Math.pow(10,Ht[0]))/Qt,Xe=ut(10),Ae.dtick="L"+Ye(Se,Xe,De)}else Ae.dtick=Se>.3?"D2":"D1"}else Ae.type==="category"||Ae.type==="multicategory"?(Ae.tick0=0,Ae.dtick=Math.ceil(Math.max(Se,1))):nt(Ae)?(Ae.tick0=0,Xe=1,Ae.dtick=Ye(Se,Xe,Ue)):(Ae.tick0=0,Xe=ut(10),Ae.dtick=Ye(Se,Xe,De));if(Ae.dtick===0&&(Ae.dtick=1),!r(Ae.dtick)&&typeof Ae.dtick!="string"){var mr=Ae.dtick;throw Ae.dtick=1,"ax.dtick error: "+String(mr)}};function $e(Ae){var Se=Ae.dtick;if(Ae._tickexponent=0,!r(Se)&&typeof Se!="string"&&(Se=1),(Ae.type==="category"||Ae.type==="multicategory")&&(Ae._tickround=null),Ae.type==="date"){var je=Ae.r2l(Ae.tick0),Xe=Ae.l2r(je).replace(/(^-|i)/g,""),ut=Xe.length;if(String(Se).charAt(0)==="M")ut>10||Xe.substr(5)!=="01-01"?Ae._tickround="d":Ae._tickround=+Se.substr(1)%12===0?"y":"m";else if(Se>=x&&ut<=10||Se>=x*15)Ae._tickround="d";else if(Se>=k&&ut<=16||Se>=S)Ae._tickround="M";else if(Se>=L&&ut<=19||Se>=k)Ae._tickround="S";else{var xt=Ae.l2r(je+Se).replace(/^-/,"").length;Ae._tickround=Math.max(ut,xt)-20,Ae._tickround<0&&(Ae._tickround=4)}}else if(r(Se)||Se.charAt(0)==="L"){var dt=Ae.range.map(Ae.r2d||Number);r(Se)||(Se=Number(Se.substr(1))),Ae._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var Ot=Math.max(Math.abs(dt[0]),Math.abs(dt[1])),Ht=Math.floor(Math.log(Ot)/Math.LN10+.01),Qt=Ae.minexponent===void 0?3:Ae.minexponent;Math.abs(Ht)>Qt&&(Pt(Ae.exponentformat)&&!Et(Ht)?Ae._tickexponent=3*Math.round((Ht-1)/3):Ae._tickexponent=Ht)}else Ae._tickround=null}t($e,"autoTickRound"),ee.tickIncrement=function(Ae,Se,je,Xe){var ut=je?-1:1;if(r(Se))return s.increment(Ae,ut*Se);var xt=Se.charAt(0),dt=ut*Number(Se.substr(1));if(xt==="M")return s.incrementMonth(Ae,dt,Xe);if(xt==="L")return Math.log(Math.pow(10,Ae)+dt)/Math.LN10;if(xt==="D"){var Ot=Se==="D2"?et:Ge,Ht=Ae+ut*.01,Qt=s.roundUp(s.mod(Ht,1),Ot,je);return Math.floor(Ht)+Math.log(e.round(Math.pow(10,Qt),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},ee.tickFirst=function(Ae,Se){var je=Ae.r2l||Number,Xe=s.simpleMap(Ae.range,je,void 0,void 0,Se),ut=Xe[1]<Xe[0],xt=ut?Math.floor:Math.ceil,dt=ae(Xe)[0],Ot=Ae.dtick,Ht=je(Ae.tick0);if(r(Ot)){var Qt=xt((dt-Ht)/Ot)*Ot+Ht;return(Ae.type==="category"||Ae.type==="multicategory")&&(Qt=s.constrain(Qt,0,Ae._categories.length-1)),Qt}var mr=Ot.charAt(0),xr=Number(Ot.substr(1));if(mr==="M"){for(var Lr=0,Zr=Ht,Sr,xa,aa;Lr<10;){if(Sr=ee.tickIncrement(Zr,Ot,ut,Ae.calendar),(Sr-dt)*(Zr-dt)<=0)return ut?Math.min(Zr,Sr):Math.max(Zr,Sr);xa=(dt-(Zr+Sr)/2)/(Sr-Zr),aa=mr+(Math.abs(Math.round(xa))||1)*xr,Zr=ee.tickIncrement(Zr,aa,xa<0?!ut:ut,Ae.calendar),Lr++}return s.error("tickFirst did not converge",Ae),Zr}else{if(mr==="L")return Math.log(xt((Math.pow(10,dt)-Ht)/xr)*xr+Ht)/Math.LN10;if(mr==="D"){var Sa=Ot==="D2"?et:Ge,vn=s.roundUp(s.mod(dt,1),Sa,ut);return Math.floor(dt)+Math.log(e.round(Math.pow(10,vn),1))/Math.LN10}else throw"unrecognized dtick "+String(Ot)}},ee.tickText=function(Ae,Se,je,Xe){var ut=Ct(Ae,Se),xt=Ae.tickmode==="array",dt=je||xt,Ot=Ae.type,Ht=Ot==="category"?Ae.d2l_noadd:Ae.d2l,Qt;if(xt&&Array.isArray(Ae.ticktext)){var mr=s.simpleMap(Ae.range,Ae.r2l),xr=(Math.abs(mr[1]-mr[0])-(Ae._lBreaks||0))/1e4;for(Qt=0;Qt<Ae.ticktext.length&&!(Math.abs(Se-Ht(Ae.tickvals[Qt]))<xr);Qt++);if(Qt<Ae.ticktext.length)return ut.text=String(Ae.ticktext[Qt]),ut}function Lr(xa){if(xa===void 0)return!0;if(je)return xa==="none";var aa={first:Ae._tmin,last:Ae._tmax}[xa];return xa!=="all"&&Se!==aa}t(Lr,"isHidden");var Zr=je?"never":Ae.exponentformat!=="none"&&Lr(Ae.showexponent)?"hide":"";if(Ot==="date"?It(Ae,ut,je,dt):Ot==="log"?Vt(Ae,ut,je,dt,Zr):Ot==="category"?$t(Ae,ut):Ot==="multicategory"?Gt(Ae,ut,je):nt(Ae)?kt(Ae,ut,je,dt,Zr):Jt(Ae,ut,je,dt,Zr),Xe||(Ae.tickprefix&&!Lr(Ae.showtickprefix)&&(ut.text=Ae.tickprefix+ut.text),Ae.ticksuffix&&!Lr(Ae.showticksuffix)&&(ut.text+=Ae.ticksuffix)),Ae.tickson==="boundaries"||Ae.showdividers){var Sr=t(function(xa){var aa=Ae.l2p(xa);return aa>=0&&aa<=Ae._length?xa:null},"inbounds");ut.xbnd=[Sr(ut.x-.5),Sr(ut.x+Ae.dtick-.5)]}return ut},ee.hoverLabelText=function(Ae,Se,je){je&&(Ae=s.extendFlat({},Ae,{hoverformat:je}));var Xe=Array.isArray(Se)?Se[0]:Se,ut=Array.isArray(Se)?Se[1]:void 0;if(ut!==void 0&&ut!==Xe)return ee.hoverLabelText(Ae,Xe,je)+" - "+ee.hoverLabelText(Ae,ut,je);var xt=Ae.type==="log"&&Xe<=0,dt=ee.tickText(Ae,Ae.c2l(xt?-Xe:Xe),"hover").text;return xt?Xe===0?"0":P+dt:dt};function Ct(Ae,Se,je){var Xe=Ae.tickfont||{};return{x:Se,dx:0,dy:0,text:je||"",fontSize:Xe.size,font:Xe.family,fontColor:Xe.color}}t(Ct,"tickTextObj");function It(Ae,Se,je,Xe){var ut=Ae._tickround,xt=je&&Ae.hoverformat||ee.getTickFormat(Ae);Xe&&(r(ut)?ut=4:ut={y:"m",m:"d",d:"M",M:"S",S:4}[ut]);var dt=s.formatDate(Se.x,xt,ut,Ae._dateFormat,Ae.calendar,Ae._extraFormat),Ot,Ht=dt.indexOf(`
`);if(Ht!==-1&&(Ot=dt.substr(Ht+1),dt=dt.substr(0,Ht)),Xe&&(dt==="00:00:00"||dt==="00:00"?(dt=Ot,Ot=""):dt.length===8&&(dt=dt.replace(/:00$/,""))),Ot)if(je)ut==="d"?dt+=", "+Ot:dt=Ot+(dt?", "+dt:"");else if(!Ae._inCalcTicks||Ae._prevDateHead!==Ot)Ae._prevDateHead=Ot,dt+="<br>"+Ot;else{var Qt=Qe(Ae),mr=Ae._trueSide||Ae.side;(!Qt&&mr==="top"||Qt&&mr==="bottom")&&(dt+="<br> ")}Se.text=dt}t(It,"formatDate");function Vt(Ae,Se,je,Xe,ut){var xt=Ae.dtick,dt=Se.x,Ot=Ae.tickformat,Ht=typeof xt=="string"&&xt.charAt(0);if(ut==="never"&&(ut=""),Xe&&Ht!=="L"&&(xt="L3",Ht="L"),Ot||Ht==="L")Se.text=Wt(Math.pow(10,dt),Ae,ut,Xe);else if(r(xt)||Ht==="D"&&s.mod(dt+.01,1)<.1){var Qt=Math.round(dt),mr=Math.abs(Qt),xr=Ae.exponentformat;xr==="power"||Pt(xr)&&Et(Qt)?(Qt===0?Se.text=1:Qt===1?Se.text="10":Se.text="10<sup>"+(Qt>1?"":P)+mr+"</sup>",Se.fontSize*=1.25):(xr==="e"||xr==="E")&&mr>2?Se.text="1"+xr+(Qt>0?"+":P)+mr:(Se.text=Wt(Math.pow(10,dt),Ae,"","fakehover"),xt==="D1"&&Ae._id.charAt(0)==="y"&&(Se.dy-=Se.fontSize/6))}else if(Ht==="D")Se.text=String(Math.round(Math.pow(10,s.mod(dt,1)))),Se.fontSize*=.75;else throw"unrecognized dtick "+String(xt);if(Ae.dtick==="D1"){var Lr=String(Se.text).charAt(0);(Lr==="0"||Lr==="1")&&(Ae._id.charAt(0)==="y"?Se.dx-=Se.fontSize/4:(Se.dy+=Se.fontSize/2,Se.dx+=(Ae.range[1]>Ae.range[0]?1:-1)*Se.fontSize*(dt<0?.5:.25)))}}t(Vt,"formatLog");function $t(Ae,Se){var je=Ae._categories[Math.round(Se.x)];je===void 0&&(je=""),Se.text=String(je)}t($t,"formatCategory");function Gt(Ae,Se,je){var Xe=Math.round(Se.x),ut=Ae._categories[Xe]||[],xt=ut[1]===void 0?"":String(ut[1]),dt=ut[0]===void 0?"":String(ut[0]);je?Se.text=dt+" - "+xt:(Se.text=xt,Se.text2=dt)}t(Gt,"formatMultiCategory");function Jt(Ae,Se,je,Xe,ut){ut==="never"?ut="":Ae.showexponent==="all"&&Math.abs(Se.x/Ae.dtick)<1e-6&&(ut="hide"),Se.text=Wt(Se.x,Ae,ut,Xe)}t(Jt,"formatLinear");function kt(Ae,Se,je,Xe,ut){if(Ae.thetaunit==="radians"&&!je){var xt=Se.x/180;if(xt===0)Se.text="0";else{var dt=ft(xt);if(dt[1]>=100)Se.text=Wt(s.deg2rad(Se.x),Ae,ut,Xe);else{var Ot=Se.x<0;dt[1]===1?dt[0]===1?Se.text="\u03C0":Se.text=dt[0]+"\u03C0":Se.text=["<sup>",dt[0],"</sup>","\u2044","<sub>",dt[1],"</sub>","\u03C0"].join(""),Ot&&(Se.text=P+Se.text)}}}else Se.text=Wt(Se.x,Ae,ut,Xe)}t(kt,"formatAngle");function ft(Ae){function Se(Ot,Ht){return Math.abs(Ot-Ht)<=1e-6}t(Se,"almostEq");function je(Ot,Ht){return Se(Ht,0)?Ot:je(Ht,Ot%Ht)}t(je,"findGCD");function Xe(Ot){for(var Ht=1;!Se(Math.round(Ot*Ht)/Ht,Ot);)Ht*=10;return Ht}t(Xe,"findPrecision");var ut=Xe(Ae),xt=Ae*ut,dt=Math.abs(je(xt,ut));return[Math.round(xt/dt),Math.round(ut/dt)]}t(ft,"num2frac");var zt=["f","p","n","\u03BC","m","","k","M","G","T"];function Pt(Ae){return Ae==="SI"||Ae==="B"}t(Pt,"isSIFormat");function Et(Ae){return Ae>14||Ae<-15}t(Et,"beyondSI");function Wt(Ae,Se,je,Xe){var ut=Ae<0,xt=Se._tickround,dt=je||Se.exponentformat||"B",Ot=Se._tickexponent,Ht=ee.getTickFormat(Se),Qt=Se.separatethousands;if(Xe){var mr={exponentformat:dt,minexponent:Se.minexponent,dtick:Se.showexponent==="none"?Se.dtick:r(Ae)&&Math.abs(Ae)||1,range:Se.showexponent==="none"?Se.range.map(Se.r2d):[0,Ae||1]};$e(mr),xt=(Number(mr._tickround)||0)+4,Ot=mr._tickexponent,Se.hoverformat&&(Ht=Se.hoverformat)}if(Ht)return Se._numFormat(Ht)(Ae).replace(/-/g,P);var xr=Math.pow(10,-xt)/2;if(dt==="none"&&(Ot=0),Ae=Math.abs(Ae),Ae<xr)Ae="0",ut=!1;else{if(Ae+=xr,Ot&&(Ae*=Math.pow(10,-Ot),xt+=Ot),xt===0)Ae=String(Math.floor(Ae));else if(xt<0){Ae=String(Math.round(Ae)),Ae=Ae.substr(0,Ae.length+xt);for(var Lr=xt;Lr<0;Lr++)Ae+="0"}else{Ae=String(Ae);var Zr=Ae.indexOf(".")+1;Zr&&(Ae=Ae.substr(0,Zr+xt).replace(/\.?0+$/,""))}Ae=s.numSeparate(Ae,Se._separators,Qt)}if(Ot&&dt!=="hide"){Pt(dt)&&Et(Ot)&&(dt="power");var Sr;Ot<0?Sr=P+-Ot:dt!=="power"?Sr="+"+Ot:Sr=String(Ot),dt==="e"||dt==="E"?Ae+=dt+Sr:dt==="power"?Ae+="\xD710<sup>"+Sr+"</sup>":dt==="B"&&Ot===9?Ae+="B":Pt(dt)&&(Ae+=zt[Ot/3+5])}return ut?P+Ae:Ae}t(Wt,"numFormat"),ee.getTickFormat=function(Ae){var Se;function je(Ht){return typeof Ht!="string"?Ht:Number(Ht.replace("M",""))*_}t(je,"convertToMs");function Xe(Ht,Qt){var mr=["L","D"];if(typeof Ht==typeof Qt){if(typeof Ht=="number")return Ht-Qt;var xr=mr.indexOf(Ht.charAt(0)),Lr=mr.indexOf(Qt.charAt(0));return xr===Lr?Number(Ht.replace(/(L|D)/g,""))-Number(Qt.replace(/(L|D)/g,"")):xr-Lr}else return typeof Ht=="number"?1:-1}t(Xe,"compareLogTicks");function ut(Ht,Qt,mr){var xr=mr||function(Sr){return Sr},Lr=Qt[0],Zr=Qt[1];return(!Lr&&typeof Lr!="number"||xr(Lr)<=xr(Ht))&&(!Zr&&typeof Zr!="number"||xr(Zr)>=xr(Ht))}t(ut,"isProperStop");function xt(Ht,Qt){var mr=Qt[0]===null,xr=Qt[1]===null,Lr=Xe(Ht,Qt[0])>=0,Zr=Xe(Ht,Qt[1])<=0;return(mr||Lr)&&(xr||Zr)}t(xt,"isProperLogStop");var dt,Ot;if(Ae.tickformatstops&&Ae.tickformatstops.length>0)switch(Ae.type){case"date":case"linear":{for(Se=0;Se<Ae.tickformatstops.length;Se++)if(Ot=Ae.tickformatstops[Se],Ot.enabled&&ut(Ae.dtick,Ot.dtickrange,je)){dt=Ot;break}break}case"log":{for(Se=0;Se<Ae.tickformatstops.length;Se++)if(Ot=Ae.tickformatstops[Se],Ot.enabled&&xt(Ae.dtick,Ot.dtickrange)){dt=Ot;break}break}}return dt?dt.value:Ae.tickformat},ee.getSubplots=function(Ae,Se){var je=Ae._fullLayout._subplots,Xe=je.cartesian.concat(je.gl2d||[]),ut=Se?ee.findSubplotsWithAxis(Xe,Se):Xe;return ut.sort(function(xt,dt){var Ot=xt.substr(1).split("y"),Ht=dt.substr(1).split("y");return Ot[0]===Ht[0]?+Ot[1]-+Ht[1]:+Ot[0]-+Ht[0]}),ut},ee.findSubplotsWithAxis=function(Ae,Se){for(var je=new RegExp(Se._id.charAt(0)==="x"?"^"+Se._id+"y":Se._id+"$"),Xe=[],ut=0;ut<Ae.length;ut++){var xt=Ae[ut];je.test(xt)&&Xe.push(xt)}return Xe},ee.makeClipPaths=function(Ae){var Se=Ae._fullLayout;if(!Se._hasOnlyLargeSploms){var je={_offset:0,_length:Se.width,_id:""},Xe={_offset:0,_length:Se.height,_id:""},ut=ee.list(Ae,"x",!0),xt=ee.list(Ae,"y",!0),dt=[],Ot,Ht;for(Ot=0;Ot<ut.length;Ot++)for(dt.push({x:ut[Ot],y:Xe}),Ht=0;Ht<xt.length;Ht++)Ot===0&&dt.push({x:je,y:xt[Ht]}),dt.push({x:ut[Ot],y:xt[Ht]});var Qt=Se._clips.selectAll(".axesclip").data(dt,function(mr){return mr.x._id+mr.y._id});Qt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(mr){return"clip"+Se._uid+mr.x._id+mr.y._id}).append("rect"),Qt.exit().remove(),Qt.each(function(mr){e.select(this).select("rect").attr({x:mr.x._offset||0,y:mr.y._offset||0,width:mr.x._length||1,height:mr.y._length||1})})}},ee.draw=function(Ae,Se,je){var Xe=Ae._fullLayout;Se==="redraw"&&Xe._paper.selectAll("g.subplot").each(function(xt){var dt=xt[0],Ot=Xe._plots[dt];if(Ot){var Ht=Ot.xaxis,Qt=Ot.yaxis;Ot.xaxislayer.selectAll("."+Ht._id+"tick").remove(),Ot.yaxislayer.selectAll("."+Qt._id+"tick").remove(),Ot.xaxislayer.selectAll("."+Ht._id+"tick2").remove(),Ot.yaxislayer.selectAll("."+Qt._id+"tick2").remove(),Ot.xaxislayer.selectAll("."+Ht._id+"divider").remove(),Ot.yaxislayer.selectAll("."+Qt._id+"divider").remove(),Ot.minorGridlayer&&Ot.minorGridlayer.selectAll("path").remove(),Ot.gridlayer&&Ot.gridlayer.selectAll("path").remove(),Ot.zerolinelayer&&Ot.zerolinelayer.selectAll("path").remove(),Xe._infolayer.select(".g-"+Ht._id+"title").remove(),Xe._infolayer.select(".g-"+Qt._id+"title").remove()}});var ut=!Se||Se==="redraw"?ee.listIds(Ae):Se;return s.syncOrAsync(ut.map(function(xt){return function(){if(!!xt){var dt=ee.getFromId(Ae,xt),Ot=ee.drawOne(Ae,dt,je);return dt._r=dt.range.slice(),dt._rl=s.simpleMap(dt._r,dt.r2l),Ot}}}))},ee.drawOne=function(Ae,Se,je){je=je||{};var Xe,ut,xt;Se.setScale();var dt=Ae._fullLayout,Ot=Se._id,Ht=Ot.charAt(0),Qt=ee.counterLetter(Ot),mr=dt._plots[Se._mainSubplot];if(!mr)return;var xr=mr[Ht+"axislayer"],Lr=Se._mainLinePosition,Zr=Se._mainMirrorPosition,Sr=Se._vals=ee.calcTicks(Se),xa=[Se.mirror,Lr,Zr].join("_");for(Xe=0;Xe<Sr.length;Xe++)Sr[Xe].axInfo=xa;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var aa={};function Sa(qi){var Hs=Ot+(qi||"tick");return aa[Hs]||(aa[Hs]=_t(Se,Hs)),aa[Hs]}if(t(Sa,"getLabelLevelBbox"),!!Se.visible){var vn=ee.makeTransTickFn(Se),hn=ee.makeTransTickLabelFn(Se),ba,Tn,Pa=Se.ticks==="inside",kn=Se.ticks==="outside";if(Se.tickson==="boundaries"){var In=tt(Se,Sr);Tn=ee.clipEnds(Se,In),ba=Pa?Tn:In}else Tn=ee.clipEnds(Se,Sr),ba=Pa&&Se.ticklabelmode!=="period"?Tn:Sr;var ln=Se._gridVals=Tn,Pn=vt(Se,Sr);if(!dt._hasOnlyLargeSploms){var Fa=Se._subplotsWith,Ka={};for(Xe=0;Xe<Fa.length;Xe++){ut=Fa[Xe],xt=dt._plots[ut];var Ja=xt[Qt+"axis"],Xn=Ja._mainAxis._id;if(!Ka[Xn]){Ka[Xn]=1;var Ln=Ht==="x"?"M0,"+Ja._offset+"v"+Ja._length:"M"+Ja._offset+",0h"+Ja._length;ee.drawGrid(Ae,Se,{vals:ln,counterAxis:Ja,layer:xt.gridlayer.select("."+Ot),minorLayer:xt.minorGridlayer.select("."+Ot),path:Ln,transFn:vn}),ee.drawZeroLine(Ae,Se,{counterAxis:Ja,layer:xt.zerolinelayer,path:Ln,transFn:vn})}}}var ni,$i=ee.getTickSigns(Se),Vi=ee.getTickSigns(Se,"minor");if(Se.ticks||Se.minor&&Se.minor.ticks){var Ai=ee.makeTickPath(Se,Lr,$i[2]),_s=ee.makeTickPath(Se,Lr,Vi[2],{minor:!0}),eo,lo,Eo,Li;if(Se._anchorAxis&&Se.mirror&&Se.mirror!==!0?(eo=ee.makeTickPath(Se,Zr,$i[3]),lo=ee.makeTickPath(Se,Zr,Vi[3],{minor:!0}),Eo=Ai+eo,Li=_s+lo):(eo="",lo="",Eo=Ai,Li=_s),Se.showdividers&&kn&&Se.tickson==="boundaries"){var bl={};for(Xe=0;Xe<Pn.length;Xe++)bl[Pn[Xe].x]=1;ni=t(function(qi){return bl[qi.x]?eo:Eo},"tickPath")}else ni=t(function(qi){return qi.minor?Li:Eo},"tickPath")}if(ee.drawTicks(Ae,Se,{vals:ba,layer:xr,path:ni,transFn:vn}),Se.mirror==="allticks"){var Us=Object.keys(Se._linepositions||{});for(Xe=0;Xe<Us.length;Xe++){ut=Us[Xe],xt=dt._plots[ut];var pi=Se._linepositions[ut]||[],po=pi[0],wo=pi[1],Ds=pi[2],To=ee.makeTickPath(Se,po,Ds?$i[0]:Vi[0],{minor:Ds})+ee.makeTickPath(Se,wo,Ds?$i[1]:Vi[1],{minor:Ds});ee.drawTicks(Ae,Se,{vals:ba,layer:xt[Ht+"axislayer"],path:To,transFn:vn})}}var uo=[];if(uo.push(function(){return ee.drawLabels(Ae,Se,{vals:Sr,layer:xr,plotinfo:xt,transFn:hn,labelFns:ee.makeLabelFns(Se,Lr)})}),Se.type==="multicategory"){var Pf={x:2,y:10}[Ht];uo.push(function(){var qi={x:"height",y:"width"}[Ht],Hs=Sa()[qi]+Pf+(Se._tickAngles[Ot+"tick"]?Se.tickfont.size*G:0);return ee.drawLabels(Ae,Se,{vals:at(Se,Sr),layer:xr,cls:Ot+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:vn,labelFns:ee.makeLabelFns(Se,Lr+Hs*$i[4])})}),uo.push(function(){return Se._depth=$i[4]*(Sa("tick2")[Se.side]-Lr),ur(Ae,Se,{vals:Pn,layer:xr,path:ee.makeTickPath(Se,Lr,$i[4],{len:Se._depth}),transFn:vn})})}else Se.title.hasOwnProperty("standoff")&&uo.push(function(){Se._depth=$i[4]*(Sa()[Se.side]-Lr)});var Nl=i.getComponentMethod("rangeslider","isVisible")(Se);return uo.push(function(){var qi=Se.side.charAt(0),Hs=$[Se.side].charAt(0),Wr=ee.getPxPosition(Ae,Se),Ma=kn?Se.ticklen:0,go,Gi,Ri,_l;if((Se.automargin||Nl)&&(Se.type==="multicategory"?go=Sa("tick2"):(go=Sa(),Ht==="x"&&qi==="b"&&(Se._depth=Math.max(go.width>0?go.bottom-Wr:0,Ma)))),Se.automargin){Gi={x:0,y:0,r:0,l:0,t:0,b:0};var is=[0,1];if(Ht==="x"){if(qi==="b"?Gi[qi]=Se._depth:(Gi[qi]=Se._depth=Math.max(go.width>0?Wr-go.top:0,Ma),is.reverse()),go.width>0){var $s=go.right-(Se._offset+Se._length);$s>0&&(Gi.xr=1,Gi.r=$s);var Jo=Se._offset-go.left;Jo>0&&(Gi.xl=0,Gi.l=Jo)}}else if(qi==="l"?Gi[qi]=Se._depth=Math.max(go.height>0?Wr-go.left:0,Ma):(Gi[qi]=Se._depth=Math.max(go.height>0?go.right-Wr:0,Ma),is.reverse()),go.height>0){var Ga=go.bottom-(Se._offset+Se._length);Ga>0&&(Gi.yb=0,Gi.b=Ga);var Yn=Se._offset-go.top;Yn>0&&(Gi.yt=1,Gi.t=Yn)}Gi[Qt]=Se.anchor==="free"?Se.position:Se._anchorAxis.domain[is[0]],Se.title.text!==dt._dfltTitle[Ht]&&(Gi[qi]+=qt(Se)+(Se.title.standoff||0)),Se.mirror&&Se.anchor!=="free"&&(Ri={x:0,y:0,r:0,l:0,t:0,b:0},Ri[Hs]=Se.linewidth,Se.mirror&&Se.mirror!==!0&&(Ri[Hs]+=Ma),Se.mirror===!0||Se.mirror==="ticks"?Ri[Qt]=Se._anchorAxis.domain[is[1]]:(Se.mirror==="all"||Se.mirror==="allticks")&&(Ri[Qt]=[Se._counterDomainMin,Se._counterDomainMax][is[1]]))}Nl&&(_l=i.getComponentMethod("rangeslider","autoMarginOpts")(Ae,Se)),typeof Se.automargin=="string"&&(ze(Gi,Se.automargin),ze(Ri,Se.automargin)),n.autoMargin(Ae,ea(Se),Gi),n.autoMargin(Ae,Er(Se),Ri),n.autoMargin(Ae,dn(Se),_l)}),!je.skipTitle&&!(Nl&&Se.side==="bottom")&&uo.push(function(){return hr(Ae,Se)}),s.syncOrAsync(uo)}};function ze(Ae,Se){if(!!Ae){var je=Object.keys(q).reduce(function(Xe,ut){return Se.indexOf(ut)!==-1&&q[ut].forEach(function(xt){Xe[xt]=1}),Xe},{});Object.keys(Ae).forEach(function(Xe){je[Xe]||(Xe.length===1?Ae[Xe]=0:delete Ae[Xe])})}}t(ze,"filterPush");function tt(Ae,Se){var je=[],Xe,ut=t(function(xt,dt){var Ot=xt.xbnd[dt];Ot!==null&&je.push(s.extendFlat({},xt,{x:Ot}))},"_push");if(Se.length){for(Xe=0;Xe<Se.length;Xe++)ut(Se[Xe],0);ut(Se[Xe-1],1)}return je}t(tt,"getBoundaryVals");function at(Ae,Se){for(var je=[],Xe={},ut=0;ut<Se.length;ut++){var xt=Se[ut];Xe[xt.text2]?Xe[xt.text2].push(xt.x):Xe[xt.text2]=[xt.x]}for(var dt in Xe)je.push(Ct(Ae,s.interp(Xe[dt],.5),dt));return je}t(at,"getSecondaryLabelVals");function vt(Ae,Se){var je=[],Xe,ut,xt=Se.length&&Se[Se.length-1].x<Se[0].x,dt=t(function(Ht,Qt){var mr=Ht.xbnd[Qt];mr!==null&&je.push(s.extendFlat({},Ht,{x:mr}))},"_push");if(Ae.showdividers&&Se.length){for(Xe=0;Xe<Se.length;Xe++){var Ot=Se[Xe];Ot.text2!==ut&&dt(Ot,xt?1:0),ut=Ot.text2}dt(Se[Xe-1],xt?0:1)}return je}t(vt,"getDividerVals");function _t(Ae,Se){var je,Xe,ut,xt;return Ae._selections[Se].size()?(je=1/0,Xe=-1/0,ut=1/0,xt=-1/0,Ae._selections[Se].each(function(){var dt=Ia(this),Ot=f.bBox(dt.node().parentNode);je=Math.min(je,Ot.top),Xe=Math.max(Xe,Ot.bottom),ut=Math.min(ut,Ot.left),xt=Math.max(xt,Ot.right)})):(je=0,Xe=0,ut=0,xt=0),{top:je,bottom:Xe,left:ut,right:xt,height:Xe-je,width:xt-ut}}t(_t,"calcLabelLevelBbox"),ee.getTickSigns=function(Ae,Se){var je=Ae._id.charAt(0),Xe={x:"top",y:"right"}[je],ut=Ae.side===Xe?1:-1,xt=[-1,1,ut,-ut],dt=Se?(Ae.minor||{}).ticks:Ae.ticks;return dt!=="inside"==(je==="x")&&(xt=xt.map(function(Ot){return-Ot})),Ae.side&&xt.push({l:-1,t:-1,r:1,b:1}[Ae.side.charAt(0)]),xt},ee.makeTransTickFn=function(Ae){return Ae._id.charAt(0)==="x"?function(Se){return o(Ae._offset+Ae.l2p(Se.x),0)}:function(Se){return o(0,Ae._offset+Ae.l2p(Se.x))}},ee.makeTransTickLabelFn=function(Ae){var Se=nr(Ae),je=Se[0],Xe=Se[1];return Ae._id.charAt(0)==="x"?function(ut){return o(je+Ae._offset+Ae.l2p(Rt(ut)),Xe)}:function(ut){return o(Xe,je+Ae._offset+Ae.l2p(Rt(ut)))}};function Rt(Ae){return Ae.periodX!==void 0?Ae.periodX:Ae.x}t(Rt,"getPosX");function nr(Ae){var Se=Ae.ticklabelposition||"",je=t(function(Zr){return Se.indexOf(Zr)!==-1},"has"),Xe=je("top"),ut=je("left"),xt=je("right"),dt=je("bottom"),Ot=je("inside"),Ht=dt||ut||Xe||xt;if(!Ht&&!Ot)return[0,0];var Qt=Ae.side,mr=Ht?(Ae.tickwidth||0)/2:0,xr=te,Lr=Ae.tickfont?Ae.tickfont.size:12;return(dt||Xe)&&(mr+=Lr*X,xr+=(Ae.linewidth||0)/2),(ut||xt)&&(mr+=(Ae.linewidth||0)/2,xr+=te),Ot&&Qt==="top"&&(xr-=Lr*(1-X)),(ut||Xe)&&(mr=-mr),(Qt==="bottom"||Qt==="right")&&(xr=-xr),[Ht?mr:0,Ot?xr:0]}t(nr,"getTickLabelUV"),ee.makeTickPath=function(Ae,Se,je,Xe){Xe||(Xe={});var ut=Xe.minor;if(ut&&!Ae.minor)return"";var xt=Xe.len!==void 0?Xe.len:ut?Ae.minor.ticklen:Ae.ticklen,dt=Ae._id.charAt(0),Ot=(Ae.linewidth||1)/2;return dt==="x"?"M0,"+(Se+Ot*je)+"v"+xt*je:"M"+(Se+Ot*je)+",0h"+xt*je},ee.makeLabelFns=function(Ae,Se,je){var Xe=Ae.ticklabelposition||"",ut=t(function(Ka){return Xe.indexOf(Ka)!==-1},"has"),xt=ut("top"),dt=ut("left"),Ot=ut("right"),Ht=ut("bottom"),Qt=Ht||dt||xt||Ot,mr=ut("inside"),xr=Xe==="inside"&&Ae.ticks==="inside"||!mr&&Ae.ticks==="outside"&&Ae.tickson!=="boundaries",Lr=0,Zr=0,Sr=xr?Ae.ticklen:0;if(mr?Sr*=-1:Qt&&(Sr=0),xr&&(Lr+=Sr,je)){var xa=s.deg2rad(je);Lr=Sr*Math.cos(xa)+1,Zr=Sr*Math.sin(xa)}Ae.showticklabels&&(xr||Ae.showline)&&(Lr+=.2*Ae.tickfont.size),Lr+=(Ae.linewidth||1)/2*(mr?-1:1);var aa={labelStandoff:Lr,labelShift:Zr},Sa,vn,hn,ba,Tn=0,Pa=Ae.side,kn=Ae._id.charAt(0),In=Ae.tickangle,ln;if(kn==="x")ln=!mr&&Pa==="bottom"||mr&&Pa==="top",ba=ln?1:-1,mr&&(ba*=-1),Sa=Zr*ba,vn=Se+Lr*ba,hn=ln?1:-.2,Math.abs(In)===90&&(mr?hn+=j:In===-90&&Pa==="bottom"?hn=X:In===90&&Pa==="top"?hn=j:hn=.5,Tn=j/2*(In/90)),aa.xFn=function(Ka){return Ka.dx+Sa+Tn*Ka.fontSize},aa.yFn=function(Ka){return Ka.dy+vn+Ka.fontSize*hn},aa.anchorFn=function(Ka,Ja){if(Qt){if(dt)return"end";if(Ot)return"start"}return!r(Ja)||Ja===0||Ja===180?"middle":Ja*ba<0!==mr?"end":"start"},aa.heightFn=function(Ka,Ja,Xn){return Ja<-60||Ja>60?-.5*Xn:Ae.side==="top"!==mr?-Xn:0};else if(kn==="y"){if(ln=!mr&&Pa==="left"||mr&&Pa==="right",ba=ln?1:-1,mr&&(ba*=-1),Sa=Lr,vn=Zr*ba,hn=0,!mr&&Math.abs(In)===90&&(In===-90&&Pa==="left"||In===90&&Pa==="right"?hn=X:hn=.5),mr){var Pn=r(In)?+In:0;if(Pn!==0){var Fa=s.deg2rad(Pn);Tn=Math.abs(Math.sin(Fa))*X*ba,hn=0}}aa.xFn=function(Ka){return Ka.dx+Se-(Sa+Ka.fontSize*hn)*ba+Tn*Ka.fontSize},aa.yFn=function(Ka){return Ka.dy+vn+Ka.fontSize*j},aa.anchorFn=function(Ka,Ja){return r(Ja)&&Math.abs(Ja)===90?"middle":ln?"end":"start"},aa.heightFn=function(Ka,Ja,Xn){return Ae.side==="right"&&(Ja*=-1),Ja<-30?-Xn:Ja<30?-.5*Xn:0}}return aa};function ir(Ae){return[Ae.text,Ae.x,Ae.axInfo,Ae.font,Ae.fontSize,Ae.fontColor].join("_")}t(ir,"tickDataFn"),ee.drawTicks=function(Ae,Se,je){je=je||{};var Xe=Se._id+"tick",ut=[].concat(Se.minor&&Se.minor.ticks?je.vals.filter(function(dt){return dt.minor&&!dt.noTick}):[]).concat(Se.ticks?je.vals.filter(function(dt){return!dt.minor&&!dt.noTick}):[]),xt=je.layer.selectAll("path."+Xe).data(ut,ir);xt.exit().remove(),xt.enter().append("path").classed(Xe,1).classed("ticks",1).classed("crisp",je.crisp!==!1).each(function(dt){return u.stroke(e.select(this),dt.minor?Se.minor.tickcolor:Se.tickcolor)}).style("stroke-width",function(dt){return f.crispRound(Ae,dt.minor?Se.minor.tickwidth:Se.tickwidth,1)+"px"}).attr("d",je.path).style("display",null),ot(Se,[F]),xt.attr("transform",je.transFn)},ee.drawGrid=function(Ae,Se,je){je=je||{};var Xe=Se._id+"grid",ut=Se.minor&&Se.minor.showgrid,xt=ut?je.vals.filter(function(Sa){return Sa.minor}):[],dt=Se.showgrid?je.vals.filter(function(Sa){return!Sa.minor}):[],Ot=je.counterAxis;if(Ot&&ee.shouldShowZeroLine(Ae,Se,Ot))for(var Ht=Se.tickmode==="array",Qt=0;Qt<dt.length;Qt++){var mr=dt[Qt].x;if(Ht?!mr:Math.abs(mr)<Se.dtick/100)if(dt=dt.slice(0,Qt).concat(dt.slice(Qt+1)),Ht)Qt--;else break}Se._gw=f.crispRound(Ae,Se.gridwidth,1);for(var xr=ut?f.crispRound(Ae,Se.minor.gridwidth,1):0,Lr=je.layer,Zr=je.minorLayer,Sr=1;Sr>=0;Sr--){var xa=Sr?Lr:Zr;if(!!xa){var aa=xa.selectAll("path."+Xe).data(Sr?dt:xt,ir);aa.exit().remove(),aa.enter().append("path").classed(Xe,1).classed("crisp",je.crisp!==!1),aa.attr("transform",je.transFn).attr("d",je.path).each(function(Sa){return u.stroke(e.select(this),Sa.minor?Se.minor.gridcolor:Se.gridcolor||"#ddd")}).style("stroke-dasharray",function(Sa){return f.dashStyle(Sa.minor?Se.minor.griddash:Se.griddash,Sa.minor?Se.minor.gridwidth:Se.gridwidth)}).style("stroke-width",function(Sa){return(Sa.minor?xr:Se._gw)+"px"}).style("display",null),typeof je.path=="function"&&aa.attr("d",je.path)}}ot(Se,[z,R])},ee.drawZeroLine=function(Ae,Se,je){je=je||je;var Xe=Se._id+"zl",ut=ee.shouldShowZeroLine(Ae,Se,je.counterAxis),xt=je.layer.selectAll("path."+Xe).data(ut?[{x:0,id:Se._id}]:[]);xt.exit().remove(),xt.enter().append("path").classed(Xe,1).classed("zl",1).classed("crisp",je.crisp!==!1).each(function(){je.layer.selectAll("path").sort(function(dt,Ot){return W(dt.id,Ot.id)})}),xt.attr("transform",je.transFn).attr("d",je.path).call(u.stroke,Se.zerolinecolor||u.defaultLine).style("stroke-width",f.crispRound(Ae,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),ot(Se,[B])},ee.drawLabels=function(Ae,Se,je){je=je||{};var Xe=Ae._fullLayout,ut=Se._id,xt=ut.charAt(0),dt=je.cls||ut+"tick",Ot=je.vals.filter(function(ba){return ba.text}),Ht=je.labelFns,Qt=je.secondary?0:Se.tickangle,mr=(Se._prevTickAngles||{})[dt],xr=je.layer.selectAll("g."+dt).data(Se.showticklabels?Ot:[],ir),Lr=[];xr.enter().append("g").classed(dt,1).append("text").attr("text-anchor","middle").each(function(ba){var Tn=e.select(this),Pa=Ae._promises.length;Tn.call(a.positionText,Ht.xFn(ba),Ht.yFn(ba)).call(f.font,ba.font,ba.fontSize,ba.fontColor).text(ba.text).call(a.convertToTspans,Ae),Ae._promises[Pa]?Lr.push(Ae._promises.pop().then(function(){Zr(Tn,Qt)})):Zr(Tn,Qt)}),ot(Se,[O]),xr.exit().remove(),je.repositionOnUpdate&&xr.each(function(ba){e.select(this).select("text").call(a.positionText,Ht.xFn(ba),Ht.yFn(ba))});function Zr(ba,Tn){ba.each(function(Pa){var kn=e.select(this),In=kn.select(".text-math-group"),ln=Ht.anchorFn(Pa,Tn),Pn=je.transFn.call(kn.node(),Pa)+(r(Tn)&&+Tn!=0?" rotate("+Tn+","+Ht.xFn(Pa)+","+(Ht.yFn(Pa)-Pa.fontSize/2)+")":""),Fa=a.lineCount(kn),Ka=G*Pa.fontSize,Ja=Ht.heightFn(Pa,r(Tn)?+Tn:0,(Fa-1)*Ka);if(Ja&&(Pn+=o(0,Ja)),In.empty()){var Xn=kn.select("text");Xn.attr({transform:Pn,"text-anchor":ln}),Xn.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var Ln=f.bBox(In.node()).width,ni=Ln*{end:-.5,start:.5}[ln];In.attr("transform",Pn+o(ni,0))}})}t(Zr,"positionLabels"),Se._adjustTickLabelsOverflow=function(){var ba=Se.ticklabeloverflow;if(!(!ba||ba==="allow")){var Tn=ba.indexOf("hide")!==-1,Pa=Se._id.charAt(0)==="x",kn=0,In=Pa?Ae._fullLayout.width:Ae._fullLayout.height;if(ba.indexOf("domain")!==-1){var ln=s.simpleMap(Se.range,Se.r2l);kn=Se.l2p(ln[0])+Se._offset,In=Se.l2p(ln[1])+Se._offset}var Pn=Math.min(kn,In),Fa=Math.max(kn,In),Ka=Se.side,Ja=1/0,Xn=-1/0;xr.each(function(Vi){var Ai=e.select(this),_s=Ai.select(".text-math-group");if(_s.empty()){var eo=f.bBox(Ai.node()),lo=0;Pa?(eo.right>Fa||eo.left<Pn)&&(lo=1):(eo.bottom>Fa||eo.top+(Se.tickangle?0:Vi.fontSize/4)<Pn)&&(lo=1);var Eo=Ai.select("text");lo?Tn&&Eo.style("opacity",0):(Eo.style("opacity",1),Ka==="bottom"||Ka==="right"?Ja=Math.min(Ja,Pa?eo.top:eo.left):Ja=-1/0,Ka==="top"||Ka==="left"?Xn=Math.max(Xn,Pa?eo.bottom:eo.right):Xn=1/0)}});for(var Ln in Xe._plots){var ni=Xe._plots[Ln];if(!(Se._id!==ni.xaxis._id&&Se._id!==ni.yaxis._id)){var $i=Pa?ni.yaxis:ni.xaxis;$i&&($i["_visibleLabelMin_"+Se._id]=Ja,$i["_visibleLabelMax_"+Se._id]=Xn)}}}},Se._hideCounterAxisInsideTickLabels=function(ba){var Tn=Se._id.charAt(0)==="x",Pa=[];for(var kn in Xe._plots){var In=Xe._plots[kn];Se._id!==In.xaxis._id&&Se._id!==In.yaxis._id||Pa.push(Tn?In.yaxis:In.xaxis)}Pa.forEach(function(ln,Pn){ln&&Qe(ln)&&(ba||[B,R,z,F,O]).forEach(function(Fa){var Ka=Fa.K==="tick"&&Fa.L==="text"&&Se.ticklabelmode==="period",Ja=Xe._plots[Se._mainSubplot],Xn;Fa.K===B.K?Xn=Ja.zerolinelayer.selectAll("."+Se._id+"zl"):Fa.K===R.K?Xn=Ja.minorGridlayer.selectAll("."+Se._id):Fa.K===z.K?Xn=Ja.gridlayer.selectAll("."+Se._id):Xn=Ja[Se._id.charAt(0)+"axislayer"],Xn.each(function(){var Ln=e.select(this);Fa.L&&(Ln=Ln.selectAll(Fa.L)),Ln.each(function(ni){var $i=Se.l2p(Ka?Rt(ni):ni.x)+Se._offset,Vi=e.select(this);$i<Se["_visibleLabelMax_"+ln._id]&&$i>Se["_visibleLabelMin_"+ln._id]?Vi.style("display","none"):Fa.K==="tick"&&!Pn&&Vi.style("display",null)})})})})},Zr(xr,mr+1?mr:Qt);function Sr(){return Lr.length&&Promise.all(Lr)}t(Sr,"allLabelsReady");var xa=null;function aa(){if(Zr(xr,Qt),Ot.length&&xt==="x"&&!r(Qt)&&(Se.type!=="log"||String(Se.dtick).charAt(0)!=="D")){xa=0;var ba=0,Tn=[],Pa;if(xr.each(function(eo){ba=Math.max(ba,eo.fontSize);var lo=Se.l2p(eo.x),Eo=Ia(this),Li=f.bBox(Eo.node());Tn.push({top:0,bottom:10,height:10,left:lo-Li.width/2,right:lo+Li.width/2+2,width:Li.width+2})}),(Se.tickson==="boundaries"||Se.showdividers)&&!je.secondary){var kn=2;for(Se.ticks&&(kn+=Se.tickwidth/2),Pa=0;Pa<Tn.length;Pa++){var In=Ot[Pa].xbnd,ln=Tn[Pa];if(In[0]!==null&&ln.left-Se.l2p(In[0])<kn||In[1]!==null&&Se.l2p(In[1])-ln.right<kn){xa=90;break}}}else{var Pn=Ot.length,Fa=Math.abs((Ot[Pn-1].x-Ot[0].x)*Se._m)/(Pn-1),Ka=Se.ticklabelposition||"",Ja=t(function(eo){return Ka.indexOf(eo)!==-1},"has"),Xn=Ja("top"),Ln=Ja("left"),ni=Ja("right"),$i=Ja("bottom"),Vi=$i||Ln||Xn||ni,Ai=Vi?(Se.tickwidth||0)+2*te:0,_s=Fa<ba*2.5||Se.type==="multicategory"||Se._name==="realaxis";for(Pa=0;Pa<Tn.length-1;Pa++)if(s.bBoxIntersect(Tn[Pa],Tn[Pa+1],Ai)){xa=_s?90:30;break}}xa&&Zr(xr,xa)}}t(aa,"fixLabelOverlaps"),Se._selections&&(Se._selections[dt]=xr);var Sa=[Sr];Se.automargin&&Xe._redrawFromAutoMarginCount&&mr===90?(xa=90,Sa.push(function(){Zr(xr,mr)})):Sa.push(aa),Se._tickAngles&&Sa.push(function(){Se._tickAngles[dt]=xa===null?r(Qt)?Qt:0:xa});var vn=Se._anchorAxis;vn&&vn.autorange&&Qe(Se)&&!ne(Xe,Se._id)&&(Xe._insideTickLabelsAutorange||(Xe._insideTickLabelsAutorange={}),Xe._insideTickLabelsAutorange[vn._name+".autorange"]=vn.autorange,Sa.push(t(function(){xr.each(function(Tn,Pa){var kn=Ia(this),In=kn.select(".text-math-group");In.empty()&&(Se._vals[Pa].bb=f.bBox(kn.node()))})},"computeFinalTickLabelBoundingBoxes")));var hn=s.syncOrAsync(Sa);return hn&&hn.then&&Ae._promises.push(hn),hn};function ur(Ae,Se,je){var Xe=Se._id+"divider",ut=je.vals,xt=je.layer.selectAll("path."+Xe).data(ut,ir);xt.exit().remove(),xt.enter().insert("path",":first-child").classed(Xe,1).classed("crisp",1).call(u.stroke,Se.dividercolor).style("stroke-width",f.crispRound(Ae,Se.dividerwidth,1)+"px"),xt.attr("transform",je.transFn).attr("d",je.path)}t(ur,"drawDividers"),ee.getPxPosition=function(Ae,Se){var je=Ae._fullLayout._size,Xe=Se._id.charAt(0),ut=Se.side,xt;if(Se.anchor!=="free"?xt=Se._anchorAxis:Xe==="x"?xt={_offset:je.t+(1-(Se.position||0))*je.h,_length:0}:Xe==="y"&&(xt={_offset:je.l+(Se.position||0)*je.w,_length:0}),ut==="top"||ut==="left")return xt._offset;if(ut==="bottom"||ut==="right")return xt._offset+xt._length};function qt(Ae){var Se=Ae.title.font.size,je=(Ae.title.text.match(a.BR_TAG_ALL)||[]).length;return Ae.title.hasOwnProperty("standoff")?je?Se*(X+je*G):Se*X:je?Se*(je+1)*G:Se}t(qt,"approxTitleDepth");function hr(Ae,Se){var je=Ae._fullLayout,Xe=Se._id,ut=Xe.charAt(0),xt=Se.title.font.size,dt;if(Se.title.hasOwnProperty("standoff"))dt=Se._depth+Se.title.standoff+qt(Se);else{var Ot=Qe(Se);if(Se.type==="multicategory")dt=Se._depth;else{var Ht=1.5*xt;Ot&&(Ht=.5*xt,Se.ticks==="outside"&&(Ht+=Se.ticklen)),dt=10+Ht+(Se.linewidth?Se.linewidth-1:0)}Ot||(ut==="x"?dt+=Se.side==="top"?xt*(Se.showticklabels?1:0):xt*(Se.showticklabels?1.5:.5):dt+=Se.side==="right"?xt*(Se.showticklabels?1:.5):xt*(Se.showticklabels?.5:0))}var Qt=ee.getPxPosition(Ae,Se),mr,xr,Lr;ut==="x"?(xr=Se._offset+Se._length/2,Lr=Se.side==="top"?Qt-dt:Qt+dt):(Lr=Se._offset+Se._length/2,xr=Se.side==="right"?Qt+dt:Qt-dt,mr={rotate:"-90",offset:0});var Zr;if(Se.type!=="multicategory"){var Sr=Se._selections[Se._id+"tick"];if(Zr={selection:Sr,side:Se.side},Sr&&Sr.node()&&Sr.node().parentNode){var xa=f.getTranslate(Sr.node().parentNode);Zr.offsetLeft=xa.x,Zr.offsetTop=xa.y}Se.title.hasOwnProperty("standoff")&&(Zr.pad=0)}return l.draw(Ae,Xe+"title",{propContainer:Se,propName:Se._name+".title.text",placeholder:je._dfltTitle[ut],avoid:Zr,transform:mr,attributes:{x:xr,y:Lr,"text-anchor":"middle"}})}t(hr,"drawTitle"),ee.shouldShowZeroLine=function(Ae,Se,je){var Xe=s.simpleMap(Se.range,Se.r2l);return Xe[0]*Xe[1]<=0&&Se.zeroline&&(Se.type==="linear"||Se.type==="-")&&!(Se.rangebreaks&&Se.maskBreaks(0)===D)&&(Fr(Se,0)||!Br(Ae,Se,je,Xe)||na(Ae,Se))},ee.clipEnds=function(Ae,Se){return Se.filter(function(je){return Fr(Ae,je.x)})};function Fr(Ae,Se){var je=Ae.l2p(Se);return je>1&&je<Ae._length-1}t(Fr,"clipEnds");function Br(Ae,Se,je,Xe){var ut=je._mainAxis;if(!ut)return;var xt=Ae._fullLayout,dt=Se._id.charAt(0),Ot=ee.counterLetter(Se._id),Ht=Se._offset+(Math.abs(Xe[0])<Math.abs(Xe[1])==(dt==="x")?0:Se._length);function Qt(Sr){if(!Sr.showline||!Sr.linewidth)return!1;var xa=Math.max((Sr.linewidth+Se.zerolinewidth)/2,1);function aa(hn){return typeof hn=="number"&&Math.abs(hn-Ht)<xa}if(t(aa,"closeEnough"),aa(Sr._mainLinePosition)||aa(Sr._mainMirrorPosition))return!0;var Sa=Sr._linepositions||{};for(var vn in Sa)if(aa(Sa[vn][0])||aa(Sa[vn][1]))return!0}t(Qt,"lineNearZero");var mr=xt._plots[je._mainSubplot];if(!(mr.mainplotinfo||mr).overlays.length)return Qt(je);for(var xr=ee.list(Ae,Ot),Lr=0;Lr<xr.length;Lr++){var Zr=xr[Lr];if(Zr._mainAxis===ut&&Qt(Zr))return!0}}t(Br,"anyCounterAxLineAtZero");function na(Ae,Se){for(var je=Ae._fullData,Xe=Se._mainSubplot,ut=Se._id.charAt(0),xt=0;xt<je.length;xt++){var dt=je[xt];if(dt.visible===!0&&dt.xaxis+dt.yaxis===Xe&&(i.traceIs(dt,"bar-like")&&dt.orientation==={x:"h",y:"v"}[ut]||dt.fill&&dt.fill.charAt(dt.fill.length-1)===ut))return!0}return!1}t(na,"hasBarsOrFill");function Ia(Ae){var Se=e.select(Ae),je=Se.select(".text-math-group");return je.empty()?Se.select("text"):je}t(Ia,"selectTickLabel"),ee.allowAutoMargin=function(Ae){for(var Se=ee.list(Ae,"",!0),je=0;je<Se.length;je++){var Xe=Se[je];Xe.automargin&&(n.allowAutoMargin(Ae,ea(Xe)),Xe.mirror&&n.allowAutoMargin(Ae,Er(Xe))),i.getComponentMethod("rangeslider","isVisible")(Xe)&&n.allowAutoMargin(Ae,dn(Xe))}};function ea(Ae){return Ae._id+".automargin"}t(ea,"axAutoMarginID");function Er(Ae){return ea(Ae)+".mirror"}t(Er,"axMirrorAutoMarginID");function dn(Ae){return Ae._id+".rangeslider"}t(dn,"rangeSliderAutoMarginID"),ee.swap=function(Ae,Se){for(var je=ya(Ae,Se),Xe=0;Xe<je.length;Xe++)un(Ae,je[Xe].x,je[Xe].y)};function ya(Ae,Se){var je=[],Xe,ut;for(Xe=0;Xe<Se.length;Xe++){var xt=[],dt=Ae._fullData[Se[Xe]].xaxis,Ot=Ae._fullData[Se[Xe]].yaxis;if(!(!dt||!Ot)){for(ut=0;ut<je.length;ut++)(je[ut].x.indexOf(dt)!==-1||je[ut].y.indexOf(Ot)!==-1)&&xt.push(ut);if(!xt.length){je.push({x:[dt],y:[Ot]});continue}var Ht=je[xt[0]],Qt;if(xt.length>1)for(ut=1;ut<xt.length;ut++)Qt=je[xt[ut]],Hr(Ht.x,Qt.x),Hr(Ht.y,Qt.y);Hr(Ht.x,[dt]),Hr(Ht.y,[Ot])}}return je}t(ya,"makeAxisGroups");function Hr(Ae,Se){for(var je=0;je<Se.length;je++)Ae.indexOf(Se[je])===-1&&Ae.push(Se[je])}t(Hr,"mergeAxisGroups");function un(Ae,Se,je){var Xe=[],ut=[],xt=Ae.layout,dt,Ot;for(dt=0;dt<Se.length;dt++)Xe.push(ee.getFromId(Ae,Se[dt]));for(dt=0;dt<je.length;dt++)ut.push(ee.getFromId(Ae,je[dt]));var Ht=Object.keys(h),Qt=["anchor","domain","overlaying","position","side","tickangle","editType"],mr=["linear","log"];for(dt=0;dt<Ht.length;dt++){var xr=Ht[dt],Lr=Xe[0][xr],Zr=ut[0][xr],Sr=!0,xa=!1,aa=!1;if(!(xr.charAt(0)==="_"||typeof Lr=="function"||Qt.indexOf(xr)!==-1)){for(Ot=1;Ot<Xe.length&&Sr;Ot++){var Sa=Xe[Ot][xr];xr==="type"&&mr.indexOf(Lr)!==-1&&mr.indexOf(Sa)!==-1&&Lr!==Sa?xa=!0:Sa!==Lr&&(Sr=!1)}for(Ot=1;Ot<ut.length&&Sr;Ot++){var vn=ut[Ot][xr];xr==="type"&&mr.indexOf(Zr)!==-1&&mr.indexOf(vn)!==-1&&Zr!==vn?aa=!0:ut[Ot][xr]!==Zr&&(Sr=!1)}Sr&&(xa&&(xt[Xe[0]._name].type="linear"),aa&&(xt[ut[0]._name].type="linear"),Ea(xt,xr,Xe,ut,Ae._fullLayout._dfltTitle))}}for(dt=0;dt<Ae._fullLayout.annotations.length;dt++){var hn=Ae._fullLayout.annotations[dt];Se.indexOf(hn.xref)!==-1&&je.indexOf(hn.yref)!==-1&&s.swapAttrs(xt.annotations[dt],["?"])}}t(un,"swapAxisGroup");function Ea(Ae,Se,je,Xe,ut){var xt=s.nestedProperty,dt=xt(Ae[je[0]._name],Se).get(),Ot=xt(Ae[Xe[0]._name],Se).get(),Ht;for(Se==="title"&&(dt&&dt.text===ut.x&&(dt.text=ut.y),Ot&&Ot.text===ut.y&&(Ot.text=ut.x)),Ht=0;Ht<je.length;Ht++)xt(Ae,je[Ht]._name+"."+Se).set(Ot);for(Ht=0;Ht<Xe.length;Ht++)xt(Ae,Xe[Ht]._name+"."+Se).set(dt)}t(Ea,"swapAxisAttrs");function nt(Ae){return Ae._id==="angularaxis"}t(nt,"isAngular");function He(Ae,Se){for(var je=Se._rangebreaks.length,Xe=0;Xe<je;Xe++){var ut=Se._rangebreaks[Xe];if(Ae>=ut.min&&Ae<ut.max)return ut.max}return Ae}t(He,"moveOutsideBreak");function Qe(Ae){return(Ae.ticklabelposition||"").indexOf("inside")!==-1}t(Qe,"insideTicklabelposition");function ot(Ae,Se){Qe(Ae._anchorAxis||{})&&Ae._hideCounterAxisInsideTickLabels&&Ae._hideCounterAxisInsideTickLabels(Se)}return t(ot,"hideCounterAxisInsideTickLabels"),dT.exports}t(nn,"requireAxes");var c8={},xu={exports:{}},$we={left:0,top:0},Qse=Vwe;function Vwe(e,r,n){r=r||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var i=e.clientX||0,s=e.clientY||0,o=Gwe(r);return n[0]=i-o.left,n[1]=s-o.top,n}t(Vwe,"mouseEventOffset");function Gwe(e){return e===window||e===document||e===document.body?$we:e.getBoundingClientRect()}t(Gwe,"getBoundingClientOffset");function jwe(){var e=!1;try{var r=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{e=!1}return e}t(jwe,"detect");var gw=jwe(),Ywe=t(function(r,n,i,s,o){var a=(r-i)/(s-i),l=a+n/(s-i),u=(a+l)/2;return o==="left"||o==="bottom"?a:o==="center"||o==="middle"?u:o==="right"||o==="top"?l:a<2/3-u?a:l>4/3-u?l:u},"align"),Eq=Nt.exports,Wwe=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],Xwe=t(function(r,n,i,s){return i==="left"?r=0:i==="center"?r=1:i==="right"?r=2:r=Eq.constrain(Math.floor(r*3),0,2),s==="bottom"?n=0:s==="middle"?n=1:s==="top"?n=2:n=Eq.constrain(Math.floor(n*3),0,2),Wwe[n][r]},"getCursor"),ele={exports:{}},Zwe=K1,Kwe=iw,Jwe=KF.getGraphDiv,Qwe=K2,Tz=ele.exports={};Tz.wrapped=function(e,r,n){e=Jwe(e),e._fullLayout&&Kwe.clear(e._fullLayout._uid+Qwe.HOVERID),Tz.raw(e,r,n)};Tz.raw=t(function(r,n){var i=r._fullLayout,s=r._hoverdata;n||(n={}),!(n.target&&!r._dragged&&Zwe.triggerHandler(r,"plotly_beforehover",n)===!1)&&(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),r._hoverdata=void 0,n.target&&s&&r.emit("plotly_unhover",{event:n,points:s}))},"raw");var e3e=Qse,IT=rse,t3e=gw,r3e=Nt.exports.removeElement,a3e=al,g0=xu.exports={};g0.align=Ywe;g0.getCursor=Xwe;var tle=ele.exports;g0.unhover=tle.wrapped;g0.unhoverRaw=tle.raw;g0.init=t(function(r){var n=r.gd,i=1,s=n._context.doubleClickDelay,o=r.element,a,l,u,f,h,v,c,d;n._mouseDownTime||(n._mouseDownTime=0),o.style.pointerEvents="all",o.onmousedown=b,t3e?(o._ontouchstart&&o.removeEventListener("touchstart",o._ontouchstart),o._ontouchstart=b,o.addEventListener("touchstart",b,{passive:!1})):o.ontouchstart=b;function g(T,_,M){return Math.abs(T)<M&&(T=0),Math.abs(_)<M&&(_=0),[T,_]}t(g,"_clampFn");var p=r.clampFn||g;function b(T){n._dragged=!1,n._dragging=!0;var _=zT(T);a=_[0],l=_[1],c=T.target,v=T,d=T.buttons===2||T.ctrlKey,typeof T.clientX>"u"&&typeof T.clientY>"u"&&(T.clientX=a,T.clientY=l),u=new Date().getTime(),u-n._mouseDownTime<s?i+=1:(i=1,n._mouseDownTime=u),r.prepFn&&r.prepFn(T,a,l),IT&&!d?(h=rle(),h.style.cursor=window.getComputedStyle(o).cursor):IT||(h=document,f=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(o).cursor),document.addEventListener("mouseup",y),document.addEventListener("touchend",y),r.dragmode!==!1&&(T.preventDefault(),document.addEventListener("mousemove",m),document.addEventListener("touchmove",m,{passive:!1}))}t(b,"onStart");function m(T){T.preventDefault();var _=zT(T),M=r.minDrag||a3e.MINDRAG,w=p(_[0]-a,_[1]-l,M),x=w[0],A=w[1];(x||A)&&(n._dragged=!0,g0.unhover(n,T)),n._dragged&&r.moveFn&&!d&&(n._dragdata={element:o,dx:x,dy:A},r.moveFn(x,A))}t(m,"onMove");function y(T){if(delete n._dragdata,r.dragmode!==!1&&(T.preventDefault(),document.removeEventListener("mousemove",m),document.removeEventListener("touchmove",m)),document.removeEventListener("mouseup",y),document.removeEventListener("touchend",y),IT?r3e(h):f&&(h.documentElement.style.cursor=f,f=null),!n._dragging){n._dragged=!1;return}if(n._dragging=!1,new Date().getTime()-n._mouseDownTime>s&&(i=Math.max(i-1,1)),n._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(i,v),!d){var _;try{_=new MouseEvent("click",T)}catch{var M=zT(T);_=document.createEvent("MouseEvents"),_.initMouseEvent("click",T.bubbles,T.cancelable,T.view,T.detail,T.screenX,T.screenY,M[0],M[1],T.ctrlKey,T.altKey,T.shiftKey,T.metaKey,T.button,T.relatedTarget)}c.dispatchEvent(_)}n._dragging=!1,n._dragged=!1}t(y,"onDone")},"init");function rle(){var e=document.createElement("div");e.className="dragcover";var r=e.style;return r.position="fixed",r.left=0,r.right=0,r.top=0,r.bottom=0,r.zIndex=999999999,r.background="none",document.body.appendChild(e),e}t(rle,"coverSlip");g0.coverSlip=rle;function zT(e){return e3e(e.changedTouches?e.changedTouches[0]:e,document.body)}t(zT,"pointerOffset");var yw={},pv=t(function(r,n){(r.attr("class")||"").split(" ").forEach(function(i){i.indexOf("cursor-")===0&&r.classed(i,!1)}),n&&r.classed("cursor-"+n,!0)},"setCursor"),FT=pv,bm="data-savedcursor",Cq="!!",n3e=t(function(r,n){var i=r.attr(bm);if(n){if(!i){for(var s=(r.attr("class")||"").split(" "),o=0;o<s.length;o++){var a=s[o];a.indexOf("cursor-")===0&&r.attr(bm,a.substr(7)).classed(a,!1)}r.attr(bm)||r.attr(bm,Cq)}FT(r,n)}else i&&(r.attr(bm,null),i===Cq?FT(r):FT(r,i))},"overrideCursor"),BT=Ho,i3e=Fo,ale={bgcolor:{valType:"color",editType:"legend",description:["Sets the legend background color.","Defaults to `layout.paper_bgcolor`."].join(" ")},bordercolor:{valType:"color",dflt:i3e.defaultLine,editType:"legend",description:"Sets the color of the border enclosing the legend."},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend",description:"Sets the width (in px) of the border enclosing the legend."},font:BT({editType:"legend",description:"Sets the font used to text the legend items."}),grouptitlefont:BT({editType:"legend",description:["Sets the font for group titles in legend.","Defaults to `legend.font` with its size increased about 10%."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend",description:"Sets the orientation of the legend."},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend",description:["Determines the order at which the legend items are displayed.","If *normal*, the items are displayed top-to-bottom in the same","order as the input data.","If *reversed*, the items are displayed in the opposite order","as *normal*.","If *grouped*, the items are displayed in groups","(when a trace `legendgroup` is provided).","if *grouped+reversed*, the items are displayed in the opposite order","as *grouped*."].join(" ")},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend",description:["Sets the amount of vertical space (in px) between legend groups."].join(" ")},entrywidth:{valType:"number",min:0,editType:"legend",description:["Sets the width (in px or fraction) of the legend.","Use 0 to size the entry based on the text width,","when `entrywidthmode` is set to *pixels*."].join(" ")},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend",description:"Determines what entrywidth means."},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend",description:["Determines if the legend items symbols scale with their corresponding *trace* attributes","or remain *constant* independent of the symbol size on the graph."].join(" ")},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend",description:"Sets the width (in px) of the legend item symbols (the part other than the title.text)."},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend",description:["Determines the behavior on legend item click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item click interactions."].join(" ")},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend",description:["Determines the behavior on legend item double-click.","*toggle* toggles the visibility of the item clicked on the graph.","*toggleothers* makes the clicked item the sole visible item on the graph.","*false* disables legend item double-click interactions."].join(" ")},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend",description:["Determines the behavior on legend group item click.","*toggleitem* toggles the visibility of the individual item clicked on the graph.","*togglegroup* toggles the visibility of all items in the same legendgroup as the item clicked on the graph."].join(" ")},x:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the x position (in normalized coordinates) of the legend.","Defaults to *1.02* for vertical legends and","defaults to *0* for horizontal legends."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend",description:["Sets the legend's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the legend.","Value *auto* anchors legends to the right for `x` values greater than or equal to 2/3,","anchors legends to the left for `x` values less than or equal to 1/3 and","anchors legends with respect to their center otherwise."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"legend",description:["Sets the y position (in normalized coordinates) of the legend.","Defaults to *1* for vertical legends,","defaults to *-0.1* for horizontal legends on graphs w/o range sliders and","defaults to *1.1* for horizontal legends on graph with one or multiple range sliders."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend",description:["Sets the legend's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the legend.","Value *auto* anchors legends at their bottom for `y` values less than or equal to 1/3,","anchors legends to at their top for `y` values greater than or equal to 2/3 and","anchors legends with respect to their middle otherwise."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of legend-driven changes in trace and pie label","visibility. Defaults to `layout.uirevision`."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend",description:["Sets the vertical alignment of the symbols with respect to their associated text."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"legend",description:["Sets the title of the legend."].join(" ")},font:BT({editType:"legend",description:["Sets this legend's title font.","Defaults to `legend.font` with its size increased about 20%."].join(" ")}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend",description:["Determines the location of legend's title","with respect to the legend items.","Defaulted to *top* with `orientation` is *h*.","Defaulted to *left* with `orientation` is *v*.","The *top left* options could be used to expand","legend area in both x and y sides."].join(" ")},editType:"legend"},editType:"legend"},Cy={};Cy.isGrouped=t(function(r){return(r.traceorder||"").indexOf("grouped")!==-1},"isGrouped");Cy.isVertical=t(function(r){return r.orientation!=="h"},"isVertical");Cy.isReversed=t(function(r){return(r.traceorder||"").indexOf("reversed")!==-1},"isReversed");var OT=Na,ph=Nt.exports,o3e=ei,s3e=Ni,l3e=ale,u3e=Ty,NT=Cy,nle=t(function(r,n,i){var s=r.legend||{},o=o3e.newContainer(n,"legend");function a(A,S){return ph.coerce(s,o,l3e,A,S)}t(a,"coerce");for(var l,u=t(function(A,S){var k=l._input,L=l;return ph.coerce(k,L,s3e,A,S)},"traceCoerce"),f=n.font||{},h=ph.coerceFont(a,"grouptitlefont",ph.extendFlat({},f,{size:Math.round(f.size*1.1)})),v=0,c=!1,d="normal",g=0;g<i.length;g++)l=i[g],l.visible&&((l.showlegend||l._dfltShowLegend&&!(l._module&&l._module.attributes&&l._module.attributes.showlegend&&l._module.attributes.showlegend.dflt===!1))&&(v++,l.showlegend&&(c=!0,(OT.traceIs(l,"pie-like")||l._input.showlegend===!0)&&v++),ph.coerceFont(u,"legendgrouptitle.font",h)),(OT.traceIs(l,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(l.fill)!==-1)&&(d=NT.isGrouped({traceorder:d})?"grouped+reversed":"reversed"),l.legendgroup!==void 0&&l.legendgroup!==""&&(d=NT.isReversed({traceorder:d})?"reversed+grouped":"grouped"));var p=ph.coerce(r,n,u3e,"showlegend",c&&v>1);if(p===!1&&(n.legend=void 0),!(p===!1&&!s.uirevision)&&(a("uirevision",n.uirevision),p!==!1)){a("bgcolor",n.paper_bgcolor),a("bordercolor"),a("borderwidth");var b=ph.coerceFont(a,"font",n.font),m=a("orientation"),y=m==="h",T,_,M;y?(T=0,OT.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(_=1.1,M="bottom"):(_=-.1,M="top")):(T=1.02,_=1,M="auto"),a("traceorder",d),NT.isGrouped(n.legend)&&a("tracegroupgap"),a("entrywidth"),a("entrywidthmode"),a("itemsizing"),a("itemwidth"),a("itemclick"),a("itemdoubleclick"),a("groupclick"),a("x",T),a("xanchor"),a("y",_),a("yanchor",M),a("valign"),ph.noneOrAll(s,o,["x","y"]);var w=a("title.text");if(w){a("title.side",y?"left":"top");var x=ph.extendFlat({},b,{size:ph.bigFont(b.size)});ph.coerceFont(a,"title.font",x)}}},"legendDefaults"),qT=Nt.exports,Gp=Na,UT=!0,f3e=t(function(r,n,i){var s=n._fullLayout;if(n._dragged||n._editing)return;var o=s.legend.itemclick,a=s.legend.itemdoubleclick,l=s.legend.groupclick;i===1&&o==="toggle"&&a==="toggleothers"&&UT&&n.data&&n._context.showTips&&qT.notifier(qT._(n,"Double-click on legend to isolate one trace"),"long"),UT=!1;var u;if(i===1?u=o:i===2&&(u=a),!u)return;var f=l==="togglegroup",h=s.hiddenlabels?s.hiddenlabels.slice():[],v=r.data()[0][0];if(v.groupTitle&&v.noClick)return;var c=n._fullData,d=v.trace,g=d.legendgroup,p,b,m,y,T,_,M={},w=[],x=[],A=[];function S($,te,ee){var ie=w.indexOf($),se=M[te];return se||(se=M[te]=[]),w.indexOf($)===-1&&(w.push($),ie=w.length-1),se[ie]=ee,ie}t(S,"insertUpdate");function k($,te){if(!(v.groupTitle&&!f)){var ee=$._fullInput;if(Gp.hasTransform(ee,"groupby")){var ie=x[ee.index];if(!ie){var se=Gp.getTransformIndices(ee,"groupby"),W=se[se.length-1];ie=qT.keyedContainer(ee,"transforms["+W+"].styles","target","value.visible"),x[ee.index]=ie}var ne=ie.get($._group);ne===void 0&&(ne=!0),ne!==!1&&ie.set($._group,te),A[ee.index]=S(ee.index,"visible",ee.visible!==!1)}else{var he=ee.visible===!1?!1:te;S(ee.index,"visible",he)}}}if(t(k,"setVisibility"),Gp.traceIs(d,"pie-like")){var L=v.label,P=h.indexOf(L);u==="toggle"?P===-1?h.push(L):h.splice(P,1):u==="toggleothers"&&(h=[],n.calcdata[0].forEach(function($){L!==$.label&&h.push($.label)}),n._fullLayout.hiddenlabels&&n._fullLayout.hiddenlabels.length===h.length&&P===-1&&(h=[])),Gp.call("_guiRelayout",n,"hiddenlabels",h)}else{var D=g&&g.length,B=[],z;if(D)for(p=0;p<c.length;p++)z=c[p],!!z.visible&&z.legendgroup===g&&B.push(p);if(u==="toggle"){var R;switch(d.visible){case!0:R="legendonly";break;case!1:R=!1;break;case"legendonly":R=!0;break}if(D)if(f)for(p=0;p<c.length;p++)c[p].visible!==!1&&c[p].legendgroup===g&&k(c[p],R);else k(d,R);else k(d,R)}else if(u==="toggleothers"){var F,O,q,H,j=!0;for(p=0;p<c.length;p++)if(F=c[p]===d,q=c[p].showlegend!==!0,!(F||q)&&(O=D&&c[p].legendgroup===g,!O&&c[p].visible===!0&&!Gp.traceIs(c[p],"notLegendIsolatable"))){j=!1;break}for(p=0;p<c.length;p++)if(c[p].visible!==!1&&!Gp.traceIs(c[p],"notLegendIsolatable"))switch(d.visible){case"legendonly":k(c[p],!0);break;case!0:H=j?!0:"legendonly",F=c[p]===d,q=c[p].showlegend!==!0&&!c[p].legendgroup,O=F||D&&c[p].legendgroup===g,k(c[p],O||q?!0:H);break}}for(p=0;p<x.length;p++)if(m=x[p],!!m){var X=m.constructUpdate(),G=Object.keys(X);for(b=0;b<G.length;b++)y=G[b],_=M[y]=M[y]||[],_[A[p]]=X[y]}for(T=Object.keys(M),p=0;p<T.length;p++)for(y=T[p],b=0;b<w.length;b++)M[y].hasOwnProperty(b)||(M[y][b]=void 0);Gp.call("_guiRestyle",n,M,w)}},"handleClick"),ile={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5},Lq=Na,HT=Cy,c3e=t(function(r,n){var i=n._inHover,s=HT.isGrouped(n),o=HT.isReversed(n),a={},l=[],u=!1,f={},h=0,v=0,c,d;function g(z,R){if(z===""||!HT.isGrouped(n)){var F="~~i"+h;l.push(F),a[F]=[R],h++}else l.indexOf(z)===-1?(l.push(z),u=!0,a[z]=[R]):a[z].push(R)}for(t(g,"addOneItem"),c=0;c<r.length;c++){var p=r[c],b=p[0],m=b.trace,y=m.legendgroup;if(!(!i&&(!m.visible||!m.showlegend)))if(Lq.traceIs(m,"pie-like"))for(f[y]||(f[y]={}),d=0;d<p.length;d++){var T=p[d].label;f[y][T]||(g(y,{label:T,color:p[d].color,i:p[d].i,trace:m,pts:p[d].pts}),f[y][T]=!0,v=Math.max(v,(T||"").length))}else g(y,b),v=Math.max(v,(m.name||"").length)}if(!l.length)return[];var _=!u||!s,M=[];for(c=0;c<l.length;c++){var w=a[l[c]];_?M.push(w[0]):M.push(w)}for(_&&(M=[M]),c=0;c<M.length;c++){var x=1/0;for(d=0;d<M[c].length;d++){var A=M[c][d].trace.legendrank;x>A&&(x=A)}M[c][0]._groupMinRank=x,M[c][0]._preGroupSort=c}var S=t(function(z,R){return z[0]._groupMinRank-R[0]._groupMinRank||z[0]._preGroupSort-R[0]._preGroupSort},"orderFn1"),k=t(function(z,R){return z.trace.legendrank-R.trace.legendrank||z._preSort-R._preSort},"orderFn2");for(M.forEach(function(z,R){z[0]._preGroupSort=R}),M.sort(S),c=0;c<M.length;c++){M[c].forEach(function(z,R){z._preSort=R}),M[c].sort(k);var L=M[c][0].trace,P=null;for(d=0;d<M[c].length;d++){var D=M[c][d].trace.legendgrouptitle;if(D&&D.text){P=D,i&&(D.font=n._groupTitleFont);break}}if(o&&M[c].reverse(),P){var B=!1;for(d=0;d<M[c].length;d++)if(Lq.traceIs(M[c][d].trace,"pie-like")){B=!0;break}M[c].unshift({i:-1,groupTitle:P,noClick:B,trace:{showlegend:L.showlegend,legendgroup:L.legendgroup,visible:n.groupclick==="toggleitem"?!0:L.visible}})}for(d=0;d<M[c].length;d++)M[c][d]=[M[c][d]]}return n._lgroupsLength=M.length,n._maxNameLength=v,M},"getLegendData"),pp={};(function(e){var r=Nt.exports;function n(i){return i.indexOf("e")!==-1?i.replace(/[.]?0+e/,"e"):i.indexOf(".")!==-1?i.replace(/[.]?0+$/,""):i}t(n,"format"),e.formatPiePercent=t(function(s,o){var a=n((s*100).toPrecision(3));return r.numSeparate(a,o)+"%"},"formatPiePercent"),e.formatPieValue=t(function(s,o){var a=n(s.toPrecision(10));return r.numSeparate(a,o)},"formatPieValue"),e.getFirstFilled=t(function(s,o){if(!!Array.isArray(s))for(var a=0;a<o.length;a++){var l=s[o[a]];if(l||l===0||l==="")return l}},"getFirstFilled"),e.castOption=t(function(s,o){if(Array.isArray(s))return e.getFirstFilled(s,o);if(s)return s},"castOption"),e.getRotationAngle=function(i){return(i==="auto"?0:i)*Math.PI/180}})(pp);var $T,Rq;function ex(){if(Rq)return $T;Rq=1;var e=$a.exports,r=pp.castOption;return $T=t(function(i,s,o){var a=o.marker.line,l=r(a.color,s.pts)||e.defaultLine,u=r(a.width,s.pts)||0;i.style("stroke-width",u).call(e.fill,s.color).call(e.stroke,l)},"styleOne"),$T}t(ex,"requireStyle_one");var cu=Va.exports,VT=Na,Zl=Nt.exports,Pq=Zl.strTranslate,$u=bn.exports,Ec=$a.exports,GT=Qu.extractOpts,B_=ho,h3e=ex(),v3e=pp.castOption,d3e=ile,Dq=12,Iq=5,jp=2,p3e=10,pg=5,ole=t(function(r,n,i){var s=n._fullLayout;i||(i=s.legend);var o=i.itemsizing==="constant",a=i.itemwidth,l=(a+d3e.itemGap*2)/2,u=Pq(l,0),f=t(function(x,A,S,k){var L;if(x+1)L=x;else if(A&&A.width>0)L=A.width;else return 0;return o?k:Math.min(L,S)},"boundLineWidth");r.each(function(x){var A=cu.select(this),S=Zl.ensureSingle(A,"g","layers");S.style("opacity",x[0].trace.opacity);var k=i.valign,L=x[0].lineHeight,P=x[0].height;if(k==="middle"||!L||!P)S.attr("transform",null);else{var D={top:1,bottom:-1}[k],B=D*(.5*(L-P+3));S.attr("transform",Pq(0,B))}var z=S.selectAll("g.legendfill").data([x]);z.enter().append("g").classed("legendfill",!0);var R=S.selectAll("g.legendlines").data([x]);R.enter().append("g").classed("legendlines",!0);var F=S.selectAll("g.legendsymbols").data([x]);F.enter().append("g").classed("legendsymbols",!0),F.selectAll("g.legendpoints").data([x]).enter().append("g").classed("legendpoints",!0)}).each(w).each(c).each(g).each(d).each(b).each(_).each(T).each(h).each(v).each(m).each(y);function h(x){var A=zq(x),S=A.showFill,k=A.showLine,L=A.showGradientLine,P=A.showGradientFill,D=A.anyFill,B=A.anyLine,z=x[0],R=z.trace,F,O,q=GT(R),H=q.colorscale,j=q.reversescale,X=t(function(W){if(W.size())if(S)$u.fillGroupStyle(W,n);else{var ne="legendfill-"+R.uid;$u.gradient(W,n,ne,jT(j),H,"fill")}},"fillStyle"),G=t(function(W){if(W.size()){var ne="legendline-"+R.uid;$u.lineGroupStyle(W),$u.gradient(W,n,ne,jT(j),H,"stroke")}},"lineGradient"),$=B_.hasMarkers(R)||!D?"M5,0":B?"M5,-2":"M5,-3",te=cu.select(this),ee=te.select(".legendfill").selectAll("path").data(S||P?[x]:[]);if(ee.enter().append("path").classed("js-fill",!0),ee.exit().remove(),ee.attr("d",$+"h"+a+"v6h-"+a+"z").call(X),k||L){var ie=f(void 0,R.line,p3e,Iq);O=Zl.minExtend(R,{line:{width:ie}}),F=[Zl.minExtend(z,{trace:O})]}var se=te.select(".legendlines").selectAll("path").data(k||L?[F]:[]);se.enter().append("path").classed("js-line",!0),se.exit().remove(),se.attr("d",$+(L?"l"+a+",0.0001":"h"+a)).call(k?$u.lineGroupStyle:G)}t(h,"styleLines");function v(x){var A=zq(x),S=A.anyFill,k=A.anyLine,L=A.showLine,P=A.showMarker,D=x[0],B=D.trace,z=!P&&!k&&!S&&B_.hasText(B),R,F;function O(ee,ie,se,W){var ne=Zl.nestedProperty(B,ee).get(),he=Zl.isArrayOrTypedArray(ne)&&ie?ie(ne):ne;if(o&&he&&W!==void 0&&(he=W),se){if(he<se[0])return se[0];if(he>se[1])return se[1]}return he}t(O,"boundVal");function q(ee){return D._distinct&&D.index&&ee[D.index]?ee[D.index]:ee[0]}if(t(q,"pickFirst"),P||z||L){var H={},j={};if(P){H.mc=O("marker.color",q),H.mx=O("marker.symbol",q),H.mo=O("marker.opacity",Zl.mean,[.2,1]),H.mlc=O("marker.line.color",q),H.mlw=O("marker.line.width",Zl.mean,[0,5],jp),j.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var X=O("marker.size",Zl.mean,[2,16],Dq);H.ms=X,j.marker.size=X}L&&(j.line={width:O("line.width",q,[0,10],Iq)}),z&&(H.tx="Aa",H.tp=O("textposition",q),H.ts=10,H.tc=O("textfont.color",q),H.tf=O("textfont.family",q)),R=[Zl.minExtend(D,H)],F=Zl.minExtend(B,j),F.selectedpoints=null,F.texttemplate=null}var G=cu.select(this).select("g.legendpoints"),$=G.selectAll("path.scatterpts").data(P?R:[]);$.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",u),$.exit().remove(),$.call($u.pointStyle,F,n),P&&(R[0].mrc=3);var te=G.selectAll("g.pointtext").data(z?R:[]);te.enter().append("g").classed("pointtext",!0).append("text").attr("transform",u),te.exit().remove(),te.selectAll("text").call($u.textPointStyle,F,n)}t(v,"stylePoints");function c(x){var A=x[0].trace,S=A.type==="waterfall";if(x[0]._distinct&&S){var k=x[0].trace[x[0].dir].marker;return x[0].mc=k.color,x[0].mlw=k.line.width,x[0].mlc=k.line.color,p(x,this,"waterfall")}var L=[];A.visible&&S&&(L=x[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var P=cu.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(L);P.enter().append("path").classed("legendwaterfall",!0).attr("transform",u).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(D){var B=cu.select(this),z=A[D[0]].marker,R=f(void 0,z.line,pg,jp);B.attr("d",D[1]).style("stroke-width",R+"px").call(Ec.fill,z.color),R&&B.call(Ec.stroke,z.line.color)})}t(c,"styleWaterfalls");function d(x){p(x,this)}t(d,"styleBars");function g(x){p(x,this,"funnel")}t(g,"styleFunnels");function p(x,A,S){var k=x[0].trace,L=k.marker||{},P=L.line||{},D=S?k.visible&&k.type===S:VT.traceIs(k,"bar"),B=cu.select(A).select("g.legendpoints").selectAll("path.legend"+S).data(D?[x]:[]);B.enter().append("path").classed("legend"+S,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",u),B.exit().remove(),B.each(function(z){var R=cu.select(this),F=z[0],O=f(F.mlw,L.line,pg,jp);R.style("stroke-width",O+"px");var q=F.mcc;if(!i._inHover&&"mc"in F){var H=GT(L),j=H.mid;j===void 0&&(j=(H.max+H.min)/2),q=$u.tryColorscale(L,"")(j)}var X=q||F.mc||L.color,G=L.pattern,$=G&&$u.getPatternAttr(G.shape,0,"");if($){var te=$u.getPatternAttr(G.bgcolor,0,null),ee=$u.getPatternAttr(G.fgcolor,0,null),ie=G.fgopacity,se=Fq(G.size,8,10),W=Fq(G.solidity,.5,1),ne="legend-"+k.uid;R.call($u.pattern,"legend",n,ne,$,se,W,q,G.fillmode,te,ee,ie)}else R.call(Ec.fill,X);O&&Ec.stroke(R,F.mlc||P.color)})}t(p,"styleBarLike");function b(x){var A=x[0].trace,S=cu.select(this).select("g.legendpoints").selectAll("path.legendbox").data(A.visible&&VT.traceIs(A,"box-violin")?[x]:[]);S.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",u),S.exit().remove(),S.each(function(){var k=cu.select(this);if((A.boxpoints==="all"||A.points==="all")&&Ec.opacity(A.fillcolor)===0&&Ec.opacity((A.line||{}).color)===0){var L=Zl.minExtend(A,{marker:{size:o?Dq:Zl.constrain(A.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});S.call($u.pointStyle,L,n)}else{var P=f(void 0,A.line,pg,jp);k.style("stroke-width",P+"px").call(Ec.fill,A.fillcolor),P&&Ec.stroke(k,A.line.color)}})}t(b,"styleBoxes");function m(x){var A=x[0].trace,S=cu.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(A.visible&&A.type==="candlestick"?[x,x]:[]);S.enter().append("path").classed("legendcandle",!0).attr("d",function(k,L){return L?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",u).style("stroke-miterlimit",1),S.exit().remove(),S.each(function(k,L){var P=cu.select(this),D=A[L?"increasing":"decreasing"],B=f(void 0,D.line,pg,jp);P.style("stroke-width",B+"px").call(Ec.fill,D.fillcolor),B&&Ec.stroke(P,D.line.color)})}t(m,"styleCandles");function y(x){var A=x[0].trace,S=cu.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(A.visible&&A.type==="ohlc"?[x,x]:[]);S.enter().append("path").classed("legendohlc",!0).attr("d",function(k,L){return L?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",u).style("stroke-miterlimit",1),S.exit().remove(),S.each(function(k,L){var P=cu.select(this),D=A[L?"increasing":"decreasing"],B=f(void 0,D.line,pg,jp);P.style("fill","none").call($u.dashLine,D.line.dash,B),B&&Ec.stroke(P,D.line.color)})}t(y,"styleOHLC");function T(x){M(x,this,"pie")}t(T,"stylePies");function _(x){M(x,this,"funnelarea")}t(_,"styleFunnelareas");function M(x,A,S){var k=x[0],L=k.trace,P=S?L.visible&&L.type===S:VT.traceIs(L,S),D=cu.select(A).select("g.legendpoints").selectAll("path.legend"+S).data(P?[x]:[]);if(D.enter().append("path").classed("legend"+S,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",u),D.exit().remove(),D.size()){var B=(L.marker||{}).line,z=f(v3e(B.width,k.pts),B,pg,jp),R=Zl.minExtend(L,{marker:{line:{width:z}}});R.marker.line.color=B.color;var F=Zl.minExtend(k,{trace:R});h3e(D,F,R)}}t(M,"stylePieLike");function w(x){var A=x[0].trace,S,k=[];if(A.visible)switch(A.type){case"histogram2d":case"heatmap":k=[["M-15,-2V4H15V-2Z"]],S=!0;break;case"choropleth":case"choroplethmapbox":k=[["M-6,-6V6H6V-6Z"]],S=!0;break;case"densitymapbox":k=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],S="radial";break;case"cone":k=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],S=!1;break;case"streamtube":k=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],S=!1;break;case"surface":k=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],S=!0;break;case"mesh3d":k=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],S=!1;break;case"volume":k=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],S=!0;break;case"isosurface":k=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],S=!1;break}var L=cu.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(k);L.enter().append("path").classed("legend3dandfriends",!0).attr("transform",u).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(P,D){var B=cu.select(this),z=GT(A),R=z.colorscale,F=z.reversescale,O=t(function(X){if(X.size()){var G="legendfill-"+A.uid;$u.gradient(X,n,G,jT(F,S==="radial"),R,"fill")}},"fillGradient"),q;if(R){if(!S){var j=R.length;q=D===0?R[F?j-1:0][1]:D===1?R[F?0:j-1][1]:R[Math.floor((j-1)/2)][1]}}else{var H=A.vertexcolor||A.facecolor||A.color;q=Zl.isArrayOrTypedArray(H)?H[D]||H[0]:H}B.attr("d",P[0]),q?B.call(Ec.fill,q):B.call(O)})}t(w,"styleSpatial")},"style");function jT(e,r){var n=r?"radial":"horizontal";return n+(e?"":"reversed")}t(jT,"getGradientDirection");function zq(e){var r=e[0].trace,n=r.contours,i=B_.hasLines(r),s=B_.hasMarkers(r),o=r.visible&&r.fill&&r.fill!=="none",a=!1,l=!1;if(n){var u=n.coloring;u==="lines"?a=!0:i=u==="none"||u==="heatmap"||n.showlines,n.type==="constraint"?o=n._operation!=="=":(u==="fill"||u==="heatmap")&&(l=!0)}return{showMarker:s,showLine:i,showFill:o,showGradientLine:a,showGradientFill:l,anyLine:i||a,anyFill:o||l}}t(zq,"getStyleGuide");function Fq(e,r,n){return e&&Zl.isArrayOrTypedArray(e)?r:e>n?n:e}t(Fq,"dimAttr");var Zf=Va.exports,ds=Nt.exports,Az=so.exports,i0=Na,Bq=K1,YT=xu.exports,Bs=bn.exports,c_=$a.exports,Yg=Ji,Oq=f3e,Il=ile,h8=yl,g3e=h8.LINE_SPACING,O_=h8.FROM_TL,Nq=h8.FROM_BR,qq=c3e,y3e=ole,Uq=Cy,Ig=1,sle=t(function(r,n){return n||(n=r._fullLayout.legend||{}),m3e(r,n)},"draw");function m3e(e,r){var n=e._fullLayout,i="legend"+n._uid,s,o=r._inHover;if(o?(s=r.layer,i+="-hover"):s=n._infolayer,!!s){e._legendMouseDownTime||(e._legendMouseDownTime=0);var a;if(o){if(!r.entries)return;a=qq(r.entries,r)}else{if(!e.calcdata)return;a=n.showlegend&&qq(e.calcdata,r)}var l=n.hiddenlabels||[];if(!o&&(!n.showlegend||!a.length))return s.selectAll(".legend").remove(),n._topdefs.select("#"+i).remove(),Az.autoMargin(e,"legend");var u=ds.ensureSingle(s,"g","legend",function(m){o||m.attr("pointer-events","all")}),f=ds.ensureSingleById(n._topdefs,"clipPath",i,function(m){m.append("rect")}),h=ds.ensureSingle(u,"rect","bg",function(m){m.attr("shape-rendering","crispEdges")});h.call(c_.stroke,r.bordercolor).call(c_.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var v=ds.ensureSingle(u,"g","scrollbox"),c=r.title;if(r._titleWidth=0,r._titleHeight=0,c.text){var d=ds.ensureSingle(v,"text","legendtitletext");d.attr("text-anchor","start").call(Bs.font,c.font).text(c.text),h_(d,v,e,r,Ig)}else v.selectAll(".legendtitletext").remove();var g=ds.ensureSingle(u,"rect","scrollbar",function(m){m.attr(Il.scrollBarEnterAttrs).call(c_.fill,Il.scrollBarColor)}),p=v.selectAll("g.groups").data(a);p.enter().append("g").attr("class","groups"),p.exit().remove();var b=p.selectAll("g.traces").data(ds.identity);b.enter().append("g").attr("class","traces"),b.exit().remove(),b.style("opacity",function(m){var y=m[0].trace;return i0.traceIs(y,"pie-like")?l.indexOf(m[0].label)!==-1?.5:1:y.visible==="legendonly"?.5:1}).each(function(){Zf.select(this).call(x3e,e,r)}).call(y3e,e,r).each(function(){o||Zf.select(this).call(b3e,e)}),ds.syncOrAsync([Az.previousPromises,function(){return T3e(e,p,b,r)},function(){var m=n._size,y=r.borderwidth;if(!o){var T=A3e(e);if(T)return;var _=m.l+m.w*r.x-O_[v8(r)]*r._width,M=m.t+m.h*(1-r.y)-O_[d8(r)]*r._effHeight;if(n.margin.autoexpand){var w=_,x=M;_=ds.constrain(_,0,n.width-r._width),M=ds.constrain(M,0,n.height-r._effHeight),_!==w&&ds.log("Constrain legend.x to make legend fit inside graph"),M!==x&&ds.log("Constrain legend.y to make legend fit inside graph")}Bs.setTranslate(u,_,M)}if(g.on(".drag",null),u.on("wheel",null),o||r._height<=r._maxHeight||e._context.staticPlot){var A=r._effHeight;o&&(A=r._height),h.attr({width:r._width-y,height:A-y,x:y/2,y:y/2}),Bs.setTranslate(v,0,0),f.select("rect").attr({width:r._width-2*y,height:A-2*y,x:y,y}),Bs.setClipUrl(v,i,e),Bs.setRect(g,0,0,0,0),delete r._scrollY}else{var S=Math.max(Il.scrollBarMinHeight,r._effHeight*r._effHeight/r._height),k=r._effHeight-S-2*Il.scrollBarMargin,L=r._height-r._effHeight,P=k/L,D=Math.min(r._scrollY||0,L);h.attr({width:r._width-2*y+Il.scrollBarWidth+Il.scrollBarMargin,height:r._effHeight-y,x:y/2,y:y/2}),f.select("rect").attr({width:r._width-2*y+Il.scrollBarWidth+Il.scrollBarMargin,height:r._effHeight-2*y,x:y,y:y+D}),Bs.setClipUrl(v,i,e),j(D,S,P),u.on("wheel",function(){D=ds.constrain(r._scrollY+Zf.event.deltaY/k*L,0,L),j(D,S,P),D!==0&&D!==L&&Zf.event.preventDefault()});var B,z,R,F=t(function(ee,ie,se){var W=(se-ie)/P+ee;return ds.constrain(W,0,L)},"getScrollBarDragY"),O=t(function(ee,ie,se){var W=(ie-se)/P+ee;return ds.constrain(W,0,L)},"getNaturalDragY"),q=Zf.behavior.drag().on("dragstart",function(){var ee=Zf.event.sourceEvent;ee.type==="touchstart"?B=ee.changedTouches[0].clientY:B=ee.clientY,R=D}).on("drag",function(){var ee=Zf.event.sourceEvent;ee.buttons===2||ee.ctrlKey||(ee.type==="touchmove"?z=ee.changedTouches[0].clientY:z=ee.clientY,D=F(R,B,z),j(D,S,P))});g.call(q);var H=Zf.behavior.drag().on("dragstart",function(){var ee=Zf.event.sourceEvent;ee.type==="touchstart"&&(B=ee.changedTouches[0].clientY,R=D)}).on("drag",function(){var ee=Zf.event.sourceEvent;ee.type==="touchmove"&&(z=ee.changedTouches[0].clientY,D=O(R,B,z),j(D,S,P))});v.call(H)}function j(ee,ie,se){r._scrollY=e._fullLayout.legend._scrollY=ee,Bs.setTranslate(v,0,-ee),Bs.setRect(g,r._width,Il.scrollBarMargin+ee*se,Il.scrollBarWidth,ie),f.select("rect").attr("y",y+ee)}if(t(j,"scrollHandler"),e._context.edits.legendPosition){var X,G,$,te;u.classed("cursor-move",!0),YT.init({element:u.node(),gd:e,prepFn:function(){var ee=Bs.getTranslate(u);$=ee.x,te=ee.y},moveFn:function(ee,ie){var se=$+ee,W=te+ie;Bs.setTranslate(u,se,W),X=YT.align(se,0,m.l,m.l+m.w,r.xanchor),G=YT.align(W,0,m.t+m.h,m.t,r.yanchor)},doneFn:function(){X!==void 0&&G!==void 0&&i0.call("_guiRelayout",e,{"legend.x":X,"legend.y":G})},clickFn:function(ee,ie){var se=s.selectAll("g.traces").filter(function(){var W=this.getBoundingClientRect();return ie.clientX>=W.left&&ie.clientX<=W.right&&ie.clientY>=W.top&&ie.clientY<=W.bottom});se.size()>0&&lle(e,u,se,ee,ie)}})}}],e)}}t(m3e,"_draw");function fb(e,r,n){var i=e[0],s=i.width,o=r.entrywidthmode,a=i.trace.legendwidth||r.entrywidth;return o==="fraction"?r._maxWidth*a:n+(a||s)}t(fb,"getTraceWidth");function lle(e,r,n,i,s){var o=n.data()[0][0].trace,a={event:s,node:n.node(),curveNumber:o.index,expandedIndex:o._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};o._group&&(a.group=o._group),i0.traceIs(o,"pie-like")&&(a.label=n.datum()[0].label);var l=Bq.triggerHandler(e,"plotly_legendclick",a);if(l!==!1){if(i===1)r._clickTimeout=setTimeout(function(){!e._fullLayout||Oq(n,e,i)},e._context.doubleClickDelay);else if(i===2){r._clickTimeout&&clearTimeout(r._clickTimeout),e._legendMouseDownTime=0;var u=Bq.triggerHandler(e,"plotly_legenddoubleclick",a);u!==!1&&Oq(n,e,i)}}}t(lle,"clickOrDoubleClick");function x3e(e,r,n){var i=e.data()[0][0],s=i.trace,o=i0.traceIs(s,"pie-like"),a=!n._inHover&&r._context.edits.legendText&&!o,l=n._maxNameLength,u,f;i.groupTitle?(u=i.groupTitle.text,f=i.groupTitle.font):(f=n.font,n.entries?u=i.text:(u=o?i.label:s.name,s._meta&&(u=ds.templateString(u,s._meta))));var h=ds.ensureSingle(e,"text","legendtext");h.attr("text-anchor","start").call(Bs.font,f).text(a?Hq(u,l):u);var v=n.itemwidth+Il.itemGap*2;Yg.positionText(h,v,0),a?h.call(Yg.makeEditable,{gd:r,text:u}).call(h_,e,r,n).on("edit",function(c){this.text(Hq(c,l)).call(h_,e,r,n);var d=i.trace._fullInput||{},g={};if(i0.hasTransform(d,"groupby")){var p=i0.getTransformIndices(d,"groupby"),b=p[p.length-1],m=ds.keyedContainer(d,"transforms["+b+"].styles","target","value.name");m.set(i.trace._group,c),g=m.constructUpdate()}else g.name=c;return i0.call("_guiRestyle",r,g,s.index)}):h_(h,e,r,n)}t(x3e,"drawTexts");function Hq(e,r){var n=Math.max(4,r);if(e&&e.trim().length>=n/2)return e;e=e||"";for(var i=n-e.length;i>0;i--)e+=" ";return e}t(Hq,"ensureLength");function b3e(e,r){var n=r._context.doubleClickDelay,i,s=1,o=ds.ensureSingle(e,"rect","legendtoggle",function(a){r._context.staticPlot||a.style("cursor","pointer").attr("pointer-events","all"),a.call(c_.fill,"rgba(0,0,0,0)")});r._context.staticPlot||(o.on("mousedown",function(){i=new Date().getTime(),i-r._legendMouseDownTime<n?s+=1:(s=1,r._legendMouseDownTime=i)}),o.on("mouseup",function(){if(!(r._dragged||r._editing)){var a=r._fullLayout.legend;new Date().getTime()-r._legendMouseDownTime>n&&(s=Math.max(s-1,1)),lle(r,a,e,s,Zf.event)}}))}t(b3e,"setupTraceToggle");function h_(e,r,n,i,s){i._inHover&&e.attr("data-notex",!0),Yg.convertToTspans(e,n,function(){_3e(r,n,i,s)})}t(h_,"textLayout");function _3e(e,r,n,i){var s=e.data()[0][0];if(!n._inHover&&s&&!s.trace.showlegend){e.remove();return}var o=e.select("g[class*=math-group]"),a=o.node();n||(n=r._fullLayout.legend);var l=n.borderwidth,u;i===Ig?u=n.title.font:s.groupTitle?u=s.groupTitle.font:u=n.font;var f=u.size*g3e,h,v;if(a){var c=Bs.bBox(a);h=c.height,v=c.width,i===Ig?Bs.setTranslate(o,l,l+h*.75):Bs.setTranslate(o,0,h*.25)}else{var d=e.select(i===Ig?".legendtitletext":".legendtext"),g=Yg.lineCount(d),p=d.node();if(h=f*g,v=p?Bs.bBox(p).width:0,i===Ig)n.title.side==="left"&&(v+=Il.itemGap*2),Yg.positionText(d,l+Il.titlePad,l+f);else{var b=Il.itemGap*2+n.itemwidth;s.groupTitle&&(b=Il.itemGap,v-=n.itemwidth),Yg.positionText(d,b,-f*((g-1)/2-.3))}}i===Ig?(n._titleWidth=v,n._titleHeight=h):(s.lineHeight=f,s.height=Math.max(h,16)+3,s.width=v)}t(_3e,"computeTextDimensions");function w3e(e){var r=0,n=0,i=e.title.side;return i&&(i.indexOf("left")!==-1&&(r=e._titleWidth),i.indexOf("top")!==-1&&(n=e._titleHeight)),[r,n]}t(w3e,"getTitleSize");function T3e(e,r,n,i){var s=e._fullLayout;i||(i=s.legend);var o=s._size,a=Uq.isVertical(i),l=Uq.isGrouped(i),u=i.entrywidthmode==="fraction",f=i.borderwidth,h=2*f,v=Il.itemGap,c=i.itemwidth+v*2,d=2*(f+v),g=d8(i),p=i.y<0||i.y===0&&g==="top",b=i.y>1||i.y===1&&g==="bottom",m=i.tracegroupgap,y={};i._maxHeight=Math.max(p||b?s.height/2:o.h,30);var T=0;i._width=0,i._height=0;var _=w3e(i);if(a)n.each(function($){var te=$[0].height;Bs.setTranslate(this,f+_[0],f+_[1]+i._height+te/2+v),i._height+=te,i._width=Math.max(i._width,$[0].width)}),T=c+i._width,i._width+=v+c+h,i._height+=d,l&&(r.each(function($,te){Bs.setTranslate(this,0,te*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var M=v8(i),w=i.x<0||i.x===0&&M==="right",x=i.x>1||i.x===1&&M==="left",A=b||p,S=s.width/2;i._maxWidth=Math.max(w?A&&M==="left"?o.l+o.w:S:x?A&&M==="right"?o.r+o.w:S:o.w,2*c);var k=0,L=0;n.each(function($){var te=fb($,i,c);k=Math.max(k,te),L+=te}),T=null;var P=0;if(l){var D=0,B=0,z=0;r.each(function(){var $=0,te=0;Zf.select(this).selectAll("g.traces").each(function(ie){var se=fb(ie,i,c),W=ie[0].height;Bs.setTranslate(this,_[0],_[1]+f+v+W/2+te),te+=W,$=Math.max($,se),y[ie[0].trace.legendgroup]=$});var ee=$+v;B>0&&ee+f+B>i._maxWidth?(P=Math.max(P,B),B=0,z+=D+m,D=te):D=Math.max(D,te),Bs.setTranslate(this,B,z),B+=ee}),i._width=Math.max(P,B)+f,i._height=z+D+d}else{var R=n.size(),F=L+h+(R-1)*v<i._maxWidth,O=0,q=0,H=0,j=0;n.each(function($){var te=$[0].height,ee=fb($,i,c),ie=F?ee:k;u||(ie+=v),ie+f+q-v>=i._maxWidth&&(P=Math.max(P,j),q=0,H+=O,i._height+=O,O=0),Bs.setTranslate(this,_[0]+f+q,_[1]+f+H+te/2+v),j=q+ee+v,q+=ie,O=Math.max(O,te)}),F?(i._width=q+h,i._height=O+d):(i._width=Math.max(P,j)+h,i._height+=O+d)}}i._width=Math.ceil(Math.max(i._width+_[0],i._titleWidth+2*(f+Il.titlePad))),i._height=Math.ceil(Math.max(i._height+_[1],i._titleHeight+2*(f+Il.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var X=e._context.edits,G=X.legendText||X.legendPosition;n.each(function($){var te=Zf.select(this).select(".legendtoggle"),ee=$[0].height,ie=$[0].trace.legendgroup,se=fb($,i,c);l&&ie!==""&&(se=y[ie]);var W=G?c:T||se;!a&&!u&&(W+=v/2),Bs.setRect(te,0,-ee/2,W,ee)})}t(T3e,"computeLegendDimensions");function A3e(e){var r=e._fullLayout,n=r.legend,i=v8(n),s=d8(n);return Az.autoMargin(e,"legend",{x:n.x,y:n.y,l:n._width*O_[i],r:n._width*Nq[i],b:n._effHeight*Nq[s],t:n._effHeight*O_[s]})}t(A3e,"expandMargin");function v8(e){return ds.isRightAnchor(e)?"right":ds.isCenterAnchor(e)?"center":"left"}t(v8,"getXanchor");function d8(e){return ds.isBottomAnchor(e)?"bottom":ds.isMiddleAnchor(e)?"middle":"top"}t(d8,"getYanchor");var o0=Va.exports,ad=xn,$q=rl.exports,gs=Nt.exports,WT=gs.strTranslate,S3e=gs.strRotate,M3e=K1,Pc=Ji,k3e=n3e,ev=bn.exports,Js=$a.exports,cb=xu.exports,Kd=nn(),ay=Na,yh=Rf,y0=K2,E3e=nle,C3e=sle,ule=y0.YANGLE,p8=Math.PI*ule/180,L3e=1/Math.sin(p8),R3e=Math.cos(p8),P3e=Math.sin(p8),So=y0.HOVERARROWSIZE,di=y0.HOVERTEXTPAD,Vq={box:!0,ohlc:!0,violin:!0,candlestick:!0},D3e={scatter:!0,scattergl:!0,splom:!0};yw.hover=t(function(r,n,i,s){r=gs.getGraphDiv(r);var o=n.target;gs.throttle(r._fullLayout._uid+y0.HOVERID,y0.HOVERMINTIME,function(){I3e(r,n,i,s,o)})},"hover");yw.loneHover=t(function(r,n){var i=!0;Array.isArray(r)||(i=!1,r=[r]);var s=n.gd,o=vle(s),a=dle(s),l=r.map(function(p){var b=p._x0||p.x0||p.x||0,m=p._x1||p.x1||p.x||0,y=p._y0||p.y0||p.y||0,T=p._y1||p.y1||p.y||0,_=p.eventData;if(_){var M=Math.min(b,m),w=Math.max(b,m),x=Math.min(y,T),A=Math.max(y,T),S=p.trace;if(ay.traceIs(S,"gl3d")){var k=s._fullLayout[S.scene]._scene.container,L=k.offsetLeft,P=k.offsetTop;M+=L,w+=L,x+=P,A+=P}_.bbox={x0:M+a,x1:w+a,y0:x+o,y1:A+o},n.inOut_bbox&&n.inOut_bbox.push(_.bbox)}else _=!1;return{color:p.color||Js.defaultLine,x0:p.x0||p.x||0,x1:p.x1||p.x||0,y0:p.y0||p.y||0,y1:p.y1||p.y||0,xLabel:p.xLabel,yLabel:p.yLabel,zLabel:p.zLabel,text:p.text,name:p.name,idealAlign:p.idealAlign,borderColor:p.borderColor,fontFamily:p.fontFamily,fontSize:p.fontSize,fontColor:p.fontColor,nameLength:p.nameLength,textAlign:p.textAlign,trace:p.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:p.hovertemplate||!1,hovertemplateLabels:p.hovertemplateLabels||!1,eventData:_}}),u=!1,f=cle(l,{gd:s,hovermode:"closest",rotateLabels:u,bgColor:n.bgColor||Js.background,container:o0.select(n.container),outerContainer:n.outerContainer||n.container}),h=5,v=0,c=0;f.sort(function(p,b){return p.y0-b.y0}).each(function(p,b){var m=p.y0-p.by/2;m-h<v?p.offset=v-m+h:p.offset=0,v=m+p.by+p.offset,b===n.anchorIndex&&(c=p.offset)}).each(function(p){p.offset-=c});var d=s._fullLayout._invScaleX,g=s._fullLayout._invScaleY;return hle(f,u,d,g),i?f:f.node()},"loneHover");function I3e(e,r,n,i,s){n||(n="xy");var o=Array.isArray(n)?n:[n],a=e._fullLayout,l=a._plots||[],u=l[n],f=a._has("cartesian");if(u){var h=u.overlays.map(function(_t){return _t.id});o=o.concat(h)}for(var v=o.length,c=new Array(v),d=new Array(v),g=!1,p=0;p<v;p++){var b=o[p];if(l[b])g=!0,c[p]=l[b].xaxis,d[p]=l[b].yaxis;else if(a[b]&&a[b]._subplot){var m=a[b]._subplot;c[p]=m.xaxis,d[p]=m.yaxis}else{gs.warn("Unrecognized subplot: "+b);return}}var y=r.hovermode||a.hovermode;if(y&&!g&&(y="closest"),["x","y","closest","x unified","y unified"].indexOf(y)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return cb.unhoverRaw(e,r);var T=a.hoverdistance;T===-1&&(T=1/0);var _=a.spikedistance;_===-1&&(_=1/0);var M=[],w=[],x,A,S,k,L,P,D,B,z,R,F,O,q,H={hLinePoint:null,vLinePoint:null},j=!1;if(Array.isArray(r))for(y="array",S=0;S<r.length;S++)L=e.calcdata[r[S].curveNumber||0],L&&(P=L[0].trace,L[0].trace.hoverinfo!=="skip"&&(w.push(L),P.orientation==="h"&&(j=!0)));else{for(k=0;k<e.calcdata.length;k++)L=e.calcdata[k],P=L[0].trace,P.hoverinfo!=="skip"&&yh.isTraceInSubplots(P,o)&&(w.push(L),P.orientation==="h"&&(j=!0));var X=!s,G,$;if(X)"xpx"in r?G=r.xpx:G=c[0]._length/2,"ypx"in r?$=r.ypx:$=d[0]._length/2;else{if(M3e.triggerHandler(e,"plotly_beforehover",r)===!1)return;var te=s.getBoundingClientRect();G=r.clientX-te.left,$=r.clientY-te.top,a._calcInverseTransform(e);var ee=gs.apply3DTransform(a._invTransform)(G,$);if(G=ee[0],$=ee[1],G<0||G>c[0]._length||$<0||$>d[0]._length)return cb.unhoverRaw(e,r)}if(r.pointerX=G+c[0]._offset,r.pointerY=$+d[0]._offset,"xval"in r?x=yh.flat(o,r.xval):x=yh.p2c(c,G),"yval"in r?A=yh.flat(o,r.yval):A=yh.p2c(d,$),!ad(x[0])||!ad(A[0]))return gs.warn("Fx.hover failed",r,e),cb.unhoverRaw(e,r)}var ie=1/0;function se(_t,Rt){for(k=0;k<w.length;k++)if(L=w[k],!(!L||!L[0]||!L[0].trace)&&(P=L[0].trace,!(P.visible!==!0||P._length===0)&&["carpet","contourcarpet"].indexOf(P._module.name)===-1)){if(P.type==="splom"?(B=0,D=o[B]):(D=yh.getSubplot(P),B=o.indexOf(D)),z=y,yh.isUnifiedHover(z)&&(z=z.charAt(0)),O={cd:L,trace:P,xa:c[B],ya:d[B],maxHoverDistance:T,maxSpikeDistance:_,index:!1,distance:Math.min(ie,T),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:Js.defaultLine,name:P.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},a[D]&&(O.subplot=a[D]._subplot),a._splomScenes&&a._splomScenes[P.uid]&&(O.scene=a._splomScenes[P.uid]),q=M.length,z==="array"){var nr=r[k];"pointNumber"in nr?(O.index=nr.pointNumber,z="closest"):(z="","xval"in nr&&(R=nr.xval,z="x"),"yval"in nr&&(F=nr.yval,z=z?"closest":"y"))}else _t!==void 0&&Rt!==void 0?(R=_t,F=Rt):(R=x[B],F=A[B]);if(T!==0)if(P._module&&P._module.hoverPoints){var ir=P._module.hoverPoints(O,R,F,z,{finiteRange:!0,hoverLayer:a._hoverlayer});if(ir)for(var ur,qt=0;qt<ir.length;qt++)ur=ir[qt],ad(ur.x0)&&ad(ur.y0)&&M.push(B3e(ur,y))}else gs.log("Unrecognized trace type in hover:",P);if(y==="closest"&&M.length>q&&(M.splice(0,q),ie=M[0].distance),f&&_!==0&&M.length===0){O.distance=_,O.index=!1;var hr=P._module.hoverPoints(O,R,F,"closest",{hoverLayer:a._hoverlayer});if(hr&&(hr=hr.filter(function(Er){return Er.spikeDistance<=_})),hr&&hr.length){var Fr,Br=hr.filter(function(Er){return Er.xa.showspikes&&Er.xa.spikesnap!=="hovered data"});if(Br.length){var na=Br[0];ad(na.x0)&&ad(na.y0)&&(Fr=ne(na),(!H.vLinePoint||H.vLinePoint.spikeDistance>Fr.spikeDistance)&&(H.vLinePoint=Fr))}var Ia=hr.filter(function(Er){return Er.ya.showspikes&&Er.ya.spikesnap!=="hovered data"});if(Ia.length){var ea=Ia[0];ad(ea.x0)&&ad(ea.y0)&&(Fr=ne(ea),(!H.hLinePoint||H.hLinePoint.spikeDistance>Fr.spikeDistance)&&(H.hLinePoint=Fr))}}}}}t(se,"findHoverPoints"),se();function W(_t,Rt,nr){for(var ir=null,ur=1/0,qt,hr=0;hr<_t.length;hr++)qt=_t[hr].spikeDistance,nr&&hr===0&&(qt=-1/0),qt<=ur&&qt<=Rt&&(ir=_t[hr],ur=qt);return ir}t(W,"selectClosestPoint");function ne(_t){return _t?{xa:_t.xa,ya:_t.ya,x:_t.xSpike!==void 0?_t.xSpike:(_t.x0+_t.x1)/2,y:_t.ySpike!==void 0?_t.ySpike:(_t.y0+_t.y1)/2,distance:_t.distance,spikeDistance:_t.spikeDistance,curveNumber:_t.trace.index,color:_t.color,pointNumber:_t.index}:null}t(ne,"fillSpikePoint");var he={fullLayout:a,container:a._hoverlayer,event:r},re=e._spikepoints,ae={vLinePoint:H.vLinePoint,hLinePoint:H.hLinePoint};e._spikepoints=ae;var fe=t(function(){M.sort(function(_t,Rt){return _t.distance-Rt.distance}),M=N3e(M,y)},"sortHoverData");fe();var ce=y.charAt(0),xe=(ce==="x"||ce==="y")&&M[0]&&D3e[M[0].trace.type];if(f&&_!==0&&M.length!==0){var Te=M.filter(function(_t){return _t.ya.showspikes}),me=W(Te,_,xe);H.hLinePoint=ne(me);var pe=M.filter(function(_t){return _t.xa.showspikes}),oe=W(pe,_,xe);H.vLinePoint=ne(oe)}if(M.length===0){var de=cb.unhoverRaw(e,r);return f&&(H.hLinePoint!==null||H.vLinePoint!==null)&&Yq(re)&&jq(e,H,he),de}if(f&&Yq(re)&&jq(e,H,he),yh.isXYhover(z)&&M[0].length!==0&&M[0].trace.type!=="splom"){var ye=M[0];Vq[ye.trace.type]?M=M.filter(function(_t){return _t.trace.index===ye.trace.index}):M=[ye];var we=M.length,Ee=Xq("x",ye,a),De=Xq("y",ye,a);se(Ee,De);var Fe=[],qe={},Je=0,Ge=t(function(_t){var Rt=Vq[_t.trace.type]?fle(_t):_t.trace.index;if(!qe[Rt])Je++,qe[Rt]=Je,Fe.push(_t);else{var nr=qe[Rt]-1,ir=Fe[nr];nr>0&&Math.abs(_t.distance)<Math.abs(ir.distance)&&(Fe[nr]=_t)}},"insert"),et;for(et=0;et<we;et++)Ge(M[et]);for(et=M.length-1;et>we-1;et--)Ge(M[et]);M=Fe,fe()}var Ue=e._hoverdata,Ye=[],$e=vle(e),Ct=dle(e);for(S=0;S<M.length;S++){var It=M[S],Vt=yh.makeEventData(It,It.trace,It.cd);if(It.hovertemplate!==!1){var $t=!1;It.cd[It.index]&&It.cd[It.index].ht&&($t=It.cd[It.index].ht),It.hovertemplate=$t||It.trace.hovertemplate||!1}if(It.xa&&It.ya){var Gt=It.x0+It.xa._offset,Jt=It.x1+It.xa._offset,kt=It.y0+It.ya._offset,ft=It.y1+It.ya._offset,zt=Math.min(Gt,Jt),Pt=Math.max(Gt,Jt),Et=Math.min(kt,ft),Wt=Math.max(kt,ft);Vt.bbox={x0:zt+Ct,x1:Pt+Ct,y0:Et+$e,y1:Wt+$e}}It.eventData=[Vt],Ye.push(Vt)}e._hoverdata=Ye;var ze=y==="y"&&(w.length>1||M.length>1)||y==="closest"&&j&&M.length>1,tt=Js.combine(a.plot_bgcolor||Js.background,a.paper_bgcolor),at=cle(M,{gd:e,hovermode:y,rotateLabels:ze,bgColor:tt,container:a._hoverlayer,outerContainer:a._paper.node(),commonLabelOpts:a.hoverlabel,hoverdistance:a.hoverdistance});if(yh.isUnifiedHover(y)||(F3e(at,ze?"xa":"ya",a),hle(at,ze,a._invScaleX,a._invScaleY)),s&&s.tagName){var vt=ay.getComponentMethod("annotations","hasClickToShow")(e,Ye);k3e(o0.select(s),vt?"pointer":"")}!s||i||!O3e(e,r,Ue)||(Ue&&e.emit("plotly_unhover",{event:r,points:Ue}),e.emit("plotly_hover",{event:r,points:e._hoverdata,xaxes:c,yaxes:d,xvals:x,yvals:A}))}t(I3e,"_hover");function fle(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}t(fle,"hoverDataKey");var z3e=/<extra>([\s\S]*)<\/extra>/;function cle(e,r){var n=r.gd,i=n._fullLayout,s=r.hovermode,o=r.rotateLabels,a=r.bgColor,l=r.container,u=r.outerContainer,f=r.commonLabelOpts||{};if(e.length===0)return[[]];var h=r.fontFamily||y0.HOVERFONT,v=r.fontSize||y0.HOVERFONTSIZE,c=e[0],d=c.xa,g=c.ya,p=s.charAt(0),b=c[p+"Label"],m=gg(n,u),y=m.top,T=m.width,_=m.height,M=b!==void 0&&c.distance<=r.hoverdistance&&(s==="x"||s==="y");if(M){var w=!0,x,A;for(x=0;x<e.length;x++)if(w&&e[x].zLabel===void 0&&(w=!1),A=e[x].hoverinfo||e[x].trace.hoverinfo,A){var S=Array.isArray(A)?A:A.split("+");if(S.indexOf("all")===-1&&S.indexOf(s)===-1){M=!1;break}}w&&(M=!1)}var k=l.selectAll("g.axistext").data(M?[0]:[]);if(k.enter().append("g").classed("axistext",!0),k.exit().remove(),k.each(function(){var oe=o0.select(this),de=gs.ensureSingle(oe,"path","",function(ft){ft.style({"stroke-width":"1px"})}),ye=gs.ensureSingle(oe,"text","",function(ft){ft.attr("data-notex",1)}),we=f.bgcolor||Js.defaultLine,Ee=f.bordercolor||Js.contrast(we),De=Js.contrast(we),Fe={family:f.font.family||h,size:f.font.size||v,color:f.font.color||De};de.style({fill:we,stroke:Ee}),ye.text(b).call(ev.font,Fe).call(Pc.positionText,0,0).call(Pc.convertToTspans,n),oe.attr("transform","");var qe=gg(n,ye.node()),Je,Ge;if(s==="x"){var et=d.side==="top"?"-":"";ye.attr("text-anchor","middle").call(Pc.positionText,0,d.side==="top"?y-qe.bottom-So-di:y-qe.top+So+di),Je=d._offset+(c.x0+c.x1)/2,Ge=g._offset+(d.side==="top"?0:g._length);var Ue=qe.width/2+di;Je<Ue?(Je=Ue,de.attr("d","M-"+(Ue-So)+",0L-"+(Ue-So*2)+","+et+So+"H"+(di+qe.width/2)+"v"+et+(di*2+qe.height)+"H-"+Ue+"V"+et+So+"Z")):Je>i.width-Ue?(Je=i.width-Ue,de.attr("d","M"+(Ue-So)+",0L"+Ue+","+et+So+"v"+et+(di*2+qe.height)+"H-"+Ue+"V"+et+So+"H"+(Ue-So*2)+"Z")):de.attr("d","M0,0L"+So+","+et+So+"H"+(di+qe.width/2)+"v"+et+(di*2+qe.height)+"H-"+(di+qe.width/2)+"V"+et+So+"H-"+So+"Z")}else{var Ye,$e,Ct;g.side==="right"?(Ye="start",$e=1,Ct="",Je=d._offset+d._length):(Ye="end",$e=-1,Ct="-",Je=d._offset),Ge=g._offset+(c.y0+c.y1)/2,ye.attr("text-anchor",Ye),de.attr("d","M0,0L"+Ct+So+","+So+"V"+(di+qe.height/2)+"h"+Ct+(di*2+qe.width)+"V-"+(di+qe.height/2)+"H"+Ct+So+"V-"+So+"Z");var It=qe.height/2,Vt=y-qe.top-It,$t="clip"+i._uid+"commonlabel"+g._id,Gt;if(Je<qe.width+2*di+So){Gt="M-"+(So+di)+"-"+It+"h-"+(qe.width-di)+"V"+It+"h"+(qe.width-di)+"Z";var Jt=qe.width-Je+di;Pc.positionText(ye,Jt,Vt),Ye==="end"&&ye.selectAll("tspan").each(function(){var ft=o0.select(this),zt=ev.tester.append("text").text(ft.text()).call(ev.font,Fe),Pt=gg(n,zt.node());Math.round(Pt.width)<Math.round(qe.width)&&ft.attr("x",Jt-Pt.width),zt.remove()})}else Pc.positionText(ye,$e*(di+So),Vt),Gt=null;var kt=i._topclips.selectAll("#"+$t).data(Gt?[0]:[]);kt.enter().append("clipPath").attr("id",$t).append("path"),kt.exit().remove(),kt.select("path").attr("d",Gt),ev.setClipUrl(ye,Gt?$t:null,n)}oe.attr("transform",WT(Je,Ge))}),yh.isUnifiedHover(s)){l.selectAll("g.hovertext").remove();var L=e.filter(function(oe){return oe.hoverinfo!=="none"});if(L.length===0)return;var P=i.hoverlabel,D=P.font,B={showlegend:!0,legend:{title:{text:b,font:D},font:D,bgcolor:P.bgcolor,bordercolor:P.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},z={font:D};E3e(B,z,n._fullData);var R=z.legend;R.entries=[];for(var F=0;F<L.length;F++){var O=L[F];if(O.hoverinfo!=="none"){var q=Gq(O,!0,s,i,b),H=q[0],j=q[1];O.name=j,j!==""?O.text=j+" : "+H:O.text=H;var X=O.cd[O.index];X&&(X.mc&&(O.mc=X.mc),X.mcc&&(O.mc=X.mcc),X.mlc&&(O.mlc=X.mlc),X.mlcc&&(O.mlc=X.mlcc),X.mlw&&(O.mlw=X.mlw),X.mrc&&(O.mrc=X.mrc),X.dir&&(O.dir=X.dir)),O._distinct=!0,R.entries.push([O])}}R.entries.sort(function(oe,de){return oe[0].trace.index-de[0].trace.index}),R.layer=l,R._inHover=!0,R._groupTitleFont=P.grouptitlefont,C3e(n,R);var G=l.select("g.legend"),$=gg(n,G.node()),te=$.width+2*di,ee=$.height+2*di,ie=L[0],se=(ie.x0+ie.x1)/2,W=(ie.y0+ie.y1)/2,ne=!(ay.traceIs(ie.trace,"bar-like")||ay.traceIs(ie.trace,"box-violin")),he,re;p==="y"?ne?(re=W-di,he=W+di):(re=Math.min.apply(null,L.map(function(oe){return Math.min(oe.y0,oe.y1)})),he=Math.max.apply(null,L.map(function(oe){return Math.max(oe.y0,oe.y1)}))):re=he=gs.mean(L.map(function(oe){return(oe.y0+oe.y1)/2}))-ee/2;var ae,fe;p==="x"?ne?(ae=se+di,fe=se-di):(ae=Math.max.apply(null,L.map(function(oe){return Math.max(oe.x0,oe.x1)})),fe=Math.min.apply(null,L.map(function(oe){return Math.min(oe.x0,oe.x1)}))):ae=fe=gs.mean(L.map(function(oe){return(oe.x0+oe.x1)/2}))-te/2;var ce=d._offset,xe=g._offset;he+=xe,ae+=ce,fe+=ce-te,re+=xe-ee;var Te,me;return ae+te<T&&ae>=0?Te=ae:fe+te<T&&fe>=0?Te=fe:ce+te<T?Te=ce:ae-se<se-fe+te?Te=T-te:Te=0,Te+=di,he+ee<_&&he>=0?me=he:re+ee<_&&re>=0?me=re:xe+ee<_?me=xe:he-W<W-re+ee?me=_-ee:me=0,me+=di,G.attr("transform",WT(Te-1,me-1)),G}var pe=l.selectAll("g.hovertext").data(e,function(oe){return fle(oe)});return pe.enter().append("g").classed("hovertext",!0).each(function(){var oe=o0.select(this);oe.append("rect").call(Js.fill,Js.addOpacity(a,.8)),oe.append("text").classed("name",!0),oe.append("path").style("stroke-width","1px"),oe.append("text").classed("nums",!0).call(ev.font,h,v)}),pe.exit().remove(),pe.each(function(oe){var de=o0.select(this).attr("transform",""),ye=oe.color;Array.isArray(ye)&&(ye=ye[oe.eventData[0].pointNumber]);var we=oe.bgcolor||ye,Ee=Js.combine(Js.opacity(we)?we:Js.defaultLine,a),De=Js.combine(Js.opacity(ye)?ye:Js.defaultLine,a),Fe=oe.borderColor||Js.contrast(Ee),qe=Gq(oe,M,s,i,b,de),Je=qe[0],Ge=qe[1],et=de.select("text.nums").call(ev.font,oe.fontFamily||h,oe.fontSize||v,oe.fontColor||Fe).text(Je).attr("data-notex",1).call(Pc.positionText,0,0).call(Pc.convertToTspans,n),Ue=de.select("text.name"),Ye=0,$e=0;if(Ge&&Ge!==Je){Ue.call(ev.font,oe.fontFamily||h,oe.fontSize||v,De).text(Ge).attr("data-notex",1).call(Pc.positionText,0,0).call(Pc.convertToTspans,n);var Ct=gg(n,Ue.node());Ye=Ct.width+2*di,$e=Ct.height+2*di}else Ue.remove(),de.select("rect").remove();de.select("path").style({fill:Ee,stroke:Fe});var It=oe.xa._offset+(oe.x0+oe.x1)/2,Vt=oe.ya._offset+(oe.y0+oe.y1)/2,$t=Math.abs(oe.x1-oe.x0),Gt=Math.abs(oe.y1-oe.y0),Jt=gg(n,et.node()),kt=Jt.width/i._invScaleX,ft=Jt.height/i._invScaleY;oe.ty0=(y-Jt.top)/i._invScaleY,oe.bx=kt+2*di,oe.by=Math.max(ft+2*di,$e),oe.anchor="start",oe.txwidth=kt,oe.tx2width=Ye,oe.offset=0;var zt=(kt+So+di+Ye)*i._invScaleX,Pt,Et;if(o)oe.pos=It,Pt=Vt+Gt/2+zt<=_,Et=Vt-Gt/2-zt>=0,(oe.idealAlign==="top"||!Pt)&&Et?(Vt-=Gt/2,oe.anchor="end"):Pt?(Vt+=Gt/2,oe.anchor="start"):oe.anchor="middle";else if(oe.pos=Vt,Pt=It+$t/2+zt<=T,Et=It-$t/2-zt>=0,(oe.idealAlign==="left"||!Pt)&&Et)It-=$t/2,oe.anchor="end";else if(Pt)It+=$t/2,oe.anchor="start";else{oe.anchor="middle";var Wt=zt/2,ze=It+Wt-T,tt=It-Wt;ze>0&&(It-=ze),tt<0&&(It+=-tt)}et.attr("text-anchor",oe.anchor),Ye&&Ue.attr("text-anchor",oe.anchor),de.attr("transform",WT(It,Vt)+(o?S3e(ule):""))}),pe}t(cle,"createHoverText");function Gq(e,r,n,i,s,o){var a="",l="";e.nameOverride!==void 0&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=gs.templateString(e.name,e.trace._meta)),a=Wq(e.name,e.nameLength));var u=n.charAt(0),f=u==="x"?"y":"x";e.zLabel!==void 0?(e.xLabel!==void 0&&(l+="x: "+e.xLabel+"<br>"),e.yLabel!==void 0&&(l+="y: "+e.yLabel+"<br>"),e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"&&(l+=(l?"z: ":"")+e.zLabel)):r&&e[u+"Label"]===s?l=e[f+"Label"]||"":e.xLabel===void 0?e.yLabel!==void 0&&e.trace.type!=="scattercarpet"&&(l=e.yLabel):e.yLabel===void 0?l=e.xLabel:l="("+e.xLabel+", "+e.yLabel+")",(e.text||e.text===0)&&!Array.isArray(e.text)&&(l+=(l?"<br>":"")+e.text),e.extraText!==void 0&&(l+=(l?"<br>":"")+e.extraText),o&&l===""&&!e.hovertemplate&&(a===""&&o.remove(),l=a);var h=e.hovertemplate||!1;if(h){var v=e.hovertemplateLabels||e;e[u+"Label"]!==s&&(v[u+"other"]=v[u+"Val"],v[u+"otherLabel"]=v[u+"Label"]),l=gs.hovertemplateString(h,v,i._d3locale,e.eventData[0]||{},e.trace._meta),l=l.replace(z3e,function(c,d){return a=Wq(d,e.nameLength),""})}return[l,a]}t(Gq,"getHoverLabelText");function F3e(e,r,n){var i=0,s=1,o=e.size(),a=new Array(o),l=0;e.each(function(x){var A=x[r],S=A._id.charAt(0)==="x",k=A.range;l===0&&k&&k[0]>k[1]!==S&&(s=-1),a[l++]=[{datum:x,traceIndex:x.trace.index,dp:0,pos:x.pos,posref:x.posref,size:x.by*(S?L3e:1)/2,pmin:0,pmax:S?n.width:n.height}]}),a.sort(function(x,A){return x[0].posref-A[0].posref||s*(A[0].traceIndex-x[0].traceIndex)});var u,f,h,v,c,d,g;function p(x){var A=x[0],S=x[x.length-1];if(f=A.pmin-A.pos-A.dp+A.size,h=S.pos+S.dp+S.size-A.pmax,f>.01){for(c=x.length-1;c>=0;c--)x[c].dp+=f;u=!1}if(!(h<.01)){if(f<-.01){for(c=x.length-1;c>=0;c--)x[c].dp-=h;u=!1}if(!!u){var k=0;for(v=0;v<x.length;v++)d=x[v],d.pos+d.dp+d.size>A.pmax&&k++;for(v=x.length-1;v>=0&&!(k<=0);v--)d=x[v],d.pos>A.pmax-1&&(d.del=!0,k--);for(v=0;v<x.length&&!(k<=0);v++)if(d=x[v],d.pos<A.pmin+1)for(d.del=!0,k--,h=d.size*2,c=x.length-1;c>=0;c--)x[c].dp-=h;for(v=x.length-1;v>=0&&!(k<=0);v--)d=x[v],d.pos+d.dp+d.size>A.pmax&&(d.del=!0,k--)}}}for(t(p,"constrainGroup");!u&&i<=o;){for(i++,u=!0,v=0;v<a.length-1;){var b=a[v],m=a[v+1],y=b[b.length-1],T=m[0];if(f=y.pos+y.dp+y.size-T.pos-T.dp+T.size,f>.01&&y.pmin===T.pmin&&y.pmax===T.pmax){for(c=m.length-1;c>=0;c--)m[c].dp+=f;for(b.push.apply(b,m),a.splice(v+1,1),g=0,c=b.length-1;c>=0;c--)g+=b[c].dp;for(h=g/b.length,c=b.length-1;c>=0;c--)b[c].dp-=h;u=!1}else v++}a.forEach(p)}for(v=a.length-1;v>=0;v--){var _=a[v];for(c=_.length-1;c>=0;c--){var M=_[c],w=M.datum;w.offset=M.dp,w.del=M.del}}}t(F3e,"hoverAvoidOverlaps");function hle(e,r,n,i){var s=t(function(a){return a*n},"pX"),o=t(function(a){return a*i},"pY");e.each(function(a){var l=o0.select(this);if(a.del)return l.remove();var u=l.select("text.nums"),f=a.anchor,h=f==="end"?-1:1,v={start:1,end:-1,middle:0}[f],c=v*(So+di),d=c+v*(a.txwidth+di),g=0,p=a.offset,b=f==="middle";b&&(c-=a.tx2width/2,d+=a.txwidth/2+di),r&&(p*=-P3e,g=a.offset*R3e),l.select("path").attr("d",b?"M-"+s(a.bx/2+a.tx2width/2)+","+o(p-a.by/2)+"h"+s(a.bx)+"v"+o(a.by)+"h-"+s(a.bx)+"Z":"M0,0L"+s(h*So+g)+","+o(So+p)+"v"+o(a.by/2-So)+"h"+s(h*a.bx)+"v-"+o(a.by)+"H"+s(h*So+g)+"V"+o(p-So)+"Z");var m=g+c,y=p+a.ty0-a.by/2+di,T=a.textAlign||"auto";T!=="auto"&&(T==="left"&&f!=="start"?(u.attr("text-anchor","start"),m=b?-a.bx/2-a.tx2width/2+di:-a.bx-di):T==="right"&&f!=="end"&&(u.attr("text-anchor","end"),m=b?a.bx/2-a.tx2width/2-di:a.bx+di)),u.call(Pc.positionText,s(m),o(y)),a.tx2width&&(l.select("text.name").call(Pc.positionText,s(d+v*di+g),o(p+a.ty0-a.by/2+di)),l.select("rect").call(ev.setRect,s(d+(v-1)*a.tx2width/2+g),o(p-a.by/2-1),s(a.tx2width),o(a.by+2)))})}t(hle,"alignHoverText");function B3e(e,r){var n=e.index,i=e.trace||{},s=e.cd[0],o=e.cd[n]||{};function a(c){return c||ad(c)&&c===0}t(a,"pass");var l=Array.isArray(n)?function(c,d){var g=gs.castOption(s,n,c);return a(g)?g:gs.extractOption({},i,"",d)}:function(c,d){return gs.extractOption(o,i,c,d)};function u(c,d,g){var p=l(d,g);a(p)&&(e[c]=p)}if(t(u,"fill"),u("hoverinfo","hi","hoverinfo"),u("bgcolor","hbg","hoverlabel.bgcolor"),u("borderColor","hbc","hoverlabel.bordercolor"),u("fontFamily","htf","hoverlabel.font.family"),u("fontSize","hts","hoverlabel.font.size"),u("fontColor","htc","hoverlabel.font.color"),u("nameLength","hnl","hoverlabel.namelength"),u("textAlign","hta","hoverlabel.align"),e.posref=r==="y"||r==="closest"&&i.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=gs.constrain(e.x0,0,e.xa._length),e.x1=gs.constrain(e.x1,0,e.xa._length),e.y0=gs.constrain(e.y0,0,e.ya._length),e.y1=gs.constrain(e.y1,0,e.ya._length),e.xLabelVal!==void 0&&(e.xLabel="xLabel"in e?e.xLabel:Kd.hoverLabelText(e.xa,e.xLabelVal,i.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),e.yLabelVal!==void 0&&(e.yLabel="yLabel"in e?e.yLabel:Kd.hoverLabelText(e.ya,e.yLabelVal,i.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),e.zLabelVal!==void 0&&e.zLabel===void 0&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var f=Kd.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==void 0?e.xLabel+=" +"+f+" / -"+Kd.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xB1 "+f,r==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var h=Kd.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==void 0?e.yLabel+=" +"+h+" / -"+Kd.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xB1 "+h,r==="y"&&(e.distance+=1)}var v=e.hoverinfo||e.trace.hoverinfo;return v&&v!=="all"&&(v=Array.isArray(v)?v:v.split("+"),v.indexOf("x")===-1&&(e.xLabel=void 0),v.indexOf("y")===-1&&(e.yLabel=void 0),v.indexOf("z")===-1&&(e.zLabel=void 0),v.indexOf("text")===-1&&(e.text=void 0),v.indexOf("name")===-1&&(e.name=void 0)),e}t(B3e,"cleanPoint");function jq(e,r,n){var i=n.container,s=n.fullLayout,o=s._size,a=n.event,l=!!r.hLinePoint,u=!!r.vLinePoint,f,h;if(i.selectAll(".spikeline").remove(),!!(u||l)){var v=Js.combine(s.plot_bgcolor,s.paper_bgcolor);if(l){var c=r.hLinePoint,d,g;f=c&&c.xa,h=c&&c.ya;var p=h.spikesnap;p==="cursor"?(d=a.pointerX,g=a.pointerY):(d=f._offset+c.x,g=h._offset+c.y);var b=$q.readability(c.color,v)<1.5?Js.contrast(v):c.color,m=h.spikemode,y=h.spikethickness,T=h.spikecolor||b,_=Kd.getPxPosition(e,h),M,w;if(m.indexOf("toaxis")!==-1||m.indexOf("across")!==-1){if(m.indexOf("toaxis")!==-1&&(M=_,w=d),m.indexOf("across")!==-1){var x=h._counterDomainMin,A=h._counterDomainMax;h.anchor==="free"&&(x=Math.min(x,h.position),A=Math.max(A,h.position)),M=o.l+x*o.w,w=o.l+A*o.w}i.insert("line",":first-child").attr({x1:M,x2:w,y1:g,y2:g,"stroke-width":y,stroke:T,"stroke-dasharray":ev.dashStyle(h.spikedash,y)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:M,x2:w,y1:g,y2:g,"stroke-width":y+2,stroke:v}).classed("spikeline",!0).classed("crisp",!0)}m.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:_+(h.side!=="right"?y:-y),cy:g,r:y,fill:T}).classed("spikeline",!0)}if(u){var S=r.vLinePoint,k,L;f=S&&S.xa,h=S&&S.ya;var P=f.spikesnap;P==="cursor"?(k=a.pointerX,L=a.pointerY):(k=f._offset+S.x,L=h._offset+S.y);var D=$q.readability(S.color,v)<1.5?Js.contrast(v):S.color,B=f.spikemode,z=f.spikethickness,R=f.spikecolor||D,F=Kd.getPxPosition(e,f),O,q;if(B.indexOf("toaxis")!==-1||B.indexOf("across")!==-1){if(B.indexOf("toaxis")!==-1&&(O=F,q=L),B.indexOf("across")!==-1){var H=f._counterDomainMin,j=f._counterDomainMax;f.anchor==="free"&&(H=Math.min(H,f.position),j=Math.max(j,f.position)),O=o.t+(1-j)*o.h,q=o.t+(1-H)*o.h}i.insert("line",":first-child").attr({x1:k,x2:k,y1:O,y2:q,"stroke-width":z,stroke:R,"stroke-dasharray":ev.dashStyle(f.spikedash,z)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:k,x2:k,y1:O,y2:q,"stroke-width":z+2,stroke:v}).classed("spikeline",!0).classed("crisp",!0)}B.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:k,cy:F-(f.side!=="top"?z:-z),r:z,fill:R}).classed("spikeline",!0)}}}t(jq,"createSpikelines");function O3e(e,r,n){if(!n||n.length!==e._hoverdata.length)return!0;for(var i=n.length-1;i>=0;i--){var s=n[i],o=e._hoverdata[i];if(s.curveNumber!==o.curveNumber||String(s.pointNumber)!==String(o.pointNumber)||String(s.pointNumbers)!==String(o.pointNumbers))return!0}return!1}t(O3e,"hoverChanged");function Yq(e,r){return!r||r.vLinePoint!==e._spikepoints.vLinePoint||r.hLinePoint!==e._spikepoints.hLinePoint}t(Yq,"spikesChanged");function Wq(e,r){return Pc.plainText(e||"",{len:r,allowedTags:["br","sub","sup","b","i","em"]})}t(Wq,"plainText");function N3e(e,r){for(var n=r.charAt(0),i=[],s=[],o=[],a=0;a<e.length;a++){var l=e[a];ay.traceIs(l.trace,"bar-like")||ay.traceIs(l.trace,"box-violin")?o.push(l):l.trace[n+"period"]?s.push(l):i.push(l)}return i.concat(s).concat(o)}t(N3e,"orderRangePoints");function Xq(e,r,n){var i=r[e+"a"],s=r[e+"Val"],o=r.cd[0];if(i.type==="category")s=i._categoriesMap[s];else if(i.type==="date"){var a=r.trace[e+"periodalignment"];if(a){var l=r.cd[r.index],u=l[e+"Start"];u===void 0&&(u=l[e]);var f=l[e+"End"];f===void 0&&(f=l[e]);var h=f-u;a==="end"?s+=h:a==="middle"&&(s+=h/2)}s=i.d2c(s)}return o&&o.t&&o.t.posLetter===i._id&&(n.boxmode==="group"||n.violinmode==="group")&&(s+=o.t.dPos),s}t(Xq,"getCoord");function vle(e){return e.offsetTop+e.clientTop}t(vle,"getTopOffset");function dle(e){return e.offsetLeft+e.clientLeft}t(dle,"getLeftOffset");function gg(e,r){var n=e._fullLayout,i=r.getBoundingClientRect(),s=i.x,o=i.y,a=s+i.width,l=o+i.height,u=gs.apply3DTransform(n._invTransform)(s,o),f=gs.apply3DTransform(n._invTransform)(a,l),h=u[0],v=u[1],c=f[0],d=f[1];return{x:h,y:v,width:c-h,height:d-v,top:Math.min(v,d),left:Math.min(h,c),right:Math.max(h,c),bottom:Math.max(v,d)}}t(gg,"getBoundingClientRect");var q3e=Nt.exports,U3e=$a.exports,H3e=Rf.isUnifiedHover,mw=t(function(r,n,i,s){s=s||{};var o=n.legend;function a(l){s.font[l]||(s.font[l]=o?n.legend.font[l]:n.font[l])}t(a,"inheritFontAttr"),n&&H3e(n.hovermode)&&(s.font||(s.font={}),a("size"),a("family"),a("color"),o?(s.bgcolor||(s.bgcolor=U3e.combine(n.legend.bgcolor,n.paper_bgcolor)),s.bordercolor||(s.bordercolor=n.legend.bordercolor)):s.bgcolor||(s.bgcolor=n.paper_bgcolor)),i("hoverlabel.bgcolor",s.bgcolor),i("hoverlabel.bordercolor",s.bordercolor),i("hoverlabel.namelength",s.namelength),q3e.coerceFont(i,"hoverlabel.font",s.font),i("hoverlabel.align",s.align)},"handleHoverLabelDefaults"),$3e=Nt.exports,V3e=mw,G3e=fp,j3e=t(function(r,n){function i(s,o){return $3e.coerce(r,n,G3e,s,o)}t(i,"coerce"),V3e(r,n,i)},"supplyLayoutGlobalDefaults"),Zq=Nt.exports,Y3e=X1,W3e=mw,X3e=t(function(r,n,i,s){function o(l,u){return Zq.coerce(r,n,Y3e,l,u)}t(o,"coerce");var a=Zq.extendFlat({},s.hoverlabel);n.hovertemplate&&(a.namelength=-1),W3e(r,n,o,a)},"supplyDefaults"),Z3e=Nt.exports,K3e=fp,ple=t(function(r,n){function i(s,o){return n[s]!==void 0?n[s]:Z3e.coerce(r,n,K3e,s,o)}return t(i,"coerce"),i("clickmode"),i("hovermode")},"handleHoverModeDefaults"),Kq=Nt.exports,J3e=fp,Q3e=ple,eTe=mw,tTe=t(function(r,n){function i(f,h){return Kq.coerce(r,n,J3e,f,h)}t(i,"coerce");var s=Q3e(r,n);s&&(i("hoverdistance"),i("spikedistance"));var o=i("dragmode");o==="select"&&i("selectdirection");var a=n._has("mapbox"),l=n._has("geo"),u=n._basePlotModules.length;n.dragmode==="zoom"&&((a||l)&&u===1||a&&l&&u===2)&&(n.dragmode="pan"),eTe(r,n,i),Kq.coerceFont(i,"hoverlabel.grouptitlefont",n.hoverlabel.font)},"supplyLayoutDefaults"),Sz=Nt.exports,Jq=Na,rTe=t(function(r){var n=r.calcdata,i=r._fullLayout;function s(f){return function(h){return Sz.coerceHoverinfo({hoverinfo:h},{_module:f._module},i)}}t(s,"makeCoerceHoverInfo");for(var o=0;o<n.length;o++){var a=n[o],l=a[0].trace;if(!Jq.traceIs(l,"pie-like")){var u=Jq.traceIs(l,"2dMap")?aTe:Sz.fillArray;u(l.hoverinfo,a,"hi",s(l)),l.hovertemplate&&u(l.hovertemplate,a,"ht"),l.hoverlabel&&(u(l.hoverlabel.bgcolor,a,"hbg"),u(l.hoverlabel.bordercolor,a,"hbc"),u(l.hoverlabel.font.size,a,"hts"),u(l.hoverlabel.font.color,a,"htc"),u(l.hoverlabel.font.family,a,"htf"),u(l.hoverlabel.namelength,a,"hnl"),u(l.hoverlabel.align,a,"hta"))}}},"calc");function aTe(e,r,n,i){i=i||Sz.identity,Array.isArray(e)&&(r[0][n]=i(e))}t(aTe,"paste");var nTe=Na,iTe=yw.hover,oTe=t(function(r,n,i){var s=nTe.getComponentMethod("annotations","onClick")(r,r._hoverdata);i!==void 0&&iTe(r,n,i,!0);function o(){r.emit("plotly_click",{points:r._hoverdata,event:n})}t(o,"emitClick"),r._hoverdata&&n&&n.target&&(s&&s.then?s.then(o):o(),n.stopImmediatePropagation&&n.stopImmediatePropagation())},"click"),sTe=Va.exports,N_=Nt.exports,lTe=xu.exports,_m=Rf,Qq=fp,eU=yw,Ko={moduleType:"component",name:"fx",constants:K2,schema:{layout:Qq},attributes:X1,layoutAttributes:Qq,supplyLayoutGlobalDefaults:j3e,supplyDefaults:X3e,supplyLayoutDefaults:tTe,calc:rTe,getDistanceFunction:_m.getDistanceFunction,getClosest:_m.getClosest,inbox:_m.inbox,quadrature:_m.quadrature,appendArrayPointValue:_m.appendArrayPointValue,castHoverOption:fTe,castHoverinfo:cTe,hover:eU.hover,unhover:lTe.unhover,loneHover:eU.loneHover,loneUnhover:uTe,click:oTe};function uTe(e){var r=N_.isD3Selection(e)?e:sTe.select(e);r.selectAll("g.hovertext").remove(),r.selectAll(".spikeline").remove()}t(uTe,"loneUnhover");function fTe(e,r,n){return N_.castOption(e,r,"hoverlabel."+n)}t(fTe,"castHoverOption");function cTe(e,r,n){function i(s){return N_.coerceHoverinfo({hoverinfo:s},{_module:e._module},r)}return t(i,"_coerce"),N_.castOption(e,n,"hoverinfo",i)}t(cTe,"castHoverinfo");var Rh={};(function(e){e.selectMode=function(r){return r==="lasso"||r==="select"},e.drawMode=function(r){return r==="drawclosedpath"||r==="drawopenpath"||r==="drawline"||r==="drawrect"||r==="drawcircle"},e.openMode=function(r){return r==="drawline"||r==="drawopenpath"},e.rectMode=function(r){return r==="select"||r==="drawline"||r==="drawrect"||r==="drawcircle"},e.freeMode=function(r){return r==="lasso"||r==="drawclosedpath"||r==="drawopenpath"},e.selectingOrDrawing=function(r){return e.freeMode(r)||e.rectMode(r)}})(Rh);var xw=t(function(r){var n=r._fullLayout;n._glcanvas&&n._glcanvas.size()&&n._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})},"clearGlCanvases"),tx={},g8={exports:{}},y8={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}},P0={},hb=32,m8={CIRCLE_SIDES:hb,i000:0,i090:hb/4,i180:hb/2,i270:hb/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)},hTe=Nt.exports.strTranslate;function gle(e,r){switch(e.type){case"log":return e.p2d(r);case"date":return e.p2r(r,0,e.calendar);default:return e.p2r(r)}}t(gle,"p2r$2");function vTe(e,r){switch(e.type){case"log":return e.d2p(r);case"date":return e.r2p(r,0,e.calendar);default:return e.r2p(r)}}t(vTe,"r2p$1");function dTe(e){var r=e._id.charAt(0)==="y"?1:0;return function(n){return gle(e,n[r])}}t(dTe,"axValue$1");function pTe(e){return hTe(e.xaxis._offset,e.yaxis._offset)}t(pTe,"getTransform$1");var x8={p2r:gle,r2p:vTe,axValue:dTe,getTransform:pTe};(function(e){var r=dw,n=m8,i=n.CIRCLE_SIDES,s=n.SQRT2,o=x8,a=o.p2r,l=o.r2p,u=[0,3,4,5,6,1,2],f=[0,3,4,1,2];e.writePaths=function(c){var d=c.length;if(!d)return"M0,0Z";for(var g="",p=0;p<d;p++)for(var b=c[p].length,m=0;m<b;m++){var y=c[p][m][0];if(y==="Z")g+="Z";else for(var T=c[p][m].length,_=0;_<T;_++){var M=_;y==="Q"||y==="S"?M=f[_]:y==="C"&&(M=u[_]),g+=c[p][m][M],_>0&&_<T-1&&(g+=",")}}return g},e.readPaths=function(c,d,g,p){var b=r(c),m=[],y=-1,T=t(function(){y++,m[y]=[]},"newPoly"),_,M=0,w=0,x,A,S=t(function(){x=M,A=w},"recStart");S();for(var k=0;k<b.length;k++){var L=[],P,D,B,z,R=b[k][0],F=R;switch(R){case"M":T(),M=+b[k][1],w=+b[k][2],L.push([F,M,w]),S();break;case"Q":case"S":P=+b[k][1],B=+b[k][2],M=+b[k][3],w=+b[k][4],L.push([F,M,w,P,B]);break;case"C":P=+b[k][1],B=+b[k][2],D=+b[k][3],z=+b[k][4],M=+b[k][5],w=+b[k][6],L.push([F,M,w,P,B,D,z]);break;case"T":case"L":M=+b[k][1],w=+b[k][2],L.push([F,M,w]);break;case"H":F="L",M=+b[k][1],L.push([F,M,w]);break;case"V":F="L",w=+b[k][1],L.push([F,M,w]);break;case"A":F="L";var O=+b[k][1],q=+b[k][2];+b[k][4]||(O=-O,q=-q);var H=M-O,j=w;for(_=1;_<=i/2;_++){var X=2*Math.PI*_/i;L.push([F,H+O*Math.cos(X),j+q*Math.sin(X)])}break;case"Z":(M!==x||w!==A)&&(M=x,w=A,L.push([F,M,w]));break}for(var G=(g||{}).domain,$=d._fullLayout._size,te=g&&g.xsizemode==="pixel",ee=g&&g.ysizemode==="pixel",ie=p===!1,se=0;se<L.length;se++){for(_=0;_+2<7;_+=2){var W=L[se][_+1],ne=L[se][_+2];W===void 0||ne===void 0||(M=W,w=ne,g&&(g.xaxis&&g.xaxis.p2r?(ie&&(W-=g.xaxis._offset),te?W=l(g.xaxis,g.xanchor)+W:W=a(g.xaxis,W)):(ie&&(W-=$.l),G?W=G.x[0]+W/$.w:W=W/$.w),g.yaxis&&g.yaxis.p2r?(ie&&(ne-=g.yaxis._offset),ee?ne=l(g.yaxis,g.yanchor)-ne:ne=a(g.yaxis,ne)):(ie&&(ne-=$.t),G?ne=G.y[1]-ne/$.h:ne=1-ne/$.h)),L[se][_+1]=W,L[se][_+2]=ne)}m[y].push(L[se].slice())}}return m};function h(c,d){return Math.abs(c-d)<=1e-6}t(h,"almostEq");function v(c,d){var g=d[1]-c[1],p=d[2]-c[2];return Math.sqrt(g*g+p*p)}t(v,"dist"),e.pointsOnRectangle=function(c){var d=c.length;if(d!==5)return!1;for(var g=1;g<3;g++){var p=c[0][g]-c[1][g],b=c[3][g]-c[2][g];if(!h(p,b))return!1;var m=c[0][g]-c[3][g],y=c[1][g]-c[2][g];if(!h(m,y))return!1}return!h(c[0][1],c[1][1])&&!h(c[0][1],c[3][1])?!1:!!(v(c[0],c[1])*v(c[0],c[3]))},e.pointsOnEllipse=function(c){var d=c.length;if(d!==i+1)return!1;d=i;for(var g=0;g<d;g++){var p=(d*2-g)%d,b=(d/2+p)%d,m=(d/2+g)%d;if(!h(v(c[g],c[m]),v(c[p],c[b])))return!1}return!0},e.handleEllipse=function(c,d,g){if(!c)return[d,g];var p=e.ellipseOver({x0:d[0],y0:d[1],x1:g[0],y1:g[1]}),b=(p.x1+p.x0)/2,m=(p.y1+p.y0)/2,y=(p.x1-p.x0)/2,T=(p.y1-p.y0)/2;y||(y=T=T/s),T||(T=y=y/s);for(var _=[],M=0;M<i;M++){var w=M*2*Math.PI/i;_.push([b+y*Math.cos(w),m+T*Math.sin(w)])}return _},e.ellipseOver=function(c){var d=c.x0,g=c.y0,p=c.x1,b=c.y1,m=p-d,y=b-g;d-=m,g-=y;var T=(d+p)/2,_=(g+b)/2,M=s;return m*=M,y*=M,{x0:T-m,y0:_-y,x1:T+m,y1:_+y}},e.fixDatesForPaths=function(c,d,g){var p=d.type==="date",b=g.type==="date";if(!p&&!b)return c;for(var m=0;m<c.length;m++)for(var y=0;y<c[m].length;y++)for(var T=0;T+2<c[m][y].length;T+=2)p&&(c[m][y][T+1]=c[m][y][T+1].replace(" ","_")),b&&(c[m][y][T+2]=c[m][y][T+2].replace(" ","_"));return c}})(P0);var yle=Rh,gTe=yle.drawMode,yTe=yle.openMode,Ly=m8,tU=Ly.i000,rU=Ly.i090,aU=Ly.i180,nU=Ly.i270,mTe=Ly.cos45,xTe=Ly.sin45,mle=x8,vb=mle.p2r,Vd=mle.r2p,bTe=C0,_Te=bTe.clearOutline,bw=P0,wTe=bw.readPaths,TTe=bw.writePaths,ATe=bw.ellipseOver,STe=bw.fixDatesForPaths,xle=t(function(r,n){if(!!r.length){var i=r[0][0];if(!!i){var s=i.getAttribute("d"),o=n.gd,a=o._fullLayout.newshape,l=n.plotinfo,u=l.xaxis,f=l.yaxis,h=!!l.domain||!l.xaxis,v=!!l.domain||!l.yaxis,c=n.isActiveShape,d=n.dragmode,g=(o.layout||{}).shapes||[];if(!gTe(d)&&c!==void 0){var p=o._fullLayout._activeShapeIndex;if(p<g.length)switch(o._fullLayout.shapes[p].type){case"rect":d="drawrect";break;case"circle":d="drawcircle";break;case"line":d="drawline";break;case"path":var b=g[p].path||"";b[b.length-1]==="Z"?d="drawclosedpath":d="drawopenpath";break}}var m=yTe(d),y=wTe(s,o,l,c),T={editable:!0,xref:h?"paper":u._id,yref:v?"paper":f._id,layer:a.layer,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};m||(T.fillcolor=a.fillcolor,T.fillrule=a.fillrule);var _;if(y.length===1&&(_=y[0]),_&&_.length===5&&d==="drawrect")T.type="rect",T.x0=_[0][1],T.y0=_[0][2],T.x1=_[2][1],T.y1=_[2][2];else if(_&&d==="drawline")T.type="line",T.x0=_[0][1],T.y0=_[0][2],T.x1=_[1][1],T.y1=_[1][2];else if(_&&d==="drawcircle"){T.type="circle";var M=_[tU][1],w=_[rU][1],x=_[aU][1],A=_[nU][1],S=_[tU][2],k=_[rU][2],L=_[aU][2],P=_[nU][2],D=l.xaxis&&(l.xaxis.type==="date"||l.xaxis.type==="log"),B=l.yaxis&&(l.yaxis.type==="date"||l.yaxis.type==="log");D&&(M=Vd(l.xaxis,M),w=Vd(l.xaxis,w),x=Vd(l.xaxis,x),A=Vd(l.xaxis,A)),B&&(S=Vd(l.yaxis,S),k=Vd(l.yaxis,k),L=Vd(l.yaxis,L),P=Vd(l.yaxis,P));var z=(w+A)/2,R=(S+L)/2,F=(A-w+x-M)/2,O=(P-k+L-S)/2,q=ATe({x0:z,y0:R,x1:z+F*mTe,y1:R+O*xTe});D&&(q.x0=vb(l.xaxis,q.x0),q.x1=vb(l.xaxis,q.x1)),B&&(q.y0=vb(l.yaxis,q.y0),q.y1=vb(l.yaxis,q.y1)),T.x0=q.x0,T.y0=q.y0,T.x1=q.x1,T.y1=q.y1}else T.type="path",u&&f&&STe(y,u,f),T.path=TTe(y),_=null;_Te(o);for(var H=n.editHelpers,j=(H||{}).modifyItem,X=[],G=0;G<g.length;G++){var $=o._fullLayout.shapes[G];if(X[G]=$._input,c!==void 0&&G===o._fullLayout._activeShapeIndex){var te=T;switch($.type){case"line":case"rect":case"circle":j("x0",te.x0),j("x1",te.x1),j("y0",te.y0),j("y1",te.y1);break;case"path":j("path",te.path);break}}}return c===void 0?(X.push(T),X):H?H.getUpdateObj():{}}}},"newShapes"),MTe=Rh,kTe=MTe.selectMode,ETe=C0,CTe=ETe.clearOutline,b8=P0,LTe=b8.readPaths,RTe=b8.writePaths,PTe=b8.fixDatesForPaths,ble=t(function(r,n){if(!!r.length){var i=r[0][0];if(!!i){var s=i.getAttribute("d"),o=n.gd,a=o._fullLayout.newselection,l=n.plotinfo,u=l.xaxis,f=l.yaxis,h=n.isActiveSelection,v=n.dragmode,c=(o.layout||{}).selections||[];if(!kTe(v)&&h!==void 0){var d=o._fullLayout._activeSelectionIndex;if(d<c.length)switch(o._fullLayout.selections[d].type){case"rect":v="select";break;case"path":v="lasso";break}}var g=LTe(s,o,l,h),p={xref:u._id,yref:f._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}},b;g.length===1&&(b=g[0]),b&&b.length===5&&v==="select"?(p.type="rect",p.x0=b[0][1],p.y0=b[0][2],p.x1=b[2][1],p.y1=b[2][2]):(p.type="path",u&&f&&PTe(g,u,f),p.path=RTe(g),b=null),CTe(o);for(var m=n.editHelpers,y=(m||{}).modifyItem,T=[],_=0;_<c.length;_++){var M=o._fullLayout.selections[_];if(!M){T[_]=M;continue}if(T[_]=M._input,h!==void 0&&_===o._fullLayout._activeSelectionIndex){var w=p;switch(M.type){case"rect":y("x0",w.x0),y("x1",w.x1),y("y0",w.y0),y("y1",w.y1);break;case"path":y("path",w.path);break}}}return h===void 0?(T.push(p),T):m?m.getUpdateObj():{}}}},"newSelections"),DTe=Nt.exports,ITe=DTe.strTranslate,iU=xu.exports,_le=Rh,zTe=_le.drawMode,wle=_le.selectMode,Tle=Na,oU=$a.exports,_w=m8,FTe=_w.i000,BTe=_w.i090,OTe=_w.i180,NTe=_w.i270,qTe=C0,Ale=qTe.clearOutlineControllers,_8=P0,db=_8.pointsOnRectangle,XT=_8.pointsOnEllipse,UTe=_8.writePaths,HTe=xle,$Te=ble,w8=t(function e(r,n,i,s){s||(s=0);var o=i.gd;function a(){e(r,n,i,s++),XT(r[0])&&l({redrawing:!0})}t(a,"redraw");function l(z){var R={};i.isActiveShape!==void 0&&(i.isActiveShape=!1,R=HTe(n,i)),i.isActiveSelection!==void 0&&(i.isActiveSelection=!1,R=$Te(n,i),o._fullLayout._reselect=!0),Object.keys(R).length&&Tle.call((z||{}).redrawing?"relayout":"_guiRelayout",o,R)}t(l,"update");var u=o._fullLayout,f=u._zoomlayer,h=i.dragmode,v=zTe(h),c=wle(h);(v||c)&&(o._fullLayout._outlining=!0),Ale(o),n.attr("d",UTe(r));var d,g,p,b,m;if(!s&&(i.isActiveShape||i.isActiveSelection)){m=VTe([],r);var y=f.append("g").attr("class","outline-controllers");A(y),B()}function T(z){p=+z.srcElement.getAttribute("data-i"),b=+z.srcElement.getAttribute("data-j"),d[p][b].moveFn=_}t(T,"startDragVertex");function _(z,R){if(!!r.length){var F=m[p][b][1],O=m[p][b][2],q=r[p],H=q.length;if(db(q)){var j=z,X=R;if(i.isActiveSelection){var G=sU(q,b);G[1]===q[b][1]?X=0:j=0}for(var $=0;$<H;$++)if($!==b){var te=q[$];te[1]===q[b][1]&&(te[1]=F+j),te[2]===q[b][2]&&(te[2]=O+X)}if(q[b][1]=F+j,q[b][2]=O+X,!db(q))for(var ee=0;ee<H;ee++)for(var ie=0;ie<q[ee].length;ie++)q[ee][ie]=m[p][ee][ie]}else q[b][1]=F+z,q[b][2]=O+R;a()}}t(_,"moveVertexController");function M(){l()}t(M,"endDragVertexController");function w(){if(!!r.length&&!!r[p]&&!!r[p].length){for(var z=[],R=0;R<r[p].length;R++)R!==b&&z.push(r[p][R]);z.length>1&&!(z.length===2&&z[1][0]==="Z")&&(b===0&&(z[0][0]="M"),r[p]=z,a(),l())}}t(w,"removeVertex");function x(z,R){if(z===2){p=+R.srcElement.getAttribute("data-i"),b=+R.srcElement.getAttribute("data-j");var F=r[p];!db(F)&&!XT(F)&&w()}}t(x,"clickVertexController");function A(z){d=[];for(var R=0;R<r.length;R++){var F=r[R],O=db(F),q=!O&&XT(F);d[R]=[];for(var H=F.length,j=0;j<H;j++)if(F[j][0]!=="Z"&&!(q&&j!==FTe&&j!==BTe&&j!==OTe&&j!==NTe)){var X=O&&i.isActiveSelection,G;X&&(G=sU(F,j));var $=F[j][1],te=F[j][2],ee=z.append(X?"rect":"circle").attr("data-i",R).attr("data-j",j).style({fill:oU.background,stroke:oU.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(X){var ie=G[1]-$,se=G[2]-te,W=se?5:Math.max(Math.min(25,Math.abs(ie)-5),5),ne=ie?5:Math.max(Math.min(25,Math.abs(se)-5),5);ee.classed(se?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",W).attr("height",ne).attr("x",$-W/2).attr("y",te-ne/2).attr("transform",ITe(ie/2,se/2))}else ee.classed("cursor-grab",!0).attr("r",5).attr("cx",$).attr("cy",te);d[R][j]={element:ee.node(),gd:o,prepFn:T,doneFn:M,clickFn:x},iU.init(d[R][j])}}}t(A,"addVertexControllers");function S(z,R){if(!!r.length)for(var F=0;F<r.length;F++)for(var O=0;O<r[F].length;O++)for(var q=0;q+2<r[F][O].length;q+=2)r[F][O][q+1]=m[F][O][q+1]+z,r[F][O][q+2]=m[F][O][q+2]+R}t(S,"moveGroup");function k(z,R){S(z,R),a()}t(k,"moveGroupController");function L(z){p=+z.srcElement.getAttribute("data-i"),p||(p=0),g[p].moveFn=k}t(L,"startDragGroupController");function P(){l()}t(P,"endDragGroupController");function D(z){z===2&&GTe(o)}t(D,"clickGroupController");function B(){if(g=[],!!r.length){var z=0;g[z]={element:n[0][0],gd:o,prepFn:L,doneFn:P,clickFn:D},iU.init(g[z])}}t(B,"addGroupControllers")},"displayOutlines");function VTe(e,r){for(var n=0;n<r.length;n++){var i=r[n];e[n]=[];for(var s=0;s<i.length;s++){e[n][s]=[];for(var o=0;o<i[s].length;o++)e[n][s][o]=i[s][o]}}return e}t(VTe,"recordPositions");function sU(e,r){var n=e[r][1],i=e[r][2],s=e.length,o,a,l;return o=(r+1)%s,a=e[o][1],l=e[o][2],a===n&&l===i&&(o=(r+2)%s,a=e[o][1],l=e[o][2]),[o,a,l]}t(sU,"getNextPoint");function GTe(e){if(!!wle(e._fullLayout.dragmode)){Ale(e);var r=e._fullLayout._activeSelectionIndex,n=(e.layout||{}).selections||[];if(r<n.length){for(var i=[],s=0;s<n.length;s++)s!==r&&i.push(n[s]);delete e._fullLayout._activeSelectionIndex;var o=e._fullLayout.selections[r];e._fullLayout._deselect={xref:o.xref,yref:o.yref},Tle.call("_guiRelayout",e,{selections:i})}}}t(GTe,"eraseActiveSelection");var ww={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},D0={};(function(e){var r=ww,n=Nt.exports,i=nn();e.rangeToShapePosition=function(o){return o.type==="log"?o.r2d:function(a){return a}},e.shapePositionToRange=function(o){return o.type==="log"?o.d2r:function(a){return a}},e.decodeDate=function(o){return function(a){return a.replace&&(a=a.replace("_"," ")),o(a)}},e.encodeDate=function(o){return function(a){return o(a).replace(" ","_")}},e.extractPathCoords=function(o,a,l){var u=[],f=o.match(r.segmentRE);return f.forEach(function(h){var v=a[h.charAt(0)].drawn;if(v!==void 0){var c=h.substr(1).match(r.paramRE);if(!(!c||c.length<v)){var d=c[v],g=l?d:n.cleanNumber(d);u.push(g)}}}),u},e.getDataToPixel=function(o,a,l,u){var f=o._fullLayout._size,h;if(a)if(u==="domain")h=t(function(c){return a._length*(l?1-c:c)+a._offset},"dataToPixel");else{var v=e.shapePositionToRange(a);h=t(function(c){return a._offset+a.r2p(v(c,!0))},"dataToPixel"),a.type==="date"&&(h=e.decodeDate(h))}else l?h=t(function(c){return f.t+f.h*(1-c)},"dataToPixel"):h=t(function(c){return f.l+f.w*c},"dataToPixel");return h},e.getPixelToData=function(o,a,l,u){var f=o._fullLayout._size,h;if(a)if(u==="domain")h=t(function(c){var d=(c-a._offset)/a._length;return l?1-d:d},"pixelToData");else{var v=e.rangeToShapePosition(a);h=t(function(c){return v(a.p2r(c-a._offset))},"pixelToData")}else l?h=t(function(c){return 1-(c-f.t)/f.h},"pixelToData"):h=t(function(c){return(c-f.l)/f.w},"pixelToData");return h},e.roundPositionForSharpStrokeRendering=function(o,a){var l=Math.round(a%2)===1,u=Math.round(o);return l?u+.5:u},e.makeShapesOptionsAndPlotinfo=function(o,a){var l=o._fullLayout.shapes[a]||{},u=o._fullLayout._plots[l.xref+l.yref],f=!!u;return f?u._hadPlotinfo=!0:(u={},l.xref&&l.xref!=="paper"&&(u.xaxis=o._fullLayout[l.xref+"axis"]),l.yref&&l.yref!=="paper"&&(u.yaxis=o._fullLayout[l.yref+"axis"])),u.xsizemode=l.xsizemode,u.ysizemode=l.ysizemode,u.xanchor=l.xanchor,u.yanchor=l.yanchor,{options:l,plotinfo:u}},e.makeSelectionsOptionsAndPlotinfo=function(o,a){var l=o._fullLayout.selections[a]||{},u=o._fullLayout._plots[l.xref+l.yref],f=!!u;return f?u._hadPlotinfo=!0:(u={},l.xref&&(u.xaxis=o._fullLayout[l.xref+"axis"]),l.yref&&(u.yaxis=o._fullLayout[l.yref+"axis"])),{options:l,plotinfo:u}},e.getPathString=function(o,a){var l=a.type,u=i.getRefType(a.xref),f=i.getRefType(a.yref),h=i.getFromId(o,a.xref),v=i.getFromId(o,a.yref),c=o._fullLayout._size,d,g,p,b,m,y,T,_;if(h?u==="domain"?g=t(function(B){return h._offset+h._length*B},"x2p"):(d=e.shapePositionToRange(h),g=t(function(B){return h._offset+h.r2p(d(B,!0))},"x2p")):g=t(function(B){return c.l+c.w*B},"x2p"),v?f==="domain"?b=t(function(B){return v._offset+v._length*(1-B)},"y2p"):(p=e.shapePositionToRange(v),b=t(function(B){return v._offset+v.r2p(p(B,!0))},"y2p")):b=t(function(B){return c.t+c.h*(1-B)},"y2p"),l==="path")return h&&h.type==="date"&&(g=e.decodeDate(g)),v&&v.type==="date"&&(b=e.decodeDate(b)),s(a,g,b);if(a.xsizemode==="pixel"){var M=g(a.xanchor);m=M+a.x0,y=M+a.x1}else m=g(a.x0),y=g(a.x1);if(a.ysizemode==="pixel"){var w=b(a.yanchor);T=w-a.y0,_=w-a.y1}else T=b(a.y0),_=b(a.y1);if(l==="line")return"M"+m+","+T+"L"+y+","+_;if(l==="rect")return"M"+m+","+T+"H"+y+"V"+_+"H"+m+"Z";var x=(m+y)/2,A=(T+_)/2,S=Math.abs(x-m),k=Math.abs(A-T),L="A"+S+","+k,P=x+S+","+A,D=x+","+(A-k);return"M"+P+L+" 0 1,1 "+D+L+" 0 0,1 "+P+"Z"};function s(o,a,l){var u=o.path,f=o.xsizemode,h=o.ysizemode,v=o.xanchor,c=o.yanchor;return u.replace(r.segmentRE,function(d){var g=0,p=d.charAt(0),b=r.paramIsX[p],m=r.paramIsY[p],y=r.numParams[p],T=d.substr(1).replace(r.paramRE,function(_){return b[g]?f==="pixel"?_=a(v)+Number(_):_=a(_):m[g]&&(h==="pixel"?_=l(c)-Number(_):_=l(_)),g++,g>y&&(_="X"),_});return g>y&&(T=T.replace(/[\s,]*X.*/,""),n.log("Ignoring extra params in segment "+d)),p+T})}t(s,"convertPath")})(D0);var Sle=Na,lU=Nt.exports,yg=nn(),jTe=P0.readPaths,YTe=w8,Mle=C0.clearOutlineControllers,ZT=$a.exports,T8=bn.exports,WTe=ei.arrayEditor,uU=xu.exports,fU=pv,a0=ww,xf=D0,Mz=xf.getPathString,kle={draw:A8,drawOne:Ele,eraseActiveShape:KTe};function A8(e){var r=e._fullLayout;r._shapeUpperLayer.selectAll("path").remove(),r._shapeLowerLayer.selectAll("path").remove();for(var n in r._plots){var i=r._plots[n].shapelayer;i&&i.selectAll("path").remove()}for(var s=0;s<r.shapes.length;s++)r.shapes[s].visible&&Ele(e,s)}t(A8,"draw$b");function pb(e){return!!e._fullLayout._outlining}t(pb,"shouldSkipEdits");function Tw(e){return!e._context.edits.shapePosition}t(Tw,"couldHaveActiveShape");function Ele(e,r){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+r+'"]').remove();var n=xf.makeShapesOptionsAndPlotinfo(e,r),i=n.options,s=n.plotinfo;if(!i._input||i.visible===!1)return;if(i.layer!=="below")a(e._fullLayout._shapeUpperLayer);else if(i.xref==="paper"||i.yref==="paper")a(e._fullLayout._shapeLowerLayer);else if(s._hadPlotinfo){var o=s.mainplotinfo||s;a(o.shapelayer)}else a(e._fullLayout._shapeLowerLayer);function a(l){var u=Mz(e,i),f={"data-index":r,"fill-rule":i.fillrule,d:u},h=i.opacity,v=i.fillcolor,c=i.line.width?i.line.color:"rgba(0,0,0,0)",d=i.line.width,g=i.line.dash;!d&&i.editable===!0&&(d=5,g="solid");var p=u[u.length-1]!=="Z",b=Tw(e)&&i.editable&&e._fullLayout._activeShapeIndex===r;b&&(v=p?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,h=e._fullLayout.activeshape.opacity);var m=l.append("path").attr(f).style("opacity",h).call(ZT.stroke,c).call(ZT.fill,v).call(T8.dashLine,g,d);Cle(m,e,i);var y;if((b||e._context.edits.shapePosition)&&(y=WTe(e.layout,"shapes",i)),b){m.style({cursor:"move"});var T={element:m.node(),plotinfo:s,gd:e,editHelpers:y,isActiveShape:!0},_=jTe(u,e);YTe(_,m,T)}else e._context.edits.shapePosition?XTe(e,m,i,r,l,y):i.editable===!0&&m.style("pointer-events",p||ZT.opacity(v)*h<=.5?"stroke":"all");m.node().addEventListener("click",function(){return ZTe(e,m)})}t(a,"drawShape")}t(Ele,"drawOne$2");function Cle(e,r,n){var i=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");T8.setClipUrl(e,i?"clip"+r._fullLayout._uid+i:null,r)}t(Cle,"setClipPath$1");function XTe(e,r,n,i,s,o){var a=10,l=10,u=n.xsizemode==="pixel",f=n.ysizemode==="pixel",h=n.type==="line",v=n.type==="path",c=o.modifyItem,d,g,p,b,m,y,T,_,M,w,x,A,S,k,L,P=yg.getFromId(e,n.xref),D=yg.getRefType(n.xref),B=yg.getFromId(e,n.yref),z=yg.getRefType(n.yref),R=xf.getDataToPixel(e,P,!1,D),F=xf.getDataToPixel(e,B,!0,z),O=xf.getPixelToData(e,P,!1,D),q=xf.getPixelToData(e,B,!0,z),H=G(),j={element:H.node(),gd:e,prepFn:ee,doneFn:ie,clickFn:se},X;uU.init(j),H.node().onmousemove=te;function G(){return h?$():r}t(G,"obtainSensoryElement");function $(){var fe=10,ce=Math.max(n.line.width,fe),xe=s.append("g").attr("data-index",i);xe.append("path").attr("d",r.attr("d")).style({cursor:"move","stroke-width":ce,"stroke-opacity":"0"});var Te={"fill-opacity":"0"},me=Math.max(ce/2,fe);return xe.append("circle").attr({"data-line-point":"start-point",cx:u?R(n.xanchor)+n.x0:R(n.x0),cy:f?F(n.yanchor)-n.y0:F(n.y0),r:me}).style(Te).classed("cursor-grab",!0),xe.append("circle").attr({"data-line-point":"end-point",cx:u?R(n.xanchor)+n.x1:R(n.x1),cy:f?F(n.yanchor)-n.y1:F(n.y1),r:me}).style(Te).classed("cursor-grab",!0),xe}t($,"createLineDragHandles");function te(fe){if(pb(e)){X=null;return}if(h)fe.target.tagName==="path"?X="move":X=fe.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var ce=j.element.getBoundingClientRect(),xe=ce.right-ce.left,Te=ce.bottom-ce.top,me=fe.clientX-ce.left,pe=fe.clientY-ce.top,oe=!v&&xe>a&&Te>l&&!fe.shiftKey?uU.getCursor(me/xe,1-pe/Te):"move";fU(r,oe),X=oe.split("-")[0]}}t(te,"updateDragMode");function ee(fe){pb(e)||(u&&(m=R(n.xanchor)),f&&(y=F(n.yanchor)),n.type==="path"?L=n.path:(d=u?n.x0:R(n.x0),g=f?n.y0:F(n.y0),p=u?n.x1:R(n.x1),b=f?n.y1:F(n.y1)),d<p?(M=d,S="x0",w=p,k="x1"):(M=p,S="x1",w=d,k="x0"),!f&&g<b||f&&g>b?(T=g,x="y0",_=b,A="y1"):(T=b,x="y1",_=g,A="y0"),te(fe),he(s,n),ae(r,n,e),j.moveFn=X==="move"?W:ne,j.altKey=fe.altKey)}t(ee,"startDrag");function ie(){pb(e)||(fU(r),re(s),Cle(r,e,n),Sle.call("_guiRelayout",e,o.getUpdateObj()))}t(ie,"endDrag");function se(){pb(e)||re(s)}t(se,"abortDrag");function W(fe,ce){if(n.type==="path"){var xe=t(function(pe){return pe},"noOp"),Te=xe,me=xe;u?c("xanchor",n.xanchor=O(m+fe)):(Te=t(function(oe){return O(R(oe)+fe)},"moveX"),P&&P.type==="date"&&(Te=xf.encodeDate(Te))),f?c("yanchor",n.yanchor=q(y+ce)):(me=t(function(oe){return q(F(oe)+ce)},"moveY"),B&&B.type==="date"&&(me=xf.encodeDate(me))),c("path",n.path=cU(L,Te,me))}else u?c("xanchor",n.xanchor=O(m+fe)):(c("x0",n.x0=O(d+fe)),c("x1",n.x1=O(p+fe))),f?c("yanchor",n.yanchor=q(y+ce)):(c("y0",n.y0=q(g+ce)),c("y1",n.y1=q(b+ce)));r.attr("d",Mz(e,n)),he(s,n)}t(W,"moveShape");function ne(fe,ce){if(v){var xe=t(function(Ye){return Ye},"noOp"),Te=xe,me=xe;u?c("xanchor",n.xanchor=O(m+fe)):(Te=t(function($e){return O(R($e)+fe)},"moveX"),P&&P.type==="date"&&(Te=xf.encodeDate(Te))),f?c("yanchor",n.yanchor=q(y+ce)):(me=t(function($e){return q(F($e)+ce)},"moveY"),B&&B.type==="date"&&(me=xf.encodeDate(me))),c("path",n.path=cU(L,Te,me))}else if(h){if(X==="resize-over-start-point"){var pe=d+fe,oe=f?g-ce:g+ce;c("x0",n.x0=u?pe:O(pe)),c("y0",n.y0=f?oe:q(oe))}else if(X==="resize-over-end-point"){var de=p+fe,ye=f?b-ce:b+ce;c("x1",n.x1=u?de:O(de)),c("y1",n.y1=f?ye:q(ye))}}else{var we=t(function(Ye){return X.indexOf(Ye)!==-1},"has"),Ee=we("n"),De=we("s"),Fe=we("w"),qe=we("e"),Je=Ee?T+ce:T,Ge=De?_+ce:_,et=Fe?M+fe:M,Ue=qe?w+fe:w;f&&(Ee&&(Je=T-ce),De&&(Ge=_-ce)),(!f&&Ge-Je>l||f&&Je-Ge>l)&&(c(x,n[x]=f?Je:q(Je)),c(A,n[A]=f?Ge:q(Ge))),Ue-et>a&&(c(S,n[S]=u?et:O(et)),c(k,n[k]=u?Ue:O(Ue)))}r.attr("d",Mz(e,n)),he(s,n)}t(ne,"resizeShape");function he(fe,ce){(u||f)&&xe();function xe(){var Te=ce.type!=="path",me=fe.selectAll(".visual-cue").data([0]),pe=1;me.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":pe}).classed("visual-cue",!0);var oe=R(u?ce.xanchor:lU.midRange(Te?[ce.x0,ce.x1]:xf.extractPathCoords(ce.path,a0.paramIsX))),de=F(f?ce.yanchor:lU.midRange(Te?[ce.y0,ce.y1]:xf.extractPathCoords(ce.path,a0.paramIsY)));if(oe=xf.roundPositionForSharpStrokeRendering(oe,pe),de=xf.roundPositionForSharpStrokeRendering(de,pe),u&&f){var ye="M"+(oe-1-pe)+","+(de-1-pe)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";me.attr("d",ye)}else if(u){var we="M"+(oe-1-pe)+","+(de-9-pe)+"v18 h2 v-18 Z";me.attr("d",we)}else{var Ee="M"+(oe-9-pe)+","+(de-1-pe)+"h18 v2 h-18 Z";me.attr("d",Ee)}}t(xe,"renderAnchor")}t(he,"renderVisualCues");function re(fe){fe.selectAll(".visual-cue").remove()}t(re,"removeVisualCues");function ae(fe,ce,xe){var Te=ce.xref,me=ce.yref,pe=yg.getFromId(xe,Te),oe=yg.getFromId(xe,me),de="";Te!=="paper"&&!pe.autorange&&(de+=Te),me!=="paper"&&!oe.autorange&&(de+=me),T8.setClipUrl(fe,de?"clip"+xe._fullLayout._uid+de:null,xe)}t(ae,"deactivateClipPathTemporarily")}t(XTe,"setupDragElement");function cU(e,r,n){return e.replace(a0.segmentRE,function(i){var s=0,o=i.charAt(0),a=a0.paramIsX[o],l=a0.paramIsY[o],u=a0.numParams[o],f=i.substr(1).replace(a0.paramRE,function(h){return s>=u||(a[s]?h=r(h):l[s]&&(h=n(h)),s++),h});return o+f})}t(cU,"movePath");function ZTe(e,r){if(!!Tw(e)){var n=r.node(),i=+n.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeShapeIndex){hU(e);return}e._fullLayout._activeShapeIndex=i,e._fullLayout._deactivateShape=hU,A8(e)}}}t(ZTe,"activateShape");function hU(e){if(!!Tw(e)){var r=e._fullLayout._activeShapeIndex;r>=0&&(Mle(e),delete e._fullLayout._activeShapeIndex,A8(e))}}t(hU,"deactivateShape");function KTe(e){if(!!Tw(e)){Mle(e);var r=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(r<n.length){for(var i=[],s=0;s<n.length;s++)s!==r&&i.push(n[s]);delete e._fullLayout._activeShapeIndex,Sle.call("_guiRelayout",e,{shapes:i})}}}t(KTe,"eraseActiveShape$1");var $c=Na,Lle=so.exports,Rle=$o,_i=y8,JTe=kle.eraseActiveShape,zg=Nt.exports,ai=zg._,wi=g8.exports={};wi.toImage={name:"toImage",title:function(e){var r=e._context.toImageButtonOptions||{},n=r.format||"png";return n==="png"?ai(e,"Download plot as a png"):ai(e,"Download plot")},icon:_i.camera,click:function(e){var r=e._context.toImageButtonOptions,n={format:r.format||"png"};zg.notifier(ai(e,"Taking snapshot - this may take a few seconds"),"long"),n.format!=="svg"&&zg.isIE()&&(zg.notifier(ai(e,"IE only supports svg.  Changing format to svg."),"long"),n.format="svg"),["filename","width","height","scale"].forEach(function(i){i in r&&(n[i]=r[i])}),$c.call("downloadImage",e,n).then(function(i){zg.notifier(ai(e,"Snapshot succeeded")+" - "+i,"long")}).catch(function(){zg.notifier(ai(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};wi.sendDataToCloud={name:"sendDataToCloud",title:function(e){return ai(e,"Edit in Chart Studio")},icon:_i.disk,click:function(e){Lle.sendDataToCloud(e)}};wi.editInChartStudio={name:"editInChartStudio",title:function(e){return ai(e,"Edit in Chart Studio")},icon:_i.pencil,click:function(e){Lle.sendDataToCloud(e)}};wi.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return ai(e,"Zoom")},attr:"dragmode",val:"zoom",icon:_i.zoombox,click:bu};wi.pan2d={name:"pan2d",_cat:"pan",title:function(e){return ai(e,"Pan")},attr:"dragmode",val:"pan",icon:_i.pan,click:bu};wi.select2d={name:"select2d",_cat:"select",title:function(e){return ai(e,"Box Select")},attr:"dragmode",val:"select",icon:_i.selectbox,click:bu};wi.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return ai(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:_i.lasso,click:bu};wi.drawclosedpath={name:"drawclosedpath",title:function(e){return ai(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:_i.drawclosedpath,click:bu};wi.drawopenpath={name:"drawopenpath",title:function(e){return ai(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:_i.drawopenpath,click:bu};wi.drawline={name:"drawline",title:function(e){return ai(e,"Draw line")},attr:"dragmode",val:"drawline",icon:_i.drawline,click:bu};wi.drawrect={name:"drawrect",title:function(e){return ai(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:_i.drawrect,click:bu};wi.drawcircle={name:"drawcircle",title:function(e){return ai(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:_i.drawcircle,click:bu};wi.eraseshape={name:"eraseshape",title:function(e){return ai(e,"Erase active shape")},icon:_i.eraseshape,click:JTe};wi.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return ai(e,"Zoom in")},attr:"zoom",val:"in",icon:_i.zoom_plus,click:bu};wi.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return ai(e,"Zoom out")},attr:"zoom",val:"out",icon:_i.zoom_minus,click:bu};wi.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return ai(e,"Autoscale")},attr:"zoom",val:"auto",icon:_i.autoscale,click:bu};wi.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return ai(e,"Reset axes")},attr:"zoom",val:"reset",icon:_i.home,click:bu};wi.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return ai(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:_i.tooltip_basic,gravity:"ne",click:bu};wi.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return ai(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:_i.tooltip_compare,gravity:"ne",click:bu};function bu(e,r){var n=r.currentTarget,i=n.getAttribute("data-attr"),s=n.getAttribute("data-val")||!0,o=e._fullLayout,a={},l=Rle.list(e,null,!0),u=o._cartesianSpikesEnabled,f,h;if(i==="zoom"){var v=s==="in"?.5:2,c=(1+v)/2,d=(1-v)/2,g;for(h=0;h<l.length;h++)if(f=l[h],!f.fixedrange)if(g=f._name,s==="auto")a[g+".autorange"]=!0;else if(s==="reset"){if(f._rangeInitial===void 0)a[g+".autorange"]=!0;else{var p=f._rangeInitial.slice();a[g+".range[0]"]=p[0],a[g+".range[1]"]=p[1]}f._showSpikeInitial!==void 0&&(a[g+".showspikes"]=f._showSpikeInitial,u==="on"&&!f._showSpikeInitial&&(u="off"))}else{var b=[f.r2l(f.range[0]),f.r2l(f.range[1])],m=[c*b[0]+d*b[1],c*b[1]+d*b[0]];a[g+".range[0]"]=f.l2r(m[0]),a[g+".range[1]"]=f.l2r(m[1])}}else i==="hovermode"&&(s==="x"||s==="y")&&(s=o._isHoriz?"y":"x",n.setAttribute("data-val",s)),a[i]=s;o._cartesianSpikesEnabled=u,$c.call("_guiRelayout",e,a)}t(bu,"handleCartesian");wi.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return ai(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:_i.zoombox,click:Aw};wi.pan3d={name:"pan3d",_cat:"pan",title:function(e){return ai(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:_i.pan,click:Aw};wi.orbitRotation={name:"orbitRotation",title:function(e){return ai(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:_i["3d_rotate"],click:Aw};wi.tableRotation={name:"tableRotation",title:function(e){return ai(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:_i["z-axis"],click:Aw};function Aw(e,r){for(var n=r.currentTarget,i=n.getAttribute("data-attr"),s=n.getAttribute("data-val")||!0,o=e._fullLayout._subplots.gl3d||[],a={},l=i.split("."),u=0;u<o.length;u++)a[o[u]+"."+l[1]]=s;var f=s==="pan"?s:"zoom";a.dragmode=f,$c.call("_guiRelayout",e,a)}t(Aw,"handleDrag3d");wi.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return ai(e,"Reset camera to default")},attr:"resetDefault",icon:_i.home,click:S8};wi.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return ai(e,"Reset camera to last save")},attr:"resetLastSave",icon:_i.movie,click:S8};function S8(e,r){for(var n=r.currentTarget,i=n.getAttribute("data-attr"),s=i==="resetLastSave",o=i==="resetDefault",a=e._fullLayout,l=a._subplots.gl3d||[],u={},f=0;f<l.length;f++){var h=l[f],v=h+".camera",c=h+".aspectratio",d=h+".aspectmode",g=a[h]._scene,p;s?(u[v+".up"]=g.viewInitial.up,u[v+".eye"]=g.viewInitial.eye,u[v+".center"]=g.viewInitial.center,p=!0):o&&(u[v+".up"]=null,u[v+".eye"]=null,u[v+".center"]=null,p=!0),p&&(u[c+".x"]=g.viewInitial.aspectratio.x,u[c+".y"]=g.viewInitial.aspectratio.y,u[c+".z"]=g.viewInitial.aspectratio.z,u[d]=g.viewInitial.aspectmode)}$c.call("_guiRelayout",e,u)}t(S8,"handleCamera3d");wi.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return ai(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_i.tooltip_basic,gravity:"ne",click:QTe};function Ple(e,r){var n=r.currentTarget,i=n._previousVal,s=e._fullLayout,o=s._subplots.gl3d||[],a=["xaxis","yaxis","zaxis"],l={},u={};if(i)u=i,n._previousVal=null;else{for(var f=0;f<o.length;f++){var h=o[f],v=s[h],c=h+".hovermode";l[c]=v.hovermode,u[c]=!1;for(var d=0;d<3;d++){var g=a[d],p=h+"."+g+".showspikes";u[p]=!1,l[p]=v[g].showspikes}}n._previousVal=l}return u}t(Ple,"getNextHover3d");function QTe(e,r){var n=Ple(e,r);$c.call("_guiRelayout",e,n)}t(QTe,"handleHover3d");wi.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return ai(e,"Zoom in")},attr:"zoom",val:"in",icon:_i.zoom_plus,click:M8};wi.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return ai(e,"Zoom out")},attr:"zoom",val:"out",icon:_i.zoom_minus,click:M8};wi.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return ai(e,"Reset")},attr:"reset",val:null,icon:_i.autoscale,click:M8};wi.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return ai(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_i.tooltip_basic,gravity:"ne",click:k8};function M8(e,r){for(var n=r.currentTarget,i=n.getAttribute("data-attr"),s=n.getAttribute("data-val")||!0,o=e._fullLayout,a=o._subplots.geo||[],l=0;l<a.length;l++){var u=a[l],f=o[u];if(i==="zoom"){var h=f.projection.scale,v=s==="in"?2*h:.5*h;$c.call("_guiRelayout",e,u+".projection.scale",v)}}i==="reset"&&q_(e,"geo")}t(M8,"handleGeo");wi.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return ai(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_i.tooltip_basic,gravity:"ne",click:k8};wi.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return ai(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:_i.tooltip_basic,gravity:"ne",click:k8};function Dle(e){var r=e._fullLayout;return r.hovermode?!1:r._has("cartesian")?r._isHoriz?"y":"x":"closest"}t(Dle,"getNextHover");function k8(e){var r=Dle(e);$c.call("_guiRelayout",e,"hovermode",r)}t(k8,"toggleHover");wi.resetViewSankey={name:"resetSankeyGroup",title:function(e){return ai(e,"Reset view")},icon:_i.home,click:function(e){for(var r={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var i=e._fullData[n]._viewInitial;r["node.groups"].push(i.node.groups.slice()),r["node.x"].push(i.node.x.slice()),r["node.y"].push(i.node.y.slice())}$c.call("restyle",e,r)}};wi.toggleHover={name:"toggleHover",title:function(e){return ai(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_i.tooltip_basic,gravity:"ne",click:function(e,r){var n=Ple(e,r);n.hovermode=Dle(e),$c.call("_guiRelayout",e,n)}};wi.resetViews={name:"resetViews",title:function(e){return ai(e,"Reset views")},icon:_i.home,click:function(e,r){var n=r.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),bu(e,r),n.setAttribute("data-attr","resetLastSave"),S8(e,r),q_(e,"geo"),q_(e,"mapbox")}};wi.toggleSpikelines={name:"toggleSpikelines",title:function(e){return ai(e,"Toggle Spike Lines")},icon:_i.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var r=e._fullLayout,n=r._cartesianSpikesEnabled;r._cartesianSpikesEnabled=n==="on"?"off":"on",$c.call("_guiRelayout",e,eAe(e))}};function eAe(e){for(var r=e._fullLayout,n=r._cartesianSpikesEnabled==="on",i=Rle.list(e,null,!0),s={},o=0;o<i.length;o++){var a=i[o];s[a._name+".showspikes"]=n?!0:a._showSpikeInitial}return s}t(eAe,"setSpikelineVisibility");wi.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return ai(e,"Reset view")},attr:"reset",icon:_i.home,click:function(e){q_(e,"mapbox")}};wi.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return ai(e,"Zoom in")},attr:"zoom",val:"in",icon:_i.zoom_plus,click:Ile};wi.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return ai(e,"Zoom out")},attr:"zoom",val:"out",icon:_i.zoom_minus,click:Ile};function Ile(e,r){for(var n=r.currentTarget,i=n.getAttribute("data-val"),s=e._fullLayout,o=s._subplots.mapbox||[],a=1.05,l={},u=0;u<o.length;u++){var f=o[u],h=s[f].zoom,v=i==="in"?a*h:h/a;l[f+".zoom"]=v}$c.call("_guiRelayout",e,l)}t(Ile,"handleMapboxZoom");function q_(e,r){for(var n=e._fullLayout,i=n._subplots[r]||[],s={},o=0;o<i.length;o++)for(var a=i[o],l=n[a]._subplot,u=l.viewInitial,f=Object.keys(u),h=0;h<f.length;h++){var v=f[h];s[a+"."+v]=u[v]}$c.call("_guiRelayout",e,s)}t(q_,"resetView");var zle=g8.exports,tAe=Object.keys(zle),Fle=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],Ble=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(Fle),Ug=[],rAe=t(function(e){if(Ble.indexOf(e._cat||e.name)===-1){var r=e.name,n=(e._cat||e.name).toLowerCase();Ug.indexOf(r)===-1&&Ug.push(r),Ug.indexOf(n)===-1&&Ug.push(n)}},"addToForeButtons");tAe.forEach(function(e){rAe(zle[e])});Ug.sort();var Ole={DRAW_MODES:Fle,backButtons:Ble,foreButtons:Ug},vU=Ole,Nle={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar",description:"Sets the orientation of the modebar."},bgcolor:{valType:"color",editType:"modebar",description:"Sets the background color of the modebar."},color:{valType:"color",editType:"modebar",description:"Sets the color of the icons in the modebar."},activecolor:{valType:"color",editType:"modebar",description:"Sets the color of the active or hovered on icons in the modebar."},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes related to the modebar,","including `hovermode`, `dragmode`, and `showspikes` at both the","root level and inside subplots. Defaults to `layout.uirevision`."].join(" ")},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to add.","Please note that these buttons will only be shown if they are","compatible with all trace types used in a graph.","Similar to `config.modeBarButtonsToAdd` option.","This may include *"+vU.backButtons.join("*, *")+"*."].join(" ")},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar",description:["Determines which predefined modebar buttons to remove.","Similar to `config.modeBarButtonsToRemove` option.","This may include *"+vU.foreButtons.join("*, *")+"*."].join(" ")}},aAe=Nt.exports,wm=$a.exports,nAe=ei,iAe=Nle,oAe=t(function(r,n){var i=r.modebar||{},s=nAe.newContainer(n,"modebar");function o(l,u){return aAe.coerce(i,s,iAe,l,u)}t(o,"coerce"),o("orientation"),o("bgcolor",wm.addOpacity(n.paper_bgcolor,.5));var a=wm.contrast(wm.rgb(n.modebar.bgcolor));o("color",wm.addOpacity(a,.3)),o("activecolor",wm.addOpacity(a,.7)),o("uirevision",n.uirevision),o("add"),o("remove")},"supplyLayoutDefaults"),E8=Va.exports,sAe=xn,id=Nt.exports,qle=y8,lAe=W2.version,uAe=new DOMParser;function Ule(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}t(Ule,"ModeBar");var gv=Ule.prototype;gv.update=function(e,r){this.graphInfo=e;var n=this.graphInfo._context,i=this.graphInfo._fullLayout,s="modebar-"+i._uid;this.element.setAttribute("id",s),this._uid=s,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var o=i.modebar,a=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";id.deleteRelatedStyleRule(s),id.addRelatedStyleRule(s,a+"#"+s+" .modebar-group","background-color: "+o.bgcolor),id.addRelatedStyleRule(s,"#"+s+" .modebar-btn .icon path","fill: "+o.color),id.addRelatedStyleRule(s,"#"+s+" .modebar-btn:hover .icon path","fill: "+o.activecolor),id.addRelatedStyleRule(s,"#"+s+" .modebar-btn.active .icon path","fill: "+o.activecolor);var l=!this.hasButtons(r),u=this.hasLogo!==n.displaylogo,f=this.locale!==n.locale;if(this.locale=n.locale,(l||u||f)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var h=this.getLogo();n.watermark&&(h.className=h.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(h,this.element.childNodes[0]):this.element.appendChild(h),this.hasLogo=!0}this.updateActiveButton()};gv.updateButtons=function(e){var r=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var i=r.createGroup();n.forEach(function(s){var o=s.name;if(!o)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(o)!==-1)throw new Error("button name '"+o+"' is taken");r.buttonsNames.push(o);var a=r.createButton(s);r.buttonElements.push(a),i.appendChild(a)}),r.element.appendChild(i)})};gv.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e};gv.createButton=function(e){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var i=e.title;i===void 0?i=e.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&n.setAttribute("data-title",i),e.attr!==void 0&&n.setAttribute("data-attr",e.attr);var s=e.val;s!==void 0&&(typeof s=="function"&&(s=s(this.graphInfo)),n.setAttribute("data-val",s));var o=e.click;if(typeof o!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(l){e.click(r.graphInfo,l),r.updateActiveButton(l.currentTarget)}),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&E8.select(n).classed("active",!0);var a=e.icon;return typeof a=="function"?n.appendChild(a()):n.appendChild(this.createIcon(a||qle.question)),n.setAttribute("data-gravity",e.gravity||"n"),n};gv.createIcon=function(e){var r=sAe(e.height)?Number(e.height):e.ascent-e.descent,n="http://www.w3.org/2000/svg",i;if(e.path){i=document.createElementNS(n,"svg"),i.setAttribute("viewBox",[0,0,e.width,r].join(" ")),i.setAttribute("class","icon");var s=document.createElementNS(n,"path");s.setAttribute("d",e.path),e.transform?s.setAttribute("transform",e.transform):e.ascent!==void 0&&s.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),i.appendChild(s)}if(e.svg){var o=uAe.parseFromString(e.svg,"application/xml");i=o.childNodes[0]}return i.setAttribute("height","1em"),i.setAttribute("width","1em"),i};gv.updateActiveButton=function(e){var r=this.graphInfo._fullLayout,n=e!==void 0?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var s=i.getAttribute("data-val")||!0,o=i.getAttribute("data-attr"),a=i.getAttribute("data-toggle")==="true",l=E8.select(i);if(a)o===n&&l.classed("active",!l.classed("active"));else{var u=o===null?o:id.nestedProperty(r,o).get();l.classed("active",u===s)}})};gv.hasButtons=function(e){var r=this.buttons;if(!r||e.length!==r.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==r[n].length)return!1;for(var i=0;i<e[n].length;i++)if(e[n][i].name!==r[n][i].name)return!1}return!0};function fAe(e){return e+" (v"+lAe+")"}t(fAe,"jsVersion");gv.getLogo=function(){var e=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",fAe(id._(this.graphInfo,"Produced with Plotly.js"))),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(qle.newplotlylogo)),e.appendChild(r),e};gv.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};gv.destroy=function(){id.removeElement(this.container.querySelector(".modebar")),id.deleteRelatedStyleRule(this._uid)};function cAe(e,r){var n=e._fullLayout,i=new Ule({graphInfo:e,container:n._modebardiv.node(),buttons:r});return n._privateplot&&E8.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}t(cAe,"createModeBar$1");var hAe=cAe,vAe=$o,dU=ho,kz=Na,dAe=Rf.isUnifiedHover,pAe=hAe,U_=g8.exports,gAe=Ole.DRAW_MODES,yAe=Nt.exports.extendDeep,mAe=t(function(r){var n=r._fullLayout,i=r._context,s=n._modeBar;if(!i.displayModeBar&&!i.watermark){s&&(s.destroy(),delete n._modeBar);return}if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var o=i.modeBarButtons,a;Array.isArray(o)&&o.length?a=AAe(o):!i.displayModeBar&&i.watermark?a=[]:a=xAe(r),s?s.update(r,a):n._modeBar=pAe(r,a)},"manageModeBar");function xAe(e){var r=e._fullLayout,n=e._fullData,i=e._context;function s(O,q){if(typeof q=="string"){if(q.toLowerCase()===O.toLowerCase())return!0}else{var H=q.name,j=q._cat||q.name;if(H===O||j===O.toLowerCase())return!0}return!1}t(s,"match");var o=r.modebar.add;typeof o=="string"&&(o=[o]);var a=r.modebar.remove;typeof a=="string"&&(a=[a]);var l=i.modeBarButtonsToAdd.concat(o.filter(function(O){for(var q=0;q<i.modeBarButtonsToRemove.length;q++)if(s(O,i.modeBarButtonsToRemove[q]))return!1;return!0})),u=i.modeBarButtonsToRemove.concat(a.filter(function(O){for(var q=0;q<i.modeBarButtonsToAdd.length;q++)if(s(O,i.modeBarButtonsToAdd[q]))return!1;return!0})),f=r._has("cartesian"),h=r._has("gl3d"),v=r._has("geo"),c=r._has("pie"),d=r._has("funnelarea"),g=r._has("gl2d"),p=r._has("ternary"),b=r._has("mapbox"),m=r._has("polar"),y=r._has("smith"),T=r._has("sankey"),_=bAe(r),M=dAe(r.hovermode),w=[];function x(O){if(!!O.length){for(var q=[],H=0;H<O.length;H++){for(var j=O[H],X=U_[j],G=X.name.toLowerCase(),$=(X._cat||X.name).toLowerCase(),te=!1,ee=0;ee<u.length;ee++){var ie=u[ee].toLowerCase();if(ie===G||ie===$){te=!0;break}}te||q.push(U_[j])}w.push(q)}}t(x,"addGroup");var A=["toImage"];i.showEditInChartStudio?A.push("editInChartStudio"):i.showSendToCloud&&A.push("sendDataToCloud"),x(A);var S=[],k=[],L=[],P=[];(f||g||c||d||p)+v+h+b+m+y>1?(k=["toggleHover"],L=["resetViews"]):v?(S=["zoomInGeo","zoomOutGeo"],k=["hoverClosestGeo"],L=["resetGeo"]):h?(k=["hoverClosest3d"],L=["resetCameraDefault3d","resetCameraLastSave3d"]):b?(S=["zoomInMapbox","zoomOutMapbox"],k=["toggleHover"],L=["resetViewMapbox"]):g?k=["hoverClosestGl2d"]:c?k=["hoverClosestPie"]:T?(k=["hoverClosestCartesian","hoverCompareCartesian"],L=["resetViewSankey"]):k=["toggleHover"],f&&(k=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(wAe(n)||M)&&(k=[]),(f||g)&&!_&&(S=["zoomIn2d","zoomOut2d","autoScale2d"],L[0]!=="resetViews"&&(L=["resetScale2d"])),h?P=["zoom3d","pan3d","orbitRotation","tableRotation"]:(f||g)&&!_||p?P=["zoom2d","pan2d"]:b||v?P=["pan2d"]:m&&(P=["zoom2d"]),_Ae(n)&&P.push("select2d","lasso2d");var D=[],B=t(function(O){D.indexOf(O)===-1&&k.indexOf(O)!==-1&&D.push(O)},"enableHover");if(Array.isArray(l)){for(var z=[],R=0;R<l.length;R++){var F=l[R];typeof F=="string"?(F=F.toLowerCase(),gAe.indexOf(F)!==-1?(r._has("mapbox")||r._has("cartesian"))&&P.push(F):F==="togglespikelines"?B("toggleSpikelines"):F==="togglehover"?B("toggleHover"):F==="hovercompare"?B("hoverCompareCartesian"):F==="hoverclosest"?(B("hoverClosestCartesian"),B("hoverClosestGeo"),B("hoverClosest3d"),B("hoverClosestGl2d"),B("hoverClosestPie")):F==="v1hovermode"&&(B("toggleHover"),B("hoverClosestCartesian"),B("hoverCompareCartesian"),B("hoverClosestGeo"),B("hoverClosest3d"),B("hoverClosestGl2d"),B("hoverClosestPie"))):z.push(F)}l=z}return x(P),x(S.concat(L)),x(D),TAe(w,l)}t(xAe,"getButtonGroups");function bAe(e){for(var r=vAe.list({_fullLayout:e},null,!0),n=0;n<r.length;n++)if(!r[n].fixedrange)return!1;return!0}t(bAe,"areAllAxesFixed");function _Ae(e){for(var r=!1,n=0;n<e.length&&!r;n++){var i=e[n];!i._module||!i._module.selectPoints||(kz.traceIs(i,"scatter-like")?(dU.hasMarkers(i)||dU.hasText(i))&&(r=!0):kz.traceIs(i,"box-violin")?(i.boxpoints==="all"||i.points==="all")&&(r=!0):r=!0)}return r}t(_Ae,"isSelectable");function wAe(e){for(var r=0;r<e.length;r++)if(!kz.traceIs(e[r],"noHover"))return!1;return!0}t(wAe,"hasNoHover");function TAe(e,r){if(r.length)if(Array.isArray(r[0]))for(var n=0;n<r.length;n++)e.push(r[n]);else e.push(r);return e}t(TAe,"appendButtonsToGroups");function AAe(e){for(var r=yAe([],e),n=0;n<r.length;n++)for(var i=r[n],s=0;s<i.length;s++){var o=i[s];if(typeof o=="string")if(U_[o]!==void 0)r[n][s]=U_[o];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return r}t(AAe,"fillCustomButton");var Hle={moduleType:"component",name:"modebar",layoutAttributes:Nle,supplyLayoutDefaults:oAe,manage:mAe},mg={},KT,pU;function $le(){if(pU)return KT;pU=1;var e=yl.FROM_BL;return KT=t(function(n,i,s){s===void 0&&(s=e[n.constraintoward||"center"]);var o=[n.r2l(n.range[0]),n.r2l(n.range[1])],a=o[0]+(o[1]-o[0])*s;n.range=n._input.range=[n.l2r(a+(o[0]-a)*i),n.l2r(a+(o[1]-a)*i)],n.setScale()},"scaleZoom"),KT}t($le,"requireScale_zoom");var gU;function I0(){if(gU)return mg;gU=1;var e=Nt.exports,r=Lh(),n=$o.id2name,i=Jl,s=$le(),o=hd(),a=jn.ALMOST_EQUAL,l=yl.FROM_BL;mg.handleDefaults=function(p,b,m){var y=m.axIds,T=m.axHasImage,_=b._axisConstraintGroups=[],M=b._axisMatchGroups=[],w,x,A,S,k,L,P,D;for(w=0;w<y.length;w++)S=n(y[w]),k=p[S],L=b[S],u(k,L,{axIds:y,layoutOut:b,hasImage:T[S]});function B(G,$){for(w=0;w<G.length;w++){x=G[w];for(A in x)b[n(A)][$]=x}}for(t(B,"stash"),B(M,"_matchGroup"),w=0;w<_.length;w++){x=_[w];for(A in x)if(L=b[n(A)],L.fixedrange){for(var z in x){var R=n(z);(p[R]||{}).fixedrange===!1&&e.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),b[R].fixedrange=!0}break}}for(w=0;w<_.length;){x=_[w];for(A in x){L=b[n(A)],L._matchGroup&&Object.keys(L._matchGroup).length===Object.keys(x).length&&(_.splice(w,1),w--);break}w++}B(_,"_constraintGroup");var F=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],O=!1,q=!1;function H(){D=L[P],P==="rangebreaks"&&(q=L._hasDayOfWeekBreaks)}for(t(H,"setAttrVal"),w=0;w<M.length;w++){x=M[w];for(var j=0;j<F.length;j++){P=F[j],D=null;var X;for(A in x)if(S=n(A),k=p[S],L=b[S],P in L){if(!L.matches&&(X=L,P in k)){H();break}D===null&&P in k&&H()}if(P==="range"&&D&&(O=!0),P==="autorange"&&D===null&&O&&(D=!1),D===null&&P in X&&(D=X[P]),D!==null)for(A in x)L=b[n(A)],L[P]=P==="range"?D.slice():D,P==="rangebreaks"&&(L._hasDayOfWeekBreaks=q,o(L,b))}}};function u(p,b,m){var y=m.axIds,T=m.layoutOut,_=m.hasImage,M=T._axisConstraintGroups,w=T._axisMatchGroups,x=b._id,A=x.charAt(0),S=((T._splomAxes||{})[A]||{})[x]||{},k=b._id,L=k.charAt(0)==="x";b._matchGroup=null,b._constraintGroup=null;function P(ie,se){return e.coerce(p,b,i,ie,se)}t(P,"coerce"),P("constrain",_?"domain":"range"),e.coerce(p,b,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var D=b.type,B,z,R=[];for(B=0;B<y.length;B++)if(z=y[B],z!==k){var F=T[n(z)];F.type===D&&R.push(z)}var O=h(M,k);if(O){var q=[];for(B=0;B<R.length;B++)z=R[B],O[z]||q.push(z);R=q}var H=R.length,j,X;H&&(p.matches||S.matches)&&(j=e.coerce(p,b,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(S.matches)!==-1?S.matches:void 0}},"matches"));var G=_&&!L?b.anchor:void 0;if(H&&!j&&(p.scaleanchor||G)&&(X=e.coerce(p,b,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",G)),j){b._matchGroup=v(w,k,j,1);var $=T[n(j)],te=f(T,b)/f(T,$);L!==(j.charAt(0)==="x")&&(te=(L?"x":"y")+te),v(M,k,j,te)}else p.matches&&y.indexOf(p.matches)!==-1&&e.warn("ignored "+b._name+'.matches: "'+p.matches+'" to avoid an infinite loop');if(X){var ee=P("scaleratio");ee||(ee=b.scaleratio=1),v(M,k,X,ee)}else p.scaleanchor&&y.indexOf(p.scaleanchor)!==-1&&e.warn("ignored "+b._name+'.scaleanchor: "'+p.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}t(u,"handleOneAxDefaults");function f(p,b){var m=b.domain;return m||(m=p[n(b.overlaying)].domain),m[1]-m[0]}t(f,"extent");function h(p,b){for(var m=0;m<p.length;m++)if(p[m][b])return p[m];return null}t(h,"getConstraintGroup");function v(p,b,m,y){var T,_,M,w,x,A=h(p,b);A===null?(A={},A[b]=1,x=p.length,p.push(A)):x=p.indexOf(A);var S=Object.keys(A);for(T=0;T<p.length;T++)if(M=p[T],T!==x&&M[m]){var k=M[m];for(_=0;_<S.length;_++)w=S[_],M[w]=c(k,c(y,A[w]));p.splice(x,1);return}if(y!==1)for(_=0;_<S.length;_++){var L=S[_];A[L]=c(y,A[L])}A[m]=1}t(v,"updateConstraintGroups");function c(p,b){var m="",y="",T,_;typeof p=="string"&&(m=p.match(/^[xy]*/)[0],T=m.length,p=+p.substr(T)),typeof b=="string"&&(y=b.match(/^[xy]*/)[0],_=y.length,b=+b.substr(_));var M=p*b;return!T&&!_?M:!T||!_||m.charAt(0)===y.charAt(0)?m+y+p*b:T===_?M:(T>_?m.substr(_):y.substr(T))+M}t(c,"multiplyScales");function d(p,b){for(var m=b._size,y=m.h/m.w,T={},_=Object.keys(p),M=0;M<_.length;M++){var w=_[M],x=p[w];if(typeof x=="string"){var A=x.match(/^[xy]*/)[0],S=A.length;x=+x.substr(S);for(var k=A.charAt(0)==="y"?y:1/y,L=0;L<S;L++)x*=k}T[w]=x}return T}t(d,"finalRatios"),mg.enforce=t(function(b){var m=b._fullLayout,y=m._axisConstraintGroups||[],T,_,M,w,x,A,S,k;for(T=0;T<y.length;T++){M=d(y[T],m);var L=Object.keys(M),P=1/0,D=0,B=1/0,z={},R={},F=!1;for(_=0;_<L.length;_++)w=L[_],R[w]=x=m[n(w)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),z[w]=A=Math.abs(x._m)/M[w],P=Math.min(P,A),(x.constrain==="domain"||!x._constraintShrinkable)&&(B=Math.min(B,A)),delete x._constraintShrinkable,D=Math.max(D,A),x.constrain==="domain"&&(F=!0);if(!(P>a*D&&!F)){for(_=0;_<L.length;_++)if(w=L[_],A=z[w],x=R[w],S=x.constrain,A!==B||S==="domain")if(k=A/B,S==="range")s(x,k);else{var O=x._inputDomain,q=(x.domain[1]-x.domain[0])/(O[1]-O[0]),H=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if(k/=q,k*H<1){x.domain=x._input.domain=O.slice(),s(x,k);continue}if(H<1&&(x.range=x._input.range=x._inputRange.slice(),k*=H),x.autorange){var j=x.r2l(x.range[0]),X=x.r2l(x.range[1]),G=(j+X)/2,$=G,te=G,ee=Math.abs(X-G),ie=G-ee*k*1.0001,se=G+ee*k*1.0001,W=r.makePadFn(m,x,0),ne=r.makePadFn(m,x,1);g(x,k);var he=Math.abs(x._m),re=r.concatExtremes(b,x),ae=re.min,fe=re.max,ce,xe;for(xe=0;xe<ae.length;xe++)ce=ae[xe].val-W(ae[xe])/he,ce>ie&&ce<$&&($=ce);for(xe=0;xe<fe.length;xe++)ce=fe[xe].val+ne(fe[xe])/he,ce<se&&ce>te&&(te=ce);var Te=(te-$)/(2*ee);k/=Te,$=x.l2r($),te=x.l2r(te),x.range=x._input.range=j<X?[$,te]:[te,$]}g(x,k)}}}},"enforce"),mg.getAxisGroup=t(function(b,m){for(var y=b._axisMatchGroups,T=0;T<y.length;T++){var _=y[T];if(_[m])return"g"+T}return m},"getAxisGroup"),mg.clean=t(function(b,m){if(m._inputDomain){for(var y=!1,T=m._id,_=b._fullLayout._axisConstraintGroups,M=0;M<_.length;M++)if(_[M][T]){y=!0;break}(!y||m.constrain!=="domain")&&(m._input.domain=m.domain=m._inputDomain,delete m._inputDomain)}},"clean");function g(p,b){var m=p._inputDomain,y=l[p.constraintoward],T=m[0]+(m[1]-m[0])*y;p.domain=p._input.domain=[T+(m[0]-T)/b,T+(m[1]-T)/b],p.setScale()}return t(g,"updateDomain"),mg}t(I0,"requireConstraints");(function(e){var r=Va.exports,n=Na,i=so.exports,s=Nt.exports,o=xw,a=$a.exports,l=bn.exports,u=Ey,f=Hle,h=nn(),v=yl,c=I0(),d=c.enforce,g=c.clean,p=Lh().doAutoRange,b="start",m="middle",y="end";e.layoutStyles=function(P){return s.syncOrAsync([i.doAutoMargin,_],P)};function T(P,D,B){for(var z=0;z<B.length;z++){var R=B[z][0],F=B[z][1];if(!(R[0]>=P[1]||R[1]<=P[0])&&F[0]<D[1]&&F[1]>D[0])return!0}return!1}t(T,"overlappingDomain");function _(P){var D=P._fullLayout,B=D._size,z=B.p,R=h.list(P,"",!0),F,O,q,H,j,X;if(D._paperdiv.style({width:P._context.responsive&&D.autosize&&!P._context._hasZeroWidth&&!P.layout.width?"100%":D.width+"px",height:P._context.responsive&&D.autosize&&!P._context._hasZeroHeight&&!P.layout.height?"100%":D.height+"px"}).selectAll(".main-svg").call(l.setSize,D.width,D.height),P._context.setBackground(P,D.paper_bgcolor),e.drawMainTitle(P),f.manage(P),!D._has("cartesian"))return i.previousPromises(P);function G(Jt,kt,ft){var zt=Jt._lw/2;if(Jt._id.charAt(0)==="x"){if(kt){if(ft==="top")return kt._offset-z-zt}else return B.t+B.h*(1-(Jt.position||0))+zt%1;return kt._offset+kt._length+z+zt}if(kt){if(ft==="right")return kt._offset+kt._length+z+zt}else return B.l+B.w*(Jt.position||0)+zt%1;return kt._offset-z-zt}for(t(G,"getLinePosition"),F=0;F<R.length;F++){H=R[F];var $=H._anchorAxis;H._linepositions={},H._lw=l.crispRound(P,H.linewidth,1),H._mainLinePosition=G(H,$,H.side),H._mainMirrorPosition=H.mirror&&$?G(H,$,v.OPPOSITE_SIDE[H.side]):null}var te=[],ee=[],ie=[],se=a.opacity(D.paper_bgcolor)===1&&a.opacity(D.plot_bgcolor)===1&&D.paper_bgcolor===D.plot_bgcolor;for(O in D._plots)if(q=D._plots[O],q.mainplot)q.bg&&q.bg.remove(),q.bg=void 0;else{var W=q.xaxis.domain,ne=q.yaxis.domain,he=q.plotgroup;if(T(W,ne,ie)){var re=he.node(),ae=q.bg=s.ensureSingle(he,"rect","bg");re.insertBefore(ae.node(),re.childNodes[0]),ee.push(O)}else he.select("rect.bg").remove(),ie.push([W,ne]),se||(te.push(O),ee.push(O))}var fe=D._bgLayer.selectAll(".bg").data(te);for(fe.enter().append("rect").classed("bg",!0),fe.exit().remove(),fe.each(function(Jt){D._plots[Jt].bg=r.select(this)}),F=0;F<ee.length;F++)q=D._plots[ee[F]],j=q.xaxis,X=q.yaxis,q.bg&&j._offset!==void 0&&X._offset!==void 0&&q.bg.call(l.setRect,j._offset-z,X._offset-z,j._length+2*z,X._length+2*z).call(a.fill,D.plot_bgcolor).style("stroke-width",0);if(!D._hasOnlyLargeSploms)for(O in D._plots){q=D._plots[O],j=q.xaxis,X=q.yaxis;var ce=q.clipId="clip"+D._uid+O+"plot",xe=s.ensureSingleById(D._clips,"clipPath",ce,function(Jt){Jt.classed("plotclip",!0).append("rect")});q.clipRect=xe.select("rect").attr({width:j._length,height:X._length}),l.setTranslate(q.plot,j._offset,X._offset);var Te,me;q._hasClipOnAxisFalse?(Te=null,me=ce):(Te=ce,me=null),l.setClipUrl(q.plot,Te,P),q.layerClipId=me}var pe,oe,de,ye,we,Ee,De,Fe,qe,Je,Ge,et,Ue;function Ye(Jt){return"M"+pe+","+Jt+"H"+oe}t(Ye,"xLinePath");function $e(Jt){return"M"+j._offset+","+Jt+"h"+j._length}t($e,"xLinePathFree");function Ct(Jt){return"M"+Jt+","+Fe+"V"+De}t(Ct,"yLinePath");function It(Jt){return"M"+Jt+","+X._offset+"v"+X._length}t(It,"yLinePathFree");function Vt(Jt,kt,ft){if(!Jt.showline||O!==Jt._mainSubplot)return"";if(!Jt._anchorAxis)return ft(Jt._mainLinePosition);var zt=kt(Jt._mainLinePosition);return Jt.mirror&&(zt+=kt(Jt._mainMirrorPosition)),zt}t(Vt,"mainPath");for(O in D._plots){q=D._plots[O],j=q.xaxis,X=q.yaxis;var $t="M0,0";M(j,O)&&(we=x(j,"left",X,R),pe=j._offset-(we?z+we:0),Ee=x(j,"right",X,R),oe=j._offset+j._length+(Ee?z+Ee:0),de=G(j,X,"bottom"),ye=G(j,X,"top"),Ue=!j._anchorAxis||O!==j._mainSubplot,Ue&&(j.mirror==="allticks"||j.mirror==="all")&&(j._linepositions[O]=[de,ye]),$t=Vt(j,Ye,$e),Ue&&j.showline&&(j.mirror==="all"||j.mirror==="allticks")&&($t+=Ye(de)+Ye(ye)),q.xlines.style("stroke-width",j._lw+"px").call(a.stroke,j.showline?j.linecolor:"rgba(0,0,0,0)")),q.xlines.attr("d",$t);var Gt="M0,0";M(X,O)&&(Ge=x(X,"bottom",j,R),De=X._offset+X._length+(Ge?z:0),et=x(X,"top",j,R),Fe=X._offset-(et?z:0),qe=G(X,j,"left"),Je=G(X,j,"right"),Ue=!X._anchorAxis||O!==X._mainSubplot,Ue&&(X.mirror==="allticks"||X.mirror==="all")&&(X._linepositions[O]=[qe,Je]),Gt=Vt(X,Ct,It),Ue&&X.showline&&(X.mirror==="all"||X.mirror==="allticks")&&(Gt+=Ct(qe)+Ct(Je)),q.ylines.style("stroke-width",X._lw+"px").call(a.stroke,X.showline?X.linecolor:"rgba(0,0,0,0)")),q.ylines.attr("d",Gt)}return h.makeClipPaths(P),i.previousPromises(P)}t(_,"lsInner");function M(P,D){return(P.ticks||P.showline)&&(D===P._mainSubplot||P.mirror==="all"||P.mirror==="allticks")}t(M,"shouldShowLinesOrTicks");function w(P,D,B){if(!B.showline||!B._lw)return!1;if(B.mirror==="all"||B.mirror==="allticks")return!0;var z=B._anchorAxis;if(!z)return!1;var R=v.FROM_BL[D];return B.side===D?z.domain[R]===P.domain[R]:B.mirror&&z.domain[1-R]===P.domain[1-R]}t(w,"shouldShowLineThisSide");function x(P,D,B,z){if(w(P,D,B))return B._lw;for(var R=0;R<z.length;R++){var F=z[R];if(F._mainAxis===B._mainAxis&&w(P,D,F))return F._lw}return 0}t(x,"findCounterAxisLineWidth"),e.drawMainTitle=function(P){var D=P._fullLayout,B=k(D),z=L(D);u.draw(P,"gtitle",{propContainer:D,propName:"title.text",placeholder:D._dfltTitle.plot,attributes:{x:A(D,B),y:S(D,z),"text-anchor":B,dy:z}})};function A(P,D){var B=P.title,z=P._size,R=0;switch(D===b?R=B.pad.l:D===y&&(R=-B.pad.r),B.xref){case"paper":return z.l+z.w*B.x+R;case"container":default:return P.width*B.x+R}}t(A,"getMainTitleX");function S(P,D){var B=P.title,z=P._size,R=0;if(D==="0em"||!D?R=-B.pad.b:D===v.CAP_SHIFT+"em"&&(R=B.pad.t),B.y==="auto")return z.t/2;switch(B.yref){case"paper":return z.t+z.h-z.h*B.y+R;case"container":default:return P.height-P.height*B.y+R}}t(S,"getMainTitleY");function k(P){var D=P.title,B=m;return s.isRightAnchor(D)?B=y:s.isLeftAnchor(D)&&(B=b),B}t(k,"getMainTitleTextAnchor");function L(P){var D=P.title,B="0em";return s.isTopAnchor(D)?B=v.CAP_SHIFT+"em":s.isMiddleAnchor(D)&&(B=v.MID_SHIFT+"em"),B}t(L,"getMainTitleDy"),e.doTraceStyle=function(P){var D=P.calcdata,B=[],z;for(z=0;z<D.length;z++){var R=D[z],F=R[0]||{},O=F.trace||{},q=O._module||{},H=q.arraysToCalcdata;H&&H(R,O);var j=q.editStyle;j&&B.push({fn:j,cd0:F})}if(B.length){for(z=0;z<B.length;z++){var X=B[z];X.fn(P,X.cd0)}o(P),e.redrawReglTraces(P)}return i.style(P),n.getComponentMethod("legend","draw")(P),i.previousPromises(P)},e.doColorBars=function(P){return n.getComponentMethod("colorbar","draw")(P),i.previousPromises(P)},e.layoutReplot=function(P){var D=P.layout;return P.layout=void 0,n.call("_doPlot",P,"",D)},e.doLegend=function(P){return n.getComponentMethod("legend","draw")(P),i.previousPromises(P)},e.doTicksRelayout=function(P){return h.draw(P,"redraw"),P._fullLayout._hasOnlyLargeSploms&&(n.subplotsRegistry.splom.updateGrid(P),o(P),e.redrawReglTraces(P)),e.drawMainTitle(P),i.previousPromises(P)},e.doModeBar=function(P){var D=P._fullLayout;f.manage(P);for(var B=0;B<D._basePlotModules.length;B++){var z=D._basePlotModules[B].updateFx;z&&z(P)}return i.previousPromises(P)},e.doCamera=function(P){for(var D=P._fullLayout,B=D._subplots.gl3d,z=0;z<B.length;z++){var R=D[B[z]],F=R._scene;F.setViewport(R)}},e.drawData=function(P){var D=P._fullLayout;o(P);for(var B=D._basePlotModules,z=0;z<B.length;z++)B[z].plot(P);return e.redrawReglTraces(P),i.style(P),n.getComponentMethod("selections","draw")(P),n.getComponentMethod("shapes","draw")(P),n.getComponentMethod("annotations","draw")(P),n.getComponentMethod("images","draw")(P),D._replotting=!1,i.previousPromises(P)},e.redrawReglTraces=function(P){var D=P._fullLayout;if(D._has("regl")){var B=P._fullData,z=[],R=[],F,O;for(D._hasOnlyLargeSploms&&D._splomGrid.draw(),F=0;F<B.length;F++){var q=B[F];q.visible===!0&&q._length!==0&&(q.type==="splom"?D._splomScenes[q.uid].draw():q.type==="scattergl"?s.pushUnique(z,q.xaxis+q.yaxis):q.type==="scatterpolargl"&&s.pushUnique(R,q.subplot))}for(F=0;F<z.length;F++)O=D._plots[z[F]],O._scene&&O._scene.draw();for(F=0;F<R.length;F++)O=D[R[F]]._subplot,O._scene&&O._scene.draw()}},e.doAutoRangeAndConstraints=function(P){for(var D=h.list(P,"",!0),B,z={},R=0;R<D.length;R++)if(B=D[R],!z[B._id]){z[B._id]=1,g(P,B),p(P,B);var F=B._matchGroup;if(F)for(var O in F){var q=h.getFromId(P,O);p(P,q,B.range),z[O]=1}}d(P)},e.finalDraw=function(P){n.getComponentMethod("rangeslider","draw")(P),n.getComponentMethod("rangeselector","draw")(P)},e.drawMarginPushers=function(P){n.getComponentMethod("legend","draw")(P),n.getComponentMethod("rangeselector","draw")(P),n.getComponentMethod("sliders","draw")(P),n.getComponentMethod("updatemenus","draw")(P),n.getComponentMethod("colorbar","draw")(P)}})(tx);var SAe=P0.readPaths,MAe=w8,Vle=C0.clearOutlineControllers,JT=$a.exports,Gle=bn.exports,kAe=ei.arrayEditor,jle=D0,EAe=jle.getPathString,Yle={draw:Sw,drawOne:Wle,activateLastSelection:RAe};function Sw(e){var r=e._fullLayout;Vle(e),r._selectionLayer.selectAll("path").remove();for(var n in r._plots){var i=r._plots[n].selectionLayer;i&&i.selectAll("path").remove()}for(var s=0;s<r.selections.length;s++)Wle(e,s)}t(Sw,"draw$a");function Mw(e){return e._context.editSelection}t(Mw,"couldHaveActiveSelection");function Wle(e,r){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+r+'"]').remove();var n=jle.makeSelectionsOptionsAndPlotinfo(e,r),i=n.options,s=n.plotinfo;if(!i._input)return;o(e._fullLayout._selectionLayer);function o(a){var l=EAe(e,i),u={"data-index":r,"fill-rule":"evenodd",d:l},f=i.opacity,h="rgba(0,0,0,0)",v=i.line.color||JT.contrast(e._fullLayout.plot_bgcolor),c=i.line.width,d=i.line.dash;c||(c=5,d="solid");var g=Mw(e)&&e._fullLayout._activeSelectionIndex===r;g&&(h=e._fullLayout.activeselection.fillcolor,f=e._fullLayout.activeselection.opacity);for(var p=[],b=1;b>=0;b--){var m=a.append("path").attr(u).style("opacity",b?.1:f).call(JT.stroke,v).call(JT.fill,h).call(Gle.dashLine,b?"solid":d,b?4+c:c);if(CAe(m,e,i),g){var y=kAe(e.layout,"selections",i);m.style({cursor:"move"});var T={element:m.node(),plotinfo:s,gd:e,editHelpers:y,isActiveSelection:!0},_=SAe(l,e);MAe(_,m,T)}else m.style("pointer-events",b?"all":"none");p[b]=m}var M=p[0],w=p[1];w.node().addEventListener("click",function(){return LAe(e,M)})}t(o,"drawSelection")}t(Wle,"drawOne$1");function CAe(e,r,n){var i=n.xref+n.yref;Gle.setClipUrl(e,"clip"+r._fullLayout._uid+i,r)}t(CAe,"setClipPath");function LAe(e,r){if(!!Mw(e)){var n=r.node(),i=+n.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeSelectionIndex){Ez(e);return}e._fullLayout._activeSelectionIndex=i,e._fullLayout._deactivateSelection=Ez,Sw(e)}}}t(LAe,"activateSelection");function RAe(e){if(!!Mw(e)){var r=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=r,e._fullLayout._deactivateSelection=Ez,Sw(e)}}t(RAe,"activateLastSelection$1");function Ez(e){if(!!Mw(e)){var r=e._fullLayout._activeSelectionIndex;r>=0&&(Vle(e),delete e._fullLayout._activeSelectionIndex,Sw(e))}}t(Ez,"deactivateSelection");function PAe(){var e,r=0,n=!1;function i(s,o){return e.list.push({type:s,data:o?JSON.parse(JSON.stringify(o)):void 0}),e}return t(i,"push"),e={list:[],segmentId:function(){return r++},checkIntersection:function(s,o){return i("check",{seg1:s,seg2:o})},segmentChop:function(s,o){return i("div_seg",{seg:s,pt:o}),i("chop",{seg:s,pt:o})},statusRemove:function(s){return i("pop_seg",{seg:s})},segmentUpdate:function(s){return i("seg_update",{seg:s})},segmentNew:function(s,o){return i("new_seg",{seg:s,primary:o})},segmentRemove:function(s){return i("rem_seg",{seg:s})},tempStatus:function(s,o,a){return i("temp_status",{seg:s,above:o,below:a})},rewind:function(s){return i("rewind",{seg:s})},status:function(s,o,a){return i("status",{seg:s,above:o,below:a})},vert:function(s){return s===n?e:(n=s,i("vert",{x:s}))},log:function(s){return typeof s!="string"&&(s=JSON.stringify(s,!1,"  ")),i("log",{txt:s})},reset:function(){return i("reset")},selected:function(s){return i("selected",{segs:s})},chainStart:function(s){return i("chain_start",{seg:s})},chainRemoveHead:function(s,o){return i("chain_rem_head",{index:s,pt:o})},chainRemoveTail:function(s,o){return i("chain_rem_tail",{index:s,pt:o})},chainNew:function(s,o){return i("chain_new",{pt1:s,pt2:o})},chainMatch:function(s){return i("chain_match",{index:s})},chainClose:function(s){return i("chain_close",{index:s})},chainAddHead:function(s,o){return i("chain_add_head",{index:s,pt:o})},chainAddTail:function(s,o){return i("chain_add_tail",{index:s,pt:o})},chainConnect:function(s,o){return i("chain_con",{index1:s,index2:o})},chainReverse:function(s){return i("chain_rev",{index:s})},chainJoin:function(s,o){return i("chain_join",{index1:s,index2:o})},done:function(){return i("done")}},e}t(PAe,"BuildLog$1");var DAe=PAe;function IAe(e){typeof e!="number"&&(e=1e-10);var r={epsilon:function(n){return typeof n=="number"&&(e=n),e},pointAboveOrOnLine:function(n,i,s){var o=i[0],a=i[1],l=s[0],u=s[1],f=n[0],h=n[1];return(l-o)*(h-a)-(u-a)*(f-o)>=-e},pointBetween:function(n,i,s){var o=n[1]-i[1],a=s[0]-i[0],l=n[0]-i[0],u=s[1]-i[1],f=l*a+o*u;if(f<e)return!1;var h=a*a+u*u;return!(f-h>-e)},pointsSameX:function(n,i){return Math.abs(n[0]-i[0])<e},pointsSameY:function(n,i){return Math.abs(n[1]-i[1])<e},pointsSame:function(n,i){return r.pointsSameX(n,i)&&r.pointsSameY(n,i)},pointsCompare:function(n,i){return r.pointsSameX(n,i)?r.pointsSameY(n,i)?0:n[1]<i[1]?-1:1:n[0]<i[0]?-1:1},pointsCollinear:function(n,i,s){var o=n[0]-i[0],a=n[1]-i[1],l=i[0]-s[0],u=i[1]-s[1];return Math.abs(o*u-l*a)<e},linesIntersect:function(n,i,s,o){var a=i[0]-n[0],l=i[1]-n[1],u=o[0]-s[0],f=o[1]-s[1],h=a*f-l*u;if(Math.abs(h)<e)return!1;var v=n[0]-s[0],c=n[1]-s[1],d=(u*c-f*v)/h,g=(a*c-l*v)/h,p={alongA:0,alongB:0,pt:[n[0]+d*a,n[1]+d*l]};return d<=-e?p.alongA=-2:d<e?p.alongA=-1:d-1<=-e?p.alongA=0:d-1<e?p.alongA=1:p.alongA=2,g<=-e?p.alongB=-2:g<e?p.alongB=-1:g-1<=-e?p.alongB=0:g-1<e?p.alongB=1:p.alongB=2,p},pointInsideRegion:function(n,i){for(var s=n[0],o=n[1],a=i[i.length-1][0],l=i[i.length-1][1],u=!1,f=0;f<i.length;f++){var h=i[f][0],v=i[f][1];v-o>e!=l-o>e&&(a-h)*(o-v)/(l-v)+h-s>e&&(u=!u),a=h,l=v}return u}};return r}t(IAe,"Epsilon$1");var zAe=IAe,FAe={create:function(){var e={root:{root:!0,next:null},exists:function(r){return!(r===null||r===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(r,n){for(var i=e.root,s=e.root.next;s!==null;){if(n(s)){r.prev=s.prev,r.next=s,s.prev.next=r,s.prev=r;return}i=s,s=s.next}i.next=r,r.prev=i,r.next=null},findTransition:function(r){for(var n=e.root,i=e.root.next;i!==null&&!r(i);)n=i,i=i.next;return{before:n===e.root?null:n,after:i,insert:function(s){return s.prev=n,s.next=i,n.next=s,i!==null&&(i.prev=s),s}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}},BAe=FAe,Tm=BAe;function OAe(e,r,n){function i(g,p){return{id:n?n.segmentId():-1,start:g,end:p,myFill:{above:null,below:null},otherFill:null}}t(i,"segmentNew");function s(g,p,b){return{id:n?n.segmentId():-1,start:g,end:p,myFill:{above:b.myFill.above,below:b.myFill.below},otherFill:null}}t(s,"segmentCopy");var o=Tm.create();function a(g,p,b,m,y,T){var _=r.pointsCompare(p,y);return _!==0?_:r.pointsSame(b,T)?0:g!==m?g?1:-1:r.pointAboveOrOnLine(b,m?y:T,m?T:y)?1:-1}t(a,"eventCompare");function l(g,p){o.insertBefore(g,function(b){var m=a(g.isStart,g.pt,p,b.isStart,b.pt,b.other.pt);return m<0})}t(l,"eventAdd");function u(g,p){var b=Tm.node({isStart:!0,pt:g.start,seg:g,primary:p,other:null,status:null});return l(b,g.end),b}t(u,"eventAddSegmentStart");function f(g,p,b){var m=Tm.node({isStart:!1,pt:p.end,seg:p,primary:b,other:g,status:null});g.other=m,l(m,g.pt)}t(f,"eventAddSegmentEnd");function h(g,p){var b=u(g,p);return f(b,g,p),b}t(h,"eventAddSegment");function v(g,p){n&&n.segmentChop(g.seg,p),g.other.remove(),g.seg.end=p,g.other.pt=p,l(g.other,g.pt)}t(v,"eventUpdateEnd");function c(g,p){var b=s(p,g.seg.end,g.seg);return v(g,p),h(b,g.primary)}t(c,"eventDivide");function d(g,p){var b=Tm.create();function m(B,z){var R=B.seg.start,F=B.seg.end,O=z.seg.start,q=z.seg.end;return r.pointsCollinear(R,O,q)?r.pointsCollinear(F,O,q)||r.pointAboveOrOnLine(F,O,q)?1:-1:r.pointAboveOrOnLine(R,O,q)?1:-1}t(m,"statusCompare");function y(B){return b.findTransition(function(z){var R=m(B,z.ev);return R>0})}t(y,"statusFindSurrounding");function T(B,z){var R=B.seg,F=z.seg,O=R.start,q=R.end,H=F.start,j=F.end;n&&n.checkIntersection(R,F);var X=r.linesIntersect(O,q,H,j);if(X===!1){if(!r.pointsCollinear(O,q,H)||r.pointsSame(O,j)||r.pointsSame(q,H))return!1;var G=r.pointsSame(O,H),$=r.pointsSame(q,j);if(G&&$)return z;var te=!G&&r.pointBetween(O,H,j),ee=!$&&r.pointBetween(q,H,j);if(G)return ee?c(z,q):c(B,j),z;te&&($||(ee?c(z,q):c(B,j)),c(z,O))}else X.alongA===0&&(X.alongB===-1?c(B,H):X.alongB===0?c(B,X.pt):X.alongB===1&&c(B,j)),X.alongB===0&&(X.alongA===-1?c(z,O):X.alongA===0?c(z,X.pt):X.alongA===1&&c(z,q));return!1}t(T,"checkIntersection");for(var _=[];!o.isEmpty();){var M=o.getHead();if(n&&n.vert(M.pt[0]),M.isStart){let B=function(){if(x){var z=T(M,x);if(z)return z}return A?T(M,A):!1};t(B,"checkBothIntersections"),n&&n.segmentNew(M.seg,M.primary);var w=y(M),x=w.before?w.before.ev:null,A=w.after?w.after.ev:null;n&&n.tempStatus(M.seg,x?x.seg:!1,A?A.seg:!1);var S=B();if(S){if(e){var k;M.seg.myFill.below===null?k=!0:k=M.seg.myFill.above!==M.seg.myFill.below,k&&(S.seg.myFill.above=!S.seg.myFill.above)}else S.seg.otherFill=M.seg.myFill;n&&n.segmentUpdate(S.seg),M.other.remove(),M.remove()}if(o.getHead()!==M){n&&n.rewind(M.seg);continue}if(e){var k;M.seg.myFill.below===null?k=!0:k=M.seg.myFill.above!==M.seg.myFill.below,A?M.seg.myFill.below=A.seg.myFill.above:M.seg.myFill.below=g,k?M.seg.myFill.above=!M.seg.myFill.below:M.seg.myFill.above=M.seg.myFill.below}else if(M.seg.otherFill===null){var L;A?M.primary===A.primary?L=A.seg.otherFill.above:L=A.seg.myFill.above:L=M.primary?p:g,M.seg.otherFill={above:L,below:L}}n&&n.status(M.seg,x?x.seg:!1,A?A.seg:!1),M.other.status=w.insert(Tm.node({ev:M}))}else{var P=M.status;if(P===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(b.exists(P.prev)&&b.exists(P.next)&&T(P.prev.ev,P.next.ev),n&&n.statusRemove(P.ev.seg),P.remove(),!M.primary){var D=M.seg.myFill;M.seg.myFill=M.seg.otherFill,M.seg.otherFill=D}_.push(M.seg)}o.getHead().remove()}return n&&n.done(),_}return t(d,"calculate"),e?{addRegion:function(g){for(var p,b=g[g.length-1],m=0;m<g.length;m++){p=b,b=g[m];var y=r.pointsCompare(p,b);y!==0&&h(i(y<0?p:b,y<0?b:p),!0)}},calculate:function(g){return d(g,!1)}}:{calculate:function(g,p,b,m){return g.forEach(function(y){h(s(y.start,y.end,y),!0)}),b.forEach(function(y){h(s(y.start,y.end,y),!1)}),d(p,m)}}}t(OAe,"Intersecter$1");var NAe=OAe;function qAe(e,r,n){var i=[],s=[];return e.forEach(function(o){var a=o.start,l=o.end;if(r.pointsSame(a,l)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}n&&n.chainStart(o);var u={index:0,matches_head:!1,matches_pt1:!1},f={index:0,matches_head:!1,matches_pt1:!1},h=u;function v(P,D,B){return h.index=P,h.matches_head=D,h.matches_pt1=B,h===u?(h=f,!1):(h=null,!0)}t(v,"setMatch");for(var c=0;c<i.length;c++){var d=i[c],g=d[0];d[1];var p=d[d.length-1];if(d[d.length-2],r.pointsSame(g,a)){if(v(c,!0,!0))break}else if(r.pointsSame(g,l)){if(v(c,!0,!1))break}else if(r.pointsSame(p,a)){if(v(c,!1,!0))break}else if(r.pointsSame(p,l)&&v(c,!1,!1))break}if(h===u){i.push([a,l]),n&&n.chainNew(a,l);return}if(h===f){n&&n.chainMatch(u.index);var b=u.index,m=u.matches_pt1?l:a,y=u.matches_head,d=i[b],T=y?d[0]:d[d.length-1],_=y?d[1]:d[d.length-2],M=y?d[d.length-1]:d[0],w=y?d[d.length-2]:d[1];if(r.pointsCollinear(_,T,m)&&(y?(n&&n.chainRemoveHead(u.index,m),d.shift()):(n&&n.chainRemoveTail(u.index,m),d.pop()),T=_),r.pointsSame(M,m)){i.splice(b,1),r.pointsCollinear(w,M,T)&&(y?(n&&n.chainRemoveTail(u.index,T),d.pop()):(n&&n.chainRemoveHead(u.index,T),d.shift())),n&&n.chainClose(u.index),s.push(d);return}y?(n&&n.chainAddHead(u.index,m),d.unshift(m)):(n&&n.chainAddTail(u.index,m),d.push(m));return}function x(P){n&&n.chainReverse(P),i[P].reverse()}t(x,"reverseChain");function A(P,D){var B=i[P],z=i[D],R=B[B.length-1],F=B[B.length-2],O=z[0],q=z[1];r.pointsCollinear(F,R,O)&&(n&&n.chainRemoveTail(P,R),B.pop(),R=F),r.pointsCollinear(R,O,q)&&(n&&n.chainRemoveHead(D,O),z.shift()),n&&n.chainJoin(P,D),i[P]=B.concat(z),i.splice(D,1)}t(A,"appendChain");var S=u.index,k=f.index;n&&n.chainConnect(S,k);var L=i[S].length<i[k].length;u.matches_head?f.matches_head?L?(x(S),A(S,k)):(x(k),A(k,S)):A(k,S):f.matches_head?A(S,k):L?(x(S),A(k,S)):(x(k),A(S,k))}),s}t(qAe,"SegmentChainer$1");var UAe=qAe;function Am(e,r,n){var i=[];return e.forEach(function(s){var o=(s.myFill.above?8:0)+(s.myFill.below?4:0)+(s.otherFill&&s.otherFill.above?2:0)+(s.otherFill&&s.otherFill.below?1:0);r[o]!==0&&i.push({id:n?n.segmentId():-1,start:s.start,end:s.end,myFill:{above:r[o]===1,below:r[o]===2},otherFill:null})}),n&&n.selected(i),i}t(Am,"select$c");var HAe={union:function(e,r){return Am(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],r)},intersect:function(e,r){return Am(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],r)},difference:function(e,r){return Am(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],r)},differenceRev:function(e,r){return Am(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],r)},xor:function(e,r){return Am(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],r)}},$Ae=HAe,VAe={toPolygon:function(e,r){function n(o){if(o.length<=0)return e.segments({inverted:!1,regions:[]});function a(f){var h=f.slice(0,f.length-1);return e.segments({inverted:!1,regions:[h]})}t(a,"LineString");for(var l=a(o[0]),u=1;u<o.length;u++)l=e.selectDifference(e.combine(l,a(o[u])));return l}if(t(n,"GeoPoly"),r.type==="Polygon")return e.polygon(n(r.coordinates));if(r.type==="MultiPolygon"){for(var i=e.segments({inverted:!1,regions:[]}),s=0;s<r.coordinates.length;s++)i=e.selectUnion(e.combine(i,n(r.coordinates[s])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,r,n){n=e.polygon(e.segments(n));function i(d,g){return r.pointInsideRegion([(d[0][0]+d[1][0])*.5,(d[0][1]+d[1][1])*.5],g)}t(i,"regionInsideRegion");function s(d){return{region:d,children:[]}}t(s,"newNode");var o=s(null);function a(d,g){for(var p=0;p<d.children.length;p++){var b=d.children[p];if(i(g,b.region)){a(b,g);return}}for(var m=s(g),p=0;p<d.children.length;p++){var b=d.children[p];i(b.region,g)&&(m.children.push(b),d.children.splice(p,1),p--)}d.children.push(m)}t(a,"addChild");for(var l=0;l<n.regions.length;l++){var u=n.regions[l];u.length<3||a(o,u)}function f(d,g){for(var p=0,b=d[d.length-1][0],m=d[d.length-1][1],y=[],T=0;T<d.length;T++){var _=d[T][0],M=d[T][1];y.push([_,M]),p+=M*b-_*m,b=_,m=M}var w=p<0;return w!==g&&y.reverse(),y.push([y[0][0],y[0][1]]),y}t(f,"forceWinding");var h=[];function v(d){var g=[f(d.region,!1)];h.push(g);for(var p=0;p<d.children.length;p++)g.push(c(d.children[p]))}t(v,"addExterior");function c(d){for(var g=0;g<d.children.length;g++)v(d.children[g]);return f(d.region,!0)}t(c,"getInterior");for(var l=0;l<o.children.length;l++)v(o.children[l]);return h.length<=0?{type:"Polygon",coordinates:[]}:h.length==1?{type:"Polygon",coordinates:h[0]}:{type:"MultiPolygon",coordinates:h}}},GAe=VAe;/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var jAe=DAe,YAe=zAe,yU=NAe,WAe=UAe,Sm=$Ae,mU=GAe,Cc=!1,Mm=YAe(),bf;bf={buildLog:function(e){return e===!0?Cc=jAe():e===!1&&(Cc=!1),Cc===!1?!1:Cc.list},epsilon:function(e){return Mm.epsilon(e)},segments:function(e){var r=yU(!0,Mm,Cc);return e.regions.forEach(r.addRegion),{segments:r.calculate(e.inverted),inverted:e.inverted}},combine:function(e,r){var n=yU(!1,Mm,Cc);return{combined:n.calculate(e.segments,e.inverted,r.segments,r.inverted),inverted1:e.inverted,inverted2:r.inverted}},selectUnion:function(e){return{segments:Sm.union(e.combined,Cc),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:Sm.intersect(e.combined,Cc),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:Sm.difference(e.combined,Cc),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:Sm.differenceRev(e.combined,Cc),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:Sm.xor(e.combined,Cc),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:WAe(e.segments,Mm,Cc),inverted:e.inverted}},polygonFromGeoJSON:function(e){return mU.toPolygon(bf,e)},polygonToGeoJSON:function(e){return mU.fromPolygon(bf,Mm,e)},union:function(e,r){return km(e,r,bf.selectUnion)},intersect:function(e,r){return km(e,r,bf.selectIntersect)},difference:function(e,r){return km(e,r,bf.selectDifference)},differenceRev:function(e,r){return km(e,r,bf.selectDifferenceRev)},xor:function(e,r){return km(e,r,bf.selectXor)}};function km(e,r,n){var i=bf.segments(e),s=bf.segments(r),o=bf.combine(i,s),a=n(o);return bf.polygon(a)}t(km,"operate");typeof window=="object"&&(window.PolyBool=bf);var XAe=bf,ZAe=t(function(r,n,i,s){var o=r[0],a=r[1],l=!1;i===void 0&&(i=0),s===void 0&&(s=n.length);for(var u=s-i,f=0,h=u-1;f<u;h=f++){var v=n[f+i][0],c=n[f+i][1],d=n[h+i][0],g=n[h+i][1],p=c>a!=g>a&&o<(d-v)*(a-c)/(g-c)+v;p&&(l=!l)}return l},"pointInPolygonNested"),rx={exports:{}},QT=ew.dot,gb=jn.BADNUM,H_=rx.exports={};H_.tester=t(function(r){var n=r.slice(),i=n[0][0],s=i,o=n[0][1],a=o,l;for((n[n.length-1][0]!==n[0][0]||n[n.length-1][1]!==n[0][1])&&n.push(n[0]),l=1;l<n.length;l++)i=Math.min(i,n[l][0]),s=Math.max(s,n[l][0]),o=Math.min(o,n[l][1]),a=Math.max(a,n[l][1]);var u=!1,f;n.length===5&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(u=!0,f=t(function(g){return g[0]===n[0][0]},"rectFirstEdgeTest")):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(u=!0,f=t(function(g){return g[1]===n[0][1]},"rectFirstEdgeTest")));function h(g,p){var b=g[0],m=g[1];return!(b===gb||b<i||b>s||m===gb||m<o||m>a||p&&f(g))}t(h,"rectContains");function v(g,p){var b=g[0],m=g[1];if(b===gb||b<i||b>s||m===gb||m<o||m>a)return!1;var y=n.length,T=n[0][0],_=n[0][1],M=0,w,x,A,S,k;for(w=1;w<y;w++)if(x=T,A=_,T=n[w][0],_=n[w][1],S=Math.min(x,T),!(b<S||b>Math.max(x,T)||m>Math.max(A,_)))if(m<Math.min(A,_))b!==S&&M++;else{if(T===x?k=m:k=A+(b-x)*(_-A)/(T-x),m===k)return!(w===1&&p);m<=k&&b!==S&&M++}return M%2===1}t(v,"contains");var c=!0,d=n[0];for(l=1;l<n.length;l++)if(d[0]!==n[l][0]||d[1]!==n[l][1]){c=!1;break}return{xmin:i,xmax:s,ymin:o,ymax:a,pts:n,contains:u?h:v,isRect:u,degenerate:c}},"tester");H_.isSegmentBent=t(function(r,n,i,s){var o=r[n],a=[r[i][0]-o[0],r[i][1]-o[1]],l=QT(a,a),u=Math.sqrt(l),f=[-a[1]/u,a[0]/u],h,v,c;for(h=n+1;h<i;h++)if(v=[r[h][0]-o[0],r[h][1]-o[1]],c=QT(v,a),c<0||c>l||Math.abs(QT(v,f))>s)return!0;return!1},"isSegmentBent");H_.filter=t(function(r,n){var i=[r[0]],s=0,o=0;function a(u){r.push(u);var f=i.length,h=s;i.splice(o+1);for(var v=h+1;v<r.length;v++)(v===r.length-1||H_.isSegmentBent(r,h,v+1,n))&&(i.push(r[v]),i.length<f-2&&(s=v,o=i.length-1),h=v)}if(t(a,"addPt"),r.length>1){var l=r.pop();a(l)}return{addPt:a,raw:r,filtered:i}},"filter");var KAe={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"},xU=XAe,JAe=ZAe,S1=Na,QAe=bn.exports.dashStyle,Em=$a.exports,eSe=Ko,tSe=Rf.makeEventData,ax=Rh,rSe=ax.freeMode,aSe=ax.rectMode,M1=ax.drawMode,C8=ax.openMode,L8=ax.selectMode,bU=D0,_U=ww,Xle=w8,Zle=C0.clearOutline,Kle=P0,eA=Kle.handleEllipse,nSe=Kle.readPaths,iSe=xle,oSe=ble,sSe=Yle.activateLastSelection,v_=Nt.exports,lSe=v_.sorterAsc,Jle=rx.exports,Cm=iw,Fc=$o.getFromId,uSe=xw,fSe=tx.redrawReglTraces,d_=KAe,Zh=d_.MINSELECT,cSe=Jle.filter,R8=Jle.tester,P8=x8,wU=P8.p2r,hSe=P8.axValue,vSe=P8.getTransform;function D8(e){return e.subplot!==void 0}t(D8,"hasSubplot");function dSe(e,r,n,i,s){var o=!D8(i),a=rSe(s),l=aSe(s),u=C8(s),f=M1(s),h=L8(s),v=s==="drawline",c=s==="drawcircle",d=v||c,g=i.gd,p=g._fullLayout,b=h&&p.newselection.mode==="immediate"&&o,m=p._zoomlayer,y=i.element.getBoundingClientRect(),T=i.plotinfo,_=vSe(T),M=r-y.left,w=n-y.top;p._calcInverseTransform(g);var x=v_.apply3DTransform(p._invTransform)(M,w);M=x[0],w=x[1];var A=p._invScaleX,S=p._invScaleY,k=M,L=w,P="M"+M+","+w,D=i.xaxes[0],B=i.yaxes[0],z=D._length,R=B._length,F=e.altKey&&!(M1(s)&&u),O,q,H,j,X,G,$;eue(e,g,i),a&&(O=cSe([[M,w]],d_.BENDPX));var te=m.selectAll("path.select-outline-"+T.id).data([1]),ee=f?p.newshape:p.newselection,ie=f&&!u?ee.fillcolor:"rgba(0,0,0,0)",se=ee.line.color||(o?Em.contrast(g._fullLayout.plot_bgcolor):"#7f7f7f");te.enter().append("path").attr("class","select-outline select-outline-"+T.id).style({opacity:f?ee.opacity/2:1,"stroke-dasharray":QAe(ee.line.dash,ee.line.width),"stroke-width":ee.line.width+"px","shape-rendering":"crispEdges"}).call(Em.stroke,se).call(Em.fill,ie).attr("fill-rule","evenodd").classed("cursor-move",!!f).attr("transform",_).attr("d",P+"Z");var W=m.append("path").attr("class","zoombox-corners").style({fill:Em.background,stroke:Em.defaultLine,"stroke-width":1}).attr("transform",_).attr("d","M0,0Z"),ne=p._uid+d_.SELECTID,he=[],re=kw(g,i.xaxes,i.yaxes,i.subplot);b&&!e.shiftKey&&(i._clearSubplotSelections=function(){if(!!o){var fe=D._id,ce=B._id;iue(g,fe,ce,re);for(var xe=(g.layout||{}).selections||[],Te=[],me=!1,pe=0;pe<xe.length;pe++){var oe=p.selections[pe];oe.xref!==fe||oe.yref!==ce?Te.push(xe[pe]):me=!0}me&&(g._fullLayout._noEmitSelectedAtStart=!0,S1.call("_guiRelayout",g,{selections:Te}))}});var ae=ESe(i);i.moveFn=function(fe,ce){i._clearSubplotSelections&&(i._clearSubplotSelections(),i._clearSubplotSelections=void 0),k=Math.max(0,Math.min(z,A*fe+M)),L=Math.max(0,Math.min(R,S*ce+w));var xe=Math.abs(k-M),Te=Math.abs(L-w);if(l){var me,pe,oe;if(h){var de=p.selectdirection;switch(de==="any"?Te<Math.min(xe*.6,Zh)?me="h":xe<Math.min(Te*.6,Zh)?me="v":me="d":me=de,me){case"h":pe=c?R/2:0,oe=R;break;case"v":pe=c?z/2:0,oe=z;break}}if(f)switch(p.newshape.drawdirection){case"vertical":me="h",pe=c?R/2:0,oe=R;break;case"horizontal":me="v",pe=c?z/2:0,oe=z;break;case"ortho":xe<Te?(me="h",pe=w,oe=L):(me="v",pe=M,oe=k);break;default:me="d"}me==="h"?(j=d?eA(c,[k,pe],[k,oe]):[[M,pe],[M,oe],[k,oe],[k,pe]],j.xmin=d?k:Math.min(M,k),j.xmax=d?k:Math.max(M,k),j.ymin=Math.min(pe,oe),j.ymax=Math.max(pe,oe),W.attr("d","M"+j.xmin+","+(w-Zh)+"h-4v"+2*Zh+"h4ZM"+(j.xmax-1)+","+(w-Zh)+"h4v"+2*Zh+"h-4Z")):me==="v"?(j=d?eA(c,[pe,L],[oe,L]):[[pe,w],[pe,L],[oe,L],[oe,w]],j.xmin=Math.min(pe,oe),j.xmax=Math.max(pe,oe),j.ymin=d?L:Math.min(w,L),j.ymax=d?L:Math.max(w,L),W.attr("d","M"+(M-Zh)+","+j.ymin+"v-4h"+2*Zh+"v4ZM"+(M-Zh)+","+(j.ymax-1)+"v4h"+2*Zh+"v-4Z")):me==="d"&&(j=d?eA(c,[M,w],[k,L]):[[M,w],[M,L],[k,L],[k,w]],j.xmin=Math.min(M,k),j.xmax=Math.max(M,k),j.ymin=Math.min(w,L),j.ymax=Math.max(w,L),W.attr("d","M0,0Z"))}else a&&(O.addPt([k,L]),j=O.filtered);if(i.selectionDefs&&i.selectionDefs.length?(H=tue(i.mergedPolygons,j,F),j.subtract=F,q=I8(i.selectionDefs.concat([j]))):(H=[j],q=R8(j)),Xle(aue(H,u),te,i),h){var ye=Cz(g,!1),we=ye.eventData?ye.eventData.points.slice():[];ye=Cz(g,!1,q,re,i),q=ye.selectionTesters,$=ye.eventData;var Ee;O?Ee=O.filtered:Ee=oue(H),Cm.throttle(ne,d_.SELECTDELAY,function(){he=nue(q,re);for(var De=he.slice(),Fe=0;Fe<we.length;Fe++){for(var qe=we[Fe],Je=!1,Ge=0;Ge<De.length;Ge++)if(De[Ge].curveNumber===qe.curveNumber&&De[Ge].pointNumber===qe.pointNumber){Je=!0;break}Je||De.push(qe)}De.length&&($||($={}),$.points=De),ae($,Ee),CSe(g,$)})}},i.clickFn=function(fe,ce){if(W.remove(),g._fullLayout._activeShapeIndex>=0){g._fullLayout._deactivateShape(g);return}if(!f){var xe=p.clickmode;Cm.done(ne).then(function(){if(Cm.clear(ne),fe===2){for(te.remove(),X=0;X<re.length;X++)G=re[X],G._module.selectPoints(G,!1);if(E1(g,re),k1(i),F8(g),re.length){var Te=re[0].xaxis,me=re[0].yaxis;if(Te&&me){for(var pe=[],oe=g._fullLayout.selections,de=0;de<oe.length;de++){var ye=oe[de];!ye||(ye.xref!==Te._id||ye.yref!==me._id)&&pe.push(ye)}pe.length<oe.length&&(g._fullLayout._noEmitSelectedAtStart=!0,S1.call("_guiRelayout",g,{selections:pe}))}}}else xe.indexOf("select")>-1&&Qle(ce,g,i.xaxes,i.yaxes,i.subplot,i,te),xe==="event"&&C1(g,void 0);eSe.click(g,ce)}).catch(v_.error)}},i.doneFn=function(){W.remove(),Cm.done(ne).then(function(){Cm.clear(ne),!b&&j&&i.selectionDefs&&(j.subtract=F,i.selectionDefs.push(j),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,H)),(b||f)&&k1(i,b),i.doneFnCompleted&&i.doneFnCompleted(he),h&&C1(g,$)}).catch(v_.error)}}t(dSe,"prepSelect$1");function Qle(e,r,n,i,s,o,a){var l=r._hoverdata,u=r._fullLayout,f=u.clickmode,h=f.indexOf("event")>-1,v=[],c,d,g,p,b,m,y,T,_,M;if(xSe(l)){eue(e,r,o),c=kw(r,n,i,s);var w=bSe(l,c),x=w.pointNumbers.length>0;if(x?_Se(c,w):wSe(c)&&(y=AU(w))){for(a&&a.remove(),M=0;M<c.length;M++)d=c[M],d._module.selectPoints(d,!1);E1(r,c),k1(o),h&&F8(r)}else{T=e.shiftKey&&(y!==void 0?y:AU(w)),g=pSe(w.pointNumber,w.searchInfo,T);var A=o.selectionDefs.concat([g]);for(p=I8(A),M=0;M<c.length;M++)if(b=c[M]._module.selectPoints(c[M],p),m=rue(b,c[M]),v.length)for(var S=0;S<m.length;S++)v.push(m[S]);else v=m;if(_={points:v},E1(r,c,_),g&&o&&o.selectionDefs.push(g),a){var k=o.mergedPolygons,L=C8(o.dragmode);Xle(aue(k,L),a,o)}h&&C1(r,_)}}}t(Qle,"selectOnClick$1");function pSe(e,r,n){return{pointNumber:e,searchInfo:r,subtract:!!n}}t(pSe,"newPointSelectionDef");function tA(e){return"pointNumber"in e&&"searchInfo"in e}t(tA,"isPointSelectionDef");function gSe(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(r,n,i,s){var o=e.searchInfo.cd[0].trace._expandedIndex,a=s.cd[0].trace._expandedIndex;return a===o&&i===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}t(gSe,"newPointNumTester");function I8(e){if(!e.length)return;for(var r=[],n=tA(e[0])?0:e[0][0][0],i=n,s=tA(e[0])?0:e[0][0][1],o=s,a=0;a<e.length;a++)if(tA(e[a]))r.push(gSe(e[a]));else{var l=R8(e[a]);l.subtract=!!e[a].subtract,r.push(l),n=Math.min(n,l.xmin),i=Math.max(i,l.xmax),s=Math.min(s,l.ymin),o=Math.max(o,l.ymax)}function u(f,h,v,c){for(var d=!1,g=0;g<r.length;g++)r[g].contains(f,h,v,c)&&(d=!r[g].subtract);return d}return t(u,"contains"),{xmin:n,xmax:i,ymin:s,ymax:o,pts:[],contains:u,isRect:!1,degenerate:!1}}t(I8,"multiTester");function eue(e,r,n){var i=r._fullLayout,s=n.plotinfo,o=n.dragmode,a=i._lastSelectedSubplot&&i._lastSelectedSubplot===s.id,l=(e.shiftKey||e.altKey)&&!(M1(o)&&C8(o));a&&l&&s.selection&&s.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=s.selection.selectionDefs,n.mergedPolygons=s.selection.mergedPolygons):(!l||!s.selection)&&k1(n),a||(Zle(r),i._lastSelectedSubplot=s.id)}t(eue,"coerceSelectionsCache");function ySe(e){return e._fullLayout._activeShapeIndex>=0}t(ySe,"hasActiveShape");function mSe(e){return e._fullLayout._activeSelectionIndex>=0}t(mSe,"hasActiveSelection");function k1(e,r){var n=e.dragmode,i=e.plotinfo,s=e.gd;ySe(s)&&s._fullLayout._deactivateShape(s),mSe(s)&&s._fullLayout._deactivateSelection(s);var o=s._fullLayout,a=o._zoomlayer,l=M1(n),u=L8(n);if(l||u){var f=a.selectAll(".select-outline-"+i.id);if(f&&s._fullLayout._outlining){var h;l&&(h=iSe(f,e)),h&&S1.call("_guiRelayout",s,{shapes:h});var v;u&&!D8(e)&&(v=oSe(f,e)),v&&(s._fullLayout._noEmitSelectedAtStart=!0,S1.call("_guiRelayout",s,{selections:v}).then(function(){r&&sSe(s)})),s._fullLayout._outlining=!1}}i.selection={},i.selection.selectionDefs=e.selectionDefs=[],i.selection.mergedPolygons=e.mergedPolygons=[]}t(k1,"clearSelectionsCache");function TU(e){return e._id}t(TU,"getAxId");function kw(e,r,n,i){if(!e.calcdata)return[];var s=[],o=r.map(TU),a=n.map(TU),l,u,f;for(f=0;f<e.calcdata.length;f++)if(l=e.calcdata[f],u=l[0].trace,!(u.visible!==!0||!u._module||!u._module.selectPoints))if(D8({subplot:i})&&(u.subplot===i||u.geo===i))s.push(yb(u._module,l,r[0],n[0]));else if(u.type==="splom"){if(u._xaxes[o[0]]&&u._yaxes[a[0]]){var h=yb(u._module,l,r[0],n[0]);h.scene=e._fullLayout._splomScenes[u.uid],s.push(h)}}else if(u.type==="sankey"){var v=yb(u._module,l,r[0],n[0]);s.push(v)}else{if(o.indexOf(u.xaxis)===-1||a.indexOf(u.yaxis)===-1)continue;s.push(yb(u._module,l,Fc(e,u.xaxis),Fc(e,u.yaxis)))}return s}t(kw,"determineSearchTraces");function yb(e,r,n,i){return{_module:e,cd:r,xaxis:n,yaxis:i}}t(yb,"createSearchInfo");function xSe(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==!0}t(xSe,"isHoverDataSet");function bSe(e,r){var n=e[0],i=-1,s=[],o,a;for(a=0;a<r.length;a++)if(o=r[a],n.fullData._expandedIndex===o.cd[0].trace._expandedIndex){if(n.hoverOnBox===!0)break;n.pointNumber!==void 0?i=n.pointNumber:n.binNumber!==void 0&&(i=n.binNumber,s=n.pointNumbers);break}return{pointNumber:i,pointNumbers:s,searchInfo:o}}t(bSe,"extractClickedPtInfo");function AU(e){var r=e.searchInfo.cd[0].trace,n=e.pointNumber,i=e.pointNumbers,s=i.length>0,o=s?i[0]:n;return r.selectedpoints?r.selectedpoints.indexOf(o)>-1:!1}t(AU,"isPointOrBinSelected");function _Se(e,r){var n=[],i,s,o,a;for(a=0;a<e.length;a++)i=e[a],i.cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&n.push(i);if(n.length===1&&(o=n[0]===r.searchInfo,o&&(s=r.searchInfo.cd[0].trace,s.selectedpoints.length===r.pointNumbers.length))){for(a=0;a<r.pointNumbers.length;a++)if(s.selectedpoints.indexOf(r.pointNumbers[a])<0)return!1;return!0}return!1}t(_Se,"isOnlyThisBinSelected");function wSe(e){var r=0,n,i,s;for(s=0;s<e.length;s++)if(n=e[s],i=n.cd[0].trace,i.selectedpoints&&(i.selectedpoints.length>1||(r+=i.selectedpoints.length,r>1)))return!1;return r===1}t(wSe,"isOnlyOnePointSelected");function E1(e,r,n){var i;for(i=0;i<r.length;i++){var s=r[i].cd[0].trace._fullInput,o=e._fullLayout._tracePreGUI[s.uid]||{};o.selectedpoints===void 0&&(o.selectedpoints=s._input.selectedpoints||null)}var a;if(n){var l=n.points||[];for(i=0;i<r.length;i++)a=r[i].cd[0].trace,a._input.selectedpoints=a._fullInput.selectedpoints=[],a._fullInput!==a&&(a.selectedpoints=[]);for(var u=0;u<l.length;u++){var f=l[u],h=f.data,v=f.fullData,c=f.pointIndex,d=f.pointIndices;d?([].push.apply(h.selectedpoints,d),a._fullInput!==a&&[].push.apply(v.selectedpoints,d)):(h.selectedpoints.push(c),a._fullInput!==a&&v.selectedpoints.push(c))}}else for(i=0;i<r.length;i++)a=r[i].cd[0].trace,delete a.selectedpoints,delete a._input.selectedpoints,a._fullInput!==a&&delete a._fullInput.selectedpoints;TSe(e,r)}t(E1,"updateSelectedState");function TSe(e,r){for(var n=!1,i=0;i<r.length;i++){var s=r[i],o=s.cd;S1.traceIs(o[0].trace,"regl")&&(n=!0);var a=s._module,l=a.styleOnSelect||a.style;l&&(l(e,o,o[0].node3),o[0].nodeRangePlot3&&l(e,o,o[0].nodeRangePlot3))}n&&(uSe(e),fSe(e))}t(TSe,"updateReglSelectedState");function tue(e,r,n){for(var i=n?xU.difference:xU.union,s=i({regions:e},{regions:[r]}),o=s.regions.reverse(),a=0;a<o.length;a++){var l=o[a];l.subtract=z8(l,o.slice(0,a))}return o}t(tue,"mergePolygons");function rue(e,r){if(Array.isArray(e))for(var n=r.cd,i=r.cd[0].trace,s=0;s<e.length;s++)e[s]=tSe(e[s],i,n);return e}t(rue,"fillSelectionItem");function aue(e,r){for(var n=[],i=0;i<e.length;i++){n[i]=[];for(var s=0;s<e[i].length;s++){n[i][s]=[],n[i][s][0]=s?"L":"M";for(var o=0;o<e[i][s].length;o++)n[i][s].push(e[i][s][o])}r||n[i].push(["Z",n[i][0][1],n[i][0][2]])}return n}t(aue,"convertPoly");function nue(e,r){for(var n=[],i,s,o=0;o<r.length;o++){var a=r[o];s=a._module.selectPoints(a,e),i=rue(s,a),n=n.concat(i)}return n}t(nue,"_doSelect");function Cz(e,r,n,i,s){var o=!!i,a,l,u;s&&(a=s.plotinfo,l=s.xaxes[0]._id,u=s.yaxes[0]._id);var f=[],h=[],v=SU(e),c=e._fullLayout;if(a){var d=c._zoomlayer,g=c.dragmode,p=M1(g),b=L8(g);if(p||b){var m=Fc(e,l,"x"),y=Fc(e,u,"y");if(m&&y){var T=d.selectAll(".select-outline-"+a.id);if(T&&e._fullLayout._outlining&&T.length){for(var _=T[0][0],M=_.getAttribute("d"),w=nSe(M,e,a),x=[],A=0;A<w.length;A++){for(var S=w[A],k=[],L=0;L<S.length;L++)k.push([Jd(m,S[L][1]),Jd(y,S[L][2])]);k.xref=l,k.yref=u,k.subtract=z8(k,x),x.push(k)}v=v.concat(x)}}}}var P=l&&u?[l+u]:c._subplots.cartesian;ASe(e);for(var D={},B=0;B<P.length;B++){var z=P[B],R=z.indexOf("y"),F=z.slice(0,R),O=z.slice(R),q=l&&u?n:void 0;if(q=MSe(v,F,O,q),q){var H=i;if(!o){var j=Fc(e,F,"x"),X=Fc(e,O,"y");H=kw(e,[j],[X],z);for(var G=0;G<H.length;G++){var $=H[G],te=$.cd[0],ee=te.trace;if($._module.name==="scattergl"&&!te.t.xpx){var ie=ee.x,se=ee.y,W=ee._length;te.t.xpx=[],te.t.ypx=[];for(var ne=0;ne<W;ne++)te.t.xpx[ne]=j.c2p(ie[ne]),te.t.ypx[ne]=X.c2p(se[ne])}$._module.name==="splom"&&(D[ee.uid]||(D[ee.uid]=!0))}}var he=nue(q,H);f=f.concat(he),h=h.concat(H)}}var re={points:f};E1(e,h,re);var ae=c.clickmode,fe=ae.indexOf("event")>-1&&r;if(!a&&r){var ce=SU(e,!0);if(ce.length){var xe=ce[0].xref,Te=ce[0].yref;if(xe&&Te){var me=oue(ce),pe=sue([Fc(e,xe,"x"),Fc(e,Te,"y")]);pe(re,me)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:fe&&C1(e,re),c._reselect=!1}if(!a&&c._deselect){var oe=c._deselect;l=oe.xref,u=oe.yref,SSe(l,u,h)||iue(e,l,u,i),fe&&(re.points.length?C1(e,re):F8(e)),c._deselect=!1}return{eventData:re,selectionTesters:n}}t(Cz,"reselect");function ASe(e){var r=e.calcdata;if(!!r)for(var n=0;n<r.length;n++){var i=r[n][0],s=i.trace,o=e._fullLayout._splomScenes;if(o){var a=o[s.uid];a&&(a.selectBatch=[])}}}t(ASe,"epmtySplomSelectionBatch");function SSe(e,r,n){for(var i=0;i<n.length;i++){var s=n[i];if(s.xaxis&&s.xaxis._id===e&&s.yaxis&&s.yaxis._id===r)return!0}return!1}t(SSe,"subplotSelected");function iue(e,r,n,i){i=kw(e,[Fc(e,r,"x")],[Fc(e,n,"y")],r+n);for(var s=0;s<i.length;s++){var o=i[s];o._module.selectPoints(o,!1)}E1(e,i)}t(iue,"deselectSubplot");function MSe(e,r,n,i){for(var s,o=0;o<e.length;o++){var a=e[o];if(!(r!==a.xref||n!==a.yref))if(s){var l=!!a.subtract;s=tue(s,a,l),i=I8(s)}else s=[a],i=R8(a)}return i}t(MSe,"addTester");function SU(e,r){for(var n=[],i=e._fullLayout,s=i.selections,o=s.length,a=0;a<o;a++)if(!(r&&a!==i._activeSelectionIndex)){var l=s[a];if(!!l){var u=l.xref,f=l.yref,h=Fc(e,u,"x"),v=Fc(e,f,"y"),c,d,g,p,b;if(l.type==="rect"){b=[];var m=Jd(h,l.x0),y=Jd(h,l.x1),T=Jd(v,l.y0),_=Jd(v,l.y1);b=[[m,T],[m,_],[y,_],[y,T]],c=Math.min(m,y),d=Math.max(m,y),g=Math.min(T,_),p=Math.max(T,_),b.xmin=c,b.xmax=d,b.ymin=g,b.ymax=p,b.xref=u,b.yref=f,b.subtract=!1,b.isRect=!0,n.push(b)}else if(l.type==="path")for(var M=l.path.split("Z"),w=[],x=0;x<M.length;x++){var A=M[x];if(!!A){A+="Z";var S=bU.extractPathCoords(A,_U.paramIsX,"raw"),k=bU.extractPathCoords(A,_U.paramIsY,"raw");c=1/0,d=-1/0,g=1/0,p=-1/0,b=[];for(var L=0;L<S.length;L++){var P=Jd(h,S[L]),D=Jd(v,k[L]);b.push([P,D]),c=Math.min(P,c),d=Math.max(P,d),g=Math.min(D,g),p=Math.max(D,p)}b.xmin=c,b.xmax=d,b.ymin=g,b.ymax=p,b.xref=u,b.yref=f,b.subtract=z8(b,w),w.push(b),n.push(b)}}}}return n}t(SU,"getLayoutPolygons");function z8(e,r){for(var n=!1,i=0;i<r.length;i++)for(var s=r[i],o=0;o<e.length;o++)if(JAe(e[o],s)){n=!n;break}return n}t(z8,"getSubtract");function Jd(e,r){return e.type==="date"&&(r=r.replace("_"," ")),e.type==="log"?e.c2p(r):e.r2p(r,null,e.calendar)}t(Jd,"convert$d");function oue(e){for(var r=e.length,n=[],i=0;i<r;i++){var s=e[i];n=n.concat(s),n=n.concat([s[0]])}return kSe(n)}t(oue,"castMultiPolygon");function kSe(e){return e.isRect=e.length===5&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1])),e}t(kSe,"computeRectAndRanges");function sue(e){return function(r,n){for(var i,s,o=0;o<e.length;o++){var a=e[o],l=a._id,u=l.charAt(0);if(n.isRect){i||(i={});var f=n[u+"min"],h=n[u+"max"];f!==void 0&&h!==void 0&&(i[l]=[wU(a,f),wU(a,h)].sort(lSe))}else s||(s={}),s[l]=n.map(hSe(a))}i&&(r.range=i),s&&(r.lassoPoints=s)}}t(sue,"makeFillRangeItems");function ESe(e){var r=e.plotinfo;return r.fillRangeItems||sue(e.xaxes.concat(e.yaxes))}t(ESe,"getFillRangeItems");function CSe(e,r){e.emit("plotly_selecting",r)}t(CSe,"emitSelecting");function C1(e,r){r&&(r.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",r)}t(C1,"emitSelected");function F8(e){e.emit("plotly_deselect",null)}t(F8,"emitDeselect");var LSe={reselect:Cz,prepSelect:dSe,clearOutline:Zle,clearSelectionsCache:k1,selectOnClick:Qle},lue=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],Ew={axisRefDescription:function(e,r,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",r,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",r,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",r,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",r,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}},MU=lue,kU=Ho,mb=al,RSe=ei.templatedArray,xb=Ew;function EU(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}t(EU,"arrowAxisRefDescription");function CU(e,r,n){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",n,"to",r,"("+r,"to",n+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}t(CU,"arrowCoordinateDescription");var Ry=RSe("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this annotation is visible."].join(" ")},text:{valType:"string",editType:"calc+arraydraw",description:["Sets the text associated with this annotation.","Plotly uses a subset of HTML tags to do things like","newline (<br>), bold (<b></b>), italics (<i></i>),","hyperlinks (<a href='...'></a>). Tags <em>, <sup>, <sub>","<span> are also supported."].join(" ")},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw",description:["Sets the angle at which the `text` is drawn","with respect to the horizontal."].join(" ")},font:kU({editType:"calc+arraydraw",colorEditType:"arraydraw",description:"Sets the annotation text font."}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit width for the text box. null (default) lets the","text set the box width. Wider text will be clipped.","There is no automatic wrapping; use <br> to start a new line."].join(" ")},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw",description:["Sets an explicit height for the text box. null (default) lets the","text set the box height. Taller text will be clipped."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the annotation (text + arrow)."},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw",description:["Sets the horizontal alignment of the `text` within the box.","Has an effect only if `text` spans two or more lines","(i.e. `text` contains one or more <br> HTML tags) or if an","explicit width is set to override the text width."].join(" ")},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw",description:["Sets the vertical alignment of the `text` within the box.","Has an effect only if an explicit height is set to override","the text height."].join(" ")},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:"Sets the background color of the annotation."},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color of the border enclosing the annotation `text`."].join(" ")},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the padding (in px) between the `text`","and the enclosing border."].join(" ")},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw",description:["Sets the width (in px) of the border enclosing","the annotation `text`."].join(" ")},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not the annotation is drawn with an arrow.","If *true*, `text` is placed near the arrow's tail.","If *false*, `text` lines up with the `x` and `y` provided."].join(" ")},arrowcolor:{valType:"color",editType:"arraydraw",description:"Sets the color of the annotation arrow."},arrowhead:{valType:"integer",min:0,max:MU.length,dflt:1,editType:"arraydraw",description:"Sets the end annotation arrow head style."},startarrowhead:{valType:"integer",min:0,max:MU.length,dflt:1,editType:"arraydraw",description:"Sets the start annotation arrow head style."},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw",description:"Sets the annotation arrow head position."},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the end annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw",description:["Sets the size of the start annotation arrow head, relative to `arrowwidth`.","A value of 1 (default) gives a head about 3x as wide as the line."].join(" ")},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw",description:"Sets the width (in px) of annotation arrow line."},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the end arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw",description:["Sets a distance, in pixels, to move the start arrowhead away from the","position it is pointing at, for example to point at the edge of","a marker independent of zoom. Note that this shortens the arrow","from the `ax` / `ay` vector, in contrast to `xshift` / `yshift`","which moves everything by this amount."].join(" ")},ax:{valType:"any",editType:"calc+arraydraw",description:[CU("x","left","right")].join(" ")},ay:{valType:"any",editType:"calc+arraydraw",description:[CU("y","top","bottom")].join(" ")},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",mb.idRegex.x.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",xb.axisRefDescription("x","left","right"),EU("x")].join(" ")},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",mb.idRegex.y.toString()],editType:"calc",description:["Indicates in what coordinates the tail of the","annotation (ax,ay) is specified.",xb.axisRefDescription("y","bottom","top"),EU("y")].join(" ")},xref:{valType:"enumerated",values:["paper",mb.idRegex.x.toString()],editType:"calc",description:["Sets the annotation's x coordinate axis.",xb.axisRefDescription("x","left","right")].join(" ")},x:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's x position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's horizontal position anchor","This anchor binds the `x` position to the *left*, *center*","or *right* of the annotation.","For example, if `x` is set to 1, `xref` to *paper* and","`xanchor` to *right* then the right-most portion of the","annotation lines up with the right-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *center* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow to the","right (positive) or left (negative) by this many pixels."].join(" ")},yref:{valType:"enumerated",values:["paper",mb.idRegex.y.toString()],editType:"calc",description:["Sets the annotation's y coordinate axis.",xb.axisRefDescription("y","bottom","top")].join(" ")},y:{valType:"any",editType:"calc+arraydraw",description:["Sets the annotation's y position.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw",description:["Sets the text box's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the annotation.","For example, if `y` is set to 1, `yref` to *paper* and","`yanchor` to *top* then the top-most portion of the","annotation lines up with the top-most edge of the","plotting area.","If *auto*, the anchor is equivalent to *middle* for","data-referenced annotations or if there is an arrow,","whereas for paper-referenced with no arrow, the anchor picked","corresponds to the closest side."].join(" ")},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw",description:["Shifts the position of the whole annotation and arrow up","(positive) or down (negative) by this many pixels."].join(" ")},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw",description:["Makes this annotation respond to clicks on the plot.","If you click a data point that exactly matches the `x` and `y`","values of this annotation, and it is hidden (visible: false),","it will appear. In *onoff* mode, you must click the same point","again to make it disappear, so if you click multiple points,","you can show multiple annotations. In *onout* mode, a click","anywhere else in the plot (on another data point or not) will","hide this annotation.","If you need to show/hide this annotation in response to different","`x` or `y` values, you can set `xclick` and/or `yclick`. This is","useful for example to label the side of a bar. To label markers","though, `standoff` is preferred over `xclick` and `yclick`."].join(" ")},xclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `x` value","is `xclick` rather than the annotation's `x` value."].join(" ")},yclick:{valType:"any",editType:"arraydraw",description:["Toggle this annotation when clicking a data point whose `y` value","is `yclick` rather than the annotation's `y` value."].join(" ")},hovertext:{valType:"string",editType:"arraydraw",description:["Sets text to appear when hovering over this annotation.","If omitted or blank, no hover label will appear."].join(" ")},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw",description:["Sets the background color of the hover label.","By default uses the annotation's `bgcolor` made opaque,","or white if it was transparent."].join(" ")},bordercolor:{valType:"color",editType:"arraydraw",description:["Sets the border color of the hover label.","By default uses either dark grey or white, for maximum","contrast with `hoverlabel.bgcolor`."].join(" ")},font:kU({editType:"arraydraw",description:["Sets the hover label text font.","By default uses the global hover font and size,","with color from `hoverlabel.bordercolor`."].join(" ")}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw",description:["Determines whether the annotation text box captures mouse move","and click events, or allows those events to pass through to data","points in the plot that may be behind the annotation. By default","`captureevents` is *false* unless `hovertext` is provided.","If you use the event `plotly_clickannotation` without `hovertext`","you must explicitly enable `captureevents`."].join(" ")},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc",description:["Obsolete. Set `xref` and `yref` separately instead."].join(" ")}}}),Un={},uue=Rse,PSe=uue.FORMAT_LINK,DSe=uue.DATE_FORMAT_LINK;function fue(e){var r=e&&e.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(r?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),`Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".`,PSe,"for details on the formatting syntax.",`Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".`,DSe,"for details on the date formatting syntax."].join(" ")}t(fue,"templateFormatStringDescription");function cue(e){var r=e.description?" "+e.description:"",n=e.keys||[];if(n.length>0){for(var i=[],s=0;s<n.length;s++)i[s]="`"+n[s]+"`";r=r+"Finally, the template string has access to ",n.length===1?r="variable "+i[0]:r="variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return r}t(cue,"describeVariables");Un.hovertemplateAttrs=function(e,r){e=e||{},r=r||{};var n=cue(r),i={valType:"string",dflt:"",editType:e.editType||"none",description:["Template string used for rendering the information that appear on hover box.","Note that this will override `hoverinfo`.",fue({supportOther:!0}),"The variables available in `hovertemplate` are the ones emitted as event data described at this link https://plotly.com/javascript/plotlyjs-events/#event-data.","Additionally, every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",n,'Anything contained in tag `<extra>` is displayed in the secondary box, for example "<extra>{fullData.name}</extra>".',"To hide the secondary box completely, use an empty tag `<extra></extra>`."].join(" ")};return e.arrayOk!==!1&&(i.arrayOk=!0),i};Un.texttemplateAttrs=function(e,r){e=e||{},r=r||{};var n=cue(r),i={valType:"string",dflt:"",editType:e.editType||"calc",description:["Template string used for rendering the information text that appear on points.","Note that this will override `textinfo`.",fue(),"Every attributes that can be specified per-point (the ones that are `arrayOk: true`) are available.",n].join(" ")};return e.arrayOk!==!1&&(i.arrayOk=!0),i};var vd={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]},LU=Vo.axisHoverFormat,ISe=Un.texttemplateAttrs,zSe=Un.hovertemplateAttrs,RU=Qi,FSe=Ho,BSe=yu.dash,OSe=yu.pattern,NSe=bn.exports,PU=vd,rA=cn.extendFlat;function DU(e){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+e+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}t(DU,"axisPeriod");function IU(e){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+e+" axis.","When `"+e+"period` is round number of weeks,","the `"+e+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}t(IU,"axisPeriod0");function zU(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+e+" axis."].join(" ")}}t(zU,"axisPeriodAlignment");var Ps={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:DU("x"),yperiod:DU("y"),xperiod0:IU("x0"),yperiod0:IU("y0"),xperiodalignment:zU("x"),yperiodalignment:zU("y"),xhoverformat:LU("x"),yhoverformat:LU("y"),stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:ISe({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+PU.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:zSe({},{keys:PU.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:rA({},BSe,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot",description:["Sets the line back off from the end point of the nth line segment (in px).","This option is useful e.g. to avoid overlap with arrowhead markers.","With *auto* the lines would trim before markers if `marker.angleref` is set to *previous*."].join(" ")},simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},fillpattern:OSe,marker:rA({symbol:{valType:"enumerated",values:NSe.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1,description:["Sets the marker angle in respect to `angleref`."].join(" ")},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1,description:["Sets the reference for marker angle.","With *previous*, angle 0 points along the line from the previous point to this one.","With *up*, angle 0 points toward the top of the screen."].join(" ")},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0,description:["Moves the marker away from the data point in the direction of `angle` (in px).","This can be useful for example if you have another marker at this","location and you want to point an arrowhead marker at it."].join(" ")},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:rA({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},RU("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},RU("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:FSe({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."})},FU=Ry,BU=Ps.line,qSe=yu.dash,bb=cn.extendFlat,USe=_o.overrideAll,HSe=ei.templatedArray,OU=Ew,hue=USe(HSe("selection",{type:{valType:"enumerated",values:["rect","path"],description:["Specifies the selection type to be drawn.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`) and (`x0`,`y1`).","If *path*, draw a custom SVG path using `path`."].join(" ")},xref:bb({},FU.xref,{description:["Sets the selection's x coordinate axis.",OU.axisRefDescription("x","left","right")].join(" ")}),yref:bb({},FU.yref,{description:["Sets the selection's x coordinate axis.",OU.axisRefDescription("y","bottom","top")].join(" ")}),x0:{valType:"any",description:"Sets the selection's starting x position."},x1:{valType:"any",description:"Sets the selection's end x position."},y0:{valType:"any",description:"Sets the selection's starting y position."},y1:{valType:"any",description:"Sets the selection's end y position."},path:{valType:"string",editType:"arraydraw",description:["For `type` *path* - a valid SVG path similar to `shapes.path` in data coordinates.","Allowed segments are: M, L and Z."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw",description:"Sets the opacity of the selection."},line:{color:BU.color,width:bb({},BU.width,{min:1,dflt:1}),dash:bb({},qSe,{dflt:"dot"})}}),"arraydraw","from-root"),NU=Nt.exports,_b=nn(),$Se=mu,VSe=hue,qU=D0,GSe=t(function(r,n){$Se(r,n,{name:"selections",handleItemDefaults:jSe});for(var i=n.selections,s=0;s<i.length;s++){var o=i[s];!o||o.path===void 0&&(o.x0===void 0||o.x1===void 0||o.y0===void 0||o.y1===void 0)&&(n.selections[s]=null)}},"supplyLayoutDefaults");function jSe(e,r,n){function i(w,x){return NU.coerce(e,r,VSe,w,x)}t(i,"coerce");var s=i("path"),o=s?"path":"rect",a=i("type",o),l=a!=="path";l&&delete r.path,i("opacity"),i("line.color"),i("line.width"),i("line.dash");for(var u=["x","y"],f=0;f<2;f++){var h=u[f],v={_fullLayout:n},c,d,g,p=_b.coerceRef(e,r,v,h);if(c=_b.getFromId(v,p),c._selectionIndices.push(r._index),g=qU.rangeToShapePosition(c),d=qU.shapePositionToRange(c),l){var b=h+"0",m=h+"1",y=e[b],T=e[m];e[b]=d(e[b],!0),e[m]=d(e[m],!0),_b.coercePosition(r,v,i,p,b),_b.coercePosition(r,v,i,p,m);var _=r[b],M=r[m];_!==void 0&&M!==void 0&&(r[b]=g(_),r[m]=g(M),e[b]=y,e[m]=T)}}l&&NU.noneOrAll(e,r,["x0","x1","y0","y1"])}t(jSe,"handleSelectionDefaults");var YSe=t(function(r,n,i){i("newselection.mode");var s=i("newselection.line.width");s&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")},"supplyDrawNewSelectionDefaults"),WSe=Na,UU=Nt.exports,HU=$o,Cw=t(function(r){return t(function(i,s){var o=i[r];if(!!Array.isArray(o))for(var a=WSe.subplotsRegistry.cartesian,l=a.idRegex,u=s._subplots,f=u.xaxis,h=u.yaxis,v=u.cartesian,c=s._has("cartesian")||s._has("gl2d"),d=0;d<o.length;d++){var g=o[d];if(!!UU.isPlainObject(g)){var p=HU.cleanId(g.xref,"x",!1),b=HU.cleanId(g.yref,"y",!1),m=l.x.test(p),y=l.y.test(b);if(m||y){c||UU.pushUnique(s._basePlotModules,a);var T=!1;m&&f.indexOf(p)===-1&&(f.push(p),T=!0),y&&h.indexOf(b)===-1&&(h.push(b),T=!0),T&&m&&y&&v.push(p+b)}}}},"includeComponents")},"makeIncludeComponents"),$U=Yle,Lm=LSe,Qs={moduleType:"component",name:"selections",layoutAttributes:hue,supplyLayoutDefaults:GSe,supplyDrawNewSelectionDefaults:YSe,includeBasePlot:Cw("selections"),draw:$U.draw,drawOne:$U.drawOne,reselect:Lm.reselect,prepSelect:Lm.prepSelect,clearOutline:Lm.clearOutline,clearSelectionsCache:Lm.clearSelectionsCache,selectOnClick:Lm.selectOnClick},B8=Va.exports,Bc=Nt.exports,VU=Bc.numberFormat,XSe=rl.exports,ZSe=gw,wb=Na,vue=Bc.strTranslate,KSe=Ji,GU=$a.exports,Wd=bn.exports,JSe=Ko,jU=nn(),QSe=pv,eMe=xu.exports,due=Rh,Tb=due.selectingOrDrawing,tMe=due.freeMode,rMe=yl.FROM_TL,aMe=xw,nMe=tx.redrawReglTraces,iMe=so.exports,Lz=$o.getFromId,oMe=Qs.prepSelect,sMe=Qs.clearOutline,lMe=Qs.selectOnClick,aA=$le(),O8=al,YU=O8.MINDRAG,Gu=O8.MINZOOM,WU=!0;function uMe(e,r,n,i,s,o,a,l){var u=e._fullLayout._zoomlayer,f=a+l==="nsew",h=(a+l).length===1,v,c,d,g,p,b,m,y,T,_,M,w,x,A,S,k,L,P,D,B,z,R,F;function O(){if(v=r.xaxis,c=r.yaxis,T=v._length,_=c._length,m=v._offset,y=c._offset,d={},d[v._id]=v,g={},g[c._id]=c,a&&l)for(var Ye=r.overlays,$e=0;$e<Ye.length;$e++){var Ct=Ye[$e].xaxis;d[Ct._id]=Ct;var It=Ye[$e].yaxis;g[It._id]=It}p=JU(d),b=JU(g),x=XU(p,l),A=XU(b,a),S=!A&&!x,w=KU(e,e._fullLayout._axisMatchGroups,d,g),M=KU(e,e._fullLayout._axisConstraintGroups,d,g,w);var Vt=M.isSubplotConstrained||w.isSubplotConstrained;k=l||Vt,L=a||Vt;var $t=e._fullLayout;P=$t._has("scattergl"),D=$t._has("splom"),B=$t._has("svg")}t(O,"recomputeAxisLists"),O();var q=hMe(A+x,e._fullLayout.dragmode,f),H=gue(r,a+l+"drag",q,n,i,s,o);if(S&&!f)return H.onmousedown=null,H.style.pointerEvents="none",H;var j={element:H,gd:e,plotinfo:r};j.prepFn=function(Ye,$e,Ct){var It=j.dragmode,Vt=e._fullLayout.dragmode;Vt!==It&&(j.dragmode=Vt),O(),R=e._fullLayout._invScaleX,F=e._fullLayout._invScaleY,S||(f?Ye.shiftKey?Vt==="pan"?Vt="zoom":Tb(Vt)||(Vt="pan"):Ye.ctrlKey&&(Vt="pan"):Vt="pan"),tMe(Vt)?j.minDrag=1:j.minDrag=void 0,Tb(Vt)?(j.xaxes=p,j.yaxes=b,oMe(Ye,$e,Ct,j,Vt)):(j.clickFn=G,Tb(It)&&X(),S||(Vt==="zoom"?(j.moveFn=ce,j.doneFn=Te,j.minDrag=1,fe(Ye,$e,Ct)):Vt==="pan"&&(j.moveFn=we,j.doneFn=qe))),e._fullLayout._redrag=function(){var $t=e._dragdata;if($t&&$t.element===H){var Gt=e._fullLayout.dragmode;Tb(Gt)||(O(),Je([0,0,T,_]),j.moveFn($t.dx,$t.dy))}}};function X(){j.plotinfo.selection=!1,sMe(e)}t(X,"clearAndResetSelect");function G(Ye,$e){var Ct=j.gd;if(Ct._fullLayout._activeShapeIndex>=0){Ct._fullLayout._deactivateShape(Ct);return}var It=Ct._fullLayout.clickmode;if(Pz(Ct),Ye===2&&!h&&Fe(),f)It.indexOf("select")>-1&&lMe($e,Ct,p,b,r.id,j),It.indexOf("event")>-1&&JSe.click(Ct,$e,r.id);else if(Ye===1&&h){var Vt=a?c:v,$t=a==="s"||l==="w"?0:1,Gt=Vt._name+".range["+$t+"]",Jt=fMe(Vt,$t),kt="left",ft="middle";if(Vt.fixedrange)return;a?(ft=a==="n"?"top":"bottom",Vt.side==="right"&&(kt="right")):l==="e"&&(kt="right"),Ct._context.showAxisRangeEntryBoxes&&B8.select(H).call(KSe.makeEditable,{gd:Ct,immediate:!0,background:Ct._fullLayout.paper_bgcolor,text:String(Jt),fill:Vt.tickfont?Vt.tickfont.color:"#444",horizontalAlign:kt,verticalAlign:ft}).on("edit",function(zt){var Pt=Vt.d2r(zt);Pt!==void 0&&wb.call("_guiRelayout",Ct,Gt,Pt)})}}t(G,"clickFn"),eMe.init(j);var $,te,ee,ie,se,W,ne,he,re,ae;function fe(Ye,$e,Ct){var It=H.getBoundingClientRect();$=$e-It.left,te=Ct-It.top,e._fullLayout._calcInverseTransform(e);var Vt=Bc.apply3DTransform(e._fullLayout._invTransform)($,te);$=Vt[0],te=Vt[1],ee={l:$,r:$,w:0,t:te,b:te,h:0},ie=e._hmpixcount?e._hmlumcount/e._hmpixcount:XSe(e._fullLayout.plot_bgcolor).getLuminance(),se="M0,0H"+T+"V"+_+"H0V0",W=!1,ne="xy",ae=!1,he=yue(u,ie,m,y,se),re=mue(u,m,y)}t(fe,"zoomPrep");function ce(Ye,$e){if(e._transitioningWithDuration)return!1;var Ct=Math.max(0,Math.min(T,R*Ye+$)),It=Math.max(0,Math.min(_,F*$e+te)),Vt=Math.abs(Ct-$),$t=Math.abs(It-te);ee.l=Math.min($,Ct),ee.r=Math.max($,Ct),ee.t=Math.min(te,It),ee.b=Math.max(te,It);function Gt(){ne="",ee.r=ee.l,ee.t=ee.b,re.attr("d","M0,0Z")}if(t(Gt,"noZoom"),M.isSubplotConstrained)Vt>Gu||$t>Gu?(ne="xy",Vt/T>$t/_?($t=Vt*_/T,te>It?ee.t=te-$t:ee.b=te+$t):(Vt=$t*T/_,$>Ct?ee.l=$-Vt:ee.r=$+Vt),re.attr("d",p_(ee))):Gt();else if(w.isSubplotConstrained)if(Vt>Gu||$t>Gu){ne="xy";var Jt=Math.min(ee.l/T,(_-ee.b)/_),kt=Math.max(ee.r/T,(_-ee.t)/_);ee.l=Jt*T,ee.r=kt*T,ee.b=(1-Jt)*_,ee.t=(1-kt)*_,re.attr("d",p_(ee))}else Gt();else!A||$t<Math.min(Math.max(Vt*.6,YU),Gu)?Vt<YU||!x?Gt():(ee.t=0,ee.b=_,ne="x",re.attr("d",vMe(ee,te))):!x||Vt<Math.min($t*.6,Gu)?(ee.l=0,ee.r=T,ne="y",re.attr("d",dMe(ee,$))):(ne="xy",re.attr("d",p_(ee)));ee.w=ee.r-ee.l,ee.h=ee.b-ee.t,ne&&(ae=!0),e._dragged=ae,xue(he,re,ee,se,W,ie),xe(),e.emit("plotly_relayouting",z),W=!0}t(ce,"zoomMove");function xe(){z={},(ne==="xy"||ne==="x")&&(Rz(p,ee.l/T,ee.r/T,z,M.xaxes),Ee("x",z)),(ne==="xy"||ne==="y")&&(Rz(b,(_-ee.b)/_,(_-ee.t)/_,z,M.yaxes),Ee("y",z))}t(xe,"computeZoomUpdates");function Te(){xe(),Pz(e),qe(),_ue(e)}t(Te,"zoomDone");var me=[0,0,T,_],pe=null,oe=O8.REDRAWDELAY,de=r.mainplot?e._fullLayout._plots[r.mainplot]:r;function ye(Ye){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom)return;if(X(),e._transitioningWithDuration){Ye.preventDefault(),Ye.stopPropagation();return}O(),clearTimeout(pe);var $e=-Ye.deltaY;if(isFinite($e)||($e=Ye.wheelDelta/10),!isFinite($e)){Bc.log("Did not find wheel motion attributes: ",Ye);return}var Ct=Math.exp(-Math.min(Math.max($e,-20),20)/200),It=de.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Vt=(Ye.clientX-It.left)/It.width,$t=(It.bottom-Ye.clientY)/It.height,Gt;function Jt(kt,ft,zt){if(kt.fixedrange)return;var Pt=Bc.simpleMap(kt.range,kt.r2l),Et=Pt[0]+(Pt[1]-Pt[0])*ft;function Wt(ze){return kt.l2r(Et+(ze-Et)*zt)}t(Wt,"doZoom"),kt.range=Pt.map(Wt)}if(t(Jt,"zoomWheelOneAxis"),k){for(l||(Vt=.5),Gt=0;Gt<p.length;Gt++)Jt(p[Gt],Vt,Ct);Ee("x"),me[2]*=Ct,me[0]+=me[2]*Vt*(1/Ct-1)}if(L){for(a||($t=.5),Gt=0;Gt<b.length;Gt++)Jt(b[Gt],$t,Ct);Ee("y"),me[3]*=Ct,me[1]+=me[3]*(1-$t)*(1/Ct-1)}Je(me),De(),e.emit("plotly_relayouting",z),pe=setTimeout(function(){!e._fullLayout||(me=[0,0,T,_],qe())},oe),Ye.preventDefault()}t(ye,"zoomWheel"),a.length*l.length!==1&&wue(H,ye);function we(Ye,$e){if(Ye=Ye*R,$e=$e*F,e._transitioningWithDuration)return;if(e._fullLayout._replotting=!0,x==="ew"||A==="ns"){var Ct=x?-Ye:0,It=A?-$e:0;if(w.isSubplotConstrained){if(x&&A){var Vt=(Ye/T-$e/_)/2;Ye=Vt*T,$e=-Vt*_,Ct=-Ye,It=-$e}A?Ct=-It*T/_:It=-Ct*_/T}x&&(ZU(p,Ye),Ee("x")),A&&(ZU(b,$e),Ee("y")),Je([Ct,It,T,_]),De(),e.emit("plotly_relayouting",z);return}function $t(Wt,ze,tt){for(var at=1-ze,vt,_t,Rt=0;Rt<Wt.length;Rt++){var nr=Wt[Rt];if(!nr.fixedrange){vt=nr,_t=nr._rl[at]+(nr._rl[ze]-nr._rl[at])/cMe(tt/nr._length);var ir=nr.l2r(_t);ir!==!1&&ir!==void 0&&(nr.range[ze]=ir)}}return vt._length*(vt._rl[ze]-_t)/(vt._rl[ze]-vt._rl[at])}t($t,"dz");var Gt=x==="w"==(A==="n")?1:-1;if(x&&A&&(M.isSubplotConstrained||w.isSubplotConstrained)){var Jt=(Ye/T+Gt*$e/_)/2;Ye=Jt*T,$e=Gt*Jt*_}var kt,ft;if(x==="w"?Ye=$t(p,0,Ye):x==="e"?Ye=$t(p,1,-Ye):x||(Ye=0),A==="n"?$e=$t(b,1,$e):A==="s"?$e=$t(b,0,-$e):A||($e=0),kt=x==="w"?Ye:0,ft=A==="n"?$e:0,M.isSubplotConstrained&&!w.isSubplotConstrained||w.isSubplotConstrained&&x&&A&&Gt>0){var zt;if(w.isSubplotConstrained||!x&&A.length===1){for(zt=0;zt<p.length;zt++)p[zt].range=p[zt]._r.slice(),aA(p[zt],1-$e/_);Ye=$e*T/_,kt=Ye/2}if(w.isSubplotConstrained||!A&&x.length===1){for(zt=0;zt<b.length;zt++)b[zt].range=b[zt]._r.slice(),aA(b[zt],1-Ye/T);$e=Ye*_/T,ft=$e/2}}(!w.isSubplotConstrained||!A)&&Ee("x"),(!w.isSubplotConstrained||!x)&&Ee("y");var Pt=T-Ye,Et=_-$e;w.isSubplotConstrained&&!(x&&A)&&(x?(ft=kt?0:Ye*_/T,Et=Pt*_/T):(kt=ft?0:$e*T/_,Pt=Et*T/_)),Je([kt,ft,Pt,Et]),De(),e.emit("plotly_relayouting",z)}t(we,"plotDrag");function Ee(Ye,$e){for(var Ct=w.isSubplotConstrained?{x:b,y:p}[Ye]:w[Ye+"axes"],It=w.isSubplotConstrained?{x:p,y:b}[Ye]:[],Vt=0;Vt<Ct.length;Vt++){var $t=Ct[Vt],Gt=$t._id,Jt=w.xLinks[Gt]||w.yLinks[Gt],kt=It[0]||d[Jt]||g[Jt];kt&&($e?($e[$t._name+".range[0]"]=$e[kt._name+".range[0]"],$e[$t._name+".range[1]"]=$e[kt._name+".range[1]"]):$t.range=kt.range.slice())}}t(Ee,"updateMatchedAxRange");function De(){var Ye=[],$e;function Ct($t){for($e=0;$e<$t.length;$e++)$t[$e].fixedrange||Ye.push($t[$e]._id)}for(t(Ct,"pushActiveAxIds"),k&&(Ct(p),Ct(M.xaxes),Ct(w.xaxes)),L&&(Ct(b),Ct(M.yaxes),Ct(w.yaxes)),z={},$e=0;$e<Ye.length;$e++){var It=Ye[$e],Vt=Lz(e,It);jU.drawOne(e,Vt,{skipTitle:!0}),z[Vt._name+".range[0]"]=Vt.range[0],z[Vt._name+".range[1]"]=Vt.range[1]}jU.redrawComponents(e,Ye)}t(De,"ticksAndAnnotations");function Fe(){if(!e._transitioningWithDuration){var Ye=e._context.doubleClick,$e=[];x&&($e=$e.concat(p)),A&&($e=$e.concat(b)),w.xaxes&&($e=$e.concat(w.xaxes)),w.yaxes&&($e=$e.concat(w.yaxes));var Ct={},It,Vt,$t;if(Ye==="reset+autosize"){for(Ye="autosize",Vt=0;Vt<$e.length;Vt++)if(It=$e[Vt],It._rangeInitial&&(It.range[0]!==It._rangeInitial[0]||It.range[1]!==It._rangeInitial[1])||!It._rangeInitial&&!It.autorange){Ye="reset";break}}if(Ye==="autosize")for(Vt=0;Vt<$e.length;Vt++)It=$e[Vt],It.fixedrange||(Ct[It._name+".autorange"]=!0);else if(Ye==="reset")for((x||M.isSubplotConstrained)&&($e=$e.concat(M.xaxes)),A&&!M.isSubplotConstrained&&($e=$e.concat(M.yaxes)),M.isSubplotConstrained&&(x?A||($e=$e.concat(b)):$e=$e.concat(p)),Vt=0;Vt<$e.length;Vt++)It=$e[Vt],It.fixedrange||(It._rangeInitial?($t=It._rangeInitial,Ct[It._name+".range[0]"]=$t[0],Ct[It._name+".range[1]"]=$t[1]):Ct[It._name+".autorange"]=!0);e.emit("plotly_doubleclick",null),wb.call("_guiRelayout",e,Ct)}}t(Fe,"doubleClick");function qe(){Je([0,0,T,_]),Bc.syncOrAsync([iMe.previousPromises,function(){e._fullLayout._replotting=!1,wb.call("_guiRelayout",e,z)}],e)}t(qe,"dragTail");function Je(Ye){var $e=e._fullLayout,Ct=$e._plots,It=$e._subplots.cartesian,Vt,$t,Gt,Jt;if(D&&wb.subplotsRegistry.splom.drag(e),P){for(Vt=0;Vt<It.length;Vt++)if($t=Ct[It[Vt]],Gt=$t.xaxis,Jt=$t.yaxis,$t._scene){var kt=Bc.simpleMap(Gt.range,Gt.r2l),ft=Bc.simpleMap(Jt.range,Jt.r2l);$t._scene.update({range:[kt[0],ft[0],kt[1],ft[1]]})}}if((D||P)&&(aMe(e),nMe(e)),B){var zt=Ye[2]/v._length,Pt=Ye[3]/c._length;for(Vt=0;Vt<It.length;Vt++){$t=Ct[It[Vt]],Gt=$t.xaxis,Jt=$t.yaxis;var Et=(k||w.isSubplotConstrained)&&!Gt.fixedrange&&d[Gt._id],Wt=(L||w.isSubplotConstrained)&&!Jt.fixedrange&&g[Jt._id],ze,tt,at,vt;if(Et?(ze=zt,at=l||w.isSubplotConstrained?Ye[0]:Ue(Gt,ze)):w.xaHash[Gt._id]?(ze=zt,at=Ye[0]*Gt._length/v._length):w.yaHash[Gt._id]?(ze=Pt,at=A==="ns"?-Ye[1]*Gt._length/c._length:Ue(Gt,ze,{n:"top",s:"bottom"}[A])):(ze=Ge(Gt,zt,Pt),at=et(Gt,ze)),Wt?(tt=Pt,vt=a||w.isSubplotConstrained?Ye[1]:Ue(Jt,tt)):w.yaHash[Jt._id]?(tt=Pt,vt=Ye[1]*Jt._length/c._length):w.xaHash[Jt._id]?(tt=zt,vt=x==="ew"?-Ye[0]*Jt._length/v._length:Ue(Jt,tt,{e:"right",w:"left"}[x])):(tt=Ge(Jt,zt,Pt),vt=et(Jt,tt)),!(!ze&&!tt)){ze||(ze=1),tt||(tt=1);var _t=Gt._offset-at/ze,Rt=Jt._offset-vt/tt;$t.clipRect.call(Wd.setTranslate,at,vt).call(Wd.setScale,ze,tt),$t.plot.call(Wd.setTranslate,_t,Rt).call(Wd.setScale,1/ze,1/tt),(ze!==$t.xScaleFactor||tt!==$t.yScaleFactor)&&(Wd.setPointGroupScale($t.zoomScalePts,ze,tt),Wd.setTextPointsScale($t.zoomScaleTxt,ze,tt)),Wd.hideOutsideRangePoints($t.clipOnAxisFalseTraces,$t),$t.xScaleFactor=ze,$t.yScaleFactor=tt}}}}t(Je,"updateSubplots");function Ge(Ye,$e,Ct){return Ye.fixedrange?0:k&&M.xaHash[Ye._id]?$e:L&&(M.isSubplotConstrained?M.xaHash:M.yaHash)[Ye._id]?Ct:0}t(Ge,"getLinkedScaleFactor");function et(Ye,$e){return $e?(Ye.range=Ye._r.slice(),aA(Ye,$e),Ue(Ye,$e)):0}t(et,"scaleAndGetShift");function Ue(Ye,$e,Ct){return Ye._length*(1-$e)*rMe[Ct||Ye.constraintoward||"middle"]}return t(Ue,"getShift"),H}t(uMe,"makeDragBox");function pue(e,r,n,i){var s=Bc.ensureSingle(e.draglayer,r,n,function(o){o.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return s.call(QSe,i),s.node()}t(pue,"makeDragger");function gue(e,r,n,i,s,o,a){var l=pue(e,"rect",r,n);return B8.select(l).call(Wd.setRect,i,s,o,a),l}t(gue,"makeRectDragger");function XU(e,r){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return r;return""}t(XU,"isDirectionActive");function fMe(e,r){var n=e.range[r],i=Math.abs(n-e.range[1-r]),s;return e.type==="date"?n:e.type==="log"?(s=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,VU("."+s+"g")(Math.pow(10,n))):(s=Math.floor(Math.log(Math.abs(n))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,VU("."+String(s)+"g")(n))}t(fMe,"getEndText");function Rz(e,r,n,i,s){for(var o=0;o<e.length;o++){var a=e[o];if(!a.fixedrange)if(a.rangebreaks){var l=a._id.charAt(0)==="y",u=l?1-r:r,f=l?1-n:n;i[a._name+".range[0]"]=a.l2r(a.p2l(u*a._length)),i[a._name+".range[1]"]=a.l2r(a.p2l(f*a._length))}else{var h=a._rl[0],v=a._rl[1]-h;i[a._name+".range[0]"]=a.l2r(h+v*r),i[a._name+".range[1]"]=a.l2r(h+v*n)}}if(s&&s.length){var c=(r+(1-n))/2;Rz(s,c,1-c,i,[])}}t(Rz,"zoomAxRanges");function ZU(e,r){for(var n=0;n<e.length;n++){var i=e[n];if(!i.fixedrange)if(i.rangebreaks){var s=0,o=i._length,a=i.p2l(s+r)-i.p2l(s),l=i.p2l(o+r)-i.p2l(o),u=(a+l)/2;i.range=[i.l2r(i._rl[0]-u),i.l2r(i._rl[1]-u)]}else i.range=[i.l2r(i._rl[0]-r/i._m),i.l2r(i._rl[1]-r/i._m)]}}t(ZU,"dragAxList");function cMe(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}t(cMe,"dZoom");function hMe(e,r,n){return e?e==="nsew"?n?"":r==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}t(hMe,"getDragCursor");function yue(e,r,n,i,s){return e.append("path").attr("class","zoombox").style({fill:r>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",vue(n,i)).attr("d",s+"Z")}t(yue,"makeZoombox");function mue(e,r,n){return e.append("path").attr("class","zoombox-corners").style({fill:GU.background,stroke:GU.defaultLine,"stroke-width":1,opacity:0}).attr("transform",vue(r,n)).attr("d","M0,0Z")}t(mue,"makeCorners");function xue(e,r,n,i,s,o){e.attr("d",i+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),bue(e,r,s,o)}t(xue,"updateZoombox");function bue(e,r,n,i){n||(e.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),r.transition().style("opacity",1).duration(200))}t(bue,"transitionZoombox");function Pz(e){B8.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}t(Pz,"removeZoombox");function _ue(e){WU&&e.data&&e._context.showTips&&(Bc.notifier(Bc._(e,"Double-click to zoom back out"),"long"),WU=!1)}t(_ue,"showDoubleClickNotifier");function vMe(e,r){return"M"+(e.l-.5)+","+(r-Gu-.5)+"h-3v"+(2*Gu+1)+"h3ZM"+(e.r+.5)+","+(r-Gu-.5)+"h3v"+(2*Gu+1)+"h-3Z"}t(vMe,"xCorners");function dMe(e,r){return"M"+(r-Gu-.5)+","+(e.t-.5)+"v-3h"+(2*Gu+1)+"v3ZM"+(r-Gu-.5)+","+(e.b+.5)+"v3h"+(2*Gu+1)+"v-3Z"}t(dMe,"yCorners");function p_(e){var r=Math.floor(Math.min(e.b-e.t,e.r-e.l,Gu)/2);return"M"+(e.l-3.5)+","+(e.t-.5+r)+"h3v"+-r+"h"+r+"v-3h-"+(r+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+r)+"h-3v"+-r+"h"+-r+"v-3h"+(r+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-r)+"h-3v"+r+"h"+-r+"v3h"+(r+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-r)+"h3v"+r+"h"+r+"v3h-"+(r+3)+"Z"}t(p_,"xyCorners");function KU(e,r,n,i,s){for(var o=!1,a={},l={},u,f,h,v,c=(s||{}).xaHash,d=(s||{}).yaHash,g=0;g<r.length;g++){var p=r[g];for(u in n)if(p[u]){for(h in p)!(s&&(c[h]||d[h]))&&!(h.charAt(0)==="x"?n:i)[h]&&(a[h]=u);for(f in i)!(s&&(c[f]||d[f]))&&p[f]&&(o=!0)}for(f in i)if(p[f])for(v in p)!(s&&(c[v]||d[v]))&&!(v.charAt(0)==="x"?n:i)[v]&&(l[v]=f)}o&&(Bc.extendFlat(a,l),l={});var b={},m=[];for(h in a){var y=Lz(e,h);m.push(y),b[y._id]=y}var T={},_=[];for(v in l){var M=Lz(e,v);_.push(M),T[M._id]=M}return{xaHash:b,yaHash:T,xaxes:m,yaxes:_,xLinks:a,yLinks:l,isSubplotConstrained:o}}t(KU,"calcLinks");function wue(e,r){if(!ZSe)e.onwheel!==void 0?e.onwheel=r:e.onmousewheel!==void 0?e.onmousewheel=r:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",r,{passive:!1}));else{var n=e.onwheel!==void 0?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=r,e.addEventListener(n,r,{passive:!1})}}t(wue,"attachWheelEventHandler");function JU(e){var r=[];for(var n in e)r.push(e[n]);return r}t(JU,"hashValues");var Tue={makeDragBox:uMe,makeDragger:pue,makeRectDragger:gue,makeZoombox:yue,makeCorners:mue,updateZoombox:xue,xyCorners:p_,transitionZoombox:bue,removeZoombox:Pz,showDoubleClickNotifier:_ue,attachWheelEventHandler:wue};(function(e){var r=Va.exports,n=Ko,i=xu.exports,s=pv,o=Tue.makeDragBox,a=al.DRAGGERSIZE;e.initInteractions=t(function(u){var f=u._fullLayout;if(u._context.staticPlot){r.select(u).selectAll(".drag").remove();return}if(!(!f._has("cartesian")&&!f._has("splom"))){var h=Object.keys(f._plots||{}).sort(function(c,d){if((f._plots[c].mainplot&&!0)===(f._plots[d].mainplot&&!0)){var g=c.split("y"),p=d.split("y");return g[0]===p[0]?Number(g[1]||1)-Number(p[1]||1):Number(g[0]||1)-Number(p[0]||1)}return f._plots[c].mainplot?1:-1});h.forEach(function(c){var d=f._plots[c],g=d.xaxis,p=d.yaxis;if(!d.mainplot){var b=o(u,d,g._offset,p._offset,g._length,p._length,"ns","ew");b.onmousemove=function(T){u._fullLayout._rehover=function(){u._fullLayout._hoversubplot===c&&u._fullLayout._plots[c]&&n.hover(u,T,c)},n.hover(u,T,c),u._fullLayout._lasthover=b,u._fullLayout._hoversubplot=c},b.onmouseout=function(T){u._dragging||(u._fullLayout._hoversubplot=null,i.unhover(u,T))},u._context.showAxisDragHandles&&(o(u,d,g._offset-a,p._offset-a,a,a,"n","w"),o(u,d,g._offset+g._length,p._offset-a,a,a,"n","e"),o(u,d,g._offset-a,p._offset+p._length,a,a,"s","w"),o(u,d,g._offset+g._length,p._offset+p._length,a,a,"s","e"))}if(u._context.showAxisDragHandles){if(c===g._mainSubplot){var m=g._mainLinePosition;g.side==="top"&&(m-=a),o(u,d,g._offset+g._length*.1,m,g._length*.8,a,"","ew"),o(u,d,g._offset,m,g._length*.1,a,"","w"),o(u,d,g._offset+g._length*.9,m,g._length*.1,a,"","e")}if(c===p._mainSubplot){var y=p._mainLinePosition;p.side!=="right"&&(y-=a),o(u,d,y,p._offset+p._length*.1,a,p._length*.8,"ns",""),o(u,d,y,p._offset+p._length*.9,a,p._length*.1,"s",""),o(u,d,y,p._offset,a,p._length*.1,"n","")}}});var v=f._hoverlayer.node();v.onmousemove=function(c){c.target=u._fullLayout._lasthover,n.hover(u,c,f._hoversubplot)},v.onclick=function(c){c.target=u._fullLayout._lasthover,n.click(u,c)},v.onmousedown=function(c){u._fullLayout._lasthover.onmousedown(c)},e.updateFx(u)}},"initInteractions"),e.updateFx=function(l){var u=l._fullLayout,f=u.dragmode==="pan"?"move":"crosshair";s(u._draggers,f)}})(c8);var nx={},QU=Na,pMe=t(function(r){for(var n=QU.layoutArrayContainers,i=QU.layoutArrayRegexes,s=r.split("[")[0],o,a,l=0;l<i.length;l++)if(a=r.match(i[l]),a&&a.index===0){o=a[0];break}if(o||(o=n[n.indexOf(s)]),!o)return!1;var u=r.substr(o.length);return u?(a=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),a?{array:o,index:Number(a[1]),property:a[3]||""}:!1):{array:o,index:"",property:""}},"containerArrayMatch"),gMe=xy,nA=ZF,Rm=cp.exports,yMe=aw.sorterAsc,iA=Na;nx.containerArrayMatch=pMe;var mMe=nx.isAddVal=t(function(r){return r==="add"||gMe(r)},"isAddVal"),eH=nx.isRemoveVal=t(function(r){return r===null||r==="remove"},"isRemoveVal");nx.applyContainerArrayChanges=t(function(r,n,i,s,o){var a=n.astr,l=iA.getComponentMethod(a,"supplyLayoutDefaults"),u=iA.getComponentMethod(a,"draw"),f=iA.getComponentMethod(a,"drawOne"),h=s.replot||s.recalc||l===nA||u===nA,v=r.layout,c=r._fullLayout;if(i[""]){Object.keys(i).length>1&&Rm.warn("Full array edits are incompatible with other edits",a);var d=i[""][""];if(eH(d))n.set(null);else if(Array.isArray(d))n.set(d);else return Rm.warn("Unrecognized full array edit value",a,d),!0;return h?!1:(l(v,c),u(r),!0)}var g=Object.keys(i).map(Number).sort(yMe),p=n.get(),b=p||[],m=o(c,a).get(),y=[],T=-1,_=b.length,M,w,x,A,S,k,L,P;for(M=0;M<g.length;M++){if(x=g[M],A=i[x],S=Object.keys(A),k=A[""],L=mMe(k),x<0||x>b.length-(L?0:1)){Rm.warn("index out of range",a,x);continue}if(k!==void 0)S.length>1&&Rm.warn("Insertion & removal are incompatible with edits to the same index.",a,x),eH(k)?y.push(x):L?(k==="add"&&(k={}),b.splice(x,0,k),m&&m.splice(x,0,{})):Rm.warn("Unrecognized full object edit value",a,x,k),T===-1&&(T=x);else for(w=0;w<S.length;w++)P=a+"["+x+"].",o(b[x],S[w],P).set(A[S[w]])}for(M=y.length-1;M>=0;M--)b.splice(y[M],1),m&&m.splice(y[M],1);if(b.length?p||n.set(b):n.set(null),h)return!1;if(l(v,c),f!==nA){var D;if(T===-1)D=g;else{for(_=Math.max(b.length,_),D=[],M=0;M<g.length&&(x=g[M],!(x>=T));M++)D.push(x);for(M=T;M<_;M++)D.push(M)}for(M=0;M<D.length;M++)f(r,D[M])}else u(r);return!0},"applyContainerArrayChanges");var Aue={};(function(e){var r=xn,n=Boe,i=Na,s=Nt.exports,o=so.exports,a=$o,l=$a.exports,u=a.cleanId,f=a.getFromTrace,h=i.traceIs;e.clearPromiseQueue=function(_){Array.isArray(_._promises)&&_._promises.length>0&&s.log("Clearing previous rejected promises from queue."),_._promises=[]},e.cleanLayout=function(_){var M,w;_||(_={}),_.xaxis1&&(_.xaxis||(_.xaxis=_.xaxis1),delete _.xaxis1),_.yaxis1&&(_.yaxis||(_.yaxis=_.yaxis1),delete _.yaxis1),_.scene1&&(_.scene||(_.scene=_.scene1),delete _.scene1);var x=(o.subplotsRegistry.cartesian||{}).attrRegex,A=(o.subplotsRegistry.polar||{}).attrRegex,S=(o.subplotsRegistry.ternary||{}).attrRegex,k=(o.subplotsRegistry.gl3d||{}).attrRegex,L=Object.keys(_);for(M=0;M<L.length;M++){var P=L[M];if(x&&x.test(P)){var D=_[P];D.anchor&&D.anchor!=="free"&&(D.anchor=u(D.anchor)),D.overlaying&&(D.overlaying=u(D.overlaying)),D.type||(D.isdate?D.type="date":D.islog?D.type="log":D.isdate===!1&&D.islog===!1&&(D.type="linear")),(D.autorange==="withzero"||D.autorange==="tozero")&&(D.autorange=!0,D.rangemode="tozero"),delete D.islog,delete D.isdate,delete D.categories,b(D,"domain")&&delete D.domain,D.autotick!==void 0&&(D.tickmode===void 0&&(D.tickmode=D.autotick?"auto":"linear"),delete D.autotick),c(D)}else if(A&&A.test(P)){var B=_[P];c(B.radialaxis)}else if(S&&S.test(P)){var z=_[P];c(z.aaxis),c(z.baxis),c(z.caxis)}else if(k&&k.test(P)){var R=_[P],F=R.cameraposition;if(Array.isArray(F)&&F[0].length===4){var O=F[0],q=F[1],H=F[2],j=n([],O),X=[];for(w=0;w<3;++w)X[w]=q[w]+H*j[2+4*w];R.camera={eye:{x:X[0],y:X[1],z:X[2]},center:{x:q[0],y:q[1],z:q[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}c(R.xaxis),c(R.yaxis),c(R.zaxis)}}var G=Array.isArray(_.annotations)?_.annotations.length:0;for(M=0;M<G;M++){var $=_.annotations[M];!s.isPlainObject($)||($.ref&&($.ref==="paper"?($.xref="paper",$.yref="paper"):$.ref==="data"&&($.xref="x",$.yref="y"),delete $.ref),v($,"xref"),v($,"yref"))}var te=Array.isArray(_.shapes)?_.shapes.length:0;for(M=0;M<te;M++){var ee=_.shapes[M];!s.isPlainObject(ee)||(v(ee,"xref"),v(ee,"yref"))}var ie=Array.isArray(_.images)?_.images.length:0;for(M=0;M<ie;M++){var se=_.images[M];!s.isPlainObject(se)||(v(se,"xref"),v(se,"yref"))}var W=_.legend;return W&&(W.x>3?(W.x=1.02,W.xanchor="left"):W.x<-2&&(W.x=-.02,W.xanchor="right"),W.y>3?(W.y=1.02,W.yanchor="bottom"):W.y<-2&&(W.y=-.02,W.yanchor="top")),c(_),_.dragmode==="rotate"&&(_.dragmode="orbit"),l.clean(_),_.template&&_.template.layout&&e.cleanLayout(_.template.layout),_};function v(_,M){var w=_[M],x=M.charAt(0);w&&w!=="paper"&&(_[M]=u(w,x,!0))}t(v,"cleanAxRef");function c(_){_&&((typeof _.title=="string"||typeof _.title=="number")&&(_.title={text:_.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(w,x){var A=_[w],S=_.title&&_.title[x];A&&!S&&(_.title||(_.title={}),_.title[x]=_[w],delete _[w])}t(M,"rewireAttr")}t(c,"cleanTitle"),e.cleanData=function(_){for(var M=0;M<_.length;M++){var w=_[M],x;if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var A=l.defaults,S=w.error_y.color||(h(w,"bar")?l.defaultLine:A[M%A.length]);w.error_y.color=l.addOpacity(l.rgb(S),l.opacity(S)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir==="h"&&(h(w,"bar")||w.type.substr(0,9)==="histogram")&&(w.orientation="h",e.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&e.swapXYData(w),(w.type==="histogramx"||w.type==="histogramy")&&(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=u(w.xaxis,"x")),w.yaxis&&(w.yaxis=u(w.yaxis,"y")),h(w,"gl3d")&&w.scene&&(w.scene=o.subplotsRegistry.gl3d.cleanId(w.scene)),!h(w,"pie-like")&&!h(w,"bar-like"))if(Array.isArray(w.textposition))for(x=0;x<w.textposition.length;x++)w.textposition[x]=p(w.textposition[x]);else w.textposition&&(w.textposition=p(w.textposition));var k=i.getModule(w);if(k&&k.colorbar){var L=k.colorbar.container,P=L?w[L]:w;P&&P.colorscale&&(P.colorscale==="YIGnBu"&&(P.colorscale="YlGnBu"),P.colorscale==="YIOrRd"&&(P.colorscale="YlOrRd"))}if(w.type==="surface"&&s.isPlainObject(w.contours)){var D=["x","y","z"];for(x=0;x<D.length;x++){var B=w.contours[D[x]];!s.isPlainObject(B)||(B.highlightColor&&(B.highlightcolor=B.highlightColor,delete B.highlightColor),B.highlightWidth&&(B.highlightwidth=B.highlightWidth,delete B.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var z=(w.increasing||{}).showlegend!==!1,R=(w.decreasing||{}).showlegend!==!1,F=d(w.increasing),O=d(w.decreasing);if(F!==!1&&O!==!1){var q=g(F,O,z,R);q&&(w.name=q)}else(F||O)&&!w.name&&(w.name=F||O)}if(Array.isArray(w.transforms)){var H=w.transforms;for(x=0;x<H.length;x++){var j=H[x];if(!!s.isPlainObject(j))switch(j.type){case"filter":j.filtersrc&&(j.target=j.filtersrc,delete j.filtersrc),j.calendar&&(j.valuecalendar||(j.valuecalendar=j.calendar),delete j.calendar);break;case"groupby":if(j.styles=j.styles||j.style,j.styles&&!Array.isArray(j.styles)){var X=j.styles,G=Object.keys(X);j.styles=[];for(var $=0;$<G.length;$++)j.styles.push({target:G[$],value:X[G[$]]})}break}}}b(w,"line")&&delete w.line,"marker"in w&&(b(w.marker,"line")&&delete w.marker.line,b(w,"marker")&&delete w.marker),l.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),c(w),w.colorbar&&c(w.colorbar),w.marker&&w.marker.colorbar&&c(w.marker.colorbar),w.line&&w.line.colorbar&&c(w.line.colorbar),w.aaxis&&c(w.aaxis),w.baxis&&c(w.baxis)}};function d(_){if(!s.isPlainObject(_))return!1;var M=_.name;return delete _.name,delete _.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}t(d,"cleanFinanceDir");function g(_,M,w,x){if(w&&!x)return _;if(x&&!w||!_.trim())return M;if(!M.trim())return _;var A=Math.min(_.length,M.length),S;for(S=0;S<A&&_.charAt(S)===M.charAt(S);S++);var k=_.substr(0,S);return k.trim()}t(g,"commonPrefix");function p(_){var M="middle",w="center";return typeof _=="string"&&(_.indexOf("top")!==-1?M="top":_.indexOf("bottom")!==-1&&(M="bottom"),_.indexOf("left")!==-1?w="left":_.indexOf("right")!==-1&&(w="right")),M+" "+w}t(p,"cleanTextPosition");function b(_,M){return M in _&&typeof _[M]=="object"&&Object.keys(_[M]).length===0}t(b,"emptyContainer"),e.swapXYData=function(_){var M;if(s.swapAttrs(_,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(_.z)&&Array.isArray(_.z[0])&&(_.transpose?delete _.transpose:_.transpose=!0),_.error_x&&_.error_y){var w=_.error_y,x="copy_ystyle"in w?w.copy_ystyle:!(w.color||w.thickness||w.width);s.swapAttrs(_,["error_?.copy_ystyle"]),x&&s.swapAttrs(_,["error_?.color","error_?.thickness","error_?.width"])}if(typeof _.hoverinfo=="string"){var A=_.hoverinfo.split("+");for(M=0;M<A.length;M++)A[M]==="x"?A[M]="y":A[M]==="y"&&(A[M]="x");_.hoverinfo=A.join("+")}},e.coerceTraceIndices=function(_,M){if(r(M))return[M];if(!Array.isArray(M)||!M.length)return _.data.map(function(A,S){return S});if(Array.isArray(M)){for(var w=[],x=0;x<M.length;x++)s.isIndex(M[x],_.data.length)?w.push(M[x]):s.warn("trace index (",M[x],") is not a number or is out of bounds");return w}return M},e.manageArrayContainers=function(_,M,w){var x=_.obj,A=_.parts,S=A.length,k=A[S-1],L=r(k);if(L&&M===null){var P=A.slice(0,S-1).join("."),D=s.nestedProperty(x,P).get();D.splice(k,1)}else L&&_.get()===void 0&&_.get()===void 0&&(w[_.astr]=null),_.set(M)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function y(_){var M=_.search(m);if(M>0)return _.substr(0,M)}t(y,"getParent"),e.hasParent=function(_,M){for(var w=y(M);w;){if(w in _)return!0;w=y(w)}return!1};var T=["x","y","z"];e.clearAxisTypes=function(_,M,w){for(var x=0;x<M.length;x++)for(var A=_._fullData[x],S=0;S<3;S++){var k=f(_,A,T[S]);if(k&&k.type!=="log"){var L=k._name,P=k._id.substr(1);if(P.substr(0,5)==="scene"){if(w[P]!==void 0)continue;L=P+"."+L}var D=L+".type";w[L]===void 0&&w[D]===void 0&&s.nestedProperty(_.layout,D).set(null)}}}})(Aue);(function(e){var r=Va.exports,n=xn,i=rse,s=Nt.exports,o=s.nestedProperty,a=K1,l=n2e,u=Na,f=dp,h=so.exports,v=nn(),c=bn.exports,d=$a.exports,g=c8.initInteractions,p=ic,b=Qs.clearOutline,m=wy.dfltConfig,y=nx,T=Aue,_=tx,M=_o,w=al.AX_NAME_PATTERN,x=0,A=5;function S(ze,tt,at,vt){var _t;if(ze=s.getGraphDiv(ze),a.init(ze),s.isPlainObject(tt)){var Rt=tt;tt=Rt.data,at=Rt.layout,vt=Rt.config,_t=Rt.frames}var nr=a.triggerHandler(ze,"plotly_beforeplot",[tt,at,vt]);if(nr===!1)return Promise.reject();!tt&&!at&&!s.isPlotDiv(ze)&&s.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ze);function ir(){if(_t)return e.addFrames(ze,_t)}t(ir,"addFrames"),B(ze,vt),at||(at={}),r.select(ze).classed("js-plotly-plot",!0),c.makeTester(),Array.isArray(ze._promises)||(ze._promises=[]);var ur=(ze.data||[]).length===0&&Array.isArray(tt);Array.isArray(tt)&&(T.cleanData(tt),ur?ze.data=tt:ze.data.push.apply(ze.data,tt),ze.empty=!1),(!ze.layout||ur)&&(ze.layout=T.cleanLayout(at)),h.supplyDefaults(ze);var qt=ze._fullLayout,hr=qt._has("cartesian");qt._replotting=!0,(ur||qt._shouldCreateBgLayer)&&(Wt(ze),qt._shouldCreateBgLayer&&delete qt._shouldCreateBgLayer),c.initGradients(ze),c.initPatterns(ze),ur&&v.saveShowSpikeInitial(ze);var Fr=!ze.calcdata||ze.calcdata.length!==(ze._fullData||[]).length;Fr&&h.doCalcdata(ze);for(var Br=0;Br<ze.calcdata.length;Br++)ze.calcdata[Br][0].trace=ze._fullData[Br];ze._context.responsive?ze._responsiveChartHandler||(ze._responsiveChartHandler=function(){s.isHidden(ze)||h.resize(ze)},window.addEventListener("resize",ze._responsiveChartHandler)):s.clearResponsive(ze);var na=s.extendFlat({},qt._size),Ia=0;function ea(){for(var Qe=qt._basePlotModules,ot=0;ot<Qe.length;ot++)Qe[ot].drawFramework&&Qe[ot].drawFramework(ze);!qt._glcanvas&&qt._has("gl")&&(qt._glcanvas=qt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Xe){return Xe.key}),qt._glcanvas.enter().append("canvas").attr("class",function(Xe){return"gl-canvas gl-canvas-"+Xe.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ae=ze._context.plotGlPixelRatio;if(qt._glcanvas){qt._glcanvas.attr("width",qt.width*Ae).attr("height",qt.height*Ae).style("width",qt.width+"px").style("height",qt.height+"px");var Se=qt._glcanvas.data()[0].regl;if(Se&&(Math.floor(qt.width*Ae)!==Se._gl.drawingBufferWidth||Math.floor(qt.height*Ae)!==Se._gl.drawingBufferHeight)){var je="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Ia)s.error(je);else return s.log(je+" Clearing graph and plotting again."),h.cleanPlot([],{},ze._fullData,qt),h.supplyDefaults(ze),qt=ze._fullLayout,h.doCalcdata(ze),Ia++,ea()}}return qt.modebar.orientation==="h"?qt._modebardiv.style("height",null).style("width","100%"):qt._modebardiv.style("width",null).style("height",qt.height+"px"),h.previousPromises(ze)}t(ea,"drawFramework");function Er(){if(h.clearAutoMarginIds(ze),_.drawMarginPushers(ze),v.allowAutoMargin(ze),qt._has("pie"))for(var Qe=ze._fullData,ot=0;ot<Qe.length;ot++){var Ae=Qe[ot];Ae.type==="pie"&&Ae.automargin&&h.allowAutoMargin(ze,"pie."+Ae.uid+".automargin")}return h.doAutoMargin(ze),h.previousPromises(ze)}t(Er,"marginPushers");function dn(){if(!!h.didMarginChange(na,qt._size))return s.syncOrAsync([Er,_.layoutStyles],ze)}t(dn,"marginPushersAgain");function ya(){if(!Fr){Hr();return}return s.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),Hr],ze)}t(ya,"positionAndAutorange");function Hr(){ze._transitioning||(_.doAutoRangeAndConstraints(ze),ur&&v.saveRangeInitial(ze),u.getComponentMethod("rangeslider","calcAutorange")(ze))}t(Hr,"doAutoRangeAndConstraints");function un(){return v.draw(ze,ur?"":"redraw")}t(un,"drawAxes");var Ea=[h.previousPromises,ir,ea,Er,dn];hr&&Ea.push(ya),Ea.push(_.layoutStyles),hr&&Ea.push(un,t(function(ot){ot._fullLayout._insideTickLabelsAutorange&&Te(ot,ot._fullLayout._insideTickLabelsAutorange).then(function(){ot._fullLayout._insideTickLabelsAutorange=void 0})},"insideTickLabelsAutorange")),Ea.push(_.drawData,_.finalDraw,g,h.addLinks,h.rehover,h.redrag,h.reselect,h.doAutoMargin,nt,h.previousPromises);function nt(Qe){Qe._fullLayout._insideTickLabelsAutorange&&ur&&v.saveRangeInitial(Qe,!0)}t(nt,"saveRangeInitialForInsideTickLabels");var He=s.syncOrAsync(Ea,ze);return(!He||!He.then)&&(He=Promise.resolve()),He.then(function(){return k(ze),ze})}t(S,"_doPlot");function k(ze){var tt=ze._fullLayout;tt._redrawFromAutoMarginCount?tt._redrawFromAutoMarginCount--:ze.emit("plotly_afterplot")}t(k,"emitAfterPlot");function L(ze){return s.extendFlat(m,ze)}t(L,"setPlotConfig");function P(ze,tt){try{ze._fullLayout._paper.style("background",tt)}catch(at){s.error(at)}}t(P,"setBackground");function D(ze,tt){var at=d.combine(tt,"white");P(ze,at)}t(D,"opaqueSetBackground");function B(ze,tt){if(!ze._context){ze._context=s.extendDeep({},m);var at=r.select("base");ze._context._baseUrl=at.size()&&at.attr("href")?window.location.href.split("#")[0]:""}var vt=ze._context,_t,Rt,nr;if(tt){for(Rt=Object.keys(tt),_t=0;_t<Rt.length;_t++)nr=Rt[_t],!(nr==="editable"||nr==="edits")&&nr in vt&&(nr==="setBackground"&&tt[nr]==="opaque"?vt[nr]=D:vt[nr]=tt[nr]);tt.plot3dPixelRatio&&!vt.plotGlPixelRatio&&(vt.plotGlPixelRatio=vt.plot3dPixelRatio);var ir=tt.editable;if(ir!==void 0)for(vt.editable=ir,Rt=Object.keys(vt.edits),_t=0;_t<Rt.length;_t++)vt.edits[Rt[_t]]=ir;if(tt.edits)for(Rt=Object.keys(tt.edits),_t=0;_t<Rt.length;_t++)nr=Rt[_t],nr in vt.edits&&(vt.edits[nr]=tt.edits[nr]);vt._exportedPlot=tt._exportedPlot}vt.staticPlot&&(vt.editable=!1,vt.edits={},vt.autosizable=!1,vt.scrollZoom=!1,vt.doubleClick=!1,vt.showTips=!1,vt.showLink=!1,vt.displayModeBar=!1),vt.displayModeBar==="hover"&&!i&&(vt.displayModeBar=!0),(vt.setBackground==="transparent"||typeof vt.setBackground!="function")&&(vt.setBackground=P),vt._hasZeroHeight=vt._hasZeroHeight||ze.clientHeight===0,vt._hasZeroWidth=vt._hasZeroWidth||ze.clientWidth===0;var ur=vt.scrollZoom,qt=vt._scrollZoom={};if(ur===!0)qt.cartesian=1,qt.gl3d=1,qt.geo=1,qt.mapbox=1;else if(typeof ur=="string"){var hr=ur.split("+");for(_t=0;_t<hr.length;_t++)qt[hr[_t]]=1}else ur!==!1&&(qt.gl3d=1,qt.geo=1,qt.mapbox=1)}t(B,"setPlotContext");function z(ze){if(ze=s.getGraphDiv(ze),!s.isPlotDiv(ze))throw new Error("This element is not a Plotly plot: "+ze);return T.cleanData(ze.data),T.cleanLayout(ze.layout),ze.calcdata=void 0,e._doPlot(ze).then(function(){return ze.emit("plotly_redraw"),ze})}t(z,"redraw");function R(ze,tt,at,vt){return ze=s.getGraphDiv(ze),h.cleanPlot([],{},ze._fullData||[],ze._fullLayout||{}),h.purge(ze),e._doPlot(ze,tt,at,vt)}t(R,"newPlot");function F(ze,tt){var at=tt+1,vt=[],_t,Rt;for(_t=0;_t<ze.length;_t++)Rt=ze[_t],Rt<0?vt.push(at+Rt):vt.push(Rt);return vt}t(F,"positivifyIndices");function O(ze,tt,at){var vt,_t;for(vt=0;vt<tt.length;vt++){if(_t=tt[vt],_t!==parseInt(_t,10))throw new Error("all values in "+at+" must be integers");if(_t>=ze.data.length||_t<-ze.data.length)throw new Error(at+" must be valid indices for gd.data.");if(tt.indexOf(_t,vt+1)>-1||_t>=0&&tt.indexOf(-ze.data.length+_t)>-1||_t<0&&tt.indexOf(ze.data.length+_t)>-1)throw new Error("each index in "+at+" must be unique.")}}t(O,"assertIndexArray");function q(ze,tt,at){if(!Array.isArray(ze.data))throw new Error("gd.data must be an array.");if(typeof tt>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(tt)||(tt=[tt]),O(ze,tt,"currentIndices"),typeof at<"u"&&!Array.isArray(at)&&(at=[at]),typeof at<"u"&&O(ze,at,"newIndices"),typeof at<"u"&&tt.length!==at.length)throw new Error("current and new indices must be of equal length.")}t(q,"checkMoveTracesArgs");function H(ze,tt,at){var vt,_t;if(!Array.isArray(ze.data))throw new Error("gd.data must be an array.");if(typeof tt>"u")throw new Error("traces must be defined.");for(Array.isArray(tt)||(tt=[tt]),vt=0;vt<tt.length;vt++)if(_t=tt[vt],typeof _t!="object"||Array.isArray(_t)||_t===null)throw new Error("all values in traces array must be non-array objects");if(typeof at<"u"&&!Array.isArray(at)&&(at=[at]),typeof at<"u"&&at.length!==tt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}t(H,"checkAddTracesArgs");function j(ze,tt,at,vt){var _t=s.isPlainObject(vt);if(!Array.isArray(ze.data))throw new Error("gd.data must be an array");if(!s.isPlainObject(tt))throw new Error("update must be a key:value object");if(typeof at>"u")throw new Error("indices must be an integer or array of integers");O(ze,at,"indices");for(var Rt in tt){if(!Array.isArray(tt[Rt])||tt[Rt].length!==at.length)throw new Error("attribute "+Rt+" must be an array of length equal to indices array length");if(_t&&(!(Rt in vt)||!Array.isArray(vt[Rt])||vt[Rt].length!==tt[Rt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}t(j,"assertExtendTracesArgs");function X(ze,tt,at,vt){var _t=s.isPlainObject(vt),Rt=[],nr,ir,ur,qt,hr;Array.isArray(at)||(at=[at]),at=F(at,ze.data.length-1);for(var Fr in tt)for(var Br=0;Br<at.length;Br++){if(nr=ze.data[at[Br]],ur=o(nr,Fr),ir=ur.get(),qt=tt[Fr][Br],!s.isArrayOrTypedArray(qt))throw new Error("attribute: "+Fr+" index: "+Br+" must be an array");if(!s.isArrayOrTypedArray(ir))throw new Error("cannot extend missing or non-array attribute: "+Fr);if(ir.constructor!==qt.constructor)throw new Error("cannot extend array with an array of a different type: "+Fr);hr=_t?vt[Fr][Br]:vt,n(hr)||(hr=-1),Rt.push({prop:ur,target:ir,insert:qt,maxp:Math.floor(hr)})}return Rt}t(X,"getExtendProperties");function G(ze,tt,at,vt,_t){j(ze,tt,at,vt);for(var Rt=X(ze,tt,at,vt),nr={},ir={},ur=0;ur<Rt.length;ur++){var qt=Rt[ur].prop,hr=Rt[ur].maxp,Fr=_t(Rt[ur].target,Rt[ur].insert,hr);qt.set(Fr[0]),Array.isArray(nr[qt.astr])||(nr[qt.astr]=[]),nr[qt.astr].push(Fr[1]),Array.isArray(ir[qt.astr])||(ir[qt.astr]=[]),ir[qt.astr].push(Rt[ur].target.length)}return{update:nr,maxPoints:ir}}t(G,"spliceTraces");function $(ze,tt){var at=new ze.constructor(ze.length+tt.length);return at.set(ze),at.set(tt,ze.length),at}t($,"concatTypedArray");function te(ze,tt,at,vt){ze=s.getGraphDiv(ze);function _t(ur,qt,hr){var Fr,Br;if(s.isTypedArray(ur))if(hr<0){var na=new ur.constructor(0),Ia=$(ur,qt);hr<0?(Fr=Ia,Br=na):(Fr=na,Br=Ia)}else if(Fr=new ur.constructor(hr),Br=new ur.constructor(ur.length+qt.length-hr),hr===qt.length)Fr.set(qt),Br.set(ur);else if(hr<qt.length){var ea=qt.length-hr;Fr.set(qt.subarray(ea)),Br.set(ur),Br.set(qt.subarray(0,ea),ur.length)}else{var Er=hr-qt.length,dn=ur.length-Er;Fr.set(ur.subarray(dn)),Fr.set(qt,Er),Br.set(ur.subarray(0,dn))}else Fr=ur.concat(qt),Br=hr>=0&&hr<Fr.length?Fr.splice(0,Fr.length-hr):[];return[Fr,Br]}t(_t,"updateArray");var Rt=G(ze,tt,at,vt,_t),nr=e.redraw(ze),ir=[ze,Rt.update,at,Rt.maxPoints];return l.add(ze,e.prependTraces,ir,te,arguments),nr}t(te,"extendTraces");function ee(ze,tt,at,vt){ze=s.getGraphDiv(ze);function _t(ur,qt,hr){var Fr,Br;if(s.isTypedArray(ur))if(hr<=0){var na=new ur.constructor(0),Ia=$(qt,ur);hr<0?(Fr=Ia,Br=na):(Fr=na,Br=Ia)}else if(Fr=new ur.constructor(hr),Br=new ur.constructor(ur.length+qt.length-hr),hr===qt.length)Fr.set(qt),Br.set(ur);else if(hr<qt.length){var ea=qt.length-hr;Fr.set(qt.subarray(0,ea)),Br.set(qt.subarray(ea)),Br.set(ur,ea)}else{var Er=hr-qt.length;Fr.set(qt),Fr.set(ur.subarray(0,Er),qt.length),Br.set(ur.subarray(Er))}else Fr=qt.concat(ur),Br=hr>=0&&hr<Fr.length?Fr.splice(hr,Fr.length):[];return[Fr,Br]}t(_t,"updateArray");var Rt=G(ze,tt,at,vt,_t),nr=e.redraw(ze),ir=[ze,Rt.update,at,Rt.maxPoints];return l.add(ze,e.extendTraces,ir,ee,arguments),nr}t(ee,"prependTraces");function ie(ze,tt,at){ze=s.getGraphDiv(ze);var vt=[],_t=e.deleteTraces,Rt=ie,nr=[ze,vt],ir=[ze,tt],ur,qt;for(H(ze,tt,at),Array.isArray(tt)||(tt=[tt]),tt=tt.map(function(hr){return s.extendFlat({},hr)}),T.cleanData(tt),ur=0;ur<tt.length;ur++)ze.data.push(tt[ur]);for(ur=0;ur<tt.length;ur++)vt.push(-tt.length+ur);if(typeof at>"u")return qt=e.redraw(ze),l.add(ze,_t,nr,Rt,ir),qt;Array.isArray(at)||(at=[at]);try{q(ze,vt,at)}catch(hr){throw ze.data.splice(ze.data.length-tt.length,tt.length),hr}return l.startSequence(ze),l.add(ze,_t,nr,Rt,ir),qt=e.moveTraces(ze,vt,at),l.stopSequence(ze),qt}t(ie,"addTraces");function se(ze,tt){ze=s.getGraphDiv(ze);var at=[],vt=e.addTraces,_t=se,Rt=[ze,at,tt],nr=[ze,tt],ir,ur;if(typeof tt>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(tt)||(tt=[tt]),O(ze,tt,"indices"),tt=F(tt,ze.data.length-1),tt.sort(s.sorterDes),ir=0;ir<tt.length;ir+=1)ur=ze.data.splice(tt[ir],1)[0],at.push(ur);var qt=e.redraw(ze);return l.add(ze,vt,Rt,_t,nr),qt}t(se,"deleteTraces");function W(ze,tt,at){ze=s.getGraphDiv(ze);var vt=[],_t=[],Rt=W,nr=W,ir=[ze,at,tt],ur=[ze,tt,at],qt;if(q(ze,tt,at),tt=Array.isArray(tt)?tt:[tt],typeof at>"u")for(at=[],qt=0;qt<tt.length;qt++)at.push(-tt.length+qt);for(at=Array.isArray(at)?at:[at],tt=F(tt,ze.data.length-1),at=F(at,ze.data.length-1),qt=0;qt<ze.data.length;qt++)tt.indexOf(qt)===-1&&vt.push(ze.data[qt]);for(qt=0;qt<tt.length;qt++)_t.push({newIndex:at[qt],trace:ze.data[tt[qt]]});for(_t.sort(function(Fr,Br){return Fr.newIndex-Br.newIndex}),qt=0;qt<_t.length;qt+=1)vt.splice(_t[qt].newIndex,0,_t[qt].trace);ze.data=vt;var hr=e.redraw(ze);return l.add(ze,Rt,ir,nr,ur),hr}t(W,"moveTraces");function ne(ze,tt,at,vt){ze=s.getGraphDiv(ze),T.clearPromiseQueue(ze);var _t={};if(typeof tt=="string")_t[tt]=at;else if(s.isPlainObject(tt))_t=s.extendFlat({},tt),vt===void 0&&(vt=at);else return s.warn("Restyle fail.",tt,at,vt),Promise.reject();Object.keys(_t).length&&(ze.changed=!0);var Rt=T.coerceTraceIndices(ze,vt),nr=ce(ze,_t,Rt),ir=nr.flags;ir.calc&&(ze.calcdata=void 0),ir.clearAxisTypes&&T.clearAxisTypes(ze,Rt,{});var ur=[];ir.fullReplot?ur.push(e._doPlot):(ur.push(h.previousPromises),h.supplyDefaults(ze),ir.markerSize&&(h.doCalcdata(ze),pe(ur)),ir.style&&ur.push(_.doTraceStyle),ir.colorbars&&ur.push(_.doColorBars),ur.push(k)),ur.push(h.rehover,h.redrag,h.reselect),l.add(ze,ne,[ze,nr.undoit,nr.traces],ne,[ze,nr.redoit,nr.traces]);var qt=s.syncOrAsync(ur,ze);return(!qt||!qt.then)&&(qt=Promise.resolve()),qt.then(function(){return ze.emit("plotly_restyle",nr.eventData),ze})}t(ne,"restyle");function he(ze){return ze===void 0?null:ze}t(he,"undefinedToNull");function re(ze,tt){return tt?function(at,vt,_t){var Rt=o(at,vt),nr=Rt.set;return Rt.set=function(ir){var ur=(_t||"")+vt;ae(ur,Rt.get(),ir,ze),nr(ir)},Rt}:o}t(re,"makeNP");function ae(ze,tt,at,vt){if(Array.isArray(tt)||Array.isArray(at))for(var _t=Array.isArray(tt)?tt:[],Rt=Array.isArray(at)?at:[],nr=Math.max(_t.length,Rt.length),ir=0;ir<nr;ir++)ae(ze+"["+ir+"]",_t[ir],Rt[ir],vt);else if(s.isPlainObject(tt)||s.isPlainObject(at)){var ur=s.isPlainObject(tt)?tt:{},qt=s.isPlainObject(at)?at:{},hr=s.extendFlat({},ur,qt);for(var Fr in hr)ae(ze+"."+Fr,ur[Fr],qt[Fr],vt)}else vt[ze]===void 0&&(vt[ze]=he(tt))}t(ae,"storeCurrent");function fe(ze,tt,at){for(var vt in at){var _t=o(ze,vt);ae(vt,_t.get(),at[vt],tt)}}t(fe,"_storeDirectGUIEdit");function ce(ze,tt,at){var vt=ze._fullLayout,_t=ze._fullData,Rt=ze.data,nr=vt._guiEditing,ir=re(vt._preGUI,nr),ur=s.extendDeepAll({},tt),qt;xe(tt);var hr=M.traceFlags(),Fr={},Br={},na;function Ia(){return at.map(function(){})}t(Ia,"a0");function ea(Pa){var kn=v.id2name(Pa);na.indexOf(kn)===-1&&na.push(kn)}t(ea,"addToAxlist");function Er(Pa){return"LAYOUT"+Pa+".autorange"}t(Er,"autorangeAttr");function dn(Pa){return"LAYOUT"+Pa+".range"}t(dn,"rangeAttr");function ya(Pa){for(var kn=Pa;kn<_t.length;kn++)if(_t[kn]._input===Rt[Pa])return _t[kn]}t(ya,"getFullTrace");function Hr(Pa,kn,In){if(Array.isArray(Pa)){Pa.forEach(function(Ka){Hr(Ka,kn,In)});return}if(!(Pa in tt||T.hasParent(tt,Pa))){var ln;if(Pa.substr(0,6)==="LAYOUT")ln=ir(ze.layout,Pa.replace("LAYOUT",""));else{var Pn=at[In],Fa=vt._tracePreGUI[ya(Pn)._fullInput.uid];ln=re(Fa,nr)(Rt[Pn],Pa)}Pa in Br||(Br[Pa]=Ia()),Br[Pa][In]===void 0&&(Br[Pa][In]=he(ln.get())),kn!==void 0&&ln.set(kn)}}t(Hr,"doextra");function un(Pa){return function(kn){return _t[kn][Pa]}}t(un,"allBins");function Ea(Pa){return function(kn,In){return kn===!1?_t[at[In]][Pa]:null}}t(Ea,"arrayBins");for(var nt in tt){if(T.hasParent(tt,nt))throw new Error("cannot set "+nt+" and a parent attribute simultaneously");var He=tt[nt],Qe,ot,Ae,Se,je,Xe;if((nt==="autobinx"||nt==="autobiny")&&(nt=nt.charAt(nt.length-1)+"bins",Array.isArray(He)?He=He.map(Ea(nt)):He===!1?He=at.map(un(nt)):He=null),Fr[nt]=He,nt.substr(0,6)==="LAYOUT"){Ae=ir(ze.layout,nt.replace("LAYOUT","")),Br[nt]=[he(Ae.get())],Ae.set(Array.isArray(He)?He[0]:He),hr.calc=!0;continue}for(Br[nt]=Ia(),qt=0;qt<at.length;qt++){Qe=Rt[at[qt]],ot=ya(at[qt]);var ut=vt._tracePreGUI[ot._fullInput.uid];if(Ae=re(ut,nr)(Qe,nt),Se=Ae.get(),je=Array.isArray(He)?He[qt%He.length]:He,je!==void 0){var xt=Ae.parts[Ae.parts.length-1],dt=nt.substr(0,nt.length-xt.length-1),Ot=dt?dt+".":"",Ht=dt?o(ot,dt).get():ot;if(Xe=f.getTraceValObject(ot,Ae.parts),Xe&&Xe.impliedEdits&&je!==null)for(var Qt in Xe.impliedEdits)Hr(s.relativeAttr(nt,Qt),Xe.impliedEdits[Qt],qt);else if((xt==="thicknessmode"||xt==="lenmode")&&Se!==je&&(je==="fraction"||je==="pixels")&&Ht){var mr=vt._size,xr=Ht.orient,Lr=xr==="top"||xr==="bottom";if(xt==="thicknessmode"){var Zr=Lr?mr.h:mr.w;Hr(Ot+"thickness",Ht.thickness*(je==="fraction"?1/Zr:Zr),qt)}else{var Sr=Lr?mr.w:mr.h;Hr(Ot+"len",Ht.len*(je==="fraction"?1/Sr:Sr),qt)}}else if(nt==="type"&&(je==="pie"!=(Se==="pie")||je==="funnelarea"!=(Se==="funnelarea"))){var xa="x",aa="y";(je==="bar"||Se==="bar")&&Qe.orientation==="h"&&(xa="y",aa="x"),s.swapAttrs(Qe,["?","?src"],"labels",xa),s.swapAttrs(Qe,["d?","?0"],"label",xa),s.swapAttrs(Qe,["?","?src"],"values",aa),Se==="pie"||Se==="funnelarea"?(o(Qe,"marker.color").set(o(Qe,"marker.colors").get()),vt._pielayer.selectAll("g.trace").remove()):u.traceIs(Qe,"cartesian")&&o(Qe,"marker.colors").set(o(Qe,"marker.color").get())}Br[nt][qt]=he(Se);var Sa=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Sa.indexOf(nt)!==-1){if(nt==="orientation"){Ae.set(je);var vn=Qe.x&&!Qe.y?"h":"v";if((Ae.get()||vn)===ot.orientation)continue}else nt==="orientationaxes"&&(Qe.orientation={v:"h",h:"v"}[ot.orientation]);T.swapXYData(Qe),hr.calc=hr.clearAxisTypes=!0}else h.dataArrayContainers.indexOf(Ae.parts[0])!==-1?(T.manageArrayContainers(Ae,je,Br),hr.calc=!0):(Xe?Xe.arrayOk&&!u.traceIs(ot,"regl")&&(s.isArrayOrTypedArray(je)||s.isArrayOrTypedArray(Se))?hr.calc=!0:M.update(hr,Xe):hr.calc=!0,Ae.set(je))}}if(["swapxyaxes","orientationaxes"].indexOf(nt)!==-1&&v.swap(ze,at),nt==="orientationaxes"){var hn=o(ze.layout,"hovermode"),ba=hn.get();ba==="x"?hn.set("y"):ba==="y"?hn.set("x"):ba==="x unified"?hn.set("y unified"):ba==="y unified"&&hn.set("x unified")}if(["orientation","type"].indexOf(nt)!==-1){for(na=[],qt=0;qt<at.length;qt++){var Tn=Rt[at[qt]];u.traceIs(Tn,"cartesian")&&(ea(Tn.xaxis||"x"),ea(Tn.yaxis||"y"))}Hr(na.map(Er),!0,0),Hr(na.map(dn),[0,1],0)}}return(hr.calc||hr.plot)&&(hr.fullReplot=!0),{flags:hr,undoit:Br,redoit:Fr,traces:at,eventData:s.extendDeepNoArrays([],[ur,at])}}t(ce,"_restyle");function xe(ze){var tt=s.counterRegex("axis",".title",!1,!1),at=/colorbar\.title$/,vt=Object.keys(ze),_t,Rt,nr;for(_t=0;_t<vt.length;_t++)Rt=vt[_t],nr=ze[Rt],(Rt==="title"||tt.test(Rt)||at.test(Rt))&&(typeof nr=="string"||typeof nr=="number")?ir(Rt,Rt.replace("title","title.text")):Rt.indexOf("titlefont")>-1&&Rt.indexOf("grouptitlefont")===-1?ir(Rt,Rt.replace("titlefont","title.font")):Rt.indexOf("titleposition")>-1?ir(Rt,Rt.replace("titleposition","title.position")):Rt.indexOf("titleside")>-1?ir(Rt,Rt.replace("titleside","title.side")):Rt.indexOf("titleoffset")>-1&&ir(Rt,Rt.replace("titleoffset","title.offset"));function ir(ur,qt){ze[qt]=ze[ur],delete ze[ur]}t(ir,"replace")}t(xe,"cleanDeprecatedAttributeKeys");function Te(ze,tt,at){ze=s.getGraphDiv(ze),T.clearPromiseQueue(ze);var vt={};if(typeof tt=="string")vt[tt]=at;else if(s.isPlainObject(tt))vt=s.extendFlat({},tt);else return s.warn("Relayout fail.",tt,at),Promise.reject();Object.keys(vt).length&&(ze.changed=!0);var _t=we(ze,vt),Rt=_t.flags;Rt.calc&&(ze.calcdata=void 0);var nr=[h.previousPromises];Rt.layoutReplot?nr.push(_.layoutReplot):Object.keys(vt).length&&(me(ze,Rt,_t)||h.supplyDefaults(ze),Rt.legend&&nr.push(_.doLegend),Rt.layoutstyle&&nr.push(_.layoutStyles),Rt.axrange&&pe(nr,_t.rangesAltered),Rt.ticks&&nr.push(_.doTicksRelayout),Rt.modebar&&nr.push(_.doModeBar),Rt.camera&&nr.push(_.doCamera),Rt.colorbars&&nr.push(_.doColorBars),nr.push(k)),nr.push(h.rehover,h.redrag,h.reselect),l.add(ze,Te,[ze,_t.undoit],Te,[ze,_t.redoit]);var ir=s.syncOrAsync(nr,ze);return(!ir||!ir.then)&&(ir=Promise.resolve(ze)),ir.then(function(){return ze.emit("plotly_relayout",_t.eventData),ze})}t(Te,"relayout");function me(ze,tt,at){var vt=ze._fullLayout;if(!tt.axrange)return!1;for(var _t in tt)if(_t!=="axrange"&&tt[_t])return!1;for(var Rt in at.rangesAltered){var nr=v.id2name(Rt),ir=ze.layout[nr],ur=vt[nr];if(ur.autorange=ir.autorange,ir.range&&(ur.range=ir.range.slice()),ur.cleanRange(),ur._matchGroup){for(var qt in ur._matchGroup)if(qt!==Rt){var hr=vt[v.id2name(qt)];hr.autorange=ur.autorange,hr.range=ur.range.slice(),hr._input.range=ur.range.slice()}}}return!0}t(me,"axRangeSupplyDefaultsByPass");function pe(ze,tt){var at=tt?function(vt){var _t=[],Rt=!0;for(var nr in tt){var ir=v.getFromId(vt,nr);if(_t.push(nr),(ir.ticklabelposition||"").indexOf("inside")!==-1&&ir._anchorAxis&&_t.push(ir._anchorAxis._id),ir._matchGroup)for(var ur in ir._matchGroup)tt[ur]||_t.push(ur)}return v.draw(vt,_t,{skipTitle:Rt})}:function(vt){return v.draw(vt,"redraw")};ze.push(b,_.doAutoRangeAndConstraints,at,_.drawData,_.finalDraw)}t(pe,"addAxRangeSequence");var oe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,de=/^[xyz]axis[0-9]*\.autorange$/,ye=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function we(ze,tt){var at=ze.layout,vt=ze._fullLayout,_t=vt._guiEditing,Rt=re(vt._preGUI,_t),nr=Object.keys(tt),ir=v.list(ze),ur=s.extendDeepAll({},tt),qt={},hr,Fr,Br;for(xe(tt),nr=Object.keys(tt),Fr=0;Fr<nr.length;Fr++)if(nr[Fr].indexOf("allaxes")===0){for(Br=0;Br<ir.length;Br++){var na=ir[Br]._id.substr(1),Ia=na.indexOf("scene")!==-1?na+".":"",ea=nr[Fr].replace("allaxes",Ia+ir[Br]._name);tt[ea]||(tt[ea]=tt[nr[Fr]])}delete tt[nr[Fr]]}var Er=M.layoutFlags(),dn={},ya={};function Hr(Pn,Fa){if(Array.isArray(Pn)){Pn.forEach(function(Ja){Hr(Ja,Fa)});return}if(!(Pn in tt||T.hasParent(tt,Pn))){var Ka=Rt(at,Pn);Pn in ya||(ya[Pn]=he(Ka.get())),Fa!==void 0&&Ka.set(Fa)}}t(Hr,"doextra");var un={},Ea;function nt(Pn){var Fa=v.name2id(Pn.split(".")[0]);return un[Fa]=1,Fa}t(nt,"recordAlteredAxis");for(var He in tt){if(T.hasParent(tt,He))throw new Error("cannot set "+He+" and a parent attribute simultaneously");for(var Qe=Rt(at,He),ot=tt[He],Ae=Qe.parts.length,Se=Ae-1;Se>0&&typeof Qe.parts[Se]!="string";)Se--;var je=Qe.parts[Se],Xe=Qe.parts[Se-1]+"."+je,ut=Qe.parts.slice(0,Se).join("."),xt=o(ze.layout,ut).get(),dt=o(vt,ut).get(),Ot=Qe.get();if(ot!==void 0){dn[He]=ot,ya[He]=je==="reverse"?ot:he(Ot);var Ht=f.getLayoutValObject(vt,Qe.parts);if(Ht&&Ht.impliedEdits&&ot!==null)for(var Qt in Ht.impliedEdits)Hr(s.relativeAttr(He,Qt),Ht.impliedEdits[Qt]);if(["width","height"].indexOf(He)!==-1)if(ot){Hr("autosize",null);var mr=He==="height"?"width":"height";Hr(mr,vt[mr])}else vt[He]=ze._initialAutoSize[He];else if(He==="autosize")Hr("width",ot?null:vt.width),Hr("height",ot?null:vt.height);else if(Xe.match(oe))nt(Xe),o(vt,ut+"._inputRange").set(null);else if(Xe.match(de)){nt(Xe),o(vt,ut+"._inputRange").set(null);var xr=o(vt,ut).get();xr._inputDomain&&(xr._input.domain=xr._inputDomain.slice())}else Xe.match(ye)&&o(vt,ut+"._inputDomain").set(null);if(je==="type"){Ea=xt;var Lr=dt.type==="linear"&&ot==="log",Zr=dt.type==="log"&&ot==="linear";if(Lr||Zr){if(!Ea||!Ea.range)Hr(ut+".autorange",!0);else if(dt.autorange)Lr&&(Ea.range=Ea.range[1]>Ea.range[0]?[1,2]:[2,1]);else{var Sr=Ea.range[0],xa=Ea.range[1];Lr?(Sr<=0&&xa<=0&&Hr(ut+".autorange",!0),Sr<=0?Sr=xa/1e6:xa<=0&&(xa=Sr/1e6),Hr(ut+".range[0]",Math.log(Sr)/Math.LN10),Hr(ut+".range[1]",Math.log(xa)/Math.LN10)):(Hr(ut+".range[0]",Math.pow(10,Sr)),Hr(ut+".range[1]",Math.pow(10,xa)))}Array.isArray(vt._subplots.polar)&&vt._subplots.polar.length&&vt[Qe.parts[0]]&&Qe.parts[1]==="radialaxis"&&delete vt[Qe.parts[0]]._subplot.viewInitial["radialaxis.range"],u.getComponentMethod("annotations","convertCoords")(ze,dt,ot,Hr),u.getComponentMethod("images","convertCoords")(ze,dt,ot,Hr)}else Hr(ut+".autorange",!0),Hr(ut+".range",null);o(vt,ut+"._inputRange").set(null)}else if(je.match(w)){var aa=o(vt,He).get(),Sa=(ot||{}).type;(!Sa||Sa==="-")&&(Sa="linear"),u.getComponentMethod("annotations","convertCoords")(ze,aa,Sa,Hr),u.getComponentMethod("images","convertCoords")(ze,aa,Sa,Hr)}var vn=y.containerArrayMatch(He);if(vn){hr=vn.array,Fr=vn.index;var hn=vn.property,ba=Ht||{editType:"calc"};Fr!==""&&hn===""&&(y.isAddVal(ot)?ya[He]=null:y.isRemoveVal(ot)?ya[He]=(o(at,hr).get()||[])[Fr]:s.warn("unrecognized full object value",tt)),M.update(Er,ba),qt[hr]||(qt[hr]={});var Tn=qt[hr][Fr];Tn||(Tn=qt[hr][Fr]={}),Tn[hn]=ot,delete tt[He]}else je==="reverse"?(xt.range?xt.range.reverse():(Hr(ut+".autorange",!0),xt.range=[1,0]),dt.autorange?Er.calc=!0:Er.plot=!0):(He==="dragmode"&&(ot===!1&&Ot!==!1||ot!==!1&&Ot===!1)||vt._has("scatter-like")&&vt._has("regl")&&He==="dragmode"&&(ot==="lasso"||ot==="select")&&!(Ot==="lasso"||Ot==="select")||vt._has("gl2d")?Er.plot=!0:Ht?M.update(Er,Ht):Er.calc=!0,Qe.set(ot))}}for(hr in qt){var Pa=y.applyContainerArrayChanges(ze,Rt(at,hr),qt[hr],Er,Rt);Pa||(Er.plot=!0)}for(var kn in un){Ea=v.getFromId(ze,kn);var In=Ea&&Ea._constraintGroup;if(In){Er.calc=!0;for(var ln in In)un[ln]||(v.getFromId(ze,ln)._constraintShrinkable=!0)}}return(Ee(ze)||tt.height||tt.width)&&(Er.plot=!0),(Er.plot||Er.calc)&&(Er.layoutReplot=!0),{flags:Er,rangesAltered:un,undoit:ya,redoit:dn,eventData:ur}}t(we,"_relayout");function Ee(ze){var tt=ze._fullLayout,at=tt.width,vt=tt.height;return ze.layout.autosize&&h.plotAutoSize(ze,ze.layout,tt),tt.width!==at||tt.height!==vt}t(Ee,"updateAutosize");function De(ze,tt,at,vt){ze=s.getGraphDiv(ze),T.clearPromiseQueue(ze),s.isPlainObject(tt)||(tt={}),s.isPlainObject(at)||(at={}),Object.keys(tt).length&&(ze.changed=!0),Object.keys(at).length&&(ze.changed=!0);var _t=T.coerceTraceIndices(ze,vt),Rt=ce(ze,s.extendFlat({},tt),_t),nr=Rt.flags,ir=we(ze,s.extendFlat({},at)),ur=ir.flags;(nr.calc||ur.calc)&&(ze.calcdata=void 0),nr.clearAxisTypes&&T.clearAxisTypes(ze,_t,at);var qt=[];ur.layoutReplot?qt.push(_.layoutReplot):nr.fullReplot?qt.push(e._doPlot):(qt.push(h.previousPromises),me(ze,ur,ir)||h.supplyDefaults(ze),nr.style&&qt.push(_.doTraceStyle),(nr.colorbars||ur.colorbars)&&qt.push(_.doColorBars),ur.legend&&qt.push(_.doLegend),ur.layoutstyle&&qt.push(_.layoutStyles),ur.axrange&&pe(qt,ir.rangesAltered),ur.ticks&&qt.push(_.doTicksRelayout),ur.modebar&&qt.push(_.doModeBar),ur.camera&&qt.push(_.doCamera),qt.push(k)),qt.push(h.rehover,h.redrag,h.reselect),l.add(ze,De,[ze,Rt.undoit,ir.undoit,Rt.traces],De,[ze,Rt.redoit,ir.redoit,Rt.traces]);var hr=s.syncOrAsync(qt,ze);return(!hr||!hr.then)&&(hr=Promise.resolve(ze)),hr.then(function(){return ze.emit("plotly_update",{data:Rt.eventData,layout:ir.eventData}),ze})}t(De,"update");function Fe(ze){return t(function(at){at._fullLayout._guiEditing=!0;var vt=ze.apply(null,arguments);return at._fullLayout._guiEditing=!1,vt},"wrappedEdit")}t(Fe,"guiEdit");var qe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Je=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ge(ze,tt){for(var at=0;at<tt.length;at++){var vt=tt[at],_t=ze.match(vt.pattern);if(_t){var Rt=_t[1]||"";return{head:Rt,tail:ze.substr(Rt.length+1),attr:vt.attr}}}}t(Ge,"findUIPattern");function et(ze,tt){var at=o(tt,ze).get();if(at!==void 0)return at;var vt=ze.split(".");for(vt.pop();vt.length>1;)if(vt.pop(),at=o(tt,vt.join(".")+".uirevision").get(),at!==void 0)return at;return tt.uirevision}t(et,"getNewRev");function Ue(ze,tt){for(var at=0;at<tt.length;at++)if(tt[at]._fullInput.uid===ze)return at;return-1}t(Ue,"getFullTraceIndexFromUid");function Ye(ze,tt,at){for(var vt=0;vt<tt.length;vt++)if(tt[vt].uid===ze)return vt;return!tt[at]||tt[at].uid?-1:at}t(Ye,"getTraceIndexFromUid");function $e(ze,tt){var at=s.isPlainObject(ze),vt=Array.isArray(ze);return at||vt?(at&&s.isPlainObject(tt)||vt&&Array.isArray(tt))&&JSON.stringify(ze)===JSON.stringify(tt):ze===tt}t($e,"valsMatch");function Ct(ze,tt,at,vt){var _t=vt._preGUI,Rt,nr,ir,ur,qt,hr,Fr,Br,na,Ia,ea=[],Er={},dn={};for(Rt in _t){if(qt=Ge(Rt,qe),qt){if(na=qt.head,Ia=qt.tail,nr=qt.attr||na+".uirevision",ir=o(vt,nr).get(),ur=ir&&et(nr,tt),ur&&ur===ir){if(hr=_t[Rt],hr===null&&(hr=void 0),Fr=o(tt,Rt),Br=Fr.get(),$e(Br,hr)){Br===void 0&&Ia==="autorange"&&ea.push(na),Fr.set(he(o(vt,Rt).get()));continue}else if(Ia==="autorange"||Ia.substr(0,6)==="range["){var ya=_t[na+".range[0]"],Hr=_t[na+".range[1]"],un=_t[na+".autorange"];if(un||un===null&&ya===null&&Hr===null){if(!(na in Er)){var Ea=o(tt,na).get();Er[na]=Ea&&(Ea.autorange||Ea.autorange!==!1&&(!Ea.range||Ea.range.length!==2))}if(Er[na]){Fr.set(he(o(vt,Rt).get()));continue}}}}}else s.warn("unrecognized GUI edit: "+Rt);delete _t[Rt],qt&&qt.tail.substr(0,6)==="range["&&(dn[qt.head]=1)}for(var nt=0;nt<ea.length;nt++){var He=ea[nt];if(dn[He]){var Qe=o(tt,He).get();Qe&&delete Qe.autorange}}var ot=vt._tracePreGUI;for(var Ae in ot){var Se=ot[Ae],je=null,Xe;for(Rt in Se){if(!je){var ut=Ue(Ae,at);if(ut<0){delete ot[Ae];break}var xt=at[ut];Xe=xt._fullInput;var dt=Ye(Ae,ze,Xe.index);if(dt<0){delete ot[Ae];break}je=ze[dt]}if(qt=Ge(Rt,Je),qt){if(qt.attr?(ir=o(vt,qt.attr).get(),ur=ir&&et(qt.attr,tt)):(ir=Xe.uirevision,ur=je.uirevision,ur===void 0&&(ur=tt.uirevision)),ur&&ur===ir&&(hr=Se[Rt],hr===null&&(hr=void 0),Fr=o(je,Rt),Br=Fr.get(),$e(Br,hr))){Fr.set(he(o(Xe,Rt).get()));continue}}else s.warn("unrecognized GUI edit: "+Rt+" in trace uid "+Ae);delete Se[Rt]}}}t(Ct,"applyUIRevisions");function It(ze,tt,at,vt){var _t,Rt;function nr(){return e.addFrames(ze,_t)}t(nr,"addFrames"),ze=s.getGraphDiv(ze),T.clearPromiseQueue(ze);var ir=ze._fullData,ur=ze._fullLayout;if(!s.isPlotDiv(ze)||!ir||!ur)Rt=e.newPlot(ze,tt,at,vt);else{if(s.isPlainObject(tt)){var qt=tt;tt=qt.data,at=qt.layout,vt=qt.config,_t=qt.frames}var hr=!1;if(vt){var Fr=s.extendDeep({},ze._context);ze._context=void 0,B(ze,vt),hr=Jt(Fr,ze._context)}ze.data=tt||[],T.cleanData(ze.data),ze.layout=at||{},T.cleanLayout(ze.layout),Ct(ze.data,ze.layout,ir,ur),h.supplyDefaults(ze,{skipUpdateCalc:!0});var Br=ze._fullData,na=ze._fullLayout,Ia=na.datarevision===void 0,ea=na.transition,Er=$t(ze,ur,na,Ia,ea),dn=Er.newDataRevision,ya=Vt(ze,ir,Br,Ia,ea,dn);if(Ee(ze)&&(Er.layoutReplot=!0),ya.calc||Er.calc){ze.calcdata=void 0;for(var Hr=Object.getOwnPropertyNames(na),un=0;un<Hr.length;un++){var Ea=Hr[un],nt=Ea.substring(0,5);if(nt==="xaxis"||nt==="yaxis"){var He=na[Ea]._emptyCategories;He&&He()}}}else h.supplyDefaultsUpdateCalc(ze.calcdata,Br);var Qe=[];if(_t&&(ze._transitionData={},h.createTransitionData(ze),Qe.push(nr)),na.transition&&!hr&&(ya.anim||Er.anim))Er.ticks&&Qe.push(_.doTicksRelayout),h.doCalcdata(ze),_.doAutoRangeAndConstraints(ze),Qe.push(function(){return h.transitionFromReact(ze,ya,Er,ur)});else if(ya.fullReplot||Er.layoutReplot||hr)ze._fullLayout._skipDefaults=!0,Qe.push(e._doPlot);else{for(var ot in Er.arrays){var Ae=Er.arrays[ot];if(Ae.length){var Se=u.getComponentMethod(ot,"drawOne");if(Se!==s.noop)for(var je=0;je<Ae.length;je++)Se(ze,Ae[je]);else{var Xe=u.getComponentMethod(ot,"draw");if(Xe===s.noop)throw new Error("cannot draw components: "+ot);Xe(ze)}}}Qe.push(h.previousPromises),ya.style&&Qe.push(_.doTraceStyle),(ya.colorbars||Er.colorbars)&&Qe.push(_.doColorBars),Er.legend&&Qe.push(_.doLegend),Er.layoutstyle&&Qe.push(_.layoutStyles),Er.axrange&&pe(Qe),Er.ticks&&Qe.push(_.doTicksRelayout),Er.modebar&&Qe.push(_.doModeBar),Er.camera&&Qe.push(_.doCamera),Qe.push(k)}Qe.push(h.rehover,h.redrag,h.reselect),Rt=s.syncOrAsync(Qe,ze),(!Rt||!Rt.then)&&(Rt=Promise.resolve(ze))}return Rt.then(function(){return ze.emit("plotly_react",{data:tt,layout:at}),ze})}t(It,"react");function Vt(ze,tt,at,vt,_t,Rt){var nr=tt.length===at.length;if(!_t&&!nr)return{fullReplot:!0,calc:!0};var ir=M.traceFlags();ir.arrays={},ir.nChanges=0,ir.nChangesAnim=0;var ur,qt;function hr(na){var Ia=f.getTraceValObject(qt,na);return!qt._module.animatable&&Ia.anim&&(Ia.anim=!1),Ia}t(hr,"getTraceValObject");var Fr={getValObject:hr,flags:ir,immutable:vt,transition:_t,newDataRevision:Rt,gd:ze},Br={};for(ur=0;ur<tt.length;ur++)if(at[ur]){if(qt=at[ur]._fullInput,h.hasMakesDataTransform(qt)&&(qt=at[ur]),Br[qt.uid])continue;Br[qt.uid]=1,Gt(tt[ur]._fullInput,qt,[],Fr)}return(ir.calc||ir.plot)&&(ir.fullReplot=!0),_t&&ir.nChanges&&ir.nChangesAnim&&(ir.anim=ir.nChanges===ir.nChangesAnim&&nr?"all":"some"),ir}t(Vt,"diffData");function $t(ze,tt,at,vt,_t){var Rt=M.layoutFlags();Rt.arrays={},Rt.rangesAltered={},Rt.nChanges=0,Rt.nChangesAnim=0;function nr(ur){return f.getLayoutValObject(at,ur)}t(nr,"getLayoutValObject");var ir={getValObject:nr,flags:Rt,immutable:vt,transition:_t,gd:ze};return Gt(tt,at,[],ir),(Rt.plot||Rt.calc)&&(Rt.layoutReplot=!0),_t&&Rt.nChanges&&Rt.nChangesAnim&&(Rt.anim=Rt.nChanges===Rt.nChangesAnim?"all":"some"),Rt}t($t,"diffLayout");function Gt(ze,tt,at,vt){var _t,Rt,nr,ir=vt.getValObject,ur=vt.flags,qt=vt.immutable,hr=vt.inArray,Fr=vt.arrayIndex;function Br(){var ut=_t.editType;if(hr&&ut.indexOf("arraydraw")!==-1){s.pushUnique(ur.arrays[hr],Fr);return}M.update(ur,_t),ut!=="none"&&ur.nChanges++,vt.transition&&_t.anim&&ur.nChangesAnim++,(oe.test(nr)||de.test(nr))&&(ur.rangesAltered[at[0]]=1),ye.test(nr)&&o(tt,"_inputDomain").set(null),Rt==="datarevision"&&(ur.newDataRevision=1)}t(Br,"changed");function na(ut){return ut.valType==="data_array"||ut.arrayOk}t(na,"valObjectCanBeDataArray");for(Rt in ze){if(ur.calc&&!vt.transition)return;var Ia=ze[Rt],ea=tt[Rt],Er=at.concat(Rt);if(nr=Er.join("."),!(Rt.charAt(0)==="_"||typeof Ia=="function"||Ia===ea)){if((Rt==="tick0"||Rt==="dtick")&&at[0]!=="geo"){var dn=tt.tickmode;if(dn==="auto"||dn==="array"||!dn)continue}if(!(Rt==="range"&&tt.autorange)&&!((Rt==="zmin"||Rt==="zmax")&&tt.type==="contourcarpet")&&(_t=ir(Er),!!_t&&!(_t._compareAsJSON&&JSON.stringify(Ia)===JSON.stringify(ea)))){var ya=_t.valType,Hr,un=na(_t),Ea=Array.isArray(Ia),nt=Array.isArray(ea);if(Ea&&nt){var He="_input_"+Rt,Qe=ze[He],ot=tt[He];if(Array.isArray(Qe)&&Qe===ot)continue}if(ea===void 0)un&&Ea?ur.calc=!0:Br();else if(_t._isLinkedToArray){var Ae=[],Se=!1;hr||(ur.arrays[Rt]=Ae);var je=Math.min(Ia.length,ea.length),Xe=Math.max(Ia.length,ea.length);if(je!==Xe)if(_t.editType==="arraydraw")Se=!0;else{Br();continue}for(Hr=0;Hr<je;Hr++)Gt(Ia[Hr],ea[Hr],Er.concat(Hr),s.extendFlat({inArray:Rt,arrayIndex:Hr},vt));if(Se)for(Hr=je;Hr<Xe;Hr++)Ae.push(Hr)}else!ya&&s.isPlainObject(Ia)?Gt(Ia,ea,Er,vt):un?Ea&&nt?(qt&&(ur.calc=!0),(qt||vt.newDataRevision)&&Br()):Ea!==nt?ur.calc=!0:Br():Ea&&nt?(Ia.length!==ea.length||String(Ia)!==String(ea))&&Br():Br()}}}for(Rt in tt)if(!(Rt in ze||Rt.charAt(0)==="_"||typeof tt[Rt]=="function"))if(_t=ir(at.concat(Rt)),na(_t)&&Array.isArray(tt[Rt])){ur.calc=!0;return}else Br()}t(Gt,"getDiffFlags");function Jt(ze,tt){var at;for(at in ze)if(at.charAt(0)!=="_"){var vt=ze[at],_t=tt[at];if(vt!==_t)if(s.isPlainObject(vt)&&s.isPlainObject(_t)){if(Jt(vt,_t))return!0}else if(Array.isArray(vt)&&Array.isArray(_t)){if(vt.length!==_t.length)return!0;for(var Rt=0;Rt<vt.length;Rt++)if(vt[Rt]!==_t[Rt])if(s.isPlainObject(vt[Rt])&&s.isPlainObject(_t[Rt])){if(Jt(vt[Rt],_t[Rt]))return!0}else return!0}else return!0}}t(Jt,"diffConfig");function kt(ze,tt,at){if(ze=s.getGraphDiv(ze),!s.isPlotDiv(ze))throw new Error("This element is not a Plotly plot: "+ze+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var vt=ze._transitionData;vt._frameQueue||(vt._frameQueue=[]),at=h.supplyAnimationDefaults(at);var _t=at.transition,Rt=at.frame;vt._frameWaitingCnt===void 0&&(vt._frameWaitingCnt=0);function nr(qt){return Array.isArray(_t)?qt>=_t.length?_t[0]:_t[qt]:_t}t(nr,"getTransitionOpts");function ir(qt){return Array.isArray(Rt)?qt>=Rt.length?Rt[0]:Rt[qt]:Rt}t(ir,"getFrameOpts");function ur(qt,hr){var Fr=0;return function(){if(qt&&++Fr===hr)return qt()}}return t(ur,"callbackOnNthTime"),new Promise(function(qt,hr){function Fr(){if(vt._frameQueue.length!==0){for(;vt._frameQueue.length;){var je=vt._frameQueue.pop();je.onInterrupt&&je.onInterrupt()}ze.emit("plotly_animationinterrupted",[])}}t(Fr,"discardExistingFrames");function Br(je){if(je.length!==0){for(var Xe=0;Xe<je.length;Xe++){var ut;je[Xe].type==="byname"?ut=h.computeFrame(ze,je[Xe].name):ut=je[Xe].data;var xt=ir(Xe),dt=nr(Xe);dt.duration=Math.min(dt.duration,xt.duration);var Ot={frame:ut,name:je[Xe].name,frameOpts:xt,transitionOpts:dt};Xe===je.length-1&&(Ot.onComplete=ur(qt,2),Ot.onInterrupt=hr),vt._frameQueue.push(Ot)}at.mode==="immediate"&&(vt._lastFrameAt=-1/0),vt._animationRaf||ea()}}t(Br,"queueFrames");function na(){ze.emit("plotly_animated"),window.cancelAnimationFrame(vt._animationRaf),vt._animationRaf=null}t(na,"stopAnimationLoop");function Ia(){vt._currentFrame&&vt._currentFrame.onComplete&&vt._currentFrame.onComplete();var je=vt._currentFrame=vt._frameQueue.shift();if(je){var Xe=je.name?je.name.toString():null;ze._fullLayout._currentFrame=Xe,vt._lastFrameAt=Date.now(),vt._timeToNext=je.frameOpts.duration,h.transition(ze,je.frame.data,je.frame.layout,T.coerceTraceIndices(ze,je.frame.traces),je.frameOpts,je.transitionOpts).then(function(){je.onComplete&&je.onComplete()}),ze.emit("plotly_animatingframe",{name:Xe,frame:je.frame,animation:{frame:je.frameOpts,transition:je.transitionOpts}})}else na()}t(Ia,"nextFrame");function ea(){ze.emit("plotly_animating"),vt._lastFrameAt=-1/0,vt._timeToNext=0,vt._runningTransitions=0,vt._currentFrame=null;var je=t(function(){vt._animationRaf=window.requestAnimationFrame(je),Date.now()-vt._lastFrameAt>vt._timeToNext&&Ia()},"doFrame");je()}t(ea,"beginAnimationLoop");var Er=0;function dn(je){return Array.isArray(_t)?Er>=_t.length?je.transitionOpts=_t[Er]:je.transitionOpts=_t[0]:je.transitionOpts=_t,Er++,je}t(dn,"setTransitionConfig");var ya,Hr,un=[],Ea=tt==null,nt=Array.isArray(tt),He=!Ea&&!nt&&s.isPlainObject(tt);if(He)un.push({type:"object",data:dn(s.extendFlat({},tt))});else if(Ea||["string","number"].indexOf(typeof tt)!==-1)for(ya=0;ya<vt._frames.length;ya++)Hr=vt._frames[ya],!!Hr&&(Ea||String(Hr.group)===String(tt))&&un.push({type:"byname",name:String(Hr.name),data:dn({name:Hr.name})});else if(nt)for(ya=0;ya<tt.length;ya++){var Qe=tt[ya];["number","string"].indexOf(typeof Qe)!==-1?(Qe=String(Qe),un.push({type:"byname",name:Qe,data:dn({name:Qe})})):s.isPlainObject(Qe)&&un.push({type:"object",data:dn(s.extendFlat({},Qe))})}for(ya=0;ya<un.length;ya++)if(Hr=un[ya],Hr.type==="byname"&&!vt._frameHash[Hr.data.name]){s.warn('animate failure: frame not found: "'+Hr.data.name+'"'),hr();return}["next","immediate"].indexOf(at.mode)!==-1&&Fr(),at.direction==="reverse"&&un.reverse();var ot=ze._fullLayout._currentFrame;if(ot&&at.fromcurrent){var Ae=-1;for(ya=0;ya<un.length;ya++)if(Hr=un[ya],Hr.type==="byname"&&Hr.name===ot){Ae=ya;break}if(Ae>0&&Ae<un.length-1){var Se=[];for(ya=0;ya<un.length;ya++)Hr=un[ya],(un[ya].type!=="byname"||ya>Ae)&&Se.push(Hr);un=Se}}un.length>0?Br(un):(ze.emit("plotly_animated"),qt())})}t(kt,"animate");function ft(ze,tt,at){if(ze=s.getGraphDiv(ze),tt==null)return Promise.resolve();if(!s.isPlotDiv(ze))throw new Error("This element is not a Plotly plot: "+ze+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var vt,_t,Rt,nr,ir=ze._transitionData._frames,ur=ze._transitionData._frameHash;if(!Array.isArray(tt))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+tt);var qt=ir.length+tt.length*2,hr=[],Fr={};for(vt=tt.length-1;vt>=0;vt--)if(!!s.isPlainObject(tt[vt])){var Br=tt[vt].name,na=(ur[Br]||Fr[Br]||{}).name,Ia=tt[vt].name,ea=ur[na]||Fr[na];na&&Ia&&typeof Ia=="number"&&ea&&x<A&&(x++,s.warn('addFrames: overwriting frame "'+(ur[na]||Fr[na]).name+'" with a frame whose name of type "number" also equates to "'+na+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),x===A&&s.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Fr[Br]={name:Br},hr.push({frame:h.supplyFrameDefaults(tt[vt]),index:at&&at[vt]!==void 0&&at[vt]!==null?at[vt]:qt+vt})}hr.sort(function(He,Qe){return He.index>Qe.index?-1:He.index<Qe.index?1:0});var Er=[],dn=[],ya=ir.length;for(vt=hr.length-1;vt>=0;vt--){if(_t=hr[vt].frame,typeof _t.name=="number"&&s.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!_t.name)for(;ur[_t.name="frame "+ze._transitionData._counter++];);if(ur[_t.name]){for(Rt=0;Rt<ir.length&&(ir[Rt]||{}).name!==_t.name;Rt++);Er.push({type:"replace",index:Rt,value:_t}),dn.unshift({type:"replace",index:Rt,value:ir[Rt]})}else nr=Math.max(0,Math.min(hr[vt].index,ya)),Er.push({type:"insert",index:nr,value:_t}),dn.unshift({type:"delete",index:nr}),ya++}var Hr=h.modifyFrames,un=h.modifyFrames,Ea=[ze,dn],nt=[ze,Er];return l&&l.add(ze,Hr,Ea,un,nt),h.modifyFrames(ze,Er)}t(ft,"addFrames");function zt(ze,tt){if(ze=s.getGraphDiv(ze),!s.isPlotDiv(ze))throw new Error("This element is not a Plotly plot: "+ze);var at,vt,_t=ze._transitionData._frames,Rt=[],nr=[];if(!tt)for(tt=[],at=0;at<_t.length;at++)tt.push(at);for(tt=tt.slice(),tt.sort(),at=tt.length-1;at>=0;at--)vt=tt[at],Rt.push({type:"delete",index:vt}),nr.unshift({type:"insert",index:vt,value:_t[vt]});var ir=h.modifyFrames,ur=h.modifyFrames,qt=[ze,nr],hr=[ze,Rt];return l&&l.add(ze,ir,qt,ur,hr),h.modifyFrames(ze,Rt)}t(zt,"deleteFrames");function Pt(ze){ze=s.getGraphDiv(ze);var tt=ze._fullLayout||{},at=ze._fullData||[];return h.cleanPlot([],{},at,tt),h.purge(ze),a.purge(ze),tt._container&&tt._container.remove(),delete ze._context,ze}t(Pt,"purge");function Et(ze){var tt=ze._fullLayout,at=ze.getBoundingClientRect();if(!s.equalDomRects(at,tt._lastBBox)){var vt=tt._invTransform=s.inverseTransformMatrix(s.getFullTransformMatrix(ze));tt._invScaleX=Math.sqrt(vt[0][0]*vt[0][0]+vt[0][1]*vt[0][1]+vt[0][2]*vt[0][2]),tt._invScaleY=Math.sqrt(vt[1][0]*vt[1][0]+vt[1][1]*vt[1][1]+vt[1][2]*vt[1][2]),tt._lastBBox=at}}t(Et,"calcInverseTransform");function Wt(ze){var tt=r.select(ze),at=ze._fullLayout;if(at._calcInverseTransform=Et,at._calcInverseTransform(ze),at._container=tt.selectAll(".plot-container").data([0]),at._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),at._paperdiv=at._container.selectAll(".svg-container").data([0]),at._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),at._glcontainer=at._paperdiv.selectAll(".gl-container").data([{}]),at._glcontainer.enter().append("div").classed("gl-container",!0),at._paperdiv.selectAll(".main-svg").remove(),at._paperdiv.select(".modebar-container").remove(),at._paper=at._paperdiv.insert("svg",":first-child").classed("main-svg",!0),at._toppaper=at._paperdiv.append("svg").classed("main-svg",!0),at._modebardiv=at._paperdiv.append("div"),delete at._modeBar,at._hoverpaper=at._paperdiv.append("svg").classed("main-svg",!0),!at._uid){var vt={};r.selectAll("defs").each(function(){this.id&&(vt[this.id.split("-")[1]]=1)}),at._uid=s.randstr(vt)}at._paperdiv.selectAll(".main-svg").attr(p.svgAttrs),at._defs=at._paper.append("defs").attr("id","defs-"+at._uid),at._clips=at._defs.append("g").classed("clips",!0),at._topdefs=at._toppaper.append("defs").attr("id","topdefs-"+at._uid),at._topclips=at._topdefs.append("g").classed("clips",!0),at._bgLayer=at._paper.append("g").classed("bglayer",!0),at._draggers=at._paper.append("g").classed("draglayer",!0);var _t=at._paper.append("g").classed("layer-below",!0);at._imageLowerLayer=_t.append("g").classed("imagelayer",!0),at._shapeLowerLayer=_t.append("g").classed("shapelayer",!0),at._cartesianlayer=at._paper.append("g").classed("cartesianlayer",!0),at._polarlayer=at._paper.append("g").classed("polarlayer",!0),at._smithlayer=at._paper.append("g").classed("smithlayer",!0),at._ternarylayer=at._paper.append("g").classed("ternarylayer",!0),at._geolayer=at._paper.append("g").classed("geolayer",!0),at._funnelarealayer=at._paper.append("g").classed("funnelarealayer",!0),at._pielayer=at._paper.append("g").classed("pielayer",!0),at._iciclelayer=at._paper.append("g").classed("iciclelayer",!0),at._treemaplayer=at._paper.append("g").classed("treemaplayer",!0),at._sunburstlayer=at._paper.append("g").classed("sunburstlayer",!0),at._indicatorlayer=at._toppaper.append("g").classed("indicatorlayer",!0),at._glimages=at._paper.append("g").classed("glimages",!0);var Rt=at._toppaper.append("g").classed("layer-above",!0);at._imageUpperLayer=Rt.append("g").classed("imagelayer",!0),at._shapeUpperLayer=Rt.append("g").classed("shapelayer",!0),at._selectionLayer=at._toppaper.append("g").classed("selectionlayer",!0),at._infolayer=at._toppaper.append("g").classed("infolayer",!0),at._menulayer=at._toppaper.append("g").classed("menulayer",!0),at._zoomlayer=at._toppaper.append("g").classed("zoomlayer",!0),at._hoverlayer=at._hoverpaper.append("g").classed("hoverlayer",!0),at._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ze.emit("plotly_framework")}t(Wt,"makePlotFramework"),e.animate=kt,e.addFrames=ft,e.deleteFrames=zt,e.addTraces=ie,e.deleteTraces=se,e.extendTraces=te,e.moveTraces=W,e.prependTraces=ee,e.newPlot=R,e._doPlot=S,e.purge=Pt,e.react=It,e.redraw=z,e.relayout=Te,e.restyle=ne,e.setPlotConfig=L,e.update=De,e._guiRelayout=Fe(Te),e._guiRestyle=Fe(ne),e._guiUpdate=Fe(De),e._storeDirectGUIEdit=fe})(lw);var Ol={},xMe=Na;Ol.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0};Ol.getRedrawFunc=function(e){return function(){xMe.getComponentMethod("colorbar","draw")(e)}};Ol.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};Ol.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var Sue=window.URL||window.webkitURL;Ol.createObjectURL=function(e){return Sue.createObjectURL(e)};Ol.revokeObjectURL=function(e){return Sue.revokeObjectURL(e)};Ol.createBlob=function(e,r){if(r==="svg")return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if(r==="full-json")return new window.Blob([e],{type:"application/json;charset=utf-8"});var n=bMe(window.atob(e));return new window.Blob([n],{type:"image/"+r})};Ol.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function bMe(e){for(var r=e.length,n=new ArrayBuffer(r),i=new Uint8Array(n),s=0;s<r;s++)i[s]=e.charCodeAt(s);return n}t(bMe,"fixBinary");Ol.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;Ol.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.";var Dz=Va.exports,_Me=Nt.exports,wMe=bn.exports,TMe=$a.exports,Ab=ic,oA=/"/g,s1="TOBESTRIPPED",AMe=new RegExp('("'+s1+")|("+s1+'")',"g");function SMe(e){var r=Dz.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(i){return i==="&lt;"?"&#60;":i==="&rt;"?"&#62;":i.indexOf("<")!==-1||i.indexOf(">")!==-1?"":r.html(i).text()});return r.remove(),n}t(SMe,"htmlEntityDecode");function MMe(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}t(MMe,"xmlEntityEncode");var N8=t(function(r,n,i){var s=r._fullLayout,o=s._paper,a=s._toppaper,l=s.width,u=s.height,f;o.insert("rect",":first-child").call(wMe.setRect,0,0,l,u).call(TMe.fill,s.paper_bgcolor);var h=s._basePlotModules||[];for(f=0;f<h.length;f++){var v=h[f];v.toSVG&&v.toSVG(r)}if(a){var c=a.node().childNodes,d=Array.prototype.slice.call(c);for(f=0;f<d.length;f++){var g=d[f];g.childNodes.length&&o.node().appendChild(g)}}s._draggers&&s._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var b=Dz.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){b.remove();return}else b.style({visibility:null,display:null});var m=this.style.fontFamily;m&&m.indexOf('"')!==-1&&b.style("font-family",m.replace(oA,s1))}),o.selectAll(".gradient_filled,.pattern_filled").each(function(){var b=Dz.select(this),m=this.style.fill;m&&m.indexOf("url(")!==-1&&b.style("fill",m.replace(oA,s1));var y=this.style.stroke;y&&y.indexOf("url(")!==-1&&b.style("stroke",y.replace(oA,s1))}),(n==="pdf"||n==="eps")&&o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(Ab.xmlns,"xmlns",Ab.svg),o.node().setAttributeNS(Ab.xmlns,"xmlns:xlink",Ab.xlink),n==="svg"&&i&&(o.attr("width",i*l),o.attr("height",i*u),o.attr("viewBox","0 0 "+l+" "+u));var p=new window.XMLSerializer().serializeToString(o.node());return p=SMe(p),p=MMe(p),p=p.replace(AMe,"'"),_Me.isIE()&&(p=p.replace(/"/gi,"'"),p=p.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),p=p.replace(/(\\')/gi,'"')),p},"toSVG"),tH=Nt.exports,kMe=Z1.exports.EventEmitter,xg=Ol;function EMe(e){var r=e.emitter||new kMe,n=new Promise(function(i,s){var o=window.Image,a=e.svg,l=e.format||"png";if(tH.isIE()&&l!=="svg"){var u=new Error(xg.MSG_IE_BAD_FORMAT);return s(u),e.promise?n:r.emit("error",u)}var f=e.canvas,h=e.scale||1,v=e.width||300,c=e.height||150,d=h*v,g=h*c,p=f.getContext("2d",{willReadFrequently:!0}),b=new o,m,y;l==="svg"||tH.isSafari()?y=xg.encodeSVG(a):(m=xg.createBlob(a,"svg"),y=xg.createObjectURL(m)),f.width=d,f.height=g,b.onload=function(){var T;switch(m=null,xg.revokeObjectURL(y),l!=="svg"&&p.drawImage(b,0,0,d,g),l){case"jpeg":T=f.toDataURL("image/jpeg");break;case"png":T=f.toDataURL("image/png");break;case"webp":T=f.toDataURL("image/webp");break;case"svg":T=y;break;default:var _="Image format is not jpeg, png, svg or webp.";if(s(new Error(_)),!e.promise)return r.emit("error",_)}i(T),e.promise||r.emit("success",T)},b.onerror=function(T){if(m=null,xg.revokeObjectURL(y),s(T),!e.promise)return r.emit("error",T)},b.src=y});return e.promise?n:r}t(EMe,"svgToImg$2");var q8=EMe,rH=xn,aH=lw,CMe=so.exports,Kh=Nt.exports,Pm=Ol,LMe=N8,RMe=q8,PMe=W2.version,sA={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png",description:"Sets the format of exported image."},width:{valType:"number",min:1,description:["Sets the exported image width.","Defaults to the value found in `layout.width`","If set to *null*, the exported image width will match the current graph width."].join(" ")},height:{valType:"number",min:1,description:["Sets the exported image height.","Defaults to the value found in `layout.height`","If set to *null*, the exported image height will match the current graph height."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Sets a scaling for the generated image.","If set, all features of a graphs (e.g. text, line width)","are scaled, unlike simply setting","a bigger *width* and *height*."].join(" ")},setBackground:{valType:"any",dflt:!1,description:["Sets the image background mode.","By default, the image background is determined by `layout.paper_bgcolor`,","the *transparent* mode.","One might consider setting `setBackground` to *opaque*","when exporting a *jpeg* image as JPEGs do not support opacity."].join(" ")},imageDataOnly:{valType:"boolean",dflt:!1,description:["Determines whether or not the return value is prefixed by","the image format's corresponding 'data:image;' spec."].join(" ")}};function DMe(e,r){r=r||{};var n,i,s,o;Kh.isPlainObject(e)?(n=e.data||[],i=e.layout||{},s=e.config||{},o={}):(e=Kh.getGraphDiv(e),n=Kh.extendDeep([],e.data),i=Kh.extendDeep({},e.layout),s=e._context,o=e._fullLayout||{});function a(w){return!(w in r)||Kh.validate(r[w],sA[w])}if(t(a,"isImpliedOrValid"),!a("width")&&r.width!==null||!a("height")&&r.height!==null)throw new Error("Height and width should be pixel values.");if(!a("format"))throw new Error("Export format is not "+Kh.join2(sA.format.values,", "," or ")+".");var l={};function u(w,x){return Kh.coerce(r,l,sA,w,x)}t(u,"coerce");var f=u("format"),h=u("width"),v=u("height"),c=u("scale"),d=u("setBackground"),g=u("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var b=Kh.extendFlat({},i);h?b.width=h:r.width===null&&rH(o.width)&&(b.width=o.width),v?b.height=v:r.height===null&&rH(o.height)&&(b.height=o.height);var m=Kh.extendFlat({},s,{_exportedPlot:!0,staticPlot:!0,setBackground:d}),y=Pm.getRedrawFunc(p);function T(){return new Promise(function(w){setTimeout(w,Pm.getDelay(p._fullLayout))})}t(T,"wait");function _(){return new Promise(function(w,x){var A=LMe(p,f,c),S=p._fullLayout.width,k=p._fullLayout.height;function L(){aH.purge(p),document.body.removeChild(p)}if(t(L,"cleanup"),f==="full-json"){var P=CMe.graphJson(p,!1,"keepdata","object",!0,!0);return P.version=PMe,P=JSON.stringify(P),L(),w(g?P:Pm.encodeJSON(P))}if(L(),f==="svg")return w(g?A:Pm.encodeSVG(A));var D=document.createElement("canvas");D.id=Kh.randstr(),RMe({format:f,width:S,height:k,scale:c,canvas:D,svg:A,promise:!0}).then(w).catch(x)})}t(_,"convert");function M(w){return g?w.replace(Pm.IMAGE_URL_PREFIX,""):w}return t(M,"urlToImageData"),new Promise(function(w,x){aH.newPlot(p,n,b,m).then(y).then(T).then(_).then(function(A){w(M(A))}).catch(function(A){x(A)})})}t(DMe,"toImage$2");var Mue=DMe,qc=Nt.exports,IMe=so.exports,zMe=dp,FMe=wy.dfltConfig,Dc=qc.isPlainObject,sp=Array.isArray,nH=qc.isArrayOrTypedArray,BMe=t(function(r,n){r===void 0&&(r=[]),n===void 0&&(n={});var i=zMe.get(),s=[],o={_context:qc.extendFlat({},FMe)},a,l;sp(r)?(o.data=qc.extendDeep([],r),a=r):(o.data=[],a=[],s.push(Cs("array","data"))),Dc(n)?(o.layout=qc.extendDeep({},n),l=n):(o.layout={},l={},arguments.length>1&&s.push(Cs("object","layout"))),IMe.supplyDefaults(o);for(var u=o._fullData,f=a.length,h=0;h<f;h++){var v=a[h],c=["data",h];if(!Dc(v)){s.push(Cs("object",c));continue}var d=u[h],g=d.type,p=i.traces[g].attributes;p.type={valType:"enumerated",values:[g]},d.visible===!1&&v.visible!==!1&&s.push(Cs("invisible",c)),l1(v,d,p,s,c);var b=v.transforms,m=d.transforms;if(b){sp(b)||s.push(Cs("array",c,["transforms"])),c.push("transforms");for(var y=0;y<b.length;y++){var T=["transforms",y],_=b[y].type;if(!Dc(b[y])){s.push(Cs("object",c,T));continue}var M=i.transforms[_]?i.transforms[_].attributes:{};M.type={valType:"enumerated",values:Object.keys(i.transforms)},l1(b[y],m[y],M,s,c,T)}}}var w=o._fullLayout,x=OMe(i,u);return l1(l,w,x,s,"layout"),s.length===0?void 0:s},"validate");function l1(e,r,n,i,s,o){o=o||[];for(var a=Object.keys(e),l=0;l<a.length;l++){var u=a[l];if(u!=="transforms"){var f=o.slice();f.push(u);var h=e[u],v=r[u],c=UMe(n,u),d=(c||{}).valType,g=d==="info_array",p=d==="colorscale",b=(c||{}).items;if(!qMe(n,u))i.push(Cs("schema",s,f));else if(Dc(h)&&Dc(v)&&d!=="any")l1(h,v,c,i,s,f);else if(g&&sp(h)){h.length>v.length&&i.push(Cs("unused",s,f.concat(v.length)));var m=v.length,y=Array.isArray(b);y&&(m=Math.min(m,b.length));var T,_,M,w,x;if(c.dimensions===2)for(_=0;_<m;_++)if(sp(h[_])){h[_].length>v[_].length&&i.push(Cs("unused",s,f.concat(_,v[_].length)));var A=v[_].length;for(T=0;T<(y?Math.min(A,b[_].length):A);T++)M=y?b[_][T]:b,w=h[_][T],x=v[_][T],qc.validate(w,M)?x!==w&&x!==+w&&i.push(Cs("dynamic",s,f.concat(_,T),w,x)):i.push(Cs("value",s,f.concat(_,T),w))}else i.push(Cs("array",s,f.concat(_),h[_]));else for(_=0;_<m;_++)M=y?b[_]:b,w=h[_],x=v[_],qc.validate(w,M)?x!==w&&x!==+w&&i.push(Cs("dynamic",s,f.concat(_),w,x)):i.push(Cs("value",s,f.concat(_),w))}else if(c.items&&!g&&sp(h)){var S=b[Object.keys(b)[0]],k=[],L,P;for(L=0;L<v.length;L++){var D=v[L]._index||L;if(P=f.slice(),P.push(D),Dc(h[D])&&Dc(v[L])){k.push(D);var B=h[D],z=v[L];Dc(B)&&B.visible!==!1&&z.visible===!1?i.push(Cs("invisible",s,P)):l1(B,z,S,i,s,P)}}for(L=0;L<h.length;L++)P=f.slice(),P.push(L),Dc(h[L])?k.indexOf(L)===-1&&i.push(Cs("unused",s,P)):i.push(Cs("object",s,P,h[L]))}else!Dc(h)&&Dc(v)?i.push(Cs("object",s,f,h)):!nH(h)&&nH(v)&&!g&&!p?i.push(Cs("array",s,f,h)):u in r?qc.validate(h,c)?c.valType==="enumerated"&&(c.coerceNumber&&h!==+v||h!==v)&&i.push(Cs("dynamic",s,f,h,v)):i.push(Cs("value",s,f,h)):i.push(Cs("unused",s,f,h))}}return i}t(l1,"crawl");function OMe(e,r){for(var n=e.layout.layoutAttributes,i=0;i<r.length;i++){var s=r[i],o=e.traces[s.type],a=o.layoutAttributes;a&&(s.subplot?qc.extendFlat(n[o.attributes.subplot.dflt],a):qc.extendFlat(n,a))}return n}t(OMe,"fillLayoutSchema");var NMe={object:function(e,r){var n;return e==="layout"&&r===""?n="The layout argument":e[0]==="data"&&r===""?n="Trace "+e[1]+" in the data argument":n=Yp(e)+"key "+r,n+" must be linked to an object container"},array:function(e,r){var n;return e==="data"?n="The data argument":n=Yp(e)+"key "+r,n+" must be linked to an array container"},schema:function(e,r){return Yp(e)+"key "+r+" is not part of the schema"},unused:function(e,r,n){var i=Dc(n)?"container":"key";return Yp(e)+i+" "+r+" did not get coerced"},dynamic:function(e,r,n,i){return[Yp(e)+"key",r,"(set to '"+n+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(e,r){return(r?Yp(e)+"item "+r:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,r,n){return[Yp(e)+"key "+r,"is set to an invalid value ("+n+")"].join(" ")}};function Yp(e){return sp(e)?"In data trace "+e[1]+", ":"In "+e+", "}t(Yp,"inBase");function Cs(e,r,n,i,s){n=n||"";var o,a;sp(r)?(o=r[0],a=r[1]):(o=r,a=null);var l=$Me(n),u=NMe[e](r,l,i,s);return qc.log(u),{code:e,container:o,trace:a,path:n,astr:l,msg:u}}t(Cs,"format$1");function qMe(e,r){var n=kue(r),i=n.keyMinusId,s=n.id;return i in e&&e[i]._isSubplotObj&&s?!0:r in e}t(qMe,"isInSchema");function UMe(e,r){if(r in e)return e[r];var n=kue(r);return e[n.keyMinusId]}t(UMe,"getNestedSchema");var HMe=qc.counterRegex("([a-z]+)");function kue(e){var r=e.match(HMe);return{keyMinusId:r&&r[1],id:r&&r[2]}}t(kue,"splitKey");function $Me(e){if(!sp(e))return String(e);for(var r="",n=0;n<e.length;n++){var i=e[n];typeof i=="number"?r=r.substr(0,r.length-1)+"["+i+"]":r+=i,n<e.length-1&&(r+=".")}return r}t($Me,"convertPathToAttributeString");var iH=Nt.exports,Dm=Ol;function VMe(e,r,n){var i=document.createElement("a"),s="download"in i,o=new Promise(function(a,l){var u,f;if(iH.isIE())return u=Dm.createBlob(e,"svg"),window.navigator.msSaveBlob(u,r),u=null,a(r);if(s)return u=Dm.createBlob(e,n),f=Dm.createObjectURL(u),i.href=f,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),Dm.revokeObjectURL(f),u=null,a(r);if(iH.isSafari()){var h=n==="svg"?",":";base64,";return Dm.octetStream(h+encodeURIComponent(e)),a(r)}l(new Error("download error"))});return o}t(VMe,"fileSaver$1");var GMe=VMe,lA=Nt.exports,jMe=Mue,YMe=GMe,WMe=Ol;function XMe(e,r){var n;return lA.isPlainObject(e)||(n=lA.getGraphDiv(e)),r=r||{},r.format=r.format||"png",r.width=r.width||null,r.height=r.height||null,r.imageDataOnly=!0,new Promise(function(i,s){n&&n._snapshotInProgress&&s(new Error("Snapshotting already in progress.")),lA.isIE()&&r.format!=="svg"&&s(new Error(WMe.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var o=jMe(e,r),a=r.filename||e.fn||"newplot";a+="."+r.format.replace("-","."),o.then(function(l){return n&&(n._snapshotInProgress=!1),YMe(l,a,r.format)}).then(function(l){i(l)}).catch(function(l){n&&(n._snapshotInProgress=!1),s(l)})})}t(XMe,"downloadImage");var Eue=XMe,U8={},_f=Nt.exports,wf=_f.isPlainObject,Cue=dp,Lue=so.exports,ZMe=Ni,Rue=ei,Pue=wy.dfltConfig;U8.makeTemplate=function(e){e=_f.isPlainObject(e)?e:_f.getGraphDiv(e),e=_f.extendDeep({_context:Pue},{data:e.data,layout:e.layout}),Lue.supplyDefaults(e);var r=e.data||[],n=e.layout||{};n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules;var i={data:{},layout:{}};r.forEach(function(d){var g={};u1(d,g,JMe.bind(null,d));var p=_f.coerce(d,{},ZMe,"type"),b=i.data[p];b||(b=i.data[p]=[]),b.push(g)}),u1(n,i.layout,KMe.bind(null,n)),delete i.layout.template;var s=n.template;if(wf(s)){var o=s.layout,a,l,u,f,h,v;wf(o)&&$_(o,i.layout);var c=s.data;if(wf(c)){for(l in i.data)if(u=c[l],Array.isArray(u)){for(h=i.data[l],v=h.length,f=u.length,a=0;a<v;a++)$_(u[a%f],h[a]);for(a=v;a<f;a++)h.push(_f.extendDeep({},u[a]))}for(l in c)l in i.data||(i.data[l]=_f.extendDeep([],c[l]))}}return i};function $_(e,r){e=_f.extendDeep({},e);var n=Object.keys(e).sort(),i,s;function o(h,v,c){if(wf(v)&&wf(h))$_(h,v);else if(Array.isArray(v)&&Array.isArray(h)){var d=Rue.arrayTemplater({_template:e},c);for(s=0;s<v.length;s++){var g=v[s],p=d.newItem(g)._template;p&&$_(p,g)}var b=d.defaultItems();for(s=0;s<b.length;s++)v.push(b[s]._template);for(s=0;s<v.length;s++)delete v[s].templateitemname}}for(t(o,"mergeOne"),i=0;i<n.length;i++){var a=n[i],l=e[a];if(a in r?o(l,r[a],a):r[a]=l,V_(a)===a)for(var u in r){var f=V_(u);u!==f&&f===a&&!(u in e)&&o(l,r[u],a)}}}t($_,"mergeTemplates");function V_(e){return e.replace(/[0-9]+$/,"")}t(V_,"getBaseKey");function u1(e,r,n,i,s){var o=s&&n(s);for(var a in e){var l=e[a],u=Ic(e,a,i),f=Ic(e,a,s),h=n(f);if(!h){var v=V_(a);v!==a&&(f=Ic(e,v,s),h=n(f))}if(!(o&&o===h)&&!(!h||h._noTemplating||h.valType==="data_array"||h.arrayOk&&Array.isArray(l)))if(!h.valType&&wf(l))u1(l,r,n,u,f);else if(h._isLinkedToArray&&Array.isArray(l))for(var c=!1,d=0,g={},p=0;p<l.length;p++){var b=l[p];if(wf(b)){var m=b.name;if(m)g[m]||(u1(b,r,n,Ic(l,d,u),Ic(l,d,f)),d++,g[m]=1);else if(!c){var y=Rue.arrayDefaultKey(a),T=Ic(e,y,i),_=Ic(l,d,u);u1(b,r,n,_,Ic(l,d,f));var M=_f.nestedProperty(r,_),w=_f.nestedProperty(r,T);w.set(M.get()),M.set(null),c=!0}}}else{var x=_f.nestedProperty(r,u);x.set(l)}}}t(u1,"walkStyleKeys");function KMe(e,r){return Cue.getLayoutValObject(e,_f.nestedProperty({},r).parts)}t(KMe,"getLayoutInfo");function JMe(e,r){return Cue.getTraceValObject(e,_f.nestedProperty({},r).parts)}t(JMe,"getTraceInfo");function Ic(e,r,n){var i;return n?Array.isArray(e)?i=n+"["+r+"]":i=n+"."+r:i=r,i}t(Ic,"getNextPath");U8.validateTemplate=function(e,r){var n=_f.extendDeep({},{_context:Pue,data:e.data,layout:e.layout}),i=n.layout||{};wf(r)||(r=i.template||{});var s=r.layout,o=r.data,a=[];n.layout=i,n.layout.template=r,Lue.supplyDefaults(n);var l=n._fullLayout,u=n._fullData,f={};function h(T,_){for(var M in T)if(M.charAt(0)!=="_"&&wf(T[M])){var w=V_(M),x=[],A;for(A=0;A<_.length;A++)x.push(Ic(T,M,_[A])),w!==M&&x.push(Ic(T,w,_[A]));for(A=0;A<x.length;A++)f[x[A]]=1;h(T[M],x)}}t(h,"crawlLayoutForContainers");function v(T,_){for(var M in T)if(M.indexOf("defaults")===-1&&wf(T[M])){var w=Ic(T,M,_);f[w]?v(T[M],w):a.push({code:"unused",path:w})}}if(t(v,"crawlLayoutTemplateForContainers"),wf(s)?(h(l,["layout"]),v(s,"layout")):a.push({code:"layout"}),!wf(o))a.push({code:"data"});else{for(var c={},d,g=0;g<u.length;g++){var p=u[g];d=p.type,c[d]=(c[d]||0)+1,p._fullInput._template||a.push({code:"missing",index:p._fullInput.index,traceType:d})}for(d in o){var b=o[d].length,m=c[d]||0;b>m?a.push({code:"unused",traceType:d,templateCount:b,dataCount:m}):m>b&&a.push({code:"reused",traceType:d,templateCount:b,dataCount:m})}}function y(T,_){for(var M in T)if(M.charAt(0)!=="_"){var w=T[M],x=Ic(T,M,_);wf(w)?(Array.isArray(T)&&w._template===!1&&w.templateitemname&&a.push({code:"missing",path:x,templateitemname:w.templateitemname}),y(w,x)):Array.isArray(w)&&QMe(w)&&y(w,x)}}if(t(y,"crawlForMissingTemplates"),y({data:u,layout:l},""),a.length)return a.map(eke)};function QMe(e){for(var r=0;r<e.length;r++)if(wf(e[r]))return!0}t(QMe,"hasPlainObject");function eke(e){var r;switch(e.code){case"data":r="The template has no key data.";break;case"layout":r="The template has no key layout.";break;case"missing":e.path?r="There are no templates for item "+e.path+" with name "+e.templateitemname:r="There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":e.path?r="The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?r="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":r="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":r="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}return e.msg=r,e}t(eke,"format");var qs=lw;Bo._doPlot=qs._doPlot;Bo.newPlot=qs.newPlot;Bo.restyle=qs.restyle;Bo.relayout=qs.relayout;Bo.redraw=qs.redraw;Bo.update=qs.update;Bo._guiRestyle=qs._guiRestyle;Bo._guiRelayout=qs._guiRelayout;Bo._guiUpdate=qs._guiUpdate;Bo._storeDirectGUIEdit=qs._storeDirectGUIEdit;Bo.react=qs.react;Bo.extendTraces=qs.extendTraces;Bo.prependTraces=qs.prependTraces;Bo.addTraces=qs.addTraces;Bo.deleteTraces=qs.deleteTraces;Bo.moveTraces=qs.moveTraces;Bo.purge=qs.purge;Bo.addFrames=qs.addFrames;Bo.deleteFrames=qs.deleteFrames;Bo.animate=qs.animate;Bo.setPlotConfig=qs.setPlotConfig;Bo.toImage=Mue;Bo.validate=BMe;Bo.downloadImage=Eue;var Due=U8;Bo.makeTemplate=Due.makeTemplate;Bo.validateTemplate=Due.validateTemplate;var uA=Nt.exports,tke=Na,ix=t(function(r,n,i,s){var o=s("x"),a=s("y"),l,u=tke.getComponentMethod("calendars","handleTraceDefaults");if(u(r,n,["x","y"],i),o){var f=uA.minRowLength(o);a?l=Math.min(f,uA.minRowLength(a)):(l=f,s("y0"),s("dy"))}else{if(!a)return 0;l=uA.minRowLength(a),s("x0"),s("dx")}return n._length=l,l},"handleXYDefaults"),oH=Nt.exports.dateTick0,rke=jn,ake=rke.ONEWEEK;function sH(e,r){return e%ake===0?oH(r,1):oH(r,0)}t(sH,"getPeriod0Dflt");var yv=t(function(r,n,i,s,o){if(o||(o={x:!0,y:!0}),o.x){var a=s("xperiod");a&&(s("xperiod0",sH(a,n.xcalendar)),s("xperiodalignment"))}if(o.y){var l=s("yperiod");l&&(s("yperiod0",sH(l,n.ycalendar)),s("yperiodalignment"))}},"handlePeriodDefaults"),lH=["orientation","groupnorm","stackgaps"],nke=t(function(r,n,i,s){var o=i._scatterStackOpts,a=s("stackgroup");if(a){var l=n.xaxis+n.yaxis,u=o[l];u||(u=o[l]={});var f=u[a],h=!1;f?f.traces.push(n):(f=u[a]={traceIndices:[],traces:[n]},h=!0);for(var v={orientation:n.x&&!n.y?"h":"v"},c=0;c<lH.length;c++){var d=lH[c],g=d+"Found";if(!f[g]){var p=r[d]!==void 0,b=d==="orientation";if((p||h)&&(f[d]=s(d,v[d]),b&&(f.fillDflt=f[d]==="h"?"tonextx":"tonexty"),p&&(f[g]=!0,!h&&(delete f.traces[0][d],b))))for(var m=0;m<f.traces.length-1;m++){var y=f.traces[m];y._input.fill!==y.fill&&(y.fill=f.fillDflt)}}}return f}},"handleStackDefaults"),uH=$a.exports,fH=Qu.hasColorscale,cH=ml,ike=ho,Ph=t(function(r,n,i,s,o,a){var l=ike.isBubble(r),u=(r.line||{}).color,f;if(a=a||{},u&&(i=u),o("marker.symbol"),o("marker.opacity",l?.7:1),o("marker.size"),a.noAngle||(o("marker.angle"),a.noAngleRef||o("marker.angleref"),a.noStandOff||o("marker.standoff")),o("marker.color",i),fH(r,"marker")&&cH(r,n,s,o,{prefix:"marker.",cLetter:"c"}),a.noSelect||(o("selected.marker.color"),o("unselected.marker.color"),o("selected.marker.size"),o("unselected.marker.size")),a.noLine||(u&&!Array.isArray(u)&&n.marker.color!==u?f=u:l?f=uH.background:f=uH.defaultLine,o("marker.line.color",f),fH(r,"marker.line")&&cH(r,n,s,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width",l?1:0)),l&&(o("marker.sizeref"),o("marker.sizemin"),o("marker.sizemode")),a.gradient){var h=o("marker.gradient.type");h!=="none"&&o("marker.gradient.color")}},"markerDefaults"),oke=Nt.exports.isArrayOrTypedArray,ske=Qu.hasColorscale,lke=ml,mv=t(function(r,n,i,s,o,a){a||(a={});var l=(r.marker||{}).color;if(o("line.color",i),ske(r,"line"))lke(r,n,s,o,{prefix:"line.",cLetter:"c"});else{var u=(oke(l)?!1:l)||i;o("line.color",u)}o("line.width"),a.noDash||o("line.dash"),a.backoff&&o("line.backoff")},"lineDefaults"),ox=t(function(r,n,i){var s=i("line.shape");s==="spline"&&i("line.smoothing")},"handleLineShapeDefaults"),uke=Nt.exports,xv=t(function(e,r,n,i,s){s=s||{},i("textposition"),uke.coerceFont(i,"textfont",n.font),s.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))},"text_defaults"),fke=$a.exports,hH=Nt.exports.isArrayOrTypedArray,dd=t(function(r,n,i,s){var o=!1;if(n.marker){var a=n.marker.color,l=(n.marker.line||{}).color;a&&!hH(a)?o=a:l&&!hH(l)&&(o=l)}s("fillcolor",fke.addOpacity((n.line||{}).color||o||i,.5))},"fillColorDefaults"),vH=Nt.exports,cke=Na,hke=Ps,vke=vd,bg=ho,dke=ix,pke=yv,gke=nke,yke=Ph,mke=mv,dH=ox,xke=xv,bke=dd,_ke=Nt.exports.coercePattern,wke=t(function(r,n,i,s){function o(d,g){return vH.coerce(r,n,hke,d,g)}t(o,"coerce");var a=dke(r,n,s,o);if(a||(n.visible=!1),!!n.visible){pke(r,n,s,o),o("xhoverformat"),o("yhoverformat");var l=gke(r,n,s,o),u=!l&&a<vke.PTS_LINESONLY?"lines+markers":"lines";o("text"),o("hovertext"),o("mode",u),bg.hasLines(n)&&(mke(r,n,i,s,o,{backoff:!0}),dH(r,n,o),o("connectgaps"),o("line.simplify")),bg.hasMarkers(n)&&yke(r,n,i,s,o,{gradient:!0}),bg.hasText(n)&&(o("texttemplate"),xke(r,n,s,o));var f=[];(bg.hasMarkers(n)||bg.hasText(n))&&(o("cliponaxis"),o("marker.maxdisplayed"),f.push("points")),o("fill",l?l.fillDflt:"none"),n.fill!=="none"&&(bke(r,n,i,o),bg.hasLines(n)||dH(r,n,o),_ke(o,"fillpattern",n.fillcolor,!1));var h=(n.line||{}).color,v=(n.marker||{}).color;(n.fill==="tonext"||n.fill==="toself")&&f.push("fills"),o("hoveron",f.join("+")||"points"),n.hoveron!=="fills"&&o("hovertemplate");var c=cke.getComponentMethod("errorbars","supplyDefaults");c(r,n,h||v||i,{axis:"y"}),c(r,n,h||v||i,{axis:"x",inherit:"y"}),vH.coerceSelectionMarkerOpacity(n,o)}},"supplyDefaults"),Iue=t(function(r){for(var n=0;n<r.length;n++){var i=r[n];if(i.type==="scatter"){var s=i.fill;if(!(s==="none"||s==="toself")&&(i.opacity=void 0,s==="tonexty"||s==="tonextx"))for(var o=n-1;o>=0;o--){var a=r[o];if(a.type==="scatter"&&a.xaxis===i.xaxis&&a.yaxis===i.yaxis){a.opacity=void 0;break}}}}},"crossTraceDefaults"),Tke=xn,zue=Nt.exports,Ake=zue.dateTime2ms,Sb=zue.incrementMonth,Ske=jn,Mke=Ske.ONEAVGMONTH,bv=t(function(r,n,i,s){if(n.type!=="date")return{vals:s};var o=r[i+"periodalignment"];if(!o)return{vals:s};var a=r[i+"period"],l;if(Tke(a)){if(a=+a,a<=0)return{vals:s}}else if(typeof a=="string"&&a.charAt(0)==="M"){var u=+a.substring(1);if(u>0&&Math.round(u)===u)l=u;else return{vals:s}}for(var f=n.calendar,h=o==="start",v=o==="end",c=r[i+"period0"],d=Ake(c,f)||0,g=[],p=[],b=[],m=s.length,y=0;y<m;y++){var T=s[y],_,M,w;if(l){for(_=Math.round((T-d)/(l*Mke)),w=Sb(d,l*_,f);w>T;)w=Sb(w,-l,f);for(;w<=T;)w=Sb(w,l,f);M=Sb(w,-l,f)}else{for(_=Math.round((T-d)/a),w=d+_*a;w>T;)w-=a;for(;w<=T;)w+=a;M=w-a}g[y]=h?M:v?w:(M+w)/2,p[y]=M,b[y]=w}return{vals:g,starts:p,ends:b}},"alignPeriod"),fA=Qu.hasColorscale,cA=Lf,pH=ho,Dh=t(function(r,n){pH.hasLines(n)&&fA(n,"line")&&cA(r,n,{vals:n.line.color,containerStr:"line",cLetter:"c"}),pH.hasMarkers(n)&&(fA(n,"marker")&&cA(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),fA(n,"marker.line")&&cA(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}))},"calcMarkerColorscale"),Pl=Nt.exports,pd=t(function(r,n){for(var i=0;i<r.length;i++)r[i].i=i;Pl.mergeArray(n.text,r,"tx"),Pl.mergeArray(n.texttemplate,r,"txt"),Pl.mergeArray(n.hovertext,r,"htx"),Pl.mergeArray(n.customdata,r,"data"),Pl.mergeArray(n.textposition,r,"tp"),n.textfont&&(Pl.mergeArrayCastPositive(n.textfont.size,r,"ts"),Pl.mergeArray(n.textfont.color,r,"tc"),Pl.mergeArray(n.textfont.family,r,"tf"));var s=n.marker;if(s){Pl.mergeArrayCastPositive(s.size,r,"ms"),Pl.mergeArrayCastPositive(s.opacity,r,"mo"),Pl.mergeArray(s.symbol,r,"mx"),Pl.mergeArray(s.angle,r,"ma"),Pl.mergeArray(s.standoff,r,"mf"),Pl.mergeArray(s.color,r,"mc");var o=s.line;s.line&&(Pl.mergeArray(o.color,r,"mlc"),Pl.mergeArrayCastPositive(o.width,r,"mlw"));var a=s.gradient;a&&a.type!=="none"&&(Pl.mergeArray(a.type,r,"mgt"),Pl.mergeArray(a.color,r,"mgc"))}},"arraysToCalcdata"),gH=Nt.exports,Ih=t(function(r,n){gH.isArrayOrTypedArray(n.selectedpoints)&&gH.tagSelected(r,n)},"calcSelection"),yH=xn,Iz=Nt.exports,L1=nn(),mH=bv,hA=jn.BADNUM,zz=ho,kke=Dh,Eke=pd,Cke=Ih;function Lke(e,r){var n=e._fullLayout,i=r._xA=L1.getFromId(e,r.xaxis||"x","x"),s=r._yA=L1.getFromId(e,r.yaxis||"y","y"),o=i.makeCalcdata(r,"x"),a=s.makeCalcdata(r,"y"),l=mH(r,i,"x",o),u=mH(r,s,"y",a),f=l.vals,h=u.vals,v=r._length,c=new Array(v),d=r.ids,g=H8(r,n,i,s),p=!1,b,m,y,T,_,M;Oue(n,r);var w="x",x="y",A;if(g)Iz.pushUnique(g.traceIndices,r._expandedIndex),b=g.orientation==="v",b?(x="s",A="x"):(w="s",A="y"),_=g.stackgaps==="interpolate";else{var S=Bue(r,v);Fue(e,r,i,s,f,h,S)}var k=!!r.xperiodalignment,L=!!r.yperiodalignment;for(m=0;m<v;m++){var P=c[m]={},D=yH(f[m]),B=yH(h[m]);D&&B?(P[w]=f[m],P[x]=h[m],k&&(P.orig_x=o[m],P.xEnd=l.ends[m],P.xStart=l.starts[m]),L&&(P.orig_y=a[m],P.yEnd=u.ends[m],P.yStart=u.starts[m])):g&&(b?D:B)?(P[A]=b?f[m]:h[m],P.gap=!0,_?(P.s=hA,p=!0):P.s=0):P[w]=P[x]=hA,d&&(P.id=String(d[m]))}if(Eke(c,r),kke(e,r),Cke(c,r),g){for(m=0;m<c.length;)c[m][A]===hA?c.splice(m,1):m++;if(Iz.sort(c,function(O,q){return O[A]-q[A]||O.i-q.i}),p){for(m=0;m<c.length-1&&c[m].gap;)m++;for(M=c[m].s,M||(M=c[m].s=0),y=0;y<m;y++)c[y].s=M;for(T=c.length-1;T>m&&c[T].gap;)T--;for(M=c[T].s,y=c.length-1;y>T;y--)c[y].s=M;for(;m<T;)if(m++,c[m].gap){for(y=m+1;c[y].gap;)y++;for(var z=c[m-1][A],R=c[m-1].s,F=(c[y].s-R)/(c[y][A]-z);m<y;)c[m].s=R+(c[m][A]-z)*F,m++}}}return c}t(Lke,"calc$A");function Fue(e,r,n,i,s,o,a){var l=r._length,u=e._fullLayout,f=n._id,h=i._id,v=u._firstScatter[Nue(r)]===r.uid,c=(H8(r,u,n,i)||{}).orientation,d=r.fill;n._minDtick=0,i._minDtick=0;var g={padded:!0},p={padded:!0};a&&(g.ppad=p.ppad=a);var b=l<2||s[0]!==s[l-1]||o[0]!==o[l-1];b&&(d==="tozerox"||d==="tonextx"&&(v||c==="h"))?g.tozero=!0:!(r.error_y||{}).visible&&(d==="tonexty"||d==="tozeroy"||!zz.hasMarkers(r)&&!zz.hasText(r))&&(g.padded=!1,g.ppad=0),b&&(d==="tozeroy"||d==="tonexty"&&(v||c==="v"))?p.tozero=!0:(d==="tonextx"||d==="tozerox")&&(p.padded=!1),f&&(r._extremes[f]=L1.findExtremes(n,s,g)),h&&(r._extremes[h]=L1.findExtremes(i,o,p))}t(Fue,"calcAxisExpansion$1");function Bue(e,r){if(!!zz.hasMarkers(e)){var n=e.marker,i=1.6*(e.marker.sizeref||1),s;if(e.marker.sizemode==="area"?s=t(function(f){return Math.max(Math.sqrt((f||0)/i),3)},"markerTrans"):s=t(function(f){return Math.max((f||0)/i,3)},"markerTrans"),Iz.isArrayOrTypedArray(n.size)){var o={type:"linear"};L1.setConvert(o);for(var a=o.makeCalcdata(e.marker,"size"),l=new Array(r),u=0;u<r;u++)l[u]=s(a[u]);return l}else return s(n.size)}}t(Bue,"calcMarkerSize");function Oue(e,r){var n=Nue(r),i=e._firstScatter;i[n]||(i[n]=r.uid)}t(Oue,"setFirstScatter");function Nue(e){var r=e.stackgroup;return e.xaxis+e.yaxis+e.type+(r?"-"+r:"")}t(Nue,"firstScatterGroup");function H8(e,r,n,i){var s=e.stackgroup;if(!!s){var o=r._scatterStackOpts[n._id+i._id][s],a=o.orientation==="v"?i:n;if(a.type==="linear"||a.type==="log")return o}}t(H8,"getStackOpts");var kh={calc:Lke,calcMarkerSize:Bue,calcAxisExpansion:Fue,setFirstScatter:Oue,getStackOpts:H8},xH=kh,Rke=t(function(r,n){var i=n.xaxis,s=n.yaxis,o=i._id+s._id,a=r._fullLayout._scatterStackOpts[o];if(!!a){var l=r.calcdata,u,f,h,v,c,d,g,p,b,m,y,T,_,M,w;for(var x in a){m=a[x];var A=m.traceIndices;if(!!A.length){for(y=m.stackgaps==="interpolate",T=m.groupnorm,m.orientation==="v"?(_="x",M="y"):(_="y",M="x"),w=new Array(A.length),u=0;u<w.length;u++)w[u]=!1;d=l[A[0]];var S=new Array(d.length);for(u=0;u<d.length;u++)S[u]=d[u][_];for(u=1;u<A.length;u++){for(c=l[A[u]],f=h=0;f<c.length;f++){for(g=c[f][_];g>S[h]&&h<S.length;h++)vA(c,f,S[h],u,w,y,_),f++;if(g!==S[h]){for(v=0;v<u;v++)vA(l[A[v]],h,g,v,w,y,_);S.splice(h,0,g)}h++}for(;h<S.length;h++)vA(c,f,S[h],u,w,y,_),f++}var k=S.length;for(f=0;f<d.length;f++){for(p=d[f][M]=d[f].s,u=1;u<A.length;u++)c=l[A[u]],c[0].trace._rawLength=c[0].trace._length,c[0].trace._length=k,p+=c[f].s,c[f][M]=p;if(T)for(b=(T==="fraction"?p:p/100)||1,u=0;u<A.length;u++){var L=l[A[u]][f];L[M]/=b,L.sNorm=L.s/b}}for(u=0;u<A.length;u++){c=l[A[u]];var P=c[0].trace,D=xH.calcMarkerSize(P,P._rawLength),B=Array.isArray(D);if(D&&w[u]||B){var z=D;for(D=new Array(k),f=0;f<k;f++)D[f]=c[f].gap?0:B?z[c[f].i]:z}var R=new Array(k),F=new Array(k);for(f=0;f<k;f++)R[f]=c[f].x,F[f]=c[f].y;xH.calcAxisExpansion(r,P,i,s,R,F,D),c[0].t.orientation=m.orientation}}}}},"crossTraceCalc");function vA(e,r,n,i,s,o,a){s[i]=!0;var l={i:null,gap:!0,s:0};if(l[a]=n,e.splice(r,0,l),r&&n===e[r-1][a]){var u=e[r-1];l.s=u.s,l.i=u.i,l.gap=u.gap}else o&&(l.s=Pke(e,r,n,a));r||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t(vA,"insertBlank");function Pke(e,r,n,i){var s=e[r-1],o=e[r+1];return o?s?s.s+(o.s-s.s)*(n-s[i])/(o[i]-s[i]):o.s:s.s}t(Pke,"getInterp");var Dke=bn.exports,que=jn,Im=que.BADNUM,Uue=que.LOG_CLIP,bH=Uue+.5,_H=Uue-.5,G_=Nt.exports,Ike=G_.segmentsIntersect,wH=G_.constrain,dA=vd,Hue=t(function(r,n){var i=n.trace||{},s=n.xaxis,o=n.yaxis,a=s.type==="log",l=o.type==="log",u=s._length,f=o._length,h=n.backoff,v=i.marker,c=n.connectGaps,d=n.baseTolerance,g=n.shape,p=g==="linear",b=i.fill&&i.fill!=="none",m=[],y=dA.minTolerance,T=r.length,_=new Array(T),M=0,w,x,A,S,k,L,P,D,B,z,R,F,O,q,H,j;function X(ft){var zt=r[ft];if(!zt)return!1;var Pt=n.linearized?s.l2p(zt.x):s.c2p(zt.x),Et=n.linearized?o.l2p(zt.y):o.c2p(zt.y);if(Pt===Im){if(a&&(Pt=s.c2p(zt.x,!0)),Pt===Im)return!1;l&&Et===Im&&(Pt*=Math.abs(s._m*f*(s._m>0?bH:_H)/(o._m*u*(o._m>0?bH:_H)))),Pt*=1e3}if(Et===Im){if(l&&(Et=o.c2p(zt.y,!0)),Et===Im)return!1;Et*=1e3}return[Pt,Et]}t(X,"getPt");function G(ft,zt,Pt,Et){var Wt=Pt-ft,ze=Et-zt,tt=.5-ft,at=.5-zt,vt=Wt*Wt+ze*ze,_t=Wt*tt+ze*at;if(_t>0&&_t<vt){var Rt=tt*ze-at*Wt;if(Rt*Rt<vt)return!0}}t(G,"crossesViewport");var $,te;function ee(ft,zt){var Pt=ft[0]/u,Et=ft[1]/f,Wt=Math.max(0,-Pt,Pt-1,-Et,Et-1);return Wt&&$!==void 0&&G(Pt,Et,$,te)&&(Wt=0),Wt&&zt&&G(Pt,Et,zt[0]/u,zt[1]/f)&&(Wt=0),(1+dA.toleranceGrowth*Wt)*d}t(ee,"getTolerance");function ie(ft,zt){var Pt=ft[0]-zt[0],Et=ft[1]-zt[1];return Math.sqrt(Pt*Pt+Et*Et)}t(ie,"ptDist");var se=dA.maxScreensAway,W=-u*se,ne=u*(1+se),he=-f*se,re=f*(1+se),ae=[[W,he,ne,he],[ne,he,ne,re],[ne,re,W,re],[W,re,W,he]],fe,ce,xe,Te,me,pe;function oe(ft,zt){for(var Pt=[],Et=0,Wt=0;Wt<4;Wt++){var ze=ae[Wt],tt=Ike(ft[0],ft[1],zt[0],zt[1],ze[0],ze[1],ze[2],ze[3]);tt&&(!Et||Math.abs(tt.x-Pt[0][0])>1||Math.abs(tt.y-Pt[0][1])>1)&&(tt=[tt.x,tt.y],Et&&ie(tt,ft)<ie(Pt[0],ft)?Pt.unshift(tt):Pt.push(tt),Et++)}return Pt}t(oe,"getLinearEdgeIntersections");function de(ft){if(ft[0]<W||ft[0]>ne||ft[1]<he||ft[1]>re)return[wH(ft[0],W,ne),wH(ft[1],he,re)]}t(de,"onlyConstrainedPoint");function ye(ft,zt){if(ft[0]===zt[0]&&(ft[0]===W||ft[0]===ne)||ft[1]===zt[1]&&(ft[1]===he||ft[1]===re))return!0}t(ye,"sameEdge");function we(ft,zt){var Pt=[],Et=de(ft),Wt=de(zt);return Et&&Wt&&ye(Et,Wt)||(Et&&Pt.push(Et),Wt&&Pt.push(Wt)),Pt}t(we,"getHVEdgeIntersections");function Ee(ft,zt,Pt){return function(Et,Wt){var ze=de(Et),tt=de(Wt),at=[];if(ze&&tt&&ye(ze,tt))return at;ze&&at.push(ze),tt&&at.push(tt);var vt=2*G_.constrain((Et[ft]+Wt[ft])/2,zt,Pt)-((ze||Et)[ft]+(tt||Wt)[ft]);if(vt){var _t;ze&&tt?_t=vt>0==ze[ft]>tt[ft]?ze:tt:_t=ze||tt,_t[ft]+=vt}return at}}t(Ee,"getABAEdgeIntersections");var De;g==="linear"||g==="spline"?De=oe:g==="hv"||g==="vh"?De=we:g==="hvh"?De=Ee(0,W,ne):g==="vhv"&&(De=Ee(1,he,re));function Fe(ft,zt){var Pt=zt[0]-ft[0],Et=(zt[1]-ft[1])/Pt,Wt=(ft[1]*zt[0]-zt[1]*ft[0])/Pt;return Wt>0?[Et>0?W:ne,re]:[Et>0?ne:W,he]}t(Fe,"getClosestCorner");function qe(ft){var zt=ft[0],Pt=ft[1],Et=zt===_[M-1][0],Wt=Pt===_[M-1][1];if(!(Et&&Wt))if(M>1){var ze=zt===_[M-2][0],tt=Pt===_[M-2][1];Et&&(zt===W||zt===ne)&&ze?tt?M--:_[M-1]=ft:Wt&&(Pt===he||Pt===re)&&tt?ze?M--:_[M-1]=ft:_[M++]=ft}else _[M++]=ft}t(qe,"updateEdge");function Je(ft){_[M-1][0]!==ft[0]&&_[M-1][1]!==ft[1]&&qe([xe,Te]),qe(ft),me=null,xe=Te=0}t(Je,"updateEdgesForReentry");var Ge=G_.isArrayOrTypedArray(v);function et(ft){if(ft&&h&&(ft.i=w,ft.d=r,ft.trace=i,ft.marker=Ge?v[ft.i]:v,ft.backoff=h),$=ft[0]/u,te=ft[1]/f,fe=ft[0]<W?W:ft[0]>ne?ne:0,ce=ft[1]<he?he:ft[1]>re?re:0,fe||ce){if(!M)_[M++]=[fe||ft[0],ce||ft[1]];else if(me){var zt=De(me,ft);zt.length>1&&(Je(zt[0]),_[M++]=zt[1])}else pe=De(_[M-1],ft)[0],_[M++]=pe;var Pt=_[M-1];fe&&ce&&(Pt[0]!==fe||Pt[1]!==ce)?(me&&(xe!==fe&&Te!==ce?qe(xe&&Te?Fe(me,ft):[xe||fe,Te||ce]):xe&&Te&&qe([xe,Te])),qe([fe,ce])):xe-fe&&Te-ce&&qe([fe||xe,ce||Te]),me=ft,xe=fe,Te=ce}else me&&Je(De(me,ft)[0]),_[M++]=ft}for(t(et,"addPt"),w=0;w<T;w++)if(x=X(w),!!x){for(M=0,me=null,et(x),w++;w<T;w++){if(S=X(w),!S){if(c)continue;break}if(!p||!n.simplify){et(S);continue}var Ue=X(w+1);if(z=ie(S,x),!(!(b&&(M===0||M===T-1))&&z<ee(S,Ue)*y)){for(D=[(S[0]-x[0])/z,(S[1]-x[1])/z],k=x,R=z,F=q=H=0,P=!1,A=S,w++;w<r.length;w++){if(L=Ue,Ue=X(w+1),!L){if(c)continue;break}if(B=[L[0]-x[0],L[1]-x[1]],j=B[0]*D[1]-B[1]*D[0],q=Math.min(q,j),H=Math.max(H,j),H-q>ee(L,Ue))break;A=L,O=B[0]*D[0]+B[1]*D[1],O>R?(R=O,S=L,P=!1):O<F&&(F=O,k=L,P=!0)}if(P?(et(S),A!==k&&et(k)):(k!==x&&et(k),A!==S&&et(S)),et(A),w>=r.length||!L)break;et(L),x=L}}me&&qe([xe||me[0],Te||me[1]]),m.push(_.slice(0,M))}var Ye=g.slice(g.length-1);if(h&&Ye!=="h"&&Ye!=="v"){for(var $e=!1,Ct=-1,It=[],Vt=0;Vt<m.length;Vt++)for(var $t=0;$t<m[Vt].length-1;$t++){var Gt=m[Vt][$t],Jt=m[Vt][$t+1],kt=Dke.applyBackoff(Jt,Gt);(kt[0]!==Jt[0]||kt[1]!==Jt[1])&&($e=!0),It[Ct+1]||(Ct++,It[Ct]=[Gt,[kt[0],kt[1]]])}return $e?It:m}return m},"linePoints"),TH={tonextx:1,tonexty:1,tonext:1},$ue=t(function(r,n,i){var s,o,a,l,u,f={},h=!1,v=-1,c=0,d=-1;for(o=0;o<i.length;o++)s=i[o][0].trace,a=s.stackgroup||"",a?a in f?u=f[a]:(u=f[a]=c,c++):s.fill in TH&&d>=0?u=d:(u=d=c,c++),u<v&&(h=!0),s._groupIndex=v=u;var g=i.slice();h&&g.sort(function(b,m){var y=b[0].trace,T=m[0].trace;return y._groupIndex-T._groupIndex||y.index-T.index});var p={};for(o=0;o<g.length;o++)s=g[o][0].trace,a=s.stackgroup||"",s.visible===!0?(s._nexttrace=null,s.fill in TH&&(l=p[a],s._prevtrace=l||null,l&&(l._nexttrace=s)),s._ownfill=s.fill&&(s.fill.substr(0,6)==="tozero"||s.fill==="toself"||s.fill.substr(0,2)==="to"&&!s._prevtrace),p[a]=s):s._prevtrace=s._nexttrace=s._ownfill=null;return g},"linkTraces"),bh=Va.exports,zke=Na,R1=Nt.exports,Hg=R1.ensureSingle,Vue=R1.identity,ns=bn.exports,$g=ho,Fke=Hue,Bke=$ue,Oke=rx.exports.tester,sx=t(function(r,n,i,s,o,a){var l,u,f=!o,h=!!o&&o.duration>0,v=Bke(r,n,i);if(l=s.selectAll("g.trace").data(v,function(d){return d[0].trace.uid}),l.enter().append("g").attr("class",function(d){return"trace scatter trace"+d[0].trace.uid}).style("stroke-miterlimit",2),l.order(),Nke(r,l,n),h){a&&(u=a());var c=bh.transition().duration(o.duration).ease(o.easing).each("end",function(){u&&u()}).each("interrupt",function(){u&&u()});c.each(function(){s.selectAll("g.trace").each(function(d,g){AH(r,g,n,d,v,this,o)})})}else l.each(function(d,g){AH(r,g,n,d,v,this,o)});f&&l.exit().remove(),s.selectAll("path:not([d])").remove()},"plot");function Nke(e,r,n){r.each(function(i){var s=Hg(bh.select(this),"g","fills");ns.setClipUrl(s,n.layerClipId,e);var o=i[0].trace,a=[];o._ownfill&&a.push("_ownFill"),o._nexttrace&&a.push("_nextFill");var l=s.selectAll("g").data(a,Vue);l.enter().append("g"),l.exit().each(function(u){o[u]=null}).remove(),l.order().each(function(u){o[u]=Hg(bh.select(this),"path","js-fill")})})}t(Nke,"createFills");function AH(e,r,n,i,s,o,a){var l;qke(e,r,n,i,s);var u=!!a&&a.duration>0;function f(ae){return u?ae.transition():ae}t(f,"transition");var h=n.xaxis,v=n.yaxis,c=i[0].trace,d=c.line,g=bh.select(o),p=Hg(g,"g","errorbars"),b=Hg(g,"g","lines"),m=Hg(g,"g","points"),y=Hg(g,"g","text");if(zke.getComponentMethod("errorbars","plot")(e,p,n,a),c.visible!==!0)return;f(g).style("opacity",c.opacity);var T,_,M=c.fill.charAt(c.fill.length-1);M!=="x"&&M!=="y"&&(M=""),i[0][n.isRangePlot?"nodeRangePlot3":"node3"]=g;var w="",x=[],A=c._prevtrace;A&&(w=A._prevRevpath||"",_=A._nextFill,x=A._polygons);var S,k,L="",P="",D,B,z,R,F,O,q,H=[],j=R1.noop;if(T=c._ownFill,$g.hasLines(c)||c.fill!=="none"){for(_&&_.datum(i),["hv","vh","hvh","vhv"].indexOf(d.shape)!==-1?(D=ns.steps(d.shape),B=ns.steps(d.shape.split("").reverse().join(""))):d.shape==="spline"?D=B=t(function(ae){var fe=ae[ae.length-1];return ae.length>1&&ae[0][0]===fe[0]&&ae[0][1]===fe[1]?ns.smoothclosed(ae.slice(1),d.smoothing):ns.smoothopen(ae,d.smoothing)},"revpathbase"):D=B=t(function(ae){return"M"+ae.join("L")},"revpathbase"),z=t(function(ae){return B(ae.reverse())},"revpathfn"),H=Fke(i,{xaxis:h,yaxis:v,trace:c,connectGaps:c.connectgaps,baseTolerance:Math.max(d.width||1,3)/4,shape:d.shape,backoff:d.backoff,simplify:d.simplify,fill:c.fill}),q=c._polygons=new Array(H.length),l=0;l<H.length;l++)c._polygons[l]=Oke(H[l]);H.length&&(R=H[0][0],F=H[H.length-1],O=F[F.length-1]),j=t(function(ae){return function(fe){if(S=D(fe),k=z(fe),L?M?(L+="L"+S.substr(1),P=k+("L"+P.substr(1))):(L+="Z"+S,P=k+"Z"+P):(L=S,P=k),$g.hasLines(c)&&fe.length>1){var ce=bh.select(this);if(ce.datum(i),ae)f(ce.style("opacity",0).attr("d",S).call(ns.lineGroupStyle)).style("opacity",1);else{var xe=f(ce);xe.attr("d",S),ns.singleLineStyle(i,xe)}}}},"makeUpdate")}var X=b.selectAll(".js-line").data(H);f(X.exit()).style("opacity",0).remove(),X.each(j(!1)),X.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(ns.lineGroupStyle).each(j(!0)),ns.setClipUrl(X,n.layerClipId,e);function G(ae){f(ae).attr("d","M0,0Z")}t(G,"clearFill"),H.length?(T?(T.datum(i),R&&O&&(M?(M==="y"?R[1]=O[1]=v.c2p(0,!0):M==="x"&&(R[0]=O[0]=h.c2p(0,!0)),f(T).attr("d","M"+O+"L"+R+"L"+L.substr(1)).call(ns.singleFillStyle,e)):f(T).attr("d",L+"Z").call(ns.singleFillStyle,e))):_&&(c.fill.substr(0,6)==="tonext"&&L&&w?(c.fill==="tonext"?f(_).attr("d",L+"Z"+w+"Z").call(ns.singleFillStyle,e):f(_).attr("d",L+"L"+w.substr(1)+"Z").call(ns.singleFillStyle,e),c._polygons=c._polygons.concat(x)):(G(_),c._polygons=null)),c._prevRevpath=P,c._prevPolygons=q):(T?G(T):_&&G(_),c._polygons=c._prevRevpath=c._prevPolygons=null);function $(ae){return ae.filter(function(fe){return!fe.gap&&fe.vis})}t($,"visFilter");function te(ae){return ae.filter(function(fe){return fe.vis})}t(te,"visFilterWithGaps");function ee(ae){return ae.filter(function(fe){return!fe.gap})}t(ee,"gapFilter");function ie(ae){return ae.id}t(ie,"keyFunc");function se(ae){if(ae.ids)return ie}t(se,"getKeyFunc");function W(){return!1}t(W,"hideFilter");function ne(ae,fe,ce){var xe,Te,me,pe=ce[0].trace,oe=$g.hasMarkers(pe),de=$g.hasText(pe),ye=se(pe),we=W,Ee=W;if(oe||de){var De=Vue,Fe=pe.stackgroup,qe=Fe&&e._fullLayout._scatterStackOpts[h._id+v._id][Fe].stackgaps==="infer zero";pe.marker.maxdisplayed||pe._needsCull?De=qe?te:$:Fe&&!qe&&(De=ee),oe&&(we=De),de&&(Ee=De)}Te=ae.selectAll("path.point"),xe=Te.data(we,ye);var Je=xe.enter().append("path").classed("point",!0);u&&Je.call(ns.pointStyle,pe,e).call(ns.translatePoints,h,v).style("opacity",0).transition().style("opacity",1),xe.order();var Ge;oe&&(Ge=ns.makePointStyleFns(pe)),xe.each(function(et){var Ue=bh.select(this),Ye=f(Ue);me=ns.translatePoint(et,Ye,h,v),me?(ns.singlePointStyle(et,Ye,pe,Ge,e),n.layerClipId&&ns.hideOutsideRangePoint(et,Ye,h,v,pe.xcalendar,pe.ycalendar),pe.customdata&&Ue.classed("plotly-customdata",et.data!==null&&et.data!==void 0)):Ye.remove()}),u?xe.exit().transition().style("opacity",0).remove():xe.exit().remove(),Te=fe.selectAll("g"),xe=Te.data(Ee,ye),xe.enter().append("g").classed("textpoint",!0).append("text"),xe.order(),xe.each(function(et){var Ue=bh.select(this),Ye=f(Ue.select("text"));me=ns.translatePoint(et,Ye,h,v),me?n.layerClipId&&ns.hideOutsideRangePoint(et,Ue,h,v,pe.xcalendar,pe.ycalendar):Ue.remove()}),xe.selectAll("text").call(ns.textPointStyle,pe,e).each(function(et){var Ue=h.c2p(et.x),Ye=v.c2p(et.y);bh.select(this).selectAll("tspan.line").each(function(){f(bh.select(this)).attr({x:Ue,y:Ye})})}),xe.exit().remove()}t(ne,"makePoints"),m.datum(i),y.datum(i),ne(m,y,i);var he=c.cliponaxis===!1,re=he?null:n.layerClipId;ns.setClipUrl(m,re,e),ns.setClipUrl(y,re,e)}t(AH,"plotOne$1");function qke(e,r,n,i,s){var o=n.xaxis,a=n.yaxis,l=bh.extent(R1.simpleMap(o.range,o.r2c)),u=bh.extent(R1.simpleMap(a.range,a.r2c)),f=i[0].trace;if(!!$g.hasMarkers(f)){var h=f.marker.maxdisplayed;if(h!==0){var v=i.filter(function(p){return p.x>=l[0]&&p.x<=l[1]&&p.y>=u[0]&&p.y<=u[1]}),c=Math.ceil(v.length/h),d=0;s.forEach(function(p,b){var m=p[0].trace;$g.hasMarkers(m)&&m.marker.maxdisplayed>0&&b<r&&d++});var g=Math.round(d*c/3+Math.floor(d/3)*c/7.1);i.forEach(function(p){delete p.vis}),v.forEach(function(p,b){Math.round((b+g)%c)===0&&(p.vis=!0)})}}}t(qke,"selectMarkers");var _u={container:"marker",min:"cmin",max:"cmax"},Mb=nn(),$8=t(function(r,n,i){var s={},o={_fullLayout:i},a=Mb.getFromTrace(o,n,"x"),l=Mb.getFromTrace(o,n,"y");return s.xLabel=Mb.tickText(a,a.c2l(r.x),!0).text,s.yLabel=Mb.tickText(l,l.c2l(r.y),!0).text,s},"formatLabels"),pA=Va.exports,ny=bn.exports,Uke=Na;function Hke(e){var r=pA.select(e).selectAll("g.trace.scatter");r.style("opacity",function(n){return n[0].trace.opacity}),r.selectAll("g.points").each(function(n){var i=pA.select(this),s=n.trace||n[0].trace;V8(i,s,e)}),r.selectAll("g.text").each(function(n){var i=pA.select(this),s=n.trace||n[0].trace;G8(i,s,e)}),r.selectAll("g.trace path.js-line").call(ny.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(ny.fillGroupStyle,e),Uke.getComponentMethod("errorbars","style")(r)}t(Hke,"style$9");function V8(e,r,n){ny.pointStyle(e.selectAll("path.point"),r,n)}t(V8,"stylePoints");function G8(e,r,n){ny.textPointStyle(e.selectAll("text"),r,n)}t(G8,"styleText");function $ke(e,r,n){var i=r[0].trace;i.selectedpoints?(ny.selectedPointStyle(n.selectAll("path.point"),i),ny.selectedTextStyle(n.selectAll("text"),i)):(V8(n,i,e),G8(n,i,e))}t($ke,"styleOnSelect");var kf={style:Hke,stylePoints:V8,styleText:G8,styleOnSelect:$ke},_g=$a.exports,Vke=ho,lx=t(function(r,n){var i,s;if(r.mode==="lines")return i=r.line.color,i&&_g.opacity(i)?i:r.fillcolor;if(r.mode==="none")return r.fill?r.fillcolor:"";var o=n.mcc||(r.marker||{}).color,a=n.mlcc||((r.marker||{}).line||{}).color;return s=o&&_g.opacity(o)?o:a&&_g.opacity(a)&&(n.mlw||((r.marker||{}).line||{}).width)?a:"",s?_g.opacity(s)<.3?_g.addOpacity(s,.3):s:(i=(r.line||{}).color,i&&_g.opacity(i)&&Vke.hasLines(r)&&r.line.width?i:r.fillcolor)},"getTraceColor"),Fz=Nt.exports,SH=Ko,Gke=Na,jke=lx,gA=$a.exports,Yke=Fz.fillText,ux=t(function(r,n,i,s){var o=r.cd,a=o[0].trace,l=r.xa,u=r.ya,f=l.c2p(n),h=u.c2p(i),v=[f,h],c=a.hoveron||"",d=a.mode.indexOf("markers")!==-1?3:.5,g=!!a.xperiodalignment,p=!!a.yperiodalignment;if(c.indexOf("points")!==-1){var b=t(function(ne){if(g){var he=l.c2p(ne.xStart),re=l.c2p(ne.xEnd);return f>=Math.min(he,re)&&f<=Math.max(he,re)?0:1/0}var ae=Math.max(3,ne.mrc||0),fe=1-1/ae,ce=Math.abs(l.c2p(ne.x)-f);return ce<ae?fe*ce/ae:ce-ae+fe},"dx"),m=t(function(ne){if(p){var he=u.c2p(ne.yStart),re=u.c2p(ne.yEnd);return h>=Math.min(he,re)&&h<=Math.max(he,re)?0:1/0}var ae=Math.max(3,ne.mrc||0),fe=1-1/ae,ce=Math.abs(u.c2p(ne.y)-h);return ce<ae?fe*ce/ae:ce-ae+fe},"dy"),y=t(function(ne){var he=Math.max(d,ne.mrc||0),re=l.c2p(ne.x)-f,ae=u.c2p(ne.y)-h;return Math.max(Math.sqrt(re*re+ae*ae)-he,1-d/he)},"dxy"),T=SH.getDistanceFunction(s,b,m,y);if(SH.getClosest(o,T,r),r.index!==!1){var _=o[r.index],M=l.c2p(_.x,!0),w=u.c2p(_.y,!0),x=_.mrc||1;r.index=_.i;var A=o[0].t.orientation,S=A&&(_.sNorm||_.s),k=A==="h"?S:_.orig_x!==void 0?_.orig_x:_.x,L=A==="v"?S:_.orig_y!==void 0?_.orig_y:_.y;return Fz.extendFlat(r,{color:jke(a,_),x0:M-x,x1:M+x,xLabelVal:k,y0:w-x,y1:w+x,yLabelVal:L,spikeDistance:y(_),hovertemplate:a.hovertemplate}),Yke(_,a,r),Gke.getComponentMethod("errorbars","hoverInfo")(_,a,r),[r]}}if(c.indexOf("fills")!==-1&&a._polygons){var P=a._polygons,D=[],B=!1,z=1/0,R=-1/0,F=1/0,O=-1/0,q,H,j,X,G,$,te,ee,ie;for(q=0;q<P.length;q++)j=P[q],j.contains(v)&&(B=!B,D.push(j),F=Math.min(F,j.ymin),O=Math.max(O,j.ymax));if(B){F=Math.max(F,0),O=Math.min(O,u._length);var se=(F+O)/2;for(q=0;q<D.length;q++)for(X=D[q].pts,H=1;H<X.length;H++)ee=X[H-1][1],ie=X[H][1],ee>se!=ie>=se&&($=X[H-1][0],te=X[H][0],ie-ee&&(G=$+(te-$)*(se-ee)/(ie-ee),z=Math.min(z,G),R=Math.max(R,G)));z=Math.max(z,0),R=Math.min(R,l._length);var W=gA.defaultLine;return gA.opacity(a.fillcolor)?W=a.fillcolor:gA.opacity((a.line||{}).color)&&(W=a.line.color),Fz.extendFlat(r,{distance:r.maxHoverDistance,x0:z,x1:R,y0:se,y1:se,color:W,hovertemplate:!1}),delete r.index,a.text&&!Array.isArray(a.text)?r.text=String(a.text):r.text=a.name,[r]}}},"hoverPoints"),MH=ho,fx=t(function(r,n){var i=r.cd,s=r.xaxis,o=r.yaxis,a=[],l=i[0].trace,u,f,h,v,c=!MH.hasMarkers(l)&&!MH.hasText(l);if(c)return[];if(n===!1)for(u=0;u<i.length;u++)i[u].selected=0;else for(u=0;u<i.length;u++)f=i[u],h=s.c2p(f.x),v=o.c2p(f.y),f.i!==null&&n.contains([h,v],!1,u,r)?(a.push({pointNumber:f.i,x:s.c2d(f.x),y:o.c2d(f.y)}),f.selected=1):f.selected=0;return a},"selectPoints"),Ti={},yA,kH;function Gue(){return kH||(kH=1,yA={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's x coordinates and","a 2D cartesian x axis.","If *x* (the default value), the x coordinates refer to","`layout.xaxis`.","If *x2*, the x coordinates refer to `layout.xaxis2`, and so on."].join(" ")},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's y coordinates and","a 2D cartesian y axis.","If *y* (the default value), the y coordinates refer to","`layout.yaxis`.","If *y2*, the y coordinates refer to `layout.yaxis2`, and so on."].join(" ")}}),yA}t(Gue,"requireAttributes$M");var mA,EH;function jue(){if(EH)return mA;EH=1;var e=Na.traceIs,r=Q1();mA=t(function(l,u,f,h){f("autotypenumbers",h.autotypenumbersDflt);var v=f("type",(h.splomStash||{}).type);v==="-"&&(n(u,h.data),u.type==="-"?u.type="linear":l.type=u.type)},"handleTypeDefaults");function n(a,l){if(a.type==="-"){var u=a._id,f=u.charAt(0),h;u.indexOf("scene")!==-1&&(u=f);var v=i(l,u,f);if(!!v){if(v.type==="histogram"&&f==={v:"y",h:"x"}[v.orientation||"v"]){a.type="linear";return}var c=f+"calendar",d=v[c],g={noMultiCategory:!e(v,"cartesian")||e(v,"noMultiCategory")};if(v.type==="box"&&v._hasPreCompStats&&f==={h:"x",v:"y"}[v.orientation||"v"]&&(g.noMultiCategory=!0),g.autotypenumbers=a.autotypenumbers,o(v,f)){var p=s(v),b=[];for(h=0;h<l.length;h++){var m=l[h];!e(m,"box-violin")||(m[f+"axis"]||f)!==u||(m[p]!==void 0?b.push(m[p][0]):m.name!==void 0?b.push(m.name):b.push("text"),m[c]!==d&&(d=void 0))}a.type=r(b,d,g)}else if(v.type==="splom"){var y=v.dimensions,T=y[v._axesDim[u]];T.visible&&(a.type=r(T.values,d,g))}else a.type=r(v[f]||[v[f+"0"]],d,g)}}}t(n,"setAutoType");function i(a,l,u){for(var f=0;f<a.length;f++){var h=a[f];if(h.type==="splom"&&h._length>0&&(h["_"+u+"axes"]||{})[l])return h;if((h[u+"axis"]||u)===l){if(o(h,u))return h;if((h[u]||[]).length||h[u+"0"])return h}}}t(i,"getFirstNonEmptyTrace");function s(a){return{v:"x",h:"y"}[a.orientation||"v"]}t(s,"getBoxPosLetter");function o(a,l){var u=s(a),f=e(a,"box-violin"),h=e(a._fullInput||{},"candlestick");return f&&!h&&l===u&&a[u]===void 0&&a[u+"0"]===void 0}return t(o,"isBoxWithoutPositionCoords"),mA}t(jue,"requireType_defaults");function Wke(e,r){var n=r.dataAttr||e._id.charAt(0),i={},s,o,a;if(r.axData)s=r.axData;else for(s=[],o=0;o<r.data.length;o++){var l=r.data[o];l[n+"axis"]===e._id&&s.push(l)}for(o=0;o<s.length;o++){var u=s[o][n];for(a=0;a<u.length;a++){var f=u[a];f!=null&&(i[f]=1)}}return Object.keys(i)}t(Wke,"findCategories");var j8=t(function(r,n,i,s){if(n.type==="category"){var o=r.categoryarray,a=Array.isArray(o)&&o.length>0,l;a&&(l="array");var u=i("categoryorder",l),f;u==="array"&&(f=i("categoryarray")),!a&&u==="array"&&(u=n.categoryorder="trace"),u==="trace"?n._initialCategories=[]:u==="array"?n._initialCategories=f.slice():(f=Wke(n,s).sort(),u==="category ascending"?n._initialCategories=f:u==="category descending"&&(n._initialCategories=f.reverse()))}},"handleCategoryOrderDefaults"),CH=rl.exports.mix,Xke=Fo,Zke=Nt.exports,Lw=t(function(r,n,i,s){s=s||{};var o=s.dfltColor;function a(x,A){return Zke.coerce2(r,n,s.attributes,x,A)}t(a,"coerce2");var l=a("linecolor",o),u=a("linewidth"),f=i("showline",s.showLine||!!l||!!u);f||(delete n.linecolor,delete n.linewidth);var h=CH(o,s.bgColor,s.blend||Xke.lightFraction).toRgbString(),v=a("gridcolor",h),c=a("gridwidth"),d=a("griddash"),g=i("showgrid",s.showGrid||!!v||!!c||!!d);if(g||(delete n.gridcolor,delete n.gridwidth,delete n.griddash),s.hasMinor){var p=CH(n.gridcolor,s.bgColor,67).toRgbString(),b=a("minor.gridcolor",p),m=a("minor.gridwidth",n.gridwidth||1),y=a("minor.griddash",n.griddash||"solid"),T=i("minor.showgrid",!!b||!!m||!!y);T||(delete n.minor.gridcolor,delete n.minor.gridwidth,delete n.minor.griddash)}if(!s.noZeroLine){var _=a("zerolinecolor",o),M=a("zerolinewidth"),w=i("zeroline",s.showGrid||!!_||!!M);w||(delete n.zerolinecolor,delete n.zerolinewidth)}},"handleLineGridDefaults"),LH=xn,Kke=Na,Xm=Nt.exports,Jke=ei,Qke=mu,Bz=Jl,RH=ky,PH=J1,e5e=L0,t5e=R0,r5e=j8,a5e=Lw,DH=hd(),g_=al.WEEKDAY_PATTERN,n5e=al.HOUR_PATTERN,Rw=t(function(r,n,i,s,o){var a=s.letter,l=s.font||{},u=s.splomStash||{},f=i("visible",!s.visibleDflt),h=n._template||{},v=n.type||h.type||"-",c;if(v==="date"){var d=Kke.getComponentMethod("calendars","handleDefaults");d(r,n,"calendar",s.calendar),s.noTicklabelmode||(c=i("ticklabelmode"))}var g="";(!s.noTicklabelposition||v==="multicategory")&&(g=Xm.coerce(r,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c==="period"?["outside","inside"]:a==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),s.noTicklabeloverflow||i("ticklabeloverflow",g.indexOf("inside")!==-1?"hide past domain":v==="category"||v==="multicategory"?"allow":"hide past div"),DH(n,o);var p=!n.isValidRange(r.range);p&&s.reverseDflt&&(p="reversed");var b=i("autorange",p);b&&(v==="linear"||v==="-")&&i("rangemode"),i("range"),n.cleanRange(),r5e(r,n,i,s),v!=="category"&&!s.noHover&&i("hoverformat");var m=i("color"),y=m!==Bz.color.dflt?m:l.color,T=u.label||o._dfltTitle[a];if(t5e(r,n,i,v,s),!f)return n;i("title.text",T),Xm.coerceFont(i,"title.font",{family:l.family,size:Xm.bigFont(l.size),color:y}),RH(r,n,i,v);var _=s.hasMinor;if(_&&(Jke.newContainer(n,"minor"),RH(r,n,i,v,{isMinor:!0})),e5e(r,n,i,v,s),PH(r,n,i,s),_){var M=s.isMinor;s.isMinor=!0,PH(r,n,i,s),s.isMinor=M}a5e(r,n,i,{dfltColor:m,bgColor:s.bgColor,showGrid:s.showGrid,hasMinor:_,attributes:Bz}),_&&!n.minor.ticks&&!n.minor.showgrid&&delete n.minor,(n.showline||n.ticks)&&i("mirror"),s.automargin&&i("automargin");var w=v==="multicategory";if(!s.noTickson&&(v==="category"||w)&&(n.ticks||n.showgrid)){var x;w&&(x="boundaries");var A=i("tickson",x);A==="boundaries"&&delete n.ticklabelposition}if(w){var S=i("showdividers");S&&(i("dividercolor"),i("dividerwidth"))}if(v==="date")if(Qke(r,n,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:i5e}),!n.rangebreaks.length)delete n.rangebreaks;else{for(var k=0;k<n.rangebreaks.length;k++)if(n.rangebreaks[k].pattern===g_){n._hasDayOfWeekBreaks=!0;break}if(DH(n,o),o._has("scattergl")||o._has("splom"))for(var L=0;L<s.data.length;L++){var P=s.data[L];(P.type==="scattergl"||P.type==="splom")&&(P.visible=!1,Xm.warn(P.type+" traces do not work on axes with rangebreaks. Setting trace "+P.index+" to `visible: false`."))}}return n},"handleAxisDefaults");function i5e(e,r,n){function i(c,d){return Xm.coerce(e,r,Bz.rangebreaks,c,d)}t(i,"coerce");var s=i("enabled");if(s){var o=i("bounds");if(o&&o.length>=2){var a="",l,u;if(o.length===2){for(l=0;l<2;l++)if(u=IH(o[l]),u){a=g_;break}}var f=i("pattern",a);if(f===g_)for(l=0;l<2;l++)u=IH(o[l]),u&&(r.bounds[l]=o[l]=u-1);if(f)for(l=0;l<2;l++)switch(u=o[l],f){case g_:if(!LH(u)){r.enabled=!1;return}if(u=+u,u!==Math.floor(u)||u<0||u>=7){r.enabled=!1;return}r.bounds[l]=o[l]=u;break;case n5e:if(!LH(u)){r.enabled=!1;return}if(u=+u,u<0||u>24){r.enabled=!1;return}r.bounds[l]=o[l]=u;break}if(n.autorange===!1){var h=n.range;if(h[0]<h[1]){if(o[0]<h[0]&&o[1]>h[1]){r.enabled=!1;return}}else if(o[0]>h[0]&&o[1]<h[1]){r.enabled=!1;return}}}else{var v=i("values");if(v&&v.length)i("dvalue");else{r.enabled=!1;return}}}}t(i5e,"rangebreaksDefaults");var o5e={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function IH(e){if(typeof e=="string")return o5e[e.substr(0,3).toLowerCase()]}t(IH,"indexOfDay");var s5e=xn,kb=Nt.exports,Y8=t(function(r,n,i,s){var o=s.counterAxes||[],a=s.overlayableAxes||[],l=s.letter,u=s.grid,f,h,v,c;u&&(h=u._domains[l][u._axisMap[n._id]],f=u._anchors[n._id],h&&(v=u[l+"side"].split(" ")[0],c=u.domain[l][v==="right"||v==="top"?1:0])),h=h||[0,1],f=f||(s5e(r.position)?"free":o[0]||"free"),v=v||(l==="x"?"bottom":"left"),c=c||0;var d=kb.coerce(r,n,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:f}},"anchor");d==="free"&&i("position",c),kb.coerce(r,n,{side:{valType:"enumerated",values:l==="x"?["bottom","top"]:["left","right"],dflt:v}},"side");var g=!1;if(a.length&&(g=kb.coerce(r,n,{overlaying:{valType:"enumerated",values:[!1].concat(a),dflt:!1}},"overlaying")),!g){var p=i("domain",h);p[0]>p[1]-1/4096&&(n.domain=h),kb.noneOrAll(r.domain,n.domain,h)}return i("layer"),n},"handlePositionDefaults"),xA,zH;function l5e(){if(zH)return xA;zH=1;var e=Nt.exports,r=$a.exports,n=Rf.isUnifiedHover,i=ple,s=ei,o=Ty,a=Jl,l=jue(),u=Rw,f=I0(),h=Y8,v=$o,c=v.id2name,d=v.name2id,g=al.AX_ID_PATTERN,p=Na,b=p.traceIs,m=p.getComponentMethod;function y(T,_,M){Array.isArray(T[_])?T[_].push(M):T[_]=[M]}return t(y,"appendList"),xA=t(function(_,M,w){var x=M.autotypenumbers,A={},S={},k={},L={},P={},D={},B={},z={},R={},F={},O,q;for(O=0;O<w.length;O++){var H=w[O];if(!(!b(H,"cartesian")&&!b(H,"gl2d"))){var j;if(H.xaxis)j=c(H.xaxis),y(A,j,H);else if(H.xaxes)for(q=0;q<H.xaxes.length;q++)y(A,c(H.xaxes[q]),H);var X;if(H.yaxis)X=c(H.yaxis),y(A,X,H);else if(H.yaxes)for(q=0;q<H.yaxes.length;q++)y(A,c(H.yaxes[q]),H);if(H.type==="funnel"?H.orientation==="h"?(j&&(S[j]=!0),X&&(B[X]=!0)):X&&(k[X]=!0):H.type==="image"?(X&&(z[X]=!0),j&&(z[j]=!0)):(X&&(P[X]=!0,D[X]=!0),(!b(H,"carpet")||H.type==="carpet"&&!H._cheater)&&j&&(L[j]=!0)),H.type==="carpet"&&H._cheater&&j&&(S[j]=!0),b(H,"2dMap")&&(R[j]=!0,R[X]=!0),b(H,"oriented")){var G=H.orientation==="h"?X:j;F[G]=!0}}}var $=M._subplots,te=$.xaxis,ee=$.yaxis,ie=e.simpleMap(te,c),se=e.simpleMap(ee,c),W=ie.concat(se),ne=r.background;te.length&&ee.length&&(ne=e.coerce(_,M,o,"plot_bgcolor"));var he=r.combine(ne,M.paper_bgcolor),re,ae,fe,ce,xe;function Te(){var Et=A[re]||[];xe._traceIndices=Et.map(function(Wt){return Wt._expandedIndex}),xe._annIndices=[],xe._shapeIndices=[],xe._selectionIndices=[],xe._imgIndices=[],xe._subplotsWith=[],xe._counterAxes=[],xe._name=xe._attr=re,xe._id=ae}t(Te,"newAxLayoutOut");function me(Et,Wt){return e.coerce(ce,xe,a,Et,Wt)}t(me,"coerce");function pe(Et,Wt){return e.coerce2(ce,xe,a,Et,Wt)}t(pe,"coerce2");function oe(Et){return Et==="x"?ee:te}t(oe,"getCounterAxes");function de(Et,Wt){for(var ze=Et==="x"?ie:se,tt=[],at=0;at<ze.length;at++){var vt=ze[at];vt!==Wt&&!(_[vt]||{}).overlaying&&tt.push(d(vt))}return tt}t(de,"getOverlayableAxes");var ye={x:oe("x"),y:oe("y")},we=ye.x.concat(ye.y),Ee={},De=[];function Fe(){var Et=ce.matches;g.test(Et)&&we.indexOf(Et)===-1&&(Ee[Et]=ce.type,De=Object.keys(Ee))}t(Fe,"addMissingMatchedAxis");var qe=i(_,M),Je=n(qe);for(O=0;O<W.length;O++){re=W[O],ae=d(re),fe=re.charAt(0),e.isPlainObject(_[re])||(_[re]={}),ce=_[re],xe=s.newContainer(M,re,fe+"axis"),Te();var Ge=fe==="x"&&!L[re]&&S[re]||fe==="y"&&!P[re]&&k[re],et=fe==="y"&&(!D[re]&&B[re]||z[re]),Ue={hasMinor:!0,letter:fe,font:M.font,outerTicks:R[re],showGrid:!F[re],data:A[re]||[],bgColor:he,calendar:M.calendar,automargin:!0,visibleDflt:Ge,reverseDflt:et,autotypenumbersDflt:x,splomStash:((M._splomAxes||{})[fe]||{})[ae]};me("uirevision",M.uirevision),l(ce,xe,me,Ue),u(ce,xe,me,Ue,M);var Ye=Je&&fe===qe.charAt(0),$e=pe("spikecolor",Je?xe.color:void 0),Ct=pe("spikethickness",Je?1.5:void 0),It=pe("spikedash",Je?"dot":void 0),Vt=pe("spikemode",Je?"across":void 0),$t=pe("spikesnap"),Gt=me("showspikes",!!Ye||!!$e||!!Ct||!!It||!!Vt||!!$t);Gt||(delete xe.spikecolor,delete xe.spikethickness,delete xe.spikedash,delete xe.spikemode,delete xe.spikesnap),h(ce,xe,me,{letter:fe,counterAxes:ye[fe],overlayableAxes:de(fe,re),grid:M.grid}),me("title.standoff"),Fe(),xe._input=ce}for(O=0;O<De.length;){ae=De[O++],re=c(ae),fe=re.charAt(0),e.isPlainObject(_[re])||(_[re]={}),ce=_[re],xe=s.newContainer(M,re,fe+"axis"),Te();var Jt={letter:fe,font:M.font,outerTicks:R[re],showGrid:!F[re],data:[],bgColor:he,calendar:M.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:x,splomStash:((M._splomAxes||{})[fe]||{})[ae]};me("uirevision",M.uirevision),xe.type=Ee[ae]||"linear",u(ce,xe,me,Jt,M),h(ce,xe,me,{letter:fe,counterAxes:ye[fe],overlayableAxes:de(fe,re),grid:M.grid}),me("fixedrange"),Fe(),xe._input=ce}var kt=m("rangeslider","handleDefaults"),ft=m("rangeselector","handleDefaults");for(O=0;O<ie.length;O++)re=ie[O],ce=_[re],xe=M[re],kt(_,M,re),xe.type==="date"&&ft(ce,xe,M,se,xe.calendar),me("fixedrange");for(O=0;O<se.length;O++){re=se[O],ce=_[re],xe=M[re];var zt=M[c(xe.anchor)],Pt=m("rangeslider","isVisible")(zt);me("fixedrange",Pt)}f.handleDefaults(_,M,{axIds:we.concat(De).sort(v.idSort),axHasImage:z})},"supplyLayoutDefaults"),xA}t(l5e,"requireLayout_defaults$g");var bA,FH;function u5e(){if(FH)return bA;FH=1;var e=Va.exports,r=Na,n=Nt.exports,i=bn.exports,s=nn();return bA=t(function(a,l,u,f){var h=a._fullLayout;if(l.length===0){s.redrawComponents(a);return}function v(M){var w=M.xaxis,x=M.yaxis;h._defs.select("#"+M.clipId+"> rect").call(i.setTranslate,0,0).call(i.setScale,1,1),M.plot.call(i.setTranslate,w._offset,x._offset).call(i.setScale,1,1);var A=M.plot.selectAll(".scatterlayer .trace");A.selectAll(".point").call(i.setPointGroupScale,1,1),A.selectAll(".textpoint").call(i.setTextPointsScale,1,1),A.call(i.hideOutsideRangePoints,M)}t(v,"unsetSubplotTransform");function c(M,w){var x=M.plotinfo,A=x.xaxis,S=x.yaxis,k=A._length,L=S._length,P=!!M.xr1,D=!!M.yr1,B=[];if(P){var z=n.simpleMap(M.xr0,A.r2l),R=n.simpleMap(M.xr1,A.r2l),F=z[1]-z[0],O=R[1]-R[0];B[0]=(z[0]*(1-w)+w*R[0]-z[0])/(z[1]-z[0])*k,B[2]=k*(1-w+w*O/F),A.range[0]=A.l2r(z[0]*(1-w)+w*R[0]),A.range[1]=A.l2r(z[1]*(1-w)+w*R[1])}else B[0]=0,B[2]=k;if(D){var q=n.simpleMap(M.yr0,S.r2l),H=n.simpleMap(M.yr1,S.r2l),j=q[1]-q[0],X=H[1]-H[0];B[1]=(q[1]*(1-w)+w*H[1]-q[1])/(q[0]-q[1])*L,B[3]=L*(1-w+w*X/j),S.range[0]=A.l2r(q[0]*(1-w)+w*H[0]),S.range[1]=S.l2r(q[1]*(1-w)+w*H[1])}else B[1]=0,B[3]=L;s.drawOne(a,A,{skipTitle:!0}),s.drawOne(a,S,{skipTitle:!0}),s.redrawComponents(a,[A._id,S._id]);var G=P?k/B[2]:1,$=D?L/B[3]:1,te=P?B[0]:0,ee=D?B[1]:0,ie=P?B[0]/B[2]*k:0,se=D?B[1]/B[3]*L:0,W=A._offset-ie,ne=S._offset-se;x.clipRect.call(i.setTranslate,te,ee).call(i.setScale,1/G,1/$),x.plot.call(i.setTranslate,W,ne).call(i.setScale,G,$),i.setPointGroupScale(x.zoomScalePts,1/G,1/$),i.setTextPointsScale(x.zoomScaleTxt,1/G,1/$)}t(c,"updateSubplot");var d;f&&(d=f());function g(){for(var M={},w=0;w<l.length;w++){var x=l[w],A=x.plotinfo.xaxis,S=x.plotinfo.yaxis;x.xr1&&(M[A._name+".range"]=x.xr1.slice()),x.yr1&&(M[S._name+".range"]=x.yr1.slice())}return d&&d(),r.call("relayout",a,M).then(function(){for(var k=0;k<l.length;k++)v(l[k].plotinfo)})}t(g,"transitionComplete");function p(){for(var M={},w=0;w<l.length;w++){var x=l[w],A=x.plotinfo.xaxis,S=x.plotinfo.yaxis;x.xr0&&(M[A._name+".range"]=x.xr0.slice()),x.yr0&&(M[S._name+".range"]=x.yr0.slice())}return r.call("relayout",a,M).then(function(){for(var k=0;k<l.length;k++)v(l[k].plotinfo)})}t(p,"transitionInterrupt");var b,m,y,T=e.ease(u.easing);a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(y),y=null,p()});function _(){m=Date.now();for(var M=Math.min(1,(m-b)/u.duration),w=T(M),x=0;x<l.length;x++)c(l[x],w);m-b>u.duration?(g(),y=window.cancelAnimationFrame(_)):y=window.requestAnimationFrame(_)}return t(_,"doFrame"),b=Date.now(),y=window.requestAnimationFrame(_),Promise.resolve()},"transitionAxes"),bA}t(u5e,"requireTransition_axes");var Pw=Va.exports,BH=Na,j_=Nt.exports,f5e=so.exports,c5e=bn.exports,OH=Ns.getModuleCalcData,ap=$o,lv=al,h5e=ic,Oi=j_.ensureSingle;function Eb(e,r,n){return j_.ensureSingle(e,r,n,function(i){i.datum(n)})}t(Eb,"ensureSingleAndAddDatum");Ti.name="cartesian";Ti.attr=["xaxis","yaxis"];Ti.idRoot=["x","y"];Ti.idRegex=lv.idRegex;Ti.attrRegex=lv.attrRegex;Ti.attributes=Gue();Ti.layoutAttributes=Jl;Ti.supplyLayoutDefaults=l5e();Ti.transitionAxes=u5e();Ti.finalizeSubplots=function(e,r){var n=r._subplots,i=n.xaxis,s=n.yaxis,o=n.cartesian,a=o.concat(n.gl2d||[]),l={},u={},f,h,v;for(f=0;f<a.length;f++){var c=a[f].split("y");l[c[0]]=1,u["y"+c[1]]=1}for(f=0;f<i.length;f++)h=i[f],l[h]||(v=(e[ap.id2name(h)]||{}).anchor,lv.idRegex.y.test(v)||(v="y"),o.push(h+v),a.push(h+v),u[v]||(u[v]=1,j_.pushUnique(s,v)));for(f=0;f<s.length;f++)v=s[f],u[v]||(h=(e[ap.id2name(v)]||{}).anchor,lv.idRegex.x.test(h)||(h="x"),o.push(h+v),a.push(h+v),l[h]||(l[h]=1,j_.pushUnique(i,h)));if(!a.length){h="",v="";for(var d in e)if(lv.attrRegex.test(d)){var g=d.charAt(0);g==="x"?(!h||+d.substr(5)<+h.substr(5))&&(h=d):(!v||+d.substr(5)<+v.substr(5))&&(v=d)}h=h?ap.name2id(h):"x",v=v?ap.name2id(v):"y",i.push(h),s.push(v),o.push(h+v)}};Ti.plot=function(e,r,n,i){var s=e._fullLayout,o=s._subplots.cartesian,a=e.calcdata,l;if(!Array.isArray(r))for(r=[],l=0;l<a.length;l++)r.push(l);for(l=0;l<o.length;l++){for(var u=o[l],f=s._plots[u],h=[],v,c=0;c<a.length;c++){var d=a[c],g=d[0].trace;g.xaxis+g.yaxis===u&&((r.indexOf(g.index)!==-1||g.carpet)&&(v&&v[0].trace.xaxis+v[0].trace.yaxis===u&&["tonextx","tonexty","tonext"].indexOf(g.fill)!==-1&&h.indexOf(v)===-1&&h.push(v),h.push(d)),v=d)}Yue(e,f,h,n,i)}};function Yue(e,r,n,i,s){for(var o=lv.traceLayerClasses,a=e._fullLayout,l=a._modules,u,f,h,v=[],c=[],d=0;d<l.length;d++){u=l[d];var g=u.name,p=BH.modules[g].categories;if(p.svg){var b=u.layerName||g+"layer",m=u.plot;f=OH(n,m),h=f[0],n=f[1],h.length&&v.push({i:o.indexOf(b),className:b,plotMethod:m,cdModule:h}),p.zoomScale&&c.push("."+b)}}v.sort(function(_,M){return _.i-M.i});var y=r.plot.selectAll("g.mlayer").data(v,function(_){return _.className});if(y.enter().append("g").attr("class",function(_){return _.className}).classed("mlayer",!0).classed("rangeplot",r.isRangePlot),y.exit().remove(),y.order(),y.each(function(_){var M=Pw.select(this),w=_.className;_.plotMethod(e,r,_.cdModule,M,i,s),lv.clipOnAxisFalseQuery.indexOf("."+w)===-1&&c5e.setClipUrl(M,r.layerClipId,e)}),a._has("scattergl")&&(u=BH.getModule("scattergl"),h=OH(n,u)[0],u.plot(e,r,h)),!e._context.staticPlot&&(r._hasClipOnAxisFalse&&(r.clipOnAxisFalseTraces=r.plot.selectAll(lv.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),c.length)){var T=r.plot.selectAll(c.join(",")).selectAll(".trace");r.zoomScalePts=T.selectAll("path.point"),r.zoomScaleTxt=T.selectAll(".textpoint")}}t(Yue,"plotOne");Ti.clean=function(e,r,n,i){var s=i._plots||{},o=r._plots||{},a=i._subplots||{},l,u,f;if(i._hasOnlyLargeSploms&&!r._hasOnlyLargeSploms)for(f in s)l=s[f],l.plotgroup&&l.plotgroup.remove();var h=i._has&&i._has("gl"),v=r._has&&r._has("gl");if(h&&!v)for(f in s)l=s[f],l._scene&&l._scene.destroy();if(a.xaxis&&a.yaxis){var c=ap.listIds({_fullLayout:i});for(u=0;u<c.length;u++){var d=c[u];r[ap.id2name(d)]||i._infolayer.selectAll(".g-"+d+"title").remove()}}var g=i._has&&i._has("cartesian"),p=r._has&&r._has("cartesian");if(g&&!p)Xue(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups,delete i._axisMatchGroups;else if(a.cartesian)for(u=0;u<a.cartesian.length;u++){var b=a.cartesian[u];if(!o[b]){var m="."+b+",."+b+"-x,."+b+"-y";i._cartesianlayer.selectAll(m).remove(),Zue(b,i)}}};Ti.drawFramework=function(e){var r=e._fullLayout,n=v5e(e),i=r._cartesianlayer.selectAll(".subplot").data(n,String);i.enter().append("g").attr("class",function(s){return"subplot "+s[0]}),i.order(),i.exit().call(Xue,r),i.each(function(s){var o=s[0],a=r._plots[o];a.plotgroup=Pw.select(this),Wue(e,a),a.draglayer=Oi(r._draggers,"g",o)})};Ti.rangePlot=function(e,r,n){Wue(e,r),Yue(e,r,n),f5e.style(e)};function v5e(e){var r=e._fullLayout,n=r._subplots.cartesian,i=n.length,s,o,a,l,u,f,h=[],v=[];for(s=0;s<i;s++){a=n[s],l=r._plots[a],u=l.xaxis,f=l.yaxis;var c=u._mainAxis,d=f._mainAxis,g=c._id+d._id,p=r._plots[g];l.overlays=[],g!==a&&p?(l.mainplot=g,l.mainplotinfo=p,v.push(a)):(l.mainplot=void 0,l.mainplotinfo=void 0,h.push(a))}for(s=0;s<v.length;s++)a=v[s],l=r._plots[a],l.mainplotinfo.overlays.push(l);var b=h.concat(v),m=new Array(i);for(s=0;s<i;s++){a=b[s],l=r._plots[a],u=l.xaxis,f=l.yaxis;var y=[a,u.layer,f.layer,u.overlaying||"",f.overlaying||""];for(o=0;o<l.overlays.length;o++)y.push(l.overlays[o].id);m[s]=y}return m}t(v5e,"makeSubplotData");function Wue(e,r){var n=r.plotgroup,i=r.id,s=lv.layerValue2layerClass[r.xaxis.layer],o=lv.layerValue2layerClass[r.yaxis.layer],a=e._fullLayout._hasOnlyLargeSploms;if(r.mainplot){var u=r.mainplotinfo,f=u.plotgroup,h=i+"-x",v=i+"-y";r.minorGridlayer=u.minorGridlayer,r.gridlayer=u.gridlayer,r.zerolinelayer=u.zerolinelayer,Oi(u.overlinesBelow,"path",h),Oi(u.overlinesBelow,"path",v),Oi(u.overaxesBelow,"g",h),Oi(u.overaxesBelow,"g",v),r.plot=Oi(u.overplot,"g",i),Oi(u.overlinesAbove,"path",h),Oi(u.overlinesAbove,"path",v),Oi(u.overaxesAbove,"g",h),Oi(u.overaxesAbove,"g",v),r.xlines=f.select(".overlines-"+s).select("."+h),r.ylines=f.select(".overlines-"+o).select("."+v),r.xaxislayer=f.select(".overaxes-"+s).select("."+h),r.yaxislayer=f.select(".overaxes-"+o).select("."+v)}else if(a)r.xlines=Oi(n,"path","xlines-above"),r.ylines=Oi(n,"path","ylines-above"),r.xaxislayer=Oi(n,"g","xaxislayer-above"),r.yaxislayer=Oi(n,"g","yaxislayer-above");else{var l=Oi(n,"g","layer-subplot");r.shapelayer=Oi(l,"g","shapelayer"),r.imagelayer=Oi(l,"g","imagelayer"),r.minorGridlayer=Oi(n,"g","minor-gridlayer"),r.gridlayer=Oi(n,"g","gridlayer"),r.zerolinelayer=Oi(n,"g","zerolinelayer"),Oi(n,"path","xlines-below"),Oi(n,"path","ylines-below"),r.overlinesBelow=Oi(n,"g","overlines-below"),Oi(n,"g","xaxislayer-below"),Oi(n,"g","yaxislayer-below"),r.overaxesBelow=Oi(n,"g","overaxes-below"),r.plot=Oi(n,"g","plot"),r.overplot=Oi(n,"g","overplot"),r.xlines=Oi(n,"path","xlines-above"),r.ylines=Oi(n,"path","ylines-above"),r.overlinesAbove=Oi(n,"g","overlines-above"),Oi(n,"g","xaxislayer-above"),Oi(n,"g","yaxislayer-above"),r.overaxesAbove=Oi(n,"g","overaxes-above"),r.xlines=n.select(".xlines-"+s),r.ylines=n.select(".ylines-"+o),r.xaxislayer=n.select(".xaxislayer-"+s),r.yaxislayer=n.select(".yaxislayer-"+o)}a||(Eb(r.minorGridlayer,"g",r.xaxis._id),Eb(r.minorGridlayer,"g",r.yaxis._id),r.minorGridlayer.selectAll("g").map(function(c){return c[0]}).sort(ap.idSort),Eb(r.gridlayer,"g",r.xaxis._id),Eb(r.gridlayer,"g",r.yaxis._id),r.gridlayer.selectAll("g").map(function(c){return c[0]}).sort(ap.idSort)),r.xlines.style("fill","none").classed("crisp",!0),r.ylines.style("fill","none").classed("crisp",!0)}t(Wue,"makeSubplotLayer");function Xue(e,r){if(!!e){var n={};e.each(function(u){var f=u[0],h=Pw.select(this);h.remove(),Zue(f,r),n[f]=!0});for(var i in r._plots)for(var s=r._plots[i],o=s.overlays||[],a=0;a<o.length;a++){var l=o[a];n[l.id]&&l.plot.selectAll(".trace").remove()}}}t(Xue,"purgeSubplotLayers");function Zue(e,r){r._draggers.selectAll("g."+e).remove(),r._defs.select("#clip"+r._uid+e+"plot").remove()}t(Zue,"removeSubplotExtras");Ti.toSVG=function(e){var r=e._fullLayout._glimages,n=Pw.select(e).selectAll(".svg-container"),i=n.filter(function(o,a){return a===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function s(){var o=this,a=o.toDataURL("image/png"),l=r.append("svg:image");l.attr({xmlns:h5e.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:o.style.width,height:o.style.height})}t(s,"canvasToImage"),i.each(s)};Ti.updateFx=c8.updateFx;var Cb=ho,d5e={hasLines:Cb.hasLines,hasMarkers:Cb.hasMarkers,hasText:Cb.hasText,isBubble:Cb.isBubble,attributes:Ps,supplyDefaults:wke,crossTraceDefaults:Iue,calc:kh.calc,crossTraceCalc:Rke,arraysToCalcdata:pd,plot:sx,colorbar:_u,formatLabels:$8,style:kf.style,styleOnSelect:kf.styleOnSelect,hoverPoints:ux,selectPoints:fx,animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:Ti,categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}},p5e={moduleType:"component",name:"legend",layoutAttributes:ale,supplyLayoutDefaults:nle,draw:sle,style:ole},g5e=Va.exports,y5e=$a.exports,NH=lue,W8=Nt.exports,m5e=W8.strScale,x5e=W8.strRotate,b5e=W8.strTranslate,_5e=t(function(r,n,i){var s=r.node(),o=NH[i.arrowhead||0],a=NH[i.startarrowhead||0],l=(i.arrowwidth||1)*(i.arrowsize||1),u=(i.arrowwidth||1)*(i.startarrowsize||1),f=n.indexOf("start")>=0,h=n.indexOf("end")>=0,v=o.backoff*l+i.standoff,c=a.backoff*u+i.startstandoff,d,g,p,b;if(s.nodeName==="line"){d={x:+r.attr("x1"),y:+r.attr("y1")},g={x:+r.attr("x2"),y:+r.attr("y2")};var m=d.x-g.x,y=d.y-g.y;if(p=Math.atan2(y,m),b=p+Math.PI,v&&c&&v+c>Math.sqrt(m*m+y*y)){B();return}if(v){if(v*v>m*m+y*y){B();return}var T=v*Math.cos(p),_=v*Math.sin(p);g.x+=T,g.y+=_,r.attr({x2:g.x,y2:g.y})}if(c){if(c*c>m*m+y*y){B();return}var M=c*Math.cos(p),w=c*Math.sin(p);d.x-=M,d.y-=w,r.attr({x1:d.x,y1:d.y})}}else if(s.nodeName==="path"){var x=s.getTotalLength(),A="";if(x<v+c){B();return}var S=s.getPointAtLength(0),k=s.getPointAtLength(.1);p=Math.atan2(S.y-k.y,S.x-k.x),d=s.getPointAtLength(Math.min(c,x)),A="0px,"+c+"px,";var L=s.getPointAtLength(x),P=s.getPointAtLength(x-.1);b=Math.atan2(L.y-P.y,L.x-P.x),g=s.getPointAtLength(Math.max(0,x-v));var D=A?c+v:v;A+=x-D+"px,"+x+"px",r.style("stroke-dasharray",A)}function B(){r.style("stroke-dasharray","0px,100px")}t(B,"hideLine");function z(R,F,O,q){!R.path||(R.noRotate&&(O=0),g5e.select(s.parentNode).append("path").attr({class:r.attr("class"),d:R.path,transform:b5e(F.x,F.y)+x5e(O*180/Math.PI)+m5e(q)}).style({fill:y5e.rgb(i.arrowcolor),"stroke-width":0}))}t(z,"drawhead"),f&&z(a,d,p,u),h&&z(o,g,b,l)},"drawArrowHead"),qH=Va.exports,_A=Na,w5e=so.exports,Xd=Nt.exports,wA=Xd.strTranslate,P1=nn(),Wp=$a.exports,td=bn.exports,UH=Ko,TA=Ji,AA=pv,zm=xu.exports,T5e=ei.arrayEditor,A5e=_5e,X8={draw:S5e,drawOne:Kue,drawRaw:Jue};function S5e(e){var r=e._fullLayout;r._infolayer.selectAll(".annotation").remove();for(var n=0;n<r.annotations.length;n++)r.annotations[n].visible&&Kue(e,n);return w5e.previousPromises(e)}t(S5e,"draw$9");function Kue(e,r){var n=e._fullLayout,i=n.annotations[r]||{},s=P1.getFromId(e,i.xref),o=P1.getFromId(e,i.yref);s&&s.setScale(),o&&o.setScale(),Jue(e,i,r,!1,s,o)}t(Kue,"drawOne");function Gd(e,r,n,i,s){var o=s[n],a=s[n+"ref"],l=n.indexOf("y")!==-1,u=P1.getRefType(a)==="domain",f=l?i.h:i.w;return e?u?o+(l?-r:r)/e._length:e.p2r(e.r2p(o)+r):o+(l?-r:r)/f}t(Gd,"shiftPosition");function Jue(e,r,n,i,s,o){var a=e._fullLayout,l=e._fullLayout._size,u=e._context.edits,f,h;i?(f="annotation-"+i,h=i+".annotations"):(f="annotation",h="annotations");var v=T5e(e.layout,h,r),c=v.modifyBase,d=v.modifyItem,g=v.getUpdateObj;a._infolayer.selectAll("."+f+'[data-index="'+n+'"]').remove();var p="clip"+a._uid+"_ann"+n;if(!r._input||r.visible===!1){qH.selectAll("#"+p).remove();return}var b={x:{},y:{}},m=+r.textangle||0,y=a._infolayer.append("g").classed(f,!0).attr("data-index",String(n)).style("opacity",r.opacity),T=y.append("g").classed("annotation-text-g",!0),_=u[r.showarrow?"annotationTail":"annotationPosition"],M=r.captureevents||u.annotationText||_;function w(q){var H={index:n,annotation:r._input,fullAnnotation:r,event:q};return i&&(H.subplotId=i),H}t(w,"makeEventData");var x=T.append("g").style("pointer-events",M?"all":null).call(AA,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",w(qH.event))});r.hovertext&&x.on("mouseover",function(){var q=r.hoverlabel,H=q.font,j=this.getBoundingClientRect(),X=e.getBoundingClientRect();UH.loneHover({x0:j.left-X.left,x1:j.right-X.left,y:(j.top+j.bottom)/2-X.top,text:r.hovertext,color:q.bgcolor,borderColor:q.bordercolor,fontFamily:H.family,fontSize:H.size,fontColor:H.color},{container:a._hoverlayer.node(),outerContainer:a._paper.node(),gd:e})}).on("mouseout",function(){UH.loneUnhover(a._hoverlayer.node())});var A=r.borderwidth,S=r.borderpad,k=A+S,L=x.append("rect").attr("class","bg").style("stroke-width",A+"px").call(Wp.stroke,r.bordercolor).call(Wp.fill,r.bgcolor),P=r.width||r.height,D=a._topclips.selectAll("#"+p).data(P?[0]:[]);D.enter().append("clipPath").classed("annclip",!0).attr("id",p).append("rect"),D.exit().remove();var B=r.font,z=a._meta?Xd.templateString(r.text,a._meta):r.text,R=x.append("text").classed("annotation-text",!0).text(z);function F(q){return q.call(td.font,B).attr({"text-anchor":{left:"start",right:"end"}[r.align]||"middle"}),TA.convertToTspans(q,e,O),q}t(F,"textLayout");function O(){var q=R.selectAll("a");if(q.size()===1&&q.text()===R.text()){var H=x.insert("a",":first-child").attr({"xlink:xlink:href":q.attr("xlink:href"),"xlink:xlink:show":q.attr("xlink:show")}).style({cursor:"pointer"});H.node().appendChild(L.node())}var j=x.select(".annotation-text-math-group"),X=!j.empty(),G=td.bBox((X?j:R).node()),$=G.width,te=G.height,ee=r.width||$,ie=r.height||te,se=Math.round(ee+2*k),W=Math.round(ie+2*k);function ne(Et,Wt){return Wt==="auto"&&(Et<1/3?Wt="left":Et>2/3?Wt="right":Wt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Wt]}t(ne,"shiftFraction");for(var he=!1,re=["x","y"],ae=0;ae<re.length;ae++){var fe=re[ae],ce=r[fe+"ref"]||fe,xe=r["a"+fe+"ref"],Te={x:s,y:o}[fe],me=(m+(fe==="x"?0:-90))*Math.PI/180,pe=se*Math.cos(me),oe=W*Math.sin(me),de=Math.abs(pe)+Math.abs(oe),ye=r[fe+"anchor"],we=r[fe+"shift"]*(fe==="x"?1:-1),Ee=b[fe],De,Fe,qe,Je,Ge,et=P1.getRefType(ce);if(Te&&et!=="domain"){var Ue=Te.r2fraction(r[fe]);(Ue<0||Ue>1)&&(xe===ce?(Ue=Te.r2fraction(r["a"+fe]),(Ue<0||Ue>1)&&(he=!0)):he=!0),De=Te._offset+Te.r2p(r[fe]),Je=.5}else{var Ye=et==="domain";fe==="x"?(qe=r[fe],De=Ye?Te._offset+Te._length*qe:De=l.l+l.w*qe):(qe=1-r[fe],De=Ye?Te._offset+Te._length*qe:De=l.t+l.h*qe),Je=r.showarrow?.5:qe}if(r.showarrow){Ee.head=De;var $e=r["a"+fe];if(Ge=pe*ne(.5,r.xanchor)-oe*ne(.5,r.yanchor),xe===ce){var Ct=P1.getRefType(xe);Ct==="domain"?(fe==="y"&&($e=1-$e),Ee.tail=Te._offset+Te._length*$e):Ct==="paper"?fe==="y"?($e=1-$e,Ee.tail=l.t+l.h*$e):Ee.tail=l.l+l.w*$e:Ee.tail=Te._offset+Te.r2p($e),Fe=Ge}else Ee.tail=De+$e,Fe=Ge+$e;Ee.text=Ee.tail+Ge;var It=a[fe==="x"?"width":"height"];if(ce==="paper"&&(Ee.head=Xd.constrain(Ee.head,1,It-1)),xe==="pixel"){var Vt=-Math.max(Ee.tail-3,Ee.text),$t=Math.min(Ee.tail+3,Ee.text)-It;Vt>0?(Ee.tail+=Vt,Ee.text+=Vt):$t>0&&(Ee.tail-=$t,Ee.text-=$t)}Ee.tail+=we,Ee.head+=we}else Ge=de*ne(Je,ye),Fe=Ge,Ee.text=De+Ge;Ee.text+=we,Ge+=we,Fe+=we,r["_"+fe+"padplus"]=de/2+Fe,r["_"+fe+"padminus"]=de/2-Fe,r["_"+fe+"size"]=de,r["_"+fe+"shift"]=Ge}if(he){x.remove();return}var Gt=0,Jt=0;if(r.align!=="left"&&(Gt=(ee-$)*(r.align==="center"?.5:1)),r.valign!=="top"&&(Jt=(ie-te)*(r.valign==="middle"?.5:1)),X)j.select("svg").attr({x:k+Gt-1,y:k+Jt}).call(td.setClipUrl,P?p:null,e);else{var kt=k+Jt-G.top,ft=k+Gt-G.left;R.call(TA.positionText,ft,kt).call(td.setClipUrl,P?p:null,e)}D.select("rect").call(td.setRect,k,k,ee,ie),L.call(td.setRect,A/2,A/2,se-A,W-A),x.call(td.setTranslate,Math.round(b.x.text-se/2),Math.round(b.y.text-W/2)),T.attr({transform:"rotate("+m+","+b.x.text+","+b.y.text+")"});var zt=t(function(Et,Wt){y.selectAll(".annotation-arrow-g").remove();var ze=b.x.head,tt=b.y.head,at=b.x.tail+Et,vt=b.y.tail+Wt,_t=b.x.text+Et,Rt=b.y.text+Wt,nr=Xd.rotationXYMatrix(m,_t,Rt),ir=Xd.apply2DTransform(nr),ur=Xd.apply2DTransform2(nr),qt=+L.attr("width"),hr=+L.attr("height"),Fr=_t-.5*qt,Br=Fr+qt,na=Rt-.5*hr,Ia=na+hr,ea=[[Fr,na,Fr,Ia],[Fr,Ia,Br,Ia],[Br,Ia,Br,na],[Br,na,Fr,na]].map(ur);if(!ea.reduce(function(Se,je){return Se^!!Xd.segmentsIntersect(ze,tt,ze+1e6,tt+1e6,je[0],je[1],je[2],je[3])},!1)){ea.forEach(function(Se){var je=Xd.segmentsIntersect(at,vt,ze,tt,Se[0],Se[1],Se[2],Se[3]);je&&(at=je.x,vt=je.y)});var Er=r.arrowwidth,dn=r.arrowcolor,ya=r.arrowside,Hr=y.append("g").style({opacity:Wp.opacity(dn)}).classed("annotation-arrow-g",!0),un=Hr.append("path").attr("d","M"+at+","+vt+"L"+ze+","+tt).style("stroke-width",Er+"px").call(Wp.stroke,Wp.rgb(dn));if(A5e(un,ya,r),u.annotationPosition&&un.node().parentNode&&!i){var Ea=ze,nt=tt;if(r.standoff){var He=Math.sqrt(Math.pow(ze-at,2)+Math.pow(tt-vt,2));Ea+=r.standoff*(at-ze)/He,nt+=r.standoff*(vt-tt)/He}var Qe=Hr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(at-Ea)+","+(vt-nt),transform:wA(Ea,nt)}).style("stroke-width",Er+6+"px").call(Wp.stroke,"rgba(0,0,0,0)").call(Wp.fill,"rgba(0,0,0,0)"),ot,Ae;zm.init({element:Qe.node(),gd:e,prepFn:function(){var Se=td.getTranslate(x);ot=Se.x,Ae=Se.y,s&&s.autorange&&c(s._name+".autorange",!0),o&&o.autorange&&c(o._name+".autorange",!0)},moveFn:function(Se,je){var Xe=ir(ot,Ae),ut=Xe[0]+Se,xt=Xe[1]+je;x.call(td.setTranslate,ut,xt),d("x",Gd(s,Se,"x",l,r)),d("y",Gd(o,je,"y",l,r)),r.axref===r.xref&&d("ax",Gd(s,Se,"ax",l,r)),r.ayref===r.yref&&d("ay",Gd(o,je,"ay",l,r)),Hr.attr("transform",wA(Se,je)),T.attr({transform:"rotate("+m+","+ut+","+xt+")"})},doneFn:function(){_A.call("_guiRelayout",e,g());var Se=document.querySelector(".js-notes-box-panel");Se&&Se.redraw(Se.selectedObj)}})}}},"drawArrow");if(r.showarrow&&zt(0,0),_){var Pt;zm.init({element:x.node(),gd:e,prepFn:function(){Pt=T.attr("transform")},moveFn:function(Et,Wt){var ze="pointer";if(r.showarrow)r.axref===r.xref?d("ax",Gd(s,Et,"ax",l,r)):d("ax",r.ax+Et),r.ayref===r.yref?d("ay",Gd(o,Wt,"ay",l.w,r)):d("ay",r.ay+Wt),zt(Et,Wt);else{if(i)return;var tt,at;if(s)tt=Gd(s,Et,"x",l,r);else{var vt=r._xsize/l.w,_t=r.x+(r._xshift-r.xshift)/l.w-vt/2;tt=zm.align(_t+Et/l.w,vt,0,1,r.xanchor)}if(o)at=Gd(o,Wt,"y",l,r);else{var Rt=r._ysize/l.h,nr=r.y-(r._yshift+r.yshift)/l.h-Rt/2;at=zm.align(nr-Wt/l.h,Rt,0,1,r.yanchor)}d("x",tt),d("y",at),(!s||!o)&&(ze=zm.getCursor(s?.5:tt,o?.5:at,r.xanchor,r.yanchor))}T.attr({transform:wA(Et,Wt)+Pt}),AA(x,ze)},clickFn:function(Et,Wt){r.captureevents&&e.emit("plotly_clickannotation",w(Wt))},doneFn:function(){AA(x),_A.call("_guiRelayout",e,g());var Et=document.querySelector(".js-notes-box-panel");Et&&Et.redraw(Et.selectedObj)}})}}t(O,"drawGraphicalElements"),u.annotationText?R.call(TA.makeEditable,{delegate:x,gd:e}).call(F).on("edit",function(q){r.text=q,this.call(F),d("text",q),s&&s.autorange&&c(s._name+".autorange",!0),o&&o.autorange&&c(o._name+".autorange",!0),_A.call("_guiRelayout",e,g())}):R.call(F)}t(Jue,"drawRaw$1");var HH=Nt.exports,M5e=Na,$H=ei.arrayEditor,k5e={hasClickToShow:E5e,onClick:C5e};function E5e(e,r){var n=Que(e,r);return n.on.length>0||n.explicitOff.length>0}t(E5e,"hasClickToShow");function C5e(e,r){var n=Que(e,r),i=n.on,s=n.off.concat(n.explicitOff),o={},a=e._fullLayout.annotations,l,u;if(!!(i.length||s.length)){for(l=0;l<i.length;l++)u=$H(e.layout,"annotations",a[i[l]]),u.modifyItem("visible",!0),HH.extendFlat(o,u.getUpdateObj());for(l=0;l<s.length;l++)u=$H(e.layout,"annotations",a[s[l]]),u.modifyItem("visible",!1),HH.extendFlat(o,u.getUpdateObj());return M5e.call("update",e,{},o)}}t(C5e,"onClick");function Que(e,r){var n=e._fullLayout.annotations,i=[],s=[],o=[],a=(r||[]).length,l,u,f,h,v,c,d,g;for(l=0;l<n.length;l++)if(f=n[l],h=f.clicktoshow,h){for(u=0;u<a;u++)if(v=r[u],c=v.xaxis,d=v.yaxis,c._id===f.xref&&d._id===f.yref&&c.d2r(v.x)===VH(f._xclick,c)&&d.d2r(v.y)===VH(f._yclick,d)){f.visible?h==="onout"?g=s:g=o:g=i,g.push(l);break}u===a&&f.visible&&h==="onout"&&s.push(l)}return{on:i,off:s,explicitOff:o}}t(Que,"getToggleSets");function VH(e,r){return r.type==="log"?r.l2r(e):r.d2r(e)}t(VH,"clickData2r");var GH=Nt.exports,wg=$a.exports,efe=t(function(r,n,i,s){s("opacity");var o=s("bgcolor"),a=s("bordercolor"),l=wg.opacity(a);s("borderpad");var u=s("borderwidth"),f=s("showarrow");s("text",f?" ":i._dfltTitle.annotation),s("textangle"),GH.coerceFont(s,"font",i.font),s("width"),s("align");var h=s("height");if(h&&s("valign"),f){var v=s("arrowside"),c,d;v.indexOf("end")!==-1&&(c=s("arrowhead"),d=s("arrowsize")),v.indexOf("start")!==-1&&(s("startarrowhead",c),s("startarrowsize",d)),s("arrowcolor",l?n.bordercolor:wg.defaultLine),s("arrowwidth",(l&&u||1)*2),s("standoff"),s("startstandoff")}var g=s("hovertext"),p=i.hoverlabel||{};if(g){var b=s("hoverlabel.bgcolor",p.bgcolor||(wg.opacity(o)?wg.rgb(o):wg.defaultLine)),m=s("hoverlabel.bordercolor",p.bordercolor||wg.contrast(b));GH.coerceFont(s,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||m})}s("captureevents",!!g)},"handleAnnotationCommonDefaults"),SA=Nt.exports,Xp=nn(),L5e=mu,R5e=efe,P5e=Ry,D5e=t(function(r,n){L5e(r,n,{name:"annotations",handleItemDefaults:I5e})},"supplyLayoutDefaults");function I5e(e,r,n){function i(T,_){return SA.coerce(e,r,P5e,T,_)}t(i,"coerce");var s=i("visible"),o=i("clicktoshow");if(!!(s||o)){R5e(e,r,n,i);for(var a=r.showarrow,l=["x","y"],u=[-10,-30],f={_fullLayout:n},h=0;h<2;h++){var v=l[h],c=Xp.coerceRef(e,r,f,v,"","paper");if(c!=="paper"){var d=Xp.getFromId(f,c);d._annIndices.push(r._index)}if(Xp.coercePosition(r,f,i,c,v,.5),a){var g="a"+v,p=Xp.coerceRef(e,r,f,g,"pixel",["pixel","paper"]);p!=="pixel"&&p!==c&&(p=r[g]="pixel");var b=p==="pixel"?u[h]:.4;Xp.coercePosition(r,f,i,p,g,b)}i(v+"anchor"),i(v+"shift")}if(SA.noneOrAll(e,r,["x","y"]),a&&SA.noneOrAll(e,r,["ax","ay"]),o){var m=i("xclick"),y=i("yclick");r._xclick=m===void 0?r.x:Xp.cleanPosition(m,f,r.xref),r._yclick=y===void 0?r.y:Xp.cleanPosition(y,f,r.yref)}}}t(I5e,"handleAnnotationDefaults$1");var Oz=Nt.exports,s0=nn(),z5e=X8.draw,F5e=t(function(r){var n=r._fullLayout,i=Oz.filterVisible(n.annotations);if(i.length&&r._fullData.length)return Oz.syncOrAsync([z5e,B5e],r)},"calcAutorange");function B5e(e){var r=e._fullLayout;Oz.filterVisible(r.annotations).forEach(function(n){var i=s0.getFromId(e,n.xref),s=s0.getFromId(e,n.yref),o=s0.getRefType(n.xref),a=s0.getRefType(n.yref);n._extremes={},o==="range"&&jH(n,i),a==="range"&&jH(n,s)})}t(B5e,"annAutorange");function jH(e,r){var n=r._id,i=n.charAt(0),s=e[i],o=e["a"+i],a=e[i+"ref"],l=e["a"+i+"ref"],u=e["_"+i+"padplus"],f=e["_"+i+"padminus"],h={x:1,y:-1}[i]*e[i+"shift"],v=3*e.arrowsize*e.arrowwidth||0,c=v+h,d=v-h,g=3*e.startarrowsize*e.arrowwidth||0,p=g+h,b=g-h,m;if(l===a){var y=s0.findExtremes(r,[r.r2c(s)],{ppadplus:c,ppadminus:d}),T=s0.findExtremes(r,[r.r2c(o)],{ppadplus:Math.max(u,p),ppadminus:Math.max(f,b)});m={min:[y.min[0],T.min[0]],max:[y.max[0],T.max[0]]}}else p=o?p+o:p,b=o?b-o:b,m=s0.findExtremes(r,[r.r2c(s)],{ppadplus:Math.max(u,c,p),ppadminus:Math.max(f,d,b)});e._extremes[n]=m}t(jH,"calcAxisExpansion");var O5e=xn,N5e=jF,q5e=t(function(r,n,i,s){n=n||{};var o=i==="log"&&n.type==="linear",a=i==="linear"&&n.type==="log";if(!(o||a))return;var l=r._fullLayout.annotations,u=n._id.charAt(0),f,h;function v(d){var g=f[d],p=null;o?p=N5e(g,n.range):p=Math.pow(10,g),O5e(p)||(p=null),s(h+d,p)}t(v,"convert");for(var c=0;c<l.length;c++)f=l[c],h="annotations["+c+"].",f[u+"ref"]===n._id&&v(u),f["a"+u+"ref"]===n._id&&v("a"+u)},"convertCoords"),MA=X8,YH=k5e,U5e={moduleType:"component",name:"annotations",layoutAttributes:Ry,supplyLayoutDefaults:D5e,includeBasePlot:Cw("annotations"),calcAutorange:F5e,draw:MA.draw,drawOne:MA.drawOne,drawRaw:MA.drawRaw,hasClickToShow:YH.hasClickToShow,onClick:YH.onClick,convertCoords:q5e},co=Ry,H5e=_o.overrideAll,$5e=ei.templatedArray,Nz=H5e($5e("annotation",{visible:co.visible,x:{valType:"any",description:["Sets the annotation's x position."].join(" ")},y:{valType:"any",description:["Sets the annotation's y position."].join(" ")},z:{valType:"any",description:["Sets the annotation's z position."].join(" ")},ax:{valType:"number",description:["Sets the x component of the arrow tail about the arrow head (in pixels)."].join(" ")},ay:{valType:"number",description:["Sets the y component of the arrow tail about the arrow head (in pixels)."].join(" ")},xanchor:co.xanchor,xshift:co.xshift,yanchor:co.yanchor,yshift:co.yshift,text:co.text,textangle:co.textangle,font:co.font,width:co.width,height:co.height,opacity:co.opacity,align:co.align,valign:co.valign,bgcolor:co.bgcolor,bordercolor:co.bordercolor,borderpad:co.borderpad,borderwidth:co.borderwidth,showarrow:co.showarrow,arrowcolor:co.arrowcolor,arrowhead:co.arrowhead,startarrowhead:co.startarrowhead,arrowside:co.arrowside,arrowsize:co.arrowsize,startarrowsize:co.startarrowsize,arrowwidth:co.arrowwidth,standoff:co.standoff,startstandoff:co.startstandoff,hovertext:co.hovertext,hoverlabel:co.hoverlabel,captureevents:co.captureevents}),"calc","from-root"),kA=Nt.exports,V5e=nn(),G5e=mu,j5e=efe,Y5e=Nz,W5e=t(function(r,n,i){G5e(r,n,{name:"annotations",handleItemDefaults:X5e,fullLayout:i.fullLayout})},"handleDefaults");function X5e(e,r,n,i){function s(l,u){return kA.coerce(e,r,Y5e,l,u)}t(s,"coerce");function o(l){var u=l+"axis",f={_fullLayout:{}};return f._fullLayout[u]=n[u],V5e.coercePosition(r,f,s,l,l,.5)}t(o,"coercePosition");var a=s("visible");!a||(j5e(e,r,i.fullLayout,s),o("x"),o("y"),o("z"),kA.noneOrAll(e,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",s("ax",-10),s("ay",-30),kA.noneOrAll(e,r,["ax","ay"])))}t(X5e,"handleAnnotationDefaults");var WH=Nt.exports,XH=nn(),Z5e=t(function(r){for(var n=r.fullSceneLayout,i=n.annotations,s=0;s<i.length;s++)K5e(i[s],r);r.fullLayout._infolayer.selectAll(".annotation-"+r.id).remove()},"convert");function K5e(e,r){var n=r.fullSceneLayout,i=n.domain,s=r.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},WH.extendFlat(e._xa,o),XH.setConvert(e._xa),e._xa._offset=s.l+i.x[0]*s.w,e._xa.l2p=function(){return .5*(1+e._pdata[0]/e._pdata[3])*s.w*(i.x[1]-i.x[0])},e._ya={},WH.extendFlat(e._ya,o),XH.setConvert(e._ya),e._ya._offset=s.t+(1-i.y[1])*s.h,e._ya.l2p=function(){return .5*(1-e._pdata[1]/e._pdata[3])*s.h*(i.y[1]-i.y[0])}}t(K5e,"mockAnnAxes");function EA(e,r){var n=[0,0,0,0],i,s;for(i=0;i<4;++i)for(s=0;s<4;++s)n[s]+=e[4*i+s]*r[i];return n}t(EA,"xformMatrix");function J5e(e,r){var n=EA(e.projection,EA(e.view,EA(e.model,[r[0],r[1],r[2],1])));return n}t(J5e,"project$1");var tfe=J5e,Q5e=X8.drawRaw,eEe=tfe,tEe=["x","y","z"],rEe=t(function(r){for(var n=r.fullSceneLayout,i=r.dataScale,s=n.annotations,o=0;o<s.length;o++){for(var a=s[o],l=!1,u=0;u<3;u++){var f=tEe[u],h=a[f],v=n[f+"axis"],c=v.r2fraction(h);if(c<0||c>1){l=!0;break}}l?r.fullLayout._infolayer.select(".annotation-"+r.id+'[data-index="'+o+'"]').remove():(a._pdata=eEe(r.glplot.cameraParams,[n.xaxis.r2l(a.x)*i[0],n.yaxis.r2l(a.y)*i[1],n.zaxis.r2l(a.z)*i[2]]),Q5e(r.graphDiv,a,o,r.id,a._xa,a._ya))}},"draw"),aEe=Na,ZH=Nt.exports,nEe={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:Nz}}},layoutAttributes:Nz,handleDefaults:W5e,includeBasePlot:iEe,convert:Z5e,draw:rEe};function iEe(e,r){var n=aEe.subplotsRegistry.gl3d;if(!!n)for(var i=n.attrRegex,s=Object.keys(e),o=0;o<s.length;o++){var a=s[o];i.test(a)&&(e[a].annotations||[]).length&&(ZH.pushUnique(r._basePlotModules,n),ZH.pushUnique(r._subplots.gl3d,a))}}t(iEe,"includeGL3D");var KH=Ry,JH=Ps.line,oEe=yu.dash,Fm=cn.extendFlat,sEe=ei.templatedArray,QH=Ew,rfe=sEe("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw",description:["Determines whether or not this shape is visible."].join(" ")},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw",description:["Specifies the shape type to be drawn.","If *line*, a line is drawn from (`x0`,`y0`) to (`x1`,`y1`)","with respect to the axes' sizing mode.","If *circle*, a circle is drawn from","((`x0`+`x1`)/2, (`y0`+`y1`)/2))","with radius","(|(`x0`+`x1`)/2 - `x0`|, |(`y0`+`y1`)/2 -`y0`)|)","with respect to the axes' sizing mode.","If *rect*, a rectangle is drawn linking","(`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`), (`x0`,`y1`), (`x0`,`y0`)","with respect to the axes' sizing mode.","If *path*, draw a custom SVG path using `path`.","with respect to the axes' sizing mode."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:"Specifies whether shapes are drawn below or above traces."},xref:Fm({},KH.xref,{description:["Sets the shape's x coordinate axis.",QH.axisRefDescription("x","left","right")].join(" ")}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the x axis.","If set to *scaled*, `x0`, `x1` and x coordinates within `path` refer to","data values on the x axis or a fraction of the plot area's width","(`xref` set to *paper*).","If set to *pixel*, `xanchor` specifies the x position in terms","of data or plot fraction but `x0`, `x1` and x coordinates within `path`","are pixels relative to `xanchor`. This way, the shape can have","a fixed width while maintaining a position relative to data or","plot fraction."].join(" ")},xanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `xsizemode` set to *pixel*.","Specifies the anchor point on the x axis to which `x0`, `x1`","and x coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `xsizemode` not set to *pixel*."].join(" ")},x0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting x position.","See `type` and `xsizemode` for more info."].join(" ")},x1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end x position.","See `type` and `xsizemode` for more info."].join(" ")},yref:Fm({},KH.yref,{description:["Sets the shape's y coordinate axis.",QH.axisRefDescription("y","bottom","top")].join(" ")}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw",description:["Sets the shapes's sizing mode along the y axis.","If set to *scaled*, `y0`, `y1` and y coordinates within `path` refer to","data values on the y axis or a fraction of the plot area's height","(`yref` set to *paper*).","If set to *pixel*, `yanchor` specifies the y position in terms","of data or plot fraction but `y0`, `y1` and y coordinates within `path`","are pixels relative to `yanchor`. This way, the shape can have","a fixed height while maintaining a position relative to data or","plot fraction."].join(" ")},yanchor:{valType:"any",editType:"calc+arraydraw",description:["Only relevant in conjunction with `ysizemode` set to *pixel*.","Specifies the anchor point on the y axis to which `y0`, `y1`","and y coordinates within `path` are relative to.","E.g. useful to attach a pixel sized shape to a certain data value.","No effect when `ysizemode` not set to *pixel*."].join(" ")},y0:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's starting y position.","See `type` and `ysizemode` for more info."].join(" ")},y1:{valType:"any",editType:"calc+arraydraw",description:["Sets the shape's end y position.","See `type` and `ysizemode` for more info."].join(" ")},path:{valType:"string",editType:"calc+arraydraw",description:["For `type` *path* - a valid SVG path with the pixel values","replaced by data values in `xsizemode`/`ysizemode` being *scaled*","and taken unmodified as pixels relative to `xanchor` and `yanchor`","in case of *pixel* size mode.","There are a few restrictions / quirks","only absolute instructions, not relative. So the allowed segments","are: M, L, H, V, Q, C, T, S, and Z","arcs (A) are not allowed because radius rx and ry are relative.","In the future we could consider supporting relative commands,","but we would have to decide on how to handle date and log axes.","Note that even as is, Q and C Bezier paths that are smooth on","linear axes may not be smooth on log, and vice versa.",'no chained "polybezier" commands - specify the segment type for',"each one.","On category axes, values are numbers scaled to the serial numbers","of categories because using the categories themselves there would","be no way to describe fractional positions","On data axes: because space and T are both normal components of path","strings, we can't use either to separate date from time parts.","Therefore we'll use underscore for this purpose:","2015-02-21_13:45:56.789"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the shape."},line:{color:Fm({},JH.color,{editType:"arraydraw"}),width:Fm({},JH.width,{editType:"calc+arraydraw"}),dash:Fm({},oEe,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw",description:["Sets the color filling the shape's interior. Only applies to closed shapes."].join(" ")},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw",description:["Determines which regions of complex paths constitute the interior.","For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule"].join(" ")},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw",description:["Determines whether the shape could be activated for edit or not.","Has no effect when the older editable shapes mode is enabled via","`config.editable` or `config.edits.shapePosition`."].join(" ")},editType:"arraydraw"}),CA=Nt.exports,Tg=nn(),lEe=mu,uEe=rfe,e$=D0,fEe=t(function(r,n){lEe(r,n,{name:"shapes",handleItemDefaults:cEe})},"supplyLayoutDefaults");function cEe(e,r,n){function i(B,z){return CA.coerce(e,r,uEe,B,z)}t(i,"coerce");var s=i("visible");if(!!s){var o=i("path"),a=o?"path":"rect",l=i("type",a),u=l!=="path";u&&delete r.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule");var f=i("line.width");f&&(i("line.color"),i("line.dash"));for(var h=i("xsizemode"),v=i("ysizemode"),c=["x","y"],d=0;d<2;d++){var g=c[d],p=g+"anchor",b=g==="x"?h:v,m={_fullLayout:n},y,T,_,M=Tg.coerceRef(e,r,m,g,void 0,"paper"),w=Tg.getRefType(M);if(w==="range"?(y=Tg.getFromId(m,M),y._shapeIndices.push(r._index),_=e$.rangeToShapePosition(y),T=e$.shapePositionToRange(y)):T=_=CA.identity,u){var x=.25,A=.75,S=g+"0",k=g+"1",L=e[S],P=e[k];e[S]=T(e[S],!0),e[k]=T(e[k],!0),b==="pixel"?(i(S,0),i(k,10)):(Tg.coercePosition(r,m,i,M,S,x),Tg.coercePosition(r,m,i,M,k,A)),r[S]=_(r[S]),r[k]=_(r[k]),e[S]=L,e[k]=P}if(b==="pixel"){var D=e[p];e[p]=T(e[p],!0),Tg.coercePosition(r,m,i,M,p,.25),r[p]=_(r[p]),e[p]=D}}u&&CA.noneOrAll(e,r,["x0","x1","y0","y1"])}}t(cEe,"handleShapeDefaults");var hEe=$a.exports,vEe=t(function(r,n,i){i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity");var s=i("newshape.line.width");if(s){var o=(r||{}).plot_bgcolor||"#FFF";i("newshape.line.color",hEe.contrast(o)),i("newshape.line.dash")}i("activeshape.fillcolor"),i("activeshape.opacity")},"supplyDrawNewShapeDefaults"),qz=Nt.exports,Ag=nn(),iy=ww,afe=D0,dEe=t(function(r){var n=r._fullLayout,i=qz.filterVisible(n.shapes);if(!(!i.length||!r._fullData.length))for(var s=0;s<i.length;s++){var o=i[s];o._extremes={};var a,l,u=Ag.getRefType(o.xref),f=Ag.getRefType(o.yref);if(o.xref!=="paper"&&u!=="domain"){var h=o.xsizemode==="pixel"?o.xanchor:o.x0,v=o.xsizemode==="pixel"?o.xanchor:o.x1;a=Ag.getFromId(r,o.xref),l=t$(a,h,v,o.path,iy.paramIsX),l&&(o._extremes[a._id]=Ag.findExtremes(a,l,pEe(o)))}if(o.yref!=="paper"&&f!=="domain"){var c=o.ysizemode==="pixel"?o.yanchor:o.y0,d=o.ysizemode==="pixel"?o.yanchor:o.y1;a=Ag.getFromId(r,o.yref),l=t$(a,c,d,o.path,iy.paramIsY),l&&(o._extremes[a._id]=Ag.findExtremes(a,l,gEe(o)))}}},"calcAutorange");function pEe(e){return nfe(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}t(pEe,"calcXPaddingOptions");function gEe(e){return nfe(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}t(gEe,"calcYPaddingOptions");function nfe(e,r,n,i,s,o){var a=e/2,l=o;if(r==="pixel"){var u=s?afe.extractPathCoords(s,o?iy.paramIsY:iy.paramIsX):[n,i],f=qz.aggNums(Math.max,null,u),h=qz.aggNums(Math.min,null,u),v=h<0?Math.abs(h)+a:a,c=f>0?f+a:a;return{ppad:a,ppadplus:l?v:c,ppadminus:l?c:v}}else return{ppad:a}}t(nfe,"calcPaddingOptions");function t$(e,r,n,i,s){var o=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(r!==void 0)return[o(r),o(n)];if(!!i){var a=1/0,l=-1/0,u=i.match(iy.segmentRE),f,h,v,c,d;for(e.type==="date"&&(o=afe.decodeDate(o)),f=0;f<u.length;f++)h=u[f],v=s[h.charAt(0)].drawn,v!==void 0&&(c=u[f].substr(1).match(iy.paramRE),!(!c||c.length<v)&&(d=o(c[v]),d<a&&(a=d),d>l&&(l=d)));if(l>=a)return[a,l]}}t(t$,"shapeBounds");var r$=kle,yEe={moduleType:"component",name:"shapes",layoutAttributes:rfe,supplyLayoutDefaults:fEe,supplyDrawNewShapeDefaults:vEe,includeBasePlot:Cw("shapes"),calcAutorange:dEe,draw:r$.draw,drawOne:r$.drawOne},a$=al,mEe=ei.templatedArray,n$=Ew,ife=mEe("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw",description:["Determines whether or not this image is visible."].join(" ")},source:{valType:"string",editType:"arraydraw",description:["Specifies the URL of the image to be used.","The URL must be accessible from the domain where the","plot code is run, and can be either relative or absolute."].join(" ")},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw",description:["Specifies whether images are drawn below or above traces.","When `xref` and `yref` are both set to `paper`,","image is drawn below the entire plot area."].join(" ")},sizex:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size horizontally.","The image will be sized based on the `position` value.","When `xref` is set to `paper`, units are sized relative","to the plot width.","When `xref` ends with ` domain`, units are sized relative","to the axis width."].join(" ")},sizey:{valType:"number",dflt:0,editType:"arraydraw",description:["Sets the image container size vertically.","The image will be sized based on the `position` value.","When `yref` is set to `paper`, units are sized relative","to the plot height.","When `yref` ends with ` domain`, units are sized relative","to the axis height."].join(" ")},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw",description:["Specifies which dimension of the image to constrain."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw",description:"Sets the opacity of the image."},x:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's x position.","When `xref` is set to `paper`, units are sized relative","to the plot height.","See `xref` for more info"].join(" ")},y:{valType:"any",dflt:0,editType:"arraydraw",description:["Sets the image's y position.","When `yref` is set to `paper`, units are sized relative","to the plot height.","See `yref` for more info"].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw",description:"Sets the anchor for the x position"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw",description:"Sets the anchor for the y position."},xref:{valType:"enumerated",values:["paper",a$.idRegex.x.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's x coordinate axis.",n$.axisRefDescription("x","left","right")].join(" ")},yref:{valType:"enumerated",values:["paper",a$.idRegex.y.toString()],dflt:"paper",editType:"arraydraw",description:["Sets the images's y coordinate axis.",n$.axisRefDescription("y","bottom","top")].join(" ")},editType:"arraydraw"}),xEe=Nt.exports,LA=nn(),bEe=mu,_Ee=ife,wEe="images",TEe=t(function(r,n){var i={name:wEe,handleItemDefaults:AEe};bEe(r,n,i)},"supplyLayoutDefaults");function AEe(e,r,n){function i(c,d){return xEe.coerce(e,r,_Ee,c,d)}t(i,"coerce");var s=i("source"),o=i("visible",!!s);if(!o)return r;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var a={_fullLayout:n},l=["x","y"],u=0;u<2;u++){var f=l[u],h=LA.coerceRef(e,r,a,f,"paper",void 0);if(h!=="paper"){var v=LA.getFromId(a,h);v._imgIndices.push(r._index)}LA.coercePosition(r,a,i,h,f,0)}return r}t(AEe,"imageDefaults");var i$=Va.exports,SEe=bn.exports,Sg=nn(),o$=$o,MEe=ic,kEe=t(function(r){var n=r._fullLayout,i=[],s={},o=[],a,l;for(l=0;l<n.images.length;l++){var u=n.images[l];if(u.visible)if(u.layer==="below"&&u.xref!=="paper"&&u.yref!=="paper"){a=o$.ref2id(u.xref)+o$.ref2id(u.yref);var f=n._plots[a];if(!f){o.push(u);continue}f.mainplot&&(a=f.mainplot.id),s[a]||(s[a]=[]),s[a].push(u)}else u.layer==="above"?i.push(u):o.push(u)}var h={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function v(y){var T=i$.select(this);if(this._imgSrc!==y.source)if(T.attr("xmlns",MEe.svg),y.source&&y.source.slice(0,5)==="data:")T.attr("xlink:href",y.source),this._imgSrc=y.source;else{var _=new Promise(function(M){var w=new Image;this.img=w,w.setAttribute("crossOrigin","anonymous"),w.onerror=x,w.onload=function(){var A=document.createElement("canvas");A.width=this.width,A.height=this.height;var S=A.getContext("2d",{willReadFrequently:!0});S.drawImage(this,0,0);var k=A.toDataURL("image/png");T.attr("xlink:href",k),M()},T.on("error",x),w.src=y.source,this._imgSrc=y.source;function x(){T.remove(),M()}t(x,"errorHandler")}.bind(this));r._promises.push(_)}}t(v,"setImage");function c(y){var T=i$.select(this),_=Sg.getFromId(r,y.xref),M=Sg.getFromId(r,y.yref),w=Sg.getRefType(y.xref)==="domain",x=Sg.getRefType(y.yref)==="domain",A=n._size,S,k;_!==void 0?S=typeof y.xref=="string"&&w?_._length*y.sizex:Math.abs(_.l2p(y.sizex)-_.l2p(0)):S=y.sizex*A.w,M!==void 0?k=typeof y.yref=="string"&&x?M._length*y.sizey:Math.abs(M.l2p(y.sizey)-M.l2p(0)):k=y.sizey*A.h;var L=S*h.x[y.xanchor].offset,P=k*h.y[y.yanchor].offset,D=h.x[y.xanchor].sizing+h.y[y.yanchor].sizing,B,z;switch(_!==void 0?B=typeof y.xref=="string"&&w?_._length*y.x+_._offset:_.r2p(y.x)+_._offset:B=y.x*A.w+A.l,B+=L,M!==void 0?z=typeof y.yref=="string"&&x?M._length*(1-y.y)+M._offset:M.r2p(y.y)+M._offset:z=A.h-y.y*A.h+A.t,z+=P,y.sizing){case"fill":D+=" slice";break;case"stretch":D="none";break}T.attr({x:B,y:z,width:S,height:k,preserveAspectRatio:D,opacity:y.opacity});var R=_&&Sg.getRefType(y.xref)!=="domain"?_._id:"",F=M&&Sg.getRefType(y.yref)!=="domain"?M._id:"",O=R+F;SEe.setClipUrl(T,O?"clip"+n._uid+O:null,r)}t(c,"applyAttributes");var d=n._imageLowerLayer.selectAll("image").data(o),g=n._imageUpperLayer.selectAll("image").data(i);d.enter().append("image"),g.enter().append("image"),d.exit().remove(),g.exit().remove(),d.each(function(y){v.bind(this)(y),c.bind(this)(y)}),g.each(function(y){v.bind(this)(y),c.bind(this)(y)});var p=Object.keys(n._plots);for(l=0;l<p.length;l++){a=p[l];var b=n._plots[a];if(!!b.imagelayer){var m=b.imagelayer.selectAll("image").data(s[a]||[]);m.enter().append("image"),m.exit().remove(),m.each(function(y){v.bind(this)(y),c.bind(this)(y)})}}},"draw"),s$=xn,EEe=jF,CEe=t(function(r,n,i,s){n=n||{};var o=i==="log"&&n.type==="linear",a=i==="linear"&&n.type==="log";if(!!(o||a)){for(var l=r._fullLayout.images,u=n._id.charAt(0),f,h,v=0;v<l.length;v++)if(f=l[v],h="images["+v+"].",f[u+"ref"]===n._id){var c=f[u],d=f["size"+u],g=null,p=null;if(o){g=EEe(c,n.range);var b=d/Math.pow(10,g)/2;p=2*Math.log(b+Math.sqrt(1+b*b))/Math.LN10}else g=Math.pow(10,c),p=g*(Math.pow(10,d/2)-Math.pow(10,-d/2));s$(g)?s$(p)||(p=null):(g=null,p=null),s(h+u,g),s(h+"size"+u,p)}}},"convertCoords"),LEe={moduleType:"component",name:"images",layoutAttributes:ife,supplyLayoutDefaults:TEe,includeBasePlot:Cw("images"),draw:kEe,convertCoords:CEe},Z8={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}},REe=Ho,PEe=Fo,DEe=cn.extendFlat,IEe=_o.overrideAll,zEe=JF,ofe=ei.templatedArray,FEe=ofe("button",{visible:{valType:"boolean",description:"Determines whether or not this button is visible."},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called on click.","If the `skip` method is used, the API updatemenu will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","updatemenu events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on click."].join(" ")},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets a 2nd set of `args`,","these arguments values are passed to the Plotly","method set in `method` when clicking this button while in the active state.","Use this to create toggle buttons."].join(" ")},label:{valType:"string",dflt:"",description:"Sets the text label to appear on the button."},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_buttonclicked` method and executing the API command manually without losing","the benefit of the updatemenu automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),sfe=IEe(ofe("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean",description:["Determines whether or not the update menu is visible."].join(" ")},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown",description:["Determines whether the buttons are accessible via a dropdown menu","or whether the buttons are stacked horizontally or vertically"].join(" ")},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down",description:["Determines the direction in which the buttons are laid out, whether","in a dropdown menu or a row/column of buttons. For `left` and `up`,","the buttons will still appear in left-to-right or top-to-bottom order","respectively."].join(" ")},active:{valType:"integer",min:-1,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},showactive:{valType:"boolean",dflt:!0,description:"Highlights active dropdown item or active button if true."},buttons:FEe,x:{valType:"number",min:-2,max:3,dflt:-.05,description:"Sets the x position (in normalized coordinates) of the update menu."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right",description:["Sets the update menu's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:1,description:"Sets the y position (in normalized coordinates) of the update menu."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the update menu's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},pad:DEe(zEe({editType:"arraydraw"}),{description:"Sets the padding around the buttons or dropdown menu."}),font:REe({description:"Sets the font of the update menu button text."}),bgcolor:{valType:"color",description:"Sets the background color of the update menu buttons."},bordercolor:{valType:"color",dflt:PEe.borderLine,description:"Sets the color of the border enclosing the update menu."},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw",description:"Sets the width (in px) of the border enclosing the update menu."}}),"arraydraw","from-root"),y_=Nt.exports,lfe=mu,ufe=sfe,BEe=Z8,OEe=BEe.name,NEe=ufe.buttons,qEe=t(function(r,n){var i={name:OEe,handleItemDefaults:UEe};lfe(r,n,i)},"updateMenusDefaults");function UEe(e,r,n){function i(a,l){return y_.coerce(e,r,ufe,a,l)}t(i,"coerce");var s=lfe(e,r,{name:"buttons",handleItemDefaults:HEe}),o=i("visible",s.length>0);!o||(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),y_.noneOrAll(e,r,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),y_.coerceFont(i,"font",n.font),i("bgcolor",n.paper_bgcolor),i("bordercolor"),i("borderwidth"))}t(UEe,"menuDefaults");function HEe(e,r){function n(s,o){return y_.coerce(e,r,NEe,s,o)}t(n,"coerce");var i=n("visible",e.method==="skip"||Array.isArray(e.args));i&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}t(HEe,"buttonDefaults$1");var $Ee=Uo,_h=Va.exports,l$=$a.exports,Wg=bn.exports,Y_=Nt.exports;function Uo(e,r,n){this.gd=e,this.container=r,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t(Uo,"ScrollBox$1");Uo.barWidth=2;Uo.barLength=20;Uo.barRadius=2;Uo.barPad=1;Uo.barColor="#808BA4";Uo.prototype.enable=t(function(r,n,i){var s=this.gd._fullLayout,o=s.width,a=s.height;this.position=r;var l=this.position.l,u=this.position.w,f=this.position.t,h=this.position.h,v=this.position.direction,c=v==="down",d=v==="left",g=v==="right",p=v==="up",b=u,m=h,y,T,_,M;!c&&!d&&!g&&!p&&(this.position.direction="down",c=!0);var w=c||p;w?(y=l,T=y+b,c?(_=f,M=Math.min(_+m,a),m=M-_):(M=f+m,_=Math.max(M-m,0),m=M-_)):(_=f,M=_+m,d?(T=l+b,y=Math.max(T-b,0),b=T-y):(y=l,T=Math.min(y+b,o),b=T-y)),this._box={l:y,t:_,w:b,h:m};var x=u>b,A=Uo.barLength+2*Uo.barPad,S=Uo.barWidth+2*Uo.barPad,k=l,L=f+h;L+S>a&&(L=a-S);var P=this.container.selectAll("rect.scrollbar-horizontal").data(x?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-horizontal",!0).call(l$.fill,Uo.barColor),x?(this.hbar=P.attr({rx:Uo.barRadius,ry:Uo.barRadius,x:k,y:L,width:A,height:S}),this._hbarXMin=k+A/2,this._hbarTranslateMax=b-A):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var D=h>m,B=Uo.barWidth+2*Uo.barPad,z=Uo.barLength+2*Uo.barPad,R=l+u,F=f;R+B>o&&(R=o-B);var O=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-vertical",!0).call(l$.fill,Uo.barColor),D?(this.vbar=O.attr({rx:Uo.barRadius,ry:Uo.barRadius,x:R,y:F,width:B,height:z}),this._vbarYMin=F+z/2,this._vbarTranslateMax=m-z):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,H=y-.5,j=D?T+B+.5:T+.5,X=_-.5,G=x?M+S+.5:M+.5,$=s._topdefs.selectAll("#"+q).data(x||D?[0]:[]);if($.exit().remove(),$.enter().append("clipPath").attr("id",q).append("rect"),x||D?(this._clipRect=$.select("rect").attr({x:Math.floor(H),y:Math.floor(X),width:Math.ceil(j)-Math.floor(H),height:Math.ceil(G)-Math.floor(X)}),this.container.call(Wg.setClipUrl,q,this.gd),this.bg.attr({x:l,y:f,width:u,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Wg.setClipUrl,null),delete this._clipRect),x||D){var te=_h.behavior.drag().on("dragstart",function(){_h.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(te);var ee=_h.behavior.drag().on("dragstart",function(){_h.event.sourceEvent.preventDefault(),_h.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));x&&this.hbar.on(".drag",null).call(ee),D&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(n,i)},"enable");Uo.prototype.disable=t(function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Wg.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},"disable");Uo.prototype._onBoxDrag=t(function(){var r=this.translateX,n=this.translateY;this.hbar&&(r-=_h.event.dx),this.vbar&&(n-=_h.event.dy),this.setTranslate(r,n)},"_onBoxDrag");Uo.prototype._onBoxWheel=t(function(){var r=this.translateX,n=this.translateY;this.hbar&&(r+=_h.event.deltaY),this.vbar&&(n+=_h.event.deltaY),this.setTranslate(r,n)},"_onBoxWheel");Uo.prototype._onBarDrag=t(function(){var r=this.translateX,n=this.translateY;if(this.hbar){var i=r+this._hbarXMin,s=i+this._hbarTranslateMax,o=Y_.constrain(_h.event.x,i,s),a=(o-i)/(s-i),l=this.position.w-this._box.w;r=a*l}if(this.vbar){var u=n+this._vbarYMin,f=u+this._vbarTranslateMax,h=Y_.constrain(_h.event.y,u,f),v=(h-u)/(f-u),c=this.position.h-this._box.h;n=v*c}this.setTranslate(r,n)},"_onBarDrag");Uo.prototype.setTranslate=t(function(r,n){var i=this.position.w-this._box.w,s=this.position.h-this._box.h;if(r=Y_.constrain(r||0,0,i),n=Y_.constrain(n||0,0,s),this.translateX=r,this.translateY=n,this.container.call(Wg.setTranslate,this._box.l-this.position.l-r,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+r-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var o=r/i;this.hbar.call(Wg.setTranslate,r+o*this._hbarTranslateMax,n)}if(this.vbar){var a=n/s;this.vbar.call(Wg.setTranslate,r,n+a*this._vbarTranslateMax)}},"setTranslate");var oy=Va.exports,D1=so.exports,I1=$a.exports,sy=bn.exports,rc=Nt.exports,W_=Ji,VEe=ei.arrayEditor,ffe=yl.LINE_SPACING,Cn=Z8,GEe=$Ee,jEe=t(function(r){var n=r._fullLayout,i=rc.filterVisible(n[Cn.name]);function s(c){D1.autoMargin(r,pfe(c))}t(s,"clearAutoMargin");var o=n._menulayer.selectAll("g."+Cn.containerClassName).data(i.length>0?[0]:[]);if(o.enter().append("g").classed(Cn.containerClassName,!0).style("cursor","pointer"),o.exit().each(function(){oy.select(this).selectAll("g."+Cn.headerGroupClassName).each(s)}).remove(),i.length!==0){var a=o.selectAll("g."+Cn.headerGroupClassName).data(i,YEe);a.enter().append("g").classed(Cn.headerGroupClassName,!0);for(var l=rc.ensureSingle(o,"g",Cn.dropdownButtonGroupClassName,function(c){c.style("pointer-events","all")}),u=0;u<i.length;u++){var f=i[u];QEe(r,f)}var h="updatemenus"+n._uid,v=new GEe(r,l,h);a.enter().size()&&(l.node().parentNode.appendChild(l.node()),l.call(Hz)),a.exit().each(function(c){l.call(Hz),s(c)}).remove(),a.each(function(c){var d=oy.select(this),g=c.type==="dropdown"?l:null;D1.manageCommandObserver(r,c,c.buttons,function(p){Uz(r,c,c.buttons[p.index],d,g,v,p.index,!0)}),c.type==="dropdown"?(hfe(r,d,l,v,c),cfe(l,c)&&z1(r,d,l,v,c)):z1(r,d,null,null,c)})}},"draw");function YEe(e){return e._index}t(YEe,"keyFunction$1");function WEe(e){return+e.attr(Cn.menuIndexAttrName)==-1}t(WEe,"isFolded");function cfe(e,r){return+e.attr(Cn.menuIndexAttrName)===r._index}t(cfe,"isActive$1");function Uz(e,r,n,i,s,o,a,l){r.active=a,VEe(e.layout,Cn.name,r).applyUpdate("active",a),r.type==="buttons"?z1(e,i,null,null,r):r.type==="dropdown"&&(s.attr(Cn.menuIndexAttrName,"-1"),hfe(e,i,s,o,r),l||z1(e,i,s,o,r))}t(Uz,"setActive$1");function hfe(e,r,n,i,s){var o=rc.ensureSingle(r,"g",Cn.headerClassName,function(c){c.style("pointer-events","all")}),a=s._dims,l=s.active,u=s.buttons[l]||Cn.blankHeaderOpts,f={y:s.pad.t,yPad:0,x:s.pad.l,xPad:0,index:0},h={width:a.headerWidth,height:a.headerHeight};o.call(K8,s,u,e).call(gfe,s,f,h);var v=rc.ensureSingle(r,"text",Cn.headerArrowClassName,function(c){c.attr("text-anchor","end").call(sy.font,s.font).text(Cn.arrowSymbol[s.direction])});v.attr({x:a.headerWidth-Cn.arrowOffsetX+s.pad.l,y:a.headerHeight/2+Cn.textOffsetY+s.pad.t}),o.on("click",function(){n.call(Hz,String(cfe(n,s)?-1:s._index)),z1(e,r,n,i,s)}),o.on("mouseover",function(){o.call(vfe)}),o.on("mouseout",function(){o.call(dfe,s)}),sy.setTranslate(r,a.lx,a.ly)}t(hfe,"drawHeader");function z1(e,r,n,i,s){n||(n=r,n.attr("pointer-events","all"));var o=!WEe(n)||s.type==="buttons"?s.buttons:[],a=s.type==="dropdown"?Cn.dropdownButtonClassName:Cn.buttonClassName,l=n.selectAll("g."+a).data(rc.filterVisible(o)),u=l.enter().append("g").classed(a,!0),f=l.exit();s.type==="dropdown"?(u.attr("opacity","0").transition().attr("opacity","1"),f.transition().attr("opacity","0").remove()):f.remove();var h=0,v=0,c=s._dims,d=["up","down"].indexOf(s.direction)!==-1;s.type==="dropdown"&&(d?v=c.headerHeight+Cn.gapButtonHeader:h=c.headerWidth+Cn.gapButtonHeader),s.type==="dropdown"&&s.direction==="up"&&(v=-Cn.gapButtonHeader+Cn.gapButton-c.openHeight),s.type==="dropdown"&&s.direction==="left"&&(h=-Cn.gapButtonHeader+Cn.gapButton-c.openWidth);var g={x:c.lx+h+s.pad.l,y:c.ly+v+s.pad.t,yPad:Cn.gapButton,xPad:Cn.gapButton,index:0},p={l:g.x+s.borderwidth,t:g.y+s.borderwidth};l.each(function(b,m){var y=oy.select(this);y.call(K8,s,b,e).call(gfe,s,g),y.on("click",function(){oy.event.defaultPrevented||(b.execute&&(b.args2&&s.active===m?(Uz(e,s,b,r,n,i,-1),D1.executeAPICommand(e,b.method,b.args2)):(Uz(e,s,b,r,n,i,m),D1.executeAPICommand(e,b.method,b.args))),e.emit("plotly_buttonclicked",{menu:s,button:b,active:s.active}))}),y.on("mouseover",function(){y.call(vfe)}),y.on("mouseout",function(){y.call(dfe,s),l.call(u$,s)})}),l.call(u$,s),d?(p.w=Math.max(c.openWidth,c.headerWidth),p.h=g.y-p.t):(p.w=g.x-p.l,p.h=Math.max(c.openHeight,c.headerHeight)),p.direction=s.direction,i&&(l.size()?XEe(e,r,n,i,s,p):ZEe(i))}t(z1,"drawButtons");function XEe(e,r,n,i,s,o){var a=s.direction,l=a==="up"||a==="down",u=s._dims,f=s.active,h,v,c;if(l)for(v=0,c=0;c<f;c++)v+=u.heights[c]+Cn.gapButton;else for(h=0,c=0;c<f;c++)h+=u.widths[c]+Cn.gapButton;i.enable(o,h,v),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1"),i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}t(XEe,"drawScrollBox");function ZEe(e){var r=!!e.hbar,n=!!e.vbar;r&&e.hbar.transition().attr("opacity","0").each("end",function(){r=!1,n||e.disable()}),n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,r||e.disable()})}t(ZEe,"hideScrollBox");function K8(e,r,n,i){e.call(KEe,r).call(JEe,r,n,i)}t(K8,"drawItem");function KEe(e,r){var n=rc.ensureSingle(e,"rect",Cn.itemRectClassName,function(i){i.attr({rx:Cn.rx,ry:Cn.ry,"shape-rendering":"crispEdges"})});n.call(I1.stroke,r.bordercolor).call(I1.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}t(KEe,"drawItemRect");function JEe(e,r,n,i){var s=rc.ensureSingle(e,"text",Cn.itemTextClassName,function(l){l.attr({"text-anchor":"start","data-notex":1})}),o=n.label,a=i._fullLayout._meta;a&&(o=rc.templateString(o,a)),s.call(sy.font,r.font).text(o).call(W_.convertToTspans,i)}t(JEe,"drawItemText");function u$(e,r){var n=r.active;e.each(function(i,s){var o=oy.select(this);s===n&&r.showactive&&o.select("rect."+Cn.itemRectClassName).call(I1.fill,Cn.activeColor)})}t(u$,"styleButtons");function vfe(e){e.select("rect."+Cn.itemRectClassName).call(I1.fill,Cn.hoverColor)}t(vfe,"styleOnMouseOver");function dfe(e,r){e.select("rect."+Cn.itemRectClassName).call(I1.fill,r.bgcolor)}t(dfe,"styleOnMouseOut");function QEe(e,r){var n=r._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=sy.tester.selectAll("g."+Cn.dropdownButtonClassName).data(rc.filterVisible(r.buttons));i.enter().append("g").classed(Cn.dropdownButtonClassName,!0);var s=["up","down"].indexOf(r.direction)!==-1;i.each(function(h,v){var c=oy.select(this);c.call(K8,r,h,e);var d=c.select("."+Cn.itemTextClassName),g=d.node()&&sy.bBox(d.node()).width,p=Math.max(g+Cn.textPadX,Cn.minWidth),b=r.font.size*ffe,m=W_.lineCount(d),y=Math.max(b*m,Cn.minHeight)+Cn.textOffsetY;y=Math.ceil(y),p=Math.ceil(p),n.widths[v]=p,n.heights[v]=y,n.height1=Math.max(n.height1,y),n.width1=Math.max(n.width1,p),s?(n.totalWidth=Math.max(n.totalWidth,p),n.openWidth=n.totalWidth,n.totalHeight+=y+Cn.gapButton,n.openHeight+=y+Cn.gapButton):(n.totalWidth+=p+Cn.gapButton,n.openWidth+=p+Cn.gapButton,n.totalHeight=Math.max(n.totalHeight,y),n.openHeight=n.totalHeight)}),s?n.totalHeight-=Cn.gapButton:n.totalWidth-=Cn.gapButton,n.headerWidth=n.width1+Cn.arrowPadX,n.headerHeight=n.height1,r.type==="dropdown"&&(s?(n.width1+=Cn.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=Cn.arrowPadX),i.remove();var o=n.totalWidth+r.pad.l+r.pad.r,a=n.totalHeight+r.pad.t+r.pad.b,l=e._fullLayout._size;n.lx=l.l+l.w*r.x,n.ly=l.t+l.h*(1-r.y);var u="left";rc.isRightAnchor(r)&&(n.lx-=o,u="right"),rc.isCenterAnchor(r)&&(n.lx-=o/2,u="center");var f="top";rc.isBottomAnchor(r)&&(n.ly-=a,f="bottom"),rc.isMiddleAnchor(r)&&(n.ly-=a/2,f="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),D1.autoMargin(e,pfe(r),{x:r.x,y:r.y,l:o*({right:1,center:.5}[u]||0),r:o*({left:1,center:.5}[u]||0),b:a*({top:1,middle:.5}[f]||0),t:a*({bottom:1,middle:.5}[f]||0)})}t(QEe,"findDimensions$1");function pfe(e){return Cn.autoMarginIdRoot+e._index}t(pfe,"autoMarginId$1");function gfe(e,r,n,i){i=i||{};var s=e.select("."+Cn.itemRectClassName),o=e.select("."+Cn.itemTextClassName),a=r.borderwidth,l=n.index,u=r._dims;sy.setTranslate(e,a+n.x,a+n.y);var f=["up","down"].indexOf(r.direction)!==-1,h=i.height||(f?u.heights[l]:u.height1);s.attr({x:0,y:0,width:i.width||(f?u.width1:u.widths[l]),height:h});var v=r.font.size*ffe,c=W_.lineCount(o),d=(c-1)*v/2;W_.positionText(o,Cn.textOffsetX,h/2-d+Cn.textOffsetY),f?n.y+=u.heights[l]+n.yPad:n.x+=u.widths[l]+n.xPad,n.index++}t(gfe,"setItemPosition");function Hz(e,r){e.attr(Cn.menuIndexAttrName,r||"-1").selectAll("g."+Cn.dropdownButtonClassName).remove()}t(Hz,"removeAllButtons");var eCe=Z8,tCe={moduleType:"component",name:eCe.name,layoutAttributes:sfe,supplyLayoutDefaults:qEe,draw:jEe},Dw={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},f$=Ho,rCe=JF,aCe=cn.extendDeepAll,nCe=_o.overrideAll,iCe=tw,yfe=ei.templatedArray,Zp=Dw,oCe=yfe("step",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not this step is included in the slider."].join(" ")},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle",description:["Sets the Plotly method to be called when the slider value is changed.","If the `skip` method is used, the API slider will function as normal","but will perform no API calls and will not bind automatically to state","updates. This may be used to create a component interface and attach to","slider events manually via JavaScript."].join(" ")},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}],description:["Sets the arguments values to be passed to the Plotly","method set in `method` on slide."].join(" ")},label:{valType:"string",description:"Sets the text label to appear on the slider"},value:{valType:"string",description:["Sets the value of the slider step, used to refer to the step programatically.","Defaults to the slider label if not provided."].join(" ")},execute:{valType:"boolean",dflt:!0,description:["When true, the API method is executed. When false, all other behaviors are the same","and command execution is skipped. This may be useful when hooking into, for example,","the `plotly_sliderchange` method and executing the API command manually without losing","the benefit of the slider automatically binding to the state of the plot through the","specification of `method` and `args`."].join(" ")}}),mfe=nCe(yfe("slider",{visible:{valType:"boolean",dflt:!0,description:["Determines whether or not the slider is visible."].join(" ")},active:{valType:"number",min:0,dflt:0,description:["Determines which button (by index starting from 0) is","considered active."].join(" ")},steps:oCe,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction",description:["Determines whether this slider length","is set in units of plot *fraction* or in *pixels.","Use `len` to set the value."].join(" ")},len:{valType:"number",min:0,dflt:1,description:["Sets the length of the slider","This measure excludes the padding of both ends.","That is, the slider's length is this length minus the","padding on both ends."].join(" ")},x:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the x position (in normalized coordinates) of the slider."},pad:aCe(rCe({editType:"arraydraw"}),{description:"Set the padding of the slider component along each side."},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",description:["Sets the slider's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,dflt:0,description:"Sets the y position (in normalized coordinates) of the slider."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top",description:["Sets the slider's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},transition:{duration:{valType:"number",min:0,dflt:150,description:"Sets the duration of the slider transition"},easing:{valType:"enumerated",values:iCe.transition.easing.values,dflt:"cubic-in-out",description:"Sets the easing function of the slider transition"}},currentvalue:{visible:{valType:"boolean",dflt:!0,description:["Shows the currently-selected value above the slider."].join(" ")},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",description:["The alignment of the value readout relative to the length of the slider."].join(" ")},offset:{valType:"number",dflt:10,description:["The amount of space, in pixels, between the current value label","and the slider."].join(" ")},prefix:{valType:"string",description:"When currentvalue.visible is true, this sets the prefix of the label."},suffix:{valType:"string",description:"When currentvalue.visible is true, this sets the suffix of the label."},font:f$({description:"Sets the font of the current value label text."})},font:f$({description:"Sets the font of the slider step labels."}),activebgcolor:{valType:"color",dflt:Zp.gripBgActiveColor,description:["Sets the background color of the slider grip","while dragging."].join(" ")},bgcolor:{valType:"color",dflt:Zp.railBgColor,description:"Sets the background color of the slider."},bordercolor:{valType:"color",dflt:Zp.railBorderColor,description:"Sets the color of the border enclosing the slider."},borderwidth:{valType:"number",min:0,dflt:Zp.railBorderWidth,description:"Sets the width (in px) of the border enclosing the slider."},ticklen:{valType:"number",min:0,dflt:Zp.tickLength,description:"Sets the length in pixels of step tick marks"},tickcolor:{valType:"color",dflt:Zp.tickColor,description:"Sets the color of the border enclosing the slider."},tickwidth:{valType:"number",min:0,dflt:1,description:"Sets the tick width (in px)."},minorticklen:{valType:"number",min:0,dflt:Zp.minorTickLength,description:"Sets the length in pixels of minor step tick marks"}}),"arraydraw","from-root"),Fg=Nt.exports,xfe=mu,bfe=mfe,sCe=Dw,lCe=sCe.name,uCe=bfe.steps,fCe=t(function(r,n){xfe(r,n,{name:lCe,handleItemDefaults:cCe})},"slidersDefaults");function cCe(e,r,n){function i(v,c){return Fg.coerce(e,r,bfe,v,c)}t(i,"coerce");for(var s=xfe(e,r,{name:"steps",handleItemDefaults:hCe}),o=0,a=0;a<s.length;a++)s[a].visible&&o++;var l;if(o<2?l=r.visible=!1:l=i("visible"),!!l){r._stepCount=o;var u=r._visibleSteps=Fg.filterVisible(s),f=i("active");(s[f]||{}).visible||(r.active=u[0]._index),i("x"),i("y"),Fg.noneOrAll(e,r,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),Fg.coerceFont(i,"font",n.font);var h=i("currentvalue.visible");h&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),Fg.coerceFont(i,"currentvalue.font",r.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}t(cCe,"sliderDefaults");function hCe(e,r){function n(o,a){return Fg.coerce(e,r,uCe,o,a)}t(n,"coerce");var i;if(e.method!=="skip"&&!Array.isArray(e.args)?i=r.visible=!1:i=n("visible"),i){n("method"),n("args");var s=n("label","step-"+r._index);n("value",s),n("execute")}}t(hCe,"stepDefaults");var wh=Va.exports,X_=so.exports,lp=$a.exports,Sh=bn.exports,ac=Nt.exports,vCe=ac.strTranslate,f1=Ji,dCe=ei.arrayEditor,Zn=Dw,J8=yl,_fe=J8.LINE_SPACING,RA=J8.FROM_TL,PA=J8.FROM_BR,pCe=t(function(r){var n=r._fullLayout,i=gCe(n,r),s=n._infolayer.selectAll("g."+Zn.containerClassName).data(i.length>0?[0]:[]);s.enter().append("g").classed(Zn.containerClassName,!0).style("cursor","ew-resize");function o(f){f._commandObserver&&(f._commandObserver.remove(),delete f._commandObserver),X_.autoMargin(r,wfe(f))}if(t(o,"clearSlider"),s.exit().each(function(){wh.select(this).selectAll("g."+Zn.groupClassName).each(o)}).remove(),i.length!==0){var a=s.selectAll("g."+Zn.groupClassName).data(i,yCe);a.enter().append("g").classed(Zn.groupClassName,!0),a.exit().each(o).remove();for(var l=0;l<i.length;l++){var u=i[l];mCe(r,u)}a.each(function(f){var h=wh.select(this);TCe(f),X_.manageCommandObserver(r,f,f._visibleSteps,function(v){var c=h.data()[0];c.active!==v.index&&(c._dragging||Afe(r,h,c,v.index,!1,!0))}),xCe(r,wh.select(this),f)})}},"draw");function wfe(e){return Zn.autoMarginIdRoot+e._index}t(wfe,"autoMarginId");function gCe(e,r){for(var n=e[Zn.name],i=[],s=0;s<n.length;s++){var o=n[s];!o.visible||(o._gd=r,i.push(o))}return i}t(gCe,"makeSliderData");function yCe(e){return e._index}t(yCe,"keyFunction");function mCe(e,r){var n=Sh.tester.selectAll("g."+Zn.labelGroupClass).data(r._visibleSteps);n.enter().append("g").classed(Zn.labelGroupClass,!0);var i=0,s=0;n.each(function(g){var p=wh.select(this),b=Tfe(p,{step:g},r),m=b.node();if(m){var y=Sh.bBox(m);s=Math.max(s,y.height),i=Math.max(i,y.width)}}),n.remove();var o=r._dims={};o.inputAreaWidth=Math.max(Zn.railWidth,Zn.gripHeight);var a=e._fullLayout._size;o.lx=a.l+a.w*r.x,o.ly=a.t+a.h*(1-r.y),r.lenmode==="fraction"?o.outerLength=Math.round(a.w*r.len):o.outerLength=r.len,o.inputAreaStart=0,o.inputAreaLength=Math.round(o.outerLength-r.pad.l-r.pad.r);var l=o.inputAreaLength-2*Zn.stepInset,u=l/(r._stepCount-1),f=i+Zn.labelPadding;if(o.labelStride=Math.max(1,Math.ceil(f/u)),o.labelHeight=s,o.currentValueMaxWidth=0,o.currentValueHeight=0,o.currentValueTotalHeight=0,o.currentValueMaxLines=1,r.currentvalue.visible){var h=Sh.tester.append("g");n.each(function(g){var p=Z_(h,r,g.label),b=p.node()&&Sh.bBox(p.node())||{width:0,height:0},m=f1.lineCount(p);o.currentValueMaxWidth=Math.max(o.currentValueMaxWidth,Math.ceil(b.width)),o.currentValueHeight=Math.max(o.currentValueHeight,Math.ceil(b.height)),o.currentValueMaxLines=Math.max(o.currentValueMaxLines,m)}),o.currentValueTotalHeight=o.currentValueHeight+r.currentvalue.offset,h.remove()}o.height=o.currentValueTotalHeight+Zn.tickOffset+r.ticklen+Zn.labelOffset+o.labelHeight+r.pad.t+r.pad.b;var v="left";ac.isRightAnchor(r)&&(o.lx-=o.outerLength,v="right"),ac.isCenterAnchor(r)&&(o.lx-=o.outerLength/2,v="center");var c="top";ac.isBottomAnchor(r)&&(o.ly-=o.height,c="bottom"),ac.isMiddleAnchor(r)&&(o.ly-=o.height/2,c="middle"),o.outerLength=Math.ceil(o.outerLength),o.height=Math.ceil(o.height),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly);var d={y:r.y,b:o.height*PA[c],t:o.height*RA[c]};r.lenmode==="fraction"?(d.l=0,d.xl=r.x-r.len*RA[v],d.r=0,d.xr=r.x+r.len*PA[v]):(d.x=r.x,d.l=o.outerLength*RA[v],d.r=o.outerLength*PA[v]),X_.autoMargin(e,wfe(r),d)}t(mCe,"findDimensions");function xCe(e,r,n){(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),r.call(Z_,n).call(SCe,n).call(_Ce,n).call(wCe,n).call(ACe,e,n).call(bCe,e,n);var i=n._dims;Sh.setTranslate(r,i.lx+n.pad.l,i.ly+n.pad.t),r.call(Mfe,n,!1),r.call(Z_,n)}t(xCe,"drawSlider");function Z_(e,r,n){if(!!r.currentvalue.visible){var i=r._dims,s,o;switch(r.currentvalue.xanchor){case"right":s=i.inputAreaLength-Zn.currentValueInset-i.currentValueMaxWidth,o="left";break;case"center":s=i.inputAreaLength*.5,o="middle";break;default:s=Zn.currentValueInset,o="left"}var a=ac.ensureSingle(e,"text",Zn.labelClass,function(c){c.attr({"text-anchor":o,"data-notex":1})}),l=r.currentvalue.prefix?r.currentvalue.prefix:"";if(typeof n=="string")l+=n;else{var u=r.steps[r.active].label,f=r._gd._fullLayout._meta;f&&(u=ac.templateString(u,f)),l+=u}r.currentvalue.suffix&&(l+=r.currentvalue.suffix),a.call(Sh.font,r.currentvalue.font).text(l).call(f1.convertToTspans,r._gd);var h=f1.lineCount(a),v=(i.currentValueMaxLines+1-h)*r.currentvalue.font.size*_fe;return f1.positionText(a,s,v),a}}t(Z_,"drawCurrentValue");function bCe(e,r,n){var i=ac.ensureSingle(e,"rect",Zn.gripRectClass,function(s){s.call(Sfe,r,e,n).style("pointer-events","all")});i.attr({width:Zn.gripWidth,height:Zn.gripHeight,rx:Zn.gripRadius,ry:Zn.gripRadius}).call(lp.stroke,n.bordercolor).call(lp.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}t(bCe,"drawGrip");function Tfe(e,r,n){var i=ac.ensureSingle(e,"text",Zn.labelClass,function(a){a.attr({"text-anchor":"middle","data-notex":1})}),s=r.step.label,o=n._gd._fullLayout._meta;return o&&(s=ac.templateString(s,o)),i.call(Sh.font,n.font).text(s).call(f1.convertToTspans,n._gd),i}t(Tfe,"drawLabel");function _Ce(e,r){var n=ac.ensureSingle(e,"g",Zn.labelsClass),i=r._dims,s=n.selectAll("g."+Zn.labelGroupClass).data(i.labelSteps);s.enter().append("g").classed(Zn.labelGroupClass,!0),s.exit().remove(),s.each(function(o){var a=wh.select(this);a.call(Tfe,o,r),Sh.setTranslate(a,Q8(r,o.fraction),Zn.tickOffset+r.ticklen+r.font.size*_fe+Zn.labelOffset+i.currentValueTotalHeight)})}t(_Ce,"drawLabelGroup");function c$(e,r,n,i,s){var o=Math.round(i*(n._stepCount-1)),a=n._visibleSteps[o]._index;a!==n.active&&Afe(e,r,n,a,!0,s)}t(c$,"handleInput");function Afe(e,r,n,i,s,o){var a=n.active;n.active=i,dCe(e.layout,Zn.name,n).applyUpdate("active",i);var l=n.steps[n.active];r.call(Mfe,n,o),r.call(Z_,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:s,previousActive:a}),l&&l.method&&s&&(r._nextMethod?(r._nextMethod.step=l,r._nextMethod.doCallback=s,r._nextMethod.doTransition=o):(r._nextMethod={step:l,doCallback:s,doTransition:o},r._nextMethodRaf=window.requestAnimationFrame(function(){var u=r._nextMethod.step;!u.method||(u.execute&&X_.executeAPICommand(e,u.method,u.args),r._nextMethod=null,r._nextMethodRaf=null)})))}t(Afe,"setActive");function Sfe(e,r,n){var i=n.node(),s=wh.select(r);function o(){return n.data()[0]}t(o,"getSliderOpts");function a(){var l=o();r.emit("plotly_sliderstart",{slider:l});var u=n.select("."+Zn.gripRectClass);wh.event.stopPropagation(),wh.event.preventDefault(),u.call(lp.fill,l.activebgcolor);var f=h$(l,wh.mouse(i)[0]);c$(r,n,l,f,!0),l._dragging=!0;function h(){var c=o(),d=h$(c,wh.mouse(i)[0]);c$(r,n,c,d,!1)}t(h,"mouseMoveHandler"),s.on("mousemove",h),s.on("touchmove",h);function v(){var c=o();c._dragging=!1,u.call(lp.fill,c.bgcolor),s.on("mouseup",null),s.on("mousemove",null),s.on("touchend",null),s.on("touchmove",null),r.emit("plotly_sliderend",{slider:c,step:c.steps[c.active]})}t(v,"mouseUpHandler"),s.on("mouseup",v),s.on("touchend",v)}t(a,"mouseDownHandler"),e.on("mousedown",a),e.on("touchstart",a)}t(Sfe,"attachGripEvents");function wCe(e,r){var n=e.selectAll("rect."+Zn.tickRectClass).data(r._visibleSteps),i=r._dims;n.enter().append("rect").classed(Zn.tickRectClass,!0),n.exit().remove(),n.attr({width:r.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(s,o){var a=o%i.labelStride===0,l=wh.select(this);l.attr({height:a?r.ticklen:r.minorticklen}).call(lp.fill,r.tickcolor),Sh.setTranslate(l,Q8(r,o/(r._stepCount-1))-.5*r.tickwidth,(a?Zn.tickOffset:Zn.minorTickOffset)+i.currentValueTotalHeight)})}t(wCe,"drawTicks");function TCe(e){var r=e._dims;r.labelSteps=[];for(var n=e._stepCount,i=0;i<n;i+=r.labelStride)r.labelSteps.push({fraction:i/(n-1),step:e._visibleSteps[i]})}t(TCe,"computeLabelSteps");function Mfe(e,r,n){for(var i=e.select("rect."+Zn.gripRectClass),s=0,o=0;o<r._stepCount;o++)if(r._visibleSteps[o]._index===r.active){s=o;break}var a=Q8(r,s/(r._stepCount-1));if(!r._invokingCommand){var l=i;n&&r.transition.duration>0&&(l=l.transition().duration(r.transition.duration).ease(r.transition.easing)),l.attr("transform",vCe(a-Zn.gripWidth*.5,r._dims.currentValueTotalHeight))}}t(Mfe,"setGripPosition");function Q8(e,r){var n=e._dims;return n.inputAreaStart+Zn.stepInset+(n.inputAreaLength-2*Zn.stepInset)*Math.min(1,Math.max(0,r))}t(Q8,"normalizedValueToPosition");function h$(e,r){var n=e._dims;return Math.min(1,Math.max(0,(r-Zn.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*Zn.stepInset-2*n.inputAreaStart)))}t(h$,"positionToNormalizedValue");function ACe(e,r,n){var i=n._dims,s=ac.ensureSingle(e,"rect",Zn.railTouchRectClass,function(o){o.call(Sfe,r,e,n).style("pointer-events","all")});s.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,Zn.tickOffset+n.ticklen+i.labelHeight)}).call(lp.fill,n.bgcolor).attr("opacity",0),Sh.setTranslate(s,0,i.currentValueTotalHeight)}t(ACe,"drawTouchRect");function SCe(e,r){var n=r._dims,i=n.inputAreaLength-Zn.railInset*2,s=ac.ensureSingle(e,"rect",Zn.railRectClass);s.attr({width:i,height:Zn.railWidth,rx:Zn.railRadius,ry:Zn.railRadius,"shape-rendering":"crispEdges"}).call(lp.stroke,r.bordercolor).call(lp.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px"),Sh.setTranslate(s,Zn.railInset,(n.inputAreaWidth-Zn.railWidth)*.5+n.currentValueTotalHeight)}t(SCe,"drawRail");var MCe=Dw,kCe={moduleType:"component",name:MCe.name,layoutAttributes:mfe,supplyLayoutDefaults:fCe,draw:pCe},v$=Fo,e7={bgcolor:{valType:"color",dflt:v$.background,editType:"plot",description:"Sets the background color of the range slider."},bordercolor:{valType:"color",dflt:v$.defaultLine,editType:"plot",description:"Sets the border color of the range slider."},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot",description:"Sets the border width of the range slider."},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0},description:["Determines whether or not the range slider range is","computed in relation to the input data.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1},description:["Sets the range of the range slider.","If not set, defaults to the full xaxis range.","If the axis `type` is *log*, then you must take the","log of your desired range.","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot",description:["The height of the range slider as a fraction of the","total plot area height."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the range slider will be visible.","If visible, perpendicular axes will be set to `fixedrange`"].join(" ")},editType:"calc"},kfe={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc",description:["Determines whether or not the range of this axis in","the rangeslider use the same value than in the main plot","when zooming in/out.","If *auto*, the autorange will be used.","If *fixed*, the `range` is used.","If *match*, the current range of the corresponding y-axis on the main subplot is used."].join(" ")},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["Sets the range of this axis for the rangeslider."].join(" ")},editType:"calc"},Iw={},t7={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},ECe=$o,CCe=Ji,Efe=t7,LCe=yl.LINE_SPACING,K_=Efe.name;function Cfe(e){var r=e&&e[K_];return r&&r.visible}t(Cfe,"isVisible");Iw.isVisible=Cfe;Iw.makeData=function(e){var r=ECe.list({_fullLayout:e},"x",!0),n=e.margin,i=[];if(!e._has("gl2d"))for(var s=0;s<r.length;s++){var o=r[s];if(Cfe(o)){i.push(o);var a=o[K_];a._id=K_+o._id,a._height=(e.height-n.b-n.t)*a.thickness,a._offsetShift=Math.floor(a.borderwidth/2)}}e._rangeSliderData=i};Iw.autoMarginOpts=function(e,r){var n=e._fullLayout,i=r[K_],s=r._id.charAt(0),o=0,a=0;if(r.side==="bottom"&&(o=r._depth,r.title.text!==n._dfltTitle[s])){a=1.5*r.title.font.size+10+i._offsetShift;var l=(r.title.text.match(CCe.BR_TAG_ALL)||[]).length;a+=l*r.title.font.size*LCe}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:i._height+o+Math.max(n.margin.b,a),pad:Efe.extraPad+i._offsetShift*2}};var DA,d$;function RCe(){if(d$)return DA;d$=1;var e=Nt.exports,r=ei,n=$o,i=e7,s=kfe;return DA=t(function(a,l,u){var f=a[u],h=l[u];if(!(f.rangeslider||l._requestRangeslider[h._id]))return;e.isPlainObject(f.rangeslider)||(f.rangeslider={});var v=f.rangeslider,c=r.newContainer(h,"rangeslider");function d(k,L){return e.coerce(v,c,i,k,L)}t(d,"coerce");var g,p;function b(k,L){return e.coerce(g,p,s,k,L)}t(b,"coerceRange");var m=d("visible");if(!!m){d("bgcolor",l.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!h.isValidRange(v.range)),d("range");var y=l._subplots;if(y)for(var T=y.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===n.name2id(u)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),_=e.simpleMap(T,n.id2name),M=0;M<_.length;M++){var w=_[M];g=v[w]||{},p=r.newContainer(c,w,"yaxis");var x=l[w],A;g.range&&x.isValidRange(g.range)&&(A="fixed");var S=b("rangemode",A);S!=="match"&&b("range",x.range.slice())}c._input=v}},"handleDefaults"),DA}t(RCe,"requireDefaults$N");var IA,p$;function PCe(){if(p$)return IA;p$=1;var e=$o.list,r=Lh().getAutoRange,n=t7;return IA=t(function(s){for(var o=e(s,"x",!0),a=0;a<o.length;a++){var l=o[a],u=l[n.name];u&&u.visible&&u.autorange&&(u._input.autorange=!0,u._input.range=u.range=r(s,l))}},"calcAutorange"),IA}t(PCe,"requireCalc_autorange");var zA,g$;function DCe(){if(g$)return zA;g$=1;var e=Va.exports,r=Na,n=so.exports,i=Nt.exports,s=i.strTranslate,o=bn.exports,a=$a.exports,l=Ey,u=Ti,f=$o,h=xu.exports,v=pv,c=t7;zA=t(function(x){for(var A=x._fullLayout,S=A._rangeSliderData,k=0;k<S.length;k++){var L=S[k][c.name];L._clipId=L._id+"-"+A._uid}function P(B){return B._name}t(P,"keyFunction");var D=A._infolayer.selectAll("g."+c.containerClassName).data(S,P);D.exit().each(function(B){var z=B[c.name];A._topdefs.select("#"+z._clipId).remove()}).remove(),S.length!==0&&(D.enter().append("g").classed(c.containerClassName,!0).attr("pointer-events","all"),D.each(function(B){var z=e.select(this),R=B[c.name],F=A[f.id2name(B.anchor)],O=R[f.id2name(B.anchor)];if(R.range){var q=i.simpleMap(R.range,B.r2l),H=i.simpleMap(B.range,B.r2l),j;H[0]<H[1]?j=[Math.min(q[0],H[0]),Math.max(q[1],H[1])]:j=[Math.max(q[0],H[0]),Math.min(q[1],H[1])],R.range=R._input.range=i.simpleMap(j,B.l2r)}B.cleanRange("rangeslider.range");var X=A._size,G=B.domain;R._width=X.w*(G[1]-G[0]);var $=Math.round(X.l+X.w*G[0]),te=Math.round(X.t+X.h*(1-B._counterDomainMin)+(B.side==="bottom"?B._depth:0)+R._offsetShift+c.extraPad);z.attr("transform",s($,te)),R._rl=i.simpleMap(R.range,B.r2l);var ee=R._rl[0],ie=R._rl[1],se=ie-ee;if(R.p2d=function(me){return me/R._width*se+ee},R.d2p=function(me){return(me-ee)/se*R._width},B.rangebreaks){var W=B.locateBreaks(ee,ie);if(W.length){var ne,he,re=0;for(ne=0;ne<W.length;ne++)he=W[ne],re+=he.max-he.min;var ae=R._width/(ie-ee-re),fe=[-ae*ee];for(ne=0;ne<W.length;ne++)he=W[ne],fe.push(fe[fe.length-1]-ae*(he.max-he.min));for(R.d2p=function(me){for(var pe=fe[0],oe=0;oe<W.length;oe++){var de=W[oe];if(me>=de.max)pe=fe[oe+1];else if(me<de.min)break}return pe+ae*me},ne=0;ne<W.length;ne++)he=W[ne],he.pmin=R.d2p(he.min),he.pmax=R.d2p(he.max);R.p2d=function(me){for(var pe=fe[0],oe=0;oe<W.length;oe++){var de=W[oe];if(me>=de.pmax)pe=fe[oe+1];else if(me<de.pmin)break}return(me-pe)/ae}}}if(O.rangemode!=="match"){var ce=F.r2l(O.range[0]),xe=F.r2l(O.range[1]),Te=xe-ce;R.d2pOppAxis=function(me){return(me-ce)/Te*R._height}}z.call(b,x,B,R).call(m,x,B,R).call(y,x,B,R).call(_,x,B,R,O).call(M,x,B,R).call(w,x,B,R),d(z,x,B,R),p(z,x,B,R,F,O),B.side==="bottom"&&l.draw(x,B._id+"title",{propContainer:B,propName:B._name+".title",placeholder:A._dfltTitle.x,attributes:{x:B._offset+B._length/2,y:te+R._height+R._offsetShift+10+1.5*B.title.font.size,"text-anchor":"middle"}})}))},"draw$3");function d(x,A,S,k){if(A._context.staticPlot)return;var L=x.select("rect."+c.slideBoxClassName).node(),P=x.select("rect."+c.grabAreaMinClassName).node(),D=x.select("rect."+c.grabAreaMaxClassName).node();function B(){var z=e.event,R=z.target,F=z.clientX||z.touches[0].clientX,O=F-x.node().getBoundingClientRect().left,q=k.d2p(S._rl[0]),H=k.d2p(S._rl[1]),j=h.coverSlip();this.addEventListener("touchmove",X),this.addEventListener("touchend",G),j.addEventListener("mousemove",X),j.addEventListener("mouseup",G);function X($){var te=$.clientX||$.touches[0].clientX,ee=+te-F,ie,se,W;switch(R){case L:W="ew-resize",ie=q+ee,se=H+ee;break;case P:W="col-resize",ie=q+ee,se=H;break;case D:W="col-resize",ie=q,se=H+ee;break;default:W="ew-resize",ie=O,se=O+ee;break}if(se<ie){var ne=se;se=ie,ie=ne}k._pixelMin=ie,k._pixelMax=se,v(e.select(j),W),g(x,A,S,k)}t(X,"mouseMove");function G(){j.removeEventListener("mousemove",X),j.removeEventListener("mouseup",G),this.removeEventListener("touchmove",X),this.removeEventListener("touchend",G),i.removeElement(j)}t(G,"mouseUp")}t(B,"mouseDownHandler"),x.on("mousedown",B),x.on("touchstart",B)}t(d,"setupDragElement");function g(x,A,S,k){function L(B){return S.l2r(i.constrain(B,k._rl[0],k._rl[1]))}t(L,"clamp");var P=L(k.p2d(k._pixelMin)),D=L(k.p2d(k._pixelMax));window.requestAnimationFrame(function(){r.call("_guiRelayout",A,S._name+".range",[P,D])})}t(g,"setDataRange");function p(x,A,S,k,L,P){var D=c.handleWidth/2;function B($){return i.constrain($,0,k._width)}t(B,"clamp");function z($){return i.constrain($,0,k._height)}t(z,"clampOppAxis");function R($){return i.constrain($,-D,k._width+D)}t(R,"clampHandle");var F=B(k.d2p(S._rl[0])),O=B(k.d2p(S._rl[1]));if(x.select("rect."+c.slideBoxClassName).attr("x",F).attr("width",O-F),x.select("rect."+c.maskMinClassName).attr("width",F),x.select("rect."+c.maskMaxClassName).attr("x",O).attr("width",k._width-O),P.rangemode!=="match"){var q=k._height-z(k.d2pOppAxis(L._rl[1])),H=k._height-z(k.d2pOppAxis(L._rl[0]));x.select("rect."+c.maskMinOppAxisClassName).attr("x",F).attr("height",q).attr("width",O-F),x.select("rect."+c.maskMaxOppAxisClassName).attr("x",F).attr("y",H).attr("height",k._height-H).attr("width",O-F),x.select("rect."+c.slideBoxClassName).attr("y",q).attr("height",H-q)}var j=.5,X=Math.round(R(F-D))-j,G=Math.round(R(O-D))+j;x.select("g."+c.grabberMinClassName).attr("transform",s(X,j)),x.select("g."+c.grabberMaxClassName).attr("transform",s(G,j))}t(p,"setPixelRange");function b(x,A,S,k){var L=i.ensureSingle(x,"rect",c.bgClassName,function(z){z.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=k.borderwidth%2===0?k.borderwidth:k.borderwidth-1,D=-k._offsetShift,B=o.crispRound(A,k.borderwidth);L.attr({width:k._width+P,height:k._height+P,transform:s(D,D),"stroke-width":B}).call(a.stroke,k.bordercolor).call(a.fill,k.bgcolor)}t(b,"drawBg");function m(x,A,S,k){var L=A._fullLayout,P=i.ensureSingleById(L._topdefs,"clipPath",k._clipId,function(D){D.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:k._width,height:k._height})}t(m,"addClipPath");function y(x,A,S,k){var L=A.calcdata,P=x.selectAll("g."+c.rangePlotClassName).data(S._subplotsWith,i.identity);P.enter().append("g").attr("class",function(B){return c.rangePlotClassName+" "+B}).call(o.setClipUrl,k._clipId,A),P.order(),P.exit().remove();var D;P.each(function(B,z){var R=e.select(this),F=z===0,O=f.getFromId(A,B,"y"),q=O._name,H=k[q],j={data:[],layout:{xaxis:{type:S.type,domain:[0,1],range:k.range.slice(),calendar:S.calendar},width:k._width,height:k._height,margin:{t:0,b:0,l:0,r:0}},_context:A._context};S.rangebreaks&&(j.layout.xaxis.rangebreaks=S.rangebreaks),j.layout[q]={type:O.type,domain:[0,1],range:H.rangemode!=="match"?H.range.slice():O.range.slice(),calendar:O.calendar},O.rangebreaks&&(j.layout[q].rangebreaks=O.rangebreaks),n.supplyDefaults(j);var X=j._fullLayout.xaxis,G=j._fullLayout[q];X.clearCalc(),X.setScale(),G.clearCalc(),G.setScale();var $={id:B,plotgroup:R,xaxis:X,yaxis:G,isRangePlot:!0};F?D=$:($.mainplot="xy",$.mainplotinfo=D),u.rangePlot(A,$,T(L,B))})}t(y,"drawRangePlot");function T(x,A){for(var S=[],k=0;k<x.length;k++){var L=x[k],P=L[0].trace;P.xaxis+P.yaxis===A&&S.push(L)}return S}t(T,"filterRangePlotCalcData");function _(x,A,S,k,L){var P=i.ensureSingle(x,"rect",c.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",k._height).call(a.fill,c.maskColor);var D=i.ensureSingle(x,"rect",c.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(D.attr("height",k._height).call(a.fill,c.maskColor),L.rangemode!=="match"){var B=i.ensureSingle(x,"rect",c.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});B.attr("width",k._width).call(a.fill,c.maskOppAxisColor);var z=i.ensureSingle(x,"rect",c.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});z.attr("width",k._width).style("border-top",c.maskOppBorder).call(a.fill,c.maskOppAxisColor)}}t(_,"drawMasks");function M(x,A,S,k){if(!A._context.staticPlot){var L=i.ensureSingle(x,"rect",c.slideBoxClassName,function(P){P.attr({y:0,cursor:c.slideBoxCursor,"shape-rendering":"crispEdges"})});L.attr({height:k._height,fill:c.slideBoxFill})}}t(M,"drawSlideBox");function w(x,A,S,k){var L=i.ensureSingle(x,"g",c.grabberMinClassName),P=i.ensureSingle(x,"g",c.grabberMaxClassName),D={x:0,width:c.handleWidth,rx:c.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":c.handleStrokeWidth,"shape-rendering":"crispEdges"},B={y:Math.round(k._height/4),height:Math.round(k._height/2)},z=i.ensureSingle(L,"rect",c.handleMinClassName,function(H){H.attr(D)});z.attr(B);var R=i.ensureSingle(P,"rect",c.handleMaxClassName,function(H){H.attr(D)});R.attr(B);var F={width:c.grabAreaWidth,x:0,y:0,fill:c.grabAreaFill,cursor:A._context.staticPlot?void 0:c.grabAreaCursor},O=i.ensureSingle(L,"rect",c.grabAreaMinClassName,function(H){H.attr(F)});O.attr("height",k._height);var q=i.ensureSingle(P,"rect",c.grabAreaMaxClassName,function(H){H.attr(F)});q.attr("height",k._height)}return t(w,"drawGrabbers"),zA}t(DCe,"requireDraw$1");var ICe=Nt.exports,zCe=e7,FCe=kfe,FA=Iw,BCe={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:ICe.extendFlat({},zCe,{yaxis:FCe})}}},layoutAttributes:e7,handleDefaults:RCe(),calcAutorange:PCe(),draw:DCe(),isVisible:FA.isVisible,makeData:FA.makeData,autoMarginOpts:FA.autoMarginOpts},OCe=Ho,y$=Fo,NCe=ei.templatedArray,qCe=NCe("button",{visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Determines whether or not this button is visible."},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot",description:["The unit of measurement that the `count` value will set the range by."].join(" ")},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot",description:["Sets the range update mode.","If *backward*, the range update shifts the start of range","back *count* times *step* milliseconds.","If *todate*, the range update shifts the start of range","back to the first timestamp from *count* times","*step* milliseconds back.","For example, with `step` set to *year* and `count` set to *1*","the range update shifts the start of the range back to","January 01 of the current year.","Month and year *todate* are currently available only","for the built-in (Gregorian) calendar."].join(" ")},count:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the number of steps to take to update the range.","Use with `step` to specify the update interval."].join(" ")},label:{valType:"string",editType:"plot",description:"Sets the text label to appear on the button."},editType:"plot",description:["Sets the specifications for each buttons.","By default, a range selector comes with no buttons."].join(" ")}),$z={visible:{valType:"boolean",editType:"plot",description:["Determines whether or not this range selector is visible.","Note that range selectors are only available for x axes of","`type` set to or auto-typed to *date*."].join(" ")},buttons:qCe,x:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the x position (in normalized coordinates) of the range selector."},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot",description:["Sets the range selector's horizontal position anchor.","This anchor binds the `x` position to the *left*, *center*","or *right* of the range selector."].join(" ")},y:{valType:"number",min:-2,max:3,editType:"plot",description:"Sets the y position (in normalized coordinates) of the range selector."},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot",description:["Sets the range selector's vertical position anchor","This anchor binds the `y` position to the *top*, *middle*","or *bottom* of the range selector."].join(" ")},font:OCe({editType:"plot",description:"Sets the font of the range selector button text."}),bgcolor:{valType:"color",dflt:y$.lightLine,editType:"plot",description:"Sets the background color of the range selector buttons."},activecolor:{valType:"color",editType:"plot",description:"Sets the background color of the active range selector button."},bordercolor:{valType:"color",dflt:y$.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the range selector."},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot",description:"Sets the width (in px) of the border enclosing the range selector."},editType:"plot"},Lfe={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10},m_=Nt.exports,UCe=$a.exports,HCe=ei,$Ce=mu,Rfe=$z,Vz=Lfe,VCe=t(function(r,n,i,s,o){var a=r.rangeselector||{},l=HCe.newContainer(n,"rangeselector");function u(d,g){return m_.coerce(a,l,Rfe,d,g)}t(u,"coerce");var f=$Ce(a,l,{name:"buttons",handleItemDefaults:GCe,calendar:o}),h=u("visible",f.length>0);if(h){var v=jCe(n,i,s);u("x",v[0]),u("y",v[1]),m_.noneOrAll(r,n,["x","y"]),u("xanchor"),u("yanchor"),m_.coerceFont(u,"font",i.font);var c=u("bgcolor");u("activecolor",UCe.contrast(c,Vz.lightAmount,Vz.darkAmount)),u("bordercolor"),u("borderwidth")}},"handleDefaults");function GCe(e,r,n,i){var s=i.calendar;function o(u,f){return m_.coerce(e,r,Rfe.buttons,u,f)}t(o,"coerce");var a=o("visible");if(a){var l=o("step");l!=="all"&&(s&&s!=="gregorian"&&(l==="month"||l==="year")?r.stepmode="backward":o("stepmode"),o("count")),o("label")}}t(GCe,"buttonDefaults");function jCe(e,r,n){for(var i=n.filter(function(l){return r[l].anchor===e._id}),s=0,o=0;o<i.length;o++){var a=r[i[o]].domain;a&&(s=Math.max(a[1],s))}return[e.domain[0],s+Vz.yPad]}t(jCe,"getPosDflt");const YCe=Hc($me);var WCe=YCe,XCe=Nt.exports.titleCase,ZCe=t(function(r,n){var i=r._name,s={};if(n.step==="all")s[i+".autorange"]=!0;else{var o=KCe(r,n);s[i+".range[0]"]=o[0],s[i+".range[1]"]=o[1]}return s},"getUpdateObject");function KCe(e,r){var n=e.range,i=new Date(e.r2l(n[1])),s=r.step,o=WCe["utc"+XCe(s)],a=r.count,l;switch(r.stepmode){case"backward":l=e.l2r(+o.offset(i,-a));break;case"todate":var u=o.offset(i,-a);l=e.l2r(+o.ceil(u));break}var f=n[1];return[l,f]}t(KCe,"getXRange");var J_=Va.exports,JCe=Na,QCe=so.exports,m$=$a.exports,Pfe=bn.exports,od=Nt.exports,x$=od.strTranslate,x_=Ji,e4e=$o,r7=yl,b$=r7.LINE_SPACING,_$=r7.FROM_TL,w$=r7.FROM_BR,Gz=Lfe,t4e=ZCe,r4e=t(function(r){var n=r._fullLayout,i=n._infolayer.selectAll(".rangeselector").data(a4e(r),n4e);i.enter().append("g").classed("rangeselector",!0),i.exit().remove(),i.style({cursor:"pointer","pointer-events":"all"}),i.each(function(s){var o=J_.select(this),a=s,l=a.rangeselector,u=o.selectAll("g.button").data(od.filterVisible(l.buttons));u.enter().append("g").classed("button",!0),u.exit().remove(),u.each(function(f){var h=J_.select(this),v=t4e(a,f);f._isActive=i4e(a,f,v),h.call(BA,l,f),h.call(s4e,l,f,r),h.on("click",function(){r._dragged||JCe.call("_guiRelayout",r,v)}),h.on("mouseover",function(){f._isHovered=!0,h.call(BA,l,f)}),h.on("mouseout",function(){f._isHovered=!1,h.call(BA,l,f)})}),u4e(r,u,l,a._name,o)})},"draw");function a4e(e){for(var r=e4e.list(e,"x",!0),n=[],i=0;i<r.length;i++){var s=r[i];s.rangeselector&&s.rangeselector.visible&&n.push(s)}return n}t(a4e,"makeSelectorData");function n4e(e){return e._id}t(n4e,"selectorKeyFunc");function i4e(e,r,n){if(r.step==="all")return e.autorange===!0;var i=Object.keys(n);return e.range[0]===n[i[0]]&&e.range[1]===n[i[1]]}t(i4e,"isActive");function BA(e,r,n){var i=od.ensureSingle(e,"rect","selector-rect",function(s){s.attr("shape-rendering","crispEdges")});i.attr({rx:Gz.rx,ry:Gz.ry}),i.call(m$.stroke,r.bordercolor).call(m$.fill,o4e(r,n)).style("stroke-width",r.borderwidth+"px")}t(BA,"drawButtonRect");function o4e(e,r){return r._isActive||r._isHovered?e.activecolor:e.bgcolor}t(o4e,"getFillColor");function s4e(e,r,n,i){function s(a){x_.convertToTspans(a,i)}t(s,"textLayout");var o=od.ensureSingle(e,"text","selector-text",function(a){a.attr("text-anchor","middle")});o.call(Pfe.font,r.font).text(l4e(n,i._fullLayout._meta)).call(s)}t(s4e,"drawButtonText");function l4e(e,r){return e.label?r?od.templateString(e.label,r):e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}t(l4e,"getLabel");function u4e(e,r,n,i,s){var o=0,a=0,l=n.borderwidth;r.each(function(){var d=J_.select(this),g=d.select(".selector-text"),p=n.font.size*b$,b=Math.max(p*x_.lineCount(g),16)+3;a=Math.max(a,b)}),r.each(function(){var d=J_.select(this),g=d.select(".selector-rect"),p=d.select(".selector-text"),b=p.node()&&Pfe.bBox(p.node()).width,m=n.font.size*b$,y=x_.lineCount(p),T=Math.max(b+10,Gz.minButtonWidth);d.attr("transform",x$(l+o,l)),g.attr({x:0,y:0,width:T,height:a}),x_.positionText(p,T/2,a/2-(y-1)*m/2+3),o+=T+5});var u=e._fullLayout._size,f=u.l+u.w*n.x,h=u.t+u.h*(1-n.y),v="left";od.isRightAnchor(n)&&(f-=o,v="right"),od.isCenterAnchor(n)&&(f-=o/2,v="center");var c="top";od.isBottomAnchor(n)&&(h-=a,c="bottom"),od.isMiddleAnchor(n)&&(h-=a/2,c="middle"),o=Math.ceil(o),a=Math.ceil(a),f=Math.round(f),h=Math.round(h),QCe.autoMargin(e,i+"-range-selector",{x:n.x,y:n.y,l:o*_$[v],r:o*w$[v],b:a*w$[c],t:a*_$[c]}),s.attr("transform",x$(f,h))}t(u4e,"reposition");var f4e={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:$z}}},layoutAttributes:$z,handleDefaults:VCe,draw:r4e},vo={},T$=cn.extendFlat;vo.attributes=function(e,r){e=e||{},r=r||{};var n={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",s=e.trace?"trace ":"subplot ",o=r.description?" "+r.description:"",a={x:T$({},n,{description:["Sets the horizontal domain of this ",i,s,"(in plot fraction).",o].join("")}),y:T$({},n,{description:["Sets the vertical domain of this ",i,s,"(in plot fraction).",o].join("")}),editType:e.editType};return e.noGridCell||(a.row={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this row in the grid for this ",i,s,".",o].join("")},a.column={valType:"integer",min:0,dflt:0,editType:e.editType,description:["If there is a layout grid, use the domain ","for this column in the grid for this ",i,s,".",o].join("")}),a};vo.defaults=function(e,r,n,i){var s=i&&i.x||[0,1],o=i&&i.y||[0,1],a=r.grid;if(a){var l=n("domain.column");l!==void 0&&(l<a.columns?s=a._domains.x[l]:delete e.domain.column);var u=n("domain.row");u!==void 0&&(u<a.rows?o=a._domains.y[u]:delete e.domain.row)}var f=n("domain.x",s),h=n("domain.y",o);f[0]<f[1]||(e.domain.x=s.slice()),h[0]<h[1]||(e.domain.y=o.slice())};var c4e=Nt.exports,h4e=_y.counter,v4e=vo.attributes,A$=al.idRegex,d4e=ei,jz={rows:{valType:"integer",min:1,editType:"plot",description:["The number of rows in the grid. If you provide a 2D `subplots`","array or a `yaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot",description:["Is the first row the top or the bottom? Note that columns","are always enumerated from left to right."].join(" ")},columns:{valType:"integer",min:1,editType:"plot",description:["The number of columns in the grid. If you provide a 2D `subplots`","array, the length of its longest row is used as the default.","If you give an `xaxes` array, its length is used as the default.","But it's also possible to have a different length, if you","want to leave a row at the end for non-cartesian subplots."].join(" ")},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[h4e("xy").toString(),""],editType:"plot"},editType:"plot",description:["Used for freeform grids, where some axes may be shared across subplots","but others are not. Each entry should be a cartesian subplot id, like","*xy* or *x3y2*, or ** to leave that cell empty. You may reuse x axes","within the same column, and y axes within the same row.","Non-cartesian subplots and traces that support `domain` can place themselves","in this grid separately using the `gridcell` attribute."].join(" ")},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[A$.x.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an x axis id like *x*, *x2*, etc., or ** to","not put an x axis in that column. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `yaxes` is present,","will generate consecutive IDs."].join(" ")},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[A$.y.toString(),""],editType:"plot"},editType:"plot",description:["Used with `yaxes` when the x and y axes are shared across columns and rows.","Each entry should be an y axis id like *y*, *y2*, etc., or ** to","not put a y axis in that row. Entries other than ** must be unique.","Ignored if `subplots` is present. If missing but `xaxes` is present,","will generate consecutive IDs."].join(" ")},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot",description:["If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`,","we can generate defaults using consecutive axis IDs, in two ways:","*coupled* gives one x axis per column and one y axis per row.","*independent* uses a new xy pair for each cell, left-to-right across each row","then iterating rows according to `roworder`."].join(" ")},xgap:{valType:"number",min:0,max:1,editType:"plot",description:["Horizontal space between grid cells, expressed as a fraction","of the total width available to one cell. Defaults to 0.1","for coupled-axes grids and 0.2 for independent grids."].join(" ")},ygap:{valType:"number",min:0,max:1,editType:"plot",description:["Vertical space between grid cells, expressed as a fraction","of the total height available to one cell. Defaults to 0.1","for coupled-axes grids and 0.3 for independent grids."].join(" ")},domain:v4e({name:"grid",editType:"plot",noGridCell:!0},{description:["The first and last cells end exactly at the domain","edges, with no grout around the edges."].join(" ")}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot",description:["Sets where the x axis labels and titles go. *bottom* means","the very bottom of the grid. *bottom plot* is the lowest plot","that each x axis is used in. *top* and *top plot* are similar."].join(" ")},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot",description:["Sets where the y axis labels and titles go. *left* means","the very left edge of the grid. *left plot* is the leftmost plot","that each y axis is used in. *right* and *right plot* are similar."].join(" ")},editType:"plot"};function Q_(e,r,n){var i=r[n+"axes"],s=Object.keys((e._splomAxes||{})[n]||{});if(Array.isArray(i))return i;if(s.length)return s}t(Q_,"getAxes");function p4e(e,r){var n=e.grid||{},i=Q_(r,n,"x"),s=Q_(r,n,"y");if(!e.grid&&!i&&!s)return;var o=Array.isArray(n.subplots)&&Array.isArray(n.subplots[0]),a=Array.isArray(i),l=Array.isArray(s),u=a&&i!==n.xaxes&&l&&s!==n.yaxes,f,h;o?(f=n.subplots.length,h=n.subplots[0].length):(l&&(f=s.length),a&&(h=i.length));var v=d4e.newContainer(r,"grid");function c(w,x){return c4e.coerce(n,v,jz,w,x)}t(c,"coerce");var d=c("rows",f),g=c("columns",h);if(!(d*g>1)){delete r.grid;return}if(!o&&!a&&!l){var p=c("pattern")==="independent";p&&(o=!0)}v._hasSubplotGrid=o;var b=c("roworder"),m=b==="top to bottom",y=o?.2:.1,T=o?.3:.1,_,M;u&&r._splomGridDflt&&(_=r._splomGridDflt.xside,M=r._splomGridDflt.yside),v._domains={x:S$("x",c,y,_,g),y:S$("y",c,T,M,d,m)}}t(p4e,"sizeDefaults");function S$(e,r,n,i,s,o){var a=r(e+"gap",n),l=r("domain."+e);r(e+"side",i);for(var u=new Array(s),f=l[0],h=(l[1]-f)/(s-a),v=h*(1-a),c=0;c<s;c++){var d=f+h*c;u[o?s-1-c:c]=[d,d+v]}return u}t(S$,"fillGridPositions");function g4e(e,r){var n=r.grid;if(!(!n||!n._domains)){var i=e.grid||{},s=r._subplots,o=n._hasSubplotGrid,a=n.rows,l=n.columns,u=n.pattern==="independent",f,h,v,c,d,g,p,b=n._axisMap={};if(o){var m=i.subplots||[];g=n.subplots=new Array(a);var y=1;for(f=0;f<a;f++){var T=g[f]=new Array(l),_=m[f]||[];for(h=0;h<l;h++)if(u?(d=y===1?"xy":"x"+y+"y"+y,y++):d=_[h],T[h]="",s.cartesian.indexOf(d)!==-1){if(p=d.indexOf("y"),v=d.slice(0,p),c=d.slice(p),b[v]!==void 0&&b[v]!==h||b[c]!==void 0&&b[c]!==f)continue;T[h]=d,b[v]=h,b[c]=f}}}else{var M=Q_(r,i,"x"),w=Q_(r,i,"y");n.xaxes=M$(M,s.xaxis,l,b,"x"),n.yaxes=M$(w,s.yaxis,a,b,"y")}var x=n._anchors={},A=n.roworder==="top to bottom";for(var S in b){var k=S.charAt(0),L=n[k+"side"],P,D,B;if(L.length<8)x[S]="free";else if(k==="x"){if(L.charAt(0)==="t"===A?(P=0,D=1,B=a):(P=a-1,D=-1,B=-1),o){var z=b[S];for(f=P;f!==B;f+=D)if(d=g[f][z],!!d&&(p=d.indexOf("y"),d.slice(0,p)===S)){x[S]=d.slice(p);break}}else for(f=P;f!==B;f+=D)if(c=n.yaxes[f],s.cartesian.indexOf(S+c)!==-1){x[S]=c;break}}else if(L.charAt(0)==="l"?(P=0,D=1,B=l):(P=l-1,D=-1,B=-1),o){var R=b[S];for(f=P;f!==B;f+=D)if(d=g[R][f],!!d&&(p=d.indexOf("y"),d.slice(p)===S)){x[S]=d.slice(0,p);break}}else for(f=P;f!==B;f+=D)if(v=n.xaxes[f],s.cartesian.indexOf(v+S)!==-1){x[S]=v;break}}}}t(g4e,"contentDefaults");function M$(e,r,n,i,s){var o=new Array(n),a;function l(u,f){r.indexOf(f)!==-1&&i[f]===void 0?(o[u]=f,i[f]=u):o[u]=""}if(t(l,"fillOneAxis"),Array.isArray(e))for(a=0;a<n;a++)l(a,e[a]);else for(l(0,s),a=1;a<n;a++)l(a,s+(a+1));return o}t(M$,"fillGridAxes");var Dfe={moduleType:"component",name:"grid",schema:{layout:{grid:jz}},layoutAttributes:jz,sizeDefaults:p4e,contentDefaults:g4e},Ife={visible:{valType:"boolean",editType:"calc",description:["Determines whether or not this set of error bars is visible."].join(" ")},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc",description:["Determines the rule used to generate the error bars.","If *constant`, the bar lengths are of a constant value.","Set this constant in `value`.","If *percent*, the bar lengths correspond to a percentage of","underlying data. Set this percentage in `value`.","If *sqrt*, the bar lengths correspond to the square of the","underlying data.","If *data*, the bar lengths are set with data set `array`."].join(" ")},symmetric:{valType:"boolean",editType:"calc",description:["Determines whether or not the error bars have the same length","in both direction","(top/bottom for vertical bars, left/right for horizontal bars."].join(" ")},array:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar.","Values are plotted relative to the underlying data."].join(" ")},arrayminus:{valType:"data_array",editType:"calc",description:["Sets the data corresponding the length of each error bar in the","bottom (left) direction for vertical (horizontal) bars","Values are plotted relative to the underlying data."].join(" ")},value:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars."].join(" ")},valueminus:{valType:"number",min:0,dflt:10,editType:"calc",description:["Sets the value of either the percentage","(if `type` is set to *percent*) or the constant","(if `type` is set to *constant*) corresponding to the lengths of","the error bars in the","bottom (left) direction for vertical (horizontal) bars"].join(" ")},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style",description:"Sets the stoke color of the error bars."},thickness:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the thickness (in px) of the error bars."},width:{valType:"number",min:0,editType:"plot",description:["Sets the width (in px) of the cross-bar at both ends","of the error bars."].join(" ")},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style",description:["Obsolete.","Use the alpha channel in error bar `color` to set the opacity."].join(" ")}}},OA,k$;function y4e(){if(k$)return OA;k$=1;var e=xn,r=Na,n=Nt.exports,i=ei,s=Ife;return OA=t(function(o,a,l,u){var f="error_"+u.axis,h=i.newContainer(a,f),v=o[f]||{};function c(T,_){return n.coerce(v,h,s,T,_)}t(c,"coerce");var d=v.array!==void 0||v.value!==void 0||v.type==="sqrt",g=c("visible",d);if(g!==!1){var p=c("type","array"in v?"data":"percent"),b=!0;p!=="sqrt"&&(b=c("symmetric",!((p==="data"?"arrayminus":"valueminus")in v))),p==="data"?(c("array"),c("traceref"),b||(c("arrayminus"),c("tracerefminus"))):(p==="percent"||p==="constant")&&(c("value"),b||c("valueminus"));var m="copy_"+u.inherit+"style";if(u.inherit){var y=a["error_"+u.inherit];(y||{}).visible&&c(m,!(v.color||e(v.thickness)||e(v.width)))}(!u.inherit||!h[m])&&(c("color",l),c("thickness"),c("width",r.traceIs(a,"gl3d")?0:4))}},"defaults$M"),OA}t(y4e,"requireDefaults$M");var NA,E$;function zfe(){if(E$)return NA;E$=1,NA=t(function(n){var i=n.type,s=n.symmetric;if(i==="data"){var o=n.array||[];if(s)return t(function(h,v){var c=+o[v];return[c,c]},"computeError");var a=n.arrayminus||[];return t(function(h,v){var c=+o[v],d=+a[v];return!isNaN(c)||!isNaN(d)?[d||0,c||0]:[NaN,NaN]},"computeError")}else{var l=e(i,n.value),u=e(i,n.valueminus);return s||n.valueminus===void 0?t(function(h){var v=l(h);return[v,v]},"computeError"):t(function(h){return[u(h),l(h)]},"computeError")}},"makeComputeError");function e(r,n){if(r==="percent")return function(i){return Math.abs(i*n/100)};if(r==="constant")return function(){return Math.abs(n)};if(r==="sqrt")return function(i){return Math.sqrt(Math.abs(i))}}return t(e,"makeComputeErrorValue"),NA}t(zfe,"requireCompute_error");var qA,C$;function m4e(){if(C$)return qA;C$=1;var e=xn,r=Na,n=nn(),i=Nt.exports,s=zfe();qA=t(function(l){for(var u=l.calcdata,f=0;f<u.length;f++){var h=u[f],v=h[0].trace;if(v.visible===!0&&r.traceIs(v,"errorBarsOK")){var c=n.getFromId(l,v.xaxis),d=n.getFromId(l,v.yaxis);o(h,v,c,"x"),o(h,v,d,"y")}}},"calc");function o(a,l,u,f){var h=l["error_"+f]||{},v=h.visible&&["linear","log"].indexOf(u.type)!==-1,c=[];if(!!v){for(var d=s(h),g=0;g<a.length;g++){var p=a[g],b=p.i;if(b===void 0)b=g;else if(b===null)continue;var m=p[f];if(!!e(u.c2l(m))){var y=d(m,b);if(e(y[0])&&e(y[1])){var T=p[f+"s"]=m-y[0],_=p[f+"h"]=m+y[1];c.push(T,_)}}}var M=u._id,w=l._extremes[M],x=n.findExtremes(u,c,i.extendFlat({tozero:w.opts.tozero},{padded:!0}));w.min=w.min.concat(x.min),w.max=w.max.concat(x.max)}}return t(o,"calcOneAxis"),qA}t(m4e,"requireCalc$F");var UA,L$;function x4e(){if(L$)return UA;L$=1;var e=Va.exports,r=xn,n=bn.exports,i=ho;UA=t(function(a,l,u,f){var h,v=u.xaxis,c=u.yaxis,d=f&&f.duration>0;l.each(function(g){var p=g[0].trace,b=p.error_x||{},m=p.error_y||{},y;p.ids&&(y=t(function(w){return w.id},"keyFunc"));var T=i.hasMarkers(p)&&p.marker.maxdisplayed>0;!m.visible&&!b.visible&&(g=[]);var _=e.select(this).selectAll("g.errorbar").data(g,y);if(_.exit().remove(),!!g.length){b.visible||_.selectAll("path.xerror").remove(),m.visible||_.selectAll("path.yerror").remove(),_.style("opacity",1);var M=_.enter().append("g").classed("errorbar",!0);d&&M.style("opacity",0).transition().duration(f.duration).style("opacity",1),n.setClipUrl(_,u.layerClipId,a),_.each(function(w){var x=e.select(this),A=s(w,v,c);if(!(T&&!w.vis)){var S,k=x.select("path.yerror");if(m.visible&&r(A.x)&&r(A.yh)&&r(A.ys)){var L=m.width;S="M"+(A.x-L)+","+A.yh+"h"+2*L+"m-"+L+",0V"+A.ys,A.noYS||(S+="m-"+L+",0h"+2*L),h=!k.size(),h?k=x.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(k=k.transition().duration(f.duration).ease(f.easing)),k.attr("d",S)}else k.remove();var P=x.select("path.xerror");if(b.visible&&r(A.y)&&r(A.xh)&&r(A.xs)){var D=(b.copy_ystyle?m:b).width;S="M"+A.xh+","+(A.y-D)+"v"+2*D+"m0,-"+D+"H"+A.xs,A.noXS||(S+="m0,-"+D+"v"+2*D),h=!P.size(),h?P=x.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(P=P.transition().duration(f.duration).ease(f.easing)),P.attr("d",S)}else P.remove()}})}})},"plot");function s(o,a,l){var u={x:a.c2p(o.x),y:l.c2p(o.y)};return o.yh!==void 0&&(u.yh=l.c2p(o.yh),u.ys=l.c2p(o.ys),r(u.ys)||(u.noYS=!0,u.ys=l.c2p(o.ys,!0))),o.xh!==void 0&&(u.xh=a.c2p(o.xh),u.xs=a.c2p(o.xs),r(u.xs)||(u.noXS=!0,u.xs=a.c2p(o.xs,!0))),u}return t(s,"errorCoords"),UA}t(x4e,"requirePlot$y");var HA,R$;function b4e(){if(R$)return HA;R$=1;var e=Va.exports,r=$a.exports;return HA=t(function(i){i.each(function(s){var o=s[0].trace,a=o.error_y||{},l=o.error_x||{},u=e.select(this);u.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(r.stroke,a.color),l.copy_ystyle&&(l=a),u.selectAll("path.xerror").style("stroke-width",l.thickness+"px").call(r.stroke,l.color)})},"style"),HA}t(b4e,"requireStyle$g");var c1=Nt.exports,P$=_o.overrideAll,h1=Ife,l0={error_x:c1.extendFlat({},h1),error_y:c1.extendFlat({},h1)};delete l0.error_x.copy_zstyle;delete l0.error_y.copy_zstyle;delete l0.error_y.copy_ystyle;var cx={error_x:c1.extendFlat({},h1),error_y:c1.extendFlat({},h1),error_z:c1.extendFlat({},h1)};delete cx.error_x.copy_ystyle;delete cx.error_y.copy_ystyle;delete cx.error_z.copy_ystyle;delete cx.error_z.copy_zstyle;var _4e={moduleType:"component",name:"errorbars",schema:{traces:{scatter:l0,bar:l0,histogram:l0,scatter3d:P$(cx,"calc","nested"),scattergl:P$(l0,"calc","nested")}},supplyDefaults:y4e(),calc:m4e(),makeComputeError:zfe(),plot:x4e(),style:b4e(),hoverInfo:w4e};function w4e(e,r,n){(r.error_y||{}).visible&&(n.yerr=e.yh-e.y,r.error_y.symmetric||(n.yerrneg=e.y-e.ys)),(r.error_x||{}).visible&&(n.xerr=e.xh-e.x,r.error_x.symmetric||(n.xerrneg=e.x-e.xs))}t(w4e,"hoverInfo");var T4e={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}},Zd=Va.exports,$A=rl.exports,b_=so.exports,D$=Na,rd=nn(),Lb=xu.exports,Oc=Nt.exports,mh=Oc.strTranslate,Ffe=cn.extendFlat,VA=pv,gh=bn.exports,GA=$a.exports,A4e=Ey,S4e=Ji,M4e=Qu.flipScale,k4e=Rw,E4e=Y8,C4e=Jl,a7=yl,I$=a7.LINE_SPACING,z$=a7.FROM_TL,F$=a7.FROM_BR,Io=T4e.cn;function L4e(e){var r=e._fullLayout,n=r._infolayer.selectAll("g."+Io.colorbar).data(R4e(e),function(i){return i._id});n.enter().append("g").attr("class",function(i){return i._id}).classed(Io.colorbar,!0),n.each(function(i){var s=Zd.select(this);Oc.ensureSingle(s,"rect",Io.cbbg),Oc.ensureSingle(s,"g",Io.cbfills),Oc.ensureSingle(s,"g",Io.cblines),Oc.ensureSingle(s,"g",Io.cbaxis,function(a){a.classed(Io.crisp,!0)}),Oc.ensureSingle(s,"g",Io.cbtitleunshift,function(a){a.append("g").classed(Io.cbtitle,!0)}),Oc.ensureSingle(s,"rect",Io.cboutline);var o=P4e(s,i,e);o&&o.then&&(e._promises||[]).push(o),e._context.edits.colorbarPosition&&D4e(s,i,e)}),n.exit().each(function(i){b_.autoMargin(e,i._id)}).remove(),n.order()}t(L4e,"draw$1");function R4e(e){var r=e._fullLayout,n=e.calcdata,i=[],s,o,a,l;function u(T){return Ffe(T,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}t(u,"initOpts");function f(){typeof l.calc=="function"?l.calc(e,a,s):(s._fillgradient=o.reversescale?M4e(o.colorscale):o.colorscale,s._zrange=[o[l.min],o[l.max]])}t(f,"calcOpts");for(var h=0;h<n.length;h++){var v=n[h];a=v[0].trace;var c=a._module.colorbar;if(a.visible===!0&&c)for(var d=Array.isArray(c),g=d?c:[c],p=0;p<g.length;p++){l=g[p];var b=l.container;o=b?a[b]:a,o&&o.showscale&&(s=u(o.colorbar),s._id="cb"+a.uid+(d&&b?"-"+b:""),s._traceIndex=a.index,s._propPrefix=(b?b+".":"")+"colorbar.",s._meta=a._meta,f(),i.push(s))}}for(var m in r._colorAxes)if(o=r[m],o.showscale){var y=r._colorAxes[m];s=u(o.colorbar),s._id="cb"+m,s._propPrefix=m+".colorbar.",s._meta=r._meta,l={min:"cmin",max:"cmax"},y[0]!=="heatmap"&&(a=y[1],l.calc=a._module.colorbar.calc),f(),i.push(s)}return i}t(R4e,"makeColorBarData");function P4e(e,r,n){var i=r.orientation==="v",s=r.len,o=r.lenmode,a=r.thickness,l=r.thicknessmode,u=r.outlinewidth,f=r.borderwidth,h=r.bgcolor,v=r.xanchor,c=r.yanchor,d=r.xpad,g=r.ypad,p=r.x,b=i?r.y:1-r.y,m=n._fullLayout,y=m._size,T=r._fillcolor,_=r._line,M=r.title,w=M.side,x=r._zrange||Zd.extent((typeof T=="function"?T:_.color).domain()),A=typeof _.color=="function"?_.color:function(){return _.color},S=typeof T=="function"?T:function(){return T},k=r._levels,L=I4e(n,r,x),P=L.fill,D=L.line,B=Math.round(a*(l==="fraction"?i?y.w:y.h:1)),z=B/(i?y.w:y.h),R=Math.round(s*(o==="fraction"?i?y.h:y.w:1)),F=R/(i?y.h:y.w),O=Math.round(i?p*y.w+d:b*y.h+g),q={center:.5,right:1}[v]||0,H={top:1,middle:.5}[c]||0,j=i?p-q*z:b-H*z,X=i?b-H*F:p-q*F,G=Math.round(i?y.h*(1-X):y.w*X);r._lenFrac=F,r._thickFrac=z,r._uFrac=j,r._vFrac=X;var $=r._axis=z4e(n,r,x);$.position=z+(i?p+d/y.w:b+g/y.h);var te=["top","bottom"].indexOf(w)!==-1;if(i&&te&&($.title.side=w,$.titlex=p+d/y.w,$.titley=X+(M.side==="top"?F-g/y.h:g/y.h)),!i&&!te&&($.title.side=w,$.titley=b+g/y.h,$.titlex=X+d/y.w),_.color&&r.tickmode==="auto"){$.tickmode="linear",$.tick0=k.start;var ee=k.size,ie=Oc.constrain(R/50,4,15)+1,se=(x[1]-x[0])/((r.nticks||ie)*ee);if(se>1){var W=Math.pow(10,Math.floor(Math.log(se)/Math.LN10));ee*=W*Oc.roundUp(se/W,[2,5,10]),(Math.abs(k.start)/k.size+1e-6)%1<2e-6&&($.tick0=0)}$.dtick=ee}$.domain=i?[X+g/y.h,X+F-g/y.h]:[X+d/y.w,X+F-d/y.w],$.setScale(),e.attr("transform",mh(Math.round(y.l),Math.round(y.t)));var ne=e.select("."+Io.cbtitleunshift).attr("transform",mh(-Math.round(y.l),-Math.round(y.t))),he=$.ticklabelposition,re=$.title.font.size,ae=e.select("."+Io.cbaxis),fe,ce=0,xe=0;function Te(ye,we){var Ee={propContainer:$,propName:r._propPrefix+"title",traceIndex:r._traceIndex,_meta:r._meta,placeholder:m._dfltTitle.colorbar,containerGroup:e.select("."+Io.cbtitle)},De=ye.charAt(0)==="h"?ye.substr(1):"h"+ye;e.selectAll("."+De+",."+De+"-math-group").remove(),A4e.draw(n,ye,Ffe(Ee,we||{}))}t(Te,"drawTitle");function me(){if(i&&te||!i&&!te){var ye,we;w==="top"&&(ye=d+y.l+y.w*p,we=g+y.t+y.h*(1-X-F)+3+re*.75),w==="bottom"&&(ye=d+y.l+y.w*p,we=g+y.t+y.h*(1-X)-3-re*.25),w==="right"&&(we=g+y.t+y.h*b+3+re*.75,ye=d+y.l+y.w*X),Te($._id+"title",{attributes:{x:ye,y:we,"text-anchor":i?"start":"middle"}})}}t(me,"drawDummyTitle");function pe(){if(i&&!te||!i&&te){var ye=$.position||0,we=$._offset+$._length/2,Ee,De;if(w==="right")De=we,Ee=y.l+y.w*ye+10+re*($.showticklabels?1:.5);else if(Ee=we,w==="bottom"&&(De=y.t+y.h*ye+10+(he.indexOf("inside")===-1?$.tickfont.size:0)+($.ticks!=="intside"&&r.ticklen||0)),w==="top"){var Fe=M.text.split("<br>").length;De=y.t+y.h*ye+10-B-I$*re*Fe}Te((i?"h":"v")+$._id+"title",{avoid:{selection:Zd.select(n).selectAll("g."+$._id+"tick"),side:w,offsetTop:i?0:y.t,offsetLeft:i?y.l:0,maxShift:i?m.width:m.height},attributes:{x:Ee,y:De,"text-anchor":"middle"},transform:{rotate:i?-90:0,offset:0}})}}t(pe,"drawCbTitle");function oe(){if(!i&&!te||i&&te){var ye=e.select("."+Io.cbtitle),we=ye.select("text"),Ee=[-u/2,u/2],De=ye.select(".h"+$._id+"title-math-group").node(),Fe=15.6;we.node()&&(Fe=parseInt(we.node().style.fontSize,10)*I$);var qe;if(De?(qe=gh.bBox(De),xe=qe.width,ce=qe.height,ce>Fe&&(Ee[1]-=(ce-Fe)/2)):we.node()&&!we.classed(Io.jsPlaceholder)&&(qe=gh.bBox(we.node()),xe=qe.width,ce=qe.height),i){if(ce){if(ce+=5,w==="top")$.domain[1]-=ce/y.h,Ee[1]*=-1;else{$.domain[0]+=ce/y.h;var Je=S4e.lineCount(we);Ee[1]+=(1-Je)*Fe}ye.attr("transform",mh(Ee[0],Ee[1])),$.setScale()}}else xe&&(w==="right"&&($.domain[0]+=(xe+re/2)/y.w),ye.attr("transform",mh(Ee[0],Ee[1])),$.setScale())}e.selectAll("."+Io.cbfills+",."+Io.cblines).attr("transform",i?mh(0,Math.round(y.h*(1-$.domain[1]))):mh(Math.round(y.w*$.domain[0]),0)),ae.attr("transform",i?mh(0,Math.round(-y.t)):mh(Math.round(-y.l),0));var Ge=e.select("."+Io.cbfills).selectAll("rect."+Io.cbfill).attr("style","").data(P);Ge.enter().append("rect").classed(Io.cbfill,!0).style("stroke","none"),Ge.exit().remove();var et=x.map($.c2p).map(Math.round).sort(function(It,Vt){return It-Vt});Ge.each(function(It,Vt){var $t=[Vt===0?x[0]:(P[Vt]+P[Vt-1])/2,Vt===P.length-1?x[1]:(P[Vt]+P[Vt+1])/2].map($.c2p).map(Math.round);i&&($t[1]=Oc.constrain($t[1]+($t[1]>$t[0])?1:-1,et[0],et[1]));var Gt=Zd.select(this).attr(i?"x":"y",O).attr(i?"y":"x",Zd.min($t)).attr(i?"width":"height",Math.max(B,2)).attr(i?"height":"width",Math.max(Zd.max($t)-Zd.min($t),2));if(r._fillgradient)gh.gradient(Gt,n,r._id,i?"vertical":"horizontalreversed",r._fillgradient,"fill");else{var Jt=S(It).replace("e-","");Gt.attr("fill",$A(Jt).toHexString())}});var Ue=e.select("."+Io.cblines).selectAll("path."+Io.cbline).data(_.color&&_.width?D:[]);Ue.enter().append("path").classed(Io.cbline,!0),Ue.exit().remove(),Ue.each(function(It){var Vt=O,$t=Math.round($.c2p(It))+_.width/2%1;Zd.select(this).attr("d","M"+(i?Vt+","+$t:$t+","+Vt)+(i?"h":"v")+B).call(gh.lineGroupStyle,_.width,A(It),_.dash)}),ae.selectAll("g."+$._id+"tick,path").remove();var Ye=O+B+(u||0)/2-(r.ticks==="outside"?1:0),$e=rd.calcTicks($),Ct=rd.getTickSigns($)[2];return rd.drawTicks(n,$,{vals:$.ticks==="inside"?rd.clipEnds($,$e):$e,layer:ae,path:rd.makeTickPath($,Ye,Ct),transFn:rd.makeTransTickFn($)}),rd.drawLabels(n,$,{vals:$e,layer:ae,transFn:rd.makeTransTickLabelFn($),labelFns:rd.makeLabelFns($,Ye)})}t(oe,"drawAxis");function de(){var ye,we=B+u/2;he.indexOf("inside")===-1&&(ye=gh.bBox(ae.node()),we+=i?ye.width:ye.height),fe=ne.select("text");var Ee=0,De=i&&w==="top",Fe=!i&&w==="right",qe=0;if(fe.node()&&!fe.classed(Io.jsPlaceholder)){var Je,Ge=ne.select(".h"+$._id+"title-math-group").node();Ge&&(i&&te||!i&&!te)?(ye=gh.bBox(Ge),Ee=ye.width,Je=ye.height):(ye=gh.bBox(ne.node()),Ee=ye.right-y.l-(i?O:G),Je=ye.bottom-y.t-(i?G:O),!i&&w==="top"&&(we+=ye.height,qe=ye.height)),Fe&&(fe.attr("transform",mh(Ee/2+re/2,0)),Ee*=2),we=Math.max(we,i?Ee:Je)}var et=(i?d:g)*2+we+f+u/2,Ue=0;!i&&M.text&&c==="bottom"&&b<=0&&(Ue=et/2,et+=Ue,qe+=Ue),m._hColorbarMoveTitle=Ue,m._hColorbarMoveCBTitle=qe;var Ye=f+u;e.select("."+Io.cbbg).attr("x",(i?O:G)-Ye/2-(i?d:0)).attr("y",(i?G:O)-(i?R:g+qe-Ue)).attr(i?"width":"height",Math.max(et-Ue,2)).attr(i?"height":"width",Math.max(R+Ye,2)).call(GA.fill,h).call(GA.stroke,r.bordercolor).style("stroke-width",f);var $e=Fe?Math.max(Ee-10,0):0;if(e.selectAll("."+Io.cboutline).attr("x",(i?O:G+d)+$e).attr("y",(i?G+g-R:O)+(De?ce:0)).attr(i?"width":"height",Math.max(B,2)).attr(i?"height":"width",Math.max(R-(i?2*g+ce:2*d+$e),2)).call(GA.stroke,r.outlinecolor).style({fill:"none","stroke-width":u}),e.attr("transform",mh(y.l-(i?q*et:0),y.t-(i?0:(1-H)*et-qe))),!i&&(f||$A(h).getAlpha()&&!$A.equals(m.paper_bgcolor,h))){var Ct=ae.selectAll("text"),It=Ct[0].length,Vt=e.select("."+Io.cbbg).node(),$t=gh.bBox(Vt),Gt=gh.getTranslate(e),Jt=2;Ct.each(function(ze,tt){var at=0,vt=It-1;if(tt===at||tt===vt){var _t=gh.bBox(this),Rt=gh.getTranslate(this),nr;if(tt===vt){var ir=_t.right+Rt.x,ur=$t.right+Gt.x+G-f-Jt+p;nr=ur-ir,nr>0&&(nr=0)}else if(tt===at){var qt=_t.left+Rt.x,hr=$t.left+Gt.x+G+f+Jt;nr=hr-qt,nr<0&&(nr=0)}nr&&(It<3?this.setAttribute("transform","translate("+nr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var kt={},ft=z$[v],zt=F$[v],Pt=z$[c],Et=F$[c],Wt=et-B;i?(o==="pixels"?(kt.y=b,kt.t=R*Pt,kt.b=R*Et):(kt.t=kt.b=0,kt.yt=b+s*Pt,kt.yb=b-s*Et),l==="pixels"?(kt.x=p,kt.l=et*ft,kt.r=et*zt):(kt.l=Wt*ft,kt.r=Wt*zt,kt.xl=p-a*ft,kt.xr=p+a*zt)):(o==="pixels"?(kt.x=p,kt.l=R*ft,kt.r=R*zt):(kt.l=kt.r=0,kt.xl=p+s*ft,kt.xr=p-s*zt),l==="pixels"?(kt.y=1-b,kt.t=et*Pt,kt.b=et*Et):(kt.t=Wt*Pt,kt.b=Wt*Et,kt.yt=b-a*Pt,kt.yb=b+a*Et)),b_.autoMargin(n,r._id,kt)}return t(de,"positionCB"),Oc.syncOrAsync([b_.previousPromises,me,oe,pe,b_.previousPromises,de],n)}t(P4e,"drawColorBar");function D4e(e,r,n){var i=r.orientation==="v",s=n._fullLayout,o=s._size,a,l,u;Lb.init({element:e.node(),gd:n,prepFn:function(){a=e.attr("transform"),VA(e)},moveFn:function(f,h){e.attr("transform",a+mh(f,h)),l=Lb.align((i?r._uFrac:r._vFrac)+f/o.w,i?r._thickFrac:r._lenFrac,0,1,r.xanchor),u=Lb.align((i?r._vFrac:1-r._uFrac)-h/o.h,i?r._lenFrac:r._thickFrac,0,1,r.yanchor);var v=Lb.getCursor(l,u,r.xanchor,r.yanchor);VA(e,v)},doneFn:function(){if(VA(e),l!==void 0&&u!==void 0){var f={};f[r._propPrefix+"x"]=l,f[r._propPrefix+"y"]=u,r._traceIndex!==void 0?D$.call("_guiRestyle",n,f,r._traceIndex):D$.call("_guiRelayout",n,f)}}})}t(D4e,"makeEditable");function I4e(e,r,n){var i=r._levels,s=[],o=[],a,l,u=i.end+i.size/100,f=i.size,h=1.001*n[0]-.001*n[1],v=1.001*n[1]-.001*n[0];for(l=0;l<1e5&&(a=i.start+l*f,!(f>0?a>=u:a<=u));l++)a>h&&a<v&&s.push(a);if(r._fillgradient)o=[0];else if(typeof r._fillcolor=="function"){var c=r._filllevels;if(c)for(u=c.end+c.size/100,f=c.size,l=0;l<1e5&&(a=c.start+l*f,!(f>0?a>=u:a<=u));l++)a>n[0]&&a<n[1]&&o.push(a);else o=s.map(function(d){return d-i.size/2}),o.push(o[o.length-1]+i.size)}else r._fillcolor&&typeof r._fillcolor=="string"&&(o=[0]);return i.size<0&&(s.reverse(),o.reverse()),{line:s,fill:o}}t(I4e,"calcLevels");function z4e(e,r,n){var i=e._fullLayout,s=r.orientation==="v",o={type:"linear",range:n,tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,ticklabelposition:r.ticklabelposition,ticklabeloverflow:r.ticklabeloverflow,ticklabelstep:r.ticklabelstep,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,exponentformat:r.exponentformat,minexponent:r.minexponent,separatethousands:r.separatethousands,showexponent:r.showexponent,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,title:r.title,showline:!0,anchor:"free",side:s?"right":"bottom",position:1},a=s?"y":"x",l={type:"linear",_id:a+r._id},u={letter:a,font:i.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:i.calendar};function f(h,v){return Oc.coerce(o,l,C4e,h,v)}return t(f,"coerce"),k4e(o,l,f,u,i),E4e(o,l,f,u),l}t(z4e,"mockColorBarAxis");var F4e={draw:L4e},B4e={moduleType:"component",name:"colorbar",attributes:o8,supplyDefaults:$se,draw:F4e.draw,hasColorbar:Ose},O4e={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},N4e={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}},q4e=Na,Bfe=Nt.exports,jA=Bfe.extendFlat,B$=Bfe.extendDeep;function O$(e){var r;switch(e){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}t(O$,"cloneLayoutOverride");function U4e(e){var r=["xaxis","yaxis","zaxis"];return r.indexOf(e.slice(0,5))>-1}t(U4e,"keyIsAxis");var Ofe=t(function(r,n){var i,s=r.data,o=r.layout,a=B$([],s),l=B$({},o,O$(n.tileClass)),u=r._context||{};if(n.width&&(l.width=n.width),n.height&&(l.height=n.height),n.tileClass==="thumbnail"||n.tileClass==="themes__thumb"){l.annotations=[];var f=Object.keys(l);for(i=0;i<f.length;i++)U4e(f[i])&&(l[f[i]].title={text:""});for(i=0;i<a.length;i++){var h=a[i];h.showscale=!1,h.marker&&(h.marker.showscale=!1),q4e.traceIs(h,"pie-like")&&(h.textposition="none")}}if(Array.isArray(n.annotations))for(i=0;i<n.annotations.length;i++)l.annotations.push(n.annotations[i]);var v=Object.keys(l).filter(function(b){return b.match(/^scene\d*$/)});if(v.length){var c={};for(n.tileClass==="thumbnail"&&(c={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<v.length;i++){var d=l[v[i]];d.xaxis||(d.xaxis={}),d.yaxis||(d.yaxis={}),d.zaxis||(d.zaxis={}),jA(d.xaxis,c),jA(d.yaxis,c),jA(d.zaxis,c),d._scene=null}}var g=document.createElement("div");n.tileClass&&(g.className=n.tileClass);var p={gd:g,td:g,layout:l,data:a,config:{staticPlot:n.staticPlot===void 0?!0:n.staticPlot,plotGlPixelRatio:n.plotGlPixelRatio===void 0?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return n.setBackground!=="transparent"&&(p.config.setBackground=n.setBackground||"opaque"),p.gd.defaultLayout=O$(n.tileClass),p},"clonePlot"),H4e=Z1.exports.EventEmitter,$4e=Na,V4e=Nt.exports,N$=Ol,G4e=Ofe,j4e=N8,Y4e=q8;function W4e(e,r){var n=new H4e,i=G4e(e,{format:"png"}),s=i.gd;s.style.position="absolute",s.style.left="-5000px",document.body.appendChild(s);function o(){var l=N$.getDelay(s._fullLayout);setTimeout(function(){var u=j4e(s),f=document.createElement("canvas");f.id=V4e.randstr(),n=Y4e({format:r.format,width:s._fullLayout.width,height:s._fullLayout.height,canvas:f,emitter:n,svg:u}),n.clean=function(){s&&document.body.removeChild(s)}},l)}t(o,"wait");var a=N$.getRedrawFunc(s);return $4e.call("_doPlot",s,i.data,i.layout,i.config).then(a).then(o).catch(function(l){n.emit("error",l)}),n}t(W4e,"toImage");var X4e=W4e,q$=Ol,Z4e={getDelay:q$.getDelay,getRedrawFunc:q$.getRedrawFunc,clone:Ofe,toSVG:N8,svgToImg:q8,toImage:X4e,downloadImage:Eue},K4e=Z4e;(function(e){e.version=W2.version;for(var r=Na,n=e.register=r.register,i=Bo,s=Object.keys(i),o=0;o<s.length;o++){var a=s[o];a.charAt(0)!=="_"&&(e[a]=i[a]),n({moduleType:"apiMethod",name:a,fn:i[a]})}n(d5e),n([p5e,Ko,U5e,nEe,Qs,yEe,LEe,tCe,kCe,BCe,f4e,Dfe,_4e,ko,B4e,Hle]),n([O4e,N4e]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(n(window.PlotlyLocales),delete window.PlotlyLocales),e.Icons=y8;var l=Ko,u=so.exports;e.Plots={resize:u.resize,graphJson:u.graphJson,sendDataToCloud:u.sendDataToCloud},e.Fx={hover:l.hover,unhover:l.unhover,loneHover:l.loneHover,loneUnhover:l.loneUnhover},e.Snapshot=K4e,e.PlotSchema=dp})(Oie);(function(e){e.exports=Oie})(Bie);var YA={exports:{}},WA,U$;function Py(){return U$||(U$=1,WA={TEXTPAD:3,eventDataKeys:["value","label"]}),WA}t(Py,"requireConstants$h");var XA,H$;function gd(){if(H$)return XA;H$=1;var e=Ps,r=Vo.axisHoverFormat,n=Un.hovertemplateAttrs,i=Un.texttemplateAttrs,s=Qi,o=Ho,a=Py(),l=yu.pattern,u=cn.extendFlat,f=o({editType:"calc",arrayOk:!0,colorEditType:"style",description:""}),h=e.marker,v=h.line,c=u({},v.width,{dflt:0}),d=u({width:c,editType:"calc"},s("marker.line")),g=u({line:d,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style",description:"Sets the opacity of the bars."},pattern:l});return XA={x:e.x,x0:e.x0,dx:e.dx,y:e.y,y0:e.y0,dy:e.dy,xperiod:e.xperiod,yperiod:e.yperiod,xperiod0:e.xperiod0,yperiod0:e.yperiod0,xperiodalignment:e.xperiodalignment,yperiodalignment:e.yperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),text:e.text,texttemplate:i({editType:"plot"},{keys:a.eventDataKeys}),hovertext:e.hovertext,hovertemplate:n({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc",description:["Specifies the location of the `text`.","*inside* positions `text` inside, next to the bar end","(rotated and scaled if needed).","*outside* positions `text` outside, next to the bar end","(scaled if needed), unless there is another bar stacked on","this one, then the text gets pushed inside.","*auto* tries to position `text` inside the bar, but if","the bar is too small and no bar is stacked on this one","the text is moved outside.","If *none*, no text appears."].join(" ")},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot",description:["Determines if texts are kept at center or start/end points in `textposition` *inside* mode."].join(" ")},textangle:{valType:"angle",dflt:"auto",editType:"plot",description:["Sets the angle of the tick labels with respect to the bar.","For example, a `tickangle` of -90 draws the tick labels","vertically. With *auto* the texts may automatically be","rotated to fit with the maximum size in bars."].join(" ")},textfont:u({},f,{description:"Sets the font used for `text`."}),insidetextfont:u({},f,{description:"Sets the font used for `text` lying inside the bar."}),outsidetextfont:u({},f,{description:"Sets the font used for `text` lying outside the bar."}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc",description:["Constrain the size of text inside or outside a bar to be no","larger than the bar itself."].join(" ")},cliponaxis:u({},e.cliponaxis,{description:["Determines whether the text nodes","are clipped about the subplot axes.","To show the text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the bars.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal)."].join(" ")},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc",description:["Sets where the bar base is drawn (in position axis units).","In *stack* or *relative* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc",description:["Shifts the position where the bar is drawn","(in position axis units).","In *group* barmode,","traces that set *offset* will be excluded","and drawn in *overlay* mode instead."].join(" ")},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc",description:["Sets the bar width (in position axis units)."].join(" ")},marker:g,offsetgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","offsetgroup where bars of the same position coordinate will line up."].join(" ")},alignmentgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several traces linked to the same position axis","or matching axes to the same","alignmentgroup. This controls whether bars compute their positional","range dependently or independently."].join(" ")},selected:{marker:{opacity:e.selected.marker.opacity,color:e.selected.marker.color,editType:"style"},textfont:e.selected.textfont,editType:"style"},unselected:{marker:{opacity:e.unselected.marker.opacity,color:e.unselected.marker.color,editType:"style"},textfont:e.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"],description:"Renamed to `orientation`."}}},XA}t(gd,"requireAttributes$L");var ZA,$$;function n7(){return $$||($$=1,ZA={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *relative*, the bars are stacked on top of one another,","with negative values below the axis, positive values above","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Sets the normalization for bar traces on the graph.","With *fraction*, the value of each bar is divided by the sum of all","values at that location coordinate.","*percent* is the same but multiplied by 100 to show percentages."].join(" ")},bargap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}),ZA}t(n7,"requireLayout_attributes$g");var KA,V$;function i7(){if(V$)return KA;V$=1;var e=$a.exports,r=Qu.hasColorscale,n=ml,i=Nt.exports.coercePattern;return KA=t(function(o,a,l,u,f){var h=l("marker.color",u),v=r(o,"marker");v&&n(o,a,f,l,{prefix:"marker.",cLetter:"c"}),l("marker.line.color",e.defaultLine),r(o,"marker.line")&&n(o,a,f,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width"),l("marker.opacity"),i(l,"marker.pattern",h,v),l("selected.marker.color"),l("unselected.marker.color")},"handleStyleDefaults"),KA}t(i7,"requireStyle_defaults$2");var JA,G$;function Ef(){if(G$)return JA;G$=1;var e=Nt.exports,r=$a.exports,n=Na,i=ix,s=yv,o=i7(),a=I0().getAxisGroup,l=gd(),u=e.coerceFont;function f(d,g,p,b){function m(w,x){return e.coerce(d,g,l,w,x)}t(m,"coerce");var y=i(d,g,b,m);if(!y){g.visible=!1;return}s(d,g,b,m),m("xhoverformat"),m("yhoverformat"),m("orientation",g.x&&!g.y?"h":"v"),m("base"),m("offset"),m("width"),m("text"),m("hovertext"),m("hovertemplate");var T=m("textposition");c(d,g,b,m,T,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(d,g,m,p,b);var _=(g.marker.line||{}).color,M=n.getComponentMethod("errorbars","supplyDefaults");M(d,g,_||r.defaultLine,{axis:"y"}),M(d,g,_||r.defaultLine,{axis:"x",inherit:"y"}),e.coerceSelectionMarkerOpacity(g,m)}t(f,"supplyDefaults");function h(d,g,p,b){var m=g.orientation,y=g[{v:"x",h:"y"}[m]+"axis"],T=a(p,y)+m,_=p._alignmentOpts||{},M=b("alignmentgroup"),w=_[T];w||(w=_[T]={});var x=w[M];x?x.traces.push(g):x=w[M]={traces:[g],alignmentIndex:Object.keys(w).length,offsetGroups:{}};var A=b("offsetgroup"),S=x.offsetGroups,k=S[A];A&&(k||(k=S[A]={offsetIndex:Object.keys(S).length}),g._offsetIndex=k.offsetIndex)}t(h,"handleGroupingDefaults");function v(d,g){var p,b;function m(T){return e.coerce(b._input,b,l,T)}if(t(m,"coerce"),g.barmode==="group")for(var y=0;y<d.length;y++)b=d[y],b.type==="bar"&&(p=b._input,h(p,b,g,m))}t(v,"crossTraceDefaults");function c(d,g,p,b,m,y){y=y||{};var T=y.moduleHasSelected!==!1,_=y.moduleHasUnselected!==!1,M=y.moduleHasConstrain!==!1,w=y.moduleHasCliponaxis!==!1,x=y.moduleHasTextangle!==!1,A=y.moduleHasInsideanchor!==!1,S=!!y.hasPathbar,k=Array.isArray(m)||m==="auto",L=k||m==="inside",P=k||m==="outside";if(L||P){var D=u(b,"textfont",p.font),B=e.extendFlat({},D),z=d.textfont&&d.textfont.color,R=!z;if(R&&delete B.color,u(b,"insidetextfont",B),S){var F=e.extendFlat({},D);R&&delete F.color,u(b,"pathbar.textfont",F)}P&&u(b,"outsidetextfont",D),T&&b("selected.textfont.color"),_&&b("unselected.textfont.color"),M&&b("constraintext"),w&&b("cliponaxis"),x&&b("textangle"),b("texttemplate")}L&&A&&b("insidetextanchor")}return t(c,"handleText"),JA={supplyDefaults:f,crossTraceDefaults:v,handleGroupingDefaults:h,handleText:c},JA}t(Ef,"requireDefaults$L");var QA,j$;function Nfe(){if(j$)return QA;j$=1;var e=Na,r=nn(),n=Nt.exports,i=n7();return QA=t(function(s,o,a){function l(m,y){return n.coerce(s,o,i,m,y)}t(l,"coerce");for(var u=!1,f=!1,h=!1,v={},c=l("barmode"),d=0;d<a.length;d++){var g=a[d];if(e.traceIs(g,"bar")&&g.visible)u=!0;else continue;if(c==="group"){var p=g.xaxis+g.yaxis;v[p]&&(h=!0),v[p]=!0}if(g.visible&&g.type==="histogram"){var b=r.getFromId({_fullLayout:o},g[g.orientation==="v"?"xaxis":"yaxis"]);b.type!=="category"&&(f=!0)}}if(!u){delete o.barmode;return}c!=="overlay"&&l("barnorm"),l("bargap",f&&!h?0:.2),l("bargroupgap")},"layout_defaults$f"),QA}t(Nfe,"requireLayout_defaults$f");var eS,Y$;function zw(){if(Y$)return eS;Y$=1;var e=Nt.exports;return eS=t(function(n,i){for(var s=0;s<n.length;s++)n[s].i=s;e.mergeArray(i.text,n,"tx"),e.mergeArray(i.hovertext,n,"htx");var o=i.marker;if(o){e.mergeArray(o.opacity,n,"mo",!0),e.mergeArray(o.color,n,"mc");var a=o.line;a&&(e.mergeArray(a.color,n,"mlc"),e.mergeArrayCastPositive(a.width,n,"mlw"))}},"arraysToCalcdata"),eS}t(zw,"requireArrays_to_calcdata$1");var tS,W$;function J4e(){if(W$)return tS;W$=1;var e=nn(),r=bv,n=Qu.hasColorscale,i=Lf,s=zw(),o=Ih;return tS=t(function(l,u){var f=e.getFromId(l,u.xaxis||"x"),h=e.getFromId(l,u.yaxis||"y"),v,c,d,g,p,b,m={msUTC:!!(u.base||u.base===0)};u.orientation==="h"?(v=f.makeCalcdata(u,"x",m),d=h.makeCalcdata(u,"y"),g=r(u,h,"y",d),p=!!u.yperiodalignment,b="y"):(v=h.makeCalcdata(u,"y",m),d=f.makeCalcdata(u,"x"),g=r(u,f,"x",d),p=!!u.xperiodalignment,b="x"),c=g.vals;for(var y=Math.min(c.length,v.length),T=new Array(y),_=0;_<y;_++)T[_]={p:c[_],s:v[_]},p&&(T[_].orig_p=d[_],T[_][b+"End"]=g.ends[_],T[_][b+"Start"]=g.starts[_]),u.ids&&(T[_].id=String(u.ids[_]));return n(u,"marker")&&i(l,u,{vals:u.marker.color,containerStr:"marker",cLetter:"c"}),n(u,"marker.line")&&i(l,u,{vals:u.marker.line.color,containerStr:"marker.line",cLetter:"c"}),s(T,u),o(T,u),T},"calc"),tS}t(J4e,"requireCalc$E");var rS,X$;function Q4e(){if(X$)return rS;X$=1,rS=n;var e=Nt.exports.distinctVals,r=jn.BADNUM;function n(i,s){this.traces=i,this.sepNegVal=s.sepNegVal,this.overlapNoMerge=s.overlapNoMerge;for(var o=1/0,a=[],l=0;l<i.length;l++){for(var u=i[l],f=0;f<u.length;f++){var h=u[f];h.p!==r&&a.push(h.p)}u[0]&&u[0].width1&&(o=Math.min(u[0].width1,o))}this.positions=a;var v=e(a);this.distinctPositions=v.vals,v.vals.length===1&&o!==1/0?this.minDiff=o:this.minDiff=Math.min(v.minDiff,o);var c=(s.posAxis||{}).type;(c==="category"||c==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}return t(n,"Sieve"),n.prototype.put=t(function(s,o){var a=this.getLabel(s,o),l=this.bins[a]||0;return this.bins[a]=l+o,l},"put"),n.prototype.get=t(function(s,o){var a=this.getLabel(s,o);return this.bins[a]||0},"get"),n.prototype.getLabel=t(function(s,o){var a=o<0&&this.sepNegVal?"v":"^",l=this.overlapNoMerge?s:Math.round(s/this.binWidth);return a+l},"getLabel"),rS}t(Q4e,"requireSieve");var aS,Z$;function hx(){if(Z$)return aS;Z$=1;var e=xn,r=Nt.exports.isArrayOrTypedArray,n=jn.BADNUM,i=Na,s=nn(),o=I0().getAxisGroup,a=Q4e();function l(S,k){for(var L=k.xaxis,P=k.yaxis,D=S._fullLayout,B=S._fullData,z=S.calcdata,R=[],F=[],O=0;O<B.length;O++){var q=B[O];if(q.visible===!0&&i.traceIs(q,"bar")&&q.xaxis===L._id&&q.yaxis===P._id&&(q.orientation==="h"?R.push(z[O]):F.push(z[O]),q._computePh))for(var H=S.calcdata[O],j=0;j<H.length;j++)typeof H[j].ph0=="function"&&(H[j].ph0=H[j].ph0()),typeof H[j].ph1=="function"&&(H[j].ph1=H[j].ph1())}var X={xCat:L.type==="category"||L.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:D.barmode,norm:D.barnorm,gap:D.bargap,groupgap:D.bargroupgap};u(S,L,P,F,X),u(S,P,L,R,X)}t(l,"crossTraceCalc");function u(S,k,L,P,D){if(!!P.length){var B,z,R,F,O;switch(f(L,P),D.mode){case"overlay":h(k,L,P,D);break;case"group":for(B=[],z=[],R=0;R<P.length;R++)F=P[R],O=F[0].trace,O.offset===void 0?z.push(F):B.push(F);z.length&&v(S,k,L,z,D),B.length&&h(k,L,B,D);break;case"stack":case"relative":for(B=[],z=[],R=0;R<P.length;R++)F=P[R],O=F[0].trace,O.base===void 0?z.push(F):B.push(F);z.length&&c(S,k,L,z,D),B.length&&h(k,L,B,D);break}x(P,k)}}t(u,"setGroupPositions");function f(S,k){var L,P;for(L=0;L<k.length;L++){var D=k[L],B=D[0].trace,z=B.type==="funnel"?B._base:B.base,R,F=B.orientation==="h"?B.xcalendar:B.ycalendar,O=S.type==="category"||S.type==="multicategory"?function(){return null}:S.d2c;if(r(z)){for(P=0;P<Math.min(z.length,D.length);P++)R=O(z[P],0,F),e(R)?(D[P].b=+R,D[P].hasB=1):D[P].b=0;for(;P<D.length;P++)D[P].b=0}else{R=O(z,0,F);var q=e(R);for(R=q?R:0,P=0;P<D.length;P++)D[P].b=R,q&&(D[P].hasB=1)}}}t(f,"initBase");function h(S,k,L,P){for(var D=0;D<L.length;D++){var B=L[D],z=new a([B],{posAxis:S,sepNegVal:!1,overlapNoMerge:!P.norm});d(S,z,P),P.norm?(_(z),w(k,z,P)):y(k,z)}}t(h,"setGroupPositionsInOverlayMode");function v(S,k,L,P,D){var B=new a(P,{posAxis:k,sepNegVal:!1,overlapNoMerge:!D.norm});g(S,k,B,D),M(B,k),D.norm?(_(B),w(L,B,D)):y(L,B)}t(v,"setGroupPositionsInGroupMode");function c(S,k,L,P,D){var B=new a(P,{posAxis:k,sepNegVal:D.mode==="relative",overlapNoMerge:!(D.norm||D.mode==="stack"||D.mode==="relative")});d(k,B,D),T(L,B,D);for(var z=0;z<P.length;z++)for(var R=P[z],F=0;F<R.length;F++){var O=R[F];if(O.s!==n){var q=O.b+O.s===B.get(O.p,O.s);q&&(O._outmost=!0)}}D.norm&&w(L,B,D)}t(c,"setGroupPositionsInStackOrRelativeMode");function d(S,k,L){for(var P=k.minDiff,D=k.traces,B=P*(1-L.gap),z=B,R=z*(1-(L.groupgap||0)),F=-R/2,O=0;O<D.length;O++){var q=D[O],H=q[0].t;H.barwidth=R,H.poffset=F,H.bargroupwidth=B,H.bardelta=P}k.binWidth=D[0][0].t.barwidth/100,p(k),b(S,k),m(S,k)}t(d,"setOffsetAndWidth");function g(S,k,L,P){for(var D=S._fullLayout,B=L.positions,z=L.distinctPositions,R=L.minDiff,F=L.traces,O=F.length,q=B.length!==z.length,H=R*(1-P.gap),j=o(D,k._id)+F[0][0].trace.orientation,X=D._alignmentOpts[j]||{},G=0;G<O;G++){var $=F[G],te=$[0].trace,ee=X[te.alignmentgroup]||{},ie=Object.keys(ee.offsetGroups||{}).length,se;ie?se=H/ie:se=q?H/O:H;var W=se*(1-(P.groupgap||0)),ne;ie?ne=((2*te._offsetIndex+1-ie)*se-W)/2:ne=q?((2*G+1-O)*se-W)/2:-W/2;var he=$[0].t;he.barwidth=W,he.poffset=ne,he.bargroupwidth=H,he.bardelta=R}L.binWidth=F[0][0].t.barwidth/100,p(L),b(k,L),m(k,L,q)}t(g,"setOffsetAndWidthInGroupMode");function p(S){var k=S.traces,L,P;for(L=0;L<k.length;L++){var D=k[L],B=D[0],z=B.trace,R=B.t,F=z._offset||z.offset,O=R.poffset,q;if(r(F)){for(q=Array.prototype.slice.call(F,0,D.length),P=0;P<q.length;P++)e(q[P])||(q[P]=O);for(P=q.length;P<D.length;P++)q.push(O);R.poffset=q}else F!==void 0&&(R.poffset=F);var H=z._width||z.width,j=R.barwidth;if(r(H)){var X=Array.prototype.slice.call(H,0,D.length);for(P=0;P<X.length;P++)e(X[P])||(X[P]=j);for(P=X.length;P<D.length;P++)X.push(j);if(R.barwidth=X,F===void 0){for(q=[],P=0;P<D.length;P++)q.push(O+(j-X[P])/2);R.poffset=q}}else H!==void 0&&(R.barwidth=H,F===void 0&&(R.poffset=O+(j-H)/2))}}t(p,"applyAttributes");function b(S,k){for(var L=k.traces,P=A(S),D=0;D<L.length;D++)for(var B=L[D],z=B[0].t,R=z.poffset,F=Array.isArray(R),O=z.barwidth,q=Array.isArray(O),H=0;H<B.length;H++){var j=B[H],X=j.w=q?O[H]:O;j[P]=j.p+(F?R[H]:R)+X/2}}t(b,"setBarCenterAndWidth");function m(S,k,L){var P=k.traces,D=k.minDiff,B=D/2;s.minDtick(S,k.minDiff,k.distinctPositions[0],L);for(var z=0;z<P.length;z++){var R=P[z],F=R[0],O=F.trace,q=[],H,j,X,G;for(G=0;G<R.length;G++)H=R[G],j=H.p-B,X=H.p+B,q.push(j,X);if(O.width||O.offset){var $=F.t,te=$.poffset,ee=$.barwidth,ie=Array.isArray(te),se=Array.isArray(ee);for(G=0;G<R.length;G++){H=R[G];var W=ie?te[G]:te,ne=se?ee[G]:ee;j=H.p+W,X=j+ne,q.push(j,X)}}O._extremes[S._id]=s.findExtremes(S,q,{padded:!1})}}t(m,"updatePositionAxis");function y(S,k){for(var L=k.traces,P=A(S),D=0;D<L.length;D++){for(var B=L[D],z=B[0].trace,R=[],F=!1,O=0;O<B.length;O++){var q=B[O],H=q.b,j=H+q.s;q[P]=j,R.push(j),q.hasB&&R.push(H),(!q.hasB||!q.b)&&(F=!0)}z._extremes[S._id]=s.findExtremes(S,R,{tozero:F,padded:!0})}}t(y,"setBaseAndTop");function T(S,k,L){var P=A(S),D=k.traces,B,z,R,F,O,q;for(F=0;F<D.length;F++)if(B=D[F],z=B[0].trace,z.type==="funnel")for(O=0;O<B.length;O++)q=B[O],q.s!==n&&k.put(q.p,-.5*q.s);for(F=0;F<D.length;F++){B=D[F],z=B[0].trace,R=z.type==="funnel";var H=[];for(O=0;O<B.length;O++)if(q=B[O],q.s!==n){var j;R?j=q.s:j=q.s+q.b;var X=k.put(q.p,j),G=X+j;q.b=X,q[P]=G,L.norm||(H.push(G),q.hasB&&H.push(X))}L.norm||(z._extremes[S._id]=s.findExtremes(S,H,{tozero:!0,padded:!0}))}}t(T,"stackBars");function _(S){for(var k=S.traces,L=0;L<k.length;L++)for(var P=k[L],D=0;D<P.length;D++){var B=P[D];B.s!==n&&S.put(B.p,B.b+B.s)}}t(_,"sieveBars");function M(S,k){for(var L=S.traces,P=0;P<L.length;P++){var D=L[P],B=D[0].trace;if(B.base===void 0)for(var z=new a([D],{posAxis:k,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<D.length;R++){var F=D[R];if(F.p!==n){var O=z.put(F.p,F.b+F.s);O&&(F.b=O)}}}}t(M,"unhideBarsWithinTrace");function w(S,k,L){var P=k.traces,D=A(S),B=L.norm==="fraction"?1:100,z=B/1e9,R=S.l2c(S.c2l(0)),F=L.mode==="stack"?B:R;function O(ne){return e(S.c2l(ne))&&(ne<R-z||ne>F+z||!e(R))}t(O,"needsPadding");for(var q=0;q<P.length;q++){for(var H=P[q],j=H[0].trace,X=[],G=!1,$=!1,te=0;te<H.length;te++){var ee=H[te];if(ee.s!==n){var ie=Math.abs(B/k.get(ee.p,ee.s));ee.b*=ie,ee.s*=ie;var se=ee.b,W=se+ee.s;ee[D]=W,X.push(W),$=$||O(W),ee.hasB&&(X.push(se),$=$||O(se)),(!ee.hasB||!ee.b)&&(G=!0)}}j._extremes[S._id]=s.findExtremes(S,X,{tozero:G,padded:$})}}t(w,"normalizeBars");function x(S,k){var L=A(k),P={},D,B,z,R=1/0,F=-1/0;for(D=0;D<S.length;D++)for(z=S[D],B=0;B<z.length;B++){var O=z[B].p;e(O)&&(R=Math.min(R,O),F=Math.max(F,O))}var q=1e4/(F-R),H=P.round=function(ie){return String(Math.round(q*(ie-R)))};for(D=0;D<S.length;D++){z=S[D],z[0].t.extents=P;var j=z[0].t.poffset,X=Array.isArray(j);for(B=0;B<z.length;B++){var G=z[B],$=G[L]-G.w/2;if(e($)){var te=G[L]+G.w/2,ee=H(G.p);P[ee]?P[ee]=[Math.min($,P[ee][0]),Math.max(te,P[ee][1])]:P[ee]=[$,te]}G.p0=G.p+(X?j[B]:j),G.p1=G.p0+G.w,G.s0=G.b,G.s1=G.s0+G.s}}}t(x,"collectExtents");function A(S){return S._id.charAt(0)}return t(A,"getAxisLetter"),aS={crossTraceCalc:l,setGroupPositions:u},aS}t(hx,"requireCross_trace_calc$4");var nS,K$;function wu(){if(K$)return nS;K$=1;var e=Va.exports,r=Nt.exports;function n(a,l,u){var f=a._fullLayout,h=f["_"+u+"Text_minsize"];if(h){var v=f.uniformtext.mode==="hide",c;switch(u){case"funnelarea":case"pie":case"sunburst":c="g.slice";break;case"treemap":case"icicle":c="g.slice, g.pathbar";break;default:c="g.points > g.point"}l.selectAll(c).each(function(d){var g=d.transform;if(g){g.scale=v&&g.hide?0:h/g.fontSize;var p=e.select(this).select("text");r.setTransormAndDisplay(p,g)}})}}t(n,"resizeText");function i(a,l,u){if(u.uniformtext.mode){var f=o(a),h=u.uniformtext.minsize,v=l.scale*l.fontSize;l.hide=v<h,u[f]=u[f]||1/0,l.hide||(u[f]=Math.min(u[f],Math.max(v,h)))}}t(i,"recordMinTextSize");function s(a,l){var u=o(a);l[u]=void 0}t(s,"clearMinTextSize");function o(a){return"_"+a+"Text_minsize"}return t(o,"getMinKey"),nS={recordMinTextSize:i,clearMinTextSize:s,resizeText:n},nS}t(wu,"requireUniform_text");var jd={},J$;function o7(){if(J$)return jd;J$=1;var e=xn,r=rl.exports,n=Nt.exports.isArrayOrTypedArray;return jd.coerceString=function(i,s,o){if(typeof s=="string"){if(s||!i.noBlank)return s}else if((typeof s=="number"||s===!0)&&!i.strict)return String(s);return o!==void 0?o:i.dflt},jd.coerceNumber=function(i,s,o){if(e(s)){s=+s;var a=i.min,l=i.max,u=a!==void 0&&s<a||l!==void 0&&s>l;if(!u)return s}return o!==void 0?o:i.dflt},jd.coerceColor=function(i,s,o){return r(s).isValid()?s:o!==void 0?o:i.dflt},jd.coerceEnumerated=function(i,s,o){return i.coerceNumber&&(s=+s),i.values.indexOf(s)!==-1?s:o!==void 0?o:i.dflt},jd.getValue=function(i,s){var o;return Array.isArray(i)?s<i.length&&(o=i[s]):o=i,o},jd.getLineWidth=function(i,s){var o=0<s.mlw?s.mlw:n(i.marker.line.width)?0:i.marker.line.width;return o},jd}t(o7,"requireHelpers$9");var iS,Q$;function Eh(){if(Q$)return iS;Q$=1;var e=Va.exports,r=$a.exports,n=bn.exports,i=Nt.exports,s=Na,o=wu().resizeText,a=gd(),l=a.textfont,u=a.insidetextfont,f=a.outsidetextfont,h=o7();function v(x){var A=e.select(x).selectAll("g.barlayer").selectAll("g.trace");o(x,A,"bar");var S=A.size(),k=x._fullLayout;A.style("opacity",function(L){return L[0].trace.opacity}).each(function(L){(k.barmode==="stack"&&S>1||k.bargap===0&&k.bargroupgap===0&&!L[0].trace.marker.line.width)&&e.select(this).attr("shape-rendering","crispEdges")}),A.selectAll("g.points").each(function(L){var P=e.select(this),D=L[0].trace;c(P,D,x)}),s.getComponentMethod("errorbars","style")(A)}t(v,"style");function c(x,A,S){n.pointStyle(x.selectAll("path"),A,S),d(x,A,S)}t(c,"stylePoints");function d(x,A,S){x.selectAll("text").each(function(k){var L=e.select(this),P=i.ensureUniformFontSize(S,m(L,k,A,S));n.font(L,P)})}t(d,"styleTextPoints");function g(x,A,S){var k=A[0].trace;k.selectedpoints?p(S,k,x):(c(S,k,x),s.getComponentMethod("errorbars","style")(S))}t(g,"styleOnSelect");function p(x,A,S){n.selectedPointStyle(x.selectAll("path"),A),b(x.selectAll("text"),A,S)}t(p,"stylePointsInSelectionMode");function b(x,A,S){x.each(function(k){var L=e.select(this),P;if(k.selected){P=i.ensureUniformFontSize(S,m(L,k,A,S));var D=A.selected.textfont&&A.selected.textfont.color;D&&(P.color=D),n.font(L,P)}else n.selectedTextStyle(L,A)})}t(b,"styleTextInSelectionMode");function m(x,A,S,k){var L=k._fullLayout.font,P=S.textfont;if(x.classed("bartext-inside")){var D=w(A,S);P=T(S,A.i,L,D)}else x.classed("bartext-outside")&&(P=_(S,A.i,L));return P}t(m,"determineFont");function y(x,A,S){return M(l,x.textfont,A,S)}t(y,"getTextFont");function T(x,A,S,k){var L=y(x,A,S),P=x._input.textfont===void 0||x._input.textfont.color===void 0||Array.isArray(x.textfont.color)&&x.textfont.color[A]===void 0;return P&&(L={color:r.contrast(k),family:L.family,size:L.size}),M(u,x.insidetextfont,A,L)}t(T,"getInsideTextFont");function _(x,A,S){var k=y(x,A,S);return M(f,x.outsidetextfont,A,k)}t(_,"getOutsideTextFont");function M(x,A,S,k){A=A||{};var L=h.getValue(A.family,S),P=h.getValue(A.size,S),D=h.getValue(A.color,S);return{family:h.coerceString(x.family,L,k.family),size:h.coerceNumber(x.size,P,k.size),color:h.coerceColor(x.color,D,k.color)}}t(M,"getFontValue");function w(x,A){return A.type==="waterfall"?A[x.dir].marker.color:x.mcc||x.mc||A.marker.color}return t(w,"getBarColor"),iS={style:v,styleTextPoints:d,styleOnSelect:g,getInsideTextFont:T,getOutsideTextFont:_,getBarColor:w,resizeText:o},iS}t(Eh,"requireStyle$f");var oS,eV;function Dy(){if(eV)return oS;eV=1;var e=Va.exports,r=xn,n=Nt.exports,i=Ji,s=$a.exports,o=bn.exports,a=Na,l=nn().tickText,u=wu(),f=u.recordMinTextSize,h=u.clearMinTextSize,v=Eh(),c=o7(),d=Py(),g=gd(),p=g.text,b=g.textposition,m=Rf.appendArrayPointValue,y=d.TEXTPAD;function T(q){return q.id}t(T,"keyFunc");function _(q){if(q.ids)return T}t(_,"getKeyFunc");function M(q,H){return q<H?1:-1}t(M,"dirSign");function w(q,H,j,X){var G=[],$=[],te=X?H:j,ee=X?j:H;return G[0]=te.c2p(q.s0,!0),$[0]=ee.c2p(q.p0,!0),G[1]=te.c2p(q.s1,!0),$[1]=ee.c2p(q.p1,!0),X?[G,$]:[$,G]}t(w,"getXY");function x(q,H,j,X){if(!H.uniformtext.mode&&A(j)){var G;return X&&(G=X()),q.transition().duration(j.duration).ease(j.easing).each("end",function(){G&&G()}).each("interrupt",function(){G&&G()})}else return q}t(x,"transition");function A(q){return q&&q.duration>0}t(A,"hasTransition");function S(q,H,j,X,G,$){var te=H.xaxis,ee=H.yaxis,ie=q._fullLayout;G||(G={mode:ie.barmode,norm:ie.barmode,gap:ie.bargap,groupgap:ie.bargroupgap},h("bar",ie));var se=n.makeTraceGroups(X,j,"trace bars").each(function(W){var ne=e.select(this),he=W[0].trace,re=he.type==="waterfall",ae=he.type==="funnel",fe=he.type==="bar",ce=fe||ae,xe=0;re&&he.connector.visible&&he.connector.mode==="between"&&(xe=he.connector.line.width/2);var Te=he.orientation==="h",me=A(G),pe=n.ensureSingle(ne,"g","points"),oe=_(he),de=pe.selectAll("g.point").data(n.identity,oe);de.enter().append("g").classed("point",!0),de.exit().remove(),de.each(function(we,Ee){var De=e.select(this),Fe=w(we,te,ee,Te),qe=Fe[0][0],Je=Fe[0][1],Ge=Fe[1][0],et=Fe[1][1],Ue=(Te?Je-qe:et-Ge)===0;Ue&&ce&&c.getLineWidth(he,we)&&(Ue=!1),Ue||(Ue=!r(qe)||!r(Je)||!r(Ge)||!r(et)),we.isBlank=Ue,Ue&&(Te?Je=qe:et=Ge),xe&&!Ue&&(Te?(qe-=M(qe,Je)*xe,Je+=M(qe,Je)*xe):(Ge-=M(Ge,et)*xe,et+=M(Ge,et)*xe));var Ye,$e;if(he.type==="waterfall"){if(!Ue){var Ct=he[we.dir].marker;Ye=Ct.line.width,$e=Ct.color}}else Ye=c.getLineWidth(he,we),$e=we.mc||he.marker.color;function It(ft){var zt=e.round(Ye/2%1,2);return G.gap===0&&G.groupgap===0?e.round(Math.round(ft)-zt,2):ft}t(It,"roundWithLine");function Vt(ft,zt,Pt){return Pt&&ft===zt?ft:Math.abs(ft-zt)>=2?It(ft):ft>zt?Math.ceil(ft):Math.floor(ft)}if(t(Vt,"expandToVisible"),!q._context.staticPlot){var $t=s.opacity($e),Gt=$t<1||Ye>.01?It:Vt;qe=Gt(qe,Je,Te),Je=Gt(Je,qe,Te),Ge=Gt(Ge,et,!Te),et=Gt(et,Ge,!Te)}var Jt=x(n.ensureSingle(De,"path"),ie,G,$);if(Jt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Je-qe)*(et-Ge))||Ue&&q._context.staticPlot?"M0,0Z":"M"+qe+","+Ge+"V"+et+"H"+Je+"V"+Ge+"Z").call(o.setClipUrl,H.layerClipId,q),!ie.uniformtext.mode&&me){var kt=o.makePointStyleFns(he);o.singlePointStyle(we,Jt,he,kt,q)}k(q,H,De,W,Ee,qe,Je,Ge,et,G,$),H.layerClipId&&o.hideOutsideRangePoint(we,De.select("text"),te,ee,he.xcalendar,he.ycalendar)});var ye=he.cliponaxis===!1;o.setClipUrl(ne,ye?null:H.layerClipId,q)});a.getComponentMethod("errorbars","plot")(q,se,H,G)}t(S,"plot");function k(q,H,j,X,G,$,te,ee,ie,se,W){var ne=H.xaxis,he=H.yaxis,re=q._fullLayout,ae;function fe(zt,Pt,Et){var Wt=n.ensureSingle(zt,"text").text(Pt).attr({class:"bartext bartext-"+ae,"text-anchor":"middle","data-notex":1}).call(o.font,Et).call(i.convertToTspans,q);return Wt}t(fe,"appendTextNode");var ce=X[0].trace,xe=ce.orientation==="h",Te=z(re,X,G,ne,he);ae=R(ce,G);var me=se.mode==="stack"||se.mode==="relative",pe=X[G],oe=!me||pe._outmost;if(!Te||ae==="none"||(pe.isBlank||$===te||ee===ie)&&(ae==="auto"||ae==="inside")){j.select("text").remove();return}var de=re.font,ye=v.getBarColor(X[G],ce),we=v.getInsideTextFont(ce,G,de,ye),Ee=v.getOutsideTextFont(ce,G,de),De=j.datum();xe?ne.type==="log"&&De.s0<=0&&(ne.range[0]<ne.range[1]?$=0:$=ne._length):he.type==="log"&&De.s0<=0&&(he.range[0]<he.range[1]?ee=he._length:ee=0);var Fe=Math.abs(te-$)-2*y,qe=Math.abs(ie-ee)-2*y,Je,Ge,et,Ue,Ye;if(ae==="outside"&&!oe&&!pe.hasB&&(ae="inside"),ae==="auto")if(oe){ae="inside",Ye=n.ensureUniformFontSize(q,we),Je=fe(j,Te,Ye),Ge=o.bBox(Je.node()),et=Ge.width,Ue=Ge.height;var $e=et>0&&Ue>0,Ct=et<=Fe&&Ue<=qe,It=et<=qe&&Ue<=Fe,Vt=xe?Fe>=et*(qe/Ue):qe>=Ue*(Fe/et);$e&&(Ct||It||Vt)?ae="inside":(ae="outside",Je.remove(),Je=null)}else ae="inside";if(!Je){Ye=n.ensureUniformFontSize(q,ae==="outside"?Ee:we),Je=fe(j,Te,Ye);var $t=Je.attr("transform");if(Je.attr("transform",""),Ge=o.bBox(Je.node()),et=Ge.width,Ue=Ge.height,Je.attr("transform",$t),et<=0||Ue<=0){Je.remove();return}}var Gt=ce.textangle,Jt,kt;ae==="outside"?(kt=ce.constraintext==="both"||ce.constraintext==="outside",Jt=B($,te,ee,ie,Ge,{isHorizontal:xe,constrained:kt,angle:Gt})):(kt=ce.constraintext==="both"||ce.constraintext==="inside",Jt=D($,te,ee,ie,Ge,{isHorizontal:xe,constrained:kt,angle:Gt,anchor:ce.insidetextanchor})),Jt.fontSize=Ye.size,f(ce.type==="histogram"?"bar":ce.type,Jt,re),pe.transform=Jt;var ft=x(Je,re,se,W);n.setTransormAndDisplay(ft,Jt)}t(k,"appendBarText");function L(q){return q==="auto"?0:q}t(L,"getRotateFromAngle");function P(q,H){var j=Math.PI/180*H,X=Math.abs(Math.sin(j)),G=Math.abs(Math.cos(j));return{x:q.width*G+q.height*X,y:q.width*X+q.height*G}}t(P,"getRotatedTextSize");function D(q,H,j,X,G,$){var te=!!$.isHorizontal,ee=!!$.constrained,ie=$.angle||0,se=$.anchor||"end",W=se==="end",ne=se==="start",he=$.leftToRight||0,re=(he+1)/2,ae=1-re,fe=G.width,ce=G.height,xe=Math.abs(H-q),Te=Math.abs(X-j),me=xe>2*y&&Te>2*y?y:0;xe-=2*me,Te-=2*me;var pe=L(ie);ie==="auto"&&!(fe<=xe&&ce<=Te)&&(fe>xe||ce>Te)&&(!(fe>Te||ce>xe)||fe<ce!=xe<Te)&&(pe+=90);var oe=P(G,pe),de=1;ee&&(de=Math.min(1,xe/oe.x,Te/oe.y));var ye=G.left*ae+G.right*re,we=(G.top+G.bottom)/2,Ee=(q+y)*ae+(H-y)*re,De=(j+X)/2,Fe=0,qe=0;if(ne||W){var Je=(te?oe.x:oe.y)/2,Ge=te?M(q,H):M(j,X);te?ne?(Ee=q+Ge*me,Fe=-Ge*Je):(Ee=H-Ge*me,Fe=Ge*Je):ne?(De=j+Ge*me,qe=-Ge*Je):(De=X-Ge*me,qe=Ge*Je)}return{textX:ye,textY:we,targetX:Ee,targetY:De,anchorX:Fe,anchorY:qe,scale:de,rotate:pe}}t(D,"toMoveInsideBar");function B(q,H,j,X,G,$){var te=!!$.isHorizontal,ee=!!$.constrained,ie=$.angle||0,se=G.width,W=G.height,ne=Math.abs(H-q),he=Math.abs(X-j),re;te?re=he>2*y?y:0:re=ne>2*y?y:0;var ae=1;ee&&(ae=te?Math.min(1,he/W):Math.min(1,ne/se));var fe=L(ie),ce=P(G,fe),xe=(te?ce.x:ce.y)/2,Te=(G.left+G.right)/2,me=(G.top+G.bottom)/2,pe=(q+H)/2,oe=(j+X)/2,de=0,ye=0,we=te?M(H,q):M(j,X);return te?(pe=H-we*re,de=we*xe):(oe=X+we*re,ye=-we*xe),{textX:Te,textY:me,targetX:pe,targetY:oe,anchorX:de,anchorY:ye,scale:ae,rotate:fe}}t(B,"toMoveOutsideBar");function z(q,H,j,X,G){var $=H[0].trace,te=$.texttemplate,ee;return te?ee=F(q,H,j,X,G):$.textinfo?ee=O(H,j,X,G):ee=c.getValue($.text,j),c.coerceString(p,ee)}t(z,"getText");function R(q,H){var j=c.getValue(q.textposition,H);return c.coerceEnumerated(b,j)}t(R,"getTextPosition");function F(q,H,j,X,G){var $=H[0].trace,te=n.castOption($,j,"texttemplate");if(!te)return"";var ee=$.type==="histogram",ie=$.type==="waterfall",se=$.type==="funnel",W=$.orientation==="h",ne,he,re,ae;W?(ne="y",he=G,re="x",ae=X):(ne="x",he=X,re="y",ae=G);function fe(de){return l(he,he.c2l(de),!0).text}t(fe,"formatLabel");function ce(de){return l(ae,ae.c2l(de),!0).text}t(ce,"formatNumber");var xe=H[j],Te={};Te.label=xe.p,Te.labelLabel=Te[ne+"Label"]=fe(xe.p);var me=n.castOption($,xe.i,"text");(me===0||me)&&(Te.text=me),Te.value=xe.s,Te.valueLabel=Te[re+"Label"]=ce(xe.s);var pe={};m(pe,$,xe.i),(ee||pe.x===void 0)&&(pe.x=W?Te.value:Te.label),(ee||pe.y===void 0)&&(pe.y=W?Te.label:Te.value),(ee||pe.xLabel===void 0)&&(pe.xLabel=W?Te.valueLabel:Te.labelLabel),(ee||pe.yLabel===void 0)&&(pe.yLabel=W?Te.labelLabel:Te.valueLabel),ie&&(Te.delta=+xe.rawS||xe.s,Te.deltaLabel=ce(Te.delta),Te.final=xe.v,Te.finalLabel=ce(Te.final),Te.initial=Te.final-Te.delta,Te.initialLabel=ce(Te.initial)),se&&(Te.value=xe.s,Te.valueLabel=ce(Te.value),Te.percentInitial=xe.begR,Te.percentInitialLabel=n.formatPercent(xe.begR),Te.percentPrevious=xe.difR,Te.percentPreviousLabel=n.formatPercent(xe.difR),Te.percentTotal=xe.sumR,Te.percenTotalLabel=n.formatPercent(xe.sumR));var oe=n.castOption($,xe.i,"customdata");return oe&&(Te.customdata=oe),n.texttemplateString(te,Te,q._d3locale,pe,Te,$._meta||{})}t(F,"calcTexttemplate");function O(q,H,j,X){var G=q[0].trace,$=G.orientation==="h",te=G.type==="waterfall",ee=G.type==="funnel";function ie(oe){var de=$?X:j;return l(de,oe,!0).text}t(ie,"formatLabel");function se(oe){var de=$?j:X;return l(de,+oe,!0).text}t(se,"formatNumber");var W=G.textinfo,ne=q[H],he=W.split("+"),re=[],ae,fe=t(function(oe){return he.indexOf(oe)!==-1},"hasFlag");if(fe("label")&&re.push(ie(q[H].p)),fe("text")&&(ae=n.castOption(G,ne.i,"text"),(ae===0||ae)&&re.push(ae)),te){var ce=+ne.rawS||ne.s,xe=ne.v,Te=xe-ce;fe("initial")&&re.push(se(Te)),fe("delta")&&re.push(se(ce)),fe("final")&&re.push(se(xe))}if(ee){fe("value")&&re.push(se(ne.s));var me=0;fe("percent initial")&&me++,fe("percent previous")&&me++,fe("percent total")&&me++;var pe=me>1;fe("percent initial")&&(ae=n.formatPercent(ne.begR),pe&&(ae+=" of initial"),re.push(ae)),fe("percent previous")&&(ae=n.formatPercent(ne.difR),pe&&(ae+=" of previous"),re.push(ae)),fe("percent total")&&(ae=n.formatPercent(ne.sumR),pe&&(ae+=" of total"),re.push(ae))}return re.join("<br>")}return t(O,"calcTextinfo"),oS={plot:S,toMoveInsideBar:D},oS}t(Dy,"requirePlot$x");var sS,tV;function vx(){if(tV)return sS;tV=1;var e=Ko,r=Na,n=$a.exports,i=Nt.exports.fillText,s=o7().getLineWidth,o=nn().hoverLabelText,a=jn.BADNUM;function l(h,v,c,d,g){var p=u(h,v,c,d,g);if(p){var b=p.cd,m=b[0].trace,y=b[p.index];return p.color=f(m,y),r.getComponentMethod("errorbars","hoverInfo")(y,m,p),[p]}}t(l,"hoverPoints");function u(h,v,c,d,g){var p=h.cd,b=p[0].trace,m=p[0].t,y=d==="closest",T=b.type==="waterfall",_=h.maxHoverDistance,M=h.maxSpikeDistance,w,x,A,S,k,L,P;b.orientation==="h"?(w=c,x=v,A="y",S="x",k=te,L=X):(w=v,x=c,A="x",S="y",L=te,k=X);var D=b[A+"period"],B=y||D;function z(xe){return F(xe,-1)}t(z,"thisBarMinPos");function R(xe){return F(xe,1)}t(R,"thisBarMaxPos");function F(xe,Te){var me=xe.w;return xe[A]+Te*me/2}t(F,"thisBarExtPos");function O(xe){return xe[A+"End"]-xe[A+"Start"]}t(O,"periodLength");var q=y?z:D?function(xe){return xe.p-O(xe)/2}:function(xe){return Math.min(z(xe),xe.p-m.bardelta/2)},H=y?R:D?function(xe){return xe.p+O(xe)/2}:function(xe){return Math.max(R(xe),xe.p+m.bardelta/2)};function j(xe,Te,me){return g.finiteRange&&(me=0),e.inbox(xe-w,Te-w,me+Math.min(1,Math.abs(Te-xe)/P)-1)}t(j,"inbox");function X(xe){return j(q(xe),H(xe),_)}t(X,"positionFn");function G(xe){return j(z(xe),R(xe),M)}t(G,"thisBarPositionFn");function $(xe){var Te=xe[S];if(T){var me=Math.abs(xe.rawS)||0;x>0?Te+=me:x<0&&(Te-=me)}return Te}t($,"getSize");function te(xe){var Te=x,me=xe.b,pe=$(xe);return e.inbox(me-Te,pe-Te,_+(pe-Te)/(pe-me)-1)}t(te,"sizeFn");function ee(xe){var Te=x,me=xe.b,pe=$(xe);return e.inbox(me-Te,pe-Te,M+(pe-Te)/(pe-me)-1)}t(ee,"thisBarSizeFn");var ie=h[A+"a"],se=h[S+"a"];P=Math.abs(ie.r2c(ie.range[1])-ie.r2c(ie.range[0]));function W(xe){return(k(xe)+L(xe))/2}t(W,"dxy");var ne=e.getDistanceFunction(d,k,L,W);if(e.getClosest(p,ne,h),h.index!==!1&&p[h.index].p!==a){B||(q=t(function(xe){return Math.min(z(xe),xe.p-m.bargroupwidth/2)},"minPos"),H=t(function(xe){return Math.max(R(xe),xe.p+m.bargroupwidth/2)},"maxPos"));var he=h.index,re=p[he],ae=b.base?re.b+re.s:re.s;h[S+"0"]=h[S+"1"]=se.c2p(re[S],!0),h[S+"LabelVal"]=ae;var fe=m.extents[m.extents.round(re.p)];h[A+"0"]=ie.c2p(y?q(re):fe[0],!0),h[A+"1"]=ie.c2p(y?H(re):fe[1],!0);var ce=re.orig_p!==void 0;return h[A+"LabelVal"]=ce?re.orig_p:re.p,h.labelLabel=o(ie,h[A+"LabelVal"],b[A+"hoverformat"]),h.valueLabel=o(se,h[S+"LabelVal"],b[S+"hoverformat"]),h.baseLabel=o(se,re.b,b[S+"hoverformat"]),h.spikeDistance=(ee(re)+G(re))/2,h[A+"Spike"]=ie.c2p(re.p,!0),i(re,b,h),h.hovertemplate=b.hovertemplate,h}}t(u,"hoverOnBars");function f(h,v){var c=v.mcc||h.marker.color,d=v.mlcc||h.marker.line.color,g=s(h,v);if(n.opacity(c))return c;if(n.opacity(d)&&g)return d}return t(f,"getTraceColor"),sS={hoverPoints:l,hoverOnBars:u,getTraceColor:f},sS}t(vx,"requireHover$m");var lS,rV;function eLe(){return rV||(rV=1,lS=t(function(r,n,i){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),i.orientation==="h"?(r.label=r.y,r.value=r.x):(r.label=r.x,r.value=r.y),r},"eventData")),lS}t(eLe,"requireEvent_data$c");var uS,aV;function dx(){if(aV)return uS;aV=1,uS=t(function(n,i){var s=n.cd,o=n.xaxis,a=n.yaxis,l=s[0].trace,u=l.type==="funnel",f=l.orientation==="h",h=[],v;if(i===!1)for(v=0;v<s.length;v++)s[v].selected=0;else for(v=0;v<s.length;v++){var c=s[v],d="ct"in c?c.ct:e(c,o,a,f,u);i.contains(d,!1,v,n)?(h.push({pointNumber:v,x:o.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return h},"selectPoints");function e(r,n,i,s,o){var a=n.c2p(s?r.s0:r.p0,!0),l=n.c2p(s?r.s1:r.p1,!0),u=i.c2p(s?r.p0:r.s0,!0),f=i.c2p(s?r.p1:r.s1,!0);return o?[(a+l)/2,(u+f)/2]:s?[l,(u+f)/2]:[(a+l)/2,f]}return t(e,"getCentroid"),uS}t(dx,"requireSelect$8");var fS,nV;function tLe(){return nV||(nV=1,fS={attributes:gd(),layoutAttributes:n7(),supplyDefaults:Ef().supplyDefaults,crossTraceDefaults:Ef().crossTraceDefaults,supplyLayoutDefaults:Nfe(),calc:J4e(),crossTraceCalc:hx().crossTraceCalc,colorbar:_u,arraysToCalcdata:zw(),plot:Dy().plot,style:Eh().style,styleOnSelect:Eh().styleOnSelect,hoverPoints:vx().hoverPoints,eventData:eLe(),selectPoints:dx(),moduleType:"trace",name:"bar",basePlotModule:Ti,categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{description:["The data visualized by the span of the bars is set in `y`","if `orientation` is set th *v* (the default)","and the labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}),fS}t(tLe,"requireBar$1");var iV;function rLe(){return iV||(iV=1,function(e){e.exports=tLe()}(YA)),YA.exports}t(rLe,"requireBar");var cS={exports:{}},hS,oV;function Fw(){if(oV)return hS;oV=1;var e=Ps,r=gd(),n=Fo,i=Vo.axisHoverFormat,s=Un.hovertemplateAttrs,o=cn.extendFlat,a=e.marker,l=a.line;return hS={y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the y sample data or coordinates.","See overview for more info."].join(" ")},x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x sample data or coordinates.","See overview for more info."].join(" ")},x0:{valType:"any",editType:"calc+clearAxisTypes",description:["Sets the x coordinate for single-box traces","or the starting coordinate for multi-box traces","set using q1/median/q3.","See overview for more info."].join(" ")},y0:{valType:"any",editType:"calc+clearAxisTypes",description:["Sets the y coordinate for single-box traces","or the starting coordinate for multi-box traces","set using q1/median/q3.","See overview for more info."].join(" ")},dx:{valType:"number",editType:"calc",description:["Sets the x coordinate step for multi-box traces","set using q1/median/q3."].join(" ")},dy:{valType:"number",editType:"calc",description:["Sets the y coordinate step for multi-box traces","set using q1/median/q3."].join(" ")},xperiod:e.xperiod,yperiod:e.yperiod,xperiod0:e.xperiod0,yperiod0:e.yperiod0,xperiodalignment:e.xperiodalignment,yperiodalignment:e.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),name:{valType:"string",editType:"calc+clearAxisTypes",description:["Sets the trace name.","The trace name appear as the legend item and on hover.","For box traces, the name will also be used for the position","coordinate, if `x` and `x0` (`y` and `y0` if horizontal) are","missing and the position axis is categorical"].join(" ")},q1:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Quartile 1 values.","There should be as many items as the number of boxes desired."].join(" ")},median:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the median values.","There should be as many items as the number of boxes desired."].join(" ")},q3:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Quartile 3 values.","There should be as many items as the number of boxes desired."].join(" ")},lowerfence:{valType:"data_array",editType:"calc",description:["Sets the lower fence values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `lowerfence` is not provided but a sample (in `y` or `x`) is set,","we compute the lower as the last sample point below 1.5 times the IQR."].join(" ")},upperfence:{valType:"data_array",editType:"calc",description:["Sets the upper fence values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `upperfence` is not provided but a sample (in `y` or `x`) is set,","we compute the lower as the last sample point above 1.5 times the IQR."].join(" ")},notched:{valType:"boolean",editType:"calc",description:["Determines whether or not notches are drawn.","Notches displays a confidence interval around the median.","We compute the confidence interval as median +/- 1.57 * IQR / sqrt(N),","where IQR is the interquartile range and N is the sample size.","If two boxes' notches do not overlap there is 95% confidence their medians differ.","See https://sites.google.com/site/davidsstatistics/home/notched-box-plots for more info.","Defaults to *false* unless `notchwidth` or `notchspan` is set."].join(" ")},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc",description:["Sets the width of the notches relative to","the box' width.","For example, with 0, the notches are as wide as the box(es)."].join(" ")},notchspan:{valType:"data_array",editType:"calc",description:["Sets the notch span from the boxes' `median` values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `notchspan` is not provided but a sample (in `y` or `x`) is set,","we compute it as 1.57 * IQR / sqrt(N),","where N is the sample size."].join(" ")},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc",description:["If *outliers*, only the sample points lying outside the whiskers","are shown","If *suspectedoutliers*, the outlier points are shown and","points either less than 4*Q1-3*Q3 or greater than 4*Q3-3*Q1","are highlighted (see `outliercolor`)","If *all*, all sample points are shown","If *false*, only the box(es) are shown with no sample points","Defaults to *suspectedoutliers* when `marker.outliercolor` or","`marker.line.outliercolor` is set.","Defaults to *all* under the q1/median/q3 signature.","Otherwise defaults to *outliers*."].join(" ")},jitter:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the amount of jitter in the sample points drawn.","If *0*, the sample points align along the distribution axis.","If *1*, the sample points are drawn in a random jitter of width","equal to the width of the box(es)."].join(" ")},pointpos:{valType:"number",min:-2,max:2,editType:"calc",description:["Sets the position of the sample points in relation to the box(es).","If *0*, the sample points are places over the center of the box(es).","Positive (negative) values correspond to positions to the","right (left) for vertical boxes and above (below) for horizontal boxes"].join(" ")},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc",description:["If *true*, the mean of the box(es)' underlying distribution is","drawn as a dashed line inside the box(es).","If *sd* the standard deviation is also drawn.","Defaults to *true* when `mean` is set.","Defaults to *sd* when `sd` is set","Otherwise defaults to *false*."].join(" ")},mean:{valType:"data_array",editType:"calc",description:["Sets the mean values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `mean` is not provided but a sample (in `y` or `x`) is set,","we compute the mean for each box using the sample values."].join(" ")},sd:{valType:"data_array",editType:"calc",description:["Sets the standard deviation values.","There should be as many items as the number of boxes desired.","This attribute has effect only under the q1/median/q3 signature.","If `sd` is not provided but a sample (in `y` or `x`) is set,","we compute the standard deviation for each box using the sample values."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes",description:["Sets the orientation of the box(es).","If *v* (*h*), the distribution is visualized along","the vertical (horizontal)."].join(" ")},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc",description:["Sets the method used to compute the sample's Q1 and Q3 quartiles.","The *linear* method uses the 25th percentile for Q1 and 75th percentile for Q3","as computed using method #10 (listed on http://jse.amstat.org/v14n3/langford.html).","The *exclusive* method uses the median to divide the ordered dataset into two halves","if the sample is odd, it does not include the median in either half -","Q1 is then the median of the lower half and","Q3 the median of the upper half.","The *inclusive* method also uses the median to divide the ordered dataset into two halves","but if the sample is odd, it includes the median in both halves -","Q1 is then the median of the lower half and","Q3 the median of the upper half."].join(" ")},width:{valType:"number",min:0,dflt:0,editType:"calc",description:["Sets the width of the box in data coordinate","If *0* (default value) the width is automatically selected based on the positions","of other box traces in the same subplot."].join(" ")},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style",description:"Sets the color of the outlier sample points."},symbol:o({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:o({},a.angle,{arrayOk:!1,editType:"calc"}),size:o({},a.size,{arrayOk:!1,editType:"calc"}),color:o({},a.color,{arrayOk:!1,editType:"style"}),line:{color:o({},l.color,{arrayOk:!1,dflt:n.defaultLine,editType:"style"}),width:o({},l.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style",description:["Sets the border line color of the outlier sample points.","Defaults to marker.color"].join(" ")},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style",description:["Sets the border line width (in px) of the outlier sample points."].join(" ")},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style",description:"Sets the color of line bounding the box(es)."},width:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the width (in px) of line bounding the box(es)."},editType:"plot"},fillcolor:e.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc",description:["Sets the width of the whiskers relative to","the box' width.","For example, with 1, the whiskers are as wide as the box(es)."].join(" ")},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:{marker:e.selected.marker,editType:"style"},unselected:{marker:e.unselected.marker,editType:"style"},text:o({},e.text,{description:["Sets the text elements associated with each sample value.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertext:o({},e.hovertext,{description:"Same as `text`."}),hovertemplate:s({description:["N.B. This only has an effect when hovering on points."].join(" ")}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style",description:["Do the hover effects highlight individual boxes ","or sample points or both?"].join(" ")}},hS}t(Fw,"requireAttributes$K");var vS,sV;function Bw(){return sV||(sV=1,vS={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc",description:["Determines how boxes at the same location coordinate","are displayed on the graph.","If *group*, the boxes are plotted next to one another","centered around the shared location.","If *overlay*, the boxes are plotted over one another,","you might need to set *opacity* to see them multiple boxes.","Has no effect on traces that have *width* set."].join(" ")},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc",description:["Sets the gap (in plot fraction) between boxes of","adjacent location coordinates.","Has no effect on traces that have *width* set."].join(" ")},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc",description:["Sets the gap (in plot fraction) between boxes of","the same location coordinate.","Has no effect on traces that have *width* set."].join(" ")}}),vS}t(Bw,"requireLayout_attributes$f");var dS,lV;function e2(){if(lV)return dS;lV=1;var e=Nt.exports,r=Na,n=$a.exports,i=yv,s=Ef().handleGroupingDefaults,o=Q1(),a=Fw();function l(v,c,d,g){function p(x,A){return e.coerce(v,c,a,x,A)}if(t(p,"coerce"),u(v,c,p,g),c.visible!==!1){i(v,c,g,p),p("xhoverformat"),p("yhoverformat");var b=c._hasPreCompStats;b&&(p("lowerfence"),p("upperfence")),p("line.color",(v.marker||{}).color||d),p("line.width"),p("fillcolor",n.addOpacity(c.line.color,.5));var m=!1;if(b){var y=p("mean"),T=p("sd");y&&y.length&&(m=!0,T&&T.length&&(m="sd"))}p("boxmean",m),p("whiskerwidth"),p("width"),p("quartilemethod");var _=!1;if(b){var M=p("notchspan");M&&M.length&&(_=!0)}else e.validate(v.notchwidth,a.notchwidth)&&(_=!0);var w=p("notched",_);w&&p("notchwidth"),f(v,c,p,{prefix:"box"})}}t(l,"supplyDefaults");function u(v,c,d,g){function p(j){var X=0;return j&&j.length&&(X+=1,e.isArrayOrTypedArray(j[0])&&j[0].length&&(X+=1)),X}t(p,"getDims");function b(j){return e.validate(v[j],a[j])}t(b,"valid");var m=d("y"),y=d("x"),T;if(c.type==="box"){var _=d("q1"),M=d("median"),w=d("q3");c._hasPreCompStats=_&&_.length&&M&&M.length&&w&&w.length,T=Math.min(e.minRowLength(_),e.minRowLength(M),e.minRowLength(w))}var x=p(m),A=p(y),S=x&&e.minRowLength(m),k=A&&e.minRowLength(y),L=g.calendar,P={autotypenumbers:g.autotypenumbers},D,B;if(c._hasPreCompStats)switch(String(A)+String(x)){case"00":var z=b("x0")||b("dx"),R=b("y0")||b("dy");R&&!z?D="h":D="v",B=T;break;case"10":D="v",B=Math.min(T,k);break;case"20":D="h",B=Math.min(T,y.length);break;case"01":D="h",B=Math.min(T,S);break;case"02":D="v",B=Math.min(T,m.length);break;case"12":D="v",B=Math.min(T,k,m.length);break;case"21":D="h",B=Math.min(T,y.length,S);break;case"11":B=0;break;case"22":var F=!1,O;for(O=0;O<y.length;O++)if(o(y[O],L,P)==="category"){F=!0;break}if(F)D="v",B=Math.min(T,k,m.length);else{for(O=0;O<m.length;O++)if(o(m[O],L,P)==="category"){F=!0;break}F?(D="h",B=Math.min(T,y.length,S)):(D="v",B=Math.min(T,k,m.length))}break}else x>0?(D="v",A>0?B=Math.min(k,S):B=Math.min(S)):A>0?(D="h",B=Math.min(k)):B=0;if(!B){c.visible=!1;return}c._length=B;var q=d("orientation",D);c._hasPreCompStats?q==="v"&&A===0?(d("x0",0),d("dx",1)):q==="h"&&x===0&&(d("y0",0),d("dy",1)):q==="v"&&A===0?d("x0"):q==="h"&&x===0&&d("y0");var H=r.getComponentMethod("calendars","handleTraceDefaults");H(v,c,["x","y"],g)}t(u,"handleSampleDefaults");function f(v,c,d,g){var p=g.prefix,b=e.coerce2(v,c,a,"marker.outliercolor"),m=d("marker.line.outliercolor"),y="outliers";c._hasPreCompStats?y="all":(b||m)&&(y="suspectedoutliers");var T=d(p+"points",y);T?(d("jitter",T==="all"?.3:0),d("pointpos",T==="all"?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.angle"),d("marker.color",c.line.color),d("marker.line.color"),d("marker.line.width"),T==="suspectedoutliers"&&(d("marker.line.outliercolor",c.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete c.marker;var _=d("hoveron");(_==="all"||_.indexOf("points")!==-1)&&d("hovertemplate"),e.coerceSelectionMarkerOpacity(c,d)}t(f,"handlePointsDefaults");function h(v,c){var d,g;function p(y){return e.coerce(g._input,g,a,y)}t(p,"coerce");for(var b=0;b<v.length;b++){g=v[b];var m=g.type;(m==="box"||m==="violin")&&(d=g._input,c[m+"mode"]==="group"&&s(d,g,c,p))}}return t(h,"crossTraceDefaults"),dS={supplyDefaults:l,crossTraceDefaults:h,handleSampleDefaults:u,handlePointsDefaults:f},dS}t(e2,"requireDefaults$K");var pS,uV;function s7(){if(uV)return pS;uV=1;var e=Na,r=Nt.exports,n=Bw();function i(o,a,l,u,f){for(var h=f+"Layout",v=!1,c=0;c<l.length;c++){var d=l[c];if(e.traceIs(d,h)){v=!0;break}}!v||(u(f+"mode"),u(f+"gap"),u(f+"groupgap"))}t(i,"_supply");function s(o,a,l){function u(f,h){return r.coerce(o,a,n,f,h)}t(u,"coerce"),i(o,a,l,u,"box")}return t(s,"supplyLayoutDefaults"),pS={supplyLayoutDefaults:s,_supply:i},pS}t(s7,"requireLayout_defaults$e");var gS,fV;function qfe(){if(fV)return gS;fV=1;var e=xn,r=nn(),n=bv,i=Nt.exports,s=jn.BADNUM,o=i._;gS=t(function(_,M){var w=_._fullLayout,x=r.getFromId(_,M.xaxis||"x"),A=r.getFromId(_,M.yaxis||"y"),S=[],k=M.type==="violin"?"_numViolins":"_numBoxes",L,P,D,B,z,R,F;M.orientation==="h"?(D=x,B="x",z=A,R="y",F=!!M.yperiodalignment):(D=A,B="y",z=x,R="x",F=!!M.xperiodalignment);var O=a(M,R,z,w[k]),q=O[0],H=O[1],j=i.distinctVals(q,z),X=j.vals,G=j.minDiff/2,$,te,ee,ie,se,W,ne=(M.boxpoints||M.points)==="all"?i.identity:function($t){return $t.v<$.lf||$t.v>$.uf};if(M._hasPreCompStats){var he=M[B],re=t(function($t){return D.d2c((M[$t]||[])[L])},"d2c"),ae=1/0,fe=-1/0;for(L=0;L<M._length;L++){var ce=q[L];if(!!e(ce)){if($={},$.pos=$[R]=ce,F&&H&&($.orig_p=H[L]),$.q1=re("q1"),$.med=re("median"),$.q3=re("q3"),te=[],he&&i.isArrayOrTypedArray(he[L]))for(P=0;P<he[L].length;P++)W=D.d2c(he[L][P]),W!==s&&(se={v:W,i:[L,P]},h(se,M,[L,P]),te.push(se));if($.pts=te.sort(c),ee=$[B]=te.map(d),ie=ee.length,$.med!==s&&$.q1!==s&&$.q3!==s&&$.med>=$.q1&&$.q3>=$.med){var xe=re("lowerfence");$.lf=xe!==s&&xe<=$.q1?xe:g($,ee,ie);var Te=re("upperfence");$.uf=Te!==s&&Te>=$.q3?Te:p($,ee,ie);var me=re("mean");$.mean=me!==s?me:ie?i.mean(ee,ie):($.q1+$.q3)/2;var pe=re("sd");$.sd=me!==s&&pe>=0?pe:ie?i.stdev(ee,ie,$.mean):$.q3-$.q1,$.lo=b($),$.uo=m($);var oe=re("notchspan");oe=oe!==s&&oe>0?oe:y($,ie),$.ln=$.med-oe,$.un=$.med+oe;var de=$.lf,ye=$.uf;M.boxpoints&&ee.length&&(de=Math.min(de,ee[0]),ye=Math.max(ye,ee[ie-1])),M.notched&&(de=Math.min(de,$.ln),ye=Math.max(ye,$.un)),$.min=de,$.max=ye}else{i.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+$.q1,"median = "+$.med,"q3 = "+$.q3].join(`
`));var we;$.med!==s?we=$.med:$.q1!==s?$.q3!==s?we=($.q1+$.q3)/2:we=$.q1:$.q3!==s?we=$.q3:we=0,$.med=we,$.q1=$.q3=we,$.lf=$.uf=we,$.mean=$.sd=we,$.ln=$.un=we,$.min=$.max=we}ae=Math.min(ae,$.min),fe=Math.max(fe,$.max),$.pts2=te.filter(ne),S.push($)}}M._extremes[D._id]=r.findExtremes(D,[ae,fe],{padded:!0})}else{var Ee=D.makeCalcdata(M,B),De=l(X,G),Fe=X.length,qe=u(Fe);for(L=0;L<M._length;L++)if(W=Ee[L],!!e(W)){var Je=i.findBin(q[L],De);Je>=0&&Je<Fe&&(se={v:W,i:L},h(se,M,L),qe[Je].push(se))}var Ge=1/0,et=-1/0,Ue=M.quartilemethod,Ye=Ue==="exclusive",$e=Ue==="inclusive";for(L=0;L<Fe;L++)if(qe[L].length>0){if($={},$.pos=$[R]=X[L],te=$.pts=qe[L].sort(c),ee=$[B]=te.map(d),ie=ee.length,$.min=ee[0],$.max=ee[ie-1],$.mean=i.mean(ee,ie),$.sd=i.stdev(ee,ie,$.mean),$.med=i.interp(ee,.5),ie%2&&(Ye||$e)){var Ct,It;Ye?(Ct=ee.slice(0,ie/2),It=ee.slice(ie/2+1)):$e&&(Ct=ee.slice(0,ie/2+1),It=ee.slice(ie/2)),$.q1=i.interp(Ct,.5),$.q3=i.interp(It,.5)}else $.q1=i.interp(ee,.25),$.q3=i.interp(ee,.75);$.lf=g($,ee,ie),$.uf=p($,ee,ie),$.lo=b($),$.uo=m($);var Vt=y($,ie);$.ln=$.med-Vt,$.un=$.med+Vt,Ge=Math.min(Ge,$.ln),et=Math.max(et,$.un),$.pts2=te.filter(ne),S.push($)}M._extremes[D._id]=r.findExtremes(D,M.notched?Ee.concat([Ge,et]):Ee,{padded:!0})}return v(S,M),S.length>0?(S[0].t={num:w[k],dPos:G,posLetter:R,valLetter:B,labels:{med:o(_,"median:"),min:o(_,"min:"),q1:o(_,"q1:"),q3:o(_,"q3:"),max:o(_,"max:"),mean:M.boxmean==="sd"?o(_,"mean \xB1 \u03C3:"):o(_,"mean:"),lf:o(_,"lower fence:"),uf:o(_,"upper fence:")}},w[k]++,S):[{t:{empty:!0}}]},"calc");function a(T,_,M,w){var x=_ in T,A=_+"0"in T,S="d"+_ in T;if(x||A&&S){var k=M.makeCalcdata(T,_),L=n(T,M,_,k).vals;return[L,k]}var P;A?P=T[_+"0"]:"name"in T&&(M.type==="category"||e(T.name)&&["linear","log"].indexOf(M.type)!==-1||i.isDateTime(T.name)&&M.type==="date")?P=T.name:P=w;for(var D=M.type==="multicategory"?M.r2c_just_indices(P):M.d2c(P,0,T[_+"calendar"]),B=T._length,z=new Array(B),R=0;R<B;R++)z[R]=D;return[z]}t(a,"getPosArrays");function l(T,_){for(var M=T.length,w=new Array(M+1),x=0;x<M;x++)w[x]=T[x]-_;return w[M]=T[M-1]+_,w}t(l,"makeBins");function u(T){for(var _=new Array(T),M=0;M<T;M++)_[M]=[];return _}t(u,"initNestedArray");var f={text:"tx",hovertext:"htx"};function h(T,_,M){for(var w in f)i.isArrayOrTypedArray(_[w])&&(Array.isArray(M)?i.isArrayOrTypedArray(_[w][M[0]])&&(T[f[w]]=_[w][M[0]][M[1]]):T[f[w]]=_[w][M])}t(h,"arraysToCalcdata");function v(T,_){if(i.isArrayOrTypedArray(_.selectedpoints))for(var M=0;M<T.length;M++){for(var w=T[M].pts||[],x={},A=0;A<w.length;A++)x[w[A].i]=A;i.tagSelected(w,_,x)}}t(v,"calcSelection");function c(T,_){return T.v-_.v}t(c,"sortByVal");function d(T){return T.v}t(d,"extractVal");function g(T,_,M){return M===0?T.q1:Math.min(T.q1,_[Math.min(i.findBin(2.5*T.q1-1.5*T.q3,_,!0)+1,M-1)])}t(g,"computeLowerFence");function p(T,_,M){return M===0?T.q3:Math.max(T.q3,_[Math.max(i.findBin(2.5*T.q3-1.5*T.q1,_),0)])}t(p,"computeUpperFence");function b(T){return 4*T.q1-3*T.q3}t(b,"computeLowerOutlierBound");function m(T){return 4*T.q3-3*T.q1}t(m,"computeUpperOutlierBound");function y(T,_){return _===0?0:1.57*(T.q3-T.q1)/Math.sqrt(_)}return t(y,"computeNotchSpan"),gS}t(qfe,"requireCalc$D");var yS,cV;function l7(){if(cV)return yS;cV=1;var e=nn(),r=Nt.exports,n=I0().getAxisGroup,i=["v","h"];function s(a,l){for(var u=a.calcdata,f=l.xaxis,h=l.yaxis,v=0;v<i.length;v++){for(var c=i[v],d=c==="h"?h:f,g=[],p=0;p<u.length;p++){var b=u[p],m=b[0].t,y=b[0].trace;y.visible===!0&&(y.type==="box"||y.type==="candlestick")&&!m.empty&&(y.orientation||"v")===c&&y.xaxis===f._id&&y.yaxis===h._id&&g.push(p)}o("box",a,g,d)}}t(s,"crossTraceCalc");function o(a,l,u,f){var h=l.calcdata,v=l._fullLayout,c=f._id,d=c.charAt(0),g,p,b,m=[],y=0;for(g=0;g<u.length;g++)for(b=h[u[g]],p=0;p<b.length;p++)m.push(f.c2l(b[p].pos,!0)),y+=(b[p].pts2||[]).length;if(!!m.length){var T=r.distinctVals(m);(f.type==="category"||f.type==="multicategory")&&(T.minDiff=1);var _=T.minDiff/2;e.minDtick(f,T.minDiff,T.vals[0],!0);var M=a==="violin"?"_numViolins":"_numBoxes",w=v[M],x=v[a+"mode"]==="group"&&w>1,A=1-v[a+"gap"],S=1-v[a+"groupgap"];for(g=0;g<u.length;g++){b=h[u[g]];var k=b[0].trace,L=b[0].t,P=k.width,D=k.side,B,z,R,F;if(P)B=z=F=P/2,R=0;else if(B=_,x){var O=n(v,f._id)+k.orientation,q=v._alignmentOpts[O]||{},H=q[k.alignmentgroup]||{},j=Object.keys(H.offsetGroups||{}).length,X=j||w,G=j?k._offsetIndex:L.num;z=B*A*S/X,R=2*B*(-.5+(G+.5)/X)*A,F=B*A/X}else z=B*A*S,R=0,F=B;L.dPos=B,L.bPos=R,L.bdPos=z,L.wHover=F;var $,te,ee=R+z,ie,se,W,ne,he,re,ae=Boolean(P),fe=(k.boxpoints||k.points)&&y>0;if(D==="positive"?($=B*(P?1:.5),ie=ee,te=ie=R):D==="negative"?($=ie=R,te=B*(P?1:.5),se=ee):($=te=B,ie=se=ee),fe){var ce=k.pointpos,xe=k.jitter,Te=k.marker.size/2,me=0;ce+xe>=0&&(me=ee*(ce+xe),me>$?(ae=!0,he=Te,W=me):me>ie&&(he=Te,W=$)),me<=$&&(W=$);var pe=0;ce-xe<=0&&(pe=-ee*(ce-xe),pe>te?(ae=!0,re=Te,ne=pe):pe>se&&(re=Te,ne=te)),pe<=te&&(ne=te)}else W=$,ne=te;var oe=new Array(b.length);for(p=0;p<b.length;p++)oe[p]=b[p].pos;k._extremes[c]=e.findExtremes(f,oe,{padded:ae,vpadminus:ne,vpadplus:W,vpadLinearized:!0,ppadminus:{x:re,y:he}[d],ppadplus:{x:he,y:re}[d]})}}}return t(o,"setPositionOffset"),yS={crossTraceCalc:s,setPositionOffset:o},yS}t(l7,"requireCross_trace_calc$3");var mS,hV;function u7(){if(hV)return mS;hV=1;var e=Va.exports,r=Nt.exports,n=bn.exports,i=5,s=.01;function o(f,h,v,c){var d=h.xaxis,g=h.yaxis;r.makeTraceGroups(c,v,"trace boxes").each(function(p){var b=e.select(this),m=p[0],y=m.t,T=m.trace;if(y.wdPos=y.bdPos*T.whiskerwidth,T.visible!==!0||y.empty){b.remove();return}var _,M;T.orientation==="h"?(_=g,M=d):(_=d,M=g),a(b,{pos:_,val:M},T,y),l(b,{x:d,y:g},T,y),u(b,{pos:_,val:M},T,y)})}t(o,"plot");function a(f,h,v,c){var d=v.orientation==="h",g=h.val,p=h.pos,b=!!p.rangebreaks,m=c.bPos,y=c.wdPos||0,T=c.bPosPxOffset||0,_=v.whiskerwidth||0,M=v.notched||!1,w=M?1-2*v.notchwidth:1,x,A;Array.isArray(c.bdPos)?(x=c.bdPos[0],A=c.bdPos[1]):(x=c.bdPos,A=c.bdPos);var S=f.selectAll("path.box").data(v.type!=="violin"||v.box.visible?r.identity:[]);S.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(k){if(k.empty)return"M0,0Z";var L=p.c2l(k.pos+m,!0),P=p.l2p(L-x)+T,D=p.l2p(L+A)+T,B=b?(P+D)/2:p.l2p(L)+T,z=v.whiskerwidth,R=b?P*z+(1-z)*B:p.l2p(L-y)+T,F=b?D*z+(1-z)*B:p.l2p(L+y)+T,O=p.l2p(L-x*w)+T,q=p.l2p(L+A*w)+T,H=g.c2p(k.q1,!0),j=g.c2p(k.q3,!0),X=r.constrain(g.c2p(k.med,!0),Math.min(H,j)+1,Math.max(H,j)-1),G=k.lf===void 0||v.boxpoints===!1,$=g.c2p(G?k.min:k.lf,!0),te=g.c2p(G?k.max:k.uf,!0),ee=g.c2p(k.ln,!0),ie=g.c2p(k.un,!0);d?e.select(this).attr("d","M"+X+","+O+"V"+q+"M"+H+","+P+"V"+D+(M?"H"+ee+"L"+X+","+q+"L"+ie+","+D:"")+"H"+j+"V"+P+(M?"H"+ie+"L"+X+","+O+"L"+ee+","+P:"")+"ZM"+H+","+B+"H"+$+"M"+j+","+B+"H"+te+(_===0?"":"M"+$+","+R+"V"+F+"M"+te+","+R+"V"+F)):e.select(this).attr("d","M"+O+","+X+"H"+q+"M"+P+","+H+"H"+D+(M?"V"+ee+"L"+q+","+X+"L"+D+","+ie:"")+"V"+j+"H"+P+(M?"V"+ie+"L"+O+","+X+"L"+P+","+ee:"")+"ZM"+B+","+H+"V"+$+"M"+B+","+j+"V"+te+(_===0?"":"M"+R+","+$+"H"+F+"M"+R+","+te+"H"+F))})}t(a,"plotBoxAndWhiskers");function l(f,h,v,c){var d=h.x,g=h.y,p=c.bdPos,b=c.bPos,m=v.boxpoints||v.points;r.seedPseudoRandom();var y=t(function(M){return M.forEach(function(w){w.t=c,w.trace=v}),M},"fn"),T=f.selectAll("g.points").data(m?y:[]);T.enter().append("g").attr("class","points"),T.exit().remove();var _=T.selectAll("path").data(function(M){var w,x=M.pts2,A=Math.max((M.max-M.min)/10,M.q3-M.q1),S=A*1e-9,k=A*s,L=[],P=0,D;if(v.jitter){if(A===0)for(P=1,L=new Array(x.length),w=0;w<x.length;w++)L[w]=1;else for(w=0;w<x.length;w++){var B=Math.max(0,w-i),z=x[B].v,R=Math.min(x.length-1,w+i),F=x[R].v;m!=="all"&&(x[w].v<M.lf?F=Math.min(F,M.lf):z=Math.max(z,M.uf));var O=Math.sqrt(k*(R-B)/(F-z+S))||0;O=r.constrain(Math.abs(O),0,1),L.push(O),P=Math.max(O,P)}D=v.jitter*2/(P||1)}for(w=0;w<x.length;w++){var q=x[w],H=q.v,j=v.jitter?D*L[w]*(r.pseudoRandom()-.5):0,X=M.pos+b+p*(v.pointpos+j);v.orientation==="h"?(q.y=X,q.x=H):(q.x=X,q.y=H),m==="suspectedoutliers"&&H<M.uo&&H>M.lo&&(q.so=!0)}return x});_.enter().append("path").classed("point",!0),_.exit().remove(),_.call(n.translatePoints,d,g)}t(l,"plotPoints");function u(f,h,v,c){var d=h.val,g=h.pos,p=!!g.rangebreaks,b=c.bPos,m=c.bPosPxOffset||0,y=v.boxmean||(v.meanline||{}).visible,T,_;Array.isArray(c.bdPos)?(T=c.bdPos[0],_=c.bdPos[1]):(T=c.bdPos,_=c.bdPos);var M=f.selectAll("path.mean").data(v.type==="box"&&v.boxmean||v.type==="violin"&&v.box.visible&&v.meanline.visible?r.identity:[]);M.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),M.exit().remove(),M.each(function(w){var x=g.c2l(w.pos+b,!0),A=g.l2p(x-T)+m,S=g.l2p(x+_)+m,k=p?(A+S)/2:g.l2p(x)+m,L=d.c2p(w.mean,!0),P=d.c2p(w.mean-w.sd,!0),D=d.c2p(w.mean+w.sd,!0);v.orientation==="h"?e.select(this).attr("d","M"+L+","+A+"V"+S+(y==="sd"?"m0,0L"+P+","+k+"L"+L+","+A+"L"+D+","+k+"Z":"")):e.select(this).attr("d","M"+A+","+L+"H"+S+(y==="sd"?"m0,0L"+k+","+P+"L"+A+","+L+"L"+k+","+D+"Z":""))})}return t(u,"plotBoxMean"),mS={plot:o,plotBoxAndWhiskers:a,plotPoints:l,plotBoxMean:u},mS}t(u7,"requirePlot$w");var xS,vV;function Yz(){if(vV)return xS;vV=1;var e=Va.exports,r=$a.exports,n=bn.exports;function i(o,a,l){var u=l||e.select(o).selectAll("g.trace.boxes");u.style("opacity",function(f){return f[0].trace.opacity}),u.each(function(f){var h=e.select(this),v=f[0].trace,c=v.line.width;function d(b,m,y,T){b.style("stroke-width",m+"px").call(r.stroke,y).call(r.fill,T)}t(d,"styleBox");var g=h.selectAll("path.box");if(v.type==="candlestick")g.each(function(b){if(!b.empty){var m=e.select(this),y=v[b.dir];d(m,y.line.width,y.line.color,y.fillcolor),m.style("opacity",v.selectedpoints&&!b.selected?.3:1)}});else{d(g,c,v.line.color,v.fillcolor),h.selectAll("path.mean").style({"stroke-width":c,"stroke-dasharray":2*c+"px,"+c+"px"}).call(r.stroke,v.line.color);var p=h.selectAll("path.point");n.pointStyle(p,v,o)}})}t(i,"style");function s(o,a,l){var u=a[0].trace,f=l.selectAll("path.point");u.selectedpoints?n.selectedPointStyle(f,u):n.pointStyle(f,u,o)}return t(s,"styleOnSelect"),xS={style:i,styleOnSelect:s},xS}t(Yz,"requireStyle$e");var bS,dV;function Ufe(){if(dV)return bS;dV=1;var e=nn(),r=Nt.exports,n=Ko,i=$a.exports,s=r.fillText;function o(u,f,h,v){var c=u.cd,d=c[0].trace,g=d.hoveron,p=[],b;return g.indexOf("boxes")!==-1&&(p=p.concat(a(u,f,h,v))),g.indexOf("points")!==-1&&(b=l(u,f,h)),v==="closest"?b?[b]:p:(b&&p.push(b),p)}t(o,"hoverPoints");function a(u,f,h,v){var c=u.cd,d=u.xa,g=u.ya,p=c[0].trace,b=c[0].t,m=p.type==="violin",y,T,_,M,w,x,A,S,k,L,P,D=b.bdPos,B,z,R=b.wHover,F=t(function(pe){return _.c2l(pe.pos)+b.bPos-_.c2l(x)},"shiftPos");m&&p.side!=="both"?(p.side==="positive"&&(k=t(function(pe){var oe=F(pe);return n.inbox(oe,oe+R,L)},"dPos"),B=D,z=0),p.side==="negative"&&(k=t(function(pe){var oe=F(pe);return n.inbox(oe-R,oe,L)},"dPos"),B=0,z=D)):(k=t(function(pe){var oe=F(pe);return n.inbox(oe-R,oe+R,L)},"dPos"),B=z=D);var O;m?O=t(function(pe){return n.inbox(pe.span[0]-w,pe.span[1]-w,L)},"dVal"):O=t(function(pe){return n.inbox(pe.min-w,pe.max-w,L)},"dVal"),p.orientation==="h"?(w=f,x=h,A=O,S=k,y="y",_=g,T="x",M=d):(w=h,x=f,A=k,S=O,y="x",_=d,T="y",M=g);var q=Math.min(1,D/Math.abs(_.r2c(_.range[1])-_.r2c(_.range[0])));L=u.maxHoverDistance-q,P=u.maxSpikeDistance-q;function H(pe){return(A(pe)+S(pe))/2}t(H,"dxy");var j=n.getDistanceFunction(v,A,S,H);if(n.getClosest(c,j,u),u.index===!1)return[];var X=c[u.index],G=p.line.color,$=(p.marker||{}).color;i.opacity(G)&&p.line.width?u.color=G:i.opacity($)&&p.boxpoints?u.color=$:u.color=p.fillcolor,u[y+"0"]=_.c2p(X.pos+b.bPos-z,!0),u[y+"1"]=_.c2p(X.pos+b.bPos+B,!0),u[y+"LabelVal"]=X.orig_p!==void 0?X.orig_p:X.pos;var te=y+"Spike";u.spikeDistance=H(X)*P/L,u[te]=_.c2p(X.pos,!0);var ee=p.boxmean||(p.meanline||{}).visible,ie=p.boxpoints||p.points,se=ie&&ee?["max","uf","q3","med","mean","q1","lf","min"]:ie&&!ee?["max","uf","q3","med","q1","lf","min"]:!ie&&ee?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],W=M.range[1]<M.range[0];p.orientation===(W?"v":"h")&&se.reverse();for(var ne=u.spikeDistance,he=u[te],re=[],ae=0;ae<se.length;ae++){var fe=se[ae];if(fe in X){var ce=X[fe],xe=M.c2p(ce,!0),Te=r.extendFlat({},u);Te.attr=fe,Te[T+"0"]=Te[T+"1"]=xe,Te[T+"LabelVal"]=ce,Te[T+"Label"]=(b.labels?b.labels[fe]+" ":"")+e.hoverLabelText(M,ce,p[T+"hoverformat"]),Te.hoverOnBox=!0,fe==="mean"&&"sd"in X&&p.boxmean==="sd"&&(Te[T+"err"]=X.sd),Te.hovertemplate=!1,re.push(Te)}}u.name="",u.spikeDistance=void 0,u[te]=void 0;for(var me=0;me<re.length;me++)re[me].attr!=="med"?(re[me].name="",re[me].spikeDistance=void 0,re[me][te]=void 0):(re[me].spikeDistance=ne,re[me][te]=he);return re}t(a,"hoverOnBoxes");function l(u,f,h){for(var v=u.cd,c=u.xa,d=u.ya,g=v[0].trace,p=c.c2p(f),b=d.c2p(h),m,y=t(function(O){var q=Math.max(3,O.mrc||0);return Math.max(Math.abs(c.c2p(O.x)-p)-q,1-3/q)},"dx"),T=t(function(O){var q=Math.max(3,O.mrc||0);return Math.max(Math.abs(d.c2p(O.y)-b)-q,1-3/q)},"dy"),_=n.quadrature(y,T),M=!1,w,x,A=0;A<v.length;A++){w=v[A];for(var S=0;S<(w.pts||[]).length;S++){x=w.pts[S];var k=_(x);k<=u.distance&&(u.distance=k,M=[A,S])}}if(!M)return!1;w=v[M[0]],x=w.pts[M[1]];var L=c.c2p(x.x,!0),P=d.c2p(x.y,!0),D=x.mrc||1;m=r.extendFlat({},u,{index:x.i,color:(g.marker||{}).color,name:g.name,x0:L-D,x1:L+D,y0:P-D,y1:P+D,spikeDistance:u.distance,hovertemplate:g.hovertemplate});var B=w.orig_p,z=B!==void 0?B:w.pos,R;g.orientation==="h"?(R=d,m.xLabelVal=x.x,m.yLabelVal=z):(R=c,m.xLabelVal=z,m.yLabelVal=x.y);var F=R._id.charAt(0);return m[F+"Spike"]=R.c2p(w.pos,!0),s(x,g,m),m}return t(l,"hoverOnPoints"),bS={hoverPoints:o,hoverOnBoxes:a,hoverOnPoints:l},bS}t(Ufe,"requireHover$l");var _S,pV;function aLe(){return pV||(pV=1,_S=t(function(r,n){return n.hoverOnBox&&(r.hoverOnBox=n.hoverOnBox),"xVal"in n&&(r.x=n.xVal),"yVal"in n&&(r.y=n.yVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r},"eventData")),_S}t(aLe,"requireEvent_data$b");var wS,gV;function Hfe(){return gV||(gV=1,wS=t(function(r,n){var i=r.cd,s=r.xaxis,o=r.yaxis,a=[],l,u;if(n===!1)for(l=0;l<i.length;l++)for(u=0;u<(i[l].pts||[]).length;u++)i[l].pts[u].selected=0;else for(l=0;l<i.length;l++)for(u=0;u<(i[l].pts||[]).length;u++){var f=i[l].pts[u],h=s.c2p(f.x),v=o.c2p(f.y);n.contains([h,v],null,f.i,r)?(a.push({pointNumber:f.i,x:s.c2d(f.x),y:o.c2d(f.y)}),f.selected=1):f.selected=0}return a},"selectPoints")),wS}t(Hfe,"requireSelect$7");var TS,yV;function nLe(){return yV||(yV=1,TS={attributes:Fw(),layoutAttributes:Bw(),supplyDefaults:e2().supplyDefaults,crossTraceDefaults:e2().crossTraceDefaults,supplyLayoutDefaults:s7().supplyLayoutDefaults,calc:qfe(),crossTraceCalc:l7().crossTraceCalc,plot:u7().plot,style:Yz().style,styleOnSelect:Yz().styleOnSelect,hoverPoints:Ufe().hoverPoints,eventData:aLe(),selectPoints:Hfe(),moduleType:"trace",name:"box",basePlotModule:Ti,categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{description:["Each box spans from quartile 1 (Q1) to quartile 3 (Q3).","The second quartile (Q2, i.e. the median) is marked by a line inside the box.","The fences grow outward from the boxes' edges,","by default they span +/- 1.5 times the interquartile range (IQR: Q3-Q1),","The sample mean and standard deviation as well as notches and","the sample, outlier and suspected outliers points can be optionally","added to the box plot.","The values and positions corresponding to each boxes can be input","using two signatures.","The first signature expects users to supply the sample values in the `y`","data array for vertical boxes (`x` for horizontal boxes).","By supplying an `x` (`y`) array, one box per distinct `x` (`y`) value is drawn","If no `x` (`y`) {array} is provided, a single box is drawn.","In this case, the box is positioned with the trace `name` or with `x0` (`y0`) if provided.","The second signature expects users to supply the boxes corresponding Q1, median and Q3","statistics in the `q1`, `median` and `q3` data arrays respectively.","Other box features relying on statistics namely `lowerfence`, `upperfence`, `notchspan`","can be set directly by the users.","To have plotly compute them or to show sample points besides the boxes,","users can set the `y` data array for vertical boxes (`x` for horizontal boxes)","to a 2D array with the outer length corresponding","to the number of boxes in the traces and the inner length corresponding the sample size."].join(" ")}}),TS}t(nLe,"requireBox$1");var mV;function iLe(){return mV||(mV=1,function(e){e.exports=nLe()}(cS)),cS.exports}t(iLe,"requireBox");var AS={exports:{}},SS,xV;function Iy(){if(xV)return SS;xV=1;var e=Ps,r=Ni,n=Ho,i=Vo.axisHoverFormat,s=Un.hovertemplateAttrs,o=Un.texttemplateAttrs,a=Qi,l=cn.extendFlat;return SS=l({z:{valType:"data_array",editType:"calc",description:"Sets the z data."},x:l({},e.x,{impliedEdits:{xtype:"array"}}),x0:l({},e.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},e.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},e.y,{impliedEdits:{ytype:"array"}}),y0:l({},e.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},e.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},e.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},e.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},e.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},e.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},e.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},e.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"calc",description:"Same as `text`."},transpose:{valType:"boolean",dflt:!1,editType:"calc",description:"Transposes the z data."},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's x coordinates are given by *x*","(the default behavior when `x` is provided).","If *scaled*, the heatmap's x coordinates are given by *x0* and *dx*","(the default behavior when `x` is not provided)."].join(" ")},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's y coordinates are given by *y*","(the default behavior when `y` is provided)","If *scaled*, the heatmap's y coordinates are given by *y0* and *dy*","(the default behavior when `y` is not provided)"].join(" ")},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc",description:["Picks a smoothing algorithm use to smooth `z` data."].join(" ")},hoverongaps:{valType:"boolean",dflt:!0,editType:"none",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data have hover labels associated with them."].join(" ")},connectgaps:{valType:"boolean",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array and `zsmooth` is not false;","otherwise it is defaulted to false."].join(" ")},xgap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the horizontal gap (in pixels) between bricks."},ygap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the vertical gap (in pixels) between bricks."},xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z",1),hovertemplate:s(),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:n({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style",description:"Sets the text font."}),showlegend:l({},r.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1})),SS}t(Iy,"requireAttributes$J");var MS,bV;function Ow(){if(bV)return MS;bV=1;var e=xn,r=Nt.exports,n=Na;MS=t(function(a,l,u,f,h,v){var c=u("z");h=h||"x",v=v||"y";var d,g;if(c===void 0||!c.length)return 0;if(r.isArray1D(a.z)){d=u(h),g=u(v);var p=r.minRowLength(d),b=r.minRowLength(g);if(p===0||b===0)return 0;l._length=Math.min(p,b,c.length)}else{if(d=i(h,u),g=i(v,u),!s(c))return 0;u("transpose"),l._length=null}if(a.type==="heatmapgl")return!0;var m=n.getComponentMethod("calendars","handleTraceDefaults");return m(a,l,[h,v],f),!0},"handleXYZDefaults");function i(o,a){var l=a(o),u=l?a(o+"type","array"):"scaled";return u==="scaled"&&(a(o+"0"),a("d"+o)),l}t(i,"coordDefaults");function s(o){for(var a=!0,l=!1,u=!1,f,h=0;h<o.length;h++){if(f=o[h],!r.isArrayOrTypedArray(f)){a=!1;break}f.length>0&&(l=!0);for(var v=0;v<f.length;v++)if(e(f[v])){u=!0;break}}return a&&l&&u}return t(s,"isValidZ"),MS}t(Ow,"requireXyz_defaults");var kS,_V;function Nw(){if(_V)return kS;_V=1;var e=Nt.exports;return kS=t(function(n,i){n("texttemplate");var s=e.extendFlat({},i.font,{color:"auto",size:"auto"});e.coerceFont(n,"textfont",s)},"handleHeatmapLabelDefaults"),kS}t(Nw,"requireLabel_defaults$1");var ES,wV;function $fe(){return wV||(wV=1,ES=t(function(r,n,i){var s=i("zsmooth");s===!1&&(i("xgap"),i("ygap")),i("zhoverformat")},"handleStyleDefaults")),ES}t($fe,"requireStyle_defaults$1");var CS,TV;function oLe(){if(TV)return CS;TV=1;var e=Nt.exports,r=Ow(),n=Nw(),i=yv,s=$fe(),o=ml,a=Iy();return CS=t(function(u,f,h,v){function c(g,p){return e.coerce(u,f,a,g,p)}t(c,"coerce");var d=r(u,f,c,v);if(!d){f.visible=!1;return}i(u,f,v,c),c("xhoverformat"),c("yhoverformat"),c("text"),c("hovertext"),c("hovertemplate"),n(c,v),s(u,f,c,v),c("hoverongaps"),c("connectgaps",e.isArray1D(f.z)&&f.zsmooth!==!1),o(u,f,v,c,{prefix:"",cLetter:"z"})},"supplyDefaults"),CS}t(oLe,"requireDefaults$J");var LS,AV;function Vfe(){if(AV)return LS;AV=1;var e=xn;return LS={count:function(r,n,i){return i[r]++,1},sum:function(r,n,i,s){var o=s[n];return e(o)?(o=Number(o),i[r]+=o,o):0},avg:function(r,n,i,s,o){var a=s[n];return e(a)&&(a=Number(a),i[r]+=a,o[r]++),0},min:function(r,n,i,s){var o=s[n];if(e(o))if(o=Number(o),e(i[r])){if(i[r]>o){var a=o-i[r];return i[r]=o,a}}else return i[r]=o,o;return 0},max:function(r,n,i,s){var o=s[n];if(e(o))if(o=Number(o),e(i[r])){if(i[r]<o){var a=o-i[r];return i[r]=o,a}}else return i[r]=o,o;return 0}},LS}t(Vfe,"requireBin_functions");var RS,SV;function Gfe(){return SV||(SV=1,RS={percent:function(e,r){for(var n=e.length,i=100/r,s=0;s<n;s++)e[s]*=i},probability:function(e,r){for(var n=e.length,i=0;i<n;i++)e[i]/=r},density:function(e,r,n,i){var s=e.length;i=i||1;for(var o=0;o<s;o++)e[o]*=n[o]*i},"probability density":function(e,r,n,i){var s=e.length;i&&(r/=i);for(var o=0;o<s;o++)e[o]*=n[o]/r}}),RS}t(Gfe,"requireNorm_functions");var PS,MV;function jfe(){return MV||(MV=1,PS=t(function(r,n){for(var i=r.length,s=0,o=0;o<i;o++)n[o]?(r[o]/=n[o],s+=r[o]):r[o]=null;return s},"doAvg")),PS}t(jfe,"requireAverage");var DS,kV;function Yfe(){if(kV)return DS;kV=1;var e=jn,r=e.ONEAVGYEAR,n=e.ONEAVGMONTH,i=e.ONEDAY,s=e.ONEHOUR,o=e.ONEMIN,a=e.ONESEC,l=nn().tickIncrement;DS=t(function(d,g,p,b,m){var y=-1.1*g,T=-.1*g,_=d-T,M=p[0],w=p[1],x=Math.min(u(M+T,M+_,b,m),u(w+T,w+_,b,m)),A=Math.min(u(M+y,M+T,b,m),u(w+y,w+T,b,m)),S,k;if(x>A&&A<Math.abs(w-M)/4e3?(S=x,k=!1):(S=Math.min(x,A),k=!0),b.type==="date"&&S>i){var L=S===r?1:6,P=S===r?"M12":"M1";return function(D,B){var z=b.c2d(D,r,m),R=z.indexOf("-",L);R>0&&(z=z.substr(0,R));var F=b.d2c(z,0,m);if(F<D){var O=l(F,P,!1,m);(F+O)/2<D+d&&(F=O)}return B&&k?l(F,P,!0,m):F}}return function(D,B){var z=S*Math.round(D/S);return z+S/10<D&&z+S*.9<D+d&&(z+=S),B&&k&&(z-=S),z}},"getBinSpanLabelRound");function u(c,d,g,p){if(c*d<=0)return 1/0;for(var b=Math.abs(d-c),m=g.type==="date",y=f(b,m),T=0;T<10;T++){var _=f(y*80,m);if(y===_)break;if(h(_,c,d,m,g,p))y=_;else break}return y}t(u,"biggestDigitChanged");function f(c,d){return d&&c>a?c>i?c>r*1.1?r:c>n*1.1?n:i:c>s?s:c>o?o:a:Math.pow(10,Math.floor(Math.log(c)/Math.LN10))}t(f,"biggestGuaranteedDigitChanged");function h(c,d,g,p,b,m){if(p&&c>i){var y=v(d,b,m),T=v(g,b,m),_=c===r?0:1;return y[_]!==T[_]}return Math.floor(g/c)-Math.floor(d/c)>.1}t(h,"didDigitChange");function v(c,d,g){var p=d.c2d(c,r,g).split("-");return p[0]===""&&(p.unshift(),p[0]="-"+p[0]),p}return t(v,"dateParts"),DS}t(Yfe,"requireBin_label_vals");var IS,EV;function Wfe(){if(EV)return IS;EV=1;var e=xn,r=Nt.exports,n=Na,i=nn(),s=zw(),o=Vfe(),a=Gfe(),l=jfe(),u=Yfe();function f(g,p){var b=[],m=[],y=p.orientation==="h",T=i.getFromId(g,y?p.yaxis:p.xaxis),_=y?"y":"x",M={x:"y",y:"x"}[_],w=p[_+"calendar"],x=p.cumulative,A,S=h(g,p,T,_),k=S[0],L=S[1],P=typeof k.size=="string",D=[],B=P?D:k,z=[],R=[],F=[],O=0,q=p.histnorm,H=p.histfunc,j=q.indexOf("density")!==-1,X,G,$;x.enabled&&j&&(q=q.replace(/ ?density$/,""),j=!1);var te=H==="max"||H==="min",ee=te?null:0,ie=o.count,se=a[q],W=!1,ne=t(function(Fe){return T.r2c(Fe,0,w)},"pr2c"),he;for(r.isArrayOrTypedArray(p[M])&&H!=="count"&&(he=p[M],W=H==="avg",ie=o[H]),A=ne(k.start),G=ne(k.end)+(A-i.tickIncrement(A,k.size,!1,w))/1e6;A<G&&b.length<1e6&&(X=i.tickIncrement(A,k.size,!1,w),b.push((A+X)/2),m.push(ee),F.push([]),D.push(A),j&&z.push(1/(X-A)),W&&R.push(0),!(X<=A));)A=X;D.push(A),!P&&T.type==="date"&&(B={start:ne(B.start),end:ne(B.end),size:B.size}),g._fullLayout._roundFnOpts||(g._fullLayout._roundFnOpts={});var re=p["_"+_+"bingroup"],ae={leftGap:1/0,rightGap:1/0};re&&(g._fullLayout._roundFnOpts[re]||(g._fullLayout._roundFnOpts[re]=ae),ae=g._fullLayout._roundFnOpts[re]);var fe=m.length,ce=!0,xe=ae.leftGap,Te=ae.rightGap,me={};for(A=0;A<L.length;A++){var pe=L[A];$=r.findBin(pe,B),$>=0&&$<fe&&(O+=ie($,A,m,he,R),ce&&F[$].length&&pe!==L[F[$][0]]&&(ce=!1),F[$].push(A),me[A]=$,xe=Math.min(xe,pe-D[$]),Te=Math.min(Te,D[$+1]-pe))}ae.leftGap=xe,ae.rightGap=Te;var oe;ce||(oe=t(function(Fe,qe){return function(){var Je=g._fullLayout._roundFnOpts[re];return u(Je.leftGap,Je.rightGap,D,T,w)(Fe,qe)}},"roundFn")),W&&(O=l(m,R)),se&&se(m,O,z),x.enabled&&d(m,x.direction,x.currentbin);var de=Math.min(b.length,m.length),ye=[],we=0,Ee=de-1;for(A=0;A<de;A++)if(m[A]){we=A;break}for(A=de-1;A>=we;A--)if(m[A]){Ee=A;break}for(A=we;A<=Ee;A++)if(e(b[A])&&e(m[A])){var De={p:b[A],s:m[A],b:0};x.enabled||(De.pts=F[A],ce?De.ph0=De.ph1=F[A].length?L[F[A][0]]:b[A]:(p._computePh=!0,De.ph0=oe(D[A]),De.ph1=oe(D[A+1],!0))),ye.push(De)}return ye.length===1&&(ye[0].width1=i.tickIncrement(ye[0].p,k.size,!1,w)-ye[0].p),s(ye,p),r.isArrayOrTypedArray(p.selectedpoints)&&r.tagSelected(ye,p,me),ye}t(f,"calc");function h(g,p,b,m,y){var T=m+"bins",_=g._fullLayout,M=p["_"+m+"bingroup"],w=_._histogramBinOpts[M],x=_.barmode==="overlay",A,S,k,L,P,D,B,z=t(function(pe){return b.r2c(pe,0,L)},"r2c"),R=t(function(pe){return b.c2r(pe,0,L)},"c2r"),F=b.type==="date"?function(pe){return pe||pe===0?r.cleanDate(pe,null,L):null}:function(pe){return e(pe)?Number(pe):null};function O(pe,oe,de){oe[pe+"Found"]?(oe[pe]=F(oe[pe]),oe[pe]===null&&(oe[pe]=de[pe])):(D[pe]=oe[pe]=de[pe],r.nestedProperty(S[0],T+"."+pe).set(de[pe]))}if(t(O,"setBound"),p["_"+m+"autoBinFinished"])delete p["_"+m+"autoBinFinished"];else{S=w.traces;var q=[],H=!0,j=!1,X=!1;for(A=0;A<S.length;A++)if(k=S[A],k.visible){var G=w.dirs[A];P=k["_"+G+"pos0"]=b.makeCalcdata(k,G),q=r.concat(q,P),delete k["_"+m+"autoBinFinished"],p.visible===!0&&(H?H=!1:(delete k._autoBin,k["_"+m+"autoBinFinished"]=1),n.traceIs(k,"2dMap")&&(j=!0),k.type==="histogram2dcontour"&&(X=!0))}L=S[0][m+"calendar"];var $=i.autoBin(q,b,w.nbins,j,L,w.sizeFound&&w.size),te=S[0]._autoBin={};if(D=te[w.dirs[0]]={},X&&(w.size||($.start=R(i.tickIncrement(z($.start),$.size,!0,L))),w.end===void 0&&($.end=R(i.tickIncrement(z($.end),$.size,!1,L)))),x&&!n.traceIs(p,"2dMap")&&$._dataSpan===0&&b.type!=="category"&&b.type!=="multicategory"){if(y)return[$,P,!0];$=v(g,p,b,m,T)}B=k.cumulative||{},B.enabled&&B.currentbin!=="include"&&(B.direction==="decreasing"?$.start=R(i.tickIncrement(z($.start),$.size,!0,L)):$.end=R(i.tickIncrement(z($.end),$.size,!1,L))),w.size=$.size,w.sizeFound||(D.size=$.size,r.nestedProperty(S[0],T+".size").set($.size)),O("start",w,$),O("end",w,$)}P=p["_"+m+"pos0"],delete p["_"+m+"pos0"];var ee=p._input[T]||{},ie=r.extendFlat({},w),se=w.start,W=b.r2l(ee.start),ne=W!==void 0;if((w.startFound||ne)&&W!==b.r2l(se)){var he=ne?W:r.aggNums(Math.min,null,P),re={type:b.type==="category"||b.type==="multicategory"?"linear":b.type,r2l:b.r2l,dtick:w.size,tick0:se,calendar:L,range:[he,i.tickIncrement(he,w.size,!1,L)].map(b.l2r)},ae=i.tickFirst(re);ae>b.r2l(he)&&(ae=i.tickIncrement(ae,w.size,!0,L)),ie.start=b.l2r(ae),ne||r.nestedProperty(p,T+".start").set(ie.start)}var fe=w.end,ce=b.r2l(ee.end),xe=ce!==void 0;if((w.endFound||xe)&&ce!==b.r2l(fe)){var Te=xe?ce:r.aggNums(Math.max,null,P);ie.end=b.l2r(Te),xe||r.nestedProperty(p,T+".start").set(ie.end)}var me="autobin"+m;return p._input[me]===!1&&(p._input[T]=r.extendFlat({},p[T]||{}),delete p._input[me],delete p[me]),[ie,P]}t(h,"calcAllAutoBins");function v(g,p,b,m,y){var T=g._fullLayout,_=c(g,p),M=!1,w=1/0,x=[p],A,S,k;for(A=0;A<_.length;A++)if(S=_[A],S===p)M=!0;else if(!M)k=T._histogramBinOpts[S["_"+m+"bingroup"]],w=Math.min(w,k.size||S[y].size);else{var L=h(g,S,b,m,!0),P=L[0],D=L[2];S["_"+m+"autoBinFinished"]=1,S["_"+m+"pos0"]=L[1],D?x.push(S):w=Math.min(w,P.size)}var B=new Array(x.length);for(A=0;A<x.length;A++)for(var z=x[A]["_"+m+"pos0"],R=0;R<z.length;R++)if(z[R]!==void 0){B[A]=z[R];break}for(isFinite(w)||(w=r.distinctVals(B).minDiff),A=0;A<x.length;A++){S=x[A];var F=S[m+"calendar"],O={start:b.c2r(B[A]-w/2,0,F),end:b.c2r(B[A]+w/2,0,F),size:w};S._input[y]=S[y]=O,k=T._histogramBinOpts[S["_"+m+"bingroup"]],k&&r.extendFlat(k,O)}return p[y]}t(v,"handleSingleValueOverlays");function c(g,p){for(var b=p.xaxis,m=p.yaxis,y=p.orientation,T=[],_=g._fullData,M=0;M<_.length;M++){var w=_[M];w.type==="histogram"&&w.visible===!0&&w.orientation===y&&w.xaxis===b&&w.yaxis===m&&T.push(w)}return T}t(c,"getConnectedHistograms");function d(g,p,b){var m,y,T;function _(w){T=g[w],g[w]/=2}t(_,"firstHalfPoint");function M(w){y=g[w],g[w]=T+y/2,T+=y}if(t(M,"nextHalfPoint"),b==="half")if(p==="increasing")for(_(0),m=1;m<g.length;m++)M(m);else for(_(g.length-1),m=g.length-2;m>=0;m--)M(m);else if(p==="increasing"){for(m=1;m<g.length;m++)g[m]+=g[m-1];b==="exclude"&&(g.unshift(0),g.pop())}else{for(m=g.length-2;m>=0;m--)g[m]+=g[m+1];b==="exclude"&&(g.push(0),g.shift())}}return t(d,"cdf"),IS={calc:f,calcAllAutoBins:h},IS}t(Wfe,"requireCalc$C");var zS,CV;function sLe(){if(CV)return zS;CV=1;var e=Nt.exports,r=nn(),n=Vfe(),i=Gfe(),s=jfe(),o=Yfe(),a=Wfe().calcAllAutoBins;zS=t(function(v,c){var d=r.getFromId(v,c.xaxis),g=r.getFromId(v,c.yaxis),p=c.xcalendar,b=c.ycalendar,m=t(function(zt){return d.r2c(zt,0,p)},"xr2c"),y=t(function(zt){return g.r2c(zt,0,b)},"yr2c"),T=t(function(zt){return d.c2r(zt,0,p)},"xc2r"),_=t(function(zt){return g.c2r(zt,0,b)},"yc2r"),M,w,x,A,S=a(v,c,d,"x"),k=S[0],L=S[1],P=a(v,c,g,"y"),D=P[0],B=P[1],z=c._length;L.length>z&&L.splice(z,L.length-z),B.length>z&&B.splice(z,B.length-z);var R=[],F=[],O=[],q=typeof k.size=="string",H=typeof D.size=="string",j=[],X=[],G=q?j:k,$=H?X:D,te=0,ee=[],ie=[],se=c.histnorm,W=c.histfunc,ne=se.indexOf("density")!==-1,he=W==="max"||W==="min",re=he?null:0,ae=n.count,fe=i[se],ce=!1,xe=[],Te=[],me="z"in c?c.z:"marker"in c&&Array.isArray(c.marker.color)?c.marker.color:"";me&&W!=="count"&&(ce=W==="avg",ae=n[W]);var pe=k.size,oe=m(k.start),de=m(k.end)+(oe-r.tickIncrement(oe,pe,!1,p))/1e6;for(M=oe;M<de;M=r.tickIncrement(M,pe,!1,p))F.push(re),j.push(M),ce&&O.push(0);j.push(M);var ye=F.length,we=(M-oe)/ye,Ee=T(oe+we/2),De=D.size,Fe=y(D.start),qe=y(D.end)+(Fe-r.tickIncrement(Fe,De,!1,b))/1e6;for(M=Fe;M<qe;M=r.tickIncrement(M,De,!1,b)){R.push(F.slice()),X.push(M);var Je=new Array(ye);for(w=0;w<ye;w++)Je[w]=[];ie.push(Je),ce&&ee.push(O.slice())}X.push(M);var Ge=R.length,et=(M-Fe)/Ge,Ue=_(Fe+et/2);ne&&(xe=l(F.length,G,we,q),Te=l(R.length,$,et,H)),!q&&d.type==="date"&&(G=u(m,G)),!H&&g.type==="date"&&($=u(y,$));var Ye=!0,$e=!0,Ct=new Array(ye),It=new Array(Ge),Vt=1/0,$t=1/0,Gt=1/0,Jt=1/0;for(M=0;M<z;M++){var kt=L[M],ft=B[M];x=e.findBin(kt,G),A=e.findBin(ft,$),x>=0&&x<ye&&A>=0&&A<Ge&&(te+=ae(x,M,R[A],me,ee[A]),ie[A][x].push(M),Ye&&(Ct[x]===void 0?Ct[x]=kt:Ct[x]!==kt&&(Ye=!1)),$e&&(It[A]===void 0?It[A]=ft:It[A]!==ft&&($e=!1)),Vt=Math.min(Vt,kt-j[x]),$t=Math.min($t,j[x+1]-kt),Gt=Math.min(Gt,ft-X[A]),Jt=Math.min(Jt,X[A+1]-ft))}if(ce)for(A=0;A<Ge;A++)te+=s(R[A],ee[A]);if(fe)for(A=0;A<Ge;A++)fe(R[A],te,xe,Te[A]);return{x:L,xRanges:f(j,Ye&&Ct,Vt,$t,d,p),x0:Ee,dx:we,y:B,yRanges:f(X,$e&&It,Gt,Jt,g,b),y0:Ue,dy:et,z:R,pts:ie}},"calc");function l(h,v,c,d){var g=new Array(h),p;if(d)for(p=0;p<h;p++)g[p]=1/(v[p+1]-v[p]);else{var b=1/c;for(p=0;p<h;p++)g[p]=b}return g}t(l,"makeIncrements");function u(h,v){return{start:h(v.start),end:h(v.end),size:v.size}}t(u,"binsToCalc");function f(h,v,c,d,g,p){var b,m=h.length-1,y=new Array(m),T=o(c,d,h,g,p);for(b=0;b<m;b++){var _=(v||[])[b];y[b]=_===void 0?[T(h[b]),T(h[b+1],!0)]:[_,_]}return y}return t(f,"getRanges"),zS}t(sLe,"requireCalc$B");var FS,LV;function f7(){if(LV)return FS;LV=1;var e=Nt.exports,r=jn.BADNUM,n=bv;return FS=t(function(s,o,a,l,u,f){var h=s._length,v=o.makeCalcdata(s,l),c=a.makeCalcdata(s,u);v=n(s,o,l,v).vals,c=n(s,a,u,c).vals;var d=s.text,g=d!==void 0&&e.isArray1D(d),p=s.hovertext,b=p!==void 0&&e.isArray1D(p),m,y,T=e.distinctVals(v),_=T.vals,M=e.distinctVals(c),w=M.vals,x=[],A,S,k=w.length,L=_.length;for(m=0;m<f.length;m++)x[m]=e.init2dArray(k,L);g&&(A=e.init2dArray(k,L)),b&&(S=e.init2dArray(k,L));var P=e.init2dArray(k,L);for(m=0;m<h;m++)if(v[m]!==r&&c[m]!==r){var D=e.findBin(v[m]+T.minDiff/2,_),B=e.findBin(c[m]+M.minDiff/2,w);for(y=0;y<f.length;y++){var z=f[y],R=s[z],F=x[y];F[B][D]=R[m],P[B][D]=m}g&&(A[B][D]=d[m]),b&&(S[B][D]=p[m])}for(s["_"+l]=_,s["_"+u]=w,y=0;y<f.length;y++)s["_"+f[y]]=x[y];g&&(s._text=A),b&&(s._hovertext=S),o&&o.type==="category"&&(s["_"+l+"CategoryMap"]=_.map(function(O){return o._categories[O]})),a&&a.type==="category"&&(s["_"+u+"CategoryMap"]=w.map(function(O){return a._categories[O]})),s._after2before=P},"convertColumnData"),FS}t(f7,"requireConvert_column_xyz");var BS,RV;function c7(){if(RV)return BS;RV=1;var e=xn,r=Nt.exports,n=jn.BADNUM;return BS=t(function(s,o,a,l){var u,f,h,v,c,d;function g(_){if(!!e(_))return+_}if(t(g,"cleanZvalue"),o&&o.transpose){for(u=0,c=0;c<s.length;c++)u=Math.max(u,s[c].length);if(u===0)return!1;h=t(function(_){return _.length},"getCollen"),v=t(function(_,M,w){return(_[w]||[])[M]},"old2new")}else u=s.length,h=t(function(_,M){return _[M].length},"getCollen"),v=t(function(_,M,w){return(_[M]||[])[w]},"old2new");var p=t(function(_,M,w){return M===n||w===n?n:v(_,M,w)},"padOld2new");function b(_){if(o&&o.type!=="carpet"&&o.type!=="contourcarpet"&&_&&_.type==="category"&&o["_"+_._id.charAt(0)].length){var M=_._id.charAt(0),w={},x=o["_"+M+"CategoryMap"]||o[M];for(c=0;c<x.length;c++)w[x[c]]=c;return function(A){var S=w[_._categories[A]];return S+1?S:n}}else return r.identity}t(b,"axisMapping");var m=b(a),y=b(l);l&&l.type==="category"&&(u=l._categories.length);var T=new Array(u);for(c=0;c<u;c++)for(a&&a.type==="category"?f=a._categories.length:f=h(s,c),T[c]=new Array(f),d=0;d<f;d++)T[c][d]=g(p(s,y(c),m(d)));return T},"clean2dArray"),BS}t(c7,"requireClean_2d_array");var OS,PV;function h7(){if(PV)return OS;PV=1;var e=Nt.exports,r=.01,n=[[-1,0],[1,0],[0,-1],[0,1]];function i(o){return .5-.25*Math.min(1,o*.5)}t(i,"correctionOvershoot"),OS=t(function(a,l){var u=1,f;for(s(a,l),f=0;f<l.length&&!(l[f][2]<4);f++);for(l=l.slice(f),f=0;f<100&&u>r;f++)u=s(a,l,i(u));return u>r&&e.log("interp2d didn't converge quickly",u),a},"interp2d");function s(o,a,l){var u=0,f,h,v,c,d,g,p,b,m,y,T,_,M;for(c=0;c<a.length;c++){for(f=a[c],h=f[0],v=f[1],T=o[h][v],y=0,m=0,d=0;d<4;d++)g=n[d],p=o[h+g[0]],p&&(b=p[v+g[1]],b!==void 0&&(y===0?_=M=b:(_=Math.min(_,b),M=Math.max(M,b)),m++,y+=b));if(m===0)throw"iterateInterp2d order is wrong: no defined neighbors";o[h][v]=y/m,T===void 0?m<4&&(u=1):(o[h][v]=(1+l)*o[h][v]-l*T,M>_&&(u=Math.max(u,Math.abs(o[h][v]-T)/(M-_))))}return u}return t(s,"iterateInterp2d"),OS}t(h7,"requireInterp2d");var NS,DV;function v7(){if(DV)return NS;DV=1;var e=Nt.exports.maxRowLength;return NS=t(function(n){var i=[],s={},o=[],a=n[0],l=[],u=[0,0,0],f=e(n),h,v,c,d,g,p,b,m;for(v=0;v<n.length;v++)for(h=l,l=a,a=n[v+1]||[],c=0;c<f;c++)l[c]===void 0&&(p=(l[c-1]!==void 0?1:0)+(l[c+1]!==void 0?1:0)+(h[c]!==void 0?1:0)+(a[c]!==void 0?1:0),p?(v===0&&p++,c===0&&p++,v===n.length-1&&p++,c===l.length-1&&p++,p<4&&(s[[v,c]]=[v,c,p]),i.push([v,c,p])):o.push([v,c]));for(;o.length;){for(b={},m=!1,g=o.length-1;g>=0;g--)d=o[g],v=d[0],c=d[1],p=((s[[v-1,c]]||u)[2]+(s[[v+1,c]]||u)[2]+(s[[v,c-1]]||u)[2]+(s[[v,c+1]]||u)[2])/20,p&&(b[d]=[v,c,p],o.splice(g,1),m=!0);if(!m)throw"findEmpties iterated with no new neighbors";for(d in b)s[d]=b[d],i.push(b[d])}return i.sort(function(y,T){return T[2]-y[2]})},"findEmpties"),NS}t(v7,"requireFind_empties");var qS,IV;function Xfe(){if(IV)return qS;IV=1;var e=Na,r=Nt.exports.isArrayOrTypedArray;return qS=t(function(i,s,o,a,l,u){var f=[],h=e.traceIs(i,"contour"),v=e.traceIs(i,"histogram"),c=e.traceIs(i,"gl2d"),d,g,p,b=r(s)&&s.length>1;if(b&&!v&&u.type!=="category"){var m=s.length;if(m<=l){if(h||c)f=s.slice(0,l);else if(l===1)f=[s[0]-.5,s[0]+.5];else{for(f=[1.5*s[0]-.5*s[1]],p=1;p<m;p++)f.push((s[p-1]+s[p])*.5);f.push(1.5*s[m-1]-.5*s[m-2])}if(m<l){var y=f[f.length-1],T=y-f[f.length-2];for(p=m;p<l;p++)y+=T,f.push(y)}}else return h?s.slice(0,l):s.slice(0,l+1)}else{var _=i[u._id.charAt(0)+"calendar"];if(v)d=u.r2c(o,0,_);else if(r(s)&&s.length===1)d=s[0];else if(o===void 0)d=0;else{var M=u.type==="log"?u.d2c:u.r2c;d=M(o,0,_)}for(g=a||1,p=h||c?0:-.5;p<l;p++)f.push(d+g*p)}return f},"makeBoundArray"),qS}t(Xfe,"requireMake_bound_array");var US,zV;function qw(){if(zV)return US;zV=1;var e=Na,r=Nt.exports,n=nn(),i=bv,s=sLe(),o=Lf,a=f7(),l=c7(),u=h7(),f=v7(),h=Xfe(),v=jn.BADNUM;US=t(function(p,b){var m=n.getFromId(p,b.xaxis||"x"),y=n.getFromId(p,b.yaxis||"y"),T=e.traceIs(b,"contour"),_=e.traceIs(b,"histogram"),M=e.traceIs(b,"gl2d"),w=T?"best":b.zsmooth,x,A,S,k,L,P,D,B,z,R,F;if(m._minDtick=0,y._minDtick=0,_)F=s(p,b),k=F.orig_x,x=F.x,A=F.x0,S=F.dx,B=F.orig_y,L=F.y,P=F.y0,D=F.dy,z=F.z;else{var O=b.z;r.isArray1D(O)?(a(b,m,y,"x","y",["z"]),x=b._x,L=b._y,O=b._z):(k=b.x?m.makeCalcdata(b,"x"):[],B=b.y?y.makeCalcdata(b,"y"):[],x=i(b,m,"x",k).vals,L=i(b,y,"y",B).vals,b._x=x,b._y=L),A=b.x0,S=b.dx,P=b.y0,D=b.dy,z=l(O,b,m,y)}(m.rangebreaks||y.rangebreaks)&&(z=d(x,L,z),_||(x=c(x),L=c(L),b._x=x,b._y=L)),!_&&(T||b.connectgaps)&&(b._emptypoints=f(z),u(z,b._emptypoints));function q(he){w=b._input.zsmooth=b.zsmooth=!1,r.warn('cannot use zsmooth: "fast": '+he)}if(t(q,"noZsmooth"),w==="fast"){if(m.type==="log"||y.type==="log")q("log axis found");else if(!_){if(x.length){var H=(x[x.length-1]-x[0])/(x.length-1),j=Math.abs(H/100);for(R=0;R<x.length-1;R++)if(Math.abs(x[R+1]-x[R]-H)>j){q("x scale is not linear");break}}if(L.length&&w==="fast"){var X=(L[L.length-1]-L[0])/(L.length-1),G=Math.abs(X/100);for(R=0;R<L.length-1;R++)if(Math.abs(L[R+1]-L[R]-X)>G){q("y scale is not linear");break}}}}var $=r.maxRowLength(z),te=b.xtype==="scaled"?"":x,ee=h(b,te,A,S,$,m),ie=b.ytype==="scaled"?"":L,se=h(b,ie,P,D,z.length,y);M||(b._extremes[m._id]=n.findExtremes(m,ee),b._extremes[y._id]=n.findExtremes(y,se));var W={x:ee,y:se,z,text:b._text||b.text,hovertext:b._hovertext||b.hovertext};if(b.xperiodalignment&&k&&(W.orig_x=k),b.yperiodalignment&&B&&(W.orig_y=B),te&&te.length===ee.length-1&&(W.xCenter=te),ie&&ie.length===se.length-1&&(W.yCenter=ie),_&&(W.xRanges=F.xRanges,W.yRanges=F.yRanges,W.pts=F.pts),T||o(p,b,{vals:z,cLetter:"z"}),T&&b.contours&&b.contours.coloring==="heatmap"){var ne={type:b.type==="contour"?"heatmap":"histogram2d",xcalendar:b.xcalendar,ycalendar:b.ycalendar};W.xfill=h(ne,te,A,S,$,m),W.yfill=h(ne,ie,P,D,z.length,y)}return[W]},"calc");function c(g){for(var p=[],b=g.length,m=0;m<b;m++){var y=g[m];y!==v&&p.push(y)}return p}t(c,"skipBreaks");function d(g,p,b){for(var m=[],y=-1,T=0;T<b.length;T++)if(p[T]!==v){y++,m[y]=[];for(var _=0;_<b[T].length;_++)g[_]!==v&&m[y].push(b[T][_])}return m}return t(d,"dropZonBreaks"),US}t(qw,"requireCalc$A");var HS,FV;function d7(){if(FV)return HS;FV=1;var e=Va.exports,r=rl.exports,n=Na,i=bn.exports,s=nn(),o=Nt.exports,a=Ji,l=$8,u=$a.exports,f=ko.extractOpts,h=ko.makeColorScaleFuncFromTrace,v=ic,c=yl,d=c.LINE_SPACING,g="heatmap-label";function p(_){return _.selectAll("g."+g)}t(p,"selectLabels");function b(_){p(_).remove()}t(b,"removeLabels"),HS=t(function(_,M,w,x){var A=M.xaxis,S=M.yaxis;o.makeTraceGroups(x,w,"hm").each(function(k){var L=e.select(this),P=k[0],D=P.trace,B=D.xgap||0,z=D.ygap||0,R=P.z,F=P.x,O=P.y,q=P.xCenter,H=P.yCenter,j=n.traceIs(D,"contour"),X=j?"best":D.zsmooth,G=R.length,$=o.maxRowLength(R),te=!1,ee=!1,ie,se,W,ne,he,re,ae,fe;for(re=0;ie===void 0&&re<F.length-1;)ie=A.c2p(F[re]),re++;for(re=F.length-1;se===void 0&&re>0;)se=A.c2p(F[re]),re--;for(se<ie&&(W=se,se=ie,ie=W,te=!0),re=0;ne===void 0&&re<O.length-1;)ne=S.c2p(O[re]),re++;for(re=O.length-1;he===void 0&&re>0;)he=S.c2p(O[re]),re--;if(he<ne&&(W=ne,ne=he,he=W,ee=!0),j&&(q=F,H=O,F=P.xfill,O=P.yfill),X!=="fast"){var ce=X==="best"?0:.5;ie=Math.max(-ce*A._length,ie),se=Math.min((1+ce)*A._length,se),ne=Math.max(-ce*S._length,ne),he=Math.min((1+ce)*S._length,he)}var xe=Math.round(se-ie),Te=Math.round(he-ne),me=xe<=0||Te<=0;if(me){var pe=L.selectAll("image").data([]);pe.exit().remove(),b(L);return}var oe,de;X==="fast"?(oe=$,de=G):(oe=xe,de=Te);var ye=document.createElement("canvas");ye.width=oe,ye.height=de;var we=ye.getContext("2d"),Ee=h(D,{noNumericCheck:!0,returnArray:!0}),De,Fe;X==="fast"?(De=te?function(ln){return $-1-ln}:o.identity,Fe=ee?function(ln){return G-1-ln}:o.identity):(De=t(function(ln){return o.constrain(Math.round(A.c2p(F[ln])-ie),0,xe)},"xpx"),Fe=t(function(ln){return o.constrain(Math.round(S.c2p(O[ln])-ne),0,Te)},"ypx"));var qe=Fe(0),Je=[qe,qe],Ge=te?0:1,et=ee?0:1,Ue=0,Ye=0,$e=0,Ct=0,It,Vt,$t,Gt,Jt;function kt(ln,Pn){if(ln!==void 0){var Fa=Ee(ln);return Fa[0]=Math.round(Fa[0]),Fa[1]=Math.round(Fa[1]),Fa[2]=Math.round(Fa[2]),Ue+=Pn,Ye+=Fa[0]*Pn,$e+=Fa[1]*Pn,Ct+=Fa[2]*Pn,Fa}return[0,0,0,0]}t(kt,"setColor");function ft(ln,Pn,Fa,Ka){var Ja=ln[Fa.bin0];if(Ja===void 0)return kt(void 0,1);var Xn=ln[Fa.bin1],Ln=Pn[Fa.bin0],ni=Pn[Fa.bin1],$i=Xn-Ja||0,Vi=Ln-Ja||0,Ai;return Xn===void 0?ni===void 0?Ai=0:Ln===void 0?Ai=2*(ni-Ja):Ai=(2*ni-Ln-Ja)*2/3:ni===void 0?Ln===void 0?Ai=0:Ai=(2*Ja-Xn-Ln)*2/3:Ln===void 0?Ai=(2*ni-Xn-Ja)*2/3:Ai=ni+Ja-Xn-Ln,kt(Ja+Fa.frac*$i+Ka.frac*(Vi+Fa.frac*Ai))}if(t(ft,"interpColor"),X){var zt=0,Pt;try{Pt=new Uint8Array(xe*Te*4)}catch{Pt=new Array(xe*Te*4)}if(X==="best"){var Et=q||F,Wt=H||O,ze=new Array(Et.length),tt=new Array(Wt.length),at=new Array(xe),vt=q?y:m,_t=H?y:m,Rt,nr,ir;for(re=0;re<Et.length;re++)ze[re]=Math.round(A.c2p(Et[re])-ie);for(re=0;re<Wt.length;re++)tt[re]=Math.round(S.c2p(Wt[re])-ne);for(re=0;re<xe;re++)at[re]=vt(re,ze);for(ae=0;ae<Te;ae++)for(Rt=_t(ae,tt),nr=R[Rt.bin0],ir=R[Rt.bin1],re=0;re<xe;re++,zt+=4)Jt=ft(nr,ir,at[re],Rt),T(Pt,zt,Jt)}else for(ae=0;ae<G;ae++)for(Gt=R[ae],Je=Fe(ae),re=0;re<xe;re++)Jt=kt(Gt[re],1),zt=(Je*xe+De(re))*4,T(Pt,zt,Jt);var ur=we.createImageData(xe,Te);try{ur.data.set(Pt)}catch{var qt=ur.data,hr=qt.length;for(ae=0;ae<hr;ae++)qt[ae]=Pt[ae]}we.putImageData(ur,0,0)}else{var Fr=Math.floor(B/2),Br=Math.floor(z/2);for(ae=0;ae<G;ae++)if(Gt=R[ae],Je.reverse(),Je[et]=Fe(ae+1),!(Je[0]===Je[1]||Je[0]===void 0||Je[1]===void 0))for(Vt=De(0),It=[Vt,Vt],re=0;re<$;re++)It.reverse(),It[Ge]=De(re+1),!(It[0]===It[1]||It[0]===void 0||It[1]===void 0)&&($t=Gt[re],Jt=kt($t,(It[1]-It[0])*(Je[1]-Je[0])),we.fillStyle="rgba("+Jt.join(",")+")",we.fillRect(It[0]+Fr,Je[0]+Br,It[1]-It[0]-B,Je[1]-Je[0]-z))}Ye=Math.round(Ye/Ue),$e=Math.round($e/Ue),Ct=Math.round(Ct/Ue);var na=r("rgb("+Ye+","+$e+","+Ct+")");_._hmpixcount=(_._hmpixcount||0)+Ue,_._hmlumcount=(_._hmlumcount||0)+Ue*na.getLuminance();var Ia=L.selectAll("image").data(k);Ia.enter().append("svg:image").attr({xmlns:v.svg,preserveAspectRatio:"none"}),Ia.attr({height:Te,width:xe,x:ie,y:ne,"xlink:href":ye.toDataURL("image/png")}),b(L);var ea=D.texttemplate;if(ea){var Er=f(D),dn={type:"linear",range:[Er.min,Er.max],_separators:A._separators,_numFormat:A._numFormat},ya=D.type==="histogram2dcontour",Hr=D.type==="contour",un=Hr?1:0,Ea=Hr?G-1:G,nt=Hr?1:0,He=Hr?$-1:$,Qe=[];for(re=un;re<Ea;re++){var ot;if(Hr)ot=P.y[re];else if(ya){if(re===0||re===G-1)continue;ot=P.y[re]}else if(P.yCenter)ot=P.yCenter[re];else{if(re+1===G&&P.y[re+1]===void 0)continue;ot=(P.y[re]+P.y[re+1])/2}var Ae=Math.round(S.c2p(ot));if(!(0>Ae||Ae>S._length))for(ae=nt;ae<He;ae++){var Se;if(Hr)Se=P.x[ae];else if(ya){if(ae===0||ae===$-1)continue;Se=P.x[ae]}else if(P.xCenter)Se=P.xCenter[ae];else{if(ae+1===$&&P.x[ae+1]===void 0)continue;Se=(P.x[ae]+P.x[ae+1])/2}var je=Math.round(A.c2p(Se));if(!(0>je||je>A._length)){var Xe=l({x:Se,y:ot},D,_._fullLayout);Xe.x=Se,Xe.y=ot;var ut=P.z[re][ae];ut===void 0?(Xe.z="",Xe.zLabel=""):(Xe.z=ut,Xe.zLabel=s.tickText(dn,ut,"hover").text);var xt=P.text&&P.text[re]&&P.text[re][ae];(xt===void 0||xt===!1)&&(xt=""),Xe.text=xt;var dt=o.texttemplateString(ea,Xe,_._fullLayout._d3locale,Xe,D._meta||{});if(!!dt){var Ot=dt.split("<br>"),Ht=Ot.length,Qt=0;for(fe=0;fe<Ht;fe++)Qt=Math.max(Qt,Ot[fe].length);Qe.push({l:Ht,c:Qt,t:dt,x:je,y:Ae,z:ut})}}}}var mr=D.textfont,xr=mr.family,Lr=mr.size,Zr=_._fullLayout.font.size;if(!Lr||Lr==="auto"){var Sr=1/0,xa=1/0,aa=0,Sa=0;for(fe=0;fe<Qe.length;fe++){var vn=Qe[fe];if(aa=Math.max(aa,vn.l),Sa=Math.max(Sa,vn.c),fe<Qe.length-1){var hn=Qe[fe+1],ba=Math.abs(hn.x-vn.x),Tn=Math.abs(hn.y-vn.y);ba&&(Sr=Math.min(Sr,ba)),Tn&&(xa=Math.min(xa,Tn))}}!isFinite(Sr)||!isFinite(xa)?Lr=Zr:(Sr-=B,xa-=z,Sr/=Sa,xa/=aa,Sr/=d/2,xa/=d,Lr=Math.min(Math.floor(Sr),Math.floor(xa),Zr))}if(Lr<=0||!isFinite(Lr))return;var Pa=t(function(ln){return ln.x},"xFn"),kn=t(function(ln){return ln.y-Lr*(ln.l*d/2-1)},"yFn"),In=p(L).data(Qe);In.enter().append("g").classed(g,1).append("text").attr("text-anchor","middle").each(function(ln){var Pn=e.select(this),Fa=mr.color;(!Fa||Fa==="auto")&&(Fa=u.contrast("rgba("+Ee(ln.z).join()+")")),Pn.attr("data-notex",1).call(a.positionText,Pa(ln),kn(ln)).call(i.font,xr,Lr,Fa).text(ln.t).call(a.convertToTspans,_)})}})},"plot$s");function m(_,M){var w=M.length-2,x=o.constrain(o.findBin(_,M),0,w),A=M[x],S=M[x+1],k=o.constrain(x+(_-A)/(S-A)-.5,0,w),L=Math.round(k),P=Math.abs(k-L);return!k||k===w||!P?{bin0:L,bin1:L,frac:0}:{bin0:L,frac:P,bin1:Math.round(L+P/(k-L))}}t(m,"findInterp");function y(_,M){var w=M.length-1,x=o.constrain(o.findBin(_,M),0,w),A=M[x],S=M[x+1],k=(_-A)/(S-A)||0;return k<=0?{bin0:x,bin1:x,frac:0}:k<.5?{bin0:x,bin1:x+1,frac:k}:{bin0:x+1,bin1:x,frac:1-k}}t(y,"findInterpFromCenters");function T(_,M,w){_[M]=w[0],_[M+1]=w[1],_[M+2]=w[2],_[M+3]=Math.round(w[3]*255)}return t(T,"putColor"),HS}t(d7,"requirePlot$v");var $S,BV;function zy(){return BV||(BV=1,$S={min:"zmin",max:"zmax"}),$S}t(zy,"requireColorbar$1");var VS,OV;function p7(){if(OV)return VS;OV=1;var e=Va.exports;return VS=t(function(n){e.select(n).selectAll(".hm image").style("opacity",function(i){return i.trace.opacity})},"style"),VS}t(p7,"requireStyle$d");var GS,NV;function g7(){if(NV)return GS;NV=1;var e=Ko,r=Nt.exports,n=nn(),i=ko.extractOpts;return GS=t(function(o,a,l,u,f){f||(f={});var h=f.isContour,v=o.cd[0],c=v.trace,d=o.xa,g=o.ya,p=v.x,b=v.y,m=v.z,y=v.xCenter,T=v.yCenter,_=v.zmask,M=c.zhoverformat,w=p,x=b,A,S,k,L;if(o.index!==!1){try{k=Math.round(o.index[1]),L=Math.round(o.index[0])}catch{r.error("Error hovering on heatmap, pointNumber must be [row,col], found:",o.index);return}if(k<0||k>=m[0].length||L<0||L>m.length)return}else{if(e.inbox(a-p[0],a-p[p.length-1],0)>0||e.inbox(l-b[0],l-b[b.length-1],0)>0)return;if(h){var P;for(w=[2*p[0]-p[1]],P=1;P<p.length;P++)w.push((p[P]+p[P-1])/2);for(w.push([2*p[p.length-1]-p[p.length-2]]),x=[2*b[0]-b[1]],P=1;P<b.length;P++)x.push((b[P]+b[P-1])/2);x.push([2*b[b.length-1]-b[b.length-2]])}k=Math.max(0,Math.min(w.length-2,r.findBin(a,w))),L=Math.max(0,Math.min(x.length-2,r.findBin(l,x)))}var D=d.c2p(p[k]),B=d.c2p(p[k+1]),z=g.c2p(b[L]),R=g.c2p(b[L+1]),F,O;h?(F=v.orig_x||p,O=v.orig_y||b,B=D,A=F[k],R=z,S=O[L]):(F=v.orig_x||y||p,O=v.orig_y||T||b,A=y?F[k]:(F[k]+F[k+1])/2,S=T?O[L]:(O[L]+O[L+1])/2,d&&d.type==="category"&&(A=p[k]),g&&g.type==="category"&&(S=b[L]),c.zsmooth&&(D=B=d.c2p(A),z=R=g.c2p(S)));var q=m[L][k];if(_&&!_[L][k]&&(q=void 0),!(q===void 0&&!c.hoverongaps)){var H;Array.isArray(v.hovertext)&&Array.isArray(v.hovertext[L])?H=v.hovertext[L][k]:Array.isArray(v.text)&&Array.isArray(v.text[L])&&(H=v.text[L][k]);var j=i(c),X={type:"linear",range:[j.min,j.max],hoverformat:M,_separators:d._separators,_numFormat:d._numFormat},G=n.tickText(X,q,"hover").text;return[r.extendFlat(o,{index:c._after2before?c._after2before[L][k]:[L,k],distance:o.maxHoverDistance,spikeDistance:o.maxSpikeDistance,x0:D,x1:B,y0:z,y1:R,xLabelVal:A,yLabelVal:S,zLabelVal:q,zLabel:G,text:H})]}},"hoverPoints"),GS}t(g7,"requireHover$k");var jS,qV;function lLe(){return qV||(qV=1,jS={attributes:Iy(),supplyDefaults:oLe(),calc:qw(),plot:d7(),colorbar:zy(),style:p7(),hoverPoints:g7(),moduleType:"trace",name:"heatmap",basePlotModule:Ti,categories:["cartesian","svg","2dMap","showLegend"],meta:{description:["The data that describes the heatmap value-to-color mapping","is set in `z`.","Data in `z` can either be a {2D array} of values (ragged or not)","or a 1D array of values.","In the case where `z` is a {2D array},","say that `z` has N rows and M columns.","Then, by default, the resulting heatmap will have N partitions along","the y axis and M partitions along the x axis.","In other words, the i-th row/ j-th column cell in `z`","is mapped to the i-th partition of the y axis","(starting from the bottom of the plot) and the j-th partition","of the x-axis (starting from the left of the plot).","This behavior can be flipped by using `transpose`.","Moreover, `x` (`y`) can be provided with M or M+1 (N or N+1) elements.","If M (N), then the coordinates correspond to the center of the","heatmap cells and the cells have equal width.","If M+1 (N+1), then the coordinates correspond to the edges of the","heatmap cells.","In the case where `z` is a 1D {array}, the x and y coordinates must be","provided in `x` and `y` respectively to form data triplets."].join(" ")}}),jS}t(lLe,"requireHeatmap$1");var UV;function uLe(){return UV||(UV=1,function(e){e.exports=lLe()}(AS)),AS.exports}t(uLe,"requireHeatmap");var YS={exports:{}},WS,HV;function Zfe(){return HV||(HV=1,WS=t(function(r,n){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",r,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",n?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",r,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",r,"axis bin.","Default behavior: If `nbins"+r+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+r+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",n?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}},"makeBinAttrs")),WS}t(Zfe,"requireBin_attributes");var XS,$V;function fLe(){return $V||($V=1,XS={eventDataKeys:["binNumber"]}),XS}t(fLe,"requireConstants$g");var ZS,VV;function y7(){if(VV)return ZS;VV=1;var e=gd(),r=Vo.axisHoverFormat,n=Un.hovertemplateAttrs,i=Un.texttemplateAttrs,s=Ho,o=Zfe(),a=fLe(),l=cn.extendFlat;return ZS={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:r("x"),yhoverformat:r("y"),text:l({},e.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:l({},e.hovertext,{description:"Same as `text`."}),orientation:e.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:n({},{keys:a.eventDataKeys}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:l({},e.textposition,{arrayOk:!1}),textfont:s({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the text font."}),outsidetextfont:s({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying outside the bar."}),insidetextfont:s({arrayOk:!1,editType:"plot",colorEditType:"style",description:"Sets the font used for `text` lying inside the bar."}),insidetextanchor:e.insidetextanchor,textangle:e.textangle,cliponaxis:e.cliponaxis,constraintext:e.constraintext,marker:e.marker,offsetgroup:e.offsetgroup,alignmentgroup:e.alignmentgroup,selected:e.selected,unselected:e.unselected,_deprecated:{bardir:e._deprecated.bardir}},ZS}t(y7,"requireAttributes$I");var KS,GV;function cLe(){if(GV)return KS;GV=1;var e=Na,r=Nt.exports,n=$a.exports,i=Ef().handleText,s=i7(),o=y7();return KS=t(function(l,u,f,h){function v(A,S){return r.coerce(l,u,o,A,S)}t(v,"coerce");var c=v("x"),d=v("y"),g=v("cumulative.enabled");g&&(v("cumulative.direction"),v("cumulative.currentbin")),v("text");var p=v("textposition");i(l,u,h,v,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),v("hovertext"),v("hovertemplate"),v("xhoverformat"),v("yhoverformat");var b=v("orientation",d&&!c?"h":"v"),m=b==="v"?"x":"y",y=b==="v"?"y":"x",T=c&&d?Math.min(r.minRowLength(c)&&r.minRowLength(d)):r.minRowLength(u[m]||[]);if(!T){u.visible=!1;return}u._length=T;var _=e.getComponentMethod("calendars","handleTraceDefaults");_(l,u,["x","y"],h);var M=u[y];M&&v("histfunc"),v("histnorm"),v("autobin"+m),s(l,u,v,f,h),r.coerceSelectionMarkerOpacity(u,v);var w=(u.marker.line||{}).color,x=e.getComponentMethod("errorbars","supplyDefaults");x(l,u,w||n.defaultLine,{axis:"y"}),x(l,u,w||n.defaultLine,{axis:"x",inherit:"y"})},"supplyDefaults"),KS}t(cLe,"requireDefaults$I");var JS,jV;function m7(){if(jV)return JS;jV=1;var e=Nt.exports,r=$o,n=Na.traceIs,i=Ef().handleGroupingDefaults,s=e.nestedProperty,o=I0().getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];return JS=t(function(f,h){var v=h._histogramBinOpts={},c=[],d={},g=[],p,b,m,y,T,_,M;function w(X,G){return e.coerce(p._input,p,p._module.attributes,X,G)}t(w,"coerce");function x(X){return X.orientation==="v"?"x":"y"}t(x,"orientation2binDir");function A(X,G){var $=r.getFromTrace({_fullLayout:h},X,G);return $.type}t(A,"getAxisType");function S(X,G,$){var te=X.uid+"__"+$;G||(G=te);var ee=A(X,$),ie=X[$+"calendar"]||"",se=v[G],W=!0;se&&(ee===se.axType&&ie===se.calendar?(W=!1,se.traces.push(X),se.dirs.push($)):(G=te,ee!==se.axType&&e.warn(["Attempted to group the bins of trace",X.index,"set on a","type:"+ee,"axis","with bins on","type:"+se.axType,"axis."].join(" ")),ie!==se.calendar&&e.warn(["Attempted to group the bins of trace",X.index,"set with a",ie,"calendar","with bins",se.calendar?"on a "+se.calendar+" calendar":"w/o a set calendar"].join(" ")))),W&&(v[G]={traces:[X],dirs:[$],axType:ee,calendar:X[$+"calendar"]||""}),X["_"+$+"bingroup"]=G}for(t(S,"fillBinOpts"),T=0;T<f.length;T++)p=f[T],n(p,"histogram")&&(c.push(p),delete p._xautoBinFinished,delete p._yautoBinFinished,n(p,"2dMap")||i(p._input,p,h,w));var k=h._alignmentOpts||{};for(T=0;T<c.length;T++){if(p=c[T],m="",!n(p,"2dMap")){if(y=x(p),h.barmode==="group"&&p.alignmentgroup){var L=p[y+"axis"],P=o(h,L)+p.orientation;(k[P]||{})[p.alignmentgroup]&&(m=P)}!m&&h.barmode!=="overlay"&&(m=o(h,p.xaxis)+o(h,p.yaxis)+x(p))}m?(d[m]||(d[m]=[]),d[m].push(p)):g.push(p)}for(m in d){if(b=d[m],b.length===1){g.push(b[0]);continue}var D=!1;for(b.length&&(p=b[0],D=w("bingroup")),m=D||m,T=0;T<b.length;T++){p=b[T];var B=p._input.bingroup;B&&B!==m&&e.warn(["Trace",p.index,"must match","within bingroup",m+".","Ignoring its bingroup:",B,"setting."].join(" ")),p.bingroup=m,S(p,m,x(p))}}for(T=0;T<g.length;T++){p=g[T];var z=w("bingroup");if(n(p,"2dMap"))for(M=0;M<2;M++){y=l[M];var R=w(y+"bingroup",z?z+"__"+y:null);S(p,R,y)}else S(p,z,x(p))}for(m in v){var F=v[m];for(b=F.traces,_=0;_<a.length;_++){var O=a[_],q=O.name,H,j;if(!(q==="nbins"&&F.sizeFound)){for(T=0;T<b.length;T++){if(p=b[T],y=F.dirs[T],H=O.aStr[y],s(p._input,H).get()!==void 0){F[q]=w(H),F[q+"Found"]=!0;break}j=(p._autoBin||{})[y]||{},j[q]&&s(p,H).set(j[q])}if(q==="start"||q==="end")for(;T<b.length;T++)p=b[T],p["_"+y+"bingroup"]&&(j=(p._autoBin||{})[y]||{},w(H,j[q]));q==="nbins"&&!F.sizeFound&&!F.nbinsFound&&(p=b[0],F[q]=w(H))}}}},"crossTraceDefaults"),JS}t(m7,"requireCross_trace_defaults");var QS,YV;function hLe(){if(YV)return QS;YV=1;var e=vx().hoverPoints,r=nn().hoverLabelText;return QS=t(function(i,s,o,a,l){var u=e(i,s,o,a,l);if(!!u){i=u[0];var f=i.cd[i.index],h=i.cd[0].trace;if(!h.cumulative.enabled){var v=h.orientation==="h"?"y":"x";i[v+"Label"]=r(i[v+"a"],[f.ph0,f.ph1],h[v+"hoverformat"])}return u}},"hoverPoints"),QS}t(hLe,"requireHover$j");var eM,WV;function Kfe(){return WV||(WV=1,eM=t(function(r,n,i,s,o){if(r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"zLabelVal"in n&&(r.z=n.zLabelVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),!(i.cumulative||{}).enabled){var a=Array.isArray(o)?s[0].pts[o[0]][o[1]]:s[o].pts;r.pointNumbers=a,r.binNumber=r.pointNumber,delete r.pointNumber,delete r.pointIndex;var l;if(i._indexToPoints){l=[];for(var u=0;u<a.length;u++)l=l.concat(i._indexToPoints[a[u]])}else l=a;r.pointIndices=l}return r},"eventData")),eM}t(Kfe,"requireEvent_data$a");var tM,XV;function vLe(){return XV||(XV=1,tM={attributes:y7(),layoutAttributes:n7(),supplyDefaults:cLe(),crossTraceDefaults:m7(),supplyLayoutDefaults:Nfe(),calc:Wfe().calc,crossTraceCalc:hx().crossTraceCalc,plot:Dy().plot,layerName:"barlayer",style:Eh().style,styleOnSelect:Eh().styleOnSelect,colorbar:_u,hoverPoints:hLe(),selectPoints:dx(),eventData:Kfe(),moduleType:"trace",name:"histogram",basePlotModule:Ti,categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}}),tM}t(vLe,"requireHistogram$1");var ZV;function dLe(){return ZV||(ZV=1,function(e){e.exports=vLe()}(YS)),YS.exports}t(dLe,"requireHistogram");var rM={exports:{}},aM,KV;function x7(){if(KV)return aM;KV=1;var e=y7(),r=Zfe(),n=Iy(),i=Ni,s=Vo.axisHoverFormat,o=Un.hovertemplateAttrs,a=Un.texttemplateAttrs,l=Qi,u=cn.extendFlat;return aM=u({x:e.x,y:e.y,z:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},marker:{color:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},editType:"calc"},histnorm:e.histnorm,histfunc:e.histfunc,nbinsx:e.nbinsx,xbins:r("x"),nbinsy:e.nbinsy,ybins:r("y"),autobinx:e.autobinx,autobiny:e.autobiny,bingroup:u({},e.bingroup,{description:["Set the `xbingroup` and `ybingroup` default prefix","For example, setting a `bingroup` of *1* on two histogram2d traces","will make them their x-bins and y-bins match separately."].join(" ")}),xbingroup:u({},e.bingroup,{description:["Set a group of histogram traces which will have compatible x-bin settings.","Using `xbingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible x-bin settings.","Note that the same `xbingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),ybingroup:u({},e.bingroup,{description:["Set a group of histogram traces which will have compatible y-bin settings.","Using `ybingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible y-bin settings.","Note that the same `ybingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z",1),hovertemplate:o({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:n.textfont,showlegend:u({},i.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1})),aM}t(x7,"requireAttributes$H");var nM,JV;function Jfe(){if(JV)return nM;JV=1;var e=Na,r=Nt.exports;return nM=t(function(i,s,o,a){var l=o("x"),u=o("y"),f=r.minRowLength(l),h=r.minRowLength(u);if(!f||!h){s.visible=!1;return}s._length=Math.min(f,h);var v=e.getComponentMethod("calendars","handleTraceDefaults");v(i,s,["x","y"],a);var c=o("z")||o("marker.color");c&&o("histfunc"),o("histnorm"),o("autobinx"),o("autobiny")},"handleSampleDefaults"),nM}t(Jfe,"requireSample_defaults");var iM,QV;function pLe(){if(QV)return iM;QV=1;var e=Nt.exports,r=Jfe(),n=$fe(),i=ml,s=Nw(),o=x7();return iM=t(function(l,u,f,h){function v(c,d){return e.coerce(l,u,o,c,d)}t(v,"coerce"),r(l,u,v,h),u.visible!==!1&&(n(l,u,v,h),i(l,u,h,v,{prefix:"",cLetter:"z"}),v("hovertemplate"),s(v,h),v("xhoverformat"),v("yhoverformat"))},"supplyDefaults"),iM}t(pLe,"requireDefaults$H");var oM,eG;function gLe(){if(eG)return oM;eG=1;var e=g7(),r=nn().hoverLabelText;return oM=t(function(i,s,o,a,l){var u=e(i,s,o,a,l);if(!!u){i=u[0];var f=i.index,h=f[0],v=f[1],c=i.cd[0],d=c.trace,g=c.xRanges[v],p=c.yRanges[h];return i.xLabel=r(i.xa,[g[0],g[1]],d.xhoverformat),i.yLabel=r(i.ya,[p[0],p[1]],d.yhoverformat),u}},"hoverPoints"),oM}t(gLe,"requireHover$i");var sM,tG;function yLe(){return tG||(tG=1,sM={attributes:x7(),supplyDefaults:pLe(),crossTraceDefaults:m7(),calc:qw(),plot:d7(),layerName:"heatmaplayer",colorbar:zy(),style:p7(),hoverPoints:gLe(),eventData:Kfe(),moduleType:"trace",name:"histogram2d",basePlotModule:Ti,categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{hrName:"histogram_2d",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a heatmap."].join(" ")}}),sM}t(yLe,"requireHistogram2d$1");var rG;function mLe(){return rG||(rG=1,function(e){e.exports=yLe()}(rM)),rM.exports}t(mLe,"requireHistogram2d");var lM={exports:{}},uM,aG;function Uw(){return aG||(aG=1,uM={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}),uM}t(Uw,"requireFilter_ops");var fM,nG;function Hw(){if(nG)return fM;nG=1;var e=Iy(),r=Ps,n=Vo,i=n.axisHoverFormat,s=n.descriptionOnlyNumbers,o=Qi,a=yu.dash,l=Ho,u=cn.extendFlat,f=Uw(),h=f.COMPARISON_OPS2,v=f.INTERVAL_OPS,c=r.line;return fM=u({z:e.z,x:e.x,x0:e.x0,dx:e.dx,y:e.y,y0:e.y0,dy:e.dy,xperiod:e.xperiod,yperiod:e.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:e.xperiodalignment,yperiodalignment:e.yperiodalignment,text:e.text,hovertext:e.hovertext,transpose:e.transpose,xtype:e.xtype,ytype:e.ytype,xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z",1),hovertemplate:e.hovertemplate,texttemplate:u({},e.texttemplate,{description:["For this trace it only has an effect if `coloring` is set to *heatmap*.",e.texttemplate.description].join(" ")}),textfont:u({},e.textfont,{description:["For this trace it only has an effect if `coloring` is set to *heatmap*.",e.textfont.description].join(" ")}),hoverongaps:e.hoverongaps,connectgaps:u({},e.connectgaps,{description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array","otherwise it is defaulted to false."].join(" ")}),fillcolor:{valType:"color",editType:"calc",description:["Sets the fill color if `contours.type` is *constraint*.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0},description:["Determines whether or not the contour level attributes are","picked by an algorithm.","If *true*, the number of contour levels can be set in `ncontours`.","If *false*, set the contour level attributes in `contours`."].join(" ")},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc",description:["Sets the maximum number of contour levels. The actual number","of contours will be chosen automatically to be less than or","equal to the value of `ncontours`.","Has an effect only if `autocontour` is *true* or if","`contours.size` is missing."].join(" ")},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc",description:["If `levels`, the data is represented as a contour plot with multiple","levels displayed. If `constraint`, the data is represented as constraints","with the invalid region shaded as specified by the `operation` and","`value` parameters."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1},description:["Sets the step between each contour level.","Must be positive."].join(" ")},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *heatmap*, a heatmap gradient coloring is applied","between each contour level.","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not the contour lines are drawn.","Has an effect only if `contours.coloring` is set to *fill*."].join(" ")},showlabels:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether to label the contour lines with their values."].join(" ")},labelfont:l({editType:"plot",colorEditType:"style",description:["Sets the font used for labeling the contour levels.","The default color comes from the lines, if shown.","The default family and size come from `layout.font`."].join(" ")}),labelformat:{valType:"string",dflt:"",editType:"plot",description:s("contour label")},operation:{valType:"enumerated",values:[].concat(h).concat(v),dflt:"=",editType:"calc",description:["Sets the constraint operation.","*=* keeps regions equal to `value`","*<* and *<=* keep regions less than `value`","*>* and *>=* keep regions greater than `value`","*[]*, *()*, *[)*, and *(]* keep regions inside `value[0]` to `value[1]`","*][*, *)(*, *](*, *)[* keep regions outside `value[0]` to value[1]`","Open vs. closed intervals make no difference to constraint display, but","all versions are allowed for consistency with filter transforms."].join(" ")},value:{valType:"any",dflt:0,editType:"calc",description:["Sets the value or values of the constraint boundary.","When `operation` is set to one of the comparison values","("+h+")","*value* is expected to be a number.","When `operation` is set to one of the interval values","("+v+")","*value* is expected to be an array of two numbers where the first","is the lower bound and the second is the upper bound."].join(" ")},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:u({},c.color,{editType:"style+colorbars",description:["Sets the color of the contour level.","Has no effect if `contours.coloring` is set to *lines*."].join(" ")}),width:{valType:"number",min:0,editType:"style+colorbars",description:["Sets the contour line width in (in px)","Defaults to *0.5* when `contours.type` is *levels*.","Defaults to *2* when `contour.type` is *constraint*."].join(" ")},dash:a,smoothing:u({},c.smoothing,{description:["Sets the amount of smoothing for the contour lines,","where *0* corresponds to no smoothing."].join(" ")}),editType:"plot"}},o("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"})),fM}t(Hw,"requireAttributes$G");var cM,iG;function Qfe(){if(iG)return cM;iG=1;var e=x7(),r=Hw(),n=Qi,i=Vo.axisHoverFormat,s=cn.extendFlat;return cM=s({x:e.x,y:e.y,z:e.z,marker:e.marker,histnorm:e.histnorm,histfunc:e.histfunc,nbinsx:e.nbinsx,xbins:e.xbins,nbinsy:e.nbinsy,ybins:e.ybins,autobinx:e.autobinx,autobiny:e.autobiny,bingroup:e.bingroup,xbingroup:e.xbingroup,ybingroup:e.ybingroup,autocontour:r.autocontour,ncontours:r.ncontours,contours:r.contours,line:{color:r.line.color,width:s({},r.line.width,{dflt:.5,description:"Sets the contour line width in (in px)"}),dash:r.line.dash,smoothing:r.line.smoothing,editType:"plot"},xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z",1),hovertemplate:e.hovertemplate,texttemplate:r.texttemplate,textfont:r.textfont},n("",{cLetter:"z",editTypeOverride:"calc"})),cM}t(Qfe,"requireAttributes$F");var hM,oG;function b7(){return oG||(oG=1,hM=t(function(r,n,i,s){var o=s("contours.start"),a=s("contours.end"),l=o===!1||a===!1,u=i("contours.size"),f;l?f=n.autocontour=!0:f=i("autocontour",!1),(f||!u)&&i("ncontours")},"handleContourDefaults")),hM}t(b7,"requireContours_defaults");var vM,sG;function ece(){if(sG)return vM;sG=1;var e=Nt.exports;return vM=t(function(n,i,s,o){o||(o={});var a=n("contours.showlabels");if(a){var l=i.font;e.coerceFont(n,"contours.labelfont",{family:l.family,size:l.size,color:s}),n("contours.labelformat")}o.hasHover!==!1&&n("zhoverformat")},"handleLabelDefaults"),vM}t(ece,"requireLabel_defaults");var dM,lG;function _7(){if(lG)return dM;lG=1;var e=ml,r=ece();return dM=t(function(i,s,o,a,l){var u=o("contours.coloring"),f,h="";u==="fill"&&(f=o("contours.showlines")),f!==!1&&(u!=="lines"&&(h=o("line.color","#000")),o("line.width",.5),o("line.dash")),u!=="none"&&(i.showlegend!==!0&&(s.showlegend=!1),s._dfltShowLegend=!1,e(i,s,a,o,{prefix:"",cLetter:"z"})),o("line.smoothing"),r(o,a,h,l)},"handleStyleDefaults"),dM}t(_7,"requireStyle_defaults");var pM,uG;function xLe(){if(uG)return pM;uG=1;var e=Nt.exports,r=Jfe(),n=b7(),i=_7(),s=Nw(),o=Qfe();return pM=t(function(l,u,f,h){function v(d,g){return e.coerce(l,u,o,d,g)}t(v,"coerce");function c(d){return e.coerce2(l,u,o,d)}t(c,"coerce2"),r(l,u,v,h),u.visible!==!1&&(n(l,u,v,c),i(l,u,v,h),v("xhoverformat"),v("yhoverformat"),v("hovertemplate"),u.contours&&u.contours.coloring==="heatmap"&&s(v,h))},"supplyDefaults"),pM}t(xLe,"requireDefaults$G");var gM,fG;function tce(){if(fG)return gM;fG=1;var e=nn(),r=Nt.exports;gM=t(function(s,o){var a=s.contours;if(s.autocontour){var l=s.zmin,u=s.zmax;(s.zauto||l===void 0)&&(l=r.aggNums(Math.min,null,o)),(s.zauto||u===void 0)&&(u=r.aggNums(Math.max,null,o));var f=n(l,u,s.ncontours);a.size=f.dtick,a.start=e.tickFirst(f),f.range.reverse(),a.end=e.tickFirst(f),a.start===l&&(a.start+=a.size),a.end===u&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),s._input.contours||(s._input.contours={}),r.extendFlat(s._input.contours,{start:a.start,end:a.end,size:a.size}),s._input.autocontour=!0}else if(a.type!=="constraint"){var h=a.start,v=a.end,c=s._input.contours;if(h>v&&(a.start=c.start=v,v=a.end=c.end=h,h=a.start),!(a.size>0)){var d;h===v?d=1:d=n(h,v,s.ncontours).dtick,c.size=a.size=d}}},"setContours");function n(i,s,o){var a={type:"linear",range:[i,s]};return e.autoTicks(a,(s-i)/(o||15)),a}return t(n,"autoContours"),gM}t(tce,"requireSet_contours");var yM,cG;function $w(){return cG||(cG=1,yM=t(function(r){return r.end+r.size/1e6},"endPlus")),yM}t($w,"requireEnd_plus");var mM,hG;function rce(){if(hG)return mM;hG=1;var e=ko,r=qw(),n=tce(),i=$w();return mM=t(function(o,a){var l=r(o,a),u=l[0].z;n(a,u);var f=a.contours,h=e.extractOpts(a),v;if(f.coloring==="heatmap"&&h.auto&&a.autocontour===!1){var c=f.start,d=i(f),g=f.size||1,p=Math.floor((d-c)/g)+1;isFinite(g)||(g=1,p=1);var b=c-g/2,m=b+p*g;v=[b,m]}else v=u;return e.calc(o,a,{vals:v,cLetter:"z"}),l},"calc"),mM}t(rce,"requireCalc$z");var xM={},bM,vG;function Vw(){return vG||(vG=1,bM={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}),bM}t(Vw,"requireConstants$f");var _M,dG;function ace(){if(dG)return _M;dG=1;var e=Vw();_M=t(function(i){var s=i[0].z,o=s.length,a=s[0].length,l=o===2||a===2,u,f,h,v,c,d,g,p,b;for(f=0;f<o-1;f++)for(v=[],f===0&&(v=v.concat(e.BOTTOMSTART)),f===o-2&&(v=v.concat(e.TOPSTART)),u=0;u<a-1;u++)for(h=v.slice(),u===0&&(h=h.concat(e.LEFTSTART)),u===a-2&&(h=h.concat(e.RIGHTSTART)),c=u+","+f,d=[[s[f][u],s[f][u+1]],[s[f+1][u],s[f+1][u+1]]],b=0;b<i.length;b++)p=i[b],g=r(p.level,d),g&&(p.crossings[c]=g,h.indexOf(g)!==-1&&(p.starts.push([u,f]),l&&h.indexOf(g,h.indexOf(g)+1)!==-1&&p.starts.push([u,f])))},"makeCrossings");function r(n,i){var s=(i[0][0]>n?0:1)+(i[0][1]>n?0:2)+(i[1][1]>n?0:4)+(i[1][0]>n?0:8);if(s===5||s===10){var o=(i[0][0]+i[0][1]+i[1][0]+i[1][1])/4;return n>o?s===5?713:1114:s===5?104:208}return s===15?0:s}return t(r,"getMarchingIndex"),_M}t(ace,"requireMake_crossings");var wM,pG;function nce(){if(pG)return wM;pG=1;var e=Nt.exports,r=Vw();wM=t(function(u,f,h){var v,c,d,g,p;for(f=f||.01,h=h||.01,d=0;d<u.length;d++){for(g=u[d],p=0;p<g.starts.length;p++)c=g.starts[p],s(g,c,"edge",f,h);for(v=0;Object.keys(g.crossings).length&&v<1e4;)v++,c=Object.keys(g.crossings)[0].split(",").map(Number),s(g,c,void 0,f,h);v===1e4&&e.log("Infinite loop in contour?")}},"findAllPaths");function n(l,u,f,h){return Math.abs(l[0]-u[0])<f&&Math.abs(l[1]-u[1])<h}t(n,"equalPts");function i(l,u){var f=l[2]-u[2],h=l[3]-u[3];return Math.sqrt(f*f+h*h)}t(i,"ptDist");function s(l,u,f,h,v){var c=u.join(","),d=l.crossings[c],g=o(d,f,u),p=[a(l,u,[-g[0],-g[1]])],b=l.z.length,m=l.z[0].length,y=u.slice(),T=g.slice(),_;for(_=0;_<1e4;_++){if(d>20?(d=r.CHOOSESADDLE[d][(g[0]||g[1])<0?0:1],l.crossings[c]=r.SADDLEREMAINDER[d]):delete l.crossings[c],g=r.NEWDELTA[d],!g){e.log("Found bad marching index:",d,u,l.level);break}p.push(a(l,u,g)),u[0]+=g[0],u[1]+=g[1],c=u.join(","),n(p[p.length-1],p[p.length-2],h,v)&&p.pop();var M=g[0]&&(u[0]<0||u[0]>m-2)||g[1]&&(u[1]<0||u[1]>b-2),w=u[0]===y[0]&&u[1]===y[1]&&g[0]===T[0]&&g[1]===T[1];if(w||f&&M)break;d=l.crossings[c]}_===1e4&&e.log("Infinite loop in contour?");var x=n(p[0],p[p.length-1],h,v),A=0,S=.2*l.smoothing,k=[],L=0,P,D,B,z,R,F,O,q,H,j,X;for(_=1;_<p.length;_++)O=i(p[_],p[_-1]),A+=O,k.push(O);var G=A/k.length*S;function $(ie){return p[ie%p.length]}for(t($,"getpt"),_=p.length-2;_>=L;_--)if(P=k[_],P<G){for(B=0,D=_-1;D>=L&&P+k[D]<G;D--)P+=k[D];if(x&&_===p.length-2)for(B=0;B<D&&P+k[B]<G;B++)P+=k[B];R=_-D+B+1,F=Math.floor((_+D+B+2)/2),!x&&_===p.length-2?z=p[p.length-1]:!x&&D===-1?z=p[0]:R%2?z=$(F):z=[($(F)[0]+$(F+1)[0])/2,($(F)[1]+$(F+1)[1])/2],p.splice(D+1,_-D+1,z),_=D+1,B&&(L=B),x&&(_===p.length-2?p[B]=p[p.length-1]:_===0&&(p[p.length-1]=p[0]))}for(p.splice(0,L),_=0;_<p.length;_++)p[_].length=2;if(!(p.length<2))if(x)p.pop(),l.paths.push(p);else{f||e.log("Unclosed interior contour?",l.level,y.join(","),p.join("L"));var te=!1;for(q=0;q<l.edgepaths.length;q++)if(j=l.edgepaths[q],!te&&n(j[0],p[p.length-1],h,v)){p.pop(),te=!0;var ee=!1;for(H=0;H<l.edgepaths.length;H++)if(X=l.edgepaths[H],n(X[X.length-1],p[0],h,v)){ee=!0,p.shift(),l.edgepaths.splice(q,1),H===q?l.paths.push(p.concat(X)):(H>q&&H--,l.edgepaths[H]=X.concat(p,j));break}ee||(l.edgepaths[q]=p.concat(j))}for(q=0;q<l.edgepaths.length&&!te;q++)j=l.edgepaths[q],n(j[j.length-1],p[0],h,v)&&(p.shift(),l.edgepaths[q]=j.concat(p),te=!0);te||l.edgepaths.push(p)}}t(s,"makePath");function o(l,u,f){var h=0,v=0;return l>20&&u?l===208||l===1114?h=f[0]===0?1:-1:v=f[1]===0?1:-1:r.BOTTOMSTART.indexOf(l)!==-1?v=1:r.LEFTSTART.indexOf(l)!==-1?h=1:r.TOPSTART.indexOf(l)!==-1?v=-1:h=-1,[h,v]}t(o,"getStartStep");function a(l,u,f){var h=u[0]+Math.max(f[0],0),v=u[1]+Math.max(f[1],0),c=l.z[v][h],d=l.xaxis,g=l.yaxis;if(f[1]){var p=(l.level-c)/(l.z[v][h+1]-c),b=(p!==1?(1-p)*d.c2l(l.x[h]):0)+(p!==0?p*d.c2l(l.x[h+1]):0);return[d.c2p(d.l2c(b),!0),g.c2p(l.y[v],!0),h+p,v]}else{var m=(l.level-c)/(l.z[v+1][h]-c),y=(m!==1?(1-m)*g.c2l(l.y[v]):0)+(m!==0?m*g.c2l(l.y[v+1]):0);return[d.c2p(l.x[h],!0),g.c2p(g.l2c(y),!0),h,v+m]}}return t(a,"getInterpPx"),wM}t(nce,"requireFind_all_paths");var TM,gG;function bLe(){if(gG)return TM;gG=1;var e=Uw(),r=xn;TM={"[]":i("[]"),"][":i("]["),">":s(">"),"<":s("<"),"=":s("=")};function n(o,a){var l=Array.isArray(a),u;function f(h){return r(h)?+h:null}return t(f,"coerce"),e.COMPARISON_OPS2.indexOf(o)!==-1?u=f(l?a[0]:a):e.INTERVAL_OPS.indexOf(o)!==-1?u=l?[f(a[0]),f(a[1])]:[f(a),f(a)]:e.SET_OPS.indexOf(o)!==-1&&(u=l?a.map(f):[f(a)]),u}t(n,"coerceValue");function i(o){return function(a){a=n(o,a);var l=Math.min(a[0],a[1]),u=Math.max(a[0],a[1]);return{start:l,end:u,size:u-l}}}t(i,"makeRangeSettings");function s(o){return function(a){return a=n(o,a),{start:a,end:1/0,size:1/0}}}return t(s,"makeInequalitySettings"),TM}t(bLe,"requireConstraint_mapping");var AM,yG;function ice(){if(yG)return AM;yG=1;var e=Nt.exports,r=bLe(),n=$w();return AM=t(function(s,o,a){for(var l=s.type==="constraint"?r[s._operation](s.value):s,u=l.size,f=[],h=n(l),v=a.trace._carpetTrace,c=v?{xaxis:v.aaxis,yaxis:v.baxis,x:a.a,y:a.b}:{xaxis:o.xaxis,yaxis:o.yaxis,x:a.x,y:a.y},d=l.start;d<h;d+=u)if(f.push(e.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},c)),f.length>1e3){e.warn("Too many contours, clipping at 1000",s);break}return f},"emptyPathinfo"),AM}t(ice,"requireEmpty_pathinfo");var SM,mG;function oce(){if(mG)return SM;mG=1;var e=Nt.exports;SM=t(function(n,i){var s,o,a,l=t(function(h){return h.reverse()},"op0"),u=t(function(h){return h},"op1");switch(i){case"=":case"<":return n;case">":for(n.length!==1&&e.warn("Contour data invalid for the specified inequality operation."),o=n[0],s=0;s<o.edgepaths.length;s++)o.edgepaths[s]=l(o.edgepaths[s]);for(s=0;s<o.paths.length;s++)o.paths[s]=l(o.paths[s]);for(s=0;s<o.starts.length;s++)o.starts[s]=l(o.starts[s]);return n;case"][":var f=l;l=u,u=f;case"[]":for(n.length!==2&&e.warn("Contour data invalid for the specified inequality range operation."),o=r(n[0]),a=r(n[1]),s=0;s<o.edgepaths.length;s++)o.edgepaths[s]=l(o.edgepaths[s]);for(s=0;s<o.paths.length;s++)o.paths[s]=l(o.paths[s]);for(s=0;s<o.starts.length;s++)o.starts[s]=l(o.starts[s]);for(;a.edgepaths.length;)o.edgepaths.push(u(a.edgepaths.shift()));for(;a.paths.length;)o.paths.push(u(a.paths.shift()));for(;a.starts.length;)o.starts.push(u(a.starts.shift()));return[o]}},"convert_to_constraints");function r(n){return e.extendFlat({},n,{edgepaths:e.extendDeep([],n.edgepaths),paths:e.extendDeep([],n.paths),starts:e.extendDeep([],n.starts)})}return t(r,"copyPathinfo"),SM}t(oce,"requireConvert_to_constraints");var MM,xG;function sce(){return xG||(xG=1,MM=t(function(e,r){var n=e[0],i=n.z,s;switch(r.type){case"levels":var o=Math.min(i[0][0],i[0][1]);for(s=0;s<e.length;s++){var a=e[s];a.prefixBoundary=!a.edgepaths.length&&(o>a.level||a.starts.length&&o===a.level)}break;case"constraint":if(n.prefixBoundary=!1,n.edgepaths.length)return;var l=n.x.length,u=n.y.length,f=-1/0,h=1/0;for(s=0;s<u;s++)h=Math.min(h,i[s][0]),h=Math.min(h,i[s][l-1]),f=Math.max(f,i[s][0]),f=Math.max(f,i[s][l-1]);for(s=1;s<l-1;s++)h=Math.min(h,i[0][s]),h=Math.min(h,i[u-1][s]),f=Math.max(f,i[0][s]),f=Math.max(f,i[u-1][s]);var v=r.value,c,d;switch(r._operation){case">":v>f&&(n.prefixBoundary=!0);break;case"<":(v<h||n.starts.length&&v===h)&&(n.prefixBoundary=!0);break;case"[]":c=Math.min(v[0],v[1]),d=Math.max(v[0],v[1]),(d<h||c>f||n.starts.length&&d===h)&&(n.prefixBoundary=!0);break;case"][":c=Math.min(v[0],v[1]),d=Math.max(v[0],v[1]),c<h&&d>f&&(n.prefixBoundary=!0);break}break}},"close_boundaries")),MM}t(sce,"requireClose_boundaries");var bG;function w7(){return bG||(bG=1,function(e){var r=Va.exports,n=Nt.exports,i=bn.exports,s=ko,o=Ji,a=nn(),l=hd(),u=d7(),f=ace(),h=nce(),v=ice(),c=oce(),d=sce(),g=Vw(),p=g.LABELOPTIMIZER;e.plot=t(function(A,S,k,L){var P=S.xaxis,D=S.yaxis;n.makeTraceGroups(L,k,"contour").each(function(B){var z=r.select(this),R=B[0],F=R.trace,O=R.x,q=R.y,H=F.contours,j=v(H,S,R),X=n.ensureSingle(z,"g","heatmapcoloring"),G=[];H.coloring==="heatmap"&&(G=[B]),u(A,S,G,X),f(j),h(j);var $=P.c2p(O[0],!0),te=P.c2p(O[O.length-1],!0),ee=D.c2p(q[0],!0),ie=D.c2p(q[q.length-1],!0),se=[[$,ie],[te,ie],[te,ee],[$,ee]],W=j;H.type==="constraint"&&(W=c(j,H._operation)),b(z,se,H),m(z,W,se,H),T(z,j,A,R,H),M(z,S,A,R,se)})},"plot");function b(x,A,S){var k=n.ensureSingle(x,"g","contourbg"),L=k.selectAll("path").data(S.coloring==="fill"?[0]:[]);L.enter().append("path"),L.exit().remove(),L.attr("d","M"+A.join("L")+"Z").style("stroke","none")}t(b,"makeBackground");function m(x,A,S,k){var L=k.coloring==="fill"||k.type==="constraint"&&k._operation!=="=",P="M"+S.join("L")+"Z";L&&d(A,k);var D=n.ensureSingle(x,"g","contourfill"),B=D.selectAll("path").data(L?A:[]);B.enter().append("path"),B.exit().remove(),B.each(function(z){var R=(z.prefixBoundary?P:"")+y(z,S);R?r.select(this).attr("d",R).style("stroke","none"):r.select(this).remove()})}t(m,"makeFills");function y(x,A){var S="",k=0,L=x.edgepaths.map(function($,te){return te}),P=!0,D,B,z,R,F,O;function q($){return Math.abs($[1]-A[0][1])<.01}t(q,"istop");function H($){return Math.abs($[1]-A[2][1])<.01}t(H,"isbottom");function j($){return Math.abs($[0]-A[0][0])<.01}t(j,"isleft");function X($){return Math.abs($[0]-A[2][0])<.01}for(t(X,"isright");L.length;){for(O=i.smoothopen(x.edgepaths[k],x.smoothing),S+=P?O:O.replace(/^M/,"L"),L.splice(L.indexOf(k),1),D=x.edgepaths[k][x.edgepaths[k].length-1],R=-1,z=0;z<4;z++){if(!D){n.log("Missing end?",k,x);break}for(q(D)&&!X(D)?B=A[1]:j(D)?B=A[0]:H(D)?B=A[3]:X(D)&&(B=A[2]),F=0;F<x.edgepaths.length;F++){var G=x.edgepaths[F][0];Math.abs(D[0]-B[0])<.01?Math.abs(D[0]-G[0])<.01&&(G[1]-D[1])*(B[1]-G[1])>=0&&(B=G,R=F):Math.abs(D[1]-B[1])<.01?Math.abs(D[1]-G[1])<.01&&(G[0]-D[0])*(B[0]-G[0])>=0&&(B=G,R=F):n.log("endpt to newendpt is not vert. or horz.",D,B,G)}if(D=B,R>=0)break;S+="L"+B}if(R===x.edgepaths.length){n.log("unclosed perimeter path");break}k=R,P=L.indexOf(k)===-1,P&&(k=L[0],S+="Z")}for(k=0;k<x.paths.length;k++)S+=i.smoothclosed(x.paths[k],x.smoothing);return S}t(y,"joinAllPaths");function T(x,A,S,k,L){var P=n.ensureSingle(x,"g","contourlines"),D=L.showlines!==!1,B=L.showlabels,z=D&&B,R=e.createLines(P,D||B,A),F=e.createLineClip(P,z,S,k.trace.uid),O=x.selectAll("g.contourlabels").data(B?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),B){var q=[],H=[];n.clearLocationCache();var j=e.labelFormatter(S,k),X=i.tester.append("text").attr("data-notex",1).call(i.font,L.labelfont),G=A[0].xaxis,$=A[0].yaxis,te=G._length,ee=$._length,ie=G.range,se=$.range,W=n.aggNums(Math.min,null,k.x),ne=n.aggNums(Math.max,null,k.x),he=n.aggNums(Math.min,null,k.y),re=n.aggNums(Math.max,null,k.y),ae=Math.max(G.c2p(W,!0),0),fe=Math.min(G.c2p(ne,!0),te),ce=Math.max($.c2p(re,!0),0),xe=Math.min($.c2p(he,!0),ee),Te={};ie[0]<ie[1]?(Te.left=ae,Te.right=fe):(Te.left=fe,Te.right=ae),se[0]<se[1]?(Te.top=ce,Te.bottom=xe):(Te.top=xe,Te.bottom=ce),Te.middle=(Te.top+Te.bottom)/2,Te.center=(Te.left+Te.right)/2,q.push([[Te.left,Te.top],[Te.right,Te.top],[Te.right,Te.bottom],[Te.left,Te.bottom]]);var me=Math.sqrt(te*te+ee*ee),pe=g.LABELDISTANCE*me/Math.max(1,A.length/g.LABELINCREASE);R.each(function(oe){var de=e.calcTextOpts(oe.level,j,X,S);r.select(this).selectAll("path").each(function(){var ye=this,we=n.getVisibleSegment(ye,Te,de.height/2);if(!!we&&!(we.len<(de.width+de.height)*g.LABELMIN))for(var Ee=Math.min(Math.ceil(we.len/pe),g.LABELMAX),De=0;De<Ee;De++){var Fe=e.findBestTextLocation(ye,we,de,H,Te);if(!Fe)break;e.addLabelData(Fe,de,H,q)}})}),X.remove(),e.drawLabels(O,H,S,F,z?q:null)}B&&!D&&R.remove()}t(T,"makeLinesAndLabels"),e.createLines=function(x,A,S){var k=S[0].smoothing,L=x.selectAll("g.contourlevel").data(A?S:[]);if(L.exit().remove(),L.enter().append("g").classed("contourlevel",!0),A){var P=L.selectAll("path.openline").data(function(B){return B.pedgepaths||B.edgepaths});P.exit().remove(),P.enter().append("path").classed("openline",!0),P.attr("d",function(B){return i.smoothopen(B,k)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var D=L.selectAll("path.closedline").data(function(B){return B.ppaths||B.paths});D.exit().remove(),D.enter().append("path").classed("closedline",!0),D.attr("d",function(B){return i.smoothclosed(B,k)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return L},e.createLineClip=function(x,A,S,k){var L=S._fullLayout._clips,P=A?"clipline"+k:null,D=L.selectAll("#"+P).data(A?[0]:[]);return D.exit().remove(),D.enter().append("clipPath").classed("contourlineclip",!0).attr("id",P),i.setClipUrl(x,P,S),D},e.labelFormatter=function(x,A){var S=x._fullLayout,k=A.trace,L=k.contours,P={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(L.labelformat)P.tickformat=L.labelformat,l(P,S);else{var D=s.extractOpts(k);if(D&&D.colorbar&&D.colorbar._axis)P=D.colorbar._axis;else{if(L.type==="constraint"){var B=L.value;Array.isArray(B)?P.range=[B[0],B[B.length-1]]:P.range=[B,B]}else P.range=[L.start,L.end],P.nticks=(L.end-L.start)/L.size;P.range[0]===P.range[1]&&(P.range[1]+=P.range[0]||1),P.nticks||(P.nticks=1e3),l(P,S),a.prepTicks(P),P._tmin=null,P._tmax=null}}return function(z){return a.tickText(P,z).text}},e.calcTextOpts=function(x,A,S,k){var L=A(x);S.text(L).call(o.convertToTspans,k);var P=S.node(),D=i.bBox(P,!0);return{text:L,width:D.width,height:D.height,fontSize:+P.style["font-size"].replace("px",""),level:x,dy:(D.top+D.bottom)/2}},e.findBestTextLocation=function(x,A,S,k,L){var P=S.width,D,B,z,R,F;A.isClosed?(B=A.len/p.INITIALSEARCHPOINTS,D=A.min+B/2,z=A.max):(B=(A.len-P)/(p.INITIALSEARCHPOINTS+1),D=A.min+B+P/2,z=A.max-(B+P)/2);for(var O=1/0,q=0;q<p.ITERATIONS;q++){for(var H=D;H<z;H+=B){var j=n.getTextLocation(x,A.total,H,P),X=_(j,S,k,L);X<O&&(O=X,F=j,R=H)}if(O>p.MAXCOST*2)break;q&&(B/=2),D=R-B/2,z=D+B*1.5}if(O<=p.MAXCOST)return F};function _(x,A,S,k){var L=A.width/2,P=A.height/2,D=x.x,B=x.y,z=x.theta,R=Math.cos(z)*L,F=Math.sin(z)*L,O=(D>k.center?k.right-D:D-k.left)/(R+Math.abs(Math.sin(z)*P)),q=(B>k.middle?k.bottom-B:B-k.top)/(Math.abs(F)+Math.cos(z)*P);if(O<1||q<1)return 1/0;var H=p.EDGECOST*(1/(O-1)+1/(q-1));H+=p.ANGLECOST*z*z;for(var j=D-R,X=B-F,G=D+R,$=B+F,te=0;te<S.length;te++){var ee=S[te],ie=Math.cos(ee.theta)*ee.width/2,se=Math.sin(ee.theta)*ee.width/2,W=n.segmentDistance(j,X,G,$,ee.x-ie,ee.y-se,ee.x+ie,ee.y+se)*2/(A.height+ee.height),ne=ee.level===A.level,he=ne?p.SAMELEVELDISTANCE:1;if(W<=he)return 1/0;var re=p.NEIGHBORCOST*(ne?p.SAMELEVELFACTOR:1);H+=re/(W-he)}return H}t(_,"locationCost"),e.addLabelData=function(x,A,S,k){var L=A.fontSize,P=A.width+L/3,D=Math.max(0,A.height-L/3),B=x.x,z=x.y,R=x.theta,F=Math.sin(R),O=Math.cos(R),q=t(function(j,X){return[B+j*O-X*F,z+j*F+X*O]},"rotateXY"),H=[q(-P/2,-D/2),q(-P/2,D/2),q(P/2,D/2),q(P/2,-D/2)];S.push({text:A.text,x:B,y:z,dy:A.dy,theta:R,level:A.level,width:P,height:D}),k.push(H)},e.drawLabels=function(x,A,S,k,L){var P=x.selectAll("text").data(A,function(R){return R.text+","+R.x+","+R.y+","+R.theta});if(P.exit().remove(),P.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(R){var F=R.x+Math.sin(R.theta)*R.dy,O=R.y-Math.cos(R.theta)*R.dy;r.select(this).text(R.text).attr({x:F,y:O,transform:"rotate("+180*R.theta/Math.PI+" "+F+" "+O+")"}).call(o.convertToTspans,S)}),L){for(var D="",B=0;B<L.length;B++)D+="M"+L[B].join("L")+"Z";var z=n.ensureSingle(k,"path","");z.attr("d",D)}};function M(x,A,S,k,L){var P=k.trace,D=S._fullLayout._clips,B="clip"+P.uid,z=D.selectAll("#"+B).data(P.connectgaps?[]:[0]);if(z.enter().append("clipPath").classed("contourclip",!0).attr("id",B),z.exit().remove(),P.connectgaps===!1){var R={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:A.xaxis,yaxis:A.yaxis,x:k.x,y:k.y,z:w(k),smoothing:0};f([R]),h([R]),d([R],{type:"levels"});var F=n.ensureSingle(z,"path","");F.attr("d",(R.prefixBoundary?"M"+L.join("L")+"Z":"")+y(R,L))}else B=null;i.setClipUrl(x,B,S)}t(M,"clipGaps");function w(x){var A=x.trace._emptypoints,S=[],k=x.z.length,L=x.z[0].length,P,D=[],B;for(P=0;P<L;P++)D.push(1);for(P=0;P<k;P++)S.push(D.slice());for(P=0;P<A.length;P++)B=A[P],S[B[0]][B[1]]=0;return x.zmask=S,S}t(w,"makeClipMask")}(xM)),xM}t(w7,"requirePlot$u");var kM,_G;function lce(){if(_G)return kM;_G=1;var e=Va.exports,r=ko,n=$w();return kM=t(function(s){var o=s.contours,a=o.start,l=n(o),u=o.size||1,f=Math.floor((l-a)/u)+1,h=o.coloring==="lines"?0:1,v=r.extractOpts(s);isFinite(u)||(u=1,f=1);var c=v.reversescale?r.flipScale(v.colorscale):v.colorscale,d=c.length,g=new Array(d),p=new Array(d),b,m;if(o.coloring==="heatmap"){var y=v.min,T=v.max;for(m=0;m<d;m++)b=c[m],g[m]=b[0]*(T-y)+y,p[m]=b[1];var _=e.extent([y,T,o.start,o.start+u*(f-1)]),M=_[y<T?0:1],w=_[y<T?1:0];M!==y&&(g.splice(0,0,M),p.splice(0,0,p[0])),w!==T&&(g.push(w),p.push(p[p.length-1]))}else for(m=0;m<d;m++)b=c[m],g[m]=(b[0]*(f+h-1)-h/2)*u+a,p[m]=b[1];return r.makeColorScaleFunc({domain:g,range:p},{noNumericCheck:!0})},"makeColorMap"),kM}t(lce,"requireMake_color_map");var EM,wG;function T7(){if(wG)return EM;wG=1;var e=Va.exports,r=bn.exports,n=p7(),i=lce();return EM=t(function(o){var a=e.select(o).selectAll("g.contour");a.style("opacity",function(l){return l[0].trace.opacity}),a.each(function(l){var u=e.select(this),f=l[0].trace,h=f.contours,v=f.line,c=h.size||1,d=h.start,g=h.type==="constraint",p=!g&&h.coloring==="lines",b=!g&&h.coloring==="fill",m=p||b?i(f):null;u.selectAll("g.contourlevel").each(function(_){e.select(this).selectAll("path").call(r.lineGroupStyle,v.width,p?m(_.level):v.color,v.dash)});var y=h.labelfont;if(u.selectAll("g.contourlabels text").each(function(_){r.font(e.select(this),{family:y.family,size:y.size,color:y.color||(p?m(_.level):v.color)})}),g)u.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(b){var T;u.selectAll("g.contourfill path").style("fill",function(_){return T===void 0&&(T=_.level),m(_.level+.5*c)}),T===void 0&&(T=d),u.selectAll("g.contourbg path").style("fill",m(T-.5*c))}}),n(o)},"style"),EM}t(T7,"requireStyle$c");var CM,TG;function A7(){if(TG)return CM;TG=1;var e=ko,r=lce(),n=$w();function i(s,o,a){var l=o.contours,u=o.line,f=l.size||1,h=l.coloring,v=r(o,{isColorbar:!0});if(h==="heatmap"){var c=e.extractOpts(o);a._fillgradient=c.reversescale?e.flipScale(c.colorscale):c.colorscale,a._zrange=[c.min,c.max]}else h==="fill"&&(a._fillcolor=v);a._line={color:h==="lines"?v:u.color,width:l.showlines!==!1?u.width:0,dash:u.dash},a._levels={start:l.start,end:n(l),size:f}}return t(i,"calc"),CM={min:"zmin",max:"zmax",calc:i},CM}t(A7,"requireColorbar");var LM,AG;function uce(){if(AG)return LM;AG=1;var e=$a.exports,r=g7();return LM=t(function(i,s,o,a,l){l||(l={}),l.isContour=!0;var u=r(i,s,o,a,l);return u&&u.forEach(function(f){var h=f.trace;h.contours.type==="constraint"&&(h.fillcolor&&e.opacity(h.fillcolor)?f.color=e.addOpacity(h.fillcolor,1):h.contours.showlines&&e.opacity(h.line.color)&&(f.color=e.addOpacity(h.line.color,1)))}),u},"hoverPoints"),LM}t(uce,"requireHover$h");var RM,SG;function _Le(){return SG||(SG=1,RM={attributes:Qfe(),supplyDefaults:xLe(),crossTraceDefaults:m7(),calc:rce(),plot:w7().plot,layerName:"contourlayer",style:T7(),colorbar:A7(),hoverPoints:uce(),moduleType:"trace",name:"histogram2dcontour",basePlotModule:Ti,categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{hrName:"histogram_2d_contour",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a contour plot."].join(" ")}}),RM}t(_Le,"requireHistogram2dcontour$1");var MG;function wLe(){return MG||(MG=1,function(e){e.exports=_Le()}(lM)),lM.exports}t(wLe,"requireHistogram2dcontour");var PM={exports:{}},DM,kG;function fce(){if(kG)return DM;kG=1;var e=xn,r=ece(),n=$a.exports,i=n.addOpacity,s=n.opacity,o=Uw(),a=o.CONSTRAINT_REDUCTION,l=o.COMPARISON_OPS2;DM=t(function(h,v,c,d,g,p){var b=v.contours,m,y,T,_=c("contours.operation");if(b._operation=a[_],u(c,b),_==="="?m=b.showlines=!0:(m=c("contours.showlines"),T=c("fillcolor",i((h.line||{}).color||g,.5))),m){var M=T&&s(T)?i(v.fillcolor,1):g;y=c("line.color",M),c("line.width",2),c("line.dash")}c("line.smoothing"),r(c,d,y,p)},"handleConstraintDefaults");function u(f,h){var v;l.indexOf(h.operation)===-1?(f("contours.value",[0,1]),Array.isArray(h.value)?h.value.length>2?h.value=h.value.slice(2):h.length===0?h.value=[0,1]:h.length<2?(v=parseFloat(h.value[0]),h.value=[v,v+1]):h.value=[parseFloat(h.value[0]),parseFloat(h.value[1])]:e(h.value)&&(v=parseFloat(h.value),h.value=[v,v+1])):(f("contours.value",0),e(h.value)||(Array.isArray(h.value)?h.value=parseFloat(h.value[0]):h.value=0))}return t(u,"handleConstraintValueDefaults"),DM}t(fce,"requireConstraint_defaults");var IM,EG;function TLe(){if(EG)return IM;EG=1;var e=Nt.exports,r=Ow(),n=yv,i=fce(),s=b7(),o=_7(),a=Nw(),l=Hw();return IM=t(function(f,h,v,c){function d(m,y){return e.coerce(f,h,l,m,y)}t(d,"coerce");function g(m){return e.coerce2(f,h,l,m)}t(g,"coerce2");var p=r(f,h,d,c);if(!p){h.visible=!1;return}n(f,h,c,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var b=d("contours.type")==="constraint";d("connectgaps",e.isArray1D(h.z)),b?i(f,h,d,c,v):(s(f,h,d,g),o(f,h,d,c)),h.contours&&h.contours.coloring==="heatmap"&&a(d,c)},"supplyDefaults"),IM}t(TLe,"requireDefaults$F");var zM,CG;function ALe(){return CG||(CG=1,zM={attributes:Hw(),supplyDefaults:TLe(),calc:rce(),plot:w7().plot,style:T7(),colorbar:A7(),hoverPoints:uce(),moduleType:"trace",name:"contour",basePlotModule:Ti,categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{description:["The data from which contour lines are computed is set in `z`.","Data in `z` must be a {2D array} of numbers.","Say that `z` has N rows and M columns, then by default,","these N rows correspond to N y coordinates","(set in `y` or auto-generated) and the M columns","correspond to M x coordinates (set in `x` or auto-generated).","By setting `transpose` to *true*, the above behavior is flipped."].join(" ")}}),zM}t(ALe,"requireContour$1");var LG;function SLe(){return LG||(LG=1,function(e){e.exports=ALe()}(PM)),PM.exports}t(SLe,"requireContour");var FM={exports:{}},BM,RG;function cce(){if(RG)return BM;RG=1;var e=Un.hovertemplateAttrs,r=Un.texttemplateAttrs,n=Ps,i=Ni,s=Qi,o=yu.dash,a=cn.extendFlat,l=n.marker,u=n.line,f=l.line;return BM={a:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},b:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},c:{valType:"data_array",editType:"calc",description:["Sets the quantity of component `a` in each data point.","If `a`, `b`, and `c` are all provided, they need not be","normalized, only the relative values matter. If only two","arrays are provided they must be normalized to match","`ternary<i>.sum`."].join(" ")},sum:{valType:"number",dflt:0,min:0,editType:"calc",description:["The number each triplet should sum to,","if only two of `a`, `b`, and `c` are provided.","This overrides `ternary<i>.sum` to normalize this specific","trace, but does not affect the values displayed on the axes.","0 (or missing) means to use ternary<i>.sum"].join(" ")},mode:a({},n.mode,{dflt:"markers"}),text:a({},n.text,{description:["Sets text elements associated with each (a,b,c) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b,c).","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:r({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},n.hovertext,{description:["Sets hover text elements associated with each (a,b,c) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b,c).","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:u.color,width:u.width,dash:o,backoff:u.backoff,shape:a({},u.shape,{values:["linear","spline"]}),smoothing:u.smoothing,editType:"calc"},connectgaps:n.connectgaps,cliponaxis:n.cliponaxis,fill:a({},n.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterternary has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:n.fillcolor,marker:a({symbol:l.symbol,opacity:l.opacity,angle:l.angle,angleref:l.angleref,standoff:l.standoff,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:a({width:f.width,editType:"calc"},s("marker.line")),gradient:l.gradient,editType:"calc"},s("marker")),textfont:n.textfont,textposition:n.textposition,selected:n.selected,unselected:n.unselected,hoverinfo:a({},i.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:n.hoveron,hovertemplate:e()},BM}t(cce,"requireAttributes$E");var OM,PG;function MLe(){if(PG)return OM;PG=1;var e=Nt.exports,r=vd,n=ho,i=Ph,s=mv,o=ox,a=xv,l=dd,u=cce();return OM=t(function(h,v,c,d){function g(M,w){return e.coerce(h,v,u,M,w)}t(g,"coerce");var p=g("a"),b=g("b"),m=g("c"),y;if(p?(y=p.length,b?(y=Math.min(y,b.length),m&&(y=Math.min(y,m.length))):m?y=Math.min(y,m.length):y=0):b&&m&&(y=Math.min(b.length,m.length)),!y){v.visible=!1;return}v._length=y,g("sum"),g("text"),g("hovertext"),v.hoveron!=="fills"&&g("hovertemplate");var T=y<r.PTS_LINESONLY?"lines+markers":"lines";g("mode",T),n.hasLines(v)&&(s(h,v,c,d,g,{backoff:!0}),o(h,v,g),g("connectgaps")),n.hasMarkers(v)&&i(h,v,c,d,g,{gradient:!0}),n.hasText(v)&&(g("texttemplate"),a(h,v,d,g));var _=[];(n.hasMarkers(v)||n.hasText(v))&&(g("cliponaxis"),g("marker.maxdisplayed"),_.push("points")),g("fill"),v.fill!=="none"&&(l(h,v,c,g),n.hasLines(v)||o(h,v,g)),(v.fill==="tonext"||v.fill==="toself")&&_.push("fills"),g("hoveron",_.join("+")||"points"),e.coerceSelectionMarkerOpacity(v,g)},"supplyDefaults"),OM}t(MLe,"requireDefaults$E");var NM,DG;function kLe(){if(DG)return NM;DG=1;var e=nn();return NM=t(function(n,i,s){var o={},a=s[i.subplot]._subplot;return o.aLabel=e.tickText(a.aaxis,n.a,!0).text,o.bLabel=e.tickText(a.baxis,n.b,!0).text,o.cLabel=e.tickText(a.caxis,n.c,!0).text,o},"formatLabels"),NM}t(kLe,"requireFormat_labels$7");var qM,IG;function ELe(){if(IG)return qM;IG=1;var e=xn,r=Dh,n=pd,i=Ih,s=kh.calcMarkerSize,o=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};return qM=t(function(u,f){var h=u._fullLayout[f.subplot],v=h.sum,c=f.sum||v,d={a:f.a,b:f.b,c:f.c},g,p,b,m,y,T;for(g=0;g<o.length;g++)if(b=o[g],!d[b]){for(y=d[a[b][0]],T=d[a[b][1]],m=new Array(y.length),p=0;p<y.length;p++)m[p]=c-y[p]-T[p];d[b]=m}var _=f._length,M=new Array(_),w,x,A,S,k,L;for(g=0;g<_;g++)w=d.a[g],x=d.b[g],A=d.c[g],e(w)&&e(x)&&e(A)?(w=+w,x=+x,A=+A,S=v/(w+x+A),S!==1&&(w*=S,x*=S,A*=S),L=w,k=A-x,M[g]={x:k,y:L,a:w,b:x,c:A}):M[g]={x:!1,y:!1};return s(f,_),r(u,f),n(M,f),i(M,f),M},"calc"),qM}t(ELe,"requireCalc$y");var UM,zG;function CLe(){if(zG)return UM;zG=1;var e=sx;return UM=t(function(n,i,s){var o=i.plotContainer;o.select(".scatterlayer").selectAll("*").remove();for(var a=i.xaxis,l=i.yaxis,u={xaxis:a,yaxis:l,plot:o,layerClipId:i._hasClipOnAxisFalse?i.clipIdRelative:null},f=i.layers.frontplot.select("g.scatterlayer"),h=0;h<s.length;h++){var v=s[h];v.length&&(v[0].trace._xA=a,v[0].trace._yA=l)}e(n,u,s,f)},"plot"),UM}t(CLe,"requirePlot$t");var HM,FG;function LLe(){if(FG)return HM;FG=1;var e=ux;return HM=t(function(n,i,s,o){var a=e(n,i,s,o);if(!a||a[0].index===!1)return;var l=a[0];if(l.index===void 0){var u=1-l.y0/n.ya._length,f=n.xa._length,h=f*u/2,v=f-h;return l.x0=Math.max(Math.min(l.x0,v),h),l.x1=Math.max(Math.min(l.x1,v),h),a}var c=l.cd[l.index],d=l.trace,g=l.subplot;l.a=c.a,l.b=c.b,l.c=c.c,l.xLabelVal=void 0,l.yLabelVal=void 0;var p={};p[d.subplot]={_subplot:g};var b=d._module.formatLabels(c,d,p);l.aLabel=b.aLabel,l.bLabel=b.bLabel,l.cLabel=b.cLabel;var m=c.hi||d.hoverinfo,y=[];function T(M,w){y.push(M._hovertitle+": "+w)}if(t(T,"textPart"),!d.hovertemplate){var _=m.split("+");_.indexOf("all")!==-1&&(_=["a","b","c"]),_.indexOf("a")!==-1&&T(g.aaxis,l.aLabel),_.indexOf("b")!==-1&&T(g.baxis,l.bLabel),_.indexOf("c")!==-1&&T(g.caxis,l.cLabel)}return l.extraText=y.join("<br>"),l.hovertemplate=d.hovertemplate,a},"hoverPoints"),HM}t(LLe,"requireHover$g");var $M,BG;function RLe(){return BG||(BG=1,$M=t(function(r,n,i,s,o){if(n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),s[o]){var a=s[o];r.a=a.a,r.b=a.b,r.c=a.c}else r.a=n.a,r.b=n.b,r.c=n.c;return r},"eventData")),$M}t(RLe,"requireEvent_data$9");var Lc={},VM,OG;function PLe(){if(OG)return VM;OG=1;var e=Va.exports,r=rl.exports,n=Na,i=Nt.exports,s=i.strTranslate,o=i._,a=$a.exports,l=bn.exports,u=hd(),f=cn.extendFlat,h=so.exports,v=nn(),c=xu.exports,d=Ko,g=Rh,p=g.freeMode,b=g.rectMode,m=Ey,y=Qs.prepSelect,T=Qs.selectOnClick,_=Qs.clearOutline,M=Qs.clearSelectionsCache,w=al;function x(O,q){this.id=O.id,this.graphDiv=O.graphDiv,this.init(q),this.makeFramework(q),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}t(x,"Ternary"),VM=x;var A=x.prototype;A.init=function(O){this.container=O._ternarylayer,this.defs=O._defs,this.layoutId=O._uid,this.traceHash={},this.layers={}},A.plot=function(O,q){var H=this,j=q[H.id],X=q._size;H._hasClipOnAxisFalse=!1;for(var G=0;G<O.length;G++){var $=O[G][0].trace;if($.cliponaxis===!1){H._hasClipOnAxisFalse=!0;break}}H.updateLayers(j),H.adjustLayout(j,X),h.generalUpdatePerTraceModule(H.graphDiv,H,O,j),H.layers.plotbg.select("path").call(a.fill,j.bgcolor)},A.makeFramework=function(O){var q=this,H=q.graphDiv,j=O[q.id],X=q.clipId="clip"+q.layoutId+q.id,G=q.clipIdRelative="clip-relative"+q.layoutId+q.id;q.clipDef=i.ensureSingleById(O._clips,"clipPath",X,function($){$.append("path").attr("d","M0,0Z")}),q.clipDefRelative=i.ensureSingleById(O._clips,"clipPath",G,function($){$.append("path").attr("d","M0,0Z")}),q.plotContainer=i.ensureSingle(q.container,"g",q.id),q.updateLayers(j),l.setClipUrl(q.layers.backplot,X,H),l.setClipUrl(q.layers.grids,X,H)},A.updateLayers=function(O){var q=this,H=q.layers,j=["draglayer","plotbg","backplot","grids"];O.aaxis.layer==="below traces"&&j.push("aaxis","aline"),O.baxis.layer==="below traces"&&j.push("baxis","bline"),O.caxis.layer==="below traces"&&j.push("caxis","cline"),j.push("frontplot"),O.aaxis.layer==="above traces"&&j.push("aaxis","aline"),O.baxis.layer==="above traces"&&j.push("baxis","bline"),O.caxis.layer==="above traces"&&j.push("caxis","cline");var X=q.plotContainer.selectAll("g.toplevel").data(j,String),G=["agrid","bgrid","cgrid"];X.enter().append("g").attr("class",function($){return"toplevel "+$}).each(function($){var te=e.select(this);H[$]=te,$==="frontplot"?te.append("g").classed("scatterlayer",!0):$==="backplot"?te.append("g").classed("maplayer",!0):$==="plotbg"?te.append("path").attr("d","M0,0Z"):$==="aline"||$==="bline"||$==="cline"?te.append("path"):$==="grids"&&G.forEach(function(ee){H[ee]=te.append("g").classed("grid "+ee,!0)})}),X.order()};var S=Math.sqrt(4/3);A.adjustLayout=function(O,q){var H=this,j=O.domain,X=(j.x[0]+j.x[1])/2,G=(j.y[0]+j.y[1])/2,$=j.x[1]-j.x[0],te=j.y[1]-j.y[0],ee=$*q.w,ie=te*q.h,se=O.sum,W=O.aaxis.min,ne=O.baxis.min,he=O.caxis.min,re,ae,fe,ce,xe,Te;ee>S*ie?(ce=ie,fe=ce*S):(fe=ee,ce=fe/S),xe=$*fe/ee,Te=te*ce/ie,re=q.l+q.w*X-fe/2,ae=q.t+q.h*(1-G)-ce/2,H.x0=re,H.y0=ae,H.w=fe,H.h=ce,H.sum=se,H.xaxis={type:"linear",range:[W+2*he-se,se-W-2*ne],domain:[X-xe/2,X+xe/2],_id:"x"},u(H.xaxis,H.graphDiv._fullLayout),H.xaxis.setScale(),H.xaxis.isPtWithinRange=function(Je){return Je.a>=H.aaxis.range[0]&&Je.a<=H.aaxis.range[1]&&Je.b>=H.baxis.range[1]&&Je.b<=H.baxis.range[0]&&Je.c>=H.caxis.range[1]&&Je.c<=H.caxis.range[0]},H.yaxis={type:"linear",range:[W,se-ne-he],domain:[G-Te/2,G+Te/2],_id:"y"},u(H.yaxis,H.graphDiv._fullLayout),H.yaxis.setScale(),H.yaxis.isPtWithinRange=function(){return!0};var me=H.yaxis.domain[0],pe=H.aaxis=f({},O.aaxis,{range:[W,se-ne-he],side:"left",tickangle:(+O.aaxis.tickangle||0)-30,domain:[me,me+Te*S],anchor:"free",position:0,_id:"y",_length:fe});u(pe,H.graphDiv._fullLayout),pe.setScale();var oe=H.baxis=f({},O.baxis,{range:[se-W-he,ne],side:"bottom",domain:H.xaxis.domain,anchor:"free",position:0,_id:"x",_length:fe});u(oe,H.graphDiv._fullLayout),oe.setScale();var de=H.caxis=f({},O.caxis,{range:[se-W-ne,he],side:"right",tickangle:(+O.caxis.tickangle||0)+30,domain:[me,me+Te*S],anchor:"free",position:0,_id:"y",_length:fe});u(de,H.graphDiv._fullLayout),de.setScale();var ye="M"+re+","+(ae+ce)+"h"+fe+"l-"+fe/2+",-"+ce+"Z";H.clipDef.select("path").attr("d",ye),H.layers.plotbg.select("path").attr("d",ye);var we="M0,"+ce+"h"+fe+"l-"+fe/2+",-"+ce+"Z";H.clipDefRelative.select("path").attr("d",we);var Ee=s(re,ae);H.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ee),H.clipDefRelative.select("path").attr("transform",null);var De=s(re-oe._offset,ae+ce);H.layers.baxis.attr("transform",De),H.layers.bgrid.attr("transform",De);var Fe=s(re+fe/2,ae)+"rotate(30)"+s(0,-pe._offset);H.layers.aaxis.attr("transform",Fe),H.layers.agrid.attr("transform",Fe);var qe=s(re+fe/2,ae)+"rotate(-30)"+s(0,-de._offset);H.layers.caxis.attr("transform",qe),H.layers.cgrid.attr("transform",qe),H.drawAxes(!0),H.layers.aline.select("path").attr("d",pe.showline?"M"+re+","+(ae+ce)+"l"+fe/2+",-"+ce:"M0,0").call(a.stroke,pe.linecolor||"#000").style("stroke-width",(pe.linewidth||0)+"px"),H.layers.bline.select("path").attr("d",oe.showline?"M"+re+","+(ae+ce)+"h"+fe:"M0,0").call(a.stroke,oe.linecolor||"#000").style("stroke-width",(oe.linewidth||0)+"px"),H.layers.cline.select("path").attr("d",de.showline?"M"+(re+fe/2)+","+ae+"l"+fe/2+","+ce:"M0,0").call(a.stroke,de.linecolor||"#000").style("stroke-width",(de.linewidth||0)+"px"),H.graphDiv._context.staticPlot||H.initInteractions(),l.setClipUrl(H.layers.frontplot,H._hasClipOnAxisFalse?null:H.clipId,H.graphDiv)},A.drawAxes=function(O){var q=this,H=q.graphDiv,j=q.id.substr(7)+"title",X=q.layers,G=q.aaxis,$=q.baxis,te=q.caxis;if(q.drawAx(G),q.drawAx($),q.drawAx(te),O){var ee=Math.max(G.showticklabels?G.tickfont.size/2:0,(te.showticklabels?te.tickfont.size*.75:0)+(te.ticks==="outside"?te.ticklen*.87:0)),ie=($.showticklabels?$.tickfont.size:0)+($.ticks==="outside"?$.ticklen:0)+3;X["a-title"]=m.draw(H,"a"+j,{propContainer:G,propName:q.id+".aaxis.title",placeholder:o(H,"Click to enter Component A title"),attributes:{x:q.x0+q.w/2,y:q.y0-G.title.font.size/3-ee,"text-anchor":"middle"}}),X["b-title"]=m.draw(H,"b"+j,{propContainer:$,propName:q.id+".baxis.title",placeholder:o(H,"Click to enter Component B title"),attributes:{x:q.x0-ie,y:q.y0+q.h+$.title.font.size*.83+ie,"text-anchor":"middle"}}),X["c-title"]=m.draw(H,"c"+j,{propContainer:te,propName:q.id+".caxis.title",placeholder:o(H,"Click to enter Component C title"),attributes:{x:q.x0+q.w+ie,y:q.y0+q.h+te.title.font.size*.83+ie,"text-anchor":"middle"}})}},A.drawAx=function(O){var q=this,H=q.graphDiv,j=O._name,X=j.charAt(0),G=O._id,$=q.layers[j],te=30,ee=X+"tickLayout",ie=k(O);q[ee]!==ie&&($.selectAll("."+G+"tick").remove(),q[ee]=ie),O.setScale();var se=v.calcTicks(O),W=v.clipEnds(O,se),ne=v.makeTransTickFn(O),he=v.getTickSigns(O)[2],re=i.deg2rad(te),ae=he*(O.linewidth||1)/2,fe=he*O.ticklen,ce=q.w,xe=q.h,Te=X==="b"?"M0,"+ae+"l"+Math.sin(re)*fe+","+Math.cos(re)*fe:"M"+ae+",0l"+Math.cos(re)*fe+","+-Math.sin(re)*fe,me={a:"M0,0l"+xe+",-"+ce/2,b:"M0,0l-"+ce/2+",-"+xe,c:"M0,0l-"+xe+","+ce/2}[X];v.drawTicks(H,O,{vals:O.ticks==="inside"?W:se,layer:$,path:Te,transFn:ne,crisp:!1}),v.drawGrid(H,O,{vals:W,layer:q.layers[X+"grid"],path:me,transFn:ne,crisp:!1}),v.drawLabels(H,O,{vals:se,layer:$,transFn:ne,labelFns:v.makeLabelFns(O,0,te)})};function k(O){return O.ticks+String(O.ticklen)+String(O.showticklabels)}t(k,"strTickLayout");var L=w.MINZOOM/2+.87,P="m-0.87,.5h"+L+"v3h-"+(L+5.2)+"l"+(L/2+2.6)+",-"+(L*.87+4.5)+"l2.6,1.5l-"+L/2+","+L*.87+"Z",D="m0.87,.5h-"+L+"v3h"+(L+5.2)+"l-"+(L/2+2.6)+",-"+(L*.87+4.5)+"l-2.6,1.5l"+L/2+","+L*.87+"Z",B="m0,1l"+L/2+","+L*.87+"l2.6,-1.5l-"+(L/2+2.6)+",-"+(L*.87+4.5)+"l-"+(L/2+2.6)+","+(L*.87+4.5)+"l2.6,1.5l"+L/2+",-"+L*.87+"Z",z="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;A.clearOutline=function(){M(this.dragOptions),_(this.dragOptions.gd)},A.initInteractions=function(){var O=this,q=O.layers.plotbg.select("path").node(),H=O.graphDiv,j=H._fullLayout._zoomlayer,X,G;this.dragOptions={element:q,gd:H,plotinfo:{id:O.id,domain:H._fullLayout[O.id].domain,xaxis:O.xaxis,yaxis:O.yaxis},subplot:O.id,prepFn:function(De,Fe,qe){O.dragOptions.xaxes=[O.xaxis],O.dragOptions.yaxes=[O.yaxis],X=H._fullLayout._invScaleX,G=H._fullLayout._invScaleY;var Je=O.dragOptions.dragmode=H._fullLayout.dragmode;p(Je)?O.dragOptions.minDrag=1:O.dragOptions.minDrag=void 0,Je==="zoom"?(O.dragOptions.moveFn=oe,O.dragOptions.clickFn=ce,O.dragOptions.doneFn=de,xe(De,Fe,qe)):Je==="pan"?(O.dragOptions.moveFn=we,O.dragOptions.clickFn=ce,O.dragOptions.doneFn=Ee,ye(),O.clearOutline(H)):(b(Je)||p(Je))&&y(De,Fe,qe,O.dragOptions,Je)}};var $,te,ee,ie,se,W,ne,he,re,ae;function fe(De){var Fe={};return Fe[O.id+".aaxis.min"]=De.a,Fe[O.id+".baxis.min"]=De.b,Fe[O.id+".caxis.min"]=De.c,Fe}t(fe,"makeUpdate");function ce(De,Fe){var qe=H._fullLayout.clickmode;F(H),De===2&&(H.emit("plotly_doubleclick",null),n.call("_guiRelayout",H,fe({a:0,b:0,c:0}))),qe.indexOf("select")>-1&&De===1&&T(Fe,H,[O.xaxis],[O.yaxis],O.id,O.dragOptions),qe.indexOf("event")>-1&&d.click(H,Fe,O.id)}t(ce,"clickZoomPan");function xe(De,Fe,qe){var Je=q.getBoundingClientRect();$=Fe-Je.left,te=qe-Je.top,H._fullLayout._calcInverseTransform(H);var Ge=H._fullLayout._invTransform,et=i.apply3DTransform(Ge)($,te);$=et[0],te=et[1],ee={a:O.aaxis.range[0],b:O.baxis.range[1],c:O.caxis.range[1]},se=ee,ie=O.aaxis.range[1]-ee.a,W=r(O.graphDiv._fullLayout[O.id].bgcolor).getLuminance(),ne="M0,"+O.h+"L"+O.w/2+", 0L"+O.w+","+O.h+"Z",he=!1,re=j.append("path").attr("class","zoombox").attr("transform",s(O.x0,O.y0)).style({fill:W>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ne),ae=j.append("path").attr("class","zoombox-corners").attr("transform",s(O.x0,O.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),O.clearOutline(H)}t(xe,"zoomPrep");function Te(De,Fe){return 1-Fe/O.h}t(Te,"getAFrac");function me(De,Fe){return 1-(De+(O.h-Fe)/Math.sqrt(3))/O.w}t(me,"getBFrac");function pe(De,Fe){return(De-(O.h-Fe)/Math.sqrt(3))/O.w}t(pe,"getCFrac");function oe(De,Fe){var qe=$+De*X,Je=te+Fe*G,Ge=Math.max(0,Math.min(1,Te($,te),Te(qe,Je))),et=Math.max(0,Math.min(1,me($,te),me(qe,Je))),Ue=Math.max(0,Math.min(1,pe($,te),pe(qe,Je))),Ye=(Ge/2+Ue)*O.w,$e=(1-Ge/2-et)*O.w,Ct=(Ye+$e)/2,It=$e-Ye,Vt=(1-Ge)*O.h,$t=Vt-It/S;It<w.MINZOOM?(se=ee,re.attr("d",ne),ae.attr("d","M0,0Z")):(se={a:ee.a+Ge*ie,b:ee.b+et*ie,c:ee.c+Ue*ie},re.attr("d",ne+"M"+Ye+","+Vt+"H"+$e+"L"+Ct+","+$t+"L"+Ye+","+Vt+"Z"),ae.attr("d","M"+$+","+te+z+"M"+Ye+","+Vt+P+"M"+$e+","+Vt+D+"M"+Ct+","+$t+B)),he||(re.transition().style("fill",W>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ae.transition().style("opacity",1).duration(200),he=!0),H.emit("plotly_relayouting",fe(se))}t(oe,"zoomMove");function de(){F(H),se!==ee&&(n.call("_guiRelayout",H,fe(se)),R&&H.data&&H._context.showTips&&(i.notifier(o(H,"Double-click to zoom back out"),"long"),R=!1))}t(de,"zoomDone");function ye(){ee={a:O.aaxis.range[0],b:O.baxis.range[1],c:O.caxis.range[1]},se=ee}t(ye,"panPrep");function we(De,Fe){var qe=De/O.xaxis._m,Je=Fe/O.yaxis._m;se={a:ee.a-Je,b:ee.b+(qe+Je)/2,c:ee.c-(qe-Je)/2};var Ge=[se.a,se.b,se.c].sort(i.sorterAsc),et={a:Ge.indexOf(se.a),b:Ge.indexOf(se.b),c:Ge.indexOf(se.c)};Ge[0]<0&&(Ge[1]+Ge[0]/2<0?(Ge[2]+=Ge[0]+Ge[1],Ge[0]=Ge[1]=0):(Ge[2]+=Ge[0]/2,Ge[1]+=Ge[0]/2,Ge[0]=0),se={a:Ge[et.a],b:Ge[et.b],c:Ge[et.c]},Fe=(ee.a-se.a)*O.yaxis._m,De=(ee.c-se.c-ee.b+se.b)*O.xaxis._m);var Ue=s(O.x0+De,O.y0+Fe);O.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ue);var Ye=s(-De,-Fe);O.clipDefRelative.select("path").attr("transform",Ye),O.aaxis.range=[se.a,O.sum-se.b-se.c],O.baxis.range=[O.sum-se.a-se.c,se.b],O.caxis.range=[O.sum-se.a-se.b,se.c],O.drawAxes(!1),O._hasClipOnAxisFalse&&O.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,O),H.emit("plotly_relayouting",fe(se))}t(we,"plotDrag");function Ee(){n.call("_guiRelayout",H,fe(se))}t(Ee,"dragDone"),q.onmousemove=function(De){d.hover(H,De,O.id),H._fullLayout._lasthover=q,H._fullLayout._hoversubplot=O.id},q.onmouseout=function(De){H._dragging||c.unhover(H,De)},c.init(this.dragOptions)};function F(O){e.select(O).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}return t(F,"removeZoombox"),VM}t(PLe,"requireTernary$1");var GM={exports:{}},NG;function hce(){if(NG)return GM.exports;NG=1;var e=Fo,r=vo.attributes,n=Jl,i=_o.overrideAll,s=cn.extendFlat,o={title:{text:n.title.text,font:n.title.font},color:n.color,tickmode:n.tickmode,nticks:s({},n.nticks,{dflt:6,min:1}),tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:s({},n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:s({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth,griddash:n.griddash,layer:n.layer,min:{valType:"number",dflt:0,min:0,description:["The minimum value visible on this axis.","The maximum is determined by the sum minus the minimum","values of the other two axes. The full view corresponds to","all the minima set to zero."].join(" ")},_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}},a=GM.exports=i({domain:r({name:"ternary"}),bgcolor:{valType:"color",dflt:e.background,description:"Set the background color of the subplot"},sum:{valType:"number",dflt:1,min:0,description:["The number each triplet should sum to,","and the maximum range of each axis"].join(" ")},aaxis:o,baxis:o,caxis:o},"plot","from-root");return a.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `min` and `title`,","if not overridden in the individual axes.","Defaults to `layout.uirevision`."].join(" ")},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `min`,","and `title` if in `editable: true` configuration.","Defaults to `ternary<N>.uirevision`."].join(" ")},GM.exports}t(hce,"requireLayout_attributes$e");var jM,qG;function Fy(){if(qG)return jM;qG=1;var e=Nt.exports,r=ei,n=vo.defaults;return jM=t(function(s,o,a,l){var u=l.type,f=l.attributes,h=l.handleDefaults,v=l.partition||"x",c=o._subplots[u],d=c.length,g=d&&c[0].replace(/\d+$/,""),p,b;function m(M,w){return e.coerce(p,b,f,M,w)}t(m,"coerce");for(var y=0;y<d;y++){var T=c[y];s[T]?p=s[T]:p=s[T]={},b=r.newContainer(o,T,g),l.noUirevision||m("uirevision",o.uirevision);var _={};_[v]=[y/d,(y+1)/d],n(b,o,m,_),l.id=T,h(p,b,m,l)}},"handleSubplotDefaults"),jM}t(Fy,"requireSubplot_defaults");var YM,UG;function DLe(){if(UG)return YM;UG=1;var e=$a.exports,r=ei,n=Nt.exports,i=Fy(),s=L0,o=R0,a=J1,l=ky,u=Lw,f=hce(),h=["aaxis","baxis","caxis"];YM=t(function(g,p,b){i(g,p,b,{type:"ternary",attributes:f,handleDefaults:v,font:p.font,paper_bgcolor:p.paper_bgcolor})},"supplyLayoutDefaults");function v(d,g,p,b){var m=p("bgcolor"),y=p("sum");b.bgColor=e.combine(m,b.paper_bgcolor);for(var T,_,M,w=0;w<h.length;w++)T=h[w],_=d[T]||{},M=r.newContainer(g,T),M._name=T,c(_,M,b,g);var x=g.aaxis,A=g.baxis,S=g.caxis;x.min+A.min+S.min>=y&&(x.min=0,A.min=0,S.min=0,d.aaxis&&delete d.aaxis.min,d.baxis&&delete d.baxis.min,d.caxis&&delete d.caxis.min)}t(v,"handleTernaryDefaults");function c(d,g,p,b){var m=f[g._name];function y(k,L){return n.coerce(d,g,m,k,L)}t(y,"coerce"),y("uirevision",b.uirevision),g.type="linear";var T=y("color"),_=T!==m.color.dflt?T:p.font.color,M=g._name,w=M.charAt(0).toUpperCase(),x="Component "+w,A=y("title.text",x);g._hovertitle=A===x?A:w,n.coerceFont(y,"title.font",{family:p.font.family,size:n.bigFont(p.font.size),color:_}),y("min"),l(d,g,y,"linear"),o(d,g,y),s(d,g,y,"linear"),a(d,g,y,{outerTicks:!0});var S=y("showticklabels");S&&(n.coerceFont(y,"tickfont",{family:p.font.family,size:p.font.size,color:_}),y("tickangle"),y("tickformat")),u(d,g,y,{dfltColor:T,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:m}),y("hoverformat"),y("layer")}return t(c,"handleAxisDefaults"),YM}t(DLe,"requireLayout_defaults$d");var HG;function ILe(){if(HG)return Lc;HG=1;var e=PLe(),r=Ns.getSubplotCalcData,n=Nt.exports.counterRegex,i="ternary";Lc.name=i;var s=Lc.attr="subplot";Lc.idRoot=i,Lc.idRegex=Lc.attrRegex=n(i);var o=Lc.attributes={};return o[s]={valType:"subplotid",dflt:"ternary",editType:"calc",description:["Sets a reference between this trace's data coordinates and","a ternary subplot.","If *ternary* (the default value), the data refer to `layout.ternary`.","If *ternary2*, the data refer to `layout.ternary2`, and so on."].join(" ")},Lc.layoutAttributes=hce(),Lc.supplyLayoutDefaults=DLe(),Lc.plot=t(function(l){for(var u=l._fullLayout,f=l.calcdata,h=u._subplots[i],v=0;v<h.length;v++){var c=h[v],d=r(f,i,c),g=u[c]._subplot;g||(g=new e({id:c,graphDiv:l,container:u._ternarylayer.node()},u),u[c]._subplot=g),g.plot(d,u,l._promises)}},"plot"),Lc.clean=function(a,l,u,f){for(var h=f._subplots[i]||[],v=0;v<h.length;v++){var c=h[v],d=f[c]._subplot;!l[c]&&!!d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}},Lc}t(ILe,"requireTernary");var WM,$G;function zLe(){return $G||($G=1,WM={attributes:cce(),supplyDefaults:MLe(),colorbar:_u,formatLabels:kLe(),calc:ELe(),plot:CLe(),style:kf.style,styleOnSelect:kf.styleOnSelect,hoverPoints:LLe(),selectPoints:fx,eventData:RLe(),moduleType:"trace",name:"scatterternary",basePlotModule:ILe(),categories:["ternary","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_ternary",description:["Provides similar functionality to the *scatter* type but on a ternary phase diagram.","The data is provided by at least two arrays out of `a`, `b`, `c` triplets."].join(" ")}}),WM}t(zLe,"requireScatterternary$1");var VG;function FLe(){return VG||(VG=1,function(e){e.exports=zLe()}(FM)),FM.exports}t(FLe,"requireScatterternary");var XM={exports:{}},ZM,GG;function vce(){if(GG)return ZM;GG=1;var e=Fw(),r=cn.extendFlat,n=Vo.axisHoverFormat;return ZM={y:e.y,x:e.x,x0:e.x0,y0:e.y0,xhoverformat:n("x"),yhoverformat:n("y"),name:r({},e.name,{description:["Sets the trace name.","The trace name appear as the legend item and on hover.","For violin traces, the name will also be used for the position","coordinate, if `x` and `x0` (`y` and `y0` if horizontal) are","missing and the position axis is categorical.","Note that the trace name is also used as a default value","for attribute `scalegroup` (please see its description for details)."].join(" ")}),orientation:r({},e.orientation,{description:["Sets the orientation of the violin(s).","If *v* (*h*), the distribution is visualized along","the vertical (horizontal)."].join(" ")}),bandwidth:{valType:"number",min:0,editType:"calc",description:["Sets the bandwidth used to compute the kernel density estimate.","By default, the bandwidth is determined by Silverman's rule of thumb."].join(" ")},scalegroup:{valType:"string",dflt:"",editType:"calc",description:["If there are multiple violins that should be sized according to","to some metric (see `scalemode`), link them by providing a non-empty group id here","shared by every trace in the same group.","If a violin's `width` is undefined, `scalegroup` will default to the trace's name.","In this case, violins with the same names will be linked together"].join(" ")},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc",description:["Sets the metric by which the width of each violin is determined.","*width* means each violin has the same (max) width","*count* means the violins are scaled by the number of sample points making","up each violin."].join(" ")},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc",description:["Sets the method by which the span in data space where the density function will be computed.","*soft* means the span goes from the sample's minimum value minus two bandwidths","to the sample's maximum value plus two bandwidths.","*hard* means the span goes from the sample's minimum to its maximum value.","For custom span settings, use mode *manual* and fill in the `span` attribute."].join(" ")},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc",description:["Sets the span in data space for which the density function will be computed.","Has an effect only when `spanmode` is set to *manual*."].join(" ")},line:{color:{valType:"color",editType:"style",description:"Sets the color of line bounding the violin(s)."},width:{valType:"number",min:0,dflt:2,editType:"style",description:"Sets the width (in px) of line bounding the violin(s)."},editType:"plot"},fillcolor:e.fillcolor,points:r({},e.boxpoints,{description:["If *outliers*, only the sample points lying outside the whiskers","are shown","If *suspectedoutliers*, the outlier points are shown and","points either less than 4*Q1-3*Q3 or greater than 4*Q3-3*Q1","are highlighted (see `outliercolor`)","If *all*, all sample points are shown","If *false*, only the violins are shown with no sample points.","Defaults to *suspectedoutliers* when `marker.outliercolor` or","`marker.line.outliercolor` is set,","otherwise defaults to *outliers*."].join(" ")}),jitter:r({},e.jitter,{description:["Sets the amount of jitter in the sample points drawn.","If *0*, the sample points align along the distribution axis.","If *1*, the sample points are drawn in a random jitter of width","equal to the width of the violins."].join(" ")}),pointpos:r({},e.pointpos,{description:["Sets the position of the sample points in relation to the violins.","If *0*, the sample points are places over the center of the violins.","Positive (negative) values correspond to positions to the","right (left) for vertical violins and above (below) for horizontal violins."].join(" ")}),width:r({},e.width,{description:["Sets the width of the violin in data coordinates.","If *0* (default value) the width is automatically selected based on the positions","of other violin traces in the same subplot."].join(" ")}),marker:e.marker,text:e.text,hovertext:e.hovertext,hovertemplate:e.hovertemplate,quartilemethod:e.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines if an miniature box plot is drawn inside the violins. "].join(" ")},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot",description:["Sets the width of the inner box plots relative to","the violins' width.","For example, with 1, the inner box plots are as wide as the violins."].join(" ")},fillcolor:{valType:"color",editType:"style",description:"Sets the inner box plot fill color."},line:{color:{valType:"color",editType:"style",description:"Sets the inner box plot bounding line color."},width:{valType:"number",min:0,editType:"style",description:"Sets the inner box plot bounding line width."},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines if a line corresponding to the sample's mean is shown","inside the violins.","If `box.visible` is turned on, the mean line is drawn inside the inner box.","Otherwise, the mean line is drawn from one side of the violin to other."].join(" ")},color:{valType:"color",editType:"style",description:"Sets the mean line color."},width:{valType:"number",min:0,editType:"style",description:"Sets the mean line width."},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc",description:["Determines on which side of the position value the density function making up","one half of a violin is plotted.","Useful when comparing two violin traces under *overlay* mode, where one trace","has `side` set to *positive* and the other to *negative*."].join(" ")},offsetgroup:e.offsetgroup,alignmentgroup:e.alignmentgroup,selected:e.selected,unselected:e.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style",description:["Do the hover effects highlight individual violins","or sample points or the kernel density estimate or any combination of them?"].join(" ")}},ZM}t(vce,"requireAttributes$D");var KM,jG;function dce(){if(jG)return KM;jG=1;var e=Bw(),r=Nt.exports.extendFlat;return KM={violinmode:r({},e.boxmode,{description:["Determines how violins at the same location coordinate","are displayed on the graph.","If *group*, the violins are plotted next to one another","centered around the shared location.","If *overlay*, the violins are plotted over one another,","you might need to set *opacity* to see them multiple violins.","Has no effect on traces that have *width* set."].join(" ")}),violingap:r({},e.boxgap,{description:["Sets the gap (in plot fraction) between violins of","adjacent location coordinates.","Has no effect on traces that have *width* set."].join(" ")}),violingroupgap:r({},e.boxgroupgap,{description:["Sets the gap (in plot fraction) between violins of","the same location coordinate.","Has no effect on traces that have *width* set."].join(" ")})},KM}t(dce,"requireLayout_attributes$d");var JM,YG;function BLe(){if(YG)return JM;YG=1;var e=Nt.exports,r=$a.exports,n=e2(),i=vce();return JM=t(function(o,a,l,u){function f(S,k){return e.coerce(o,a,i,S,k)}t(f,"coerce");function h(S,k){return e.coerce2(o,a,i,S,k)}if(t(h,"coerce2"),n.handleSampleDefaults(o,a,f,u),a.visible!==!1){f("bandwidth"),f("side");var v=f("width");v||(f("scalegroup",a.name),f("scalemode"));var c=f("span"),d;Array.isArray(c)&&(d="manual"),f("spanmode",d);var g=f("line.color",(o.marker||{}).color||l),p=f("line.width"),b=f("fillcolor",r.addOpacity(a.line.color,.5));n.handlePointsDefaults(o,a,f,{prefix:""});var m=h("box.width"),y=h("box.fillcolor",b),T=h("box.line.color",g),_=h("box.line.width",p),M=f("box.visible",Boolean(m||y||T||_));M||(a.box={visible:!1});var w=h("meanline.color",g),x=h("meanline.width",p),A=f("meanline.visible",Boolean(w||x));A||(a.meanline={visible:!1}),f("quartilemethod")}},"supplyDefaults"),JM}t(BLe,"requireDefaults$D");var QM,WG;function OLe(){if(WG)return QM;WG=1;var e=Nt.exports,r=dce(),n=s7();return QM=t(function(s,o,a){function l(u,f){return e.coerce(s,o,r,u,f)}t(l,"coerce"),n._supply(s,o,a,l,"violin")},"supplyLayoutDefaults"),QM}t(OLe,"requireLayout_defaults$c");var ek={},XG;function S7(){return XG||(XG=1,function(e){var r=Nt.exports,n={gaussian:function(i){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*i*i)}};e.makeKDE=function(i,s,o){var a=o.length,l=n.gaussian,u=i.bandwidth,f=1/(a*u);return function(h){for(var v=0,c=0;c<a;c++)v+=l((h-o[c])/u);return f*v}},e.getPositionOnKdePath=function(i,s,o){var a,l;s.orientation==="h"?(a="y",l="x"):(a="x",l="y");var u=r.findPointOnPath(i.path,o,l,{pathLength:i.pathLength}),f=i.posCenterPx,h=u[a],v=s.side==="both"?2*f-h:f;return[h,v]},e.getKdeValue=function(i,s,o){var a=i.pts.map(e.extractVal),l=e.makeKDE(i,s,a);return l(o)/i.posDensityScale},e.extractVal=function(i){return i.v}}(ek)),ek}t(S7,"requireHelpers$8");var tk,ZG;function NLe(){if(ZG)return tk;ZG=1;var e=Nt.exports,r=nn(),n=qfe(),i=S7(),s=jn.BADNUM;tk=t(function(f,h){var v=n(f,h);if(v[0].t.empty)return v;for(var c=f._fullLayout,d=r.getFromId(f,h[h.orientation==="h"?"xaxis":"yaxis"]),g=1/0,p=-1/0,b=0,m=0,y=0;y<v.length;y++){var T=v[y],_=T.pts.map(i.extractVal),M=T.bandwidth=a(h,T,_),w=T.span=l(h,T,d,M);if(T.min===T.max&&M===0)w=T.span=[T.min,T.max],T.density=[{v:1,t:w[0]}],T.bandwidth=M,b=Math.max(b,1);else{var x=w[1]-w[0],A=Math.ceil(x/(M/3)),S=x/A;if(!isFinite(S)||!isFinite(A))return e.error("Something went wrong with computing the violin span"),v[0].t.empty=!0,v;var k=i.makeKDE(T,h,_);T.density=new Array(A);for(var L=0,P=w[0];P<w[1]+S/2;L++,P+=S){var D=k(P);T.density[L]={v:D,t:P},b=Math.max(b,D)}}m=Math.max(m,_.length),g=Math.min(g,w[0]),p=Math.max(p,w[1])}var B=r.findExtremes(d,[g,p],{padded:!0});if(h._extremes[d._id]=B,h.width)v[0].t.maxKDE=b;else{var z=c._violinScaleGroupStats,R=h.scalegroup,F=z[R];F?(F.maxKDE=Math.max(F.maxKDE,b),F.maxCount=Math.max(F.maxCount,m)):z[R]={maxKDE:b,maxCount:m}}return v[0].t.labels.kde=e._(f,"kde:"),v},"calc");function o(u,f,h){var v=Math.min(f,h/1.349);return 1.059*v*Math.pow(u,-.2)}t(o,"silvermanRule");function a(u,f,h){var v=f.max-f.min;if(!v)return u.bandwidth?u.bandwidth:0;if(u.bandwidth)return Math.max(u.bandwidth,v/1e4);var c=h.length,d=e.stdev(h,c-1,f.mean);return Math.max(o(c,d,f.q3-f.q1),v/100)}t(a,"calcBandwidth");function l(u,f,h,v){var c=u.spanmode,d=u.span||[],g=[f.min,f.max],p=[f.min-2*v,f.max+2*v],b;function m(T){var _=d[T],M=h.type==="multicategory"?h.r2c(_):h.d2c(_,0,u[f.valLetter+"calendar"]);return M===s?p[T]:M}t(m,"calcSpanItem"),c==="soft"?b=p:c==="hard"?b=g:b=[m(0),m(1)];var y={type:"linear",range:b};return r.setConvert(y),y.cleanRange(),b}return t(l,"calcSpan"),tk}t(NLe,"requireCalc$x");var rk,KG;function qLe(){if(KG)return rk;KG=1;var e=l7().setPositionOffset,r=["v","h"];return rk=t(function(i,s){for(var o=i.calcdata,a=s.xaxis,l=s.yaxis,u=0;u<r.length;u++){for(var f=r[u],h=f==="h"?l:a,v=[],c=0;c<o.length;c++){var d=o[c],g=d[0].t,p=d[0].trace;p.visible===!0&&p.type==="violin"&&!g.empty&&p.orientation===f&&p.xaxis===a._id&&p.yaxis===l._id&&v.push(c)}e("violin",i,v,h)}},"crossTraceCalc"),rk}t(qLe,"requireCross_trace_calc$2");var ak,JG;function ULe(){if(JG)return ak;JG=1;var e=Va.exports,r=Nt.exports,n=bn.exports,i=u7(),s=Hue,o=S7();return ak=t(function(l,u,f,h){var v=l._fullLayout,c=u.xaxis,d=u.yaxis;function g(p,b){var m=s(p,{xaxis:c,yaxis:d,trace:b,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return n.smoothopen(m[0],1)}t(g,"makePath"),r.makeTraceGroups(h,f,"trace violins").each(function(p){var b=e.select(this),m=p[0],y=m.t,T=m.trace;if(T.visible!==!0||y.empty){b.remove();return}var _=y.bPos,M=y.bdPos,w=u[y.valLetter+"axis"],x=u[y.posLetter+"axis"],A=T.side==="both",S=A||T.side==="positive",k=A||T.side==="negative",L=b.selectAll("path.violin").data(r.identity);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),L.exit().remove(),L.each(function(q){var H=e.select(this),j=q.density,X=j.length,G=x.c2l(q.pos+_,!0),$=x.l2p(G),te;if(T.width)te=y.maxKDE/M;else{var ee=v._violinScaleGroupStats[T.scalegroup];te=T.scalemode==="count"?ee.maxKDE/M*(ee.maxCount/q.pts.length):ee.maxKDE/M}var ie,se,W,ne,he,re,ae;if(S){for(re=new Array(X),ne=0;ne<X;ne++)ae=re[ne]={},ae[y.posLetter]=G+j[ne].v/te,ae[y.valLetter]=w.c2l(j[ne].t,!0);ie=g(re,T)}if(k){for(re=new Array(X),he=0,ne=X-1;he<X;he++,ne--)ae=re[he]={},ae[y.posLetter]=G-j[ne].v/te,ae[y.valLetter]=w.c2l(j[ne].t,!0);se=g(re,T)}if(A)W=ie+"L"+se.substr(1)+"Z";else{var fe=[$,w.c2p(j[0].t)],ce=[$,w.c2p(j[X-1].t)];T.orientation==="h"&&(fe.reverse(),ce.reverse()),S?W="M"+fe+"L"+ie.substr(1)+"L"+ce:W="M"+ce+"L"+se.substr(1)+"L"+fe}H.attr("d",W),q.posCenterPx=$,q.posDensityScale=te*M,q.path=H.node(),q.pathLength=q.path.getTotalLength()/(A?2:1)});var P=T.box,D=P.width,B=(P.line||{}).width,z,R;A?(z=M*D,R=0):S?(z=[0,M*D/2],R=B*{x:1,y:-1}[y.posLetter]):(z=[M*D/2,0],R=B*{x:-1,y:1}[y.posLetter]),i.plotBoxAndWhiskers(b,{pos:x,val:w},T,{bPos:_,bdPos:z,bPosPxOffset:R}),i.plotBoxMean(b,{pos:x,val:w},T,{bPos:_,bdPos:z,bPosPxOffset:R});var F;!T.box.visible&&T.meanline.visible&&(F=r.identity);var O=b.selectAll("path.meanline").data(F||[]);O.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),O.exit().remove(),O.each(function(q){var H=w.c2p(q.mean,!0),j=o.getPositionOnKdePath(q,T,H);e.select(this).attr("d",T.orientation==="h"?"M"+H+","+j[0]+"V"+j[1]:"M"+j[0]+","+H+"H"+j[1])}),i.plotPoints(b,{x:c,y:d},T,y)})},"plot"),ak}t(ULe,"requirePlot$s");var nk,QG;function HLe(){if(QG)return nk;QG=1;var e=Va.exports,r=$a.exports,n=kf.stylePoints;return nk=t(function(s){var o=e.select(s).selectAll("g.trace.violins");o.style("opacity",function(a){return a[0].trace.opacity}),o.each(function(a){var l=a[0].trace,u=e.select(this),f=l.box||{},h=f.line||{},v=l.meanline||{},c=v.width;u.selectAll("path.violin").style("stroke-width",l.line.width+"px").call(r.stroke,l.line.color).call(r.fill,l.fillcolor),u.selectAll("path.box").style("stroke-width",h.width+"px").call(r.stroke,h.color).call(r.fill,f.fillcolor);var d={"stroke-width":c+"px","stroke-dasharray":2*c+"px,"+c+"px"};u.selectAll("path.mean").style(d).call(r.stroke,v.color),u.selectAll("path.meanline").style(d).call(r.stroke,v.color),n(u,l,s)})},"style"),nk}t(HLe,"requireStyle$b");var ik,ej;function $Le(){if(ej)return ik;ej=1;var e=$a.exports,r=Nt.exports,n=nn(),i=Ufe(),s=S7();return ik=t(function(a,l,u,f,h){h||(h={});var v=h.hoverLayer,c=a.cd,d=c[0].trace,g=d.hoveron,p=g.indexOf("violins")!==-1,b=g.indexOf("kde")!==-1,m=[],y,T;if(p||b){var _=i.hoverOnBoxes(a,l,u,f);if(b&&_.length>0){var M=a.xa,w=a.ya,x,A,S,k,L;d.orientation==="h"?(L=l,x="y",S=w,A="x",k=M):(L=u,x="x",S=M,A="y",k=w);var P=c[a.index];if(L>=P.span[0]&&L<=P.span[1]){var D=r.extendFlat({},a),B=k.c2p(L,!0),z=s.getKdeValue(P,d,L),R=s.getPositionOnKdePath(P,d,B),F=S._offset,O=S._length;D[x+"0"]=R[0],D[x+"1"]=R[1],D[A+"0"]=D[A+"1"]=B,D[A+"Label"]=A+": "+n.hoverLabelText(k,L,d[A+"hoverformat"])+", "+c[0].t.labels.kde+" "+z.toFixed(3);for(var q=0,H=0;H<_.length;H++)if(_[H].attr==="med"){q=H;break}D.spikeDistance=_[q].spikeDistance;var j=x+"Spike";D[j]=_[q][j],_[q].spikeDistance=void 0,_[q][j]=void 0,D.hovertemplate=!1,m.push(D),T={},T[x+"1"]=r.constrain(F+R[0],F,F+O),T[x+"2"]=r.constrain(F+R[1],F,F+O),T[A+"1"]=T[A+"2"]=k._offset+B}}p&&(m=m.concat(_))}g.indexOf("points")!==-1&&(y=i.hoverOnPoints(a,l,u));var X=v.selectAll(".violinline-"+d.uid).data(T?[0]:[]);return X.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(T).call(e.stroke,a.color),f==="closest"?y?[y]:m:(y&&m.push(y),m)},"hoverPoints"),ik}t($Le,"requireHover$f");var ok,tj;function VLe(){return tj||(tj=1,ok={attributes:vce(),layoutAttributes:dce(),supplyDefaults:BLe(),crossTraceDefaults:e2().crossTraceDefaults,supplyLayoutDefaults:OLe(),calc:NLe(),crossTraceCalc:qLe(),plot:ULe(),style:HLe(),styleOnSelect:kf.styleOnSelect,hoverPoints:$Le(),selectPoints:Hfe(),moduleType:"trace",name:"violin",basePlotModule:Ti,categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{description:["In vertical (horizontal) violin plots,","statistics are computed using `y` (`x`) values.","By supplying an `x` (`y`) array, one violin per distinct x (y) value","is drawn","If no `x` (`y`) {array} is provided, a single violin is drawn.","That violin position is then positioned with","with `name` or with `x0` (`y0`) if provided."].join(" ")}}),ok}t(VLe,"requireViolin$1");var rj;function GLe(){return rj||(rj=1,function(e){e.exports=VLe()}(XM)),XM.exports}t(GLe,"requireViolin");var sk={exports:{}},lk,aj;function jLe(){return aj||(aj=1,lk={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}),lk}t(jLe,"requireConstants$e");var uk,nj;function pce(){if(nj)return uk;nj=1;var e=gd(),r=Ps.line,n=Ni,i=Vo.axisHoverFormat,s=Un.hovertemplateAttrs,o=Un.texttemplateAttrs,a=jLe(),l=cn.extendFlat,u=$a.exports;uk={x:e.x,x0:e.x0,dx:e.dx,y:e.y,y0:e.y0,dy:e.dy,xperiod:e.xperiod,yperiod:e.yperiod,xperiod0:e.xperiod0,yperiod0:e.yperiod0,xperiodalignment:e.xperiodalignment,yperiodalignment:e.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),hovertext:e.hovertext,hovertemplate:s({},{keys:a.eventDataKeys}),hoverinfo:l({},n.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple funnels, percentages & totals","are computed separately (per trace)."].join(" ")},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:e.text,textposition:e.textposition,insidetextanchor:l({},e.insidetextanchor,{dflt:"middle"}),textangle:l({},e.textangle,{dflt:0}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:e.outsidetextfont,constraintext:e.constraintext,cliponaxis:e.cliponaxis,orientation:l({},e.orientation,{description:["Sets the orientation of the funnels.","With *v* (*h*), the value of the each bar spans","along the vertical (horizontal).","By default funnels are tend to be oriented horizontally;","unless only *y* array is presented or orientation is set to *v*.","Also regarding graphs including only 'horizontal' funnels,","*autorange* on the *y-axis* are set to *reversed*."].join(" ")}),offset:l({},e.offset,{arrayOk:!1}),width:l({},e.width,{arrayOk:!1}),marker:f(),connector:{fillcolor:{valType:"color",editType:"style",description:["Sets the fill color."].join(" ")},line:{color:l({},r.color,{dflt:u.defaultLine}),width:l({},r.width,{dflt:0,editType:"plot"}),dash:r.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector regions and lines are drawn."].join(" ")},editType:"plot"},offsetgroup:e.offsetgroup,alignmentgroup:e.alignmentgroup};function f(){var h=l({},e.marker);return delete h.pattern,h}return t(f,"funnelMarker"),uk}t(pce,"requireAttributes$C");var fk,ij;function gce(){return ij||(ij=1,fk={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},funnelgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}),fk}t(gce,"requireLayout_attributes$c");var ck,oj;function sj(){if(oj)return ck;oj=1;var e=Nt.exports,r=Ef().handleGroupingDefaults,n=Ef().handleText,i=ix,s=yv,o=pce(),a=$a.exports;function l(h,v,c,d){function g(M,w){return e.coerce(h,v,o,M,w)}t(g,"coerce");var p=i(h,v,d,g);if(!p){v.visible=!1;return}s(h,v,d,g),g("xhoverformat"),g("yhoverformat"),g("orientation",v.y&&!v.x?"v":"h"),g("offset"),g("width");var b=g("text");g("hovertext"),g("hovertemplate");var m=g("textposition");n(h,v,d,g,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),v.textposition!=="none"&&!v.texttemplate&&g("textinfo",Array.isArray(b)?"text+value":"value");var y=g("marker.color",c);g("marker.line.color",a.defaultLine),g("marker.line.width");var T=g("connector.visible");if(T){g("connector.fillcolor",u(y));var _=g("connector.line.width");_&&(g("connector.line.color"),g("connector.line.dash"))}}t(l,"supplyDefaults");function u(h){var v=e.isArrayOrTypedArray(h)?"#000":h;return a.addOpacity(v,.5*a.opacity(v))}t(u,"defaultFillColor");function f(h,v){var c,d;function g(b){return e.coerce(d._input,d,o,b)}if(t(g,"coerce"),v.funnelmode==="group")for(var p=0;p<h.length;p++)d=h[p],c=d._input,r(c,d,v,g)}return t(f,"crossTraceDefaults"),ck={supplyDefaults:l,crossTraceDefaults:f},ck}t(sj,"requireDefaults$C");var hk,lj;function YLe(){if(lj)return hk;lj=1;var e=Nt.exports,r=gce();return hk=t(function(n,i,s){var o=!1;function a(f,h){return e.coerce(n,i,r,f,h)}t(a,"coerce");for(var l=0;l<s.length;l++){var u=s[l];if(u.visible&&u.type==="funnel"){o=!0;break}}o&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))},"layout_defaults$b"),hk}t(YLe,"requireLayout_defaults$b");var vk,uj;function WLe(){if(uj)return vk;uj=1;var e=Nt.exports;return vk=t(function(n,i){for(var s=0;s<n.length;s++)n[s].i=s;e.mergeArray(i.text,n,"tx"),e.mergeArray(i.hovertext,n,"htx");var o=i.marker;if(o){e.mergeArray(o.opacity,n,"mo"),e.mergeArray(o.color,n,"mc");var a=o.line;a&&(e.mergeArray(a.color,n,"mlc"),e.mergeArrayCastPositive(a.width,n,"mlw"))}},"arraysToCalcdata"),vk}t(WLe,"requireArrays_to_calcdata");var dk,fj;function XLe(){if(fj)return dk;fj=1;var e=nn(),r=bv,n=WLe(),i=Ih,s=jn.BADNUM;dk=t(function(l,u){var f=e.getFromId(l,u.xaxis||"x"),h=e.getFromId(l,u.yaxis||"y"),v,c,d,g,p,b,m,y;u.orientation==="h"?(v=f.makeCalcdata(u,"x"),d=h.makeCalcdata(u,"y"),g=r(u,h,"y",d),p=!!u.yperiodalignment,b="y"):(v=h.makeCalcdata(u,"y"),d=f.makeCalcdata(u,"x"),g=r(u,f,"x",d),p=!!u.xperiodalignment,b="x"),c=g.vals;var T=Math.min(c.length,v.length),_=new Array(T);for(u._base=[],m=0;m<T;m++){v[m]<0&&(v[m]=s);var M=!1;v[m]!==s&&m+1<T&&v[m+1]!==s&&(M=!0),y=_[m]={p:c[m],s:v[m],cNext:M},u._base[m]=-.5*y.s,p&&(_[m].orig_p=d[m],_[m][b+"End"]=g.ends[m],_[m][b+"Start"]=g.starts[m]),u.ids&&(y.id=String(u.ids[m])),m===0&&(_[0].vTotal=0),_[0].vTotal+=o(y.s),y.begR=o(y.s)/o(_[0].s)}var w;for(m=0;m<T;m++)y=_[m],y.s!==s&&(y.sumR=y.s/_[0].vTotal,y.difR=w!==void 0?y.s/w:1,w=y.s);return n(_,u),i(_,u),_},"calc");function o(a){return a===s?0:a}return t(o,"fixNum"),dk}t(XLe,"requireCalc$w");var pk,cj;function ZLe(){if(cj)return pk;cj=1;var e=hx().setGroupPositions;return pk=t(function(n,i){var s=n._fullLayout,o=n._fullData,a=n.calcdata,l=i.xaxis,u=i.yaxis,f=[],h=[],v=[],c,d;for(d=0;d<o.length;d++){var g=o[d],p=g.orientation==="h";g.visible===!0&&g.xaxis===l._id&&g.yaxis===u._id&&g.type==="funnel"&&(c=a[d],p?v.push(c):h.push(c),f.push(c))}var b={mode:s.funnelmode,norm:s.funnelnorm,gap:s.funnelgap,groupgap:s.funnelgroupgap};for(e(n,l,u,h,b),e(n,u,l,v,b),d=0;d<f.length;d++){c=f[d];for(var m=0;m<c.length;m++)m+1<c.length&&(c[m].nextP0=c[m+1].p0,c[m].nextS0=c[m+1].s0,c[m].nextP1=c[m+1].p1,c[m].nextS1=c[m+1].s1)}},"crossTraceCalc"),pk}t(ZLe,"requireCross_trace_calc$1");var gk,hj;function KLe(){if(hj)return gk;hj=1;var e=Va.exports,r=Nt.exports,n=bn.exports,i=jn.BADNUM,s=Dy(),o=wu().clearMinTextSize;gk=t(function(h,v,c,d){var g=h._fullLayout;o("funnel",g),a(h,v,c,d),l(h,v,c,d),s.plot(h,v,c,d,{mode:g.funnelmode,norm:g.funnelmode,gap:g.funnelgap,groupgap:g.funnelgroupgap})},"plot");function a(f,h,v,c){var d=h.xaxis,g=h.yaxis;r.makeTraceGroups(c,v,"trace bars").each(function(p){var b=e.select(this),m=p[0].trace,y=r.ensureSingle(b,"g","regions");if(!m.connector||!m.connector.visible){y.remove();return}var T=m.orientation==="h",_=y.selectAll("g.region").data(r.identity);_.enter().append("g").classed("region",!0),_.exit().remove();var M=_.size();_.each(function(w,x){if(!(x!==M-1&&!w.cNext)){var A=u(w,d,g,T),S=A[0],k=A[1],L="";S[0]!==i&&k[0]!==i&&S[1]!==i&&k[1]!==i&&S[2]!==i&&k[2]!==i&&S[3]!==i&&k[3]!==i&&(T?L+="M"+S[0]+","+k[1]+"L"+S[2]+","+k[2]+"H"+S[3]+"L"+S[1]+","+k[1]+"Z":L+="M"+S[1]+","+k[1]+"L"+S[2]+","+k[3]+"V"+k[2]+"L"+S[1]+","+k[0]+"Z"),L===""&&(L="M0,0Z"),r.ensureSingle(e.select(this),"path").attr("d",L).call(n.setClipUrl,h.layerClipId,f)}})})}t(a,"plotConnectorRegions");function l(f,h,v,c){var d=h.xaxis,g=h.yaxis;r.makeTraceGroups(c,v,"trace bars").each(function(p){var b=e.select(this),m=p[0].trace,y=r.ensureSingle(b,"g","lines");if(!m.connector||!m.connector.visible||!m.connector.line.width){y.remove();return}var T=m.orientation==="h",_=y.selectAll("g.line").data(r.identity);_.enter().append("g").classed("line",!0),_.exit().remove();var M=_.size();_.each(function(w,x){if(!(x!==M-1&&!w.cNext)){var A=u(w,d,g,T),S=A[0],k=A[1],L="";S[3]!==void 0&&k[3]!==void 0&&(T?(L+="M"+S[0]+","+k[1]+"L"+S[2]+","+k[2],L+="M"+S[1]+","+k[1]+"L"+S[3]+","+k[2]):(L+="M"+S[1]+","+k[1]+"L"+S[2]+","+k[3],L+="M"+S[1]+","+k[0]+"L"+S[2]+","+k[2])),L===""&&(L="M0,0Z"),r.ensureSingle(e.select(this),"path").attr("d",L).call(n.setClipUrl,h.layerClipId,f)}})})}t(l,"plotConnectorLines");function u(f,h,v,c){var d=[],g=[],p=c?h:v,b=c?v:h;return d[0]=p.c2p(f.s0,!0),g[0]=b.c2p(f.p0,!0),d[1]=p.c2p(f.s1,!0),g[1]=b.c2p(f.p1,!0),d[2]=p.c2p(f.nextS0,!0),g[2]=b.c2p(f.nextP0,!0),d[3]=p.c2p(f.nextS1,!0),g[3]=b.c2p(f.nextP1,!0),c?[d,g]:[g,d]}return t(u,"getXY"),gk}t(KLe,"requirePlot$r");var yk,vj;function JLe(){if(vj)return yk;vj=1;var e=Va.exports,r=bn.exports,n=$a.exports,i=A0.DESELECTDIM,s=Eh(),o=wu().resizeText,a=s.styleTextPoints;function l(u,f,h){var v=h||e.select(u).selectAll("g.funnellayer").selectAll("g.trace");o(u,v,"funnel"),v.style("opacity",function(c){return c[0].trace.opacity}),v.each(function(c){var d=e.select(this),g=c[0].trace;d.selectAll(".point > path").each(function(p){if(!p.isBlank){var b=g.marker;e.select(this).call(n.fill,p.mc||b.color).call(n.stroke,p.mlc||b.line.color).call(r.dashLine,b.line.dash,p.mlw||b.line.width).style("opacity",g.selectedpoints&&!p.selected?i:1)}}),a(d,g,u),d.selectAll(".regions").each(function(){e.select(this).selectAll("path").style("stroke-width",0).call(n.fill,g.connector.fillcolor)}),d.selectAll(".lines").each(function(){var p=g.connector.line;r.lineGroupStyle(e.select(this).selectAll("path"),p.width,p.color,p.dash)})})}return t(l,"style"),yk={style:l},yk}t(JLe,"requireStyle$a");var mk,dj;function QLe(){if(dj)return mk;dj=1;var e=$a.exports.opacity,r=vx().hoverOnBars,n=Nt.exports.formatPercent;mk=t(function(o,a,l,u,f){var h=r(o,a,l,u,f);if(!!h){var v=h.cd,c=v[0].trace,d=c.orientation==="h",g=h.index,p=v[g],b=d?"x":"y";h[b+"LabelVal"]=p.s,h.percentInitial=p.begR,h.percentInitialLabel=n(p.begR,1),h.percentPrevious=p.difR,h.percentPreviousLabel=n(p.difR,1),h.percentTotal=p.sumR,h.percentTotalLabel=n(p.sumR,1);var m=p.hi||c.hoverinfo,y=[];if(m&&m!=="none"&&m!=="skip"){var T=m==="all",_=m.split("+"),M=t(function(w){return T||_.indexOf(w)!==-1},"hasFlag");M("percent initial")&&y.push(h.percentInitialLabel+" of initial"),M("percent previous")&&y.push(h.percentPreviousLabel+" of previous"),M("percent total")&&y.push(h.percentTotalLabel+" of total")}return h.extraText=y.join("<br>"),h.color=i(c,p),[h]}},"hoverPoints");function i(s,o){var a=s.marker,l=o.mc||a.color,u=o.mlc||a.line.color,f=o.mlw||a.line.width;if(e(l))return l;if(e(u)&&f)return u}return t(i,"getTraceColor"),mk}t(QLe,"requireHover$e");var xk,pj;function eRe(){return pj||(pj=1,xk=t(function(r,n){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"percentInitial"in n&&(r.percentInitial=n.percentInitial),"percentPrevious"in n&&(r.percentPrevious=n.percentPrevious),"percentTotal"in n&&(r.percentTotal=n.percentTotal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r},"eventData")),xk}t(eRe,"requireEvent_data$8");var bk,gj;function tRe(){return gj||(gj=1,bk={attributes:pce(),layoutAttributes:gce(),supplyDefaults:sj().supplyDefaults,crossTraceDefaults:sj().crossTraceDefaults,supplyLayoutDefaults:YLe(),calc:XLe(),crossTraceCalc:ZLe(),plot:KLe(),style:JLe().style,hoverPoints:QLe(),eventData:eRe(),selectPoints:dx(),moduleType:"trace",name:"funnel",basePlotModule:Ti,categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Visualize stages in a process using length-encoded bars. This trace can be used","to show data in either a part-to-whole representation wherein each item appears",'in a single stage, or in a "drop-off" representation wherein each item appears in','each stage it traversed. See also the "funnelarea" trace type for a different',"approach to visualizing funnel data."].join(" ")}}),bk}t(tRe,"requireFunnel$1");var yj;function rRe(){return yj||(yj=1,function(e){e.exports=tRe()}(sk)),sk.exports}t(rRe,"requireFunnel");var _k={exports:{}},wk,mj;function aRe(){return mj||(mj=1,wk={eventDataKeys:["initial","delta","final"]}),wk}t(aRe,"requireConstants$d");var Tk,xj;function yce(){if(xj)return Tk;xj=1;var e=gd(),r=Ps.line,n=Ni,i=Vo.axisHoverFormat,s=Un.hovertemplateAttrs,o=Un.texttemplateAttrs,a=aRe(),l=cn.extendFlat,u=$a.exports;function f(h){return{marker:{color:l({},e.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+h+" values."}),line:{color:l({},e.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+h+" values."}),width:l({},e.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+h+" values."}),editType:"style"},editType:"style"},editType:"style"}}return t(f,"directionAttrs"),Tk={measure:{valType:"data_array",dflt:[],editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:e.x,x0:e.x0,dx:e.dx,y:e.y,y0:e.y0,dy:e.dy,xperiod:e.xperiod,yperiod:e.yperiod,xperiod0:e.xperiod0,yperiod0:e.yperiod0,xperiodalignment:e.xperiodalignment,yperiodalignment:e.yperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),hovertext:e.hovertext,hovertemplate:s({},{keys:a.eventDataKeys}),hoverinfo:l({},n.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:e.text,textposition:e.textposition,insidetextanchor:e.insidetextanchor,textangle:e.textangle,textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:e.outsidetextfont,constraintext:e.constraintext,cliponaxis:e.cliponaxis,orientation:e.orientation,offset:e.offset,width:e.width,increasing:f("increasing"),decreasing:f("decreasing"),totals:f("intermediate sums and total"),connector:{line:{color:l({},r.color,{dflt:u.defaultLine}),width:l({},r.width,{editType:"plot"}),dash:r.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:e.offsetgroup,alignmentgroup:e.alignmentgroup},Tk}t(yce,"requireAttributes$B");var Ak,bj;function mce(){return bj||(bj=1,Ak={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}),Ak}t(mce,"requireLayout_attributes$b");var Sk,_j;function px(){return _j||(_j=1,Sk={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}),Sk}t(px,"requireDelta");var Mk,wj;function Tj(){if(wj)return Mk;wj=1;var e=Nt.exports,r=Ef().handleGroupingDefaults,n=Ef().handleText,i=ix,s=yv,o=yce(),a=$a.exports,l=px(),u=l.INCREASING.COLOR,f=l.DECREASING.COLOR,h="#4499FF";function v(g,p,b){g(p+".marker.color",b),g(p+".marker.line.color",a.defaultLine),g(p+".marker.line.width")}t(v,"handleDirection");function c(g,p,b,m){function y(x,A){return e.coerce(g,p,o,x,A)}t(y,"coerce");var T=i(g,p,m,y);if(!T){p.visible=!1;return}s(g,p,m,y),y("xhoverformat"),y("yhoverformat"),y("measure"),y("orientation",p.x&&!p.y?"h":"v"),y("base"),y("offset"),y("width"),y("text"),y("hovertext"),y("hovertemplate");var _=y("textposition");n(g,p,m,y,_,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),p.textposition!=="none"&&(y("texttemplate"),p.texttemplate||y("textinfo")),v(y,"increasing",u),v(y,"decreasing",f),v(y,"totals",h);var M=y("connector.visible");if(M){y("connector.mode");var w=y("connector.line.width");w&&(y("connector.line.color"),y("connector.line.dash"))}}t(c,"supplyDefaults");function d(g,p){var b,m;function y(_){return e.coerce(m._input,m,o,_)}if(t(y,"coerce"),p.waterfallmode==="group")for(var T=0;T<g.length;T++)m=g[T],b=m._input,r(b,m,p,y)}return t(d,"crossTraceDefaults"),Mk={supplyDefaults:c,crossTraceDefaults:d},Mk}t(Tj,"requireDefaults$B");var kk,Aj;function nRe(){if(Aj)return kk;Aj=1;var e=Nt.exports,r=mce();return kk=t(function(n,i,s){var o=!1;function a(f,h){return e.coerce(n,i,r,f,h)}t(a,"coerce");for(var l=0;l<s.length;l++){var u=s[l];if(u.visible&&u.type==="waterfall"){o=!0;break}}o&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))},"layout_defaults$a"),kk}t(nRe,"requireLayout_defaults$a");var Ek,Sj;function iRe(){if(Sj)return Ek;Sj=1;var e=nn(),r=bv,n=Nt.exports.mergeArray,i=Ih,s=jn.BADNUM;function o(l){return l==="a"||l==="absolute"}t(o,"isAbsolute");function a(l){return l==="t"||l==="total"}return t(a,"isTotal"),Ek=t(function(u,f){var h=e.getFromId(u,f.xaxis||"x"),v=e.getFromId(u,f.yaxis||"y"),c,d,g,p,b,m;f.orientation==="h"?(c=h.makeCalcdata(f,"x"),g=v.makeCalcdata(f,"y"),p=r(f,v,"y",g),b=!!f.yperiodalignment,m="y"):(c=v.makeCalcdata(f,"y"),g=h.makeCalcdata(f,"x"),p=r(f,h,"x",g),b=!!f.xperiodalignment,m="x"),d=p.vals;for(var y=Math.min(d.length,c.length),T=new Array(y),_=0,M,w=!1,x=0;x<y;x++){var A=c[x]||0,S=!1;(c[x]!==s||a(f.measure[x])||o(f.measure[x]))&&x+1<y&&(c[x+1]!==s||a(f.measure[x+1])||o(f.measure[x+1]))&&(S=!0);var k=T[x]={i:x,p:d[x],s:A,rawS:A,cNext:S};o(f.measure[x])?(_=k.s,k.isSum=!0,k.dir="totals",k.s=_):a(f.measure[x])?(k.isSum=!0,k.dir="totals",k.s=_):(k.isSum=!1,k.dir=k.rawS<0?"decreasing":"increasing",M=k.s,k.s=_+M,_+=M),k.dir==="totals"&&(w=!0),b&&(T[x].orig_p=g[x],T[x][m+"End"]=p.ends[x],T[x][m+"Start"]=p.starts[x]),f.ids&&(k.id=String(f.ids[x])),k.v=(f.base||0)+_}return T.length&&(T[0].hasTotals=w),n(f.text,T,"tx"),n(f.hovertext,T,"htx"),i(T,f),T},"calc"),Ek}t(iRe,"requireCalc$v");var Ck,Mj;function oRe(){if(Mj)return Ck;Mj=1;var e=hx().setGroupPositions;return Ck=t(function(n,i){var s=n._fullLayout,o=n._fullData,a=n.calcdata,l=i.xaxis,u=i.yaxis,f=[],h=[],v=[],c,d;for(d=0;d<o.length;d++){var g=o[d];g.visible===!0&&g.xaxis===l._id&&g.yaxis===u._id&&g.type==="waterfall"&&(c=a[d],g.orientation==="h"?v.push(c):h.push(c),f.push(c))}var p={mode:s.waterfallmode,norm:s.waterfallnorm,gap:s.waterfallgap,groupgap:s.waterfallgroupgap};for(e(n,l,u,h,p),e(n,u,l,v,p),d=0;d<f.length;d++){c=f[d];for(var b=0;b<c.length;b++){var m=c[b];m.isSum===!1&&(m.s0+=b===0?0:c[b-1].s),b+1<c.length&&(c[b].nextP0=c[b+1].p0,c[b].nextS0=c[b+1].s0)}}},"crossTraceCalc"),Ck}t(oRe,"requireCross_trace_calc");var Lk,kj;function sRe(){if(kj)return Lk;kj=1;var e=Va.exports,r=Nt.exports,n=bn.exports,i=jn.BADNUM,s=Dy(),o=wu().clearMinTextSize;Lk=t(function(f,h,v,c){var d=f._fullLayout;o("waterfall",d),s.plot(f,h,v,c,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),a(f,h,v,c)},"plot");function a(u,f,h,v){var c=f.xaxis,d=f.yaxis;r.makeTraceGroups(v,h,"trace bars").each(function(g){var p=e.select(this),b=g[0].trace,m=r.ensureSingle(p,"g","lines");if(!b.connector||!b.connector.visible){m.remove();return}var y=b.orientation==="h",T=b.connector.mode,_=m.selectAll("g.line").data(r.identity);_.enter().append("g").classed("line",!0),_.exit().remove();var M=_.size();_.each(function(w,x){if(!(x!==M-1&&!w.cNext)){var A=l(w,c,d,y),S=A[0],k=A[1],L="";S[0]!==i&&k[0]!==i&&S[1]!==i&&k[1]!==i&&(T==="spanning"&&!w.isSum&&x>0&&(y?L+="M"+S[0]+","+k[1]+"V"+k[0]:L+="M"+S[1]+","+k[0]+"H"+S[0]),T!=="between"&&(w.isSum||x<M-1)&&(y?L+="M"+S[1]+","+k[0]+"V"+k[1]:L+="M"+S[0]+","+k[1]+"H"+S[1]),S[2]!==i&&k[2]!==i&&(y?L+="M"+S[1]+","+k[1]+"V"+k[2]:L+="M"+S[1]+","+k[1]+"H"+S[2])),L===""&&(L="M0,0Z"),r.ensureSingle(e.select(this),"path").attr("d",L).call(n.setClipUrl,f.layerClipId,u)}})})}t(a,"plotConnectors");function l(u,f,h,v){var c=[],d=[],g=v?f:h,p=v?h:f;return c[0]=g.c2p(u.s0,!0),d[0]=p.c2p(u.p0,!0),c[1]=g.c2p(u.s1,!0),d[1]=p.c2p(u.p1,!0),c[2]=g.c2p(u.nextS0,!0),d[2]=p.c2p(u.nextP0,!0),v?[c,d]:[d,c]}return t(l,"getXY"),Lk}t(sRe,"requirePlot$q");var Rk,Ej;function lRe(){if(Ej)return Rk;Ej=1;var e=Va.exports,r=bn.exports,n=$a.exports,i=A0.DESELECTDIM,s=Eh(),o=wu().resizeText,a=s.styleTextPoints;function l(u,f,h){var v=h||e.select(u).selectAll("g.waterfalllayer").selectAll("g.trace");o(u,v,"waterfall"),v.style("opacity",function(c){return c[0].trace.opacity}),v.each(function(c){var d=e.select(this),g=c[0].trace;d.selectAll(".point > path").each(function(p){if(!p.isBlank){var b=g[p.dir].marker;e.select(this).call(n.fill,b.color).call(n.stroke,b.line.color).call(r.dashLine,b.line.dash,b.line.width).style("opacity",g.selectedpoints&&!p.selected?i:1)}}),a(d,g,u),d.selectAll(".lines").each(function(){var p=g.connector.line;r.lineGroupStyle(e.select(this).selectAll("path"),p.width,p.color,p.dash)})})}return t(l,"style"),Rk={style:l},Rk}t(lRe,"requireStyle$9");var Pk,Cj;function uRe(){if(Cj)return Pk;Cj=1;var e=nn().hoverLabelText,r=$a.exports.opacity,n=vx().hoverOnBars,i=px(),s={increasing:i.INCREASING.SYMBOL,decreasing:i.DECREASING.SYMBOL};Pk=t(function(l,u,f,h,v){var c=n(l,u,f,h,v);if(!c)return;var d=c.cd,g=d[0].trace,p=g.orientation==="h",b=p?"x":"y",m=p?l.xa:l.ya;function y(P){return e(m,P,g[b+"hoverformat"])}t(y,"formatNumber");var T=c.index,_=d[T],M=_.isSum?_.b+_.s:_.rawS;if(!_.isSum){c.initial=_.b+_.s-M,c.delta=M,c.final=c.initial+c.delta;var w=y(Math.abs(c.delta));c.deltaLabel=M<0?"("+w+")":w,c.finalLabel=y(c.final),c.initialLabel=y(c.initial)}var x=_.hi||g.hoverinfo,A=[];if(x&&x!=="none"&&x!=="skip"){var S=x==="all",k=x.split("+"),L=t(function(P){return S||k.indexOf(P)!==-1},"hasFlag");_.isSum||(L("final")&&(p?!L("x"):!L("y"))&&A.push(c.finalLabel),L("delta")&&(M<0?A.push(c.deltaLabel+" "+s.decreasing):A.push(c.deltaLabel+" "+s.increasing)),L("initial")&&A.push("Initial: "+c.initialLabel))}return A.length&&(c.extraText=A.join("<br>")),c.color=o(g,_),[c]},"hoverPoints");function o(a,l){var u=a[l.dir].marker,f=u.color,h=u.line.color,v=u.line.width;if(r(f))return f;if(r(h)&&v)return h}return t(o,"getTraceColor"),Pk}t(uRe,"requireHover$d");var Dk,Lj;function fRe(){return Lj||(Lj=1,Dk=t(function(r,n){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"initial"in n&&(r.initial=n.initial),"delta"in n&&(r.delta=n.delta),"final"in n&&(r.final=n.final),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r},"eventData")),Dk}t(fRe,"requireEvent_data$7");var Ik,Rj;function cRe(){return Rj||(Rj=1,Ik={attributes:yce(),layoutAttributes:mce(),supplyDefaults:Tj().supplyDefaults,crossTraceDefaults:Tj().crossTraceDefaults,supplyLayoutDefaults:nRe(),calc:iRe(),crossTraceCalc:oRe(),plot:sRe(),style:lRe().style,hoverPoints:uRe(),eventData:fRe(),selectPoints:dx(),moduleType:"trace",name:"waterfall",basePlotModule:Ti,categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set th *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}),Ik}t(cRe,"requireWaterfall$1");var Pj;function hRe(){return Pj||(Pj=1,function(e){e.exports=cRe()}(_k)),_k.exports}t(hRe,"requireWaterfall");var zk={exports:{}},Fk,Dj;function gx(){return Dj||(Dj=1,Fk={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var r=e.slice(0,3);return r[1]=r[1]+"%",r[2]=r[2]+"%",r},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var r=e.slice(0,4);return r[1]=r[1]+"%",r[2]=r[2]+"%",r},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}),Fk}t(gx,"requireConstants$c");var Bk,Ij;function xce(){if(Ij)return Bk;Ij=1;for(var e=Ni,r=Un.hovertemplateAttrs,n=cn.extendFlat,i=gx().colormodel,s=["rgb","rgba","rgba256","hsl","hsla"],o=[],a=[],l=0;l<s.length;l++){var u=i[s[l]];o.push("For the `"+s[l]+"` colormodel, it is ["+(u.zminDflt||u.min).join(", ")+"]."),a.push("For the `"+s[l]+"` colormodel, it is ["+(u.zmaxDflt||u.max).join(", ")+"].")}return Bk=n({source:{valType:"string",editType:"calc",description:["Specifies the data URI of the image to be visualized.",'The URI consists of "data:image/[<media subtype>][;base64],<data>"'].join(" ")},z:{valType:"data_array",editType:"calc",description:["A 2-dimensional array in which each element is an array of 3 or 4 numbers representing a color."].join(" ")},colormodel:{valType:"enumerated",values:s,editType:"calc",description:["Color model used to map the numerical color components described in `z` into colors.","If `source` is specified, this attribute will be set to `rgba256`","otherwise it defaults to `rgb`."].join(" ")},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot",description:["Picks a smoothing algorithm used to smooth `z` data.","This only applies for image traces that use the `source` attribute."].join(" ")},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc",description:["Array defining the lower bound for each color component.","Note that the default value will depend on the colormodel.",o.join(" ")].join(" ")},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc",description:["Array defining the higher bound for each color component.","Note that the default value will depend on the colormodel.",a.join(" ")].join(" ")},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:"Set the image's x position."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:"Set the image's y position."},dx:{valType:"number",dflt:1,editType:"calc",description:"Set the pixel's horizontal size."},dy:{valType:"number",dflt:1,editType:"calc",description:"Set the pixel's vertical size"},text:{valType:"data_array",editType:"plot",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"plot",description:"Same as `text`."},hoverinfo:n({},e.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:r({},{keys:["z","color","colormodel"]}),transforms:void 0}),Bk}t(xce,"requireAttributes$A");var Ok,zj;function vRe(){if(zj)return Ok;zj=1;var e=Nt.exports,r=xce(),n=gx(),i=Ol.IMAGE_URL_PREFIX;return Ok=t(function(o,a){function l(h,v){return e.coerce(o,a,r,h,v)}t(l,"coerce"),l("source"),a.source&&!a.source.match(i)&&delete a.source,a._hasSource=!!a.source;var u=l("z");if(a._hasZ=!(u===void 0||!u.length||!u[0]||!u[0].length),!a._hasZ&&!a._hasSource){a.visible=!1;return}l("x0"),l("y0"),l("dx"),l("dy");var f;a._hasZ?(l("colormodel","rgb"),f=n.colormodel[a.colormodel],l("zmin",f.zminDflt||f.min),l("zmax",f.zmaxDflt||f.max)):a._hasSource&&(a.colormodel="rgba256",f=n.colormodel[a.colormodel],a.zmin=f.zminDflt,a.zmax=f.zmaxDflt),l("zsmooth"),l("text"),l("hovertext"),l("hovertemplate"),a._length=null},"supplyDefaults"),Ok}t(vRe,"requireDefaults$A");var Nk={},Rb={exports:{}},Jh={},Pb={exports:{}},Db={exports:{}},qk,Fj;function dRe(){if(Fj)return qk;Fj=1;var e=1e3,r=e*60,n=r*60,i=n*24,s=i*365.25;qk=t(function(f,h){h=h||{};var v=typeof f;if(v==="string"&&f.length>0)return o(f);if(v==="number"&&isNaN(f)===!1)return h.long?l(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))},"ms");function o(f){if(f=String(f),!(f.length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(!!h){var v=parseFloat(h[1]),c=(h[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return v*s;case"days":case"day":case"d":return v*i;case"hours":case"hour":case"hrs":case"hr":case"h":return v*n;case"minutes":case"minute":case"mins":case"min":case"m":return v*r;case"seconds":case"second":case"secs":case"sec":case"s":return v*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}t(o,"parse");function a(f){return f>=i?Math.round(f/i)+"d":f>=n?Math.round(f/n)+"h":f>=r?Math.round(f/r)+"m":f>=e?Math.round(f/e)+"s":f+"ms"}t(a,"fmtShort");function l(f){return u(f,i,"day")||u(f,n,"hour")||u(f,r,"minute")||u(f,e,"second")||f+" ms"}t(l,"fmtLong");function u(f,h,v){if(!(f<h))return f<h*1.5?Math.floor(f/h)+" "+v:Math.ceil(f/h)+" "+v+"s"}return t(u,"plural"),qk}t(dRe,"requireMs");var Bj;function pRe(){return Bj||(Bj=1,function(e,r){r=e.exports=s.debug=s.default=s,r.coerce=u,r.disable=a,r.enable=o,r.enabled=l,r.humanize=dRe(),r.names=[],r.skips=[],r.formatters={};var n;function i(f){var h=0,v;for(v in f)h=(h<<5)-h+f.charCodeAt(v),h|=0;return r.colors[Math.abs(h)%r.colors.length]}t(i,"selectColor");function s(f){function h(){if(!!h.enabled){var v=h,c=+new Date,d=c-(n||c);v.diff=d,v.prev=n,v.curr=c,n=c;for(var g=new Array(arguments.length),p=0;p<g.length;p++)g[p]=arguments[p];g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var b=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(y,T){if(y==="%%")return y;b++;var _=r.formatters[T];if(typeof _=="function"){var M=g[b];y=_.call(v,M),g.splice(b,1),b--}return y}),r.formatArgs.call(v,g);var m=h.log||r.log||console.log.bind(console);m.apply(v,g)}}return t(h,"debug"),h.namespace=f,h.enabled=r.enabled(f),h.useColors=r.useColors(),h.color=i(f),typeof r.init=="function"&&r.init(h),h}t(s,"createDebug");function o(f){r.save(f),r.names=[],r.skips=[];for(var h=(typeof f=="string"?f:"").split(/[\s,]+/),v=h.length,c=0;c<v;c++)!h[c]||(f=h[c].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}t(o,"enable");function a(){r.enable("")}t(a,"disable");function l(f){var h,v;for(h=0,v=r.skips.length;h<v;h++)if(r.skips[h].test(f))return!1;for(h=0,v=r.names.length;h<v;h++)if(r.names[h].test(f))return!0;return!1}t(l,"enabled");function u(f){return f instanceof Error?f.stack||f.message:f}t(u,"coerce")}(Db,Db.exports)),Db.exports}t(pRe,"requireDebug");var Oj;function gRe(){return Oj||(Oj=1,function(e,r){r=e.exports=pRe(),r.log=s,r.formatArgs=i,r.save=o,r.load=a,r.useColors=n,r.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t(n,"useColors"),r.formatters.j=function(u){try{return JSON.stringify(u)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}};function i(u){var f=this.useColors;if(u[0]=(f?"%c":"")+this.namespace+(f?" %c":" ")+u[0]+(f?"%c ":" ")+"+"+r.humanize(this.diff),!!f){var h="color: "+this.color;u.splice(1,0,h,"color: inherit");var v=0,c=0;u[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(v++,d==="%c"&&(c=v))}),u.splice(c,0,h)}}t(i,"formatArgs");function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}t(s,"log");function o(u){try{u==null?r.storage.removeItem("debug"):r.storage.debug=u}catch{}}t(o,"save");function a(){var u;try{u=r.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}t(a,"load"),r.enable(a());function l(){try{return window.localStorage}catch{}}t(l,"localstorage")}(Pb,Pb.exports)),Pb.exports}t(gRe,"requireBrowser$1");var Uk,Nj;function yRe(){if(Nj)return Uk;Nj=1;var e=vme.exports,r=gRe()("stream-parser");Uk=a;var n=-1,i=0,s=1,o=2;function a(m){var y=m&&typeof m._transform=="function",T=m&&typeof m._write=="function";if(!y&&!T)throw new Error("must pass a Writable or Transform stream in");r("extending Parser into stream"),m._bytes=u,m._skipBytes=f,y&&(m._passthrough=h),y?m._transform=c:m._write=v}t(a,"Parser");function l(m){r("initializing parser stream"),m._parserBytesLeft=0,m._parserBuffers=[],m._parserBuffered=0,m._parserState=n,m._parserCallback=null,typeof m.push=="function"&&(m._parserOutput=m.push.bind(m)),m._parserInit=!0}t(l,"init");function u(m,y){e(!this._parserCallback,'there is already a "callback" set!'),e(isFinite(m)&&m>0,'can only buffer a finite number of bytes > 0, got "'+m+'"'),this._parserInit||l(this),r("buffering %o bytes",m),this._parserBytesLeft=m,this._parserCallback=y,this._parserState=i}t(u,"_bytes");function f(m,y){e(!this._parserCallback,'there is already a "callback" set!'),e(m>0,'can only skip > 0 bytes, got "'+m+'"'),this._parserInit||l(this),r("skipping %o bytes",m),this._parserBytesLeft=m,this._parserCallback=y,this._parserState=s}t(f,"_skipBytes");function h(m,y){e(!this._parserCallback,'There is already a "callback" set!'),e(m>0,'can only pass through > 0 bytes, got "'+m+'"'),this._parserInit||l(this),r("passing through %o bytes",m),this._parserBytesLeft=m,this._parserCallback=y,this._parserState=o}t(h,"_passthrough");function v(m,y,T){this._parserInit||l(this),r("write(%o bytes)",m.length),typeof y=="function"&&(T=y),p(this,m,null,T)}t(v,"write");function c(m,y,T){this._parserInit||l(this),r("transform(%o bytes)",m.length),typeof y!="function"&&(y=this._parserOutput),p(this,m,y,T)}t(c,"transform");function d(m,y,T,_){return m._parserBytesLeft<=0?_(new Error("got data but not currently parsing anything")):y.length<=m._parserBytesLeft?function(){return g(m,y,T,_)}:function(){var M=y.slice(0,m._parserBytesLeft);return g(m,M,T,function(w){if(w)return _(w);if(y.length>M.length)return function(){return d(m,y.slice(M.length),T,_)}})}}t(d,"_data");function g(m,y,T,_){if(m._parserBytesLeft-=y.length,r("%o bytes left for stream piece",m._parserBytesLeft),m._parserState===i?(m._parserBuffers.push(y),m._parserBuffered+=y.length):m._parserState===o&&T(y),m._parserBytesLeft===0){var M=m._parserCallback;if(M&&m._parserState===i&&m._parserBuffers.length>1&&(y=Buffer.concat(m._parserBuffers,m._parserBuffered)),m._parserState!==i&&(y=null),m._parserCallback=null,m._parserBuffered=0,m._parserState=n,m._parserBuffers.splice(0),M){var w=[];y&&w.push(y),T&&w.push(T);var x=M.length>w.length;x&&w.push(b(_));var A=M.apply(m,w);if(!x||_===A)return _}}else return _}t(g,"process");var p=b(d);function b(m){return function(){for(var y=m.apply(this,arguments);typeof y=="function";)y=y();return y}}return t(b,"trampoline"),Uk}t(yRe,"requireStreamParser");var qj;function oo(){if(qj)return Jh;qj=1;var e=hme.Transform,r=yRe();function n(){e.call(this,{readableObjectMode:!0})}t(n,"ParserStream"),n.prototype=Object.create(e.prototype),n.prototype.constructor=n,r(n.prototype),Jh.ParserStream=n,Jh.sliceEq=function(s,o,a){for(var l=o,u=0;u<a.length;)if(s[l++]!==a[u++])return!1;return!0},Jh.str2arr=function(s,o){var a=[],l=0;if(o&&o==="hex")for(;l<s.length;)a.push(parseInt(s.slice(l,l+2),16)),l+=2;else for(;l<s.length;l++)a.push(s.charCodeAt(l)&255);return a},Jh.readUInt16LE=function(s,o){return s[o]|s[o+1]<<8},Jh.readUInt16BE=function(s,o){return s[o+1]|s[o]<<8},Jh.readUInt32LE=function(s,o){return s[o]|s[o+1]<<8|s[o+2]<<16|s[o+3]*16777216},Jh.readUInt32BE=function(s,o){return s[o+3]|s[o+2]<<8|s[o+1]<<16|s[o]*16777216};function i(s,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=s,o&&(this.code=o),a&&(this.statusCode=a)}return t(i,"ProbeError"),i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,Jh.ProbeError=i,Jh}t(oo,"requireCommon");var Bm={},Uj;function mRe(){if(Uj)return Bm;Uj=1;var e=oo().readUInt16BE,r=oo().readUInt32BE;function n(h,v){if(h.length<4+v)return null;var c=r(h,v);return h.length<c+v||c<8?null:{boxtype:String.fromCharCode.apply(null,h.slice(v+4,v+8)),data:h.slice(v+8,v+c),end:v+c}}t(n,"unbox"),Bm.unbox=n;function i(h,v){for(var c=0;;){var d=n(h,c);if(!d)break;switch(d.boxtype){case"ispe":v.sizes.push({width:r(d.data,4),height:r(d.data,8)});break;case"irot":v.transforms.push({type:"irot",value:d.data[0]&3});break;case"imir":v.transforms.push({type:"imir",value:d.data[0]&1});break}c=d.end}}t(i,"scan_ipco");function s(h,v,c){for(var d=0,g=0;g<c;g++)d=d*256+(h[v+g]||0);return d}t(s,"readUIntBE");function o(h,v){for(var c=h[4]>>4&15,d=h[4]&15,g=h[5]>>4&15,p=e(h,6),b=8,m=0;m<p;m++){var y=e(h,b);b+=2;var T=e(h,b);b+=2;var _=s(h,b,g);b+=g;var M=e(h,b);if(b+=2,T===0&&M===1){var w=s(h,b,c),x=s(h,b+c,d);v.item_loc[y]={length:x,offset:w+_}}b+=M*(c+d)}}t(o,"scan_iloc");function a(h,v){for(var c=e(h,4),d=6,g=0;g<c;g++){var p=n(h,d);if(!p)break;if(p.boxtype==="infe"){for(var b=e(p.data,4),m="",y=8;y<p.data.length&&p.data[y];y++)m+=String.fromCharCode(p.data[y]);v.item_inf[m]=b}d=p.end}}t(a,"scan_iinf");function l(h,v){for(var c=0;;){var d=n(h,c);if(!d)break;d.boxtype==="ipco"&&i(d.data,v),c=d.end}}t(l,"scan_iprp");function u(h,v){for(var c=4;;){var d=n(h,c);if(!d)break;d.boxtype==="iprp"&&l(d.data,v),d.boxtype==="iloc"&&o(d.data,v),d.boxtype==="iinf"&&a(d.data,v),c=d.end}}t(u,"scan_meta");function f(h){var v=h.reduce(function(g,p){return g.width>p.width||g.width===p.width&&g.height>p.height?g:p}),c=h.reduce(function(g,p){return g.height>p.height||g.height===p.height&&g.width>p.width?g:p}),d;return v.width>c.height||v.width===c.height&&v.height>c.width?d=v:d=c,d}return t(f,"getMaxSize"),Bm.readSizeFromMeta=function(h){var v={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(u(h,v),!!v.sizes.length){var c=f(v.sizes),d=1;v.transforms.forEach(function(p){var b={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},m={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(p.type==="imir"&&(p.value===0?d=m[d]:(d=m[d],d=b[d],d=b[d])),p.type==="irot")for(var y=0;y<p.value;y++)d=b[d]});var g=null;return v.item_inf.Exif&&(g=v.item_loc[v.item_inf.Exif]),{width:c.width,height:c.height,orientation:v.transforms.length?d:null,variants:v.sizes,exif_location:g}}},Bm.getMimeType=function(h){var v=String.fromCharCode.apply(null,h.slice(0,4)),c={};c[v]=!0;for(var d=8;d<h.length;d+=4)c[String.fromCharCode.apply(null,h.slice(d,d+4))]=!0;if(!(!c.mif1&&!c.msf1&&!c.miaf))return v==="avif"||v==="avis"||v==="avio"?{type:"avif",mime:"image/avif"}:v==="heic"||v==="heix"?{type:"heic",mime:"image/heic"}:v==="hevc"||v==="hevx"?{type:"heic",mime:"image/heic-sequence"}:c.avif||c.avis?{type:"avif",mime:"image/avif"}:c.heic||c.heix||c.hevc||c.hevx||c.heis?c.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}},Bm}t(mRe,"requireMiaf_utils");var Ib={},Hj;function M7(){if(Hj)return Ib;Hj=1;function e(i,s){var o=new Error(i);return o.code=s,o}t(e,"error");function r(i){try{return decodeURIComponent(escape(i))}catch{return i}}t(r,"utf8_decode");function n(i,s,o){this.input=i.subarray(s,o),this.start=s;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*")throw e("invalid TIFF signature","EBADDATA");this.big_endian=a[0]==="M"}return t(n,"ExifParser"),n.prototype.each=function(i){this.aborted=!1;var s=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:s}];this.ifds_to_read.length>0&&!this.aborted;){var o=this.ifds_to_read.shift();!o.offset||this.scan_ifd(o.id,o.offset,i)}},n.prototype.read_uint16=function(i){var s=this.input;if(i+2>s.length)throw e("unexpected EOF","EBADDATA");return this.big_endian?s[i]*256+s[i+1]:s[i]+s[i+1]*256},n.prototype.read_uint32=function(i){var s=this.input;if(i+4>s.length)throw e("unexpected EOF","EBADDATA");return this.big_endian?s[i]*16777216+s[i+1]*65536+s[i+2]*256+s[i+3]:s[i]+s[i+1]*256+s[i+2]*65536+s[i+3]*16777216},n.prototype.is_subifd_link=function(i,s){return i===0&&s===34665||i===0&&s===34853||i===34665&&s===40965},n.prototype.exif_format_length=function(i){switch(i){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},n.prototype.exif_format_read=function(i,s){var o;switch(i){case 1:case 2:return o=this.input[s],o;case 6:return o=this.input[s],o|(o&128)*33554430;case 3:return o=this.read_uint16(s),o;case 8:return o=this.read_uint16(s),o|(o&32768)*131070;case 4:return o=this.read_uint32(s),o;case 9:return o=this.read_uint32(s),o|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},n.prototype.scan_ifd=function(i,s,o){var a=this.read_uint16(s);s+=2;for(var l=0;l<a;l++){var u=this.read_uint16(s),f=this.read_uint16(s+2),h=this.read_uint32(s+4),v=this.exif_format_length(f),c=h*v,d=c<=4?s+8:this.read_uint32(s+8),g=!1;if(d+c>this.input.length)throw e("unexpected EOF","EBADDATA");for(var p=[],b=d,m=0;m<h;m++,b+=v){var y=this.exif_format_read(f,b);if(y===null){p=null;break}p.push(y)}Array.isArray(p)&&f===2&&(p=r(String.fromCharCode.apply(null,p)),p&&p[p.length-1]==="\0"&&(p=p.slice(0,-1))),this.is_subifd_link(i,u)&&Array.isArray(p)&&Number.isInteger(p[0])&&p[0]>0&&(this.ifds_to_read.push({id:u,offset:p[0]}),g=!0);var T={is_big_endian:this.big_endian,ifd:i,tag:u,format:f,count:h,entry_offset:s+this.start,data_length:c,data_offset:d+this.start,value:p,is_subifd_link:g};if(o(T)===!1){this.aborted=!0;return}s+=12}i===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(s)})},Ib.ExifParser=n,Ib.get_orientation=function(i){var s=0;try{return new n(i,0,i.length).each(function(o){if(o.ifd===0&&o.tag===274&&Array.isArray(o.value))return s=o.value[0],!1}),s}catch{return-1}},Ib}t(M7,"requireExif_utils");var Hk,$j;function xRe(){if($j)return Hk;$j=1;var e=oo().str2arr,r=oo().sliceEq,n=oo().readUInt32BE,i=mRe(),s=M7(),o=e("ftyp");return Hk=t(function(a){if(!!r(a,4,o)){var l=i.unbox(a,0);if(!!l){var u=i.getMimeType(l.data);if(!!u){for(var f,h=l.end;;){var v=i.unbox(a,h);if(!v)break;if(h=v.end,v.boxtype==="mdat")return;if(v.boxtype==="meta"){f=v.data;break}}if(!!f){var c=i.readSizeFromMeta(f);if(!!c){var d={width:c.width,height:c.height,type:u.type,mime:u.mime,wUnits:"px",hUnits:"px"};if(c.variants.length>1&&(d.variants=c.variants),c.orientation&&(d.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=a.length){var g=n(a,c.exif_location.offset),p=a.slice(c.exif_location.offset+g+4,c.exif_location.offset+c.exif_location.length),b=s.get_orientation(p);b>0&&(d.orientation=b)}return d}}}}}},"avif"),Hk}t(xRe,"requireAvif");var $k,Vj;function bRe(){if(Vj)return $k;Vj=1;var e=oo().str2arr,r=oo().sliceEq,n=oo().readUInt16LE,i=e("BM");return $k=t(function(s){if(!(s.length<26)&&!!r(s,0,i))return{width:n(s,18),height:n(s,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}},"bmp"),$k}t(bRe,"requireBmp");var Vk,Gj;function _Re(){if(Gj)return Vk;Gj=1;var e=oo().str2arr,r=oo().sliceEq,n=oo().readUInt16LE,i=e("GIF87a"),s=e("GIF89a");return Vk=t(function(o){if(!(o.length<10)&&!(!r(o,0,i)&&!r(o,0,s)))return{width:n(o,6),height:n(o,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}},"gif"),Vk}t(_Re,"requireGif");var Gk,jj;function wRe(){if(jj)return Gk;jj=1;var e=oo().readUInt16LE,r=0,n=1,i=16;return Gk=t(function(s){var o=e(s,0),a=e(s,2),l=e(s,4);if(!(o!==r||a!==n||!l)){for(var u=[],f={width:0,height:0},h=0;h<l;h++){var v=s[6+i*h]||256,c=s[6+i*h+1]||256,d={width:v,height:c};u.push(d),(v>f.width||c>f.height)&&(f=d)}return{width:f.width,height:f.height,variants:u,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}},"ico"),Gk}t(wRe,"requireIco");var jk,Yj;function TRe(){if(Yj)return jk;Yj=1;var e=oo().readUInt16BE,r=oo().str2arr,n=oo().sliceEq,i=M7(),s=r("Exif\0\0");return jk=t(function(o){if(!(o.length<2)&&!(o[0]!==255||o[1]!==216||o[2]!==255))for(var a=2;;){for(;;){if(o.length-a<2)return;if(o[a++]===255)break}for(var l=o[a++],u;l===255;)l=o[a++];if(208<=l&&l<=217||l===1)u=0;else if(192<=l&&l<=254){if(o.length-a<2)return;u=e(o,a)-2,a+=2}else return;if(l===217||l===218)return;var f;if(l===225&&u>=10&&n(o,a,s)&&(f=i.get_orientation(o.slice(a+6,a+u))),u>=5&&192<=l&&l<=207&&l!==196&&l!==200&&l!==204){if(o.length-a<u)return;var h={width:e(o,a+3),height:e(o,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(h.orientation=f),h}a+=u}},"jpeg"),jk}t(TRe,"requireJpeg");var Yk,Wj;function ARe(){if(Wj)return Yk;Wj=1;var e=oo().str2arr,r=oo().sliceEq,n=oo().readUInt32BE,i=e(`\x89PNG\r

`),s=e("IHDR");return Yk=t(function(o){if(!(o.length<24)&&!!r(o,0,i)&&!!r(o,12,s))return{width:n(o,16),height:n(o,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}},"png"),Yk}t(ARe,"requirePng");var Wk,Xj;function SRe(){if(Xj)return Wk;Xj=1;var e=oo().str2arr,r=oo().sliceEq,n=oo().readUInt32BE,i=e("8BPS\0");return Wk=t(function(s){if(!(s.length<6+16)&&!!r(s,0,i))return{width:n(s,6+12),height:n(s,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}},"psd"),Wk}t(SRe,"requirePsd");var Xk,Zj;function MRe(){if(Zj)return Xk;Zj=1;function e(v){return v===32||v===9||v===13||v===10}t(e,"isWhiteSpace");function r(v){return typeof v=="number"&&isFinite(v)&&v>0}t(r,"isFinitePositive");function n(v){var c=0,d=v.length;for(v[0]===239&&v[1]===187&&v[2]===191&&(c=3);c<d&&e(v[c]);)c++;return c===d?!1:v[c]===60}t(n,"canBeSvg");var i=/<[-_.:a-zA-Z0-9][^>]*>/,s=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,o=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,l=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,u=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(v){var c=v.match(o),d=v.match(a),g=v.match(l);return{width:c&&(c[1]||c[2]),height:d&&(d[1]||d[2]),viewbox:g&&(g[1]||g[2])}}t(f,"svgAttrs");function h(v){return u.test(v)?v.match(u)[0]:"px"}return t(h,"units"),Xk=t(function(v){if(!!n(v)){for(var c="",d=0;d<v.length;d++)c+=String.fromCharCode(v[d]);var g=(c.match(i)||[""])[0];if(!!s.test(g)){var p=f(g),b=parseFloat(p.width),m=parseFloat(p.height);if(p.width&&p.height)return!r(b)||!r(m)?void 0:{width:b,height:m,type:"svg",mime:"image/svg+xml",wUnits:h(p.width),hUnits:h(p.height)};var y=(p.viewbox||"").split(" "),T={width:y[2],height:y[3]},_=parseFloat(T.width),M=parseFloat(T.height);if(!(!r(_)||!r(M))&&h(T.width)===h(T.height)){var w=_/M;return p.width?r(b)?{width:b,height:b/w,type:"svg",mime:"image/svg+xml",wUnits:h(p.width),hUnits:h(p.width)}:void 0:p.height?r(m)?{width:m*w,height:m,type:"svg",mime:"image/svg+xml",wUnits:h(p.height),hUnits:h(p.height)}:void 0:{width:_,height:M,type:"svg",mime:"image/svg+xml",wUnits:h(T.width),hUnits:h(T.height)}}}}},"svg"),Xk}t(MRe,"requireSvg");var Zk,Kj;function kRe(){if(Kj)return Zk;Kj=1;var e=oo().str2arr,r=oo().sliceEq,n=oo().readUInt16LE,i=oo().readUInt16BE,s=oo().readUInt32LE,o=oo().readUInt32BE,a=e("II*\0"),l=e("MM\0*");function u(v,c,d){return d?i(v,c):n(v,c)}t(u,"readUInt16");function f(v,c,d){return d?o(v,c):s(v,c)}t(f,"readUInt32");function h(v,c,d){var g=u(v,c+2,d),p=f(v,c+4,d);return p!==1||g!==3&&g!==4?null:g===3?u(v,c+8,d):f(v,c+8,d)}return t(h,"readIFDValue"),Zk=t(function(v){if(!(v.length<8)&&!(!r(v,0,a)&&!r(v,0,l))){var c=v[0]===77,d=f(v,4,c)-8;if(!(d<0)){var g=d+8;if(!(v.length-g<2)){var p=u(v,g+0,c)*12;if(!(p<=0)&&(g+=2,!(v.length-g<p))){var b,m,y,T;for(b=0;b<p;b+=12)T=u(v,g+b,c),T===256?m=h(v,g+b,c):T===257&&(y=h(v,g+b,c));if(m&&y)return{width:m,height:y,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}},"tiff"),Zk}t(kRe,"requireTiff");var Kk,Jj;function ERe(){if(Jj)return Kk;Jj=1;var e=oo().str2arr,r=oo().sliceEq,n=oo().readUInt16LE,i=oo().readUInt32LE,s=M7(),o=e("RIFF"),a=e("WEBP");function l(h,v){if(!(h[v+3]!==157||h[v+4]!==1||h[v+5]!==42))return{width:n(h,v+6)&16383,height:n(h,v+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}t(l,"parseVP8");function u(h,v){if(h[v]===47){var c=i(h,v+1);return{width:(c&16383)+1,height:(c>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}t(u,"parseVP8L");function f(h,v){return{width:(h[v+6]<<16|h[v+5]<<8|h[v+4])+1,height:(h[v+9]<<v|h[v+8]<<8|h[v+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}return t(f,"parseVP8X"),Kk=t(function(h){if(!(h.length<16)&&!(!r(h,0,o)&&!r(h,8,a))){var v=12,c=null,d=0,g=i(h,4)+8;if(!(g>h.length)){for(;v+8<g;){if(h[v]===0){v++;continue}var p=String.fromCharCode.apply(null,h.slice(v,v+4)),b=i(h,v+4);p==="VP8 "&&b>=10?c=c||l(h,v+8):p==="VP8L"&&b>=9?c=c||u(h,v+8):p==="VP8X"&&b>=10?c=c||f(h,v+8):p==="EXIF"&&(d=s.get_orientation(h.slice(v+8,v+8+b)),v=1/0),v+=8+b}if(!!c)return d>0&&(c.orientation=d),c}}},"webp"),Kk}t(ERe,"requireWebp");var Jk,Qj;function CRe(){return Qj||(Qj=1,Jk={avif:xRe(),bmp:bRe(),gif:_Re(),ico:wRe(),jpeg:TRe(),png:ARe(),psd:SRe(),svg:MRe(),tiff:kRe(),webp:ERe()}),Jk}t(CRe,"requireParsers_sync");var eY;function LRe(){if(eY)return Rb.exports;eY=1;var e=CRe();function r(n){for(var i=Object.keys(e),s=0;s<i.length;s++){var o=e[i[s]](n);if(o)return o}return null}return t(r,"probeBuffer"),Rb.exports=t(function(i){return r(i)},"get_image_size"),Rb.exports.parsers=e,Rb.exports}t(LRe,"requireSync");var Qk={},Om={},tY;function RRe(){if(tY)return Om;tY=1,Om.byteLength=l,Om.toByteArray=f,Om.fromByteArray=c;for(var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=i.length;s<o;++s)e[s]=i[s],r[i.charCodeAt(s)]=s;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function a(d){var g=d.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=d.indexOf("=");p===-1&&(p=g);var b=p===g?0:4-p%4;return[p,b]}t(a,"getLens");function l(d){var g=a(d),p=g[0],b=g[1];return(p+b)*3/4-b}t(l,"byteLength");function u(d,g,p){return(g+p)*3/4-p}t(u,"_byteLength");function f(d){var g,p=a(d),b=p[0],m=p[1],y=new n(u(d,b,m)),T=0,_=m>0?b-4:b,M;for(M=0;M<_;M+=4)g=r[d.charCodeAt(M)]<<18|r[d.charCodeAt(M+1)]<<12|r[d.charCodeAt(M+2)]<<6|r[d.charCodeAt(M+3)],y[T++]=g>>16&255,y[T++]=g>>8&255,y[T++]=g&255;return m===2&&(g=r[d.charCodeAt(M)]<<2|r[d.charCodeAt(M+1)]>>4,y[T++]=g&255),m===1&&(g=r[d.charCodeAt(M)]<<10|r[d.charCodeAt(M+1)]<<4|r[d.charCodeAt(M+2)]>>2,y[T++]=g>>8&255,y[T++]=g&255),y}t(f,"toByteArray");function h(d){return e[d>>18&63]+e[d>>12&63]+e[d>>6&63]+e[d&63]}t(h,"tripletToBase64");function v(d,g,p){for(var b,m=[],y=g;y<p;y+=3)b=(d[y]<<16&16711680)+(d[y+1]<<8&65280)+(d[y+2]&255),m.push(h(b));return m.join("")}t(v,"encodeChunk");function c(d){for(var g,p=d.length,b=p%3,m=[],y=16383,T=0,_=p-b;T<_;T+=y)m.push(v(d,T,T+y>_?_:T+y));return b===1?(g=d[p-1],m.push(e[g>>2]+e[g<<4&63]+"==")):b===2&&(g=(d[p-2]<<8)+d[p-1],m.push(e[g>>10]+e[g>>4&63]+e[g<<2&63]+"=")),m.join("")}return t(c,"fromByteArray"),Om}t(RRe,"requireBase64Js");var zb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var rY;function PRe(){return rY||(rY=1,zb.read=function(e,r,n,i,s){var o,a,l=s*8-i-1,u=(1<<l)-1,f=u>>1,h=-7,v=n?s-1:0,c=n?-1:1,d=e[r+v];for(v+=c,o=d&(1<<-h)-1,d>>=-h,h+=l;h>0;o=o*256+e[r+v],v+=c,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=i;h>0;a=a*256+e[r+v],v+=c,h-=8);if(o===0)o=1-f;else{if(o===u)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,i),o=o-f}return(d?-1:1)*a*Math.pow(2,o-i)},zb.write=function(e,r,n,i,s,o){var a,l,u,f=o*8-s-1,h=(1<<f)-1,v=h>>1,c=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,g=i?1:-1,p=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,a=h):(a=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+v>=1?r+=c/u:r+=c*Math.pow(2,1-v),r*u>=2&&(a++,u/=2),a+v>=h?(l=0,a=h):a+v>=1?(l=(r*u-1)*Math.pow(2,s),a=a+v):(l=r*Math.pow(2,v-1)*Math.pow(2,s),a=0));s>=8;e[n+d]=l&255,d+=g,l/=256,s-=8);for(a=a<<s|l,f+=s;f>0;e[n+d]=a&255,d+=g,a/=256,f-=8);e[n+d-g]|=p*128}),zb}t(PRe,"requireIeee754");var e5,aY;function DRe(){if(aY)return e5;aY=1;var e={}.toString;return e5=Array.isArray||function(r){return e.call(r)=="[object Array]"},e5}t(DRe,"requireIsarray");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var nY;function bce(){return nY||(nY=1,function(e){var r=RRe(),n=PRe(),i=DRe();e.Buffer=l,e.SlowBuffer=m,e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=xs.TYPED_ARRAY_SUPPORT!==void 0?xs.TYPED_ARRAY_SUPPORT:s(),e.kMaxLength=o();function s(){try{var me=new Uint8Array(1);return me.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},me.foo()===42&&typeof me.subarray=="function"&&me.subarray(1,1).byteLength===0}catch{return!1}}t(s,"typedArraySupport");function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}t(o,"kMaxLength");function a(me,pe){if(o()<pe)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(me=new Uint8Array(pe),me.__proto__=l.prototype):(me===null&&(me=new l(pe)),me.length=pe),me}t(a,"createBuffer");function l(me,pe,oe){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(me,pe,oe);if(typeof me=="number"){if(typeof pe=="string")throw new Error("If encoding is specified then the first argument must be a string");return v(this,me)}return u(this,me,pe,oe)}t(l,"Buffer"),l.poolSize=8192,l._augment=function(me){return me.__proto__=l.prototype,me};function u(me,pe,oe,de){if(typeof pe=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&pe instanceof ArrayBuffer?g(me,pe,oe,de):typeof pe=="string"?c(me,pe,oe):p(me,pe)}t(u,"from"),l.from=function(me,pe,oe){return u(null,me,pe,oe)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0}));function f(me){if(typeof me!="number")throw new TypeError('"size" argument must be a number');if(me<0)throw new RangeError('"size" argument must not be negative')}t(f,"assertSize");function h(me,pe,oe,de){return f(pe),pe<=0?a(me,pe):oe!==void 0?typeof de=="string"?a(me,pe).fill(oe,de):a(me,pe).fill(oe):a(me,pe)}t(h,"alloc"),l.alloc=function(me,pe,oe){return h(null,me,pe,oe)};function v(me,pe){if(f(pe),me=a(me,pe<0?0:b(pe)|0),!l.TYPED_ARRAY_SUPPORT)for(var oe=0;oe<pe;++oe)me[oe]=0;return me}t(v,"allocUnsafe"),l.allocUnsafe=function(me){return v(null,me)},l.allocUnsafeSlow=function(me){return v(null,me)};function c(me,pe,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!l.isEncoding(oe))throw new TypeError('"encoding" must be a valid string encoding');var de=y(pe,oe)|0;me=a(me,de);var ye=me.write(pe,oe);return ye!==de&&(me=me.slice(0,ye)),me}t(c,"fromString");function d(me,pe){var oe=pe.length<0?0:b(pe.length)|0;me=a(me,oe);for(var de=0;de<oe;de+=1)me[de]=pe[de]&255;return me}t(d,"fromArrayLike");function g(me,pe,oe,de){if(pe.byteLength,oe<0||pe.byteLength<oe)throw new RangeError("'offset' is out of bounds");if(pe.byteLength<oe+(de||0))throw new RangeError("'length' is out of bounds");return oe===void 0&&de===void 0?pe=new Uint8Array(pe):de===void 0?pe=new Uint8Array(pe,oe):pe=new Uint8Array(pe,oe,de),l.TYPED_ARRAY_SUPPORT?(me=pe,me.__proto__=l.prototype):me=d(me,pe),me}t(g,"fromArrayBuffer");function p(me,pe){if(l.isBuffer(pe)){var oe=b(pe.length)|0;return me=a(me,oe),me.length===0||pe.copy(me,0,0,oe),me}if(pe){if(typeof ArrayBuffer<"u"&&pe.buffer instanceof ArrayBuffer||"length"in pe)return typeof pe.length!="number"||Te(pe.length)?a(me,0):d(me,pe);if(pe.type==="Buffer"&&i(pe.data))return d(me,pe.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}t(p,"fromObject");function b(me){if(me>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return me|0}t(b,"checked");function m(me){return+me!=me&&(me=0),l.alloc(+me)}t(m,"SlowBuffer"),l.isBuffer=t(function(pe){return!!(pe!=null&&pe._isBuffer)},"isBuffer"),l.compare=t(function(pe,oe){if(!l.isBuffer(pe)||!l.isBuffer(oe))throw new TypeError("Arguments must be Buffers");if(pe===oe)return 0;for(var de=pe.length,ye=oe.length,we=0,Ee=Math.min(de,ye);we<Ee;++we)if(pe[we]!==oe[we]){de=pe[we],ye=oe[we];break}return de<ye?-1:ye<de?1:0},"compare"),l.isEncoding=t(function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),l.concat=t(function(pe,oe){if(!i(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(pe.length===0)return l.alloc(0);var de;if(oe===void 0)for(oe=0,de=0;de<pe.length;++de)oe+=pe[de].length;var ye=l.allocUnsafe(oe),we=0;for(de=0;de<pe.length;++de){var Ee=pe[de];if(!l.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(ye,we),we+=Ee.length}return ye},"concat");function y(me,pe){if(l.isBuffer(me))return me.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(me)||me instanceof ArrayBuffer))return me.byteLength;typeof me!="string"&&(me=""+me);var oe=me.length;if(oe===0)return 0;for(var de=!1;;)switch(pe){case"ascii":case"latin1":case"binary":return oe;case"utf8":case"utf-8":case void 0:return re(me).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe*2;case"hex":return oe>>>1;case"base64":return ce(me).length;default:if(de)return re(me).length;pe=(""+pe).toLowerCase(),de=!0}}t(y,"byteLength"),l.byteLength=y;function T(me,pe,oe){var de=!1;if((pe===void 0||pe<0)&&(pe=0),pe>this.length||((oe===void 0||oe>this.length)&&(oe=this.length),oe<=0)||(oe>>>=0,pe>>>=0,oe<=pe))return"";for(me||(me="utf8");;)switch(me){case"hex":return q(this,pe,oe);case"utf8":case"utf-8":return B(this,pe,oe);case"ascii":return F(this,pe,oe);case"latin1":case"binary":return O(this,pe,oe);case"base64":return D(this,pe,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,pe,oe);default:if(de)throw new TypeError("Unknown encoding: "+me);me=(me+"").toLowerCase(),de=!0}}t(T,"slowToString"),l.prototype._isBuffer=!0;function _(me,pe,oe){var de=me[pe];me[pe]=me[oe],me[oe]=de}t(_,"swap"),l.prototype.swap16=t(function(){var pe=this.length;if(pe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<pe;oe+=2)_(this,oe,oe+1);return this},"swap16"),l.prototype.swap32=t(function(){var pe=this.length;if(pe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<pe;oe+=4)_(this,oe,oe+3),_(this,oe+1,oe+2);return this},"swap32"),l.prototype.swap64=t(function(){var pe=this.length;if(pe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<pe;oe+=8)_(this,oe,oe+7),_(this,oe+1,oe+6),_(this,oe+2,oe+5),_(this,oe+3,oe+4);return this},"swap64"),l.prototype.toString=t(function(){var pe=this.length|0;return pe===0?"":arguments.length===0?B(this,0,pe):T.apply(this,arguments)},"toString"),l.prototype.equals=t(function(pe){if(!l.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe?!0:l.compare(this,pe)===0},"equals"),l.prototype.inspect=t(function(){var pe="",oe=e.INSPECT_MAX_BYTES;return this.length>0&&(pe=this.toString("hex",0,oe).match(/.{2}/g).join(" "),this.length>oe&&(pe+=" ... ")),"<Buffer "+pe+">"},"inspect"),l.prototype.compare=t(function(pe,oe,de,ye,we){if(!l.isBuffer(pe))throw new TypeError("Argument must be a Buffer");if(oe===void 0&&(oe=0),de===void 0&&(de=pe?pe.length:0),ye===void 0&&(ye=0),we===void 0&&(we=this.length),oe<0||de>pe.length||ye<0||we>this.length)throw new RangeError("out of range index");if(ye>=we&&oe>=de)return 0;if(ye>=we)return-1;if(oe>=de)return 1;if(oe>>>=0,de>>>=0,ye>>>=0,we>>>=0,this===pe)return 0;for(var Ee=we-ye,De=de-oe,Fe=Math.min(Ee,De),qe=this.slice(ye,we),Je=pe.slice(oe,de),Ge=0;Ge<Fe;++Ge)if(qe[Ge]!==Je[Ge]){Ee=qe[Ge],De=Je[Ge];break}return Ee<De?-1:De<Ee?1:0},"compare");function M(me,pe,oe,de,ye){if(me.length===0)return-1;if(typeof oe=="string"?(de=oe,oe=0):oe>2147483647?oe=2147483647:oe<-2147483648&&(oe=-2147483648),oe=+oe,isNaN(oe)&&(oe=ye?0:me.length-1),oe<0&&(oe=me.length+oe),oe>=me.length){if(ye)return-1;oe=me.length-1}else if(oe<0)if(ye)oe=0;else return-1;if(typeof pe=="string"&&(pe=l.from(pe,de)),l.isBuffer(pe))return pe.length===0?-1:w(me,pe,oe,de,ye);if(typeof pe=="number")return pe=pe&255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(me,pe,oe):Uint8Array.prototype.lastIndexOf.call(me,pe,oe):w(me,[pe],oe,de,ye);throw new TypeError("val must be string, number or Buffer")}t(M,"bidirectionalIndexOf");function w(me,pe,oe,de,ye){var we=1,Ee=me.length,De=pe.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(me.length<2||pe.length<2)return-1;we=2,Ee/=2,De/=2,oe/=2}function Fe(Ue,Ye){return we===1?Ue[Ye]:Ue.readUInt16BE(Ye*we)}t(Fe,"read");var qe;if(ye){var Je=-1;for(qe=oe;qe<Ee;qe++)if(Fe(me,qe)===Fe(pe,Je===-1?0:qe-Je)){if(Je===-1&&(Je=qe),qe-Je+1===De)return Je*we}else Je!==-1&&(qe-=qe-Je),Je=-1}else for(oe+De>Ee&&(oe=Ee-De),qe=oe;qe>=0;qe--){for(var Ge=!0,et=0;et<De;et++)if(Fe(me,qe+et)!==Fe(pe,et)){Ge=!1;break}if(Ge)return qe}return-1}t(w,"arrayIndexOf"),l.prototype.includes=t(function(pe,oe,de){return this.indexOf(pe,oe,de)!==-1},"includes"),l.prototype.indexOf=t(function(pe,oe,de){return M(this,pe,oe,de,!0)},"indexOf"),l.prototype.lastIndexOf=t(function(pe,oe,de){return M(this,pe,oe,de,!1)},"lastIndexOf");function x(me,pe,oe,de){oe=Number(oe)||0;var ye=me.length-oe;de?(de=Number(de),de>ye&&(de=ye)):de=ye;var we=pe.length;if(we%2!==0)throw new TypeError("Invalid hex string");de>we/2&&(de=we/2);for(var Ee=0;Ee<de;++Ee){var De=parseInt(pe.substr(Ee*2,2),16);if(isNaN(De))return Ee;me[oe+Ee]=De}return Ee}t(x,"hexWrite");function A(me,pe,oe,de){return xe(re(pe,me.length-oe),me,oe,de)}t(A,"utf8Write");function S(me,pe,oe,de){return xe(ae(pe),me,oe,de)}t(S,"asciiWrite");function k(me,pe,oe,de){return S(me,pe,oe,de)}t(k,"latin1Write");function L(me,pe,oe,de){return xe(ce(pe),me,oe,de)}t(L,"base64Write");function P(me,pe,oe,de){return xe(fe(pe,me.length-oe),me,oe,de)}t(P,"ucs2Write"),l.prototype.write=t(function(pe,oe,de,ye){if(oe===void 0)ye="utf8",de=this.length,oe=0;else if(de===void 0&&typeof oe=="string")ye=oe,de=this.length,oe=0;else if(isFinite(oe))oe=oe|0,isFinite(de)?(de=de|0,ye===void 0&&(ye="utf8")):(ye=de,de=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var we=this.length-oe;if((de===void 0||de>we)&&(de=we),pe.length>0&&(de<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");for(var Ee=!1;;)switch(ye){case"hex":return x(this,pe,oe,de);case"utf8":case"utf-8":return A(this,pe,oe,de);case"ascii":return S(this,pe,oe,de);case"latin1":case"binary":return k(this,pe,oe,de);case"base64":return L(this,pe,oe,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,pe,oe,de);default:if(Ee)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Ee=!0}},"write"),l.prototype.toJSON=t(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function D(me,pe,oe){return pe===0&&oe===me.length?r.fromByteArray(me):r.fromByteArray(me.slice(pe,oe))}t(D,"base64Slice");function B(me,pe,oe){oe=Math.min(me.length,oe);for(var de=[],ye=pe;ye<oe;){var we=me[ye],Ee=null,De=we>239?4:we>223?3:we>191?2:1;if(ye+De<=oe){var Fe,qe,Je,Ge;switch(De){case 1:we<128&&(Ee=we);break;case 2:Fe=me[ye+1],(Fe&192)===128&&(Ge=(we&31)<<6|Fe&63,Ge>127&&(Ee=Ge));break;case 3:Fe=me[ye+1],qe=me[ye+2],(Fe&192)===128&&(qe&192)===128&&(Ge=(we&15)<<12|(Fe&63)<<6|qe&63,Ge>2047&&(Ge<55296||Ge>57343)&&(Ee=Ge));break;case 4:Fe=me[ye+1],qe=me[ye+2],Je=me[ye+3],(Fe&192)===128&&(qe&192)===128&&(Je&192)===128&&(Ge=(we&15)<<18|(Fe&63)<<12|(qe&63)<<6|Je&63,Ge>65535&&Ge<1114112&&(Ee=Ge))}}Ee===null?(Ee=65533,De=1):Ee>65535&&(Ee-=65536,de.push(Ee>>>10&1023|55296),Ee=56320|Ee&1023),de.push(Ee),ye+=De}return R(de)}t(B,"utf8Slice");var z=4096;function R(me){var pe=me.length;if(pe<=z)return String.fromCharCode.apply(String,me);for(var oe="",de=0;de<pe;)oe+=String.fromCharCode.apply(String,me.slice(de,de+=z));return oe}t(R,"decodeCodePointsArray");function F(me,pe,oe){var de="";oe=Math.min(me.length,oe);for(var ye=pe;ye<oe;++ye)de+=String.fromCharCode(me[ye]&127);return de}t(F,"asciiSlice");function O(me,pe,oe){var de="";oe=Math.min(me.length,oe);for(var ye=pe;ye<oe;++ye)de+=String.fromCharCode(me[ye]);return de}t(O,"latin1Slice");function q(me,pe,oe){var de=me.length;(!pe||pe<0)&&(pe=0),(!oe||oe<0||oe>de)&&(oe=de);for(var ye="",we=pe;we<oe;++we)ye+=he(me[we]);return ye}t(q,"hexSlice");function H(me,pe,oe){for(var de=me.slice(pe,oe),ye="",we=0;we<de.length;we+=2)ye+=String.fromCharCode(de[we]+de[we+1]*256);return ye}t(H,"utf16leSlice"),l.prototype.slice=t(function(pe,oe){var de=this.length;pe=~~pe,oe=oe===void 0?de:~~oe,pe<0?(pe+=de,pe<0&&(pe=0)):pe>de&&(pe=de),oe<0?(oe+=de,oe<0&&(oe=0)):oe>de&&(oe=de),oe<pe&&(oe=pe);var ye;if(l.TYPED_ARRAY_SUPPORT)ye=this.subarray(pe,oe),ye.__proto__=l.prototype;else{var we=oe-pe;ye=new l(we,void 0);for(var Ee=0;Ee<we;++Ee)ye[Ee]=this[Ee+pe]}return ye},"slice");function j(me,pe,oe){if(me%1!==0||me<0)throw new RangeError("offset is not uint");if(me+pe>oe)throw new RangeError("Trying to access beyond buffer length")}t(j,"checkOffset"),l.prototype.readUIntLE=t(function(pe,oe,de){pe=pe|0,oe=oe|0,de||j(pe,oe,this.length);for(var ye=this[pe],we=1,Ee=0;++Ee<oe&&(we*=256);)ye+=this[pe+Ee]*we;return ye},"readUIntLE"),l.prototype.readUIntBE=t(function(pe,oe,de){pe=pe|0,oe=oe|0,de||j(pe,oe,this.length);for(var ye=this[pe+--oe],we=1;oe>0&&(we*=256);)ye+=this[pe+--oe]*we;return ye},"readUIntBE"),l.prototype.readUInt8=t(function(pe,oe){return oe||j(pe,1,this.length),this[pe]},"readUInt8"),l.prototype.readUInt16LE=t(function(pe,oe){return oe||j(pe,2,this.length),this[pe]|this[pe+1]<<8},"readUInt16LE"),l.prototype.readUInt16BE=t(function(pe,oe){return oe||j(pe,2,this.length),this[pe]<<8|this[pe+1]},"readUInt16BE"),l.prototype.readUInt32LE=t(function(pe,oe){return oe||j(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+this[pe+3]*16777216},"readUInt32LE"),l.prototype.readUInt32BE=t(function(pe,oe){return oe||j(pe,4,this.length),this[pe]*16777216+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},"readUInt32BE"),l.prototype.readIntLE=t(function(pe,oe,de){pe=pe|0,oe=oe|0,de||j(pe,oe,this.length);for(var ye=this[pe],we=1,Ee=0;++Ee<oe&&(we*=256);)ye+=this[pe+Ee]*we;return we*=128,ye>=we&&(ye-=Math.pow(2,8*oe)),ye},"readIntLE"),l.prototype.readIntBE=t(function(pe,oe,de){pe=pe|0,oe=oe|0,de||j(pe,oe,this.length);for(var ye=oe,we=1,Ee=this[pe+--ye];ye>0&&(we*=256);)Ee+=this[pe+--ye]*we;return we*=128,Ee>=we&&(Ee-=Math.pow(2,8*oe)),Ee},"readIntBE"),l.prototype.readInt8=t(function(pe,oe){return oe||j(pe,1,this.length),this[pe]&128?(255-this[pe]+1)*-1:this[pe]},"readInt8"),l.prototype.readInt16LE=t(function(pe,oe){oe||j(pe,2,this.length);var de=this[pe]|this[pe+1]<<8;return de&32768?de|4294901760:de},"readInt16LE"),l.prototype.readInt16BE=t(function(pe,oe){oe||j(pe,2,this.length);var de=this[pe+1]|this[pe]<<8;return de&32768?de|4294901760:de},"readInt16BE"),l.prototype.readInt32LE=t(function(pe,oe){return oe||j(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},"readInt32LE"),l.prototype.readInt32BE=t(function(pe,oe){return oe||j(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},"readInt32BE"),l.prototype.readFloatLE=t(function(pe,oe){return oe||j(pe,4,this.length),n.read(this,pe,!0,23,4)},"readFloatLE"),l.prototype.readFloatBE=t(function(pe,oe){return oe||j(pe,4,this.length),n.read(this,pe,!1,23,4)},"readFloatBE"),l.prototype.readDoubleLE=t(function(pe,oe){return oe||j(pe,8,this.length),n.read(this,pe,!0,52,8)},"readDoubleLE"),l.prototype.readDoubleBE=t(function(pe,oe){return oe||j(pe,8,this.length),n.read(this,pe,!1,52,8)},"readDoubleBE");function X(me,pe,oe,de,ye,we){if(!l.isBuffer(me))throw new TypeError('"buffer" argument must be a Buffer instance');if(pe>ye||pe<we)throw new RangeError('"value" argument is out of bounds');if(oe+de>me.length)throw new RangeError("Index out of range")}t(X,"checkInt"),l.prototype.writeUIntLE=t(function(pe,oe,de,ye){if(pe=+pe,oe=oe|0,de=de|0,!ye){var we=Math.pow(2,8*de)-1;X(this,pe,oe,de,we,0)}var Ee=1,De=0;for(this[oe]=pe&255;++De<de&&(Ee*=256);)this[oe+De]=pe/Ee&255;return oe+de},"writeUIntLE"),l.prototype.writeUIntBE=t(function(pe,oe,de,ye){if(pe=+pe,oe=oe|0,de=de|0,!ye){var we=Math.pow(2,8*de)-1;X(this,pe,oe,de,we,0)}var Ee=de-1,De=1;for(this[oe+Ee]=pe&255;--Ee>=0&&(De*=256);)this[oe+Ee]=pe/De&255;return oe+de},"writeUIntBE"),l.prototype.writeUInt8=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,1,255,0),l.TYPED_ARRAY_SUPPORT||(pe=Math.floor(pe)),this[oe]=pe&255,oe+1},"writeUInt8");function G(me,pe,oe,de){pe<0&&(pe=65535+pe+1);for(var ye=0,we=Math.min(me.length-oe,2);ye<we;++ye)me[oe+ye]=(pe&255<<8*(de?ye:1-ye))>>>(de?ye:1-ye)*8}t(G,"objectWriteUInt16"),l.prototype.writeUInt16LE=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[oe]=pe&255,this[oe+1]=pe>>>8):G(this,pe,oe,!0),oe+2},"writeUInt16LE"),l.prototype.writeUInt16BE=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[oe]=pe>>>8,this[oe+1]=pe&255):G(this,pe,oe,!1),oe+2},"writeUInt16BE");function $(me,pe,oe,de){pe<0&&(pe=4294967295+pe+1);for(var ye=0,we=Math.min(me.length-oe,4);ye<we;++ye)me[oe+ye]=pe>>>(de?ye:3-ye)*8&255}t($,"objectWriteUInt32"),l.prototype.writeUInt32LE=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[oe+3]=pe>>>24,this[oe+2]=pe>>>16,this[oe+1]=pe>>>8,this[oe]=pe&255):$(this,pe,oe,!0),oe+4},"writeUInt32LE"),l.prototype.writeUInt32BE=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[oe]=pe>>>24,this[oe+1]=pe>>>16,this[oe+2]=pe>>>8,this[oe+3]=pe&255):$(this,pe,oe,!1),oe+4},"writeUInt32BE"),l.prototype.writeIntLE=t(function(pe,oe,de,ye){if(pe=+pe,oe=oe|0,!ye){var we=Math.pow(2,8*de-1);X(this,pe,oe,de,we-1,-we)}var Ee=0,De=1,Fe=0;for(this[oe]=pe&255;++Ee<de&&(De*=256);)pe<0&&Fe===0&&this[oe+Ee-1]!==0&&(Fe=1),this[oe+Ee]=(pe/De>>0)-Fe&255;return oe+de},"writeIntLE"),l.prototype.writeIntBE=t(function(pe,oe,de,ye){if(pe=+pe,oe=oe|0,!ye){var we=Math.pow(2,8*de-1);X(this,pe,oe,de,we-1,-we)}var Ee=de-1,De=1,Fe=0;for(this[oe+Ee]=pe&255;--Ee>=0&&(De*=256);)pe<0&&Fe===0&&this[oe+Ee+1]!==0&&(Fe=1),this[oe+Ee]=(pe/De>>0)-Fe&255;return oe+de},"writeIntBE"),l.prototype.writeInt8=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,1,127,-128),l.TYPED_ARRAY_SUPPORT||(pe=Math.floor(pe)),pe<0&&(pe=255+pe+1),this[oe]=pe&255,oe+1},"writeInt8"),l.prototype.writeInt16LE=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[oe]=pe&255,this[oe+1]=pe>>>8):G(this,pe,oe,!0),oe+2},"writeInt16LE"),l.prototype.writeInt16BE=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[oe]=pe>>>8,this[oe+1]=pe&255):G(this,pe,oe,!1),oe+2},"writeInt16BE"),l.prototype.writeInt32LE=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[oe]=pe&255,this[oe+1]=pe>>>8,this[oe+2]=pe>>>16,this[oe+3]=pe>>>24):$(this,pe,oe,!0),oe+4},"writeInt32LE"),l.prototype.writeInt32BE=t(function(pe,oe,de){return pe=+pe,oe=oe|0,de||X(this,pe,oe,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),l.TYPED_ARRAY_SUPPORT?(this[oe]=pe>>>24,this[oe+1]=pe>>>16,this[oe+2]=pe>>>8,this[oe+3]=pe&255):$(this,pe,oe,!1),oe+4},"writeInt32BE");function te(me,pe,oe,de,ye,we){if(oe+de>me.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("Index out of range")}t(te,"checkIEEE754");function ee(me,pe,oe,de,ye){return ye||te(me,pe,oe,4),n.write(me,pe,oe,de,23,4),oe+4}t(ee,"writeFloat"),l.prototype.writeFloatLE=t(function(pe,oe,de){return ee(this,pe,oe,!0,de)},"writeFloatLE"),l.prototype.writeFloatBE=t(function(pe,oe,de){return ee(this,pe,oe,!1,de)},"writeFloatBE");function ie(me,pe,oe,de,ye){return ye||te(me,pe,oe,8),n.write(me,pe,oe,de,52,8),oe+8}t(ie,"writeDouble"),l.prototype.writeDoubleLE=t(function(pe,oe,de){return ie(this,pe,oe,!0,de)},"writeDoubleLE"),l.prototype.writeDoubleBE=t(function(pe,oe,de){return ie(this,pe,oe,!1,de)},"writeDoubleBE"),l.prototype.copy=t(function(pe,oe,de,ye){if(de||(de=0),!ye&&ye!==0&&(ye=this.length),oe>=pe.length&&(oe=pe.length),oe||(oe=0),ye>0&&ye<de&&(ye=de),ye===de||pe.length===0||this.length===0)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("sourceStart out of bounds");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),pe.length-oe<ye-de&&(ye=pe.length-oe+de);var we=ye-de,Ee;if(this===pe&&de<oe&&oe<ye)for(Ee=we-1;Ee>=0;--Ee)pe[Ee+oe]=this[Ee+de];else if(we<1e3||!l.TYPED_ARRAY_SUPPORT)for(Ee=0;Ee<we;++Ee)pe[Ee+oe]=this[Ee+de];else Uint8Array.prototype.set.call(pe,this.subarray(de,de+we),oe);return we},"copy"),l.prototype.fill=t(function(pe,oe,de,ye){if(typeof pe=="string"){if(typeof oe=="string"?(ye=oe,oe=0,de=this.length):typeof de=="string"&&(ye=de,de=this.length),pe.length===1){var we=pe.charCodeAt(0);we<256&&(pe=we)}if(ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!l.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye)}else typeof pe=="number"&&(pe=pe&255);if(oe<0||this.length<oe||this.length<de)throw new RangeError("Out of range index");if(de<=oe)return this;oe=oe>>>0,de=de===void 0?this.length:de>>>0,pe||(pe=0);var Ee;if(typeof pe=="number")for(Ee=oe;Ee<de;++Ee)this[Ee]=pe;else{var De=l.isBuffer(pe)?pe:re(new l(pe,ye).toString()),Fe=De.length;for(Ee=0;Ee<de-oe;++Ee)this[Ee+oe]=De[Ee%Fe]}return this},"fill");var se=/[^+\/0-9A-Za-z-_]/g;function W(me){if(me=ne(me).replace(se,""),me.length<2)return"";for(;me.length%4!==0;)me=me+"=";return me}t(W,"base64clean");function ne(me){return me.trim?me.trim():me.replace(/^\s+|\s+$/g,"")}t(ne,"stringtrim");function he(me){return me<16?"0"+me.toString(16):me.toString(16)}t(he,"toHex");function re(me,pe){pe=pe||1/0;for(var oe,de=me.length,ye=null,we=[],Ee=0;Ee<de;++Ee){if(oe=me.charCodeAt(Ee),oe>55295&&oe<57344){if(!ye){if(oe>56319){(pe-=3)>-1&&we.push(239,191,189);continue}else if(Ee+1===de){(pe-=3)>-1&&we.push(239,191,189);continue}ye=oe;continue}if(oe<56320){(pe-=3)>-1&&we.push(239,191,189),ye=oe;continue}oe=(ye-55296<<10|oe-56320)+65536}else ye&&(pe-=3)>-1&&we.push(239,191,189);if(ye=null,oe<128){if((pe-=1)<0)break;we.push(oe)}else if(oe<2048){if((pe-=2)<0)break;we.push(oe>>6|192,oe&63|128)}else if(oe<65536){if((pe-=3)<0)break;we.push(oe>>12|224,oe>>6&63|128,oe&63|128)}else if(oe<1114112){if((pe-=4)<0)break;we.push(oe>>18|240,oe>>12&63|128,oe>>6&63|128,oe&63|128)}else throw new Error("Invalid code point")}return we}t(re,"utf8ToBytes");function ae(me){for(var pe=[],oe=0;oe<me.length;++oe)pe.push(me.charCodeAt(oe)&255);return pe}t(ae,"asciiToBytes");function fe(me,pe){for(var oe,de,ye,we=[],Ee=0;Ee<me.length&&!((pe-=2)<0);++Ee)oe=me.charCodeAt(Ee),de=oe>>8,ye=oe%256,we.push(ye),we.push(de);return we}t(fe,"utf16leToBytes");function ce(me){return r.toByteArray(W(me))}t(ce,"base64ToBytes");function xe(me,pe,oe,de){for(var ye=0;ye<de&&!(ye+oe>=pe.length||ye>=me.length);++ye)pe[ye+oe]=me[ye];return ye}t(xe,"blitBuffer");function Te(me){return me!==me}t(Te,"isnan")}(Qk)),Qk}t(bce,"requireBuffer");var iY;function IRe(){if(iY)return Nk;iY=1;var e=LRe(),r=Ol.IMAGE_URL_PREFIX,n=bce().Buffer;return Nk.getImageSize=function(i){var s=i.replace(r,""),o=new n(s,"base64");return e(o)},Nk}t(IRe,"requireHelpers$7");var t5,oY;function zRe(){if(oY)return t5;oY=1;var e=Nt.exports,r=gx(),n=xn,i=nn(),s=Nt.exports.maxRowLength,o=IRe().getImageSize;t5=t(function(h,v){var c,d;if(v._hasZ)c=v.z.length,d=s(v.z);else if(v._hasSource){var g=o(v.source);c=g.height,d=g.width}var p=i.getFromId(h,v.xaxis||"x"),b=i.getFromId(h,v.yaxis||"y"),m=p.d2c(v.x0)-v.dx/2,y=b.d2c(v.y0)-v.dy/2,T,_=[m,m+d*v.dx],M=[y,y+c*v.dy];if(p&&p.type==="log")for(T=0;T<d;T++)_.push(m+T*v.dx);if(b&&b.type==="log")for(T=0;T<c;T++)M.push(y+T*v.dy);v._extremes[p._id]=i.findExtremes(p,_),v._extremes[b._id]=i.findExtremes(b,M),v._scaler=u(v);var w={x0:m,y0:y,z:v.z,w:d,h:c};return[w]},"calc");function a(f,h,v,c){return function(d){return e.constrain((d-f)*h,v,c)}}t(a,"scale");function l(f,h){return function(v){return e.constrain(v,f,h)}}t(l,"constrain");function u(f){var h=r.colormodel[f.colormodel],v=h.colormodel||f.colormodel,c=v.length;f._sArray=[];for(var d=0;d<c;d++)h.min[d]!==f.zmin[d]||h.max[d]!==f.zmax[d]?f._sArray.push(a(f.zmin[d],(h.max[d]-h.min[d])/(f.zmax[d]-f.zmin[d]),h.min[d],h.max[d])):f._sArray.push(l(h.min[d],h.max[d]));return function(g){for(var p=g.slice(0,c),b=0;b<c;b++){var m=p[b];if(!n(m))return!1;p[b]=f._sArray[b](m)}return p}}return t(u,"makeScaler"),t5}t(zRe,"requireCalc$u");var r5,sY;function FRe(){if(sY)return r5;sY=1;var e=Va.exports,r=Nt.exports,n=r.strTranslate,i=ic,s=gx(),o=r.isIOS()||r.isSafari()||r.isIE();return r5=t(function(l,u,f,h){var v=u.xaxis,c=u.yaxis,d=!(o||l._context._exportedPlot);r.makeTraceGroups(h,f,"im").each(function(g){var p=e.select(this),b=g[0],m=b.trace,y=(m.zsmooth==="fast"||m.zsmooth===!1&&d)&&!m._hasZ&&m._hasSource&&v.type==="linear"&&c.type==="linear";m._realImage=y;var T=b.z,_=b.x0,M=b.y0,w=b.w,x=b.h,A=m.dx,S=m.dy,k,L,P,D,B,z;for(z=0;k===void 0&&z<w;)k=v.c2p(_+z*A),z++;for(z=w;L===void 0&&z>0;)L=v.c2p(_+z*A),z--;for(z=0;D===void 0&&z<x;)D=c.c2p(M+z*S),z++;for(z=x;B===void 0&&z>0;)B=c.c2p(M+z*S),z--;if(L<k&&(P=L,L=k,k=P),B<D&&(P=D,D=B,B=P),!y){var R=.5;k=Math.max(-R*v._length,k),L=Math.min((1+R)*v._length,L),D=Math.max(-R*c._length,D),B=Math.min((1+R)*c._length,B)}var F=Math.round(L-k),O=Math.round(B-D),q=F<=0||O<=0;if(q){var H=p.selectAll("image").data([]);H.exit().remove();return}function j(he){var re=document.createElement("canvas");re.width=F,re.height=O;var ae=re.getContext("2d",{willReadFrequently:!0}),fe=t(function(De){return r.constrain(Math.round(v.c2p(_+De*A)-k),0,F)},"ipx"),ce=t(function(De){return r.constrain(Math.round(c.c2p(M+De*S)-D),0,O)},"jpx"),xe=s.colormodel[m.colormodel],Te=xe.colormodel||m.colormodel,me=xe.fmt,pe;for(z=0;z<b.w;z++){var oe=fe(z),de=fe(z+1);if(!(de===oe||isNaN(de)||isNaN(oe)))for(var ye=0;ye<b.h;ye++){var we=ce(ye),Ee=ce(ye+1);Ee===we||isNaN(Ee)||isNaN(we)||!he(z,ye)||(pe=m._scaler(he(z,ye)),pe?ae.fillStyle=Te+"("+me(pe).join(",")+")":ae.fillStyle="rgba(0,0,0,0)",ae.fillRect(oe,we,de-oe,Ee-we))}}return re}t(j,"drawMagnifiedPixelsOnCanvas");var X=p.selectAll("image").data([g]);X.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),X.exit().remove();var G=m.zsmooth===!1?s.pixelatedStyle:"";if(y){var $=r.simpleMap(v.range,v.r2l),te=r.simpleMap(c.range,c.r2l),ee=$[1]<$[0],ie=te[1]>te[0];if(ee||ie){var se=k+F/2,W=D+O/2;G+="transform:"+n(se+"px",W+"px")+"scale("+(ee?-1:1)+","+(ie?-1:1)+")"+n(-se+"px",-W+"px")+";"}}X.attr("style",G);var ne=new Promise(function(he){if(m._hasZ)he();else if(m._hasSource)if(m._canvas&&m._canvas.el.width===w&&m._canvas.el.height===x&&m._canvas.source===m.source)he();else{var re=document.createElement("canvas");re.width=w,re.height=x;var ae=re.getContext("2d",{willReadFrequently:!0});m._image=m._image||new Image;var fe=m._image;fe.onload=function(){ae.drawImage(fe,0,0),m._canvas={el:re,source:m.source},he()},fe.setAttribute("src",m.source)}}).then(function(){var he,re;if(m._hasZ)re=j(function(ce,xe){return T[xe][ce]}),he=re.toDataURL("image/png");else if(m._hasSource)if(y)he=m.source;else{var ae=m._canvas.el.getContext("2d",{willReadFrequently:!0}),fe=ae.getImageData(0,0,w,x).data;re=j(function(ce,xe){var Te=4*(xe*w+ce);return[fe[Te],fe[Te+1],fe[Te+2],fe[Te+3]]}),he=re.toDataURL("image/png")}X.attr({"xlink:href":he,height:O,width:F,x:k,y:D})});l._promises.push(ne)})},"plot"),r5}t(FRe,"requirePlot$p");var a5,lY;function BRe(){if(lY)return a5;lY=1;var e=Va.exports;return a5=t(function(n){e.select(n).selectAll(".im image").style("opacity",function(i){return i[0].trace.opacity})},"style"),a5}t(BRe,"requireStyle$8");var n5,uY;function ORe(){if(uY)return n5;uY=1;var e=Ko,r=Nt.exports,n=gx();return n5=t(function(s,o,a){var l=s.cd[0],u=l.trace,f=s.xa,h=s.ya;if(!(e.inbox(o-l.x0,o-(l.x0+l.w*u.dx),0)>0||e.inbox(a-l.y0,a-(l.y0+l.h*u.dy),0)>0)){var v=Math.floor((o-l.x0)/u.dx),c=Math.floor(Math.abs(a-l.y0)/u.dy),d;if(u._hasZ?d=l.z[c][v]:u._hasSource&&(d=u._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(v,c,1,1).data),!!d){var g=l.hi||u.hoverinfo,p;if(g){var b=g.split("+");b.indexOf("all")!==-1&&(b=["color"]),b.indexOf("color")!==-1&&(p=!0)}var m=n.colormodel[u.colormodel],y=m.colormodel||u.colormodel,T=y.length,_=u._scaler(d),M=m.suffix,w=[];(u.hovertemplate||p)&&(w.push("["+[_[0]+M[0],_[1]+M[1],_[2]+M[2]].join(", ")),T===4&&w.push(", "+_[3]+M[3]),w.push("]"),w=w.join(""),s.extraText=y.toUpperCase()+": "+w);var x;Array.isArray(u.hovertext)&&Array.isArray(u.hovertext[c])?x=u.hovertext[c][v]:Array.isArray(u.text)&&Array.isArray(u.text[c])&&(x=u.text[c][v]);var A=h.c2p(l.y0+(c+.5)*u.dy),S=l.x0+(v+.5)*u.dx,k=l.y0+(c+.5)*u.dy,L="["+d.slice(0,u.colormodel.length).join(", ")+"]";return[r.extendFlat(s,{index:[c,v],x0:f.c2p(l.x0+v*u.dx),x1:f.c2p(l.x0+(v+1)*u.dx),y0:A,y1:A,color:_,xVal:S,xLabelVal:S,yVal:k,yLabelVal:k,zLabelVal:L,text:x,hovertemplateLabels:{zLabel:L,colorLabel:w,"color[0]Label":_[0]+M[0],"color[1]Label":_[1]+M[1],"color[2]Label":_[2]+M[2],"color[3]Label":_[3]+M[3]}})]}}},"hoverPoints"),n5}t(ORe,"requireHover$c");var i5,fY;function NRe(){return fY||(fY=1,i5=t(function(r,n){return"xVal"in n&&(r.x=n.xVal),"yVal"in n&&(r.y=n.yVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r.color=n.color,r.colormodel=n.trace.colormodel,r.z||(r.z=n.color),r},"eventData")),i5}t(NRe,"requireEvent_data$6");var o5,cY;function qRe(){return cY||(cY=1,o5={attributes:xce(),supplyDefaults:vRe(),calc:zRe(),plot:FRe(),style:BRe(),hoverPoints:ORe(),eventData:NRe(),moduleType:"trace",name:"image",basePlotModule:Ti,categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{description:["Display an image, i.e. data on a 2D regular raster.","By default, when an image is displayed in a subplot,","its y axis will be reversed (ie. `autorange: 'reversed'`),","constrained to the domain (ie. `constrain: 'domain'`)","and it will have the same scale as its x axis (ie. `scaleanchor: 'x,`)","in order for pixels to be rendered as squares."].join(" ")}}),o5}t(qRe,"requireImage$1");var hY;function URe(){return hY||(hY=1,function(e){e.exports=qRe()}(zk)),zk.exports}t(URe,"requireImage");var s5={exports:{}},l5,vY;function By(){if(vY)return l5;vY=1;var e=Ni,r=vo.attributes,n=Ho,i=Fo,s=Un.hovertemplateAttrs,o=Un.texttemplateAttrs,a=cn.extendFlat,l=n({editType:"plot",arrayOk:!0,colorEditType:"plot",description:"Sets the font used for `textinfo`."});return l5={labels:{valType:"data_array",editType:"calc",description:["Sets the sector labels.","If `labels` entries are duplicated, we sum associated `values`","or simply count occurrences if `values` is not provided.","For other array attributes (including color) we use the first","non-empty entry among all occurrences of the label."].join(" ")},label0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `labels`.","Builds a numeric set of labels.","Use with `dlabel`","where `label0` is the starting label and `dlabel` the step."].join(" ")},dlabel:{valType:"number",dflt:1,editType:"calc",description:"Sets the label step. See `label0` for more info."},values:{valType:"data_array",editType:"calc",description:["Sets the values of the sectors.","If omitted, we count occurrences of each label."].join(" ")},marker:{colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0,editType:"style",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot",description:["Sets text elements associated with each sector.","If trace `textinfo` contains a *text* flag, these elements will be seen","on the chart.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each sector.","If a single string, the same string appears for","all data points.","If an array of string, the items are mapped in order of","this trace's sectors.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},scalegroup:{valType:"string",dflt:"",editType:"calc",description:["If there are multiple pie charts that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc",description:["Determines which trace information appear on the graph."].join(" ")},hoverinfo:a({},e.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:o({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot",description:["Specifies the location of the `textinfo`."].join(" ")},textfont:a({},l,{description:"Sets the font used for `textinfo`."}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot",description:["Controls the orientation of the text inside chart sectors.","When set to *auto*, text may be oriented in any direction in order","to be as big as possible in the middle of a sector.","The *horizontal* option orients text to be parallel with the bottom","of the chart, and may make text smaller in order to achieve that goal.","The *radial* option orients text along the radius of the sector.","The *tangential* option orients text perpendicular to the radius of the sector."].join(" ")},insidetextfont:a({},l,{description:"Sets the font used for `textinfo` lying inside the sector."}),outsidetextfont:a({},l,{description:"Sets the font used for `textinfo` lying outside the sector."}),automargin:{valType:"boolean",dflt:!1,editType:"plot",description:["Determines whether outside text labels can push the margins."].join(" ")},title:{text:{valType:"string",dflt:"",editType:"plot",description:["Sets the title of the chart.","If it is empty, no title is displayed.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:a({},l,{description:["Sets the font used for `title`.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot",description:["Specifies the location of the `title`.","Note that the title's position used to be set","by the now deprecated `titleposition` attribute."].join(" ")},editType:"plot"},domain:r({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the fraction of the radius to cut out of the pie.","Use this to make a donut chart."].join(" ")},sort:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not the sectors are reordered","from largest to smallest."].join(" ")},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc",description:["Specifies the direction at which succeeding sectors follow","one another."].join(" ")},rotation:{valType:"angle",dflt:0,editType:"calc",description:["Instead of the first slice starting at 12 o'clock,","rotate to some other angle."].join(" ")},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc",description:["Sets the fraction of larger radius to pull the sectors","out from the center. This can be a constant","to pull all slices apart from each other equally","or an array to highlight one or more slices."].join(" ")},_deprecated:{title:{valType:"string",dflt:"",editType:"calc",description:["Deprecated in favor of `title.text`.","Note that value of `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:a({},l,{description:"Deprecated in favor of `title.font`."}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc",description:"Deprecated in favor of `title.position`."}}},l5}t(By,"requireAttributes$z");var u5,dY;function _ce(){if(dY)return u5;dY=1;var e=xn,r=Nt.exports,n=By(),i=vo.defaults,s=Ef().handleText;function o(l,u){var f=Array.isArray(l),h=r.isArrayOrTypedArray(u),v=Math.min(f?l.length:1/0,h?u.length:1/0);if(isFinite(v)||(v=0),v&&h){for(var c,d=0;d<v;d++){var g=u[d];if(e(g)&&g>0){c=!0;break}}c||(v=0)}return{hasLabels:f,hasValues:h,len:v}}t(o,"handleLabelsAndValues");function a(l,u,f,h){function v(k,L){return r.coerce(l,u,n,k,L)}t(v,"coerce");var c=v("labels"),d=v("values"),g=o(c,d),p=g.len;if(u._hasLabels=g.hasLabels,u._hasValues=g.hasValues,!u._hasLabels&&u._hasValues&&(v("label0"),v("dlabel")),!p){u.visible=!1;return}u._length=p;var b=v("marker.line.width");b&&v("marker.line.color"),v("marker.colors"),v("scalegroup");var m=v("text"),y=v("texttemplate"),T;if(y||(T=v("textinfo",Array.isArray(m)?"text+percent":"percent")),v("hovertext"),v("hovertemplate"),y||T&&T!=="none"){var _=v("textposition");s(l,u,h,v,_,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var M=Array.isArray(_)||_==="auto",w=M||_==="outside";w&&v("automargin"),(_==="inside"||_==="auto"||Array.isArray(_))&&v("insidetextorientation")}i(u,h,v);var x=v("hole"),A=v("title.text");if(A){var S=v("title.position",x?"middle center":"top center");!x&&S==="middle center"&&(u.title.position="top center"),r.coerceFont(v,"title.font",h.font)}v("sort"),v("direction"),v("rotation"),v("pull")}return t(a,"supplyDefaults"),u5={handleLabelsAndValues:o,supplyDefaults:a},u5}t(_ce,"requireDefaults$z");var f5,pY;function k7(){return pY||(pY=1,f5={hiddenlabels:{valType:"data_array",editType:"calc",description:["hiddenlabels is the funnelarea & pie chart analog of","visible:'legendonly'","but it can contain many labels, and can simultaneously","hide slices from several pies/funnelarea charts"].join(" ")},piecolorway:{valType:"colorlist",editType:"calc",description:["Sets the default pie slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendpiecolors`."].join(" ")},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the pie slice colors (whether given by `piecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}),f5}t(k7,"requireLayout_attributes$a");var c5,gY;function HRe(){if(gY)return c5;gY=1;var e=Nt.exports,r=k7();return c5=t(function(i,s){function o(a,l){return e.coerce(i,s,r,a,l)}t(o,"coerce"),o("hiddenlabels"),o("piecolorway",s.colorway),o("extendpiecolors")},"supplyLayoutDefaults"),c5}t(HRe,"requireLayout_defaults$9");var h5,yY;function F1(){if(yY)return h5;yY=1;var e=xn,r=rl.exports,n=$a.exports,i={};function s(u,f){var h=[],v=u._fullLayout,c=v.hiddenlabels||[],d=f.labels,g=f.marker.colors||[],p=f.values,b=f._length,m=f._hasValues&&b,y,T;if(f.dlabel)for(d=new Array(b),y=0;y<b;y++)d[y]=String(f.label0+y*f.dlabel);var _={},M=o(v["_"+f.type+"colormap"]),w=0,x=!1;for(y=0;y<b;y++){var A,S,k;if(m){if(A=p[y],!e(A))continue;A=+A}else A=1;S=d[y],(S===void 0||S==="")&&(S=y),S=String(S);var L=_[S];L===void 0?(_[S]=h.length,k=c.indexOf(S)!==-1,k||(w+=A),h.push({v:A,label:S,color:M(g[y],S),i:y,pts:[y],hidden:k})):(x=!0,T=h[L],T.v+=A,T.pts.push(y),T.hidden||(w+=A),T.color===!1&&g[y]&&(T.color=M(g[y],S)))}h=h.filter(function(D){return D.v>=0});var P=f.type==="funnelarea"?x:f.sort;return P&&h.sort(function(D,B){return B.v-D.v}),h[0]&&(h[0].vTotal=w),h}t(s,"calc");function o(u){return t(function(h,v){return!h||(h=r(h),!h.isValid())?!1:(h=n.addOpacity(h,h.getAlpha()),u[v]||(u[v]=h),h)},"pullColor")}t(o,"makePullColorFn");function a(u,f){var h=(f||{}).type;h||(h="pie");var v=u._fullLayout,c=u.calcdata,d=v[h+"colorway"],g=v["_"+h+"colormap"];v["extend"+h+"colors"]&&(d=l(d,i));for(var p=0,b=0;b<c.length;b++){var m=c[b],y=m[0].trace.type;if(y===h)for(var T=0;T<m.length;T++){var _=m[T];_.color===!1&&(g[_.label]?_.color=g[_.label]:(g[_.label]=_.color=d[p%d.length],p++))}}}t(a,"crossTraceCalc");function l(u,f){var h,v=JSON.stringify(u),c=f[v];if(!c){for(c=u.slice(),h=0;h<u.length;h++)c.push(r(u[h]).lighten(20).toHexString());for(h=0;h<u.length;h++)c.push(r(u[h]).darken(20).toHexString());f[v]=c}return c}return t(l,"generateExtendedColors"),h5={calc:s,crossTraceCalc:a,makePullColorFn:o,generateExtendedColors:l},h5}t(F1,"requireCalc$t");var v5,mY;function $Re(){if(mY)return v5;mY=1;var e=Rf.appendArrayMultiPointValues;return v5=t(function(n,i){var s={curveNumber:i.index,pointNumbers:n.pts,data:i._input,fullData:i,label:n.label,color:n.color,value:n.v,percent:n.percent,text:n.text,bbox:n.bbox,v:n.v};return n.pts.length===1&&(s.pointNumber=s.i=n.pts[0]),e(s,i,n.pts),i.type==="funnelarea"&&(delete s.v,delete s.i),s},"eventData"),v5}t($Re,"requireEvent_data$5");var d5,xY;function E7(){if(xY)return d5;xY=1;var e=Va.exports,r=so.exports,n=Ko,i=$a.exports,s=bn.exports,o=Nt.exports,a=o.strScale,l=o.strTranslate,u=Ji,f=wu(),h=f.recordMinTextSize,v=f.clearMinTextSize,c=Py().TEXTPAD,d=pp,g=$Re(),p=Nt.exports.isValidTextValue;function b(ie,se){var W=ie._context.staticPlot,ne=ie._fullLayout,he=ne._size;v("pie",ne),M(se,ie),j(se,he);var re=o.makeTraceGroups(ne._pielayer,se,"trace").each(function(ae){var fe=e.select(this),ce=ae[0],xe=ce.trace;G(ae),fe.attr("stroke-linejoin","round"),fe.each(function(){var Te=e.select(this).selectAll("g.slice").data(ae);Te.enter().append("g").classed("slice",!0),Te.exit().remove();var me=[[[],[]],[[],[]]],pe=!1;Te.each(function(qe,Je){if(qe.hidden){e.select(this).selectAll("path,g").remove();return}qe.pointNumber=qe.i,qe.curveNumber=xe.index,me[qe.pxmid[1]<0?0:1][qe.pxmid[0]<0?0:1].push(qe);var Ge=ce.cx,et=ce.cy,Ue=e.select(this),Ye=Ue.selectAll("path.surface").data([qe]);if(Ye.enter().append("path").classed("surface",!0).style({"pointer-events":W?"none":"all"}),Ue.call(y,ie,ae),xe.pull){var $e=+d.castOption(xe.pull,qe.pts)||0;$e>0&&(Ge+=$e*qe.pxmid[0],et+=$e*qe.pxmid[1])}qe.cxFinal=Ge,qe.cyFinal=et;function Ct(ft,zt,Pt,Et){var Wt=Et*(zt[0]-ft[0]),ze=Et*(zt[1]-ft[1]);return"a"+Et*ce.r+","+Et*ce.r+" 0 "+qe.largeArc+(Pt?" 1 ":" 0 ")+Wt+","+ze}t(Ct,"arc");var It=xe.hole;if(qe.v===ce.vTotal){var Vt="M"+(Ge+qe.px0[0])+","+(et+qe.px0[1])+Ct(qe.px0,qe.pxmid,!0,1)+Ct(qe.pxmid,qe.px0,!0,1)+"Z";It?Ye.attr("d","M"+(Ge+It*qe.px0[0])+","+(et+It*qe.px0[1])+Ct(qe.px0,qe.pxmid,!1,It)+Ct(qe.pxmid,qe.px0,!1,It)+"Z"+Vt):Ye.attr("d",Vt)}else{var $t=Ct(qe.px0,qe.px1,!0,1);if(It){var Gt=1-It;Ye.attr("d","M"+(Ge+It*qe.px1[0])+","+(et+It*qe.px1[1])+Ct(qe.px1,qe.px0,!1,It)+"l"+Gt*qe.px0[0]+","+Gt*qe.px0[1]+$t+"Z")}else Ye.attr("d","M"+Ge+","+et+"l"+qe.px0[0]+","+qe.px0[1]+$t+"Z")}te(ie,qe,ce);var Jt=d.castOption(xe.textposition,qe.pts),kt=Ue.selectAll("g.slicetext").data(qe.text&&Jt!=="none"?[0]:[]);kt.enter().append("g").classed("slicetext",!0),kt.exit().remove(),kt.each(function(){var ft=o.ensureSingle(e.select(this),"text","",function(vt){vt.attr("data-notex",1)}),zt=o.ensureUniformFontSize(ie,Jt==="outside"?T(xe,qe,ne.font):_(xe,qe,ne.font));ft.text(qe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(s.font,zt).call(u.convertToTspans,ie);var Pt=s.bBox(ft.node()),Et;if(Jt==="outside")Et=B(Pt,qe);else if(Et=w(Pt,qe,ce),Jt==="auto"&&Et.scale<1){var Wt=o.ensureUniformFontSize(ie,xe.outsidetextfont);ft.call(s.font,Wt),Pt=s.bBox(ft.node()),Et=B(Pt,qe)}var ze=Et.textPosAngle,tt=ze===void 0?qe.pxmid:$(ce.r,ze);if(Et.targetX=Ge+tt[0]*Et.rCenter+(Et.x||0),Et.targetY=et+tt[1]*Et.rCenter+(Et.y||0),ee(Et,Pt),Et.outside){var at=Et.targetY;qe.yLabelMin=at-Pt.height/2,qe.yLabelMid=at,qe.yLabelMax=at+Pt.height/2,qe.labelExtraX=0,qe.labelExtraY=0,pe=!0}Et.fontSize=zt.size,h(xe.type,Et,ne),ae[Je].transform=Et,o.setTransormAndDisplay(ft,Et)})});var oe=e.select(this).selectAll("g.titletext").data(xe.title.text?[0]:[]);if(oe.enter().append("g").classed("titletext",!0),oe.exit().remove(),oe.each(function(){var qe=o.ensureSingle(e.select(this),"text","",function(et){et.attr("data-notex",1)}),Je=xe.title.text;xe._meta&&(Je=o.templateString(Je,xe._meta)),qe.text(Je).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(s.font,xe.title.font).call(u.convertToTspans,ie);var Ge;xe.title.position==="middle center"?Ge=z(ce):Ge=R(ce,he),qe.attr("transform",l(Ge.x,Ge.y)+a(Math.min(1,Ge.scale))+l(Ge.tx,Ge.ty))}),pe&&H(me,xe),m(Te,xe),pe&&xe.automargin){var de=s.bBox(fe.node()),ye=xe.domain,we=he.w*(ye.x[1]-ye.x[0]),Ee=he.h*(ye.y[1]-ye.y[0]),De=(.5*we-ce.r)/he.w,Fe=(.5*Ee-ce.r)/he.h;r.autoMargin(ie,"pie."+xe.uid+".automargin",{xl:ye.x[0]-De,xr:ye.x[1]+De,yb:ye.y[0]-Fe,yt:ye.y[1]+Fe,l:Math.max(ce.cx-ce.r-de.left,0),r:Math.max(de.right-(ce.cx+ce.r),0),b:Math.max(de.bottom-(ce.cy+ce.r),0),t:Math.max(ce.cy-ce.r-de.top,0),pad:5})}})});setTimeout(function(){re.selectAll("tspan").each(function(){var ae=e.select(this);ae.attr("dy")&&ae.attr("dy",ae.attr("dy"))})},0)}t(b,"plot");function m(ie,se){ie.each(function(W){var ne=e.select(this);if(!W.labelExtraX&&!W.labelExtraY){ne.select("path.textline").remove();return}var he=ne.select("g.slicetext text");W.transform.targetX+=W.labelExtraX,W.transform.targetY+=W.labelExtraY,o.setTransormAndDisplay(he,W.transform);var re=W.cxFinal+W.pxmid[0],ae=W.cyFinal+W.pxmid[1],fe="M"+re+","+ae,ce=(W.yLabelMax-W.yLabelMin)*(W.pxmid[0]<0?-1:1)/4;if(W.labelExtraX){var xe=W.labelExtraX*W.pxmid[1]/W.pxmid[0],Te=W.yLabelMid+W.labelExtraY-(W.cyFinal+W.pxmid[1]);Math.abs(xe)>Math.abs(Te)?fe+="l"+Te*W.pxmid[0]/W.pxmid[1]+","+Te+"H"+(re+W.labelExtraX+ce):fe+="l"+W.labelExtraX+","+xe+"v"+(Te-xe)+"h"+ce}else fe+="V"+(W.yLabelMid+W.labelExtraY)+"h"+ce;o.ensureSingle(ne,"path","textline").call(i.stroke,se.outsidetextfont.color).attr({"stroke-width":Math.min(2,se.outsidetextfont.size/8),d:fe,fill:"none"})})}t(m,"plotTextLines");function y(ie,se,W){var ne=W[0],he=ne.cx,re=ne.cy,ae=ne.trace,fe=ae.type==="funnelarea";"_hasHoverLabel"in ae||(ae._hasHoverLabel=!1),"_hasHoverEvent"in ae||(ae._hasHoverEvent=!1),ie.on("mouseover",function(ce){var xe=se._fullLayout,Te=se._fullData[ae.index];if(!(se._dragging||xe.hovermode===!1)){var me=Te.hoverinfo;if(Array.isArray(me)&&(me=n.castHoverinfo({hoverinfo:[d.castOption(me,ce.pts)],_module:ae._module},xe,0)),me==="all"&&(me="label+text+value+percent+name"),Te.hovertemplate||me!=="none"&&me!=="skip"&&me){var pe=ce.rInscribed||0,oe=he+ce.pxmid[0]*(1-pe),de=re+ce.pxmid[1]*(1-pe),ye=xe.separators,we=[];if(me&&me.indexOf("label")!==-1&&we.push(ce.label),ce.text=d.castOption(Te.hovertext||Te.text,ce.pts),me&&me.indexOf("text")!==-1){var Ee=ce.text;o.isValidTextValue(Ee)&&we.push(Ee)}ce.value=ce.v,ce.valueLabel=d.formatPieValue(ce.v,ye),me&&me.indexOf("value")!==-1&&we.push(ce.valueLabel),ce.percent=ce.v/ne.vTotal,ce.percentLabel=d.formatPiePercent(ce.percent,ye),me&&me.indexOf("percent")!==-1&&we.push(ce.percentLabel);var De=Te.hoverlabel,Fe=De.font,qe=[];n.loneHover({trace:ae,x0:oe-pe*ne.r,x1:oe+pe*ne.r,y:de,_x0:fe?he+ce.TL[0]:oe-pe*ne.r,_x1:fe?he+ce.TR[0]:oe+pe*ne.r,_y0:fe?re+ce.TL[1]:de-pe*ne.r,_y1:fe?re+ce.BL[1]:de+pe*ne.r,text:we.join("<br>"),name:Te.hovertemplate||me.indexOf("name")!==-1?Te.name:void 0,idealAlign:ce.pxmid[0]<0?"left":"right",color:d.castOption(De.bgcolor,ce.pts)||ce.color,borderColor:d.castOption(De.bordercolor,ce.pts),fontFamily:d.castOption(Fe.family,ce.pts),fontSize:d.castOption(Fe.size,ce.pts),fontColor:d.castOption(Fe.color,ce.pts),nameLength:d.castOption(De.namelength,ce.pts),textAlign:d.castOption(De.align,ce.pts),hovertemplate:d.castOption(Te.hovertemplate,ce.pts),hovertemplateLabels:ce,eventData:[g(ce,Te)]},{container:xe._hoverlayer.node(),outerContainer:xe._paper.node(),gd:se,inOut_bbox:qe}),ce.bbox=qe[0],ae._hasHoverLabel=!0}ae._hasHoverEvent=!0,se.emit("plotly_hover",{points:[g(ce,Te)],event:e.event})}}),ie.on("mouseout",function(ce){var xe=se._fullLayout,Te=se._fullData[ae.index],me=e.select(this).datum();ae._hasHoverEvent&&(ce.originalEvent=e.event,se.emit("plotly_unhover",{points:[g(me,Te)],event:e.event}),ae._hasHoverEvent=!1),ae._hasHoverLabel&&(n.loneUnhover(xe._hoverlayer.node()),ae._hasHoverLabel=!1)}),ie.on("click",function(ce){var xe=se._fullLayout,Te=se._fullData[ae.index];se._dragging||xe.hovermode===!1||(se._hoverdata=[g(ce,Te)],n.click(se,e.event))})}t(y,"attachFxHandlers");function T(ie,se,W){var ne=d.castOption(ie.outsidetextfont.color,se.pts)||d.castOption(ie.textfont.color,se.pts)||W.color,he=d.castOption(ie.outsidetextfont.family,se.pts)||d.castOption(ie.textfont.family,se.pts)||W.family,re=d.castOption(ie.outsidetextfont.size,se.pts)||d.castOption(ie.textfont.size,se.pts)||W.size;return{color:ne,family:he,size:re}}t(T,"determineOutsideTextFont");function _(ie,se,W){var ne=d.castOption(ie.insidetextfont.color,se.pts);!ne&&ie._input.textfont&&(ne=d.castOption(ie._input.textfont.color,se.pts));var he=d.castOption(ie.insidetextfont.family,se.pts)||d.castOption(ie.textfont.family,se.pts)||W.family,re=d.castOption(ie.insidetextfont.size,se.pts)||d.castOption(ie.textfont.size,se.pts)||W.size;return{color:ne||i.contrast(se.color),family:he,size:re}}t(_,"determineInsideTextFont");function M(ie,se){for(var W,ne,he=0;he<ie.length;he++)if(W=ie[he][0],ne=W.trace,ne.title.text){var re=ne.title.text;ne._meta&&(re=o.templateString(re,ne._meta));var ae=s.tester.append("text").attr("data-notex",1).text(re).call(s.font,ne.title.font).call(u.convertToTspans,se),fe=s.bBox(ae.node(),!0);W.titleBox={width:fe.width,height:fe.height},ae.remove()}}t(M,"prerenderTitles");function w(ie,se,W){var ne=W.r||se.rpx1,he=se.rInscribed,re=se.startangle===se.stopangle;if(re)return{rCenter:1-he,scale:0,rotate:0,textPosAngle:0};var ae=se.ring,fe=ae===1&&Math.abs(se.startangle-se.stopangle)===Math.PI*2,ce=se.halfangle,xe=se.midangle,Te=W.trace.insidetextorientation,me=Te==="horizontal",pe=Te==="tangential",oe=Te==="radial",de=Te==="auto",ye=[],we;if(!de){var Ee=t(function(Ue,Ye){if(x(se,Ue)){var $e=Math.abs(Ue-se.startangle),Ct=Math.abs(Ue-se.stopangle),It=$e<Ct?$e:Ct;Ye==="tan"?we=S(ie,ne,ae,It,0):we=A(ie,ne,ae,It,Math.PI/2),we.textPosAngle=Ue,ye.push(we)}},"considerCrossing"),De;if(me||pe){for(De=4;De>=-4;De-=2)Ee(Math.PI*De,"tan");for(De=4;De>=-4;De-=2)Ee(Math.PI*(De+1),"tan")}if(me||oe){for(De=4;De>=-4;De-=2)Ee(Math.PI*(De+1.5),"rad");for(De=4;De>=-4;De-=2)Ee(Math.PI*(De+.5),"rad")}}if(fe||de||me){var Fe=Math.sqrt(ie.width*ie.width+ie.height*ie.height);if(we={scale:he*ne*2/Fe,rCenter:1-he,rotate:0},we.textPosAngle=(se.startangle+se.stopangle)/2,we.scale>=1)return we;ye.push(we)}(de||oe)&&(we=A(ie,ne,ae,ce,xe),we.textPosAngle=(se.startangle+se.stopangle)/2,ye.push(we)),(de||pe)&&(we=S(ie,ne,ae,ce,xe),we.textPosAngle=(se.startangle+se.stopangle)/2,ye.push(we));for(var qe=0,Je=0,Ge=0;Ge<ye.length;Ge++){var et=ye[Ge].scale;if(Je<et&&(Je=et,qe=Ge),!de&&Je>=1)break}return ye[qe]}t(w,"transformInsideText");function x(ie,se){var W=ie.startangle,ne=ie.stopangle;return W>se&&se>ne||W<se&&se<ne}t(x,"isCrossing");function A(ie,se,W,ne,he){se=Math.max(0,se-2*c);var re=ie.width/ie.height,ae=P(re,ne,se,W);return{scale:ae*2/ie.height,rCenter:k(re,ae/se),rotate:L(he)}}t(A,"calcRadTransform");function S(ie,se,W,ne,he){se=Math.max(0,se-2*c);var re=ie.height/ie.width,ae=P(re,ne,se,W);return{scale:ae*2/ie.width,rCenter:k(re,ae/se),rotate:L(he+Math.PI/2)}}t(S,"calcTanTransform");function k(ie,se){return Math.cos(se)-ie*se}t(k,"calcRCenter");function L(ie){return(180/Math.PI*ie+720)%180-90}t(L,"calcRotate");function P(ie,se,W,ne){var he=ie+1/(2*Math.tan(se));return W*Math.min(1/(Math.sqrt(he*he+.5)+he),ne/(Math.sqrt(ie*ie+ne/2)+ie))}t(P,"calcMaxHalfSize");function D(ie,se){return ie.v===se.vTotal&&!se.trace.hole?1:Math.min(1/(1+1/Math.sin(ie.halfangle)),ie.ring/2)}t(D,"getInscribedRadiusFraction");function B(ie,se){var W=se.pxmid[0],ne=se.pxmid[1],he=ie.width/2,re=ie.height/2;return W<0&&(he*=-1),ne<0&&(re*=-1),{scale:1,rCenter:1,rotate:0,x:he+Math.abs(re)*(he>0?1:-1)/2,y:re/(1+W*W/(ne*ne)),outside:!0}}t(B,"transformOutsideText");function z(ie){var se=Math.sqrt(ie.titleBox.width*ie.titleBox.width+ie.titleBox.height*ie.titleBox.height);return{x:ie.cx,y:ie.cy,scale:ie.trace.hole*ie.r*2/se,tx:0,ty:-ie.titleBox.height/2+ie.trace.title.font.size}}t(z,"positionTitleInside");function R(ie,se){var W=1,ne=1,he,re=ie.trace,ae={x:ie.cx,y:ie.cy},fe={tx:0,ty:0};fe.ty+=re.title.font.size,he=q(re),re.title.position.indexOf("top")!==-1?(ae.y-=(1+he)*ie.r,fe.ty-=ie.titleBox.height):re.title.position.indexOf("bottom")!==-1&&(ae.y+=(1+he)*ie.r);var ce=F(ie.r,ie.trace.aspectratio),xe=se.w*(re.domain.x[1]-re.domain.x[0])/2;return re.title.position.indexOf("left")!==-1?(xe=xe+ce,ae.x-=(1+he)*ce,fe.tx+=ie.titleBox.width/2):re.title.position.indexOf("center")!==-1?xe*=2:re.title.position.indexOf("right")!==-1&&(xe=xe+ce,ae.x+=(1+he)*ce,fe.tx-=ie.titleBox.width/2),W=xe/ie.titleBox.width,ne=O(ie,se)/ie.titleBox.height,{x:ae.x,y:ae.y,scale:Math.min(W,ne),tx:fe.tx,ty:fe.ty}}t(R,"positionTitleOutside");function F(ie,se){return ie/(se===void 0?1:se)}t(F,"applyAspectRatio");function O(ie,se){var W=ie.trace,ne=se.h*(W.domain.y[1]-W.domain.y[0]);return Math.min(ie.titleBox.height,ne/2)}t(O,"getTitleSpace");function q(ie){var se=ie.pull;if(!se)return 0;var W;if(Array.isArray(se))for(se=0,W=0;W<ie.pull.length;W++)ie.pull[W]>se&&(se=ie.pull[W]);return se}t(q,"getMaxPull");function H(ie,se){var W,ne,he,re,ae,fe,ce,xe,Te,me,pe,oe,de;function ye(Fe,qe){return Fe.pxmid[1]-qe.pxmid[1]}t(ye,"topFirst");function we(Fe,qe){return qe.pxmid[1]-Fe.pxmid[1]}t(we,"bottomFirst");function Ee(Fe,qe){qe||(qe={});var Je=qe.labelExtraY+(ne?qe.yLabelMax:qe.yLabelMin),Ge=ne?Fe.yLabelMin:Fe.yLabelMax,et=ne?Fe.yLabelMax:Fe.yLabelMin,Ue=Fe.cyFinal+ae(Fe.px0[1],Fe.px1[1]),Ye=Je-Ge,$e,Ct,It,Vt,$t,Gt;if(Ye*ce>0&&(Fe.labelExtraY=Ye),!!Array.isArray(se.pull))for(Ct=0;Ct<me.length;Ct++)It=me[Ct],!(It===Fe||(d.castOption(se.pull,Fe.pts)||0)>=(d.castOption(se.pull,It.pts)||0))&&((Fe.pxmid[1]-It.pxmid[1])*ce>0?(Vt=It.cyFinal+ae(It.px0[1],It.px1[1]),Ye=Vt-Ge-Fe.labelExtraY,Ye*ce>0&&(Fe.labelExtraY+=Ye)):(et+Fe.labelExtraY-Ue)*ce>0&&($e=3*fe*Math.abs(Ct-me.indexOf(Fe)),$t=It.cxFinal+re(It.px0[0],It.px1[0]),Gt=$t+$e-(Fe.cxFinal+Fe.pxmid[0])-Fe.labelExtraX,Gt*fe>0&&(Fe.labelExtraX+=Gt)))}for(t(Ee,"scootOneLabel"),ne=0;ne<2;ne++)for(he=ne?ye:we,ae=ne?Math.max:Math.min,ce=ne?1:-1,W=0;W<2;W++){for(re=W?Math.max:Math.min,fe=W?1:-1,xe=ie[ne][W],xe.sort(he),Te=ie[1-ne][W],me=Te.concat(xe),oe=[],pe=0;pe<xe.length;pe++)xe[pe].yLabelMid!==void 0&&oe.push(xe[pe]);for(de=!1,pe=0;ne&&pe<Te.length;pe++)if(Te[pe].yLabelMid!==void 0){de=Te[pe];break}for(pe=0;pe<oe.length;pe++){var De=pe&&oe[pe-1];de&&!pe&&(De=de),Ee(oe[pe],De)}}}t(H,"scootLabels");function j(ie,se){for(var W=[],ne=0;ne<ie.length;ne++){var he=ie[ne][0],re=he.trace,ae=re.domain,fe=se.w*(ae.x[1]-ae.x[0]),ce=se.h*(ae.y[1]-ae.y[0]);re.title.text&&re.title.position!=="middle center"&&(ce-=O(he,se));var xe=fe/2,Te=ce/2;re.type==="funnelarea"&&!re.scalegroup&&(Te/=re.aspectratio),he.r=Math.min(xe,Te)/(1+q(re)),he.cx=se.l+se.w*(re.domain.x[1]+re.domain.x[0])/2,he.cy=se.t+se.h*(1-re.domain.y[0])-ce/2,re.title.text&&re.title.position.indexOf("bottom")!==-1&&(he.cy-=O(he,se)),re.scalegroup&&W.indexOf(re.scalegroup)===-1&&W.push(re.scalegroup)}X(ie,W)}t(j,"layoutAreas");function X(ie,se){for(var W,ne,he,re=0;re<se.length;re++){var ae=1/0,fe=se[re];for(ne=0;ne<ie.length;ne++)if(W=ie[ne][0],he=W.trace,he.scalegroup===fe){var ce;if(he.type==="pie")ce=W.r*W.r;else if(he.type==="funnelarea"){var xe,Te;he.aspectratio>1?(xe=W.r,Te=xe/he.aspectratio):(Te=W.r,xe=Te*he.aspectratio),xe*=(1+he.baseratio)/2,ce=xe*Te}ae=Math.min(ae,ce/W.vTotal)}for(ne=0;ne<ie.length;ne++)if(W=ie[ne][0],he=W.trace,he.scalegroup===fe){var me=ae*W.vTotal;he.type==="funnelarea"&&(me/=(1+he.baseratio)/2,me/=he.aspectratio),W.r=Math.sqrt(me)}}}t(X,"groupScale");function G(ie){var se=ie[0],W=se.r,ne=se.trace,he=d.getRotationAngle(ne.rotation),re=2*Math.PI/se.vTotal,ae="px0",fe="px1",ce,xe,Te;if(ne.direction==="counterclockwise"){for(ce=0;ce<ie.length&&ie[ce].hidden;ce++);if(ce===ie.length)return;he+=re*ie[ce].v,re*=-1,ae="px1",fe="px0"}for(Te=$(W,he),ce=0;ce<ie.length;ce++)xe=ie[ce],!xe.hidden&&(xe[ae]=Te,xe.startangle=he,he+=re*xe.v/2,xe.pxmid=$(W,he),xe.midangle=he,he+=re*xe.v/2,Te=$(W,he),xe.stopangle=he,xe[fe]=Te,xe.largeArc=xe.v>se.vTotal/2?1:0,xe.halfangle=Math.PI*Math.min(xe.v/se.vTotal,.5),xe.ring=1-ne.hole,xe.rInscribed=D(xe,se))}t(G,"setCoords");function $(ie,se){return[ie*Math.sin(se),-ie*Math.cos(se)]}t($,"getCoords");function te(ie,se,W){var ne=ie._fullLayout,he=W.trace,re=he.texttemplate,ae=he.textinfo;if(!re&&ae&&ae!=="none"){var fe=ae.split("+"),ce=t(function(qe){return fe.indexOf(qe)!==-1},"hasFlag"),xe=ce("label"),Te=ce("text"),me=ce("value"),pe=ce("percent"),oe=ne.separators,de;if(de=xe?[se.label]:[],Te){var ye=d.getFirstFilled(he.text,se.pts);p(ye)&&de.push(ye)}me&&de.push(d.formatPieValue(se.v,oe)),pe&&de.push(d.formatPiePercent(se.v/W.vTotal,oe)),se.text=de.join("<br>")}function we(qe){return{label:qe.label,value:qe.v,valueLabel:d.formatPieValue(qe.v,ne.separators),percent:qe.v/W.vTotal,percentLabel:d.formatPiePercent(qe.v/W.vTotal,ne.separators),color:qe.color,text:qe.text,customdata:o.castOption(he,qe.i,"customdata")}}if(t(we,"makeTemplateVariables"),re){var Ee=o.castOption(he,se.i,"texttemplate");if(!Ee)se.text="";else{var De=we(se),Fe=d.getFirstFilled(he.text,se.pts);(p(Fe)||Fe==="")&&(De.text=Fe),se.text=o.texttemplateString(Ee,De,ie._fullLayout._d3locale,De,he._meta||{})}}}t(te,"formatSliceLabel");function ee(ie,se){var W=ie.rotate*Math.PI/180,ne=Math.cos(W),he=Math.sin(W),re=(se.left+se.right)/2,ae=(se.top+se.bottom)/2;ie.textX=re*ne-ae*he,ie.textY=re*he+ae*ne,ie.noCenter=!0}return t(ee,"computeTransform"),d5={plot:b,formatSliceLabel:te,transformInsideText:w,determineInsideTextFont:_,positionTitleOutside:R,prerenderTitles:M,layoutAreas:j,attachFxHandlers:y,computeTransform:ee},d5}t(E7,"requirePlot$o");var p5,bY;function VRe(){if(bY)return p5;bY=1;var e=Va.exports,r=ex(),n=wu().resizeText;return p5=t(function(s){var o=s._fullLayout._pielayer.selectAll(".trace");n(s,o,"pie"),o.each(function(a){var l=a[0],u=l.trace,f=e.select(this);f.style({opacity:u.opacity}),f.selectAll("path.surface").each(function(h){e.select(this).call(r,h,u)})})},"style"),p5}t(VRe,"requireStyle$7");var g5={},_Y;function GRe(){return _Y||(_Y=1,function(e){var r=so.exports;e.name="pie",e.plot=function(n,i,s,o){r.plotBasePlot(e.name,n,i,s,o)},e.clean=function(n,i,s,o){r.cleanBasePlot(e.name,n,i,s,o)}}(g5)),g5}t(GRe,"requireBase_plot$a");var y5,wY;function jRe(){return wY||(wY=1,y5={attributes:By(),supplyDefaults:_ce().supplyDefaults,supplyLayoutDefaults:HRe(),layoutAttributes:k7(),calc:F1().calc,crossTraceCalc:F1().crossTraceCalc,plot:E7().plot,style:VRe(),styleOne:ex(),moduleType:"trace",name:"pie",basePlotModule:GRe(),categories:["pie-like","pie","showLegend"],meta:{description:["A data visualized by the sectors of the pie is set in `values`.","The sector labels are set in `labels`.","The sector colors are set in `marker.colors`"].join(" ")}}),y5}t(jRe,"requirePie$1");var TY;function YRe(){return TY||(TY=1,function(e){e.exports=jRe()}(s5)),s5.exports}t(YRe,"requirePie");var m5={exports:{}},x5={},AY;function WRe(){return AY||(AY=1,function(e){var r=so.exports;e.name="sunburst",e.plot=function(n,i,s,o){r.plotBasePlot(e.name,n,i,s,o)},e.clean=function(n,i,s,o){r.cleanBasePlot(e.name,n,i,s,o)}}(x5)),x5}t(WRe,"requireBase_plot$9");var b5,SY;function wce(){return SY||(SY=1,b5={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}),b5}t(wce,"requireConstants$b");var _5,MY;function Gw(){if(MY)return _5;MY=1;var e=Ni,r=Un.hovertemplateAttrs,n=Un.texttemplateAttrs,i=Qi,s=vo.attributes,o=By(),a=wce(),l=cn.extendFlat;return _5={labels:{valType:"data_array",editType:"calc",description:["Sets the labels of each of the sectors."].join(" ")},parents:{valType:"data_array",editType:"calc",description:["Sets the parent sectors for each of the sectors.","Empty string items '' are understood to reference","the root node in the hierarchy.",'If `ids` is filled, `parents` items are understood to be "ids" themselves.',"When `ids` is not set, plotly attempts to find matching items in `labels`,","but beware they must be unique."].join(" ")},values:{valType:"data_array",editType:"calc",description:["Sets the values associated with each of the sectors.","Use with `branchvalues` to determine how the values are summed."].join(" ")},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc",description:["Determines how the items in `values` are summed.","When set to *total*, items in `values` are taken to be value of all its descendants.","When set to *remainder*, items in `values` corresponding to the root and the branches sectors","are taken to be the extra part not part of the sum of the values at their leaves."].join(" ")},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc",description:["Determines default for `values` when it is not provided,","by inferring a 1 for each of the *leaves* and/or *branches*, otherwise 0."].join(" ")},level:{valType:"any",editType:"plot",anim:!0,description:["Sets the level from which this trace hierarchy is rendered.","Set `level` to `''` to start from the root node in the hierarchy.",'Must be an "id" if `ids` is filled in, otherwise plotly attempts to find a matching',"item in `labels`."].join(" ")},maxdepth:{valType:"integer",editType:"plot",dflt:-1,description:["Sets the number of rendered sectors from any given `level`.","Set `maxdepth` to *-1* to render all the levels in the hierarchy."].join(" ")},marker:l({colors:{valType:"data_array",editType:"calc",description:["Sets the color of each sector of this trace.","If not specified, the default trace color set is used","to pick the sector colors."].join(" ")},line:{color:l({},o.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:l({},o.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1,description:["Sets the opacity of the leaves. With colorscale","it is defaulted to 1; otherwise it is defaulted to 0.7"].join(" ")},editType:"plot"},text:o.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot",description:["Determines which trace information appear on the graph."].join(" ")},texttemplate:n({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:l({},e.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:r({},{keys:a.eventDataKeys}),textfont:o.textfont,insidetextorientation:o.insidetextorientation,insidetextfont:o.insidetextfont,outsidetextfont:l({},o.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented at the center of a sunburst graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),rotation:{valType:"angle",dflt:0,editType:"plot",description:["Rotates the whole diagram counterclockwise by some angle.","By default the first slice starts at 3 o'clock."].join(" ")},sort:o.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)",description:["sets the color of the root node for a sunburst/treemap/icicle trace.","this has no effect when a colorscale is used to set the markers."].join(" ")},editType:"calc"},domain:s({name:"sunburst",trace:!0,editType:"calc"})},_5}t(Gw,"requireAttributes$y");var w5,kY;function Tce(){return kY||(kY=1,w5={sunburstcolorway:{valType:"colorlist",editType:"calc",description:["Sets the default sunburst slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendsunburstcolors`."].join(" ")},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the sunburst slice colors (whether given by `sunburstcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}),w5}t(Tce,"requireLayout_attributes$9");var T5,EY;function XRe(){if(EY)return T5;EY=1;var e=Nt.exports,r=Gw(),n=vo.defaults,i=Ef().handleText,s=ko,o=s.hasColorscale,a=s.handleDefaults;return T5=t(function(u,f,h,v){function c(_,M){return e.coerce(u,f,r,_,M)}t(c,"coerce");var d=c("labels"),g=c("parents");if(!d||!d.length||!g||!g.length){f.visible=!1;return}var p=c("values");p&&p.length?c("branchvalues"):c("count"),c("level"),c("maxdepth");var b=c("marker.line.width");b&&c("marker.line.color",v.paper_bgcolor),c("marker.colors");var m=f._hasColorscale=o(u,"marker","colors")||(u.marker||{}).coloraxis;m&&a(u,f,v,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",m?1:.7);var y=c("text");c("texttemplate"),f.texttemplate||c("textinfo",Array.isArray(y)?"text+label":"label"),c("hovertext"),c("hovertemplate");var T="auto";i(u,f,v,c,T,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("insidetextorientation"),c("sort"),c("rotation"),c("root.color"),n(f,v,c),f._length=null},"supplyDefaults"),T5}t(XRe,"requireDefaults$y");var A5,CY;function ZRe(){if(CY)return A5;CY=1;var e=Nt.exports,r=Tce();return A5=t(function(i,s){function o(a,l){return e.coerce(i,s,r,a,l)}t(o,"coerce"),o("sunburstcolorway",s.colorway),o("extendsunburstcolors")},"supplyLayoutDefaults"),A5}t(ZRe,"requireLayout_defaults$8");var S5={};function KRe(e,r){return e.parent===r.parent?1:2}t(KRe,"defaultSeparation$1");function JRe(e){return e.reduce(QRe,0)/e.length}t(JRe,"meanX");function QRe(e,r){return e+r.x}t(QRe,"meanXReduce");function ePe(e){return 1+e.reduce(tPe,0)}t(ePe,"maxY");function tPe(e,r){return Math.max(e,r.y)}t(tPe,"maxYReduce");function rPe(e){for(var r;r=e.children;)e=r[0];return e}t(rPe,"leafLeft");function aPe(e){for(var r;r=e.children;)e=r[r.length-1];return e}t(aPe,"leafRight");function nPe(){var e=KRe,r=1,n=1,i=!1;function s(o){var a,l=0;o.eachAfter(function(c){var d=c.children;d?(c.x=JRe(d),c.y=ePe(d)):(c.x=a?l+=e(c,a):0,c.y=0,a=c)});var u=rPe(o),f=aPe(o),h=u.x-e(u,f)/2,v=f.x+e(f,u)/2;return o.eachAfter(i?function(c){c.x=(c.x-o.x)*r,c.y=(o.y-c.y)*n}:function(c){c.x=(c.x-h)/(v-h)*r,c.y=(1-(o.y?c.y/o.y:1))*n})}return t(s,"cluster"),s.separation=function(o){return arguments.length?(e=o,s):e},s.size=function(o){return arguments.length?(i=!1,r=+o[0],n=+o[1],s):i?null:[r,n]},s.nodeSize=function(o){return arguments.length?(i=!0,r=+o[0],n=+o[1],s):i?[r,n]:null},s}t(nPe,"cluster");function iPe(e){var r=0,n=e.children,i=n&&n.length;if(!i)r=1;else for(;--i>=0;)r+=n[i].value;e.value=r}t(iPe,"count");function oPe(){return this.eachAfter(iPe)}t(oPe,"node_count");function sPe(e){var r=this,n,i=[r],s,o,a;do for(n=i.reverse(),i=[];r=n.pop();)if(e(r),s=r.children,s)for(o=0,a=s.length;o<a;++o)i.push(s[o]);while(i.length);return this}t(sPe,"node_each");function lPe(e){for(var r=this,n=[r],i,s;r=n.pop();)if(e(r),i=r.children,i)for(s=i.length-1;s>=0;--s)n.push(i[s]);return this}t(lPe,"node_eachBefore");function uPe(e){for(var r=this,n=[r],i=[],s,o,a;r=n.pop();)if(i.push(r),s=r.children,s)for(o=0,a=s.length;o<a;++o)n.push(s[o]);for(;r=i.pop();)e(r);return this}t(uPe,"node_eachAfter");function fPe(e){return this.eachAfter(function(r){for(var n=+e(r.data)||0,i=r.children,s=i&&i.length;--s>=0;)n+=i[s].value;r.value=n})}t(fPe,"node_sum");function cPe(e){return this.eachBefore(function(r){r.children&&r.children.sort(e)})}t(cPe,"node_sort");function hPe(e){for(var r=this,n=vPe(r,e),i=[r];r!==n;)r=r.parent,i.push(r);for(var s=i.length;e!==n;)i.splice(s,0,e),e=e.parent;return i}t(hPe,"node_path");function vPe(e,r){if(e===r)return e;var n=e.ancestors(),i=r.ancestors(),s=null;for(e=n.pop(),r=i.pop();e===r;)s=e,e=n.pop(),r=i.pop();return s}t(vPe,"leastCommonAncestor");function dPe(){for(var e=this,r=[e];e=e.parent;)r.push(e);return r}t(dPe,"node_ancestors");function pPe(){var e=[];return this.each(function(r){e.push(r)}),e}t(pPe,"node_descendants");function gPe(){var e=[];return this.eachBefore(function(r){r.children||e.push(r)}),e}t(gPe,"node_leaves");function yPe(){var e=this,r=[];return e.each(function(n){n!==e&&r.push({source:n.parent,target:n})}),r}t(yPe,"node_links");function C7(e,r){var n=new ly(e),i=+e.value&&(n.value=e.value),s,o=[n],a,l,u,f;for(r==null&&(r=xPe);s=o.pop();)if(i&&(s.value=+s.data.value),(l=r(s.data))&&(f=l.length))for(s.children=new Array(f),u=f-1;u>=0;--u)o.push(a=s.children[u]=new ly(l[u])),a.parent=s,a.depth=s.depth+1;return n.eachBefore(Ace)}t(C7,"hierarchy");function mPe(){return C7(this).eachBefore(bPe)}t(mPe,"node_copy");function xPe(e){return e.children}t(xPe,"defaultChildren");function bPe(e){e.data=e.data.data}t(bPe,"copyData");function Ace(e){var r=0;do e.height=r;while((e=e.parent)&&e.height<++r)}t(Ace,"computeHeight");function ly(e){this.data=e,this.depth=this.height=0,this.parent=null}t(ly,"Node$1");ly.prototype=C7.prototype={constructor:ly,count:oPe,each:sPe,eachAfter:uPe,eachBefore:lPe,sum:fPe,sort:cPe,path:hPe,ancestors:dPe,descendants:pPe,leaves:gPe,links:yPe,copy:mPe};var _Pe=Array.prototype.slice;function wPe(e){for(var r=e.length,n,i;r;)i=Math.random()*r--|0,n=e[r],e[r]=e[i],e[i]=n;return e}t(wPe,"shuffle");function Sce(e){for(var r=0,n=(e=wPe(_Pe.call(e))).length,i=[],s,o;r<n;)s=e[r],o&&Mce(o,s)?++r:(o=APe(i=TPe(i,s)),r=0);return o}t(Sce,"enclose");function TPe(e,r){var n,i;if(M5(r,e))return[r];for(n=0;n<e.length;++n)if(Fb(r,e[n])&&M5(Zm(e[n],r),e))return[e[n],r];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Fb(Zm(e[n],e[i]),r)&&Fb(Zm(e[n],r),e[i])&&Fb(Zm(e[i],r),e[n])&&M5(kce(e[n],e[i],r),e))return[e[n],e[i],r];throw new Error}t(TPe,"extendBasis");function Fb(e,r){var n=e.r-r.r,i=r.x-e.x,s=r.y-e.y;return n<0||n*n<i*i+s*s}t(Fb,"enclosesNot");function Mce(e,r){var n=e.r-r.r+1e-6,i=r.x-e.x,s=r.y-e.y;return n>0&&n*n>i*i+s*s}t(Mce,"enclosesWeak");function M5(e,r){for(var n=0;n<r.length;++n)if(!Mce(e,r[n]))return!1;return!0}t(M5,"enclosesWeakAll");function APe(e){switch(e.length){case 1:return SPe(e[0]);case 2:return Zm(e[0],e[1]);case 3:return kce(e[0],e[1],e[2])}}t(APe,"encloseBasis");function SPe(e){return{x:e.x,y:e.y,r:e.r}}t(SPe,"encloseBasis1");function Zm(e,r){var n=e.x,i=e.y,s=e.r,o=r.x,a=r.y,l=r.r,u=o-n,f=a-i,h=l-s,v=Math.sqrt(u*u+f*f);return{x:(n+o+u/v*h)/2,y:(i+a+f/v*h)/2,r:(v+s+l)/2}}t(Zm,"encloseBasis2");function kce(e,r,n){var i=e.x,s=e.y,o=e.r,a=r.x,l=r.y,u=r.r,f=n.x,h=n.y,v=n.r,c=i-a,d=i-f,g=s-l,p=s-h,b=u-o,m=v-o,y=i*i+s*s-o*o,T=y-a*a-l*l+u*u,_=y-f*f-h*h+v*v,M=d*g-c*p,w=(g*_-p*T)/(M*2)-i,x=(p*b-g*m)/M,A=(d*T-c*_)/(M*2)-s,S=(c*m-d*b)/M,k=x*x+S*S-1,L=2*(o+w*x+A*S),P=w*w+A*A-o*o,D=-(k?(L+Math.sqrt(L*L-4*k*P))/(2*k):P/L);return{x:i+w+x*D,y:s+A+S*D,r:D}}t(kce,"encloseBasis3");function LY(e,r,n){var i=e.x-r.x,s,o,a=e.y-r.y,l,u,f=i*i+a*a;f?(o=r.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(s=(f+u-o)/(2*f),l=Math.sqrt(Math.max(0,u/f-s*s)),n.x=e.x-s*i-l*a,n.y=e.y-s*a+l*i):(s=(f+o-u)/(2*f),l=Math.sqrt(Math.max(0,o/f-s*s)),n.x=r.x+s*i-l*a,n.y=r.y+s*a+l*i)):(n.x=r.x+n.r,n.y=r.y)}t(LY,"place");function RY(e,r){var n=e.r+r.r-1e-6,i=r.x-e.x,s=r.y-e.y;return n>0&&n*n>i*i+s*s}t(RY,"intersects");function PY(e){var r=e._,n=e.next._,i=r.r+n.r,s=(r.x*n.r+n.x*r.r)/i,o=(r.y*n.r+n.y*r.r)/i;return s*s+o*o}t(PY,"score");function Bb(e){this._=e,this.next=null,this.previous=null}t(Bb,"Node");function Ece(e){if(!(s=e.length))return 0;var r,n,i,s,o,a,l,u,f,h,v;if(r=e[0],r.x=0,r.y=0,!(s>1))return r.r;if(n=e[1],r.x=-n.r,n.x=r.r,n.y=0,!(s>2))return r.r+n.r;LY(n,r,i=e[2]),r=new Bb(r),n=new Bb(n),i=new Bb(i),r.next=i.previous=n,n.next=r.previous=i,i.next=n.previous=r;e:for(l=3;l<s;++l){LY(r._,n._,i=e[l]),i=new Bb(i),u=n.next,f=r.previous,h=n._.r,v=r._.r;do if(h<=v){if(RY(u._,i._)){n=u,r.next=n,n.previous=r,--l;continue e}h+=u._.r,u=u.next}else{if(RY(f._,i._)){r=f,r.next=n,n.previous=r,--l;continue e}v+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=r,i.next=n,r.next=n.previous=n=i,o=PY(r);(i=i.next)!==n;)(a=PY(i))<o&&(r=i,o=a);n=r.next}for(r=[n._],i=n;(i=i.next)!==n;)r.push(i._);for(i=Sce(r),l=0;l<s;++l)r=e[l],r.x-=i.x,r.y-=i.y;return i.r}t(Ece,"packEnclose");function MPe(e){return Ece(e),e}t(MPe,"siblings");function kPe(e){return e==null?null:t2(e)}t(kPe,"optional");function t2(e){if(typeof e!="function")throw new Error;return e}t(t2,"required");function n0(){return 0}t(n0,"constantZero");function Bg(e){return function(){return e}}t(Bg,"constant$6");function EPe(e){return Math.sqrt(e.value)}t(EPe,"defaultRadius");function CPe(){var e=null,r=1,n=1,i=n0;function s(o){return o.x=r/2,o.y=n/2,e?o.eachBefore(DY(e)).eachAfter(k5(i,.5)).eachBefore(IY(1)):o.eachBefore(DY(EPe)).eachAfter(k5(n0,1)).eachAfter(k5(i,o.r/Math.min(r,n))).eachBefore(IY(Math.min(r,n)/(2*o.r))),o}return t(s,"pack"),s.radius=function(o){return arguments.length?(e=kPe(o),s):e},s.size=function(o){return arguments.length?(r=+o[0],n=+o[1],s):[r,n]},s.padding=function(o){return arguments.length?(i=typeof o=="function"?o:Bg(+o),s):i},s}t(CPe,"index$4");function DY(e){return function(r){r.children||(r.r=Math.max(0,+e(r)||0))}}t(DY,"radiusLeaf");function k5(e,r){return function(n){if(i=n.children){var i,s,o=i.length,a=e(n)*r||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=Ece(i),a)for(s=0;s<o;++s)i[s].r-=a;n.r=l+a}}}t(k5,"packChildren");function IY(e){return function(r){var n=r.parent;r.r*=e,n&&(r.x=n.x+e*r.x,r.y=n.y+e*r.y)}}t(IY,"translateChild");function Cce(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}t(Cce,"roundNode");function yx(e,r,n,i,s){for(var o=e.children,a,l=-1,u=o.length,f=e.value&&(i-r)/e.value;++l<u;)a=o[l],a.y0=n,a.y1=s,a.x0=r,a.x1=r+=a.value*f}t(yx,"treemapDice");function LPe(){var e=1,r=1,n=0,i=!1;function s(a){var l=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=r/l,a.eachBefore(o(r,l)),i&&a.eachBefore(Cce),a}t(s,"partition");function o(a,l){return function(u){u.children&&yx(u,u.x0,a*(u.depth+1)/l,u.x1,a*(u.depth+2)/l);var f=u.x0,h=u.y0,v=u.x1-n,c=u.y1-n;v<f&&(f=v=(f+v)/2),c<h&&(h=c=(h+c)/2),u.x0=f,u.y0=h,u.x1=v,u.y1=c}}return t(o,"positionNode"),s.round=function(a){return arguments.length?(i=!!a,s):i},s.size=function(a){return arguments.length?(e=+a[0],r=+a[1],s):[e,r]},s.padding=function(a){return arguments.length?(n=+a,s):n},s}t(LPe,"partition$2");var zY="$",RPe={depth:-1},FY={};function PPe(e){return e.id}t(PPe,"defaultId$2");function DPe(e){return e.parentId}t(DPe,"defaultParentId");function IPe(){var e=PPe,r=DPe;function n(i){var s,o,a=i.length,l,u,f,h=new Array(a),v,c,d={};for(o=0;o<a;++o)s=i[o],f=h[o]=new ly(s),(v=e(s,o,i))!=null&&(v+="")&&(c=zY+(f.id=v),d[c]=c in d?FY:f);for(o=0;o<a;++o)if(f=h[o],v=r(i[o],o,i),v==null||!(v+="")){if(l)throw new Error("multiple roots");l=f}else{if(u=d[zY+v],!u)throw new Error("missing: "+v);if(u===FY)throw new Error("ambiguous: "+v);u.children?u.children.push(f):u.children=[f],f.parent=u}if(!l)throw new Error("no root");if(l.parent=RPe,l.eachBefore(function(g){g.depth=g.parent.depth+1,--a}).eachBefore(Ace),l.parent=null,a>0)throw new Error("cycle");return l}return t(n,"stratify"),n.id=function(i){return arguments.length?(e=t2(i),n):e},n.parentId=function(i){return arguments.length?(r=t2(i),n):r},n}t(IPe,"stratify");function zPe(e,r){return e.parent===r.parent?1:2}t(zPe,"defaultSeparation");function E5(e){var r=e.children;return r?r[0]:e.t}t(E5,"nextLeft");function C5(e){var r=e.children;return r?r[r.length-1]:e.t}t(C5,"nextRight");function FPe(e,r,n){var i=n/(r.i-e.i);r.c-=i,r.s+=n,e.c+=i,r.z+=n,r.m+=n}t(FPe,"moveSubtree");function BPe(e){for(var r=0,n=0,i=e.children,s=i.length,o;--s>=0;)o=i[s],o.z+=r,o.m+=r,r+=o.s+(n+=o.c)}t(BPe,"executeShifts");function OPe(e,r,n){return e.a.parent===r.parent?e.a:n}t(OPe,"nextAncestor");function __(e,r){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=r}t(__,"TreeNode");__.prototype=Object.create(ly.prototype);function NPe(e){for(var r=new __(e,0),n,i=[r],s,o,a,l;n=i.pop();)if(o=n._.children)for(n.children=new Array(l=o.length),a=l-1;a>=0;--a)i.push(s=n.children[a]=new __(o[a],a)),s.parent=n;return(r.parent=new __(null,0)).children=[r],r}t(NPe,"treeRoot");function qPe(){var e=zPe,r=1,n=1,i=null;function s(f){var h=NPe(f);if(h.eachAfter(o),h.parent.m=-h.z,h.eachBefore(a),i)f.eachBefore(u);else{var v=f,c=f,d=f;f.eachBefore(function(y){y.x<v.x&&(v=y),y.x>c.x&&(c=y),y.depth>d.depth&&(d=y)});var g=v===c?1:e(v,c)/2,p=g-v.x,b=r/(c.x+g+p),m=n/(d.depth||1);f.eachBefore(function(y){y.x=(y.x+p)*b,y.y=y.depth*m})}return f}t(s,"tree");function o(f){var h=f.children,v=f.parent.children,c=f.i?v[f.i-1]:null;if(h){BPe(f);var d=(h[0].z+h[h.length-1].z)/2;c?(f.z=c.z+e(f._,c._),f.m=f.z-d):f.z=d}else c&&(f.z=c.z+e(f._,c._));f.parent.A=l(f,c,f.parent.A||v[0])}t(o,"firstWalk");function a(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}t(a,"secondWalk");function l(f,h,v){if(h){for(var c=f,d=f,g=h,p=c.parent.children[0],b=c.m,m=d.m,y=g.m,T=p.m,_;g=C5(g),c=E5(c),g&&c;)p=E5(p),d=C5(d),d.a=f,_=g.z+y-c.z-b+e(g._,c._),_>0&&(FPe(OPe(g,f,v),f,_),b+=_,m+=_),y+=g.m,b+=c.m,T+=p.m,m+=d.m;g&&!C5(d)&&(d.t=g,d.m+=y-m),c&&!E5(p)&&(p.t=c,p.m+=b-T,v=f)}return v}t(l,"apportion");function u(f){f.x*=r,f.y=f.depth*n}return t(u,"sizeNode"),s.separation=function(f){return arguments.length?(e=f,s):e},s.size=function(f){return arguments.length?(i=!1,r=+f[0],n=+f[1],s):i?null:[r,n]},s.nodeSize=function(f){return arguments.length?(i=!0,r=+f[0],n=+f[1],s):i?[r,n]:null},s}t(qPe,"tree");function jw(e,r,n,i,s){for(var o=e.children,a,l=-1,u=o.length,f=e.value&&(s-n)/e.value;++l<u;)a=o[l],a.x0=r,a.x1=i,a.y0=n,a.y1=n+=a.value*f}t(jw,"treemapSlice");var Lce=(1+Math.sqrt(5))/2;function Rce(e,r,n,i,s,o){for(var a=[],l=r.children,u,f,h=0,v=0,c=l.length,d,g,p=r.value,b,m,y,T,_,M,w;h<c;){d=s-n,g=o-i;do b=l[v++].value;while(!b&&v<c);for(m=y=b,M=Math.max(g/d,d/g)/(p*e),w=b*b*M,_=Math.max(y/w,w/m);v<c;++v){if(b+=f=l[v].value,f<m&&(m=f),f>y&&(y=f),w=b*b*M,T=Math.max(y/w,w/m),T>_){b-=f;break}_=T}a.push(u={value:b,dice:d<g,children:l.slice(h,v)}),u.dice?yx(u,n,i,s,p?i+=g*b/p:o):jw(u,n,i,p?n+=d*b/p:s,o),p-=b,h=v}return a}t(Rce,"squarifyRatio");const Pce=t(function e(r){function n(i,s,o,a,l){Rce(r,i,s,o,a,l)}return t(n,"squarify"),n.ratio=function(i){return e((i=+i)>1?i:1)},n},"custom")(Lce);function UPe(){var e=Pce,r=!1,n=1,i=1,s=[0],o=n0,a=n0,l=n0,u=n0,f=n0;function h(c){return c.x0=c.y0=0,c.x1=n,c.y1=i,c.eachBefore(v),s=[0],r&&c.eachBefore(Cce),c}t(h,"treemap");function v(c){var d=s[c.depth],g=c.x0+d,p=c.y0+d,b=c.x1-d,m=c.y1-d;b<g&&(g=b=(g+b)/2),m<p&&(p=m=(p+m)/2),c.x0=g,c.y0=p,c.x1=b,c.y1=m,c.children&&(d=s[c.depth+1]=o(c)/2,g+=f(c)-d,p+=a(c)-d,b-=l(c)-d,m-=u(c)-d,b<g&&(g=b=(g+b)/2),m<p&&(p=m=(p+m)/2),e(c,g,p,b,m))}return t(v,"positionNode"),h.round=function(c){return arguments.length?(r=!!c,h):r},h.size=function(c){return arguments.length?(n=+c[0],i=+c[1],h):[n,i]},h.tile=function(c){return arguments.length?(e=t2(c),h):e},h.padding=function(c){return arguments.length?h.paddingInner(c).paddingOuter(c):h.paddingInner()},h.paddingInner=function(c){return arguments.length?(o=typeof c=="function"?c:Bg(+c),h):o},h.paddingOuter=function(c){return arguments.length?h.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):h.paddingTop()},h.paddingTop=function(c){return arguments.length?(a=typeof c=="function"?c:Bg(+c),h):a},h.paddingRight=function(c){return arguments.length?(l=typeof c=="function"?c:Bg(+c),h):l},h.paddingBottom=function(c){return arguments.length?(u=typeof c=="function"?c:Bg(+c),h):u},h.paddingLeft=function(c){return arguments.length?(f=typeof c=="function"?c:Bg(+c),h):f},h}t(UPe,"index$3");function HPe(e,r,n,i,s){var o=e.children,a,l=o.length,u,f=new Array(l+1);for(f[0]=u=a=0;a<l;++a)f[a+1]=u+=o[a].value;h(0,l,e.value,r,n,i,s);function h(v,c,d,g,p,b,m){if(v>=c-1){var y=o[v];y.x0=g,y.y0=p,y.x1=b,y.y1=m;return}for(var T=f[v],_=d/2+T,M=v+1,w=c-1;M<w;){var x=M+w>>>1;f[x]<_?M=x+1:w=x}_-f[M-1]<f[M]-_&&v+1<M&&--M;var A=f[M]-T,S=d-A;if(b-g>m-p){var k=(g*S+b*A)/d;h(v,M,A,g,p,k,m),h(M,c,S,k,p,b,m)}else{var L=(p*S+m*A)/d;h(v,M,A,g,p,b,L),h(M,c,S,g,L,b,m)}}t(h,"partition")}t(HPe,"binary");function $Pe(e,r,n,i,s){(e.depth&1?jw:yx)(e,r,n,i,s)}t($Pe,"sliceDice");const VPe=t(function e(r){function n(i,s,o,a,l){if((u=i._squarify)&&u.ratio===r)for(var u,f,h,v,c=-1,d,g=u.length,p=i.value;++c<g;){for(f=u[c],h=f.children,v=f.value=0,d=h.length;v<d;++v)f.value+=h[v].value;f.dice?yx(f,s,o,a,o+=(l-o)*f.value/p):jw(f,s,o,s+=(a-s)*f.value/p,l),p-=f.value}else i._squarify=u=Rce(r,i,s,o,a,l),u.ratio=r}return t(n,"resquarify"),n.ratio=function(i){return e((i=+i)>1?i:1)},n},"custom")(Lce),GPe=Object.freeze(Object.defineProperty({__proto__:null,cluster:nPe,hierarchy:C7,pack:CPe,packSiblings:MPe,packEnclose:Sce,partition:LPe,stratify:IPe,tree:qPe,treemap:UPe,treemapBinary:HPe,treemapDice:yx,treemapSlice:jw,treemapSliceDice:$Pe,treemapSquarify:Pce,treemapResquarify:VPe},Symbol.toStringTag,{value:"Module"})),Yw=Hc(GPe);var BY;function r2(){return BY||(BY=1,function(e){var r=Yw,n=xn,i=Nt.exports,s=ko.makeColorScaleFuncFromTrace,o=F1().makePullColorFn,a=F1().generateExtendedColors,l=ko.calc,u=jn.ALMOST_EQUAL,f={},h={},v={};e.calc=function(d,g){var p=d._fullLayout,b=g.ids,m=i.isArrayOrTypedArray(b),y=g.labels,T=g.parents,_=g.values,M=i.isArrayOrTypedArray(_),w=[],x={},A={},S=t(function(ne,he){x[ne]?x[ne].push(he):x[ne]=[he],A[he]=1},"addToLookup"),k=t(function(ne){return ne||typeof ne=="number"},"isValidKey"),L=t(function(ne){return!M||n(_[ne])&&_[ne]>=0},"isValidVal"),P,D,B;m?(P=Math.min(b.length,T.length),D=t(function(ne){return k(b[ne])&&L(ne)},"isValid"),B=t(function(ne){return String(b[ne])},"getId")):(P=Math.min(y.length,T.length),D=t(function(ne){return k(y[ne])&&L(ne)},"isValid"),B=t(function(ne){return String(y[ne])},"getId")),M&&(P=Math.min(P,_.length));for(var z=0;z<P;z++)if(D(z)){var R=B(z),F=k(T[z])?String(T[z]):"",O={i:z,id:R,pid:F,label:k(y[z])?String(y[z]):""};M&&(O.v=+_[z]),w.push(O),S(F,R)}if(x[""]){if(x[""].length>1){for(var j=i.randstr(),X=0;X<w.length;X++)w[X].pid===""&&(w[X].pid=j);w.unshift({hasMultipleRoots:!0,id:j,pid:"",label:""})}}else{var q=[],H;for(H in x)A[H]||q.push(H);if(q.length===1)H=q[0],w.unshift({hasImpliedRoot:!0,id:H,pid:"",label:H});else return i.warn(["Multiple implied roots, cannot build",g.type,"hierarchy of",g.name+".","These roots include:",q.join(", ")].join(" "))}var G;try{G=r.stratify().id(function(ne){return ne.id}).parentId(function(ne){return ne.pid})(w)}catch(ne){return i.warn(["Failed to build",g.type,"hierarchy of",g.name+".","Error:",ne.message].join(" "))}var $=r.hierarchy(G),te=!1;if(M)switch(g.branchvalues){case"remainder":$.sum(function(ne){return ne.data.v});break;case"total":$.each(function(ne){var he=ne.data.data,re=he.v;if(ne.children){var ae=ne.children.reduce(function(fe,ce){return fe+ce.data.data.v},0);if((he.hasImpliedRoot||he.hasMultipleRoots)&&(re=ae),re<ae*u)return te=!0,i.warn(["Total value for node",ne.data.data.id,"of",g.name,"is smaller than the sum of its children.",`
parent value =`,re,`
children sum =`,ae].join(" "))}ne.value=re});break}else c($,g,{branches:g.count.indexOf("branches")!==-1,leaves:g.count.indexOf("leaves")!==-1});if(!te){g.sort&&$.sort(function(ne,he){return he.value-ne.value});var ee,ie,se=g.marker.colors||[],W=!!se.length;return g._hasColorscale?(W||(se=M?g.values:g._values),l(d,g,{vals:se,containerStr:"marker",cLetter:"c"}),ie=s(g.marker)):ee=o(p["_"+g.type+"colormap"]),$.each(function(ne){var he=ne.data.data;he.color=g._hasColorscale?ie(se[he.i]):ee(se[he.i],he.id)}),w[0].hierarchy=$,w}},e._runCrossTraceCalc=function(d,g){var p=g._fullLayout,b=g.calcdata,m=p[d+"colorway"],y=p["_"+d+"colormap"];p["extend"+d+"colors"]&&(m=a(m,d==="icicle"?v:d==="treemap"?h:f));var T=0,_;function M(S){var k=S.data.data,L=k.id;k.color===!1&&(y[L]?k.color=y[L]:S.parent?S.parent.parent?k.color=S.parent.data.data.color:(y[L]=k.color=m[T%m.length],T++):k.color=_)}t(M,"pickColor");for(var w=0;w<b.length;w++){var x=b[w],A=x[0];A.trace.type===d&&A.hierarchy&&(_=A.trace.root.color,A.hierarchy.each(M))}},e.crossTraceCalc=function(d){return e._runCrossTraceCalc("sunburst",d)};function c(d,g,p){var b=0,m=d.children;if(m){for(var y=m.length,T=0;T<y;T++)b+=c(m[T],g,p);p.branches&&b++}else p.leaves&&b++;return d.value=d.data.data.value=b,g._values||(g._values=[]),g._values[d.data.data.i]=b,b}t(c,"countDescendants")}(S5)),S5}t(r2,"requireCalc$s");var L5={};function Oy(e,r,n){e.prototype=r.prototype=n,n.constructor=e}t(Oy,"define");function mx(e,r){var n=Object.create(e.prototype);for(var i in r)n[i]=r[i];return n}t(mx,"extend");function gp(){}t(gp,"Color");var m0=.7,uy=1/m0,Xg="\\s*([+-]?\\d+)\\s*",B1="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",uv="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jPe=/^#([0-9a-f]{3,8})$/,YPe=new RegExp("^rgb\\("+[Xg,Xg,Xg]+"\\)$"),WPe=new RegExp("^rgb\\("+[uv,uv,uv]+"\\)$"),XPe=new RegExp("^rgba\\("+[Xg,Xg,Xg,B1]+"\\)$"),ZPe=new RegExp("^rgba\\("+[uv,uv,uv,B1]+"\\)$"),KPe=new RegExp("^hsl\\("+[B1,uv,uv]+"\\)$"),JPe=new RegExp("^hsla\\("+[B1,uv,uv,B1]+"\\)$"),OY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oy(gp,O1,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:NY,formatHex:NY,formatHsl:QPe,formatRgb:qY,toString:qY});function NY(){return this.rgb().formatHex()}t(NY,"color_formatHex");function QPe(){return Dce(this).formatHsl()}t(QPe,"color_formatHsl");function qY(){return this.rgb().formatRgb()}t(qY,"color_formatRgb");function O1(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=jPe.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?UY(r):n===3?new Kl(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?Ob(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?Ob(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=YPe.exec(e))?new Kl(r[1],r[2],r[3],1):(r=WPe.exec(e))?new Kl(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=XPe.exec(e))?Ob(r[1],r[2],r[3],r[4]):(r=ZPe.exec(e))?Ob(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=KPe.exec(e))?VY(r[1],r[2]/100,r[3]/100,1):(r=JPe.exec(e))?VY(r[1],r[2]/100,r[3]/100,r[4]):OY.hasOwnProperty(e)?UY(OY[e]):e==="transparent"?new Kl(NaN,NaN,NaN,0):null}t(O1,"color");function UY(e){return new Kl(e>>16&255,e>>8&255,e&255,1)}t(UY,"rgbn");function Ob(e,r,n,i){return i<=0&&(e=r=n=NaN),new Kl(e,r,n,i)}t(Ob,"rgba");function L7(e){return e instanceof gp||(e=O1(e)),e?(e=e.rgb(),new Kl(e.r,e.g,e.b,e.opacity)):new Kl}t(L7,"rgbConvert");function a2(e,r,n,i){return arguments.length===1?L7(e):new Kl(e,r,n,i==null?1:i)}t(a2,"rgb$2");function Kl(e,r,n,i){this.r=+e,this.g=+r,this.b=+n,this.opacity=+i}t(Kl,"Rgb");Oy(Kl,a2,mx(gp,{brighter:function(e){return e=e==null?uy:Math.pow(uy,e),new Kl(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?m0:Math.pow(m0,e),new Kl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HY,formatHex:HY,formatRgb:$Y,toString:$Y}));function HY(){return"#"+R5(this.r)+R5(this.g)+R5(this.b)}t(HY,"rgb_formatHex");function $Y(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}t($Y,"rgb_formatRgb");function R5(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}t(R5,"hex");function VY(e,r,n,i){return i<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new nv(e,r,n,i)}t(VY,"hsla");function Dce(e){if(e instanceof nv)return new nv(e.h,e.s,e.l,e.opacity);if(e instanceof gp||(e=O1(e)),!e)return new nv;if(e instanceof nv)return e;e=e.rgb();var r=e.r/255,n=e.g/255,i=e.b/255,s=Math.min(r,n,i),o=Math.max(r,n,i),a=NaN,l=o-s,u=(o+s)/2;return l?(r===o?a=(n-i)/l+(n<i)*6:n===o?a=(i-r)/l+2:a=(r-n)/l+4,l/=u<.5?o+s:2-o-s,a*=60):l=u>0&&u<1?0:a,new nv(a,l,u,e.opacity)}t(Dce,"hslConvert");function Wz(e,r,n,i){return arguments.length===1?Dce(e):new nv(e,r,n,i==null?1:i)}t(Wz,"hsl$3");function nv(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}t(nv,"Hsl");Oy(nv,Wz,mx(gp,{brighter:function(e){return e=e==null?uy:Math.pow(uy,e),new nv(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?m0:Math.pow(m0,e),new nv(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,s=2*n-i;return new Kl(P5(e>=240?e-240:e+120,s,i),P5(e,s,i),P5(e<120?e+240:e-120,s,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function P5(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}t(P5,"hsl2rgb");var Ice=Math.PI/180,zce=180/Math.PI,n2=18,Fce=.96422,Bce=1,Oce=.82521,Nce=4/29,Zg=6/29,qce=3*Zg*Zg,eDe=Zg*Zg*Zg;function Uce(e){if(e instanceof fv)return new fv(e.l,e.a,e.b,e.opacity);if(e instanceof sd)return Hce(e);e instanceof Kl||(e=L7(e));var r=F5(e.r),n=F5(e.g),i=F5(e.b),s=D5((.2225045*r+.7168786*n+.0606169*i)/Bce),o,a;return r===n&&n===i?o=a=s:(o=D5((.4360747*r+.3850649*n+.1430804*i)/Fce),a=D5((.0139322*r+.0971045*n+.7141733*i)/Oce)),new fv(116*s-16,500*(o-s),200*(s-a),e.opacity)}t(Uce,"labConvert");function Xz(e,r,n,i){return arguments.length===1?Uce(e):new fv(e,r,n,i==null?1:i)}t(Xz,"lab$1");function fv(e,r,n,i){this.l=+e,this.a=+r,this.b=+n,this.opacity=+i}t(fv,"Lab");Oy(fv,Xz,mx(gp,{brighter:function(e){return new fv(this.l+n2*(e==null?1:e),this.a,this.b,this.opacity)},darker:function(e){return new fv(this.l-n2*(e==null?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,r=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return r=Fce*I5(r),e=Bce*I5(e),n=Oce*I5(n),new Kl(z5(3.1338561*r-1.6168667*e-.4906146*n),z5(-.9787684*r+1.9161415*e+.033454*n),z5(.0719453*r-.2289914*e+1.4052427*n),this.opacity)}}));function D5(e){return e>eDe?Math.pow(e,1/3):e/qce+Nce}t(D5,"xyz2lab");function I5(e){return e>Zg?e*e*e:qce*(e-Nce)}t(I5,"lab2xyz");function z5(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}t(z5,"lrgb2rgb");function F5(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}t(F5,"rgb2lrgb");function tDe(e){if(e instanceof sd)return new sd(e.h,e.c,e.l,e.opacity);if(e instanceof fv||(e=Uce(e)),e.a===0&&e.b===0)return new sd(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var r=Math.atan2(e.b,e.a)*zce;return new sd(r<0?r+360:r,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}t(tDe,"hclConvert");function Zz(e,r,n,i){return arguments.length===1?tDe(e):new sd(e,r,n,i==null?1:i)}t(Zz,"hcl$2");function sd(e,r,n,i){this.h=+e,this.c=+r,this.l=+n,this.opacity=+i}t(sd,"Hcl");function Hce(e){if(isNaN(e.h))return new fv(e.l,0,0,e.opacity);var r=e.h*Ice;return new fv(e.l,Math.cos(r)*e.c,Math.sin(r)*e.c,e.opacity)}t(Hce,"hcl2lab");Oy(sd,Zz,mx(gp,{brighter:function(e){return new sd(this.h,this.c,this.l+n2*(e==null?1:e),this.opacity)},darker:function(e){return new sd(this.h,this.c,this.l-n2*(e==null?1:e),this.opacity)},rgb:function(){return Hce(this).rgb()}}));var $ce=-.14861,R7=1.78277,P7=-.29227,Ww=-.90649,N1=1.97294,GY=N1*Ww,jY=N1*R7,YY=R7*P7-Ww*$ce;function rDe(e){if(e instanceof c0)return new c0(e.h,e.s,e.l,e.opacity);e instanceof Kl||(e=L7(e));var r=e.r/255,n=e.g/255,i=e.b/255,s=(YY*i+GY*r-jY*n)/(YY+GY-jY),o=i-s,a=(N1*(n-s)-P7*o)/Ww,l=Math.sqrt(a*a+o*o)/(N1*s*(1-s)),u=l?Math.atan2(a,o)*zce-120:NaN;return new c0(u<0?u+360:u,l,s,e.opacity)}t(rDe,"cubehelixConvert");function Kz(e,r,n,i){return arguments.length===1?rDe(e):new c0(e,r,n,i==null?1:i)}t(Kz,"cubehelix$2");function c0(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}t(c0,"Cubehelix");Oy(c0,Kz,mx(gp,{brighter:function(e){return e=e==null?uy:Math.pow(uy,e),new c0(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?m0:Math.pow(m0,e),new c0(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Ice,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),i=Math.cos(e),s=Math.sin(e);return new Kl(255*(r+n*($ce*i+R7*s)),255*(r+n*(P7*i+Ww*s)),255*(r+n*(N1*i)),this.opacity)}}));function Vce(e,r,n,i,s){var o=e*e,a=o*e;return((1-3*e+3*o-a)*r+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*s)/6}t(Vce,"basis");function Gce(e){var r=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),s=e[i],o=e[i+1],a=i>0?e[i-1]:2*s-o,l=i<r-1?e[i+2]:2*o-s;return Vce((n-i/r)*r,a,s,o,l)}}t(Gce,"basis$1");function jce(e){var r=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*r),s=e[(i+r-1)%r],o=e[i%r],a=e[(i+1)%r],l=e[(i+2)%r];return Vce((n-i/r)*r,s,o,a,l)}}t(jce,"basisClosed");function Xw(e){return function(){return e}}t(Xw,"constant$5");function Yce(e,r){return function(n){return e+n*r}}t(Yce,"linear");function aDe(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(i){return Math.pow(e+i*r,n)}}t(aDe,"exponential");function Zw(e,r){var n=r-e;return n?Yce(e,n>180||n<-180?n-360*Math.round(n/360):n):Xw(isNaN(e)?r:e)}t(Zw,"hue$1");function nDe(e){return(e=+e)==1?zl:function(r,n){return n-r?aDe(r,n,e):Xw(isNaN(r)?n:r)}}t(nDe,"gamma");function zl(e,r){var n=r-e;return n?Yce(e,n):Xw(isNaN(e)?r:e)}t(zl,"nogamma");const Jz=t(function e(r){var n=nDe(r);function i(s,o){var a=n((s=a2(s)).r,(o=a2(o)).r),l=n(s.g,o.g),u=n(s.b,o.b),f=zl(s.opacity,o.opacity);return function(h){return s.r=a(h),s.g=l(h),s.b=u(h),s.opacity=f(h),s+""}}return t(i,"rgb"),i.gamma=e,i},"rgbGamma")(1);function Wce(e){return function(r){var n=r.length,i=new Array(n),s=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=a2(r[a]),i[a]=l.r||0,s[a]=l.g||0,o[a]=l.b||0;return i=e(i),s=e(s),o=e(o),l.opacity=1,function(u){return l.r=i(u),l.g=s(u),l.b=o(u),l+""}}}t(Wce,"rgbSpline");var iDe=Wce(Gce),oDe=Wce(jce);function D7(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,i=r.slice(),s;return function(o){for(s=0;s<n;++s)i[s]=e[s]*(1-o)+r[s]*o;return i}}t(D7,"numberArray");function Xce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}t(Xce,"isNumberArray");function sDe(e,r){return(Xce(r)?D7:Zce)(e,r)}t(sDe,"array$1");function Zce(e,r){var n=r?r.length:0,i=e?Math.min(n,e.length):0,s=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)s[a]=I7(e[a],r[a]);for(;a<n;++a)o[a]=r[a];return function(l){for(a=0;a<i;++a)o[a]=s[a](l);return o}}t(Zce,"genericArray");function Kce(e,r){var n=new Date;return e=+e,r=+r,function(i){return n.setTime(e*(1-i)+r*i),n}}t(Kce,"date");function rv(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}t(rv,"number$1");function Jce(e,r){var n={},i={},s;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(s in r)s in e?n[s]=I7(e[s],r[s]):i[s]=r[s];return function(o){for(s in n)i[s]=n[s](o);return i}}t(Jce,"object$2");var Qz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,B5=new RegExp(Qz.source,"g");function lDe(e){return function(){return e}}t(lDe,"zero");function uDe(e){return function(r){return e(r)+""}}t(uDe,"one");function Qce(e,r){var n=Qz.lastIndex=B5.lastIndex=0,i,s,o,a=-1,l=[],u=[];for(e=e+"",r=r+"";(i=Qz.exec(e))&&(s=B5.exec(r));)(o=s.index)>n&&(o=r.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(s=s[0])?l[a]?l[a]+=s:l[++a]=s:(l[++a]=null,u.push({i:a,x:rv(i,s)})),n=B5.lastIndex;return n<r.length&&(o=r.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?u[0]?uDe(u[0].x):lDe(r):(r=u.length,function(f){for(var h=0,v;h<r;++h)l[(v=u[h]).i]=v.x(f);return l.join("")})}t(Qce,"string$1");function I7(e,r){var n=typeof r,i;return r==null||n==="boolean"?Xw(r):(n==="number"?rv:n==="string"?(i=O1(r))?(r=i,Jz):Qce:r instanceof O1?Jz:r instanceof Date?Kce:Xce(r)?D7:Array.isArray(r)?Zce:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Jce:rv)(e,r)}t(I7,"value$2");function fDe(e){var r=e.length;return function(n){return e[Math.max(0,Math.min(r-1,Math.floor(n*r)))]}}t(fDe,"discrete");function cDe(e,r){var n=Zw(+e,+r);return function(i){var s=n(i);return s-360*Math.floor(s/360)}}t(cDe,"hue");function hDe(e,r){return e=+e,r=+r,function(n){return Math.round(e*(1-n)+r*n)}}t(hDe,"round$1");var WY=180/Math.PI,eF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ehe(e,r,n,i,s,o){var a,l,u;return(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a),(u=e*n+r*i)&&(n-=e*u,i-=r*u),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,u/=l),e*i<r*n&&(e=-e,r=-r,u=-u,a=-a),{translateX:s,translateY:o,rotate:Math.atan2(r,e)*WY,skewX:Math.atan(u)*WY,scaleX:a,scaleY:l}}t(ehe,"decompose");var Nm,O5,XY,Nb;function vDe(e){return e==="none"?eF:(Nm||(Nm=document.createElement("DIV"),O5=document.documentElement,XY=document.defaultView),Nm.style.transform=e,e=XY.getComputedStyle(O5.appendChild(Nm),null).getPropertyValue("transform"),O5.removeChild(Nm),e=e.slice(7,-1).split(","),ehe(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}t(vDe,"parseCss");function dDe(e){return e==null||(Nb||(Nb=document.createElementNS("http://www.w3.org/2000/svg","g")),Nb.setAttribute("transform",e),!(e=Nb.transform.baseVal.consolidate()))?eF:(e=e.matrix,ehe(e.a,e.b,e.c,e.d,e.e,e.f))}t(dDe,"parseSvg");function the(e,r,n,i){function s(f){return f.length?f.pop()+" ":""}t(s,"pop");function o(f,h,v,c,d,g){if(f!==v||h!==c){var p=d.push("translate(",null,r,null,n);g.push({i:p-4,x:rv(f,v)},{i:p-2,x:rv(h,c)})}else(v||c)&&d.push("translate("+v+r+c+n)}t(o,"translate");function a(f,h,v,c){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),c.push({i:v.push(s(v)+"rotate(",null,i)-2,x:rv(f,h)})):h&&v.push(s(v)+"rotate("+h+i)}t(a,"rotate");function l(f,h,v,c){f!==h?c.push({i:v.push(s(v)+"skewX(",null,i)-2,x:rv(f,h)}):h&&v.push(s(v)+"skewX("+h+i)}t(l,"skewX");function u(f,h,v,c,d,g){if(f!==v||h!==c){var p=d.push(s(d)+"scale(",null,",",null,")");g.push({i:p-4,x:rv(f,v)},{i:p-2,x:rv(h,c)})}else(v!==1||c!==1)&&d.push(s(d)+"scale("+v+","+c+")")}return t(u,"scale"),function(f,h){var v=[],c=[];return f=e(f),h=e(h),o(f.translateX,f.translateY,h.translateX,h.translateY,v,c),a(f.rotate,h.rotate,v,c),l(f.skewX,h.skewX,v,c),u(f.scaleX,f.scaleY,h.scaleX,h.scaleY,v,c),f=h=null,function(d){for(var g=-1,p=c.length,b;++g<p;)v[(b=c[g]).i]=b.x(d);return v.join("")}}}t(the,"interpolateTransform");var pDe=the(vDe,"px, ","px)","deg)"),gDe=the(dDe,", ",")",")"),qm=Math.SQRT2,N5=2,ZY=4,yDe=1e-12;function KY(e){return((e=Math.exp(e))+1/e)/2}t(KY,"cosh$1");function mDe(e){return((e=Math.exp(e))-1/e)/2}t(mDe,"sinh$1");function xDe(e){return((e=Math.exp(2*e))-1)/(e+1)}t(xDe,"tanh$1");function bDe(e,r){var n=e[0],i=e[1],s=e[2],o=r[0],a=r[1],l=r[2],u=o-n,f=a-i,h=u*u+f*f,v,c;if(h<yDe)c=Math.log(l/s)/qm,v=t(function(y){return[n+y*u,i+y*f,s*Math.exp(qm*y*c)]},"i");else{var d=Math.sqrt(h),g=(l*l-s*s+ZY*h)/(2*s*N5*d),p=(l*l-s*s-ZY*h)/(2*l*N5*d),b=Math.log(Math.sqrt(g*g+1)-g),m=Math.log(Math.sqrt(p*p+1)-p);c=(m-b)/qm,v=t(function(y){var T=y*c,_=KY(b),M=s/(N5*d)*(_*xDe(qm*T+b)-mDe(b));return[n+M*u,i+M*f,s*_/KY(qm*T+b)]},"i")}return v.duration=c*1e3,v}t(bDe,"zoom$1");function rhe(e){return function(r,n){var i=e((r=Wz(r)).h,(n=Wz(n)).h),s=zl(r.s,n.s),o=zl(r.l,n.l),a=zl(r.opacity,n.opacity);return function(l){return r.h=i(l),r.s=s(l),r.l=o(l),r.opacity=a(l),r+""}}}t(rhe,"hsl$1");const _De=rhe(Zw);var wDe=rhe(zl);function TDe(e,r){var n=zl((e=Xz(e)).l,(r=Xz(r)).l),i=zl(e.a,r.a),s=zl(e.b,r.b),o=zl(e.opacity,r.opacity);return function(a){return e.l=n(a),e.a=i(a),e.b=s(a),e.opacity=o(a),e+""}}t(TDe,"lab");function ahe(e){return function(r,n){var i=e((r=Zz(r)).h,(n=Zz(n)).h),s=zl(r.c,n.c),o=zl(r.l,n.l),a=zl(r.opacity,n.opacity);return function(l){return r.h=i(l),r.c=s(l),r.l=o(l),r.opacity=a(l),r+""}}}t(ahe,"hcl");const ADe=ahe(Zw);var SDe=ahe(zl);function nhe(e){return t(function r(n){n=+n;function i(s,o){var a=e((s=Kz(s)).h,(o=Kz(o)).h),l=zl(s.s,o.s),u=zl(s.l,o.l),f=zl(s.opacity,o.opacity);return function(h){return s.h=a(h),s.s=l(h),s.l=u(Math.pow(h,n)),s.opacity=f(h),s+""}}return t(i,"cubehelix"),i.gamma=r,i},"cubehelixGamma")(1)}t(nhe,"cubehelix");const MDe=nhe(Zw);var kDe=nhe(zl);function EDe(e,r){for(var n=0,i=r.length-1,s=r[0],o=new Array(i<0?0:i);n<i;)o[n]=e(s,s=r[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[l](a-l)}}t(EDe,"piecewise");function CDe(e,r){for(var n=new Array(r),i=0;i<r;++i)n[i]=e(i/(r-1));return n}t(CDe,"quantize$3");const LDe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:I7,interpolateArray:sDe,interpolateBasis:Gce,interpolateBasisClosed:jce,interpolateDate:Kce,interpolateDiscrete:fDe,interpolateHue:cDe,interpolateNumber:rv,interpolateNumberArray:D7,interpolateObject:Jce,interpolateRound:hDe,interpolateString:Qce,interpolateTransformCss:pDe,interpolateTransformSvg:gDe,interpolateZoom:bDe,interpolateRgb:Jz,interpolateRgbBasis:iDe,interpolateRgbBasisClosed:oDe,interpolateHsl:_De,interpolateHslLong:wDe,interpolateLab:TDe,interpolateHcl:ADe,interpolateHclLong:SDe,interpolateCubehelix:MDe,interpolateCubehelixLong:kDe,piecewise:EDe,quantize:CDe},Symbol.toStringTag,{value:"Module"})),fy=Hc(LDe);var q5,JY;function ihe(){if(JY)return q5;JY=1;var e=Va.exports,r=$a.exports,n=Nt.exports,i=wu().resizeText;function s(a){var l=a._fullLayout._sunburstlayer.selectAll(".trace");i(a,l,"sunburst"),l.each(function(u){var f=e.select(this),h=u[0],v=h.trace;f.style("opacity",v.opacity),f.selectAll("path.surface").each(function(c){e.select(this).call(o,c,v)})})}t(s,"style");function o(a,l,u){var f=l.data.data,h=!l.children,v=f.i,c=n.castOption(u,v,"marker.line.color")||r.defaultLine,d=n.castOption(u,v,"marker.line.width")||0;a.style("stroke-width",d).call(r.fill,f.color).call(r.stroke,c).style("opacity",h?u.leaf.opacity:null)}return t(o,"styleOne"),q5={style:s,styleOne:o},q5}t(ihe,"requireStyle$6");var U5={},QY;function yp(){return QY||(QY=1,function(e){var r=Nt.exports,n=$a.exports,i=pv,s=pp;e.findEntryWithLevel=function(u,f){var h;return f&&u.eachAfter(function(v){if(e.getPtId(v)===f)return h=v.copy()}),h||u},e.findEntryWithChild=function(u,f){var h;return u.eachAfter(function(v){for(var c=v.children||[],d=0;d<c.length;d++){var g=c[d];if(e.getPtId(g)===f)return h=v.copy()}}),h||u},e.isEntry=function(u){return!u.parent},e.isLeaf=function(u){return!u.children},e.getPtId=function(u){return u.data.data.id},e.getPtLabel=function(u){return u.data.data.label},e.getValue=function(u){return u.value},e.isHierarchyRoot=function(u){return l(u)===""},e.setSliceCursor=function(u,f,h){var v=h.isTransitioning;if(!v){var c=u.datum();v=h.hideOnRoot&&e.isHierarchyRoot(c)||h.hideOnLeaves&&e.isLeaf(c)}i(u,v?null:"pointer")};function o(u,f,h){return{color:e.getOutsideTextFontKey("color",u,f,h),family:e.getOutsideTextFontKey("family",u,f,h),size:e.getOutsideTextFontKey("size",u,f,h)}}t(o,"determineOutsideTextFont");function a(u,f,h,v){var c=(v||{}).onPathbar,d=f.data.data,g=d.i,p=r.castOption(u,g,(c?"pathbar.textfont":"insidetextfont")+".color");return!p&&u._input.textfont&&(p=r.castOption(u._input,g,"textfont.color")),{color:p||n.contrast(d.color),family:e.getInsideTextFontKey("family",u,f,h,v),size:e.getInsideTextFontKey("size",u,f,h,v)}}t(a,"determineInsideTextFont"),e.getInsideTextFontKey=function(u,f,h,v,c){var d=(c||{}).onPathbar,g=d?"pathbar.textfont":"insidetextfont",p=h.data.data.i;return r.castOption(f,p,g+"."+u)||r.castOption(f,p,"textfont."+u)||v.size},e.getOutsideTextFontKey=function(u,f,h,v){var c=h.data.data.i;return r.castOption(f,c,"outsidetextfont."+u)||r.castOption(f,c,"textfont."+u)||v.size},e.isOutsideText=function(u,f){return!u._hasColorscale&&e.isHierarchyRoot(f)},e.determineTextFont=function(u,f,h,v){return e.isOutsideText(u,f)?o(u,f,h):a(u,f,h,v)},e.hasTransition=function(u){return!!(u&&u.duration>0)},e.getMaxDepth=function(u){return u.maxdepth>=0?u.maxdepth:1/0},e.isHeader=function(u,f){return!(e.isLeaf(u)||u.depth===f._maxDepth-1)};function l(u){return u.data.data.pid}t(l,"getParentId"),e.getParent=function(u,f){return e.findEntryWithLevel(u,l(f))},e.listPath=function(u,f){var h=u.parent;if(!h)return[];var v=f?[h.data[f]]:[h];return e.listPath(h,f).concat(v)},e.getPath=function(u){return e.listPath(u,"label").join("/")+"/"},e.formatValue=s.formatPieValue,e.formatPercent=function(u,f){var h=r.formatPercent(u,0);return h==="0%"&&(h=s.formatPiePercent(u,f)),h}}(U5)),U5}t(yp,"requireHelpers$6");var H5,eW;function Kw(){if(eW)return H5;eW=1;var e=Va.exports,r=Na,n=Rf.appendArrayPointValue,i=Ko,s=Nt.exports,o=K1,a=yp(),l=pp,u=l.formatPieValue;H5=t(function(v,c,d,g,p){var b=g[0],m=b.trace,y=b.hierarchy,T=m.type==="sunburst",_=m.type==="treemap"||m.type==="icicle";"_hasHoverLabel"in m||(m._hasHoverLabel=!1),"_hasHoverEvent"in m||(m._hasHoverEvent=!1);var M=t(function(A){var S=d._fullLayout;if(!(d._dragging||S.hovermode===!1)){var k=d._fullData[m.index],L=A.data.data,P=L.i,D=a.isHierarchyRoot(A),B=a.getParent(y,A),z=a.getValue(A),R=t(function(ae){return s.castOption(k,P,ae)},"_cast"),F=R("hovertemplate"),O=i.castHoverinfo(k,S,P),q=S.separators,H;if(F||O&&O!=="none"&&O!=="skip"){var j,X;T&&(j=b.cx+A.pxmid[0]*(1-A.rInscribed),X=b.cy+A.pxmid[1]*(1-A.rInscribed)),_&&(j=A._hoverX,X=A._hoverY);var G={},$=[],te=[],ee=t(function(ae){return $.indexOf(ae)!==-1},"hasFlag");O&&($=O==="all"?k._module.attributes.hoverinfo.flags:O.split("+")),G.label=L.label,ee("label")&&G.label&&te.push(G.label),L.hasOwnProperty("v")&&(G.value=L.v,G.valueLabel=u(G.value,q),ee("value")&&te.push(G.valueLabel)),G.currentPath=A.currentPath=a.getPath(A.data),ee("current path")&&!D&&te.push(G.currentPath);var ie,se=[],W=t(function(){se.indexOf(ie)===-1&&(te.push(ie),se.push(ie))},"insertPercent");G.percentParent=A.percentParent=z/a.getValue(B),G.parent=A.parentString=a.getPtLabel(B),ee("percent parent")&&(ie=a.formatPercent(G.percentParent,q)+" of "+G.parent,W()),G.percentEntry=A.percentEntry=z/a.getValue(c),G.entry=A.entry=a.getPtLabel(c),ee("percent entry")&&!D&&!A.onPathbar&&(ie=a.formatPercent(G.percentEntry,q)+" of "+G.entry,W()),G.percentRoot=A.percentRoot=z/a.getValue(y),G.root=A.root=a.getPtLabel(y),ee("percent root")&&!D&&(ie=a.formatPercent(G.percentRoot,q)+" of "+G.root,W()),G.text=R("hovertext")||R("text"),ee("text")&&(ie=G.text,s.isValidTextValue(ie)&&te.push(ie)),H=[f(A,k,p.eventDataKeys)];var ne={trace:k,y:X,_x0:A._x0,_x1:A._x1,_y0:A._y0,_y1:A._y1,text:te.join("<br>"),name:F||ee("name")?k.name:void 0,color:R("hoverlabel.bgcolor")||L.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:F,hovertemplateLabels:G,eventData:H};T&&(ne.x0=j-A.rInscribed*A.rpx1,ne.x1=j+A.rInscribed*A.rpx1,ne.idealAlign=A.pxmid[0]<0?"left":"right"),_&&(ne.x=j,ne.idealAlign=j<0?"left":"right");var he=[];i.loneHover(ne,{container:S._hoverlayer.node(),outerContainer:S._paper.node(),gd:d,inOut_bbox:he}),H[0].bbox=he[0],m._hasHoverLabel=!0}if(_){var re=v.select("path.surface");p.styleOne(re,A,k,{hovered:!0})}m._hasHoverEvent=!0,d.emit("plotly_hover",{points:H||[f(A,k,p.eventDataKeys)],event:e.event})}},"onMouseOver"),w=t(function(A){var S=d._fullLayout,k=d._fullData[m.index],L=e.select(this).datum();if(m._hasHoverEvent&&(A.originalEvent=e.event,d.emit("plotly_unhover",{points:[f(L,k,p.eventDataKeys)],event:e.event}),m._hasHoverEvent=!1),m._hasHoverLabel&&(i.loneUnhover(S._hoverlayer.node()),m._hasHoverLabel=!1),_){var P=v.select("path.surface");p.styleOne(P,L,k,{hovered:!1})}},"onMouseOut"),x=t(function(A){var S=d._fullLayout,k=d._fullData[m.index],L=T&&(a.isHierarchyRoot(A)||a.isLeaf(A)),P=a.getPtId(A),D=a.isEntry(A)?a.findEntryWithChild(y,P):a.findEntryWithLevel(y,P),B=a.getPtId(D),z={points:[f(A,k,p.eventDataKeys)],event:e.event};L||(z.nextLevel=B);var R=o.triggerHandler(d,"plotly_"+m.type+"click",z);if(R!==!1&&S.hovermode&&(d._hoverdata=[f(A,k,p.eventDataKeys)],i.click(d,e.event)),!L&&R!==!1&&!d._dragging&&!d._transitioning){r.call("_storeDirectGUIEdit",k,S._tracePreGUI[k.uid],{level:k.level});var F={data:[{level:B}],traces:[m.index]},O={frame:{redraw:!1,duration:p.transitionTime},transition:{duration:p.transitionTime,easing:p.transitionEasing},mode:"immediate",fromcurrent:!0};i.loneUnhover(S._hoverlayer.node()),r.call("animate",d,F,O)}},"onClick");v.on("mouseover",M),v.on("mouseout",w),v.on("click",x)},"attachFxHandlers");function f(h,v,c){for(var d=h.data.data,g={curveNumber:v.index,pointNumber:d.i,data:v._input,fullData:v},p=0;p<c.length;p++){var b=c[p];b in h&&(g[b]=h[b])}return"parentString"in h&&!a.isHierarchyRoot(h)&&(g.parent=h.parentString),n(g,v,d.i),g}return t(f,"makeEventData"),H5}t(Kw,"requireFx");var tW;function z7(){return tW||(tW=1,function(e){var r=Va.exports,n=Yw,i=fy.interpolate,s=bn.exports,o=Nt.exports,a=Ji,l=wu(),u=l.recordMinTextSize,f=l.clearMinTextSize,h=E7(),v=pp.getRotationAngle,c=h.computeTransform,d=h.transformInsideText,g=ihe().styleOne,p=Eh().resizeText,b=Kw(),m=wce(),y=yp();e.plot=function(A,S,k,L){var P=A._fullLayout,D=P._sunburstlayer,B,z,R=!k,F=!P.uniformtext.mode&&y.hasTransition(k);if(f("sunburst",P),B=D.selectAll("g.trace.sunburst").data(S,function(q){return q[0].trace.uid}),B.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),B.order(),F){L&&(z=L());var O=r.transition().duration(k.duration).ease(k.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()});O.each(function(){D.selectAll("g.trace").each(function(q){T(A,q,this,k)})})}else B.each(function(q){T(A,q,this,k)}),P.uniformtext.mode&&p(A,P._sunburstlayer.selectAll(".trace"),"sunburst");R&&B.exit().remove()};function T(A,S,k,L){var P=A._context.staticPlot,D=A._fullLayout,B=!D.uniformtext.mode&&y.hasTransition(L),z=r.select(k),R=z.selectAll("g.slice"),F=S[0],O=F.trace,q=F.hierarchy,H=y.findEntryWithLevel(q,O.level),j=y.getMaxDepth(O),X=D._size,G=O.domain,$=X.w*(G.x[1]-G.x[0]),te=X.h*(G.y[1]-G.y[0]),ee=.5*Math.min($,te),ie=F.cx=X.l+X.w*(G.x[1]+G.x[0])/2,se=F.cy=X.t+X.h*(1-G.y[0])-te/2;if(!H)return R.remove();var W=null,ne={};B&&R.each(function(Ge){ne[y.getPtId(Ge)]={rpx0:Ge.rpx0,rpx1:Ge.rpx1,x0:Ge.x0,x1:Ge.x1,transform:Ge.transform},!W&&y.isEntry(Ge)&&(W=Ge)});var he=_(H).descendants(),re=H.height+1,ae=0,fe=j;F.hasMultipleRoots&&y.isHierarchyRoot(H)&&(he=he.slice(1),re-=1,ae=1,fe+=1),he=he.filter(function(Ge){return Ge.y1<=fe});var ce=v(O.rotation);ce&&he.forEach(function(Ge){Ge.x0+=ce,Ge.x1+=ce});var xe=Math.min(re,j),Te=t(function(Ge){return(Ge-ae)/xe*ee},"y2rpx"),me=t(function(Ge,et){return[Ge*Math.cos(et),-Ge*Math.sin(et)]},"rx2px"),pe=t(function(Ge){return o.pathAnnulus(Ge.rpx0,Ge.rpx1,Ge.x0,Ge.x1,ie,se)},"pathSlice"),oe=t(function(Ge){return ie+w(Ge)[0]*(Ge.transform.rCenter||0)+(Ge.transform.x||0)},"getTargetX"),de=t(function(Ge){return se+w(Ge)[1]*(Ge.transform.rCenter||0)+(Ge.transform.y||0)},"getTargetY");R=R.data(he,y.getPtId),R.enter().append("g").classed("slice",!0),B?R.exit().transition().each(function(){var Ge=r.select(this),et=Ge.select("path.surface");et.transition().attrTween("d",function(Ye){var $e=De(Ye);return function(Ct){return pe($e(Ct))}});var Ue=Ge.select("g.slicetext");Ue.attr("opacity",0)}).remove():R.exit().remove(),R.order();var ye=null;if(B&&W){var we=y.getPtId(W);R.each(function(Ge){ye===null&&y.getPtId(Ge)===we&&(ye=Ge.x1)})}var Ee=R;B&&(Ee=Ee.transition().each("end",function(){var Ge=r.select(this);y.setSliceCursor(Ge,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Ee.each(function(Ge){var et=r.select(this),Ue=o.ensureSingle(et,"path","surface",function($t){$t.style("pointer-events",P?"none":"all")});Ge.rpx0=Te(Ge.y0),Ge.rpx1=Te(Ge.y1),Ge.xmid=(Ge.x0+Ge.x1)/2,Ge.pxmid=me(Ge.rpx1,Ge.xmid),Ge.midangle=-(Ge.xmid-Math.PI/2),Ge.startangle=-(Ge.x0-Math.PI/2),Ge.stopangle=-(Ge.x1-Math.PI/2),Ge.halfangle=.5*Math.min(o.angleDelta(Ge.x0,Ge.x1)||Math.PI,Math.PI),Ge.ring=1-Ge.rpx0/Ge.rpx1,Ge.rInscribed=M(Ge),B?Ue.transition().attrTween("d",function($t){var Gt=Fe($t);return function(Jt){return pe(Gt(Jt))}}):Ue.attr("d",pe),et.call(b,H,A,S,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(y.setSliceCursor,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:A._transitioning}),Ue.call(g,Ge,O);var Ye=o.ensureSingle(et,"g","slicetext"),$e=o.ensureSingle(Ye,"text","",function($t){$t.attr("data-notex",1)}),Ct=o.ensureUniformFontSize(A,y.determineTextFont(O,Ge,D.font));$e.text(e.formatSliceLabel(Ge,H,O,S,D)).classed("slicetext",!0).attr("text-anchor","middle").call(s.font,Ct).call(a.convertToTspans,A);var It=s.bBox($e.node());Ge.transform=d(It,Ge,F),Ge.transform.targetX=oe(Ge),Ge.transform.targetY=de(Ge);var Vt=t(function($t,Gt){var Jt=$t.transform;return c(Jt,Gt),Jt.fontSize=Ct.size,u(O.type,Jt,D),o.getTextTransform(Jt)},"strTransform");B?$e.transition().attrTween("transform",function($t){var Gt=qe($t);return function(Jt){return Vt(Gt(Jt),It)}}):$e.attr("transform",Vt(Ge,It))});function De(Ge){var et=y.getPtId(Ge),Ue=ne[et],Ye=ne[y.getPtId(H)],$e;if(Ye){var Ct=(Ge.x1>Ye.x1?2*Math.PI:0)+ce;$e=Ge.rpx1<Ye.rpx1?{x0:Ge.x0,x1:Ge.x1,rpx0:0,rpx1:0}:{x0:Ct,x1:Ct,rpx0:Ge.rpx0,rpx1:Ge.rpx1}}else{var It,Vt=y.getPtId(Ge.parent);R.each(function(ft){if(y.getPtId(ft)===Vt)return It=ft});var $t=It.children,Gt;$t.forEach(function(ft,zt){if(y.getPtId(ft)===et)return Gt=zt});var Jt=$t.length,kt=i(It.x0,It.x1);$e={rpx0:ee,rpx1:ee,x0:kt(Gt/Jt),x1:kt((Gt+1)/Jt)}}return i(Ue,$e)}t(De,"makeExitSliceInterpolator");function Fe(Ge){var et=ne[y.getPtId(Ge)],Ue,Ye={x0:Ge.x0,x1:Ge.x1,rpx0:Ge.rpx0,rpx1:Ge.rpx1};if(et)Ue=et;else if(W)if(Ge.parent)if(ye){var $e=(Ge.x1>ye?2*Math.PI:0)+ce;Ue={x0:$e,x1:$e}}else Ue={rpx0:ee,rpx1:ee},o.extendFlat(Ue,Je(Ge));else Ue={rpx0:0,rpx1:0};else Ue={x0:ce,x1:ce};return i(Ue,Ye)}t(Fe,"makeUpdateSliceInterpolator");function qe(Ge){var et=ne[y.getPtId(Ge)],Ue,Ye=Ge.transform;if(et)Ue=et;else if(Ue={rpx1:Ge.rpx1,transform:{textPosAngle:Ye.textPosAngle,scale:0,rotate:Ye.rotate,rCenter:Ye.rCenter,x:Ye.x,y:Ye.y}},W)if(Ge.parent)if(ye){var $e=Ge.x1>ye?2*Math.PI:0;Ue.x0=Ue.x1=$e}else o.extendFlat(Ue,Je(Ge));else Ue.x0=Ue.x1=ce;else Ue.x0=Ue.x1=ce;var Ct=i(Ue.transform.textPosAngle,Ge.transform.textPosAngle),It=i(Ue.rpx1,Ge.rpx1),Vt=i(Ue.x0,Ge.x0),$t=i(Ue.x1,Ge.x1),Gt=i(Ue.transform.scale,Ye.scale),Jt=i(Ue.transform.rotate,Ye.rotate),kt=Ye.rCenter===0?3:Ue.transform.rCenter===0?1/3:1,ft=i(Ue.transform.rCenter,Ye.rCenter),zt=t(function(Pt){return ft(Math.pow(Pt,kt))},"rCenterFn");return function(Pt){var Et=It(Pt),Wt=Vt(Pt),ze=$t(Pt),tt=zt(Pt),at=me(Et,(Wt+ze)/2),vt=Ct(Pt),_t={pxmid:at,rpx1:Et,transform:{textPosAngle:vt,rCenter:tt,x:Ye.x,y:Ye.y}};return u(O.type,Ye,D),{transform:{targetX:oe(_t),targetY:de(_t),scale:Gt(Pt),rotate:Jt(Pt),rCenter:tt}}}}t(qe,"makeUpdateTextInterpolator");function Je(Ge){var et=Ge.parent,Ue=ne[y.getPtId(et)],Ye={};if(Ue){var $e=et.children,Ct=$e.indexOf(Ge),It=$e.length,Vt=i(Ue.x0,Ue.x1);Ye.x0=Vt(Ct/It),Ye.x1=Vt(Ct/It)}else Ye.x0=Ye.x1=0;return Ye}t(Je,"interpX0X1FromParent")}t(T,"plotOne");function _(A){return n.partition().size([2*Math.PI,A.height+1])(A)}t(_,"partition"),e.formatSliceLabel=function(A,S,k,L,P){var D=k.texttemplate,B=k.textinfo;if(!D&&(!B||B==="none"))return"";var z=P.separators,R=L[0],F=A.data.data,O=R.hierarchy,q=y.isHierarchyRoot(A),H=y.getParent(O,A),j=y.getValue(A);if(!D){var X=B.split("+"),G=t(function(ae){return X.indexOf(ae)!==-1},"hasFlag"),$=[],te;if(G("label")&&F.label&&$.push(F.label),F.hasOwnProperty("v")&&G("value")&&$.push(y.formatValue(F.v,z)),!q){G("current path")&&$.push(y.getPath(A.data));var ee=0;G("percent parent")&&ee++,G("percent entry")&&ee++,G("percent root")&&ee++;var ie=ee>1;if(ee){var se,W=t(function(ae){te=y.formatPercent(se,z),ie&&(te+=" of "+ae),$.push(te)},"addPercent");G("percent parent")&&!q&&(se=j/y.getValue(H),W("parent")),G("percent entry")&&(se=j/y.getValue(S),W("entry")),G("percent root")&&(se=j/y.getValue(O),W("root"))}}return G("text")&&(te=o.castOption(k,F.i,"text"),o.isValidTextValue(te)&&$.push(te)),$.join("<br>")}var ne=o.castOption(k,F.i,"texttemplate");if(!ne)return"";var he={};F.label&&(he.label=F.label),F.hasOwnProperty("v")&&(he.value=F.v,he.valueLabel=y.formatValue(F.v,z)),he.currentPath=y.getPath(A.data),q||(he.percentParent=j/y.getValue(H),he.percentParentLabel=y.formatPercent(he.percentParent,z),he.parent=y.getPtLabel(H)),he.percentEntry=j/y.getValue(S),he.percentEntryLabel=y.formatPercent(he.percentEntry,z),he.entry=y.getPtLabel(S),he.percentRoot=j/y.getValue(O),he.percentRootLabel=y.formatPercent(he.percentRoot,z),he.root=y.getPtLabel(O),F.hasOwnProperty("color")&&(he.color=F.color);var re=o.castOption(k,F.i,"text");return(o.isValidTextValue(re)||re==="")&&(he.text=re),he.customdata=o.castOption(k,F.i,"customdata"),o.texttemplateString(ne,he,P._d3locale,he,k._meta||{})};function M(A){return A.rpx0===0&&o.isFullCircle([A.x0,A.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(A.halfangle)),A.ring/2))}t(M,"getInscribedRadiusFraction");function w(A){return x(A.rpx1,A.transform.textPosAngle)}t(w,"getTextXY");function x(A,S){return[A*Math.sin(S),-A*Math.cos(S)]}t(x,"getCoords")}(L5)),L5}t(z7,"requirePlot$n");var $5,rW;function RDe(){return rW||(rW=1,$5={moduleType:"trace",name:"sunburst",basePlotModule:WRe(),categories:[],animatable:!0,attributes:Gw(),layoutAttributes:Tce(),supplyDefaults:XRe(),supplyLayoutDefaults:ZRe(),calc:r2().calc,crossTraceCalc:r2().crossTraceCalc,plot:z7().plot,style:ihe().style,colorbar:_u,meta:{description:["Visualize hierarchal data spanning outward radially from root to leaves.","The sunburst sectors are determined by the entries in *labels* or *ids*","and in *parents*."].join(" ")}}),$5}t(RDe,"requireSunburst$1");var aW;function PDe(){return aW||(aW=1,function(e){e.exports=RDe()}(m5)),m5.exports}t(PDe,"requireSunburst");var V5={exports:{}},G5={},nW;function DDe(){return nW||(nW=1,function(e){var r=so.exports;e.name="treemap",e.plot=function(n,i,s,o){r.plotBasePlot(e.name,n,i,s,o)},e.clean=function(n,i,s,o){r.cleanBasePlot(e.name,n,i,s,o)}}(G5)),G5}t(DDe,"requireBase_plot$8");var j5,iW;function Ny(){return iW||(iW=1,j5={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}),j5}t(Ny,"requireConstants$a");var Y5,oW;function F7(){if(oW)return Y5;oW=1;var e=Un.hovertemplateAttrs,r=Un.texttemplateAttrs,n=Qi,i=vo.attributes,s=By(),o=Gw(),a=Ny(),l=cn.extendFlat;return Y5={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot",description:["Determines d3 treemap solver.","For more info please refer to https://github.com/d3/d3-hierarchy#treemap-tiling"].join(" ")},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot",description:["When using *squarify* `packing` algorithm, according to https://github.com/d3/d3-hierarchy/blob/v3.1.1/README.md#squarify_ratio","this option specifies the desired aspect ratio of the generated rectangles.","The ratio must be specified as a number greater than or equal to one.","Note that the orientation of the generated rectangles (tall or wide)","is not implied by the ratio; for example, a ratio of two will attempt","to produce a mixture of rectangles whose width:height ratio is either 2:1 or 1:2.","When using *squarify*, unlike d3 which uses the Golden Ratio i.e. 1.618034,","Plotly applies 1 to increase squares in treemap layouts."].join(" ")},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot",description:["Determines if the positions obtained from solver are flipped on each axis."].join(" ")},pad:{valType:"number",min:0,dflt:3,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:l({pad:{t:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the top (in px)."].join(" ")},l:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the left (in px)."].join(" ")},r:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the right (in px)."].join(" ")},b:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the bottom (in px)."].join(" ")},editType:"calc"},colors:o.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style",description:["Determines if the sector colors are faded towards","the background from the leaves up to the headers.","This option is unavailable when a `colorscale` is present,","defaults to false when `marker.colors` is set,","but otherwise defaults to true.","When set to *reversed*, the fading direction is inverted,","that is the top elements within hierarchy are drawn with fully saturated colors","while the leaves are faded towards the background color."].join(" ")},line:o.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if the path bar is drawn","i.e. outside the trace `domain` and","with one pixel gap."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Determines on which side of the the treemap the","`pathbar` should be presented."].join(" ")},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot",description:["Determines which shape is used for edges between `barpath` labels."].join(" ")},thickness:{valType:"number",min:12,editType:"plot",description:["Sets the thickness of `pathbar` (in px). If not specified the `pathbar.textfont.size` is used","with 3 pixles extra padding on each side."].join(" ")},textfont:l({},s.textfont,{description:"Sets the font used inside `pathbar`."}),editType:"calc"},text:s.text,textinfo:o.textinfo,texttemplate:r({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:o.hoverinfo,hovertemplate:e({},{keys:a.eventDataKeys}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:l({},s.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented on top left corner of a treemap graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot",description:["Sets the positions of the `text` elements."].join(" ")},sort:s.sort,root:o.root,domain:i({name:"treemap",trace:!0,editType:"calc"})},Y5}t(F7,"requireAttributes$x");var W5,sW;function ohe(){return sW||(sW=1,W5={treemapcolorway:{valType:"colorlist",editType:"calc",description:["Sets the default treemap slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendtreemapcolors`."].join(" ")},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the treemap slice colors (whether given by `treemapcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}),W5}t(ohe,"requireLayout_attributes$8");var X5,lW;function IDe(){if(lW)return X5;lW=1;var e=Nt.exports,r=F7(),n=$a.exports,i=vo.defaults,s=Ef().handleText,o=Py().TEXTPAD,a=ko,l=a.hasColorscale,u=a.handleDefaults;return X5=t(function(h,v,c,d){function g(L,P){return e.coerce(h,v,r,L,P)}t(g,"coerce");var p=g("labels"),b=g("parents");if(!p||!p.length||!b||!b.length){v.visible=!1;return}var m=g("values");m&&m.length?g("branchvalues"):g("count"),g("level"),g("maxdepth");var y=g("tiling.packing");y==="squarify"&&g("tiling.squarifyratio"),g("tiling.flip"),g("tiling.pad");var T=g("text");g("texttemplate"),v.texttemplate||g("textinfo",Array.isArray(T)?"text+label":"label"),g("hovertext"),g("hovertemplate");var _=g("pathbar.visible"),M="auto";s(h,v,d,g,M,{hasPathbar:_,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition");var w=v.textposition.indexOf("bottom")!==-1,x=g("marker.line.width");x&&g("marker.line.color",d.paper_bgcolor);var A=g("marker.colors"),S=v._hasColorscale=l(h,"marker","colors")||(h.marker||{}).coloraxis;S?u(h,v,d,g,{prefix:"marker.",cLetter:"c"}):g("marker.depthfade",!(A||[]).length);var k=v.textfont.size*2;g("marker.pad.t",w?k/4:k),g("marker.pad.l",k/4),g("marker.pad.r",k/4),g("marker.pad.b",w?k:k/4),v._hovered={marker:{line:{width:2,color:n.contrast(d.paper_bgcolor)}}},_&&(g("pathbar.thickness",v.pathbar.textfont.size+2*o),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),i(v,d,g),v._length=null},"supplyDefaults"),X5}t(IDe,"requireDefaults$x");var Z5,uW;function zDe(){if(uW)return Z5;uW=1;var e=Nt.exports,r=ohe();return Z5=t(function(i,s){function o(a,l){return e.coerce(i,s,r,a,l)}t(o,"coerce"),o("treemapcolorway",s.colorway),o("extendtreemapcolors")},"supplyLayoutDefaults"),Z5}t(zDe,"requireLayout_defaults$7");var qb={},fW;function cW(){if(fW)return qb;fW=1;var e=r2();return qb.calc=function(r,n){return e.calc(r,n)},qb.crossTraceCalc=function(r){return e._runCrossTraceCalc("treemap",r)},qb}t(cW,"requireCalc$r");var K5,hW;function she(){return hW||(hW=1,K5=t(function e(r,n,i){var s;i.swapXY&&(s=r.x0,r.x0=r.y0,r.y0=s,s=r.x1,r.x1=r.y1,r.y1=s),i.flipX&&(s=r.x0,r.x0=n[0]-r.x1,r.x1=n[0]-s),i.flipY&&(s=r.y0,r.y0=n[1]-r.y1,r.y1=n[1]-s);var o=r.children;if(o)for(var a=0;a<o.length;a++)e(o[a],n,i)},"flipTree")),K5}t(she,"requireFlip_tree");var J5,vW;function lhe(){if(vW)return J5;vW=1;var e=Yw,r=she();J5=t(function(s,o,a){var l=a.flipX,u=a.flipY,f=a.packing==="dice-slice",h=a.pad[u?"bottom":"top"],v=a.pad[l?"right":"left"],c=a.pad[l?"left":"right"],d=a.pad[u?"top":"bottom"],g;f&&(g=v,v=h,h=g,g=c,c=d,d=g);var p=e.treemap().tile(n(a.packing,a.squarifyratio)).paddingInner(a.pad.inner).paddingLeft(v).paddingRight(c).paddingTop(h).paddingBottom(d).size(f?[o[1],o[0]]:o)(s);return(f||l||u)&&r(p,o,{swapXY:f,flipX:l,flipY:u}),p},"partition");function n(i,s){switch(i){case"squarify":return e.treemapSquarify.ratio(s);case"binary":return e.treemapBinary;case"dice":return e.treemapDice;case"slice":return e.treemapSlice;default:return e.treemapSliceDice}}return t(n,"getTilingMethod"),J5}t(lhe,"requirePartition$1");var Q5,dW;function B7(){if(dW)return Q5;dW=1;var e=Va.exports,r=$a.exports,n=Nt.exports,i=yp(),s=wu().resizeText;function o(l){var u=l._fullLayout._treemaplayer.selectAll(".trace");s(l,u,"treemap"),u.each(function(f){var h=e.select(this),v=f[0],c=v.trace;h.style("opacity",c.opacity),h.selectAll("path.surface").each(function(d){e.select(this).call(a,d,c,{hovered:!1})})})}t(o,"style");function a(l,u,f,h){var v=(h||{}).hovered,c=u.data.data,d=c.i,g,p,b=c.color,m=i.isHierarchyRoot(u),y=1;if(v)g=f._hovered.marker.line.color,p=f._hovered.marker.line.width;else if(m&&b===f.root.color)y=100,g="rgba(0,0,0,0)",p=0;else if(g=n.castOption(f,d,"marker.line.color")||r.defaultLine,p=n.castOption(f,d,"marker.line.width")||0,!f._hasColorscale&&!u.onPathbar){var T=f.marker.depthfade;if(T){var _=r.combine(r.addOpacity(f._backgroundColor,.75),b),M;if(T===!0){var w=i.getMaxDepth(f);isFinite(w)?i.isLeaf(u)?M=0:M=f._maxVisibleLayers-(u.data.depth-f._entryDepth):M=u.data.height+1}else M=u.data.depth-f._entryDepth,f._atRootLevel||M++;if(M>0)for(var x=0;x<M;x++){var A=.5*x/M;b=r.combine(r.addOpacity(_,A),b)}}}l.style("stroke-width",p).call(r.fill,b).call(r.stroke,g).style("opacity",y)}return t(a,"styleOne"),Q5={style:o,styleOne:a},Q5}t(B7,"requireStyle$5");var eE,pW;function FDe(){if(pW)return eE;pW=1;var e=Va.exports,r=Nt.exports,n=bn.exports,i=Ji,s=lhe(),o=B7().styleOne,a=Ny(),l=yp(),u=Kw(),f=!0;return eE=t(function(v,c,d,g,p){var b=p.barDifY,m=p.width,y=p.height,T=p.viewX,_=p.viewY,M=p.pathSlice,w=p.toMoveInsideSlice,x=p.strTransform,A=p.hasTransition,S=p.handleSlicesExit,k=p.makeUpdateSliceInterpolator,L=p.makeUpdateTextInterpolator,P={},D=v._context.staticPlot,B=v._fullLayout,z=c[0],R=z.trace,F=z.hierarchy,O=m/R._entryDepth,q=l.listPath(d.data,"id"),H=s(F.copy(),[m,y],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();H=H.filter(function(X){var G=q.indexOf(X.data.id);return G===-1?!1:(X.x0=O*G,X.x1=O*(G+1),X.y0=b,X.y1=b+y,X.onPathbar=!0,!0)}),H.reverse(),g=g.data(H,l.getPtId),g.enter().append("g").classed("pathbar",!0),S(g,f,P,[m,y],M),g.order();var j=g;A&&(j=j.transition().each("end",function(){var X=e.select(this);l.setSliceCursor(X,v,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(X){X._x0=T(X.x0),X._x1=T(X.x1),X._y0=_(X.y0),X._y1=_(X.y1),X._hoverX=T(X.x1-Math.min(m,y)/2),X._hoverY=_(X.y1-y/2);var G=e.select(this),$=r.ensureSingle(G,"path","surface",function(se){se.style("pointer-events",D?"none":"all")});A?$.transition().attrTween("d",function(se){var W=k(se,f,P,[m,y]);return function(ne){return M(W(ne))}}):$.attr("d",M),G.call(u,d,v,c,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,v,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:v._transitioning}),$.call(o,X,R,{hovered:!1}),X._text=(l.getPtLabel(X)||"").split("<br>").join(" ")||"";var te=r.ensureSingle(G,"g","slicetext"),ee=r.ensureSingle(te,"text","",function(se){se.attr("data-notex",1)}),ie=r.ensureUniformFontSize(v,l.determineTextFont(R,X,B.font,{onPathbar:!0}));ee.text(X._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(n.font,ie).call(i.convertToTspans,v),X.textBB=n.bBox(ee.node()),X.transform=w(X,{fontSize:ie.size,onPathbar:!0}),X.transform.fontSize=ie.size,A?ee.transition().attrTween("transform",function(se){var W=L(se,f,P,[m,y]);return function(ne){return x(W(ne))}}):ee.attr("transform",x(X))})},"drawAncestors"),eE}t(FDe,"requireDraw_ancestors");var tE,gW;function BDe(){if(gW)return tE;gW=1;var e=Va.exports,r=fy.interpolate,n=yp(),i=Nt.exports,s=Py().TEXTPAD,o=Dy(),a=o.toMoveInsideBar,l=wu(),u=l.recordMinTextSize,f=Ny(),h=FDe();function v(c){return n.isHierarchyRoot(c)?"":n.getPtId(c)}return t(v,"getKey"),tE=t(function(d,g,p,b,m){var y=d._fullLayout,T=g[0],_=T.trace,M=_.type,w=M==="icicle",x=T.hierarchy,A=n.findEntryWithLevel(x,_.level),S=e.select(p),k=S.selectAll("g.pathbar"),L=S.selectAll("g.slice");if(!A){k.remove(),L.remove();return}var P=n.isHierarchyRoot(A),D=!y.uniformtext.mode&&n.hasTransition(b),B=n.getMaxDepth(_),z=t(function($e){return $e.data.depth-A.data.depth<B},"hasVisibleDepth"),R=y._size,F=_.domain,O=R.w*(F.x[1]-F.x[0]),q=R.h*(F.y[1]-F.y[0]),H=O,j=_.pathbar.thickness,X=_.marker.line.width+f.gapWithPathbar,G=_.pathbar.visible?_.pathbar.side.indexOf("bottom")>-1?q+X:-(j+X):0,$={x0:H,x1:H,y0:G,y1:G+j},te=t(function($e,Ct,It){var Vt=_.tiling.pad,$t=t(function(ft){return ft-Vt<=Ct.x0},"isLeftOfRect"),Gt=t(function(ft){return ft+Vt>=Ct.x1},"isRightOfRect"),Jt=t(function(ft){return ft-Vt<=Ct.y0},"isBottomOfRect"),kt=t(function(ft){return ft+Vt>=Ct.y1},"isTopOfRect");return $e.x0===Ct.x0&&$e.x1===Ct.x1&&$e.y0===Ct.y0&&$e.y1===Ct.y1?{x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1}:{x0:$t($e.x0-Vt)?0:Gt($e.x0-Vt)?It[0]:$e.x0,x1:$t($e.x1+Vt)?0:Gt($e.x1+Vt)?It[0]:$e.x1,y0:Jt($e.y0-Vt)?0:kt($e.y0-Vt)?It[1]:$e.y0,y1:Jt($e.y1+Vt)?0:kt($e.y1+Vt)?It[1]:$e.y1}},"findClosestEdge"),ee=null,ie={},se={},W=null,ne=t(function($e,Ct){return Ct?ie[v($e)]:se[v($e)]},"getPrev"),he=t(function($e,Ct,It,Vt){if(Ct)return ie[v(x)]||$;var $t=se[_.level]||It;return z($e)?te($e,$t,Vt):{}},"getOrigin");T.hasMultipleRoots&&P&&B++,_._maxDepth=B,_._backgroundColor=y.paper_bgcolor,_._entryDepth=A.data.depth,_._atRootLevel=P;var re=-O/2+R.l+R.w*(F.x[1]+F.x[0])/2,ae=-q/2+R.t+R.h*(1-(F.y[1]+F.y[0])/2),fe=t(function($e){return re+$e},"viewMapX"),ce=t(function($e){return ae+$e},"viewMapY"),xe=ce(0),Te=fe(0),me=t(function($e){return Te+$e},"viewBarX"),pe=t(function($e){return xe+$e},"viewBarY");function oe($e,Ct){return $e+","+Ct}t(oe,"pos");var de=me(0),ye=t(function($e){$e.x=Math.max(de,$e.x)},"limitX0"),we=_.pathbar.edgeshape,Ee=t(function($e){var Ct=me(Math.max(Math.min($e.x0,$e.x0),0)),It=me(Math.min(Math.max($e.x1,$e.x1),H)),Vt=pe($e.y0),$t=pe($e.y1),Gt=j/2,Jt={},kt={};Jt.x=Ct,kt.x=It,Jt.y=kt.y=(Vt+$t)/2;var ft={x:Ct,y:Vt},zt={x:It,y:Vt},Pt={x:It,y:$t},Et={x:Ct,y:$t};return we===">"?(ft.x-=Gt,zt.x-=Gt,Pt.x-=Gt,Et.x-=Gt):we==="/"?(Pt.x-=Gt,Et.x-=Gt,Jt.x-=Gt/2,kt.x-=Gt/2):we==="\\"?(ft.x-=Gt,zt.x-=Gt,Jt.x-=Gt/2,kt.x-=Gt/2):we==="<"&&(Jt.x-=Gt,kt.x-=Gt),ye(ft),ye(Et),ye(Jt),ye(zt),ye(Pt),ye(kt),"M"+oe(ft.x,ft.y)+"L"+oe(zt.x,zt.y)+"L"+oe(kt.x,kt.y)+"L"+oe(Pt.x,Pt.y)+"L"+oe(Et.x,Et.y)+"L"+oe(Jt.x,Jt.y)+"Z"},"pathAncestor"),De=t(function($e){var Ct=fe($e.x0),It=fe($e.x1),Vt=ce($e.y0),$t=ce($e.y1),Gt=It-Ct,Jt=$t-Vt;if(!Gt||!Jt)return"";var kt=0,ft=Gt>2*kt&&Jt>2*kt?kt:0,zt=t(function(Pt,Et){return ft?"a"+oe(ft,ft)+" 0 0 1 "+oe(Pt,Et):""},"arc");return"M"+oe(Ct,Vt+ft)+zt(ft,-ft)+"L"+oe(It-ft,Vt)+zt(ft,ft)+"L"+oe(It,$t-ft)+zt(-ft,ft)+"L"+oe(Ct+ft,$t)+zt(-ft,-ft)+"Z"},"pathDescendant"),Fe=t(function($e,Ct){var It=$e.x0,Vt=$e.x1,$t=$e.y0,Gt=$e.y1,Jt=$e.textBB,kt=t(function(Rt){return _.textposition.indexOf(Rt)!==-1},"hasFlag"),ft=kt("bottom"),zt=kt("top")||Ct.isHeader&&!ft,Pt=zt?"start":ft?"end":"middle",Et=kt("right"),Wt=kt("left")||Ct.onPathbar,ze=Wt?-1:Et?1:0,tt=_[w?"tiling":"marker"].pad;if(Ct.isHeader){if(It+=(w?tt:tt.l)-s,Vt-=(w?tt:tt.r)-s,It>=Vt){var at=(It+Vt)/2;It=at,Vt=at}var vt;ft?(vt=Gt-(w?tt:tt.b),$t<vt&&vt<Gt&&($t=vt)):(vt=$t+(w?tt:tt.t),$t<vt&&vt<Gt&&(Gt=vt))}var _t=a(It,Vt,$t,Gt,Jt,{isHorizontal:!1,constrained:!0,angle:0,anchor:Pt,leftToRight:ze});return _t.fontSize=Ct.fontSize,_t.targetX=fe(_t.targetX),_t.targetY=ce(_t.targetY),isNaN(_t.targetX)||isNaN(_t.targetY)?{}:(It!==Vt&&$t!==Gt&&u(_.type,_t,y),{scale:_t.scale,rotate:_t.rotate,textX:_t.textX,textY:_t.textY,anchorX:_t.anchorX,anchorY:_t.anchorY,targetX:_t.targetX,targetY:_t.targetY})},"toMoveInsideSlice"),qe=t(function($e,Ct){for(var It,Vt=0,$t=$e;!It&&Vt<B;)Vt++,$t=$t.parent,$t?It=ne($t,Ct):Vt=B;return It||{}},"interpFromParent"),Je=t(function($e,Ct,It,Vt){var $t=ne($e,Ct),Gt;if(Ct)Gt=$;else{var Jt=ne(A,Ct);Jt?Gt=te($e,Jt,Vt):Gt={}}return r($t,Gt)},"makeExitSliceInterpolator"),Ge=t(function($e,Ct,It,Vt,$t){var Gt=ne($e,Ct),Jt;if(Gt)Jt=Gt;else if(Ct)Jt=$;else if(ee)if($e.parent){var kt=W||It;kt&&!Ct?Jt=te($e,kt,Vt):(Jt={},i.extendFlat(Jt,qe($e,Ct)))}else Jt=i.extendFlat({},$e),w&&($t.orientation==="h"?$t.flipX?Jt.x0=$e.x1:Jt.x1=0:$t.flipY?Jt.y0=$e.y1:Jt.y1=0);else Jt={};return r(Jt,{x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1})},"makeUpdateSliceInterpolator"),et=t(function($e,Ct,It,Vt){var $t=ne($e,Ct),Gt={},Jt=he($e,Ct,It,Vt);i.extendFlat(Gt,{transform:Fe({x0:Jt.x0,x1:Jt.x1,y0:Jt.y0,y1:Jt.y1,textBB:$e.textBB,_text:$e._text},{isHeader:n.isHeader($e,_)})}),$t?Gt=$t:$e.parent&&i.extendFlat(Gt,qe($e,Ct));var kt=$e.transform;return $e.x0!==$e.x1&&$e.y0!==$e.y1&&u(_.type,kt,y),r(Gt,{transform:{scale:kt.scale,rotate:kt.rotate,textX:kt.textX,textY:kt.textY,anchorX:kt.anchorX,anchorY:kt.anchorY,targetX:kt.targetX,targetY:kt.targetY}})},"makeUpdateTextInterpolator"),Ue=t(function($e,Ct,It,Vt,$t){var Gt=Vt[0],Jt=Vt[1];D?$e.exit().transition().each(function(){var kt=e.select(this),ft=kt.select("path.surface");ft.transition().attrTween("d",function(Pt){var Et=Je(Pt,Ct,It,[Gt,Jt]);return function(Wt){return $t(Et(Wt))}});var zt=kt.select("g.slicetext");zt.attr("opacity",0)}).remove():$e.exit().remove()},"handleSlicesExit"),Ye=t(function($e){var Ct=$e.transform;return $e.x0!==$e.x1&&$e.y0!==$e.y1&&u(_.type,Ct,y),i.getTextTransform({textX:Ct.textX,textY:Ct.textY,anchorX:Ct.anchorX,anchorY:Ct.anchorY,targetX:Ct.targetX,targetY:Ct.targetY,scale:Ct.scale,rotate:Ct.rotate})},"strTransform");D&&(k.each(function($e){ie[v($e)]={x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1},$e.transform&&(ie[v($e)].transform={textX:$e.transform.textX,textY:$e.transform.textY,anchorX:$e.transform.anchorX,anchorY:$e.transform.anchorY,targetX:$e.transform.targetX,targetY:$e.transform.targetY,scale:$e.transform.scale,rotate:$e.transform.rotate})}),L.each(function($e){se[v($e)]={x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1},$e.transform&&(se[v($e)].transform={textX:$e.transform.textX,textY:$e.transform.textY,anchorX:$e.transform.anchorX,anchorY:$e.transform.anchorY,targetX:$e.transform.targetX,targetY:$e.transform.targetY,scale:$e.transform.scale,rotate:$e.transform.rotate}),!ee&&n.isEntry($e)&&(ee=$e)})),W=m(d,g,A,L,{width:O,height:q,viewX:fe,viewY:ce,pathSlice:De,toMoveInsideSlice:Fe,prevEntry:ee,makeUpdateSliceInterpolator:Ge,makeUpdateTextInterpolator:et,handleSlicesExit:Ue,hasTransition:D,strTransform:Ye}),_.pathbar.visible?h(d,g,A,k,{barDifY:G,width:H,height:j,viewX:me,viewY:pe,pathSlice:Ee,toMoveInsideSlice:Fe,makeUpdateSliceInterpolator:Ge,makeUpdateTextInterpolator:et,handleSlicesExit:Ue,hasTransition:D,strTransform:Ye}):k.remove()},"plotOne"),tE}t(BDe,"requirePlot_one");var rE,yW;function uhe(){if(yW)return rE;yW=1;var e=Va.exports,r=yp(),n=wu(),i=n.clearMinTextSize,s=Eh().resizeText,o=BDe();return rE=t(function(l,u,f,h,v){var c=v.type,d=v.drawDescendants,g=l._fullLayout,p=g["_"+c+"layer"],b,m,y=!f;if(i(c,g),b=p.selectAll("g.trace."+c).data(u,function(_){return _[0].trace.uid}),b.enter().append("g").classed("trace",!0).classed(c,!0),b.order(),!g.uniformtext.mode&&r.hasTransition(f)){h&&(m=h());var T=e.transition().duration(f.duration).ease(f.easing).each("end",function(){m&&m()}).each("interrupt",function(){m&&m()});T.each(function(){p.selectAll("g.trace").each(function(_){o(l,_,this,f,d)})})}else b.each(function(_){o(l,_,this,f,d)}),g.uniformtext.mode&&s(l,p.selectAll(".trace"),c);y&&b.exit().remove()},"_plot"),rE}t(uhe,"requireDraw");var aE,mW;function ODe(){if(mW)return aE;mW=1;var e=Va.exports,r=Nt.exports,n=bn.exports,i=Ji,s=lhe(),o=B7().styleOne,a=Ny(),l=yp(),u=Kw(),f=z7().formatSliceLabel,h=!1;return aE=t(function(c,d,g,p,b){var m=b.width,y=b.height,T=b.viewX,_=b.viewY,M=b.pathSlice,w=b.toMoveInsideSlice,x=b.strTransform,A=b.hasTransition,S=b.handleSlicesExit,k=b.makeUpdateSliceInterpolator,L=b.makeUpdateTextInterpolator,P=b.prevEntry,D={},B=c._context.staticPlot,z=c._fullLayout,R=d[0],F=R.trace,O=F.textposition.indexOf("left")!==-1,q=F.textposition.indexOf("right")!==-1,H=F.textposition.indexOf("bottom")!==-1,j=!H&&!F.marker.pad.t||H&&!F.marker.pad.b,X=s(g,[m,y],{packing:F.tiling.packing,squarifyratio:F.tiling.squarifyratio,flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1,pad:{inner:F.tiling.pad,top:F.marker.pad.t,left:F.marker.pad.l,right:F.marker.pad.r,bottom:F.marker.pad.b}}),G=X.descendants(),$=1/0,te=-1/0;G.forEach(function(ne){var he=ne.depth;he>=F._maxDepth?(ne.x0=ne.x1=(ne.x0+ne.x1)/2,ne.y0=ne.y1=(ne.y0+ne.y1)/2):($=Math.min($,he),te=Math.max(te,he))}),p=p.data(G,l.getPtId),F._maxVisibleLayers=isFinite(te)?te-$+1:0,p.enter().append("g").classed("slice",!0),S(p,h,D,[m,y],M),p.order();var ee=null;if(A&&P){var ie=l.getPtId(P);p.each(function(ne){ee===null&&l.getPtId(ne)===ie&&(ee={x0:ne.x0,x1:ne.x1,y0:ne.y0,y1:ne.y1})})}var se=t(function(){return ee||{x0:0,x1:m,y0:0,y1:y}},"getRefRect"),W=p;return A&&(W=W.transition().each("end",function(){var ne=e.select(this);l.setSliceCursor(ne,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(ne){var he=l.isHeader(ne,F);ne._x0=T(ne.x0),ne._x1=T(ne.x1),ne._y0=_(ne.y0),ne._y1=_(ne.y1),ne._hoverX=T(ne.x1-F.marker.pad.r),ne._hoverY=_(H?ne.y1-F.marker.pad.b/2:ne.y0+F.marker.pad.t/2);var re=e.select(this),ae=r.ensureSingle(re,"path","surface",function(Te){Te.style("pointer-events",B?"none":"all")});A?ae.transition().attrTween("d",function(Te){var me=k(Te,h,se(),[m,y]);return function(pe){return M(me(pe))}}):ae.attr("d",M),re.call(u,g,c,d,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,c,{isTransitioning:c._transitioning}),ae.call(o,ne,F,{hovered:!1}),ne.x0===ne.x1||ne.y0===ne.y1?ne._text="":he?ne._text=j?"":l.getPtLabel(ne)||"":ne._text=f(ne,g,F,d,z)||"";var fe=r.ensureSingle(re,"g","slicetext"),ce=r.ensureSingle(fe,"text","",function(Te){Te.attr("data-notex",1)}),xe=r.ensureUniformFontSize(c,l.determineTextFont(F,ne,z.font));ce.text(ne._text||" ").classed("slicetext",!0).attr("text-anchor",q?"end":O||he?"start":"middle").call(n.font,xe).call(i.convertToTspans,c),ne.textBB=n.bBox(ce.node()),ne.transform=w(ne,{fontSize:xe.size,isHeader:he}),ne.transform.fontSize=xe.size,A?ce.transition().attrTween("transform",function(Te){var me=L(Te,h,se(),[m,y]);return function(pe){return x(me(pe))}}):ce.attr("transform",x(ne))}),ee},"drawDescendants"),aE}t(ODe,"requireDraw_descendants$1");var nE,xW;function NDe(){if(xW)return nE;xW=1;var e=uhe(),r=ODe();return nE=t(function(i,s,o,a){return e(i,s,o,a,{type:"treemap",drawDescendants:r})},"_plot"),nE}t(NDe,"requirePlot$m");var iE,bW;function qDe(){return bW||(bW=1,iE={moduleType:"trace",name:"treemap",basePlotModule:DDe(),categories:[],animatable:!0,attributes:F7(),layoutAttributes:ohe(),supplyDefaults:IDe(),supplyLayoutDefaults:zDe(),calc:cW().calc,crossTraceCalc:cW().crossTraceCalc,plot:NDe(),style:B7().style,colorbar:_u,meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The treemap sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}),iE}t(qDe,"requireTreemap$1");var _W;function UDe(){return _W||(_W=1,function(e){e.exports=qDe()}(V5)),V5.exports}t(UDe,"requireTreemap");var oE={exports:{}},sE={},wW;function HDe(){return wW||(wW=1,function(e){var r=so.exports;e.name="icicle",e.plot=function(n,i,s,o){r.plotBasePlot(e.name,n,i,s,o)},e.clean=function(n,i,s,o){r.cleanBasePlot(e.name,n,i,s,o)}}(sE)),sE}t(HDe,"requireBase_plot$7");var lE,TW;function fhe(){if(TW)return lE;TW=1;var e=Un.hovertemplateAttrs,r=Un.texttemplateAttrs,n=Qi,i=vo.attributes,s=By(),o=Gw(),a=F7(),l=Ny(),u=cn.extendFlat;return lE={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot",description:["When set in conjunction with `tiling.flip`, determines on","which side the root nodes are drawn in the chart. If","`tiling.orientation` is *v* and `tiling.flip` is **, the root","nodes appear at the top. If `tiling.orientation` is *v* and","`tiling.flip` is *y*, the root nodes appear at the bottom. If","`tiling.orientation` is *h* and `tiling.flip` is **, the","root nodes appear at the left. If `tiling.orientation` is *h*","and `tiling.flip` is *x*, the root nodes appear at the right."].join(" ")},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:u({colors:o.marker.colors,line:o.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),leaf:o.leaf,pathbar:a.pathbar,text:s.text,textinfo:o.textinfo,texttemplate:r({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:o.hoverinfo,hovertemplate:e({},{keys:l.eventDataKeys}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:s.sort,root:o.root,domain:i({name:"icicle",trace:!0,editType:"calc"})},lE}t(fhe,"requireAttributes$w");var uE,AW;function che(){return AW||(AW=1,uE={iciclecolorway:{valType:"colorlist",editType:"calc",description:["Sets the default icicle slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendiciclecolors`."].join(" ")},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the icicle slice colors (whether given by `iciclecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}),uE}t(che,"requireLayout_attributes$7");var fE,SW;function $De(){if(SW)return fE;SW=1;var e=Nt.exports,r=fhe(),n=$a.exports,i=vo.defaults,s=Ef().handleText,o=Py().TEXTPAD,a=ko,l=a.hasColorscale,u=a.handleDefaults;return fE=t(function(h,v,c,d){function g(x,A){return e.coerce(h,v,r,x,A)}t(g,"coerce");var p=g("labels"),b=g("parents");if(!p||!p.length||!b||!b.length){v.visible=!1;return}var m=g("values");m&&m.length?g("branchvalues"):g("count"),g("level"),g("maxdepth"),g("tiling.orientation"),g("tiling.flip"),g("tiling.pad");var y=g("text");g("texttemplate"),v.texttemplate||g("textinfo",Array.isArray(y)?"text+label":"label"),g("hovertext"),g("hovertemplate");var T=g("pathbar.visible"),_="auto";s(h,v,d,g,_,{hasPathbar:T,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition");var M=g("marker.line.width");M&&g("marker.line.color",d.paper_bgcolor),g("marker.colors");var w=v._hasColorscale=l(h,"marker","colors")||(h.marker||{}).coloraxis;w&&u(h,v,d,g,{prefix:"marker.",cLetter:"c"}),g("leaf.opacity",w?1:.7),v._hovered={marker:{line:{width:2,color:n.contrast(d.paper_bgcolor)}}},T&&(g("pathbar.thickness",v.pathbar.textfont.size+2*o),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),i(v,d,g),v._length=null},"supplyDefaults"),fE}t($De,"requireDefaults$w");var cE,MW;function VDe(){if(MW)return cE;MW=1;var e=Nt.exports,r=che();return cE=t(function(i,s){function o(a,l){return e.coerce(i,s,r,a,l)}t(o,"coerce"),o("iciclecolorway",s.colorway),o("extendiciclecolors")},"supplyLayoutDefaults"),cE}t(VDe,"requireLayout_defaults$6");var Ub={},kW;function EW(){if(kW)return Ub;kW=1;var e=r2();return Ub.calc=function(r,n){return e.calc(r,n)},Ub.crossTraceCalc=function(r){return e._runCrossTraceCalc("icicle",r)},Ub}t(EW,"requireCalc$q");var hE,CW;function GDe(){if(CW)return hE;CW=1;var e=Yw,r=she();return hE=t(function(i,s,o){var a=o.flipX,l=o.flipY,u=o.orientation==="h",f=o.maxDepth,h=s[0],v=s[1];f&&(h=(i.height+1)*s[0]/Math.min(i.height+1,f),v=(i.height+1)*s[1]/Math.min(i.height+1,f));var c=e.partition().padding(o.pad.inner).size(u?[s[1],h]:[s[0],v])(i);return(u||a||l)&&r(c,s,{swapXY:u,flipX:a,flipY:l}),c},"partition"),hE}t(GDe,"requirePartition");var vE,LW;function hhe(){if(LW)return vE;LW=1;var e=Va.exports,r=$a.exports,n=Nt.exports,i=wu().resizeText;function s(a){var l=a._fullLayout._iciclelayer.selectAll(".trace");i(a,l,"icicle"),l.each(function(u){var f=e.select(this),h=u[0],v=h.trace;f.style("opacity",v.opacity),f.selectAll("path.surface").each(function(c){e.select(this).call(o,c,v)})})}t(s,"style");function o(a,l,u){var f=l.data.data,h=!l.children,v=f.i,c=n.castOption(u,v,"marker.line.color")||r.defaultLine,d=n.castOption(u,v,"marker.line.width")||0;a.style("stroke-width",d).call(r.fill,f.color).call(r.stroke,c).style("opacity",h?u.leaf.opacity:null)}return t(o,"styleOne"),vE={style:s,styleOne:o},vE}t(hhe,"requireStyle$4");var dE,RW;function jDe(){if(RW)return dE;RW=1;var e=Va.exports,r=Nt.exports,n=bn.exports,i=Ji,s=GDe(),o=hhe().styleOne,a=Ny(),l=yp(),u=Kw(),f=z7().formatSliceLabel,h=!1;return dE=t(function(c,d,g,p,b){var m=b.width,y=b.height,T=b.viewX,_=b.viewY,M=b.pathSlice,w=b.toMoveInsideSlice,x=b.strTransform,A=b.hasTransition,S=b.handleSlicesExit,k=b.makeUpdateSliceInterpolator,L=b.makeUpdateTextInterpolator,P=b.prevEntry,D={},B=c._context.staticPlot,z=c._fullLayout,R=d[0],F=R.trace,O=F.textposition.indexOf("left")!==-1,q=F.textposition.indexOf("right")!==-1,H=F.textposition.indexOf("bottom")!==-1,j=s(g,[m,y],{flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1,orientation:F.tiling.orientation,pad:{inner:F.tiling.pad},maxDepth:F._maxDepth}),X=j.descendants(),G=1/0,$=-1/0;X.forEach(function(W){var ne=W.depth;ne>=F._maxDepth?(W.x0=W.x1=(W.x0+W.x1)/2,W.y0=W.y1=(W.y0+W.y1)/2):(G=Math.min(G,ne),$=Math.max($,ne))}),p=p.data(X,l.getPtId),F._maxVisibleLayers=isFinite($)?$-G+1:0,p.enter().append("g").classed("slice",!0),S(p,h,D,[m,y],M),p.order();var te=null;if(A&&P){var ee=l.getPtId(P);p.each(function(W){te===null&&l.getPtId(W)===ee&&(te={x0:W.x0,x1:W.x1,y0:W.y0,y1:W.y1})})}var ie=t(function(){return te||{x0:0,x1:m,y0:0,y1:y}},"getRefRect"),se=p;return A&&(se=se.transition().each("end",function(){var W=e.select(this);l.setSliceCursor(W,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),se.each(function(W){W._x0=T(W.x0),W._x1=T(W.x1),W._y0=_(W.y0),W._y1=_(W.y1),W._hoverX=T(W.x1-F.tiling.pad),W._hoverY=_(H?W.y1-F.tiling.pad/2:W.y0+F.tiling.pad/2);var ne=e.select(this),he=r.ensureSingle(ne,"path","surface",function(ce){ce.style("pointer-events",B?"none":"all")});A?he.transition().attrTween("d",function(ce){var xe=k(ce,h,ie(),[m,y],{orientation:F.tiling.orientation,flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1});return function(Te){return M(xe(Te))}}):he.attr("d",M),ne.call(u,g,c,d,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,c,{isTransitioning:c._transitioning}),he.call(o,W,F,{hovered:!1}),W.x0===W.x1||W.y0===W.y1?W._text="":W._text=f(W,g,F,d,z)||"";var re=r.ensureSingle(ne,"g","slicetext"),ae=r.ensureSingle(re,"text","",function(ce){ce.attr("data-notex",1)}),fe=r.ensureUniformFontSize(c,l.determineTextFont(F,W,z.font));ae.text(W._text||" ").classed("slicetext",!0).attr("text-anchor",q?"end":O?"start":"middle").call(n.font,fe).call(i.convertToTspans,c),W.textBB=n.bBox(ae.node()),W.transform=w(W,{fontSize:fe.size}),W.transform.fontSize=fe.size,A?ae.transition().attrTween("transform",function(ce){var xe=L(ce,h,ie(),[m,y]);return function(Te){return x(xe(Te))}}):ae.attr("transform",x(W))}),te},"drawDescendants"),dE}t(jDe,"requireDraw_descendants");var pE,PW;function YDe(){if(PW)return pE;PW=1;var e=uhe(),r=jDe();return pE=t(function(i,s,o,a){return e(i,s,o,a,{type:"icicle",drawDescendants:r})},"_plot"),pE}t(YDe,"requirePlot$l");var gE,DW;function WDe(){return DW||(DW=1,gE={moduleType:"trace",name:"icicle",basePlotModule:HDe(),categories:[],animatable:!0,attributes:fhe(),layoutAttributes:che(),supplyDefaults:$De(),supplyLayoutDefaults:VDe(),calc:EW().calc,crossTraceCalc:EW().crossTraceCalc,plot:YDe(),style:hhe().style,colorbar:_u,meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The icicle sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}),gE}t(WDe,"requireIcicle$1");var IW;function XDe(){return IW||(IW=1,function(e){e.exports=WDe()}(oE)),oE.exports}t(XDe,"requireIcicle");var yE={exports:{}},mE={},zW;function ZDe(){return zW||(zW=1,function(e){var r=so.exports;e.name="funnelarea",e.plot=function(n,i,s,o){r.plotBasePlot(e.name,n,i,s,o)},e.clean=function(n,i,s,o){r.cleanBasePlot(e.name,n,i,s,o)}}(mE)),mE}t(ZDe,"requireBase_plot$6");var xE,FW;function vhe(){if(FW)return xE;FW=1;var e=By(),r=Ni,n=vo.attributes,i=Un.hovertemplateAttrs,s=Un.texttemplateAttrs,o=cn.extendFlat;return xE={labels:e.labels,label0:e.label0,dlabel:e.dlabel,values:e.values,marker:{colors:e.marker.colors,line:{color:o({},e.marker.line.color,{dflt:null,description:["Sets the color of the line enclosing each sector.","Defaults to the `paper_bgcolor` value."].join(" ")}),width:o({},e.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:e.text,hovertext:e.hovertext,scalegroup:o({},e.scalegroup,{description:["If there are multiple funnelareas that should be sized according to","their totals, link them by providing a non-empty group id here","shared by every trace in the same group."].join(" ")}),textinfo:o({},e.textinfo,{flags:["label","text","value","percent"]}),texttemplate:s({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:o({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:i({},{keys:["label","color","value","text","percent"]}),textposition:o({},e.textposition,{values:["inside","none"],dflt:"inside"}),textfont:e.textfont,insidetextfont:e.insidetextfont,title:{text:e.title.text,font:e.title.font,position:o({},e.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:n({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot",description:["Sets the ratio between height and width"].join(" ")},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot",description:["Sets the ratio between bottom length and maximum top length."].join(" ")}},xE}t(vhe,"requireAttributes$v");var bE,BW;function dhe(){if(BW)return bE;BW=1;var e=k7().hiddenlabels;return bE={hiddenlabels:e,funnelareacolorway:{valType:"colorlist",editType:"calc",description:["Sets the default funnelarea slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendfunnelareacolors`."].join(" ")},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the funnelarea slice colors (whether given by `funnelareacolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}},bE}t(dhe,"requireLayout_attributes$6");var _E,OW;function KDe(){if(OW)return _E;OW=1;var e=Nt.exports,r=vhe(),n=vo.defaults,i=Ef().handleText,s=_ce().handleLabelsAndValues;return _E=t(function(a,l,u,f){function h(M,w){return e.coerce(a,l,r,M,w)}t(h,"coerce");var v=h("labels"),c=h("values"),d=s(v,c),g=d.len;if(l._hasLabels=d.hasLabels,l._hasValues=d.hasValues,!l._hasLabels&&l._hasValues&&(h("label0"),h("dlabel")),!g){l.visible=!1;return}l._length=g;var p=h("marker.line.width");p&&h("marker.line.color",f.paper_bgcolor),h("marker.colors"),h("scalegroup");var b=h("text"),m=h("texttemplate"),y;if(m||(y=h("textinfo",Array.isArray(b)?"text+percent":"percent")),h("hovertext"),h("hovertemplate"),m||y&&y!=="none"){var T=h("textposition");i(a,l,f,h,T,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}n(l,f,h);var _=h("title.text");_&&(h("title.position"),e.coerceFont(h,"title.font",f.font)),h("aspectratio"),h("baseratio")},"supplyDefaults"),_E}t(KDe,"requireDefaults$v");var wE,NW;function JDe(){if(NW)return wE;NW=1;var e=Nt.exports,r=dhe();return wE=t(function(i,s){function o(a,l){return e.coerce(i,s,r,a,l)}t(o,"coerce"),o("hiddenlabels"),o("funnelareacolorway",s.colorway),o("extendfunnelareacolors")},"supplyLayoutDefaults"),wE}t(JDe,"requireLayout_defaults$5");var TE,qW;function UW(){if(qW)return TE;qW=1;var e=F1();function r(i,s){return e.calc(i,s)}t(r,"calc");function n(i){e.crossTraceCalc(i,{type:"funnelarea"})}return t(n,"crossTraceCalc"),TE={calc:r,crossTraceCalc:n},TE}t(UW,"requireCalc$p");var AE,HW;function QDe(){if(HW)return AE;HW=1;var e=Va.exports,r=bn.exports,n=Nt.exports,i=n.strScale,s=n.strTranslate,o=Ji,a=Dy(),l=a.toMoveInsideBar,u=wu(),f=u.recordMinTextSize,h=u.clearMinTextSize,v=pp,c=E7(),d=c.attachFxHandlers,g=c.determineInsideTextFont,p=c.layoutAreas,b=c.prerenderTitles,m=c.positionTitleOutside,y=c.formatSliceLabel;AE=t(function(x,A){var S=x._context.staticPlot,k=x._fullLayout;h("funnelarea",k),b(A,x),p(A,k._size),n.makeTraceGroups(k._funnelarealayer,A,"trace").each(function(L){var P=e.select(this),D=L[0],B=D.trace;M(L),P.each(function(){var z=e.select(this).selectAll("g.slice").data(L);z.enter().append("g").classed("slice",!0),z.exit().remove(),z.each(function(F,O){if(F.hidden){e.select(this).selectAll("path,g").remove();return}F.pointNumber=F.i,F.curveNumber=B.index;var q=D.cx,H=D.cy,j=e.select(this),X=j.selectAll("path.surface").data([F]);X.enter().append("path").classed("surface",!0).style({"pointer-events":S?"none":"all"}),j.call(d,x,L);var G="M"+(q+F.TR[0])+","+(H+F.TR[1])+T(F.TR,F.BR)+T(F.BR,F.BL)+T(F.BL,F.TL)+"Z";X.attr("d",G),y(x,F,D);var $=v.castOption(B.textposition,F.pts),te=j.selectAll("g.slicetext").data(F.text&&$!=="none"?[0]:[]);te.enter().append("g").classed("slicetext",!0),te.exit().remove(),te.each(function(){var ee=n.ensureSingle(e.select(this),"text","",function(fe){fe.attr("data-notex",1)}),ie=n.ensureUniformFontSize(x,g(B,F,k.font));ee.text(F.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(r.font,ie).call(o.convertToTspans,x);var se=r.bBox(ee.node()),W,ne,he,re=Math.min(F.BL[1],F.BR[1])+H,ae=Math.max(F.TL[1],F.TR[1])+H;ne=Math.max(F.TL[0],F.BL[0])+q,he=Math.min(F.TR[0],F.BR[0])+q,W=l(ne,he,re,ae,se,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),W.fontSize=ie.size,f(B.type,W,k),L[O].transform=W,n.setTransormAndDisplay(ee,W)})});var R=e.select(this).selectAll("g.titletext").data(B.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var F=n.ensureSingle(e.select(this),"text","",function(H){H.attr("data-notex",1)}),O=B.title.text;B._meta&&(O=n.templateString(O,B._meta)),F.text(O).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(r.font,B.title.font).call(o.convertToTspans,x);var q=m(D,k._size);F.attr("transform",s(q.x,q.y)+i(Math.min(1,q.scale))+s(q.tx,q.ty))})})})},"plot");function T(w,x){var A=x[0]-w[0],S=x[1]-w[1];return"l"+A+","+S}t(T,"line");function _(w,x){return[.5*(w[0]+x[0]),.5*(w[1]+x[1])]}t(_,"getBetween");function M(w){if(!w.length)return;var x=w[0],A=x.trace,S=A.aspectratio,k=A.baseratio;k>.999&&(k=.999);var L=Math.pow(k,2),P=x.vTotal,D=P*L/(1-L),B=P,z=D/P;function R(){var ce=Math.sqrt(z);return{x:ce,y:-ce}}t(R,"calcPos");function F(){var ce=R();return[ce.x,ce.y]}t(F,"getPoint");var O,q=[];q.push(F());var H,j;for(H=w.length-1;H>-1;H--)if(j=w[H],!j.hidden){var X=j.v/B;z+=X,q.push(F())}var G=1/0,$=-1/0;for(H=0;H<q.length;H++)O=q[H],G=Math.min(G,O[1]),$=Math.max($,O[1]);for(H=0;H<q.length;H++)q[H][1]-=($+G)/2;var te=q[q.length-1][0],ee=x.r,ie=($-G)/2,se=ee/te,W=ee/ie*S;for(x.r=W*ie,H=0;H<q.length;H++)q[H][0]*=se,q[H][1]*=W;O=q[0];var ne=[-O[0],O[1]],he=[O[0],O[1]],re=0;for(H=w.length-1;H>-1;H--)if(j=w[H],!j.hidden){re+=1;var ae=q[re][0],fe=q[re][1];j.TL=[-ae,fe],j.TR=[ae,fe],j.BL=ne,j.BR=he,j.pxmid=_(j.TR,j.BR),ne=j.TL,he=j.TR}}return t(M,"setCoords"),AE}t(QDe,"requirePlot$k");var SE,$W;function eIe(){if($W)return SE;$W=1;var e=Va.exports,r=ex(),n=wu().resizeText;return SE=t(function(s){var o=s._fullLayout._funnelarealayer.selectAll(".trace");n(s,o,"funnelarea"),o.each(function(a){var l=a[0],u=l.trace,f=e.select(this);f.style({opacity:u.opacity}),f.selectAll("path.surface").each(function(h){e.select(this).call(r,h,u)})})},"style"),SE}t(eIe,"requireStyle$3");var ME,VW;function tIe(){return VW||(VW=1,ME={moduleType:"trace",name:"funnelarea",basePlotModule:ZDe(),categories:["pie-like","funnelarea","showLegend"],attributes:vhe(),layoutAttributes:dhe(),supplyDefaults:KDe(),supplyLayoutDefaults:JDe(),calc:UW().calc,crossTraceCalc:UW().crossTraceCalc,plot:QDe(),style:eIe(),styleOne:ex(),meta:{description:["Visualize stages in a process using area-encoded trapezoids. This trace can be used",'to show data in a part-to-whole representation similar to a "pie" trace, wherein','each item appears in a single stage. See also the "funnel" trace type for a different',"approach to visualizing funnel data."].join(" ")}}),ME}t(tIe,"requireFunnelarea$1");var GW;function rIe(){return GW||(GW=1,function(e){e.exports=tIe()}(yE)),yE.exports}t(rIe,"requireFunnelarea");var kE={exports:{}},EE={exports:{}},jW;function ys(){return jW||(jW=1,function(e,r){(function(n){e.exports=n()})(function(){return function(){function n(i,s,o){function a(f,h){if(!s[f]){if(!i[f]){var v=typeof Kx=="function"&&Kx;if(!h&&v)return v(f,!0);if(l)return l(f,!0);var c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c}var d=s[f]={exports:{}};i[f][0].call(d.exports,function(g){var p=i[f][1][g];return a(p||g)},d,d.exports,n,i,s,o)}return s[f].exports}t(a,"o");for(var l=typeof Kx=="function"&&Kx,u=0;u<o.length;u++)a(o[u]);return a}return t(n,"r"),n}()({1:[function(n,i,s){s.byteLength=c,s.toByteArray=g,s.fromByteArray=m;for(var o=[],a=[],l=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,h=u.length;f<h;++f)o[f]=u[f],a[u.charCodeAt(f)]=f;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function v(y){var T=y.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=y.indexOf("=");_===-1&&(_=T);var M=_===T?0:4-_%4;return[_,M]}t(v,"getLens");function c(y){var T=v(y),_=T[0],M=T[1];return(_+M)*3/4-M}t(c,"byteLength");function d(y,T,_){return(T+_)*3/4-_}t(d,"_byteLength");function g(y){var T,_=v(y),M=_[0],w=_[1],x=new l(d(y,M,w)),A=0,S=w>0?M-4:M,k;for(k=0;k<S;k+=4)T=a[y.charCodeAt(k)]<<18|a[y.charCodeAt(k+1)]<<12|a[y.charCodeAt(k+2)]<<6|a[y.charCodeAt(k+3)],x[A++]=T>>16&255,x[A++]=T>>8&255,x[A++]=T&255;return w===2&&(T=a[y.charCodeAt(k)]<<2|a[y.charCodeAt(k+1)]>>4,x[A++]=T&255),w===1&&(T=a[y.charCodeAt(k)]<<10|a[y.charCodeAt(k+1)]<<4|a[y.charCodeAt(k+2)]>>2,x[A++]=T>>8&255,x[A++]=T&255),x}t(g,"toByteArray");function p(y){return o[y>>18&63]+o[y>>12&63]+o[y>>6&63]+o[y&63]}t(p,"tripletToBase64");function b(y,T,_){for(var M,w=[],x=T;x<_;x+=3)M=(y[x]<<16&16711680)+(y[x+1]<<8&65280)+(y[x+2]&255),w.push(p(M));return w.join("")}t(b,"encodeChunk");function m(y){for(var T,_=y.length,M=_%3,w=[],x=16383,A=0,S=_-M;A<S;A+=x)w.push(b(y,A,A+x>S?S:A+x));return M===1?(T=y[_-1],w.push(o[T>>2]+o[T<<4&63]+"==")):M===2&&(T=(y[_-2]<<8)+y[_-1],w.push(o[T>>10]+o[T>>4&63]+o[T<<2&63]+"=")),w.join("")}t(m,"fromByteArray")},{}],2:[function(n,i,s){},{}],3:[function(n,i,s){(function(o){(function(){var a=n("base64-js"),l=n("ieee754");s.Buffer=v,s.SlowBuffer=M,s.INSPECT_MAX_BYTES=50;var u=2147483647;s.kMaxLength=u,v.TYPED_ARRAY_SUPPORT=f(),!v.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{var oe=new Uint8Array(1);return oe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},oe.foo()===42}catch{return!1}}t(f,"typedArraySupport"),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(!!v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(!!v.isBuffer(this))return this.byteOffset}});function h(oe){if(oe>u)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var de=new Uint8Array(oe);return de.__proto__=v.prototype,de}t(h,"createBuffer");function v(oe,de,ye){if(typeof oe=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(oe)}return c(oe,de,ye)}t(v,"Buffer"),typeof Symbol<"u"&&Symbol.species!=null&&v[Symbol.species]===v&&Object.defineProperty(v,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),v.poolSize=8192;function c(oe,de,ye){if(typeof oe=="string")return b(oe,de);if(ArrayBuffer.isView(oe))return m(oe);if(oe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe);if(me(oe,ArrayBuffer)||oe&&me(oe.buffer,ArrayBuffer))return y(oe,de,ye);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var we=oe.valueOf&&oe.valueOf();if(we!=null&&we!==oe)return v.from(we,de,ye);var Ee=T(oe);if(Ee)return Ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return v.from(oe[Symbol.toPrimitive]("string"),de,ye);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe)}t(c,"from"),v.from=function(oe,de,ye){return c(oe,de,ye)},v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array;function d(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}t(d,"assertSize");function g(oe,de,ye){return d(oe),oe<=0?h(oe):de!==void 0?typeof ye=="string"?h(oe).fill(de,ye):h(oe).fill(de):h(oe)}t(g,"alloc"),v.alloc=function(oe,de,ye){return g(oe,de,ye)};function p(oe){return d(oe),h(oe<0?0:_(oe)|0)}t(p,"allocUnsafe"),v.allocUnsafe=function(oe){return p(oe)},v.allocUnsafeSlow=function(oe){return p(oe)};function b(oe,de){if((typeof de!="string"||de==="")&&(de="utf8"),!v.isEncoding(de))throw new TypeError("Unknown encoding: "+de);var ye=w(oe,de)|0,we=h(ye),Ee=we.write(oe,de);return Ee!==ye&&(we=we.slice(0,Ee)),we}t(b,"fromString");function m(oe){for(var de=oe.length<0?0:_(oe.length)|0,ye=h(de),we=0;we<de;we+=1)ye[we]=oe[we]&255;return ye}t(m,"fromArrayLike");function y(oe,de,ye){if(de<0||oe.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<de+(ye||0))throw new RangeError('"length" is outside of buffer bounds');var we;return de===void 0&&ye===void 0?we=new Uint8Array(oe):ye===void 0?we=new Uint8Array(oe,de):we=new Uint8Array(oe,de,ye),we.__proto__=v.prototype,we}t(y,"fromArrayBuffer");function T(oe){if(v.isBuffer(oe)){var de=_(oe.length)|0,ye=h(de);return ye.length===0||oe.copy(ye,0,0,de),ye}if(oe.length!==void 0)return typeof oe.length!="number"||pe(oe.length)?h(0):m(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return m(oe.data)}t(T,"fromObject");function _(oe){if(oe>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return oe|0}t(_,"checked");function M(oe){return+oe!=oe&&(oe=0),v.alloc(+oe)}t(M,"SlowBuffer"),v.isBuffer=t(function(de){return de!=null&&de._isBuffer===!0&&de!==v.prototype},"isBuffer"),v.compare=t(function(de,ye){if(me(de,Uint8Array)&&(de=v.from(de,de.offset,de.byteLength)),me(ye,Uint8Array)&&(ye=v.from(ye,ye.offset,ye.byteLength)),!v.isBuffer(de)||!v.isBuffer(ye))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===ye)return 0;for(var we=de.length,Ee=ye.length,De=0,Fe=Math.min(we,Ee);De<Fe;++De)if(de[De]!==ye[De]){we=de[De],Ee=ye[De];break}return we<Ee?-1:Ee<we?1:0},"compare"),v.isEncoding=t(function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),v.concat=t(function(de,ye){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return v.alloc(0);var we;if(ye===void 0)for(ye=0,we=0;we<de.length;++we)ye+=de[we].length;var Ee=v.allocUnsafe(ye),De=0;for(we=0;we<de.length;++we){var Fe=de[we];if(me(Fe,Uint8Array)&&(Fe=v.from(Fe)),!v.isBuffer(Fe))throw new TypeError('"list" argument must be an Array of Buffers');Fe.copy(Ee,De),De+=Fe.length}return Ee},"concat");function w(oe,de){if(v.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||me(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof oe);var ye=oe.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&ye===0)return 0;for(var Ee=!1;;)switch(de){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return ae(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye*2;case"hex":return ye>>>1;case"base64":return xe(oe).length;default:if(Ee)return we?-1:ae(oe).length;de=(""+de).toLowerCase(),Ee=!0}}t(w,"byteLength"),v.byteLength=w;function x(oe,de,ye){var we=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((ye===void 0||ye>this.length)&&(ye=this.length),ye<=0)||(ye>>>=0,de>>>=0,ye<=de))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return G(this,de,ye);case"utf8":case"utf-8":return O(this,de,ye);case"ascii":return j(this,de,ye);case"latin1":case"binary":return X(this,de,ye);case"base64":return F(this,de,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,de,ye);default:if(we)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),we=!0}}t(x,"slowToString"),v.prototype._isBuffer=!0;function A(oe,de,ye){var we=oe[de];oe[de]=oe[ye],oe[ye]=we}t(A,"swap"),v.prototype.swap16=t(function(){var de=this.length;if(de%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ye=0;ye<de;ye+=2)A(this,ye,ye+1);return this},"swap16"),v.prototype.swap32=t(function(){var de=this.length;if(de%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ye=0;ye<de;ye+=4)A(this,ye,ye+3),A(this,ye+1,ye+2);return this},"swap32"),v.prototype.swap64=t(function(){var de=this.length;if(de%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ye=0;ye<de;ye+=8)A(this,ye,ye+7),A(this,ye+1,ye+6),A(this,ye+2,ye+5),A(this,ye+3,ye+4);return this},"swap64"),v.prototype.toString=t(function(){var de=this.length;return de===0?"":arguments.length===0?O(this,0,de):x.apply(this,arguments)},"toString"),v.prototype.toLocaleString=v.prototype.toString,v.prototype.equals=t(function(de){if(!v.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de?!0:v.compare(this,de)===0},"equals"),v.prototype.inspect=t(function(){var de="",ye=s.INSPECT_MAX_BYTES;return de=this.toString("hex",0,ye).replace(/(.{2})/g,"$1 ").trim(),this.length>ye&&(de+=" ... "),"<Buffer "+de+">"},"inspect"),v.prototype.compare=t(function(de,ye,we,Ee,De){if(me(de,Uint8Array)&&(de=v.from(de,de.offset,de.byteLength)),!v.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof de);if(ye===void 0&&(ye=0),we===void 0&&(we=de?de.length:0),Ee===void 0&&(Ee=0),De===void 0&&(De=this.length),ye<0||we>de.length||Ee<0||De>this.length)throw new RangeError("out of range index");if(Ee>=De&&ye>=we)return 0;if(Ee>=De)return-1;if(ye>=we)return 1;if(ye>>>=0,we>>>=0,Ee>>>=0,De>>>=0,this===de)return 0;for(var Fe=De-Ee,qe=we-ye,Je=Math.min(Fe,qe),Ge=this.slice(Ee,De),et=de.slice(ye,we),Ue=0;Ue<Je;++Ue)if(Ge[Ue]!==et[Ue]){Fe=Ge[Ue],qe=et[Ue];break}return Fe<qe?-1:qe<Fe?1:0},"compare");function S(oe,de,ye,we,Ee){if(oe.length===0)return-1;if(typeof ye=="string"?(we=ye,ye=0):ye>2147483647?ye=2147483647:ye<-2147483648&&(ye=-2147483648),ye=+ye,pe(ye)&&(ye=Ee?0:oe.length-1),ye<0&&(ye=oe.length+ye),ye>=oe.length){if(Ee)return-1;ye=oe.length-1}else if(ye<0)if(Ee)ye=0;else return-1;if(typeof de=="string"&&(de=v.from(de,we)),v.isBuffer(de))return de.length===0?-1:k(oe,de,ye,we,Ee);if(typeof de=="number")return de=de&255,typeof Uint8Array.prototype.indexOf=="function"?Ee?Uint8Array.prototype.indexOf.call(oe,de,ye):Uint8Array.prototype.lastIndexOf.call(oe,de,ye):k(oe,[de],ye,we,Ee);throw new TypeError("val must be string, number or Buffer")}t(S,"bidirectionalIndexOf");function k(oe,de,ye,we,Ee){var De=1,Fe=oe.length,qe=de.length;if(we!==void 0&&(we=String(we).toLowerCase(),we==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(oe.length<2||de.length<2)return-1;De=2,Fe/=2,qe/=2,ye/=2}function Je($e,Ct){return De===1?$e[Ct]:$e.readUInt16BE(Ct*De)}t(Je,"read");var Ge;if(Ee){var et=-1;for(Ge=ye;Ge<Fe;Ge++)if(Je(oe,Ge)===Je(de,et===-1?0:Ge-et)){if(et===-1&&(et=Ge),Ge-et+1===qe)return et*De}else et!==-1&&(Ge-=Ge-et),et=-1}else for(ye+qe>Fe&&(ye=Fe-qe),Ge=ye;Ge>=0;Ge--){for(var Ue=!0,Ye=0;Ye<qe;Ye++)if(Je(oe,Ge+Ye)!==Je(de,Ye)){Ue=!1;break}if(Ue)return Ge}return-1}t(k,"arrayIndexOf"),v.prototype.includes=t(function(de,ye,we){return this.indexOf(de,ye,we)!==-1},"includes"),v.prototype.indexOf=t(function(de,ye,we){return S(this,de,ye,we,!0)},"indexOf"),v.prototype.lastIndexOf=t(function(de,ye,we){return S(this,de,ye,we,!1)},"lastIndexOf");function L(oe,de,ye,we){ye=Number(ye)||0;var Ee=oe.length-ye;we?(we=Number(we),we>Ee&&(we=Ee)):we=Ee;var De=de.length;we>De/2&&(we=De/2);for(var Fe=0;Fe<we;++Fe){var qe=parseInt(de.substr(Fe*2,2),16);if(pe(qe))return Fe;oe[ye+Fe]=qe}return Fe}t(L,"hexWrite");function P(oe,de,ye,we){return Te(ae(de,oe.length-ye),oe,ye,we)}t(P,"utf8Write");function D(oe,de,ye,we){return Te(fe(de),oe,ye,we)}t(D,"asciiWrite");function B(oe,de,ye,we){return D(oe,de,ye,we)}t(B,"latin1Write");function z(oe,de,ye,we){return Te(xe(de),oe,ye,we)}t(z,"base64Write");function R(oe,de,ye,we){return Te(ce(de,oe.length-ye),oe,ye,we)}t(R,"ucs2Write"),v.prototype.write=t(function(de,ye,we,Ee){if(ye===void 0)Ee="utf8",we=this.length,ye=0;else if(we===void 0&&typeof ye=="string")Ee=ye,we=this.length,ye=0;else if(isFinite(ye))ye=ye>>>0,isFinite(we)?(we=we>>>0,Ee===void 0&&(Ee="utf8")):(Ee=we,we=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var De=this.length-ye;if((we===void 0||we>De)&&(we=De),de.length>0&&(we<0||ye<0)||ye>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");for(var Fe=!1;;)switch(Ee){case"hex":return L(this,de,ye,we);case"utf8":case"utf-8":return P(this,de,ye,we);case"ascii":return D(this,de,ye,we);case"latin1":case"binary":return B(this,de,ye,we);case"base64":return z(this,de,ye,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,de,ye,we);default:if(Fe)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),Fe=!0}},"write"),v.prototype.toJSON=t(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function F(oe,de,ye){return de===0&&ye===oe.length?a.fromByteArray(oe):a.fromByteArray(oe.slice(de,ye))}t(F,"base64Slice");function O(oe,de,ye){ye=Math.min(oe.length,ye);for(var we=[],Ee=de;Ee<ye;){var De=oe[Ee],Fe=null,qe=De>239?4:De>223?3:De>191?2:1;if(Ee+qe<=ye){var Je,Ge,et,Ue;switch(qe){case 1:De<128&&(Fe=De);break;case 2:Je=oe[Ee+1],(Je&192)===128&&(Ue=(De&31)<<6|Je&63,Ue>127&&(Fe=Ue));break;case 3:Je=oe[Ee+1],Ge=oe[Ee+2],(Je&192)===128&&(Ge&192)===128&&(Ue=(De&15)<<12|(Je&63)<<6|Ge&63,Ue>2047&&(Ue<55296||Ue>57343)&&(Fe=Ue));break;case 4:Je=oe[Ee+1],Ge=oe[Ee+2],et=oe[Ee+3],(Je&192)===128&&(Ge&192)===128&&(et&192)===128&&(Ue=(De&15)<<18|(Je&63)<<12|(Ge&63)<<6|et&63,Ue>65535&&Ue<1114112&&(Fe=Ue))}}Fe===null?(Fe=65533,qe=1):Fe>65535&&(Fe-=65536,we.push(Fe>>>10&1023|55296),Fe=56320|Fe&1023),we.push(Fe),Ee+=qe}return H(we)}t(O,"utf8Slice");var q=4096;function H(oe){var de=oe.length;if(de<=q)return String.fromCharCode.apply(String,oe);for(var ye="",we=0;we<de;)ye+=String.fromCharCode.apply(String,oe.slice(we,we+=q));return ye}t(H,"decodeCodePointsArray");function j(oe,de,ye){var we="";ye=Math.min(oe.length,ye);for(var Ee=de;Ee<ye;++Ee)we+=String.fromCharCode(oe[Ee]&127);return we}t(j,"asciiSlice");function X(oe,de,ye){var we="";ye=Math.min(oe.length,ye);for(var Ee=de;Ee<ye;++Ee)we+=String.fromCharCode(oe[Ee]);return we}t(X,"latin1Slice");function G(oe,de,ye){var we=oe.length;(!de||de<0)&&(de=0),(!ye||ye<0||ye>we)&&(ye=we);for(var Ee="",De=de;De<ye;++De)Ee+=re(oe[De]);return Ee}t(G,"hexSlice");function $(oe,de,ye){for(var we=oe.slice(de,ye),Ee="",De=0;De<we.length;De+=2)Ee+=String.fromCharCode(we[De]+we[De+1]*256);return Ee}t($,"utf16leSlice"),v.prototype.slice=t(function(de,ye){var we=this.length;de=~~de,ye=ye===void 0?we:~~ye,de<0?(de+=we,de<0&&(de=0)):de>we&&(de=we),ye<0?(ye+=we,ye<0&&(ye=0)):ye>we&&(ye=we),ye<de&&(ye=de);var Ee=this.subarray(de,ye);return Ee.__proto__=v.prototype,Ee},"slice");function te(oe,de,ye){if(oe%1!==0||oe<0)throw new RangeError("offset is not uint");if(oe+de>ye)throw new RangeError("Trying to access beyond buffer length")}t(te,"checkOffset"),v.prototype.readUIntLE=t(function(de,ye,we){de=de>>>0,ye=ye>>>0,we||te(de,ye,this.length);for(var Ee=this[de],De=1,Fe=0;++Fe<ye&&(De*=256);)Ee+=this[de+Fe]*De;return Ee},"readUIntLE"),v.prototype.readUIntBE=t(function(de,ye,we){de=de>>>0,ye=ye>>>0,we||te(de,ye,this.length);for(var Ee=this[de+--ye],De=1;ye>0&&(De*=256);)Ee+=this[de+--ye]*De;return Ee},"readUIntBE"),v.prototype.readUInt8=t(function(de,ye){return de=de>>>0,ye||te(de,1,this.length),this[de]},"readUInt8"),v.prototype.readUInt16LE=t(function(de,ye){return de=de>>>0,ye||te(de,2,this.length),this[de]|this[de+1]<<8},"readUInt16LE"),v.prototype.readUInt16BE=t(function(de,ye){return de=de>>>0,ye||te(de,2,this.length),this[de]<<8|this[de+1]},"readUInt16BE"),v.prototype.readUInt32LE=t(function(de,ye){return de=de>>>0,ye||te(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+this[de+3]*16777216},"readUInt32LE"),v.prototype.readUInt32BE=t(function(de,ye){return de=de>>>0,ye||te(de,4,this.length),this[de]*16777216+(this[de+1]<<16|this[de+2]<<8|this[de+3])},"readUInt32BE"),v.prototype.readIntLE=t(function(de,ye,we){de=de>>>0,ye=ye>>>0,we||te(de,ye,this.length);for(var Ee=this[de],De=1,Fe=0;++Fe<ye&&(De*=256);)Ee+=this[de+Fe]*De;return De*=128,Ee>=De&&(Ee-=Math.pow(2,8*ye)),Ee},"readIntLE"),v.prototype.readIntBE=t(function(de,ye,we){de=de>>>0,ye=ye>>>0,we||te(de,ye,this.length);for(var Ee=ye,De=1,Fe=this[de+--Ee];Ee>0&&(De*=256);)Fe+=this[de+--Ee]*De;return De*=128,Fe>=De&&(Fe-=Math.pow(2,8*ye)),Fe},"readIntBE"),v.prototype.readInt8=t(function(de,ye){return de=de>>>0,ye||te(de,1,this.length),this[de]&128?(255-this[de]+1)*-1:this[de]},"readInt8"),v.prototype.readInt16LE=t(function(de,ye){de=de>>>0,ye||te(de,2,this.length);var we=this[de]|this[de+1]<<8;return we&32768?we|4294901760:we},"readInt16LE"),v.prototype.readInt16BE=t(function(de,ye){de=de>>>0,ye||te(de,2,this.length);var we=this[de+1]|this[de]<<8;return we&32768?we|4294901760:we},"readInt16BE"),v.prototype.readInt32LE=t(function(de,ye){return de=de>>>0,ye||te(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},"readInt32LE"),v.prototype.readInt32BE=t(function(de,ye){return de=de>>>0,ye||te(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},"readInt32BE"),v.prototype.readFloatLE=t(function(de,ye){return de=de>>>0,ye||te(de,4,this.length),l.read(this,de,!0,23,4)},"readFloatLE"),v.prototype.readFloatBE=t(function(de,ye){return de=de>>>0,ye||te(de,4,this.length),l.read(this,de,!1,23,4)},"readFloatBE"),v.prototype.readDoubleLE=t(function(de,ye){return de=de>>>0,ye||te(de,8,this.length),l.read(this,de,!0,52,8)},"readDoubleLE"),v.prototype.readDoubleBE=t(function(de,ye){return de=de>>>0,ye||te(de,8,this.length),l.read(this,de,!1,52,8)},"readDoubleBE");function ee(oe,de,ye,we,Ee,De){if(!v.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>Ee||de<De)throw new RangeError('"value" argument is out of bounds');if(ye+we>oe.length)throw new RangeError("Index out of range")}t(ee,"checkInt"),v.prototype.writeUIntLE=t(function(de,ye,we,Ee){if(de=+de,ye=ye>>>0,we=we>>>0,!Ee){var De=Math.pow(2,8*we)-1;ee(this,de,ye,we,De,0)}var Fe=1,qe=0;for(this[ye]=de&255;++qe<we&&(Fe*=256);)this[ye+qe]=de/Fe&255;return ye+we},"writeUIntLE"),v.prototype.writeUIntBE=t(function(de,ye,we,Ee){if(de=+de,ye=ye>>>0,we=we>>>0,!Ee){var De=Math.pow(2,8*we)-1;ee(this,de,ye,we,De,0)}var Fe=we-1,qe=1;for(this[ye+Fe]=de&255;--Fe>=0&&(qe*=256);)this[ye+Fe]=de/qe&255;return ye+we},"writeUIntBE"),v.prototype.writeUInt8=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,1,255,0),this[ye]=de&255,ye+1},"writeUInt8"),v.prototype.writeUInt16LE=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,2,65535,0),this[ye]=de&255,this[ye+1]=de>>>8,ye+2},"writeUInt16LE"),v.prototype.writeUInt16BE=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,2,65535,0),this[ye]=de>>>8,this[ye+1]=de&255,ye+2},"writeUInt16BE"),v.prototype.writeUInt32LE=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,4,4294967295,0),this[ye+3]=de>>>24,this[ye+2]=de>>>16,this[ye+1]=de>>>8,this[ye]=de&255,ye+4},"writeUInt32LE"),v.prototype.writeUInt32BE=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,4,4294967295,0),this[ye]=de>>>24,this[ye+1]=de>>>16,this[ye+2]=de>>>8,this[ye+3]=de&255,ye+4},"writeUInt32BE"),v.prototype.writeIntLE=t(function(de,ye,we,Ee){if(de=+de,ye=ye>>>0,!Ee){var De=Math.pow(2,8*we-1);ee(this,de,ye,we,De-1,-De)}var Fe=0,qe=1,Je=0;for(this[ye]=de&255;++Fe<we&&(qe*=256);)de<0&&Je===0&&this[ye+Fe-1]!==0&&(Je=1),this[ye+Fe]=(de/qe>>0)-Je&255;return ye+we},"writeIntLE"),v.prototype.writeIntBE=t(function(de,ye,we,Ee){if(de=+de,ye=ye>>>0,!Ee){var De=Math.pow(2,8*we-1);ee(this,de,ye,we,De-1,-De)}var Fe=we-1,qe=1,Je=0;for(this[ye+Fe]=de&255;--Fe>=0&&(qe*=256);)de<0&&Je===0&&this[ye+Fe+1]!==0&&(Je=1),this[ye+Fe]=(de/qe>>0)-Je&255;return ye+we},"writeIntBE"),v.prototype.writeInt8=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,1,127,-128),de<0&&(de=255+de+1),this[ye]=de&255,ye+1},"writeInt8"),v.prototype.writeInt16LE=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,2,32767,-32768),this[ye]=de&255,this[ye+1]=de>>>8,ye+2},"writeInt16LE"),v.prototype.writeInt16BE=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,2,32767,-32768),this[ye]=de>>>8,this[ye+1]=de&255,ye+2},"writeInt16BE"),v.prototype.writeInt32LE=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,4,2147483647,-2147483648),this[ye]=de&255,this[ye+1]=de>>>8,this[ye+2]=de>>>16,this[ye+3]=de>>>24,ye+4},"writeInt32LE"),v.prototype.writeInt32BE=t(function(de,ye,we){return de=+de,ye=ye>>>0,we||ee(this,de,ye,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[ye]=de>>>24,this[ye+1]=de>>>16,this[ye+2]=de>>>8,this[ye+3]=de&255,ye+4},"writeInt32BE");function ie(oe,de,ye,we,Ee,De){if(ye+we>oe.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}t(ie,"checkIEEE754");function se(oe,de,ye,we,Ee){return de=+de,ye=ye>>>0,Ee||ie(oe,de,ye,4),l.write(oe,de,ye,we,23,4),ye+4}t(se,"writeFloat"),v.prototype.writeFloatLE=t(function(de,ye,we){return se(this,de,ye,!0,we)},"writeFloatLE"),v.prototype.writeFloatBE=t(function(de,ye,we){return se(this,de,ye,!1,we)},"writeFloatBE");function W(oe,de,ye,we,Ee){return de=+de,ye=ye>>>0,Ee||ie(oe,de,ye,8),l.write(oe,de,ye,we,52,8),ye+8}t(W,"writeDouble"),v.prototype.writeDoubleLE=t(function(de,ye,we){return W(this,de,ye,!0,we)},"writeDoubleLE"),v.prototype.writeDoubleBE=t(function(de,ye,we){return W(this,de,ye,!1,we)},"writeDoubleBE"),v.prototype.copy=t(function(de,ye,we,Ee){if(!v.isBuffer(de))throw new TypeError("argument should be a Buffer");if(we||(we=0),!Ee&&Ee!==0&&(Ee=this.length),ye>=de.length&&(ye=de.length),ye||(ye=0),Ee>0&&Ee<we&&(Ee=we),Ee===we||de.length===0||this.length===0)return 0;if(ye<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),de.length-ye<Ee-we&&(Ee=de.length-ye+we);var De=Ee-we;if(this===de&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ye,we,Ee);else if(this===de&&we<ye&&ye<Ee)for(var Fe=De-1;Fe>=0;--Fe)de[Fe+ye]=this[Fe+we];else Uint8Array.prototype.set.call(de,this.subarray(we,Ee),ye);return De},"copy"),v.prototype.fill=t(function(de,ye,we,Ee){if(typeof de=="string"){if(typeof ye=="string"?(Ee=ye,ye=0,we=this.length):typeof we=="string"&&(Ee=we,we=this.length),Ee!==void 0&&typeof Ee!="string")throw new TypeError("encoding must be a string");if(typeof Ee=="string"&&!v.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);if(de.length===1){var De=de.charCodeAt(0);(Ee==="utf8"&&De<128||Ee==="latin1")&&(de=De)}}else typeof de=="number"&&(de=de&255);if(ye<0||this.length<ye||this.length<we)throw new RangeError("Out of range index");if(we<=ye)return this;ye=ye>>>0,we=we===void 0?this.length:we>>>0,de||(de=0);var Fe;if(typeof de=="number")for(Fe=ye;Fe<we;++Fe)this[Fe]=de;else{var qe=v.isBuffer(de)?de:v.from(de,Ee),Je=qe.length;if(Je===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Fe=0;Fe<we-ye;++Fe)this[Fe+ye]=qe[Fe%Je]}return this},"fill");var ne=/[^+/0-9A-Za-z-_]/g;function he(oe){if(oe=oe.split("=")[0],oe=oe.trim().replace(ne,""),oe.length<2)return"";for(;oe.length%4!==0;)oe=oe+"=";return oe}t(he,"base64clean");function re(oe){return oe<16?"0"+oe.toString(16):oe.toString(16)}t(re,"toHex");function ae(oe,de){de=de||1/0;for(var ye,we=oe.length,Ee=null,De=[],Fe=0;Fe<we;++Fe){if(ye=oe.charCodeAt(Fe),ye>55295&&ye<57344){if(!Ee){if(ye>56319){(de-=3)>-1&&De.push(239,191,189);continue}else if(Fe+1===we){(de-=3)>-1&&De.push(239,191,189);continue}Ee=ye;continue}if(ye<56320){(de-=3)>-1&&De.push(239,191,189),Ee=ye;continue}ye=(Ee-55296<<10|ye-56320)+65536}else Ee&&(de-=3)>-1&&De.push(239,191,189);if(Ee=null,ye<128){if((de-=1)<0)break;De.push(ye)}else if(ye<2048){if((de-=2)<0)break;De.push(ye>>6|192,ye&63|128)}else if(ye<65536){if((de-=3)<0)break;De.push(ye>>12|224,ye>>6&63|128,ye&63|128)}else if(ye<1114112){if((de-=4)<0)break;De.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,ye&63|128)}else throw new Error("Invalid code point")}return De}t(ae,"utf8ToBytes");function fe(oe){for(var de=[],ye=0;ye<oe.length;++ye)de.push(oe.charCodeAt(ye)&255);return de}t(fe,"asciiToBytes");function ce(oe,de){for(var ye,we,Ee,De=[],Fe=0;Fe<oe.length&&!((de-=2)<0);++Fe)ye=oe.charCodeAt(Fe),we=ye>>8,Ee=ye%256,De.push(Ee),De.push(we);return De}t(ce,"utf16leToBytes");function xe(oe){return a.toByteArray(he(oe))}t(xe,"base64ToBytes");function Te(oe,de,ye,we){for(var Ee=0;Ee<we&&!(Ee+ye>=de.length||Ee>=oe.length);++Ee)de[Ee+ye]=oe[Ee];return Ee}t(Te,"blitBuffer");function me(oe,de){return oe instanceof de||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===de.name}t(me,"isInstance");function pe(oe){return oe!==oe}t(pe,"numberIsNaN")}).call(this)}).call(this,n("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(n,i,s){s.read=function(o,a,l,u,f){var h,v,c=f*8-u-1,d=(1<<c)-1,g=d>>1,p=-7,b=l?f-1:0,m=l?-1:1,y=o[a+b];for(b+=m,h=y&(1<<-p)-1,y>>=-p,p+=c;p>0;h=h*256+o[a+b],b+=m,p-=8);for(v=h&(1<<-p)-1,h>>=-p,p+=u;p>0;v=v*256+o[a+b],b+=m,p-=8);if(h===0)h=1-g;else{if(h===d)return v?NaN:(y?-1:1)*(1/0);v=v+Math.pow(2,u),h=h-g}return(y?-1:1)*v*Math.pow(2,h-u)},s.write=function(o,a,l,u,f,h){var v,c,d,g=h*8-f-1,p=(1<<g)-1,b=p>>1,m=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=u?0:h-1,T=u?1:-1,_=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(c=isNaN(a)?1:0,v=p):(v=Math.floor(Math.log(a)/Math.LN2),a*(d=Math.pow(2,-v))<1&&(v--,d*=2),v+b>=1?a+=m/d:a+=m*Math.pow(2,1-b),a*d>=2&&(v++,d/=2),v+b>=p?(c=0,v=p):v+b>=1?(c=(a*d-1)*Math.pow(2,f),v=v+b):(c=a*Math.pow(2,b-1)*Math.pow(2,f),v=0));f>=8;o[l+y]=c&255,y+=T,c/=256,f-=8);for(v=v<<f|c,g+=f;g>0;o[l+y]=v&255,y+=T,v/=256,g-=8);o[l+y-T]|=_*128}},{}],5:[function(n,i,s){var o=i.exports={},a,l;function u(){throw new Error("setTimeout has not been defined")}t(u,"defaultSetTimout");function f(){throw new Error("clearTimeout has not been defined")}t(f,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?a=setTimeout:a=u}catch{a=u}try{typeof clearTimeout=="function"?l=clearTimeout:l=f}catch{l=f}}();function h(_){if(a===setTimeout)return setTimeout(_,0);if((a===u||!a)&&setTimeout)return a=setTimeout,setTimeout(_,0);try{return a(_,0)}catch{try{return a.call(null,_,0)}catch{return a.call(this,_,0)}}}t(h,"runTimeout");function v(_){if(l===clearTimeout)return clearTimeout(_);if((l===f||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(_);try{return l(_)}catch{try{return l.call(null,_)}catch{return l.call(this,_)}}}t(v,"runClearTimeout");var c=[],d=!1,g,p=-1;function b(){!d||!g||(d=!1,g.length?c=g.concat(c):p=-1,c.length&&m())}t(b,"cleanUpNextTick");function m(){if(!d){var _=h(b);d=!0;for(var M=c.length;M;){for(g=c,c=[];++p<M;)g&&g[p].run();p=-1,M=c.length}g=null,d=!1,v(_)}}t(m,"drainQueue"),o.nextTick=function(_){var M=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)M[w-1]=arguments[w];c.push(new y(_,M)),c.length===1&&!d&&h(m)};function y(_,M){this.fun=_,this.array=M}t(y,"Item"),y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function T(){}t(T,"noop"),o.on=T,o.addListener=T,o.once=T,o.off=T,o.removeListener=T,o.removeAllListeners=T,o.emit=T,o.prependListener=T,o.prependOnceListener=T,o.listeners=function(_){return[]},o.binding=function(_){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(_){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],6:[function(n,i,s){i.exports={alpha_shape:n("alpha-shape"),convex_hull:n("convex-hull"),delaunay_triangulate:n("delaunay-triangulate"),gl_cone3d:n("gl-cone3d"),gl_error3d:n("gl-error3d"),gl_heatmap2d:n("gl-heatmap2d"),gl_line3d:n("gl-line3d"),gl_mesh3d:n("gl-mesh3d"),gl_plot2d:n("gl-plot2d"),gl_plot3d:n("gl-plot3d"),gl_pointcloud2d:n("gl-pointcloud2d"),gl_scatter3d:n("gl-scatter3d"),gl_select_box:n("gl-select-box"),gl_spikes2d:n("gl-spikes2d"),gl_streamtube3d:n("gl-streamtube3d"),gl_surface3d:n("gl-surface3d"),ndarray:n("ndarray"),ndarray_linear_interpolate:n("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(n,i,s){i.exports=h;var o=n("turntable-camera-controller"),a=n("orbit-camera-controller"),l=n("matrix-camera-controller");function u(v,c){this._controllerNames=Object.keys(v),this._controllerList=this._controllerNames.map(function(d){return v[d]}),this._mode=c,this._active=v[c],this._active||(this._mode="turntable",this._active=v.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}t(u,"ViewController");var f=u.prototype;f.flush=function(v){for(var c=this._controllerList,d=0;d<c.length;++d)c[d].flush(v)},f.idle=function(v){for(var c=this._controllerList,d=0;d<c.length;++d)c[d].idle(v)},f.lookAt=function(v,c,d,g){for(var p=this._controllerList,b=0;b<p.length;++b)p[b].lookAt(v,c,d,g)},f.rotate=function(v,c,d,g){for(var p=this._controllerList,b=0;b<p.length;++b)p[b].rotate(v,c,d,g)},f.pan=function(v,c,d,g){for(var p=this._controllerList,b=0;b<p.length;++b)p[b].pan(v,c,d,g)},f.translate=function(v,c,d,g){for(var p=this._controllerList,b=0;b<p.length;++b)p[b].translate(v,c,d,g)},f.setMatrix=function(v,c){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].setMatrix(v,c)},f.setDistanceLimits=function(v,c){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].setDistanceLimits(v,c)},f.setDistance=function(v,c){for(var d=this._controllerList,g=0;g<d.length;++g)d[g].setDistance(v,c)},f.recalcMatrix=function(v){this._active.recalcMatrix(v)},f.getDistance=function(v){return this._active.getDistance(v)},f.getDistanceLimits=function(v){return this._active.getDistanceLimits(v)},f.lastT=function(){return this._active.lastT()},f.setMode=function(v){if(v!==this._mode){var c=this._controllerNames.indexOf(v);if(!(c<0)){var d=this._active,g=this._controllerList[c],p=Math.max(d.lastT(),g.lastT());d.recalcMatrix(p),g.setMatrix(p,d.computedMatrix),this._active=g,this._mode=v,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},f.getMode=function(){return this._mode};function h(v){v=v||{};var c=v.eye||[0,0,1],d=v.center||[0,0,0],g=v.up||[0,1,0],p=v.distanceLimits||[0,1/0],b=v.mode||"turntable",m=o(),y=a(),T=l();return m.setDistanceLimits(p[0],p[1]),m.lookAt(0,c,d,g),y.setDistanceLimits(p[0],p[1]),y.lookAt(0,c,d,g),T.setDistanceLimits(p[0],p[1]),T.lookAt(0,c,d,g),new u({turntable:m,orbit:y,matrix:T},b)}t(h,"createViewController")},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(n,i,s){var o=typeof WeakMap>"u"?n("weak-map"):WeakMap,a=n("gl-buffer"),l=n("gl-vao"),u=new o;function f(h){var v=u.get(h),c=v&&(v._triangleBuffer.handle||v._triangleBuffer.buffer);if(!c||!h.isBuffer(c)){var d=a(h,new Float32Array([-1,-1,-1,4,4,-1]));v=l(h,[{buffer:d,type:h.FLOAT,size:2}]),v._triangleBuffer=d,u.set(h,v)}v.bind(),h.drawArrays(h.TRIANGLES,0,3),v.unbind()}t(f,"createABigTriangle"),i.exports=f},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(n,i,s){var o=n("pad-left");i.exports=a;function a(l,u,f){u=typeof u=="number"?u:1,f=f||": ";var h=l.split(/\r?\n/),v=String(h.length+u-1).length;return h.map(function(c,d){var g=d+u,p=String(g).length,b=o(g,v-p);return b+f+c}).join(`
`)}t(a,"addLineNumbers")},{"pad-left":264}],10:[function(n,i,s){i.exports=l;var o=n("robust-orientation");function a(u,f){for(var h=new Array(f+1),v=0;v<u.length;++v)h[v]=u[v];for(var v=0;v<=u.length;++v){for(var c=u.length;c<=f;++c){for(var d=new Array(f),g=0;g<f;++g)d[g]=Math.pow(c+1-v,g);h[c]=d}var p=o.apply(void 0,h);if(p)return!0}return!1}t(a,"linearlyIndependent");function l(u){var f=u.length;if(f===0)return[];if(f===1)return[0];for(var h=u[0].length,v=[u[0]],c=[0],d=1;d<f;++d){if(v.push(u[d]),!a(v,h)){v.pop();continue}if(c.push(d),c.length===h+1)return c}return c}t(l,"affineHull")},{"robust-orientation":284}],11:[function(n,i,s){i.exports=l;var o=n("delaunay-triangulate"),a=n("circumradius");function l(u,f){return o(f).filter(function(h){for(var v=new Array(h.length),c=0;c<h.length;++c)v[c]=f[h[c]];return a(v)*u<1})}t(l,"alphaComplex")},{circumradius:49,"delaunay-triangulate":63}],12:[function(n,i,s){i.exports=l;var o=n("alpha-complex"),a=n("simplicial-complex-boundary");function l(u,f){return a(o(u,f))}t(l,"alphaShape")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(n,i,s){i.exports=t(function(a){return atob(a)},"_atob")},{}],14:[function(n,i,s){i.exports=l;var o=n("robust-linear-solve");function a(u){for(var f=0,h=0;h<u.length;++h)f+=u[h];return f}t(a,"reduce");function l(u,f){for(var h=f.length,v=new Array(h+1),c=0;c<h;++c){for(var d=new Array(h+1),g=0;g<=h;++g)d[g]=u[g][c];v[c]=d}v[h]=new Array(h+1);for(var c=0;c<=h;++c)v[h][c]=1;for(var p=new Array(h+1),c=0;c<h;++c)p[c]=f[c];p[h]=1;var b=o(v,p),m=a(b[h+1]);m===0&&(m=1);for(var y=new Array(h+1),c=0;c<=h;++c)y[c]=a(b[c])/m;return y}t(l,"barycentric")},{"robust-linear-solve":283}],15:[function(n,i,s){var o=n("./lib/rationalize");i.exports=a;function a(l,u){return o(l[0].mul(u[1]).add(u[0].mul(l[1])),l[1].mul(u[1]))}t(a,"add")},{"./lib/rationalize":25}],16:[function(n,i,s){i.exports=o;function o(a,l){return a[0].mul(l[1]).cmp(l[0].mul(a[1]))}t(o,"cmp")},{}],17:[function(n,i,s){var o=n("./lib/rationalize");i.exports=a;function a(l,u){return o(l[0].mul(u[1]),l[1].mul(u[0]))}t(a,"div")},{"./lib/rationalize":25}],18:[function(n,i,s){var o=n("./is-rat"),a=n("./lib/is-bn"),l=n("./lib/num-to-bn"),u=n("./lib/str-to-bn"),f=n("./lib/rationalize"),h=n("./div");i.exports=v;function v(c,d){if(o(c))return d?h(c,v(d)):[c[0].clone(),c[1].clone()];var g=0,p,b;if(a(c))p=c.clone();else if(typeof c=="string")p=u(c);else{if(c===0)return[l(0),l(1)];if(c===Math.floor(c))p=l(c);else{for(;c!==Math.floor(c);)c=c*Math.pow(2,256),g-=256;p=l(c)}}if(o(d))p.mul(d[1]),b=d[0].clone();else if(a(d))b=d.clone();else if(typeof d=="string")b=u(d);else if(!d)b=l(1);else if(d===Math.floor(d))b=l(d);else{for(;d!==Math.floor(d);)d=d*Math.pow(2,256),g+=256;b=l(d)}return g>0?p=p.ushln(g):g<0&&(b=b.ushln(-g)),f(p,b)}t(v,"makeRational")},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(n,i,s){var o=n("./lib/is-bn");i.exports=a;function a(l){return Array.isArray(l)&&l.length===2&&o(l[0])&&o(l[1])}t(a,"isRat")},{"./lib/is-bn":23}],20:[function(n,i,s){var o=n("bn.js");i.exports=a;function a(l){return l.cmp(new o(0))}t(a,"sign")},{"bn.js":33}],21:[function(n,i,s){var o=n("./bn-sign");i.exports=a;function a(l){var u=l.length,f=l.words,h=0;if(u===1)h=f[0];else if(u===2)h=f[0]+f[1]*67108864;else for(var v=0;v<u;v++){var c=f[v];h+=c*Math.pow(67108864,v)}return o(l)*h}t(a,"bn2num")},{"./bn-sign":20}],22:[function(n,i,s){var o=n("double-bits"),a=n("bit-twiddle").countTrailingZeros;i.exports=l;function l(u){var f=a(o.lo(u));if(f<32)return f;var h=a(o.hi(u));return h>20?52:h+32}t(l,"ctzNumber")},{"bit-twiddle":32,"double-bits":64}],23:[function(n,i,s){n("bn.js"),i.exports=o;function o(a){return a&&typeof a=="object"&&Boolean(a.words)}t(o,"isBN")},{"bn.js":33}],24:[function(n,i,s){var o=n("bn.js"),a=n("double-bits");i.exports=l;function l(u){var f=a.exponent(u);return f<52?new o(u):new o(u*Math.pow(2,52-f)).ushln(f-52)}t(l,"num2bn")},{"bn.js":33,"double-bits":64}],25:[function(n,i,s){var o=n("./num-to-bn"),a=n("./bn-sign");i.exports=l;function l(u,f){var h=a(u),v=a(f);if(h===0)return[o(0),o(1)];if(v===0)return[o(0),o(0)];v<0&&(u=u.neg(),f=f.neg());var c=u.gcd(f);return c.cmpn(1)?[u.div(c),f.div(c)]:[u,f]}t(l,"rationalize")},{"./bn-sign":20,"./num-to-bn":24}],26:[function(n,i,s){var o=n("bn.js");i.exports=a;function a(l){return new o(l)}t(a,"str2BN")},{"bn.js":33}],27:[function(n,i,s){var o=n("./lib/rationalize");i.exports=a;function a(l,u){return o(l[0].mul(u[0]),l[1].mul(u[1]))}t(a,"mul")},{"./lib/rationalize":25}],28:[function(n,i,s){var o=n("./lib/bn-sign");i.exports=a;function a(l){return o(l[0])*o(l[1])}t(a,"sign")},{"./lib/bn-sign":20}],29:[function(n,i,s){var o=n("./lib/rationalize");i.exports=a;function a(l,u){return o(l[0].mul(u[1]).sub(l[1].mul(u[0])),l[1].mul(u[1]))}t(a,"sub")},{"./lib/rationalize":25}],30:[function(n,i,s){var o=n("./lib/bn-to-num"),a=n("./lib/ctz");i.exports=l;function l(u){var f=u[0],h=u[1];if(f.cmpn(0)===0)return 0;var v=f.abs().divmod(h.abs()),c=v.div,d=o(c),g=v.mod,p=f.negative!==h.negative?-1:1;if(g.cmpn(0)===0)return p*d;if(d){var b=a(d)+4,m=o(g.ushln(b).divRound(h));return p*(d+m*Math.pow(2,-b))}else{var y=h.bitLength()-g.bitLength()+53,m=o(g.ushln(y).divRound(h));return y<1023?p*m*Math.pow(2,-y):(m*=Math.pow(2,-1023),p*m*Math.pow(2,1023-y))}}t(l,"roundRat")},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(n,i,s){function o(v,c,d,g,p){for(var b=p+1;g<=p;){var m=g+p>>>1,y=v[m],T=d!==void 0?d(y,c):y-c;T>=0?(b=m,p=m-1):g=m+1}return b}t(o,"ge");function a(v,c,d,g,p){for(var b=p+1;g<=p;){var m=g+p>>>1,y=v[m],T=d!==void 0?d(y,c):y-c;T>0?(b=m,p=m-1):g=m+1}return b}t(a,"gt");function l(v,c,d,g,p){for(var b=g-1;g<=p;){var m=g+p>>>1,y=v[m],T=d!==void 0?d(y,c):y-c;T<0?(b=m,g=m+1):p=m-1}return b}t(l,"lt");function u(v,c,d,g,p){for(var b=g-1;g<=p;){var m=g+p>>>1,y=v[m],T=d!==void 0?d(y,c):y-c;T<=0?(b=m,g=m+1):p=m-1}return b}t(u,"le");function f(v,c,d,g,p){for(;g<=p;){var b=g+p>>>1,m=v[b],y=d!==void 0?d(m,c):m-c;if(y===0)return b;y<=0?g=b+1:p=b-1}return-1}t(f,"eq");function h(v,c,d,g,p,b){return typeof d=="function"?b(v,c,d,g===void 0?0:g|0,p===void 0?v.length-1:p|0):b(v,c,void 0,d===void 0?0:d|0,g===void 0?v.length-1:g|0)}t(h,"norm"),i.exports={ge:function(v,c,d,g,p){return h(v,c,d,g,p,o)},gt:function(v,c,d,g,p){return h(v,c,d,g,p,a)},lt:function(v,c,d,g,p){return h(v,c,d,g,p,l)},le:function(v,c,d,g,p){return h(v,c,d,g,p,u)},eq:function(v,c,d,g,p){return h(v,c,d,g,p,f)}}},{}],32:[function(n,i,s){var o=32;s.INT_BITS=o,s.INT_MAX=2147483647,s.INT_MIN=-1<<o-1,s.sign=function(u){return(u>0)-(u<0)},s.abs=function(u){var f=u>>o-1;return(u^f)-f},s.min=function(u,f){return f^(u^f)&-(u<f)},s.max=function(u,f){return u^(u^f)&-(u<f)},s.isPow2=function(u){return!(u&u-1)&&!!u},s.log2=function(u){var f,h;return f=(u>65535)<<4,u>>>=f,h=(u>255)<<3,u>>>=h,f|=h,h=(u>15)<<2,u>>>=h,f|=h,h=(u>3)<<1,u>>>=h,f|=h,f|u>>1},s.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},s.popCount=function(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),(u+(u>>>4)&252645135)*16843009>>>24};function a(u){var f=32;return u&=-u,u&&f--,u&65535&&(f-=16),u&16711935&&(f-=8),u&252645135&&(f-=4),u&858993459&&(f-=2),u&1431655765&&(f-=1),f}t(a,"countTrailingZeros"),s.countTrailingZeros=a,s.nextPow2=function(u){return u+=u===0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1},s.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u-(u>>>1)},s.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,u&=15,27030>>>u&1};var l=new Array(256);(function(u){for(var f=0;f<256;++f){var h=f,v=f,c=7;for(h>>>=1;h;h>>>=1)v<<=1,v|=h&1,--c;u[f]=v<<c&255}})(l),s.reverse=function(u){return l[u&255]<<24|l[u>>>8&255]<<16|l[u>>>16&255]<<8|l[u>>>24&255]},s.interleave2=function(u,f){return u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,u|f<<1},s.deinterleave2=function(u,f){return u=u>>>f&1431655765,u=(u|u>>>1)&858993459,u=(u|u>>>2)&252645135,u=(u|u>>>4)&16711935,u=(u|u>>>16)&65535,u<<16>>16},s.interleave3=function(u,f,h){return u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,u|=f<<1,h&=1023,h=(h|h<<16)&4278190335,h=(h|h<<8)&251719695,h=(h|h<<4)&3272356035,h=(h|h<<2)&1227133513,u|h<<2},s.deinterleave3=function(u,f){return u=u>>>f&1227133513,u=(u|u>>>2)&3272356035,u=(u|u>>>4)&251719695,u=(u|u>>>8)&4278190335,u=(u|u>>>16)&1023,u<<22>>22},s.nextCombination=function(u){var f=u|u-1;return f+1|(~f&-~f)-1>>>a(u)+1}},{}],33:[function(n,i,s){(function(o,a){function l(z,R){if(!z)throw new Error(R||"Assertion failed")}t(l,"assert");function u(z,R){z.super_=R;var F=t(function(){},"TempCtor");F.prototype=R.prototype,z.prototype=new F,z.prototype.constructor=z}t(u,"inherits");function f(z,R,F){if(f.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,z!==null&&((R==="le"||R==="be")&&(F=R,R=10),this._init(z||0,R||10,F||"be"))}t(f,"BN"),typeof o=="object"?o.exports=f:a.BN=f,f.BN=f,f.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=n("buffer").Buffer}catch{}f.isBN=t(function(R){return R instanceof f?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===f.wordSize&&Array.isArray(R.words)},"isBN"),f.max=t(function(R,F){return R.cmp(F)>0?R:F},"max"),f.min=t(function(R,F){return R.cmp(F)<0?R:F},"min"),f.prototype._init=t(function(R,F,O){if(typeof R=="number")return this._initNumber(R,F,O);if(typeof R=="object")return this._initArray(R,F,O);F==="hex"&&(F=16),l(F===(F|0)&&F>=2&&F<=36),R=R.toString().replace(/\s+/g,"");var q=0;R[0]==="-"&&(q++,this.negative=1),q<R.length&&(F===16?this._parseHex(R,q,O):(this._parseBase(R,F,q),O==="le"&&this._initArray(this.toArray(),F,O)))},"init"),f.prototype._initNumber=t(function(R,F,O){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(l(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),F,O)},"_initNumber"),f.prototype._initArray=t(function(R,F,O){if(l(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var q=0;q<this.length;q++)this.words[q]=0;var H,j,X=0;if(O==="be")for(q=R.length-1,H=0;q>=0;q-=3)j=R[q]|R[q-1]<<8|R[q-2]<<16,this.words[H]|=j<<X&67108863,this.words[H+1]=j>>>26-X&67108863,X+=24,X>=26&&(X-=26,H++);else if(O==="le")for(q=0,H=0;q<R.length;q+=3)j=R[q]|R[q+1]<<8|R[q+2]<<16,this.words[H]|=j<<X&67108863,this.words[H+1]=j>>>26-X&67108863,X+=24,X>=26&&(X-=26,H++);return this.strip()},"_initArray");function v(z,R){var F=z.charCodeAt(R);return F>=65&&F<=70?F-55:F>=97&&F<=102?F-87:F-48&15}t(v,"parseHex4Bits");function c(z,R,F){var O=v(z,F);return F-1>=R&&(O|=v(z,F-1)<<4),O}t(c,"parseHexByte"),f.prototype._parseHex=t(function(R,F,O){this.length=Math.ceil((R.length-F)/6),this.words=new Array(this.length);for(var q=0;q<this.length;q++)this.words[q]=0;var H=0,j=0,X;if(O==="be")for(q=R.length-1;q>=F;q-=2)X=c(R,F,q)<<H,this.words[j]|=X&67108863,H>=18?(H-=18,j+=1,this.words[j]|=X>>>26):H+=8;else{var G=R.length-F;for(q=G%2===0?F+1:F;q<R.length;q+=2)X=c(R,F,q)<<H,this.words[j]|=X&67108863,H>=18?(H-=18,j+=1,this.words[j]|=X>>>26):H+=8}this.strip()},"_parseHex");function d(z,R,F,O){for(var q=0,H=Math.min(z.length,F),j=R;j<H;j++){var X=z.charCodeAt(j)-48;q*=O,X>=49?q+=X-49+10:X>=17?q+=X-17+10:q+=X}return q}t(d,"parseBase"),f.prototype._parseBase=t(function(R,F,O){this.words=[0],this.length=1;for(var q=0,H=1;H<=67108863;H*=F)q++;q--,H=H/F|0;for(var j=R.length-O,X=j%q,G=Math.min(j,j-X)+O,$=0,te=O;te<G;te+=q)$=d(R,te,te+q,F),this.imuln(H),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($);if(X!==0){var ee=1;for($=d(R,te,R.length,F),te=0;te<X;te++)ee*=F;this.imuln(ee),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($)}this.strip()},"_parseBase"),f.prototype.copy=t(function(R){R.words=new Array(this.length);for(var F=0;F<this.length;F++)R.words[F]=this.words[F];R.length=this.length,R.negative=this.negative,R.red=this.red},"copy"),f.prototype.clone=t(function(){var R=new f(null);return this.copy(R),R},"clone"),f.prototype._expand=t(function(R){for(;this.length<R;)this.words[this.length++]=0;return this},"_expand"),f.prototype.strip=t(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),f.prototype._normSign=t(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),f.prototype.inspect=t(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=t(function(R,F){R=R||10,F=F|0||1;var O;if(R===16||R==="hex"){O="";for(var q=0,H=0,j=0;j<this.length;j++){var X=this.words[j],G=((X<<q|H)&16777215).toString(16);H=X>>>24-q&16777215,H!==0||j!==this.length-1?O=g[6-G.length]+G+O:O=G+O,q+=2,q>=26&&(q-=26,j--)}for(H!==0&&(O=H.toString(16)+O);O.length%F!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(R===(R|0)&&R>=2&&R<=36){var $=p[R],te=b[R];O="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var ie=ee.modn(te).toString(R);ee=ee.idivn(te),ee.isZero()?O=ie+O:O=g[$-ie.length]+ie+O}for(this.isZero()&&(O="0"+O);O.length%F!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}l(!1,"Base should be between 2 and 36")},"toString"),f.prototype.toNumber=t(function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&l(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},"toNumber"),f.prototype.toJSON=t(function(){return this.toString(16)},"toJSON"),f.prototype.toBuffer=t(function(R,F){return l(typeof h<"u"),this.toArrayLike(h,R,F)},"toBuffer"),f.prototype.toArray=t(function(R,F){return this.toArrayLike(Array,R,F)},"toArray"),f.prototype.toArrayLike=t(function(R,F,O){var q=this.byteLength(),H=O||Math.max(1,q);l(q<=H,"byte array longer than desired length"),l(H>0,"Requested array length <= 0"),this.strip();var j=F==="le",X=new R(H),G,$,te=this.clone();if(j){for($=0;!te.isZero();$++)G=te.andln(255),te.iushrn(8),X[$]=G;for(;$<H;$++)X[$]=0}else{for($=0;$<H-q;$++)X[$]=0;for($=0;!te.isZero();$++)G=te.andln(255),te.iushrn(8),X[H-$-1]=G}return X},"toArrayLike"),Math.clz32?f.prototype._countBits=t(function(R){return 32-Math.clz32(R)},"_countBits"):f.prototype._countBits=t(function(R){var F=R,O=0;return F>=4096&&(O+=13,F>>>=13),F>=64&&(O+=7,F>>>=7),F>=8&&(O+=4,F>>>=4),F>=2&&(O+=2,F>>>=2),O+F},"_countBits"),f.prototype._zeroBits=t(function(R){if(R===0)return 26;var F=R,O=0;return(F&8191)===0&&(O+=13,F>>>=13),(F&127)===0&&(O+=7,F>>>=7),(F&15)===0&&(O+=4,F>>>=4),(F&3)===0&&(O+=2,F>>>=2),(F&1)===0&&O++,O},"_zeroBits"),f.prototype.bitLength=t(function(){var R=this.words[this.length-1],F=this._countBits(R);return(this.length-1)*26+F},"bitLength");function m(z){for(var R=new Array(z.bitLength()),F=0;F<R.length;F++){var O=F/26|0,q=F%26;R[F]=(z.words[O]&1<<q)>>>q}return R}t(m,"toBitArray"),f.prototype.zeroBits=t(function(){if(this.isZero())return 0;for(var R=0,F=0;F<this.length;F++){var O=this._zeroBits(this.words[F]);if(R+=O,O!==26)break}return R},"zeroBits"),f.prototype.byteLength=t(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),f.prototype.toTwos=t(function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},"toTwos"),f.prototype.fromTwos=t(function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},"fromTwos"),f.prototype.isNeg=t(function(){return this.negative!==0},"isNeg"),f.prototype.neg=t(function(){return this.clone().ineg()},"neg"),f.prototype.ineg=t(function(){return this.isZero()||(this.negative^=1),this},"ineg"),f.prototype.iuor=t(function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var F=0;F<R.length;F++)this.words[F]=this.words[F]|R.words[F];return this.strip()},"iuor"),f.prototype.ior=t(function(R){return l((this.negative|R.negative)===0),this.iuor(R)},"ior"),f.prototype.or=t(function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},"or"),f.prototype.uor=t(function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},"uor"),f.prototype.iuand=t(function(R){var F;this.length>R.length?F=R:F=this;for(var O=0;O<F.length;O++)this.words[O]=this.words[O]&R.words[O];return this.length=F.length,this.strip()},"iuand"),f.prototype.iand=t(function(R){return l((this.negative|R.negative)===0),this.iuand(R)},"iand"),f.prototype.and=t(function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},"and"),f.prototype.uand=t(function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},"uand"),f.prototype.iuxor=t(function(R){var F,O;this.length>R.length?(F=this,O=R):(F=R,O=this);for(var q=0;q<O.length;q++)this.words[q]=F.words[q]^O.words[q];if(this!==F)for(;q<F.length;q++)this.words[q]=F.words[q];return this.length=F.length,this.strip()},"iuxor"),f.prototype.ixor=t(function(R){return l((this.negative|R.negative)===0),this.iuxor(R)},"ixor"),f.prototype.xor=t(function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},"xor"),f.prototype.uxor=t(function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},"uxor"),f.prototype.inotn=t(function(R){l(typeof R=="number"&&R>=0);var F=Math.ceil(R/26)|0,O=R%26;this._expand(F),O>0&&F--;for(var q=0;q<F;q++)this.words[q]=~this.words[q]&67108863;return O>0&&(this.words[q]=~this.words[q]&67108863>>26-O),this.strip()},"inotn"),f.prototype.notn=t(function(R){return this.clone().inotn(R)},"notn"),f.prototype.setn=t(function(R,F){l(typeof R=="number"&&R>=0);var O=R/26|0,q=R%26;return this._expand(O+1),F?this.words[O]=this.words[O]|1<<q:this.words[O]=this.words[O]&~(1<<q),this.strip()},"setn"),f.prototype.iadd=t(function(R){var F;if(this.negative!==0&&R.negative===0)return this.negative=0,F=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,F=this.isub(R),R.negative=1,F._normSign();var O,q;this.length>R.length?(O=this,q=R):(O=R,q=this);for(var H=0,j=0;j<q.length;j++)F=(O.words[j]|0)+(q.words[j]|0)+H,this.words[j]=F&67108863,H=F>>>26;for(;H!==0&&j<O.length;j++)F=(O.words[j]|0)+H,this.words[j]=F&67108863,H=F>>>26;if(this.length=O.length,H!==0)this.words[this.length]=H,this.length++;else if(O!==this)for(;j<O.length;j++)this.words[j]=O.words[j];return this},"iadd"),f.prototype.add=t(function(R){var F;return R.negative!==0&&this.negative===0?(R.negative=0,F=this.sub(R),R.negative^=1,F):R.negative===0&&this.negative!==0?(this.negative=0,F=R.sub(this),this.negative=1,F):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},"add"),f.prototype.isub=t(function(R){if(R.negative!==0){R.negative=0;var F=this.iadd(R);return R.negative=1,F._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var O=this.cmp(R);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var q,H;O>0?(q=this,H=R):(q=R,H=this);for(var j=0,X=0;X<H.length;X++)F=(q.words[X]|0)-(H.words[X]|0)+j,j=F>>26,this.words[X]=F&67108863;for(;j!==0&&X<q.length;X++)F=(q.words[X]|0)+j,j=F>>26,this.words[X]=F&67108863;if(j===0&&X<q.length&&q!==this)for(;X<q.length;X++)this.words[X]=q.words[X];return this.length=Math.max(this.length,X),q!==this&&(this.negative=1),this.strip()},"isub"),f.prototype.sub=t(function(R){return this.clone().isub(R)},"sub");function y(z,R,F){F.negative=R.negative^z.negative;var O=z.length+R.length|0;F.length=O,O=O-1|0;var q=z.words[0]|0,H=R.words[0]|0,j=q*H,X=j&67108863,G=j/67108864|0;F.words[0]=X;for(var $=1;$<O;$++){for(var te=G>>>26,ee=G&67108863,ie=Math.min($,R.length-1),se=Math.max(0,$-z.length+1);se<=ie;se++){var W=$-se|0;q=z.words[W]|0,H=R.words[se]|0,j=q*H+ee,te+=j/67108864|0,ee=j&67108863}F.words[$]=ee|0,G=te|0}return G!==0?F.words[$]=G|0:F.length--,F.strip()}t(y,"smallMulTo");var T=t(function(R,F,O){var q=R.words,H=F.words,j=O.words,X=0,G,$,te,ee=q[0]|0,ie=ee&8191,se=ee>>>13,W=q[1]|0,ne=W&8191,he=W>>>13,re=q[2]|0,ae=re&8191,fe=re>>>13,ce=q[3]|0,xe=ce&8191,Te=ce>>>13,me=q[4]|0,pe=me&8191,oe=me>>>13,de=q[5]|0,ye=de&8191,we=de>>>13,Ee=q[6]|0,De=Ee&8191,Fe=Ee>>>13,qe=q[7]|0,Je=qe&8191,Ge=qe>>>13,et=q[8]|0,Ue=et&8191,Ye=et>>>13,$e=q[9]|0,Ct=$e&8191,It=$e>>>13,Vt=H[0]|0,$t=Vt&8191,Gt=Vt>>>13,Jt=H[1]|0,kt=Jt&8191,ft=Jt>>>13,zt=H[2]|0,Pt=zt&8191,Et=zt>>>13,Wt=H[3]|0,ze=Wt&8191,tt=Wt>>>13,at=H[4]|0,vt=at&8191,_t=at>>>13,Rt=H[5]|0,nr=Rt&8191,ir=Rt>>>13,ur=H[6]|0,qt=ur&8191,hr=ur>>>13,Fr=H[7]|0,Br=Fr&8191,na=Fr>>>13,Ia=H[8]|0,ea=Ia&8191,Er=Ia>>>13,dn=H[9]|0,ya=dn&8191,Hr=dn>>>13;O.negative=R.negative^F.negative,O.length=19,G=Math.imul(ie,$t),$=Math.imul(ie,Gt),$=$+Math.imul(se,$t)|0,te=Math.imul(se,Gt);var un=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(un>>>26)|0,un&=67108863,G=Math.imul(ne,$t),$=Math.imul(ne,Gt),$=$+Math.imul(he,$t)|0,te=Math.imul(he,Gt),G=G+Math.imul(ie,kt)|0,$=$+Math.imul(ie,ft)|0,$=$+Math.imul(se,kt)|0,te=te+Math.imul(se,ft)|0;var Ea=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(Ea>>>26)|0,Ea&=67108863,G=Math.imul(ae,$t),$=Math.imul(ae,Gt),$=$+Math.imul(fe,$t)|0,te=Math.imul(fe,Gt),G=G+Math.imul(ne,kt)|0,$=$+Math.imul(ne,ft)|0,$=$+Math.imul(he,kt)|0,te=te+Math.imul(he,ft)|0,G=G+Math.imul(ie,Pt)|0,$=$+Math.imul(ie,Et)|0,$=$+Math.imul(se,Pt)|0,te=te+Math.imul(se,Et)|0;var nt=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(nt>>>26)|0,nt&=67108863,G=Math.imul(xe,$t),$=Math.imul(xe,Gt),$=$+Math.imul(Te,$t)|0,te=Math.imul(Te,Gt),G=G+Math.imul(ae,kt)|0,$=$+Math.imul(ae,ft)|0,$=$+Math.imul(fe,kt)|0,te=te+Math.imul(fe,ft)|0,G=G+Math.imul(ne,Pt)|0,$=$+Math.imul(ne,Et)|0,$=$+Math.imul(he,Pt)|0,te=te+Math.imul(he,Et)|0,G=G+Math.imul(ie,ze)|0,$=$+Math.imul(ie,tt)|0,$=$+Math.imul(se,ze)|0,te=te+Math.imul(se,tt)|0;var He=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(He>>>26)|0,He&=67108863,G=Math.imul(pe,$t),$=Math.imul(pe,Gt),$=$+Math.imul(oe,$t)|0,te=Math.imul(oe,Gt),G=G+Math.imul(xe,kt)|0,$=$+Math.imul(xe,ft)|0,$=$+Math.imul(Te,kt)|0,te=te+Math.imul(Te,ft)|0,G=G+Math.imul(ae,Pt)|0,$=$+Math.imul(ae,Et)|0,$=$+Math.imul(fe,Pt)|0,te=te+Math.imul(fe,Et)|0,G=G+Math.imul(ne,ze)|0,$=$+Math.imul(ne,tt)|0,$=$+Math.imul(he,ze)|0,te=te+Math.imul(he,tt)|0,G=G+Math.imul(ie,vt)|0,$=$+Math.imul(ie,_t)|0,$=$+Math.imul(se,vt)|0,te=te+Math.imul(se,_t)|0;var Qe=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,G=Math.imul(ye,$t),$=Math.imul(ye,Gt),$=$+Math.imul(we,$t)|0,te=Math.imul(we,Gt),G=G+Math.imul(pe,kt)|0,$=$+Math.imul(pe,ft)|0,$=$+Math.imul(oe,kt)|0,te=te+Math.imul(oe,ft)|0,G=G+Math.imul(xe,Pt)|0,$=$+Math.imul(xe,Et)|0,$=$+Math.imul(Te,Pt)|0,te=te+Math.imul(Te,Et)|0,G=G+Math.imul(ae,ze)|0,$=$+Math.imul(ae,tt)|0,$=$+Math.imul(fe,ze)|0,te=te+Math.imul(fe,tt)|0,G=G+Math.imul(ne,vt)|0,$=$+Math.imul(ne,_t)|0,$=$+Math.imul(he,vt)|0,te=te+Math.imul(he,_t)|0,G=G+Math.imul(ie,nr)|0,$=$+Math.imul(ie,ir)|0,$=$+Math.imul(se,nr)|0,te=te+Math.imul(se,ir)|0;var ot=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(ot>>>26)|0,ot&=67108863,G=Math.imul(De,$t),$=Math.imul(De,Gt),$=$+Math.imul(Fe,$t)|0,te=Math.imul(Fe,Gt),G=G+Math.imul(ye,kt)|0,$=$+Math.imul(ye,ft)|0,$=$+Math.imul(we,kt)|0,te=te+Math.imul(we,ft)|0,G=G+Math.imul(pe,Pt)|0,$=$+Math.imul(pe,Et)|0,$=$+Math.imul(oe,Pt)|0,te=te+Math.imul(oe,Et)|0,G=G+Math.imul(xe,ze)|0,$=$+Math.imul(xe,tt)|0,$=$+Math.imul(Te,ze)|0,te=te+Math.imul(Te,tt)|0,G=G+Math.imul(ae,vt)|0,$=$+Math.imul(ae,_t)|0,$=$+Math.imul(fe,vt)|0,te=te+Math.imul(fe,_t)|0,G=G+Math.imul(ne,nr)|0,$=$+Math.imul(ne,ir)|0,$=$+Math.imul(he,nr)|0,te=te+Math.imul(he,ir)|0,G=G+Math.imul(ie,qt)|0,$=$+Math.imul(ie,hr)|0,$=$+Math.imul(se,qt)|0,te=te+Math.imul(se,hr)|0;var Ae=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,G=Math.imul(Je,$t),$=Math.imul(Je,Gt),$=$+Math.imul(Ge,$t)|0,te=Math.imul(Ge,Gt),G=G+Math.imul(De,kt)|0,$=$+Math.imul(De,ft)|0,$=$+Math.imul(Fe,kt)|0,te=te+Math.imul(Fe,ft)|0,G=G+Math.imul(ye,Pt)|0,$=$+Math.imul(ye,Et)|0,$=$+Math.imul(we,Pt)|0,te=te+Math.imul(we,Et)|0,G=G+Math.imul(pe,ze)|0,$=$+Math.imul(pe,tt)|0,$=$+Math.imul(oe,ze)|0,te=te+Math.imul(oe,tt)|0,G=G+Math.imul(xe,vt)|0,$=$+Math.imul(xe,_t)|0,$=$+Math.imul(Te,vt)|0,te=te+Math.imul(Te,_t)|0,G=G+Math.imul(ae,nr)|0,$=$+Math.imul(ae,ir)|0,$=$+Math.imul(fe,nr)|0,te=te+Math.imul(fe,ir)|0,G=G+Math.imul(ne,qt)|0,$=$+Math.imul(ne,hr)|0,$=$+Math.imul(he,qt)|0,te=te+Math.imul(he,hr)|0,G=G+Math.imul(ie,Br)|0,$=$+Math.imul(ie,na)|0,$=$+Math.imul(se,Br)|0,te=te+Math.imul(se,na)|0;var Se=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(Se>>>26)|0,Se&=67108863,G=Math.imul(Ue,$t),$=Math.imul(Ue,Gt),$=$+Math.imul(Ye,$t)|0,te=Math.imul(Ye,Gt),G=G+Math.imul(Je,kt)|0,$=$+Math.imul(Je,ft)|0,$=$+Math.imul(Ge,kt)|0,te=te+Math.imul(Ge,ft)|0,G=G+Math.imul(De,Pt)|0,$=$+Math.imul(De,Et)|0,$=$+Math.imul(Fe,Pt)|0,te=te+Math.imul(Fe,Et)|0,G=G+Math.imul(ye,ze)|0,$=$+Math.imul(ye,tt)|0,$=$+Math.imul(we,ze)|0,te=te+Math.imul(we,tt)|0,G=G+Math.imul(pe,vt)|0,$=$+Math.imul(pe,_t)|0,$=$+Math.imul(oe,vt)|0,te=te+Math.imul(oe,_t)|0,G=G+Math.imul(xe,nr)|0,$=$+Math.imul(xe,ir)|0,$=$+Math.imul(Te,nr)|0,te=te+Math.imul(Te,ir)|0,G=G+Math.imul(ae,qt)|0,$=$+Math.imul(ae,hr)|0,$=$+Math.imul(fe,qt)|0,te=te+Math.imul(fe,hr)|0,G=G+Math.imul(ne,Br)|0,$=$+Math.imul(ne,na)|0,$=$+Math.imul(he,Br)|0,te=te+Math.imul(he,na)|0,G=G+Math.imul(ie,ea)|0,$=$+Math.imul(ie,Er)|0,$=$+Math.imul(se,ea)|0,te=te+Math.imul(se,Er)|0;var je=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(je>>>26)|0,je&=67108863,G=Math.imul(Ct,$t),$=Math.imul(Ct,Gt),$=$+Math.imul(It,$t)|0,te=Math.imul(It,Gt),G=G+Math.imul(Ue,kt)|0,$=$+Math.imul(Ue,ft)|0,$=$+Math.imul(Ye,kt)|0,te=te+Math.imul(Ye,ft)|0,G=G+Math.imul(Je,Pt)|0,$=$+Math.imul(Je,Et)|0,$=$+Math.imul(Ge,Pt)|0,te=te+Math.imul(Ge,Et)|0,G=G+Math.imul(De,ze)|0,$=$+Math.imul(De,tt)|0,$=$+Math.imul(Fe,ze)|0,te=te+Math.imul(Fe,tt)|0,G=G+Math.imul(ye,vt)|0,$=$+Math.imul(ye,_t)|0,$=$+Math.imul(we,vt)|0,te=te+Math.imul(we,_t)|0,G=G+Math.imul(pe,nr)|0,$=$+Math.imul(pe,ir)|0,$=$+Math.imul(oe,nr)|0,te=te+Math.imul(oe,ir)|0,G=G+Math.imul(xe,qt)|0,$=$+Math.imul(xe,hr)|0,$=$+Math.imul(Te,qt)|0,te=te+Math.imul(Te,hr)|0,G=G+Math.imul(ae,Br)|0,$=$+Math.imul(ae,na)|0,$=$+Math.imul(fe,Br)|0,te=te+Math.imul(fe,na)|0,G=G+Math.imul(ne,ea)|0,$=$+Math.imul(ne,Er)|0,$=$+Math.imul(he,ea)|0,te=te+Math.imul(he,Er)|0,G=G+Math.imul(ie,ya)|0,$=$+Math.imul(ie,Hr)|0,$=$+Math.imul(se,ya)|0,te=te+Math.imul(se,Hr)|0;var Xe=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,G=Math.imul(Ct,kt),$=Math.imul(Ct,ft),$=$+Math.imul(It,kt)|0,te=Math.imul(It,ft),G=G+Math.imul(Ue,Pt)|0,$=$+Math.imul(Ue,Et)|0,$=$+Math.imul(Ye,Pt)|0,te=te+Math.imul(Ye,Et)|0,G=G+Math.imul(Je,ze)|0,$=$+Math.imul(Je,tt)|0,$=$+Math.imul(Ge,ze)|0,te=te+Math.imul(Ge,tt)|0,G=G+Math.imul(De,vt)|0,$=$+Math.imul(De,_t)|0,$=$+Math.imul(Fe,vt)|0,te=te+Math.imul(Fe,_t)|0,G=G+Math.imul(ye,nr)|0,$=$+Math.imul(ye,ir)|0,$=$+Math.imul(we,nr)|0,te=te+Math.imul(we,ir)|0,G=G+Math.imul(pe,qt)|0,$=$+Math.imul(pe,hr)|0,$=$+Math.imul(oe,qt)|0,te=te+Math.imul(oe,hr)|0,G=G+Math.imul(xe,Br)|0,$=$+Math.imul(xe,na)|0,$=$+Math.imul(Te,Br)|0,te=te+Math.imul(Te,na)|0,G=G+Math.imul(ae,ea)|0,$=$+Math.imul(ae,Er)|0,$=$+Math.imul(fe,ea)|0,te=te+Math.imul(fe,Er)|0,G=G+Math.imul(ne,ya)|0,$=$+Math.imul(ne,Hr)|0,$=$+Math.imul(he,ya)|0,te=te+Math.imul(he,Hr)|0;var ut=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(ut>>>26)|0,ut&=67108863,G=Math.imul(Ct,Pt),$=Math.imul(Ct,Et),$=$+Math.imul(It,Pt)|0,te=Math.imul(It,Et),G=G+Math.imul(Ue,ze)|0,$=$+Math.imul(Ue,tt)|0,$=$+Math.imul(Ye,ze)|0,te=te+Math.imul(Ye,tt)|0,G=G+Math.imul(Je,vt)|0,$=$+Math.imul(Je,_t)|0,$=$+Math.imul(Ge,vt)|0,te=te+Math.imul(Ge,_t)|0,G=G+Math.imul(De,nr)|0,$=$+Math.imul(De,ir)|0,$=$+Math.imul(Fe,nr)|0,te=te+Math.imul(Fe,ir)|0,G=G+Math.imul(ye,qt)|0,$=$+Math.imul(ye,hr)|0,$=$+Math.imul(we,qt)|0,te=te+Math.imul(we,hr)|0,G=G+Math.imul(pe,Br)|0,$=$+Math.imul(pe,na)|0,$=$+Math.imul(oe,Br)|0,te=te+Math.imul(oe,na)|0,G=G+Math.imul(xe,ea)|0,$=$+Math.imul(xe,Er)|0,$=$+Math.imul(Te,ea)|0,te=te+Math.imul(Te,Er)|0,G=G+Math.imul(ae,ya)|0,$=$+Math.imul(ae,Hr)|0,$=$+Math.imul(fe,ya)|0,te=te+Math.imul(fe,Hr)|0;var xt=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Ct,ze),$=Math.imul(Ct,tt),$=$+Math.imul(It,ze)|0,te=Math.imul(It,tt),G=G+Math.imul(Ue,vt)|0,$=$+Math.imul(Ue,_t)|0,$=$+Math.imul(Ye,vt)|0,te=te+Math.imul(Ye,_t)|0,G=G+Math.imul(Je,nr)|0,$=$+Math.imul(Je,ir)|0,$=$+Math.imul(Ge,nr)|0,te=te+Math.imul(Ge,ir)|0,G=G+Math.imul(De,qt)|0,$=$+Math.imul(De,hr)|0,$=$+Math.imul(Fe,qt)|0,te=te+Math.imul(Fe,hr)|0,G=G+Math.imul(ye,Br)|0,$=$+Math.imul(ye,na)|0,$=$+Math.imul(we,Br)|0,te=te+Math.imul(we,na)|0,G=G+Math.imul(pe,ea)|0,$=$+Math.imul(pe,Er)|0,$=$+Math.imul(oe,ea)|0,te=te+Math.imul(oe,Er)|0,G=G+Math.imul(xe,ya)|0,$=$+Math.imul(xe,Hr)|0,$=$+Math.imul(Te,ya)|0,te=te+Math.imul(Te,Hr)|0;var dt=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(dt>>>26)|0,dt&=67108863,G=Math.imul(Ct,vt),$=Math.imul(Ct,_t),$=$+Math.imul(It,vt)|0,te=Math.imul(It,_t),G=G+Math.imul(Ue,nr)|0,$=$+Math.imul(Ue,ir)|0,$=$+Math.imul(Ye,nr)|0,te=te+Math.imul(Ye,ir)|0,G=G+Math.imul(Je,qt)|0,$=$+Math.imul(Je,hr)|0,$=$+Math.imul(Ge,qt)|0,te=te+Math.imul(Ge,hr)|0,G=G+Math.imul(De,Br)|0,$=$+Math.imul(De,na)|0,$=$+Math.imul(Fe,Br)|0,te=te+Math.imul(Fe,na)|0,G=G+Math.imul(ye,ea)|0,$=$+Math.imul(ye,Er)|0,$=$+Math.imul(we,ea)|0,te=te+Math.imul(we,Er)|0,G=G+Math.imul(pe,ya)|0,$=$+Math.imul(pe,Hr)|0,$=$+Math.imul(oe,ya)|0,te=te+Math.imul(oe,Hr)|0;var Ot=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,G=Math.imul(Ct,nr),$=Math.imul(Ct,ir),$=$+Math.imul(It,nr)|0,te=Math.imul(It,ir),G=G+Math.imul(Ue,qt)|0,$=$+Math.imul(Ue,hr)|0,$=$+Math.imul(Ye,qt)|0,te=te+Math.imul(Ye,hr)|0,G=G+Math.imul(Je,Br)|0,$=$+Math.imul(Je,na)|0,$=$+Math.imul(Ge,Br)|0,te=te+Math.imul(Ge,na)|0,G=G+Math.imul(De,ea)|0,$=$+Math.imul(De,Er)|0,$=$+Math.imul(Fe,ea)|0,te=te+Math.imul(Fe,Er)|0,G=G+Math.imul(ye,ya)|0,$=$+Math.imul(ye,Hr)|0,$=$+Math.imul(we,ya)|0,te=te+Math.imul(we,Hr)|0;var Ht=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,G=Math.imul(Ct,qt),$=Math.imul(Ct,hr),$=$+Math.imul(It,qt)|0,te=Math.imul(It,hr),G=G+Math.imul(Ue,Br)|0,$=$+Math.imul(Ue,na)|0,$=$+Math.imul(Ye,Br)|0,te=te+Math.imul(Ye,na)|0,G=G+Math.imul(Je,ea)|0,$=$+Math.imul(Je,Er)|0,$=$+Math.imul(Ge,ea)|0,te=te+Math.imul(Ge,Er)|0,G=G+Math.imul(De,ya)|0,$=$+Math.imul(De,Hr)|0,$=$+Math.imul(Fe,ya)|0,te=te+Math.imul(Fe,Hr)|0;var Qt=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,G=Math.imul(Ct,Br),$=Math.imul(Ct,na),$=$+Math.imul(It,Br)|0,te=Math.imul(It,na),G=G+Math.imul(Ue,ea)|0,$=$+Math.imul(Ue,Er)|0,$=$+Math.imul(Ye,ea)|0,te=te+Math.imul(Ye,Er)|0,G=G+Math.imul(Je,ya)|0,$=$+Math.imul(Je,Hr)|0,$=$+Math.imul(Ge,ya)|0,te=te+Math.imul(Ge,Hr)|0;var mr=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(mr>>>26)|0,mr&=67108863,G=Math.imul(Ct,ea),$=Math.imul(Ct,Er),$=$+Math.imul(It,ea)|0,te=Math.imul(It,Er),G=G+Math.imul(Ue,ya)|0,$=$+Math.imul(Ue,Hr)|0,$=$+Math.imul(Ye,ya)|0,te=te+Math.imul(Ye,Hr)|0;var xr=(X+G|0)+(($&8191)<<13)|0;X=(te+($>>>13)|0)+(xr>>>26)|0,xr&=67108863,G=Math.imul(Ct,ya),$=Math.imul(Ct,Hr),$=$+Math.imul(It,ya)|0,te=Math.imul(It,Hr);var Lr=(X+G|0)+(($&8191)<<13)|0;return X=(te+($>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,j[0]=un,j[1]=Ea,j[2]=nt,j[3]=He,j[4]=Qe,j[5]=ot,j[6]=Ae,j[7]=Se,j[8]=je,j[9]=Xe,j[10]=ut,j[11]=xt,j[12]=dt,j[13]=Ot,j[14]=Ht,j[15]=Qt,j[16]=mr,j[17]=xr,j[18]=Lr,X!==0&&(j[19]=X,O.length++),O},"comb10MulTo");Math.imul||(T=y);function _(z,R,F){F.negative=R.negative^z.negative,F.length=z.length+R.length;for(var O=0,q=0,H=0;H<F.length-1;H++){var j=q;q=0;for(var X=O&67108863,G=Math.min(H,R.length-1),$=Math.max(0,H-z.length+1);$<=G;$++){var te=H-$,ee=z.words[te]|0,ie=R.words[$]|0,se=ee*ie,W=se&67108863;j=j+(se/67108864|0)|0,W=W+X|0,X=W&67108863,j=j+(W>>>26)|0,q+=j>>>26,j&=67108863}F.words[H]=X,O=j,j=q}return O!==0?F.words[H]=O:F.length--,F.strip()}t(_,"bigMulTo");function M(z,R,F){var O=new w;return O.mulp(z,R,F)}t(M,"jumboMulTo"),f.prototype.mulTo=t(function(R,F){var O,q=this.length+R.length;return this.length===10&&R.length===10?O=T(this,R,F):q<63?O=y(this,R,F):q<1024?O=_(this,R,F):O=M(this,R,F),O},"mulTo");function w(z,R){this.x=z,this.y=R}t(w,"FFTM"),w.prototype.makeRBT=t(function(R){for(var F=new Array(R),O=f.prototype._countBits(R)-1,q=0;q<R;q++)F[q]=this.revBin(q,O,R);return F},"makeRBT"),w.prototype.revBin=t(function(R,F,O){if(R===0||R===O-1)return R;for(var q=0,H=0;H<F;H++)q|=(R&1)<<F-H-1,R>>=1;return q},"revBin"),w.prototype.permute=t(function(R,F,O,q,H,j){for(var X=0;X<j;X++)q[X]=F[R[X]],H[X]=O[R[X]]},"permute"),w.prototype.transform=t(function(R,F,O,q,H,j){this.permute(j,R,F,O,q,H);for(var X=1;X<H;X<<=1)for(var G=X<<1,$=Math.cos(2*Math.PI/G),te=Math.sin(2*Math.PI/G),ee=0;ee<H;ee+=G)for(var ie=$,se=te,W=0;W<X;W++){var ne=O[ee+W],he=q[ee+W],re=O[ee+W+X],ae=q[ee+W+X],fe=ie*re-se*ae;ae=ie*ae+se*re,re=fe,O[ee+W]=ne+re,q[ee+W]=he+ae,O[ee+W+X]=ne-re,q[ee+W+X]=he-ae,W!==G&&(fe=$*ie-te*se,se=$*se+te*ie,ie=fe)}},"transform"),w.prototype.guessLen13b=t(function(R,F){var O=Math.max(F,R)|1,q=O&1,H=0;for(O=O/2|0;O;O=O>>>1)H++;return 1<<H+1+q},"guessLen13b"),w.prototype.conjugate=t(function(R,F,O){if(!(O<=1))for(var q=0;q<O/2;q++){var H=R[q];R[q]=R[O-q-1],R[O-q-1]=H,H=F[q],F[q]=-F[O-q-1],F[O-q-1]=-H}},"conjugate"),w.prototype.normalize13b=t(function(R,F){for(var O=0,q=0;q<F/2;q++){var H=Math.round(R[2*q+1]/F)*8192+Math.round(R[2*q]/F)+O;R[q]=H&67108863,H<67108864?O=0:O=H/67108864|0}return R},"normalize13b"),w.prototype.convert13b=t(function(R,F,O,q){for(var H=0,j=0;j<F;j++)H=H+(R[j]|0),O[2*j]=H&8191,H=H>>>13,O[2*j+1]=H&8191,H=H>>>13;for(j=2*F;j<q;++j)O[j]=0;l(H===0),l((H&-8192)===0)},"convert13b"),w.prototype.stub=t(function(R){for(var F=new Array(R),O=0;O<R;O++)F[O]=0;return F},"stub"),w.prototype.mulp=t(function(R,F,O){var q=2*this.guessLen13b(R.length,F.length),H=this.makeRBT(q),j=this.stub(q),X=new Array(q),G=new Array(q),$=new Array(q),te=new Array(q),ee=new Array(q),ie=new Array(q),se=O.words;se.length=q,this.convert13b(R.words,R.length,X,q),this.convert13b(F.words,F.length,te,q),this.transform(X,j,G,$,q,H),this.transform(te,j,ee,ie,q,H);for(var W=0;W<q;W++){var ne=G[W]*ee[W]-$[W]*ie[W];$[W]=G[W]*ie[W]+$[W]*ee[W],G[W]=ne}return this.conjugate(G,$,q),this.transform(G,$,se,j,q,H),this.conjugate(se,j,q),this.normalize13b(se,q),O.negative=R.negative^F.negative,O.length=R.length+F.length,O.strip()},"mulp"),f.prototype.mul=t(function(R){var F=new f(null);return F.words=new Array(this.length+R.length),this.mulTo(R,F)},"mul"),f.prototype.mulf=t(function(R){var F=new f(null);return F.words=new Array(this.length+R.length),M(this,R,F)},"mulf"),f.prototype.imul=t(function(R){return this.clone().mulTo(R,this)},"imul"),f.prototype.imuln=t(function(R){l(typeof R=="number"),l(R<67108864);for(var F=0,O=0;O<this.length;O++){var q=(this.words[O]|0)*R,H=(q&67108863)+(F&67108863);F>>=26,F+=q/67108864|0,F+=H>>>26,this.words[O]=H&67108863}return F!==0&&(this.words[O]=F,this.length++),this},"imuln"),f.prototype.muln=t(function(R){return this.clone().imuln(R)},"muln"),f.prototype.sqr=t(function(){return this.mul(this)},"sqr"),f.prototype.isqr=t(function(){return this.imul(this.clone())},"isqr"),f.prototype.pow=t(function(R){var F=m(R);if(F.length===0)return new f(1);for(var O=this,q=0;q<F.length&&F[q]===0;q++,O=O.sqr());if(++q<F.length)for(var H=O.sqr();q<F.length;q++,H=H.sqr())F[q]!==0&&(O=O.mul(H));return O},"pow"),f.prototype.iushln=t(function(R){l(typeof R=="number"&&R>=0);var F=R%26,O=(R-F)/26,q=67108863>>>26-F<<26-F,H;if(F!==0){var j=0;for(H=0;H<this.length;H++){var X=this.words[H]&q,G=(this.words[H]|0)-X<<F;this.words[H]=G|j,j=X>>>26-F}j&&(this.words[H]=j,this.length++)}if(O!==0){for(H=this.length-1;H>=0;H--)this.words[H+O]=this.words[H];for(H=0;H<O;H++)this.words[H]=0;this.length+=O}return this.strip()},"iushln"),f.prototype.ishln=t(function(R){return l(this.negative===0),this.iushln(R)},"ishln"),f.prototype.iushrn=t(function(R,F,O){l(typeof R=="number"&&R>=0);var q;F?q=(F-F%26)/26:q=0;var H=R%26,j=Math.min((R-H)/26,this.length),X=67108863^67108863>>>H<<H,G=O;if(q-=j,q=Math.max(0,q),G){for(var $=0;$<j;$++)G.words[$]=this.words[$];G.length=j}if(j!==0)if(this.length>j)for(this.length-=j,$=0;$<this.length;$++)this.words[$]=this.words[$+j];else this.words[0]=0,this.length=1;var te=0;for($=this.length-1;$>=0&&(te!==0||$>=q);$--){var ee=this.words[$]|0;this.words[$]=te<<26-H|ee>>>H,te=ee&X}return G&&te!==0&&(G.words[G.length++]=te),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),f.prototype.ishrn=t(function(R,F,O){return l(this.negative===0),this.iushrn(R,F,O)},"ishrn"),f.prototype.shln=t(function(R){return this.clone().ishln(R)},"shln"),f.prototype.ushln=t(function(R){return this.clone().iushln(R)},"ushln"),f.prototype.shrn=t(function(R){return this.clone().ishrn(R)},"shrn"),f.prototype.ushrn=t(function(R){return this.clone().iushrn(R)},"ushrn"),f.prototype.testn=t(function(R){l(typeof R=="number"&&R>=0);var F=R%26,O=(R-F)/26,q=1<<F;if(this.length<=O)return!1;var H=this.words[O];return!!(H&q)},"testn"),f.prototype.imaskn=t(function(R){l(typeof R=="number"&&R>=0);var F=R%26,O=(R-F)/26;if(l(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(F!==0&&O++,this.length=Math.min(O,this.length),F!==0){var q=67108863^67108863>>>F<<F;this.words[this.length-1]&=q}return this.strip()},"imaskn"),f.prototype.maskn=t(function(R){return this.clone().imaskn(R)},"maskn"),f.prototype.iaddn=t(function(R){return l(typeof R=="number"),l(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},"iaddn"),f.prototype._iaddn=t(function(R){this.words[0]+=R;for(var F=0;F<this.length&&this.words[F]>=67108864;F++)this.words[F]-=67108864,F===this.length-1?this.words[F+1]=1:this.words[F+1]++;return this.length=Math.max(this.length,F+1),this},"_iaddn"),f.prototype.isubn=t(function(R){if(l(typeof R=="number"),l(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var F=0;F<this.length&&this.words[F]<0;F++)this.words[F]+=67108864,this.words[F+1]-=1;return this.strip()},"isubn"),f.prototype.addn=t(function(R){return this.clone().iaddn(R)},"addn"),f.prototype.subn=t(function(R){return this.clone().isubn(R)},"subn"),f.prototype.iabs=t(function(){return this.negative=0,this},"iabs"),f.prototype.abs=t(function(){return this.clone().iabs()},"abs"),f.prototype._ishlnsubmul=t(function(R,F,O){var q=R.length+O,H;this._expand(q);var j,X=0;for(H=0;H<R.length;H++){j=(this.words[H+O]|0)+X;var G=(R.words[H]|0)*F;j-=G&67108863,X=(j>>26)-(G/67108864|0),this.words[H+O]=j&67108863}for(;H<this.length-O;H++)j=(this.words[H+O]|0)+X,X=j>>26,this.words[H+O]=j&67108863;if(X===0)return this.strip();for(l(X===-1),X=0,H=0;H<this.length;H++)j=-(this.words[H]|0)+X,X=j>>26,this.words[H]=j&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),f.prototype._wordDiv=t(function(R,F){var O=this.length-R.length,q=this.clone(),H=R,j=H.words[H.length-1]|0,X=this._countBits(j);O=26-X,O!==0&&(H=H.ushln(O),q.iushln(O),j=H.words[H.length-1]|0);var G=q.length-H.length,$;if(F!=="mod"){$=new f(null),$.length=G+1,$.words=new Array($.length);for(var te=0;te<$.length;te++)$.words[te]=0}var ee=q.clone()._ishlnsubmul(H,1,G);ee.negative===0&&(q=ee,$&&($.words[G]=1));for(var ie=G-1;ie>=0;ie--){var se=(q.words[H.length+ie]|0)*67108864+(q.words[H.length+ie-1]|0);for(se=Math.min(se/j|0,67108863),q._ishlnsubmul(H,se,ie);q.negative!==0;)se--,q.negative=0,q._ishlnsubmul(H,1,ie),q.isZero()||(q.negative^=1);$&&($.words[ie]=se)}return $&&$.strip(),q.strip(),F!=="div"&&O!==0&&q.iushrn(O),{div:$||null,mod:q}},"_wordDiv"),f.prototype.divmod=t(function(R,F,O){if(l(!R.isZero()),this.isZero())return{div:new f(0),mod:new f(0)};var q,H,j;return this.negative!==0&&R.negative===0?(j=this.neg().divmod(R,F),F!=="mod"&&(q=j.div.neg()),F!=="div"&&(H=j.mod.neg(),O&&H.negative!==0&&H.iadd(R)),{div:q,mod:H}):this.negative===0&&R.negative!==0?(j=this.divmod(R.neg(),F),F!=="mod"&&(q=j.div.neg()),{div:q,mod:j.mod}):(this.negative&R.negative)!==0?(j=this.neg().divmod(R.neg(),F),F!=="div"&&(H=j.mod.neg(),O&&H.negative!==0&&H.isub(R)),{div:j.div,mod:H}):R.length>this.length||this.cmp(R)<0?{div:new f(0),mod:this}:R.length===1?F==="div"?{div:this.divn(R.words[0]),mod:null}:F==="mod"?{div:null,mod:new f(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new f(this.modn(R.words[0]))}:this._wordDiv(R,F)},"divmod"),f.prototype.div=t(function(R){return this.divmod(R,"div",!1).div},"div"),f.prototype.mod=t(function(R){return this.divmod(R,"mod",!1).mod},"mod"),f.prototype.umod=t(function(R){return this.divmod(R,"mod",!0).mod},"umod"),f.prototype.divRound=t(function(R){var F=this.divmod(R);if(F.mod.isZero())return F.div;var O=F.div.negative!==0?F.mod.isub(R):F.mod,q=R.ushrn(1),H=R.andln(1),j=O.cmp(q);return j<0||H===1&&j===0?F.div:F.div.negative!==0?F.div.isubn(1):F.div.iaddn(1)},"divRound"),f.prototype.modn=t(function(R){l(R<=67108863);for(var F=(1<<26)%R,O=0,q=this.length-1;q>=0;q--)O=(F*O+(this.words[q]|0))%R;return O},"modn"),f.prototype.idivn=t(function(R){l(R<=67108863);for(var F=0,O=this.length-1;O>=0;O--){var q=(this.words[O]|0)+F*67108864;this.words[O]=q/R|0,F=q%R}return this.strip()},"idivn"),f.prototype.divn=t(function(R){return this.clone().idivn(R)},"divn"),f.prototype.egcd=t(function(R){l(R.negative===0),l(!R.isZero());var F=this,O=R.clone();F.negative!==0?F=F.umod(R):F=F.clone();for(var q=new f(1),H=new f(0),j=new f(0),X=new f(1),G=0;F.isEven()&&O.isEven();)F.iushrn(1),O.iushrn(1),++G;for(var $=O.clone(),te=F.clone();!F.isZero();){for(var ee=0,ie=1;(F.words[0]&ie)===0&&ee<26;++ee,ie<<=1);if(ee>0)for(F.iushrn(ee);ee-- >0;)(q.isOdd()||H.isOdd())&&(q.iadd($),H.isub(te)),q.iushrn(1),H.iushrn(1);for(var se=0,W=1;(O.words[0]&W)===0&&se<26;++se,W<<=1);if(se>0)for(O.iushrn(se);se-- >0;)(j.isOdd()||X.isOdd())&&(j.iadd($),X.isub(te)),j.iushrn(1),X.iushrn(1);F.cmp(O)>=0?(F.isub(O),q.isub(j),H.isub(X)):(O.isub(F),j.isub(q),X.isub(H))}return{a:j,b:X,gcd:O.iushln(G)}},"egcd"),f.prototype._invmp=t(function(R){l(R.negative===0),l(!R.isZero());var F=this,O=R.clone();F.negative!==0?F=F.umod(R):F=F.clone();for(var q=new f(1),H=new f(0),j=O.clone();F.cmpn(1)>0&&O.cmpn(1)>0;){for(var X=0,G=1;(F.words[0]&G)===0&&X<26;++X,G<<=1);if(X>0)for(F.iushrn(X);X-- >0;)q.isOdd()&&q.iadd(j),q.iushrn(1);for(var $=0,te=1;(O.words[0]&te)===0&&$<26;++$,te<<=1);if($>0)for(O.iushrn($);$-- >0;)H.isOdd()&&H.iadd(j),H.iushrn(1);F.cmp(O)>=0?(F.isub(O),q.isub(H)):(O.isub(F),H.isub(q))}var ee;return F.cmpn(1)===0?ee=q:ee=H,ee.cmpn(0)<0&&ee.iadd(R),ee},"_invmp"),f.prototype.gcd=t(function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var F=this.clone(),O=R.clone();F.negative=0,O.negative=0;for(var q=0;F.isEven()&&O.isEven();q++)F.iushrn(1),O.iushrn(1);do{for(;F.isEven();)F.iushrn(1);for(;O.isEven();)O.iushrn(1);var H=F.cmp(O);if(H<0){var j=F;F=O,O=j}else if(H===0||O.cmpn(1)===0)break;F.isub(O)}while(!0);return O.iushln(q)},"gcd"),f.prototype.invm=t(function(R){return this.egcd(R).a.umod(R)},"invm"),f.prototype.isEven=t(function(){return(this.words[0]&1)===0},"isEven"),f.prototype.isOdd=t(function(){return(this.words[0]&1)===1},"isOdd"),f.prototype.andln=t(function(R){return this.words[0]&R},"andln"),f.prototype.bincn=t(function(R){l(typeof R=="number");var F=R%26,O=(R-F)/26,q=1<<F;if(this.length<=O)return this._expand(O+1),this.words[O]|=q,this;for(var H=q,j=O;H!==0&&j<this.length;j++){var X=this.words[j]|0;X+=H,H=X>>>26,X&=67108863,this.words[j]=X}return H!==0&&(this.words[j]=H,this.length++),this},"bincn"),f.prototype.isZero=t(function(){return this.length===1&&this.words[0]===0},"isZero"),f.prototype.cmpn=t(function(R){var F=R<0;if(this.negative!==0&&!F)return-1;if(this.negative===0&&F)return 1;this.strip();var O;if(this.length>1)O=1;else{F&&(R=-R),l(R<=67108863,"Number is too big");var q=this.words[0]|0;O=q===R?0:q<R?-1:1}return this.negative!==0?-O|0:O},"cmpn"),f.prototype.cmp=t(function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var F=this.ucmp(R);return this.negative!==0?-F|0:F},"cmp"),f.prototype.ucmp=t(function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var F=0,O=this.length-1;O>=0;O--){var q=this.words[O]|0,H=R.words[O]|0;if(q!==H){q<H?F=-1:q>H&&(F=1);break}}return F},"ucmp"),f.prototype.gtn=t(function(R){return this.cmpn(R)===1},"gtn"),f.prototype.gt=t(function(R){return this.cmp(R)===1},"gt"),f.prototype.gten=t(function(R){return this.cmpn(R)>=0},"gten"),f.prototype.gte=t(function(R){return this.cmp(R)>=0},"gte"),f.prototype.ltn=t(function(R){return this.cmpn(R)===-1},"ltn"),f.prototype.lt=t(function(R){return this.cmp(R)===-1},"lt"),f.prototype.lten=t(function(R){return this.cmpn(R)<=0},"lten"),f.prototype.lte=t(function(R){return this.cmp(R)<=0},"lte"),f.prototype.eqn=t(function(R){return this.cmpn(R)===0},"eqn"),f.prototype.eq=t(function(R){return this.cmp(R)===0},"eq"),f.red=t(function(R){return new D(R)},"red"),f.prototype.toRed=t(function(R){return l(!this.red,"Already a number in reduction context"),l(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},"toRed"),f.prototype.fromRed=t(function(){return l(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),f.prototype._forceRed=t(function(R){return this.red=R,this},"_forceRed"),f.prototype.forceRed=t(function(R){return l(!this.red,"Already a number in reduction context"),this._forceRed(R)},"forceRed"),f.prototype.redAdd=t(function(R){return l(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},"redAdd"),f.prototype.redIAdd=t(function(R){return l(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},"redIAdd"),f.prototype.redSub=t(function(R){return l(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},"redSub"),f.prototype.redISub=t(function(R){return l(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},"redISub"),f.prototype.redShl=t(function(R){return l(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},"redShl"),f.prototype.redMul=t(function(R){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},"redMul"),f.prototype.redIMul=t(function(R){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},"redIMul"),f.prototype.redSqr=t(function(){return l(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),f.prototype.redISqr=t(function(){return l(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),f.prototype.redSqrt=t(function(){return l(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),f.prototype.redInvm=t(function(){return l(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),f.prototype.redNeg=t(function(){return l(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),f.prototype.redPow=t(function(R){return l(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)},"redPow");var x={k256:null,p224:null,p192:null,p25519:null};function A(z,R){this.name=z,this.p=new f(R,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}t(A,"MPrime"),A.prototype._tmp=t(function(){var R=new f(null);return R.words=new Array(Math.ceil(this.n/13)),R},"_tmp"),A.prototype.ireduce=t(function(R){var F=R,O;do this.split(F,this.tmp),F=this.imulK(F),F=F.iadd(this.tmp),O=F.bitLength();while(O>this.n);var q=O<this.n?-1:F.ucmp(this.p);return q===0?(F.words[0]=0,F.length=1):q>0?F.isub(this.p):F.strip!==void 0?F.strip():F._strip(),F},"ireduce"),A.prototype.split=t(function(R,F){R.iushrn(this.n,0,F)},"split"),A.prototype.imulK=t(function(R){return R.imul(this.k)},"imulK");function S(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}t(S,"K256"),u(S,A),S.prototype.split=t(function(R,F){for(var O=4194303,q=Math.min(R.length,9),H=0;H<q;H++)F.words[H]=R.words[H];if(F.length=q,R.length<=9){R.words[0]=0,R.length=1;return}var j=R.words[9];for(F.words[F.length++]=j&O,H=10;H<R.length;H++){var X=R.words[H]|0;R.words[H-10]=(X&O)<<4|j>>>22,j=X}j>>>=22,R.words[H-10]=j,j===0&&R.length>10?R.length-=10:R.length-=9},"split"),S.prototype.imulK=t(function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var F=0,O=0;O<R.length;O++){var q=R.words[O]|0;F+=q*977,R.words[O]=F&67108863,F=q*64+(F/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R},"imulK");function k(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}t(k,"P224"),u(k,A);function L(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}t(L,"P192"),u(L,A);function P(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}t(P,"P25519"),u(P,A),P.prototype.imulK=t(function(R){for(var F=0,O=0;O<R.length;O++){var q=(R.words[O]|0)*19+F,H=q&67108863;q>>>=26,R.words[O]=H,F=q}return F!==0&&(R.words[R.length++]=F),R},"imulK"),f._prime=t(function(R){if(x[R])return x[R];var F;if(R==="k256")F=new S;else if(R==="p224")F=new k;else if(R==="p192")F=new L;else if(R==="p25519")F=new P;else throw new Error("Unknown prime "+R);return x[R]=F,F},"prime");function D(z){if(typeof z=="string"){var R=f._prime(z);this.m=R.p,this.prime=R}else l(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}t(D,"Red"),D.prototype._verify1=t(function(R){l(R.negative===0,"red works only with positives"),l(R.red,"red works only with red numbers")},"_verify1"),D.prototype._verify2=t(function(R,F){l((R.negative|F.negative)===0,"red works only with positives"),l(R.red&&R.red===F.red,"red works only with red numbers")},"_verify2"),D.prototype.imod=t(function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},"imod"),D.prototype.neg=t(function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},"neg"),D.prototype.add=t(function(R,F){this._verify2(R,F);var O=R.add(F);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},"add"),D.prototype.iadd=t(function(R,F){this._verify2(R,F);var O=R.iadd(F);return O.cmp(this.m)>=0&&O.isub(this.m),O},"iadd"),D.prototype.sub=t(function(R,F){this._verify2(R,F);var O=R.sub(F);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},"sub"),D.prototype.isub=t(function(R,F){this._verify2(R,F);var O=R.isub(F);return O.cmpn(0)<0&&O.iadd(this.m),O},"isub"),D.prototype.shl=t(function(R,F){return this._verify1(R),this.imod(R.ushln(F))},"shl"),D.prototype.imul=t(function(R,F){return this._verify2(R,F),this.imod(R.imul(F))},"imul"),D.prototype.mul=t(function(R,F){return this._verify2(R,F),this.imod(R.mul(F))},"mul"),D.prototype.isqr=t(function(R){return this.imul(R,R.clone())},"isqr"),D.prototype.sqr=t(function(R){return this.mul(R,R)},"sqr"),D.prototype.sqrt=t(function(R){if(R.isZero())return R.clone();var F=this.m.andln(3);if(l(F%2===1),F===3){var O=this.m.add(new f(1)).iushrn(2);return this.pow(R,O)}for(var q=this.m.subn(1),H=0;!q.isZero()&&q.andln(1)===0;)H++,q.iushrn(1);l(!q.isZero());var j=new f(1).toRed(this),X=j.redNeg(),G=this.m.subn(1).iushrn(1),$=this.m.bitLength();for($=new f(2*$*$).toRed(this);this.pow($,G).cmp(X)!==0;)$.redIAdd(X);for(var te=this.pow($,q),ee=this.pow(R,q.addn(1).iushrn(1)),ie=this.pow(R,q),se=H;ie.cmp(j)!==0;){for(var W=ie,ne=0;W.cmp(j)!==0;ne++)W=W.redSqr();l(ne<se);var he=this.pow(te,new f(1).iushln(se-ne-1));ee=ee.redMul(he),te=he.redSqr(),ie=ie.redMul(te),se=ne}return ee},"sqrt"),D.prototype.invm=t(function(R){var F=R._invmp(this.m);return F.negative!==0?(F.negative=0,this.imod(F).redNeg()):this.imod(F)},"invm"),D.prototype.pow=t(function(R,F){if(F.isZero())return new f(1).toRed(this);if(F.cmpn(1)===0)return R.clone();var O=4,q=new Array(1<<O);q[0]=new f(1).toRed(this),q[1]=R;for(var H=2;H<q.length;H++)q[H]=this.mul(q[H-1],R);var j=q[0],X=0,G=0,$=F.bitLength()%26;for($===0&&($=26),H=F.length-1;H>=0;H--){for(var te=F.words[H],ee=$-1;ee>=0;ee--){var ie=te>>ee&1;if(j!==q[0]&&(j=this.sqr(j)),ie===0&&X===0){G=0;continue}X<<=1,X|=ie,G++,!(G!==O&&(H!==0||ee!==0))&&(j=this.mul(j,q[X]),G=0,X=0)}$=26}return j},"pow"),D.prototype.convertTo=t(function(R){var F=R.umod(this.m);return F===R?F.clone():F},"convertTo"),D.prototype.convertFrom=t(function(R){var F=R.clone();return F.red=null,F},"convertFrom"),f.mont=t(function(R){return new B(R)},"mont");function B(z){D.call(this,z),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}t(B,"Mont"),u(B,D),B.prototype.convertTo=t(function(R){return this.imod(R.ushln(this.shift))},"convertTo"),B.prototype.convertFrom=t(function(R){var F=this.imod(R.mul(this.rinv));return F.red=null,F},"convertFrom"),B.prototype.imul=t(function(R,F){if(R.isZero()||F.isZero())return R.words[0]=0,R.length=1,R;var O=R.imul(F),q=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=O.isub(q).iushrn(this.shift),j=H;return H.cmp(this.m)>=0?j=H.isub(this.m):H.cmpn(0)<0&&(j=H.iadd(this.m)),j._forceRed(this)},"imul"),B.prototype.mul=t(function(R,F){if(R.isZero()||F.isZero())return new f(0)._forceRed(this);var O=R.mul(F),q=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=O.isub(q).iushrn(this.shift),j=H;return H.cmp(this.m)>=0?j=H.isub(this.m):H.cmpn(0)<0&&(j=H.iadd(this.m)),j._forceRed(this)},"mul"),B.prototype.invm=t(function(R){var F=this.imod(R._invmp(this.m).mul(this.r2));return F._forceRed(this)},"invm")})(typeof i>"u"||i,this)},{buffer:2}],34:[function(n,i,s){i.exports=o;function o(a){var l,u,f,h=a.length,v=0;for(l=0;l<h;++l)v+=a[l].length;var c=new Array(v),d=0;for(l=0;l<h;++l){var g=a[l],p=g.length;for(u=0;u<p;++u){var b=c[d++]=new Array(p-1),m=0;for(f=0;f<p;++f)f!==u&&(b[m++]=g[f]);if(u&1){var y=b[1];b[1]=b[0],b[0]=y}}}return c}t(o,"boundary")},{}],35:[function(n,i,s){i.exports=p;var o=n("typedarray-pool"),a=n("./lib/sweep"),l=n("./lib/intersect");function u(b,m){for(var y=0;y<b;++y)if(!(m[y]<=m[y+b]))return!0;return!1}t(u,"boxEmpty");function f(b,m,y,T){for(var _=0,M=0,w=0,x=b.length;w<x;++w){var A=b[w];if(!u(m,A)){for(var S=0;S<2*m;++S)y[_++]=A[S];T[M++]=w}}return M}t(f,"convertBoxes");function h(b,m,y,T){var _=b.length,M=m.length;if(!(_<=0||M<=0)){var w=b[0].length>>>1;if(!(w<=0)){var x,A=o.mallocDouble(2*w*_),S=o.mallocInt32(_);if(_=f(b,w,A,S),_>0){if(w===1&&T)a.init(_),x=a.sweepComplete(w,y,0,_,A,S,0,_,A,S);else{var k=o.mallocDouble(2*w*M),L=o.mallocInt32(M);M=f(m,w,k,L),M>0&&(a.init(_+M),w===1?x=a.sweepBipartite(w,y,0,_,A,S,0,M,k,L):x=l(w,y,T,_,A,S,M,k,L),o.free(k),o.free(L))}o.free(A),o.free(S)}return x}}}t(h,"boxIntersect");var v;function c(b,m){v.push([b,m])}t(c,"appendItem");function d(b){return v=[],h(b,b,c,!0),v}t(d,"intersectFullArray");function g(b,m){return v=[],h(b,m,c,!1),v}t(g,"intersectBipartiteArray");function p(b,m,y){switch(arguments.length){case 1:return d(b);case 2:return typeof m=="function"?h(b,b,m,!0):g(b,m);case 3:return h(b,m,y,!1);default:throw new Error("box-intersect: Invalid arguments")}}t(p,"boxIntersectWrapper")},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(n,i,s){function o(){function u(v,c,d,g,p,b,m,y,T,_,M){for(var w=2*v,x=g,A=w*g;x<p;++x,A+=w){var S=b[c+A],k=b[c+A+v],L=m[x];e:for(var P=y,D=w*y;P<T;++P,D+=w){var B=_[c+D],z=_[c+D+v],R=M[P];if(!(z<S||k<B)){for(var F=c+1;F<v;++F){var O=b[F+A],q=b[F+v+A],H=_[F+D],j=_[F+v+D];if(q<H||j<O)continue e}var X=d(L,R);if(X!==void 0)return X}}}}t(u,"bruteForceRedFull");function f(v,c,d,g,p,b,m,y,T,_,M){for(var w=2*v,x=y,A=w*y;x<T;++x,A+=w){var S=_[c+A],k=_[c+A+v],L=M[x];e:for(var P=g,D=w*g;P<p;++P,D+=w){var B=b[c+D],z=b[c+D+v],R=m[P];if(!(k<B||z<S)){for(var F=c+1;F<v;++F){var O=b[F+D],q=b[F+v+D],H=_[F+A],j=_[F+v+A];if(q<H||j<O)continue e}var X=d(R,L);if(X!==void 0)return X}}}}t(f,"bruteForceBlueFull");function h(v,c,d,g,p,b,m,y,T,_,M){return p-g>T-y?u(v,c,d,g,p,b,m,y,T,_,M):f(v,c,d,g,p,b,m,y,T,_,M)}return t(h,"bruteForceFull"),h}t(o,"full");function a(){function u(d,g,p,b,m,y,T,_,M,w,x){for(var A=2*d,S=b,k=A*b;S<m;++S,k+=A){var L=y[g+k],P=y[g+k+d],D=T[S];e:for(var B=_,z=A*_;B<M;++B,z+=A){var R=w[g+z],F=x[B];if(!(R<=L||P<R)){for(var O=g+1;O<d;++O){var q=y[O+k],H=y[O+d+k],j=w[O+z],X=w[O+d+z];if(H<j||X<q)continue e}var G=p(F,D);if(G!==void 0)return G}}}}t(u,"bruteForceRedFlip");function f(d,g,p,b,m,y,T,_,M,w,x){for(var A=2*d,S=b,k=A*b;S<m;++S,k+=A){var L=y[g+k],P=y[g+k+d],D=T[S];e:for(var B=_,z=A*_;B<M;++B,z+=A){var R=w[g+z],F=x[B];if(!(R<L||P<R)){for(var O=g+1;O<d;++O){var q=y[O+k],H=y[O+d+k],j=w[O+z],X=w[O+d+z];if(H<j||X<q)continue e}var G=p(D,F);if(G!==void 0)return G}}}}t(f,"bruteForceRed");function h(d,g,p,b,m,y,T,_,M,w,x){for(var A=2*d,S=_,k=A*_;S<M;++S,k+=A){var L=w[g+k],P=x[S];e:for(var D=b,B=A*b;D<m;++D,B+=A){var z=y[g+B],R=y[g+B+d],F=T[D];if(!(L<=z||R<L)){for(var O=g+1;O<d;++O){var q=y[O+B],H=y[O+d+B],j=w[O+k],X=w[O+d+k];if(H<j||X<q)continue e}var G=p(P,F);if(G!==void 0)return G}}}}t(h,"bruteForceBlueFlip");function v(d,g,p,b,m,y,T,_,M,w,x){for(var A=2*d,S=_,k=A*_;S<M;++S,k+=A){var L=w[g+k],P=x[S];e:for(var D=b,B=A*b;D<m;++D,B+=A){var z=y[g+B],R=y[g+B+d],F=T[D];if(!(L<z||R<L)){for(var O=g+1;O<d;++O){var q=y[O+B],H=y[O+d+B],j=w[O+k],X=w[O+d+k];if(H<j||X<q)continue e}var G=p(F,P);if(G!==void 0)return G}}}}t(v,"bruteForceBlue");function c(d,g,p,b,m,y,T,_,M,w,x,A){return y-m>w-M?b?u(d,g,p,m,y,T,_,M,w,x,A):f(d,g,p,m,y,T,_,M,w,x,A):b?h(d,g,p,m,y,T,_,M,w,x,A):v(d,g,p,m,y,T,_,M,w,x,A)}return t(c,"bruteForcePartial"),c}t(a,"partial");function l(u){return u?o():a()}t(l,"bruteForcePlanner"),s.partial=l(!1),s.full=l(!0)},{}],37:[function(n,i,s){i.exports=z;var o=n("typedarray-pool"),a=n("bit-twiddle"),l=n("./brute"),u=l.partial,f=l.full,h=n("./sweep"),v=n("./median"),c=n("./partition"),d=128,g=1<<22,p=1<<22,b=c("!(lo>=p0)&&!(p1>=hi)"),m=c("lo===p0"),y=c("lo<p0"),T=c("hi<=p0"),_=c("lo<=p0&&p0<=hi"),M=c("lo<p0&&p0<=hi"),w=6,x=2,A=1024,S=o.mallocInt32(A),k=o.mallocDouble(A);function L(R,F){var O=8*a.log2(F+1)*(R+1)|0,q=a.nextPow2(w*O);S.length<q&&(o.free(S),S=o.mallocInt32(q));var H=a.nextPow2(x*O);k.length<H&&(o.free(k),k=o.mallocDouble(H))}t(L,"iterInit");function P(R,F,O,q,H,j,X,G,$){var te=w*R;S[te]=F,S[te+1]=O,S[te+2]=q,S[te+3]=H,S[te+4]=j,S[te+5]=X;var ee=x*R;k[ee]=G,k[ee+1]=$}t(P,"iterPush");function D(R,F,O,q,H,j,X,G,$,te,ee){var ie=2*R,se=$*ie,W=te[se+F];e:for(var ne=H,he=H*ie;ne<j;++ne,he+=ie){var re=X[he+F],ae=X[he+F+R];if(!(W<re||ae<W)&&!(q&&W===re)){for(var fe=G[ne],ce=F+1;ce<R;++ce){var re=X[he+ce],ae=X[he+ce+R],xe=te[se+ce],Te=te[se+ce+R];if(ae<xe||Te<re)continue e}var me;if(q?me=O(ee,fe):me=O(fe,ee),me!==void 0)return me}}}t(D,"onePointPartial");function B(R,F,O,q,H,j,X,G,$,te){var ee=2*R,ie=G*ee,se=$[ie+F];e:for(var W=q,ne=q*ee;W<H;++W,ne+=ee){var he=X[W];if(he!==te){var re=j[ne+F],ae=j[ne+F+R];if(!(se<re||ae<se)){for(var fe=F+1;fe<R;++fe){var re=j[ne+fe],ae=j[ne+fe+R],ce=$[ie+fe],xe=$[ie+fe+R];if(ae<ce||xe<re)continue e}var Te=O(he,te);if(Te!==void 0)return Te}}}}t(B,"onePointFull");function z(R,F,O,q,H,j,X,G,$){L(R,q+X);var te=0,ee=2*R,ie;for(P(te++,0,0,q,0,X,O?16:0,-1/0,1/0),O||P(te++,0,0,X,0,q,1,-1/0,1/0);te>0;){te-=1;var se=te*w,W=S[se],ne=S[se+1],he=S[se+2],re=S[se+3],ae=S[se+4],fe=S[se+5],ce=te*x,xe=k[ce],Te=k[ce+1],me=fe&1,pe=!!(fe&16),oe=H,de=j,ye=G,we=$;if(me&&(oe=G,de=$,ye=H,we=j),!(fe&2&&(he=y(R,W,ne,he,oe,de,Te),ne>=he))&&!(fe&4&&(ne=T(R,W,ne,he,oe,de,xe),ne>=he))){var Ee=he-ne,De=ae-re;if(pe){if(R*Ee*(Ee+De)<p){if(ie=h.scanComplete(R,W,F,ne,he,oe,de,re,ae,ye,we),ie!==void 0)return ie;continue}}else if(R*Math.min(Ee,De)<d){if(ie=u(R,W,F,me,ne,he,oe,de,re,ae,ye,we),ie!==void 0)return ie;continue}else if(R*Ee*De<g){if(ie=h.scanBipartite(R,W,F,me,ne,he,oe,de,re,ae,ye,we),ie!==void 0)return ie;continue}var Fe=b(R,W,ne,he,oe,de,xe,Te);if(ne<Fe)if(R*(Fe-ne)<d){if(ie=f(R,W+1,F,ne,Fe,oe,de,re,ae,ye,we),ie!==void 0)return ie}else if(W===R-2){if(me?ie=h.sweepBipartite(R,F,re,ae,ye,we,ne,Fe,oe,de):ie=h.sweepBipartite(R,F,ne,Fe,oe,de,re,ae,ye,we),ie!==void 0)return ie}else P(te++,W+1,ne,Fe,re,ae,me,-1/0,1/0),P(te++,W+1,re,ae,ne,Fe,me^1,-1/0,1/0);if(Fe<he){var qe=v(R,W,re,ae,ye,we),Je=ye[ee*qe+W],Ge=m(R,W,qe,ae,ye,we,Je);if(Ge<ae&&P(te++,W,Fe,he,Ge,ae,(me|4)+(pe?16:0),Je,Te),re<qe&&P(te++,W,Fe,he,re,qe,(me|2)+(pe?16:0),xe,Je),qe+1===Ge){if(pe?ie=B(R,W,F,Fe,he,oe,de,qe,ye,we[qe]):ie=D(R,W,F,me,Fe,he,oe,de,qe,ye,we[qe]),ie!==void 0)return ie}else if(qe<Ge){var et;if(pe){if(et=_(R,W,Fe,he,oe,de,Je),Fe<et){var Ue=m(R,W,Fe,et,oe,de,Je);if(W===R-2){if(Fe<Ue&&(ie=h.sweepComplete(R,F,Fe,Ue,oe,de,qe,Ge,ye,we),ie!==void 0)||Ue<et&&(ie=h.sweepBipartite(R,F,Ue,et,oe,de,qe,Ge,ye,we),ie!==void 0))return ie}else Fe<Ue&&P(te++,W+1,Fe,Ue,qe,Ge,16,-1/0,1/0),Ue<et&&(P(te++,W+1,Ue,et,qe,Ge,0,-1/0,1/0),P(te++,W+1,qe,Ge,Ue,et,1,-1/0,1/0))}}else me?et=M(R,W,Fe,he,oe,de,Je):et=_(R,W,Fe,he,oe,de,Je),Fe<et&&(W===R-2?me?ie=h.sweepBipartite(R,F,qe,Ge,ye,we,Fe,et,oe,de):ie=h.sweepBipartite(R,F,Fe,et,oe,de,qe,Ge,ye,we):(P(te++,W+1,Fe,et,qe,Ge,me,-1/0,1/0),P(te++,W+1,qe,Ge,Fe,et,me^1,-1/0,1/0)))}}}}}t(z,"boxIntersectIter")},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(n,i,s){i.exports=f;var o=n("./partition"),a=o("lo<p0"),l=8;function u(h,v,c,d,g,p){for(var b=2*h,m=b*(c+1)+v,y=c+1;y<d;++y,m+=b)for(var T=g[m],_=y,M=b*(y-1);_>c&&g[M+v]>T;--_,M-=b){for(var w=M,x=M+b,A=0;A<b;++A,++w,++x){var S=g[w];g[w]=g[x],g[x]=S}var k=p[_];p[_]=p[_-1],p[_-1]=k}}t(u,"insertionSort");function f(h,v,c,d,g,p){if(d<=c+1)return c;for(var b=c,m=d,y=d+c>>>1,T=2*h,_=y,M=g[T*y+v];b<m;){if(m-b<l){u(h,v,b,m,g,p),M=g[T*y+v];break}var w=m-b,x=Math.random()*w+b|0,A=g[T*x+v],S=Math.random()*w+b|0,k=g[T*S+v],L=Math.random()*w+b|0,P=g[T*L+v];A<=k?P>=k?(_=S,M=k):A>=P?(_=x,M=A):(_=L,M=P):k>=P?(_=S,M=k):P>=A?(_=x,M=A):(_=L,M=P);for(var z=T*(m-1),R=T*_,D=0;D<T;++D,++z,++R){var B=g[z];g[z]=g[R],g[R]=B}var F=p[m-1];p[m-1]=p[_],p[_]=F,_=a(h,v,b,m-1,g,p,M);for(var z=T*(m-1),R=T*_,D=0;D<T;++D,++z,++R){var B=g[z];g[z]=g[R],g[R]=B}var F=p[m-1];if(p[m-1]=p[_],p[_]=F,y<_){for(m=_-1;b<m&&g[T*(m-1)+v]===M;)m-=1;m+=1}else if(_<y)for(b=_+1;b<m&&g[T*b+v]===M;)b+=1;else break}return a(h,v,c,y,g,p,g[T*y+v])}t(f,"findMedian")},{"./partition":39}],39:[function(n,i,s){i.exports=a;var o={"lo===p0":l,"lo<p0":u,"lo<=p0":f,"hi<=p0":h,"lo<p0&&p0<=hi":c,"lo<=p0&&p0<=hi":v,"!(lo>=p0)&&!(p1>=hi)":d};function a(g){return o[g]}t(a,"genPartition");function l(g,p,b,m,y,T,_){for(var M=2*g,w=M*b,x=w,A=b,S=p,k=g+p,L=b;m>L;++L,w+=M){var P=y[w+S];if(P===_)if(A===L)A+=1,x+=M;else{for(var D=0;M>D;++D){var B=y[w+D];y[w+D]=y[x],y[x++]=B}var z=T[L];T[L]=T[A],T[A++]=z}}return A}t(l,"lo_equal_p0");function u(g,p,b,m,y,T,_){for(var M=2*g,w=M*b,x=w,A=b,S=p,k=g+p,L=b;m>L;++L,w+=M){var P=y[w+S];if(P<_)if(A===L)A+=1,x+=M;else{for(var D=0;M>D;++D){var B=y[w+D];y[w+D]=y[x],y[x++]=B}var z=T[L];T[L]=T[A],T[A++]=z}}return A}t(u,"lo_lessThan_p0");function f(g,p,b,m,y,T,_){for(var M=2*g,w=M*b,x=w,A=b,S=p,k=g+p,L=b;m>L;++L,w+=M){var P=y[w+k];if(P<=_)if(A===L)A+=1,x+=M;else{for(var D=0;M>D;++D){var B=y[w+D];y[w+D]=y[x],y[x++]=B}var z=T[L];T[L]=T[A],T[A++]=z}}return A}t(f,"lo_lessOrEqual_p0");function h(g,p,b,m,y,T,_){for(var M=2*g,w=M*b,x=w,A=b,S=p,k=g+p,L=b;m>L;++L,w+=M){var P=y[w+k];if(P<=_)if(A===L)A+=1,x+=M;else{for(var D=0;M>D;++D){var B=y[w+D];y[w+D]=y[x],y[x++]=B}var z=T[L];T[L]=T[A],T[A++]=z}}return A}t(h,"hi_lessOrEqual_p0");function v(g,p,b,m,y,T,_){for(var M=2*g,w=M*b,x=w,A=b,S=p,k=g+p,L=b;m>L;++L,w+=M){var P=y[w+S],D=y[w+k];if(P<=_&&_<=D)if(A===L)A+=1,x+=M;else{for(var B=0;M>B;++B){var z=y[w+B];y[w+B]=y[x],y[x++]=z}var R=T[L];T[L]=T[A],T[A++]=R}}return A}t(v,"lo_lassOrEqual_p0_and_p0_lessOrEqual_hi");function c(g,p,b,m,y,T,_){for(var M=2*g,w=M*b,x=w,A=b,S=p,k=g+p,L=b;m>L;++L,w+=M){var P=y[w+S],D=y[w+k];if(P<_&&_<=D)if(A===L)A+=1,x+=M;else{for(var B=0;M>B;++B){var z=y[w+B];y[w+B]=y[x],y[x++]=z}var R=T[L];T[L]=T[A],T[A++]=R}}return A}t(c,"lo_lessThan_p0_and_p0_lessOrEqual_hi");function d(g,p,b,m,y,T,_,M){for(var w=2*g,x=w*b,A=x,S=b,k=p,L=g+p,P=b;m>P;++P,x+=w){var D=y[x+k],B=y[x+L];if(!(D>=_)&&!(M>=B))if(S===P)S+=1,A+=w;else{for(var z=0;w>z;++z){var R=y[x+z];y[x+z]=y[A],y[A++]=R}var F=T[P];T[P]=T[S],T[S++]=F}}return S}t(d,"lo_lessThan_p0_and_p1_lessThan_hi")},{}],40:[function(n,i,s){i.exports=a;var o=32;function a(p,b){b<=4*o?l(0,b-1,p):g(0,b-1,p)}t(a,"wrapper");function l(p,b,m){for(var y=2*(p+1),T=p+1;T<=b;++T){for(var _=m[y++],M=m[y++],w=T,x=y-2;w-- >p;){var A=m[x-2],S=m[x-1];if(A<_)break;if(A===_&&S<M)break;m[x]=A,m[x+1]=S,x-=2}m[x]=_,m[x+1]=M}}t(l,"insertionSort");function u(p,b,m){p*=2,b*=2;var y=m[p],T=m[p+1];m[p]=m[b],m[p+1]=m[b+1],m[b]=y,m[b+1]=T}t(u,"swap");function f(p,b,m){p*=2,b*=2,m[p]=m[b],m[p+1]=m[b+1]}t(f,"move");function h(p,b,m,y){p*=2,b*=2,m*=2;var T=y[p],_=y[p+1];y[p]=y[b],y[p+1]=y[b+1],y[b]=y[m],y[b+1]=y[m+1],y[m]=T,y[m+1]=_}t(h,"rotate");function v(p,b,m,y,T){p*=2,b*=2,T[p]=T[b],T[b]=m,T[p+1]=T[b+1],T[b+1]=y}t(v,"shufflePivot");function c(p,b,m){p*=2,b*=2;var y=m[p],T=m[b];return y<T?!1:y===T?m[p+1]>m[b+1]:!0}t(c,"compare");function d(p,b,m,y){p*=2;var T=y[p];return T<b?!0:T===b?y[p+1]<m:!1}t(d,"comparePivot");function g(p,b,m){var y=(b-p+1)/6|0,T=p+y,_=b-y,M=p+b>>1,w=M-y,x=M+y,A=T,S=w,k=M,L=x,P=_,D=p+1,B=b-1,z=0;c(A,S,m)&&(z=A,A=S,S=z),c(L,P,m)&&(z=L,L=P,P=z),c(A,k,m)&&(z=A,A=k,k=z),c(S,k,m)&&(z=S,S=k,k=z),c(A,L,m)&&(z=A,A=L,L=z),c(k,L,m)&&(z=k,k=L,L=z),c(S,P,m)&&(z=S,S=P,P=z),c(S,k,m)&&(z=S,S=k,k=z),c(L,P,m)&&(z=L,L=P,P=z);for(var R=m[2*S],F=m[2*S+1],O=m[2*L],q=m[2*L+1],H=2*A,j=2*k,X=2*P,G=2*T,$=2*M,te=2*_,ee=0;ee<2;++ee){var ie=m[H+ee],se=m[j+ee],W=m[X+ee];m[G+ee]=ie,m[$+ee]=se,m[te+ee]=W}f(w,p,m),f(x,b,m);for(var ne=D;ne<=B;++ne)if(d(ne,R,F,m))ne!==D&&u(ne,D,m),++D;else if(!d(ne,O,q,m))for(;;)if(d(B,O,q,m)){d(B,R,F,m)?(h(ne,D,B,m),++D,--B):(u(ne,B,m),--B);break}else{if(--B<ne)break;continue}v(p,D-1,R,F,m),v(b,B+1,O,q,m),D-2-p<=o?l(p,D-2,m):g(p,D-2,m),b-(B+2)<=o?l(B+2,b,m):g(B+2,b,m),B-D<=o?l(D,B,m):g(D,B,m)}t(g,"quickSort")},{}],41:[function(n,i,s){i.exports={init:m,sweepBipartite:_,sweepComplete:M,scanBipartite:w,scanComplete:x};var o=n("typedarray-pool"),a=n("bit-twiddle"),l=n("./sort"),u=1<<28,f=1024,h=o.mallocInt32(f),v=o.mallocInt32(f),c=o.mallocInt32(f),d=o.mallocInt32(f),g=o.mallocInt32(f),p=o.mallocInt32(f),b=o.mallocDouble(f*8);function m(A){var S=a.nextPow2(A);h.length<S&&(o.free(h),h=o.mallocInt32(S)),v.length<S&&(o.free(v),v=o.mallocInt32(S)),c.length<S&&(o.free(c),c=o.mallocInt32(S)),d.length<S&&(o.free(d),d=o.mallocInt32(S)),g.length<S&&(o.free(g),g=o.mallocInt32(S)),p.length<S&&(o.free(p),p=o.mallocInt32(S));var k=8*S;b.length<k&&(o.free(b),b=o.mallocDouble(k))}t(m,"sqInit");function y(A,S,k,L){var P=S[L],D=A[k-1];A[P]=D,S[D]=P}t(y,"sqPop");function T(A,S,k,L){A[k]=L,S[L]=k}t(T,"sqPush");function _(A,S,k,L,P,D,B,z,R,F){for(var O=0,q=2*A,H=A-1,j=q-1,X=k;X<L;++X){var G=D[X],$=q*X;b[O++]=P[$+H],b[O++]=-(G+1),b[O++]=P[$+j],b[O++]=G}for(var X=B;X<z;++X){var G=F[X]+u,te=q*X;b[O++]=R[te+H],b[O++]=-G,b[O++]=R[te+j],b[O++]=G}var ee=O>>>1;l(b,ee);for(var ie=0,se=0,X=0;X<ee;++X){var W=b[2*X+1]|0;if(W>=u)W=W-u|0,y(c,d,se--,W);else if(W>=0)y(h,v,ie--,W);else if(W<=-u){W=-W-u|0;for(var ne=0;ne<ie;++ne){var he=S(h[ne],W);if(he!==void 0)return he}T(c,d,se++,W)}else{W=-W-1|0;for(var ne=0;ne<se;++ne){var he=S(W,c[ne]);if(he!==void 0)return he}T(h,v,ie++,W)}}}t(_,"sweepBipartite");function M(A,S,k,L,P,D,B,z,R,F){for(var O=0,q=2*A,H=A-1,j=q-1,X=k;X<L;++X){var G=D[X]+1<<1,$=q*X;b[O++]=P[$+H],b[O++]=-G,b[O++]=P[$+j],b[O++]=G}for(var X=B;X<z;++X){var G=F[X]+1<<1,te=q*X;b[O++]=R[te+H],b[O++]=-G|1,b[O++]=R[te+j],b[O++]=G|1}var ee=O>>>1;l(b,ee);for(var ie=0,se=0,W=0,X=0;X<ee;++X){var ne=b[2*X+1]|0,he=ne&1;if(X<ee-1&&ne>>1===b[2*X+3]>>1&&(he=2,X+=1),ne<0){for(var re=-(ne>>1)-1,ae=0;ae<W;++ae){var fe=S(g[ae],re);if(fe!==void 0)return fe}if(he!==0)for(var ae=0;ae<ie;++ae){var fe=S(h[ae],re);if(fe!==void 0)return fe}if(he!==1)for(var ae=0;ae<se;++ae){var fe=S(c[ae],re);if(fe!==void 0)return fe}he===0?T(h,v,ie++,re):he===1?T(c,d,se++,re):he===2&&T(g,p,W++,re)}else{var re=(ne>>1)-1;he===0?y(h,v,ie--,re):he===1?y(c,d,se--,re):he===2&&y(g,p,W--,re)}}}t(M,"sweepComplete");function w(A,S,k,L,P,D,B,z,R,F,O,q){var H=0,j=2*A,X=S,G=S+A,$=1,te=1;L?te=u:$=u;for(var ee=P;ee<D;++ee){var ie=ee+$,se=j*ee;b[H++]=B[se+X],b[H++]=-ie,b[H++]=B[se+G],b[H++]=ie}for(var ee=R;ee<F;++ee){var ie=ee+te,W=j*ee;b[H++]=O[W+X],b[H++]=-ie}var ne=H>>>1;l(b,ne);for(var he=0,ee=0;ee<ne;++ee){var re=b[2*ee+1]|0;if(re<0){var ie=-re,ae=!1;if(ie>=u?(ae=!L,ie-=u):(ae=!!L,ie-=1),ae)T(h,v,he++,ie);else{var fe=q[ie],ce=j*ie,xe=O[ce+S+1],Te=O[ce+S+1+A];e:for(var me=0;me<he;++me){var pe=h[me],oe=j*pe;if(!(Te<B[oe+S+1]||B[oe+S+1+A]<xe)){for(var de=S+2;de<A;++de)if(O[ce+de+A]<B[oe+de]||B[oe+de+A]<O[ce+de])continue e;var ye=z[pe],we;if(L?we=k(fe,ye):we=k(ye,fe),we!==void 0)return we}}}}else y(h,v,he--,re-$)}}t(w,"scanBipartite");function x(A,S,k,L,P,D,B,z,R,F,O){for(var q=0,H=2*A,j=S,X=S+A,G=L;G<P;++G){var $=G+u,te=H*G;b[q++]=D[te+j],b[q++]=-$,b[q++]=D[te+X],b[q++]=$}for(var G=z;G<R;++G){var $=G+1,ee=H*G;b[q++]=F[ee+j],b[q++]=-$}var ie=q>>>1;l(b,ie);for(var se=0,G=0;G<ie;++G){var W=b[2*G+1]|0;if(W<0){var $=-W;if($>=u)h[se++]=$-u;else{$-=1;var ne=O[$],he=H*$,re=F[he+S+1],ae=F[he+S+1+A];e:for(var fe=0;fe<se;++fe){var ce=h[fe],xe=B[ce];if(xe===ne)break;var Te=H*ce;if(!(ae<D[Te+S+1]||D[Te+S+1+A]<re)){for(var me=S+2;me<A;++me)if(F[he+me+A]<D[Te+me]||D[Te+me+A]<F[he+me])continue e;var pe=k(xe,ne);if(pe!==void 0)return pe}}}}else{for(var $=W-u,fe=se-1;fe>=0;--fe)if(h[fe]===$){for(var me=fe+1;me<se;++me)h[me-1]=h[me];break}--se}}}t(x,"scanComplete")},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(n,i,s){var o=n("./lib/monotone"),a=n("./lib/triangulation"),l=n("./lib/delaunay"),u=n("./lib/filter");i.exports=d;function f(g){return[Math.min(g[0],g[1]),Math.max(g[0],g[1])]}t(f,"canonicalizeEdge");function h(g,p){return g[0]-p[0]||g[1]-p[1]}t(h,"compareEdge");function v(g){return g.map(f).sort(h)}t(v,"canonicalizeEdges");function c(g,p,b){return p in g?g[p]:b}t(c,"getDefault");function d(g,p,b){Array.isArray(p)?(b=b||{},p=p||[]):(b=p||{},p=[]);var m=!!c(b,"delaunay",!0),y=!!c(b,"interior",!0),T=!!c(b,"exterior",!0),_=!!c(b,"infinity",!1);if(!y&&!T||g.length===0)return[];var M=o(g,p);if(m||y!==T||_){for(var w=a(g.length,v(p)),x=0;x<M.length;++x){var A=M[x];w.addTriangle(A[0],A[1],A[2])}return m&&l(g,w),T?y?_?u(w,0,_):w.cells():u(w,1,_):u(w,-1)}else return M}t(d,"cdt2d")},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(n,i,s){var o=n("robust-in-sphere")[4];n("binary-search-bounds"),i.exports=l;function a(u,f,h,v,c,d){var g=f.opposite(v,c);if(!(g<0)){if(c<v){var p=v;v=c,c=p,p=d,d=g,g=p}f.isConstraint(v,c)||o(u[v],u[c],u[d],u[g])<0&&h.push(v,c)}}t(a,"testFlip");function l(u,f){for(var h=[],v=u.length,c=f.stars,d=0;d<v;++d)for(var g=c[d],p=1;p<g.length;p+=2){var b=g[p];if(!(b<d)&&!f.isConstraint(d,b)){for(var m=g[p-1],y=-1,T=1;T<g.length;T+=2)if(g[T-1]===b){y=g[T];break}y<0||o(u[d],u[b],u[m],u[y])<0&&h.push(d,b)}}for(;h.length>0;){for(var b=h.pop(),d=h.pop(),m=-1,y=-1,g=c[d],_=1;_<g.length;_+=2){var M=g[_-1],w=g[_];M===b?y=w:w===b&&(m=M)}m<0||y<0||o(u[d],u[b],u[m],u[y])>=0||(f.flip(d,b),a(u,f,h,m,d,y),a(u,f,h,d,y,m),a(u,f,h,y,b,m),a(u,f,h,b,m,y))}}t(l,"delaunayRefine")},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(n,i,s){var o=n("binary-search-bounds");i.exports=v;function a(c,d,g,p,b,m,y){this.cells=c,this.neighbor=d,this.flags=p,this.constraint=g,this.active=b,this.next=m,this.boundary=y}t(a,"FaceIndex");var l=a.prototype;function u(c,d){return c[0]-d[0]||c[1]-d[1]||c[2]-d[2]}t(u,"compareCell"),l.locate=function(){var c=[0,0,0];return function(d,g,p){var b=d,m=g,y=p;return g<p?g<d&&(b=g,m=p,y=d):p<d&&(b=p,m=d,y=g),b<0?-1:(c[0]=b,c[1]=m,c[2]=y,o.eq(this.cells,c,u))}}();function f(c,d){for(var g=c.cells(),p=g.length,b=0;b<p;++b){var m=g[b],y=m[0],T=m[1],_=m[2];T<_?T<y&&(m[0]=T,m[1]=_,m[2]=y):_<y&&(m[0]=_,m[1]=y,m[2]=T)}g.sort(u);for(var M=new Array(p),b=0;b<M.length;++b)M[b]=0;var w=[],x=[],A=new Array(3*p),S=new Array(3*p),k=null;d&&(k=[]);for(var L=new a(g,A,S,M,w,x,k),b=0;b<p;++b)for(var m=g[b],P=0;P<3;++P){var y=m[P],T=m[(P+1)%3],D=A[3*b+P]=L.locate(T,y,c.opposite(T,y)),B=S[3*b+P]=c.isConstraint(y,T);D<0&&(B?x.push(b):(w.push(b),M[b]=1),d&&k.push([T,y,-1]))}return L}t(f,"indexCells");function h(c,d,g){for(var p=0,b=0;b<c.length;++b)d[b]===g&&(c[p++]=c[b]);return c.length=p,c}t(h,"filterCells");function v(c,d,g){var p=f(c,g);if(d===0)return g?p.cells.concat(p.boundary):p.cells;for(var b=1,m=p.active,y=p.next,T=p.flags,_=p.cells,M=p.constraint,w=p.neighbor;m.length>0||y.length>0;){for(;m.length>0;){var x=m.pop();if(T[x]!==-b){T[x]=b,_[x];for(var A=0;A<3;++A){var S=w[3*x+A];S>=0&&T[S]===0&&(M[3*x+A]?y.push(S):(m.push(S),T[S]=b))}}}var k=y;y=m,m=k,y.length=0,b=-b}var L=h(_,T,d);return g?L.concat(p.boundary):L}t(v,"classifyFaces")},{"binary-search-bounds":31}],45:[function(n,i,s){var o=n("binary-search-bounds"),a=n("robust-orientation")[3],l=0,u=1,f=2;i.exports=y;function h(T,_,M,w,x){this.a=T,this.b=_,this.idx=M,this.lowerIds=w,this.upperIds=x}t(h,"PartialHull");function v(T,_,M,w){this.a=T,this.b=_,this.type=M,this.idx=w}t(v,"Event");function c(T,_){var M=T.a[0]-_.a[0]||T.a[1]-_.a[1]||T.type-_.type;return M||T.type!==l&&(M=a(T.a,T.b,_.b),M)?M:T.idx-_.idx}t(c,"compareEvent");function d(T,_){return a(T.a,T.b,_)}t(d,"testPoint");function g(T,_,M,w,x){for(var A=o.lt(_,w,d),S=o.gt(_,w,d),k=A;k<S;++k){for(var L=_[k],P=L.lowerIds,B=P.length;B>1&&a(M[P[B-2]],M[P[B-1]],w)>0;)T.push([P[B-1],P[B-2],x]),B-=1;P.length=B,P.push(x);for(var D=L.upperIds,B=D.length;B>1&&a(M[D[B-2]],M[D[B-1]],w)<0;)T.push([D[B-2],D[B-1],x]),B-=1;D.length=B,D.push(x)}}t(g,"addPoint");function p(T,_){var M;return T.a[0]<_.a[0]?M=a(T.a,T.b,_.a):M=a(_.b,_.a,T.a),M||(_.b[0]<T.b[0]?M=a(T.a,T.b,_.b):M=a(_.b,_.a,T.b),M||T.idx-_.idx)}t(p,"findSplit");function b(T,_,M){var w=o.le(T,M,p),x=T[w],A=x.upperIds,S=A[A.length-1];x.upperIds=[S],T.splice(w+1,0,new h(M.a,M.b,M.idx,[S],A))}t(b,"splitHulls");function m(T,_,M){var w=M.a;M.a=M.b,M.b=w;var x=o.eq(T,M,p),A=T[x],S=T[x-1];S.upperIds=A.upperIds,T.splice(x,1)}t(m,"mergeHulls");function y(T,_){for(var M=T.length,w=_.length,x=[],A=0;A<M;++A)x.push(new v(T[A],null,l,A));for(var A=0;A<w;++A){var S=_[A],k=T[S[0]],L=T[S[1]];k[0]<L[0]?x.push(new v(k,L,f,A),new v(L,k,u,A)):k[0]>L[0]&&x.push(new v(L,k,f,A),new v(k,L,u,A))}x.sort(c);for(var P=x[0].a[0]-(1+Math.abs(x[0].a[0]))*Math.pow(2,-52),D=[new h([P,1],[P,0],-1,[],[])],B=[],A=0,z=x.length;A<z;++A){var R=x[A],F=R.type;F===l?g(B,D,T,R.a,R.idx):F===f?b(D,T,R):m(D,T,R)}return B}t(y,"monotoneTriangulate")},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(n,i,s){var o=n("binary-search-bounds");i.exports=f;function a(h,v){this.stars=h,this.edges=v}t(a,"Triangulation");var l=a.prototype;function u(h,v,c){for(var d=1,g=h.length;d<g;d+=2)if(h[d-1]===v&&h[d]===c){h[d-1]=h[g-2],h[d]=h[g-1],h.length=g-2;return}}t(u,"removePair"),l.isConstraint=function(){var h=[0,0];function v(c,d){return c[0]-d[0]||c[1]-d[1]}return t(v,"compareLex"),function(c,d){return h[0]=Math.min(c,d),h[1]=Math.max(c,d),o.eq(this.edges,h,v)>=0}}(),l.removeTriangle=function(h,v,c){var d=this.stars;u(d[h],v,c),u(d[v],c,h),u(d[c],h,v)},l.addTriangle=function(h,v,c){var d=this.stars;d[h].push(v,c),d[v].push(c,h),d[c].push(h,v)},l.opposite=function(h,v){for(var c=this.stars[v],d=1,g=c.length;d<g;d+=2)if(c[d]===h)return c[d-1];return-1},l.flip=function(h,v){var c=this.opposite(h,v),d=this.opposite(v,h);this.removeTriangle(h,v,c),this.removeTriangle(v,h,d),this.addTriangle(h,d,c),this.addTriangle(v,c,d)},l.edges=function(){for(var h=this.stars,v=[],c=0,d=h.length;c<d;++c)for(var g=h[c],p=0,b=g.length;p<b;p+=2)v.push([g[p],g[p+1]]);return v},l.cells=function(){for(var h=this.stars,v=[],c=0,d=h.length;c<d;++c)for(var g=h[c],p=0,b=g.length;p<b;p+=2){var m=g[p],y=g[p+1];c<Math.min(m,y)&&v.push([c,m,y])}return v};function f(h,v){for(var c=new Array(h),d=0;d<h;++d)c[d]=[];return new a(c,v)}t(f,"createTriangulation")},{"binary-search-bounds":31}],47:[function(n,i,s){i.exports=o;function o(a){for(var l=1,u=1;u<a.length;++u)for(var f=0;f<u;++f)if(a[u]<a[f])l=-l;else if(a[f]===a[u])return 0;return l}t(o,"orientation")},{}],48:[function(n,i,s){var o=n("dup"),a=n("robust-linear-solve");function l(h,v){for(var c=0,d=h.length,g=0;g<d;++g)c+=h[g]*v[g];return c}t(l,"dot");function u(h){var v=h.length;if(v===0)return[];h[0].length;var c=o([h.length+1,h.length+1],1),d=o([h.length+1],1);c[v][v]=0;for(var g=0;g<v;++g){for(var p=0;p<=g;++p)c[p][g]=c[g][p]=2*l(h[g],h[p]);d[g]=l(h[g],h[g])}for(var b=a(c,d),m=0,y=b[v+1],g=0;g<y.length;++g)m+=y[g];for(var T=new Array(v),g=0;g<v;++g){for(var y=b[g],_=0,p=0;p<y.length;++p)_+=y[p];T[g]=_/m}return T}t(u,"barycentricCircumcenter");function f(h){if(h.length===0)return[];for(var v=h[0].length,c=o([v]),d=u(h),g=0;g<h.length;++g)for(var p=0;p<v;++p)c[p]+=h[g][p]*d[g];return c}t(f,"circumcenter"),f.barycenetric=u,i.exports=f},{dup:65,"robust-linear-solve":283}],49:[function(n,i,s){i.exports=a;var o=n("circumcenter");function a(l){for(var u=o(l),f=0,h=0;h<l.length;++h)for(var v=l[h],c=0;c<u.length;++c)f+=Math.pow(v[c]-u[c],2);return Math.sqrt(f/l.length)}t(a,"circumradius")},{circumcenter:48}],50:[function(n,i,s){i.exports=k;var o=n("union-find"),a=n("box-intersect"),l=n("robust-segment-intersect"),u=n("big-rat"),f=n("big-rat/cmp"),h=n("big-rat/to-float"),v=n("rat-vec"),c=n("nextafter"),d=n("./lib/rat-seg-intersect");function g(L){var P=h(L);return[c(P,-1/0),c(P,1/0)]}t(g,"boundRat");function p(L,P){for(var D=new Array(P.length),B=0;B<P.length;++B){var z=P[B],R=L[z[0]],F=L[z[1]];D[B]=[c(Math.min(R[0],F[0]),-1/0),c(Math.min(R[1],F[1]),-1/0),c(Math.max(R[0],F[0]),1/0),c(Math.max(R[1],F[1]),1/0)]}return D}t(p,"boundEdges");function b(L){for(var P=new Array(L.length),D=0;D<L.length;++D){var B=L[D];P[D]=[c(B[0],-1/0),c(B[1],-1/0),c(B[0],1/0),c(B[1],1/0)]}return P}t(b,"boundPoints");function m(L,P,D){var B=[];return a(D,function(z,R){var F=P[z],O=P[R];if(!(F[0]===O[0]||F[0]===O[1]||F[1]===O[0]||F[1]===O[1])){var q=L[F[0]],H=L[F[1]],j=L[O[0]],X=L[O[1]];l(q,H,j,X)&&B.push([z,R])}}),B}t(m,"getCrossings");function y(L,P,D,B){var z=[];return a(D,B,function(R,F){var O=P[R];if(!(O[0]===F||O[1]===F)){var q=L[F],H=L[O[0]],j=L[O[1]];l(H,j,q,q)&&z.push([R,F])}}),z}t(y,"getTJunctions");function T(L,P,D,B,z){var R,F,O=L.map(function(ce){return[u(ce[0]),u(ce[1])]});for(R=0;R<D.length;++R){var q=D[R];F=q[0];var H=q[1],j=P[F],X=P[H],G=d(v(L[j[0]]),v(L[j[1]]),v(L[X[0]]),v(L[X[1]]));if(!!G){var $=L.length;L.push([h(G[0]),h(G[1])]),O.push(G),B.push([F,$],[H,$])}}for(B.sort(function(ce,xe){if(ce[0]!==xe[0])return ce[0]-xe[0];var Te=O[ce[1]],me=O[xe[1]];return f(Te[0],me[0])||f(Te[1],me[1])}),R=B.length-1;R>=0;--R){var te=B[R];F=te[0];var ee=P[F],ie=ee[0],se=ee[1],W=L[ie],ne=L[se];if((W[0]-ne[0]||W[1]-ne[1])<0){var he=ie;ie=se,se=he}ee[0]=ie;var re=ee[1]=te[1],ae;for(z&&(ae=ee[2]);R>0&&B[R-1][0]===F;){var te=B[--R],fe=te[1];z?P.push([re,fe,ae]):P.push([re,fe]),re=fe}z?P.push([re,se,ae]):P.push([re,se])}return O}t(T,"cutEdges");function _(L,P,D){for(var B=P.length,z=new o(B),R=[],F=0;F<P.length;++F){var O=P[F],q=g(O[0]),H=g(O[1]);R.push([c(q[0],-1/0),c(H[0],-1/0),c(q[1],1/0),c(H[1],1/0)])}a(R,function(te,ee){z.link(te,ee)});for(var j=!0,X=new Array(B),F=0;F<B;++F){var G=z.find(F);G!==F&&(j=!1,L[G]=[Math.min(L[F][0],L[G][0]),Math.min(L[F][1],L[G][1])])}if(j)return null;for(var $=0,F=0;F<B;++F){var G=z.find(F);G===F?(X[F]=$,L[$++]=L[F]):X[F]=-1}L.length=$;for(var F=0;F<B;++F)X[F]<0&&(X[F]=X[z.find(F)]);return X}t(_,"dedupPoints");function M(L,P){return L[0]-P[0]||L[1]-P[1]}t(M,"compareLex2");function w(L,P){var D=L[0]-P[0]||L[1]-P[1];return D||(L[2]<P[2]?-1:L[2]>P[2]?1:0)}t(w,"compareLex3");function x(L,P,D){if(L.length!==0){if(P)for(var B=0;B<L.length;++B){var z=L[B],R=P[z[0]],F=P[z[1]];z[0]=Math.min(R,F),z[1]=Math.max(R,F)}else for(var B=0;B<L.length;++B){var z=L[B],R=z[0],F=z[1];z[0]=Math.min(R,F),z[1]=Math.max(R,F)}D?L.sort(w):L.sort(M);for(var O=1,B=1;B<L.length;++B){var q=L[B-1],H=L[B];H[0]===q[0]&&H[1]===q[1]&&(!D||H[2]===q[2])||(L[O++]=H)}L.length=O}}t(x,"dedupEdges");function A(L,P,D){var B=_(L,[],b(L));return x(P,B,D),!!B}t(A,"preRound");function S(L,P,D){var B=p(L,P),z=m(L,P,B),R=b(L),F=y(L,P,B,R),O=T(L,P,z,F,D),q=_(L,O);return x(P,q,D),q?!0:z.length>0||F.length>0}t(S,"snapRound");function k(L,P,D){var B;if(D){B=P;for(var z=new Array(P.length),R=0;R<P.length;++R){var F=P[R];z[R]=[F[0],F[1],D[R]]}P=z}for(var O=A(L,P,!!D);S(L,P,!!D);)O=!0;if(!!D&&O){B.length=0,D.length=0;for(var R=0;R<P.length;++R){var F=P[R];B.push([F[0],F[1]]),D.push(F[2])}}return O}t(k,"cleanPSLG")},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(n,i,s){i.exports=d;var o=n("big-rat/mul"),a=n("big-rat/div"),l=n("big-rat/sub"),u=n("big-rat/sign"),f=n("rat-vec/sub"),h=n("rat-vec/add"),v=n("rat-vec/muls");function c(g,p){return l(o(g[0],p[1]),o(g[1],p[0]))}t(c,"ratPerp");function d(g,p,b,m){var y=f(p,g),T=f(m,b),_=c(y,T);if(u(_)===0)return null;var M=f(g,b),w=c(T,M),x=a(w,_),A=v(y,x),S=h(g,A);return S}t(d,"solveIntersection")},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(n,i,s){i.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(n,i,s){var o=n("./colorScale"),a=n("lerp");i.exports=l;function l(v){var c,d,g,p,b,m,y,T,x,_,M;if(v||(v={}),T=(v.nshades||72)-1,y=v.format||"hex",m=v.colormap,m||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!o[m])throw Error(m+" not a supported colorscale");b=o[m]}else if(Array.isArray(m))b=m.slice();else throw Error("unsupported colormap option",m);if(b.length>T+1)throw new Error(m+" map requires nshades to be at least size "+b.length);Array.isArray(v.alpha)?v.alpha.length!==2?_=[1,1]:_=v.alpha.slice():typeof v.alpha=="number"?_=[v.alpha,v.alpha]:_=[1,1],c=b.map(function(k){return Math.round(k.index*T)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var w=b.map(function(k,L){var P=b[L].index,D=b[L].rgb.slice();return D.length===4&&D[3]>=0&&D[3]<=1||(D[3]=_[0]+(_[1]-_[0])*P),D}),x=[];for(M=0;M<c.length-1;++M){p=c[M+1]-c[M],d=w[M],g=w[M+1];for(var A=0;A<p;A++){var S=A/p;x.push([Math.round(a(d[0],g[0],S)),Math.round(a(d[1],g[1],S)),Math.round(a(d[2],g[2],S)),a(d[3],g[3],S)])}}return x.push(b[b.length-1].rgb.concat(_[1])),y==="hex"?x=x.map(f):y==="rgbaString"?x=x.map(h):y==="float"&&(x=x.map(u)),x}t(l,"createColormap");function u(v){return[v[0]/255,v[1]/255,v[2]/255,v[3]]}t(u,"rgb2float");function f(v){for(var c,d="#",g=0;g<3;++g)c=v[g],c=c.toString(16),d+=("00"+c).substr(c.length);return d}t(f,"rgb2hex");function h(v){return"rgba("+v.join(",")+")"}t(h,"rgbaStr")},{"./colorScale":52,lerp:240}],54:[function(n,i,s){i.exports=v;var o=n("robust-orientation"),a=n("signum"),l=n("two-sum"),u=n("robust-product"),f=n("robust-sum");function h(c,d,g){var p=l(c[0],-d[0]),b=l(c[1],-d[1]),m=l(g[0],-d[0]),y=l(g[1],-d[1]),T=f(u(p,m),u(b,y));return T[T.length-1]>=0}t(h,"testInterior");function v(c,d,g,p){var b=o(d,g,p);if(b===0){var m=a(o(c,d,g)),y=a(o(c,d,p));if(m===y){if(m===0){var T=h(c,d,g),_=h(c,d,p);return T===_?0:T?1:-1}return 0}else{if(y===0)return m>0||h(c,d,p)?-1:1;if(m===0)return y>0||h(c,d,g)?1:-1}return a(y-m)}var M=o(c,d,g);if(M>0)return b>0&&o(c,d,p)>0?1:-1;if(M<0)return b>0||o(c,d,p)>0?1:-1;var w=o(c,d,p);return w>0||h(c,d,g)?1:-1}t(v,"compareAngle")},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(n,i,s){i.exports=t(function(a){return a<0?-1:a>0?1:0},"signum")},{}],56:[function(n,i,s){i.exports=l;var o=Math.min;function a(u,f){return u-f}t(a,"compareInt");function l(u,f){var h=u.length,v=u.length-f.length;if(v)return v;switch(h){case 0:return 0;case 1:return u[0]-f[0];case 2:return u[0]+u[1]-f[0]-f[1]||o(u[0],u[1])-o(f[0],f[1]);case 3:var c=u[0]+u[1],d=f[0]+f[1];if(v=c+u[2]-(d+f[2]),v)return v;var g=o(u[0],u[1]),p=o(f[0],f[1]);return o(g,u[2])-o(p,f[2])||o(g+u[2],c)-o(p+f[2],d);case 4:var b=u[0],m=u[1],y=u[2],T=u[3],_=f[0],M=f[1],w=f[2],x=f[3];return b+m+y+T-(_+M+w+x)||o(b,m,y,T)-o(_,M,w,x,_)||o(b+m,b+y,b+T,m+y,m+T,y+T)-o(_+M,_+w,_+x,M+w,M+x,w+x)||o(b+m+y,b+m+T,b+y+T,m+y+T)-o(_+M+w,_+M+x,_+w+x,M+w+x);default:for(var A=u.slice().sort(a),S=f.slice().sort(a),k=0;k<h;++k)if(v=A[k]-S[k],v)return v;return 0}}t(l,"compareCells")},{}],57:[function(n,i,s){var o=n("compare-cell"),a=n("cell-orientation");i.exports=l;function l(u,f){return o(u,f)||a(u)-a(f)}t(l,"compareOrientedCells")},{"cell-orientation":47,"compare-cell":56}],58:[function(n,i,s){var o=n("./lib/ch1d"),a=n("./lib/ch2d"),l=n("./lib/chnd");i.exports=u;function u(f){var h=f.length;if(h===0)return[];if(h===1)return[[0]];var v=f[0].length;return v===0?[]:v===1?o(f):v===2?a(f):l(f,v)}t(u,"convexHull")},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(n,i,s){i.exports=o;function o(a){for(var l=0,u=0,f=1;f<a.length;++f)a[f][0]<a[l][0]&&(l=f),a[f][0]>a[u][0]&&(u=f);return l<u?[[l],[u]]:l>u?[[u],[l]]:[[l]]}t(o,"convexHull1d")},{}],60:[function(n,i,s){i.exports=a;var o=n("monotone-convex-hull-2d");function a(l){var u=o(l),f=u.length;if(f<=2)return[];for(var h=new Array(f),v=u[f-1],c=0;c<f;++c){var d=u[c];h[c]=[v,d],v=d}return h}t(a,"convexHull2D")},{"monotone-convex-hull-2d":246}],61:[function(n,i,s){i.exports=f;var o=n("incremental-convex-hull"),a=n("affine-hull");function l(h,v){for(var c=h.length,d=new Array(c),g=0;g<v.length;++g)d[g]=h[v[g]];for(var p=v.length,g=0;g<c;++g)v.indexOf(g)<0&&(d[p++]=h[g]);return d}t(l,"permute");function u(h,v){for(var c=h.length,d=v.length,g=0;g<c;++g)for(var p=h[g],b=0;b<p.length;++b){var m=p[b];if(m<d)p[b]=v[m];else{m=m-d;for(var y=0;y<d;++y)m>=v[y]&&(m+=1);p[b]=m}}return h}t(u,"invPermute");function f(h,v){try{return o(h,!0)}catch{var c=a(h);if(c.length<=v)return[];var d=l(h,c),g=o(d,!0);return u(g,c)}}t(f,"convexHullnD")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(n,i,s){function o(l,u,f,h,v,c){var d=6*v*v-6*v,g=3*v*v-4*v+1,p=-6*v*v+6*v,b=3*v*v-2*v;if(l.length){c||(c=new Array(l.length));for(var m=l.length-1;m>=0;--m)c[m]=d*l[m]+g*u[m]+p*f[m]+b*h[m];return c}return d*l+g*u+p*f[m]+b*h}t(o,"dcubicHermite");function a(l,u,f,h,v,c){var d=v-1,g=v*v,p=d*d,b=(1+2*v)*p,m=v*p,y=g*(3-2*v),T=g*d;if(l.length){c||(c=new Array(l.length));for(var _=l.length-1;_>=0;--_)c[_]=b*l[_]+m*u[_]+y*f[_]+T*h[_];return c}return b*l+m*u+y*f+T*h}t(a,"cubicHermite"),i.exports=a,i.exports.derivative=o},{}],63:[function(n,i,s){var o=n("incremental-convex-hull"),a=n("uniq");i.exports=h;function l(v,c){this.point=v,this.index=c}t(l,"LiftedPoint");function u(v,c){for(var d=v.point,g=c.point,p=d.length,b=0;b<p;++b){var m=g[b]-d[b];if(m)return m}return 0}t(u,"compareLifted");function f(v,c,d){if(v===1)return d?[[-1,0]]:[];var g=c.map(function(T,_){return[T[0],_]});g.sort(function(T,_){return T[0]-_[0]});for(var p=new Array(v-1),b=1;b<v;++b){var m=g[b-1],y=g[b];p[b-1]=[m[1],y[1]]}return d&&p.push([-1,p[0][1]],[p[v-1][1],-1]),p}t(f,"triangulate1D");function h(v,c){var d=v.length;if(d===0)return[];var g=v[0].length;if(g<1)return[];if(g===1)return f(d,v,c);for(var p=new Array(d),b=1,m=0;m<d;++m){for(var y=v[m],T=new Array(g+1),_=0,M=0;M<g;++M){var w=y[M];T[M]=w,_+=w*w}T[g]=_,p[m]=new l(T,m),b=Math.max(_,b)}a(p,u),d=p.length;for(var x=new Array(d+g+1),A=new Array(d+g+1),S=(g+1)*(g+1)*b,k=new Array(g+1),m=0;m<=g;++m)k[m]=0;k[g]=S,x[0]=k.slice(),A[0]=-1;for(var m=0;m<=g;++m){var T=k.slice();T[m]=1,x[m+1]=T,A[m+1]=-1}for(var m=0;m<d;++m){var L=p[m];x[m+g+1]=L.point,A[m+g+1]=L.index}var P=o(x,!1);if(c?P=P.filter(function(D){for(var B=0,z=0;z<=g;++z){var R=A[D[z]];if(R<0&&++B>=2)return!1;D[z]=R}return!0}):P=P.filter(function(D){for(var B=0;B<=g;++B){var z=A[D[B]];if(z<0)return!1;D[B]=z}return!0}),g&1)for(var m=0;m<P.length;++m){var L=P[m],T=L[0];L[0]=L[1],L[1]=T}return P}t(h,"triangulate")},{"incremental-convex-hull":233,uniq:310}],64:[function(n,i,s){(function(o){(function(){var a=!1;if(typeof Float64Array<"u"){var l=new Float64Array(1),u=new Uint32Array(l.buffer);if(l[0]=1,a=!0,u[1]===1072693248){let h=function(d,g){return u[0]=d,u[1]=g,l[0]},v=function(d){return l[0]=d,u[0]},c=function(d){return l[0]=d,u[1]};t(h,"toDoubleLE"),t(v,"lowUintLE"),t(c,"highUintLE"),i.exports=t(function(g){return l[0]=g,[u[0],u[1]]},"doubleBitsLE"),i.exports.pack=h,i.exports.lo=v,i.exports.hi=c}else if(u[0]===1072693248){let h=function(d,g){return u[1]=d,u[0]=g,l[0]},v=function(d){return l[0]=d,u[1]},c=function(d){return l[0]=d,u[0]};t(h,"toDoubleBE"),t(v,"lowUintBE"),t(c,"highUintBE"),i.exports=t(function(g){return l[0]=g,[u[1],u[0]]},"doubleBitsBE"),i.exports.pack=h,i.exports.lo=v,i.exports.hi=c}else a=!1}if(!a){let h=function(d,g){return f.writeUInt32LE(d,0,!0),f.writeUInt32LE(g,4,!0),f.readDoubleLE(0,!0)},v=function(d){return f.writeDoubleLE(d,0,!0),f.readUInt32LE(0,!0)},c=function(d){return f.writeDoubleLE(d,0,!0),f.readUInt32LE(4,!0)};t(h,"toDouble"),t(v,"lowUint"),t(c,"highUint");var f=new o(8);i.exports=t(function(g){return f.writeDoubleLE(g,0,!0),[f.readUInt32LE(0,!0),f.readUInt32LE(4,!0)]},"doubleBits"),i.exports.pack=h,i.exports.lo=v,i.exports.hi=c}i.exports.sign=function(h){return i.exports.hi(h)>>>31},i.exports.exponent=function(h){var v=i.exports.hi(h);return(v<<1>>>21)-1023},i.exports.fraction=function(h){var v=i.exports.lo(h),c=i.exports.hi(h),d=c&(1<<20)-1;return c&2146435072&&(d+=1<<20),[v,d]},i.exports.denormalized=function(h){var v=i.exports.hi(h);return!(v&2146435072)}}).call(this)}).call(this,n("buffer").Buffer)},{buffer:3}],65:[function(n,i,s){function o(u,f,h){var v=u[h]|0;if(v<=0)return[];var c=new Array(v),d;if(h===u.length-1)for(d=0;d<v;++d)c[d]=f;else for(d=0;d<v;++d)c[d]=o(u,f,h+1);return c}t(o,"dupe_array");function a(u,f){var h,v;for(h=new Array(u),v=0;v<u;++v)h[v]=f;return h}t(a,"dupe_number");function l(u,f){switch(typeof f>"u"&&(f=0),typeof u){case"number":if(u>0)return a(u|0,f);break;case"object":if(typeof u.length=="number")return o(u,f,0);break}return[]}t(l,"dupe"),i.exports=l},{}],66:[function(n,i,s){i.exports=a;var o=n("uniq");function a(l,u){var f=l.length;if(typeof u!="number"){u=0;for(var h=0;h<f;++h){var v=l[h];u=Math.max(u,v[0],v[1])}u=(u|0)+1}u=u|0;for(var c=new Array(u),h=0;h<u;++h)c[h]=[];for(var h=0;h<f;++h){var v=l[h];c[v[0]].push(v[1]),c[v[1]].push(v[0])}for(var d=0;d<u;++d)o(c[d],function(g,p){return g-p});return c}t(a,"edgeToAdjacency")},{uniq:310}],67:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l||0,h=u||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[f*a[12]+a[8],f*a[13]+a[9],f*a[14]+a[10],f*a[15]+a[11]],[h*a[12]-a[8],h*a[13]-a[9],h*a[14]-a[10],h*a[15]-a[11]]]}t(o,"extractPlanes")},{}],68:[function(n,i,s){i.exports=v;var o=n("cubic-hermite"),a=n("binary-search-bounds");function l(c,d,g){return Math.min(d,Math.max(c,g))}t(l,"clamp");function u(c,d,g){this.dimension=c.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=c.slice().reverse(),this._velocity=d.slice().reverse(),this._time=[g],this._scratch=[c.slice(),c.slice(),c.slice(),c.slice(),c.slice()]}t(u,"FilteredVector");var f=u.prototype;f.flush=function(c){var d=a.gt(this._time,c)-1;d<=0||(this._time.splice(0,d),this._state.splice(0,d*this.dimension),this._velocity.splice(0,d*this.dimension))},f.curve=function(c){var d=this._time,g=d.length,p=a.le(d,c),b=this._scratch[0],m=this._state,y=this._velocity,T=this.dimension,_=this.bounds;if(p<0)for(var M=T-1,w=0;w<T;++w,--M)b[w]=m[M];else if(p>=g-1)for(var M=m.length-1,x=c-d[g-1],w=0;w<T;++w,--M)b[w]=m[M]+x*y[M];else{for(var M=T*(p+1)-1,A=d[p],S=d[p+1],k=S-A||1,L=this._scratch[1],P=this._scratch[2],D=this._scratch[3],B=this._scratch[4],z=!0,w=0;w<T;++w,--M)L[w]=m[M],D[w]=y[M]*k,P[w]=m[M+T],B[w]=y[M+T]*k,z=z&&L[w]===P[w]&&D[w]===B[w]&&D[w]===0;if(z)for(var w=0;w<T;++w)b[w]=L[w];else o(L,D,P,B,(c-A)/k,b)}for(var R=_[0],F=_[1],w=0;w<T;++w)b[w]=l(R[w],F[w],b[w]);return b},f.dcurve=function(c){var d=this._time,g=d.length,p=a.le(d,c),b=this._scratch[0],m=this._state,y=this._velocity,T=this.dimension;if(p>=g-1){var _=m.length-1;c-d[g-1];for(var M=0;M<T;++M,--_)b[M]=y[_]}else{for(var _=T*(p+1)-1,w=d[p],x=d[p+1],A=x-w||1,S=this._scratch[1],k=this._scratch[2],L=this._scratch[3],P=this._scratch[4],D=!0,M=0;M<T;++M,--_)S[M]=m[_],L[M]=y[_]*A,k[M]=m[_+T],P[M]=y[_+T]*A,D=D&&S[M]===k[M]&&L[M]===P[M]&&L[M]===0;if(D)for(var M=0;M<T;++M)b[M]=0;else{o.derivative(S,L,k,P,(c-w)/A,b);for(var M=0;M<T;++M)b[M]/=A}}return b},f.lastT=function(){var c=this._time;return c[c.length-1]},f.stable=function(){for(var c=this._velocity,d=c.length,g=this.dimension-1;g>=0;--g)if(c[--d])return!1;return!0},f.jump=function(c){var d=this.lastT(),g=this.dimension;if(!(c<d||arguments.length!==g+1)){var p=this._state,b=this._velocity,m=p.length-this.dimension,y=this.bounds,T=y[0],_=y[1];this._time.push(d,c);for(var M=0;M<2;++M)for(var w=0;w<g;++w)p.push(p[m++]),b.push(0);this._time.push(c);for(var w=g;w>0;--w)p.push(l(T[w-1],_[w-1],arguments[w])),b.push(0)}},f.push=function(c){var d=this.lastT(),g=this.dimension;if(!(c<d||arguments.length!==g+1)){var p=this._state,b=this._velocity,m=p.length-this.dimension,y=c-d,T=this.bounds,_=T[0],M=T[1],w=y>1e-6?1/y:0;this._time.push(c);for(var x=g;x>0;--x){var A=l(_[x-1],M[x-1],arguments[x]);p.push(A),b.push((A-p[m++])*w)}}},f.set=function(c){var d=this.dimension;if(!(c<this.lastT()||arguments.length!==d+1)){var g=this._state,p=this._velocity,b=this.bounds,m=b[0],y=b[1];this._time.push(c);for(var T=d;T>0;--T)g.push(l(m[T-1],y[T-1],arguments[T])),p.push(0)}},f.move=function(c){var d=this.lastT(),g=this.dimension;if(!(c<=d||arguments.length!==g+1)){var p=this._state,b=this._velocity,m=p.length-this.dimension,y=this.bounds,T=y[0],_=y[1],M=c-d,w=M>1e-6?1/M:0;this._time.push(c);for(var x=g;x>0;--x){var A=arguments[x];p.push(l(T[x-1],_[x-1],p[m++]+A)),b.push(A*w)}}},f.idle=function(c){var d=this.lastT();if(!(c<d)){var g=this.dimension,p=this._state,b=this._velocity,m=p.length-g,y=this.bounds,T=y[0],_=y[1],M=c-d;this._time.push(c);for(var w=g-1;w>=0;--w)p.push(l(T[w],_[w],p[m]+M*b[m])),b.push(0),m+=1}};function h(c){for(var d=new Array(c),g=0;g<c;++g)d[g]=0;return d}t(h,"getZero");function v(c,d,g){switch(arguments.length){case 0:return new u([0],[0],0);case 1:if(typeof c=="number"){var p=h(c);return new u(p,p,0)}else return new u(c,h(c.length),0);case 2:if(typeof d=="number"){var p=h(c.length);return new u(c,p,+d)}else g=0;case 3:if(c.length!==d.length)throw new Error("state and velocity lengths must match");return new u(c,d,g)}}t(v,"createFilteredVector")},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(n,i,s){i.exports=M;var o=0,a=1;function l(w,x,A,S,k,L){this._color=w,this.key=x,this.value=A,this.left=S,this.right=k,this._count=L}t(l,"RBNode");function u(w){return new l(w._color,w.key,w.value,w.left,w.right,w._count)}t(u,"cloneNode");function f(w,x){return new l(w,x.key,x.value,x.left,x.right,x._count)}t(f,"repaint");function h(w){w._count=1+(w.left?w.left._count:0)+(w.right?w.right._count:0)}t(h,"recount");function v(w,x){this._compare=w,this.root=x}t(v,"RedBlackTree");var c=v.prototype;Object.defineProperty(c,"keys",{get:function(){var w=[];return this.forEach(function(x,A){w.push(x)}),w}}),Object.defineProperty(c,"values",{get:function(){var w=[];return this.forEach(function(x,A){w.push(A)}),w}}),Object.defineProperty(c,"length",{get:function(){return this.root?this.root._count:0}}),c.insert=function(w,x){for(var A=this._compare,S=this.root,k=[],L=[];S;){var P=A(w,S.key);k.push(S),L.push(P),P<=0?S=S.left:S=S.right}k.push(new l(o,w,x,null,null,1));for(var D=k.length-2;D>=0;--D){var S=k[D];L[D]<=0?k[D]=new l(S._color,S.key,S.value,k[D+1],S.right,S._count+1):k[D]=new l(S._color,S.key,S.value,S.left,k[D+1],S._count+1)}for(var D=k.length-1;D>1;--D){var B=k[D-1],S=k[D];if(B._color===a||S._color===a)break;var z=k[D-2];if(z.left===B)if(B.left===S){var R=z.right;if(R&&R._color===o)B._color=a,z.right=f(a,R),z._color=o,D-=1;else{if(z._color=o,z.left=B.right,B._color=a,B.right=z,k[D-2]=B,k[D-1]=S,h(z),h(B),D>=3){var F=k[D-3];F.left===z?F.left=B:F.right=B}break}}else{var R=z.right;if(R&&R._color===o)B._color=a,z.right=f(a,R),z._color=o,D-=1;else{if(B.right=S.left,z._color=o,z.left=S.right,S._color=a,S.left=B,S.right=z,k[D-2]=S,k[D-1]=B,h(z),h(B),h(S),D>=3){var F=k[D-3];F.left===z?F.left=S:F.right=S}break}}else if(B.right===S){var R=z.left;if(R&&R._color===o)B._color=a,z.left=f(a,R),z._color=o,D-=1;else{if(z._color=o,z.right=B.left,B._color=a,B.left=z,k[D-2]=B,k[D-1]=S,h(z),h(B),D>=3){var F=k[D-3];F.right===z?F.right=B:F.left=B}break}}else{var R=z.left;if(R&&R._color===o)B._color=a,z.left=f(a,R),z._color=o,D-=1;else{if(B.left=S.right,z._color=o,z.right=S.left,S._color=a,S.right=B,S.left=z,k[D-2]=S,k[D-1]=B,h(z),h(B),h(S),D>=3){var F=k[D-3];F.right===z?F.right=S:F.left=S}break}}}return k[0]._color=a,new v(A,k[0])};function d(w,x){if(x.left){var A=d(w,x.left);if(A)return A}var A=w(x.key,x.value);if(A)return A;if(x.right)return d(w,x.right)}t(d,"doVisitFull");function g(w,x,A,S){var k=x(w,S.key);if(k<=0){if(S.left){var L=g(w,x,A,S.left);if(L)return L}var L=A(S.key,S.value);if(L)return L}if(S.right)return g(w,x,A,S.right)}t(g,"doVisitHalf");function p(w,x,A,S,k){var L=A(w,k.key),P=A(x,k.key),D;if(L<=0&&(k.left&&(D=p(w,x,A,S,k.left),D)||P>0&&(D=S(k.key,k.value),D)))return D;if(P>0&&k.right)return p(w,x,A,S,k.right)}t(p,"doVisit"),c.forEach=t(function(x,A,S){if(!!this.root)switch(arguments.length){case 1:return d(x,this.root);case 2:return g(A,this._compare,x,this.root);case 3:return this._compare(A,S)>=0?void 0:p(A,S,this._compare,x,this.root)}},"rbTreeForEach"),Object.defineProperty(c,"begin",{get:function(){for(var w=[],x=this.root;x;)w.push(x),x=x.left;return new b(this,w)}}),Object.defineProperty(c,"end",{get:function(){for(var w=[],x=this.root;x;)w.push(x),x=x.right;return new b(this,w)}}),c.at=function(w){if(w<0)return new b(this,[]);for(var x=this.root,A=[];;){if(A.push(x),x.left){if(w<x.left._count){x=x.left;continue}w-=x.left._count}if(!w)return new b(this,A);if(w-=1,x.right){if(w>=x.right._count)break;x=x.right}else break}return new b(this,[])},c.ge=function(w){for(var x=this._compare,A=this.root,S=[],k=0;A;){var L=x(w,A.key);S.push(A),L<=0&&(k=S.length),L<=0?A=A.left:A=A.right}return S.length=k,new b(this,S)},c.gt=function(w){for(var x=this._compare,A=this.root,S=[],k=0;A;){var L=x(w,A.key);S.push(A),L<0&&(k=S.length),L<0?A=A.left:A=A.right}return S.length=k,new b(this,S)},c.lt=function(w){for(var x=this._compare,A=this.root,S=[],k=0;A;){var L=x(w,A.key);S.push(A),L>0&&(k=S.length),L<=0?A=A.left:A=A.right}return S.length=k,new b(this,S)},c.le=function(w){for(var x=this._compare,A=this.root,S=[],k=0;A;){var L=x(w,A.key);S.push(A),L>=0&&(k=S.length),L<0?A=A.left:A=A.right}return S.length=k,new b(this,S)},c.find=function(w){for(var x=this._compare,A=this.root,S=[];A;){var k=x(w,A.key);if(S.push(A),k===0)return new b(this,S);k<=0?A=A.left:A=A.right}return new b(this,[])},c.remove=function(w){var x=this.find(w);return x?x.remove():this},c.get=function(w){for(var x=this._compare,A=this.root;A;){var S=x(w,A.key);if(S===0)return A.value;S<=0?A=A.left:A=A.right}};function b(w,x){this.tree=w,this._stack=x}t(b,"RedBlackTreeIterator");var m=b.prototype;Object.defineProperty(m,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(m,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),m.clone=function(){return new b(this.tree,this._stack.slice())};function y(w,x){w.key=x.key,w.value=x.value,w.left=x.left,w.right=x.right,w._color=x._color,w._count=x._count}t(y,"swapNode");function T(w){for(var x,A,S,k,L=w.length-1;L>=0;--L){if(x=w[L],L===0){x._color=a;return}if(A=w[L-1],A.left===x){if(S=A.right,S.right&&S.right._color===o){if(S=A.right=u(S),k=S.right=u(S.right),A.right=S.left,S.left=A,S.right=k,S._color=A._color,x._color=a,A._color=a,k._color=a,h(A),h(S),L>1){var P=w[L-2];P.left===A?P.left=S:P.right=S}w[L-1]=S;return}else if(S.left&&S.left._color===o){if(S=A.right=u(S),k=S.left=u(S.left),A.right=k.left,S.left=k.right,k.left=A,k.right=S,k._color=A._color,A._color=a,S._color=a,x._color=a,h(A),h(S),h(k),L>1){var P=w[L-2];P.left===A?P.left=k:P.right=k}w[L-1]=k;return}if(S._color===a)if(A._color===o){A._color=a,A.right=f(o,S);return}else{A.right=f(o,S);continue}else{if(S=u(S),A.right=S.left,S.left=A,S._color=A._color,A._color=o,h(A),h(S),L>1){var P=w[L-2];P.left===A?P.left=S:P.right=S}w[L-1]=S,w[L]=A,L+1<w.length?w[L+1]=x:w.push(x),L=L+2}}else{if(S=A.left,S.left&&S.left._color===o){if(S=A.left=u(S),k=S.left=u(S.left),A.left=S.right,S.right=A,S.left=k,S._color=A._color,x._color=a,A._color=a,k._color=a,h(A),h(S),L>1){var P=w[L-2];P.right===A?P.right=S:P.left=S}w[L-1]=S;return}else if(S.right&&S.right._color===o){if(S=A.left=u(S),k=S.right=u(S.right),A.left=k.right,S.right=k.left,k.right=A,k.left=S,k._color=A._color,A._color=a,S._color=a,x._color=a,h(A),h(S),h(k),L>1){var P=w[L-2];P.right===A?P.right=k:P.left=k}w[L-1]=k;return}if(S._color===a)if(A._color===o){A._color=a,A.left=f(o,S);return}else{A.left=f(o,S);continue}else{if(S=u(S),A.left=S.right,S.right=A,S._color=A._color,A._color=o,h(A),h(S),L>1){var P=w[L-2];P.right===A?P.right=S:P.left=S}w[L-1]=S,w[L]=A,L+1<w.length?w[L+1]=x:w.push(x),L=L+2}}}}t(T,"fixDoubleBlack"),m.remove=function(){var w=this._stack;if(w.length===0)return this.tree;var x=new Array(w.length),A=w[w.length-1];x[x.length-1]=new l(A._color,A.key,A.value,A.left,A.right,A._count);for(var S=w.length-2;S>=0;--S){var A=w[S];A.left===w[S+1]?x[S]=new l(A._color,A.key,A.value,x[S+1],A.right,A._count):x[S]=new l(A._color,A.key,A.value,A.left,x[S+1],A._count)}if(A=x[x.length-1],A.left&&A.right){var k=x.length;for(A=A.left;A.right;)x.push(A),A=A.right;var L=x[k-1];x.push(new l(A._color,L.key,L.value,A.left,A.right,A._count)),x[k-1].key=A.key,x[k-1].value=A.value;for(var S=x.length-2;S>=k;--S)A=x[S],x[S]=new l(A._color,A.key,A.value,A.left,x[S+1],A._count);x[k-1].left=x[k]}if(A=x[x.length-1],A._color===o){var P=x[x.length-2];P.left===A?P.left=null:P.right===A&&(P.right=null),x.pop();for(var S=0;S<x.length;++S)x[S]._count--;return new v(this.tree._compare,x[0])}else if(A.left||A.right){A.left?y(A,A.left):A.right&&y(A,A.right),A._color=a;for(var S=0;S<x.length-1;++S)x[S]._count--;return new v(this.tree._compare,x[0])}else{if(x.length===1)return new v(this.tree._compare,null);for(var S=0;S<x.length;++S)x[S]._count--;var D=x[x.length-2];T(x),D.left===A?D.left=null:D.right=null}return new v(this.tree._compare,x[0])},Object.defineProperty(m,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(m,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(m,"index",{get:function(){var w=0,x=this._stack;if(x.length===0){var A=this.tree.root;return A?A._count:0}else x[x.length-1].left&&(w=x[x.length-1].left._count);for(var S=x.length-2;S>=0;--S)x[S+1]===x[S].right&&(++w,x[S].left&&(w+=x[S].left._count));return w},enumerable:!0}),m.next=function(){var w=this._stack;if(w.length!==0){var x=w[w.length-1];if(x.right)for(x=x.right;x;)w.push(x),x=x.left;else for(w.pop();w.length>0&&w[w.length-1].right===x;)x=w[w.length-1],w.pop()}},Object.defineProperty(m,"hasNext",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].right)return!0;for(var x=w.length-1;x>0;--x)if(w[x-1].left===w[x])return!0;return!1}}),m.update=function(w){var x=this._stack;if(x.length===0)throw new Error("Can't update empty node!");var A=new Array(x.length),S=x[x.length-1];A[A.length-1]=new l(S._color,S.key,w,S.left,S.right,S._count);for(var k=x.length-2;k>=0;--k)S=x[k],S.left===x[k+1]?A[k]=new l(S._color,S.key,S.value,A[k+1],S.right,S._count):A[k]=new l(S._color,S.key,S.value,S.left,A[k+1],S._count);return new v(this.tree._compare,A[0])},m.prev=function(){var w=this._stack;if(w.length!==0){var x=w[w.length-1];if(x.left)for(x=x.left;x;)w.push(x),x=x.right;else for(w.pop();w.length>0&&w[w.length-1].left===x;)x=w[w.length-1],w.pop()}},Object.defineProperty(m,"hasPrev",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].left)return!0;for(var x=w.length-1;x>0;--x)if(w[x-1].right===w[x])return!0;return!1}});function _(w,x){return w<x?-1:w>x?1:0}t(_,"defaultCompare");function M(w){return new v(w||_,null)}t(M,"createRBTree")},{}],70:[function(n,i,s){i.exports=x;var o=n("./lib/text.js"),a=n("./lib/lines.js"),l=n("./lib/background.js"),u=n("./lib/cube.js"),f=n("./lib/ticks.js"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function v(A,S){return A[0]=S[0],A[1]=S[1],A[2]=S[2],A}t(v,"copyVec3");function c(A){this.gl=A,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=l(A)}t(c,"Axes");var d=c.prototype;d.update=function(A){A=A||{};function S(j,X,G){if(G in A){var $=A[G],te=this[G],ee;(j?Array.isArray($)&&Array.isArray($[0]):Array.isArray($))?this[G]=ee=[X($[0]),X($[1]),X($[2])]:this[G]=ee=[X($),X($),X($)];for(var ie=0;ie<3;++ie)if(ee[ie]!==te[ie])return!0}return!1}t(S,"parseOption");var k=S.bind(this,!1,Number),L=S.bind(this,!1,Boolean),P=S.bind(this,!1,String),D=S.bind(this,!0,function(j){if(Array.isArray(j)){if(j.length===3)return[+j[0],+j[1],+j[2],1];if(j.length===4)return[+j[0],+j[1],+j[2],+j[3]]}return[0,0,0,1]}),B,z=!1,R=!1;if("bounds"in A)for(var F=A.bounds,O=0;O<2;++O)for(var q=0;q<3;++q)F[O][q]!==this.bounds[O][q]&&(R=!0),this.bounds[O][q]=F[O][q];if("ticks"in A){B=A.ticks,z=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else k("tickSpacing")&&(this.autoTicks=!0,R=!0);if(this._firstInit&&("ticks"in A||"tickSpacing"in A||(this.autoTicks=!0),R=!0,z=!0,this._firstInit=!1),R&&this.autoTicks&&(B=f.create(this.bounds,this.tickSpacing),z=!0),z){for(var O=0;O<3;++O)B[O].sort(function(X,G){return X.x-G.x});f.equal(B,this.ticks)?z=!1:this.ticks=B}L("tickEnable"),P("tickFont")&&(z=!0),k("tickSize"),k("tickAngle"),k("tickPad"),D("tickColor");var H=P("labels");P("labelFont")&&(H=!0),L("labelEnable"),k("labelSize"),k("labelPad"),D("labelColor"),L("lineEnable"),L("lineMirror"),k("lineWidth"),D("lineColor"),L("lineTickEnable"),L("lineTickMirror"),k("lineTickLength"),k("lineTickWidth"),D("lineTickColor"),L("gridEnable"),k("gridWidth"),D("gridColor"),L("zeroEnable"),D("zeroLineColor"),k("zeroLineWidth"),L("backgroundEnable"),D("backgroundColor"),this._text?this._text&&(H||z)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=o(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&z&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}t(g,"OffsetInfo");var p=[new g,new g,new g];function b(A,S,k,L,P){for(var D=A.primalOffset,B=A.primalMinor,z=A.mirrorOffset,R=A.mirrorMinor,F=L[S],O=0;O<3;++O)if(S!==O){var q=D,H=z,j=B,X=R;F&1<<O&&(q=z,H=D,j=R,X=B),q[O]=k[0][O],H[O]=k[1][O],P[O]>0?(j[O]=-1,X[O]=0):(j[O]=0,X[O]=1)}}t(b,"computeLineOffset");var m=[0,0,0],y={model:h,view:h,projection:h,_ortho:!1};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(A){};var T=0,_=[0,0,0],M=[0,0,0],w=[0,0,0];d.draw=function(A){A=A||y;for(var te=this.gl,S=A.model||h,k=A.view||h,L=A.projection||h,P=this.bounds,D=A._ortho||!1,B=u(S,k,L,P,D),z=B.cubeEdges,R=B.axis,F=k[12],O=k[13],q=k[14],H=k[15],j=D?2:1,X=j*this.pixelRatio*(L[3]*F+L[7]*O+L[11]*q+L[15]*H)/te.drawingBufferHeight,G=0;G<3;++G)this.lastCubeProps.cubeEdges[G]=z[G],this.lastCubeProps.axis[G]=R[G];for(var $=p,G=0;G<3;++G)b(p[G],G,this.bounds,z,R);for(var te=this.gl,ee=m,G=0;G<3;++G)this.backgroundEnable[G]?ee[G]=R[G]:ee[G]=0;this._background.draw(S,k,L,P,ee,this.backgroundColor),this._lines.bind(S,k,L,this);for(var G=0;G<3;++G){var ie=[0,0,0];R[G]>0?ie[G]=P[1][G]:ie[G]=P[0][G];for(var se=0;se<2;++se){var W=(G+1+se)%3,ne=(G+1+(se^1))%3;this.gridEnable[W]&&this._lines.drawGrid(W,ne,this.bounds,ie,this.gridColor[W],this.gridWidth[W]*this.pixelRatio)}for(var se=0;se<2;++se){var W=(G+1+se)%3,ne=(G+1+(se^1))%3;this.zeroEnable[ne]&&Math.min(P[0][ne],P[1][ne])<=0&&Math.max(P[0][ne],P[1][ne])>=0&&this._lines.drawZero(W,ne,this.bounds,ie,this.zeroLineColor[ne],this.zeroLineWidth[ne]*this.pixelRatio)}}for(var G=0;G<3;++G){this.lineEnable[G]&&this._lines.drawAxisLine(G,this.bounds,$[G].primalOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio),this.lineMirror[G]&&this._lines.drawAxisLine(G,this.bounds,$[G].mirrorOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio);for(var he=v(_,$[G].primalMinor),re=v(M,$[G].mirrorMinor),ae=this.lineTickLength,se=0;se<3;++se){var fe=X/S[5*se];he[se]*=ae[se]*fe,re[se]*=ae[se]*fe}this.lineTickEnable[G]&&this._lines.drawAxisTicks(G,$[G].primalOffset,he,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio),this.lineTickMirror[G]&&this._lines.drawAxisTicks(G,$[G].mirrorOffset,re,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio)}this._lines.unbind(),this._text.bind(S,k,L,this.pixelRatio);var ce,xe=.5,Te,me;function pe(De){me=[0,0,0],me[De]=1}t(pe,"alignTo");function oe(De,Fe,qe){var Je=(De+1)%3,Ge=(De+2)%3,et=Fe[Je],Ue=Fe[Ge],Ye=qe[Je],$e=qe[Ge];if(et>0&&$e>0){pe(Je);return}else if(et>0&&$e<0){pe(Je);return}else if(et<0&&$e>0){pe(Je);return}else if(et<0&&$e<0){pe(Je);return}else if(Ue>0&&Ye>0){pe(Ge);return}else if(Ue>0&&Ye<0){pe(Ge);return}else if(Ue<0&&Ye>0){pe(Ge);return}else if(Ue<0&&Ye<0){pe(Ge);return}}t(oe,"solveTickAlignments");for(var G=0;G<3;++G){for(var de=$[G].primalMinor,ye=$[G].mirrorMinor,we=v(w,$[G].primalOffset),se=0;se<3;++se)this.lineTickEnable[G]&&(we[se]+=X*de[se]*Math.max(this.lineTickLength[se],0)/S[5*se]);var Ee=[0,0,0];if(Ee[G]=1,this.tickEnable[G]){this.tickAngle[G]===-3600?(this.tickAngle[G]=0,this.tickAlign[G]="auto"):this.tickAlign[G]=-1,Te=1,ce=[this.tickAlign[G],xe,Te],ce[0]==="auto"?ce[0]=T:ce[0]=parseInt(""+ce[0]),me=[0,0,0],oe(G,de,ye);for(var se=0;se<3;++se)we[se]+=X*de[se]*this.tickPad[se]/S[5*se];this._text.drawTicks(G,this.tickSize[G],this.tickAngle[G],we,this.tickColor[G],Ee,me,ce)}if(this.labelEnable[G]){Te=0,me=[0,0,0],this.labels[G].length>4&&(pe(G),Te=1),ce=[this.labelAlign[G],xe,Te],ce[0]==="auto"?ce[0]=T:ce[0]=parseInt(""+ce[0]);for(var se=0;se<3;++se)we[se]+=X*de[se]*this.labelPad[se]/S[5*se];we[G]+=.5*(P[0][G]+P[1][G]),this._text.drawLabel(G,this.labelSize[G],this.labelAngle[G],we,this.labelColor[G],[0,0,0],me,ce)}}this._text.unbind()},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function x(A,S){var k=new c(A);return k.update(S),k}t(x,"createAxes")},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(n,i,s){i.exports=h;var o=n("gl-buffer"),a=n("gl-vao"),l=n("./shaders").bg;function u(v,c,d,g){this.gl=v,this.buffer=c,this.vao=d,this.shader=g}t(u,"BackgroundCube");var f=u.prototype;f.draw=function(v,c,d,g,p,b){for(var m=!1,y=0;y<3;++y)m=m||p[y];if(!!m){var T=this.gl;T.enable(T.POLYGON_OFFSET_FILL),T.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:v,view:c,projection:d,bounds:g,enable:p,colors:b},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),T.disable(T.POLYGON_OFFSET_FILL)}},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(v){for(var c=[],d=[],g=0,p=0;p<3;++p)for(var b=(p+1)%3,m=(p+2)%3,y=[0,0,0],T=[0,0,0],_=-1;_<=1;_+=2){d.push(g,g+2,g+1,g+1,g+2,g+3),y[p]=_,T[p]=_;for(var M=-1;M<=1;M+=2){y[b]=M;for(var w=-1;w<=1;w+=2)y[m]=w,c.push(y[0],y[1],y[2],T[0],T[1],T[2]),g+=1}var x=b;b=m,m=x}var A=o(v,new Float32Array(c)),S=o(v,new Uint16Array(d),v.ELEMENT_ARRAY_BUFFER),k=a(v,[{buffer:A,type:v.FLOAT,size:3,offset:0,stride:24},{buffer:A,type:v.FLOAT,size:3,offset:12,stride:24}],S),L=l(v);return L.attributes.position.location=0,L.attributes.normal.location=1,new u(v,A,k,L)}t(h,"createBackgroundCube")},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(n,i,s){i.exports=_;var o=n("bit-twiddle"),a=n("gl-mat4/multiply"),l=n("split-polygon"),u=n("robust-orientation"),f=new Array(16),h=new Array(8),v=new Array(8),c=new Array(3),d=[0,0,0];(function(){for(var M=0;M<8;++M)h[M]=[1,1,1,1],v[M]=[1,1,1]})();function g(M,w,x){for(var A=0;A<4;++A){M[A]=x[12+A];for(var S=0;S<3;++S)M[A]+=w[S]*x[4*S+A]}}t(g,"transformHg");var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function b(M){for(var w=0;w<p.length;++w)if(M=l.positive(M,p[w]),M.length<3)return 0;for(var x=M[0],A=x[0]/x[3],S=x[1]/x[3],k=0,w=1;w+1<M.length;++w){var L=M[w],P=M[w+1],D=L[0]/L[3],B=L[1]/L[3],z=P[0]/P[3],R=P[1]/P[3],F=D-A,O=B-S,q=z-A,H=R-S;k+=Math.abs(F*H-O*q)}return k}t(b,"polygonArea");var m=[1,1,1],y=[0,0,0],T={cubeEdges:m,axis:y};function _(M,w,x,A,S){a(f,w,M),a(f,x,f);for(var k=0,L=0;L<2;++L){c[2]=A[L][2];for(var P=0;P<2;++P){c[1]=A[P][1];for(var D=0;D<2;++D)c[0]=A[D][0],g(h[k],c,f),k+=1}}for(var B=-1,L=0;L<8;++L){for(var z=h[L][3],R=0;R<3;++R)v[L][R]=h[L][R]/z;S&&(v[L][2]*=-1),z<0&&(B<0||v[L][2]<v[B][2])&&(B=L)}if(B<0){B=0;for(var F=0;F<3;++F){for(var O=(F+2)%3,q=(F+1)%3,H=-1,j=-1,X=0;X<2;++X){var G=X<<F,$=G+(X<<O)+(1-X<<q),te=G+(1-X<<O)+(X<<q);u(v[G],v[$],v[te],d)<0||(X?H=1:j=1)}if(H<0||j<0){j>H&&(B|=1<<F);continue}for(var X=0;X<2;++X){var G=X<<F,$=G+(X<<O)+(1-X<<q),te=G+(1-X<<O)+(X<<q),ee=b([h[G],h[$],h[te],h[G+(1<<O)+(1<<q)]]);X?H=ee:j=ee}if(j>H){B|=1<<F;continue}}}for(var ie=7^B,se=-1,L=0;L<8;++L)L===B||L===ie||(se<0||v[se][1]>v[L][1])&&(se=L);for(var W=-1,L=0;L<3;++L){var ne=se^1<<L;if(!(ne===B||ne===ie)){W<0&&(W=ne);var q=v[ne];q[0]<v[W][0]&&(W=ne)}}for(var he=-1,L=0;L<3;++L){var ne=se^1<<L;if(!(ne===B||ne===ie||ne===W)){he<0&&(he=ne);var q=v[ne];q[0]>v[he][0]&&(he=ne)}}var re=m;re[0]=re[1]=re[2]=0,re[o.log2(W^se)]=se&W,re[o.log2(se^he)]=se&he;var ae=he^7;ae===B||ae===ie?(ae=W^7,re[o.log2(he^ae)]=ae&he):re[o.log2(W^ae)]=ae&W;for(var fe=y,ce=B,F=0;F<3;++F)ce&1<<F?fe[F]=-1:fe[F]=1;return T}t(_,"getCubeEdges")},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(n,i,s){i.exports=m;var o=n("gl-buffer"),a=n("gl-vao"),l=n("./shaders").line,u=[0,0,0],f=[0,0,0],h=[0,0,0],v=[0,0,0],c=[1,1];function d(y){return y[0]=y[1]=y[2]=0,y}t(d,"zeroVec");function g(y,T){return y[0]=T[0],y[1]=T[1],y[2]=T[2],y}t(g,"copyVec");function p(y,T,_,M,w,x,A,S){this.gl=y,this.vertBuffer=T,this.vao=_,this.shader=M,this.tickCount=w,this.tickOffset=x,this.gridCount=A,this.gridOffset=S}t(p,"Lines");var b=p.prototype;b.bind=function(y,T,_){this.shader.bind(),this.shader.uniforms.model=y,this.shader.uniforms.view=T,this.shader.uniforms.projection=_,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},b.unbind=function(){this.vao.unbind()},b.drawAxisLine=function(y,T,_,M,w){var x=d(f);this.shader.uniforms.majorAxis=f,x[y]=T[1][y]-T[0][y],this.shader.uniforms.minorAxis=x;var A=g(v,_);A[y]+=T[0][y],this.shader.uniforms.offset=A,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=M;var S=d(h);S[(y+2)%3]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,6);var S=d(h);S[(y+1)%3]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,6)},b.drawAxisTicks=function(y,T,_,M,w){if(!!this.tickCount[y]){var x=d(u);x[y]=1,this.shader.uniforms.majorAxis=x,this.shader.uniforms.offset=T,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=w;var A=d(h);A[y]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y])}},b.drawGrid=function(y,T,_,M,w,x){if(!!this.gridCount[y]){var A=d(f);A[T]=_[1][T]-_[0][T],this.shader.uniforms.minorAxis=A;var S=g(v,M);S[T]+=_[0][T],this.shader.uniforms.offset=S;var k=d(u);k[y]=1,this.shader.uniforms.majorAxis=k;var L=d(h);L[y]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[y],this.gridOffset[y])}},b.drawZero=function(y,T,_,M,w,x){var A=d(f);this.shader.uniforms.majorAxis=A,A[y]=_[1][y]-_[0][y],this.shader.uniforms.minorAxis=A;var S=g(v,M);S[y]+=_[0][y],this.shader.uniforms.offset=S;var k=d(h);k[T]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},b.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function m(y,T,_){var M=[],w=[0,0,0],x=[0,0,0],A=[0,0,0],S=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var k=0;k<3;++k){for(var D=M.length/3|0,L=0;L<_[k].length;++L){var P=+_[k][L].x;M.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var z=M.length/3|0;w[k]=D,x[k]=z-D;for(var D=M.length/3|0,B=0;B<_[k].length;++B){var P=+_[k][B].x;M.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var z=M.length/3|0;A[k]=D,S[k]=z-D}var R=o(y,new Float32Array(M)),F=a(y,[{buffer:R,type:y.FLOAT,size:3,stride:0,offset:0}]),O=l(y);return O.attributes.position.location=0,new p(y,R,F,O,x,w,S,A)}t(m,"createLines")},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(n,i,s){var o=n("glslify"),a=n("gl-shader"),l=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.line=function(d){return a(d,l,u,null,[{name:"position",type:"vec3"}])};var f=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),h=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.text=function(d){return a(d,f,h,null,[{name:"position",type:"vec3"}])};var v=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=o([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(d){return a(d,v,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(n,i,s){(function(o){(function(){i.exports=m;var a=n("gl-buffer"),l=n("gl-vao"),u=n("vectorize-text"),f=n("./shaders").text,h=window||o.global||{},v=h.__TEXT_CACHE||{};h.__TEXT_CACHE={};var c=3;function d(y,T,_,M){this.gl=y,this.shader=T,this.buffer=_,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}t(d,"TextSprites");var g=d.prototype,p=[0,0];g.bind=function(y,T,_,M){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=y,w.view=T,w.projection=_,w.pixelScale=M,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},g.unbind=function(){this.vao.unbind()},g.update=function(y,T,_,M,w){var x=[];function A(F,O,q,H,j,X){var G=v[q];G||(G=v[q]={});var $=G[O];$||($=G[O]=b(O,{triangles:!0,font:q,textAlign:"center",textBaseline:"middle",lineSpacing:j,styletags:X}));for(var te=(H||12)/12,ee=$.positions,ie=$.cells,se=0,W=ie.length;se<W;++se)for(var ne=ie[se],he=2;he>=0;--he){var re=ee[ne[he]];x.push(te*re[0],-te*re[1],F)}}t(A,"addItem");for(var S=[0,0,0],k=[0,0,0],L=[0,0,0],P=[0,0,0],D=1.25,B={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},z=0;z<3;++z){L[z]=x.length/c|0,A(.5*(y[0][z]+y[1][z]),T[z],_[z],12,D,B),P[z]=(x.length/c|0)-L[z],S[z]=x.length/c|0;for(var R=0;R<M[z].length;++R)!M[z][R].text||A(M[z][R].x,M[z][R].text,M[z][R].font||w,M[z][R].fontSize||12,D,B);k[z]=(x.length/c|0)-S[z]}this.buffer.update(x),this.tickOffset=S,this.tickCount=k,this.labelOffset=L,this.labelCount=P},g.drawTicks=function(y,T,_,M,w,x,A,S){!this.tickCount[y]||(this.shader.uniforms.axis=x,this.shader.uniforms.color=w,this.shader.uniforms.angle=_,this.shader.uniforms.scale=T,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=A,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y]))},g.drawLabel=function(y,T,_,M,w,x,A,S){!this.labelCount[y]||(this.shader.uniforms.axis=x,this.shader.uniforms.color=w,this.shader.uniforms.angle=_,this.shader.uniforms.scale=T,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=A,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[y],this.labelOffset[y]))},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function b(y,T){try{return u(y,T)}catch(_){return console.warn('error vectorizing text:"'+y+'" error:',_),{cells:[],positions:[]}}}t(b,"tryVectorizeText");function m(y,T,_,M,w,x){var A=a(y),S=l(y,[{buffer:A,size:3}]),k=f(y);k.attributes.position.location=0;var L=new d(y,k,A,S);return L.update(T,_,M,w,x),L}t(m,"createTextSprites")}).call(this)}).call(this,n("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(n,i,s){s.create=a,s.equal=l;function o(u,f){var h=u+"",v=h.indexOf("."),c=0;v>=0&&(c=h.length-v-1);var d=Math.pow(10,c),g=Math.round(u*f*d),p=g+"";if(p.indexOf("e")>=0)return p;var b=g/d,m=g%d;g<0?(b=-Math.ceil(b)|0,m=-m|0):(b=Math.floor(b)|0,m=m|0);var y=""+b;if(g<0&&(y="-"+y),c){for(var T=""+m;T.length<c;)T="0"+T;return y+"."+T}else return y}t(o,"prettyPrint");function a(u,f){for(var h=[],v=0;v<3;++v){var c=[];.5*(u[0][v]+u[1][v]);for(var d=0;d*f[v]<=u[1][v];++d)c.push({x:d*f[v],text:o(f[v],d)});for(var d=-1;d*f[v]>=u[0][v];--d)c.push({x:d*f[v],text:o(f[v],d)});h.push(c)}return h}t(a,"defaultTicks");function l(u,f){for(var h=0;h<3;++h){if(u[h].length!==f[h].length)return!1;for(var v=0;v<u[h].length;++v){var c=u[h][v],d=f[h][v];if(c.x!==d.x||c.text!==d.text||c.font!==d.font||c.fontColor!==d.fontColor||c.fontSize!==d.fontSize||c.dx!==d.dx||c.dy!==d.dy)return!1}}return!0}t(l,"ticksEqual")},{}],77:[function(n,i,s){i.exports=T;var o=n("extract-frustum-planes"),a=n("split-polygon"),l=n("./lib/cube.js"),u=n("gl-mat4/multiply"),f=n("gl-mat4/transpose"),h=n("gl-vec4/transformMat4"),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function d(_,M,w){this.lo=_,this.hi=M,this.pixelsPerDataUnit=w}t(d,"AxesRange3D");var g=[0,0,0,1],p=[0,0,0,1];function b(_,M,w,x,A){for(var S=0;S<3;++S){for(var k=g,L=p,P=0;P<3;++P)L[P]=k[P]=w[P];L[3]=k[3]=1,L[S]+=1,h(L,L,M),L[3]<0&&(_[S]=1/0),k[S]-=1,h(k,k,M),k[3]<0&&(_[S]=1/0);var D=(k[0]/k[3]-L[0]/L[3])*x,B=(k[1]/k[3]-L[1]/L[3])*A;_[S]=.25*Math.sqrt(D*D+B*B)}return _}t(b,"gradient");var m=[new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0)],y=[0,0,0];function T(_,M,w,x,B){var S=M.model||v,k=M.view||v,L=M.projection||v,P=M._ortho||!1,D=_.bounds,B=B||l(S,k,L,D,P),z=B.axis;u(c,k,S),u(c,L,c);for(var R=m,F=0;F<3;++F)R[F].lo=1/0,R[F].hi=-1/0,R[F].pixelsPerDataUnit=1/0;var O=o(f(c,c));f(c,c);for(var q=0;q<3;++q){var H=(q+1)%3,j=(q+2)%3,X=y;e:for(var F=0;F<2;++F){var G=[];if(z[q]<0!=!!F){X[q]=D[F][q];for(var $=0;$<2;++$){X[H]=D[$^F][H];for(var te=0;te<2;++te)X[j]=D[te^$^F][j],G.push(X.slice())}for(var ee=P?5:4,$=ee;$===ee;++$){if(G.length===0)continue e;G=a.positive(G,O[$])}for(var $=0;$<G.length;++$)for(var j=G[$],ie=b(y,c,j,w,x),te=0;te<3;++te)R[te].lo=Math.min(R[te].lo,j[te]),R[te].hi=Math.max(R[te].hi,j[te]),te!==q&&(R[te].pixelsPerDataUnit=Math.min(R[te].pixelsPerDataUnit,Math.abs(ie[te])))}}}return R}t(T,"axesProperties")},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(n,i,s){var o=n("typedarray-pool"),a=n("ndarray-ops"),l=n("ndarray"),u=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function f(p,b,m,y,T){this.gl=p,this.type=b,this.handle=m,this.length=y,this.usage=T}t(f,"GLBuffer");var h=f.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)};function v(p,b,m,y,T,_){var M=T.length*T.BYTES_PER_ELEMENT;if(_<0)return p.bufferData(b,T,y),M;if(M+_>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return p.bufferSubData(b,_,T),m}t(v,"updateTypeArray");function c(p,b){for(var m=o.malloc(p.length,b),y=p.length,T=0;T<y;++T)m[T]=p[T];return m}t(c,"makeScratchTypeArray");function d(p,b){for(var m=1,y=b.length-1;y>=0;--y){if(b[y]!==m)return!1;m*=p[y]}return!0}t(d,"isPacked"),h.update=function(p,b){if(typeof b!="number"&&(b=-1),this.bind(),typeof p=="object"&&typeof p.shape<"u"){var m=p.dtype;if(u.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var y=gl.getExtension("OES_element_index_uint");y&&m!=="uint16"?m="uint32":m="uint16"}if(m===p.dtype&&d(p.shape,p.stride))p.offset===0&&p.data.length===p.shape[0]?this.length=v(this.gl,this.type,this.length,this.usage,p.data,b):this.length=v(this.gl,this.type,this.length,this.usage,p.data.subarray(p.offset,p.shape[0]),b);else{var T=o.malloc(p.size,m),_=l(T,p.shape);a.assign(_,p),b<0?this.length=v(this.gl,this.type,this.length,this.usage,T,b):this.length=v(this.gl,this.type,this.length,this.usage,T.subarray(0,p.size),b),o.free(T)}}else if(Array.isArray(p)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=c(p,"uint16"):M=c(p,"float32"),b<0?this.length=v(this.gl,this.type,this.length,this.usage,M,b):this.length=v(this.gl,this.type,this.length,this.usage,M.subarray(0,p.length),b),o.free(M)}else if(typeof p=="object"&&typeof p.length=="number")this.length=v(this.gl,this.type,this.length,this.usage,p,b);else if(typeof p=="number"||p===void 0){if(b>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");p=p|0,p<=0&&(p=1),this.gl.bufferData(this.type,p|0,this.usage),this.length=p}else throw new Error("gl-buffer: Invalid data type")};function g(p,b,m,y){if(m=m||p.ARRAY_BUFFER,y=y||p.DYNAMIC_DRAW,m!==p.ARRAY_BUFFER&&m!==p.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(y!==p.DYNAMIC_DRAW&&y!==p.STATIC_DRAW&&y!==p.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var T=p.createBuffer(),_=new f(p,m,T,0,y);return _.update(b),_}t(g,"createBuffer"),i.exports=g},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(n,i,s){var o=n("gl-vec3");i.exports=function(l,u){var f=l.positions,h=l.vectors,v={positions:[],vertexIntensity:[],vertexIntensityBounds:l.vertexIntensityBounds,vectors:[],cells:[],coneOffset:l.coneOffset,colormap:l.colormap};if(l.positions.length===0)return u&&(u[0]=[0,0,0],u[1]=[0,0,0]),v;for(var c=0,d=1/0,g=-1/0,p=1/0,b=-1/0,m=1/0,y=-1/0,T=null,_=null,M=[],w=1/0,x=!1,A=0;A<f.length;A++){var S=f[A];d=Math.min(S[0],d),g=Math.max(S[0],g),p=Math.min(S[1],p),b=Math.max(S[1],b),m=Math.min(S[2],m),y=Math.max(S[2],y);var k=h[A];if(o.length(k)>c&&(c=o.length(k)),A){var L=2*o.distance(T,S)/(o.length(_)+o.length(k));L?(w=Math.min(w,L),x=!1):x=!0}x||(T=S,_=k),M.push(k)}var P=[d,p,m],D=[g,b,y];u&&(u[0]=P,u[1]=D),c===0&&(c=1);var B=1/c;isFinite(w)||(w=1),v.vectorScale=w;var z=l.coneSize||.5;l.absoluteConeSize&&(z=l.absoluteConeSize*B),v.coneScale=z;for(var A=0,R=0;A<f.length;A++)for(var S=f[A],F=S[0],O=S[1],q=S[2],H=M[A],j=o.length(H)*B,X=0,G=8;X<G;X++){v.positions.push([F,O,q,R++]),v.positions.push([F,O,q,R++]),v.positions.push([F,O,q,R++]),v.positions.push([F,O,q,R++]),v.positions.push([F,O,q,R++]),v.positions.push([F,O,q,R++]),v.vectors.push(H),v.vectors.push(H),v.vectors.push(H),v.vectors.push(H),v.vectors.push(H),v.vectors.push(H),v.vertexIntensity.push(j,j,j),v.vertexIntensity.push(j,j,j);var $=v.positions.length;v.cells.push([$-6,$-5,$-4],[$-3,$-2,$-1])}return v};var a=n("./lib/shaders");i.exports.createMesh=n("./create_mesh"),i.exports.createConeMesh=function(l,u){return i.exports.createMesh(l,u,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(n,i,s){var o=n("gl-shader"),a=n("gl-buffer"),l=n("gl-vao"),u=n("gl-texture2d"),f=n("gl-mat4/multiply"),h=n("gl-mat4/invert"),v=n("ndarray"),c=n("colormap"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(M,w,x,A,S,k,L,P,D,B,z){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=x,this.pickShader=A,this.trianglePositions=S,this.triangleVectors=k,this.triangleColors=P,this.triangleUVs=D,this.triangleIds=L,this.triangleVAO=B,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=z,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=d,this._view=d,this._projection=d,this._resolution=[1,1]}t(g,"VectorMesh");var p=g.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(M){this.pickId=M};function b(M){for(var w=c({colormap:M,nshades:256,format:"rgba"}),x=new Uint8Array(256*4),A=0;A<256;++A){for(var S=w[A],k=0;k<3;++k)x[4*A+k]=S[k];x[4*A+3]=S[3]*255}return v(x,[256,256,4],[4,0,1])}t(b,"genColormap");function m(M){for(var w=M.length,x=new Array(w),A=0;A<w;++A)x[A]=M[A][2];return x}t(m,"takeZComponent"),p.update=function(M){M=M||{};var w=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(b(M.colormap)),this.texture.generateMipmap());var x=M.cells,A=M.positions,S=M.vectors;if(!A||!x||!S)return;var k=[],L=[],P=[],D=[],B=[];this.cells=x,this.positions=A,this.vectors=S;var z=M.meshColor||[1,1,1,1],R=M.vertexIntensity,F=1/0,O=-1/0;if(R)if(M.vertexIntensityBounds)F=+M.vertexIntensityBounds[0],O=+M.vertexIntensityBounds[1];else for(var q=0;q<R.length;++q){var H=R[q];F=Math.min(F,H),O=Math.max(O,H)}else for(var q=0;q<A.length;++q){var H=A[q][2];F=Math.min(F,H),O=Math.max(O,H)}R?this.intensity=R:this.intensity=m(A),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var q=0;q<A.length;++q)for(var j=A[q],X=0;X<3;++X)isNaN(j[X])||!isFinite(j[X])||(this.bounds[0][X]=Math.min(this.bounds[0][X],j[X]),this.bounds[1][X]=Math.max(this.bounds[1][X],j[X]));var G=0;e:for(var q=0;q<x.length;++q){var $=x[q];switch($.length){case 3:for(var X=0;X<3;++X)for(var te=$[X],j=A[te],ee=0;ee<3;++ee)if(isNaN(j[ee])||!isFinite(j[ee]))continue e;for(var X=0;X<3;++X){var te=$[2-X],j=A[te];k.push(j[0],j[1],j[2],j[3]);var ie=S[te];L.push(ie[0],ie[1],ie[2],ie[3]||0);var se=z;se.length===3?P.push(se[0],se[1],se[2],1):P.push(se[0],se[1],se[2],se[3]);var W;R?W=[(R[te]-F)/(O-F),0]:W=[(j[2]-F)/(O-F),0],D.push(W[0],W[1]),B.push(q)}G+=1;break}}this.triangleCount=G,this.trianglePositions.update(k),this.triangleVectors.update(L),this.triangleColors.update(P),this.triangleUVs.update(D),this.triangleIds.update(new Uint32Array(B))},p.drawTransparent=p.draw=function(M){M=M||{};for(var w=this.gl,x=M.model||d,A=M.view||d,S=M.projection||d,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)k[0][L]=Math.max(k[0][L],this.clipBounds[0][L]),k[1][L]=Math.min(k[1][L],this.clipBounds[1][L]);var P={model:x,view:A,projection:S,inverseModel:d.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};P.inverseModel=h(P.inverseModel,P.model),w.disable(w.CULL_FACE),this.texture.bind(0);var D=new Array(16);f(D,P.view,P.model),f(D,P.projection,D),h(D,D);for(var L=0;L<3;++L)P.eyePosition[L]=D[12+L]/D[15];for(var B=D[15],L=0;L<3;++L)B+=this.lightPosition[L]*D[4*L+3];for(var L=0;L<3;++L){for(var z=D[12+L],R=0;R<3;++R)z+=D[4*R+L]*this.lightPosition[R];P.lightPosition[L]=z/B}if(this.triangleCount>0){var F=this.triShader;F.bind(),F.uniforms=P,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},p.drawPick=function(M){M=M||{};for(var w=this.gl,x=M.model||d,A=M.view||d,S=M.projection||d,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],L=0;L<3;++L)k[0][L]=Math.max(k[0][L],this.clipBounds[0][L]),k[1][L]=Math.min(k[1][L],this.clipBounds[1][L]);this._model=[].slice.call(x),this._view=[].slice.call(A),this._projection=[].slice.call(S),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var P={model:x,view:A,projection:S,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},D=this.pickShader;D.bind(),D.uniforms=P,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},p.pick=function(M){if(!M||M.id!==this.pickId)return null;var w=M.value[0]+256*M.value[1]+65536*M.value[2],x=this.cells[w],A=this.positions[x[1]].slice(0,3),S={position:A,dataCoordinate:A,index:Math.floor(x[1]/48)};return this.traceType==="cone"?S.index=Math.floor(x[1]/48):this.traceType==="streamtube"&&(S.intensity=this.intensity[x[1]],S.velocity=this.vectors[x[1]].slice(0,3),S.divergence=this.vectors[x[1]][3],S.index=w),S},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function y(M,w){var x=o(M,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return x.attributes.position.location=0,x.attributes.color.location=2,x.attributes.uv.location=3,x.attributes.vector.location=4,x}t(y,"createMeshShader");function T(M,w){var x=o(M,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return x.attributes.position.location=0,x.attributes.id.location=1,x.attributes.vector.location=4,x}t(T,"createPickShader");function _(M,w,x){var A=x.shaders;arguments.length===1&&(w=M,M=w.gl);var S=y(M,A),k=T(M,A),L=u(M,v(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap(),L.minFilter=M.LINEAR_MIPMAP_LINEAR,L.magFilter=M.LINEAR;var P=a(M),D=a(M),B=a(M),z=a(M),R=a(M),F=l(M,[{buffer:P,type:M.FLOAT,size:4},{buffer:R,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:M.FLOAT,size:4},{buffer:z,type:M.FLOAT,size:2},{buffer:D,type:M.FLOAT,size:4}]),O=new g(M,L,S,k,P,D,R,B,z,F,x.traceType||"cone");return O.update(w),O}t(_,"createVectorMesh"),i.exports=_},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(n,i,s){var o=n("glslify"),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),l=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),u=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),f=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:u,fragment:f,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(n,i,s){i.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(n,i,s){var o=n("./1.0/numbers");i.exports=t(function(l){return o[l]},"lookupConstant")},{"./1.0/numbers":82}],84:[function(n,i,s){i.exports=g;var o=n("gl-buffer"),a=n("gl-vao"),l=n("./shaders/index"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(p,b,m,y){this.gl=p,this.shader=y,this.buffer=b,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}t(f,"ErrorBars");var h=f.prototype;h.isOpaque=function(){return!this.hasAlpha},h.isTransparent=function(){return this.hasAlpha},h.drawTransparent=h.draw=function(p){var b=this.gl,m=this.shader.uniforms;this.shader.bind();var y=m.view=p.view||u,T=m.projection=p.projection||u;m.model=p.model||u,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var _=y[12],M=y[13],w=y[14],x=y[15],A=p._ortho||!1,S=A?2:1,k=S*this.pixelRatio*(T[3]*_+T[7]*M+T[11]*w+T[15]*x)/b.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)b.lineWidth(this.lineWidth[L]*this.pixelRatio),m.capSize=this.capSize[L]*k,this.lineCount[L]&&b.drawArrays(b.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};function v(p,b){for(var m=0;m<3;++m)p[0][m]=Math.min(p[0][m],b[m]),p[1][m]=Math.max(p[1][m],b[m])}t(v,"updateBounds");var c=function(){for(var p=new Array(3),b=0;b<3;++b){for(var m=[],y=1;y<=2;++y)for(var T=-1;T<=1;T+=2){var _=(y+b)%3,M=[0,0,0];M[_]=T,m.push(M)}p[b]=m}return p}();function d(p,b,m,y){for(var T=c[y],_=0;_<T.length;++_){var M=T[_];p.push(b[0],b[1],b[2],m[0],m[1],m[2],m[3],M[0],M[1],M[2])}return T.length}t(d,"emitFace"),h.update=function(p){p=p||{},"lineWidth"in p&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var b=p.color||[[0,0,0],[0,0,0],[0,0,0]],m=p.position,y=p.error;if(Array.isArray(b[0])||(b=[b,b,b]),m&&y){var T=[],_=m.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=M;e:for(var x=0;x<_;++x){for(var A=m[x],S=0;S<3;++S)if(isNaN(A[S])||!isFinite(A[S]))continue e;var k=y[x],L=b[w];if(Array.isArray(L[0])&&(L=b[x]),L.length===3?L=[L[0],L[1],L[2],1]:L.length===4&&(L=[L[0],L[1],L[2],L[3]],!this.hasAlpha&&L[3]<1&&(this.hasAlpha=!0)),!(isNaN(k[0][w])||isNaN(k[1][w]))){if(k[0][w]<0){var P=A.slice();P[w]+=k[0][w],T.push(A[0],A[1],A[2],L[0],L[1],L[2],L[3],0,0,0,P[0],P[1],P[2],L[0],L[1],L[2],L[3],0,0,0),v(this.bounds,P),M+=2+d(T,P,L,w)}if(k[1][w]>0){var P=A.slice();P[w]+=k[1][w],T.push(A[0],A[1],A[2],L[0],L[1],L[2],L[3],0,0,0,P[0],P[1],P[2],L[0],L[1],L[2],L[3],0,0,0),v(this.bounds,P),M+=2+d(T,P,L,w)}}}this.lineCount[w]=M-this.lineOffset[w]}this.buffer.update(T)}},h.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function g(p){var b=p.gl,m=o(b),y=a(b,[{buffer:m,type:b.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:b.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:b.FLOAT,size:3,offset:28,stride:40}]),T=l(b);T.attributes.position.location=0,T.attributes.color.location=1,T.attributes.offset.location=2;var _=new f(b,m,y,T);return _.update(p),_}t(g,"createErrorBars")},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(n,i,s){var o=n("glslify"),a=n("gl-shader"),l=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);i.exports=function(f){return a(f,l,u,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(n,i,s){var o=n("gl-texture2d");i.exports=M;var a=null,l,u,f,h;function v(w){var x=w.getParameter(w.FRAMEBUFFER_BINDING),A=w.getParameter(w.RENDERBUFFER_BINDING),S=w.getParameter(w.TEXTURE_BINDING_2D);return[x,A,S]}t(v,"saveFBOState");function c(w,x){w.bindFramebuffer(w.FRAMEBUFFER,x[0]),w.bindRenderbuffer(w.RENDERBUFFER,x[1]),w.bindTexture(w.TEXTURE_2D,x[2])}t(c,"restoreFBOState");function d(w,x){var A=w.getParameter(x.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(A+1);for(var S=0;S<=A;++S){for(var k=new Array(A),L=0;L<S;++L)k[L]=w.COLOR_ATTACHMENT0+L;for(var L=S;L<A;++L)k[L]=w.NONE;a[S]=k}}t(d,"lazyInitColorAttachments");function g(w){switch(w){case l:throw new Error("gl-fbo: Framebuffer unsupported");case u:throw new Error("gl-fbo: Framebuffer incomplete attachment");case f:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}t(g,"throwFBOError");function p(w,x,A,S,k,L){if(!S)return null;var P=o(w,x,A,k,S);return P.magFilter=w.NEAREST,P.minFilter=w.NEAREST,P.mipSamples=1,P.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,L,w.TEXTURE_2D,P.handle,0),P}t(p,"initTexture");function b(w,x,A,S,k){var L=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,L),w.renderbufferStorage(w.RENDERBUFFER,S,x,A),w.framebufferRenderbuffer(w.FRAMEBUFFER,k,w.RENDERBUFFER,L),L}t(b,"initRenderBuffer");function m(w){var x=v(w.gl),A=w.gl,S=w.handle=A.createFramebuffer(),k=w._shape[0],L=w._shape[1],P=w.color.length,D=w._ext,B=w._useStencil,z=w._useDepth,R=w._colorType;A.bindFramebuffer(A.FRAMEBUFFER,S);for(var F=0;F<P;++F)w.color[F]=p(A,k,L,R,A.RGBA,A.COLOR_ATTACHMENT0+F);P===0?(w._color_rb=b(A,k,L,A.RGBA4,A.COLOR_ATTACHMENT0),D&&D.drawBuffersWEBGL(a[0])):P>1&&D.drawBuffersWEBGL(a[P]);var O=A.getExtension("WEBGL_depth_texture");O?B?w.depth=p(A,k,L,O.UNSIGNED_INT_24_8_WEBGL,A.DEPTH_STENCIL,A.DEPTH_STENCIL_ATTACHMENT):z&&(w.depth=p(A,k,L,A.UNSIGNED_SHORT,A.DEPTH_COMPONENT,A.DEPTH_ATTACHMENT)):z&&B?w._depth_rb=b(A,k,L,A.DEPTH_STENCIL,A.DEPTH_STENCIL_ATTACHMENT):z?w._depth_rb=b(A,k,L,A.DEPTH_COMPONENT16,A.DEPTH_ATTACHMENT):B&&(w._depth_rb=b(A,k,L,A.STENCIL_INDEX,A.STENCIL_ATTACHMENT));var q=A.checkFramebufferStatus(A.FRAMEBUFFER);if(q!==A.FRAMEBUFFER_COMPLETE){w._destroyed=!0,A.bindFramebuffer(A.FRAMEBUFFER,null),A.deleteFramebuffer(w.handle),w.handle=null,w.depth&&(w.depth.dispose(),w.depth=null),w._depth_rb&&(A.deleteRenderbuffer(w._depth_rb),w._depth_rb=null);for(var F=0;F<w.color.length;++F)w.color[F].dispose(),w.color[F]=null;w._color_rb&&(A.deleteRenderbuffer(w._color_rb),w._color_rb=null),c(A,x),g(q)}c(A,x)}t(m,"rebuildFBO");function y(w,x,A,S,k,L,P,D){this.gl=w,this._shape=[x|0,A|0],this._destroyed=!1,this._ext=D,this.color=new Array(k);for(var B=0;B<k;++B)this.color[B]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=S,this._useDepth=L,this._useStencil=P;var z=this,R=[x|0,A|0];Object.defineProperties(R,{0:{get:function(){return z._shape[0]},set:function(F){return z.width=F}},1:{get:function(){return z._shape[1]},set:function(F){return z.height=F}}}),this._shapeVector=R,m(this)}t(y,"Framebuffer");var T=y.prototype;function _(w,x,A){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(w._shape[0]===x&&w._shape[1]===A)){var S=w.gl,k=S.getParameter(S.MAX_RENDERBUFFER_SIZE);if(x<0||x>k||A<0||A>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=x,w._shape[1]=A;for(var L=v(S),P=0;P<w.color.length;++P)w.color[P].shape=w._shape;w._color_rb&&(S.bindRenderbuffer(S.RENDERBUFFER,w._color_rb),S.renderbufferStorage(S.RENDERBUFFER,S.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(S.bindRenderbuffer(S.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&S.renderbufferStorage(S.RENDERBUFFER,S.STENCIL_INDEX,w._shape[0],w._shape[1])),S.bindFramebuffer(S.FRAMEBUFFER,w.handle);var D=S.checkFramebufferStatus(S.FRAMEBUFFER);D!==S.FRAMEBUFFER_COMPLETE&&(w.dispose(),c(S,L),g(D)),c(S,L)}}t(_,"reshapeFBO"),Object.defineProperties(T,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[w|0,w|0]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var x=w[0]|0,A=w[1]|0;return _(this,x,A),[x,A]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return w=w|0,_(this,w,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w=w|0,_(this,this._shape[0],w),w},enumerable:!1}}),T.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},T.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var x=0;x<this.color.length;++x)this.color[x].dispose(),this.color[x]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(w,x,A,S){l||(l=w.FRAMEBUFFER_UNSUPPORTED,u=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,f=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=w.getExtension("WEBGL_draw_buffers");if(!a&&k&&d(w,k),Array.isArray(x)&&(S=A,A=x[1]|0,x=x[0]|0),typeof x!="number")throw new Error("gl-fbo: Missing shape parameter");var L=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(x<0||x>L||A<0||A>L)throw new Error("gl-fbo: Parameters are too large for FBO");S=S||{};var P=1;if("color"in S){if(P=Math.max(S.color|0,0),P<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(P>1)if(k){if(P>w.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+P+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var D=w.UNSIGNED_BYTE,B=w.getExtension("OES_texture_float");if(S.float&&P>0){if(!B)throw new Error("gl-fbo: Context does not support floating point textures");D=w.FLOAT}else S.preferFloat&&P>0&&B&&(D=w.FLOAT);var z=!0;"depth"in S&&(z=!!S.depth);var R=!1;return"stencil"in S&&(R=!!S.stencil),new y(w,x,A,D,P,z,R,k)}t(M,"createFBO")},{"gl-texture2d":146}],87:[function(n,i,s){var o=n("sprintf-js").sprintf,a=n("gl-constants/lookup"),l=n("glsl-shader-name"),u=n("add-line-numbers");i.exports=f;function f(h,v,c){var d=l(v)||"of unknown name (see npm glsl-shader-name)",g="unknown type";c!==void 0&&(g=c===a.FRAGMENT_SHADER?"fragment":"vertex");for(var p=o(`Error compiling %s shader %s:
`,g,d),b=o("%s%s",p,h),m=h.split(`
`),y={},T=0;T<m.length;T++){var _=m[T];if(!(_===""||_==="\0")){var M=parseInt(_.split(":")[2]);if(isNaN(M))throw new Error(o("Could not parse error: %s",_));y[M]=_}}for(var w=u(v).split(`
`),T=0;T<w.length;T++)if(!(!y[T+3]&&!y[T+2]&&!y[T+1])){var x=w[T];if(p+=x+`
`,y[T+1]){var A=y[T+1];A=A.substr(A.split(":",3).join(":").length+1).trim(),p+=o(`^^^ %s

`,A)}}return{long:p.trim(),short:b.trim()}}t(f,"formatCompilerError")},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(n,i,s){i.exports=g;var o=n("binary-search-bounds"),a=n("iota-array"),l=n("typedarray-pool"),u=n("gl-shader"),f=n("gl-buffer"),h=n("./lib/shaders");function v(p,b,m,y,T,_,M){this.plot=p,this.shader=b,this.pickShader=m,this.positionBuffer=y,this.weightBuffer=T,this.colorBuffer=_,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}t(v,"GLHeatmap2D");var c=v.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];c.draw=function(){var p=[1,0,0,0,1,0,0,0,1];return function(){var b=this.plot,m=this.shader,y=this.bounds,T=this.numVertices;if(!(T<=0)){var _=b.gl,M=b.dataBox,w=y[2]-y[0],x=y[3]-y[1],A=M[2]-M[0],S=M[3]-M[1];p[0]=2*w/A,p[4]=2*x/S,p[6]=2*(y[0]-M[0])/A-1,p[7]=2*(y[1]-M[1])/S-1,m.bind();var k=m.uniforms;k.viewTransform=p,k.shape=this.shape;var L=m.attributes;this.positionBuffer.bind(),L.position.pointer(),this.weightBuffer.bind(),L.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),L.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,T)}}}(),c.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(m){var y=this.plot,T=this.pickShader,_=this.bounds,M=this.numVertices;if(!(M<=0)){var w=y.gl,x=y.dataBox,A=_[2]-_[0],S=_[3]-_[1],k=x[2]-x[0],L=x[3]-x[1];p[0]=2*A/k,p[4]=2*S/L,p[6]=2*(_[0]-x[0])/k-1,p[7]=2*(_[1]-x[1])/L-1;for(var P=0;P<4;++P)b[P]=m>>P*8&255;this.pickOffset=m,T.bind();var D=T.uniforms;D.viewTransform=p,D.pickOffset=b,D.shape=this.shape;var B=T.attributes;return this.positionBuffer.bind(),B.position.pointer(),this.weightBuffer.bind(),B.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),B.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,M),m+this.shape[0]*this.shape[1]}}}(),c.pick=function(p,b,m){var y=this.pickOffset,T=this.shape[0]*this.shape[1];if(m<y||m>=y+T)return null;var _=m-y,M=this.xData,w=this.yData;return{object:this,pointId:_,dataCoord:[M[_%this.shape[0]],w[_/this.shape[0]|0]]}},c.update=function(p){p=p||{};var b=p.shape||[0,0],m=p.x||a(b[0]),y=p.y||a(b[1]),T=p.z||new Float32Array(b[0]*b[1]),_=p.zsmooth!==!1;this.xData=m,this.yData=y;var M=p.colorLevels||[0],w=p.colorValues||[0,0,0,1],x=M.length,A=this.bounds,S,k,L,P;_?(S=A[0]=m[0],k=A[1]=y[0],L=A[2]=m[m.length-1],P=A[3]=y[y.length-1]):(S=A[0]=m[0]+(m[1]-m[0])/2,k=A[1]=y[0]+(y[1]-y[0])/2,L=A[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,P=A[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var D=1/(L-S),B=1/(P-k),z=b[0],R=b[1];this.shape=[z,R];var F=(_?(z-1)*(R-1):z*R)*(d.length>>>1);this.numVertices=F;for(var O=l.mallocUint8(F*4),q=l.mallocFloat32(F*2),H=l.mallocUint8(F*2),j=l.mallocUint32(F),X=0,G=_?z-1:z,$=_?R-1:R,te=0;te<$;++te){var ee,ie;_?(ee=B*(y[te]-k),ie=B*(y[te+1]-k)):(ee=te<R-1?B*(y[te]-(y[te+1]-y[te])/2-k):B*(y[te]-(y[te]-y[te-1])/2-k),ie=te<R-1?B*(y[te]+(y[te+1]-y[te])/2-k):B*(y[te]+(y[te]-y[te-1])/2-k));for(var se=0;se<G;++se){var W,ne;_?(W=D*(m[se]-S),ne=D*(m[se+1]-S)):(W=se<z-1?D*(m[se]-(m[se+1]-m[se])/2-S):D*(m[se]-(m[se]-m[se-1])/2-S),ne=se<z-1?D*(m[se]+(m[se+1]-m[se])/2-S):D*(m[se]+(m[se]-m[se-1])/2-S));for(var he=0;he<d.length;he+=2){var re=d[he],ae=d[he+1],fe=_?(te+ae)*z+(se+re):te*z+se,ce=T[fe],xe=o.le(M,ce),Te,me,pe,oe;if(xe<0)Te=w[0],me=w[1],pe=w[2],oe=w[3];else if(xe===x-1)Te=w[4*x-4],me=w[4*x-3],pe=w[4*x-2],oe=w[4*x-1];else{var de=(ce-M[xe])/(M[xe+1]-M[xe]),ye=1-de,we=4*xe,Ee=4*(xe+1);Te=ye*w[we]+de*w[Ee],me=ye*w[we+1]+de*w[Ee+1],pe=ye*w[we+2]+de*w[Ee+2],oe=ye*w[we+3]+de*w[Ee+3]}O[4*X]=255*Te,O[4*X+1]=255*me,O[4*X+2]=255*pe,O[4*X+3]=255*oe,q[2*X]=W*.5+ne*.5,q[2*X+1]=ee*.5+ie*.5,H[2*X]=re,H[2*X+1]=ae,j[X]=te*z+se,X+=1}}}this.positionBuffer.update(q),this.weightBuffer.update(H),this.colorBuffer.update(O),this.idBuffer.update(j),l.free(q),l.free(O),l.free(H),l.free(j)},c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function g(p,b){var m=p.gl,y=u(m,h.vertex,h.fragment),T=u(m,h.pickVertex,h.pickFragment),_=f(m),M=f(m),w=f(m),x=f(m),A=new v(p,y,T,_,M,w,x);return A.update(b),p.addObject(A),A}t(g,"createHeatmap2D")},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(n,i,s){var o=n("glslify");i.exports={fragment:o([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(n,i,s){var o=n("glslify"),a=n("gl-shader"),l=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),f=o([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(v){return a(v,l,u,null,h)},s.createPickShader=function(v){return a(v,l,f,null,h)}},{"gl-shader":132,glslify:231}],91:[function(n,i,s){i.exports=w;var o=n("gl-buffer"),a=n("gl-vao"),l=n("gl-texture2d"),u=new Uint8Array(4),f=new Float32Array(u.buffer);function h(x,A,S,k){return u[0]=k,u[1]=S,u[2]=A,u[3]=x,f[0]}t(h,"unpackFloat");var v=n("binary-search-bounds"),c=n("ndarray"),d=n("./lib/shaders"),g=d.createShader,p=d.createPickShader,b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(x,A){for(var S=0,k=0;k<3;++k){var L=x[k]-A[k];S+=L*L}return Math.sqrt(S)}t(m,"distance");function y(x){for(var A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)A[0][S]=Math.max(x[0][S],A[0][S]),A[1][S]=Math.min(x[1][S],A[1][S]);return A}t(y,"filterClipBounds");function T(x,A,S,k){this.arcLength=x,this.position=A,this.index=S,this.dataCoordinate=k}t(T,"PickResult");function _(x,A,S,k,L,P){this.gl=x,this.shader=A,this.pickShader=S,this.buffer=k,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}t(_,"LinePlot");var M=_.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(x){this.pickId=x},M.drawTransparent=M.draw=function(x){if(!!this.vertexCount){var A=this.gl,S=this.shader,k=this.vao;S.bind(),S.uniforms={model:x.model||b,view:x.view||b,projection:x.projection||b,clipBounds:y(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[A.drawingBufferWidth,A.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(A.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},M.drawPick=function(x){if(!!this.vertexCount){var A=this.gl,S=this.pickShader,k=this.vao;S.bind(),S.uniforms={model:x.model||b,view:x.view||b,projection:x.projection||b,pickId:this.pickId,clipBounds:y(this.clipBounds),screenShape:[A.drawingBufferWidth,A.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(A.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},M.update=function(x){var A,S;this.dirty=!0;var k=!!x.connectGaps;"dashScale"in x&&(this.dashScale=x.dashScale),this.hasAlpha=!1,"opacity"in x&&(this.opacity=+x.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],P=[],D=[],B=0,z=0,R=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=x.position||x.positions;if(F){var O=x.color||x.colors||[0,0,0,1],q=x.lineWidth||1,H=!1;e:for(A=1;A<F.length;++A){var j=F[A-1],X=F[A];for(P.push(B),D.push(j.slice()),S=0;S<3;++S){if(isNaN(j[S])||isNaN(X[S])||!isFinite(j[S])||!isFinite(X[S])){if(!k&&L.length>0){for(var G=0;G<24;++G)L.push(L[L.length-12]);z+=2,H=!0}continue e}R[0][S]=Math.min(R[0][S],j[S],X[S]),R[1][S]=Math.max(R[1][S],j[S],X[S])}var $,te;Array.isArray(O[0])?($=O.length>A-1?O[A-1]:O.length>0?O[O.length-1]:[0,0,0,1],te=O.length>A?O[A]:O.length>0?O[O.length-1]:[0,0,0,1]):$=te=O,$.length===3&&($=[$[0],$[1],$[2],1]),te.length===3&&(te=[te[0],te[1],te[2],1]),!this.hasAlpha&&$[3]<1&&(this.hasAlpha=!0);var ee;Array.isArray(q)?ee=q.length>A-1?q[A-1]:q.length>0?q[q.length-1]:[0,0,0,1]:ee=q;var ie=B;if(B+=m(j,X),H){for(S=0;S<2;++S)L.push(j[0],j[1],j[2],X[0],X[1],X[2],ie,ee,$[0],$[1],$[2],$[3]);z+=2,H=!1}L.push(j[0],j[1],j[2],X[0],X[1],X[2],ie,ee,$[0],$[1],$[2],$[3],j[0],j[1],j[2],X[0],X[1],X[2],ie,-ee,$[0],$[1],$[2],$[3],X[0],X[1],X[2],j[0],j[1],j[2],B,-ee,te[0],te[1],te[2],te[3],X[0],X[1],X[2],j[0],j[1],j[2],B,ee,te[0],te[1],te[2],te[3]),z+=4}}if(this.buffer.update(L),P.push(B),D.push(F[F.length-1].slice()),this.bounds=R,this.vertexCount=z,this.points=D,this.arcLength=P,"dashes"in x){var se=x.dashes,W=se.slice();for(W.unshift(0),A=1;A<W.length;++A)W[A]=W[A-1]+W[A];var ne=c(new Array(256*4),[256,1,4]);for(A=0;A<256;++A){for(S=0;S<4;++S)ne.set(A,0,S,0);v.le(W,W[W.length-1]*A/255)&1?ne.set(A,0,0,0):ne.set(A,0,0,255)}this.texture.setPixels(ne)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(x){if(!x||x.id!==this.pickId)return null;var A=h(x.value[0],x.value[1],x.value[2],0),S=v.le(this.arcLength,A);if(S<0)return null;if(S===this.arcLength.length-1)return new T(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),S);for(var k=this.points[S],L=this.points[Math.min(S+1,this.points.length-1)],P=(A-this.arcLength[S])/(this.arcLength[S+1]-this.arcLength[S]),D=1-P,B=[0,0,0],z=0;z<3;++z)B[z]=D*k[z]+P*L[z];var R=Math.min(P<.5?S:S+1,this.points.length-1);return new T(A,B,R,this.points[R])};function w(x){var A=x.gl||x.scene&&x.scene.gl,S=g(A);S.attributes.position.location=0,S.attributes.nextPosition.location=1,S.attributes.arcLength.location=2,S.attributes.lineWidth.location=3,S.attributes.color.location=4;var k=p(A);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;for(var L=o(A),P=a(A,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),D=c(new Array(256*4),[256,1,4]),B=0;B<256*4;++B)D.data[B]=255;var z=l(A,D);z.wrap=A.REPEAT;var R=new _(A,S,k,L,P,z);return R.update(x),R}t(w,"createLinePlot")},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(n,i,s){i.exports=o;function o(a){var l=new Float32Array(16);return l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[4]=a[4],l[5]=a[5],l[6]=a[6],l[7]=a[7],l[8]=a[8],l[9]=a[9],l[10]=a[10],l[11]=a[11],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15],l}t(o,"clone")},{}],93:[function(n,i,s){i.exports=o;function o(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}t(o,"create")},{}],94:[function(n,i,s){i.exports=o;function o(a){var l=a[0],u=a[1],f=a[2],h=a[3],v=a[4],c=a[5],d=a[6],g=a[7],p=a[8],b=a[9],m=a[10],y=a[11],T=a[12],_=a[13],M=a[14],w=a[15],x=l*c-u*v,A=l*d-f*v,S=l*g-h*v,k=u*d-f*c,L=u*g-h*c,P=f*g-h*d,D=p*_-b*T,B=p*M-m*T,z=p*w-y*T,R=b*M-m*_,F=b*w-y*_,O=m*w-y*M;return x*O-A*F+S*R+k*z-L*B+P*D}t(o,"determinant")},{}],95:[function(n,i,s){i.exports=o;function o(a,l){var u=l[0],f=l[1],h=l[2],v=l[3],c=u+u,d=f+f,g=h+h,p=u*c,b=f*c,m=f*d,y=h*c,T=h*d,_=h*g,M=v*c,w=v*d,x=v*g;return a[0]=1-m-_,a[1]=b+x,a[2]=y-w,a[3]=0,a[4]=b-x,a[5]=1-p-_,a[6]=T+M,a[7]=0,a[8]=y+w,a[9]=T-M,a[10]=1-p-m,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}t(o,"fromQuat")},{}],96:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l[0],h=l[1],v=l[2],c=l[3],d=f+f,g=h+h,p=v+v,b=f*d,m=f*g,y=f*p,T=h*g,_=h*p,M=v*p,w=c*d,x=c*g,A=c*p;return a[0]=1-(T+M),a[1]=m+A,a[2]=y-x,a[3]=0,a[4]=m-A,a[5]=1-(b+M),a[6]=_+w,a[7]=0,a[8]=y+x,a[9]=_-w,a[10]=1-(b+T),a[11]=0,a[12]=u[0],a[13]=u[1],a[14]=u[2],a[15]=1,a}t(o,"fromRotationTranslation")},{}],97:[function(n,i,s){i.exports=o;function o(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}t(o,"identity")},{}],98:[function(n,i,s){i.exports=o;function o(a,l){var u=l[0],f=l[1],h=l[2],v=l[3],c=l[4],d=l[5],g=l[6],p=l[7],b=l[8],m=l[9],y=l[10],T=l[11],_=l[12],M=l[13],w=l[14],x=l[15],A=u*d-f*c,S=u*g-h*c,k=u*p-v*c,L=f*g-h*d,P=f*p-v*d,D=h*p-v*g,B=b*M-m*_,z=b*w-y*_,R=b*x-T*_,F=m*w-y*M,O=m*x-T*M,q=y*x-T*w,H=A*q-S*O+k*F+L*R-P*z+D*B;return H?(H=1/H,a[0]=(d*q-g*O+p*F)*H,a[1]=(h*O-f*q-v*F)*H,a[2]=(M*D-w*P+x*L)*H,a[3]=(y*P-m*D-T*L)*H,a[4]=(g*R-c*q-p*z)*H,a[5]=(u*q-h*R+v*z)*H,a[6]=(w*k-_*D-x*S)*H,a[7]=(b*D-y*k+T*S)*H,a[8]=(c*O-d*R+p*B)*H,a[9]=(f*R-u*O-v*B)*H,a[10]=(_*P-M*k+x*A)*H,a[11]=(m*k-b*P-T*A)*H,a[12]=(d*z-c*F-g*B)*H,a[13]=(u*F-f*z+h*B)*H,a[14]=(M*S-_*L-w*A)*H,a[15]=(b*L-m*S+y*A)*H,a):null}t(o,"invert")},{}],99:[function(n,i,s){var o=n("./identity");i.exports=a;function a(l,u,f,h){var v,c,d,g,p,b,m,y,T,_,M=u[0],w=u[1],x=u[2],A=h[0],S=h[1],k=h[2],L=f[0],P=f[1],D=f[2];return Math.abs(M-L)<1e-6&&Math.abs(w-P)<1e-6&&Math.abs(x-D)<1e-6?o(l):(m=M-L,y=w-P,T=x-D,_=1/Math.sqrt(m*m+y*y+T*T),m*=_,y*=_,T*=_,v=S*T-k*y,c=k*m-A*T,d=A*y-S*m,_=Math.sqrt(v*v+c*c+d*d),_?(_=1/_,v*=_,c*=_,d*=_):(v=0,c=0,d=0),g=y*d-T*c,p=T*v-m*d,b=m*c-y*v,_=Math.sqrt(g*g+p*p+b*b),_?(_=1/_,g*=_,p*=_,b*=_):(g=0,p=0,b=0),l[0]=v,l[1]=g,l[2]=m,l[3]=0,l[4]=c,l[5]=p,l[6]=y,l[7]=0,l[8]=d,l[9]=b,l[10]=T,l[11]=0,l[12]=-(v*M+c*w+d*x),l[13]=-(g*M+p*w+b*x),l[14]=-(m*M+y*w+T*x),l[15]=1,l)}t(a,"lookAt")},{"./identity":97}],100:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l[0],h=l[1],v=l[2],c=l[3],d=l[4],g=l[5],p=l[6],b=l[7],m=l[8],y=l[9],T=l[10],_=l[11],M=l[12],w=l[13],x=l[14],A=l[15],S=u[0],k=u[1],L=u[2],P=u[3];return a[0]=S*f+k*d+L*m+P*M,a[1]=S*h+k*g+L*y+P*w,a[2]=S*v+k*p+L*T+P*x,a[3]=S*c+k*b+L*_+P*A,S=u[4],k=u[5],L=u[6],P=u[7],a[4]=S*f+k*d+L*m+P*M,a[5]=S*h+k*g+L*y+P*w,a[6]=S*v+k*p+L*T+P*x,a[7]=S*c+k*b+L*_+P*A,S=u[8],k=u[9],L=u[10],P=u[11],a[8]=S*f+k*d+L*m+P*M,a[9]=S*h+k*g+L*y+P*w,a[10]=S*v+k*p+L*T+P*x,a[11]=S*c+k*b+L*_+P*A,S=u[12],k=u[13],L=u[14],P=u[15],a[12]=S*f+k*d+L*m+P*M,a[13]=S*h+k*g+L*y+P*w,a[14]=S*v+k*p+L*T+P*x,a[15]=S*c+k*b+L*_+P*A,a}t(o,"multiply")},{}],101:[function(n,i,s){i.exports=o;function o(a,l,u,f,h,v,c){var d=1/(l-u),g=1/(f-h),p=1/(v-c);return a[0]=-2*d,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*g,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*p,a[11]=0,a[12]=(l+u)*d,a[13]=(h+f)*g,a[14]=(c+v)*p,a[15]=1,a}t(o,"ortho")},{}],102:[function(n,i,s){i.exports=o;function o(a,l,u,f,h){var v=1/Math.tan(l/2),c=1/(f-h);return a[0]=v/u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=v,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(h+f)*c,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*h*f*c,a[15]=0,a}t(o,"perspective")},{}],103:[function(n,i,s){i.exports=o;function o(a,l,u,f){var h=f[0],v=f[1],c=f[2],d=Math.sqrt(h*h+v*v+c*c),g,p,b,m,y,T,_,M,w,x,A,S,k,L,P,D,B,z,R,F,O,q,H,j;return Math.abs(d)<1e-6?null:(d=1/d,h*=d,v*=d,c*=d,g=Math.sin(u),p=Math.cos(u),b=1-p,m=l[0],y=l[1],T=l[2],_=l[3],M=l[4],w=l[5],x=l[6],A=l[7],S=l[8],k=l[9],L=l[10],P=l[11],D=h*h*b+p,B=v*h*b+c*g,z=c*h*b-v*g,R=h*v*b-c*g,F=v*v*b+p,O=c*v*b+h*g,q=h*c*b+v*g,H=v*c*b-h*g,j=c*c*b+p,a[0]=m*D+M*B+S*z,a[1]=y*D+w*B+k*z,a[2]=T*D+x*B+L*z,a[3]=_*D+A*B+P*z,a[4]=m*R+M*F+S*O,a[5]=y*R+w*F+k*O,a[6]=T*R+x*F+L*O,a[7]=_*R+A*F+P*O,a[8]=m*q+M*H+S*j,a[9]=y*q+w*H+k*j,a[10]=T*q+x*H+L*j,a[11]=_*q+A*H+P*j,l!==a&&(a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]),a)}t(o,"rotate")},{}],104:[function(n,i,s){i.exports=o;function o(a,l,u){var f=Math.sin(u),h=Math.cos(u),v=l[4],c=l[5],d=l[6],g=l[7],p=l[8],b=l[9],m=l[10],y=l[11];return l!==a&&(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]),a[4]=v*h+p*f,a[5]=c*h+b*f,a[6]=d*h+m*f,a[7]=g*h+y*f,a[8]=p*h-v*f,a[9]=b*h-c*f,a[10]=m*h-d*f,a[11]=y*h-g*f,a}t(o,"rotateX")},{}],105:[function(n,i,s){i.exports=o;function o(a,l,u){var f=Math.sin(u),h=Math.cos(u),v=l[0],c=l[1],d=l[2],g=l[3],p=l[8],b=l[9],m=l[10],y=l[11];return l!==a&&(a[4]=l[4],a[5]=l[5],a[6]=l[6],a[7]=l[7],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]),a[0]=v*h-p*f,a[1]=c*h-b*f,a[2]=d*h-m*f,a[3]=g*h-y*f,a[8]=v*f+p*h,a[9]=c*f+b*h,a[10]=d*f+m*h,a[11]=g*f+y*h,a}t(o,"rotateY")},{}],106:[function(n,i,s){i.exports=o;function o(a,l,u){var f=Math.sin(u),h=Math.cos(u),v=l[0],c=l[1],d=l[2],g=l[3],p=l[4],b=l[5],m=l[6],y=l[7];return l!==a&&(a[8]=l[8],a[9]=l[9],a[10]=l[10],a[11]=l[11],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]),a[0]=v*h+p*f,a[1]=c*h+b*f,a[2]=d*h+m*f,a[3]=g*h+y*f,a[4]=p*h-v*f,a[5]=b*h-c*f,a[6]=m*h-d*f,a[7]=y*h-g*f,a}t(o,"rotateZ")},{}],107:[function(n,i,s){i.exports=o;function o(a,l,u){var f=u[0],h=u[1],v=u[2];return a[0]=l[0]*f,a[1]=l[1]*f,a[2]=l[2]*f,a[3]=l[3]*f,a[4]=l[4]*h,a[5]=l[5]*h,a[6]=l[6]*h,a[7]=l[7]*h,a[8]=l[8]*v,a[9]=l[9]*v,a[10]=l[10]*v,a[11]=l[11]*v,a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15],a}t(o,"scale")},{}],108:[function(n,i,s){i.exports=o;function o(a,l,u){var f=u[0],h=u[1],v=u[2],c,d,g,p,b,m,y,T,_,M,w,x;return l===a?(a[12]=l[0]*f+l[4]*h+l[8]*v+l[12],a[13]=l[1]*f+l[5]*h+l[9]*v+l[13],a[14]=l[2]*f+l[6]*h+l[10]*v+l[14],a[15]=l[3]*f+l[7]*h+l[11]*v+l[15]):(c=l[0],d=l[1],g=l[2],p=l[3],b=l[4],m=l[5],y=l[6],T=l[7],_=l[8],M=l[9],w=l[10],x=l[11],a[0]=c,a[1]=d,a[2]=g,a[3]=p,a[4]=b,a[5]=m,a[6]=y,a[7]=T,a[8]=_,a[9]=M,a[10]=w,a[11]=x,a[12]=c*f+b*h+_*v+l[12],a[13]=d*f+m*h+M*v+l[13],a[14]=g*f+y*h+w*v+l[14],a[15]=p*f+T*h+x*v+l[15]),a}t(o,"translate")},{}],109:[function(n,i,s){i.exports=o;function o(a,l){if(a===l){var u=l[1],f=l[2],h=l[3],v=l[6],c=l[7],d=l[11];a[1]=l[4],a[2]=l[8],a[3]=l[12],a[4]=u,a[6]=l[9],a[7]=l[13],a[8]=f,a[9]=v,a[11]=l[14],a[12]=h,a[13]=c,a[14]=d}else a[0]=l[0],a[1]=l[4],a[2]=l[8],a[3]=l[12],a[4]=l[1],a[5]=l[5],a[6]=l[9],a[7]=l[13],a[8]=l[2],a[9]=l[6],a[10]=l[10],a[11]=l[14],a[12]=l[3],a[13]=l[7],a[14]=l[11],a[15]=l[15];return a}t(o,"transpose")},{}],110:[function(n,i,s){var o=n("barycentric"),a=n("polytope-closest-point/lib/closest_point_2d.js");i.exports=v;function l(c,d){for(var g=[0,0,0,0],p=0;p<4;++p)for(var b=0;b<4;++b)g[b]+=c[4*p+b]*d[p];return g}t(l,"xformMatrix");function u(c,d,g,p,b){for(var m=l(p,l(g,l(d,[c[0],c[1],c[2],1]))),y=0;y<3;++y)m[y]/=m[3];return[.5*b[0]*(1+m[0]),.5*b[1]*(1-m[1])]}t(u,"projectVertex");function f(c,d){if(c.length===2){for(var g=0,p=0,b=0;b<2;++b)g+=Math.pow(d[b]-c[0][b],2),p+=Math.pow(d[b]-c[1][b],2);return g=Math.sqrt(g),p=Math.sqrt(p),g+p<1e-6?[1,0]:[p/(g+p),g/(p+g)]}else if(c.length===3){var m=[0,0];return a(c[0],c[1],c[2],d,m),o(c,m)}return[]}t(f,"barycentricCoord");function h(c,d){for(var g=[0,0,0],p=0;p<c.length;++p)for(var b=c[p],m=d[p],y=0;y<3;++y)g[y]+=m*b[y];return g}t(h,"interpolate");function v(c,d,g,p,b,m){if(c.length===1)return[0,c[0].slice()];for(var y=new Array(c.length),T=0;T<c.length;++T)y[T]=u(c[T],g,p,b,m);for(var _=0,M=1/0,T=0;T<y.length;++T){for(var w=0,x=0;x<2;++x)w+=Math.pow(y[T][x]-d[x],2);w<M&&(M=w,_=T)}for(var A=f(y,d),S=0,T=0;T<3;++T){if(A[T]<-.001||A[T]>1.0001)return null;S+=A[T]}return Math.abs(S-1)>.001?null:[_,h(c,A),A]}t(v,"closestPointToPickLocation")},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(n,i,s){var o=n("glslify"),a=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),l=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),u=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),f=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),v=o([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),d=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),p=o([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),b=o([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:u,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:h,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:c,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:g,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:p,fragment:b,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(n,i,s){var o=1e-6,a=1e-6,l=n("gl-shader"),u=n("gl-buffer"),f=n("gl-vao"),h=n("gl-texture2d"),v=n("normals"),c=n("gl-mat4/multiply"),d=n("gl-mat4/invert"),g=n("ndarray"),p=n("colormap"),b=n("simplicial-complex-contour"),m=n("typedarray-pool"),y=n("./lib/shaders"),T=n("./lib/closest-point"),_=y.meshShader,M=y.wireShader,w=y.pointShader,x=y.pickShader,A=y.pointPickShader,S=y.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(G,$,te,ee,ie,se,W,ne,he,re,ae,fe,ce,xe,Te,me,pe,oe,de,ye,we,Ee,De,Fe,qe,Je,Ge){this.gl=G,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=$,this.dirty=!0,this.triShader=te,this.lineShader=ee,this.pointShader=ie,this.pickShader=se,this.pointPickShader=W,this.contourShader=ne,this.trianglePositions=he,this.triangleColors=ae,this.triangleNormals=ce,this.triangleUVs=fe,this.triangleIds=re,this.triangleVAO=xe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Te,this.edgeColors=pe,this.edgeUVs=oe,this.edgeIds=me,this.edgeVAO=de,this.edgeCount=0,this.pointPositions=ye,this.pointColors=Ee,this.pointUVs=De,this.pointSizes=Fe,this.pointIds=we,this.pointVAO=qe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Je,this.contourVAO=Ge,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}t(L,"SimplicialMesh");var P=L.prototype;P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(G){this.pickId=G};function D(G,$){if(!$||!$.length)return 1;for(var te=0;te<$.length;++te){if($.length<2)return 1;if($[te][0]===G)return $[te][1];if($[te][0]>G&&te>0){var ee=($[te][0]-G)/($[te][0]-$[te-1][0]);return $[te][1]*(1-ee)+ee*$[te-1][1]}}return 1}t(D,"getOpacityFromScale");function B(G,$){for(var te=p({colormap:G,nshades:256,format:"rgba"}),ee=new Uint8Array(256*4),ie=0;ie<256;++ie){for(var se=te[ie],W=0;W<3;++W)ee[4*ie+W]=se[W];$?ee[4*ie+3]=255*D(ie/255,$):ee[4*ie+3]=255*se[3]}return g(ee,[256,256,4],[4,0,1])}t(B,"genColormap");function z(G){for(var $=G.length,te=new Array($),ee=0;ee<$;++ee)te[ee]=G[ee][2];return te}t(z,"takeZComponent"),P.highlight=function(G){if(!G||!this.contourEnable){this.contourCount=0;return}for(var $=b(this.cells,this.intensity,G.intensity),te=$.cells,ee=$.vertexIds,ie=$.vertexWeights,se=te.length,W=m.mallocFloat32(2*3*se),ne=0,he=0;he<se;++he)for(var re=te[he],ae=0;ae<2;++ae){var fe=re[0];re.length===2&&(fe=re[ae]);for(var ce=ee[fe][0],xe=ee[fe][1],Te=ie[fe],me=1-Te,pe=this.positions[ce],oe=this.positions[xe],de=0;de<3;++de)W[ne++]=Te*pe[de]+me*oe[de]}this.contourCount=ne/3|0,this.contourPositions.update(W.subarray(0,ne)),m.free(W)},P.update=function(G){G=G||{};var $=this.gl;this.dirty=!0,"contourEnable"in G&&(this.contourEnable=G.contourEnable),"contourColor"in G&&(this.contourColor=G.contourColor),"lineWidth"in G&&(this.lineWidth=G.lineWidth),"lightPosition"in G&&(this.lightPosition=G.lightPosition),this.hasAlpha=!1,"opacity"in G&&(this.opacity=G.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in G&&(this.opacityscale=G.opacityscale,this.hasAlpha=!0),"ambient"in G&&(this.ambientLight=G.ambient),"diffuse"in G&&(this.diffuseLight=G.diffuse),"specular"in G&&(this.specularLight=G.specular),"roughness"in G&&(this.roughness=G.roughness),"fresnel"in G&&(this.fresnel=G.fresnel),G.texture?(this.texture.dispose(),this.texture=h($,G.texture)):G.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=$.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=$.LINEAR,this.texture.setPixels(B(G.colormap,this.opacityscale)),this.texture.generateMipmap());var te=G.cells,ee=G.positions;if(!ee||!te)return;var ie=[],se=[],W=[],ne=[],he=[],re=[],ae=[],fe=[],ce=[],xe=[],Te=[],me=[],pe=[],oe=[];this.cells=te,this.positions=ee;var de=G.vertexNormals,ye=G.cellNormals,we=G.vertexNormalsEpsilon===void 0?o:G.vertexNormalsEpsilon,Ee=G.faceNormalsEpsilon===void 0?a:G.faceNormalsEpsilon;G.useFacetNormals&&!ye&&(ye=v.faceNormals(te,ee,Ee)),!ye&&!de&&(de=v.vertexNormals(te,ee,we));var De=G.vertexColors,Fe=G.cellColors,qe=G.meshColor||[1,1,1,1],Je=G.vertexUVs,Ge=G.vertexIntensity,et=G.cellUVs,Ue=G.cellIntensity,Ye=1/0,$e=-1/0;if(!Je&&!et)if(Ge)if(G.vertexIntensityBounds)Ye=+G.vertexIntensityBounds[0],$e=+G.vertexIntensityBounds[1];else for(var Ct=0;Ct<Ge.length;++Ct){var It=Ge[Ct];Ye=Math.min(Ye,It),$e=Math.max($e,It)}else if(Ue)if(G.cellIntensityBounds)Ye=+G.cellIntensityBounds[0],$e=+G.cellIntensityBounds[1];else for(var Ct=0;Ct<Ue.length;++Ct){var It=Ue[Ct];Ye=Math.min(Ye,It),$e=Math.max($e,It)}else for(var Ct=0;Ct<ee.length;++Ct){var It=ee[Ct][2];Ye=Math.min(Ye,It),$e=Math.max($e,It)}Ge?this.intensity=Ge:Ue?this.intensity=Ue:this.intensity=z(ee),this.pickVertex=!(Ue||Fe);var Vt=G.pointSizes,$t=G.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ct=0;Ct<ee.length;++Ct)for(var Gt=ee[Ct],Jt=0;Jt<3;++Jt)isNaN(Gt[Jt])||!isFinite(Gt[Jt])||(this.bounds[0][Jt]=Math.min(this.bounds[0][Jt],Gt[Jt]),this.bounds[1][Jt]=Math.max(this.bounds[1][Jt],Gt[Jt]));var kt=0,ft=0,zt=0;e:for(var Ct=0;Ct<te.length;++Ct){var Pt=te[Ct];switch(Pt.length){case 1:for(var Et=Pt[0],Gt=ee[Et],Jt=0;Jt<3;++Jt)if(isNaN(Gt[Jt])||!isFinite(Gt[Jt]))continue e;xe.push(Gt[0],Gt[1],Gt[2]);var Wt;De?Wt=De[Et]:Fe?Wt=Fe[Ct]:Wt=qe,this.opacityscale&&Ge?se.push(Wt[0],Wt[1],Wt[2],this.opacity*D((Ge[Et]-Ye)/($e-Ye),this.opacityscale)):Wt.length===3?Te.push(Wt[0],Wt[1],Wt[2],this.opacity):(Te.push(Wt[0],Wt[1],Wt[2],Wt[3]*this.opacity),Wt[3]<1&&(this.hasAlpha=!0));var ze;Je?ze=Je[Et]:Ge?ze=[(Ge[Et]-Ye)/($e-Ye),0]:et?ze=et[Ct]:Ue?ze=[(Ue[Ct]-Ye)/($e-Ye),0]:ze=[(Gt[2]-Ye)/($e-Ye),0],me.push(ze[0],ze[1]),Vt?pe.push(Vt[Et]):pe.push($t),oe.push(Ct),zt+=1;break;case 2:for(var Jt=0;Jt<2;++Jt)for(var Et=Pt[Jt],Gt=ee[Et],tt=0;tt<3;++tt)if(isNaN(Gt[tt])||!isFinite(Gt[tt]))continue e;for(var Jt=0;Jt<2;++Jt){var Et=Pt[Jt],Gt=ee[Et];re.push(Gt[0],Gt[1],Gt[2]);var Wt;De?Wt=De[Et]:Fe?Wt=Fe[Ct]:Wt=qe,this.opacityscale&&Ge?se.push(Wt[0],Wt[1],Wt[2],this.opacity*D((Ge[Et]-Ye)/($e-Ye),this.opacityscale)):Wt.length===3?ae.push(Wt[0],Wt[1],Wt[2],this.opacity):(ae.push(Wt[0],Wt[1],Wt[2],Wt[3]*this.opacity),Wt[3]<1&&(this.hasAlpha=!0));var ze;Je?ze=Je[Et]:Ge?ze=[(Ge[Et]-Ye)/($e-Ye),0]:et?ze=et[Ct]:Ue?ze=[(Ue[Ct]-Ye)/($e-Ye),0]:ze=[(Gt[2]-Ye)/($e-Ye),0],fe.push(ze[0],ze[1]),ce.push(Ct)}ft+=1;break;case 3:for(var Jt=0;Jt<3;++Jt)for(var Et=Pt[Jt],Gt=ee[Et],tt=0;tt<3;++tt)if(isNaN(Gt[tt])||!isFinite(Gt[tt]))continue e;for(var Jt=0;Jt<3;++Jt){var Et=Pt[2-Jt],Gt=ee[Et];ie.push(Gt[0],Gt[1],Gt[2]);var Wt;De?Wt=De[Et]:Fe?Wt=Fe[Ct]:Wt=qe,Wt?this.opacityscale&&Ge?se.push(Wt[0],Wt[1],Wt[2],this.opacity*D((Ge[Et]-Ye)/($e-Ye),this.opacityscale)):Wt.length===3?se.push(Wt[0],Wt[1],Wt[2],this.opacity):(se.push(Wt[0],Wt[1],Wt[2],Wt[3]*this.opacity),Wt[3]<1&&(this.hasAlpha=!0)):se.push(.5,.5,.5,1);var ze;Je?ze=Je[Et]:Ge?ze=[(Ge[Et]-Ye)/($e-Ye),0]:et?ze=et[Ct]:Ue?ze=[(Ue[Ct]-Ye)/($e-Ye),0]:ze=[(Gt[2]-Ye)/($e-Ye),0],ne.push(ze[0],ze[1]);var at;de?at=de[Et]:at=ye[Ct],W.push(at[0],at[1],at[2]),he.push(Ct)}kt+=1;break}}this.pointCount=zt,this.edgeCount=ft,this.triangleCount=kt,this.pointPositions.update(xe),this.pointColors.update(Te),this.pointUVs.update(me),this.pointSizes.update(pe),this.pointIds.update(new Uint32Array(oe)),this.edgePositions.update(re),this.edgeColors.update(ae),this.edgeUVs.update(fe),this.edgeIds.update(new Uint32Array(ce)),this.trianglePositions.update(ie),this.triangleColors.update(se),this.triangleUVs.update(ne),this.triangleNormals.update(W),this.triangleIds.update(new Uint32Array(he))},P.drawTransparent=P.draw=function(G){G=G||{};for(var $=this.gl,te=G.model||k,ee=G.view||k,ie=G.projection||k,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],W=0;W<3;++W)se[0][W]=Math.max(se[0][W],this.clipBounds[0][W]),se[1][W]=Math.min(se[1][W],this.clipBounds[1][W]);var ne={model:te,view:ee,projection:ie,inverseModel:k.slice(),clipBounds:se,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ne.inverseModel=d(ne.inverseModel,ne.model),$.disable($.CULL_FACE),this.texture.bind(0);var he=new Array(16);c(he,ne.view,ne.model),c(he,ne.projection,he),d(he,he);for(var W=0;W<3;++W)ne.eyePosition[W]=he[12+W]/he[15];for(var re=he[15],W=0;W<3;++W)re+=this.lightPosition[W]*he[4*W+3];for(var W=0;W<3;++W){for(var ae=he[12+W],fe=0;fe<3;++fe)ae+=he[4*fe+W]*this.lightPosition[fe];ne.lightPosition[W]=ae/re}if(this.triangleCount>0){var ce=this.triShader;ce.bind(),ce.uniforms=ne,this.triangleVAO.bind(),$.drawArrays($.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ce=this.lineShader;ce.bind(),ce.uniforms=ne,this.edgeVAO.bind(),$.lineWidth(this.lineWidth*this.pixelRatio),$.drawArrays($.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ce=this.pointShader;ce.bind(),ce.uniforms=ne,this.pointVAO.bind(),$.drawArrays($.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ce=this.contourShader;ce.bind(),ce.uniforms=ne,this.contourVAO.bind(),$.drawArrays($.LINES,0,this.contourCount),this.contourVAO.unbind()}},P.drawPick=function(G){G=G||{};for(var $=this.gl,te=G.model||k,ee=G.view||k,ie=G.projection||k,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],W=0;W<3;++W)se[0][W]=Math.max(se[0][W],this.clipBounds[0][W]),se[1][W]=Math.min(se[1][W],this.clipBounds[1][W]);this._model=[].slice.call(te),this._view=[].slice.call(ee),this._projection=[].slice.call(ie),this._resolution=[$.drawingBufferWidth,$.drawingBufferHeight];var ne={model:te,view:ee,projection:ie,clipBounds:se,pickId:this.pickId/255},he=this.pickShader;if(he.bind(),he.uniforms=ne,this.triangleCount>0&&(this.triangleVAO.bind(),$.drawArrays($.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),$.lineWidth(this.lineWidth*this.pixelRatio),$.drawArrays($.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var he=this.pointPickShader;he.bind(),he.uniforms=ne,this.pointVAO.bind(),$.drawArrays($.POINTS,0,this.pointCount),this.pointVAO.unbind()}},P.pick=function(G){if(!G||G.id!==this.pickId)return null;for(var $=G.value[0]+256*G.value[1]+65536*G.value[2],te=this.cells[$],ee=this.positions,ie=new Array(te.length),se=0;se<te.length;++se)ie[se]=ee[te[se]];var W=G.coord[0],ne=G.coord[1];if(!this.pickVertex){var he=this.positions[te[0]],re=this.positions[te[1]],ae=this.positions[te[2]],fe=[(he[0]+re[0]+ae[0])/3,(he[1]+re[1]+ae[1])/3,(he[2]+re[2]+ae[2])/3];return{_cellCenter:!0,position:[W,ne],index:$,cell:te,cellId:$,intensity:this.intensity[$],dataCoordinate:fe}}var ce=T(ie,[W*this.pixelRatio,this._resolution[1]-ne*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ce)return null;for(var xe=ce[2],Te=0,se=0;se<te.length;++se)Te+=xe[se]*this.intensity[te[se]];return{position:ce[1],index:te[ce[0]],cell:te,cellId:$,intensity:Te,dataCoordinate:this.positions[te[ce[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function R(G){var $=l(G,_.vertex,_.fragment);return $.attributes.position.location=0,$.attributes.color.location=2,$.attributes.uv.location=3,$.attributes.normal.location=4,$}t(R,"createMeshShader");function F(G){var $=l(G,M.vertex,M.fragment);return $.attributes.position.location=0,$.attributes.color.location=2,$.attributes.uv.location=3,$}t(F,"createWireShader");function O(G){var $=l(G,w.vertex,w.fragment);return $.attributes.position.location=0,$.attributes.color.location=2,$.attributes.uv.location=3,$.attributes.pointSize.location=4,$}t(O,"createPointShader");function q(G){var $=l(G,x.vertex,x.fragment);return $.attributes.position.location=0,$.attributes.id.location=1,$}t(q,"createPickShader");function H(G){var $=l(G,A.vertex,A.fragment);return $.attributes.position.location=0,$.attributes.id.location=1,$.attributes.pointSize.location=4,$}t(H,"createPointPickShader");function j(G){var $=l(G,S.vertex,S.fragment);return $.attributes.position.location=0,$}t(j,"createContourShader");function X(G,$){arguments.length===1&&($=G,G=$.gl);var te=G.getExtension("OES_standard_derivatives")||G.getExtension("MOZ_OES_standard_derivatives")||G.getExtension("WEBKIT_OES_standard_derivatives");if(!te)throw new Error("derivatives not supported");var ee=R(G),ie=F(G),se=O(G),W=q(G),ne=H(G),he=j(G),re=h(G,g(new Uint8Array([255,255,255,255]),[1,1,4]));re.generateMipmap(),re.minFilter=G.LINEAR_MIPMAP_LINEAR,re.magFilter=G.LINEAR;var ae=u(G),fe=u(G),ce=u(G),xe=u(G),Te=u(G),me=f(G,[{buffer:ae,type:G.FLOAT,size:3},{buffer:Te,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:G.FLOAT,size:4},{buffer:ce,type:G.FLOAT,size:2},{buffer:xe,type:G.FLOAT,size:3}]),pe=u(G),oe=u(G),de=u(G),ye=u(G),we=f(G,[{buffer:pe,type:G.FLOAT,size:3},{buffer:ye,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:G.FLOAT,size:4},{buffer:de,type:G.FLOAT,size:2}]),Ee=u(G),De=u(G),Fe=u(G),qe=u(G),Je=u(G),Ge=f(G,[{buffer:Ee,type:G.FLOAT,size:3},{buffer:Je,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:De,type:G.FLOAT,size:4},{buffer:Fe,type:G.FLOAT,size:2},{buffer:qe,type:G.FLOAT,size:1}]),et=u(G),Ue=f(G,[{buffer:et,type:G.FLOAT,size:3}]),Ye=new L(G,re,ee,ie,se,W,ne,he,ae,Te,fe,ce,xe,me,pe,ye,oe,de,we,Ee,Je,De,Fe,qe,Ge,et,Ue);return Ye.update($),Ye}t(X,"createSimplicialMesh"),i.exports=X},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(n,i,s){i.exports=h;var o=n("gl-buffer"),a=n("gl-shader"),l=n("./shaders");function u(v,c,d){this.plot=v,this.vbo=c,this.shader=d}t(u,"Boxes");var f=u.prototype;f.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},f.drawBox=function(){var v=[0,0],c=[0,0];return function(d,g,p,b,m){var y=this.plot,T=this.shader,_=y.gl;v[0]=d,v[1]=g,c[0]=p,c[1]=b,T.uniforms.lo=v,T.uniforms.hi=c,T.uniforms.color=m,_.drawArrays(_.TRIANGLE_STRIP,0,4)}}(),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var c=v.gl,d=o(c,[0,0,0,1,1,0,1,1]),g=a(c,l.boxVert,l.lineFrag);return new u(v,d,g)}t(h,"createBoxes")},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(n,i,s){i.exports=c;var o=n("gl-buffer"),a=n("gl-shader"),l=n("binary-search-bounds"),u=n("./shaders");function f(d,g,p,b){this.plot=d,this.vbo=g,this.shader=p,this.tickShader=b,this.ticks=[[],[]]}t(f,"Grid");function h(d,g){return d-g}t(h,"compareTickNum");var v=f.prototype;v.draw=function(){var d=[0,0],g=[0,0],p=[0,0];return function(){for(var b=this.plot,m=this.vbo,y=this.shader,T=this.ticks,_=b.gl,M=b._tickBounds,w=b.dataBox,x=b.viewBox,A=b.gridLineWidth,S=b.gridLineColor,k=b.gridLineEnable,L=b.pixelRatio,P=0;P<2;++P){var D=M[P],B=M[P+2],z=B-D,R=.5*(w[P+2]+w[P]),F=w[P+2]-w[P];g[P]=2*z/F,d[P]=2*(D-R)/F}y.bind(),m.bind(),y.attributes.dataCoord.pointer(),y.uniforms.dataShift=d,y.uniforms.dataScale=g;for(var O=0,P=0;P<2;++P){p[0]=p[1]=0,p[P]=1,y.uniforms.dataAxis=p,y.uniforms.lineWidth=A[P]/(x[P+2]-x[P])*L,y.uniforms.color=S[P];var q=T[P].length*6;k[P]&&q&&_.drawArrays(_.TRIANGLES,O,q),O+=q}}}(),v.drawTickMarks=function(){var d=[0,0],g=[0,0],p=[1,0],b=[0,1],m=[0,0],y=[0,0];return function(){for(var T=this.plot,_=this.vbo,M=this.tickShader,w=this.ticks,x=T.gl,A=T._tickBounds,S=T.dataBox,k=T.viewBox,L=T.pixelRatio,P=T.screenBox,D=P[2]-P[0],B=P[3]-P[1],z=k[2]-k[0],R=k[3]-k[1],F=0;F<2;++F){var O=A[F],q=A[F+2],H=q-O,j=.5*(S[F+2]+S[F]),X=S[F+2]-S[F];g[F]=2*H/X,d[F]=2*(O-j)/X}g[0]*=z/D,d[0]*=z/D,g[1]*=R/B,d[1]*=R/B,M.bind(),_.bind(),M.attributes.dataCoord.pointer();var G=M.uniforms;G.dataShift=d,G.dataScale=g;var $=T.tickMarkLength,te=T.tickMarkWidth,ee=T.tickMarkColor,ie=0,se=w[0].length*6,W=Math.min(l.ge(w[0],(S[0]-A[0])/(A[2]-A[0]),h),w[0].length),ne=Math.min(l.gt(w[0],(S[2]-A[0])/(A[2]-A[0]),h),w[0].length),he=ie+6*W,re=6*Math.max(0,ne-W),ae=Math.min(l.ge(w[1],(S[1]-A[1])/(A[3]-A[1]),h),w[1].length),fe=Math.min(l.gt(w[1],(S[3]-A[1])/(A[3]-A[1]),h),w[1].length),ce=se+6*ae,xe=6*Math.max(0,fe-ae);m[0]=2*(k[0]-$[1])/D-1,m[1]=(k[3]+k[1])/B-1,y[0]=$[1]*L/D,y[1]=te[1]*L/B,xe&&(G.color=ee[1],G.tickScale=y,G.dataAxis=b,G.screenOffset=m,x.drawArrays(x.TRIANGLES,ce,xe)),m[0]=(k[2]+k[0])/D-1,m[1]=2*(k[1]-$[0])/B-1,y[0]=te[0]*L/D,y[1]=$[0]*L/B,re&&(G.color=ee[0],G.tickScale=y,G.dataAxis=p,G.screenOffset=m,x.drawArrays(x.TRIANGLES,he,re)),m[0]=2*(k[2]+$[3])/D-1,m[1]=(k[3]+k[1])/B-1,y[0]=$[3]*L/D,y[1]=te[3]*L/B,xe&&(G.color=ee[3],G.tickScale=y,G.dataAxis=b,G.screenOffset=m,x.drawArrays(x.TRIANGLES,ce,xe)),m[0]=(k[2]+k[0])/D-1,m[1]=2*(k[3]+$[2])/B-1,y[0]=te[2]*L/D,y[1]=$[2]*L/B,re&&(G.color=ee[2],G.tickScale=y,G.dataAxis=p,G.screenOffset=m,x.drawArrays(x.TRIANGLES,he,re))}}(),v.update=function(){var d=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1];return function(p){var b=p.ticks,m=p.bounds,y=new Float32Array(6*3*(b[0].length+b[1].length));this.plot.zeroLineEnable;for(var T=0,_=[[],[]],M=0;M<2;++M)for(var w=_[M],x=b[M],A=m[M],S=m[M+2],k=0;k<x.length;++k){var L=(x[k].x-A)/(S-A);w.push(L);for(var P=0;P<6;++P)y[T++]=L,y[T++]=d[P],y[T++]=g[P]}this.ticks=_,this.vbo.update(y)}}(),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function c(d){var g=d.gl,p=o(g),b=a(g,u.gridVert,u.gridFrag),m=a(g,u.tickVert,u.gridFrag),y=new f(d,p,b,m);return y}t(c,"createGrid")},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(n,i,s){i.exports=h;var o=n("gl-buffer"),a=n("gl-shader"),l=n("./shaders");function u(v,c,d){this.plot=v,this.vbo=c,this.shader=d}t(u,"Lines");var f=u.prototype;f.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},f.drawLine=function(){var v=[0,0],c=[0,0];return function(d,g,p,b,m,y){var T=this.plot,_=this.shader,M=T.gl;v[0]=d,v[1]=g,c[0]=p,c[1]=b,_.uniforms.start=v,_.uniforms.end=c,_.uniforms.width=m*T.pixelRatio,_.uniforms.color=y,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var c=v.gl,d=o(c,[-1,-1,-1,1,1,-1,1,1]),g=a(c,l.lineVert,l.lineFrag),p=new u(v,d,g);return p}t(h,"createLines")},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(n,i,s){var o=n("glslify"),a=o([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);i.exports={lineVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:o([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(n,i,s){i.exports=c;var o=n("gl-buffer"),a=n("gl-shader"),l=n("text-cache"),u=n("binary-search-bounds"),f=n("./shaders");function h(d,g,p){this.plot=d,this.vbo=g,this.shader=p,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}t(h,"TextElements");var v=h.prototype;v.drawTicks=function(){var d=[0,0],g=[0,0],p=[0,0];return function(b){var m=this.plot,y=this.shader,T=this.tickX[b],_=this.tickOffset[b],M=m.gl,w=m.viewBox,x=m.dataBox,A=m.screenBox,S=m.pixelRatio,k=m.tickEnable,L=m.tickPad,P=m.tickColor,D=m.tickAngle,B=m.labelEnable,z=m.labelPad,R=m.labelColor,F=m.labelAngle,O=this.labelOffset[b],q=this.labelCount[b],H=u.lt(T,x[b]),j=u.le(T,x[b+2]);d[0]=d[1]=0,d[b]=1,g[b]=(w[2+b]+w[b])/(A[2+b]-A[b])-1;var X=2/A[2+(b^1)]-A[b^1];g[b^1]=X*w[b^1]-1,k[b]&&(g[b^1]-=X*S*L[b],H<j&&_[j]>_[H]&&(y.uniforms.dataAxis=d,y.uniforms.screenOffset=g,y.uniforms.color=P[b],y.uniforms.angle=D[b],M.drawArrays(M.TRIANGLES,_[H],_[j]-_[H]))),B[b]&&q&&(g[b^1]-=X*S*z[b],y.uniforms.dataAxis=p,y.uniforms.screenOffset=g,y.uniforms.color=R[b],y.uniforms.angle=F[b],M.drawArrays(M.TRIANGLES,O,q)),g[b^1]=X*w[2+(b^1)]-1,k[b+2]&&(g[b^1]+=X*S*L[b+2],H<j&&_[j]>_[H]&&(y.uniforms.dataAxis=d,y.uniforms.screenOffset=g,y.uniforms.color=P[b+2],y.uniforms.angle=D[b+2],M.drawArrays(M.TRIANGLES,_[H],_[j]-_[H]))),B[b+2]&&q&&(g[b^1]+=X*S*z[b+2],y.uniforms.dataAxis=p,y.uniforms.screenOffset=g,y.uniforms.color=R[b+2],y.uniforms.angle=F[b+2],M.drawArrays(M.TRIANGLES,O,q))}}(),v.drawTitle=function(){var d=[0,0],g=[0,0];return function(){var p=this.plot,b=this.shader,m=p.gl,y=p.screenBox,T=p.titleCenter,_=p.titleAngle,M=p.titleColor,w=p.pixelRatio;if(!!this.titleCount){for(var x=0;x<2;++x)g[x]=2*(T[x]*w-y[x])/(y[2+x]-y[x])-1;b.bind(),b.uniforms.dataAxis=d,b.uniforms.screenOffset=g,b.uniforms.angle=_,b.uniforms.color=M,m.drawArrays(m.TRIANGLES,this.titleOffset,this.titleCount)}}}(),v.bind=function(){var d=[0,0],g=[0,0],p=[0,0];return function(){var b=this.plot,m=this.shader,y=b._tickBounds,T=b.dataBox,_=b.screenBox,M=b.viewBox;m.bind();for(var w=0;w<2;++w){var x=y[w],A=y[w+2],S=A-x,k=.5*(T[w+2]+T[w]),L=T[w+2]-T[w],P=M[w],D=M[w+2],B=D-P,z=_[w],R=_[w+2],F=R-z;g[w]=2*S/L*B/F,d[w]=2*(x-k)/L*B/F}p[1]=2*b.pixelRatio/(_[3]-_[1]),p[0]=p[1]*(_[3]-_[1])/(_[2]-_[0]),m.uniforms.dataScale=g,m.uniforms.dataShift=d,m.uniforms.textScale=p,this.vbo.bind(),m.attributes.textCoordinate.pointer()}}(),v.update=function(d){var g=[],p=d.ticks,b=d.bounds,m,y,T,_,M;for(M=0;M<2;++M){var w=[Math.floor(g.length/3)],x=[-1/0],A=p[M];for(m=0;m<A.length;++m){var S=A[m],k=S.x,L=S.text,P=S.font||"sans-serif";_=S.fontSize||12;for(var D=1/(b[M+2]-b[M]),B=b[M],z=L.split(`
`),R=0;R<z.length;R++)for(T=l(P,z[R]).data,y=0;y<T.length;y+=2)g.push(T[y]*_,-T[y+1]*_-R*_*1.2,(k-B)*D);w.push(Math.floor(g.length/3)),x.push(k)}this.tickOffset[M]=w,this.tickX[M]=x}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(g.length/3),T=l(d.labelFont[M],d.labels[M],{textAlign:"center"}).data,_=d.labelSize[M],m=0;m<T.length;m+=2)g.push(T[m]*_,-T[m+1]*_,0);this.labelCount[M]=Math.floor(g.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(g.length/3),T=l(d.titleFont,d.title).data,_=d.titleSize,m=0;m<T.length;m+=2)g.push(T[m]*_,-T[m+1]*_,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},v.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function c(d){var g=d.gl,p=o(g),b=a(g,f.textVert,f.textFrag),m=new h(d,p,b);return m}t(c,"createTextElements")},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(n,i,s){i.exports=g;var o=n("gl-select-static"),a=n("./lib/grid"),l=n("./lib/text"),u=n("./lib/line"),f=n("./lib/box");function h(p,b){this.gl=p,this.pickBuffer=b,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}t(h,"GLPlot2D");var v=h.prototype;v.setDirty=function(){this.dirty=this.pickDirty=!0},v.setOverlayDirty=function(){this.dirty=!0},v.nextDepthValue=function(){return this._depthCounter++/65536},v.draw=function(){return function(){var p=this.gl,b=this.screenBox,m=this.viewBox,y=this.dataBox,T=this.pixelRatio,_=this.grid,M=this.line,w=this.text,x=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]);var A=this.borderColor;p.clearColor(A[0]*A[3],A[1]*A[3],A[2]*A[3],A[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),p.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var S=this.backgroundColor;p.clearColor(S[0]*S[3],S[1]*S[3],S[2]*S[3],S[3]),p.clear(p.COLOR_BUFFER_BIT),_.draw();var k=this.zeroLineEnable,L=this.zeroLineColor,P=this.zeroLineWidth;if(k[0]||k[1]){M.bind();for(var D=0;D<2;++D)if(!(!k[D]||!(y[D]<=0&&y[D+2]>=0))){var B=b[D]-y[D]*(b[D+2]-b[D])/(y[D+2]-y[D]);D===0?M.drawLine(B,b[1],B,b[3],P[D],L[D]):M.drawLine(b[0],B,b[2],B,P[D],L[D])}}for(var D=0;D<x.length;++D)x[D].draw();p.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]),p.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.grid.drawTickMarks(),M.bind();var z=this.borderLineEnable,R=this.borderLineWidth,F=this.borderLineColor;z[1]&&M.drawLine(m[0],m[1]-.5*R[1]*T,m[0],m[3]+.5*R[3]*T,R[1],F[1]),z[0]&&M.drawLine(m[0]-.5*R[0]*T,m[1],m[2]+.5*R[2]*T,m[1],R[0],F[0]),z[3]&&M.drawLine(m[2],m[1]-.5*R[1]*T,m[2],m[3]+.5*R[3]*T,R[3],F[3]),z[2]&&M.drawLine(m[0]-.5*R[0]*T,m[3],m[2]+.5*R[2]*T,m[3],R[2],F[2]),w.bind();for(var D=0;D<2;++D)w.drawTicks(D);this.titleEnable&&w.drawTitle();for(var O=this.overlays,D=0;D<O.length;++D)O[D].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}}}(),v.drawPick=function(){return function(){if(!this.static){var p=this.pickBuffer;this.gl,this._pickTimeout=null,p.begin();for(var b=1,m=this.objects,y=0;y<m.length;++y)b=m[y].drawPick(b);p.end()}}}(),v.pick=function(){return function(p,b){if(!this.static){var m=this.pixelRatio,y=this.pickPixelRatio,T=this.viewBox,_=Math.round((p-T[0]/m)*y)|0,M=Math.round((b-T[1]/m)*y)|0,w=this.pickBuffer.query(_,M,this.pickRadius);if(!w)return null;for(var x=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),A=this.objects,S=0;S<A.length;++S){var k=A[S].pick(_,M,x);if(k)return k}return null}}}();function c(p){for(var b=p.slice(),m=0;m<b.length;++m)b[m]=b[m].slice();return b}t(c,"deepClone");function d(p,b){return p.x-b.x}t(d,"compareTicks"),v.setScreenBox=function(p){var b=this.screenBox,m=this.pixelRatio;b[0]=Math.round(p[0]*m)|0,b[1]=Math.round(p[1]*m)|0,b[2]=Math.round(p[2]*m)|0,b[3]=Math.round(p[3]*m)|0,this.setDirty()},v.setDataBox=function(p){var b=this.dataBox,m=b[0]!==p[0]||b[1]!==p[1]||b[2]!==p[2]||b[3]!==p[3];m&&(b[0]=p[0],b[1]=p[1],b[2]=p[2],b[3]=p[3],this.setDirty())},v.setViewBox=function(p){var b=this.pixelRatio,m=this.viewBox;m[0]=Math.round(p[0]*b)|0,m[1]=Math.round(p[1]*b)|0,m[2]=Math.round(p[2]*b)|0,m[3]=Math.round(p[3]*b)|0;var y=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((p[2]-p[0])*y)|0,Math.round((p[3]-p[1])*y)|0],this.setDirty()},v.update=function(p){p=p||{};var b=this.gl;this.pixelRatio=p.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(p.screenBox||[0,0,b.drawingBufferWidth/m,b.drawingBufferHeight/m]),this.screenBox,this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var y=this.viewBox,T=(y[2]-y[0])/(y[3]-y[1]);this.setDataBox(p.dataBox||[-10,-10/T,10,10/T]),this.borderColor=p.borderColor!==!1?(p.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(y[0]+y[2])/m,(y[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=p.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var w=0;w<2;++w){var x=_[w].slice(0);x.length!==0&&(x.sort(d),M[w]=Math.min(M[w],x[0].x),M[w+2]=Math.max(M[w+2],x[x.length-1].x))}this.grid.update({bounds:M,ticks:_}),this.text.update({bounds:M,ticks:_,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"}),this.static=!!p.static,this.setDirty()},v.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();this.objects.length=0;for(var p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},v.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},v.removeObject=function(p){for(var b=this.objects,m=0;m<b.length;++m)if(b[m]===p){b.splice(m,1),this.setDirty();break}},v.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},v.removeOverlay=function(p){for(var b=this.overlays,m=0;m<b.length;++m)if(b[m]===p){b.splice(m,1),this.setOverlayDirty();break}};function g(p){var b=p.gl,m=o(b,[b.drawingBufferWidth,b.drawingBufferHeight]),y=new h(b,m);return y.grid=a(y),y.text=l(y),y.line=u(y),y.box=f(y),y.update(p),y}t(g,"createGLPlot2D")},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(n,i,s){i.exports=v;var o=n("right-now"),a=n("3d-view"),l=n("mouse-change"),u=n("mouse-wheel"),f=n("mouse-event-offset"),h=n("has-passive-events");function v(c,d){c=c||document.body,d=d||{};var g=[.01,1/0];"distanceLimits"in d&&(g[0]=d.distanceLimits[0],g[1]=d.distanceLimits[1]),"zoomMin"in d&&(g[0]=d.zoomMin),"zoomMax"in d&&(g[1]=d.zoomMax);var p=a({center:d.center||[0,0,0],up:d.up||[0,1,0],eye:d.eye||[0,0,10],mode:d.mode||"orbit",distanceLimits:g}),b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,y=c.clientWidth,T=c.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:p,element:c,delay:d.delay||16,rotateSpeed:d.rotateSpeed||1,zoomSpeed:d.zoomSpeed||1,translateSpeed:d.translateSpeed||1,flipX:!!d.flipX,flipY:!!d.flipY,modes:p.modes,_ortho:d._ortho||d.projection&&d.projection.type==="orthographic"||!1,tick:function(){var M=o(),w=this.delay,x=M-2*w;p.idle(M-w),p.recalcMatrix(x),p.flush(M-(100+w*2));for(var A=!0,S=p.computedMatrix,k=0;k<16;++k)A=A&&b[k]===S[k],b[k]=S[k];var L=c.clientWidth===y&&c.clientHeight===T;return y=c.clientWidth,T=c.clientHeight,A?!L:(m=Math.exp(p.computedRadius[0]),!0)},lookAt:function(M,w,x){p.lookAt(p.lastT(),M,w,x)},rotate:function(M,w,x){p.rotate(p.lastT(),M,w,x)},pan:function(M,w,x){p.pan(p.lastT(),M,w,x)},translate:function(M,w,x){p.translate(p.lastT(),M,w,x)}};return Object.defineProperties(_,{matrix:{get:function(){return p.computedMatrix},set:function(M){return p.setMatrix(p.lastT(),M),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(M){var w=p.computedUp.slice(),x=p.computedEye.slice(),A=p.computedCenter.slice();if(p.setMode(M),M==="turntable"){var S=o();p._active.lookAt(S,x,A,w),p._active.lookAt(S+500,x,A,[0,0,1]),p._active.flush(S)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(M){return p.lookAt(p.lastT(),null,M),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(M){return p.lookAt(p.lastT(),M),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(M){return p.lookAt(p.lastT(),null,null,M),p.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(M){return p.setDistance(p.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(g)},set:function(M){return p.setDistanceLimits(M),M},enumerable:!0}}),c.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){_.mouseListener=l(c,M),c.addEventListener("touchstart",function(w){var x=f(w.changedTouches[0],c);M(0,x[0],x[1],_._lastMods),M(1,x[0],x[1],_._lastMods)},h?{passive:!0}:!1),c.addEventListener("touchmove",function(w){var x=f(w.changedTouches[0],c);M(1,x[0],x[1],_._lastMods),w.preventDefault()},h?{passive:!1}:!1),c.addEventListener("touchend",function(w){M(0,_._lastX,_._lastY,_._lastMods)},h?{passive:!0}:!1);function M(w,x,A,S){var k=_.keyBindingMode;if(k!==!1){var L=k==="rotate",P=k==="pan",D=k==="zoom",B=!!S.control,z=!!S.alt,R=!!S.shift,F=!!(w&1),O=!!(w&2),q=!!(w&4),H=1/c.clientHeight,j=H*(x-_._lastX),X=H*(A-_._lastY),G=_.flipX?1:-1,$=_.flipY?1:-1,te=Math.PI*_.rotateSpeed,ee=o();if(_._lastX!==-1&&_._lastY!==-1&&((L&&F&&!B&&!z&&!R||F&&!B&&!z&&R)&&p.rotate(ee,G*te*j,-$*te*X,0),(P&&F&&!B&&!z&&!R||O||F&&B&&!z&&!R)&&p.pan(ee,-_.translateSpeed*j*m,_.translateSpeed*X*m,0),D&&F&&!B&&!z&&!R||q||F&&!B&&z&&!R)){var ie=-_.zoomSpeed*X/window.innerHeight*(ee-p.lastT())*100;p.pan(ee,0,0,m*(Math.exp(ie)-1))}return _._lastX=x,_._lastY=A,_._lastMods=S,!0}}t(M,"handleInteraction"),_.wheelListener=u(c,function(w,x){if(_.keyBindingMode!==!1&&!!_.enableWheel){var A=_.flipX?1:-1,S=_.flipY?1:-1,k=o();if(Math.abs(w)>Math.abs(x))p.rotate(k,0,0,-w*A*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var L=-_.zoomSpeed*S*x/window.innerHeight*(k-p.lastT())/20;p.pan(k,0,0,m*(Math.exp(L)-1))}}},!0)},_.enableMouseListeners(),_}t(v,"createCamera")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(n,i,s){var o=n("glslify"),a=n("gl-shader"),l=o([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),u=o([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);i.exports=function(f){return a(f,l,u,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(n,i,s){var o=n("./camera.js"),a=n("gl-axes3d"),l=n("gl-axes3d/properties"),u=n("gl-spikes3d"),f=n("gl-select-static"),h=n("gl-fbo"),v=n("a-big-triangle"),c=n("mouse-change"),d=n("gl-mat4/perspective"),g=n("gl-mat4/ortho"),p=n("./lib/shader"),b=n("is-mobile")({tablet:!0,featureDetect:!0});i.exports={createScene:M,createCamera:o};function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}t(m,"MouseSelect");function y(x,A){var S=null;try{S=x.getContext("webgl",A),S||(S=x.getContext("experimental-webgl",A))}catch{return null}return S}t(y,"getContext");function T(x){var A=Math.round(Math.log(Math.abs(x))/Math.log(10));if(A<0){var S=Math.round(Math.pow(10,-A));return Math.ceil(x*S)/S}else if(A>0){var S=Math.round(Math.pow(10,A));return Math.ceil(x/S)*S}return Math.ceil(x)}t(T,"roundUpPow10");function _(x){return typeof x=="boolean"?x:!0}t(_,"defaultBool");function M(x){x=x||{},x.camera=x.camera||{};var A=x.canvas;if(!A)if(A=document.createElement("canvas"),x.container){var S=x.container;S.appendChild(A)}else document.body.appendChild(A);var k=x.gl;if(k||(x.glOptions&&(b=!!x.glOptions.preserveDrawingBuffer),k=y(A,x.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:b})),!k)throw new Error("webgl not supported");var L=x.bounds||[[-10,-10,-10],[10,10,10]],P=new m,D=h(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!b}),B=p(k),z=x.cameraObject&&x.cameraObject._ortho===!0||x.camera.projection&&x.camera.projection.type==="orthographic"||!1,R={eye:x.camera.eye||[2,0,0],center:x.camera.center||[0,0,0],up:x.camera.up||[0,1,0],zoomMin:x.camera.zoomMax||.1,zoomMax:x.camera.zoomMin||100,mode:x.camera.mode||"turntable",_ortho:z},F=x.axes||{},O=a(k,F);O.enable=!F.disable;var q=x.spikes||{},H=u(k,q),j=[],X=[],G=[],$=[],te=!0,W=!0,ee=new Array(16),ie=new Array(16),se={view:null,projection:ee,model:ie,_ortho:!1},W=!0,ne=[k.drawingBufferWidth,k.drawingBufferHeight],he=x.cameraObject||o(A,R),re={gl:k,contextLost:!1,pixelRatio:x.pixelRatio||1,canvas:A,selection:P,camera:he,axes:O,axesPixels:null,spikes:H,bounds:L,objects:j,shape:ne,aspect:x.aspectRatio||[1,1,1],pickRadius:x.pickRadius||10,zNear:x.zNear||.01,zFar:x.zFar||1e3,fovy:x.fovy||Math.PI/4,clearColor:x.clearColor||[0,0,0,0],autoResize:_(x.autoResize),autoBounds:_(x.autoBounds),autoScale:!!x.autoScale,autoCenter:_(x.autoCenter),clipToBounds:_(x.clipToBounds),snapToData:!!x.snapToData,onselect:x.onselect||null,onrender:x.onrender||null,onclick:x.onclick||null,cameraParams:se,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ye){this.aspect[0]=ye.x,this.aspect[1]=ye.y,this.aspect[2]=ye.z,W=!0},setBounds:function(ye,we){this.bounds[0][ye]=we.min,this.bounds[1][ye]=we.max},setClearColor:function(ye){this.clearColor=ye},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[k.drawingBufferWidth/re.pixelRatio|0,k.drawingBufferHeight/re.pixelRatio|0];function fe(){if(!re._stopped&&!!re.autoResize){var ye=A.parentNode,we=1,Ee=1;ye&&ye!==document.body?(we=ye.clientWidth,Ee=ye.clientHeight):(we=window.innerWidth,Ee=window.innerHeight);var De=Math.ceil(we*re.pixelRatio)|0,Fe=Math.ceil(Ee*re.pixelRatio)|0;if(De!==A.width||Fe!==A.height){A.width=De,A.height=Fe;var qe=A.style;qe.position=qe.position||"absolute",qe.left="0px",qe.top="0px",qe.width=we+"px",qe.height=Ee+"px",te=!0}}}t(fe,"resizeListener"),re.autoResize&&fe(),window.addEventListener("resize",fe);function ce(){for(var ye=j.length,we=$.length,Ee=0;Ee<we;++Ee)G[Ee]=0;e:for(var Ee=0;Ee<ye;++Ee){var De=j[Ee],Fe=De.pickSlots;if(!Fe){X[Ee]=-1;continue}for(var qe=0;qe<we;++qe)if(G[qe]+Fe<255){X[Ee]=qe,De.setPickBase(G[qe]+1),G[qe]+=Fe;continue e}var Je=f(k,ne);X[Ee]=we,$.push(Je),G.push(Fe),De.setPickBase(1),we+=1}for(;we>0&&G[we-1]===0;)G.pop(),$.pop().dispose()}t(ce,"reallocPickIds"),re.update=function(ye){re._stopped||(te=!0,W=!0)},re.add=function(ye){re._stopped||(ye.axes=O,j.push(ye),X.push(-1),te=!0,W=!0,ce())},re.remove=function(ye){if(!re._stopped){var we=j.indexOf(ye);we<0||(j.splice(we,1),X.pop(),te=!0,W=!0,ce())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",fe),A.removeEventListener("webglcontextlost",xe),re.mouseListener.enabled=!1,!re.contextLost)){O.dispose(),H.dispose();for(var ye=0;ye<j.length;++ye)j[ye].dispose();D.dispose();for(var ye=0;ye<$.length;++ye)$[ye].dispose();B.dispose(),k=null,O=null,H=null,j=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=c(A,function(ye,we,Ee){if(!re._stopped){var De=$.length,Fe=j.length,qe=P.object;P.distance=1/0,P.mouse[0]=we,P.mouse[1]=Ee,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var Je=!1;if(ye&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(W=!0),re._mouseRotating=!1;for(var Ge=0;Ge<De;++Ge){var et=$[Ge].query(we,ae[1]-Ee-1,re.pickRadius);if(et){if(et.distance>P.distance)continue;for(var Ue=0;Ue<Fe;++Ue){var Ye=j[Ue];if(X[Ue]===Ge){var $e=Ye.pick(et);$e&&(P.buttons=ye,P.screen=et.coord,P.distance=et.distance,P.object=Ye,P.index=$e.distance,P.dataPosition=$e.position,P.dataCoordinate=$e.dataCoordinate,P.data=$e,Je=!0)}}}}}qe&&qe!==P.object&&(qe.highlight&&qe.highlight(null),te=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),te=!0),Je=Je||P.object!==qe,Je&&re.onselect&&re.onselect(P),ye&1&&!(re._prevButtons&1)&&re.onclick&&re.onclick(P),re._prevButtons=ye}})};function xe(){if(re.contextLost)return!0;k.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}t(xe,"checkContextLoss"),A.addEventListener("webglcontextlost",xe);function Te(){if(!xe()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var ye=j.length,we=$.length,Ee=0;Ee<we;++Ee){var De=$[Ee];De.shape=ae,De.begin();for(var Fe=0;Fe<ye;++Fe)if(X[Fe]===Ee){var qe=j[Fe];qe.drawPick&&(qe.pixelRatio=1,qe.drawPick(se))}De.end()}}}t(Te,"renderPick");var me=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],pe=[me[0].slice(),me[1].slice()];function oe(){if(!xe()){fe();var ye=re.camera.tick();se.view=re.camera.matrix,te=te||ye,W=W||ye,O.pixelRatio=re.pixelRatio,H.pixelRatio=re.pixelRatio;var we=j.length,Ee=me[0],De=me[1];Ee[0]=Ee[1]=Ee[2]=1/0,De[0]=De[1]=De[2]=-1/0;for(var Fe=0;Fe<we;++Fe){var qe=j[Fe];qe.pixelRatio=re.pixelRatio,qe.axes=re.axes,te=te||!!qe.dirty,W=W||!!qe.dirty;var Je=qe.bounds;if(Je)for(var Ge=Je[0],et=Je[1],Ue=0;Ue<3;++Ue)Ee[Ue]=Math.min(Ee[Ue],Ge[Ue]),De[Ue]=Math.max(De[Ue],et[Ue])}var Ye=re.bounds;if(re.autoBounds)for(var Ue=0;Ue<3;++Ue){if(De[Ue]<Ee[Ue])Ee[Ue]=-1,De[Ue]=1;else{Ee[Ue]===De[Ue]&&(Ee[Ue]-=1,De[Ue]+=1);var $e=.05*(De[Ue]-Ee[Ue]);Ee[Ue]=Ee[Ue]-$e,De[Ue]=De[Ue]+$e}Ye[0][Ue]=Ee[Ue],Ye[1][Ue]=De[Ue]}for(var Ct=!1,Ue=0;Ue<3;++Ue)Ct=Ct||pe[0][Ue]!==Ye[0][Ue]||pe[1][Ue]!==Ye[1][Ue],pe[0][Ue]=Ye[0][Ue],pe[1][Ue]=Ye[1][Ue];if(W=W||Ct,te=te||Ct,!!te){if(Ct){for(var It=[0,0,0],Fe=0;Fe<3;++Fe)It[Fe]=T((Ye[1][Fe]-Ye[0][Fe])/10);O.autoTicks?O.update({bounds:Ye,tickSpacing:It}):O.update({bounds:Ye})}var Vt=k.drawingBufferWidth,$t=k.drawingBufferHeight;ne[0]=Vt,ne[1]=$t,ae[0]=Math.max(Vt/re.pixelRatio,1)|0,ae[1]=Math.max($t/re.pixelRatio,1)|0,w(re,z);for(var Fe=0;Fe<we;++Fe){var qe=j[Fe];qe.axesBounds=Ye,re.clipToBounds&&(qe.clipBounds=Ye)}P.object&&(re.snapToData?H.position=P.dataCoordinate:H.position=P.dataPosition,H.bounds=Ye),W&&(W=!1,Te()),re.axesPixels=l(re.axes,se,Vt,$t),re.onrender&&re.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,Vt,$t),re.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var Gt=!1;O.enable&&(Gt=Gt||O.isTransparent(),O.draw(se)),H.axes=O,P.object&&H.draw(se),k.disable(k.CULL_FACE);for(var Fe=0;Fe<we;++Fe){var qe=j[Fe];qe.axes=O,qe.pixelRatio=re.pixelRatio,qe.isOpaque&&qe.isOpaque()&&qe.draw(se),qe.isTransparent&&qe.isTransparent()&&(Gt=!0)}if(Gt){D.shape=ne,D.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(se);for(var Fe=0;Fe<we;++Fe){var qe=j[Fe];qe.isOpaque&&qe.isOpaque()&&qe.draw(se)}k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(se);for(var Fe=0;Fe<we;++Fe){var qe=j[Fe];qe.isTransparent&&qe.isTransparent()&&qe.drawTransparent(se)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),B.bind(),D.color[0].bind(0),B.uniforms.accumBuffer=0,v(k),k.disable(k.BLEND)}te=!1;for(var Fe=0;Fe<we;++Fe)j[Fe].dirty=!1}}}t(oe,"redraw");function de(){re._stopped||re.contextLost||(oe(),requestAnimationFrame(de))}return t(de,"render"),re.enableMouseListeners(),de(),re.redraw=function(){re._stopped||(te=!0,oe())},re}t(M,"createScene");function w(x,A){var S=x.bounds,k=x.cameraParams,L=k.projection,P=k.model,D=x.gl.drawingBufferWidth,B=x.gl.drawingBufferHeight,z=x.zNear,R=x.zFar,F=x.fovy,O=D/B;A?(g(L,-O,O,-1,1,z,R),k._ortho=!0):(d(L,F,O,z,R),k._ortho=!1);for(var q=0;q<16;++q)P[q]=0;P[15]=1;for(var H=0,q=0;q<3;++q)H=Math.max(H,S[1][q]-S[0][q]);for(var q=0;q<3;++q)x.autoScale?P[5*q]=x.aspect[q]/(S[1][q]-S[0][q]):P[5*q]=1/H,x.autoCenter&&(P[12+q]=-P[5*q]*.5*(S[0][q]+S[1][q]))}t(w,"calcCameraParams")},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(n,i,s){var o=n("glslify");s.pointVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(n,i,s){var o=n("gl-shader"),a=n("gl-buffer"),l=n("typedarray-pool"),u=n("./lib/shader");i.exports=c;function f(d,g,p,b,m){this.plot=d,this.offsetBuffer=g,this.pickBuffer=p,this.shader=b,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}t(f,"Pointcloud2D");var h=f.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(d){var g;d=d||{};function p(w,x){return w in d?d[w]:x}t(p,"dflt"),this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var b=d.positions.length>>>1,m=d.positions instanceof Float32Array,y=d.idToIndex instanceof Int32Array&&d.idToIndex.length>=b,T=d.positions,_=m?T:l.mallocFloat32(T.length),M=y?d.idToIndex:l.mallocInt32(b);if(m||_.set(T),!y)for(_.set(T),g=0;g<b;g++)M[g]=g;this.points=T,this.offsetBuffer.update(_),this.pickBuffer.update(M),m||l.free(_),y||l.free(M),this.pointCount=b,this.pickOffset=0};function v(d,g){var p=0,b=d.length>>>1,m;for(m=0;m<b;m++){var y=d[m*2],T=d[m*2+1];y>=g[0]&&y<=g[2]&&T>=g[1]&&T<=g[3]&&p++}return p}t(v,"count"),h.unifiedDraw=function(){var d=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(p){var b=p!==void 0,m=b?this.pickShader:this.shader,y=this.plot.gl,T=this.plot.dataBox;if(this.pointCount===0)return p;var _=T[2]-T[0],M=T[3]-T[1],w=v(this.points,T),x=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));d[0]=2/_,d[4]=2/M,d[6]=-2*T[0]/_-1,d[7]=-2*T[1]/M-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=d,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=x<5,m.uniforms.pointSize=x,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),b&&(g[0]=p&255,g[1]=p>>8&255,g[2]=p>>16&255,g[3]=p>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(y.UNSIGNED_BYTE),m.uniforms.pickOffset=g,this.pickOffset=p);var A=y.getParameter(y.BLEND),S=y.getParameter(y.DITHER);return A&&!this.blend&&y.disable(y.BLEND),S&&y.disable(y.DITHER),y.drawArrays(y.POINTS,0,this.pointCount),A&&!this.blend&&y.enable(y.BLEND),S&&y.enable(y.DITHER),p+this.pointCount}}(),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(d,g,p){var b=this.pickOffset,m=this.pointCount;if(p<b||p>=b+m)return null;var y=p-b,T=this.points;return{object:this,pointId:y,dataCoord:[T[2*y],T[2*y+1]]}};function c(d,g){var p=d.gl,b=a(p),m=a(p),y=o(p,u.pointVertex,u.pointFragment),T=o(p,u.pickVertex,u.pickFragment),_=new f(d,b,m,y,T);return _.update(g),d.addObject(_),_}t(c,"createPointcloud2D")},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(n,i,s){i.exports=o;function o(a,l,u,f){var h=l[0],v=l[1],c=l[2],d=l[3],g=u[0],p=u[1],b=u[2],m=u[3],y,T,_,M,w;return T=h*g+v*p+c*b+d*m,T<0&&(T=-T,g=-g,p=-p,b=-b,m=-m),1-T>1e-6?(y=Math.acos(T),_=Math.sin(y),M=Math.sin((1-f)*y)/_,w=Math.sin(f*y)/_):(M=1-f,w=f),a[0]=M*h+w*g,a[1]=M*v+w*p,a[2]=M*c+w*b,a[3]=M*d+w*m,a}t(o,"slerp")},{}],125:[function(n,i,s){i.exports=function(o){return!o&&o!==0?"":o.toString()}},{}],126:[function(n,i,s){var o=n("vectorize-text");i.exports=l;var a={};function l(u,f,h){var v=a[f];if(v||(v=a[f]={}),u in v)return v[u];var c={textAlign:"center",textBaseline:"middle",lineHeight:1,font:f,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};c.triangles=!0;var d=o(u,c);c.triangles=!1;var g=o(u,c),p,b;if(h&&h!==1){for(p=0;p<d.positions.length;++p)for(b=0;b<d.positions[p].length;++b)d.positions[p][b]/=h;for(p=0;p<g.positions.length;++p)for(b=0;b<g.positions[p].length;++b)g.positions[p][b]/=h}var m=[[1/0,1/0],[-1/0,-1/0]],y=g.positions.length;for(p=0;p<y;++p){var T=g.positions[p];for(b=0;b<2;++b)m[0][b]=Math.min(m[0][b],T[b]),m[1][b]=Math.max(m[1][b],T[b])}return v[u]=[d,g,m]}t(l,"getGlyph")},{"vectorize-text":311}],127:[function(n,i,s){var o=n("gl-shader"),a=n("glslify"),l=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),h=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],d={vertex:l,fragment:h,attributes:c},g={vertex:u,fragment:h,attributes:c},p={vertex:f,fragment:h,attributes:c},b={vertex:l,fragment:v,attributes:c},m={vertex:u,fragment:v,attributes:c},y={vertex:f,fragment:v,attributes:c};function T(_,M){var w=o(_,M),x=w.attributes;return x.position.location=0,x.color.location=1,x.glyph.location=2,x.id.location=3,w}t(T,"createShader"),s.createPerspective=function(_){return T(_,d)},s.createOrtho=function(_){return T(_,g)},s.createProject=function(_){return T(_,p)},s.createPickPerspective=function(_){return T(_,b)},s.createPickOrtho=function(_){return T(_,m)},s.createPickProject=function(_){return T(_,y)}},{"gl-shader":132,glslify:231}],128:[function(n,i,s){var o=n("is-string-blank"),a=n("gl-buffer"),l=n("gl-vao"),u=n("typedarray-pool"),f=n("gl-mat4/multiply"),h=n("./lib/shaders"),v=n("./lib/glyphs"),c=n("./lib/get-simple-string"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];i.exports=X;function g(G,$){var te=G[0],ee=G[1],ie=G[2],se=G[3];return G[0]=$[0]*te+$[4]*ee+$[8]*ie+$[12]*se,G[1]=$[1]*te+$[5]*ee+$[9]*ie+$[13]*se,G[2]=$[2]*te+$[6]*ee+$[10]*ie+$[14]*se,G[3]=$[3]*te+$[7]*ee+$[11]*ie+$[15]*se,G}t(g,"transformMat4");function p(G,$,te,ee){return g(ee,ee),g(ee,ee),g(ee,ee)}t(p,"project");function b(G,$){this.index=G,this.dataCoordinate=this.position=$}t(b,"ScatterPlotPickResult");function m(G){return G===!0||G>1?1:G}t(m,"fixOpacity");function y(G,$,te,ee,ie,se,W,ne,he,re,ae,fe){this.gl=G,this.pixelRatio=1,this.shader=$,this.orthoShader=te,this.projectShader=ee,this.pointBuffer=ie,this.colorBuffer=se,this.glyphBuffer=W,this.idBuffer=ne,this.vao=he,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=re,this.pickOrthoShader=ae,this.pickProjectShader=fe,this.points=[],this._selectResult=new b(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t(y,"PointCloud");var T=y.prototype;T.pickSlots=1,T.setPickBase=function(G){this.pickId=G},T.isTransparent=function(){if(this.hasAlpha)return!0;for(var G=0;G<3;++G)if(this.axesProject[G]&&this.projectHasAlpha)return!0;return!1},T.isOpaque=function(){if(!this.hasAlpha)return!0;for(var G=0;G<3;++G)if(this.axesProject[G]&&!this.projectHasAlpha)return!0;return!1};var _=[0,0],M=[0,0,0],w=[0,0,0],x=[0,0,0,1],A=[0,0,0,1],S=d.slice(),k=[0,0,0],L=[[0,0,0],[0,0,0]];function P(G){return G[0]=G[1]=G[2]=0,G}t(P,"zeroVec");function D(G,$){return G[0]=$[0],G[1]=$[1],G[2]=$[2],G[3]=1,G}t(D,"augment");function B(G,$,te,ee){return G[0]=$[0],G[1]=$[1],G[2]=$[2],G[te]=ee,G}t(B,"setComponent");function z(G){for(var $=L,te=0;te<2;++te)for(var ee=0;ee<3;++ee)$[te][ee]=Math.max(Math.min(G[te][ee],1e8),-1e8);return $}t(z,"getClipBounds");function R(G,$,te,ee){var ie=$.axesProject,se=$.gl,W=G.uniforms,ne=te.model||d,he=te.view||d,re=te.projection||d,ae=$.axesBounds,fe=z($.clipBounds),ce;$.axes&&$.axes.lastCubeProps?ce=$.axes.lastCubeProps.axis:ce=[1,1,1],_[0]=2/se.drawingBufferWidth,_[1]=2/se.drawingBufferHeight,G.bind(),W.view=he,W.projection=re,W.screenSize=_,W.highlightId=$.highlightId,W.highlightScale=$.highlightScale,W.clipBounds=fe,W.pickGroup=$.pickId/255,W.pixelRatio=ee;for(var xe=0;xe<3;++xe)if(!!ie[xe]){W.scale=$.projectScale[xe],W.opacity=$.projectOpacity[xe];for(var Te=S,me=0;me<16;++me)Te[me]=0;for(var me=0;me<4;++me)Te[5*me]=1;Te[5*xe]=0,ce[xe]<0?Te[12+xe]=ae[0][xe]:Te[12+xe]=ae[1][xe],f(Te,ne,Te),W.model=Te;var pe=(xe+1)%3,oe=(xe+2)%3,de=P(M),ye=P(w);de[pe]=1,ye[oe]=1;var we=p(re,he,ne,D(x,de)),Ee=p(re,he,ne,D(A,ye));if(Math.abs(we[1])>Math.abs(Ee[1])){var De=we;we=Ee,Ee=De,De=de,de=ye,ye=De;var Fe=pe;pe=oe,oe=Fe}we[0]<0&&(de[pe]=-1),Ee[1]>0&&(ye[oe]=-1);for(var qe=0,Je=0,me=0;me<4;++me)qe+=Math.pow(ne[4*pe+me],2),Je+=Math.pow(ne[4*oe+me],2);de[pe]/=Math.sqrt(qe),ye[oe]/=Math.sqrt(Je),W.axes[0]=de,W.axes[1]=ye,W.fragClipBounds[0]=B(k,fe[0],xe,-1e8),W.fragClipBounds[1]=B(k,fe[1],xe,1e8),$.vao.bind(),$.vao.draw(se.TRIANGLES,$.vertexCount),$.lineWidth>0&&(se.lineWidth($.lineWidth*ee),$.vao.draw(se.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}t(R,"drawProject");var F=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],q=[F,O];function H(G,$,te,ee,ie,se,W){var ne=te.gl;if((se===te.projectHasAlpha||W)&&R($,te,ee,ie),se===te.hasAlpha||W){G.bind();var he=G.uniforms;he.model=ee.model||d,he.view=ee.view||d,he.projection=ee.projection||d,_[0]=2/ne.drawingBufferWidth,_[1]=2/ne.drawingBufferHeight,he.screenSize=_,he.highlightId=te.highlightId,he.highlightScale=te.highlightScale,he.fragClipBounds=q,he.clipBounds=te.axes.bounds,he.opacity=te.opacity,he.pickGroup=te.pickId/255,he.pixelRatio=ie,te.vao.bind(),te.vao.draw(ne.TRIANGLES,te.vertexCount),te.lineWidth>0&&(ne.lineWidth(te.lineWidth*ie),te.vao.draw(ne.LINES,te.lineVertexCount,te.vertexCount)),te.vao.unbind()}}t(H,"drawFull"),T.draw=function(G){var $=this.useOrtho?this.orthoShader:this.shader;H($,this.projectShader,this,G,this.pixelRatio,!1,!1)},T.drawTransparent=function(G){var $=this.useOrtho?this.orthoShader:this.shader;H($,this.projectShader,this,G,this.pixelRatio,!0,!1)},T.drawPick=function(G){var $=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;H($,this.pickProjectShader,this,G,1,!0,!0)},T.pick=function(G){if(!G||G.id!==this.pickId)return null;var $=G.value[2]+(G.value[1]<<8)+(G.value[0]<<16);if($>=this.pointCount||$<0)return null;var te=this.points[$],ee=this._selectResult;ee.index=$;for(var ie=0;ie<3;++ie)ee.position[ie]=ee.dataCoordinate[ie]=te[ie];return ee},T.highlight=function(G){if(!G)this.highlightId=[1,1,1,1];else{var $=G.index,te=$&255,ee=$>>8&255,ie=$>>16&255;this.highlightId=[te/255,ee/255,ie/255,0]}};function j(G,$,te,ee){var ie;Array.isArray(G)?$<G.length?ie=G[$]:ie=void 0:ie=G,ie=c(ie);var se=!0;o(ie)&&(ie="\u25BC",se=!1);var W=v(ie,te,ee);return{mesh:W[0],lines:W[1],bounds:W[2],visible:se}}t(j,"get_glyphData"),T.update=function(G){if(G=G||{},"perspective"in G&&(this.useOrtho=!G.perspective),"orthographic"in G&&(this.useOrtho=!!G.orthographic),"lineWidth"in G&&(this.lineWidth=G.lineWidth),"project"in G)if(Array.isArray(G.project))this.axesProject=G.project;else{var $=!!G.project;this.axesProject=[$,$,$]}if("projectScale"in G)if(Array.isArray(G.projectScale))this.projectScale=G.projectScale.slice();else{var te=+G.projectScale;this.projectScale=[te,te,te]}if(this.projectHasAlpha=!1,"projectOpacity"in G){if(Array.isArray(G.projectOpacity))this.projectOpacity=G.projectOpacity.slice();else{var te=+G.projectOpacity;this.projectOpacity=[te,te,te]}for(var ee=0;ee<3;++ee)this.projectOpacity[ee]=m(this.projectOpacity[ee]),this.projectOpacity[ee]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in G&&(this.opacity=m(G.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ie=G.position,se=G.font||"normal",W=G.alignment||[0,0],ne,he;if(W.length===2)ne=W[0],he=W[1];else{ne=[],he=[];for(var ee=0;ee<W.length;++ee)ne[ee]=W[ee][0],he[ee]=W[ee][1]}var re=[1/0,1/0,1/0],ae=[-1/0,-1/0,-1/0],fe=G.glyph,ce=G.color,xe=G.size,Te=G.angle,me=G.lineColor,pe=-1,oe=0,de=0,ye=0;if(ie.length){ye=ie.length;e:for(var ee=0;ee<ye;++ee){for(var we=ie[ee],Ee=0;Ee<3;++Ee)if(isNaN(we[Ee])||!isFinite(we[Ee]))continue e;var De=j(fe,ee,se,this.pixelRatio),Fe=De.mesh,qe=De.lines,Je=De.bounds;oe+=Fe.cells.length*3,de+=qe.edges.length*2}}var Ge=oe+de,et=u.mallocFloat(3*Ge),Ue=u.mallocFloat(4*Ge),Ye=u.mallocFloat(2*Ge),$e=u.mallocUint32(Ge);if(Ge>0){var Ct=0,It=oe,Vt=[0,0,0,1],$t=[0,0,0,1],Gt=Array.isArray(ce)&&Array.isArray(ce[0]),Jt=Array.isArray(me)&&Array.isArray(me[0]);e:for(var ee=0;ee<ye;++ee){pe+=1;for(var we=ie[ee],Ee=0;Ee<3;++Ee){if(isNaN(we[Ee])||!isFinite(we[Ee]))continue e;ae[Ee]=Math.max(ae[Ee],we[Ee]),re[Ee]=Math.min(re[Ee],we[Ee])}var De=j(fe,ee,se,this.pixelRatio),Fe=De.mesh,qe=De.lines,Je=De.bounds,kt=De.visible;if(!kt)Vt=[1,1,1,0];else if(Array.isArray(ce)){var ft;if(Gt?ee<ce.length?ft=ce[ee]:ft=[0,0,0,0]:ft=ce,ft.length===3){for(var Ee=0;Ee<3;++Ee)Vt[Ee]=ft[Ee];Vt[3]=1}else if(ft.length===4){for(var Ee=0;Ee<4;++Ee)Vt[Ee]=ft[Ee];!this.hasAlpha&&ft[3]<1&&(this.hasAlpha=!0)}}else Vt[0]=Vt[1]=Vt[2]=0,Vt[3]=1;if(!kt)$t=[1,1,1,0];else if(Array.isArray(me)){var ft;if(Jt?ee<me.length?ft=me[ee]:ft=[0,0,0,0]:ft=me,ft.length===3){for(var Ee=0;Ee<3;++Ee)$t[Ee]=ft[Ee];$t[Ee]=1}else if(ft.length===4){for(var Ee=0;Ee<4;++Ee)$t[Ee]=ft[Ee];!this.hasAlpha&&ft[3]<1&&(this.hasAlpha=!0)}}else $t[0]=$t[1]=$t[2]=0,$t[3]=1;var zt=.5;kt?Array.isArray(xe)?ee<xe.length?zt=+xe[ee]:zt=12:xe?zt=+xe:this.useOrtho&&(zt=12):zt=0;var Pt=0;Array.isArray(Te)?ee<Te.length?Pt=+Te[ee]:Pt=0:Te&&(Pt=+Te);for(var Et=Math.cos(Pt),Wt=Math.sin(Pt),we=ie[ee],Ee=0;Ee<3;++Ee)ae[Ee]=Math.max(ae[Ee],we[Ee]),re[Ee]=Math.min(re[Ee],we[Ee]);var ze=ne,tt=he,ze=0;Array.isArray(ne)?ee<ne.length?ze=ne[ee]:ze=0:ne&&(ze=ne);var tt=0;Array.isArray(he)?ee<he.length?tt=he[ee]:tt=0:he&&(tt=he),ze*=ze>0?1-Je[0][0]:ze<0?1+Je[1][0]:1,tt*=tt>0?1-Je[0][1]:tt<0?1+Je[1][1]:1;for(var at=[ze,tt],ir=Fe.cells||[],ur=Fe.positions||[],Ee=0;Ee<ir.length;++Ee)for(var vt=ir[Ee],_t=0;_t<3;++_t){for(var Rt=0;Rt<3;++Rt)et[3*Ct+Rt]=we[Rt];for(var Rt=0;Rt<4;++Rt)Ue[4*Ct+Rt]=Vt[Rt];$e[Ct]=pe;var nr=ur[vt[_t]];Ye[2*Ct]=zt*(Et*nr[0]-Wt*nr[1]+at[0]),Ye[2*Ct+1]=zt*(Wt*nr[0]+Et*nr[1]+at[1]),Ct+=1}for(var ir=qe.edges,ur=qe.positions,Ee=0;Ee<ir.length;++Ee)for(var vt=ir[Ee],_t=0;_t<2;++_t){for(var Rt=0;Rt<3;++Rt)et[3*It+Rt]=we[Rt];for(var Rt=0;Rt<4;++Rt)Ue[4*It+Rt]=$t[Rt];$e[It]=pe;var nr=ur[vt[_t]];Ye[2*It]=zt*(Et*nr[0]-Wt*nr[1]+at[0]),Ye[2*It+1]=zt*(Wt*nr[0]+Et*nr[1]+at[1]),It+=1}}}this.bounds=[re,ae],this.points=ie,this.pointCount=ie.length,this.vertexCount=oe,this.lineVertexCount=de,this.pointBuffer.update(et),this.colorBuffer.update(Ue),this.glyphBuffer.update(Ye),this.idBuffer.update($e),u.free(et),u.free(Ue),u.free(Ye),u.free($e)},T.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function X(G){var $=G.gl,te=h.createPerspective($),ee=h.createOrtho($),ie=h.createProject($),se=h.createPickPerspective($),W=h.createPickOrtho($),ne=h.createPickProject($),he=a($),re=a($),ae=a($),fe=a($),ce=l($,[{buffer:he,size:3,type:$.FLOAT},{buffer:re,size:4,type:$.FLOAT},{buffer:ae,size:2,type:$.FLOAT},{buffer:fe,size:4,type:$.UNSIGNED_BYTE,normalized:!0}]),xe=new y($,te,ee,ie,he,re,ae,fe,ce,se,W,ne);return xe.update(G),xe}t(X,"createPointCloud")},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(n,i,s){var o=n("glslify");s.boxVertex=o([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=o([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(n,i,s){var o=n("gl-shader"),a=n("gl-buffer"),l=n("./lib/shaders");i.exports=h;function u(v,c,d){this.plot=v,this.boxBuffer=c,this.boxShader=d,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}t(u,"SelectBox");var f=u.prototype;f.draw=function(){if(!!this.enabled){var v=this.plot,c=this.selectBox,d=this.borderWidth;this.innerFill;var g=this.innerColor;this.outerFill;var p=this.outerColor,b=this.borderColor,m=v.box,y=v.screenBox,T=v.dataBox,_=v.viewBox,M=v.pixelRatio,w=(c[0]-T[0])*(_[2]-_[0])/(T[2]-T[0])+_[0],x=(c[1]-T[1])*(_[3]-_[1])/(T[3]-T[1])+_[1],A=(c[2]-T[0])*(_[2]-_[0])/(T[2]-T[0])+_[0],S=(c[3]-T[1])*(_[3]-_[1])/(T[3]-T[1])+_[1];if(w=Math.max(w,_[0]),x=Math.max(x,_[1]),A=Math.min(A,_[2]),S=Math.min(S,_[3]),!(A<w||S<x)){m.bind();var k=y[2]-y[0],L=y[3]-y[1];if(this.outerFill&&(m.drawBox(0,0,k,x,p),m.drawBox(0,x,w,S,p),m.drawBox(0,S,k,L,p),m.drawBox(A,x,k,S,p)),this.innerFill&&m.drawBox(w,x,A,S,g),d>0){var P=d*M;m.drawBox(w-P,x-P,A+P,x+P,b),m.drawBox(w-P,S-P,A+P,S+P,b),m.drawBox(w-P,x-P,w+P,S+P,b),m.drawBox(A-P,x-P,A+P,S+P,b)}}}},f.update=function(v){v=v||{},this.innerFill=!!v.innerFill,this.outerFill=!!v.outerFill,this.innerColor=(v.innerColor||[0,0,0,.5]).slice(),this.outerColor=(v.outerColor||[0,0,0,.5]).slice(),this.borderColor=(v.borderColor||[0,0,0,1]).slice(),this.borderWidth=v.borderWidth||0,this.selectBox=(v.selectBox||this.selectBox).slice()},f.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function h(v,c){var d=v.gl,g=a(d,[0,0,0,1,1,0,1,1]),p=o(d,l.boxVertex,l.boxFragment),b=new u(v,g,p);return b.update(c),v.addOverlay(b),b}t(h,"createSelectBox")},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(n,i,s){i.exports=d;var o=n("gl-fbo"),a=n("typedarray-pool"),l=n("ndarray"),u=n("bit-twiddle").nextPow2,f=t(function(g,p,b){for(var m=1e8,y=-1,T=-1,_=g.shape[0],M=g.shape[1],w=0;w<_;w++)for(var x=0;x<M;x++){var A=g.get(w,x,0),S=g.get(w,x,1),k=g.get(w,x,2),L=g.get(w,x,3);if(A<255||S<255||k<255||L<255){var P=p-w,D=b-x,B=P*P+D*D;B<m&&(m=B,y=w,T=x)}}return[y,T,m]},"selectRange");function h(g,p,b,m,y){this.coord=[g,p],this.id=b,this.value=m,this.distance=y}t(h,"SelectResult");function v(g,p,b){this.gl=g,this.fbo=p,this.buffer=b,this._readTimeout=null;var m=this;this._readCallback=function(){!m.gl||(p.bind(),g.readPixels(0,0,p.shape[0],p.shape[1],g.RGBA,g.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}t(v,"SelectBuffer");var c=v.prototype;Object.defineProperty(c,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(g){if(!!this.gl){this.fbo.shape=g;var p=this.fbo.shape[0],b=this.fbo.shape[1];if(b*p*4>this.buffer.length){a.free(this.buffer);for(var m=this.buffer=a.mallocUint8(u(b*p*4)),y=0;y<b*p*4;++y)m[y]=255}return g}}}),c.begin=function(){var g=this.gl;this.shape,g&&(this.fbo.bind(),g.clearColor(1,1,1,1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT))},c.end=function(){var g=this.gl;!g||(g.bindFramebuffer(g.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},c.query=function(g,p,b){if(!this.gl)return null;var m=this.fbo.shape.slice();g=g|0,p=p|0,typeof b!="number"&&(b=1);var y=Math.min(Math.max(g-b,0),m[0])|0,T=Math.min(Math.max(g+b,0),m[0])|0,_=Math.min(Math.max(p-b,0),m[1])|0,M=Math.min(Math.max(p+b,0),m[1])|0;if(T<=y||M<=_)return null;var w=[T-y,M-_],x=l(this.buffer,[w[0],w[1],4],[4,m[0]*4,1],4*(y+m[0]*_)),A=f(x.hi(w[0],w[1],1),b,b),S=A[0],k=A[1];if(S<0||Math.pow(this.radius,2)<A[2])return null;var L=x.get(S,k,0),P=x.get(S,k,1),D=x.get(S,k,2),B=x.get(S,k,3);return new h(S+y|0,k+_|0,L,[P,D,B],Math.sqrt(A[2]))},c.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function d(g,p){var b=p[0],m=p[1],y={},T=o(g,b,m,y),_=a.mallocUint8(b*m*4);return new v(g,T,_)}t(d,"createSelectBuffer")},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(n,i,s){var o=n("./lib/create-uniforms"),a=n("./lib/create-attributes"),l=n("./lib/reflect"),u=n("./lib/shader-cache"),f=n("./lib/runtime-reflect"),h=n("./lib/GLError");function v(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}t(v,"Shader");var c=v.prototype;c.bind=function(){this.program||this._relink();var p,b=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(b>m)for(p=m;p<b;p++)this.gl.enableVertexAttribArray(p);else if(m>b)for(p=b;p<m;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=b,this.gl.useProgram(this.program)},c.dispose=function(){for(var p=this.gl.lastAttribCount,b=0;b<p;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function d(p,b){return p.name<b.name?-1:1}t(d,"compareAttributes"),c.update=function(p,b,m,y){if(!b||arguments.length===1){var T=p;p=T.vertex,b=T.fragment,m=T.uniforms,y=T.attributes}var _=this,M=_.gl,w=_._vref;_._vref=u.shader(M,M.VERTEX_SHADER,p),w&&w.dispose(),_.vertShader=_._vref.shader;var x=this._fref;if(_._fref=u.shader(M,M.FRAGMENT_SHADER,b),x&&x.dispose(),_.fragShader=_._fref.shader,!m||!y){var A=M.createProgram();if(M.attachShader(A,_.fragShader),M.attachShader(A,_.vertShader),M.linkProgram(A),!M.getProgramParameter(A,M.LINK_STATUS)){var S=M.getProgramInfoLog(A);throw new h(S,"Error linking program:"+S)}m=m||f.uniforms(M,A),y=y||f.attributes(M,A),M.deleteProgram(A)}y=y.slice(),y.sort(d);var k=[],L=[],P=[],D;for(D=0;D<y.length;++D){var B=y[D];if(B.type.indexOf("mat")>=0){for(var z=B.type.charAt(B.type.length-1)|0,R=new Array(z),F=0;F<z;++F)R[F]=P.length,L.push(B.name+"["+F+"]"),typeof B.location=="number"?P.push(B.location+F):Array.isArray(B.location)&&B.location.length===z&&typeof B.location[F]=="number"?P.push(B.location[F]|0):P.push(-1);k.push({name:B.name,type:B.type,locations:R})}else k.push({name:B.name,type:B.type,locations:[P.length]}),L.push(B.name),typeof B.location=="number"?P.push(B.location|0):P.push(-1)}var O=0;for(D=0;D<P.length;++D)if(P[D]<0){for(;P.indexOf(O)>=0;)O+=1;P[D]=O}var q=new Array(m.length);function H(){_.program=u.program(M,_._vref,_._fref,L,P);for(var j=0;j<m.length;++j)q[j]=M.getUniformLocation(_.program,m[j].name)}t(H,"relink"),H(),_._relink=H,_.types={uniforms:l(m),attributes:l(y)},_.attributes=a(M,_,k,P),Object.defineProperty(_,"uniforms",o(M,_,m,q))};function g(p,b,m,y,T){var _=new v(p);return _.update(b,m,y,T),_}t(g,"createShader"),i.exports=g},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(n,i,s){function o(a,l,u){this.shortMessage=l||"",this.longMessage=u||"",this.rawError=a||"",this.message="gl-shader: "+(l||a||"")+(u?`
`+u:""),this.stack=new Error().stack}t(o,"GLError"),o.prototype=new Error,o.prototype.name="GLError",o.prototype.constructor=o,i.exports=o},{}],134:[function(n,i,s){i.exports=v;var o=n("./GLError");function a(c,d,g,p,b,m){this._gl=c,this._wrapper=d,this._index=g,this._locations=p,this._dimension=b,this._constFunc=m}t(a,"ShaderAttribute");var l=a.prototype;l.pointer=t(function(d,g,p,b){var m=this,y=m._gl,T=m._locations[m._index];y.vertexAttribPointer(T,m._dimension,d||y.FLOAT,!!g,p||0,b||0),y.enableVertexAttribArray(T)},"setAttribPointer"),l.set=function(c,d,g,p){return this._constFunc(this._locations[this._index],c,d,g,p)},Object.defineProperty(l,"location",{get:function(){return this._locations[this._index]},set:function(c){return c!==this._locations[this._index]&&(this._locations[this._index]=c|0,this._wrapper.program=null),c|0}});var u=[function(c,d,g){return g.length===void 0?c.vertexAttrib1f(d,g):c.vertexAttrib1fv(d,g)},function(c,d,g,p){return g.length===void 0?c.vertexAttrib2f(d,g,p):c.vertexAttrib2fv(d,g)},function(c,d,g,p,b){return g.length===void 0?c.vertexAttrib3f(d,g,p,b):c.vertexAttrib3fv(d,g)},function(c,d,g,p,b,m){return g.length===void 0?c.vertexAttrib4f(d,g,p,b,m):c.vertexAttrib4fv(d,g)}];function f(c,d,g,p,b,m,y){var T=u[b],_=new a(c,d,g,p,b,T);Object.defineProperty(m,y,{set:function(M){return c.disableVertexAttribArray(p[g]),T(c,p[g],M),M},get:function(){return _},enumerable:!0})}t(f,"addVectorAttribute");function h(c,d,g,p,b,m,y){for(var T=new Array(b),_=new Array(b),M=0;M<b;++M)f(c,d,g[M],p,b,T,M),_[M]=T[M];Object.defineProperty(T,"location",{set:function(A){if(Array.isArray(A))for(var S=0;S<b;++S)_[S].location=A[S];else for(var S=0;S<b;++S)_[S].location=A+S;return A},get:function(){for(var A=new Array(b),S=0;S<b;++S)A[S]=p[g[S]];return A},enumerable:!0}),T.pointer=function(A,S,k,L){A=A||c.FLOAT,S=!!S,k=k||b*b,L=L||0;for(var P=0;P<b;++P){var D=p[g[P]];c.vertexAttribPointer(D,b,A,S,k,L+P*b),c.enableVertexAttribArray(D)}};var w=new Array(b),x=c["vertexAttrib"+b+"fv"];Object.defineProperty(m,y,{set:function(A){for(var S=0;S<b;++S){var k=p[g[S]];if(c.disableVertexAttribArray(k),Array.isArray(A[0]))x.call(c,k,A[S]);else{for(var L=0;L<b;++L)w[L]=A[b*S+L];x.call(c,k,w)}}return A},get:function(){return T},enumerable:!0})}t(h,"addMatrixAttribute");function v(c,d,g,p){for(var b={},m=0,y=g.length;m<y;++m){var T=g[m],_=T.name,M=T.type,w=T.locations;switch(M){case"bool":case"int":case"float":f(c,d,w[0],p,1,b,_);break;default:if(M.indexOf("vec")>=0){var x=M.charCodeAt(M.length-1)-48;if(x<2||x>4)throw new o("","Invalid data type for attribute "+_+": "+M);f(c,d,w[0],p,x,b,_)}else if(M.indexOf("mat")>=0){var x=M.charCodeAt(M.length-1)-48;if(x<2||x>4)throw new o("","Invalid data type for attribute "+_+": "+M);h(c,d,w,p,x,b,_)}else throw new o("","Unknown data type for attribute "+_+": "+M);break}}return b}t(v,"createAttributeWrapper")},{"./GLError":133}],135:[function(n,i,s){var o=n("./reflect"),a=n("./GLError");i.exports=f;function l(h){return function(){return h}}t(l,"identity");function u(h,v){for(var c=new Array(h),d=0;d<h;++d)c[d]=v;return c}t(u,"makeVector");function f(h,v,c,d){function g(M){return function(w,x,A){return w.getUniform(x.program,A[M])}}t(g,"makeGetter");function p(M){return t(function(x){for(var A=b("",M),S=0;S<A.length;++S){var k=A[S],L=k[0],P=k[1];if(d[P]){var D=x;if(typeof L=="string"&&(L.indexOf(".")===0||L.indexOf("[")===0)){var B=L;if(L.indexOf(".")===0&&(B=L.slice(1)),B.indexOf("]")===B.length-1){var z=B.indexOf("["),R=B.slice(0,z),F=B.slice(z+1,B.length-1);D=R?x[R][F]:x[F]}else D=x[B]}var O=c[P].type,q;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":h.uniform1i(d[P],D);break;case"float":h.uniform1f(d[P],D);break;default:var H=O.indexOf("vec");if(0<=H&&H<=1&&O.length===4+H){if(q=O.charCodeAt(O.length-1)-48,q<2||q>4)throw new a("","Invalid data type");switch(O.charAt(0)){case"b":case"i":h["uniform"+q+"iv"](d[P],D);break;case"v":h["uniform"+q+"fv"](d[P],D);break;default:throw new a("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(q=O.charCodeAt(O.length-1)-48,q<2||q>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+O);h["uniformMatrix"+q+"fv"](d[P],!1,D);break}else throw new a("","Unknown uniform data type for "+name+": "+O)}}}},"updateProperty")}t(p,"makeSetter");function b(M,w){if(typeof w!="object")return[[M,w]];var x=[];for(var A in w){var S=w[A],k=M;parseInt(A)+""===A?k+="["+A+"]":k+="."+A,typeof S=="object"?x.push.apply(x,b(k,S)):x.push([k,S])}return x}t(b,"enumerateIndices");function m(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var w=M.indexOf("vec");if(0<=w&&w<=1&&M.length===4+w){var x=M.charCodeAt(M.length-1)-48;if(x<2||x>4)throw new a("","Invalid data type");return M.charAt(0)==="b"?u(x,!1):u(x,0)}else if(M.indexOf("mat")===0&&M.length===4){var x=M.charCodeAt(M.length-1)-48;if(x<2||x>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+M);return u(x*x,0)}else throw new a("","Unknown uniform data type for "+name+": "+M)}}t(m,"defaultValue");function y(M,w,x){if(typeof x=="object"){var A=T(x);Object.defineProperty(M,w,{get:l(A),set:p(x),enumerable:!0,configurable:!1})}else d[x]?Object.defineProperty(M,w,{get:g(x),set:p(x),enumerable:!0,configurable:!1}):M[w]=m(c[x].type)}t(y,"storeProperty");function T(M){var w;if(Array.isArray(M)){w=new Array(M.length);for(var x=0;x<M.length;++x)y(w,x,M[x])}else{w={};for(var A in M)y(w,A,M[A])}return w}t(T,"processObject");var _=o(c,!0);return{get:l(T(_)),set:p(_),enumerable:!0,configurable:!0}}t(f,"createUniformWrapper")},{"./GLError":133,"./reflect":136}],136:[function(n,i,s){i.exports=o;function o(a,l){for(var u={},f=0;f<a.length;++f)for(var h=a[f].name,v=h.split("."),c=u,d=0;d<v.length;++d){var g=v[d].split("[");if(g.length>1){g[0]in c||(c[g[0]]=[]),c=c[g[0]];for(var p=1;p<g.length;++p){var b=parseInt(g[p]);p<g.length-1||d<v.length-1?(b in c||(p<g.length-1?c[b]=[]:c[b]={}),c=c[b]):l?c[b]=f:c[b]=a[f].type}}else d<v.length-1?(g[0]in c||(c[g[0]]={}),c=c[g[0]]):l?c[g[0]]=f:c[g[0]]=a[f].type}return u}t(o,"makeReflectTypes")},{}],137:[function(n,i,s){s.uniforms=u,s.attributes=f;var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function l(h,v){if(!a){var c=Object.keys(o);a={};for(var d=0;d<c.length;++d){var g=c[d];a[h[g]]=o[g]}}return a[v]}t(l,"getType");function u(h,v){for(var c=h.getProgramParameter(v,h.ACTIVE_UNIFORMS),d=[],g=0;g<c;++g){var p=h.getActiveUniform(v,g);if(p){var b=l(h,p.type);if(p.size>1)for(var m=0;m<p.size;++m)d.push({name:p.name.replace("[0]","["+m+"]"),type:b});else d.push({name:p.name,type:b})}}return d}t(u,"runtimeUniforms");function f(h,v){for(var c=h.getProgramParameter(v,h.ACTIVE_ATTRIBUTES),d=[],g=0;g<c;++g){var p=h.getActiveAttrib(v,g);p&&d.push({name:p.name,type:l(h,p.type)})}return d}t(f,"runtimeAttributes")},{}],138:[function(n,i,s){s.shader=b,s.program=m;var o=n("./GLError"),a=n("gl-format-compiler-error"),l=typeof WeakMap>"u"?n("weakmap-shim"):WeakMap,u=new l,f=0;function h(y,T,_,M,w,x,A){this.id=y,this.src=T,this.type=_,this.shader=M,this.count=x,this.programs=[],this.cache=A}t(h,"ShaderReference"),h.prototype.dispose=function(){if(--this.count===0){for(var y=this.cache,T=y.gl,_=this.programs,M=0,w=_.length;M<w;++M){var x=y.programs[_[M]];x&&(delete y.programs[M],T.deleteProgram(x))}T.deleteShader(this.shader),delete y.shaders[this.type===T.FRAGMENT_SHADER|0][this.src]}};function v(y){this.gl=y,this.shaders=[{},{}],this.programs={}}t(v,"ContextCache");var c=v.prototype;function d(y,T,_){var M=y.createShader(T);if(y.shaderSource(M,_),y.compileShader(M),!y.getShaderParameter(M,y.COMPILE_STATUS)){var w=y.getShaderInfoLog(M);try{var x=a(w,_,T)}catch(A){throw console.warn("Failed to format compiler error: "+A),new o(w,`Error compiling shader:
`+w)}throw new o(w,x.short,x.long)}return M}t(d,"compileShader"),c.getShaderReference=function(y,T){var _=this.gl,M=this.shaders[y===_.FRAGMENT_SHADER|0],w=M[T];if(!w||!_.isShader(w.shader)){var x=d(_,y,T);w=M[T]=new h(f++,T,y,x,[],1,this)}else w.count+=1;return w};function g(y,T,_,M,w){var x=y.createProgram();y.attachShader(x,T),y.attachShader(x,_);for(var A=0;A<M.length;++A)y.bindAttribLocation(x,w[A],M[A]);if(y.linkProgram(x),!y.getProgramParameter(x,y.LINK_STATUS)){var S=y.getProgramInfoLog(x);throw new o(S,"Error linking program: "+S)}return x}t(g,"linkProgram"),c.getProgram=function(y,T,_,M){var w=[y.id,T.id,_.join(":"),M.join(":")].join("@"),x=this.programs[w];return(!x||!this.gl.isProgram(x))&&(this.programs[w]=x=g(this.gl,y.shader,T.shader,_,M),y.programs.push(w),T.programs.push(w)),x};function p(y){var T=u.get(y);return T||(T=new v(y),u.set(y,T)),T}t(p,"getCache");function b(y,T,_){return p(y).getShaderReference(T,_)}t(b,"getShaderReference");function m(y,T,_,M,w){return p(y).getProgram(T,_,M,w)}t(m,"createProgram")},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(n,i,s){i.exports=l;function o(u){this.plot=u,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}t(o,"GLSpikes2D");var a=o.prototype;a.update=function(u){u=u||{},this.enable=(u.enable||[!0,!0,!1,!1]).slice(),this.width=(u.width||[1,1,1,1]).slice(),this.color=(u.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(f){return f.slice()}),this.center=(u.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var u=this.enable,f=this.width,h=this.color,v=this.center,c=this.plot,d=c.line,g=c.dataBox,p=c.viewBox;if(d.bind(),g[0]<=v[0]&&v[0]<=g[2]&&g[1]<=v[1]&&v[1]<=g[3]){var b=p[0]+(v[0]-g[0])/(g[2]-g[0])*(p[2]-p[0]),m=p[1]+(v[1]-g[1])/(g[3]-g[1])*(p[3]-p[1]);u[0]&&d.drawLine(b,m,p[0],m,f[0],h[0]),u[1]&&d.drawLine(b,m,b,p[1],f[1],h[1]),u[2]&&d.drawLine(b,m,p[2],m,f[2],h[2]),u[3]&&d.drawLine(b,m,b,p[3],f[3],h[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function l(u,f){var h=new o(u);return h.update(f),u.addOverlay(h),h}t(l,"createSpikes2D")},{}],140:[function(n,i,s){var o=n("glslify"),a=n("gl-shader"),l=o([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),u=o([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);i.exports=function(f){return a(f,l,u,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(n,i,s){var o=n("gl-buffer"),a=n("gl-vao"),l=n("./shaders/index");i.exports=g;var u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(p,b,m,y){this.gl=p,this.buffer=b,this.vao=m,this.shader=y,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}t(f,"AxisSpikes");var h=f.prototype,v=[0,0,0],c=[0,0,0],d=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(p){},h.draw=function(p){var b=this.gl,m=this.vao,y=this.shader;m.bind(),y.bind();var T=p.model||u,_=p.view||u,M=p.projection||u,w;this.axes&&(w=this.axes.lastCubeProps.axis);for(var x=v,A=c,S=0;S<3;++S)w&&w[S]<0?(x[S]=this.bounds[0][S],A[S]=this.bounds[1][S]):(x[S]=this.bounds[1][S],A[S]=this.bounds[0][S]);d[0]=b.drawingBufferWidth,d[1]=b.drawingBufferHeight,y.uniforms.model=T,y.uniforms.view=_,y.uniforms.projection=M,y.uniforms.coordinates=[this.position,x,A],y.uniforms.colors=this.colors,y.uniforms.screenShape=d;for(var S=0;S<3;++S)y.uniforms.lineWidth=this.lineWidth[S]*this.pixelRatio,this.enabled[S]&&(m.draw(b.TRIANGLES,6,6*S),this.drawSides[S]&&m.draw(b.TRIANGLES,12,18+12*S));m.unbind()},h.update=function(p){!p||("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function g(p,b){var m=[];function y(x,A,S,k,L,P){var D=[x,A,S,0,0,0,1];D[k+3]=1,D[k]=L,m.push.apply(m,D),D[6]=-1,m.push.apply(m,D),D[k]=P,m.push.apply(m,D),m.push.apply(m,D),D[6]=1,m.push.apply(m,D),D[k]=L,m.push.apply(m,D)}t(y,"line"),y(0,0,0,0,0,1),y(0,0,0,1,0,1),y(0,0,0,2,0,1),y(1,0,0,1,-1,1),y(1,0,0,2,-1,1),y(0,1,0,0,-1,1),y(0,1,0,2,-1,1),y(0,0,1,0,-1,1),y(0,0,1,1,-1,1);var T=o(p,m),_=a(p,[{type:p.FLOAT,buffer:T,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:T,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:T,size:1,offset:24,stride:28}]),M=l(p);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var w=new f(p,T,_,M);return w.update(b),w}t(g,"createSpikes")},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(n,i,s){var o=n("glslify"),a=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),l=o([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),u=o([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),f=o([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:u,fragment:f,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(n,i,s){var o=n("gl-vec3"),a=n("gl-vec4"),l=["xyz","xzy","yxz","yzx","zxy","zyx"],u=t(function(m,y,T,_){for(var M=m.points,w=m.velocities,x=m.divergences,A=[],S=[],k=[],L=[],P=[],D=[],B=0,z=0,R=a.create(),F=a.create(),O=8,q=0;q<M.length;q++){var H=M[q],j=w[q],X=x[q];y===0&&(X=T*.05),z=o.length(j)/_,R=a.create(),o.copy(R,j),R[3]=X;for(var G=0;G<O;G++)P[G]=[H[0],H[1],H[2],G];if(L.length>0)for(var G=0;G<O;G++){var $=(G+1)%O;A.push(L[G],P[G],P[$],P[$],L[$],L[G]),k.push(F,R,R,R,F,F),D.push(B,z,z,z,B,B);var te=A.length;S.push([te-6,te-5,te-4],[te-3,te-2,te-1])}var ee=L;L=P,P=ee;var ie=F;F=R,R=ie;var se=B;B=z,z=se}return{positions:A,cells:S,vectors:k,vertexIntensity:D}},"streamToTube"),f=t(function(m,y,T,_){for(var M=0,w=0;w<m.length;w++)for(var x=m[w].velocities,A=0;A<x.length;A++)M=Math.max(M,o.length(x[A]));for(var S=m.map(function(q){return u(q,T,_,M)}),k=[],L=[],P=[],D=[],w=0;w<S.length;w++){var B=S[w],z=k.length;k=k.concat(B.positions),P=P.concat(B.vectors),D=D.concat(B.vertexIntensity);for(var A=0;A<B.cells.length;A++){var R=B.cells[A],F=[];L.push(F);for(var O=0;O<R.length;O++)F.push(R[O]+z)}}return{positions:k,cells:L,vectors:P,vertexIntensity:D,colormap:y}},"createTubes"),h=t(function(m,y){var T=m.length,_;for(_=0;_<T;_++){var M=m[_];if(M===y)return _;if(M>y)return _-1}return _},"findLastSmallerIndex"),v=t(function(m,y,T){return m<y?y:m>T?T:m},"clamp"),c=t(function(m,y,T){var _=y.vectors,M=y.meshgrid,w=m[0],x=m[1],A=m[2],S=M[0].length,k=M[1].length,L=M[2].length,P=h(M[0],w),D=h(M[1],x),B=h(M[2],A),z=P+1,R=D+1,F=B+1;if(P=v(P,0,S-1),z=v(z,0,S-1),D=v(D,0,k-1),R=v(R,0,k-1),B=v(B,0,L-1),F=v(F,0,L-1),P<0||D<0||B<0||z>S-1||R>k-1||F>L-1)return o.create();var O=M[0][P],q=M[0][z],H=M[1][D],j=M[1][R],X=M[2][B],G=M[2][F],$=(w-O)/(q-O),te=(x-H)/(j-H),ee=(A-X)/(G-X);isFinite($)||($=.5),isFinite(te)||(te=.5),isFinite(ee)||(ee=.5);var ie,se,W,ne,he,re;switch(T.reversedX&&(P=S-1-P,z=S-1-z),T.reversedY&&(D=k-1-D,R=k-1-R),T.reversedZ&&(B=L-1-B,F=L-1-F),T.filled){case 5:he=B,re=F,W=D*L,ne=R*L,ie=P*L*k,se=z*L*k;break;case 4:he=B,re=F,ie=P*L,se=z*L,W=D*L*S,ne=R*L*S;break;case 3:W=D,ne=R,he=B*k,re=F*k,ie=P*k*L,se=z*k*L;break;case 2:W=D,ne=R,ie=P*k,se=z*k,he=B*k*S,re=F*k*S;break;case 1:ie=P,se=z,he=B*S,re=F*S,W=D*S*L,ne=R*S*L;break;default:ie=P,se=z,W=D*S,ne=R*S,he=B*S*k,re=F*S*k;break}var ae=_[ie+W+he],fe=_[ie+W+re],ce=_[ie+ne+he],xe=_[ie+ne+re],Te=_[se+W+he],me=_[se+W+re],pe=_[se+ne+he],oe=_[se+ne+re],de=o.create(),ye=o.create(),we=o.create(),Ee=o.create();o.lerp(de,ae,Te,$),o.lerp(ye,fe,me,$),o.lerp(we,ce,pe,$),o.lerp(Ee,xe,oe,$);var De=o.create(),Fe=o.create();o.lerp(De,de,we,te),o.lerp(Fe,ye,Ee,te);var qe=o.create();return o.lerp(qe,De,Fe,ee),qe},"sampleMeshgrid"),d=t(function(m){var y=1/0;m.sort(function(w,x){return w-x});for(var T=m.length,_=1;_<T;_++){var M=Math.abs(m[_]-m[_-1]);M<y&&(y=M)}return y},"findMinSeparation"),g=t(function(m){for(var y=[],T=[],_=[],M={},w={},x={},A=m.length,S=0;S<A;S++){var k=m[S],L=k[0],P=k[1],D=k[2];M[L]||(y.push(L),M[L]=!0),w[P]||(T.push(P),w[P]=!0),x[D]||(_.push(D),x[D]=!0)}var B=d(y),z=d(T),R=d(_),F=Math.min(B,z,R);return isFinite(F)?F:1},"calculateMinPositionDistance");i.exports=function(m,y){var T=m.startingPositions,_=m.maxLength||1e3,M=m.tubeSize||1,w=m.absoluteTubeSize,x=m.gridFill||"+x+y+z",A={};x.indexOf("-x")!==-1&&(A.reversedX=!0),x.indexOf("-y")!==-1&&(A.reversedY=!0),x.indexOf("-z")!==-1&&(A.reversedZ=!0),A.filled=l.indexOf(x.replace(/-/g,"").replace(/\+/g,""));var S=m.getVelocity||function(me){return c(me,m,A)},k=m.getDivergence||function(me,pe){var oe=o.create(),de=1e-4;o.add(oe,me,[de,0,0]);var ye=S(oe);o.subtract(ye,ye,pe),o.scale(ye,ye,1/de),o.add(oe,me,[0,de,0]);var we=S(oe);o.subtract(we,we,pe),o.scale(we,we,1/de),o.add(oe,me,[0,0,de]);var Ee=S(oe);return o.subtract(Ee,Ee,pe),o.scale(Ee,Ee,1/de),o.add(oe,ye,we),o.add(oe,oe,Ee),oe},L=[],P=y[0][0],D=y[0][1],B=y[0][2],z=y[1][0],R=y[1][1],F=y[1][2],O=t(function(me){var pe=me[0],oe=me[1],de=me[2];return!(pe<P||pe>z||oe<D||oe>R||de<B||de>F)},"inBounds"),q=o.distance(y[0],y[1]),H=10*q/_,j=H*H,X=1,G=0,$=T.length;$>1&&(X=g(T));for(var te=0;te<$;te++){var ee=o.create();o.copy(ee,T[te]);var ie=[ee],se=[],W=S(ee),ne=ee;se.push(W);var he=[],re=k(ee,W),ae=o.length(re);isFinite(ae)&&ae>G&&(G=ae),he.push(ae),L.push({points:ie,velocities:se,divergences:he});for(var fe=0;fe<_*100&&ie.length<_&&O(ee);){fe++;var ce=o.clone(W),xe=o.squaredLength(ce);if(xe===0)break;if(xe>j&&o.scale(ce,ce,H/Math.sqrt(xe)),o.add(ce,ce,ee),W=S(ce),o.squaredDistance(ne,ce)-j>-1e-4*j){ie.push(ce),ne=ce,se.push(W);var re=k(ce,W),ae=o.length(re);isFinite(ae)&&ae>G&&(G=ae),he.push(ae)}ee=ce}}var Te=f(L,m.colormap,G,X);return w?Te.tubeScale=w:(G===0&&(G=1),Te.tubeScale=M*.5*X/G),Te};var p=n("./lib/shaders"),b=n("gl-cone3d").createMesh;i.exports.createTubeMesh=function(m,y){return b(m,y,{shaders:p,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(n,i,s){var o=n("gl-shader"),a=n("glslify"),l=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),u=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),h=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(v){var c=o(v,l,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createPickShader=function(v){var c=o(v,l,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createContourShader=function(v){var c=o(v,f,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},s.createPickContourShader=function(v){var c=o(v,f,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},{"gl-shader":132,glslify:231}],145:[function(n,i,s){i.exports=se;var o=n("bit-twiddle"),a=n("gl-buffer"),l=n("gl-vao"),u=n("gl-texture2d"),f=n("typedarray-pool"),h=n("colormap"),v=n("ndarray-ops"),c=n("ndarray-pack"),d=n("ndarray"),g=n("surface-nets"),p=n("gl-mat4/multiply"),b=n("gl-mat4/invert"),m=n("binary-search-bounds"),y=n("ndarray-gradient"),T=n("./lib/shaders"),_=T.createShader,M=T.createContourShader,w=T.createPickShader,x=T.createPickContourShader,A=4*(4+3+3),S=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],L=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var W=0;W<3;++W){var ne=L[W],he=(W+1)%3,re=(W+2)%3;ne[he+0]=1,ne[re+3]=1,ne[W+6]=1}})();function P(W,ne,he,re,ae){this.position=W,this.index=ne,this.uv=he,this.level=re,this.dataCoordinate=ae}t(P,"SurfacePickResult");var D=256;function B(W,ne,he,re,ae,fe,ce,xe,Te,me,pe,oe,de,ye,we){this.gl=W,this.shape=ne,this.bounds=he,this.objectOffset=we,this.intensityBounds=[],this._shader=re,this._pickShader=ae,this._coordinateBuffer=fe,this._vao=ce,this._colorMap=xe,this._contourShader=Te,this._contourPickShader=me,this._contourBuffer=pe,this._contourVAO=oe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new P([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=ye,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[d(f.mallocFloat(1024),[0,0]),d(f.mallocFloat(1024),[0,0]),d(f.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}t(B,"SurfacePlot");var z=B.prototype;z.genColormap=function(W,ne){var he=!1,re=c([h({colormap:W,nshades:D,format:"rgba"}).map(function(ae,fe){var ce=ne?R(fe/255,ne):ae[3];return ce<1&&(he=!0),[ae[0],ae[1],ae[2],255*ce]})]);return v.divseq(re,255),this.hasAlphaScale=he,re},z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},z.isOpaque=function(){return!this.isTransparent()},z.pickSlots=1,z.setPickBase=function(W){this.pickId=W};function R(W,ne){if(!ne||!ne.length)return 1;for(var he=0;he<ne.length;++he){if(ne.length<2)return 1;if(ne[he][0]===W)return ne[he][1];if(ne[he][0]>W&&he>0){var re=(ne[he][0]-W)/(ne[he][0]-ne[he-1][0]);return ne[he][1]*(1-re)+re*ne[he-1][1]}}return 1}t(R,"getOpacityFromScale");var F=[0,0,0],O={showSurface:!1,showContour:!1,projections:[S.slice(),S.slice(),S.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function q(W,ne){var he,re,ae,fe=ne.axes&&ne.axes.lastCubeProps.axis||F,ce=ne.showSurface,xe=ne.showContour;for(he=0;he<3;++he)for(ce=ce||ne.surfaceProject[he],re=0;re<3;++re)xe=xe||ne.contourProject[he][re];for(he=0;he<3;++he){var Te=O.projections[he];for(re=0;re<16;++re)Te[re]=0;for(re=0;re<4;++re)Te[5*re]=1;Te[5*he]=0,Te[12+he]=ne.axesBounds[+(fe[he]>0)][he],p(Te,W.model,Te);var me=O.clipBounds[he];for(ae=0;ae<2;++ae)for(re=0;re<3;++re)me[ae][re]=W.clipBounds[ae][re];me[0][he]=-1e8,me[1][he]=1e8}return O.showSurface=ce,O.showContour=xe,O}t(q,"computeProjectionData");var H={model:S,view:S,projection:S,inverseModel:S.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},j=S.slice(),X=[1,0,0,0,1,0,0,0,1];function G(W,ne){W=W||{};var he=this.gl;he.disable(he.CULL_FACE),this._colorMap.bind(0);var re=H;re.model=W.model||S,re.view=W.view||S,re.projection=W.projection||S,re.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],re.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],re.objectOffset=this.objectOffset,re.contourColor=this.contourColor[0],re.inverseModel=b(re.inverseModel,re.model);for(var ae=0;ae<2;++ae)for(var fe=re.clipBounds[ae],ce=0;ce<3;++ce)fe[ce]=Math.min(Math.max(this.clipBounds[ae][ce],-1e8),1e8);re.kambient=this.ambientLight,re.kdiffuse=this.diffuseLight,re.kspecular=this.specularLight,re.roughness=this.roughness,re.fresnel=this.fresnel,re.opacity=this.opacity,re.height=0,re.permutation=X,re.vertexColor=this.vertexColor;var xe=j;for(p(xe,re.view,re.model),p(xe,re.projection,xe),b(xe,xe),ae=0;ae<3;++ae)re.eyePosition[ae]=xe[12+ae]/xe[15];var Te=xe[15];for(ae=0;ae<3;++ae)Te+=this.lightPosition[ae]*xe[4*ae+3];for(ae=0;ae<3;++ae){var me=xe[12+ae];for(ce=0;ce<3;++ce)me+=xe[4*ce+ae]*this.lightPosition[ce];re.lightPosition[ae]=me/Te}var pe=q(re,this);if(pe.showSurface){for(this._shader.bind(),this._shader.uniforms=re,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(he.TRIANGLES,this._vertexCount),ae=0;ae<3;++ae)!this.surfaceProject[ae]||!this.vertexCount||(this._shader.uniforms.model=pe.projections[ae],this._shader.uniforms.clipBounds=pe.clipBounds[ae],this._vao.draw(he.TRIANGLES,this._vertexCount));this._vao.unbind()}if(pe.showContour){var oe=this._contourShader;re.kambient=1,re.kdiffuse=0,re.kspecular=0,re.opacity=1,oe.bind(),oe.uniforms=re;var de=this._contourVAO;for(de.bind(),ae=0;ae<3;++ae)for(oe.uniforms.permutation=L[ae],he.lineWidth(this.contourWidth[ae]*this.pixelRatio),ce=0;ce<this.contourLevels[ae].length;++ce)ce===this.highlightLevel[ae]?(oe.uniforms.contourColor=this.highlightColor[ae],oe.uniforms.contourTint=this.highlightTint[ae]):(ce===0||ce-1===this.highlightLevel[ae])&&(oe.uniforms.contourColor=this.contourColor[ae],oe.uniforms.contourTint=this.contourTint[ae]),this._contourCounts[ae][ce]&&(oe.uniforms.height=this.contourLevels[ae][ce],de.draw(he.LINES,this._contourCounts[ae][ce],this._contourOffsets[ae][ce]));for(ae=0;ae<3;++ae)for(oe.uniforms.model=pe.projections[ae],oe.uniforms.clipBounds=pe.clipBounds[ae],ce=0;ce<3;++ce)if(!!this.contourProject[ae][ce]){oe.uniforms.permutation=L[ce],he.lineWidth(this.contourWidth[ce]*this.pixelRatio);for(var ye=0;ye<this.contourLevels[ce].length;++ye)ye===this.highlightLevel[ce]?(oe.uniforms.contourColor=this.highlightColor[ce],oe.uniforms.contourTint=this.highlightTint[ce]):(ye===0||ye-1===this.highlightLevel[ce])&&(oe.uniforms.contourColor=this.contourColor[ce],oe.uniforms.contourTint=this.contourTint[ce]),this._contourCounts[ce][ye]&&(oe.uniforms.height=this.contourLevels[ce][ye],de.draw(he.LINES,this._contourCounts[ce][ye],this._contourOffsets[ce][ye]))}for(de.unbind(),de=this._dynamicVAO,de.bind(),ae=0;ae<3;++ae)if(this._dynamicCounts[ae]!==0)for(oe.uniforms.model=re.model,oe.uniforms.clipBounds=re.clipBounds,oe.uniforms.permutation=L[ae],he.lineWidth(this.dynamicWidth[ae]*this.pixelRatio),oe.uniforms.contourColor=this.dynamicColor[ae],oe.uniforms.contourTint=this.dynamicTint[ae],oe.uniforms.height=this.dynamicLevel[ae],de.draw(he.LINES,this._dynamicCounts[ae],this._dynamicOffsets[ae]),ce=0;ce<3;++ce)!this.contourProject[ce][ae]||(oe.uniforms.model=pe.projections[ce],oe.uniforms.clipBounds=pe.clipBounds[ce],de.draw(he.LINES,this._dynamicCounts[ae],this._dynamicOffsets[ae]));de.unbind()}}t(G,"drawCore"),z.draw=function(W){return G.call(this,W,!1)},z.drawTransparent=function(W){return G.call(this,W,!0)};var $={model:S,view:S,projection:S,inverseModel:S,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};z.drawPick=function(W){W=W||{};var ne=this.gl;ne.disable(ne.CULL_FACE);var he=$;he.model=W.model||S,he.view=W.view||S,he.projection=W.projection||S,he.shape=this._field[2].shape,he.pickId=this.pickId/255,he.lowerBound=this.bounds[0],he.upperBound=this.bounds[1],he.objectOffset=this.objectOffset,he.permutation=X;for(var re=0;re<2;++re)for(var ae=he.clipBounds[re],fe=0;fe<3;++fe)ae[fe]=Math.min(Math.max(this.clipBounds[re][fe],-1e8),1e8);var ce=q(he,this);if(ce.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=he,this._vao.bind(),this._vao.draw(ne.TRIANGLES,this._vertexCount),re=0;re<3;++re)!this.surfaceProject[re]||(this._pickShader.uniforms.model=ce.projections[re],this._pickShader.uniforms.clipBounds=ce.clipBounds[re],this._vao.draw(ne.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ce.showContour){var xe=this._contourPickShader;xe.bind(),xe.uniforms=he;var Te=this._contourVAO;for(Te.bind(),fe=0;fe<3;++fe)for(ne.lineWidth(this.contourWidth[fe]*this.pixelRatio),xe.uniforms.permutation=L[fe],re=0;re<this.contourLevels[fe].length;++re)this._contourCounts[fe][re]&&(xe.uniforms.height=this.contourLevels[fe][re],Te.draw(ne.LINES,this._contourCounts[fe][re],this._contourOffsets[fe][re]));for(re=0;re<3;++re)for(xe.uniforms.model=ce.projections[re],xe.uniforms.clipBounds=ce.clipBounds[re],fe=0;fe<3;++fe)if(!!this.contourProject[re][fe]){xe.uniforms.permutation=L[fe],ne.lineWidth(this.contourWidth[fe]*this.pixelRatio);for(var me=0;me<this.contourLevels[fe].length;++me)this._contourCounts[fe][me]&&(xe.uniforms.height=this.contourLevels[fe][me],Te.draw(ne.LINES,this._contourCounts[fe][me],this._contourOffsets[fe][me]))}Te.unbind()}},z.pick=function(W){if(!W||W.id!==this.pickId)return null;var ne=this._field[2].shape,he=this._pickResult,re=ne[0]*(W.value[0]+(W.value[2]>>4)/16)/255,ae=Math.floor(re),fe=re-ae,ce=ne[1]*(W.value[1]+(W.value[2]&15)/16)/255,xe=Math.floor(ce),Te=ce-xe;ae+=1,xe+=1;var me=he.position;me[0]=me[1]=me[2]=0;for(var pe=0;pe<2;++pe)for(var oe=pe?fe:1-fe,de=0;de<2;++de)for(var ye=de?Te:1-Te,we=ae+pe,Ee=xe+de,De=oe*ye,Fe=0;Fe<3;++Fe)me[Fe]+=this._field[Fe].get(we,Ee)*De;for(var qe=this._pickResult.level,Je=0;Je<3;++Je)if(qe[Je]=m.le(this.contourLevels[Je],me[Je]),qe[Je]<0)this.contourLevels[Je].length>0&&(qe[Je]=0);else if(qe[Je]<this.contourLevels[Je].length-1){var Ge=this.contourLevels[Je][qe[Je]],et=this.contourLevels[Je][qe[Je]+1];Math.abs(Ge-me[Je])>Math.abs(et-me[Je])&&(qe[Je]+=1)}for(he.index[0]=fe<.5?ae:ae+1,he.index[1]=Te<.5?xe:xe+1,he.uv[0]=re/ne[0],he.uv[1]=ce/ne[1],Fe=0;Fe<3;++Fe)he.dataCoordinate[Fe]=this._field[Fe].get(he.index[0],he.index[1]);return he},z.padField=function(W,ne){var he=ne.shape.slice(),re=W.shape.slice();v.assign(W.lo(1,1).hi(he[0],he[1]),ne),v.assign(W.lo(1).hi(he[0],1),ne.hi(he[0],1)),v.assign(W.lo(1,re[1]-1).hi(he[0],1),ne.lo(0,he[1]-1).hi(he[0],1)),v.assign(W.lo(0,1).hi(1,he[1]),ne.hi(1)),v.assign(W.lo(re[0]-1,1).hi(1,he[1]),ne.lo(he[0]-1)),W.set(0,0,ne.get(0,0)),W.set(0,re[1]-1,ne.get(0,he[1]-1)),W.set(re[0]-1,0,ne.get(he[0]-1,0)),W.set(re[0]-1,re[1]-1,ne.get(he[0]-1,he[1]-1))};function te(W,ne){return Array.isArray(W)?[ne(W[0]),ne(W[1]),ne(W[2])]:[ne(W),ne(W),ne(W)]}t(te,"handleArray");function ee(W){return Array.isArray(W)?W.length===3?[W[0],W[1],W[2],1]:[W[0],W[1],W[2],W[3]]:[0,0,0,1]}t(ee,"toColor");function ie(W){if(Array.isArray(W)){if(Array.isArray(W))return[ee(W[0]),ee(W[1]),ee(W[2])];var ne=ee(W);return[ne.slice(),ne.slice(),ne.slice()]}}t(ie,"handleColor"),z.update=function(W){W=W||{},this.objectOffset=W.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in W&&(this.contourWidth=te(W.contourWidth,Number)),"showContour"in W&&(this.showContour=te(W.showContour,Boolean)),"showSurface"in W&&(this.showSurface=!!W.showSurface),"contourTint"in W&&(this.contourTint=te(W.contourTint,Boolean)),"contourColor"in W&&(this.contourColor=ie(W.contourColor)),"contourProject"in W&&(this.contourProject=te(W.contourProject,function(ut){return te(ut,Boolean)})),"surfaceProject"in W&&(this.surfaceProject=W.surfaceProject),"dynamicColor"in W&&(this.dynamicColor=ie(W.dynamicColor)),"dynamicTint"in W&&(this.dynamicTint=te(W.dynamicTint,Number)),"dynamicWidth"in W&&(this.dynamicWidth=te(W.dynamicWidth,Number)),"opacity"in W&&(this.opacity=W.opacity),"opacityscale"in W&&(this.opacityscale=W.opacityscale),"colorBounds"in W&&(this.colorBounds=W.colorBounds),"vertexColor"in W&&(this.vertexColor=W.vertexColor?1:0),"colormap"in W&&this._colorMap.setPixels(this.genColormap(W.colormap,this.opacityscale));var ne=W.field||W.coords&&W.coords[2]||null,he=!1;if(ne||(this._field[2].shape[0]||this._field[2].shape[2]?ne=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):ne=this._field[2].hi(0,0)),"field"in W||"coords"in W){var re=(ne.shape[0]+2)*(ne.shape[1]+2);re>this._field[2].data.length&&(f.freeFloat(this._field[2].data),this._field[2].data=f.mallocFloat(o.nextPow2(re))),this._field[2]=d(this._field[2].data,[ne.shape[0]+2,ne.shape[1]+2]),this.padField(this._field[2],ne),this.shape=ne.shape.slice();for(var ae=this.shape,fe=0;fe<2;++fe)this._field[2].size>this._field[fe].data.length&&(f.freeFloat(this._field[fe].data),this._field[fe].data=f.mallocFloat(this._field[2].size)),this._field[fe]=d(this._field[fe].data,[ae[0]+2,ae[1]+2]);if(W.coords){var ce=W.coords;if(!Array.isArray(ce)||ce.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(fe=0;fe<2;++fe){var xe=ce[fe];for(de=0;de<2;++de)if(xe.shape[de]!==ae[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[fe],xe)}}else if(W.ticks){var Te=W.ticks;if(!Array.isArray(Te)||Te.length!==2)throw new Error("gl-surface: invalid ticks");for(fe=0;fe<2;++fe){var me=Te[fe];if((Array.isArray(me)||me.length)&&(me=d(me)),me.shape[0]!==ae[fe])throw new Error("gl-surface: invalid tick length");var pe=d(me.data,ae);pe.stride[fe]=me.stride[0],pe.stride[fe^1]=0,this.padField(this._field[fe],pe)}}else{for(fe=0;fe<2;++fe){var oe=[0,0];oe[fe]=1,this._field[fe]=d(this._field[fe].data,[ae[0]+2,ae[1]+2],oe,0)}this._field[0].set(0,0,0);for(var de=0;de<ae[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set(ae[0]+1,0,ae[0]-1),this._field[1].set(0,0,0),de=0;de<ae[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,ae[1]+1,ae[1]-1)}var ye=this._field,we=d(f.mallocFloat(ye[2].size*3*2),[3,ae[0]+2,ae[1]+2,2]);for(fe=0;fe<3;++fe)y(we.pick(fe),ye[fe],"mirror");var Ee=d(f.mallocFloat(ye[2].size*3),[ae[0]+2,ae[1]+2,3]);for(fe=0;fe<ae[0]+2;++fe)for(de=0;de<ae[1]+2;++de){var De=we.get(0,fe,de,0),Fe=we.get(0,fe,de,1),qe=we.get(1,fe,de,0),Je=we.get(1,fe,de,1),Ge=we.get(2,fe,de,0),et=we.get(2,fe,de,1),Ue=qe*et-Je*Ge,Ye=Ge*Fe-et*De,$e=De*Je-Fe*qe,Ct=Math.sqrt(Ue*Ue+Ye*Ye+$e*$e);Ct<1e-8?(Ct=Math.max(Math.abs(Ue),Math.abs(Ye),Math.abs($e)),Ct<1e-8?($e=1,Ye=Ue=0,Ct=1):Ct=1/Ct):Ct=1/Math.sqrt(Ct),Ee.set(fe,de,0,Ue*Ct),Ee.set(fe,de,1,Ye*Ct),Ee.set(fe,de,2,$e*Ct)}f.free(we.data);var It=[1/0,1/0,1/0],Vt=[-1/0,-1/0,-1/0],$t=1/0,Gt=-1/0,Jt=(ae[0]-1)*(ae[1]-1)*6,kt=f.mallocFloat(o.nextPow2(10*Jt)),ft=0,zt=0;for(fe=0;fe<ae[0]-1;++fe){e:for(de=0;de<ae[1]-1;++de){for(var Pt=0;Pt<2;++Pt)for(var Et=0;Et<2;++Et)for(var Wt=0;Wt<3;++Wt){var ze=this._field[Wt].get(1+fe+Pt,1+de+Et);if(isNaN(ze)||!isFinite(ze))continue e}for(Wt=0;Wt<6;++Wt){var tt=fe+k[Wt][0],at=de+k[Wt][1],vt=this._field[0].get(tt+1,at+1),_t=this._field[1].get(tt+1,at+1);ze=this._field[2].get(tt+1,at+1),Ue=Ee.get(tt+1,at+1,0),Ye=Ee.get(tt+1,at+1,1),$e=Ee.get(tt+1,at+1,2),W.intensity&&(Rt=W.intensity.get(tt,at));var Rt=W.intensity?W.intensity.get(tt,at):ze+this.objectOffset[2];kt[ft++]=tt,kt[ft++]=at,kt[ft++]=vt,kt[ft++]=_t,kt[ft++]=ze,kt[ft++]=0,kt[ft++]=Rt,kt[ft++]=Ue,kt[ft++]=Ye,kt[ft++]=$e,It[0]=Math.min(It[0],vt+this.objectOffset[0]),It[1]=Math.min(It[1],_t+this.objectOffset[1]),It[2]=Math.min(It[2],ze+this.objectOffset[2]),$t=Math.min($t,Rt),Vt[0]=Math.max(Vt[0],vt+this.objectOffset[0]),Vt[1]=Math.max(Vt[1],_t+this.objectOffset[1]),Vt[2]=Math.max(Vt[2],ze+this.objectOffset[2]),Gt=Math.max(Gt,Rt),zt+=1}}}for(W.intensityBounds&&($t=+W.intensityBounds[0],Gt=+W.intensityBounds[1]),fe=6;fe<ft;fe+=10)kt[fe]=(kt[fe]-$t)/(Gt-$t);this._vertexCount=zt,this._coordinateBuffer.update(kt.subarray(0,ft)),f.freeFloat(kt),f.free(Ee.data),this.bounds=[It,Vt],this.intensity=W.intensity||this._field[2],(this.intensityBounds[0]!==$t||this.intensityBounds[1]!==Gt)&&(he=!0),this.intensityBounds=[$t,Gt]}if("levels"in W){var nr=W.levels;for(Array.isArray(nr[0])?nr=nr.slice():nr=[[],[],nr],fe=0;fe<3;++fe)nr[fe]=nr[fe].slice(),nr[fe].sort(function(ut,xt){return ut-xt});for(fe=0;fe<3;++fe)for(de=0;de<nr[fe].length;++de)nr[fe][de]-=this.objectOffset[fe];e:for(fe=0;fe<3;++fe){if(nr[fe].length!==this.contourLevels[fe].length){he=!0;break}for(de=0;de<nr[fe].length;++de)if(nr[fe][de]!==this.contourLevels[fe][de]){he=!0;break e}}this.contourLevels=nr}if(he){ye=this._field,ae=this.shape;for(var ir=[],ur=0;ur<3;++ur){var qt=this.contourLevels[ur],hr=[],Fr=[],Br=[0,0,0];for(fe=0;fe<qt.length;++fe){var na=g(this._field[ur],qt[fe]);hr.push(ir.length/5|0),zt=0;e:for(de=0;de<na.cells.length;++de){var Ia=na.cells[de];for(Wt=0;Wt<2;++Wt){var ea=na.positions[Ia[Wt]],Er=ea[0],dn=Math.floor(Er)|0,ya=Er-dn,Hr=ea[1],un=Math.floor(Hr)|0,Ea=Hr-un,nt=!1;t:for(var He=0;He<3;++He){Br[He]=0;var Qe=(ur+He+1)%3;for(Pt=0;Pt<2;++Pt){var ot=Pt?ya:1-ya;for(tt=Math.min(Math.max(dn+Pt,0),ae[0])|0,Et=0;Et<2;++Et){var Ae=Et?Ea:1-Ea;if(at=Math.min(Math.max(un+Et,0),ae[1])|0,He<2?ze=this._field[Qe].get(tt,at):ze=(this.intensity.get(tt,at)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(ze)||isNaN(ze)){nt=!0;break t}var Se=ot*Ae;Br[He]+=Se*ze}}}if(!nt)ir.push(Br[0],Br[1],ea[0],ea[1],Br[2]),zt+=1;else{if(Wt>0){for(var je=0;je<5;++je)ir.pop();zt-=1}continue e}}}Fr.push(zt)}this._contourOffsets[ur]=hr,this._contourCounts[ur]=Fr}var Xe=f.mallocFloat(ir.length);for(fe=0;fe<ir.length;++fe)Xe[fe]=ir[fe];this._contourBuffer.update(Xe),f.freeFloat(Xe)}},z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var W=0;W<3;++W)f.freeFloat(this._field[W].data)},z.highlight=function(W){var ne;if(!W){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(ne=0;ne<3;++ne)this.enableHighlight[ne]?this.highlightLevel[ne]=W.level[ne]:this.highlightLevel[ne]=-1;var he;for(this.snapToData?he=W.dataCoordinate:he=W.position,ne=0;ne<3;++ne)he[ne]-=this.objectOffset[ne];if(!((!this.enableDynamic[0]||he[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||he[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||he[2]===this.dynamicLevel[2]))){for(var re=0,ae=this.shape,fe=f.mallocFloat(12*ae[0]*ae[1]),ce=0;ce<3;++ce){if(!this.enableDynamic[ce]){this.dynamicLevel[ce]=NaN,this._dynamicCounts[ce]=0;continue}this.dynamicLevel[ce]=he[ce];var xe=(ce+1)%3,Te=(ce+2)%3,me=this._field[ce],pe=this._field[xe],oe=this._field[Te],de=g(me,he[ce]),ye=de.cells,we=de.positions;for(this._dynamicOffsets[ce]=re,ne=0;ne<ye.length;++ne)for(var Ee=ye[ne],De=0;De<2;++De){var Fe=we[Ee[De]],qe=+Fe[0],Je=qe|0,Ge=Math.min(Je+1,ae[0])|0,et=qe-Je,Ue=1-et,Ye=+Fe[1],$e=Ye|0,Ct=Math.min($e+1,ae[1])|0,It=Ye-$e,Vt=1-It,$t=Ue*Vt,Gt=Ue*It,Jt=et*Vt,kt=et*It,ft=$t*pe.get(Je,$e)+Gt*pe.get(Je,Ct)+Jt*pe.get(Ge,$e)+kt*pe.get(Ge,Ct),zt=$t*oe.get(Je,$e)+Gt*oe.get(Je,Ct)+Jt*oe.get(Ge,$e)+kt*oe.get(Ge,Ct);if(isNaN(ft)||isNaN(zt)){De&&(re-=1);break}fe[2*re+0]=ft,fe[2*re+1]=zt,re+=1}this._dynamicCounts[ce]=re-this._dynamicOffsets[ce]}this._dynamicBuffer.update(fe.subarray(0,2*re)),f.freeFloat(fe)}};function se(W){var ne=W.gl,he=_(ne),re=w(ne),ae=M(ne),fe=x(ne),ce=a(ne),xe=l(ne,[{buffer:ce,size:4,stride:A,offset:0},{buffer:ce,size:3,stride:A,offset:16},{buffer:ce,size:3,stride:A,offset:28}]),Te=a(ne),me=l(ne,[{buffer:Te,size:4,stride:20,offset:0},{buffer:Te,size:1,stride:20,offset:16}]),pe=a(ne),oe=l(ne,[{buffer:pe,size:2,type:ne.FLOAT}]),de=u(ne,1,D,ne.RGBA,ne.UNSIGNED_BYTE);de.minFilter=ne.LINEAR,de.magFilter=ne.LINEAR;var ye=new B(ne,[0,0],[[0,0,0],[0,0,0]],he,re,ce,xe,de,ae,fe,Te,me,pe,oe,[0,0,0]),we={levels:[[],[],[]]};for(var Ee in W)we[Ee]=W[Ee];return we.colormap=we.colormap||"jet",ye.update(we),ye}t(se,"createSurfacePlot")},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(n,i,s){var o=n("ndarray"),a=n("ndarray-ops"),l=n("typedarray-pool");i.exports=x;var u=null,f=null,h=null;function v(A){u=[A.LINEAR,A.NEAREST_MIPMAP_LINEAR,A.LINEAR_MIPMAP_NEAREST,A.LINEAR_MIPMAP_NEAREST],f=[A.NEAREST,A.LINEAR,A.NEAREST_MIPMAP_NEAREST,A.NEAREST_MIPMAP_LINEAR,A.LINEAR_MIPMAP_NEAREST,A.LINEAR_MIPMAP_LINEAR],h=[A.REPEAT,A.CLAMP_TO_EDGE,A.MIRRORED_REPEAT]}t(v,"lazyInitLinearTypes");function c(A){return typeof HTMLCanvasElement<"u"&&A instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&A instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&A instanceof HTMLVideoElement||typeof ImageData<"u"&&A instanceof ImageData}t(c,"acceptTextureDOM");var d=t(function(A,S){a.muls(A,S,255)},"convertFloatToUint8");function g(A,S,k){var L=A.gl,P=L.getParameter(L.MAX_TEXTURE_SIZE);if(S<0||S>P||k<0||k>P)throw new Error("gl-texture2d: Invalid texture size");return A._shape=[S,k],A.bind(),L.texImage2D(L.TEXTURE_2D,0,A.format,S,k,0,A.format,A.type,null),A._mipLevels=[0],A}t(g,"reshapeTexture");function p(A,S,k,L,P,D){this.gl=A,this.handle=S,this.format=P,this.type=D,this._shape=[k,L],this._mipLevels=[0],this._magFilter=A.NEAREST,this._minFilter=A.NEAREST,this._wrapS=A.CLAMP_TO_EDGE,this._wrapT=A.CLAMP_TO_EDGE,this._anisoSamples=1;var B=this,z=[this._wrapS,this._wrapT];Object.defineProperties(z,[{get:function(){return B._wrapS},set:function(F){return B.wrapS=F}},{get:function(){return B._wrapT},set:function(F){return B.wrapT=F}}]),this._wrapVector=z;var R=[this._shape[0],this._shape[1]];Object.defineProperties(R,[{get:function(){return B._shape[0]},set:function(F){return B.width=F}},{get:function(){return B._shape[1]},set:function(F){return B.height=F}}]),this._shapeVector=R}t(p,"Texture2D");var b=p.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(A){this.bind();var S=this.gl;if(this.type===S.FLOAT&&u.indexOf(A)>=0&&(S.getExtension("OES_texture_float_linear")||(A=S.NEAREST)),f.indexOf(A)<0)throw new Error("gl-texture2d: Unknown filter mode "+A);return S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,A),this._minFilter=A}},magFilter:{get:function(){return this._magFilter},set:function(A){this.bind();var S=this.gl;if(this.type===S.FLOAT&&u.indexOf(A)>=0&&(S.getExtension("OES_texture_float_linear")||(A=S.NEAREST)),f.indexOf(A)<0)throw new Error("gl-texture2d: Unknown filter mode "+A);return S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,A),this._magFilter=A}},mipSamples:{get:function(){return this._anisoSamples},set:function(A){var S=this._anisoSamples;if(this._anisoSamples=Math.max(A,1)|0,S!==this._anisoSamples){var k=this.gl.getExtension("EXT_texture_filter_anisotropic");k&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(A){if(this.bind(),h.indexOf(A)<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,A),this._wrapS=A}},wrapT:{get:function(){return this._wrapT},set:function(A){if(this.bind(),h.indexOf(A)<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,A),this._wrapT=A}},wrap:{get:function(){return this._wrapVector},set:function(A){if(Array.isArray(A)||(A=[A,A]),A.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var S=0;S<2;++S)if(h.indexOf(A[S])<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);this._wrapS=A[0],this._wrapT=A[1];var k=this.gl;return this.bind(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,this._wrapS),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,this._wrapT),A}},shape:{get:function(){return this._shapeVector},set:function(A){if(!Array.isArray(A))A=[A|0,A|0];else if(A.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return g(this,A[0]|0,A[1]|0),[A[0]|0,A[1]|0]}},width:{get:function(){return this._shape[0]},set:function(A){return A=A|0,g(this,A,this._shape[1]),A}},height:{get:function(){return this._shape[1]},set:function(A){return A=A|0,g(this,this._shape[0],A),A}}}),b.bind=function(A){var S=this.gl;return A!==void 0&&S.activeTexture(S.TEXTURE0+(A|0)),S.bindTexture(S.TEXTURE_2D,this.handle),A!==void 0?A|0:S.getParameter(S.ACTIVE_TEXTURE)-S.TEXTURE0},b.dispose=function(){this.gl.deleteTexture(this.handle)},b.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var A=Math.min(this._shape[0],this._shape[1]),S=0;A>0;++S,A>>>=1)this._mipLevels.indexOf(S)<0&&this._mipLevels.push(S)},b.setPixels=function(A,S,k,L){var P=this.gl;this.bind(),Array.isArray(S)?(L=k,k=S[1]|0,S=S[0]|0):(S=S||0,k=k||0),L=L||0;var D=c(A)?A:A.raw;if(D){var B=this._mipLevels.indexOf(L)<0;B?(P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,this.type,D),this._mipLevels.push(L)):P.texSubImage2D(P.TEXTURE_2D,L,S,k,this.format,this.type,D)}else if(A.shape&&A.stride&&A.data){if(A.shape.length<2||S+A.shape[1]>this._shape[1]>>>L||k+A.shape[0]>this._shape[0]>>>L||S<0||k<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");y(P,S,k,L,this.format,this.type,this._mipLevels,A)}else throw new Error("gl-texture2d: Unsupported data type")};function m(A,S){return A.length===3?S[2]===1&&S[1]===A[0]*A[2]&&S[0]===A[2]:S[0]===1&&S[1]===A[0]}t(m,"isPacked");function y(A,S,k,L,P,D,B,z){var R=z.dtype,F=z.shape.slice();if(F.length<2||F.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,q=0,H=m(F,z.stride.slice());if(R==="float32"?O=A.FLOAT:R==="float64"?(O=A.FLOAT,H=!1,R="float32"):R==="uint8"?O=A.UNSIGNED_BYTE:(O=A.UNSIGNED_BYTE,H=!1,R="uint8"),F.length===2)q=A.LUMINANCE,F=[F[0],F[1],1],z=o(z.data,F,[z.stride[0],z.stride[1],1],z.offset);else if(F.length===3){if(F[2]===1)q=A.ALPHA;else if(F[2]===2)q=A.LUMINANCE_ALPHA;else if(F[2]===3)q=A.RGB;else if(F[2]===4)q=A.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");F[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((q===A.LUMINANCE||q===A.ALPHA)&&(P===A.LUMINANCE||P===A.ALPHA)&&(q=P),q!==P)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var j=z.size,X=B.indexOf(L)<0;if(X&&B.push(L),O===D&&H)z.offset===0&&z.data.length===j?X?A.texImage2D(A.TEXTURE_2D,L,P,F[0],F[1],0,P,D,z.data):A.texSubImage2D(A.TEXTURE_2D,L,S,k,F[0],F[1],P,D,z.data):X?A.texImage2D(A.TEXTURE_2D,L,P,F[0],F[1],0,P,D,z.data.subarray(z.offset,z.offset+j)):A.texSubImage2D(A.TEXTURE_2D,L,S,k,F[0],F[1],P,D,z.data.subarray(z.offset,z.offset+j));else{var G;D===A.FLOAT?G=l.mallocFloat32(j):G=l.mallocUint8(j);var $=o(G,F,[F[2],F[2]*F[0],1]);O===A.FLOAT&&D===A.UNSIGNED_BYTE?d($,z):a.assign($,z),X?A.texImage2D(A.TEXTURE_2D,L,P,F[0],F[1],0,P,D,G.subarray(0,j)):A.texSubImage2D(A.TEXTURE_2D,L,S,k,F[0],F[1],P,D,G.subarray(0,j)),D===A.FLOAT?l.freeFloat32(G):l.freeUint8(G)}}t(y,"texSubImageArray");function T(A){var S=A.createTexture();return A.bindTexture(A.TEXTURE_2D,S),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),S}t(T,"initTexture");function _(A,S,k,L,P){var D=A.getParameter(A.MAX_TEXTURE_SIZE);if(S<0||S>D||k<0||k>D)throw new Error("gl-texture2d: Invalid texture shape");if(P===A.FLOAT&&!A.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var B=T(A);return A.texImage2D(A.TEXTURE_2D,0,L,S,k,0,L,P,null),new p(A,B,S,k,L,P)}t(_,"createTextureShape");function M(A,S,k,L,P,D){var B=T(A);return A.texImage2D(A.TEXTURE_2D,0,P,P,D,S),new p(A,B,k,L,P,D)}t(M,"createTextureDOM");function w(A,S){var k=S.dtype,L=S.shape.slice(),P=A.getParameter(A.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>P||L[1]<0||L[1]>P)throw new Error("gl-texture2d: Invalid texture size");var D=m(L,S.stride.slice()),B=0;k==="float32"?B=A.FLOAT:k==="float64"?(B=A.FLOAT,D=!1,k="float32"):k==="uint8"?B=A.UNSIGNED_BYTE:(B=A.UNSIGNED_BYTE,D=!1,k="uint8");var z=0;if(L.length===2)z=A.LUMINANCE,L=[L[0],L[1],1],S=o(S.data,L,[S.stride[0],S.stride[1],1],S.offset);else if(L.length===3)if(L[2]===1)z=A.ALPHA;else if(L[2]===2)z=A.LUMINANCE_ALPHA;else if(L[2]===3)z=A.RGB;else if(L[2]===4)z=A.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");B===A.FLOAT&&!A.getExtension("OES_texture_float")&&(B=A.UNSIGNED_BYTE,D=!1);var R,F,O=S.size;if(D)S.offset===0&&S.data.length===O?R=S.data:R=S.data.subarray(S.offset,S.offset+O);else{var q=[L[2],L[2]*L[0],1];F=l.malloc(O,k);var H=o(F,L,q,0);(k==="float32"||k==="float64")&&B===A.UNSIGNED_BYTE?d(H,S):a.assign(H,S),R=F.subarray(0,O)}var j=T(A);return A.texImage2D(A.TEXTURE_2D,0,z,L[0],L[1],0,z,B,R),D||l.free(F),new p(A,j,L[0],L[1],z,B)}t(w,"createTextureArray");function x(A){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(u||v(A),typeof arguments[1]=="number")return _(A,arguments[1],arguments[2],arguments[3]||A.RGBA,arguments[4]||A.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return _(A,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||A.RGBA,arguments[3]||A.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var S=arguments[1],k=c(S)?S:S.raw;if(k)return M(A,k,S.width|0,S.height|0,arguments[2]||A.RGBA,arguments[3]||A.UNSIGNED_BYTE);if(S.shape&&S.data&&S.stride)return w(A,S)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}t(x,"createTexture2D")},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(n,i,s){function o(a,l,u){l?l.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var f=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(u){if(u.length>f)throw new Error("gl-vao: Too many vertex attributes");for(var h=0;h<u.length;++h){var v=u[h];if(v.buffer){var c=v.buffer,d=v.size||4,g=v.type||a.FLOAT,p=!!v.normalized,b=v.stride||0,m=v.offset||0;c.bind(),a.enableVertexAttribArray(h),a.vertexAttribPointer(h,d,g,p,b,m)}else{if(typeof v=="number")a.vertexAttrib1f(h,v);else if(v.length===1)a.vertexAttrib1f(h,v[0]);else if(v.length===2)a.vertexAttrib2f(h,v[0],v[1]);else if(v.length===3)a.vertexAttrib3f(h,v[0],v[1],v[2]);else if(v.length===4)a.vertexAttrib4f(h,v[0],v[1],v[2],v[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(h)}}for(;h<f;++h)a.disableVertexAttribArray(h)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var h=0;h<f;++h)a.disableVertexAttribArray(h)}}t(o,"doBind"),i.exports=o},{}],148:[function(n,i,s){var o=n("./do-bind.js");function a(u){this.gl=u,this._elements=null,this._attributes=null,this._elementsType=u.UNSIGNED_SHORT}t(a,"VAOEmulated"),a.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},a.prototype.update=function(u,f,h){this._elements=f,this._attributes=u,this._elementsType=h||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(u,f,h){h=h||0;var v=this.gl;this._elements?v.drawElements(u,f,this._elementsType,h):v.drawArrays(u,h,f)};function l(u){return new a(u)}t(l,"createVAOEmulated"),i.exports=l},{"./do-bind.js":147}],149:[function(n,i,s){var o=n("./do-bind.js");function a(f,h,v,c,d,g){this.location=f,this.dimension=h,this.a=v,this.b=c,this.c=d,this.d=g}t(a,"VertexAttribute"),a.prototype.bind=function(f){switch(this.dimension){case 1:f.vertexAttrib1f(this.location,this.a);break;case 2:f.vertexAttrib2f(this.location,this.a,this.b);break;case 3:f.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:f.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function l(f,h,v){this.gl=f,this._ext=h,this.handle=v,this._attribs=[],this._useElements=!1,this._elementsType=f.UNSIGNED_SHORT}t(l,"VAONative"),l.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var f=0;f<this._attribs.length;++f)this._attribs[f].bind(this.gl)},l.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},l.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},l.prototype.update=function(f,h,v){if(this.bind(),o(this.gl,h,f),this.unbind(),this._attribs.length=0,f)for(var c=0;c<f.length;++c){var d=f[c];typeof d=="number"?this._attribs.push(new a(c,1,d)):Array.isArray(d)&&this._attribs.push(new a(c,d.length,d[0],d[1],d[2],d[3]))}this._useElements=!!h,this._elementsType=v||this.gl.UNSIGNED_SHORT},l.prototype.draw=function(f,h,v){v=v||0;var c=this.gl;this._useElements?c.drawElements(f,h,this._elementsType,v):c.drawArrays(f,v,h)};function u(f,h){return new l(f,h,h.createVertexArrayOES())}t(u,"createVAONative"),i.exports=u},{"./do-bind.js":147}],150:[function(n,i,s){var o=n("./lib/vao-native.js"),a=n("./lib/vao-emulated.js");function l(f){this.bindVertexArrayOES=f.bindVertexArray.bind(f),this.createVertexArrayOES=f.createVertexArray.bind(f),this.deleteVertexArrayOES=f.deleteVertexArray.bind(f)}t(l,"ExtensionShim");function u(f,h,v,c){var d=f.createVertexArray?new l(f):f.getExtension("OES_vertex_array_object"),g;return d?g=o(f,d):g=a(f),g.update(h,v,c),g}t(u,"createVAO"),i.exports=u},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]+u[0],a[1]=l[1]+u[1],a[2]=l[2]+u[2],a}t(o,"add")},{}],152:[function(n,i,s){i.exports=u;var o=n("./fromValues"),a=n("./normalize"),l=n("./dot");function u(f,h){var v=o(f[0],f[1],f[2]),c=o(h[0],h[1],h[2]);a(v,v),a(c,c);var d=l(v,c);return d>1?0:Math.acos(d)}t(u,"angle")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=Math.ceil(l[0]),a[1]=Math.ceil(l[1]),a[2]=Math.ceil(l[2]),a}t(o,"ceil")},{}],154:[function(n,i,s){i.exports=o;function o(a){var l=new Float32Array(3);return l[0]=a[0],l[1]=a[1],l[2]=a[2],l}t(o,"clone")},{}],155:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=l[0],a[1]=l[1],a[2]=l[2],a}t(o,"copy")},{}],156:[function(n,i,s){i.exports=o;function o(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}t(o,"create")},{}],157:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l[0],h=l[1],v=l[2],c=u[0],d=u[1],g=u[2];return a[0]=h*g-v*d,a[1]=v*c-f*g,a[2]=f*d-h*c,a}t(o,"cross")},{}],158:[function(n,i,s){i.exports=n("./distance")},{"./distance":159}],159:[function(n,i,s){i.exports=o;function o(a,l){var u=l[0]-a[0],f=l[1]-a[1],h=l[2]-a[2];return Math.sqrt(u*u+f*f+h*h)}t(o,"distance")},{}],160:[function(n,i,s){i.exports=n("./divide")},{"./divide":161}],161:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]/u[0],a[1]=l[1]/u[1],a[2]=l[2]/u[2],a}t(o,"divide")},{}],162:[function(n,i,s){i.exports=o;function o(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]}t(o,"dot")},{}],163:[function(n,i,s){i.exports=1e-6},{}],164:[function(n,i,s){i.exports=a;var o=n("./epsilon");function a(l,u){var f=l[0],h=l[1],v=l[2],c=u[0],d=u[1],g=u[2];return Math.abs(f-c)<=o*Math.max(1,Math.abs(f),Math.abs(c))&&Math.abs(h-d)<=o*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(v-g)<=o*Math.max(1,Math.abs(v),Math.abs(g))}t(a,"equals")},{"./epsilon":163}],165:[function(n,i,s){i.exports=o;function o(a,l){return a[0]===l[0]&&a[1]===l[1]&&a[2]===l[2]}t(o,"exactEquals")},{}],166:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=Math.floor(l[0]),a[1]=Math.floor(l[1]),a[2]=Math.floor(l[2]),a}t(o,"floor")},{}],167:[function(n,i,s){i.exports=a;var o=n("./create")();function a(l,u,f,h,v,c){var d,g;for(u||(u=3),f||(f=0),h?g=Math.min(h*u+f,l.length):g=l.length,d=f;d<g;d+=u)o[0]=l[d],o[1]=l[d+1],o[2]=l[d+2],v(o,o,c),l[d]=o[0],l[d+1]=o[1],l[d+2]=o[2];return l}t(a,"forEach")},{"./create":156}],168:[function(n,i,s){i.exports=o;function o(a,l,u){var f=new Float32Array(3);return f[0]=a,f[1]=l,f[2]=u,f}t(o,"fromValues")},{}],169:[function(n,i,s){i.exports={EPSILON:n("./epsilon"),create:n("./create"),clone:n("./clone"),angle:n("./angle"),fromValues:n("./fromValues"),copy:n("./copy"),set:n("./set"),equals:n("./equals"),exactEquals:n("./exactEquals"),add:n("./add"),subtract:n("./subtract"),sub:n("./sub"),multiply:n("./multiply"),mul:n("./mul"),divide:n("./divide"),div:n("./div"),min:n("./min"),max:n("./max"),floor:n("./floor"),ceil:n("./ceil"),round:n("./round"),scale:n("./scale"),scaleAndAdd:n("./scaleAndAdd"),distance:n("./distance"),dist:n("./dist"),squaredDistance:n("./squaredDistance"),sqrDist:n("./sqrDist"),length:n("./length"),len:n("./len"),squaredLength:n("./squaredLength"),sqrLen:n("./sqrLen"),negate:n("./negate"),inverse:n("./inverse"),normalize:n("./normalize"),dot:n("./dot"),cross:n("./cross"),lerp:n("./lerp"),random:n("./random"),transformMat4:n("./transformMat4"),transformMat3:n("./transformMat3"),transformQuat:n("./transformQuat"),rotateX:n("./rotateX"),rotateY:n("./rotateY"),rotateZ:n("./rotateZ"),forEach:n("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=1/l[0],a[1]=1/l[1],a[2]=1/l[2],a}t(o,"inverse")},{}],171:[function(n,i,s){i.exports=n("./length")},{"./length":172}],172:[function(n,i,s){i.exports=o;function o(a){var l=a[0],u=a[1],f=a[2];return Math.sqrt(l*l+u*u+f*f)}t(o,"length")},{}],173:[function(n,i,s){i.exports=o;function o(a,l,u,f){var h=l[0],v=l[1],c=l[2];return a[0]=h+f*(u[0]-h),a[1]=v+f*(u[1]-v),a[2]=c+f*(u[2]-c),a}t(o,"lerp")},{}],174:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=Math.max(l[0],u[0]),a[1]=Math.max(l[1],u[1]),a[2]=Math.max(l[2],u[2]),a}t(o,"max")},{}],175:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=Math.min(l[0],u[0]),a[1]=Math.min(l[1],u[1]),a[2]=Math.min(l[2],u[2]),a}t(o,"min")},{}],176:[function(n,i,s){i.exports=n("./multiply")},{"./multiply":177}],177:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]*u[0],a[1]=l[1]*u[1],a[2]=l[2]*u[2],a}t(o,"multiply")},{}],178:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=-l[0],a[1]=-l[1],a[2]=-l[2],a}t(o,"negate")},{}],179:[function(n,i,s){i.exports=o;function o(a,l){var u=l[0],f=l[1],h=l[2],v=u*u+f*f+h*h;return v>0&&(v=1/Math.sqrt(v),a[0]=l[0]*v,a[1]=l[1]*v,a[2]=l[2]*v),a}t(o,"normalize")},{}],180:[function(n,i,s){i.exports=o;function o(a,l){l=l||1;var u=Math.random()*2*Math.PI,f=Math.random()*2-1,h=Math.sqrt(1-f*f)*l;return a[0]=Math.cos(u)*h,a[1]=Math.sin(u)*h,a[2]=f*l,a}t(o,"random")},{}],181:[function(n,i,s){i.exports=o;function o(a,l,u,f){var h=u[1],v=u[2],c=l[1]-h,d=l[2]-v,g=Math.sin(f),p=Math.cos(f);return a[0]=l[0],a[1]=h+c*p-d*g,a[2]=v+c*g+d*p,a}t(o,"rotateX")},{}],182:[function(n,i,s){i.exports=o;function o(a,l,u,f){var h=u[0],v=u[2],c=l[0]-h,d=l[2]-v,g=Math.sin(f),p=Math.cos(f);return a[0]=h+d*g+c*p,a[1]=l[1],a[2]=v+d*p-c*g,a}t(o,"rotateY")},{}],183:[function(n,i,s){i.exports=o;function o(a,l,u,f){var h=u[0],v=u[1],c=l[0]-h,d=l[1]-v,g=Math.sin(f),p=Math.cos(f);return a[0]=h+c*p-d*g,a[1]=v+c*g+d*p,a[2]=l[2],a}t(o,"rotateZ")},{}],184:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=Math.round(l[0]),a[1]=Math.round(l[1]),a[2]=Math.round(l[2]),a}t(o,"round")},{}],185:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]*u,a[1]=l[1]*u,a[2]=l[2]*u,a}t(o,"scale")},{}],186:[function(n,i,s){i.exports=o;function o(a,l,u,f){return a[0]=l[0]+u[0]*f,a[1]=l[1]+u[1]*f,a[2]=l[2]+u[2]*f,a}t(o,"scaleAndAdd")},{}],187:[function(n,i,s){i.exports=o;function o(a,l,u,f){return a[0]=l,a[1]=u,a[2]=f,a}t(o,"set")},{}],188:[function(n,i,s){i.exports=n("./squaredDistance")},{"./squaredDistance":190}],189:[function(n,i,s){i.exports=n("./squaredLength")},{"./squaredLength":191}],190:[function(n,i,s){i.exports=o;function o(a,l){var u=l[0]-a[0],f=l[1]-a[1],h=l[2]-a[2];return u*u+f*f+h*h}t(o,"squaredDistance")},{}],191:[function(n,i,s){i.exports=o;function o(a){var l=a[0],u=a[1],f=a[2];return l*l+u*u+f*f}t(o,"squaredLength")},{}],192:[function(n,i,s){i.exports=n("./subtract")},{"./subtract":193}],193:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]-u[0],a[1]=l[1]-u[1],a[2]=l[2]-u[2],a}t(o,"subtract")},{}],194:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l[0],h=l[1],v=l[2];return a[0]=f*u[0]+h*u[3]+v*u[6],a[1]=f*u[1]+h*u[4]+v*u[7],a[2]=f*u[2]+h*u[5]+v*u[8],a}t(o,"transformMat3")},{}],195:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l[0],h=l[1],v=l[2],c=u[3]*f+u[7]*h+u[11]*v+u[15];return c=c||1,a[0]=(u[0]*f+u[4]*h+u[8]*v+u[12])/c,a[1]=(u[1]*f+u[5]*h+u[9]*v+u[13])/c,a[2]=(u[2]*f+u[6]*h+u[10]*v+u[14])/c,a}t(o,"transformMat4")},{}],196:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l[0],h=l[1],v=l[2],c=u[0],d=u[1],g=u[2],p=u[3],b=p*f+d*v-g*h,m=p*h+g*f-c*v,y=p*v+c*h-d*f,T=-c*f-d*h-g*v;return a[0]=b*p+T*-c+m*-g-y*-d,a[1]=m*p+T*-d+y*-c-b*-g,a[2]=y*p+T*-g+b*-d-m*-c,a}t(o,"transformQuat")},{}],197:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]+u[0],a[1]=l[1]+u[1],a[2]=l[2]+u[2],a[3]=l[3]+u[3],a}t(o,"add")},{}],198:[function(n,i,s){i.exports=o;function o(a){var l=new Float32Array(4);return l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l}t(o,"clone")},{}],199:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a}t(o,"copy")},{}],200:[function(n,i,s){i.exports=o;function o(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}t(o,"create")},{}],201:[function(n,i,s){i.exports=o;function o(a,l){var u=l[0]-a[0],f=l[1]-a[1],h=l[2]-a[2],v=l[3]-a[3];return Math.sqrt(u*u+f*f+h*h+v*v)}t(o,"distance")},{}],202:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]/u[0],a[1]=l[1]/u[1],a[2]=l[2]/u[2],a[3]=l[3]/u[3],a}t(o,"divide")},{}],203:[function(n,i,s){i.exports=o;function o(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]+a[3]*l[3]}t(o,"dot")},{}],204:[function(n,i,s){i.exports=o;function o(a,l,u,f){var h=new Float32Array(4);return h[0]=a,h[1]=l,h[2]=u,h[3]=f,h}t(o,"fromValues")},{}],205:[function(n,i,s){i.exports={create:n("./create"),clone:n("./clone"),fromValues:n("./fromValues"),copy:n("./copy"),set:n("./set"),add:n("./add"),subtract:n("./subtract"),multiply:n("./multiply"),divide:n("./divide"),min:n("./min"),max:n("./max"),scale:n("./scale"),scaleAndAdd:n("./scaleAndAdd"),distance:n("./distance"),squaredDistance:n("./squaredDistance"),length:n("./length"),squaredLength:n("./squaredLength"),negate:n("./negate"),inverse:n("./inverse"),normalize:n("./normalize"),dot:n("./dot"),lerp:n("./lerp"),random:n("./random"),transformMat4:n("./transformMat4"),transformQuat:n("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=1/l[0],a[1]=1/l[1],a[2]=1/l[2],a[3]=1/l[3],a}t(o,"inverse")},{}],207:[function(n,i,s){i.exports=o;function o(a){var l=a[0],u=a[1],f=a[2],h=a[3];return Math.sqrt(l*l+u*u+f*f+h*h)}t(o,"length")},{}],208:[function(n,i,s){i.exports=o;function o(a,l,u,f){var h=l[0],v=l[1],c=l[2],d=l[3];return a[0]=h+f*(u[0]-h),a[1]=v+f*(u[1]-v),a[2]=c+f*(u[2]-c),a[3]=d+f*(u[3]-d),a}t(o,"lerp")},{}],209:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=Math.max(l[0],u[0]),a[1]=Math.max(l[1],u[1]),a[2]=Math.max(l[2],u[2]),a[3]=Math.max(l[3],u[3]),a}t(o,"max")},{}],210:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=Math.min(l[0],u[0]),a[1]=Math.min(l[1],u[1]),a[2]=Math.min(l[2],u[2]),a[3]=Math.min(l[3],u[3]),a}t(o,"min")},{}],211:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]*u[0],a[1]=l[1]*u[1],a[2]=l[2]*u[2],a[3]=l[3]*u[3],a}t(o,"multiply")},{}],212:[function(n,i,s){i.exports=o;function o(a,l){return a[0]=-l[0],a[1]=-l[1],a[2]=-l[2],a[3]=-l[3],a}t(o,"negate")},{}],213:[function(n,i,s){i.exports=o;function o(a,l){var u=l[0],f=l[1],h=l[2],v=l[3],c=u*u+f*f+h*h+v*v;return c>0&&(c=1/Math.sqrt(c),a[0]=u*c,a[1]=f*c,a[2]=h*c,a[3]=v*c),a}t(o,"normalize")},{}],214:[function(n,i,s){var o=n("./normalize"),a=n("./scale");i.exports=l;function l(u,f){return f=f||1,u[0]=Math.random(),u[1]=Math.random(),u[2]=Math.random(),u[3]=Math.random(),o(u,u),a(u,u,f),u}t(l,"random")},{"./normalize":213,"./scale":215}],215:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]*u,a[1]=l[1]*u,a[2]=l[2]*u,a[3]=l[3]*u,a}t(o,"scale")},{}],216:[function(n,i,s){i.exports=o;function o(a,l,u,f){return a[0]=l[0]+u[0]*f,a[1]=l[1]+u[1]*f,a[2]=l[2]+u[2]*f,a[3]=l[3]+u[3]*f,a}t(o,"scaleAndAdd")},{}],217:[function(n,i,s){i.exports=o;function o(a,l,u,f,h){return a[0]=l,a[1]=u,a[2]=f,a[3]=h,a}t(o,"set")},{}],218:[function(n,i,s){i.exports=o;function o(a,l){var u=l[0]-a[0],f=l[1]-a[1],h=l[2]-a[2],v=l[3]-a[3];return u*u+f*f+h*h+v*v}t(o,"squaredDistance")},{}],219:[function(n,i,s){i.exports=o;function o(a){var l=a[0],u=a[1],f=a[2],h=a[3];return l*l+u*u+f*f+h*h}t(o,"squaredLength")},{}],220:[function(n,i,s){i.exports=o;function o(a,l,u){return a[0]=l[0]-u[0],a[1]=l[1]-u[1],a[2]=l[2]-u[2],a[3]=l[3]-u[3],a}t(o,"subtract")},{}],221:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l[0],h=l[1],v=l[2],c=l[3];return a[0]=u[0]*f+u[4]*h+u[8]*v+u[12]*c,a[1]=u[1]*f+u[5]*h+u[9]*v+u[13]*c,a[2]=u[2]*f+u[6]*h+u[10]*v+u[14]*c,a[3]=u[3]*f+u[7]*h+u[11]*v+u[15]*c,a}t(o,"transformMat4")},{}],222:[function(n,i,s){i.exports=o;function o(a,l,u){var f=l[0],h=l[1],v=l[2],c=u[0],d=u[1],g=u[2],p=u[3],b=p*f+d*v-g*h,m=p*h+g*f-c*v,y=p*v+c*h-d*f,T=-c*f-d*h-g*v;return a[0]=b*p+T*-c+m*-g-y*-d,a[1]=m*p+T*-d+y*-c-b*-g,a[2]=y*p+T*-g+b*-d-m*-c,a[3]=l[3],a}t(o,"transformQuat")},{}],223:[function(n,i,s){var o=n("glsl-tokenizer"),a=n("atob-lite");i.exports=l;function l(u){for(var f=Array.isArray(u)?u:o(u),h=0;h<f.length;h++){var v=f[h];if(v.type==="preprocessor"){var c=v.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!c&&!!c[2]){var d=c[1],g=c[2];return(d?a(g):g).trim()}}}}t(l,"getName")},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(n,i,s){i.exports=S;var o=n("./lib/literals"),a=n("./lib/operators"),l=n("./lib/builtins"),u=n("./lib/literals-300es"),f=n("./lib/builtins-300es"),h=999,v=9999,c=0,d=1,g=2,p=3,b=4,m=5,y=6,T=7,_=8,M=9,w=10,x=11,A=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function S(k){var L=0,P=0,D=h,B,z,R=[],F=[],O=1,q=0,H=0,j=!1,X=!1,G="",$;k=k||{};var te=l,ee=o;k.version==="300 es"&&(te=f,ee=u);for(var ie={},se={},L=0;L<te.length;L++)ie[te[L]]=!0;for(var L=0;L<ee.length;L++)se[ee[L]]=!0;return function(we){return F=[],we!==null?ne(we):he()};function W(we){we.length&&F.push({type:A[D],data:we,position:H,line:O,column:q})}function ne(we){L=0,we.toString&&(we=we.toString()),G+=we.replace(/\r\n/g,`
`),$=G.length;for(var Ee;B=G[L],L<$;){switch(Ee=L,D){case c:L=xe();break;case d:L=ce();break;case g:L=fe();break;case p:L=Te();break;case b:L=oe();break;case x:L=pe();break;case m:L=de();break;case v:L=ye();break;case M:L=ae();break;case h:L=re();break}if(Ee!==L)switch(G[Ee]){case`
`:q=0,++O;break;default:++q;break}}return P+=L,G=G.slice(L),F}function he(we){return R.length&&W(R.join("")),D=w,W("(eof)"),F}function re(){return R=R.length?[]:R,z==="/"&&B==="*"?(H=P+L-1,D=c,z=B,L+1):z==="/"&&B==="/"?(H=P+L-1,D=d,z=B,L+1):B==="#"?(D=g,H=P+L,L):/\s/.test(B)?(D=M,H=P+L,L):(j=/\d/.test(B),X=/[^\w_]/.test(B),H=P+L,D=j?b:X?p:v,L)}function ae(){return/[^\s]/g.test(B)?(W(R.join("")),D=h,L):(R.push(B),z=B,L+1)}function fe(){return(B==="\r"||B===`
`)&&z!=="\\"?(W(R.join("")),D=h,L):(R.push(B),z=B,L+1)}function ce(){return fe()}function xe(){return B==="/"&&z==="*"?(R.push(B),W(R.join("")),D=h,L+1):(R.push(B),z=B,L+1)}function Te(){if(z==="."&&/\d/.test(B))return D=m,L;if(z==="/"&&B==="*")return D=c,L;if(z==="/"&&B==="/")return D=d,L;if(B==="."&&R.length){for(;me(R););return D=m,L}if(B===";"||B===")"||B==="("){if(R.length)for(;me(R););return W(B),D=h,L+1}var we=R.length===2&&B!=="=";if(/[\w_\d\s]/.test(B)||we){for(;me(R););return D=h,L}return R.push(B),z=B,L+1}function me(we){var Ee=0,De,Fe;do{if(De=a.indexOf(we.slice(0,we.length+Ee).join("")),Fe=a[De],De===-1){if(Ee--+we.length>0)continue;Fe=we.slice(0,1).join("")}return W(Fe),H+=Fe.length,R=R.slice(Fe.length),R.length}while(1)}function pe(){return/[^a-fA-F0-9]/.test(B)?(W(R.join("")),D=h,L):(R.push(B),z=B,L+1)}function oe(){return B==="."||/[eE]/.test(B)?(R.push(B),D=m,z=B,L+1):B==="x"&&R.length===1&&R[0]==="0"?(D=x,R.push(B),z=B,L+1):/[^\d]/.test(B)?(W(R.join("")),D=h,L):(R.push(B),z=B,L+1)}function de(){return B==="f"&&(R.push(B),z=B,L+=1),/[eE]/.test(B)||(B==="-"||B==="+")&&/[eE]/.test(z)?(R.push(B),z=B,L+1):/[^\d]/.test(B)?(W(R.join("")),D=h,L):(R.push(B),z=B,L+1)}function ye(){if(/[^\d\w_]/.test(B)){var we=R.join("");return se[we]?D=_:ie[we]?D=T:D=y,W(R.join("")),D=h,L}return R.push(B),z=B,L+1}}t(S,"tokenize")},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(n,i,s){var o=n("./builtins");o=o.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),i.exports=o.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(n,i,s){i.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(n,i,s){var o=n("./literals");i.exports=o.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(n,i,s){i.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(n,i,s){i.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(n,i,s){var o=n("./index");i.exports=a;function a(l,u){var f=o(u),h=[];return h=h.concat(f(l)),h=h.concat(f(null)),h}t(a,"tokenizeString")},{"./index":224}],231:[function(n,i,s){i.exports=function(o){typeof o=="string"&&(o=[o]);for(var a=[].slice.call(arguments,1),l=[],u=0;u<o.length-1;u++)l.push(o[u],a[u]||"");return l.push(o[u]),l.join("")}},{}],232:[function(n,i,s){var o=n("is-browser");function a(){var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,u),window.removeEventListener("test",null,u)}catch{l=!1}return l}t(a,"detect"),i.exports=o&&a()},{"is-browser":236}],233:[function(n,i,s){i.exports=p;var o=n("robust-orientation"),a=n("simplicial-complex").compareCells;function l(b,m,y){this.vertices=b,this.adjacent=m,this.boundary=y,this.lastVisited=-1}t(l,"Simplex"),l.prototype.flip=function(){var b=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=b;var m=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=m};function u(b,m,y){this.vertices=b,this.cell=m,this.index=y}t(u,"GlueFacet");function f(b,m){return a(b.vertices,m.vertices)}t(f,"compareGlue");function h(b){return function(){var m=this.tuple;return b.apply(this,m)}}t(h,"wrapper");function v(b){var m=o[b+1];return m||(m=o),h(m)}t(v,"bakeOrient");var c=[];function d(b,m,y){this.dimension=b,this.vertices=m,this.simplices=y,this.interior=y.filter(function(M){return!M.boundary}),this.tuple=new Array(b+1);for(var T=0;T<=b;++T)this.tuple[T]=this.vertices[T];var _=c[b];_||(_=c[b]=v(b)),this.orient=_}t(d,"Triangulation");var g=d.prototype;g.handleBoundaryDegeneracy=function(b,m){var y=this.dimension,T=this.vertices.length-1,_=this.tuple,M=this.vertices,w=[b];for(b.lastVisited=-T;w.length>0;){b=w.pop();for(var x=b.adjacent,A=0;A<=y;++A){var S=x[A];if(!(!S.boundary||S.lastVisited<=-T)){for(var k=S.vertices,L=0;L<=y;++L){var P=k[L];P<0?_[L]=m:_[L]=M[P]}var D=this.orient();if(D>0)return S;S.lastVisited=-T,D===0&&w.push(S)}}}return null},g.walk=function(b,m){var y=this.vertices.length-1,T=this.dimension,_=this.vertices,M=this.tuple,w=m?this.interior.length*Math.random()|0:this.interior.length-1,x=this.interior[w];e:for(;!x.boundary;){for(var A=x.vertices,S=x.adjacent,k=0;k<=T;++k)M[k]=_[A[k]];x.lastVisited=y;for(var k=0;k<=T;++k){var L=S[k];if(!(L.lastVisited>=y)){var P=M[k];M[k]=b;var D=this.orient();if(M[k]=P,D<0){x=L;continue e}else L.boundary?L.lastVisited=-y:L.lastVisited=y}}return}return x},g.addPeaks=function(b,m){var y=this.vertices.length-1,T=this.dimension,_=this.vertices,M=this.tuple,w=this.interior,x=this.simplices,A=[m];m.lastVisited=y,m.vertices[m.vertices.indexOf(-1)]=y,m.boundary=!1,w.push(m);for(var S=[];A.length>0;){var m=A.pop(),k=m.vertices,L=m.adjacent,P=k.indexOf(y);if(!(P<0)){for(var D=0;D<=T;++D)if(D!==P){var B=L[D];if(!(!B.boundary||B.lastVisited>=y)){var z=B.vertices;if(B.lastVisited!==-y){for(var R=0,F=0;F<=T;++F)z[F]<0?(R=F,M[F]=b):M[F]=_[z[F]];var O=this.orient();if(O>0){z[R]=y,B.boundary=!1,w.push(B),A.push(B),B.lastVisited=y;continue}else B.lastVisited=-y}var q=B.adjacent,H=k.slice(),j=L.slice(),X=new l(H,j,!0);x.push(X);var G=q.indexOf(m);if(!(G<0)){q[G]=X,j[P]=B,H[D]=-1,j[D]=m,L[D]=X,X.flip();for(var F=0;F<=T;++F){var $=H[F];if(!($<0||$===y)){for(var te=new Array(T-1),ee=0,ie=0;ie<=T;++ie){var se=H[ie];se<0||ie===F||(te[ee++]=se)}S.push(new u(te,X,F))}}}}}}}S.sort(f);for(var D=0;D+1<S.length;D+=2){var W=S[D],ne=S[D+1],he=W.index,re=ne.index;he<0||re<0||(W.cell.adjacent[W.index]=ne.cell,ne.cell.adjacent[ne.index]=W.cell)}},g.insert=function(b,m){var y=this.vertices;y.push(b);var T=this.walk(b,m);if(!!T){for(var _=this.dimension,M=this.tuple,w=0;w<=_;++w){var x=T.vertices[w];x<0?M[w]=b:M[w]=y[x]}var A=this.orient(M);A<0||A===0&&(T=this.handleBoundaryDegeneracy(T,b),!T)||this.addPeaks(b,T)}},g.boundary=function(){for(var b=this.dimension,m=[],y=this.simplices,T=y.length,_=0;_<T;++_){var M=y[_];if(M.boundary){for(var w=new Array(b),x=M.vertices,A=0,S=0,k=0;k<=b;++k)x[k]>=0?w[A++]=x[k]:S=k&1;if(S===(b&1)){var L=w[0];w[0]=w[1],w[1]=L}m.push(w)}}return m};function p(b,m){var y=b.length;if(y===0)throw new Error("Must have at least d+1 points");var T=b[0].length;if(y<=T)throw new Error("Must input at least d+1 points");var _=b.slice(0,T+1),M=o.apply(void 0,_);if(M===0)throw new Error("Input not in general position");for(var w=new Array(T+1),x=0;x<=T;++x)w[x]=x;M<0&&(w[0]=1,w[1]=0);for(var A=new l(w,new Array(T+1),!1),S=A.adjacent,k=new Array(T+2),x=0;x<=T;++x){for(var L=w.slice(),P=0;P<=T;++P)P===x&&(L[P]=-1);var D=L[0];L[0]=L[1],L[1]=D;var B=new l(L,new Array(T+1),!0);S[x]=B,k[x]=B}k[T+1]=A;for(var x=0;x<=T;++x)for(var L=S[x].vertices,z=S[x].adjacent,P=0;P<=T;++P){var R=L[P];if(R<0){z[P]=A;continue}for(var F=0;F<=T;++F)S[F].vertices.indexOf(R)<0&&(z[P]=S[F])}for(var O=new d(T,_,k),q=!!m,x=T+1;x<y;++x)O.insert(b[x],q);return O.boundary()}t(p,"incrementalConvexHull")},{"robust-orientation":284,"simplicial-complex":293}],234:[function(n,i,s){var o=n("binary-search-bounds"),a=0,l=1,u=2;i.exports=A;function f(S,k,L,P,D){this.mid=S,this.left=k,this.right=L,this.leftPoints=P,this.rightPoints=D,this.count=(k?k.count:0)+(L?L.count:0)+P.length}t(f,"IntervalTreeNode");var h=f.prototype;function v(S,k){S.mid=k.mid,S.left=k.left,S.right=k.right,S.leftPoints=k.leftPoints,S.rightPoints=k.rightPoints,S.count=k.count}t(v,"copy");function c(S,k){var L=M(k);S.mid=L.mid,S.left=L.left,S.right=L.right,S.leftPoints=L.leftPoints,S.rightPoints=L.rightPoints,S.count=L.count}t(c,"rebuild");function d(S,k){var L=S.intervals([]);L.push(k),c(S,L)}t(d,"rebuildWithInterval");function g(S,k){var L=S.intervals([]),P=L.indexOf(k);return P<0?a:(L.splice(P,1),c(S,L),l)}t(g,"rebuildWithoutInterval"),h.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},h.insert=function(S){var k=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?d(this,S):this.left.insert(S):this.left=M([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?d(this,S):this.right.insert(S):this.right=M([S]);else{var L=o.ge(this.leftPoints,S,T),P=o.ge(this.rightPoints,S,_);this.leftPoints.splice(L,0,S),this.rightPoints.splice(P,0,S)}},h.remove=function(S){var k=this.count-this.leftPoints;if(S[1]<this.mid){if(!this.left)return a;var L=this.right?this.right.count:0;if(4*L>3*(k-1))return g(this,S);var P=this.left.remove(S);return P===u?(this.left=null,this.count-=1,l):(P===l&&(this.count-=1),P)}else if(S[0]>this.mid){if(!this.right)return a;var D=this.left?this.left.count:0;if(4*D>3*(k-1))return g(this,S);var P=this.right.remove(S);return P===u?(this.right=null,this.count-=1,l):(P===l&&(this.count-=1),P)}else{if(this.count===1)return this.leftPoints[0]===S?u:a;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var B=this,z=this.left;z.right;)B=z,z=z.right;if(B===this)z.right=this.right;else{var R=this.left,P=this.right;B.count-=z.count,B.right=z.left,z.left=R,z.right=P}v(this,z),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?v(this,this.left):v(this,this.right);return l}for(var R=o.ge(this.leftPoints,S,T);R<this.leftPoints.length&&this.leftPoints[R][0]===S[0];++R)if(this.leftPoints[R]===S){this.count-=1,this.leftPoints.splice(R,1);for(var P=o.ge(this.rightPoints,S,_);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),l}return a}};function p(S,k,L){for(var P=0;P<S.length&&S[P][0]<=k;++P){var D=L(S[P]);if(D)return D}}t(p,"reportLeftRange");function b(S,k,L){for(var P=S.length-1;P>=0&&S[P][1]>=k;--P){var D=L(S[P]);if(D)return D}}t(b,"reportRightRange");function m(S,k){for(var L=0;L<S.length;++L){var P=k(S[L]);if(P)return P}}t(m,"reportRange"),h.queryPoint=function(S,k){if(S<this.mid){if(this.left){var L=this.left.queryPoint(S,k);if(L)return L}return p(this.leftPoints,S,k)}else if(S>this.mid){if(this.right){var L=this.right.queryPoint(S,k);if(L)return L}return b(this.rightPoints,S,k)}else return m(this.leftPoints,k)},h.queryInterval=function(S,k,L){if(S<this.mid&&this.left){var P=this.left.queryInterval(S,k,L);if(P)return P}if(k>this.mid&&this.right){var P=this.right.queryInterval(S,k,L);if(P)return P}return k<this.mid?p(this.leftPoints,k,L):S>this.mid?b(this.rightPoints,S,L):m(this.leftPoints,L)};function y(S,k){return S-k}t(y,"compareNumbers");function T(S,k){var L=S[0]-k[0];return L||S[1]-k[1]}t(T,"compareBegin");function _(S,k){var L=S[1]-k[1];return L||S[0]-k[0]}t(_,"compareEnd");function M(S){if(S.length===0)return null;for(var k=[],L=0;L<S.length;++L)k.push(S[L][0],S[L][1]);k.sort(y);for(var P=k[k.length>>1],D=[],B=[],z=[],L=0;L<S.length;++L){var R=S[L];R[1]<P?D.push(R):P<R[0]?B.push(R):z.push(R)}var F=z,O=z.slice();return F.sort(T),O.sort(_),new f(P,M(D),M(B),F,O)}t(M,"createIntervalTree");function w(S){this.root=S}t(w,"IntervalTree");var x=w.prototype;x.insert=function(S){this.root?this.root.insert(S):this.root=new f(S[0],null,null,[S],[S])},x.remove=function(S){if(this.root){var k=this.root.remove(S);return k===u&&(this.root=null),k!==a}return!1},x.queryPoint=function(S,k){if(this.root)return this.root.queryPoint(S,k)},x.queryInterval=function(S,k,L){if(S<=k&&this.root)return this.root.queryInterval(S,k,L)},Object.defineProperty(x,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(x,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function A(S){return!S||S.length===0?new w(null):new w(M(S))}t(A,"createWrapper")},{"binary-search-bounds":31}],235:[function(n,i,s){function o(a){for(var l=new Array(a),u=0;u<a;++u)l[u]=u;return l}t(o,"iota"),i.exports=o},{}],236:[function(n,i,s){i.exports=!0},{}],237:[function(n,i,s){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */i.exports=function(l){return l!=null&&(o(l)||a(l)||!!l._isBuffer)};function o(l){return!!l.constructor&&typeof l.constructor.isBuffer=="function"&&l.constructor.isBuffer(l)}t(o,"isBuffer");function a(l){return typeof l.readFloatLE=="function"&&typeof l.slice=="function"&&o(l.slice(0,0))}t(a,"isSlowBuffer")},{}],238:[function(n,i,s){i.exports=l,i.exports.isMobile=l,i.exports.default=l;var o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function l(u){u||(u={});var f=u.ua;if(!f&&typeof navigator<"u"&&(f=navigator.userAgent),f&&f.headers&&typeof f.headers["user-agent"]=="string"&&(f=f.headers["user-agent"]),typeof f!="string")return!1;var h=u.tablet?a.test(f):o.test(f);return!h&&u.tablet&&u.featureDetect&&navigator&&navigator.maxTouchPoints>1&&f.indexOf("Macintosh")!==-1&&f.indexOf("Safari")!==-1&&(h=!0),h}t(l,"isMobile")},{}],239:[function(n,i,s){i.exports=function(o){for(var a=o.length,l,u=0;u<a;u++)if(l=o.charCodeAt(u),(l<9||l>13)&&l!==32&&l!==133&&l!==160&&l!==5760&&l!==6158&&(l<8192||l>8205)&&l!==8232&&l!==8233&&l!==8239&&l!==8287&&l!==8288&&l!==12288&&l!==65279)return!1;return!0}},{}],240:[function(n,i,s){function o(a,l,u){return a*(1-u)+l*u}t(o,"lerp"),i.exports=o},{}],241:[function(n,i,s){var o=n("./normalize"),a=n("gl-mat4/create"),l=n("gl-mat4/clone"),u=n("gl-mat4/determinant"),f=n("gl-mat4/invert"),h=n("gl-mat4/transpose"),v={length:n("gl-vec3/length"),normalize:n("gl-vec3/normalize"),dot:n("gl-vec3/dot"),cross:n("gl-vec3/cross")},c=a(),d=a(),g=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],b=[0,0,0];i.exports=t(function(M,w,x,A,S,k){if(w||(w=[0,0,0]),x||(x=[0,0,0]),A||(A=[0,0,0]),S||(S=[0,0,0,1]),k||(k=[0,0,0,1]),!o(c,M)||(l(d,c),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(u(d)<1e-8)))return!1;var L=c[3],P=c[7],D=c[11],B=c[12],z=c[13],R=c[14],F=c[15];if(L!==0||P!==0||D!==0){g[0]=L,g[1]=P,g[2]=D,g[3]=F;var O=f(d,d);if(!O)return!1;h(d,d),m(S,g,d)}else S[0]=S[1]=S[2]=0,S[3]=1;if(w[0]=B,w[1]=z,w[2]=R,y(p,c),x[0]=v.length(p[0]),v.normalize(p[0],p[0]),A[0]=v.dot(p[0],p[1]),T(p[1],p[1],p[0],1,-A[0]),x[1]=v.length(p[1]),v.normalize(p[1],p[1]),A[0]/=x[1],A[1]=v.dot(p[0],p[2]),T(p[2],p[2],p[0],1,-A[1]),A[2]=v.dot(p[1],p[2]),T(p[2],p[2],p[1],1,-A[2]),x[2]=v.length(p[2]),v.normalize(p[2],p[2]),A[1]/=x[2],A[2]/=x[2],v.cross(b,p[1],p[2]),v.dot(p[0],b)<0)for(var q=0;q<3;q++)x[q]*=-1,p[q][0]*=-1,p[q][1]*=-1,p[q][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(k[0]=-k[0]),p[0][2]>p[2][0]&&(k[1]=-k[1]),p[1][0]>p[0][1]&&(k[2]=-k[2]),!0},"decomposeMat4");function m(_,M,w){var x=M[0],A=M[1],S=M[2],k=M[3];return _[0]=w[0]*x+w[4]*A+w[8]*S+w[12]*k,_[1]=w[1]*x+w[5]*A+w[9]*S+w[13]*k,_[2]=w[2]*x+w[6]*A+w[10]*S+w[14]*k,_[3]=w[3]*x+w[7]*A+w[11]*S+w[15]*k,_}t(m,"vec4multMat4");function y(_,M){_[0][0]=M[0],_[0][1]=M[1],_[0][2]=M[2],_[1][0]=M[4],_[1][1]=M[5],_[1][2]=M[6],_[2][0]=M[8],_[2][1]=M[9],_[2][2]=M[10]}t(y,"mat3from4");function T(_,M,w,x,A){_[0]=M[0]*x+w[0]*A,_[1]=M[1]*x+w[1]*A,_[2]=M[2]*x+w[2]*A}t(T,"combine")},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(n,i,s){i.exports=t(function(a,l){var u=l[15];if(u===0)return!1;for(var f=1/u,h=0;h<16;h++)a[h]=l[h]*f;return!0},"normalize")},{}],243:[function(n,i,s){var o=n("gl-vec3/lerp"),a=n("mat4-recompose"),l=n("mat4-decompose"),u=n("gl-mat4/determinant"),f=n("quat-slerp"),h=g(),v=g(),c=g();i.exports=d;function d(m,y,T,_){if(u(y)===0||u(T)===0)return!1;var M=l(y,h.translate,h.scale,h.skew,h.perspective,h.quaternion),w=l(T,v.translate,v.scale,v.skew,v.perspective,v.quaternion);return!M||!w?!1:(o(c.translate,h.translate,v.translate,_),o(c.skew,h.skew,v.skew,_),o(c.scale,h.scale,v.scale,_),o(c.perspective,h.perspective,v.perspective,_),f(c.quaternion,h.quaternion,v.quaternion,_),a(m,c.translate,c.scale,c.skew,c.perspective,c.quaternion),!0)}t(d,"interpolate");function g(){return{translate:p(),scale:p(1),skew:p(),perspective:b(),quaternion:b()}}t(g,"state");function p(m){return[m||0,m||0,m||0]}t(p,"vec3");function b(){return[0,0,0,1]}t(b,"vec4")},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(n,i,s){var o={identity:n("gl-mat4/identity"),translate:n("gl-mat4/translate"),multiply:n("gl-mat4/multiply"),create:n("gl-mat4/create"),scale:n("gl-mat4/scale"),fromRotationTranslation:n("gl-mat4/fromRotationTranslation")};o.create();var a=o.create();i.exports=t(function(u,f,h,v,c,d){return o.identity(u),o.fromRotationTranslation(u,d,f),u[3]=c[0],u[7]=c[1],u[11]=c[2],u[15]=c[3],o.identity(a),v[2]!==0&&(a[9]=v[2],o.multiply(u,u,a)),v[1]!==0&&(a[9]=0,a[8]=v[1],o.multiply(u,u,a)),v[0]!==0&&(a[8]=0,a[4]=v[0],o.multiply(u,u,a)),o.scale(u,u,h),u},"recomposeMat4")},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(n,i,s){var o=n("binary-search-bounds"),a=n("mat4-interpolate"),l=n("gl-mat4/invert"),u=n("gl-mat4/rotateX"),f=n("gl-mat4/rotateY"),h=n("gl-mat4/rotateZ"),v=n("gl-mat4/lookAt"),c=n("gl-mat4/translate");n("gl-mat4/scale");var d=n("gl-vec3/normalize"),g=[0,0,0];i.exports=y;function p(T){this._components=T.slice(),this._time=[0],this.prevMatrix=T.slice(),this.nextMatrix=T.slice(),this.computedMatrix=T.slice(),this.computedInverse=T.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t(p,"MatrixCameraController");var b=p.prototype;b.recalcMatrix=function(T){var _=this._time,M=o.le(_,T),w=this.computedMatrix;if(!(M<0)){var x=this._components;if(M===_.length-1)for(var A=16*M,S=0;S<16;++S)w[S]=x[A++];else{for(var k=_[M+1]-_[M],A=16*M,L=this.prevMatrix,P=!0,S=0;S<16;++S)L[S]=x[A++];for(var D=this.nextMatrix,S=0;S<16;++S)D[S]=x[A++],P=P&&L[S]===D[S];if(k<1e-6||P)for(var S=0;S<16;++S)w[S]=L[S];else a(w,L,D,(T-_[M])/k)}var B=this.computedUp;B[0]=w[1],B[1]=w[5],B[2]=w[9],d(B,B);var z=this.computedInverse;l(z,w);var R=this.computedEye,F=z[15];R[0]=z[12]/F,R[1]=z[13]/F,R[2]=z[14]/F;for(var O=this.computedCenter,q=Math.exp(this.computedRadius[0]),S=0;S<3;++S)O[S]=R[S]-w[2+4*S]*q}},b.idle=function(T){if(!(T<this.lastT())){for(var _=this._components,M=_.length-16,w=0;w<16;++w)_.push(_[M++]);this._time.push(T)}},b.flush=function(T){var _=o.gt(this._time,T)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},b.lastT=function(){return this._time[this._time.length-1]},b.lookAt=function(T,_,M,w){this.recalcMatrix(T),_=_||this.computedEye,M=M||g,w=w||this.computedUp,this.setMatrix(T,v(this.computedMatrix,_,M,w));for(var x=0,A=0;A<3;++A)x+=Math.pow(M[A]-_[A],2);x=Math.log(Math.sqrt(x)),this.computedRadius[0]=x},b.rotate=function(T,_,M,w){this.recalcMatrix(T);var x=this.computedInverse;_&&f(x,x,_),M&&u(x,x,M),w&&h(x,x,w),this.setMatrix(T,l(this.computedMatrix,x))};var m=[0,0,0];b.pan=function(T,_,M,w){m[0]=-(_||0),m[1]=-(M||0),m[2]=-(w||0),this.recalcMatrix(T);var x=this.computedInverse;c(x,x,m),this.setMatrix(T,l(x,x))},b.translate=function(T,_,M,w){m[0]=_||0,m[1]=M||0,m[2]=w||0,this.recalcMatrix(T);var x=this.computedMatrix;c(x,x,m),this.setMatrix(T,x)},b.setMatrix=function(T,_){if(!(T<this.lastT())){this._time.push(T);for(var M=0;M<16;++M)this._components.push(_[M])}},b.setDistance=function(T,_){this.computedRadius[0]=_},b.setDistanceLimits=function(T,_){var M=this._limits;M[0]=T,M[1]=_},b.getDistanceLimits=function(T){var _=this._limits;return T?(T[0]=_[0],T[1]=_[1],T):_};function y(T){T=T||{};var _=T.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new p(_)}t(y,"createMatrixCameraController")},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(n,i,s){i.exports=a;var o=n("robust-orientation")[3];function a(l){var u=l.length;if(u<3){for(var b=new Array(u),f=0;f<u;++f)b[f]=f;return u===2&&l[0][0]===l[1][0]&&l[0][1]===l[1][1]?[0]:b}for(var h=new Array(u),f=0;f<u;++f)h[f]=f;h.sort(function(_,M){var w=l[_][0]-l[M][0];return w||l[_][1]-l[M][1]});for(var v=[h[0],h[1]],c=[h[0],h[1]],f=2;f<u;++f){for(var d=h[f],g=l[d],p=v.length;p>1&&o(l[v[p-2]],l[v[p-1]],g)<=0;)p-=1,v.pop();for(v.push(d),p=c.length;p>1&&o(l[c[p-2]],l[c[p-1]],g)>=0;)p-=1,c.pop();c.push(d)}for(var b=new Array(c.length+v.length-2),m=0,f=0,y=v.length;f<y;++f)b[m++]=v[f];for(var T=c.length-2;T>0;--T)b[m++]=c[T];return b}t(a,"monotoneConvexHull2D")},{"robust-orientation":284}],247:[function(n,i,s){i.exports=a;var o=n("mouse-event");function a(l,u){u||(u=l,l=window);var f=0,h=0,v=0,c={shift:!1,alt:!1,control:!1,meta:!1},d=!1;function g(S){var k=!1;return"altKey"in S&&(k=k||S.altKey!==c.alt,c.alt=!!S.altKey),"shiftKey"in S&&(k=k||S.shiftKey!==c.shift,c.shift=!!S.shiftKey),"ctrlKey"in S&&(k=k||S.ctrlKey!==c.control,c.control=!!S.ctrlKey),"metaKey"in S&&(k=k||S.metaKey!==c.meta,c.meta=!!S.metaKey),k}t(g,"updateMods");function p(S,k){var L=o.x(k),P=o.y(k);"buttons"in k&&(S=k.buttons|0),(S!==f||L!==h||P!==v||g(k))&&(f=S|0,h=L||0,v=P||0,u&&u(f,h,v,c))}t(p,"handleEvent");function b(S){p(0,S)}t(b,"clearState");function m(){(f||h||v||c.shift||c.alt||c.meta||c.control)&&(h=v=0,f=0,c.shift=c.alt=c.control=c.meta=!1,u&&u(0,0,0,c))}t(m,"handleBlur");function y(S){g(S)&&u&&u(f,h,v,c)}t(y,"handleMods");function T(S){o.buttons(S)===0?p(0,S):p(f,S)}t(T,"handleMouseMove");function _(S){p(f|o.buttons(S),S)}t(_,"handleMouseDown");function M(S){p(f&~o.buttons(S),S)}t(M,"handleMouseUp");function w(){d||(d=!0,l.addEventListener("mousemove",T),l.addEventListener("mousedown",_),l.addEventListener("mouseup",M),l.addEventListener("mouseleave",b),l.addEventListener("mouseenter",b),l.addEventListener("mouseout",b),l.addEventListener("mouseover",b),l.addEventListener("blur",m),l.addEventListener("keyup",y),l.addEventListener("keydown",y),l.addEventListener("keypress",y),l!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",y),window.addEventListener("keydown",y),window.addEventListener("keypress",y)))}t(w,"attachListeners");function x(){!d||(d=!1,l.removeEventListener("mousemove",T),l.removeEventListener("mousedown",_),l.removeEventListener("mouseup",M),l.removeEventListener("mouseleave",b),l.removeEventListener("mouseenter",b),l.removeEventListener("mouseout",b),l.removeEventListener("mouseover",b),l.removeEventListener("blur",m),l.removeEventListener("keyup",y),l.removeEventListener("keydown",y),l.removeEventListener("keypress",y),l!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",y),window.removeEventListener("keydown",y),window.removeEventListener("keypress",y)))}t(x,"detachListeners"),w();var A={element:l};return Object.defineProperties(A,{enabled:{get:function(){return d},set:function(S){S?w():x()},enumerable:!0},buttons:{get:function(){return f},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return c},enumerable:!0}}),A}t(a,"mouseListen")},{"mouse-event":249}],248:[function(n,i,s){var o={left:0,top:0};i.exports=a;function a(u,f,h){f=f||u.currentTarget||u.srcElement,Array.isArray(h)||(h=[0,0]);var v=u.clientX||0,c=u.clientY||0,d=l(f);return h[0]=v-d.left,h[1]=c-d.top,h}t(a,"mouseEventOffset");function l(u){return u===window||u===document||u===document.body?o:u.getBoundingClientRect()}t(l,"getBoundingClientOffset")},{}],249:[function(n,i,s){function o(f){if(typeof f=="object"){if("buttons"in f)return f.buttons;if("which"in f){var h=f.which;if(h===2)return 4;if(h===3)return 2;if(h>0)return 1<<h-1}else if("button"in f){var h=f.button;if(h===1)return 4;if(h===2)return 2;if(h>=0)return 1<<h}}return 0}t(o,"mouseButtons"),s.buttons=o;function a(f){return f.target||f.srcElement||window}t(a,"mouseElement"),s.element=a;function l(f){if(typeof f=="object"){if("offsetX"in f)return f.offsetX;var h=a(f),v=h.getBoundingClientRect();return f.clientX-v.left}return 0}t(l,"mouseRelativeX"),s.x=l;function u(f){if(typeof f=="object"){if("offsetY"in f)return f.offsetY;var h=a(f),v=h.getBoundingClientRect();return f.clientY-v.top}return 0}t(u,"mouseRelativeY"),s.y=u},{}],250:[function(n,i,s){var o=n("to-px");i.exports=a;function a(l,u,f){typeof l=="function"&&(f=!!u,u=l,l=window);var h=o("ex",l),v=t(function(c){f&&c.preventDefault();var d=c.deltaX||0,g=c.deltaY||0,p=c.deltaZ||0,b=c.deltaMode,m=1;switch(b){case 1:m=h;break;case 2:m=window.innerHeight;break}if(d*=m,g*=m,p*=m,d||g||p)return u(d,g,p,c)},"listener");return l.addEventListener("wheel",v),v}t(a,"mouseWheelListen")},{"to-px":304}],251:[function(n,i,s){var o=n("typedarray-pool");i.exports=u;var a={"false,0,1":t(function(h,v,c,d,g){return t(function(b,m,y,T){var _=b.shape[0]|0,M=b.shape[1]|0,w=b.data,x=b.offset|0,A=b.stride[0]|0,S=b.stride[1]|0,k=x,L,P=-A|0,D=0,B=-S|0,z=0,R=-A-S|0,F=0,O=A|0,q=S-A*_|0,H=0,j=0,X=0,G=2*_|0,$=d(G),te=d(G),ee=0,ie=0,se=-1,W=-1,ne=0,he=-_|0,re=_|0,ae=0,fe=-_-1|0,ce=_-1|0,xe=0,Te=0,me=0;for(H=0;H<_;++H)$[ee++]=c(w[k],m,y,T),k+=O;if(k+=q,M>0){if(j=1,$[ee++]=c(w[k],m,y,T),k+=O,_>0)for(H=1,L=w[k],ie=$[ee]=c(L,m,y,T),ne=$[ee+se],ae=$[ee+he],xe=$[ee+fe],(ie!==ne||ie!==ae||ie!==xe)&&(D=w[k+P],z=w[k+B],F=w[k+R],h(H,j,L,D,z,F,ie,ne,ae,xe,m,y,T),Te=te[ee]=X++),ee+=1,k+=O,H=2;H<_;++H)L=w[k],ie=$[ee]=c(L,m,y,T),ne=$[ee+se],ae=$[ee+he],xe=$[ee+fe],(ie!==ne||ie!==ae||ie!==xe)&&(D=w[k+P],z=w[k+B],F=w[k+R],h(H,j,L,D,z,F,ie,ne,ae,xe,m,y,T),Te=te[ee]=X++,xe!==ne&&v(te[ee+se],Te,F,D,xe,ne,m,y,T)),ee+=1,k+=O;for(k+=q,ee=0,me=se,se=W,W=me,me=he,he=re,re=me,me=fe,fe=ce,ce=me,j=2;j<M;++j){if($[ee++]=c(w[k],m,y,T),k+=O,_>0)for(H=1,L=w[k],ie=$[ee]=c(L,m,y,T),ne=$[ee+se],ae=$[ee+he],xe=$[ee+fe],(ie!==ne||ie!==ae||ie!==xe)&&(D=w[k+P],z=w[k+B],F=w[k+R],h(H,j,L,D,z,F,ie,ne,ae,xe,m,y,T),Te=te[ee]=X++,xe!==ae&&v(te[ee+he],Te,z,F,ae,xe,m,y,T)),ee+=1,k+=O,H=2;H<_;++H)L=w[k],ie=$[ee]=c(L,m,y,T),ne=$[ee+se],ae=$[ee+he],xe=$[ee+fe],(ie!==ne||ie!==ae||ie!==xe)&&(D=w[k+P],z=w[k+B],F=w[k+R],h(H,j,L,D,z,F,ie,ne,ae,xe,m,y,T),Te=te[ee]=X++,xe!==ae&&v(te[ee+he],Te,z,F,ae,xe,m,y,T),xe!==ne&&v(te[ee+se],Te,F,D,xe,ne,m,y,T)),ee+=1,k+=O;j&1&&(ee=0),me=se,se=W,W=me,me=he,he=re,re=me,me=fe,fe=ce,ce=me,k+=q}}g(te),g($)},"extractContour0_1")},"surfaceProcedure"),"false,1,0":t(function(h,v,c,d,g){return t(function(b,m,y,T){var _=b.shape[0]|0,M=b.shape[1]|0,w=b.data,x=b.offset|0,A=b.stride[0]|0,S=b.stride[1]|0,k=x,L,P=-A|0,D=0,B=-S|0,z=0,R=-A-S|0,F=0,O=S|0,q=A-S*M|0,H=0,j=0,X=0,G=2*M|0,$=d(G),te=d(G),ee=0,ie=0,se=-1,W=-1,ne=0,he=-M|0,re=M|0,ae=0,fe=-M-1|0,ce=M-1|0,xe=0,Te=0,me=0;for(j=0;j<M;++j)$[ee++]=c(w[k],m,y,T),k+=O;if(k+=q,_>0){if(H=1,$[ee++]=c(w[k],m,y,T),k+=O,M>0)for(j=1,L=w[k],ie=$[ee]=c(L,m,y,T),ae=$[ee+he],ne=$[ee+se],xe=$[ee+fe],(ie!==ae||ie!==ne||ie!==xe)&&(D=w[k+P],z=w[k+B],F=w[k+R],h(H,j,L,D,z,F,ie,ae,ne,xe,m,y,T),Te=te[ee]=X++),ee+=1,k+=O,j=2;j<M;++j)L=w[k],ie=$[ee]=c(L,m,y,T),ae=$[ee+he],ne=$[ee+se],xe=$[ee+fe],(ie!==ae||ie!==ne||ie!==xe)&&(D=w[k+P],z=w[k+B],F=w[k+R],h(H,j,L,D,z,F,ie,ae,ne,xe,m,y,T),Te=te[ee]=X++,xe!==ne&&v(te[ee+se],Te,z,F,ne,xe,m,y,T)),ee+=1,k+=O;for(k+=q,ee=0,me=he,he=re,re=me,me=se,se=W,W=me,me=fe,fe=ce,ce=me,H=2;H<_;++H){if($[ee++]=c(w[k],m,y,T),k+=O,M>0)for(j=1,L=w[k],ie=$[ee]=c(L,m,y,T),ae=$[ee+he],ne=$[ee+se],xe=$[ee+fe],(ie!==ae||ie!==ne||ie!==xe)&&(D=w[k+P],z=w[k+B],F=w[k+R],h(H,j,L,D,z,F,ie,ae,ne,xe,m,y,T),Te=te[ee]=X++,xe!==ae&&v(te[ee+he],Te,F,D,xe,ae,m,y,T)),ee+=1,k+=O,j=2;j<M;++j)L=w[k],ie=$[ee]=c(L,m,y,T),ae=$[ee+he],ne=$[ee+se],xe=$[ee+fe],(ie!==ae||ie!==ne||ie!==xe)&&(D=w[k+P],z=w[k+B],F=w[k+R],h(H,j,L,D,z,F,ie,ae,ne,xe,m,y,T),Te=te[ee]=X++,xe!==ne&&v(te[ee+se],Te,z,F,ne,xe,m,y,T),xe!==ae&&v(te[ee+he],Te,F,D,xe,ae,m,y,T)),ee+=1,k+=O;H&1&&(ee=0),me=he,he=re,re=me,me=se,se=W,W=me,me=fe,fe=ce,ce=me,k+=q}}g(te),g($)},"extractContour1_0")},"anonymous")};function l(f,h,v,c,d,g){var p=[g,d].join(","),b=a[p];return b(f,h,v,o.mallocUint32,o.freeUint32)}t(l,"compileSurfaceProcedure");function u(f){function h(m){throw new Error("ndarray-extract-contour: "+m)}t(h,"error"),typeof f!="object"&&h("Must specify arguments");var v=f.order;Array.isArray(v)||h("Must specify order");var c=f.arrayArguments||1;c<1&&h("Must have at least one array argument");var d=f.scalarArguments||0;d<0&&h("Scalar arg count must be > 0"),typeof f.vertex!="function"&&h("Must specify vertex creation function"),typeof f.cell!="function"&&h("Must specify cell creation function"),typeof f.phase!="function"&&h("Must specify phase function");for(var g=f.getters||[],p=new Array(c),b=0;b<c;++b)g.indexOf(b)>=0?p[b]=!0:p[b]=!1;return l(f.vertex,f.cell,f.phase,d,v,p)}t(u,"createSurfaceExtractor")},{"typedarray-pool":308}],252:[function(n,i,s){var o=n("dup"),a={zero:function(y,T,_,M){var w=y[0],x=_[0];M|=0;var A=0,S=x;for(A=0;A<w;++A)T[M]=0,M+=S},fdTemplate1:function(y,T,_,M,w,x,A){var S=y[0],k=_[0],L=x[0],P=-1*k,D=k;M|=0,A|=0;var B=0,z=k,R=L;for(B=0;B<S;++B)w[A]=.5*(T[M+P]-T[M+D]),M+=z,A+=R},fdTemplate2:function(y,T,_,M,w,x,A,S,k,L){var P=y[0],D=y[1],B=_[0],z=_[1],R=x[0],F=x[1],O=k[0],q=k[1],H=-1*B,j=B,X=-1*z,G=z;M|=0,A|=0,L|=0;var $=0,te=0,ee=z,ie=B-D*z,se=F,W=R-D*F,ne=q,he=O-D*q;for(te=0;te<P;++te){for($=0;$<D;++$)w[A]=.5*(T[M+H]-T[M+j]),S[L]=.5*(T[M+X]-T[M+G]),M+=ee,A+=se,L+=ne;M+=ie,A+=W,L+=he}}},l={cdiff:function(y){var T={};return t(function(M,w,x){var A=M.dtype,S=M.order,k=w.dtype,L=w.order,P=x.dtype,D=x.order,B=[A,S.join(),k,L.join(),P,D.join()].join(),z=T[B];return z||(T[B]=z=y([A,S,k,L,P,D])),z(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,x.data,x.stride,x.offset|0)},"cdiff_cwise_thunk")},zero:function(y){var T={};return t(function(M){var w=M.dtype,x=M.order,A=[w,x.join()].join(),S=T[A];return S||(T[A]=S=y([w,x])),S(M.shape.slice(0),M.data,M.stride,M.offset|0)},"zero_cwise_thunk")},fdTemplate1:function(y){var T={};return t(function(M,w){var x=M.dtype,A=M.order,S=w.dtype,k=w.order,L=[x,A.join(),S,k.join()].join(),P=T[L];return P||(T[L]=P=y([x,A,S,k])),P(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0)},"fdTemplate1_cwise_thunk")},fdTemplate2:function(y){var T={};return t(function(M,w,x){var A=M.dtype,S=M.order,k=w.dtype,L=w.order,P=x.dtype,D=x.order,B=[A,S.join(),k,L.join(),P,D.join()].join(),z=T[B];return z||(T[B]=z=y([A,S,k,L,P,D])),z(M.shape.slice(0),M.data,M.stride,M.offset|0,w.data,w.stride,w.offset|0,x.data,x.stride,x.offset|0)},"fdTemplate2_cwise_thunk")}};function u(y){var T=l[y.funcName];return T(f.bind(void 0,y))}t(u,"createThunk");function f(y){return a[y.funcName]}t(f,"compile");function h(y){return u({funcName:y.funcName})}t(h,"cwiseCompiler");var v={},c={},d=h({funcName:"cdiff"}),g=h({funcName:"zero"});function p(y){return y in v?v[y]:v[y]=h({funcName:"fdTemplate"+y})}t(p,"generateTemplate");function b(y,T,_,M){return function(w,x){var A=x.shape.slice();return A[0]>2&&A[1]>2&&M(x.pick(-1,-1).lo(1,1).hi(A[0]-2,A[1]-2),w.pick(-1,-1,0).lo(1,1).hi(A[0]-2,A[1]-2),w.pick(-1,-1,1).lo(1,1).hi(A[0]-2,A[1]-2)),A[1]>2&&(_(x.pick(0,-1).lo(1).hi(A[1]-2),w.pick(0,-1,1).lo(1).hi(A[1]-2)),T(w.pick(0,-1,0).lo(1).hi(A[1]-2))),A[1]>2&&(_(x.pick(A[0]-1,-1).lo(1).hi(A[1]-2),w.pick(A[0]-1,-1,1).lo(1).hi(A[1]-2)),T(w.pick(A[0]-1,-1,0).lo(1).hi(A[1]-2))),A[0]>2&&(_(x.pick(-1,0).lo(1).hi(A[0]-2),w.pick(-1,0,0).lo(1).hi(A[0]-2)),T(w.pick(-1,0,1).lo(1).hi(A[0]-2))),A[0]>2&&(_(x.pick(-1,A[1]-1).lo(1).hi(A[0]-2),w.pick(-1,A[1]-1,0).lo(1).hi(A[0]-2)),T(w.pick(-1,A[1]-1,1).lo(1).hi(A[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(A[0]-1,0,0,0),w.set(A[0]-1,0,1,0),w.set(0,A[1]-1,0,0),w.set(0,A[1]-1,1,0),w.set(A[0]-1,A[1]-1,0,0),w.set(A[0]-1,A[1]-1,1,0),w}}t(b,"CACHED_link");function m(y){var T=y.join(),A=c[T];if(A)return A;for(var _=y.length,M=[d,g],w=1;w<=_;++w)M.push(p(w));var x=b,A=x.apply(void 0,M);return c[T]=A,A}t(m,"generateGradient"),i.exports=t(function(T,_,M){if(Array.isArray(M)||(typeof M=="string"?M=o(_.dimension,M):M=o(_.dimension,"clamp")),_.size===0)return T;if(_.dimension===0)return T.set(0),T;var w=m(M);return w(T,_)},"gradient")},{dup:65}],253:[function(n,i,s){function o(h,v){var c=Math.floor(v),d=v-c,g=0<=c&&c<h.shape[0],p=0<=c+1&&c+1<h.shape[0],b=g?+h.get(c):0,m=p?+h.get(c+1):0;return(1-d)*b+d*m}t(o,"interp1d");function a(h,v,c){var d=Math.floor(v),g=v-d,p=0<=d&&d<h.shape[0],b=0<=d+1&&d+1<h.shape[0],m=Math.floor(c),y=c-m,T=0<=m&&m<h.shape[1],_=0<=m+1&&m+1<h.shape[1],M=p&&T?h.get(d,m):0,w=p&&_?h.get(d,m+1):0,x=b&&T?h.get(d+1,m):0,A=b&&_?h.get(d+1,m+1):0;return(1-y)*((1-g)*M+g*x)+y*((1-g)*w+g*A)}t(a,"interp2d");function l(h,v,c,d){var g=Math.floor(v),p=v-g,b=0<=g&&g<h.shape[0],m=0<=g+1&&g+1<h.shape[0],y=Math.floor(c),T=c-y,_=0<=y&&y<h.shape[1],M=0<=y+1&&y+1<h.shape[1],w=Math.floor(d),x=d-w,A=0<=w&&w<h.shape[2],S=0<=w+1&&w+1<h.shape[2],k=b&&_&&A?h.get(g,y,w):0,L=b&&M&&A?h.get(g,y+1,w):0,P=m&&_&&A?h.get(g+1,y,w):0,D=m&&M&&A?h.get(g+1,y+1,w):0,B=b&&_&&S?h.get(g,y,w+1):0,z=b&&M&&S?h.get(g,y+1,w+1):0,R=m&&_&&S?h.get(g+1,y,w+1):0,F=m&&M&&S?h.get(g+1,y+1,w+1):0;return(1-x)*((1-T)*((1-p)*k+p*P)+T*((1-p)*L+p*D))+x*((1-T)*((1-p)*B+p*R)+T*((1-p)*z+p*F))}t(l,"interp3d");function u(h){var v=h.shape.length|0,c=new Array(v),d=new Array(v),g=new Array(v),p=new Array(v),b,m;for(b=0;b<v;++b)m=+arguments[b+1],c[b]=Math.floor(m),d[b]=m-c[b],g[b]=0<=c[b]&&c[b]<h.shape[b],p[b]=0<=c[b]+1&&c[b]+1<h.shape[b];var y=0,T,_,M;e:for(b=0;b<1<<v;++b){for(_=1,M=h.offset,T=0;T<v;++T)if(b&1<<T){if(!p[T])continue e;_*=d[T],M+=h.stride[T]*(c[T]+1)}else{if(!g[T])continue e;_*=1-d[T],M+=h.stride[T]*c[T]}y+=_*h.data[M]}return y}t(u,"interpNd");function f(h,v,c,d){switch(h.shape.length){case 0:return 0;case 1:return o(h,v);case 2:return a(h,v,c);case 3:return l(h,v,c,d);default:return u.apply(void 0,arguments)}}t(f,"interpolate"),i.exports=f,i.exports.d1=o,i.exports.d2=a,i.exports.d3=l},{}],254:[function(n,i,s){var o={"float64,2,1,0":function(){return t(function(d,g,p,b,m){var y=d[0],T=d[1],_=d[2],M=p[0],w=p[1],x=p[2];b|=0;var A=0,S=0,k=0,L=x,P=w-_*x,D=M-T*w;for(k=0;k<y;++k){for(S=0;S<T;++S){for(A=0;A<_;++A)g[b]/=m,b+=L;b+=P}b+=D}},"divseq_cwise_loop_2s1s0m3f64")},"uint8,2,0,1,float64,2,1,0":function(){return t(function(d,g,p,b,m,y,T,_){var M=d[0],w=d[1],x=d[2],A=p[0],S=p[1],k=p[2],L=y[0],P=y[1],D=y[2];b|=0,T|=0;for(var B=b,z=T,R=d[0]|0;R>0;){R<64?(M=R,R=0):(M=64,R-=64);for(var F=d[1]|0;F>0;){F<64?(w=F,F=0):(w=64,F-=64),b=B+R*A+F*S,T=z+R*L+F*P;var O=0,q=0,H=0,j=k,X=A-x*k,G=S-M*A,$=D,te=L-x*D,ee=P-M*L;for(H=0;H<w;++H){for(q=0;q<M;++q){for(O=0;O<x;++O)g[b]=m[T]*_,b+=j,T+=$;b+=X,T+=te}b+=G,T+=ee}}}},"muls_cwise_loop_2s0s1m1u8f64")},"float32,1,0,float32,1,0":function(){return t(function(d,g,p,b,m,y,T){var _=d[0],M=d[1],w=p[0],x=p[1],A=y[0],S=y[1];b|=0,T|=0;var k=0,L=0,P=x,D=w-M*x,B=S,z=A-M*S;for(L=0;L<_;++L){for(k=0;k<M;++k)g[b]=m[T],b+=P,T+=B;b+=D,T+=z}},"assign_cwise_loop_1s0m2f32")},"float32,1,0,float32,0,1":function(){return t(function(d,g,p,b,m,y,T){var _=d[0],M=d[1],w=p[0],x=p[1],A=y[0],S=y[1];b|=0,T|=0;for(var k=b,L=T,P=d[1]|0;P>0;){P<64?(M=P,P=0):(M=64,P-=64);for(var D=d[0]|0;D>0;){D<64?(_=D,D=0):(_=64,D-=64),b=k+P*x+D*w,T=L+P*S+D*A;var B=0,z=0,R=x,F=w-M*x,O=S,q=A-M*S;for(z=0;z<_;++z){for(B=0;B<M;++B)g[b]=m[T],b+=R,T+=O;b+=F,T+=q}}}},"assign_cwise_loop_1s0m0f32")},"uint8,2,0,1,uint8,1,2,0":function(){return t(function(d,g,p,b,m,y,T){var _=d[0],M=d[1],w=d[2],x=p[0],A=p[1],S=p[2],k=y[0],L=y[1],P=y[2];b|=0,T|=0;for(var D=b,B=T,z=d[2]|0;z>0;){z<64?(w=z,z=0):(w=64,z-=64);for(var R=d[0]|0;R>0;){R<64?(_=R,R=0):(_=64,R-=64);for(var F=d[1]|0;F>0;){F<64?(M=F,F=0):(M=64,F-=64),b=D+z*S+R*x+F*A,T=B+z*P+R*k+F*L;var O=0,q=0,H=0,j=S,X=x-w*S,G=A-_*x,$=P,te=k-w*P,ee=L-_*k;for(H=0;H<M;++H){for(q=0;q<_;++q){for(O=0;O<w;++O)g[b]=m[T],b+=j,T+=$;b+=X,T+=te}b+=G,T+=ee}}}}},"assign_cwise_loop_2s0s1m0u8")},"uint8,2,0,1,array,2,0,1":function(){return t(function(d,g,p,b,m,y,T){var _=d[0],M=d[1],w=d[2],x=p[0],A=p[1],S=p[2],k=y[0],L=y[1],P=y[2];b|=0,T|=0;var D=0,B=0,z=0,R=S,F=x-w*S,O=A-_*x,q=P,H=k-w*P,j=L-_*k;for(z=0;z<M;++z){for(B=0;B<_;++B){for(D=0;D<w;++D)g[b]=m[T],b+=R,T+=q;b+=F,T+=H}b+=O,T+=j}},"assign_cwise_loop_2s0s1m3u8a")}};function a(c,d){var g=d.join(","),p=o[g];return p()}t(a,"generateCWiseOp");var l=a,u={mul:function(c){var d={};return t(function(p,b,m){var y=p.dtype,T=p.order,_=b.dtype,M=b.order,w=m.dtype,x=m.order,A=[y,T.join(),_,M.join(),w,x.join()].join(),S=d[A];return S||(d[A]=S=c([y,T,_,M,w,x])),S(p.shape.slice(0),p.data,p.stride,p.offset|0,b.data,b.stride,b.offset|0,m.data,m.stride,m.offset|0)},"mul_cwise_thunk")},muls:function(c){var d={};return t(function(p,b,m){var y=p.dtype,T=p.order,_=b.dtype,M=b.order,w=[y,T.join(),_,M.join()].join(),x=d[w];return x||(d[w]=x=c([y,T,_,M])),x(p.shape.slice(0),p.data,p.stride,p.offset|0,b.data,b.stride,b.offset|0,m)},"muls_cwise_thunk")},mulseq:function(c){var d={};return t(function(p,b){var m=p.dtype,y=p.order,T=[m,y.join()].join(),_=d[T];return _||(d[T]=_=c([m,y])),_(p.shape.slice(0),p.data,p.stride,p.offset|0,b)},"mulseq_cwise_thunk")},div:function(c){var d={};return t(function(p,b,m){var y=p.dtype,T=p.order,_=b.dtype,M=b.order,w=m.dtype,x=m.order,A=[y,T.join(),_,M.join(),w,x.join()].join(),S=d[A];return S||(d[A]=S=c([y,T,_,M,w,x])),S(p.shape.slice(0),p.data,p.stride,p.offset|0,b.data,b.stride,b.offset|0,m.data,m.stride,m.offset|0)},"div_cwise_thunk")},divs:function(c){var d={};return t(function(p,b,m){var y=p.dtype,T=p.order,_=b.dtype,M=b.order,w=[y,T.join(),_,M.join()].join(),x=d[w];return x||(d[w]=x=c([y,T,_,M])),x(p.shape.slice(0),p.data,p.stride,p.offset|0,b.data,b.stride,b.offset|0,m)},"divs_cwise_thunk")},divseq:function(c){var d={};return t(function(p,b){var m=p.dtype,y=p.order,T=[m,y.join()].join(),_=d[T];return _||(d[T]=_=c([m,y])),_(p.shape.slice(0),p.data,p.stride,p.offset|0,b)},"divseq_cwise_thunk")},assign:function(c){var d={};return t(function(p,b){var m=p.dtype,y=p.order,T=b.dtype,_=b.order,M=[m,y.join(),T,_.join()].join(),w=d[M];return w||(d[M]=w=c([m,y,T,_])),w(p.shape.slice(0),p.data,p.stride,p.offset|0,b.data,b.stride,b.offset|0)},"assign_cwise_thunk")}};function f(c){var d=u[c.funcName];return d(l.bind(void 0,c))}t(f,"createThunk");function h(c){return f({funcName:c.funcName})}t(h,"makeOp");var v={mul:"*",div:"/"};(function(){for(var c in v)s[c]=h({funcName:c}),s[c+"s"]=h({funcName:c+"s"}),s[c+"seq"]=h({funcName:c+"seq"})})(),s.assign=h({funcName:"assign"})},{}],255:[function(n,i,s){var o=n("ndarray"),a=n("./doConvert.js");i.exports=t(function(u,f){for(var h=[],v=u,c=1;Array.isArray(v);)h.push(v.length),c*=v.length,v=v[0];return h.length===0?o():(f||(f=o(new Float64Array(c),h)),a(f,u),f)},"convert")},{"./doConvert.js":256,ndarray:259}],256:[function(n,i,s){function o(){return function(v,c,d,g,p){var b=v[0],m=v[1],y=v[2],T=d[0],_=d[1],M=d[2],w=[0,0,0];g|=0;var x=0,A=0,S=0,k=M,L=_-y*M,P=T-m*_;for(S=0;S<b;++S){for(A=0;A<m;++A){for(x=0;x<y;++x){{var D=p,B;for(B=0;B<w.length-1;++B)D=D[w[B]];c[g]=D[w[w.length-1]]}g+=k,++w[2]}g+=L,w[2]-=y,++w[1]}g+=P,w[1]-=m,++w[0]}}}t(o,"CwiseOp");function a(){return o()}t(a,"generateCWiseOp");var l=a;function u(v){var c={};return t(function(g,p){var b=g.dtype,m=g.order,y=[b,m.join()].join(),T=c[y];return T||(c[y]=T=v([b,m])),T(g.shape.slice(0),g.data,g.stride,g.offset|0,p)},"convert_cwise_thunk")}t(u,"thunk");function f(v){return u(l.bind(void 0,v))}t(f,"createThunk");function h(v){return f({funcName:v.funcName})}t(h,"compileCwise"),i.exports=h({funcName:"convert"})},{}],257:[function(n,i,s){var o=n("typedarray-pool");function a(d){switch(d){case"uint32":return[o.mallocUint32,o.freeUint32];default:return null}}t(a,"getMallocFree");var l={"uint32,1,0":function(d,g){return t(function(b,m,y,T,_,M,w,x,A,S,k){var L,P,D,B=b*_+T,z,R=d(x),F,O,q,H;for(L=b+1;L<=m;++L){for(P=L,B+=_,D=B,F=0,O=B,z=0;z<x;++z)R[F++]=y[O],O+=A;e:for(;P-- >b;){F=0,O=D-_;t:for(z=0;z<x;++z){if(q=y[O],H=R[F],q<H)break e;if(q>H)break t;O+=S,F+=k}for(F=D,O=D-_,z=0;z<x;++z)y[F]=y[O],F+=A,O+=A;D-=_}for(F=D,O=0,z=0;z<x;++z)y[F]=R[O++],F+=A}g(R)},"ndarrayInsertionSort1d0uint32")}};function u(d,g){var p=a(g),b=[g,d].join(","),m=l[b];return p?m(p[0],p[1]):m()}t(u,"createInsertionSort");var f={"uint32,1,0":function(d,g,p){return t(function b(m,y,T,_,M,w,x,A,S,k,L){var P=(y-m+1)/6|0,D=m+P,B=y-P,z=m+y>>1,R=z-P,F=z+P,O=D,q=R,H=z,j=F,X=B,G=m+1,$=y-1,te=!0,ee,ie,se,W,ne,he,re,ae,fe,ce=0,xe=0,Te=0,me,pe,oe,de,ye,we,Ee,De,Fe,qe,Je,Ge,et,Ue,Ye,$e,Ct=A,It=g(Ct),Vt=g(Ct);pe=M*O,oe=M*q,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=O,O=q,q=ie;break e}if(Te<0)break e;$e+=k}pe=M*j,oe=M*X,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=j,j=X,X=ie;break e}if(Te<0)break e;$e+=k}pe=M*O,oe=M*H,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=O,O=H,H=ie;break e}if(Te<0)break e;$e+=k}pe=M*q,oe=M*H,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=q,q=H,H=ie;break e}if(Te<0)break e;$e+=k}pe=M*O,oe=M*j,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=O,O=j,j=ie;break e}if(Te<0)break e;$e+=k}pe=M*H,oe=M*j,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=H,H=j,j=ie;break e}if(Te<0)break e;$e+=k}pe=M*q,oe=M*X,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=q,q=X,X=ie;break e}if(Te<0)break e;$e+=k}pe=M*q,oe=M*H,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=q,q=H,H=ie;break e}if(Te<0)break e;$e+=k}pe=M*j,oe=M*X,$e=_;e:for(me=0;me<A;++me){if(re=pe+$e,ae=oe+$e,Te=T[re]-T[ae],Te>0){ie=j,j=X,X=ie;break e}if(Te<0)break e;$e+=k}for(pe=M*O,oe=M*q,de=M*H,ye=M*j,we=M*X,Ee=M*D,De=M*z,Fe=M*B,Ye=0,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,fe=de+$e,qe=ye+$e,Je=we+$e,Ge=Ee+$e,et=De+$e,Ue=Fe+$e,It[Ye]=T[ae],Vt[Ye]=T[qe],te=te&&It[Ye]===Vt[Ye],se=T[re],W=T[fe],ne=T[Je],T[Ge]=se,T[et]=W,T[Ue]=ne,++Ye,$e+=S;for(pe=M*R,oe=M*m,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,T[re]=T[ae],$e+=S;for(pe=M*F,oe=M*y,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,T[re]=T[ae],$e+=S;if(te)for(he=G;he<=$;++he){re=_+he*M,Ye=0;e:for(me=0;me<A;++me){if(Te=T[re]-It[Ye],Te!==0)break e;Ye+=L,re+=k}if(Te!==0)if(Te<0){if(he!==G)for(pe=M*he,oe=M*G,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,ee=T[re],T[re]=T[ae],T[ae]=ee,$e+=S;++G}else for(;;){re=_+$*M,Ye=0;e:for(me=0;me<A;++me){if(Te=T[re]-It[Ye],Te!==0)break e;Ye+=L,re+=k}if(Te>0)$--;else if(Te<0){for(pe=M*he,oe=M*G,de=M*$,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,fe=de+$e,ee=T[re],T[re]=T[ae],T[ae]=T[fe],T[fe]=ee,$e+=S;++G,--$;break}else{for(pe=M*he,oe=M*$,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,ee=T[re],T[re]=T[ae],T[ae]=ee,$e+=S;--$;break}}}else for(he=G;he<=$;++he){re=_+he*M,Ye=0;e:for(me=0;me<A;++me){if(ce=T[re]-It[Ye],ce!==0)break e;Ye+=L,re+=k}if(ce<0){if(he!==G)for(pe=M*he,oe=M*G,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,ee=T[re],T[re]=T[ae],T[ae]=ee,$e+=S;++G}else{re=_+he*M,Ye=0;e:for(me=0;me<A;++me){if(xe=T[re]-Vt[Ye],xe!==0)break e;Ye+=L,re+=k}if(xe>0)for(;;){re=_+$*M,Ye=0;e:for(me=0;me<A;++me){if(Te=T[re]-Vt[Ye],Te!==0)break e;Ye+=L,re+=k}if(Te>0){if(--$<he)break;continue}else{re=_+$*M,Ye=0;e:for(me=0;me<A;++me){if(Te=T[re]-It[Ye],Te!==0)break e;Ye+=L,re+=k}if(Te<0){for(pe=M*he,oe=M*G,de=M*$,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,fe=de+$e,ee=T[re],T[re]=T[ae],T[ae]=T[fe],T[fe]=ee,$e+=S;++G,--$}else{for(pe=M*he,oe=M*$,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,ee=T[re],T[re]=T[ae],T[ae]=ee,$e+=S;--$}break}}}}for(pe=M*m,oe=M*(G-1),Ye=0,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,T[re]=T[ae],T[ae]=It[Ye],++Ye,$e+=S;for(pe=M*y,oe=M*($+1),Ye=0,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,T[re]=T[ae],T[ae]=Vt[Ye],++Ye,$e+=S;if(G-2-m<=32?d(m,G-2,T,_,M,w,x,A,S,k,L):b(m,G-2,T,_,M,w,x,A,S,k,L),y-($+2)<=32?d($+2,y,T,_,M,w,x,A,S,k,L):b($+2,y,T,_,M,w,x,A,S,k,L),te){p(It),p(Vt);return}if(G<D&&$>B){e:for(;;){for(re=_+G*M,Ye=0,$e=_,me=0;me<A;++me){if(T[re]!==It[Ye])break e;++Ye,re+=S}++G}e:for(;;){for(re=_+$*M,Ye=0,$e=_,me=0;me<A;++me){if(T[re]!==Vt[Ye])break e;++Ye,re+=S}--$}for(he=G;he<=$;++he){re=_+he*M,Ye=0;e:for(me=0;me<A;++me){if(ce=T[re]-It[Ye],ce!==0)break e;Ye+=L,re+=k}if(ce===0){if(he!==G)for(pe=M*he,oe=M*G,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,ee=T[re],T[re]=T[ae],T[ae]=ee,$e+=S;++G}else{re=_+he*M,Ye=0;e:for(me=0;me<A;++me){if(xe=T[re]-Vt[Ye],xe!==0)break e;Ye+=L,re+=k}if(xe===0)for(;;){re=_+$*M,Ye=0;e:for(me=0;me<A;++me){if(Te=T[re]-Vt[Ye],Te!==0)break e;Ye+=L,re+=k}if(Te===0){if(--$<he)break;continue}else{re=_+$*M,Ye=0;e:for(me=0;me<A;++me){if(Te=T[re]-It[Ye],Te!==0)break e;Ye+=L,re+=k}if(Te<0){for(pe=M*he,oe=M*G,de=M*$,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,fe=de+$e,ee=T[re],T[re]=T[ae],T[ae]=T[fe],T[fe]=ee,$e+=S;++G,--$}else{for(pe=M*he,oe=M*$,$e=_,me=0;me<A;++me)re=pe+$e,ae=oe+$e,ee=T[re],T[re]=T[ae],T[ae]=ee,$e+=S;--$}break}}}}}p(It),p(Vt),$-G<=32?d(G,$,T,_,M,w,x,A,S,k,L):b(G,$,T,_,M,w,x,A,S,k,L)},"ndarrayQuickSort1d0uint32")}};function h(d,g,p){var b=a(g),m=[g,d].join(","),y=f[m];return d.length>1&&b?y(p,b[0],b[1]):y(p)}t(h,"createQuickSort");var v={"uint32,1,0":function(d,g){return function(p){var b=p.data,m=p.offset|0,y=p.shape,T=p.stride,_=T[0]|0,M=y[0]|0,w=T[1]|0,x=y[1]|0,A=w,S=w,k=1;M<=32?d(0,M-1,b,m,_,w,M,x,A,S,k):g(0,M-1,b,m,_,w,M,x,A,S,k)}}};function c(d,g){var p=[g,d].join(","),b=v[p],m=u(d,g),y=h(d,g,m);return b(m,y)}t(c,"compileSort"),i.exports=c},{"typedarray-pool":308}],258:[function(n,i,s){var o=n("./lib/compile_sort.js"),a={};function l(u){var f=u.order,h=u.dtype,v=[f,h],c=v.join(":"),d=a[c];return d||(a[c]=d=o(f,h)),d(u),u}t(l,"sort"),i.exports=l},{"./lib/compile_sort.js":257}],259:[function(n,i,s){var o=n("is-buffer"),a=typeof Float64Array<"u";function l(g,p){return g[0]-p[0]}t(l,"compare1st");function u(){var g=this.stride,p=new Array(g.length),b;for(b=0;b<p.length;++b)p[b]=[Math.abs(g[b]),b];p.sort(l);var m=new Array(p.length);for(b=0;b<m.length;++b)m[b]=p[b][1];return m}t(u,"order");var f={T:function(g){function p(m){this.data=m}t(p,"View");var b=p.prototype;return b.dtype=g,b.index=function(){return-1},b.size=0,b.dimension=-1,b.shape=b.stride=b.order=[],b.lo=b.hi=b.transpose=b.step=function(){return new p(this.data)},b.get=b.set=function(){},b.pick=function(){return null},t(function(y){return new p(y)},"construct")},0:function(g,p){function b(y,T){this.data=y,this.offset=T}t(b,"View");var m=b.prototype;return m.dtype=g,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=t(function(){return new b(this.data,this.offset)},"copy"),m.pick=t(function(){return p(this.data)},"pick"),m.valueOf=m.get=t(function(){return g==="generic"?this.data.get(this.offset):this.data[this.offset]},"get"),m.set=t(function(T){return g==="generic"?this.data.set(this.offset,T):this.data[this.offset]=T},"set"),t(function(T,_,M,w){return new b(T,w)},"construct")},1:function(g,p,b){function m(T,_,M,w){this.data=T,this.shape=[_],this.stride=[M],this.offset=w|0}t(m,"View");var y=m.prototype;return y.dtype=g,y.dimension=1,Object.defineProperty(y,"size",{get:t(function(){return this.shape[0]},"size")}),y.order=[0],y.set=t(function(_,M){return g==="generic"?this.data.set(this.offset+this.stride[0]*_,M):this.data[this.offset+this.stride[0]*_]=M},"set"),y.get=t(function(_){return g==="generic"?this.data.get(this.offset+this.stride[0]*_):this.data[this.offset+this.stride[0]*_]},"get"),y.index=t(function(_){return this.offset+this.stride[0]*_},"index"),y.hi=t(function(_){return new m(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,this.stride[0],this.offset)},"hi"),y.lo=t(function(_){var M=this.offset,w=0,x=this.shape[0],A=this.stride[0];return typeof _=="number"&&_>=0&&(w=_|0,M+=A*w,x-=w),new m(this.data,x,A,M)},"lo"),y.step=t(function(_){var M=this.shape[0],w=this.stride[0],x=this.offset,A=0,S=Math.ceil;return typeof _=="number"&&(A=_|0,A<0?(x+=w*(M-1),M=S(-M/A)):M=S(M/A),w*=A),new m(this.data,M,w,x)},"step"),y.transpose=t(function(_){_=_===void 0?0:_|0;var M=this.shape,w=this.stride;return new m(this.data,M[_],w[_],this.offset)},"transpose"),y.pick=t(function(_){var M=[],w=[],x=this.offset;typeof _=="number"&&_>=0?x=x+this.stride[0]*_|0:(M.push(this.shape[0]),w.push(this.stride[0]));var A=p[M.length+1];return A(this.data,M,w,x)},"pick"),t(function(_,M,w,x){return new m(_,M[0],w[0],x)},"construct")},2:function(g,p,b){function m(T,_,M,w,x,A){this.data=T,this.shape=[_,M],this.stride=[w,x],this.offset=A|0}t(m,"View");var y=m.prototype;return y.dtype=g,y.dimension=2,Object.defineProperty(y,"size",{get:t(function(){return this.shape[0]*this.shape[1]},"size")}),Object.defineProperty(y,"order",{get:t(function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]},"order")}),y.set=t(function(_,M,w){return g==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*M,w):this.data[this.offset+this.stride[0]*_+this.stride[1]*M]=w},"set"),y.get=t(function(_,M){return g==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*M):this.data[this.offset+this.stride[0]*_+this.stride[1]*M]},"get"),y.index=t(function(_,M){return this.offset+this.stride[0]*_+this.stride[1]*M},"index"),y.hi=t(function(_,M){return new m(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},"hi"),y.lo=t(function(_,M){var w=this.offset,x=0,A=this.shape[0],S=this.shape[1],k=this.stride[0],L=this.stride[1];return typeof _=="number"&&_>=0&&(x=_|0,w+=k*x,A-=x),typeof M=="number"&&M>=0&&(x=M|0,w+=L*x,S-=x),new m(this.data,A,S,k,L,w)},"lo"),y.step=t(function(_,M){var w=this.shape[0],x=this.shape[1],A=this.stride[0],S=this.stride[1],k=this.offset,L=0,P=Math.ceil;return typeof _=="number"&&(L=_|0,L<0?(k+=A*(w-1),w=P(-w/L)):w=P(w/L),A*=L),typeof M=="number"&&(L=M|0,L<0?(k+=S*(x-1),x=P(-x/L)):x=P(x/L),S*=L),new m(this.data,w,x,A,S,k)},"step"),y.transpose=t(function(_,M){_=_===void 0?0:_|0,M=M===void 0?1:M|0;var w=this.shape,x=this.stride;return new m(this.data,w[_],w[M],x[_],x[M],this.offset)},"transpose"),y.pick=t(function(_,M){var w=[],x=[],A=this.offset;typeof _=="number"&&_>=0?A=A+this.stride[0]*_|0:(w.push(this.shape[0]),x.push(this.stride[0])),typeof M=="number"&&M>=0?A=A+this.stride[1]*M|0:(w.push(this.shape[1]),x.push(this.stride[1]));var S=p[w.length+1];return S(this.data,w,x,A)},"pick"),t(function(_,M,w,x){return new m(_,M[0],M[1],w[0],w[1],x)},"construct")},3:function(g,p,b){function m(T,_,M,w,x,A,S,k){this.data=T,this.shape=[_,M,w],this.stride=[x,A,S],this.offset=k|0}t(m,"View");var y=m.prototype;return y.dtype=g,y.dimension=3,Object.defineProperty(y,"size",{get:t(function(){return this.shape[0]*this.shape[1]*this.shape[2]},"size")}),Object.defineProperty(y,"order",{get:t(function(){var _=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return _>M?M>w?[2,1,0]:_>w?[1,2,0]:[1,0,2]:_>w?[2,0,1]:w>M?[0,1,2]:[0,2,1]},"order")}),y.set=t(function(_,M,w,x){return g==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w,x):this.data[this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w]=x},"set"),y.get=t(function(_,M,w){return g==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w):this.data[this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w]},"get"),y.index=t(function(_,M,w){return this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w},"index"),y.hi=t(function(_,M,w){return new m(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},"hi"),y.lo=t(function(_,M,w){var x=this.offset,A=0,S=this.shape[0],k=this.shape[1],L=this.shape[2],P=this.stride[0],D=this.stride[1],B=this.stride[2];return typeof _=="number"&&_>=0&&(A=_|0,x+=P*A,S-=A),typeof M=="number"&&M>=0&&(A=M|0,x+=D*A,k-=A),typeof w=="number"&&w>=0&&(A=w|0,x+=B*A,L-=A),new m(this.data,S,k,L,P,D,B,x)},"lo"),y.step=t(function(_,M,w){var x=this.shape[0],A=this.shape[1],S=this.shape[2],k=this.stride[0],L=this.stride[1],P=this.stride[2],D=this.offset,B=0,z=Math.ceil;return typeof _=="number"&&(B=_|0,B<0?(D+=k*(x-1),x=z(-x/B)):x=z(x/B),k*=B),typeof M=="number"&&(B=M|0,B<0?(D+=L*(A-1),A=z(-A/B)):A=z(A/B),L*=B),typeof w=="number"&&(B=w|0,B<0?(D+=P*(S-1),S=z(-S/B)):S=z(S/B),P*=B),new m(this.data,x,A,S,k,L,P,D)},"step"),y.transpose=t(function(_,M,w){_=_===void 0?0:_|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0;var x=this.shape,A=this.stride;return new m(this.data,x[_],x[M],x[w],A[_],A[M],A[w],this.offset)},"transpose"),y.pick=t(function(_,M,w){var x=[],A=[],S=this.offset;typeof _=="number"&&_>=0?S=S+this.stride[0]*_|0:(x.push(this.shape[0]),A.push(this.stride[0])),typeof M=="number"&&M>=0?S=S+this.stride[1]*M|0:(x.push(this.shape[1]),A.push(this.stride[1])),typeof w=="number"&&w>=0?S=S+this.stride[2]*w|0:(x.push(this.shape[2]),A.push(this.stride[2]));var k=p[x.length+1];return k(this.data,x,A,S)},"pick"),t(function(_,M,w,x){return new m(_,M[0],M[1],M[2],w[0],w[1],w[2],x)},"construct")},4:function(g,p,b){function m(T,_,M,w,x,A,S,k,L,P){this.data=T,this.shape=[_,M,w,x],this.stride=[A,S,k,L],this.offset=P|0}t(m,"View");var y=m.prototype;return y.dtype=g,y.dimension=4,Object.defineProperty(y,"size",{get:t(function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]},"size")}),Object.defineProperty(y,"order",{get:b}),y.set=t(function(_,M,w,x,A){return g==="generic"?this.data.set(this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w+this.stride[3]*x,A):this.data[this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w+this.stride[3]*x]=A},"set"),y.get=t(function(_,M,w,x){return g==="generic"?this.data.get(this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w+this.stride[3]*x):this.data[this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w+this.stride[3]*x]},"get"),y.index=t(function(_,M,w,x){return this.offset+this.stride[0]*_+this.stride[1]*M+this.stride[2]*w+this.stride[3]*x},"index"),y.hi=t(function(_,M,w,x){return new m(this.data,typeof _!="number"||_<0?this.shape[0]:_|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof w!="number"||w<0?this.shape[2]:w|0,typeof x!="number"||x<0?this.shape[3]:x|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},"hi"),y.lo=t(function(_,M,w,x){var A=this.offset,S=0,k=this.shape[0],L=this.shape[1],P=this.shape[2],D=this.shape[3],B=this.stride[0],z=this.stride[1],R=this.stride[2],F=this.stride[3];return typeof _=="number"&&_>=0&&(S=_|0,A+=B*S,k-=S),typeof M=="number"&&M>=0&&(S=M|0,A+=z*S,L-=S),typeof w=="number"&&w>=0&&(S=w|0,A+=R*S,P-=S),typeof x=="number"&&x>=0&&(S=x|0,A+=F*S,D-=S),new m(this.data,k,L,P,D,B,z,R,F,A)},"lo"),y.step=t(function(_,M,w,x){var A=this.shape[0],S=this.shape[1],k=this.shape[2],L=this.shape[3],P=this.stride[0],D=this.stride[1],B=this.stride[2],z=this.stride[3],R=this.offset,F=0,O=Math.ceil;return typeof _=="number"&&(F=_|0,F<0?(R+=P*(A-1),A=O(-A/F)):A=O(A/F),P*=F),typeof M=="number"&&(F=M|0,F<0?(R+=D*(S-1),S=O(-S/F)):S=O(S/F),D*=F),typeof w=="number"&&(F=w|0,F<0?(R+=B*(k-1),k=O(-k/F)):k=O(k/F),B*=F),typeof x=="number"&&(F=x|0,F<0?(R+=z*(L-1),L=O(-L/F)):L=O(L/F),z*=F),new m(this.data,A,S,k,L,P,D,B,z,R)},"step"),y.transpose=t(function(_,M,w,x){_=_===void 0?0:_|0,M=M===void 0?1:M|0,w=w===void 0?2:w|0,x=x===void 0?3:x|0;var A=this.shape,S=this.stride;return new m(this.data,A[_],A[M],A[w],A[x],S[_],S[M],S[w],S[x],this.offset)},"transpose"),y.pick=t(function(_,M,w,x){var A=[],S=[],k=this.offset;typeof _=="number"&&_>=0?k=k+this.stride[0]*_|0:(A.push(this.shape[0]),S.push(this.stride[0])),typeof M=="number"&&M>=0?k=k+this.stride[1]*M|0:(A.push(this.shape[1]),S.push(this.stride[1])),typeof w=="number"&&w>=0?k=k+this.stride[2]*w|0:(A.push(this.shape[2]),S.push(this.stride[2])),typeof x=="number"&&x>=0?k=k+this.stride[3]*x|0:(A.push(this.shape[3]),S.push(this.stride[3]));var L=p[A.length+1];return L(this.data,A,S,k)},"pick"),t(function(_,M,w,x){return new m(_,M[0],M[1],M[2],M[3],w[0],w[1],w[2],w[3],x)},"construct")},5:t(function(p,b,m){function y(_,M,w,x,A,S,k,L,P,D,B,z){this.data=_,this.shape=[M,w,x,A,S],this.stride=[k,L,P,D,B],this.offset=z|0}t(y,"View");var T=y.prototype;return T.dtype=p,T.dimension=5,Object.defineProperty(T,"size",{get:t(function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]},"size")}),Object.defineProperty(T,"order",{get:m}),T.set=t(function(M,w,x,A,S,k){return p==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*x+this.stride[3]*A+this.stride[4]*S,k):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*x+this.stride[3]*A+this.stride[4]*S]=k},"set"),T.get=t(function(M,w,x,A,S){return p==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*x+this.stride[3]*A+this.stride[4]*S):this.data[this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*x+this.stride[3]*A+this.stride[4]*S]},"get"),T.index=t(function(M,w,x,A,S){return this.offset+this.stride[0]*M+this.stride[1]*w+this.stride[2]*x+this.stride[3]*A+this.stride[4]*S},"index"),T.hi=t(function(M,w,x,A,S){return new y(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof w!="number"||w<0?this.shape[1]:w|0,typeof x!="number"||x<0?this.shape[2]:x|0,typeof A!="number"||A<0?this.shape[3]:A|0,typeof S!="number"||S<0?this.shape[4]:S|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},"hi"),T.lo=t(function(M,w,x,A,S){var k=this.offset,L=0,P=this.shape[0],D=this.shape[1],B=this.shape[2],z=this.shape[3],R=this.shape[4],F=this.stride[0],O=this.stride[1],q=this.stride[2],H=this.stride[3],j=this.stride[4];return typeof M=="number"&&M>=0&&(L=M|0,k+=F*L,P-=L),typeof w=="number"&&w>=0&&(L=w|0,k+=O*L,D-=L),typeof x=="number"&&x>=0&&(L=x|0,k+=q*L,B-=L),typeof A=="number"&&A>=0&&(L=A|0,k+=H*L,z-=L),typeof S=="number"&&S>=0&&(L=S|0,k+=j*L,R-=L),new y(this.data,P,D,B,z,R,F,O,q,H,j,k)},"lo"),T.step=t(function(M,w,x,A,S){var k=this.shape[0],L=this.shape[1],P=this.shape[2],D=this.shape[3],B=this.shape[4],z=this.stride[0],R=this.stride[1],F=this.stride[2],O=this.stride[3],q=this.stride[4],H=this.offset,j=0,X=Math.ceil;return typeof M=="number"&&(j=M|0,j<0?(H+=z*(k-1),k=X(-k/j)):k=X(k/j),z*=j),typeof w=="number"&&(j=w|0,j<0?(H+=R*(L-1),L=X(-L/j)):L=X(L/j),R*=j),typeof x=="number"&&(j=x|0,j<0?(H+=F*(P-1),P=X(-P/j)):P=X(P/j),F*=j),typeof A=="number"&&(j=A|0,j<0?(H+=O*(D-1),D=X(-D/j)):D=X(D/j),O*=j),typeof S=="number"&&(j=S|0,j<0?(H+=q*(B-1),B=X(-B/j)):B=X(B/j),q*=j),new y(this.data,k,L,P,D,B,z,R,F,O,q,H)},"step"),T.transpose=t(function(M,w,x,A,S){M=M===void 0?0:M|0,w=w===void 0?1:w|0,x=x===void 0?2:x|0,A=A===void 0?3:A|0,S=S===void 0?4:S|0;var k=this.shape,L=this.stride;return new y(this.data,k[M],k[w],k[x],k[A],k[S],L[M],L[w],L[x],L[A],L[S],this.offset)},"transpose"),T.pick=t(function(M,w,x,A,S){var k=[],L=[],P=this.offset;typeof M=="number"&&M>=0?P=P+this.stride[0]*M|0:(k.push(this.shape[0]),L.push(this.stride[0])),typeof w=="number"&&w>=0?P=P+this.stride[1]*w|0:(k.push(this.shape[1]),L.push(this.stride[1])),typeof x=="number"&&x>=0?P=P+this.stride[2]*x|0:(k.push(this.shape[2]),L.push(this.stride[2])),typeof A=="number"&&A>=0?P=P+this.stride[3]*A|0:(k.push(this.shape[3]),L.push(this.stride[3])),typeof S=="number"&&S>=0?P=P+this.stride[4]*S|0:(k.push(this.shape[4]),L.push(this.stride[4]));var D=b[k.length+1];return D(this.data,k,L,P)},"pick"),t(function(M,w,x,A){return new y(M,w[0],w[1],w[2],w[3],w[4],x[0],x[1],x[2],x[3],x[4],A)},"construct")},"anonymous")};function h(g,p){var b=p===-1?"T":String(p),m=f[b];return p===-1?m(g):p===0?m(g,c[g][0]):m(g,c[g],u)}t(h,"compileConstructor");function v(g){if(o(g))return"buffer";if(a)switch(Object.prototype.toString.call(g)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(g)?"array":"generic"}t(v,"arrayDType");var c={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function d(g,p,b,m){if(g===void 0){var x=c.array[0];return x([])}else typeof g=="number"&&(g=[g]);p===void 0&&(p=[g.length]);var y=p.length;if(b===void 0){b=new Array(y);for(var T=y-1,_=1;T>=0;--T)b[T]=_,_*=p[T]}if(m===void 0){m=0;for(var T=0;T<y;++T)b[T]<0&&(m-=(p[T]-1)*b[T])}for(var M=v(g),w=c[M];w.length<=y+1;)w.push(h(M,w.length-1));var x=w[y+1];return x(g,p,b,m)}t(d,"wrappedNDArrayCtor"),i.exports=d},{"is-buffer":237}],260:[function(n,i,s){var o=n("double-bits"),a=Math.pow(2,-1074),l=-1>>>0;i.exports=u;function u(f,h){if(isNaN(f)||isNaN(h))return NaN;if(f===h)return f;if(f===0)return h<0?-a:a;var v=o.hi(f),c=o.lo(f);return h>f==f>0?c===l?(v+=1,c=0):c+=1:c===0?(c=l,v-=1):c-=1,o.pack(c,v)}t(u,"nextafter")},{"double-bits":64}],261:[function(n,i,s){var o=1e-6,a=1e-6;s.vertexNormals=function(l,u,f){for(var h=u.length,v=new Array(h),c=f===void 0?o:f,d=0;d<h;++d)v[d]=[0,0,0];for(var d=0;d<l.length;++d)for(var g=l[d],p=0,b=g[g.length-1],m=g[0],y=0;y<g.length;++y){p=b,b=m,m=g[(y+1)%g.length];for(var T=u[p],_=u[b],M=u[m],w=new Array(3),x=0,A=new Array(3),S=0,k=0;k<3;++k)w[k]=T[k]-_[k],x+=w[k]*w[k],A[k]=M[k]-_[k],S+=A[k]*A[k];if(x*S>c)for(var L=v[b],P=1/Math.sqrt(x*S),k=0;k<3;++k){var D=(k+1)%3,B=(k+2)%3;L[k]+=P*(A[D]*w[B]-A[B]*w[D])}}for(var d=0;d<h;++d){for(var L=v[d],z=0,k=0;k<3;++k)z+=L[k]*L[k];if(z>c)for(var P=1/Math.sqrt(z),k=0;k<3;++k)L[k]*=P;else for(var k=0;k<3;++k)L[k]=0}return v},s.faceNormals=function(l,u,f){for(var h=l.length,v=new Array(h),c=f===void 0?a:f,d=0;d<h;++d){for(var g=l[d],p=new Array(3),b=0;b<3;++b)p[b]=u[g[b]];for(var m=new Array(3),y=new Array(3),b=0;b<3;++b)m[b]=p[1][b]-p[0][b],y[b]=p[2][b]-p[0][b];for(var T=new Array(3),_=0,b=0;b<3;++b){var M=(b+1)%3,w=(b+2)%3;T[b]=m[M]*y[w]-m[w]*y[M],_+=T[b]*T[b]}_>c?_=1/Math.sqrt(_):_=0;for(var b=0;b<3;++b)T[b]*=_;v[d]=T}return v}},{}],262:[function(n,i,s){i.exports=o;function o(a,l,u,f,h,v,c,d,g,p){var b=l+v+p;if(m>0){var m=Math.sqrt(b+1);a[0]=.5*(c-g)/m,a[1]=.5*(d-f)/m,a[2]=.5*(u-v)/m,a[3]=.5*m}else{var y=Math.max(l,v,p),m=Math.sqrt(2*y-b+1);l>=y?(a[0]=.5*m,a[1]=.5*(h+u)/m,a[2]=.5*(d+f)/m,a[3]=.5*(c-g)/m):v>=y?(a[0]=.5*(u+h)/m,a[1]=.5*m,a[2]=.5*(g+c)/m,a[3]=.5*(d-f)/m):(a[0]=.5*(f+d)/m,a[1]=.5*(c+g)/m,a[2]=.5*m,a[3]=.5*(u-h)/m)}return a}t(o,"quatFromFrame")},{}],263:[function(n,i,s){i.exports=p;var o=n("filtered-vector"),a=n("gl-mat4/lookAt"),l=n("gl-mat4/fromQuat"),u=n("gl-mat4/invert"),f=n("./lib/quatFromFrame");function h(b,m,y){return Math.sqrt(Math.pow(b,2)+Math.pow(m,2)+Math.pow(y,2))}t(h,"len3");function v(b,m,y,T){return Math.sqrt(Math.pow(b,2)+Math.pow(m,2)+Math.pow(y,2)+Math.pow(T,2))}t(v,"len4");function c(b,m){var y=m[0],T=m[1],_=m[2],M=m[3],w=v(y,T,_,M);w>1e-6?(b[0]=y/w,b[1]=T/w,b[2]=_/w,b[3]=M/w):(b[0]=b[1]=b[2]=0,b[3]=1)}t(c,"normalize4");function d(b,m,y){this.radius=o([y]),this.center=o(m),this.rotation=o(b),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}t(d,"OrbitCameraController");var g=d.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(b){this.radius.curve(b),this.center.curve(b),this.rotation.curve(b);var m=this.computedRotation;c(m,m);var y=this.computedMatrix;l(y,m);var T=this.computedCenter,_=this.computedEye,M=this.computedUp,w=Math.exp(this.computedRadius[0]);_[0]=T[0]+w*y[2],_[1]=T[1]+w*y[6],_[2]=T[2]+w*y[10],M[0]=y[1],M[1]=y[5],M[2]=y[9];for(var x=0;x<3;++x){for(var A=0,S=0;S<3;++S)A+=y[x+4*S]*_[S];y[12+x]=-A}},g.getMatrix=function(b,m){this.recalcMatrix(b);var y=this.computedMatrix;if(m){for(var T=0;T<16;++T)m[T]=y[T];return m}return y},g.idle=function(b){this.center.idle(b),this.radius.idle(b),this.rotation.idle(b)},g.flush=function(b){this.center.flush(b),this.radius.flush(b),this.rotation.flush(b)},g.pan=function(b,m,y,T){m=m||0,y=y||0,T=T||0,this.recalcMatrix(b);var _=this.computedMatrix,M=_[1],w=_[5],x=_[9],A=h(M,w,x);M/=A,w/=A,x/=A;var S=_[0],k=_[4],L=_[8],P=S*M+k*w+L*x;S-=M*P,k-=w*P,L-=x*P;var D=h(S,k,L);S/=D,k/=D,L/=D,_[2],_[6],_[10];var B=S*m+M*y,z=k*m+w*y,R=L*m+x*y;this.center.move(b,B,z,R);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+T),this.radius.set(b,Math.log(F))},g.rotate=function(b,m,y,T){this.recalcMatrix(b),m=m||0,y=y||0;var _=this.computedMatrix,M=_[0],w=_[4],x=_[8],A=_[1],S=_[5],k=_[9],L=_[2],P=_[6],D=_[10],B=m*M+y*A,z=m*w+y*S,R=m*x+y*k,F=-(P*R-D*z),O=-(D*B-L*R),q=-(L*z-P*B),H=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(O,2)-Math.pow(q,2))),j=v(F,O,q,H);j>1e-6?(F/=j,O/=j,q/=j,H/=j):(F=O=q=0,H=1);var X=this.computedRotation,G=X[0],$=X[1],te=X[2],ee=X[3],ie=G*H+ee*F+$*q-te*O,se=$*H+ee*O+te*F-G*q,W=te*H+ee*q+G*O-$*F,ne=ee*H-G*F-$*O-te*q;if(T){F=L,O=P,q=D;var he=Math.sin(T)/h(F,O,q);F*=he,O*=he,q*=he,H=Math.cos(m),ie=ie*H+ne*F+se*q-W*O,se=se*H+ne*O+W*F-ie*q,W=W*H+ne*q+ie*O-se*F,ne=ne*H-ie*F-se*O-W*q}var re=v(ie,se,W,ne);re>1e-6?(ie/=re,se/=re,W/=re,ne/=re):(ie=se=W=0,ne=1),this.rotation.set(b,ie,se,W,ne)},g.lookAt=function(b,m,y,T){this.recalcMatrix(b),y=y||this.computedCenter,m=m||this.computedEye,T=T||this.computedUp;var _=this.computedMatrix;a(_,m,y,T);var M=this.computedRotation;f(M,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),c(M,M),this.rotation.set(b,M[0],M[1],M[2],M[3]);for(var w=0,x=0;x<3;++x)w+=Math.pow(y[x]-m[x],2);this.radius.set(b,.5*Math.log(Math.max(w,1e-6))),this.center.set(b,y[0],y[1],y[2])},g.translate=function(b,m,y,T){this.center.move(b,m||0,y||0,T||0)},g.setMatrix=function(b,m){var y=this.computedRotation;f(y,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),c(y,y),this.rotation.set(b,y[0],y[1],y[2],y[3]);var T=this.computedMatrix;u(T,m);var _=T[15];if(Math.abs(_)>1e-6){var M=T[12]/_,w=T[13]/_,x=T[14]/_;this.recalcMatrix(b);var A=Math.exp(this.computedRadius[0]);this.center.set(b,M-T[2]*A,w-T[6]*A,x-T[10]*A),this.radius.idle(b)}else this.center.idle(b),this.radius.idle(b)},g.setDistance=function(b,m){m>0&&this.radius.set(b,Math.log(m))},g.setDistanceLimits=function(b,m){b>0?b=Math.log(b):b=-1/0,m>0?m=Math.log(m):m=1/0,m=Math.max(m,b),this.radius.bounds[0][0]=b,this.radius.bounds[1][0]=m},g.getDistanceLimits=function(b){var m=this.radius.bounds;return b?(b[0]=Math.exp(m[0][0]),b[1]=Math.exp(m[1][0]),b):[Math.exp(m[0][0]),Math.exp(m[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(b){var m=this.lastT(),y=b.center;y&&this.center.set(m,y[0],y[1],y[2]);var T=b.rotation;T&&this.rotation.set(m,T[0],T[1],T[2],T[3]);var _=b.distance;_&&_>0&&this.radius.set(m,Math.log(_)),this.setDistanceLimits(b.zoomMin,b.zoomMax)};function p(b){b=b||{};var m=b.center||[0,0,0],y=b.rotation||[0,0,0,1],T=b.radius||1;m=[].slice.call(m,0,3),y=[].slice.call(y,0,4),c(y,y);var _=new d(y,m,Math.log(T));return _.setDistanceLimits(b.zoomMin,b.zoomMax),("eye"in b||"up"in b)&&_.lookAt(0,b.eye,b.center,b.up),_}t(p,"createOrbitController")},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(n,i,s){var o=n("repeat-string");i.exports=t(function(l,u,f){return f=typeof f<"u"?f+"":" ",o(f,u)+l},"padLeft")},{"repeat-string":277}],265:[function(n,i,s){i.exports=t(function(a,l){l||(l=[0,""]),a=String(a);var u=parseFloat(a,10);return l[0]=u,l[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",l},"parseUnit")},{}],266:[function(n,i,s){i.exports=a;var o=n("compare-angle");function a(l,u){for(var f=u.length|0,h=l.length,v=[new Array(f),new Array(f)],c=0;c<f;++c)v[0][c]=[],v[1][c]=[];for(var c=0;c<h;++c){var d=l[c];v[0][d[0]].push(d),v[1][d[1]].push(d)}for(var g=[],c=0;c<f;++c)v[0][c].length+v[1][c].length===0&&g.push([c]);function p(w,x){var A=v[x][w[x]];A.splice(A.indexOf(w),1)}t(p,"cut");function b(w,x,A){for(var S,k,L,P=0;P<2;++P)if(v[P][x].length>0){S=v[P][x][0],L=P;break}k=S[L^1];for(var D=0;D<2;++D)for(var B=v[D][x],z=0;z<B.length;++z){var R=B[z],F=R[D^1],O=o(u[w],u[x],u[k],u[F]);O>0&&(S=R,k=F,L=D)}return A||S&&p(S,L),k}t(b,"next");function m(w,x){var A=v[x][w][0],S=[w];p(A,x);for(var k=A[x^1];;){for(;k!==w;)S.push(k),k=b(S[S.length-2],k,!1);if(v[0][w].length+v[1][w].length===0)break;var L=S[S.length-1],P=w,D=S[1],B=b(L,P,!0);if(o(u[L],u[P],u[D],u[B])<0)break;S.push(w),k=b(L,P)}return S}t(m,"extractCycle");function y(w,x){return x[1]===x[x.length-1]}t(y,"shouldGlue");for(var c=0;c<f;++c)for(var T=0;T<2;++T){for(var _=[];v[T][c].length>0;){v[0][c].length;var M=m(c,T);y(_,M)?_.push.apply(_,M):(_.length>0&&g.push(_),_=M)}_.length>0&&g.push(_)}return g}t(a,"planarDual")},{"compare-angle":54}],267:[function(n,i,s){i.exports=a;var o=n("edges-to-adjacency-list");function a(l,u){for(var f=o(l,u.length),h=new Array(u.length),v=new Array(u.length),c=[],d=0;d<u.length;++d){var g=f[d].length;v[d]=g,h[d]=!0,g<=1&&c.push(d)}for(;c.length>0;){var p=c.pop();h[p]=!1;for(var b=f[p],d=0;d<b.length;++d){var m=b[d];--v[m]===0&&c.push(m)}}for(var y=new Array(u.length),T=[],d=0;d<u.length;++d)if(h[d]){var p=T.length;y[d]=p,T.push(u[d])}else y[d]=-1;for(var _=[],d=0;d<l.length;++d){var M=l[d];h[M[0]]&&h[M[1]]&&_.push([y[M[0]],y[M[1]]])}return[_,T]}t(a,"trimLeaves")},{"edges-to-adjacency-list":66}],268:[function(n,i,s){i.exports=g;var o=n("edges-to-adjacency-list"),a=n("planar-dual"),l=n("point-in-big-polygon"),u=n("two-product"),f=n("robust-sum"),h=n("uniq"),v=n("./lib/trim-leaves");function c(p,b){for(var m=new Array(p),y=0;y<p;++y)m[y]=b;return m}t(c,"makeArray");function d(p){for(var b=new Array(p),m=0;m<p;++m)b[m]=[];return b}t(d,"makeArrayOfArrays");function g(p,b){var ne=v(p,b);p=ne[0],b=ne[1];var m=b.length;p.length;for(var y=o(p,b.length),T=0;T<m;++T)if(y[T].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=a(p,b);function M(Te){for(var me=Te.length,pe=[0],oe=0;oe<me;++oe){var de=b[Te[oe]],ye=b[Te[(oe+1)%me]],we=u(-de[0],de[1]),Ee=u(-de[0],ye[1]),De=u(ye[0],de[1]),Fe=u(ye[0],ye[1]);pe=f(pe,f(f(we,Ee),f(De,Fe)))}return pe[pe.length-1]>0}t(M,"ccw"),_=_.filter(M);for(var w=_.length,x=new Array(w),A=new Array(w),T=0;T<w;++T){x[T]=T;var S=new Array(w),k=_[T].map(function(me){return b[me]}),L=l([k]),P=0;e:for(var D=0;D<w;++D)if(S[D]=0,T!==D){for(var B=_[D],z=B.length,R=0;R<z;++R){var F=L(b[B[R]]);if(F!==0){F<0&&(S[D]=1,P+=1);continue e}}S[D]=1,P+=1}A[T]=[P,T,S]}A.sort(function(Te,me){return me[0]-Te[0]});for(var T=0;T<w;++T)for(var S=A[T],O=S[1],q=S[2],D=0;D<w;++D)q[D]&&(x[D]=O);for(var H=d(w),T=0;T<w;++T)H[T].push(x[T]),H[x[T]].push(T);for(var j={},X=c(m,!1),T=0;T<w;++T)for(var B=_[T],z=B.length,D=0;D<z;++D){var G=B[D],$=B[(D+1)%z],te=Math.min(G,$)+":"+Math.max(G,$);if(te in j){var ee=j[te];H[ee].push(T),H[T].push(ee),X[G]=X[$]=!0}else j[te]=T}function ie(Te){for(var me=Te.length,pe=0;pe<me;++pe)if(!X[Te[pe]])return!1;return!0}t(ie,"sharedBoundary");for(var se=[],W=c(w,-1),T=0;T<w;++T)x[T]===T&&!ie(_[T])?(se.push(T),W[T]=0):W[T]=-1;for(var ne=[];se.length>0;){var he=se.pop(),re=H[he];h(re,function(Te,me){return Te-me});var ae=re.length,fe=W[he],ce;if(fe===0){var B=_[he];ce=[B]}for(var T=0;T<ae;++T){var xe=re[T];if(!(W[xe]>=0)&&(W[xe]=fe^1,se.push(xe),fe===0)){var B=_[xe];ie(B)||(B.reverse(),ce.push(B))}}fe===0&&ne.push(ce)}return ne}t(g,"planarGraphToPolyline")},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(n,i,s){i.exports=b;var o=n("robust-orientation")[3],a=n("slab-decomposition"),l=n("interval-tree-1d"),u=n("binary-search-bounds");function f(){return!0}t(f,"visitInterval");function h(m){return function(y,T){var _=m[y];return _?!!_.queryPoint(T,f):!1}}t(h,"intervalSearch");function v(m){for(var y={},T=0;T<m.length;++T){var _=m[T],M=_[0][0],w=_[0][1],x=_[1][1],A=[Math.min(w,x),Math.max(w,x)];M in y?y[M].push(A):y[M]=[A]}for(var S={},k=Object.keys(y),T=0;T<k.length;++T){var L=y[k[T]];S[k[T]]=l(L)}return h(S)}t(v,"buildVerticalIndex");function c(m,y){return function(T){var _=u.le(y,T[0]);if(_<0)return 1;var M=m[_];if(!M)if(_>0&&y[_]===T[0])M=m[_-1];else return 1;for(var w=1;M;){var x=M.key,A=o(T,x[0],x[1]);if(x[0][0]<x[1][0])if(A<0)M=M.left;else if(A>0)w=-1,M=M.right;else return 0;else if(A>0)M=M.left;else if(A<0)w=1,M=M.right;else return 0}return w}}t(c,"buildSlabSearch");function d(m){return 1}t(d,"classifyEmpty");function g(m){return t(function(T){return m(T[0],T[1])?0:1},"classify")}t(g,"createClassifyVertical");function p(m,y){return t(function(_){return m(_[0],_[1])?0:y(_)},"classify")}t(p,"createClassifyPointDegen");function b(m){for(var y=m.length,T=[],_=[],M=0;M<y;++M)for(var w=m[M],x=w.length,A=x-1,S=0;S<x;A=S++){var k=w[A],L=w[S];k[0]===L[0]?_.push([k,L]):T.push([k,L])}if(T.length===0)return _.length===0?d:g(v(_));var P=a(T),D=c(P.slabs,P.coordinates);return _.length===0?D:p(v(_),D)}t(b,"preprocessPolygon")},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(n,i,s){var o=new Float64Array(4),a=new Float64Array(4),l=new Float64Array(4);function u(f,h,v,c,d){o.length<c.length&&(o=new Float64Array(c.length),a=new Float64Array(c.length),l=new Float64Array(c.length));for(var g=0;g<c.length;++g)o[g]=f[g]-c[g],a[g]=h[g]-f[g],l[g]=v[g]-f[g];for(var p=0,b=0,m=0,y=0,T=0,_=0,g=0;g<c.length;++g){var M=a[g],w=l[g],x=o[g];p+=M*M,b+=M*w,m+=w*w,y+=x*M,T+=x*w,_+=x*x}var A=Math.abs(p*m-b*b),S=b*T-m*y,k=b*y-p*T,L;if(S+k<=A)if(S<0)k<0&&y<0?(k=0,-y>=p?(S=1,L=p+2*y+_):(S=-y/p,L=y*S+_)):(S=0,T>=0?(k=0,L=_):-T>=m?(k=1,L=m+2*T+_):(k=-T/m,L=T*k+_));else if(k<0)k=0,y>=0?(S=0,L=_):-y>=p?(S=1,L=p+2*y+_):(S=-y/p,L=y*S+_);else{var P=1/A;S*=P,k*=P,L=S*(p*S+b*k+2*y)+k*(b*S+m*k+2*T)+_}else{var D,B,z,R;S<0?(D=b+y,B=m+T,B>D?(z=B-D,R=p-2*b+m,z>=R?(S=1,k=0,L=p+2*y+_):(S=z/R,k=1-S,L=S*(p*S+b*k+2*y)+k*(b*S+m*k+2*T)+_)):(S=0,B<=0?(k=1,L=m+2*T+_):T>=0?(k=0,L=_):(k=-T/m,L=T*k+_))):k<0?(D=b+T,B=p+y,B>D?(z=B-D,R=p-2*b+m,z>=R?(k=1,S=0,L=m+2*T+_):(k=z/R,S=1-k,L=S*(p*S+b*k+2*y)+k*(b*S+m*k+2*T)+_)):(k=0,B<=0?(S=1,L=p+2*y+_):y>=0?(S=0,L=_):(S=-y/p,L=y*S+_))):(z=m+T-b-y,z<=0?(S=0,k=1,L=m+2*T+_):(R=p-2*b+m,z>=R?(S=1,k=0,L=p+2*y+_):(S=z/R,k=1-S,L=S*(p*S+b*k+2*y)+k*(b*S+m*k+2*T)+_)))}for(var F=1-S-k,g=0;g<c.length;++g)d[g]=F*f[g]+S*h[g]+k*v[g];return L<0?0:L}t(u,"closestPoint2d"),i.exports=u},{}],271:[function(n,i,s){i.exports=n("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(n,i,s){var o=n("big-rat/add");i.exports=a;function a(l,u){for(var f=l.length,h=new Array(f),v=0;v<f;++v)h[v]=o(l[v],u[v]);return h}t(a,"add")},{"big-rat/add":15}],273:[function(n,i,s){i.exports=a;var o=n("big-rat");function a(l){for(var u=new Array(l.length),f=0;f<l.length;++f)u[f]=o(l[f]);return u}t(a,"float2rat")},{"big-rat":18}],274:[function(n,i,s){var o=n("big-rat"),a=n("big-rat/mul");i.exports=l;function l(u,f){for(var h=o(f),v=u.length,c=new Array(v),d=0;d<v;++d)c[d]=a(u[d],h);return c}t(l,"muls")},{"big-rat":18,"big-rat/mul":27}],275:[function(n,i,s){var o=n("big-rat/sub");i.exports=a;function a(l,u){for(var f=l.length,h=new Array(f),v=0;v<f;++v)h[v]=o(l[v],u[v]);return h}t(a,"sub")},{"big-rat/sub":29}],276:[function(n,i,s){var o=n("compare-cell"),a=n("compare-oriented-cell"),l=n("cell-orientation");i.exports=u;function u(f){f.sort(a);for(var h=f.length,v=0,c=0;c<h;++c){var d=f[c],g=l(d);if(g!==0){if(v>0){var p=f[v-1];if(o(d,p)===0&&l(p)!==g){v-=1;continue}}f[v++]=d}}return f.length=v,f}t(u,"reduceCellComplex")},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(n,i,s){var o="",a;i.exports=l;function l(u,f){if(typeof u!="string")throw new TypeError("expected a string");if(f===1)return u;if(f===2)return u+u;var h=u.length*f;if(a!==u||typeof a>"u")a=u,o="";else if(o.length>=h)return o.substr(0,h);for(;h>o.length&&f>1;)f&1&&(o+=u),f>>=1,u+=u;return o+=u,o=o.substr(0,h),o}t(l,"repeat")},{}],278:[function(n,i,s){(function(o){(function(){i.exports=o.performance&&o.performance.now?t(function(){return performance.now()},"now"):Date.now||t(function(){return+new Date},"now")}).call(this)}).call(this,typeof xs<"u"?xs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(n,i,s){i.exports=o;function o(a){for(var l=a.length,u=a[a.length-1],f=l,h=l-2;h>=0;--h){var v=u,c=a[h];u=v+c;var d=u-v,g=c-d;g&&(a[--f]=u,u=g)}for(var p=0,h=f;h<l;++h){var v=a[h],c=u;u=v+c;var d=u-v,g=c-d;g&&(a[p++]=g)}return a[p++]=u,a.length=p,a}t(o,"compressExpansion")},{}],280:[function(n,i,s){var o=n("two-product"),a=n("robust-sum"),l=n("robust-scale"),u=n("robust-compress"),f=6;function h(y,T,_,M){return t(function(x){return M(y(_(x[0][0],x[1][1]),_(-x[0][1],x[1][0])))},"robustDeterminant2")}t(h,"determinant_2");function v(y,T,_,M){return t(function(x){return M(y(T(y(_(x[1][1],x[2][2]),_(-x[1][2],x[2][1])),x[0][0]),y(T(y(_(x[1][0],x[2][2]),_(-x[1][2],x[2][0])),-x[0][1]),T(y(_(x[1][0],x[2][1]),_(-x[1][1],x[2][0])),x[0][2]))))},"robustDeterminant3")}t(v,"determinant_3");function c(y,T,_,M){return t(function(x){return M(y(y(T(y(T(y(_(x[2][2],x[3][3]),_(-x[2][3],x[3][2])),x[1][1]),y(T(y(_(x[2][1],x[3][3]),_(-x[2][3],x[3][1])),-x[1][2]),T(y(_(x[2][1],x[3][2]),_(-x[2][2],x[3][1])),x[1][3]))),x[0][0]),T(y(T(y(_(x[2][2],x[3][3]),_(-x[2][3],x[3][2])),x[1][0]),y(T(y(_(x[2][0],x[3][3]),_(-x[2][3],x[3][0])),-x[1][2]),T(y(_(x[2][0],x[3][2]),_(-x[2][2],x[3][0])),x[1][3]))),-x[0][1])),y(T(y(T(y(_(x[2][1],x[3][3]),_(-x[2][3],x[3][1])),x[1][0]),y(T(y(_(x[2][0],x[3][3]),_(-x[2][3],x[3][0])),-x[1][1]),T(y(_(x[2][0],x[3][1]),_(-x[2][1],x[3][0])),x[1][3]))),x[0][2]),T(y(T(y(_(x[2][1],x[3][2]),_(-x[2][2],x[3][1])),x[1][0]),y(T(y(_(x[2][0],x[3][2]),_(-x[2][2],x[3][0])),-x[1][1]),T(y(_(x[2][0],x[3][1]),_(-x[2][1],x[3][0])),x[1][2]))),-x[0][3]))))},"robustDeterminant4")}t(c,"determinant_4");function d(y,T,_,M){return t(function(x){return M(y(y(T(y(y(T(y(T(y(_(x[3][3],x[4][4]),_(-x[3][4],x[4][3])),x[2][2]),y(T(y(_(x[3][2],x[4][4]),_(-x[3][4],x[4][2])),-x[2][3]),T(y(_(x[3][2],x[4][3]),_(-x[3][3],x[4][2])),x[2][4]))),x[1][1]),T(y(T(y(_(x[3][3],x[4][4]),_(-x[3][4],x[4][3])),x[2][1]),y(T(y(_(x[3][1],x[4][4]),_(-x[3][4],x[4][1])),-x[2][3]),T(y(_(x[3][1],x[4][3]),_(-x[3][3],x[4][1])),x[2][4]))),-x[1][2])),y(T(y(T(y(_(x[3][2],x[4][4]),_(-x[3][4],x[4][2])),x[2][1]),y(T(y(_(x[3][1],x[4][4]),_(-x[3][4],x[4][1])),-x[2][2]),T(y(_(x[3][1],x[4][2]),_(-x[3][2],x[4][1])),x[2][4]))),x[1][3]),T(y(T(y(_(x[3][2],x[4][3]),_(-x[3][3],x[4][2])),x[2][1]),y(T(y(_(x[3][1],x[4][3]),_(-x[3][3],x[4][1])),-x[2][2]),T(y(_(x[3][1],x[4][2]),_(-x[3][2],x[4][1])),x[2][3]))),-x[1][4]))),x[0][0]),T(y(y(T(y(T(y(_(x[3][3],x[4][4]),_(-x[3][4],x[4][3])),x[2][2]),y(T(y(_(x[3][2],x[4][4]),_(-x[3][4],x[4][2])),-x[2][3]),T(y(_(x[3][2],x[4][3]),_(-x[3][3],x[4][2])),x[2][4]))),x[1][0]),T(y(T(y(_(x[3][3],x[4][4]),_(-x[3][4],x[4][3])),x[2][0]),y(T(y(_(x[3][0],x[4][4]),_(-x[3][4],x[4][0])),-x[2][3]),T(y(_(x[3][0],x[4][3]),_(-x[3][3],x[4][0])),x[2][4]))),-x[1][2])),y(T(y(T(y(_(x[3][2],x[4][4]),_(-x[3][4],x[4][2])),x[2][0]),y(T(y(_(x[3][0],x[4][4]),_(-x[3][4],x[4][0])),-x[2][2]),T(y(_(x[3][0],x[4][2]),_(-x[3][2],x[4][0])),x[2][4]))),x[1][3]),T(y(T(y(_(x[3][2],x[4][3]),_(-x[3][3],x[4][2])),x[2][0]),y(T(y(_(x[3][0],x[4][3]),_(-x[3][3],x[4][0])),-x[2][2]),T(y(_(x[3][0],x[4][2]),_(-x[3][2],x[4][0])),x[2][3]))),-x[1][4]))),-x[0][1])),y(T(y(y(T(y(T(y(_(x[3][3],x[4][4]),_(-x[3][4],x[4][3])),x[2][1]),y(T(y(_(x[3][1],x[4][4]),_(-x[3][4],x[4][1])),-x[2][3]),T(y(_(x[3][1],x[4][3]),_(-x[3][3],x[4][1])),x[2][4]))),x[1][0]),T(y(T(y(_(x[3][3],x[4][4]),_(-x[3][4],x[4][3])),x[2][0]),y(T(y(_(x[3][0],x[4][4]),_(-x[3][4],x[4][0])),-x[2][3]),T(y(_(x[3][0],x[4][3]),_(-x[3][3],x[4][0])),x[2][4]))),-x[1][1])),y(T(y(T(y(_(x[3][1],x[4][4]),_(-x[3][4],x[4][1])),x[2][0]),y(T(y(_(x[3][0],x[4][4]),_(-x[3][4],x[4][0])),-x[2][1]),T(y(_(x[3][0],x[4][1]),_(-x[3][1],x[4][0])),x[2][4]))),x[1][3]),T(y(T(y(_(x[3][1],x[4][3]),_(-x[3][3],x[4][1])),x[2][0]),y(T(y(_(x[3][0],x[4][3]),_(-x[3][3],x[4][0])),-x[2][1]),T(y(_(x[3][0],x[4][1]),_(-x[3][1],x[4][0])),x[2][3]))),-x[1][4]))),x[0][2]),y(T(y(y(T(y(T(y(_(x[3][2],x[4][4]),_(-x[3][4],x[4][2])),x[2][1]),y(T(y(_(x[3][1],x[4][4]),_(-x[3][4],x[4][1])),-x[2][2]),T(y(_(x[3][1],x[4][2]),_(-x[3][2],x[4][1])),x[2][4]))),x[1][0]),T(y(T(y(_(x[3][2],x[4][4]),_(-x[3][4],x[4][2])),x[2][0]),y(T(y(_(x[3][0],x[4][4]),_(-x[3][4],x[4][0])),-x[2][2]),T(y(_(x[3][0],x[4][2]),_(-x[3][2],x[4][0])),x[2][4]))),-x[1][1])),y(T(y(T(y(_(x[3][1],x[4][4]),_(-x[3][4],x[4][1])),x[2][0]),y(T(y(_(x[3][0],x[4][4]),_(-x[3][4],x[4][0])),-x[2][1]),T(y(_(x[3][0],x[4][1]),_(-x[3][1],x[4][0])),x[2][4]))),x[1][2]),T(y(T(y(_(x[3][1],x[4][2]),_(-x[3][2],x[4][1])),x[2][0]),y(T(y(_(x[3][0],x[4][2]),_(-x[3][2],x[4][0])),-x[2][1]),T(y(_(x[3][0],x[4][1]),_(-x[3][1],x[4][0])),x[2][2]))),-x[1][4]))),-x[0][3]),T(y(y(T(y(T(y(_(x[3][2],x[4][3]),_(-x[3][3],x[4][2])),x[2][1]),y(T(y(_(x[3][1],x[4][3]),_(-x[3][3],x[4][1])),-x[2][2]),T(y(_(x[3][1],x[4][2]),_(-x[3][2],x[4][1])),x[2][3]))),x[1][0]),T(y(T(y(_(x[3][2],x[4][3]),_(-x[3][3],x[4][2])),x[2][0]),y(T(y(_(x[3][0],x[4][3]),_(-x[3][3],x[4][0])),-x[2][2]),T(y(_(x[3][0],x[4][2]),_(-x[3][2],x[4][0])),x[2][3]))),-x[1][1])),y(T(y(T(y(_(x[3][1],x[4][3]),_(-x[3][3],x[4][1])),x[2][0]),y(T(y(_(x[3][0],x[4][3]),_(-x[3][3],x[4][0])),-x[2][1]),T(y(_(x[3][0],x[4][1]),_(-x[3][1],x[4][0])),x[2][3]))),x[1][2]),T(y(T(y(_(x[3][1],x[4][2]),_(-x[3][2],x[4][1])),x[2][0]),y(T(y(_(x[3][0],x[4][2]),_(-x[3][2],x[4][0])),-x[2][1]),T(y(_(x[3][0],x[4][1]),_(-x[3][1],x[4][0])),x[2][2]))),-x[1][3]))),x[0][4])))))},"robustDeterminant5")}t(d,"determinant_5");function g(y){var T=y===2?h:y===3?v:y===4?c:y===5?d:void 0;return T(a,l,o,u)}t(g,"compileDeterminant");var p=[t(function(){return[0]},"robustDeterminant0"),t(function(T){return[T[0][0]]},"robustDeterminant1")];function b(y,T,_,M,w,x,A,S){return t(function(L){switch(L.length){case 0:return y(L);case 1:return T(L);case 2:return _(L);case 3:return M(L);case 4:return w(L);case 5:return x(L)}var P=A[L.length];return P||(P=A[L.length]=S(L.length)),P(L)},"robustDeterminant")}t(b,"proc");function m(){for(;p.length<f;)p.push(g(p.length));i.exports=b.apply(void 0,p.concat([p,g]));for(var y=0;y<p.length;++y)i.exports[y]=p[y]}t(m,"generateDispatch"),m()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(n,i,s){var o=n("two-product"),a=n("robust-sum");i.exports=l;function l(u,f){for(var h=o(u[0],f[0]),v=1;v<u.length;++v)h=a(h,o(u[v],f[v]));return h}t(l,"robustDotProduct")},{"robust-sum":289,"two-product":306}],282:[function(n,i,s){var o=n("two-product"),a=n("robust-sum"),l=n("robust-subtract"),u=n("robust-scale"),f=6;function h(w){var x=w===3?g:w===4?p:w===5?b:m;return x(a,l,o,u)}t(h,"orientation");function v(){return 0}t(v,"inSphere0");function c(){return 0}t(c,"inSphere1");function d(){return 0}t(d,"inSphere2");function g(w,x,A,S){function k(L,P,D){var B=A(L[0],L[0]),z=S(B,P[0]),R=S(B,D[0]),F=A(P[0],P[0]),O=S(F,L[0]),q=S(F,D[0]),H=A(D[0],D[0]),j=S(H,L[0]),X=S(H,P[0]),G=w(x(X,q),x(O,z)),$=x(j,R),te=x(G,$);return te[te.length-1]}return t(k,"exactInSphere3"),k}t(g,"inSphere3");function p(w,x,A,S){function k(L,P,D,B){var z=w(A(L[0],L[0]),A(L[1],L[1])),R=S(z,P[0]),F=S(z,D[0]),O=S(z,B[0]),q=w(A(P[0],P[0]),A(P[1],P[1])),H=S(q,L[0]),j=S(q,D[0]),X=S(q,B[0]),G=w(A(D[0],D[0]),A(D[1],D[1])),$=S(G,L[0]),te=S(G,P[0]),ee=S(G,B[0]),ie=w(A(B[0],B[0]),A(B[1],B[1])),se=S(ie,L[0]),W=S(ie,P[0]),ne=S(ie,D[0]),he=w(w(S(x(ne,ee),P[1]),w(S(x(W,X),-D[1]),S(x(te,j),B[1]))),w(S(x(W,X),L[1]),w(S(x(se,O),-P[1]),S(x(H,R),B[1])))),re=w(w(S(x(ne,ee),L[1]),w(S(x(se,O),-D[1]),S(x($,F),B[1]))),w(S(x(te,j),L[1]),w(S(x($,F),-P[1]),S(x(H,R),D[1])))),ae=x(he,re);return ae[ae.length-1]}return t(k,"exactInSphere4"),k}t(p,"inSphere4");function b(w,x,A,S){function k(L,P,D,B,z){var R=w(A(L[0],L[0]),w(A(L[1],L[1]),A(L[2],L[2]))),F=S(R,P[0]),O=S(R,D[0]),q=S(R,B[0]),H=S(R,z[0]),j=w(A(P[0],P[0]),w(A(P[1],P[1]),A(P[2],P[2]))),X=S(j,L[0]),G=S(j,D[0]),$=S(j,B[0]),te=S(j,z[0]),ee=w(A(D[0],D[0]),w(A(D[1],D[1]),A(D[2],D[2]))),ie=S(ee,L[0]),se=S(ee,P[0]),W=S(ee,B[0]),ne=S(ee,z[0]),he=w(A(B[0],B[0]),w(A(B[1],B[1]),A(B[2],B[2]))),re=S(he,L[0]),ae=S(he,P[0]),fe=S(he,D[0]),ce=S(he,z[0]),xe=w(A(z[0],z[0]),w(A(z[1],z[1]),A(z[2],z[2]))),Te=S(xe,L[0]),me=S(xe,P[0]),pe=S(xe,D[0]),oe=S(xe,B[0]),de=w(w(w(S(w(S(x(oe,ce),D[1]),w(S(x(pe,ne),-B[1]),S(x(fe,W),z[1]))),P[2]),w(S(w(S(x(oe,ce),P[1]),w(S(x(me,te),-B[1]),S(x(ae,$),z[1]))),-D[2]),S(w(S(x(pe,ne),P[1]),w(S(x(me,te),-D[1]),S(x(se,G),z[1]))),B[2]))),w(S(w(S(x(fe,W),P[1]),w(S(x(ae,$),-D[1]),S(x(se,G),B[1]))),-z[2]),w(S(w(S(x(oe,ce),P[1]),w(S(x(me,te),-B[1]),S(x(ae,$),z[1]))),L[2]),S(w(S(x(oe,ce),L[1]),w(S(x(Te,H),-B[1]),S(x(re,q),z[1]))),-P[2])))),w(w(S(w(S(x(me,te),L[1]),w(S(x(Te,H),-P[1]),S(x(X,F),z[1]))),B[2]),w(S(w(S(x(ae,$),L[1]),w(S(x(re,q),-P[1]),S(x(X,F),B[1]))),-z[2]),S(w(S(x(fe,W),P[1]),w(S(x(ae,$),-D[1]),S(x(se,G),B[1]))),L[2]))),w(S(w(S(x(fe,W),L[1]),w(S(x(re,q),-D[1]),S(x(ie,O),B[1]))),-P[2]),w(S(w(S(x(ae,$),L[1]),w(S(x(re,q),-P[1]),S(x(X,F),B[1]))),D[2]),S(w(S(x(se,G),L[1]),w(S(x(ie,O),-P[1]),S(x(X,F),D[1]))),-B[2]))))),ye=w(w(w(S(w(S(x(oe,ce),D[1]),w(S(x(pe,ne),-B[1]),S(x(fe,W),z[1]))),L[2]),S(w(S(x(oe,ce),L[1]),w(S(x(Te,H),-B[1]),S(x(re,q),z[1]))),-D[2])),w(S(w(S(x(pe,ne),L[1]),w(S(x(Te,H),-D[1]),S(x(ie,O),z[1]))),B[2]),S(w(S(x(fe,W),L[1]),w(S(x(re,q),-D[1]),S(x(ie,O),B[1]))),-z[2]))),w(w(S(w(S(x(pe,ne),P[1]),w(S(x(me,te),-D[1]),S(x(se,G),z[1]))),L[2]),S(w(S(x(pe,ne),L[1]),w(S(x(Te,H),-D[1]),S(x(ie,O),z[1]))),-P[2])),w(S(w(S(x(me,te),L[1]),w(S(x(Te,H),-P[1]),S(x(X,F),z[1]))),D[2]),S(w(S(x(se,G),L[1]),w(S(x(ie,O),-P[1]),S(x(X,F),D[1]))),-z[2])))),we=x(de,ye);return we[we.length-1]}return t(k,"exactInSphere5"),k}t(b,"inSphere5");function m(w,x,A,S){function k(L,P,D,B,z,R){var F=w(w(A(L[0],L[0]),A(L[1],L[1])),w(A(L[2],L[2]),A(L[3],L[3]))),O=S(F,P[0]),q=S(F,D[0]),H=S(F,B[0]),j=S(F,z[0]),X=S(F,R[0]),G=w(w(A(P[0],P[0]),A(P[1],P[1])),w(A(P[2],P[2]),A(P[3],P[3]))),$=S(G,L[0]),te=S(G,D[0]),ee=S(G,B[0]),ie=S(G,z[0]),se=S(G,R[0]),W=w(w(A(D[0],D[0]),A(D[1],D[1])),w(A(D[2],D[2]),A(D[3],D[3]))),ne=S(W,L[0]),he=S(W,P[0]),re=S(W,B[0]),ae=S(W,z[0]),fe=S(W,R[0]),ce=w(w(A(B[0],B[0]),A(B[1],B[1])),w(A(B[2],B[2]),A(B[3],B[3]))),xe=S(ce,L[0]),Te=S(ce,P[0]),me=S(ce,D[0]),pe=S(ce,z[0]),oe=S(ce,R[0]),de=w(w(A(z[0],z[0]),A(z[1],z[1])),w(A(z[2],z[2]),A(z[3],z[3]))),ye=S(de,L[0]),we=S(de,P[0]),Ee=S(de,D[0]),De=S(de,B[0]),Fe=S(de,R[0]),qe=w(w(A(R[0],R[0]),A(R[1],R[1])),w(A(R[2],R[2]),A(R[3],R[3]))),Je=S(qe,L[0]),Ge=S(qe,P[0]),et=S(qe,D[0]),Ue=S(qe,B[0]),Ye=S(qe,z[0]),$e=w(w(w(S(w(w(S(w(S(x(Ye,Fe),B[1]),w(S(x(Ue,oe),-z[1]),S(x(De,pe),R[1]))),D[2]),S(w(S(x(Ye,Fe),D[1]),w(S(x(et,fe),-z[1]),S(x(Ee,ae),R[1]))),-B[2])),w(S(w(S(x(Ue,oe),D[1]),w(S(x(et,fe),-B[1]),S(x(me,re),R[1]))),z[2]),S(w(S(x(De,pe),D[1]),w(S(x(Ee,ae),-B[1]),S(x(me,re),z[1]))),-R[2]))),P[3]),w(S(w(w(S(w(S(x(Ye,Fe),B[1]),w(S(x(Ue,oe),-z[1]),S(x(De,pe),R[1]))),P[2]),S(w(S(x(Ye,Fe),P[1]),w(S(x(Ge,se),-z[1]),S(x(we,ie),R[1]))),-B[2])),w(S(w(S(x(Ue,oe),P[1]),w(S(x(Ge,se),-B[1]),S(x(Te,ee),R[1]))),z[2]),S(w(S(x(De,pe),P[1]),w(S(x(we,ie),-B[1]),S(x(Te,ee),z[1]))),-R[2]))),-D[3]),S(w(w(S(w(S(x(Ye,Fe),D[1]),w(S(x(et,fe),-z[1]),S(x(Ee,ae),R[1]))),P[2]),S(w(S(x(Ye,Fe),P[1]),w(S(x(Ge,se),-z[1]),S(x(we,ie),R[1]))),-D[2])),w(S(w(S(x(et,fe),P[1]),w(S(x(Ge,se),-D[1]),S(x(he,te),R[1]))),z[2]),S(w(S(x(Ee,ae),P[1]),w(S(x(we,ie),-D[1]),S(x(he,te),z[1]))),-R[2]))),B[3]))),w(w(S(w(w(S(w(S(x(Ue,oe),D[1]),w(S(x(et,fe),-B[1]),S(x(me,re),R[1]))),P[2]),S(w(S(x(Ue,oe),P[1]),w(S(x(Ge,se),-B[1]),S(x(Te,ee),R[1]))),-D[2])),w(S(w(S(x(et,fe),P[1]),w(S(x(Ge,se),-D[1]),S(x(he,te),R[1]))),B[2]),S(w(S(x(me,re),P[1]),w(S(x(Te,ee),-D[1]),S(x(he,te),B[1]))),-R[2]))),-z[3]),S(w(w(S(w(S(x(De,pe),D[1]),w(S(x(Ee,ae),-B[1]),S(x(me,re),z[1]))),P[2]),S(w(S(x(De,pe),P[1]),w(S(x(we,ie),-B[1]),S(x(Te,ee),z[1]))),-D[2])),w(S(w(S(x(Ee,ae),P[1]),w(S(x(we,ie),-D[1]),S(x(he,te),z[1]))),B[2]),S(w(S(x(me,re),P[1]),w(S(x(Te,ee),-D[1]),S(x(he,te),B[1]))),-z[2]))),R[3])),w(S(w(w(S(w(S(x(Ye,Fe),B[1]),w(S(x(Ue,oe),-z[1]),S(x(De,pe),R[1]))),P[2]),S(w(S(x(Ye,Fe),P[1]),w(S(x(Ge,se),-z[1]),S(x(we,ie),R[1]))),-B[2])),w(S(w(S(x(Ue,oe),P[1]),w(S(x(Ge,se),-B[1]),S(x(Te,ee),R[1]))),z[2]),S(w(S(x(De,pe),P[1]),w(S(x(we,ie),-B[1]),S(x(Te,ee),z[1]))),-R[2]))),L[3]),S(w(w(S(w(S(x(Ye,Fe),B[1]),w(S(x(Ue,oe),-z[1]),S(x(De,pe),R[1]))),L[2]),S(w(S(x(Ye,Fe),L[1]),w(S(x(Je,X),-z[1]),S(x(ye,j),R[1]))),-B[2])),w(S(w(S(x(Ue,oe),L[1]),w(S(x(Je,X),-B[1]),S(x(xe,H),R[1]))),z[2]),S(w(S(x(De,pe),L[1]),w(S(x(ye,j),-B[1]),S(x(xe,H),z[1]))),-R[2]))),-P[3])))),w(w(w(S(w(w(S(w(S(x(Ye,Fe),P[1]),w(S(x(Ge,se),-z[1]),S(x(we,ie),R[1]))),L[2]),S(w(S(x(Ye,Fe),L[1]),w(S(x(Je,X),-z[1]),S(x(ye,j),R[1]))),-P[2])),w(S(w(S(x(Ge,se),L[1]),w(S(x(Je,X),-P[1]),S(x($,O),R[1]))),z[2]),S(w(S(x(we,ie),L[1]),w(S(x(ye,j),-P[1]),S(x($,O),z[1]))),-R[2]))),B[3]),S(w(w(S(w(S(x(Ue,oe),P[1]),w(S(x(Ge,se),-B[1]),S(x(Te,ee),R[1]))),L[2]),S(w(S(x(Ue,oe),L[1]),w(S(x(Je,X),-B[1]),S(x(xe,H),R[1]))),-P[2])),w(S(w(S(x(Ge,se),L[1]),w(S(x(Je,X),-P[1]),S(x($,O),R[1]))),B[2]),S(w(S(x(Te,ee),L[1]),w(S(x(xe,H),-P[1]),S(x($,O),B[1]))),-R[2]))),-z[3])),w(S(w(w(S(w(S(x(De,pe),P[1]),w(S(x(we,ie),-B[1]),S(x(Te,ee),z[1]))),L[2]),S(w(S(x(De,pe),L[1]),w(S(x(ye,j),-B[1]),S(x(xe,H),z[1]))),-P[2])),w(S(w(S(x(we,ie),L[1]),w(S(x(ye,j),-P[1]),S(x($,O),z[1]))),B[2]),S(w(S(x(Te,ee),L[1]),w(S(x(xe,H),-P[1]),S(x($,O),B[1]))),-z[2]))),R[3]),S(w(w(S(w(S(x(Ue,oe),D[1]),w(S(x(et,fe),-B[1]),S(x(me,re),R[1]))),P[2]),S(w(S(x(Ue,oe),P[1]),w(S(x(Ge,se),-B[1]),S(x(Te,ee),R[1]))),-D[2])),w(S(w(S(x(et,fe),P[1]),w(S(x(Ge,se),-D[1]),S(x(he,te),R[1]))),B[2]),S(w(S(x(me,re),P[1]),w(S(x(Te,ee),-D[1]),S(x(he,te),B[1]))),-R[2]))),L[3]))),w(w(S(w(w(S(w(S(x(Ue,oe),D[1]),w(S(x(et,fe),-B[1]),S(x(me,re),R[1]))),L[2]),S(w(S(x(Ue,oe),L[1]),w(S(x(Je,X),-B[1]),S(x(xe,H),R[1]))),-D[2])),w(S(w(S(x(et,fe),L[1]),w(S(x(Je,X),-D[1]),S(x(ne,q),R[1]))),B[2]),S(w(S(x(me,re),L[1]),w(S(x(xe,H),-D[1]),S(x(ne,q),B[1]))),-R[2]))),-P[3]),S(w(w(S(w(S(x(Ue,oe),P[1]),w(S(x(Ge,se),-B[1]),S(x(Te,ee),R[1]))),L[2]),S(w(S(x(Ue,oe),L[1]),w(S(x(Je,X),-B[1]),S(x(xe,H),R[1]))),-P[2])),w(S(w(S(x(Ge,se),L[1]),w(S(x(Je,X),-P[1]),S(x($,O),R[1]))),B[2]),S(w(S(x(Te,ee),L[1]),w(S(x(xe,H),-P[1]),S(x($,O),B[1]))),-R[2]))),D[3])),w(S(w(w(S(w(S(x(et,fe),P[1]),w(S(x(Ge,se),-D[1]),S(x(he,te),R[1]))),L[2]),S(w(S(x(et,fe),L[1]),w(S(x(Je,X),-D[1]),S(x(ne,q),R[1]))),-P[2])),w(S(w(S(x(Ge,se),L[1]),w(S(x(Je,X),-P[1]),S(x($,O),R[1]))),D[2]),S(w(S(x(he,te),L[1]),w(S(x(ne,q),-P[1]),S(x($,O),D[1]))),-R[2]))),-B[3]),S(w(w(S(w(S(x(me,re),P[1]),w(S(x(Te,ee),-D[1]),S(x(he,te),B[1]))),L[2]),S(w(S(x(me,re),L[1]),w(S(x(xe,H),-D[1]),S(x(ne,q),B[1]))),-P[2])),w(S(w(S(x(Te,ee),L[1]),w(S(x(xe,H),-P[1]),S(x($,O),B[1]))),D[2]),S(w(S(x(he,te),L[1]),w(S(x(ne,q),-P[1]),S(x($,O),D[1]))),-B[2]))),R[3]))))),Ct=w(w(w(S(w(w(S(w(S(x(Ye,Fe),B[1]),w(S(x(Ue,oe),-z[1]),S(x(De,pe),R[1]))),D[2]),S(w(S(x(Ye,Fe),D[1]),w(S(x(et,fe),-z[1]),S(x(Ee,ae),R[1]))),-B[2])),w(S(w(S(x(Ue,oe),D[1]),w(S(x(et,fe),-B[1]),S(x(me,re),R[1]))),z[2]),S(w(S(x(De,pe),D[1]),w(S(x(Ee,ae),-B[1]),S(x(me,re),z[1]))),-R[2]))),L[3]),w(S(w(w(S(w(S(x(Ye,Fe),B[1]),w(S(x(Ue,oe),-z[1]),S(x(De,pe),R[1]))),L[2]),S(w(S(x(Ye,Fe),L[1]),w(S(x(Je,X),-z[1]),S(x(ye,j),R[1]))),-B[2])),w(S(w(S(x(Ue,oe),L[1]),w(S(x(Je,X),-B[1]),S(x(xe,H),R[1]))),z[2]),S(w(S(x(De,pe),L[1]),w(S(x(ye,j),-B[1]),S(x(xe,H),z[1]))),-R[2]))),-D[3]),S(w(w(S(w(S(x(Ye,Fe),D[1]),w(S(x(et,fe),-z[1]),S(x(Ee,ae),R[1]))),L[2]),S(w(S(x(Ye,Fe),L[1]),w(S(x(Je,X),-z[1]),S(x(ye,j),R[1]))),-D[2])),w(S(w(S(x(et,fe),L[1]),w(S(x(Je,X),-D[1]),S(x(ne,q),R[1]))),z[2]),S(w(S(x(Ee,ae),L[1]),w(S(x(ye,j),-D[1]),S(x(ne,q),z[1]))),-R[2]))),B[3]))),w(w(S(w(w(S(w(S(x(Ue,oe),D[1]),w(S(x(et,fe),-B[1]),S(x(me,re),R[1]))),L[2]),S(w(S(x(Ue,oe),L[1]),w(S(x(Je,X),-B[1]),S(x(xe,H),R[1]))),-D[2])),w(S(w(S(x(et,fe),L[1]),w(S(x(Je,X),-D[1]),S(x(ne,q),R[1]))),B[2]),S(w(S(x(me,re),L[1]),w(S(x(xe,H),-D[1]),S(x(ne,q),B[1]))),-R[2]))),-z[3]),S(w(w(S(w(S(x(De,pe),D[1]),w(S(x(Ee,ae),-B[1]),S(x(me,re),z[1]))),L[2]),S(w(S(x(De,pe),L[1]),w(S(x(ye,j),-B[1]),S(x(xe,H),z[1]))),-D[2])),w(S(w(S(x(Ee,ae),L[1]),w(S(x(ye,j),-D[1]),S(x(ne,q),z[1]))),B[2]),S(w(S(x(me,re),L[1]),w(S(x(xe,H),-D[1]),S(x(ne,q),B[1]))),-z[2]))),R[3])),w(S(w(w(S(w(S(x(Ye,Fe),D[1]),w(S(x(et,fe),-z[1]),S(x(Ee,ae),R[1]))),P[2]),S(w(S(x(Ye,Fe),P[1]),w(S(x(Ge,se),-z[1]),S(x(we,ie),R[1]))),-D[2])),w(S(w(S(x(et,fe),P[1]),w(S(x(Ge,se),-D[1]),S(x(he,te),R[1]))),z[2]),S(w(S(x(Ee,ae),P[1]),w(S(x(we,ie),-D[1]),S(x(he,te),z[1]))),-R[2]))),L[3]),S(w(w(S(w(S(x(Ye,Fe),D[1]),w(S(x(et,fe),-z[1]),S(x(Ee,ae),R[1]))),L[2]),S(w(S(x(Ye,Fe),L[1]),w(S(x(Je,X),-z[1]),S(x(ye,j),R[1]))),-D[2])),w(S(w(S(x(et,fe),L[1]),w(S(x(Je,X),-D[1]),S(x(ne,q),R[1]))),z[2]),S(w(S(x(Ee,ae),L[1]),w(S(x(ye,j),-D[1]),S(x(ne,q),z[1]))),-R[2]))),-P[3])))),w(w(w(S(w(w(S(w(S(x(Ye,Fe),P[1]),w(S(x(Ge,se),-z[1]),S(x(we,ie),R[1]))),L[2]),S(w(S(x(Ye,Fe),L[1]),w(S(x(Je,X),-z[1]),S(x(ye,j),R[1]))),-P[2])),w(S(w(S(x(Ge,se),L[1]),w(S(x(Je,X),-P[1]),S(x($,O),R[1]))),z[2]),S(w(S(x(we,ie),L[1]),w(S(x(ye,j),-P[1]),S(x($,O),z[1]))),-R[2]))),D[3]),S(w(w(S(w(S(x(et,fe),P[1]),w(S(x(Ge,se),-D[1]),S(x(he,te),R[1]))),L[2]),S(w(S(x(et,fe),L[1]),w(S(x(Je,X),-D[1]),S(x(ne,q),R[1]))),-P[2])),w(S(w(S(x(Ge,se),L[1]),w(S(x(Je,X),-P[1]),S(x($,O),R[1]))),D[2]),S(w(S(x(he,te),L[1]),w(S(x(ne,q),-P[1]),S(x($,O),D[1]))),-R[2]))),-z[3])),w(S(w(w(S(w(S(x(Ee,ae),P[1]),w(S(x(we,ie),-D[1]),S(x(he,te),z[1]))),L[2]),S(w(S(x(Ee,ae),L[1]),w(S(x(ye,j),-D[1]),S(x(ne,q),z[1]))),-P[2])),w(S(w(S(x(we,ie),L[1]),w(S(x(ye,j),-P[1]),S(x($,O),z[1]))),D[2]),S(w(S(x(he,te),L[1]),w(S(x(ne,q),-P[1]),S(x($,O),D[1]))),-z[2]))),R[3]),S(w(w(S(w(S(x(De,pe),D[1]),w(S(x(Ee,ae),-B[1]),S(x(me,re),z[1]))),P[2]),S(w(S(x(De,pe),P[1]),w(S(x(we,ie),-B[1]),S(x(Te,ee),z[1]))),-D[2])),w(S(w(S(x(Ee,ae),P[1]),w(S(x(we,ie),-D[1]),S(x(he,te),z[1]))),B[2]),S(w(S(x(me,re),P[1]),w(S(x(Te,ee),-D[1]),S(x(he,te),B[1]))),-z[2]))),L[3]))),w(w(S(w(w(S(w(S(x(De,pe),D[1]),w(S(x(Ee,ae),-B[1]),S(x(me,re),z[1]))),L[2]),S(w(S(x(De,pe),L[1]),w(S(x(ye,j),-B[1]),S(x(xe,H),z[1]))),-D[2])),w(S(w(S(x(Ee,ae),L[1]),w(S(x(ye,j),-D[1]),S(x(ne,q),z[1]))),B[2]),S(w(S(x(me,re),L[1]),w(S(x(xe,H),-D[1]),S(x(ne,q),B[1]))),-z[2]))),-P[3]),S(w(w(S(w(S(x(De,pe),P[1]),w(S(x(we,ie),-B[1]),S(x(Te,ee),z[1]))),L[2]),S(w(S(x(De,pe),L[1]),w(S(x(ye,j),-B[1]),S(x(xe,H),z[1]))),-P[2])),w(S(w(S(x(we,ie),L[1]),w(S(x(ye,j),-P[1]),S(x($,O),z[1]))),B[2]),S(w(S(x(Te,ee),L[1]),w(S(x(xe,H),-P[1]),S(x($,O),B[1]))),-z[2]))),D[3])),w(S(w(w(S(w(S(x(Ee,ae),P[1]),w(S(x(we,ie),-D[1]),S(x(he,te),z[1]))),L[2]),S(w(S(x(Ee,ae),L[1]),w(S(x(ye,j),-D[1]),S(x(ne,q),z[1]))),-P[2])),w(S(w(S(x(we,ie),L[1]),w(S(x(ye,j),-P[1]),S(x($,O),z[1]))),D[2]),S(w(S(x(he,te),L[1]),w(S(x(ne,q),-P[1]),S(x($,O),D[1]))),-z[2]))),-B[3]),S(w(w(S(w(S(x(me,re),P[1]),w(S(x(Te,ee),-D[1]),S(x(he,te),B[1]))),L[2]),S(w(S(x(me,re),L[1]),w(S(x(xe,H),-D[1]),S(x(ne,q),B[1]))),-P[2])),w(S(w(S(x(Te,ee),L[1]),w(S(x(xe,H),-P[1]),S(x($,O),B[1]))),D[2]),S(w(S(x(he,te),L[1]),w(S(x(ne,q),-P[1]),S(x($,O),D[1]))),-B[2]))),z[3]))))),It=x($e,Ct);return It[It.length-1]}return t(k,"exactInSphere6"),k}t(m,"inSphere6");var y=[v,c,d];function T(w){var x=y[w.length];return x||(x=y[w.length]=h(w.length)),x.apply(void 0,w)}t(T,"slowInSphere");function _(w,x,A,S,k,L,P,D){function B(z,R,F,O,q,H){switch(arguments.length){case 0:case 1:return 0;case 2:return S(z,R);case 3:return k(z,R,F);case 4:return L(z,R,F,O);case 5:return P(z,R,F,O,q);case 6:return D(z,R,F,O,q,H)}for(var j=new Array(arguments.length),X=0;X<arguments.length;++X)j[X]=arguments[X];return w(j)}return t(B,"testInSphere"),B}t(_,"proc");function M(){for(;y.length<=f;)y.push(h(y.length));i.exports=_.apply(void 0,[T].concat(y));for(var w=0;w<=f;++w)i.exports[w]=y[w]}t(M,"generateInSphereTest"),M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(n,i,s){var o=n("robust-determinant"),a=6;function l(y){var T=y===2?h:y===3?v:y===4?c:y===5?d:g;return y<6?T(o[y]):T(o)}t(l,"generateSolver");function u(){return[[0]]}t(u,"robustLinearSolve0d");function f(y,T){return[[T[0]],[y[0][0]]]}t(f,"robustLinearSolve1d");function h(y){return t(function(_,M){return[y([[+M[0],+_[0][1]],[+M[1],+_[1][1]]]),y([[+_[0][0],+M[0]],[+_[1][0],+M[1]]]),y(_)]},"robustLinearSolve2d")}t(h,"solve2d");function v(y){return t(function(_,M){return[y([[+M[0],+_[0][1],+_[0][2]],[+M[1],+_[1][1],+_[1][2]],[+M[2],+_[2][1],+_[2][2]]]),y([[+_[0][0],+M[0],+_[0][2]],[+_[1][0],+M[1],+_[1][2]],[+_[2][0],+M[2],+_[2][2]]]),y([[+_[0][0],+_[0][1],+M[0]],[+_[1][0],+_[1][1],+M[1]],[+_[2][0],+_[2][1],+M[2]]]),y(_)]},"robustLinearSolve3d")}t(v,"solve3d");function c(y){return t(function(_,M){return[y([[+M[0],+_[0][1],+_[0][2],+_[0][3]],[+M[1],+_[1][1],+_[1][2],+_[1][3]],[+M[2],+_[2][1],+_[2][2],+_[2][3]],[+M[3],+_[3][1],+_[3][2],+_[3][3]]]),y([[+_[0][0],+M[0],+_[0][2],+_[0][3]],[+_[1][0],+M[1],+_[1][2],+_[1][3]],[+_[2][0],+M[2],+_[2][2],+_[2][3]],[+_[3][0],+M[3],+_[3][2],+_[3][3]]]),y([[+_[0][0],+_[0][1],+M[0],+_[0][3]],[+_[1][0],+_[1][1],+M[1],+_[1][3]],[+_[2][0],+_[2][1],+M[2],+_[2][3]],[+_[3][0],+_[3][1],+M[3],+_[3][3]]]),y([[+_[0][0],+_[0][1],+_[0][2],+M[0]],[+_[1][0],+_[1][1],+_[1][2],+M[1]],[+_[2][0],+_[2][1],+_[2][2],+M[2]],[+_[3][0],+_[3][1],+_[3][2],+M[3]]]),y(_)]},"robustLinearSolve4d")}t(c,"solve4d");function d(y){return t(function(_,M){return[y([[+M[0],+_[0][1],+_[0][2],+_[0][3],+_[0][4]],[+M[1],+_[1][1],+_[1][2],+_[1][3],+_[1][4]],[+M[2],+_[2][1],+_[2][2],+_[2][3],+_[2][4]],[+M[3],+_[3][1],+_[3][2],+_[3][3],+_[3][4]],[+M[4],+_[4][1],+_[4][2],+_[4][3],+_[4][4]]]),y([[+_[0][0],+M[0],+_[0][2],+_[0][3],+_[0][4]],[+_[1][0],+M[1],+_[1][2],+_[1][3],+_[1][4]],[+_[2][0],+M[2],+_[2][2],+_[2][3],+_[2][4]],[+_[3][0],+M[3],+_[3][2],+_[3][3],+_[3][4]],[+_[4][0],+M[4],+_[4][2],+_[4][3],+_[4][4]]]),y([[+_[0][0],+_[0][1],+M[0],+_[0][3],+_[0][4]],[+_[1][0],+_[1][1],+M[1],+_[1][3],+_[1][4]],[+_[2][0],+_[2][1],+M[2],+_[2][3],+_[2][4]],[+_[3][0],+_[3][1],+M[3],+_[3][3],+_[3][4]],[+_[4][0],+_[4][1],+M[4],+_[4][3],+_[4][4]]]),y([[+_[0][0],+_[0][1],+_[0][2],+M[0],+_[0][4]],[+_[1][0],+_[1][1],+_[1][2],+M[1],+_[1][4]],[+_[2][0],+_[2][1],+_[2][2],+M[2],+_[2][4]],[+_[3][0],+_[3][1],+_[3][2],+M[3],+_[3][4]],[+_[4][0],+_[4][1],+_[4][2],+M[4],+_[4][4]]]),y([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+M[0]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+M[1]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+M[2]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+M[3]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+M[4]]]),y(_)]},"robustLinearSolve5d")}t(d,"solve5d");function g(y){return t(function(_,M){return[y([[+M[0],+_[0][1],+_[0][2],+_[0][3],+_[0][4],+_[0][5]],[+M[1],+_[1][1],+_[1][2],+_[1][3],+_[1][4],+_[1][5]],[+M[2],+_[2][1],+_[2][2],+_[2][3],+_[2][4],+_[2][5]],[+M[3],+_[3][1],+_[3][2],+_[3][3],+_[3][4],+_[3][5]],[+M[4],+_[4][1],+_[4][2],+_[4][3],+_[4][4],+_[4][5]],[+M[5],+_[5][1],+_[5][2],+_[5][3],+_[5][4],+_[5][5]]]),y([[+_[0][0],+M[0],+_[0][2],+_[0][3],+_[0][4],+_[0][5]],[+_[1][0],+M[1],+_[1][2],+_[1][3],+_[1][4],+_[1][5]],[+_[2][0],+M[2],+_[2][2],+_[2][3],+_[2][4],+_[2][5]],[+_[3][0],+M[3],+_[3][2],+_[3][3],+_[3][4],+_[3][5]],[+_[4][0],+M[4],+_[4][2],+_[4][3],+_[4][4],+_[4][5]],[+_[5][0],+M[5],+_[5][2],+_[5][3],+_[5][4],+_[5][5]]]),y([[+_[0][0],+_[0][1],+M[0],+_[0][3],+_[0][4],+_[0][5]],[+_[1][0],+_[1][1],+M[1],+_[1][3],+_[1][4],+_[1][5]],[+_[2][0],+_[2][1],+M[2],+_[2][3],+_[2][4],+_[2][5]],[+_[3][0],+_[3][1],+M[3],+_[3][3],+_[3][4],+_[3][5]],[+_[4][0],+_[4][1],+M[4],+_[4][3],+_[4][4],+_[4][5]],[+_[5][0],+_[5][1],+M[5],+_[5][3],+_[5][4],+_[5][5]]]),y([[+_[0][0],+_[0][1],+_[0][2],+M[0],+_[0][4],+_[0][5]],[+_[1][0],+_[1][1],+_[1][2],+M[1],+_[1][4],+_[1][5]],[+_[2][0],+_[2][1],+_[2][2],+M[2],+_[2][4],+_[2][5]],[+_[3][0],+_[3][1],+_[3][2],+M[3],+_[3][4],+_[3][5]],[+_[4][0],+_[4][1],+_[4][2],+M[4],+_[4][4],+_[4][5]],[+_[5][0],+_[5][1],+_[5][2],+M[5],+_[5][4],+_[5][5]]]),y([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+M[0],+_[0][5]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+M[1],+_[1][5]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+M[2],+_[2][5]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+M[3],+_[3][5]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+M[4],+_[4][5]],[+_[5][0],+_[5][1],+_[5][2],+_[5][3],+M[5],+_[5][5]]]),y([[+_[0][0],+_[0][1],+_[0][2],+_[0][3],+_[0][4],+M[0]],[+_[1][0],+_[1][1],+_[1][2],+_[1][3],+_[1][4],+M[1]],[+_[2][0],+_[2][1],+_[2][2],+_[2][3],+_[2][4],+M[2]],[+_[3][0],+_[3][1],+_[3][2],+_[3][3],+_[3][4],+M[3]],[+_[4][0],+_[4][1],+_[4][2],+_[4][3],+_[4][4],+M[4]],[+_[5][0],+_[5][1],+_[5][2],+_[5][3],+_[5][4],+M[5]]]),y(_)]},"robustLinearSolve6d")}t(g,"solve6d");var p=[u,f];function b(y,T,_,M,w,x,A,S){return t(function(L,P){switch(L.length){case 0:return y(L,P);case 1:return T(L,P);case 2:return _(L,P);case 3:return M(L,P);case 4:return w(L,P);case 5:return x(L,P)}var D=A[L.length];return D||(D=A[L.length]=S(L.length)),D(L,P)},"dispatchLinearSolve")}t(b,"proc");function m(){for(;p.length<a;)p.push(l(p.length));i.exports=b.apply(void 0,p.concat([p,l]));for(var y=0;y<a;++y)i.exports[y]=p[y]}t(m,"generateDispatch"),m()},{"robust-determinant":280}],284:[function(n,i,s){var o=n("two-product"),a=n("robust-sum"),l=n("robust-scale"),u=n("robust-subtract"),f=5,h=11102230246251565e-32,v=(3+16*h)*h,c=(7+56*h)*h;function d(x,A,S,k){return t(function(P,D,B){var z=x(x(A(D[1],B[0]),A(-B[1],D[0])),x(A(P[1],D[0]),A(-D[1],P[0]))),R=x(A(P[1],B[0]),A(-B[1],P[0])),F=k(z,R);return F[F.length-1]},"orientation3Exact")}t(d,"orientation_3");function g(x,A,S,k){return t(function(P,D,B,z){var R=x(x(S(x(A(B[1],z[0]),A(-z[1],B[0])),D[2]),x(S(x(A(D[1],z[0]),A(-z[1],D[0])),-B[2]),S(x(A(D[1],B[0]),A(-B[1],D[0])),z[2]))),x(S(x(A(D[1],z[0]),A(-z[1],D[0])),P[2]),x(S(x(A(P[1],z[0]),A(-z[1],P[0])),-D[2]),S(x(A(P[1],D[0]),A(-D[1],P[0])),z[2])))),F=x(x(S(x(A(B[1],z[0]),A(-z[1],B[0])),P[2]),x(S(x(A(P[1],z[0]),A(-z[1],P[0])),-B[2]),S(x(A(P[1],B[0]),A(-B[1],P[0])),z[2]))),x(S(x(A(D[1],B[0]),A(-B[1],D[0])),P[2]),x(S(x(A(P[1],B[0]),A(-B[1],P[0])),-D[2]),S(x(A(P[1],D[0]),A(-D[1],P[0])),B[2])))),O=k(R,F);return O[O.length-1]},"orientation4Exact")}t(g,"orientation_4");function p(x,A,S,k){return t(function(P,D,B,z,R){var F=x(x(x(S(x(S(x(A(z[1],R[0]),A(-R[1],z[0])),B[2]),x(S(x(A(B[1],R[0]),A(-R[1],B[0])),-z[2]),S(x(A(B[1],z[0]),A(-z[1],B[0])),R[2]))),D[3]),x(S(x(S(x(A(z[1],R[0]),A(-R[1],z[0])),D[2]),x(S(x(A(D[1],R[0]),A(-R[1],D[0])),-z[2]),S(x(A(D[1],z[0]),A(-z[1],D[0])),R[2]))),-B[3]),S(x(S(x(A(B[1],R[0]),A(-R[1],B[0])),D[2]),x(S(x(A(D[1],R[0]),A(-R[1],D[0])),-B[2]),S(x(A(D[1],B[0]),A(-B[1],D[0])),R[2]))),z[3]))),x(S(x(S(x(A(B[1],z[0]),A(-z[1],B[0])),D[2]),x(S(x(A(D[1],z[0]),A(-z[1],D[0])),-B[2]),S(x(A(D[1],B[0]),A(-B[1],D[0])),z[2]))),-R[3]),x(S(x(S(x(A(z[1],R[0]),A(-R[1],z[0])),D[2]),x(S(x(A(D[1],R[0]),A(-R[1],D[0])),-z[2]),S(x(A(D[1],z[0]),A(-z[1],D[0])),R[2]))),P[3]),S(x(S(x(A(z[1],R[0]),A(-R[1],z[0])),P[2]),x(S(x(A(P[1],R[0]),A(-R[1],P[0])),-z[2]),S(x(A(P[1],z[0]),A(-z[1],P[0])),R[2]))),-D[3])))),x(x(S(x(S(x(A(D[1],R[0]),A(-R[1],D[0])),P[2]),x(S(x(A(P[1],R[0]),A(-R[1],P[0])),-D[2]),S(x(A(P[1],D[0]),A(-D[1],P[0])),R[2]))),z[3]),x(S(x(S(x(A(D[1],z[0]),A(-z[1],D[0])),P[2]),x(S(x(A(P[1],z[0]),A(-z[1],P[0])),-D[2]),S(x(A(P[1],D[0]),A(-D[1],P[0])),z[2]))),-R[3]),S(x(S(x(A(B[1],z[0]),A(-z[1],B[0])),D[2]),x(S(x(A(D[1],z[0]),A(-z[1],D[0])),-B[2]),S(x(A(D[1],B[0]),A(-B[1],D[0])),z[2]))),P[3]))),x(S(x(S(x(A(B[1],z[0]),A(-z[1],B[0])),P[2]),x(S(x(A(P[1],z[0]),A(-z[1],P[0])),-B[2]),S(x(A(P[1],B[0]),A(-B[1],P[0])),z[2]))),-D[3]),x(S(x(S(x(A(D[1],z[0]),A(-z[1],D[0])),P[2]),x(S(x(A(P[1],z[0]),A(-z[1],P[0])),-D[2]),S(x(A(P[1],D[0]),A(-D[1],P[0])),z[2]))),B[3]),S(x(S(x(A(D[1],B[0]),A(-B[1],D[0])),P[2]),x(S(x(A(P[1],B[0]),A(-B[1],P[0])),-D[2]),S(x(A(P[1],D[0]),A(-D[1],P[0])),B[2]))),-z[3]))))),O=x(x(x(S(x(S(x(A(z[1],R[0]),A(-R[1],z[0])),B[2]),x(S(x(A(B[1],R[0]),A(-R[1],B[0])),-z[2]),S(x(A(B[1],z[0]),A(-z[1],B[0])),R[2]))),P[3]),S(x(S(x(A(z[1],R[0]),A(-R[1],z[0])),P[2]),x(S(x(A(P[1],R[0]),A(-R[1],P[0])),-z[2]),S(x(A(P[1],z[0]),A(-z[1],P[0])),R[2]))),-B[3])),x(S(x(S(x(A(B[1],R[0]),A(-R[1],B[0])),P[2]),x(S(x(A(P[1],R[0]),A(-R[1],P[0])),-B[2]),S(x(A(P[1],B[0]),A(-B[1],P[0])),R[2]))),z[3]),S(x(S(x(A(B[1],z[0]),A(-z[1],B[0])),P[2]),x(S(x(A(P[1],z[0]),A(-z[1],P[0])),-B[2]),S(x(A(P[1],B[0]),A(-B[1],P[0])),z[2]))),-R[3]))),x(x(S(x(S(x(A(B[1],R[0]),A(-R[1],B[0])),D[2]),x(S(x(A(D[1],R[0]),A(-R[1],D[0])),-B[2]),S(x(A(D[1],B[0]),A(-B[1],D[0])),R[2]))),P[3]),S(x(S(x(A(B[1],R[0]),A(-R[1],B[0])),P[2]),x(S(x(A(P[1],R[0]),A(-R[1],P[0])),-B[2]),S(x(A(P[1],B[0]),A(-B[1],P[0])),R[2]))),-D[3])),x(S(x(S(x(A(D[1],R[0]),A(-R[1],D[0])),P[2]),x(S(x(A(P[1],R[0]),A(-R[1],P[0])),-D[2]),S(x(A(P[1],D[0]),A(-D[1],P[0])),R[2]))),B[3]),S(x(S(x(A(D[1],B[0]),A(-B[1],D[0])),P[2]),x(S(x(A(P[1],B[0]),A(-B[1],P[0])),-D[2]),S(x(A(P[1],D[0]),A(-D[1],P[0])),B[2]))),-R[3])))),q=k(F,O);return q[q.length-1]},"orientation5Exact")}t(p,"orientation_5");function b(x){var A=x===3?d:x===4?g:p;return A(a,o,l,u)}t(b,"orientation");var m=b(3),y=b(4),T=[t(function(){return 0},"orientation0"),t(function(){return 0},"orientation1"),t(function(A,S){return S[0]-A[0]},"orientation2"),t(function(A,S,k){var L=(A[1]-k[1])*(S[0]-k[0]),P=(A[0]-k[0])*(S[1]-k[1]),D=L-P,B;if(L>0){if(P<=0)return D;B=L+P}else if(L<0){if(P>=0)return D;B=-(L+P)}else return D;var z=v*B;return D>=z||D<=-z?D:m(A,S,k)},"orientation3"),t(function(A,S,k,L){var P=A[0]-L[0],D=S[0]-L[0],B=k[0]-L[0],z=A[1]-L[1],R=S[1]-L[1],F=k[1]-L[1],O=A[2]-L[2],q=S[2]-L[2],H=k[2]-L[2],j=D*F,X=B*R,G=B*z,$=P*F,te=P*R,ee=D*z,ie=O*(j-X)+q*(G-$)+H*(te-ee),se=(Math.abs(j)+Math.abs(X))*Math.abs(O)+(Math.abs(G)+Math.abs($))*Math.abs(q)+(Math.abs(te)+Math.abs(ee))*Math.abs(H),W=c*se;return ie>W||-ie>W?ie:y(A,S,k,L)},"orientation4")];function _(x){var A=T[x.length];return A||(A=T[x.length]=b(x.length)),A.apply(void 0,x)}t(_,"slowOrient");function M(x,A,S,k,L,P,D){return t(function(z,R,F,O,q){switch(arguments.length){case 0:case 1:return 0;case 2:return k(z,R);case 3:return L(z,R,F);case 4:return P(z,R,F,O);case 5:return D(z,R,F,O,q)}for(var H=new Array(arguments.length),j=0;j<arguments.length;++j)H[j]=arguments[j];return x(H)},"getOrientation")}t(M,"proc");function w(){for(;T.length<=f;)T.push(b(T.length));i.exports=M.apply(void 0,[_].concat(T));for(var x=0;x<=f;++x)i.exports[x]=T[x]}t(w,"generateOrientationProc"),w()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(n,i,s){var o=n("robust-sum"),a=n("robust-scale");i.exports=l;function l(u,f){if(u.length===1)return a(f,u[0]);if(f.length===1)return a(u,f[0]);if(u.length===0||f.length===0)return[0];var h=[0];if(u.length<f.length)for(var v=0;v<u.length;++v)h=o(h,a(f,u[v]));else for(var v=0;v<f.length;++v)h=o(h,a(u,f[v]));return h}t(l,"robustProduct")},{"robust-scale":286,"robust-sum":289}],286:[function(n,i,s){var o=n("two-product"),a=n("two-sum");i.exports=l;function l(u,f){var h=u.length;if(h===1){var v=o(u[0],f);return v[0]?v:[v[1]]}var c=new Array(2*h),d=[.1,.1],g=[.1,.1],p=0;o(u[0],f,d),d[0]&&(c[p++]=d[0]);for(var b=1;b<h;++b){o(u[b],f,g);var m=d[1];a(m,g[0],d),d[0]&&(c[p++]=d[0]);var y=g[1],T=d[1],_=y+T,M=_-y,w=T-M;d[1]=_,w&&(c[p++]=w)}return d[1]&&(c[p++]=d[1]),p===0&&(c[p++]=0),c.length=p,c}t(l,"scaleLinearExpansion")},{"two-product":306,"two-sum":307}],287:[function(n,i,s){i.exports=l;var o=n("robust-orientation")[3];function a(u,f,h,v){for(var c=0;c<2;++c){var d=u[c],g=f[c],p=Math.min(d,g),b=Math.max(d,g),m=h[c],y=v[c],T=Math.min(m,y),_=Math.max(m,y);if(_<p||b<T)return!1}return!0}t(a,"checkCollinear");function l(u,f,h,v){var c=o(u,h,v),d=o(f,h,v);if(c>0&&d>0||c<0&&d<0)return!1;var g=o(h,u,f),p=o(v,u,f);return g>0&&p>0||g<0&&p<0?!1:c===0&&d===0&&g===0&&p===0?a(u,f,h,v):!0}t(l,"segmentsIntersect")},{"robust-orientation":284}],288:[function(n,i,s){i.exports=a;function o(l,u){var f=l+u,h=f-l,v=f-h,c=u-h,d=l-v,g=d+c;return g?[g,f]:[f]}t(o,"scalarScalar");function a(l,u){var f=l.length|0,h=u.length|0;if(f===1&&h===1)return o(l[0],-u[0]);var v=f+h,c=new Array(v),d=0,g=0,p=0,b=Math.abs,m=l[g],y=b(m),T=-u[p],_=b(T),M,w;y<_?(w=m,g+=1,g<f&&(m=l[g],y=b(m))):(w=T,p+=1,p<h&&(T=-u[p],_=b(T))),g<f&&y<_||p>=h?(M=m,g+=1,g<f&&(m=l[g],y=b(m))):(M=T,p+=1,p<h&&(T=-u[p],_=b(T)));for(var x=M+w,A=x-M,S=w-A,k=S,L=x,P,D,B,z,R;g<f&&p<h;)y<_?(M=m,g+=1,g<f&&(m=l[g],y=b(m))):(M=T,p+=1,p<h&&(T=-u[p],_=b(T))),w=k,x=M+w,A=x-M,S=w-A,S&&(c[d++]=S),P=L+x,D=P-L,B=P-D,z=x-D,R=L-B,k=R+z,L=P;for(;g<f;)M=m,w=k,x=M+w,A=x-M,S=w-A,S&&(c[d++]=S),P=L+x,D=P-L,B=P-D,z=x-D,R=L-B,k=R+z,L=P,g+=1,g<f&&(m=l[g]);for(;p<h;)M=T,w=k,x=M+w,A=x-M,S=w-A,S&&(c[d++]=S),P=L+x,D=P-L,B=P-D,z=x-D,R=L-B,k=R+z,L=P,p+=1,p<h&&(T=-u[p]);return k&&(c[d++]=k),L&&(c[d++]=L),d||(c[d++]=0),c.length=d,c}t(a,"robustSubtract")},{}],289:[function(n,i,s){i.exports=a;function o(l,u){var f=l+u,h=f-l,v=f-h,c=u-h,d=l-v,g=d+c;return g?[g,f]:[f]}t(o,"scalarScalar");function a(l,u){var f=l.length|0,h=u.length|0;if(f===1&&h===1)return o(l[0],u[0]);var v=f+h,c=new Array(v),d=0,g=0,p=0,b=Math.abs,m=l[g],y=b(m),T=u[p],_=b(T),M,w;y<_?(w=m,g+=1,g<f&&(m=l[g],y=b(m))):(w=T,p+=1,p<h&&(T=u[p],_=b(T))),g<f&&y<_||p>=h?(M=m,g+=1,g<f&&(m=l[g],y=b(m))):(M=T,p+=1,p<h&&(T=u[p],_=b(T)));for(var x=M+w,A=x-M,S=w-A,k=S,L=x,P,D,B,z,R;g<f&&p<h;)y<_?(M=m,g+=1,g<f&&(m=l[g],y=b(m))):(M=T,p+=1,p<h&&(T=u[p],_=b(T))),w=k,x=M+w,A=x-M,S=w-A,S&&(c[d++]=S),P=L+x,D=P-L,B=P-D,z=x-D,R=L-B,k=R+z,L=P;for(;g<f;)M=m,w=k,x=M+w,A=x-M,S=w-A,S&&(c[d++]=S),P=L+x,D=P-L,B=P-D,z=x-D,R=L-B,k=R+z,L=P,g+=1,g<f&&(m=l[g]);for(;p<h;)M=T,w=k,x=M+w,A=x-M,S=w-A,S&&(c[d++]=S),P=L+x,D=P-L,B=P-D,z=x-D,R=L-B,k=R+z,L=P,p+=1,p<h&&(T=u[p]);return k&&(c[d++]=k),L&&(c[d++]=L),d||(c[d++]=0),c.length=d,c}t(a,"linearExpansionSum")},{}],290:[function(n,i,s){i.exports=l;var o=n("boundary-cells"),a=n("reduce-simplicial-complex");function l(u){return a(o(u))}t(l,"boundary")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(n,i,s){i.exports=p;var o=n("ndarray"),a=n("typedarray-pool"),l=n("ndarray-sort"),u=n("./lib/codegen");function f(b){for(var m=b.length,y=0,T=0;T<m;++T)y=Math.max(y,b[T].length)|0;return y-1}t(f,"getDimension");function h(b,m){for(var y=b.length,T=a.mallocUint8(y),_=0;_<y;++_)T[_]=b[_]<m|0;return T}t(h,"getSigns");function v(b,m){for(var y=b.length,T=m*(m+1)/2*y|0,_=a.mallocUint32(T*2),M=0,w=0;w<y;++w)for(var x=b[w],m=x.length,A=0;A<m;++A)for(var S=0;S<A;++S){var k=x[S],L=x[A];_[M++]=Math.min(k,L)|0,_[M++]=Math.max(k,L)|0}var P=M/2|0;l(o(_,[P,2]));for(var D=2,w=2;w<M;w+=2)_[w-2]===_[w]&&_[w-1]===_[w+1]||(_[D++]=_[w],_[D++]=_[w+1]);return o(_,[D/2|0,2])}t(v,"getEdges");function c(b,m,y,T){for(var _=b.data,M=b.shape[0],w=a.mallocDouble(M),x=0,A=0;A<M;++A){var S=_[2*A],k=_[2*A+1];if(y[S]!==y[k]){var L=m[S],P=m[k];_[2*x]=S,_[2*x+1]=k,w[x++]=(P-T)/(P-L)}}return b.shape[0]=x,o(w,[x])}t(c,"getCrossingWeights");function d(b,m){var y=a.mallocInt32(m*2),T=b.shape[0],_=b.data;y[0]=0;for(var M=0,w=0;w<T;++w){var x=_[2*w];if(x!==M){for(y[2*M+1]=w;++M<x;)y[2*M]=w,y[2*M+1]=w;y[2*M]=w}}for(y[2*M+1]=T;++M<m;)y[2*M]=y[2*M+1]=T;return y}t(d,"getCascade");function g(b){for(var m=b.shape[0]|0,y=b.data,T=new Array(m),_=0;_<m;++_)T[_]=[y[2*_],y[2*_+1]];return T}t(g,"unpackEdges");function p(b,m,y,T){y=y||0,typeof T>"u"&&(T=f(b));var _=b.length;if(_===0||T<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=h(m,+y),w=v(b,T),x=c(w,m,M,+y),A=d(w,m.length|0),S=u(T)(b,w.data,A,M),k=g(w),L=[].slice.call(x.data,0,x.shape[0]);return a.free(M),a.free(w.data),a.free(x.data),a.free(A),{cells:S,vertexIds:k,vertexWeights:L}}t(p,"extractContour")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(n,i,s){i.exports=a;var o=[t(function(){function u(f,h,v,c){for(var d=f.length,g=[],p=0;p<d;++p){var b=f[p];b.length}return g}return t(u,"getContour0d"),u},"cellPolygonizer_0"),t(function(){function u(h,v,c,d){for(var g=Math.min(c,d)|0,p=Math.max(c,d)|0,b=h[2*g],m=h[2*g+1];b<m;){var y=b+m>>1,T=v[2*y+1];if(T===p)return y;p<T?m=y:b=y+1}return b}t(u,"B");function f(h,v,c,d){for(var g=h.length,p=[],b=0;b<g;++b){var m=h[b],y=m.length;if(y===2){var T=(d[m[0]]<<0)+(d[m[1]]<<1);if(T===0||T===3)continue;switch(T){case 0:break;case 1:p.push([u(c,v,m[0],m[1])]);break;case 2:p.push([u(c,v,m[1],m[0])]);break}}}return p}return t(f,"getContour1d"),f},"cellPolygonizer_1"),t(function(){function u(h,v,c,d){for(var g=Math.min(c,d)|0,p=Math.max(c,d)|0,b=h[2*g],m=h[2*g+1];b<m;){var y=b+m>>1,T=v[2*y+1];if(T===p)return y;p<T?m=y:b=y+1}return b}t(u,"B");function f(h,v,c,d){for(var g=h.length,p=[],b=0;b<g;++b){var m=h[b],y=m.length;if(y===3){var T=(d[m[0]]<<0)+(d[m[1]]<<1)+(d[m[2]]<<2);if(T===0||T===7)continue;switch(T){case 0:break;case 1:p.push([u(c,v,m[0],m[2]),u(c,v,m[0],m[1])]);break;case 2:p.push([u(c,v,m[1],m[0]),u(c,v,m[1],m[2])]);break;case 3:p.push([u(c,v,m[0],m[2]),u(c,v,m[1],m[2])]);break;case 4:p.push([u(c,v,m[2],m[1]),u(c,v,m[2],m[0])]);break;case 5:p.push([u(c,v,m[2],m[1]),u(c,v,m[0],m[1])]);break;case 6:p.push([u(c,v,m[1],m[0]),u(c,v,m[2],m[0])]);break}}else if(y===2){var T=(d[m[0]]<<0)+(d[m[1]]<<1);if(T===0||T===3)continue;switch(T){case 0:break;case 1:p.push([u(c,v,m[0],m[1])]);break;case 2:p.push([u(c,v,m[1],m[0])]);break}}}return p}return t(f,"getContour2d"),f},"cellPolygonizer_2"),t(function(){function u(h,v,c,d){for(var g=Math.min(c,d)|0,p=Math.max(c,d)|0,b=h[2*g],m=h[2*g+1];b<m;){var y=b+m>>1,T=v[2*y+1];if(T===p)return y;p<T?m=y:b=y+1}return b}t(u,"B");function f(h,v,c,d){for(var g=h.length,p=[],b=0;b<g;++b){var m=h[b],y=m.length;if(y===4){var T=(d[m[0]]<<0)+(d[m[1]]<<1)+(d[m[2]]<<2)+(d[m[3]]<<3);if(T===0||T===15)continue;switch(T){case 0:break;case 1:p.push([u(c,v,m[0],m[1]),u(c,v,m[0],m[2]),u(c,v,m[0],m[3])]);break;case 2:p.push([u(c,v,m[1],m[2]),u(c,v,m[1],m[0]),u(c,v,m[1],m[3])]);break;case 3:p.push([u(c,v,m[1],m[2]),u(c,v,m[0],m[2]),u(c,v,m[0],m[3])],[u(c,v,m[1],m[3]),u(c,v,m[1],m[2]),u(c,v,m[0],m[3])]);break;case 4:p.push([u(c,v,m[2],m[0]),u(c,v,m[2],m[1]),u(c,v,m[2],m[3])]);break;case 5:p.push([u(c,v,m[0],m[1]),u(c,v,m[2],m[1]),u(c,v,m[0],m[3])],[u(c,v,m[2],m[1]),u(c,v,m[2],m[3]),u(c,v,m[0],m[3])]);break;case 6:p.push([u(c,v,m[2],m[0]),u(c,v,m[1],m[0]),u(c,v,m[1],m[3])],[u(c,v,m[2],m[3]),u(c,v,m[2],m[0]),u(c,v,m[1],m[3])]);break;case 7:p.push([u(c,v,m[0],m[3]),u(c,v,m[1],m[3]),u(c,v,m[2],m[3])]);break;case 8:p.push([u(c,v,m[3],m[1]),u(c,v,m[3],m[0]),u(c,v,m[3],m[2])]);break;case 9:p.push([u(c,v,m[3],m[1]),u(c,v,m[0],m[1]),u(c,v,m[0],m[2])],[u(c,v,m[3],m[2]),u(c,v,m[3],m[1]),u(c,v,m[0],m[2])]);break;case 10:p.push([u(c,v,m[1],m[0]),u(c,v,m[3],m[0]),u(c,v,m[1],m[2])],[u(c,v,m[3],m[0]),u(c,v,m[3],m[2]),u(c,v,m[1],m[2])]);break;case 11:p.push([u(c,v,m[1],m[2]),u(c,v,m[0],m[2]),u(c,v,m[3],m[2])]);break;case 12:p.push([u(c,v,m[3],m[0]),u(c,v,m[2],m[0]),u(c,v,m[2],m[1])],[u(c,v,m[3],m[1]),u(c,v,m[3],m[0]),u(c,v,m[2],m[1])]);break;case 13:p.push([u(c,v,m[0],m[1]),u(c,v,m[2],m[1]),u(c,v,m[3],m[1])]);break;case 14:p.push([u(c,v,m[2],m[0]),u(c,v,m[1],m[0]),u(c,v,m[3],m[0])]);break}}else if(y===3){var T=(d[m[0]]<<0)+(d[m[1]]<<1)+(d[m[2]]<<2);if(T===0||T===7)continue;switch(T){case 0:break;case 1:p.push([u(c,v,m[0],m[2]),u(c,v,m[0],m[1])]);break;case 2:p.push([u(c,v,m[1],m[0]),u(c,v,m[1],m[2])]);break;case 3:p.push([u(c,v,m[0],m[2]),u(c,v,m[1],m[2])]);break;case 4:p.push([u(c,v,m[2],m[1]),u(c,v,m[2],m[0])]);break;case 5:p.push([u(c,v,m[2],m[1]),u(c,v,m[0],m[1])]);break;case 6:p.push([u(c,v,m[1],m[0]),u(c,v,m[2],m[0])]);break}}else if(y===2){var T=(d[m[0]]<<0)+(d[m[1]]<<1);if(T===0||T===3)continue;switch(T){case 0:break;case 1:p.push([u(c,v,m[0],m[1])]);break;case 2:p.push([u(c,v,m[1],m[0])]);break}}}return p}return t(f,"getContour3d"),f},"cellPolygonizer_3")];function a(l){return o[l]()}t(a,"getPolygonizer")},{}],293:[function(n,i,s){var o=n("bit-twiddle"),a=n("union-find");function l(x){for(var A=0,S=Math.max,k=0,L=x.length;k<L;++k)A=S(A,x[k].length);return A-1}t(l,"dimension"),s.dimension=l;function u(x){for(var A=-1,S=Math.max,k=0,L=x.length;k<L;++k)for(var P=x[k],D=0,B=P.length;D<B;++D)A=S(A,P[D]);return A+1}t(u,"countVertices"),s.countVertices=u;function f(x){for(var A=new Array(x.length),S=0,k=x.length;S<k;++S)A[S]=x[S].slice(0);return A}t(f,"cloneCells"),s.cloneCells=f;function h(x,A){var S=x.length,k=x.length-A.length,L=Math.min;if(k)return k;switch(S){case 0:return 0;case 1:return x[0]-A[0];case 2:var R=x[0]+x[1]-A[0]-A[1];return R||L(x[0],x[1])-L(A[0],A[1]);case 3:var P=x[0]+x[1],D=A[0]+A[1];if(R=P+x[2]-(D+A[2]),R)return R;var B=L(x[0],x[1]),z=L(A[0],A[1]),R=L(B,x[2])-L(z,A[2]);return R||L(B+x[2],P)-L(z+A[2],D);default:var F=x.slice(0);F.sort();var O=A.slice(0);O.sort();for(var q=0;q<S;++q)if(k=F[q]-O[q],k)return k;return 0}}t(h,"compareCells"),s.compareCells=h;function v(x,A){return h(x[0],A[0])}t(v,"compareZipped");function c(x,A){if(A){for(var S=x.length,k=new Array(S),L=0;L<S;++L)k[L]=[x[L],A[L]];k.sort(v);for(var L=0;L<S;++L)x[L]=k[L][0],A[L]=k[L][1];return x}else return x.sort(h),x}t(c,"normalize"),s.normalize=c;function d(x){if(x.length===0)return[];for(var A=1,S=x.length,k=1;k<S;++k){var L=x[k];if(h(L,x[k-1])){if(k===A){A++;continue}x[A++]=L}}return x.length=A,x}t(d,"unique"),s.unique=d;function g(x,A){for(var S=0,k=x.length-1,L=-1;S<=k;){var P=S+k>>1,D=h(x[P],A);D<=0?(D===0&&(L=P),S=P+1):D>0&&(k=P-1)}return L}t(g,"findCell"),s.findCell=g;function p(x,A){for(var S=new Array(x.length),k=0,L=S.length;k<L;++k)S[k]=[];for(var P=[],k=0,D=A.length;k<D;++k)for(var B=A[k],z=B.length,R=1,F=1<<z;R<F;++R){P.length=o.popCount(R);for(var O=0,q=0;q<z;++q)R&1<<q&&(P[O++]=B[q]);var H=g(x,P);if(!(H<0))for(;S[H++].push(k),!(H>=x.length||h(x[H],P)!==0););}return S}t(p,"incidence"),s.incidence=p;function b(x,A){if(!A)return p(d(y(x,0)),x);for(var S=new Array(A),k=0;k<A;++k)S[k]=[];for(var k=0,L=x.length;k<L;++k)for(var P=x[k],D=0,B=P.length;D<B;++D)S[P[D]].push(k);return S}t(b,"dual"),s.dual=b;function m(x){for(var A=[],S=0,k=x.length;S<k;++S)for(var L=x[S],P=L.length|0,D=1,B=1<<P;D<B;++D){for(var z=[],R=0;R<P;++R)D>>>R&1&&z.push(L[R]);A.push(z)}return c(A)}t(m,"explode"),s.explode=m;function y(x,A){if(A<0)return[];for(var S=[],k=(1<<A+1)-1,L=0;L<x.length;++L)for(var P=x[L],D=k;D<1<<P.length;D=o.nextCombination(D)){for(var B=new Array(A+1),z=0,R=0;R<P.length;++R)D&1<<R&&(B[z++]=P[R]);S.push(B)}return c(S)}t(y,"skeleton"),s.skeleton=y;function T(x){for(var A=[],S=0,k=x.length;S<k;++S)for(var L=x[S],P=0,D=L.length;P<D;++P){for(var B=new Array(L.length-1),z=0,R=0;z<D;++z)z!==P&&(B[R++]=L[z]);A.push(B)}return c(A)}t(T,"boundary"),s.boundary=T;function _(x,A){for(var S=new a(A),k=0;k<x.length;++k)for(var L=x[k],P=0;P<L.length;++P)for(var D=P+1;D<L.length;++D)S.link(L[P],L[D]);for(var B=[],z=S.ranks,k=0;k<z.length;++k)z[k]=-1;for(var k=0;k<x.length;++k){var R=S.find(x[k][0]);z[R]<0?(z[R]=B.length,B.push([x[k].slice(0)])):B[z[R]].push(x[k].slice(0))}return B}t(_,"connectedComponents_dense");function M(x){for(var A=d(c(y(x,0))),S=new a(A.length),k=0;k<x.length;++k)for(var L=x[k],P=0;P<L.length;++P)for(var D=g(A,[L[P]]),B=P+1;B<L.length;++B)S.link(D,g(A,[L[B]]));for(var z=[],R=S.ranks,k=0;k<R.length;++k)R[k]=-1;for(var k=0;k<x.length;++k){var F=S.find(g(A,[x[k][0]]));R[F]<0?(R[F]=z.length,z.push([x[k].slice(0)])):z[R[F]].push(x[k].slice(0))}return z}t(M,"connectedComponents_sparse");function w(x,A){return A?_(x,A):M(x)}t(w,"connectedComponents"),s.connectedComponents=w},{"bit-twiddle":32,"union-find":309}],294:[function(n,i,s){arguments[4][32][0].apply(s,arguments)},{dup:32}],295:[function(n,i,s){arguments[4][293][0].apply(s,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(n,i,s){i.exports=o;function o(a){this.roots=new Array(a),this.ranks=new Array(a);for(var l=0;l<a;++l)this.roots[l]=l,this.ranks[l]=0}t(o,"UnionFind"),o.prototype.length=function(){return this.roots.length},o.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},o.prototype.find=function(a){for(var l=this.roots;l[a]!==a;){var u=l[a];l[a]=l[u],a=u}return a},o.prototype.link=function(a,l){var u=this.find(a),f=this.find(l);if(u!==f){var h=this.ranks,v=this.roots,c=h[u],d=h[f];c<d?v[u]=f:d<c?v[f]=u:(v[f]=u,++h[u])}}},{}],297:[function(n,i,s){i.exports=u;var o=n("robust-orientation"),a=n("simplicial-complex");function l(f,h,v){var c=Math.abs(o(f,h,v)),d=Math.sqrt(Math.pow(h[0]-v[0],2)+Math.pow(h[1]-v[1],2));return c/d}t(l,"errorWeight");function u(f,h,v){for(var c=h.length,d=f.length,g=new Array(c),p=new Array(c),b=new Array(c),m=new Array(c),y=0;y<c;++y)g[y]=p[y]=-1,b[y]=1/0,m[y]=!1;for(var y=0;y<d;++y){var T=f[y];if(T.length!==2)throw new Error("Input must be a graph");var _=T[1],M=T[0];p[M]!==-1?p[M]=-2:p[M]=_,g[_]!==-1?g[_]=-2:g[_]=M}function w(G){if(m[G])return 1/0;var $=g[G],te=p[G];return $<0||te<0?1/0:l(h[G],h[$],h[te])}t(w,"computeWeight");function x(G,$){var te=z[G],ee=z[$];z[G]=ee,z[$]=te,R[te]=$,R[ee]=G}t(x,"heapSwap");function A(G){return b[z[G]]}t(A,"heapWeight");function S(G){return G&1?G-1>>1:(G>>1)-1}t(S,"heapParent");function k(G){for(var $=A(G);;){var te=$,ee=2*G+1,ie=2*(G+1),se=G;if(ee<O){var W=A(ee);W<te&&(se=ee,te=W)}if(ie<O){var ne=A(ie);ne<te&&(se=ie)}if(se===G)return G;x(G,se),G=se}}t(k,"heapDown");function L(G){for(var $=A(G);G>0;){var te=S(G);if(te>=0){var ee=A(te);if($<ee){x(G,te),G=te;continue}}return G}}t(L,"heapUp");function P(){if(O>0){var G=z[0];return x(0,O-1),O-=1,k(0),G}return-1}t(P,"heapPop");function D(G,$){var te=z[G];return b[te]===$?G:(b[te]=-1/0,L(G),P(),b[te]=$,O+=1,L(O-1))}t(D,"heapUpdate");function B(G){if(!m[G]){m[G]=!0;var $=g[G],te=p[G];g[te]>=0&&(g[te]=$),p[$]>=0&&(p[$]=te),R[$]>=0&&D(R[$],w($)),R[te]>=0&&D(R[te],w(te))}}t(B,"kill");for(var z=[],R=new Array(c),y=0;y<c;++y){var F=b[y]=w(y);F<1/0?(R[y]=z.length,z.push(y)):R[y]=-1}for(var O=z.length,y=O>>1;y>=0;--y)k(y);for(;;){var q=P();if(q<0||b[q]>v)break;B(q)}for(var H=[],y=0;y<c;++y)m[y]||(R[y]=H.length,H.push(h[y].slice()));H.length;function j(G,$){if(G[$]<0)return $;var te=$,ee=$;do{var ie=G[ee];if(!m[ee]||ie<0||ie===ee||(ee=ie,ie=G[ee],!m[ee]||ie<0||ie===ee))break;ee=ie,te=G[te]}while(te!==ee);for(var se=$;se!==ee;se=G[se])G[se]=ee;return ee}t(j,"tortoiseHare");var X=[];return f.forEach(function(G){var $=j(g,G[0]),te=j(p,G[1]);if($>=0&&te>=0&&$!==te){var ee=R[$],ie=R[te];ee!==ie&&X.push([ee,ie])}}),a.unique(a.normalize(X)),{positions:H,edges:X}}t(u,"simplifyPolygon")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(n,i,s){i.exports=l;var o=n("robust-orientation");function a(u,f){var h,v;if(f[0][0]<f[1][0])h=f[0],v=f[1];else if(f[0][0]>f[1][0])h=f[1],v=f[0];else{var c=Math.min(u[0][1],u[1][1]),d=Math.max(u[0][1],u[1][1]),g=Math.min(f[0][1],f[1][1]),p=Math.max(f[0][1],f[1][1]);return d<g?d-g:c>p?c-p:d-p}var b,m;u[0][1]<u[1][1]?(b=u[0],m=u[1]):(b=u[1],m=u[0]);var y=o(v,h,b);return y||(y=o(v,h,m),y)?y:m-v}t(a,"horizontalOrder");function l(u,f){var h,v;if(f[0][0]<f[1][0])h=f[0],v=f[1];else if(f[0][0]>f[1][0])h=f[1],v=f[0];else return a(f,u);var c,d;if(u[0][0]<u[1][0])c=u[0],d=u[1];else if(u[0][0]>u[1][0])c=u[1],d=u[0];else return-a(u,f);var g=o(h,v,d),p=o(h,v,c);if(g<0){if(p<=0)return g}else if(g>0){if(p>=0)return g}else if(p)return p;if(g=o(d,c,v),p=o(d,c,h),g<0){if(p<=0)return g}else if(g>0){if(p>=0)return g}else if(p)return p;return v[0]-d[0]}t(l,"orderSegments")},{"robust-orientation":284}],299:[function(n,i,s){i.exports=p;var o=n("binary-search-bounds"),a=n("functional-red-black-tree"),l=n("robust-orientation"),u=n("./lib/order-segments");function f(b,m,y){this.slabs=b,this.coordinates=m,this.horizontal=y}t(f,"SlabDecomposition");var h=f.prototype;function v(b,m){return b.y-m}t(v,"compareHorizontal");function c(b,m){for(var y=null;b;){var T=b.key,_,M;T[0][0]<T[1][0]?(_=T[0],M=T[1]):(_=T[1],M=T[0]);var w=l(_,M,m);if(w<0)b=b.left;else if(w>0)if(m[0]!==T[1][0])y=b,b=b.right;else{var x=c(b.right,m);if(x)return x;b=b.left}else{if(m[0]!==T[1][0])return b;var x=c(b.right,m);if(x)return x;b=b.left}}return y}t(c,"searchBucket"),h.castUp=function(b){var m=o.le(this.coordinates,b[0]);if(m<0)return-1;this.slabs[m];var y=c(this.slabs[m],b),T=-1;if(y&&(T=y.value),this.coordinates[m]===b[0]){var _=null;if(y&&(_=y.key),m>0){var M=c(this.slabs[m-1],b);M&&(_?u(M.key,_)>0&&(_=M.key,T=M.value):(T=M.value,_=M.key))}var w=this.horizontal[m];if(w.length>0){var x=o.ge(w,b[1],v);if(x<w.length){var A=w[x];if(b[1]===A.y){if(A.closed)return A.index;for(;x<w.length-1&&w[x+1].y===b[1];)if(x=x+1,A=w[x],A.closed)return A.index;if(A.y===b[1]&&!A.start){if(x=x+1,x>=w.length)return T;A=w[x]}}if(A.start)if(_){var S=l(_[0],_[1],[b[0],A.y]);_[0][0]>_[1][0]&&(S=-S),S>0&&(T=A.index)}else T=A.index;else A.y!==b[1]&&(T=A.index)}}}return T};function d(b,m,y,T){this.y=b,this.index=m,this.start=y,this.closed=T}t(d,"IntervalSegment");function g(b,m,y,T){this.x=b,this.segment=m,this.create=y,this.index=T}t(g,"Event");function p(b){for(var m=b.length,y=2*m,T=new Array(y),_=0;_<m;++_){var M=b[_],w=M[0][0]<M[1][0];T[2*_]=new g(M[0][0],M,w,_),T[2*_+1]=new g(M[1][0],M,!w,_)}T.sort(function(B,z){var R=B.x-z.x;return R||(R=B.create-z.create,R)?R:Math.min(B.segment[0][1],B.segment[1][1])-Math.min(z.segment[0][1],z.segment[1][1])});for(var x=a(u),A=[],S=[],k=[],_=0;_<y;){for(var L=T[_].x,P=[];_<y;){var D=T[_];if(D.x!==L)break;_+=1,D.segment[0][0]===D.x&&D.segment[1][0]===D.x?D.create&&(D.segment[0][1]<D.segment[1][1]?(P.push(new d(D.segment[0][1],D.index,!0,!0)),P.push(new d(D.segment[1][1],D.index,!1,!1))):(P.push(new d(D.segment[1][1],D.index,!0,!1)),P.push(new d(D.segment[0][1],D.index,!1,!0)))):D.create?x=x.insert(D.segment,D.index):x=x.remove(D.segment)}A.push(x.root),S.push(L),k.push(P)}return new f(A,S,k)}t(p,"createSlabDecomposition")},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(n,i,s){var o=n("robust-dot-product"),a=n("robust-sum");i.exports=f,i.exports.positive=h,i.exports.negative=v;function l(c,d){var g=a(o(c,d),[d[d.length-1]]);return g[g.length-1]}t(l,"planeT");function u(c,d,g,p){var b=p-d,m=-d/b;m<0?m=0:m>1&&(m=1);for(var y=1-m,T=c.length,_=new Array(T),M=0;M<T;++M)_[M]=m*c[M]+y*g[M];return _}t(u,"lerpW");function f(c,d){for(var g=[],p=[],b=l(c[c.length-1],d),m=c[c.length-1],y=c[0],T=0;T<c.length;++T,m=y){y=c[T];var _=l(y,d);if(b<0&&_>0||b>0&&_<0){var M=u(m,_,y,b);g.push(M),p.push(M.slice())}_<0?p.push(y.slice()):_>0?g.push(y.slice()):(g.push(y.slice()),p.push(y.slice())),b=_}return{positive:g,negative:p}}t(f,"splitPolygon");function h(c,d){for(var g=[],p=l(c[c.length-1],d),b=c[c.length-1],m=c[0],y=0;y<c.length;++y,b=m){m=c[y];var T=l(m,d);(p<0&&T>0||p>0&&T<0)&&g.push(u(b,T,m,p)),T>=0&&g.push(m.slice()),p=T}return g}t(h,"positive");function v(c,d){for(var g=[],p=l(c[c.length-1],d),b=c[c.length-1],m=c[0],y=0;y<c.length;++y,b=m){m=c[y];var T=l(m,d);(p<0&&T>0||p>0&&T<0)&&g.push(u(b,T,m,p)),T<=0&&g.push(m.slice()),p=T}return g}t(v,"negative")},{"robust-dot-product":281,"robust-sum":289}],301:[function(n,i,s){(function(){var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(v){return u(h(v),arguments)}t(a,"sprintf");function l(v,c){return a.apply(null,[v].concat(c||[]))}t(l,"vsprintf");function u(v,c){var d=1,g=v.length,p,b="",m,y,T,_,M,w,x,A;for(m=0;m<g;m++)if(typeof v[m]=="string")b+=v[m];else if(typeof v[m]=="object"){if(T=v[m],T.keys)for(p=c[d],y=0;y<T.keys.length;y++){if(p==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',T.keys[y],T.keys[y-1]));p=p[T.keys[y]]}else T.param_no?p=c[T.param_no]:p=c[d++];if(o.not_type.test(T.type)&&o.not_primitive.test(T.type)&&p instanceof Function&&(p=p()),o.numeric_arg.test(T.type)&&typeof p!="number"&&isNaN(p))throw new TypeError(a("[sprintf] expecting number but found %T",p));switch(o.number.test(T.type)&&(x=p>=0),T.type){case"b":p=parseInt(p,10).toString(2);break;case"c":p=String.fromCharCode(parseInt(p,10));break;case"d":case"i":p=parseInt(p,10);break;case"j":p=JSON.stringify(p,null,T.width?parseInt(T.width):0);break;case"e":p=T.precision?parseFloat(p).toExponential(T.precision):parseFloat(p).toExponential();break;case"f":p=T.precision?parseFloat(p).toFixed(T.precision):parseFloat(p);break;case"g":p=T.precision?String(Number(p.toPrecision(T.precision))):parseFloat(p);break;case"o":p=(parseInt(p,10)>>>0).toString(8);break;case"s":p=String(p),p=T.precision?p.substring(0,T.precision):p;break;case"t":p=String(!!p),p=T.precision?p.substring(0,T.precision):p;break;case"T":p=Object.prototype.toString.call(p).slice(8,-1).toLowerCase(),p=T.precision?p.substring(0,T.precision):p;break;case"u":p=parseInt(p,10)>>>0;break;case"v":p=p.valueOf(),p=T.precision?p.substring(0,T.precision):p;break;case"x":p=(parseInt(p,10)>>>0).toString(16);break;case"X":p=(parseInt(p,10)>>>0).toString(16).toUpperCase();break}o.json.test(T.type)?b+=p:(o.number.test(T.type)&&(!x||T.sign)?(A=x?"+":"-",p=p.toString().replace(o.sign,"")):A="",M=T.pad_char?T.pad_char==="0"?"0":T.pad_char.charAt(1):" ",w=T.width-(A+p).length,_=T.width&&w>0?M.repeat(w):"",b+=T.align?A+p+_:M==="0"?A+_+p:_+A+p)}return b}t(u,"sprintf_format");var f=Object.create(null);function h(v){if(f[v])return f[v];for(var c=v,d,g=[],p=0;c;){if((d=o.text.exec(c))!==null)g.push(d[0]);else if((d=o.modulo.exec(c))!==null)g.push("%");else if((d=o.placeholder.exec(c))!==null){if(d[2]){p|=1;var b=[],m=d[2],y=[];if((y=o.key.exec(m))!==null)for(b.push(y[1]);(m=m.substring(y[0].length))!=="";)if((y=o.key_access.exec(m))!==null)b.push(y[1]);else if((y=o.index_access.exec(m))!==null)b.push(y[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");d[2]=b}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:d[0],param_no:d[1],keys:d[2],sign:d[3],pad_char:d[4],align:d[5],width:d[6],precision:d[7],type:d[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");c=c.substring(d[0].length)}return f[v]=g}t(h,"sprintf_parse"),typeof s<"u"&&(s.sprintf=a,s.vsprintf=l),typeof window<"u"&&(window.sprintf=a,window.vsprintf=l)})()},{}],302:[function(n,i,s){i.exports=v;var o=n("ndarray-extract-contour"),a=n("zero-crossings"),l={"2d":function(c,d,g){var p=c({order:d,scalarArguments:3,getters:g==="generic"?[0]:void 0,phase:t(function(m,y,T,_){return m>_|0},"phaseFunc"),vertex:t(function(m,y,T,_,M,w,x,A,S,k,L,P,D){var B=(x<<0)+(A<<1)+(S<<2)+(k<<3)|0;if(!(B===0||B===15))switch(B){case 0:L.push([m-.5,y-.5]);break;case 1:L.push([m-.25-.25*(_+T-2*D)/(T-_),y-.25-.25*(M+T-2*D)/(T-M)]);break;case 2:L.push([m-.75-.25*(-_-T+2*D)/(_-T),y-.25-.25*(w+_-2*D)/(_-w)]);break;case 3:L.push([m-.5,y-.5-.5*(M+T+w+_-4*D)/(T-M+_-w)]);break;case 4:L.push([m-.25-.25*(w+M-2*D)/(M-w),y-.75-.25*(-M-T+2*D)/(M-T)]);break;case 5:L.push([m-.5-.5*(_+T+w+M-4*D)/(T-_+M-w),y-.5]);break;case 6:L.push([m-.5-.25*(-_-T+w+M)/(_-T+M-w),y-.5-.25*(-M-T+w+_)/(M-T+_-w)]);break;case 7:L.push([m-.75-.25*(w+M-2*D)/(M-w),y-.75-.25*(w+_-2*D)/(_-w)]);break;case 8:L.push([m-.75-.25*(-w-M+2*D)/(w-M),y-.75-.25*(-w-_+2*D)/(w-_)]);break;case 9:L.push([m-.5-.25*(_+T+-w-M)/(T-_+w-M),y-.5-.25*(M+T+-w-_)/(T-M+w-_)]);break;case 10:L.push([m-.5-.5*(-_-T+-w-M+4*D)/(_-T+w-M),y-.5]);break;case 11:L.push([m-.25-.25*(-w-M+2*D)/(w-M),y-.75-.25*(M+T-2*D)/(T-M)]);break;case 12:L.push([m-.5,y-.5-.5*(-M-T+-w-_+4*D)/(M-T+w-_)]);break;case 13:L.push([m-.75-.25*(_+T-2*D)/(T-_),y-.25-.25*(-w-_+2*D)/(w-_)]);break;case 14:L.push([m-.25-.25*(-_-T+2*D)/(_-T),y-.25-.25*(-M-T+2*D)/(M-T)]);break;case 15:L.push([m-.5,y-.5]);break}},"vertexFunc"),cell:t(function(m,y,T,_,M,w,x,A,S){M?A.push([m,y]):A.push([y,m])},"cellFunc")});return function(b,m){var y=[],T=[];return p(b,y,T,m),{positions:y,cells:T}}}};function u(c,d){var g=c.length+"d",p=l[g];if(p)return p(o,c,d)}t(u,"buildSurfaceNets");function f(c,d){for(var g=a(c,d),p=g.length,b=new Array(p),m=new Array(p),y=0;y<p;++y)b[y]=[g[y]],m[y]=[y];return{positions:b,cells:m}}t(f,"mesh1D");var h={};function v(c,b){if(c.dimension<=0)return{positions:[],cells:[]};if(c.dimension===1)return f(c,b);var g=c.order.join()+"-"+c.dtype,p=h[g],b=+b||0;return p||(p=h[g]=u(c.order,c.dtype)),p(c,b)}t(v,"surfaceNets")},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(n,i,s){(function(o){(function(){i.exports=h;var a=n("vectorize-text"),l=window||o.global||{},u=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};function f(v){for(var c=v.cells,d=v.positions,g=new Float32Array(c.length*6),p=0,b=0,m=0;m<c.length;++m)for(var y=c[m],T=0;T<3;++T){var _=d[y[T]];g[p++]=_[0],g[p++]=_[1]+1.4,b=Math.max(_[0],b)}return{data:g,shape:b}}t(f,"unwrap");function h(v,c,g){var g=g||{},p=u[v];p||(p=u[v]={" ":{data:new Float32Array(0),shape:.2}});var b=p[c];if(!b)if(c.length<=1||!/\d/.test(c))b=p[c]=f(a(c,{triangles:!0,font:v,textAlign:g.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=c.split(/(\d|\s)/),y=new Array(m.length),T=0,_=0,M=0;M<m.length;++M)y[M]=h(v,m[M]),T+=y[M].data.length,_+=y[M].shape,M>0&&(_+=.02);for(var w=new Float32Array(T),x=0,A=-.5*_,M=0;M<y.length;++M){for(var S=y[M].data,k=0;k<S.length;k+=2)w[x++]=S[k]+A,w[x++]=S[k+1];A+=y[M].shape+.02}b=p[c]={data:w,shape:_}}return b}t(h,"textGet")}).call(this)}).call(this,n("_process"))},{_process:5,"vectorize-text":311}],304:[function(n,i,s){var o=n("parse-unit");i.exports=f;var a=96;function l(h,v){var c=o(getComputedStyle(h).getPropertyValue(v));return c[0]*f(c[1],h)}t(l,"getPropertyInPX");function u(h,v){var c=document.createElement("div");c.style["font-size"]="128"+h,v.appendChild(c);var d=l(c,"font-size")/128;return v.removeChild(c),d}t(u,"getSizeBrutal");function f(h,v){switch(v=v||document.body,h=(h||"px").trim().toLowerCase(),(v===window||v===document)&&(v=document.body),h){case"%":return v.clientHeight/100;case"ch":case"ex":return u(h,v);case"em":return l(v,"font-size");case"rem":return l(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}t(f,"toPX")},{"parse-unit":265}],305:[function(n,i,s){i.exports=m;var o=n("filtered-vector"),a=n("gl-mat4/invert"),l=n("gl-mat4/rotate"),u=n("gl-vec3/cross"),f=n("gl-vec3/normalize"),h=n("gl-vec3/dot");function v(y,T,_){return Math.sqrt(Math.pow(y,2)+Math.pow(T,2)+Math.pow(_,2))}t(v,"len3");function c(y){return Math.min(1,Math.max(-1,y))}t(c,"clamp1");function d(y){var T=Math.abs(y[0]),_=Math.abs(y[1]),M=Math.abs(y[2]),w=[0,0,0];T>Math.max(_,M)?w[2]=1:_>Math.max(T,M)?w[0]=1:w[1]=1;for(var x=0,A=0,S=0;S<3;++S)x+=y[S]*y[S],A+=w[S]*y[S];for(var S=0;S<3;++S)w[S]-=A/x*y[S];return f(w,w),w}t(d,"findOrthoPair");function g(y,T,_,M,w,x,A,S){this.center=o(_),this.up=o(M),this.right=o(w),this.radius=o([x]),this.angle=o([A,S]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(y,T),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var k=0;k<16;++k)this.computedMatrix[k]=.5;this.recalcMatrix(0)}t(g,"TurntableController");var p=g.prototype;p.setDistanceLimits=function(y,T){y>0?y=Math.log(y):y=-1/0,T>0?T=Math.log(T):T=1/0,T=Math.max(T,y),this.radius.bounds[0][0]=y,this.radius.bounds[1][0]=T},p.getDistanceLimits=function(y){var T=this.radius.bounds[0];return y?(y[0]=Math.exp(T[0][0]),y[1]=Math.exp(T[1][0]),y):[Math.exp(T[0][0]),Math.exp(T[1][0])]},p.recalcMatrix=function(y){this.center.curve(y),this.up.curve(y),this.right.curve(y),this.radius.curve(y),this.angle.curve(y);for(var T=this.computedUp,_=this.computedRight,M=0,w=0,x=0;x<3;++x)w+=T[x]*_[x],M+=T[x]*T[x];for(var A=Math.sqrt(M),S=0,x=0;x<3;++x)_[x]-=T[x]*w/M,S+=_[x]*_[x],T[x]/=A;for(var k=Math.sqrt(S),x=0;x<3;++x)_[x]/=k;var L=this.computedToward;u(L,T,_),f(L,L);for(var P=Math.exp(this.computedRadius[0]),D=this.computedAngle[0],B=this.computedAngle[1],z=Math.cos(D),R=Math.sin(D),F=Math.cos(B),O=Math.sin(B),q=this.computedCenter,H=z*F,j=R*F,X=O,G=-z*O,$=-R*O,te=F,ee=this.computedEye,ie=this.computedMatrix,x=0;x<3;++x){var se=H*_[x]+j*L[x]+X*T[x];ie[4*x+1]=G*_[x]+$*L[x]+te*T[x],ie[4*x+2]=se,ie[4*x+3]=0}var W=ie[1],ne=ie[5],he=ie[9],re=ie[2],ae=ie[6],fe=ie[10],ce=ne*fe-he*ae,xe=he*re-W*fe,Te=W*ae-ne*re,me=v(ce,xe,Te);ce/=me,xe/=me,Te/=me,ie[0]=ce,ie[4]=xe,ie[8]=Te;for(var x=0;x<3;++x)ee[x]=q[x]+ie[2+4*x]*P;for(var x=0;x<3;++x){for(var S=0,pe=0;pe<3;++pe)S+=ie[x+4*pe]*ee[pe];ie[12+x]=-S}ie[15]=1},p.getMatrix=function(y,T){this.recalcMatrix(y);var _=this.computedMatrix;if(T){for(var M=0;M<16;++M)T[M]=_[M];return T}return _};var b=[0,0,0];p.rotate=function(y,T,_,M){if(this.angle.move(y,T,_),M){this.recalcMatrix(y);var w=this.computedMatrix;b[0]=w[2],b[1]=w[6],b[2]=w[10];for(var x=this.computedUp,A=this.computedRight,S=this.computedToward,k=0;k<3;++k)w[4*k]=x[k],w[4*k+1]=A[k],w[4*k+2]=S[k];l(w,w,M,b);for(var k=0;k<3;++k)x[k]=w[4*k],A[k]=w[4*k+1];this.up.set(y,x[0],x[1],x[2]),this.right.set(y,A[0],A[1],A[2])}},p.pan=function(y,T,_,M){T=T||0,_=_||0,M=M||0,this.recalcMatrix(y);var w=this.computedMatrix;Math.exp(this.computedRadius[0]);var x=w[1],A=w[5],S=w[9],k=v(x,A,S);x/=k,A/=k,S/=k;var L=w[0],P=w[4],D=w[8],B=L*x+P*A+D*S;L-=x*B,P-=A*B,D-=S*B;var z=v(L,P,D);L/=z,P/=z,D/=z;var R=L*T+x*_,F=P*T+A*_,O=D*T+S*_;this.center.move(y,R,F,O);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+M),this.radius.set(y,Math.log(q))},p.translate=function(y,T,_,M){this.center.move(y,T||0,_||0,M||0)},p.setMatrix=function(y,T,_,M){var w=1;typeof _=="number"&&(w=_|0),(w<0||w>3)&&(w=1);var x=(w+2)%3;T||(this.recalcMatrix(y),T=this.computedMatrix);var A=T[w],S=T[w+4],k=T[w+8];if(M){var P=Math.abs(A),D=Math.abs(S),B=Math.abs(k),z=Math.max(P,D,B);P===z?(A=A<0?-1:1,S=k=0):B===z?(k=k<0?-1:1,A=S=0):(S=S<0?-1:1,A=k=0)}else{var L=v(A,S,k);A/=L,S/=L,k/=L}var R=T[x],F=T[x+4],O=T[x+8],q=R*A+F*S+O*k;R-=A*q,F-=S*q,O-=k*q;var H=v(R,F,O);R/=H,F/=H,O/=H;var j=S*O-k*F,X=k*R-A*O,G=A*F-S*R,$=v(j,X,G);j/=$,X/=$,G/=$,this.center.jump(y,we,Ee,De),this.radius.idle(y),this.up.jump(y,A,S,k),this.right.jump(y,R,F,O);var te,ee;if(w===2){var ie=T[1],se=T[5],W=T[9],ne=ie*R+se*F+W*O,he=ie*j+se*X+W*G;ce<0?te=-Math.PI/2:te=Math.PI/2,ee=Math.atan2(he,ne)}else{var re=T[2],ae=T[6],fe=T[10],ce=re*A+ae*S+fe*k,xe=re*R+ae*F+fe*O,Te=re*j+ae*X+fe*G;te=Math.asin(c(ce)),ee=Math.atan2(Te,xe)}this.angle.jump(y,ee,te),this.recalcMatrix(y);var me=T[2],pe=T[6],oe=T[10],de=this.computedMatrix;a(de,T);var ye=de[15],we=de[12]/ye,Ee=de[13]/ye,De=de[14]/ye,Fe=Math.exp(this.computedRadius[0]);this.center.jump(y,we-me*Fe,Ee-pe*Fe,De-oe*Fe)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(y){this.center.idle(y),this.up.idle(y),this.right.idle(y),this.radius.idle(y),this.angle.idle(y)},p.flush=function(y){this.center.flush(y),this.up.flush(y),this.right.flush(y),this.radius.flush(y),this.angle.flush(y)},p.setDistance=function(y,T){T>0&&this.radius.set(y,Math.log(T))},p.lookAt=function(y,T,_,M){this.recalcMatrix(y),T=T||this.computedEye,_=_||this.computedCenter,M=M||this.computedUp;var w=M[0],x=M[1],A=M[2],S=v(w,x,A);if(!(S<1e-6)){w/=S,x/=S,A/=S;var k=T[0]-_[0],L=T[1]-_[1],P=T[2]-_[2],D=v(k,L,P);if(!(D<1e-6)){k/=D,L/=D,P/=D;var B=this.computedRight,z=B[0],R=B[1],F=B[2],O=w*z+x*R+A*F;z-=O*w,R-=O*x,F-=O*A;var q=v(z,R,F);if(!(q<.01&&(z=x*P-A*L,R=A*k-w*P,F=w*L-x*k,q=v(z,R,F),q<1e-6))){z/=q,R/=q,F/=q,this.up.set(y,w,x,A),this.right.set(y,z,R,F),this.center.set(y,_[0],_[1],_[2]),this.radius.set(y,Math.log(D));var H=x*F-A*R,j=A*z-w*F,X=w*R-x*z,G=v(H,j,X);H/=G,j/=G,X/=G;var $=w*k+x*L+A*P,te=z*k+R*L+F*P,ee=H*k+j*L+X*P,ie=Math.asin(c($)),se=Math.atan2(ee,te),W=this.angle._state,ne=W[W.length-1],he=W[W.length-2];ne=ne%(2*Math.PI);var re=Math.abs(ne+2*Math.PI-se),ae=Math.abs(ne-se),fe=Math.abs(ne-2*Math.PI-se);re<ae&&(ne+=2*Math.PI),fe<ae&&(ne-=2*Math.PI),this.angle.jump(this.angle.lastT(),ne,he),this.angle.set(y,se,ie)}}}};function m(y){y=y||{};var T=y.center||[0,0,0],_=y.up||[0,1,0],M=y.right||d(_),w=y.radius||1,x=y.theta||0,A=y.phi||0;if(T=[].slice.call(T,0,3),_=[].slice.call(_,0,3),f(_,_),M=[].slice.call(M,0,3),f(M,M),"eye"in y){var S=y.eye,k=[S[0]-T[0],S[1]-T[1],S[2]-T[2]];u(M,k,_),v(M[0],M[1],M[2])<1e-6?M=d(_):f(M,M),w=v(k[0],k[1],k[2]);var L=h(_,k)/w,P=h(M,k)/w;A=Math.acos(L),x=Math.acos(P)}return w=Math.log(w),new g(y.zoomMin,y.zoomMax,T,_,M,w,x,A)}t(m,"createTurntableController")},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(n,i,s){i.exports=a;var o=+(Math.pow(2,27)+1);function a(l,u,f){var h=l*u,v=o*l,c=v-l,d=v-c,g=l-d,p=o*u,b=p-u,m=p-b,y=u-m,T=h-d*m,_=T-g*m,M=_-d*y,w=g*y-M;return f?(f[0]=w,f[1]=h,f):[w,h]}t(a,"twoProduct")},{}],307:[function(n,i,s){i.exports=o;function o(a,l,u){var f=a+l,h=f-a,v=f-h,c=l-h,d=a-v;return u?(u[0]=d+c,u[1]=f,u):[d+c,f]}t(o,"fastTwoSum")},{}],308:[function(n,i,s){(function(o){(function(){var a=n("bit-twiddle"),l=n("dup"),u=n("buffer").Buffer;o.__TYPEDARRAY_POOL||(o.__TYPEDARRAY_POOL={UINT8:l([32,0]),UINT16:l([32,0]),UINT32:l([32,0]),BIGUINT64:l([32,0]),INT8:l([32,0]),INT16:l([32,0]),INT32:l([32,0]),BIGINT64:l([32,0]),FLOAT:l([32,0]),DOUBLE:l([32,0]),DATA:l([32,0]),UINT8C:l([32,0]),BUFFER:l([32,0])});var f=typeof Uint8ClampedArray<"u",h=typeof BigUint64Array<"u",v=typeof BigInt64Array<"u",c=o.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=l([32,0])),c.BIGUINT64||(c.BIGUINT64=l([32,0])),c.BIGINT64||(c.BIGINT64=l([32,0])),c.BUFFER||(c.BUFFER=l([32,0]));var d=c.DATA,g=c.BUFFER;s.free=t(function(R){if(u.isBuffer(R))g[a.log2(R.length)].push(R);else{if(Object.prototype.toString.call(R)!=="[object ArrayBuffer]"&&(R=R.buffer),!R)return;var F=R.length||R.byteLength,O=a.log2(F)|0;d[O].push(R)}},"free");function p(z){if(!!z){var R=z.length||z.byteLength,F=a.log2(R);d[F].push(z)}}t(p,"freeArrayBuffer");function b(z){p(z.buffer)}t(b,"freeTypedArray"),s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=b,s.freeArrayBuffer=p,s.freeBuffer=t(function(R){g[a.log2(R.length)].push(R)},"freeBuffer"),s.malloc=t(function(R,F){if(F===void 0||F==="arraybuffer")return m(R);switch(F){case"uint8":return y(R);case"uint16":return T(R);case"uint32":return _(R);case"int8":return M(R);case"int16":return w(R);case"int32":return x(R);case"float":case"float32":return A(R);case"double":case"float64":return S(R);case"uint8_clamped":return k(R);case"bigint64":return P(R);case"biguint64":return L(R);case"buffer":return B(R);case"data":case"dataview":return D(R);default:return null}return null},"malloc");function m(R){var R=a.nextPow2(R),F=a.log2(R),O=d[F];return O.length>0?O.pop():new ArrayBuffer(R)}t(m,"mallocArrayBuffer"),s.mallocArrayBuffer=m;function y(z){return new Uint8Array(m(z),0,z)}t(y,"mallocUint8"),s.mallocUint8=y;function T(z){return new Uint16Array(m(2*z),0,z)}t(T,"mallocUint16"),s.mallocUint16=T;function _(z){return new Uint32Array(m(4*z),0,z)}t(_,"mallocUint32"),s.mallocUint32=_;function M(z){return new Int8Array(m(z),0,z)}t(M,"mallocInt8"),s.mallocInt8=M;function w(z){return new Int16Array(m(2*z),0,z)}t(w,"mallocInt16"),s.mallocInt16=w;function x(z){return new Int32Array(m(4*z),0,z)}t(x,"mallocInt32"),s.mallocInt32=x;function A(z){return new Float32Array(m(4*z),0,z)}t(A,"mallocFloat"),s.mallocFloat32=s.mallocFloat=A;function S(z){return new Float64Array(m(8*z),0,z)}t(S,"mallocDouble"),s.mallocFloat64=s.mallocDouble=S;function k(z){return f?new Uint8ClampedArray(m(z),0,z):y(z)}t(k,"mallocUint8Clamped"),s.mallocUint8Clamped=k;function L(z){return h?new BigUint64Array(m(8*z),0,z):null}t(L,"mallocBigUint64"),s.mallocBigUint64=L;function P(z){return v?new BigInt64Array(m(8*z),0,z):null}t(P,"mallocBigInt64"),s.mallocBigInt64=P;function D(z){return new DataView(m(z),0,z)}t(D,"mallocDataView"),s.mallocDataView=D;function B(z){z=a.nextPow2(z);var R=a.log2(z),F=g[R];return F.length>0?F.pop():new u(z)}t(B,"mallocBuffer"),s.mallocBuffer=B,s.clearCache=t(function(){for(var R=0;R<32;++R)c.UINT8[R].length=0,c.UINT16[R].length=0,c.UINT32[R].length=0,c.INT8[R].length=0,c.INT16[R].length=0,c.INT32[R].length=0,c.FLOAT[R].length=0,c.DOUBLE[R].length=0,c.BIGUINT64[R].length=0,c.BIGINT64[R].length=0,c.UINT8C[R].length=0,d[R].length=0,g[R].length=0},"clearCache")}).call(this)}).call(this,typeof xs<"u"?xs:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(n,i,s){i.exports=o;function o(l){this.roots=new Array(l),this.ranks=new Array(l);for(var u=0;u<l;++u)this.roots[u]=u,this.ranks[u]=0}t(o,"UnionFind");var a=o.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var l=this.roots.length;return this.roots.push(l),this.ranks.push(0),l},a.find=function(l){for(var u=l,f=this.roots;f[l]!==l;)l=f[l];for(;f[u]!==l;){var h=f[u];f[u]=l,u=h}return l},a.link=function(l,u){var f=this.find(l),h=this.find(u);if(f!==h){var v=this.ranks,c=this.roots,d=v[f],g=v[h];d<g?c[f]=h:g<d?c[h]=f:(c[h]=f,++v[f])}}},{}],310:[function(n,i,s){function o(u,f){for(var h=1,v=u.length,c=u[0],d=u[0],g=1;g<v;++g)if(d=c,c=u[g],f(c,d)){if(g===h){h++;continue}u[h++]=c}return u.length=h,u}t(o,"unique_pred");function a(u){for(var f=1,h=u.length,v=u[0],c=u[0],d=1;d<h;++d,c=v)if(c=v,v=u[d],v!==c){if(d===f){f++;continue}u[f++]=v}return u.length=f,u}t(a,"unique_eq");function l(u,f,h){return u.length===0?u:f?(h||u.sort(f),o(u,f)):(h||u.sort(),a(u))}t(l,"unique"),i.exports=l},{}],311:[function(n,i,s){i.exports=u;var o=n("./lib/vtext"),a=null,l=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,l=a.getContext("2d"));function u(f,h){return(typeof h!="object"||h===null)&&(h={}),o(f,h.canvas||a,h.context||l,h)}t(u,"createText")},{"./lib/vtext":312}],312:[function(n,i,s){i.exports=L,i.exports.processPixels=k;var o=n("surface-nets"),a=n("ndarray"),l=n("simplify-planar-graph"),u=n("clean-pslg"),f=n("cdt2d"),h=n("planar-graph-to-polyline"),v="b",c="b|",d="i",g="i|",p="sup",b="+",m="+1",y="sub",T="-",_="-1";function M(P,D,B,z){for(var R="<"+P+">",F="</"+P+">",O=R.length,q=F.length,H=D[0]===b||D[0]===T,j=0,X=-q;j>-1&&(j=B.indexOf(R,j),!(j===-1||(X=B.indexOf(F,j+O),X===-1)||X<=j));){for(var G=j;G<X+q;++G)if(G<j+O||G>=X)z[G]=null,B=B.substr(0,G)+" "+B.substr(G+1);else if(z[G]!==null){var $=z[G].indexOf(D[0]);$===-1?z[G]+=D:H&&(z[G]=z[G].substr(0,$+1)+(1+parseInt(z[G][$+1]))+z[G].substr($+2))}var te=j+O,ee=B.substr(te,X-te),ie=ee.indexOf(R);ie!==-1?j=ie:j=X+q}return z}t(M,"parseTag");function w(P,D,B){for(var z=D.textAlign||"start",R=D.textBaseline||"alphabetic",F=[1<<30,1<<30],O=[0,0],q=P.length,H=0;H<q;++H)for(var j=P[H],X=0;X<2;++X)F[X]=Math.min(F[X],j[X])|0,O[X]=Math.max(O[X],j[X])|0;var G=0;switch(z){case"center":G=-.5*(F[0]+O[0]);break;case"right":case"end":G=-O[0];break;case"left":case"start":G=-F[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+z+"'")}var $=0;switch(R){case"hanging":case"top":$=-F[1];break;case"middle":$=-.5*(F[1]+O[1]);break;case"alphabetic":case"ideographic":$=-3*B;break;case"bottom":$=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+R+"'")}var te=1/B;return"lineHeight"in D?te*=+D.lineHeight:"width"in D?te=D.width/(O[0]-F[0]):"height"in D&&(te=D.height/(O[1]-F[1])),P.map(function(ee){return[te*(ee[0]+G),te*(ee[1]+$)]})}t(w,"transformPositions");function x(P,D,B,z,R,F){B=B.replace(/\n/g,""),F.breaklines===!0?B=B.replace(/\<br\>/g,`
`):B=B.replace(/\<br\>/g," ");var O="",q=[];for(ne=0;ne<B.length;++ne)q[ne]=O;F.bolds===!0&&(q=M(v,c,B,q)),F.italics===!0&&(q=M(d,g,B,q)),F.superscripts===!0&&(q=M(p,m,B,q)),F.subscripts===!0&&(q=M(y,_,B,q));var H=[],j="";for(ne=0;ne<B.length;++ne)q[ne]!==null&&(j+=B[ne],H.push(q[ne]));var X=j.split(`
`),G=X.length,$=Math.round(R*z),te=z,ee=z*2,ie=0,se=G*$+ee;P.height<se&&(P.height=se),D.fillStyle="#000",D.fillRect(0,0,P.width,P.height),D.fillStyle="#fff";var W,ne,he,re,ae,fe=0,ce="";function xe(){if(ce!==""){var De=D.measureText(ce).width;D.fillText(ce,te+he,ee+re),he+=De}}t(xe,"writeBuffer");function Te(){return""+Math.round(ae)+"px "}t(Te,"getTextFontSize");function me(De,Fe){var qe=""+D.font;if(F.subscripts===!0){var Je=De.indexOf(T),Ge=Fe.indexOf(T),et=Je>-1?parseInt(De[1+Je]):0,Ue=Ge>-1?parseInt(Fe[1+Ge]):0;et!==Ue&&(qe=qe.replace(Te(),"?px "),ae*=Math.pow(.75,Ue-et),qe=qe.replace("?px ",Te())),re+=.25*$*(Ue-et)}if(F.superscripts===!0){var Ye=De.indexOf(b),$e=Fe.indexOf(b),Ct=Ye>-1?parseInt(De[1+Ye]):0,It=$e>-1?parseInt(Fe[1+$e]):0;Ct!==It&&(qe=qe.replace(Te(),"?px "),ae*=Math.pow(.75,It-Ct),qe=qe.replace("?px ",Te())),re-=.25*$*(It-Ct)}if(F.bolds===!0){var Vt=De.indexOf(c)>-1,$t=Fe.indexOf(c)>-1;!Vt&&$t&&(Gt?qe=qe.replace("italic ","italic bold "):qe="bold "+qe),Vt&&!$t&&(qe=qe.replace("bold ",""))}if(F.italics===!0){var Gt=De.indexOf(g)>-1,Jt=Fe.indexOf(g)>-1;!Gt&&Jt&&(qe="italic "+qe),Gt&&!Jt&&(qe=qe.replace("italic ",""))}D.font=qe}for(t(me,"changeStyle"),W=0;W<G;++W){var pe=X[W]+`
`;for(he=0,re=W*$,ae=z,ce="",ne=0;ne<pe.length;++ne){var oe=ne+fe<H.length?H[ne+fe]:H[H.length-1];O===oe?ce+=pe[ne]:(xe(),ce=pe[ne],oe!==void 0&&(me(O,oe),O=oe))}xe(),fe+=pe.length;var de=Math.round(he+2*te)|0;ie<de&&(ie=de)}var ye=ie,we=ee+$*G,Ee=a(D.getImageData(0,0,ye,we).data,[we,ye,4]);return Ee.pick(-1,-1,0).transpose(1,0)}t(x,"getPixels");function A(P,D){var B=o(P,128);return D?l(B.cells,B.positions,.25):{edges:B.cells,positions:B.positions}}t(A,"getContour");function S(P,D,B,z){var R=A(P,z),F=w(R.positions,D,B),O=R.edges,q=D.orientation==="ccw";if(u(F,O),D.polygons||D.polygon||D.polyline){for(var H=h(O,F),j=new Array(H.length),X=0;X<H.length;++X){for(var G=H[X],$=new Array(G.length),te=0;te<G.length;++te){for(var ee=G[te],ie=new Array(ee.length),se=0;se<ee.length;++se)ie[se]=F[ee[se]].slice();q&&ie.reverse(),$[te]=ie}j[X]=$}return j}else return D.triangles||D.triangulate||D.triangle?{cells:f(F,O,{delaunay:!1,exterior:!1,interior:!0}),positions:F}:{edges:O,positions:F}}t(S,"processPixelsImpl");function k(P,D,B){try{return S(P,D,B,!0)}catch{}try{return S(P,D,B,!1)}catch{}return D.polygons||D.polyline||D.polygon?[]:D.triangles||D.triangulate||D.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}t(k,"processPixels");function L(P,D,B,z){var R=64,F=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};z&&(z.size&&z.size>0&&(R=z.size),z.lineSpacing&&z.lineSpacing>0&&(F=z.lineSpacing),z.styletags&&z.styletags.breaklines&&(O.breaklines=!!z.styletags.breaklines),z.styletags&&z.styletags.bolds&&(O.bolds=!!z.styletags.bolds),z.styletags&&z.styletags.italics&&(O.italics=!!z.styletags.italics),z.styletags&&z.styletags.subscripts&&(O.subscripts=!!z.styletags.subscripts),z.styletags&&z.styletags.superscripts&&(O.superscripts=!!z.styletags.superscripts)),B.font=[z.fontStyle,z.fontVariant,z.fontWeight,R+"px",z.font].filter(function(H){return H}).join(" "),B.textAlign="start",B.textBaseline="alphabetic",B.direction="ltr";var q=x(D,B,P,R,F,O);return k(q,z,R)}t(L,"vectorizeText")},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(n,i,s){t(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(k){k.permitHostObjects___&&k.permitHostObjects___(a)}t(a,"weakMapPermitHostObjects"),typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var l=!1;if(typeof WeakMap=="function"){var u=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var f=new u,h=Object.freeze({});if(f.set(h,1),f.get(h)!==1)l=!0;else{i.exports=WeakMap;return}}}var v=Object.getOwnPropertyNames,c=Object.defineProperty,d=Object.isExtensible,g="weakmap:",p=g+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var b=new ArrayBuffer(25),m=new Uint8Array(b);crypto.getRandomValues(m),p=g+"rand:"+Array.prototype.map.call(m,function(k){return(k%36).toString(36)}).join("")+"___"}function y(k){return!(k.substr(0,g.length)==g&&k.substr(k.length-3)==="___")}if(t(y,"isNotHiddenName"),c(Object,"getOwnPropertyNames",{value:t(function(L){return v(L).filter(y)},"fakeGetOwnPropertyNames")}),"getPropertyNames"in Object){var T=Object.getPropertyNames;c(Object,"getPropertyNames",{value:t(function(L){return T(L).filter(y)},"fakeGetPropertyNames")})}function _(k){if(k!==Object(k))throw new TypeError("Not an object: "+k);var L=k[p];if(L&&L.key===k)return L;if(!!d(k)){L={key:k};try{return c(k,p,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}t(_,"getHiddenRecord"),function(){var k=Object.freeze;c(Object,"freeze",{value:t(function(B){return _(B),k(B)},"identifyingFreeze")});var L=Object.seal;c(Object,"seal",{value:t(function(B){return _(B),L(B)},"identifyingSeal")});var P=Object.preventExtensions;c(Object,"preventExtensions",{value:t(function(B){return _(B),P(B)},"identifyingPreventExtensions")})}();function M(k){return k.prototype=null,Object.freeze(k)}t(M,"constFunc");var w=!1;function x(){!w&&typeof console<"u"&&(w=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}t(x,"calledAsFunctionWarning");var A=0,S=t(function(){this instanceof S||x();var k=[],L=[],P=A++;function D(F,O){var q,H=_(F);return H?P in H?H[P]:O:(q=k.indexOf(F),q>=0?L[q]:O)}t(D,"get___");function B(F){var O=_(F);return O?P in O:k.indexOf(F)>=0}t(B,"has___");function z(F,O){var q,H=_(F);return H?H[P]=O:(q=k.indexOf(F),q>=0?L[q]=O:(q=k.length,L[q]=O,k[q]=F)),this}t(z,"set___");function R(F){var O=_(F),q,H;return O?P in O&&delete O[P]:(q=k.indexOf(F),q<0?!1:(H=k.length-1,k[q]=void 0,L[q]=L[H],k[q]=k[H],k.length=H,L.length=H,!0))}return t(R,"delete___"),Object.create(S.prototype,{get___:{value:M(D)},has___:{value:M(B)},set___:{value:M(z)},delete___:{value:M(R)}})},"OurWeakMap");S.prototype=Object.create(Object.prototype,{get:{value:t(function(L,P){return this.get___(L,P)},"get"),writable:!0,configurable:!0},has:{value:t(function(L){return this.has___(L)},"has"),writable:!0,configurable:!0},set:{value:t(function(L,P){return this.set___(L,P)},"set"),writable:!0,configurable:!0},delete:{value:t(function(L){return this.delete___(L)},"remove"),writable:!0,configurable:!0}}),typeof u=="function"?function(){l&&typeof Proxy<"u"&&(Proxy=void 0);function k(){this instanceof S||x();var L=new u,P=void 0,D=!1;function B(O,q){return P?L.has(O)?L.get(O):P.get___(O,q):L.get(O,q)}t(B,"dget");function z(O){return L.has(O)||(P?P.has___(O):!1)}t(z,"dhas");var R;l?R=t(function(O,q){return L.set(O,q),L.has(O)||(P||(P=new S),P.set(O,q)),this},"dset"):R=t(function(O,q){if(D)try{L.set(O,q)}catch{P||(P=new S),P.set___(O,q)}else L.set(O,q);return this},"dset");function F(O){var q=!!L.delete(O);return P&&P.delete___(O)||q}return t(F,"ddelete"),Object.create(S.prototype,{get___:{value:M(B)},has___:{value:M(z)},set___:{value:M(R)},delete___:{value:M(F)},permitHostObjects___:{value:M(function(O){if(O===a)D=!0;else throw new Error("bogus call to permitHostObjects___")})}})}t(k,"DoubleWeakMap"),k.prototype=S.prototype,i.exports=k,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),i.exports=S)},"WeakMapModule")()},{}],314:[function(n,i,s){var o=n("./hidden-store.js");i.exports=a;function a(){var l={};return function(u){if((typeof u!="object"||u===null)&&typeof u!="function")throw new Error("Weakmap-shim: Key must be object");var f=u.valueOf(l);return f&&f.identity===l?f:o(u,l)}}t(a,"createStore")},{"./hidden-store.js":315}],315:[function(n,i,s){i.exports=o;function o(a,l){var u={identity:l},f=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(h){return h!==l?f.apply(this,arguments):u},writable:!0}),u}t(o,"hiddenStore")},{}],316:[function(n,i,s){var o=n("./create-store.js");i.exports=a;function a(){var l=o();return{get:function(u,f){var h=l(u);return h.hasOwnProperty("value")?h.value:f},set:function(u,f){return l(u).value=f,this},has:function(u){return"value"in l(u)},delete:function(u){return delete l(u).value}}}t(a,"weakMap")},{"./create-store.js":314}],317:[function(n,i,s){function o(){return function(v,c,d,g,p,b){var m=v[0],y=d[0],T=[0],_=y;g|=0;var M=0,w=y;for(M=0;M<m;++M){{var x=c[g]-b,A=c[g+_]-b;x>=0!=A>=0&&p.push(T[0]+.5+.5*(x+A)/(x-A))}g+=w,++T[0]}}}t(o,"CWiseOp");function a(){return o()}t(a,"generateCWiseOp");var l=a;function u(v){var c={};return t(function(g,p,b){var m=g.dtype,y=g.order,T=[m,y.join()].join(),_=c[T];return _||(c[T]=_=v([m,y])),_(g.shape.slice(0),g.data,g.stride,g.offset|0,p,b)},"zeroCrossings_cwise_thunk")}t(u,"thunk");function f(v){return u(l.bind(void 0,v))}t(f,"createThunk");function h(v){return f({funcName:v.funcName})}t(h,"compileCwise"),i.exports=h({funcName:"zeroCrossings"})},{}],318:[function(n,i,s){i.exports=a;var o=n("./lib/zc-core");function a(l,u){var f=[];return u=+u||0,o(l.hi(l.shape[0]-1),f,u),f}t(a,"findZeroCrossings")},{"./lib/zc-core":317}]},{},[6])(6)})}(EE)),EE.exports}t(ys,"requireStackgl_modules");var CE,YW;function aIe(){return YW||(YW=1,CE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),CE}t(aIe,"requireColorName");var LE,WW;function nIe(){if(WW)return LE;WW=1;var e=Object.prototype.toString;return LE=t(function(r){var n;return e.call(r)==="[object Object]"&&(n=Object.getPrototypeOf(r),n===null||n===Object.getPrototypeOf({}))},"isPlainObj$1"),LE}t(nIe,"requireIsPlainObj$1");var RE,XW;function phe(){return XW||(XW=1,RE=t(function(){for(var r=0;r<arguments.length;r++)if(typeof arguments[r]<"u")return arguments[r]},"defined")),RE}t(phe,"requireDefined");var PE,ZW;function iIe(){if(ZW)return PE;ZW=1;var e=aIe(),r=nIe(),n=phe();PE=s;var i={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function s(o){var a,l=[],u=1,f;if(typeof o=="string")if(e[o])l=e[o].slice(),f="rgb";else if(o==="transparent")u=0,f="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var h=o.slice(1),v=h.length,c=v<=4;u=1,c?(l=[parseInt(h[0]+h[0],16),parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16)],v===4&&(u=parseInt(h[3]+h[3],16)/255)):(l=[parseInt(h[0]+h[1],16),parseInt(h[2]+h[3],16),parseInt(h[4]+h[5],16)],v===8&&(u=parseInt(h[6]+h[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),f="rgb"}else if(a=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var d=a[1],g=d==="rgb",h=d.replace(/a$/,"");f=h;var v=h==="cmyk"?4:h==="gray"?1:3;l=a[2].trim().split(/\s*,\s*/).map(function(y,T){if(/%$/.test(y))return T===v?parseFloat(y)/100:h==="rgb"?parseFloat(y)*255/100:parseFloat(y);if(h[T]==="h"){if(/deg$/.test(y))return parseFloat(y);if(i[y]!==void 0)return i[y]}return parseFloat(y)}),d===h&&l.push(1),u=g||l[v]===void 0?1:l[v],l=l.slice(0,v)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(l=o.match(/([0-9]+)/g).map(function(b){return parseFloat(b)}),f=o.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(o))f="rgb",l=[o>>>16,(o&65280)>>>8,o&255];else if(r(o)){var p=n(o.r,o.red,o.R,null);p!==null?(f="rgb",l=[p,n(o.g,o.green,o.G),n(o.b,o.blue,o.B)]):(f="hsl",l=[n(o.h,o.hue,o.H),n(o.s,o.saturation,o.S),n(o.l,o.lightness,o.L,o.b,o.brightness)]),u=n(o.a,o.alpha,o.opacity,1),o.opacity!=null&&(u/=100)}else(Array.isArray(o)||xs.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o))&&(l=[o[0],o[1],o[2]],f="rgb",u=o.length===4?o[3]:1);return{space:f,values:l,alpha:u}}return t(s,"parse"),PE}t(iIe,"requireColorParse");var DE,KW;function oIe(){return KW||(KW=1,DE={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}),DE}t(oIe,"requireRgb");var IE,JW;function sIe(){if(JW)return IE;JW=1;var e=oIe();return IE={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var n=r[0]/360,i=r[1]/100,s=r[2]/100,o,a,l,u,f;if(i===0)return f=s*255,[f,f,f];s<.5?a=s*(1+i):a=s+i-s*i,o=2*s-a,u=[0,0,0];for(var h=0;h<3;h++)l=n+1/3*-(h-1),l<0?l++:l>1&&l--,6*l<1?f=o+(a-o)*6*l:2*l<1?f=a:3*l<2?f=o+(a-o)*(2/3-l)*6:f=o,u[h]=f*255;return u}},e.hsl=function(r){var n=r[0]/255,i=r[1]/255,s=r[2]/255,o=Math.min(n,i,s),a=Math.max(n,i,s),l=a-o,u,f,h;return a===o?u=0:n===a?u=(i-s)/l:i===a?u=2+(s-n)/l:s===a&&(u=4+(n-i)/l),u=Math.min(u*60,360),u<0&&(u+=360),h=(o+a)/2,a===o?f=0:h<=.5?f=l/(a+o):f=l/(2-a-o),[u,f*100,h*100]},IE}t(sIe,"requireHsl");var zE,QW;function Jw(){if(QW)return zE;QW=1,zE=e;function e(r,n,i){return n<i?r<n?n:r>i?i:r:r<i?i:r>n?n:r}return t(e,"clamp"),zE}t(Jw,"requireClamp");var FE,eX;function ghe(){if(eX)return FE;eX=1;var e=iIe(),r=sIe(),n=Jw();return FE=t(function(s){var o,a=e(s);return a.space?(o=Array(3),o[0]=n(a.values[0],0,255),o[1]=n(a.values[1],0,255),o[2]=n(a.values[2],0,255),a.space[0]==="h"&&(o=r.rgb(o)),o.push(n(a.alpha,0,1)),o):[]},"rgba"),FE}t(ghe,"requireColorRgba");var BE,tX;function O7(){return tX||(tX=1,BE=t(function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},"dtype")),BE}t(O7,"requireDtype");var OE,rX;function z0(){if(rX)return OE;rX=1;var e=ghe(),r=Jw(),n=O7();OE=t(function(o,a){(a==="float"||!a)&&(a="array"),a==="uint"&&(a="uint8"),a==="uint_clamped"&&(a="uint8_clamped");var l=n(a),u=new l(4),f=a!=="uint8"&&a!=="uint8_clamped";return(!o.length||typeof o=="string")&&(o=e(o),o[0]/=255,o[1]/=255,o[2]/=255),i(o)?(u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3]!=null?o[3]:255,f&&(u[0]/=255,u[1]/=255,u[2]/=255,u[3]/=255),u):(f?(u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3]!=null?o[3]:1):(u[0]=r(Math.floor(o[0]*255),0,255),u[1]=r(Math.floor(o[1]*255),0,255),u[2]=r(Math.floor(o[2]*255),0,255),u[3]=o[3]==null?255:r(Math.floor(o[3]*255),0,255)),u)},"normalize");function i(s){return!!(s instanceof Uint8Array||s instanceof Uint8ClampedArray||Array.isArray(s)&&(s[0]>1||s[0]===0)&&(s[1]>1||s[1]===0)&&(s[2]>1||s[2]===0)&&(!s[3]||s[3]>1))}return t(i,"isInt"),OE}t(z0,"requireColorNormalize");var NE,aX;function zh(){if(aX)return NE;aX=1;var e=z0();function r(n){return n?e(n):[0,0,0,1]}return t(r,"str2RgbaArray"),NE=r,NE}t(zh,"requireStr2rgbarray");var qE,nX;function mp(){if(nX)return qE;nX=1;var e=xn,r=rl.exports,n=z0(),i=ko,s=Fo.defaultLine,o=Cf.isArrayOrTypedArray,a=n(s),l=1;function u(d,g){var p=d;return p[3]*=g,p}t(u,"calculateColor");function f(d){if(e(d))return a;var g=n(d);return g.length?g:a}t(f,"validateColor");function h(d){return e(d)?d:l}t(h,"validateOpacity");function v(d,g,p){var b=d.color,m=o(b),y=o(g),T=i.extractOpts(d),_=[],M,w,x,A,S;if(T.colorscale!==void 0?M=i.makeColorScaleFuncFromTrace(d):M=f,m?w=t(function(L,P){return L[P]===void 0?a:n(M(L[P]))},"getColor"):w=f,y?x=t(function(L,P){return L[P]===void 0?l:h(L[P])},"getOpacity"):x=h,m||y)for(var k=0;k<p;k++)A=w(b,k),S=x(g,k),_[k]=u(A,S);else _=u(n(b),g);return _}t(v,"formatColor");function c(d){var g=i.extractOpts(d),p=g.colorscale;return g.reversescale&&(p=i.flipScale(g.colorscale)),p.map(function(b){var m=b[0],y=r(b[1]),T=y.toRgb();return{index:m,rgb:[T.r,T.g,T.b,T.a]}})}return t(c,"parseColorScale"),qE={formatColor:v,parseColorScale:c},qE}t(mp,"requireGl_format_color");var UE,iX;function yhe(){return iX||(iX=1,UE={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}),UE}t(yhe,"requireGl3d_dashes");var HE,oX;function N7(){return oX||(oX=1,HE={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}),HE}t(N7,"requireGl3d_markers");var $E,sX;function lIe(){if(sX)return $E;sX=1;var e=Na;function r(s,o,a,l){if(!o||!o.visible)return null;for(var u=e.getComponentMethod("errorbars","makeComputeError")(o),f=new Array(s.length),h=0;h<s.length;h++){var v=u(+s[h],h);if(l.type==="log"){var c=l.c2l(s[h]),d=s[h]-v[0],g=s[h]+v[1];if(f[h]=[(l.c2l(d,!0)-c)*a,(l.c2l(g,!0)-c)*a],d>0){var p=l.c2l(d);l._lowerLogErrorBound||(l._lowerLogErrorBound=p),l._lowerErrorBound=Math.min(l._lowerLogErrorBound,p)}}else f[h]=[-v[0]*a,v[1]*a]}return f}t(r,"calculateAxisErrors");function n(s){for(var o=0;o<s.length;o++)if(s[o])return s[o].length;return 0}t(n,"dataLength");function i(s,o,a){var l=[r(s.x,s.error_x,o[0],a.xaxis),r(s.y,s.error_y,o[1],a.yaxis),r(s.z,s.error_z,o[2],a.zaxis)],u=n(l);if(u===0)return null;for(var f=new Array(u),h=0;h<u;h++){for(var v=[[0,0,0],[0,0,0]],c=0;c<3;c++)if(l[c])for(var d=0;d<2;d++)v[d][c]=l[c][h][d];f[h]=v}return f}return t(i,"calculateErrors"),$E=i,$E}t(lIe,"requireCalc_errors");var VE,lX;function uIe(){if(lX)return VE;lX=1;var e=ys().gl_line3d,r=ys().gl_scatter3d,n=ys().gl_error3d,i=ys().gl_mesh3d,s=ys().delaunay_triangulate,o=Nt.exports,a=zh(),l=mp().formatColor,u=vw,f=yhe(),h=N7(),v=nn(),c=Rf.appendArrayPointValue,d=lIe();function g(P,D){this.scene=P,this.uid=D,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}t(g,"LineWithMarkers");var p=g.prototype;p.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var D=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[D]||this.textLabels[D]===0)&&(P.textLabel=this.textLabels[D]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[D],this.data.y[D],this.data.z[D]],!0}};function b(P,D,B){var z=(B+1)%3,R=(B+2)%3,F=[],O=[],q;for(q=0;q<P.length;++q){var H=P[q];isNaN(H[z])||!isFinite(H[z])||isNaN(H[R])||!isFinite(H[R])||(F.push([H[z],H[R]]),O.push(q))}var j=s(F);for(q=0;q<j.length;++q)for(var X=j[q],G=0;G<X.length;++G)X[G]=O[X[G]];return{positions:P,cells:j,meshColor:D}}t(b,"constructDelaunay");function m(P){for(var D=[0,0,0],B=[[0,0,0],[0,0,0],[0,0,0]],z=[1,1,1],R=0;R<3;R++){var F=P[R];F&&F.copy_zstyle!==!1&&P[2].visible!==!1&&(F=P[2]),!(!F||!F.visible)&&(D[R]=F.width/2,B[R]=a(F.color),z[R]=F.thickness)}return{capSize:D,color:B,lineWidth:z}}t(m,"calculateErrorParams");function y(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}t(y,"parseAlignmentX");function T(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}t(T,"parseAlignmentY");function _(P){var D=0,B=0,z=[D,B];if(Array.isArray(P))for(var R=0;R<P.length;R++)z[R]=[D,B],P[R]&&(z[R][0]=y(P[R]),z[R][1]=T(P[R]));else z[0]=y(P),z[1]=T(P);return z}t(_,"calculateTextOffset");function M(P,D){return D(P*4)}t(M,"calculateSize");function w(P){return h[P]}t(w,"calculateSymbol");function x(P,D,B,z,R){var F=null;if(o.isArrayOrTypedArray(P)){F=[];for(var O=0;O<D;O++)P[O]===void 0?F[O]=z:F[O]=B(P[O],R)}else F=B(P,o.identity);return F}t(x,"formatParam");function A(P,D){var B=[],z=P.fullSceneLayout,R=P.dataScale,F=z.xaxis,O=z.yaxis,q=z.zaxis,H=D.marker,j=D.line,X=D.x||[],G=D.y||[],$=D.z||[],te=X.length,ee=D.xcalendar,ie=D.ycalendar,se=D.zcalendar,W,ne,he,re,ae,fe;for(ae=0;ae<te;ae++)W=F.d2l(X[ae],0,ee)*R[0],ne=O.d2l(G[ae],0,ie)*R[1],he=q.d2l($[ae],0,se)*R[2],B[ae]=[W,ne,he];if(Array.isArray(D.text))fe=D.text;else if(D.text!==void 0)for(fe=new Array(te),ae=0;ae<te;ae++)fe[ae]=D.text;function ce(et,Ue){var Ye=z[et];return v.tickText(Ye,Ye.d2l(Ue),!0).text}t(ce,"formatter");var xe=D.texttemplate;if(xe){var Te=P.fullLayout,me=Te._d3locale,pe=Array.isArray(xe),oe=pe?Math.min(xe.length,te):te,de=pe?function(et){return xe[et]}:function(){return xe};for(fe=new Array(oe),ae=0;ae<oe;ae++){var ye={x:X[ae],y:G[ae],z:$[ae]},we={xLabel:ce("xaxis",X[ae]),yLabel:ce("yaxis",G[ae]),zLabel:ce("zaxis",$[ae])},Ee={};c(Ee,D,ae);var De=D._meta||{};fe[ae]=o.texttemplateString(de(ae),we,me,Ee,ye,De)}}if(re={position:B,mode:D.mode,text:fe},"line"in D&&(re.lineColor=l(j,1,te),re.lineWidth=j.width,re.lineDashes=j.dash),"marker"in D){var Fe=u(D);re.scatterColor=l(H,1,te),re.scatterSize=x(H.size,te,M,20,Fe),re.scatterMarker=x(H.symbol,te,w,"\u25CF"),re.scatterLineWidth=H.line.width,re.scatterLineColor=l(H.line,1,te),re.scatterAngle=0}"textposition"in D&&(re.textOffset=_(D.textposition),re.textColor=l(D.textfont,1,te),re.textSize=x(D.textfont.size,te,o.identity,12),re.textFont=D.textfont.family,re.textAngle=0);var qe=["x","y","z"];for(re.project=[!1,!1,!1],re.projectScale=[1,1,1],re.projectOpacity=[1,1,1],ae=0;ae<3;++ae){var Je=D.projection[qe[ae]];(re.project[ae]=Je.show)&&(re.projectOpacity[ae]=Je.opacity,re.projectScale[ae]=Je.scale)}re.errorBounds=d(D,R,z);var Ge=m([D.error_x,D.error_y,D.error_z]);return re.errorColor=Ge.color,re.errorLineWidth=Ge.lineWidth,re.errorCapSize=Ge.capSize,re.delaunayAxis=D.surfaceaxis,re.delaunayColor=a(D.surfacecolor),re}t(A,"convertPlotlyOptions");function S(P){if(o.isArrayOrTypedArray(P)){var D=P[0];return o.isArrayOrTypedArray(D)&&(P=D),"rgb("+P.slice(0,3).map(function(B){return Math.round(B*255)})+")"}return null}t(S,"_arrayToColor");function k(P){return o.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?S(P):P.map(S):null}t(k,"arrayToColor"),p.update=function(P){var D=this.scene.glplot.gl,B,z,R,F,O=f.solid;this.data=P;var q=A(this.scene,P);"mode"in q&&(this.mode=q.mode),"lineDashes"in q&&q.lineDashes in f&&(O=f[q.lineDashes]),this.color=k(q.scatterColor)||k(q.lineColor),this.dataPoints=q.position,B={gl:this.scene.glplot.gl,position:q.position,color:q.lineColor,lineWidth:q.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(B):(this.linePlot=e(B),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var H=P.opacity;if(P.marker&&P.marker.opacity&&(H*=P.marker.opacity),z={gl:this.scene.glplot.gl,position:q.position,color:q.scatterColor,size:q.scatterSize,glyph:q.scatterMarker,opacity:H,orthographic:!0,lineWidth:q.scatterLineWidth,lineColor:q.scatterLineColor,project:q.project,projectScale:q.projectScale,projectOpacity:q.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(z):(this.scatterPlot=r(z),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),F={gl:this.scene.glplot.gl,position:q.position,glyph:q.text,color:q.textColor,size:q.textSize,angle:q.textAngle,alignment:q.textOffset,font:q.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(F):(this.textMarkers=r(F),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:q.position,color:q.errorColor,error:q.errorBounds,lineWidth:q.errorLineWidth,capSize:q.errorCapSize,opacity:P.opacity},this.errorBars?q.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):q.errorBounds&&(this.errorBars=n(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),q.delaunayAxis>=0){var j=b(q.position,q.delaunayColor,q.delaunayAxis);j.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(j):(j.gl=D,this.delaunayMesh=i(j),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},p.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function L(P,D){var B=new g(P,D.uid);return B.update(D),B}return t(L,"createLineWithMarkers"),VE=L,VE}t(uIe,"requireConvert$e");var GE={exports:{}},uX;function mhe(){if(uX)return GE.exports;uX=1;var e=Ps,r=Qi,n=Vo.axisHoverFormat,i=Un.hovertemplateAttrs,s=Un.texttemplateAttrs,o=Ni,a=yhe(),l=N7(),u=cn.extendFlat,f=_o.overrideAll,h=Ay,v=e.line,c=e.marker,d=c.line,g=u({width:v.width,dash:{valType:"enumerated",values:h(a),dflt:"solid",description:"Sets the dash style of the lines."}},r("line"));function p(m){return{show:{valType:"boolean",dflt:!1,description:["Sets whether or not projections are shown along the",m,"axis."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:"Sets the projection color."},scale:{valType:"number",min:0,max:10,dflt:2/3,description:["Sets the scale factor determining the size of the","projection marker points."].join(" ")}}}t(p,"makeProjectionAttr");var b=GE.exports=f({x:e.x,y:e.y,z:{valType:"data_array",description:"Sets the z coordinates."},text:u({},e.text,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:s({},{}),hovertext:u({},e.hovertext,{description:["Sets text elements associated with each (x,y,z) triplet.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y,z) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),hovertemplate:i(),xhoverformat:n("x"),yhoverformat:n("y"),zhoverformat:n("z"),mode:u({},e.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1,description:["If *-1*, the scatter points are not fill with a surface","If *0*, *1*, *2*, the scatter points are filled with","a Delaunay surface about the x, y, z respectively."].join(" ")},surfacecolor:{valType:"color",description:"Sets the surface fill color."},projection:{x:p("x"),y:p("y"),z:p("z")},connectgaps:e.connectgaps,line:g,marker:u({symbol:{valType:"enumerated",values:h(l),dflt:"circle",arrayOk:!0,description:"Sets the marker symbol type."},size:u({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:u({},c.opacity,{arrayOk:!1,description:["Sets the marker opacity.","Note that the marker opacity for scatter3d traces","must be a scalar value for performance reasons.","To set a blending opacity value","(i.e. which is not transparent), set *marker.color*","to an rgba color and use its alpha channel."].join(" ")}),colorbar:c.colorbar,line:u({width:u({},d.width,{arrayOk:!1})},r("marker.line"))},r("marker")),textposition:u({},e.textposition,{dflt:"top center"}),textfont:{color:e.textfont.color,size:e.textfont.size,family:u({},e.textfont.family,{arrayOk:!1})},opacity:o.opacity,hoverinfo:u({},o.hoverinfo)},"calc","nested");return b.x.editType=b.y.editType=b.z.editType="calc+clearAxisTypes",GE.exports}t(mhe,"requireAttributes$u");var jE,fX;function fIe(){if(fX)return jE;fX=1;var e=Na,r=Nt.exports,n=ho,i=Ph,s=mv,o=xv,a=mhe();jE=t(function(f,h,v,c){function d(M,w){return r.coerce(f,h,a,M,w)}t(d,"coerce");var g=l(f,h,d,c);if(!g){h.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),d("mode"),n.hasLines(h)&&(d("connectgaps"),s(f,h,v,c,d)),n.hasMarkers(h)&&i(f,h,v,c,d,{noSelect:!0,noAngle:!0}),n.hasText(h)&&(d("texttemplate"),o(f,h,c,d,{noSelect:!0}));var p=(h.line||{}).color,b=(h.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",p||b);for(var m=["x","y","z"],y=0;y<3;++y){var T="projection."+m[y];d(T+".show")&&(d(T+".opacity"),d(T+".scale"))}var _=e.getComponentMethod("errorbars","supplyDefaults");_(f,h,p||b||v,{axis:"z"}),_(f,h,p||b||v,{axis:"y",inherit:"z"}),_(f,h,p||b||v,{axis:"x",inherit:"z"})},"supplyDefaults");function l(u,f,h,v){var c=0,d=h("x"),g=h("y"),p=h("z"),b=e.getComponentMethod("calendars","handleTraceDefaults");return b(u,f,["x","y","z"],v),d&&g&&p&&(c=Math.min(d.length,g.length,p.length),f._length=f._xlength=f._ylength=f._zlength=c),c}return t(l,"handleXYZDefaults"),jE}t(fIe,"requireDefaults$u");var YE,cX;function xhe(){if(cX)return YE;cX=1;var e=pd,r=Dh;return YE=t(function(i,s){var o=[{x:!1,y:!1,trace:s,t:{}}];return e(o,s),r(i,s),o},"calc"),YE}t(xhe,"requireCalc$o");var hu={},WE,hX;function cIe(){if(hX)return WE;hX=1,WE=e;function e(r,n){if(typeof r!="string")throw new TypeError("must specify type string");if(n=n||{},typeof document>"u"&&!n.canvas)return null;var i=n.canvas||document.createElement("canvas");typeof n.width=="number"&&(i.width=n.width),typeof n.height=="number"&&(i.height=n.height);var s=n,o;try{var a=[r];r.indexOf("webgl")===0&&a.push("experimental-"+r);for(var l=0;l<a.length;l++)if(o=i.getContext(a[l],s),o)return o}catch{o=null}return o||null}return t(e,"getCanvasContext"),WE}t(cIe,"requireGetCanvasContext");var XE,vX;function bhe(){if(vX)return XE;vX=1;var e=cIe();return XE=t(function(n){return e("webgl",n)},"getWebGLContext"),XE}t(bhe,"requireWebglContext");var ZE,dX;function q7(){if(dX)return ZE;dX=1;var e=$a.exports,r=t(function(){},"noop");return ZE=t(function(i){for(var s in i)typeof i[s]=="function"&&(i[s]=r);i.destroy=function(){i.container.parentNode.removeChild(i.container)};var o=document.createElement("div");o.className="no-webgl",o.style.cursor="pointer",o.style.fontSize="24px",o.style.color=e.defaults[0],o.style.position="absolute",o.style.left=o.style.top="0px",o.style.width=o.style.height="100%",o.style["background-color"]=e.lightLine,o.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",o.appendChild(a),i.container.appendChild(o),i.container.style.background="#FFFFFF",i.container.onclick=function(){window.open("https://get.webgl.org")},!1},"showNoWebGlMsg"),ZE}t(q7,"requireShow_no_webgl_msg");var KE,pX;function hIe(){if(pX)return KE;pX=1;var e=zh(),r=Nt.exports,n=["xaxis","yaxis","zaxis"];function i(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}t(i,"AxesOptions");var s=i.prototype;s.merge=function(a,l){for(var u=this,f=0;f<3;++f){var h=l[n[f]];if(!h.visible){u.tickEnable[f]=!1,u.labelEnable[f]=!1,u.lineEnable[f]=!1,u.lineTickEnable[f]=!1,u.gridEnable[f]=!1,u.zeroEnable[f]=!1,u.backgroundEnable[f]=!1;continue}u.labels[f]=a._meta?r.templateString(h.title.text,a._meta):h.title.text,"font"in h.title&&(h.title.font.color&&(u.labelColor[f]=e(h.title.font.color)),h.title.font.family&&(u.labelFont[f]=h.title.font.family),h.title.font.size&&(u.labelSize[f]=h.title.font.size)),"showline"in h&&(u.lineEnable[f]=h.showline),"linecolor"in h&&(u.lineColor[f]=e(h.linecolor)),"linewidth"in h&&(u.lineWidth[f]=h.linewidth),"showgrid"in h&&(u.gridEnable[f]=h.showgrid),"gridcolor"in h&&(u.gridColor[f]=e(h.gridcolor)),"gridwidth"in h&&(u.gridWidth[f]=h.gridwidth),h.type==="log"?u.zeroEnable[f]=!1:"zeroline"in h&&(u.zeroEnable[f]=h.zeroline),"zerolinecolor"in h&&(u.zeroLineColor[f]=e(h.zerolinecolor)),"zerolinewidth"in h&&(u.zeroLineWidth[f]=h.zerolinewidth),"ticks"in h&&!!h.ticks?u.lineTickEnable[f]=!0:u.lineTickEnable[f]=!1,"ticklen"in h&&(u.lineTickLength[f]=u._defaultLineTickLength[f]=h.ticklen),"tickcolor"in h&&(u.lineTickColor[f]=e(h.tickcolor)),"tickwidth"in h&&(u.lineTickWidth[f]=h.tickwidth),"tickangle"in h&&(u.tickAngle[f]=h.tickangle==="auto"?-3600:Math.PI*-h.tickangle/180),"showticklabels"in h&&(u.tickEnable[f]=h.showticklabels),"tickfont"in h&&(h.tickfont.color&&(u.tickColor[f]=e(h.tickfont.color)),h.tickfont.family&&(u.tickFont[f]=h.tickfont.family),h.tickfont.size&&(u.tickSize[f]=h.tickfont.size)),"mirror"in h?["ticks","all","allticks"].indexOf(h.mirror)!==-1?(u.lineTickMirror[f]=!0,u.lineMirror[f]=!0):h.mirror===!0?(u.lineTickMirror[f]=!1,u.lineMirror[f]=!0):(u.lineTickMirror[f]=!1,u.lineMirror[f]=!1):u.lineMirror[f]=!1,"showbackground"in h&&h.showbackground!==!1?(u.backgroundEnable[f]=!0,u.backgroundColor[f]=e(h.backgroundcolor)):u.backgroundEnable[f]=!1}};function o(a,l){var u=new i;return u.merge(a,l),u}return t(o,"createAxesOptions"),KE=o,KE}t(hIe,"requireConvert$d");var JE,gX;function vIe(){if(gX)return JE;gX=1;var e=zh(),r=["xaxis","yaxis","zaxis"];function n(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}t(n,"SpikeOptions");var i=n.prototype;i.merge=function(o){for(var a=0;a<3;++a){var l=o[r[a]];if(!l.visible){this.enabled[a]=!1,this.drawSides[a]=!1;continue}this.enabled[a]=l.showspikes,this.colors[a]=e(l.spikecolor),this.drawSides[a]=l.spikesides,this.lineWidth[a]=l.spikethickness}};function s(o){var a=new n;return a.merge(o),a}return t(s,"createSpikeOptions"),JE=s,JE}t(vIe,"requireSpikes");var QE,yX;function dIe(){if(yX)return QE;yX=1,QE=s;var e=nn(),r=Nt.exports,n=["xaxis","yaxis","zaxis"];function i(o){for(var a=new Array(3),l=0;l<3;++l){for(var u=o[l],f=new Array(u.length),h=0;h<u.length;++h)f[h]=u[h].x;a[l]=f}return a}t(i,"contourLevelsFromTicks");function s(o){for(var a=o.axesOptions,l=o.glplot.axesPixels,u=o.fullSceneLayout,f=[[],[],[]],h=0;h<3;++h){var v=u[n[h]];if(v._length=(l[h].hi-l[h].lo)*l[h].pixelsPerDataUnit/o.dataScale[h],Math.abs(v._length)===1/0||isNaN(v._length))f[h]=[];else{v._input_range=v.range.slice(),v.range[0]=l[h].lo/o.dataScale[h],v.range[1]=l[h].hi/o.dataScale[h],v._m=1/(o.dataScale[h]*l[h].pixelsPerDataUnit),v.range[0]===v.range[1]&&(v.range[0]-=1,v.range[1]+=1);var c=v.tickmode;if(v.tickmode==="auto"){v.tickmode="linear";var d=v.nticks||r.constrain(v._length/40,4,9);e.autoTicks(v,Math.abs(v.range[1]-v.range[0])/d)}for(var g=e.calcTicks(v,{msUTC:!0}),p=0;p<g.length;++p)g[p].x=g[p].x*o.dataScale[h],v.type==="date"&&(g[p].text=g[p].text.replace(/\<br\>/g," "));f[h]=g,v.tickmode=c}}a.ticks=f;for(var h=0;h<3;++h){.5*(o.glplot.bounds[0][h]+o.glplot.bounds[1][h]);for(var p=0;p<2;++p)a.bounds[p][h]=o.glplot.bounds[p][h]}o.contourLevels=i(f)}return t(s,"computeTickMarks"),QE}t(dIe,"requireTick_marks");var eC,mX;function pIe(){if(mX)return eC;mX=1;var e=ys().gl_plot3d,r=e.createCamera,n=e.createScene,i=bhe(),s=gw,o=Na,a=Nt.exports,l=a.preserveDrawingBuffer(),u=nn(),f=Ko,h=zh(),v=q7(),c=tfe,d=hIe(),g=vIe(),p=dIe(),b,m;function y(P,D){var B=document.createElement("div"),z=P.container;this.graphDiv=P.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",B.appendChild(R),this.svgContainer=R,B.id=P.id,B.style.position="absolute",B.style.top=B.style.left="0px",B.style.width=B.style.height="100%",z.appendChild(B),this.fullLayout=D,this.id=P.id||"scene",this.fullSceneLayout=D[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(D,D[this.id]),this.spikeOptions=g(D[this.id]),this.container=B,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=o.getComponentMethod("annotations3d","convert"),this.drawAnnotations=o.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}t(y,"Scene");var T=y.prototype;T.prepareOptions=function(){var P=this,D={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:l,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!m&&(b=document.createElement("canvas"),m=i({canvas:b,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!m))throw new Error("error creating static canvas/context for image server");D.gl=m,D.canvas=b}return D};var _=!0;T.tryCreatePlot=function(){var P=this,D=P.prepareOptions(),B=!0;try{P.glplot=n(D)}catch{if(P.staticMode||!_||l)B=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{l=D.glOptions.preserveDrawingBuffer=!0,P.glplot=n(D)}catch{l=D.glOptions.preserveDrawingBuffer=!1,B=!1}}}return _=!1,B},T.initializeGLCamera=function(){var P=this,D=P.fullSceneLayout.camera,B=D.projection.type==="orthographic";P.camera=r(P.container,{center:[D.center.x,D.center.y,D.center.z],eye:[D.eye.x,D.eye.y,D.eye.z],up:[D.up.x,D.up.y,D.up.z],_ortho:B,zoomMin:.01,zoomMax:100,mode:"orbit"})},T.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var D=P.tryCreatePlot();if(!D)return v(P);P.traces={},P.make4thDimension();var B=P.graphDiv,z=B.layout,R=t(function(){var O={};return P.isCameraChanged(z)&&(O[P.id+".camera"]=P.getCamera()),P.isAspectChanged(z)&&(O[P.id+".aspectratio"]=P.glplot.getAspectratio(),z[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=z[P.id].aspectmode=O[P.id+".aspectmode"]="manual")),O},"makeUpdate"),F=t(function(O){if(O.fullSceneLayout.dragmode!==!1){var q=R();O.saveLayout(z),O.graphDiv.emit("plotly_relayout",q)}},"relayoutCallback");return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){F(P)}),P.glplot.canvas.addEventListener("wheel",function(O){if(B._context._scrollZoom.gl3d){if(P.camera._ortho){var q=O.deltaX>O.deltaY?1.1:.9090909090909091,H=P.glplot.getAspectratio();P.glplot.setAspectratio({x:q*H.x,y:q*H.y,z:q*H.z})}F(P)}},s?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var O=R();P.graphDiv.emit("plotly_relayouting",O)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(O){B&&B.emit&&B.emit("plotly_webglcontextlost",{event:O,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},T.render=function(){var P=this,D=P.graphDiv,B,z=P.svgContainer,R=P.container.getBoundingClientRect();D._fullLayout._calcInverseTransform(D);var F=D._fullLayout._invScaleX,O=D._fullLayout._invScaleY,q=R.width*F,H=R.height*O;z.setAttributeNS(null,"viewBox","0 0 "+q+" "+H),z.setAttributeNS(null,"width",q),z.setAttributeNS(null,"height",H),p(P),P.glplot.axes.update(P.axesOptions);for(var j=Object.keys(P.traces),X=null,G=P.glplot.selection,$=0;$<j.length;++$)B=P.traces[j[$]],B.data.hoverinfo!=="skip"&&B.handlePick(G)&&(X=B),B.setContourLevels&&B.setContourLevels();function te(me,pe,oe){var de=P.fullSceneLayout[me+"axis"];return de.type!=="log"&&(pe=de.d2l(pe)),u.hoverLabelText(de,pe,oe)}if(t(te,"formatter"),X!==null){var ee=c(P.glplot.cameraParams,G.dataCoordinate);B=X.data;var ie=D._fullData[B.index],se=G.index,W={xLabel:te("x",G.traceCoordinate[0],B.xhoverformat),yLabel:te("y",G.traceCoordinate[1],B.yhoverformat),zLabel:te("z",G.traceCoordinate[2],B.zhoverformat)},ne=f.castHoverinfo(ie,P.fullLayout,se),he=(ne||"").split("+"),re=ne&&ne==="all";!ie.hovertemplate&&!re&&(he.indexOf("x")===-1&&(W.xLabel=void 0),he.indexOf("y")===-1&&(W.yLabel=void 0),he.indexOf("z")===-1&&(W.zLabel=void 0),he.indexOf("text")===-1&&(G.textLabel=void 0),he.indexOf("name")===-1&&(X.name=void 0));var ae,fe=[];B.type==="cone"||B.type==="streamtube"?(W.uLabel=te("x",G.traceCoordinate[3],B.uhoverformat),(re||he.indexOf("u")!==-1)&&fe.push("u: "+W.uLabel),W.vLabel=te("y",G.traceCoordinate[4],B.vhoverformat),(re||he.indexOf("v")!==-1)&&fe.push("v: "+W.vLabel),W.wLabel=te("z",G.traceCoordinate[5],B.whoverformat),(re||he.indexOf("w")!==-1)&&fe.push("w: "+W.wLabel),W.normLabel=G.traceCoordinate[6].toPrecision(3),(re||he.indexOf("norm")!==-1)&&fe.push("norm: "+W.normLabel),B.type==="streamtube"&&(W.divergenceLabel=G.traceCoordinate[7].toPrecision(3),(re||he.indexOf("divergence")!==-1)&&fe.push("divergence: "+W.divergenceLabel)),G.textLabel&&fe.push(G.textLabel),ae=fe.join("<br>")):B.type==="isosurface"||B.type==="volume"?(W.valueLabel=u.hoverLabelText(P._mockAxis,P._mockAxis.d2l(G.traceCoordinate[3]),B.valuehoverformat),fe.push("value: "+W.valueLabel),G.textLabel&&fe.push(G.textLabel),ae=fe.join("<br>")):ae=G.textLabel;var ce={x:G.traceCoordinate[0],y:G.traceCoordinate[1],z:G.traceCoordinate[2],data:ie._input,fullData:ie,curveNumber:ie.index,pointNumber:se};f.appendArrayPointValue(ce,ie,se),B._module.eventData&&(ce=ie._module.eventData(ce,G,ie,{},se));var xe={points:[ce]};if(P.fullSceneLayout.hovermode){var Te=[];f.loneHover({trace:ie,x:(.5+.5*ee[0]/ee[3])*q,y:(.5-.5*ee[1]/ee[3])*H,xLabel:W.xLabel,yLabel:W.yLabel,zLabel:W.zLabel,text:ae,name:X.name,color:f.castHoverOption(ie,se,"bgcolor")||X.color,borderColor:f.castHoverOption(ie,se,"bordercolor"),fontFamily:f.castHoverOption(ie,se,"font.family"),fontSize:f.castHoverOption(ie,se,"font.size"),fontColor:f.castHoverOption(ie,se,"font.color"),nameLength:f.castHoverOption(ie,se,"namelength"),textAlign:f.castHoverOption(ie,se,"align"),hovertemplate:a.castOption(ie,se,"hovertemplate"),hovertemplateLabels:a.extendFlat({},ce,W),eventData:[ce]},{container:z,gd:D,inOut_bbox:Te}),ce.bbox=Te[0]}G.buttons&&G.distance<5?D.emit("plotly_click",xe):D.emit("plotly_hover",xe),this.oldEventData=xe}else f.loneUnhover(z),this.oldEventData&&D.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},T.recoverContext=function(){var P=this;P.glplot.dispose();var D=t(function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(D);return}if(!P.initializeGLPlot()){a.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)},"tryRecover");requestAnimationFrame(D)};var M=["xaxis","yaxis","zaxis"];function w(P,D,B){for(var z=P.fullSceneLayout,R=0;R<3;R++){var F=M[R],O=F.charAt(0),q=z[F],H=D[O],j=D[O+"calendar"],X=D["_"+O+"length"];if(!a.isArrayOrTypedArray(H))B[0][R]=Math.min(B[0][R],0),B[1][R]=Math.max(B[1][R],X-1);else for(var G,$=0;$<(X||H.length);$++)if(a.isArrayOrTypedArray(H[$]))for(var te=0;te<H[$].length;++te)G=q.d2l(H[$][te],0,j),!isNaN(G)&&isFinite(G)&&(B[0][R]=Math.min(B[0][R],G),B[1][R]=Math.max(B[1][R],G));else G=q.d2l(H[$],0,j),!isNaN(G)&&isFinite(G)&&(B[0][R]=Math.min(B[0][R],G),B[1][R]=Math.max(B[1][R],G))}}t(w,"computeTraceBounds");function x(P,D){for(var B=P.fullSceneLayout,z=B.annotations||[],R=0;R<3;R++)for(var F=M[R],O=F.charAt(0),q=B[F],H=0;H<z.length;H++){var j=z[H];if(j.visible){var X=q.r2l(j[O]);!isNaN(X)&&isFinite(X)&&(D[0][R]=Math.min(D[0][R],X),D[1][R]=Math.max(D[1][R],X))}}}t(x,"computeAnnotationBounds"),T.plot=function(P,D,B){var z=this;if(z.plotArgs=[P,D,B],z.glplot.contextLost)return;var R,F,O,q,H,j,X=D[z.id],G=B[z.id];z.fullLayout=D,z.fullSceneLayout=X,z.axesOptions.merge(D,X),z.spikeOptions.merge(X),z.setViewport(X),z.updateFx(X.dragmode,X.hovermode),z.camera.enableWheel=z.graphDiv._context._scrollZoom.gl3d,z.glplot.setClearColor(h(X.bgcolor)),z.setConvert(H),P?Array.isArray(P)||(P=[P]):P=[];var $=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(O=0;O<P.length;++O)R=P[O],!(R.visible!==!0||R._length===0)&&w(this,R,$);x(this,$);var te=[1,1,1];for(q=0;q<3;++q)$[1][q]===$[0][q]?te[q]=1:te[q]=1/($[1][q]-$[0][q]);for(z.dataScale=te,z.convertAnnotations(this),O=0;O<P.length;++O)R=P[O],!(R.visible!==!0||R._length===0)&&(F=z.traces[R.uid],F?F.data.type===R.type?F.update(R):(F.dispose(),F=R._module.plot(this,R),z.traces[R.uid]=F):(F=R._module.plot(this,R),z.traces[R.uid]=F),F.name=R.name);var ee=Object.keys(z.traces);e:for(O=0;O<ee.length;++O){for(q=0;q<P.length;++q)if(P[q].uid===ee[O]&&P[q].visible===!0&&P[q]._length!==0)continue e;F=z.traces[ee[O]],F.dispose(),delete z.traces[ee[O]]}z.glplot.objects.sort(function(Je,Ge){return Je._trace.data.index-Ge._trace.data.index});var ie=[[0,0,0],[0,0,0]],se={};for(O=0;O<3;++O){if(H=X[M[O]],j=H.type,j in se?(se[j].acc*=te[O],se[j].count+=1):se[j]={acc:te[O],count:1},H.autorange){ie[0][O]=1/0,ie[1][O]=-1/0;var W=z.glplot.objects,ne=z.fullSceneLayout.annotations||[],he=H._name.charAt(0);for(q=0;q<W.length;q++){var re=W[q],ae=re.bounds,fe=re._trace.data._pad||0;re.constructor.name==="ErrorBars"&&H._lowerLogErrorBound?ie[0][O]=Math.min(ie[0][O],H._lowerLogErrorBound):ie[0][O]=Math.min(ie[0][O],ae[0][O]/te[O]-fe),ie[1][O]=Math.max(ie[1][O],ae[1][O]/te[O]+fe)}for(q=0;q<ne.length;q++){var ce=ne[q];if(ce.visible){var xe=H.r2l(ce[he]);ie[0][O]=Math.min(ie[0][O],xe),ie[1][O]=Math.max(ie[1][O],xe)}}if("rangemode"in H&&H.rangemode==="tozero"&&(ie[0][O]=Math.min(ie[0][O],0),ie[1][O]=Math.max(ie[1][O],0)),ie[0][O]>ie[1][O])ie[0][O]=-1,ie[1][O]=1;else{var Te=ie[1][O]-ie[0][O];ie[0][O]-=Te/32,ie[1][O]+=Te/32}if(H.autorange==="reversed"){var me=ie[0][O];ie[0][O]=ie[1][O],ie[1][O]=me}}else{var pe=H.range;ie[0][O]=H.r2l(pe[0]),ie[1][O]=H.r2l(pe[1])}ie[0][O]===ie[1][O]&&(ie[0][O]-=1,ie[1][O]+=1),z.glplot.setBounds(O,{min:ie[0][O]*te[O],max:ie[1][O]*te[O]})}var oe,de=X.aspectmode;if(de==="cube")oe=[1,1,1];else if(de==="manual"){var ye=X.aspectratio;oe=[ye.x,ye.y,ye.z]}else if(de==="auto"||de==="data"){var we=[1,1,1];for(O=0;O<3;++O){H=X[M[O]],j=H.type;var Ee=se[j];we[O]=Math.pow(Ee.acc,1/Ee.count)/te[O]}de==="data"||Math.max.apply(null,we)/Math.min.apply(null,we)<=4?oe=we:oe=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");X.aspectratio.x=G.aspectratio.x=oe[0],X.aspectratio.y=G.aspectratio.y=oe[1],X.aspectratio.z=G.aspectratio.z=oe[2],z.glplot.setAspectratio(X.aspectratio),z.viewInitial.aspectratio||(z.viewInitial.aspectratio={x:X.aspectratio.x,y:X.aspectratio.y,z:X.aspectratio.z}),z.viewInitial.aspectmode||(z.viewInitial.aspectmode=X.aspectmode);var De=X.domain||null,Fe=D._size||null;if(De&&Fe){var qe=z.container.style;qe.position="absolute",qe.left=Fe.l+De.x[0]*Fe.w+"px",qe.top=Fe.t+(1-De.y[1])*Fe.h+"px",qe.width=Fe.w*(De.x[1]-De.x[0])+"px",qe.height=Fe.h*(De.y[1]-De.y[0])+"px"}z.glplot.redraw()},T.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function A(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}t(A,"getCameraArrays");function S(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}t(S,"getLayoutCamera"),T.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),S(P.camera)},T.setViewport=function(P){var D=this,B=P.camera;D.camera.lookAt.apply(this,A(B)),D.glplot.setAspectratio(P.aspectratio);var z=B.projection.type==="orthographic",R=D.camera._ortho;z!==R&&(D.glplot.redraw(),D.glplot.clearRGBA(),D.glplot.dispose(),D.initializeGLPlot())},T.isCameraChanged=function(P){var D=this,B=D.getCamera(),z=a.nestedProperty(P,D.id+".camera"),R=z.get();function F(j,X,G,$){var te=["up","center","eye"],ee=["x","y","z"];return X[te[G]]&&j[te[G]][ee[$]]===X[te[G]][ee[$]]}t(F,"same");var O=!1;if(R===void 0)O=!0;else{for(var q=0;q<3;q++)for(var H=0;H<3;H++)if(!F(B,R,q,H)){O=!0;break}(!R.projection||B.projection&&B.projection.type!==R.projection.type)&&(O=!0)}return O},T.isAspectChanged=function(P){var D=this,B=D.glplot.getAspectratio(),z=a.nestedProperty(P,D.id+".aspectratio"),R=z.get();return R===void 0||R.x!==B.x||R.y!==B.y||R.z!==B.z},T.saveLayout=function(P){var D=this,B=D.fullLayout,z,R,F,O,q,H,j=D.isCameraChanged(P),X=D.isAspectChanged(P),G=j||X;if(G){var $={};if(j&&(z=D.getCamera(),R=a.nestedProperty(P,D.id+".camera"),F=R.get(),$[D.id+".camera"]=F),X&&(O=D.glplot.getAspectratio(),q=a.nestedProperty(P,D.id+".aspectratio"),H=q.get(),$[D.id+".aspectratio"]=H),o.call("_storeDirectGUIEdit",P,B._preGUI,$),j){R.set(z);var te=a.nestedProperty(B,D.id+".camera");te.set(z)}if(X){q.set(O);var ee=a.nestedProperty(B,D.id+".aspectratio");ee.set(O),D.glplot.redraw()}}return G},T.updateFx=function(P,D){var B=this,z=B.camera;if(z)if(P==="orbit")z.mode="orbit",z.keyBindingMode="rotate";else if(P==="turntable"){z.up=[0,0,1],z.mode="turntable",z.keyBindingMode="rotate";var R=B.graphDiv,F=R._fullLayout,O=B.fullSceneLayout.camera,q=O.up.x,H=O.up.y,j=O.up.z;if(j/Math.sqrt(q*q+H*H+j*j)<.999){var X=B.id+".camera.up",G={x:0,y:0,z:1},$={};$[X]=G;var te=R.layout;o.call("_storeDirectGUIEdit",te,F._preGUI,$),O.up=G,a.nestedProperty(te,X).set(G)}}else z.keyBindingMode=P;B.fullSceneLayout.hovermode=D};function k(P,D,B){for(var z=0,R=B-1;z<R;++z,--R)for(var F=0;F<D;++F)for(var O=0;O<4;++O){var q=4*(D*z+F)+O,H=4*(D*R+F)+O,j=P[q];P[q]=P[H],P[H]=j}}t(k,"flipPixels");function L(P,D,B){for(var z=0;z<B;++z)for(var R=0;R<D;++R){var F=4*(D*z+R),O=P[F+3];if(O>0)for(var q=255/O,H=0;H<3;++H)P[F+H]=Math.min(q*P[F+H],255)}}return t(L,"correctRGB"),T.toImage=function(P){var D=this;P||(P="png"),D.staticMode&&D.container.appendChild(b),D.glplot.redraw();var B=D.glplot.gl,z=B.drawingBufferWidth,R=B.drawingBufferHeight;B.bindFramebuffer(B.FRAMEBUFFER,null);var F=new Uint8Array(z*R*4);B.readPixels(0,0,z,R,B.RGBA,B.UNSIGNED_BYTE,F),k(F,z,R),L(F,z,R);var O=document.createElement("canvas");O.width=z,O.height=R;var q=O.getContext("2d",{willReadFrequently:!0}),H=q.createImageData(z,R);H.data.set(F),q.putImageData(H,0,0);var j;switch(P){case"jpeg":j=O.toDataURL("image/jpeg");break;case"webp":j=O.toDataURL("image/webp");break;default:j=O.toDataURL("image/png")}return D.staticMode&&D.container.removeChild(b),j},T.setConvert=function(){for(var P=this,D=0;D<3;D++){var B=P.fullSceneLayout[M[D]];u.setConvert(B,P.fullLayout),B.setScale=a.noop}},T.make4thDimension=function(){var P=this,D=P.graphDiv,B=D._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(P._mockAxis,B)},eC=y,eC}t(pIe,"requireScene");var tC,xX;function gIe(){return xX||(xX=1,tC={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes",description:["Sets a reference between this trace's 3D coordinate system and","a 3D scene.","If *scene* (the default value), the (x,y,z) coordinates refer to","`layout.scene`.","If *scene2*, the (x,y,z) coordinates refer to `layout.scene2`,","and so on."].join(" ")}}),tC}t(gIe,"requireAttributes$t");var rC,bX;function _he(){if(bX)return rC;bX=1;var e=$a.exports,r=Jl,n=cn.extendFlat,i=_o.overrideAll;return rC=i({visible:r.visible,showspikes:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes starting from","data points to this axis' wall are shown on hover."].join(" ")},spikesides:{valType:"boolean",dflt:!0,description:["Sets whether or not spikes extending from the","projection data points to this axis' wall boundaries","are shown on hover."].join(" ")},spikethickness:{valType:"number",min:0,dflt:2,description:"Sets the thickness (in px) of the spikes."},spikecolor:{valType:"color",dflt:e.defaultLine,description:"Sets the color of the spikes."},showbackground:{valType:"boolean",dflt:!1,description:["Sets whether or not this axis' wall","has a background color."].join(" ")},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)",description:"Sets the background color of this axis' wall."},showaxeslabels:{valType:"boolean",dflt:!0,description:"Sets whether or not this axis is labeled"},color:r.color,categoryorder:r.categoryorder,categoryarray:r.categoryarray,title:{text:r.title.text,font:r.title.font},type:n({},r.type,{values:["-","linear","log","date","category"]}),autotypenumbers:r.autotypenumbers,autorange:r.autorange,rangemode:r.rangemode,range:n({},r.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,mirror:r.mirror,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:r.tickfont,tickangle:r.tickangle,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,minexponent:r.minexponent,separatethousands:r.separatethousands,tickformat:r.tickformat,tickformatstops:r.tickformatstops,hoverformat:r.hoverformat,showline:r.showline,linecolor:r.linecolor,linewidth:r.linewidth,showgrid:r.showgrid,gridcolor:n({},r.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:r.gridwidth,zeroline:r.zeroline,zerolinecolor:r.zerolinecolor,zerolinewidth:r.zerolinewidth,_deprecated:{title:r._deprecated.title,titlefont:r._deprecated.titlefont}},"plot","from-root"),rC}t(_he,"requireAxis_attributes$1");var aC,_X;function whe(){if(_X)return aC;_X=1;var e=_he(),r=vo.attributes,n=cn.extendFlat,i=Nt.exports.counterRegex;function s(o,a,l){return{x:{valType:"number",dflt:o,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:l,editType:"camera"},editType:"camera"}}return t(s,"makeCameraVector"),aC={_arrayAttrRegexps:[i("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:n(s(0,0,1),{description:["Sets the (x,y,z) components of the 'up' camera vector.","This vector determines the up direction of this scene","with respect to the page.","The default is *{x: 0, y: 0, z: 1}* which means that","the z axis points up."].join(" ")}),center:n(s(0,0,0),{description:["Sets the (x,y,z) components of the 'center' camera vector","This vector determines the translation (x,y,z) space","about the center of this scene.","By default, there is no such translation."].join(" ")}),eye:n(s(1.25,1.25,1.25),{description:["Sets the (x,y,z) components of the 'eye' camera vector.","This vector determines the view point about the origin","of this scene."].join(" ")}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc",description:["Sets the projection type. The projection type could be","either *perspective* or *orthographic*. The default is","*perspective*."].join(" ")},editType:"calc"},editType:"camera"},domain:r({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0},description:["If *cube*, this scene's axes are drawn as a cube,","regardless of the axes' ranges.","If *data*, this scene's axes are drawn","in proportion with the axes' ranges.","If *manual*, this scene's axes are drawn","in proportion with the input of *aspectratio*","(the default behavior if *aspectratio* is provided).","If *auto*, this scene's axes are drawn","using the results of *data* except when one axis","is more than four times the size of the two others,","where in that case the results of *cube* are used."].join(" ")},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"},description:["Sets this scene's axis aspectratio."].join(" ")},xaxis:e,yaxis:e,zaxis:e,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot",description:["Determines the mode of drag interactions for this scene."].join(" ")},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar",description:["Determines the mode of hover interactions for this scene."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in camera attributes.","Defaults to `layout.uirevision`."].join(" ")},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera",description:"Obsolete. Use `camera` instead."}}},aC}t(whe,"requireLayout_attributes$5");var nC,wX;function yIe(){if(wX)return nC;wX=1;var e=rl.exports.mix,r=Nt.exports,n=ei,i=_he(),s=jue(),o=Rw,a=["xaxis","yaxis","zaxis"],l=100*(204-68)/(255-68);return nC=t(function(f,h,v){var c,d;function g(m,y){return r.coerce(c,d,i,m,y)}t(g,"coerce");for(var p=0;p<a.length;p++){var b=a[p];c=f[b]||{},d=n.newContainer(h,b),d._id=b[0]+v.scene,d._name=b,s(c,d,g,v),o(c,d,g,{font:v.font,letter:b[0],data:v.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:v.bgColor,calendar:v.calendar},v.fullLayout),g("gridcolor",e(d.color,v.bgColor,l).toRgbString()),g("title.text",b[0]),d.setScale=r.noop,g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",d.color)),g("showaxeslabels"),g("showbackground")&&g("backgroundcolor")}},"supplyLayoutDefaults"),nC}t(yIe,"requireAxis_defaults$1");var iC,TX;function mIe(){if(TX)return iC;TX=1;var e=Nt.exports,r=$a.exports,n=Na,i=Fy(),s=yIe(),o=whe(),a=Ns.getSubplotData,l="gl3d";iC=t(function(h,v,c){var d=v._basePlotModules.length>1;function g(p){if(!d){var b=e.validate(h[p],o[p]);if(b)return h[p]}}t(g,"getDfltFromLayout"),i(h,v,c,{type:l,attributes:o,handleDefaults:u,fullLayout:v,font:v.font,fullData:c,getDfltFromLayout:g,autotypenumbersDflt:v.autotypenumbers,paper_bgcolor:v.paper_bgcolor,calendar:v.calendar})},"supplyLayoutDefaults");function u(f,h,v,c){for(var d=v("bgcolor"),g=r.combine(d,c.paper_bgcolor),p=["up","center","eye"],b=0;b<p.length;b++)v("camera."+p[b]+".x"),v("camera."+p[b]+".y"),v("camera."+p[b]+".z");v("camera.projection.type");var m=!!v("aspectratio.x")&&!!v("aspectratio.y")&&!!v("aspectratio.z"),y=m?"manual":"auto",T=v("aspectmode",y);m||(f.aspectratio=h.aspectratio={x:1,y:1,z:1},T==="manual"&&(h.aspectmode="auto"),f.aspectmode=h.aspectmode);var _=a(c.fullData,l,c.id);s(f,h,{font:c.font,scene:c.id,data:_,bgColor:g,calendar:c.calendar,autotypenumbersDflt:c.autotypenumbersDflt,fullLayout:c.fullLayout}),n.getComponentMethod("annotations3d","handleDefaults")(f,h,c);var M=c.getDfltFromLayout("dragmode");if(M!==!1&&!M)if(M="orbit",f.camera&&f.camera.up){var w=f.camera.up.x,x=f.camera.up.y,A=f.camera.up.z;A!==0&&(!w||!x||!A||A/Math.sqrt(w*w+x*x+A*A)>.999)&&(M="turntable")}else M="turntable";v("dragmode",M),v("hovermode",c.getDfltFromLayout("hovermode"))}return t(u,"handleGl3dDefaults"),iC}t(mIe,"requireDefaults$t");var AX;function F0(){if(AX)return hu;AX=1;var e=_o.overrideAll,r=fp,n=pIe(),i=Ns.getSubplotData,s=Nt.exports,o=ic,a="gl3d",l="scene";return hu.name=a,hu.attr=l,hu.idRoot=l,hu.idRegex=hu.attrRegex=s.counterRegex("scene"),hu.attributes=gIe(),hu.layoutAttributes=whe(),hu.baseLayoutAttrOverrides=e({hoverlabel:r.hoverlabel},"plot","nested"),hu.supplyLayoutDefaults=mIe(),hu.plot=t(function(f){for(var h=f._fullLayout,v=f._fullData,c=h._subplots[a],d=0;d<c.length;d++){var g=c[d],p=i(v,a,g),b=h[g],m=b.camera,y=b._scene;y||(y=new n({id:g,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio,camera:m},h),b._scene=y),y.viewInitial||(y.viewInitial={up:{x:m.up.x,y:m.up.y,z:m.up.z},eye:{x:m.eye.x,y:m.eye.y,z:m.eye.z},center:{x:m.center.x,y:m.center.y,z:m.center.z}}),y.plot(p,h,f.layout)}},"plot"),hu.clean=function(u,f,h,v){for(var c=v._subplots[a]||[],d=0;d<c.length;d++){var g=c[d];!f[g]&&!!v[g]._scene&&(v[g]._scene.destroy(),v._infolayer&&v._infolayer.selectAll(".annotation-"+g).remove())}},hu.toSVG=function(u){for(var f=u._fullLayout,h=f._subplots[a],v=f._size,c=0;c<h.length;c++){var d=f[h[c]],g=d.domain,p=d._scene,b=p.toImage("png"),m=f._glimages.append("svg:image");m.attr({xmlns:o.svg,"xlink:href":b,x:v.l+v.w*g.x[0],y:v.t+v.h*(1-g.y[1]),width:v.w*(g.x[1]-g.x[0]),height:v.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),p.destroy()}},hu.cleanId=t(function(f){if(!!f.match(/^scene[0-9]*$/)){var h=f.substr(5);return h==="1"&&(h=""),l+h}},"cleanId"),hu.updateFx=function(u){for(var f=u._fullLayout,h=f._subplots[a],v=0;v<h.length;v++){var c=f[h[v]]._scene;c.updateFx(f.dragmode,f.hovermode)}},hu}t(F0,"requireGl3d");var oC,SX;function xIe(){return SX||(SX=1,oC={plot:uIe(),attributes:mhe(),markerSymbols:N7(),supplyDefaults:fIe(),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:xhe(),moduleType:"trace",name:"scatter3d",basePlotModule:F0(),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_3d",description:["The data visualized as scatter point or lines in 3D dimension","is set in `x`, `y`, `z`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","Projections are achieved via `projection`.","Surface fills are achieved via `surfaceaxis`."].join(" ")}}),oC}t(xIe,"requireScatter3d$1");var MX;function bIe(){return MX||(MX=1,function(e){e.exports=xIe()}(kE)),kE.exports}t(bIe,"requireScatter3d");var sC={exports:{}},lC={exports:{}},kX;function Qw(){if(kX)return lC.exports;kX=1;var e=$a.exports,r=Qi,n=Vo.axisHoverFormat,i=Un.hovertemplateAttrs,s=Ni,o=cn.extendFlat,a=_o.overrideAll;function l(h){return{valType:"boolean",dflt:!1,description:["Determines whether or not these contour lines are projected","on the",h,"plane.","If `highlight` is set to *true* (the default), the projected","lines are shown on hover.","If `show` is set to *true*, the projected lines are shown","in permanence."].join(" ")}}t(l,"makeContourProjAttr");function u(h){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not contour lines about the",h,"dimension are drawn."].join(" ")},start:{valType:"number",dflt:null,editType:"plot",description:["Sets the starting contour level value.","Must be less than `contours.end`"].join(" ")},end:{valType:"number",dflt:null,editType:"plot",description:["Sets the end contour level value.","Must be more than `contours.start`"].join(" ")},size:{valType:"number",dflt:null,min:0,editType:"plot",description:["Sets the step between each contour level.","Must be positive."].join(" ")},project:{x:l("x"),y:l("y"),z:l("z")},color:{valType:"color",dflt:e.defaultLine,description:"Sets the color of the contour lines."},usecolormap:{valType:"boolean",dflt:!1,description:["An alternate to *color*.","Determines whether or not the contour lines are colored using","the trace *colorscale*."].join(" ")},width:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the contour lines."},highlight:{valType:"boolean",dflt:!0,description:["Determines whether or not contour lines about the",h,"dimension are highlighted on hover."].join(" ")},highlightcolor:{valType:"color",dflt:e.defaultLine,description:"Sets the color of the highlighted contour lines."},highlightwidth:{valType:"number",min:1,max:16,dflt:2,description:"Sets the width of the highlighted contour lines."}}}t(u,"makeContourAttr");var f=lC.exports=a(o({z:{valType:"data_array",description:"Sets the z coordinates."},x:{valType:"data_array",description:"Sets the x coordinates."},y:{valType:"data_array",description:"Sets the y coordinates."},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with each z value.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:i(),xhoverformat:n("x"),yhoverformat:n("y"),zhoverformat:n("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in."].join(" ")},surfacecolor:{valType:"data_array",description:["Sets the surface color values,","used for setting a color scale independent of `z`."].join(" ")}},r("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:u("x"),y:u("y"),z:u("z")},hidesurface:{valType:"boolean",dflt:!1,description:["Determines whether or not a surface is drawn.","For example, set `hidesurface` to *false*","`contours.x.show` to *true* and","`contours.y.show` to *true* to draw a wire frame plot."].join(" ")},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10,description:"Numeric vector, representing the X coordinate for each vertex."},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4,description:"Numeric vector, representing the Y coordinate for each vertex."},z:{valType:"number",min:-1e5,max:1e5,dflt:0,description:"Numeric vector, representing the Z coordinate for each vertex."}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8,description:"Ambient light increases overall color visibility but can wash out the image."},diffuse:{valType:"number",min:0,max:1,dflt:.8,description:"Represents the extent that incident rays are reflected in a range of angles."},specular:{valType:"number",min:0,max:2,dflt:.05,description:"Represents the level that incident rays are reflected in a single direction, causing shine."},roughness:{valType:"number",min:0,max:1,dflt:.5,description:"Alters specular reflection; the rougher the surface, the wider and less contrasty the shine."},fresnel:{valType:"number",min:0,max:5,dflt:.2,description:["Represents the reflectance as a dependency of the viewing angle; e.g. paper is reflective","when viewing it from the edge of the paper (almost 90 degrees), causing shine."].join(" ")}},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the surface.","Please note that in the case of using high `opacity` values for example a value","greater than or equal to 0.5 on two surfaces (and 0.25 with four surfaces), an","overlay of multiple transparent surfaces may not perfectly be sorted in depth by the","webgl API. This behavior may be improved in the near future and is subject to change."].join(" ")},opacityscale:{valType:"any",editType:"calc",description:["Sets the opacityscale.","The opacityscale must be an array containing","arrays mapping a normalized value to an opacity value.","At minimum, a mapping for the lowest (0) and highest (1)","values are required. For example,","`[[0, 1], [0.5, 0.2], [1, 1]]` means that higher/lower values would have","higher opacity values and those in the middle would be more transparent","Alternatively, `opacityscale` may be a palette name string","of the following list: 'min', 'max', 'extremes' and 'uniform'.","The default is 'uniform'."].join(" ")},_deprecated:{zauto:o({},r.zauto,{description:"Obsolete. Use `cauto` instead."}),zmin:o({},r.zmin,{description:"Obsolete. Use `cmin` instead."}),zmax:o({},r.zmax,{description:"Obsolete. Use `cmax` instead."})},hoverinfo:o({},s.hoverinfo),showlegend:o({},s.showlegend,{dflt:!1})}),"calc","nested");return f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0,lC.exports}t(Qw,"requireAttributes$s");var uC,EX;function The(){if(EX)return uC;EX=1;var e=Na,r=Nt.exports,n=ml,i=Qw(),s=.1;function o(h,v){for(var c=[],d=32,g=0;g<d;g++){var p=g/(d-1),b=v+(1-v)*(1-Math.pow(Math.sin(h*p*Math.PI),2));c.push([p,Math.max(0,Math.min(1,b))])}return c}t(o,"createWave");function a(h){var v=0;if(!Array.isArray(h)||h.length<2||!h[0]||!h[h.length-1]||+h[0][0]!=0||+h[h.length-1][0]!=1)return!1;for(var c=0;c<h.length;c++){var d=h[c];if(d.length!==2||+d[0]<v)return!1;v=+d[0]}return!0}t(a,"isValidScaleArray");function l(h,v,c,d){var g,p;function b(k,L){return r.coerce(h,v,i,k,L)}t(b,"coerce");var m=b("x"),y=b("y"),T=b("z");if(!T||!T.length||(m?m.length<1:!1)||(y?y.length<1:!1)){v.visible=!1;return}v._xlength=Array.isArray(m)&&r.isArrayOrTypedArray(m[0])?T.length:T[0].length,v._ylength=T.length;var _=e.getComponentMethod("calendars","handleTraceDefaults");_(h,v,["x","y","z"],d),b("text"),b("hovertext"),b("hovertemplate"),b("xhoverformat"),b("yhoverformat"),b("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(k){b(k)});var M=b("surfacecolor"),w=["x","y","z"];for(g=0;g<3;++g){var x="contours."+w[g],A=b(x+".show"),S=b(x+".highlight");if(A||S)for(p=0;p<3;++p)b(x+".project."+w[p]);A&&(b(x+".color"),b(x+".width"),b(x+".usecolormap")),S&&(b(x+".highlightcolor"),b(x+".highlightwidth")),b(x+".start"),b(x+".end"),b(x+".size")}M||(f(h,"zmin","cmin"),f(h,"zmax","cmax"),f(h,"zauto","cauto")),n(h,v,d,b,{prefix:"",cLetter:"c"}),u(h,v,d,b),v._length=null}t(l,"supplyDefaults");function u(h,v,c,d){var g=d("opacityscale");g==="max"?v.opacityscale=[[0,s],[1,1]]:g==="min"?v.opacityscale=[[0,1],[1,s]]:g==="extremes"?v.opacityscale=o(1,s):a(g)||(v.opacityscale=void 0)}t(u,"opacityscaleDefaults");function f(h,v,c){v in h&&!(c in h)&&(h[c]=h[v])}return t(f,"mapLegacy"),uC={supplyDefaults:l,opacityscaleDefaults:u},uC}t(The,"requireDefaults$s");var fC,CX;function _Ie(){if(CX)return fC;CX=1;var e=Lf;return fC=t(function(n,i){i.surfacecolor?e(n,i,{vals:i.surfacecolor,containerStr:"",cLetter:"c"}):e(n,i,{vals:i.z,containerStr:"",cLetter:"c"})},"calc"),fC}t(_Ie,"requireCalc$n");var cC,LX;function wIe(){if(LX)return cC;LX=1;var e=ys().gl_surface3d,r=ys().ndarray,n=ys().ndarray_linear_interpolate.d2,i=h7(),s=v7(),o=Nt.exports.isArrayOrTypedArray,a=mp().parseColorScale,l=zh(),u=ko.extractOpts;function f(k,L,P){this.scene=k,this.uid=P,this.surface=L,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}t(f,"SurfaceTrace");var h=f.prototype;h.getXat=function(k,L,P,D){var B=o(this.data.x)?o(this.data.x[0])?this.data.x[L][k]:this.data.x[k]:k;return P===void 0?B:D.d2l(B,0,P)},h.getYat=function(k,L,P,D){var B=o(this.data.y)?o(this.data.y[0])?this.data.y[L][k]:this.data.y[L]:L;return P===void 0?B:D.d2l(B,0,P)},h.getZat=function(k,L,P,D){var B=this.data.z[L][k];return B===null&&this.data.connectgaps&&this.data._interpolatedZ&&(B=this.data._interpolatedZ[L][k]),P===void 0?B:D.d2l(B,0,P)},h.handlePick=function(k){if(k.object===this.surface){var L=(k.data.index[0]-1)/this.dataScaleX-1,P=(k.data.index[1]-1)/this.dataScaleY-1,D=Math.max(Math.min(Math.round(L),this.data.z[0].length-1),0),B=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);k.index=[D,B],k.traceCoordinate=[this.getXat(D,B),this.getYat(D,B),this.getZat(D,B)],k.dataCoordinate=[this.getXat(D,B,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(D,B,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(D,B,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var z=0;z<3;z++){var R=k.dataCoordinate[z];R!=null&&(k.dataCoordinate[z]*=this.scene.dataScale[z])}var F=this.data.hovertext||this.data.text;return Array.isArray(F)&&F[B]&&F[B][D]!==void 0?k.textLabel=F[B][D]:F?k.textLabel=F:k.textLabel="",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};function v(k){var L=k[0].rgb,P=k[k.length-1].rgb;return L[0]===P[0]&&L[1]===P[1]&&L[2]===P[2]&&L[3]===P[3]}t(v,"isColormapCircular");var c=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(k,L){if(k<L)return 0;for(var P=0;Math.floor(k%L)===0;)k/=L,P++;return P}t(d,"getPow");function g(k){for(var L=[],P=0;P<c.length;P++){var D=c[P];L.push(d(k,D))}return L}t(g,"getFactors");function p(k){for(var L=g(k),P=k,D=0;D<c.length;D++)if(L[D]>0){P=c[D];break}return P}t(p,"smallestDivisor");function b(k,L){if(!(k<1||L<1)){for(var P=g(k),D=g(L),B=1,z=0;z<c.length;z++)B*=Math.pow(c[z],Math.max(P[z],D[z]));return B}}t(b,"leastCommonMultiple");function m(k){if(k.length!==0){for(var L=1,P=0;P<k.length;P++)L=b(L,k[P]);return L}}t(m,"arrayLCM"),h.calcXnums=function(k){var L,P=[];for(L=1;L<k;L++){var D=this.getXat(L-1,0),B=this.getXat(L,0);B!==D&&D!==void 0&&D!==null&&B!==void 0&&B!==null?P[L-1]=Math.abs(B-D):P[L-1]=0}var z=0;for(L=1;L<k;L++)z+=P[L-1];for(L=1;L<k;L++)P[L-1]===0?P[L-1]=1:P[L-1]=Math.round(z/P[L-1]);return P},h.calcYnums=function(k){var L,P=[];for(L=1;L<k;L++){var D=this.getYat(0,L-1),B=this.getYat(0,L);B!==D&&D!==void 0&&D!==null&&B!==void 0&&B!==null?P[L-1]=Math.abs(B-D):P[L-1]=0}var z=0;for(L=1;L<k;L++)z+=P[L-1];for(L=1;L<k;L++)P[L-1]===0?P[L-1]=1:P[L-1]=Math.round(z/P[L-1]);return P};var y=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],T=y[9],_=y[13];h.estimateScale=function(k,L){for(var P=L===0?this.calcXnums(k):this.calcYnums(k),D=1+m(P);D<T;)D*=2;for(;D>_;)D--,D/=p(D),D++,D<T&&(D=_);var B=Math.round(D/k);return B>1?B:1};function M(k,L,P){var D=P[8]+P[2]*L[0]+P[5]*L[1];return k[0]=(P[6]+P[0]*L[0]+P[3]*L[1])/D,k[1]=(P[7]+P[1]*L[0]+P[4]*L[1])/D,k}t(M,"fnHomography");function w(k,L,P){return x(k,L,M,P),k}t(w,"homography");function x(k,L,P,D){for(var B=[0,0],z=k.shape[0],R=k.shape[1],F=0;F<z;F++)for(var O=0;O<R;O++)P(B,[F,O],D),k.set(F,O,n(L,B[0],B[1]));return k}t(x,"warp"),h.refineCoords=function(k){for(var L=this.dataScaleX,P=this.dataScaleY,D=k[0].shape[0],B=k[0].shape[1],z=Math.floor(k[0].shape[0]*L+1)|0,R=Math.floor(k[0].shape[1]*P+1)|0,F=1+D+1,O=1+B+1,q=r(new Float32Array(F*O),[F,O]),H=[1/L,0,0,0,1/P,0,0,0,1],j=0;j<k.length;++j){this.surface.padField(q,k[j]);var X=r(new Float32Array(z*R),[z,R]);w(X,q,H),k[j]=X}};function A(k,L){for(var P=!1,D=0;D<k.length;D++)if(L===k[D]){P=!0;break}P===!1&&k.push(L)}t(A,"insertIfNewLevel"),h.setContourLevels=function(){var k=[[],[],[]],L=[!1,!1,!1],P=!1,D,B,z;for(D=0;D<3;++D)if(this.showContour[D]&&(P=!0,this.contourSize[D]>0&&this.contourStart[D]!==null&&this.contourEnd[D]!==null&&this.contourEnd[D]>this.contourStart[D]))for(L[D]=!0,B=this.contourStart[D];B<this.contourEnd[D];B+=this.contourSize[D])z=B*this.scene.dataScale[D],A(k[D],z);if(P){var R=[[],[],[]];for(D=0;D<3;++D)this.showContour[D]&&(R[D]=L[D]?k[D]:this.scene.contourLevels[D]);this.surface.update({levels:R})}},h.update=function(k){var L=this.scene,P=L.fullSceneLayout,D=this.surface,B=a(k),z=L.dataScale,R=k.z[0].length,F=k._ylength,O=L.contourLevels;this.data=k;var q,H,j,X,G=[];for(q=0;q<3;q++)for(G[q]=[],H=0;H<R;H++)G[q][H]=[];for(H=0;H<R;H++)for(j=0;j<F;j++)G[0][H][j]=this.getXat(H,j,k.xcalendar,P.xaxis),G[1][H][j]=this.getYat(H,j,k.ycalendar,P.yaxis),G[2][H][j]=this.getZat(H,j,k.zcalendar,P.zaxis);if(k.connectgaps)for(k._emptypoints=s(G[2]),i(G[2],k._emptypoints),k._interpolatedZ=[],H=0;H<R;H++)for(k._interpolatedZ[H]=[],j=0;j<F;j++)k._interpolatedZ[H][j]=G[2][H][j];for(q=0;q<3;q++)for(H=0;H<R;H++)for(j=0;j<F;j++)X=G[q][H][j],X==null?G[q][H][j]=NaN:X=G[q][H][j]*=z[q];for(q=0;q<3;q++)for(H=0;H<R;H++)for(j=0;j<F;j++)X=G[q][H][j],X!=null&&(this.minValues[q]>X&&(this.minValues[q]=X),this.maxValues[q]<X&&(this.maxValues[q]=X));for(q=0;q<3;q++)this.objectOffset[q]=.5*(this.minValues[q]+this.maxValues[q]);for(q=0;q<3;q++)for(H=0;H<R;H++)for(j=0;j<F;j++)X=G[q][H][j],X!=null&&(G[q][H][j]-=this.objectOffset[q]);var $=[r(new Float32Array(R*F),[R,F]),r(new Float32Array(R*F),[R,F]),r(new Float32Array(R*F),[R,F])];for(q=0;q<3;q++)for(H=0;H<R;H++)for(j=0;j<F;j++)$[q].set(H,j,G[q][H][j]);G=[];var te={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},ee=u(k);if(te.intensityBounds=[ee.min,ee.max],k.surfacecolor){var ie=r(new Float32Array(R*F),[R,F]);for(H=0;H<R;H++)for(j=0;j<F;j++)ie.set(H,j,k.surfacecolor[j][H]);$.push(ie)}else te.intensityBounds[0]*=z[2],te.intensityBounds[1]*=z[2];(_<$[0].shape[0]||_<$[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale($[0].shape[0],0),this.dataScaleY=this.estimateScale($[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords($)),k.surfacecolor&&(te.intensity=$.pop());var se=[!0,!0,!0],W=["x","y","z"];for(q=0;q<3;++q){var ne=k.contours[W[q]];se[q]=ne.highlight,te.showContour[q]=ne.show||ne.highlight,te.showContour[q]&&(te.contourProject[q]=[ne.project.x,ne.project.y,ne.project.z],ne.show?(this.showContour[q]=!0,te.levels[q]=O[q],D.highlightColor[q]=te.contourColor[q]=l(ne.color),ne.usecolormap?D.highlightTint[q]=te.contourTint[q]=0:D.highlightTint[q]=te.contourTint[q]=1,te.contourWidth[q]=ne.width,this.contourStart[q]=ne.start,this.contourEnd[q]=ne.end,this.contourSize[q]=ne.size):(this.showContour[q]=!1,this.contourStart[q]=null,this.contourEnd[q]=null,this.contourSize[q]=0),ne.highlight&&(te.dynamicColor[q]=l(ne.highlightcolor),te.dynamicWidth[q]=ne.highlightwidth))}v(B)&&(te.vertexColor=!0),te.objectOffset=this.objectOffset,te.coords=$,D.update(te),D.visible=k.visible,D.enableDynamic=se,D.enableHighlight=se,D.snapToData=!0,"lighting"in k&&(D.ambientLight=k.lighting.ambient,D.diffuseLight=k.lighting.diffuse,D.specularLight=k.lighting.specular,D.roughness=k.lighting.roughness,D.fresnel=k.lighting.fresnel),"lightposition"in k&&(D.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},h.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function S(k,L){var P=k.glplot.gl,D=e({gl:P}),B=new f(k,D,L.uid);return D._trace=B,B.update(L),k.glplot.add(D),B}return t(S,"createSurfaceTrace"),cC=S,cC}t(wIe,"requireConvert$c");var hC,RX;function TIe(){return RX||(RX=1,hC={attributes:Qw(),supplyDefaults:The().supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:_Ie(),plot:wIe(),moduleType:"trace",name:"surface",basePlotModule:F0(),categories:["gl3d","2dMap","showLegend"],meta:{description:["The data the describes the coordinates of the surface is set in `z`.","Data in `z` should be a {2D array}.","Coordinates in `x` and `y` can either be 1D {arrays}","or {2D arrays} (e.g. to graph parametric surfaces).","If not provided in `x` and `y`, the x and y coordinates are assumed","to be linear starting at 0 with a unit step.","The color scale corresponds to the `z` values by default.","For custom color scales, use `surfacecolor` which should be a {2D array},","where its bounds can be controlled using `cmin` and `cmax`."].join(" ")}}),hC}t(TIe,"requireSurface$1");var PX;function AIe(){return PX||(PX=1,function(e){e.exports=TIe()}(sC)),sC.exports}t(AIe,"requireSurface");var vC={exports:{}},dC={exports:{}},pC,DX;function xx(){if(DX)return pC;DX=1;var e=Qi,r=Vo.axisHoverFormat,n=Un.hovertemplateAttrs,i=Qw(),s=Ni,o=cn.extendFlat;return pC=o({x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the X coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Y coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the Z coordinates of the vertices. The nth element of vectors `x`, `y` and `z`","jointly represent the X, Y and Z coordinates of the nth vertex."].join(" ")},i:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *first* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `i[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `i` represents a","point in space, which is the first vertex of a triangle."].join(" ")},j:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *second* vertex of a triangle. For example, `{i[m], j[m], k[m]}` ","together represent face m (triangle m) in the mesh, where `j[m] = n` points to the triplet","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `j` represents a","point in space, which is the second vertex of a triangle."].join(" ")},k:{valType:"data_array",editType:"calc",description:["A vector of vertex indices, i.e. integer values between 0 and the length of the vertex","vectors, representing the *third* vertex of a triangle. For example, `{i[m], j[m], k[m]}`","together represent face m (triangle m) in the mesh, where `k[m] = n` points to the triplet ","`{x[n], y[n], z[n]}` in the vertex arrays. Therefore, each element in `k` represents a","point in space, which is the third vertex of a triangle."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:n({editType:"calc"}),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc",description:["Sets the Delaunay axis, which is the axis that is perpendicular to the surface of the","Delaunay triangulation.","It has an effect if `i`, `j`, `k` are not provided and `alphahull` is set to indicate","Delaunay triangulation."].join(" ")},alphahull:{valType:"number",dflt:-1,editType:"calc",description:["Determines how the mesh surface triangles are derived from the set of","vertices (points) represented by the `x`, `y` and `z` arrays, if","the `i`, `j`, `k` arrays are not supplied.","For general use of `mesh3d` it is preferred that `i`, `j`, `k` are","supplied.","If *-1*, Delaunay triangulation is used, which is mainly suitable if the","mesh is a single, more or less layer surface that is perpendicular to `delaunayaxis`.","In case the `delaunayaxis` intersects the mesh surface at more than one point","it will result triangles that are very long in the dimension of `delaunayaxis`.","If *>0*, the alpha-shape algorithm is used. In this case, the positive `alphahull` value","signals the use of the alpha-shape algorithm, _and_ its value","acts as the parameter for the mesh fitting.","If *0*,  the convex-hull algorithm is used. It is suitable for convex bodies","or if the intention is to enclose the `x`, `y` and `z` point set into a convex","hull."].join(" ")},intensity:{valType:"data_array",editType:"calc",description:["Sets the intensity values for vertices or cells","as defined by `intensitymode`.","It can be used for plotting fields on meshes."].join(" ")},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc",description:["Determines the source of `intensity` values."].join(" ")},color:{valType:"color",editType:"calc",description:"Sets the color of the whole mesh"},vertexcolor:{valType:"data_array",editType:"calc",description:["Sets the color of each vertex","Overrides *color*. While Red, green and blue colors","are in the range of 0 and 255; in the case of having","vertex color data in RGBA format, the alpha color","should be normalized to be between 0 and 1."].join(" ")},facecolor:{valType:"data_array",editType:"calc",description:["Sets the color of each face","Overrides *color* and *vertexcolor*."].join(" ")},transforms:void 0},e("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:i.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not normal smoothing is applied to the meshes,","creating meshes with an angular, low-poly look via flat reflections."].join(" ")},contour:{show:o({},i.contours.x.show,{description:["Sets whether or not dynamic contours are shown on hover"].join(" ")}),color:i.contours.x.color,width:i.contours.x.width,editType:"calc"},lightposition:{x:o({},i.lightposition.x,{dflt:1e5}),y:o({},i.lightposition.y,{dflt:1e5}),z:o({},i.lightposition.z,{dflt:0}),editType:"calc"},lighting:o({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc",description:"Epsilon for vertex normals calculation avoids math issues arising from degenerate geometry."},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc",description:"Epsilon for face normals calculation avoids math issues arising from degenerate geometry."},editType:"calc"},i.lighting),hoverinfo:o({},s.hoverinfo,{editType:"calc"}),showlegend:o({},s.showlegend,{dflt:!1})}),pC}t(xx,"requireAttributes$r");var IX;function U7(){if(IX)return dC.exports;IX=1;var e=Qi,r=Vo.axisHoverFormat,n=Un.hovertemplateAttrs,i=xx(),s=Ni,o=cn.extendFlat,a=_o.overrideAll;function l(h){return{show:{valType:"boolean",dflt:!1,description:["Determines whether or not slice planes about the",h,"dimension are drawn."].join(" ")},locations:{valType:"data_array",dflt:[],description:["Specifies the location(s) of slices on the axis.","When not specified slices would be created for","all points of the axis",h,"except start and end."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `slices`. The default fill value of the","`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}t(l,"makeSliceAttr");function u(h){return{show:{valType:"boolean",dflt:!0,description:["Sets the fill ratio of the `slices`. The default fill value of the",h,"`slices` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `caps`. The default fill value of the","`caps` is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")}}}t(u,"makeCapAttr");var f=dC.exports=a(o({x:{valType:"data_array",description:["Sets the X coordinates of the vertices on X axis."].join(" ")},y:{valType:"data_array",description:["Sets the Y coordinates of the vertices on Y axis."].join(" ")},z:{valType:"data_array",description:["Sets the Z coordinates of the vertices on Z axis."].join(" ")},value:{valType:"data_array",description:["Sets the 4th dimension (value) of the vertices."].join(" ")},isomin:{valType:"number",description:["Sets the minimum boundary for iso-surface plot."].join(" ")},isomax:{valType:"number",description:["Sets the maximum boundary for iso-surface plot."].join(" ")},surface:{show:{valType:"boolean",dflt:!0,description:["Hides/displays surfaces between minimum and maximum iso-values."].join(" ")},count:{valType:"integer",dflt:2,min:1,description:["Sets the number of iso-surfaces between minimum and maximum iso-values.","By default this value is 2 meaning that only minimum and maximum surfaces","would be drawn."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the iso-surface. The default fill value of the","surface is 1 meaning that they are entirely shaded. On the other hand","Applying a `fill` ratio less than one would allow the creation of","openings parallel to the edges."].join(" ")},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all",description:["Sets the surface pattern of the iso-surface 3-D sections. The default pattern of","the surface is `all` meaning that the rest of surface elements would be shaded.","The check options (either 1 or 2) could be used to draw half of the squares","on the surface. Using various combinations of capital `A`, `B`, `C`, `D` and `E`","may also be used to reduce the number of triangles on the iso-surfaces and","creating other patterns of interest."].join(" ")}},spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:.15,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 0.15 meaning that only 15% of the area of every faces of tetras would be","shaded. Applying a greater `fill` ratio would allow the creation of stronger","elements or could be sued to have entirely closed areas (in case of using 1)."].join(" ")}},slices:{x:l("x"),y:l("y"),z:l("z")},caps:{x:u("x"),y:u("y"),z:u("z")},text:{valType:"string",dflt:"",arrayOk:!0,description:["Sets the text elements associated with the vertices.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,description:"Same as `text`."},hovertemplate:n(),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),valuehoverformat:r("value",1),showlegend:o({},s.showlegend,{dflt:!1})},e("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:i.opacity,lightposition:i.lightposition,lighting:i.lighting,flatshading:i.flatshading,contour:i.contour,hoverinfo:o({},s.hoverinfo)}),"calc","nested");return f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0,dC.exports}t(U7,"requireAttributes$q");var gC,zX;function Ahe(){if(zX)return gC;zX=1;var e=Nt.exports,r=Na,n=U7(),i=ml;function s(a,l,u,f){function h(v,c){return e.coerce(a,l,n,v,c)}t(h,"coerce"),o(a,l,u,f,h)}t(s,"supplyDefaults");function o(a,l,u,f,h){var v=h("isomin"),c=h("isomax");c!=null&&v!==void 0&&v!==null&&v>c&&(l.isomin=null,l.isomax=null);var d=h("x"),g=h("y"),p=h("z"),b=h("value");if(!d||!d.length||!g||!g.length||!p||!p.length||!b||!b.length){l.visible=!1;return}var m=r.getComponentMethod("calendars","handleTraceDefaults");m(a,l,["x","y","z"],f),h("valuehoverformat"),["x","y","z"].forEach(function(M){h(M+"hoverformat");var w="caps."+M,x=h(w+".show");x&&h(w+".fill");var A="slices."+M,S=h(A+".show");S&&(h(A+".fill"),h(A+".locations"))});var y=h("spaceframe.show");y&&h("spaceframe.fill");var T=h("surface.show");T&&(h("surface.count"),h("surface.fill"),h("surface.pattern"));var _=h("contour.show");_&&(h("contour.color"),h("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(M){h(M)}),i(a,l,f,h,{prefix:"",cLetter:"c"}),l._length=null}return t(o,"supplyIsoDefaults"),gC={supplyDefaults:s,supplyIsoDefaults:o},gC}t(Ahe,"requireDefaults$r");var yC,FX;function tF(){if(FX)return yC;FX=1;var e=Nt.exports,r=Lf;function n(a,l){l._len=Math.min(l.u.length,l.v.length,l.w.length,l.x.length,l.y.length,l.z.length),l._u=o(l.u,l._len),l._v=o(l.v,l._len),l._w=o(l.w,l._len),l._x=o(l.x,l._len),l._y=o(l.y,l._len),l._z=o(l.z,l._len);var u=i(l);l._gridFill=u.fill,l._Xs=u.Xs,l._Ys=u.Ys,l._Zs=u.Zs,l._len=u.len;var f=0,h,v,c;l.starts&&(h=o(l.starts.x||[]),v=o(l.starts.y||[]),c=o(l.starts.z||[]),f=Math.min(h.length,v.length,c.length)),l._startsX=h||[],l._startsY=v||[],l._startsZ=c||[];var d=0,g=1/0,p;for(p=0;p<l._len;p++){var b=l._u[p],m=l._v[p],y=l._w[p],T=Math.sqrt(b*b+m*m+y*y);d=Math.max(d,T),g=Math.min(g,T)}for(r(a,l,{vals:[g,d],containerStr:"",cLetter:"c"}),p=0;p<f;p++){var _=h[p];u.xMax=Math.max(u.xMax,_),u.xMin=Math.min(u.xMin,_);var M=v[p];u.yMax=Math.max(u.yMax,M),u.yMin=Math.min(u.yMin,M);var w=c[p];u.zMax=Math.max(u.zMax,w),u.zMin=Math.min(u.zMin,w)}l._slen=f,l._normMax=d,l._xbnds=[u.xMin,u.xMax],l._ybnds=[u.yMin,u.yMax],l._zbnds=[u.zMin,u.zMax]}t(n,"calc");function i(a){var l=a._x,u=a._y,f=a._z,h=a._len,v,c,d,g=-1/0,p=1/0,b=-1/0,m=1/0,y=-1/0,T=1/0,_="",M,w,x,A,S,k,L,P,D;for(h&&(A=l[0],k=u[0],P=f[0]),h>1&&(S=l[h-1],L=u[h-1],D=f[h-1]),v=0;v<h;v++)g=Math.max(g,l[v]),p=Math.min(p,l[v]),b=Math.max(b,u[v]),m=Math.min(m,u[v]),y=Math.max(y,f[v]),T=Math.min(T,f[v]),!M&&l[v]!==A&&(M=!0,_+="x"),!w&&u[v]!==k&&(w=!0,_+="y"),!x&&f[v]!==P&&(x=!0,_+="z");M||(_+="x"),w||(_+="y"),x||(_+="z");var B=s(a._x),z=s(a._y),R=s(a._z);_=_.replace("x",(A>S?"-":"+")+"x"),_=_.replace("y",(k>L?"-":"+")+"y"),_=_.replace("z",(P>D?"-":"+")+"z");var F=t(function(){h=0,B=[],z=[],R=[]},"empty");(!h||h<B.length*z.length*R.length)&&F();var O=t(function(xe){return xe==="x"?l:xe==="y"?u:f},"getArray"),q=t(function(xe){return xe==="x"?B:xe==="y"?z:R},"getVals"),H=t(function(xe){return xe[h-1]<xe[0]?-1:1},"getDir"),j=O(_[1]),X=O(_[3]),G=O(_[5]),$=q(_[1]).length,te=q(_[3]).length,ee=q(_[5]).length,ie=!1,se=t(function(xe,Te,me){return $*(te*xe+Te)+me},"getIndex"),W=H(O(_[1])),ne=H(O(_[3])),he=H(O(_[5]));for(v=0;v<ee-1;v++){for(c=0;c<te-1;c++){for(d=0;d<$-1;d++){var re=se(v,c,d),ae=se(v,c,d+1),fe=se(v,c+1,d),ce=se(v+1,c,d);if((!(j[re]*W<j[ae]*W)||!(X[re]*ne<X[fe]*ne)||!(G[re]*he<G[ce]*he))&&(ie=!0),ie)break}if(ie)break}if(ie)break}return ie&&(e.warn("Encountered arbitrary coordinates! Unable to input data grid."),F()),{xMin:p,yMin:m,zMin:T,xMax:g,yMax:b,zMax:y,Xs:B,Ys:z,Zs:R,len:h,fill:_}}t(i,"processGrid");function s(a){return e.distinctVals(a).vals}t(s,"distinctVals");function o(a,l){if(l===void 0&&(l=a.length),e.isTypedArray(a))return a.subarray(0,l);for(var u=[],f=0;f<l;f++)u[f]=+a[f];return u}return t(o,"filter"),yC={calc:n,filter:o,processGrid:i},yC}t(tF,"requireCalc$m");var mC,BX;function She(){if(BX)return mC;BX=1;var e=Lf,r=tF().processGrid,n=tF().filter;return mC=t(function(s,o){o._len=Math.min(o.x.length,o.y.length,o.z.length,o.value.length),o._x=n(o.x,o._len),o._y=n(o.y,o._len),o._z=n(o.z,o._len),o._value=n(o.value,o._len);var a=r(o);o._gridFill=a.fill,o._Xs=a.Xs,o._Ys=a.Ys,o._Zs=a.Zs,o._len=a.len;for(var l=1/0,u=-1/0,f=0;f<o._len;f++){var h=o._value[f];l=Math.min(l,h),u=Math.max(u,h)}o._minValues=l,o._maxValues=u,o._vMin=o.isomin===void 0||o.isomin===null?l:o.isomin,o._vMax=o.isomax===void 0||o.isomin===null?u:o.isomax,e(s,o,{vals:[o._vMin,o._vMax],containerStr:"",cLetter:"c"})},"calc"),mC}t(She,"requireCalc$l");var xC,OX;function bx(){return OX||(OX=1,xC=t(function(r,n,i,s){s=s||r.length;for(var o=new Array(s),a=0;a<s;a++)o[a]=[r[a],n[a],i[a]];return o},"zip3")),xC}t(bx,"requireZip3");var bC,NX;function rF(){if(NX)return bC;NX=1;var e=ys().gl_mesh3d,r=mp().parseColorScale,n=zh(),i=ko.extractOpts,s=bx(),o=t(function(v,c){for(var d=c.length-1;d>0;d--){var g=Math.min(c[d],c[d-1]),p=Math.max(c[d],c[d-1]);if(p>g&&g<v&&v<=p)return{id:d,distRatio:(p-v)/(p-g)}}return{id:0,distRatio:0}},"findNearestOnAxis");function a(v,c,d){this.scene=v,this.uid=d,this.mesh=c,this.name="",this.data=null,this.showContour=!1}t(a,"IsosurfaceTrace");var l=a.prototype;l.handlePick=function(v){if(v.object===this.mesh){var c=v.data.index,d=this.data._meshX[c],g=this.data._meshY[c],p=this.data._meshZ[c],b=this.data._Ys.length,m=this.data._Zs.length,y=o(d,this.data._Xs).id,T=o(g,this.data._Ys).id,_=o(p,this.data._Zs).id,M=v.index=_+m*T+m*b*y;v.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[M]!==void 0?v.textLabel=w[M]:w&&(v.textLabel=w),!0}},l.update=function(v){var c=this.scene,d=c.fullSceneLayout;this.data=f(v);function g(T,_,M,w){return _.map(function(x){return T.d2l(x,0,w)*M})}t(g,"toDataCoords");var p=s(g(d.xaxis,v._meshX,c.dataScale[0],v.xcalendar),g(d.yaxis,v._meshY,c.dataScale[1],v.ycalendar),g(d.zaxis,v._meshZ,c.dataScale[2],v.zcalendar)),b=s(v._meshI,v._meshJ,v._meshK),m={positions:p,cells:b,lightPosition:[v.lightposition.x,v.lightposition.y,v.lightposition.z],ambient:v.lighting.ambient,diffuse:v.lighting.diffuse,specular:v.lighting.specular,roughness:v.lighting.roughness,fresnel:v.lighting.fresnel,vertexNormalsEpsilon:v.lighting.vertexnormalsepsilon,faceNormalsEpsilon:v.lighting.facenormalsepsilon,opacity:v.opacity,contourEnable:v.contour.show,contourColor:n(v.contour.color).slice(0,3),contourWidth:v.contour.width,useFacetNormals:v.flatshading},y=i(v);m.vertexIntensity=v._meshIntensity,m.vertexIntensityBounds=[y.min,y.max],m.colormap=r(v),this.mesh.update(m)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var u=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(v){v._meshI=[],v._meshJ=[],v._meshK=[];var c=v.surface.show,d=v.spaceframe.show,g=v.surface.fill,p=v.spaceframe.fill,b=!1,m=!1,y=0,T,_,M=v._Xs,w=v._Ys,x=v._Zs,A=M.length,S=w.length,k=x.length,L=u.indexOf(v._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=t(function(kt,ft,zt){switch(L){case 5:return zt+k*ft+k*S*kt;case 4:return zt+k*kt+k*A*ft;case 3:return ft+S*zt+S*k*kt;case 2:return ft+S*kt+S*A*zt;case 1:return kt+A*zt+A*k*ft;default:return kt+A*ft+A*S*zt}},"getIndex"),D=v._minValues,B=v._maxValues,z=v._vMin,R=v._vMax,F,O,q,H;function j(kt,ft,zt){for(var Pt=H.length,Et=_;Et<Pt;Et++)if(kt===F[Et]&&ft===O[Et]&&zt===q[Et])return Et;return-1}t(j,"findVertexId");function X(){_=T}t(X,"beginGroup");function G(){F=[],O=[],q=[],H=[],T=0,X()}t(G,"emptyVertices");function $(kt,ft,zt,Pt){return F.push(kt),O.push(ft),q.push(zt),H.push(Pt),T++,T-1}t($,"addVertex");function te(kt,ft,zt){return v._meshI.push(kt),v._meshJ.push(ft),v._meshK.push(zt),y++,y-1}t(te,"addFace");function ee(kt,ft,zt){for(var Pt=[],Et=0;Et<kt.length;Et++)Pt[Et]=(kt[Et]+ft[Et]+zt[Et])/3;return Pt}t(ee,"getCenter");function ie(kt,ft,zt){for(var Pt=[],Et=0;Et<kt.length;Et++)Pt[Et]=kt[Et]*(1-zt)+zt*ft[Et];return Pt}t(ie,"getBetween");var se;function W(kt){se=kt}t(W,"setFill");function ne(kt,ft){var zt=kt[0],Pt=kt[1],Et=kt[2],Wt=ee(zt,Pt,Et),ze=Math.sqrt(1-se),tt=ie(Wt,zt,ze),at=ie(Wt,Pt,ze),vt=ie(Wt,Et,ze),_t=ft[0],Rt=ft[1],nr=ft[2];return{xyzv:[[zt,Pt,at],[at,tt,zt],[Pt,Et,vt],[vt,at,Pt],[Et,zt,tt],[tt,vt,Et]],abc:[[_t,Rt,-1],[-1,-1,_t],[Rt,nr,-1],[-1,-1,Rt],[nr,_t,-1],[-1,-1,nr]]}}t(ne,"createOpenTri");function he(kt,ft){return kt==="all"||kt===null?!0:kt.indexOf(ft)>-1}t(he,"styleIncludes");function re(kt,ft){return kt===null?ft:kt}t(re,"mapValue");function ae(kt,ft,zt){X();var Pt=[ft],Et=[zt];if(se>=1)Pt=[ft],Et=[zt];else if(se>0){var Wt=ne(ft,zt);Pt=Wt.xyzv,Et=Wt.abc}for(var ze=0;ze<Pt.length;ze++){ft=Pt[ze],zt=Et[ze];for(var tt=[],at=0;at<3;at++){var vt=ft[at][0],_t=ft[at][1],Rt=ft[at][2],nr=ft[at][3],ir=zt[at]>-1?zt[at]:j(vt,_t,Rt);ir>-1?tt[at]=ir:tt[at]=$(vt,_t,Rt,re(kt,nr))}te(tt[0],tt[1],tt[2])}}t(ae,"drawTri");function fe(kt,ft,zt){var Pt=t(function(Et,Wt,ze){ae(kt,[ft[Et],ft[Wt],ft[ze]],[zt[Et],zt[Wt],zt[ze]])},"makeTri");Pt(0,1,2),Pt(2,3,0)}t(fe,"drawQuad");function ce(kt,ft,zt){var Pt=t(function(Et,Wt,ze){ae(kt,[ft[Et],ft[Wt],ft[ze]],[zt[Et],zt[Wt],zt[ze]])},"makeTri");Pt(0,1,2),Pt(3,0,1),Pt(2,3,0),Pt(1,2,3)}t(ce,"drawTetra");function xe(kt,ft,zt,Pt){var Et=kt[3];Et<zt&&(Et=zt),Et>Pt&&(Et=Pt);for(var Wt=(kt[3]-Et)/(kt[3]-ft[3]+1e-9),ze=[],tt=0;tt<4;tt++)ze[tt]=(1-Wt)*kt[tt]+Wt*ft[tt];return ze}t(xe,"calcIntersection");function Te(kt,ft,zt){return kt>=ft&&kt<=zt}t(Te,"inRange");function me(kt){var ft=.001*(R-z);return kt>=z-ft&&kt<=R+ft}t(me,"almostInFinalRange");function pe(kt){for(var ft=[],zt=0;zt<4;zt++){var Pt=kt[zt];ft.push([v._x[Pt],v._y[Pt],v._z[Pt],v._value[Pt]])}return ft}t(pe,"getXYZV");var oe=3;function de(kt,ft,zt,Pt,Et,Wt){Wt||(Wt=1),zt=[-1,-1,-1];var ze=!1,tt=[Te(ft[0][3],Pt,Et),Te(ft[1][3],Pt,Et),Te(ft[2][3],Pt,Et)];if(!tt[0]&&!tt[1]&&!tt[2])return!1;var at=t(function(_t,Rt,nr){return me(Rt[0][3])&&me(Rt[1][3])&&me(Rt[2][3])?(ae(_t,Rt,nr),!0):Wt<oe?de(_t,Rt,nr,z,R,++Wt):!1},"tryDrawTri");if(tt[0]&&tt[1]&&tt[2])return at(kt,ft,zt)||ze;var vt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(_t){if(tt[_t[0]]&&tt[_t[1]]&&!tt[_t[2]]){var Rt=ft[_t[0]],nr=ft[_t[1]],ir=ft[_t[2]],ur=xe(ir,Rt,Pt,Et),qt=xe(ir,nr,Pt,Et);ze=at(kt,[qt,ur,Rt],[-1,-1,zt[_t[0]]])||ze,ze=at(kt,[Rt,nr,qt],[zt[_t[0]],zt[_t[1]],-1])||ze,vt=!0}}),vt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(_t){if(tt[_t[0]]&&!tt[_t[1]]&&!tt[_t[2]]){var Rt=ft[_t[0]],nr=ft[_t[1]],ir=ft[_t[2]],ur=xe(nr,Rt,Pt,Et),qt=xe(ir,Rt,Pt,Et);ze=at(kt,[qt,ur,Rt],[-1,-1,zt[_t[0]]])||ze,vt=!0}}),ze}t(de,"tryCreateTri");function ye(kt,ft,zt,Pt){var Et=!1,Wt=pe(ft),ze=[Te(Wt[0][3],zt,Pt),Te(Wt[1][3],zt,Pt),Te(Wt[2][3],zt,Pt),Te(Wt[3][3],zt,Pt)];if(!ze[0]&&!ze[1]&&!ze[2]&&!ze[3])return Et;if(ze[0]&&ze[1]&&ze[2]&&ze[3])return m&&(Et=ce(kt,Wt,ft)||Et),Et;var tt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(at){if(ze[at[0]]&&ze[at[1]]&&ze[at[2]]&&!ze[at[3]]){var vt=Wt[at[0]],_t=Wt[at[1]],Rt=Wt[at[2]],nr=Wt[at[3]];if(m)Et=ae(kt,[vt,_t,Rt],[ft[at[0]],ft[at[1]],ft[at[2]]])||Et;else{var ir=xe(nr,vt,zt,Pt),ur=xe(nr,_t,zt,Pt),qt=xe(nr,Rt,zt,Pt);Et=ae(null,[ir,ur,qt],[-1,-1,-1])||Et}tt=!0}}),tt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(at){if(ze[at[0]]&&ze[at[1]]&&!ze[at[2]]&&!ze[at[3]]){var vt=Wt[at[0]],_t=Wt[at[1]],Rt=Wt[at[2]],nr=Wt[at[3]],ir=xe(Rt,vt,zt,Pt),ur=xe(Rt,_t,zt,Pt),qt=xe(nr,_t,zt,Pt),hr=xe(nr,vt,zt,Pt);m?(Et=ae(kt,[vt,hr,ir],[ft[at[0]],-1,-1])||Et,Et=ae(kt,[_t,ur,qt],[ft[at[1]],-1,-1])||Et):Et=fe(null,[ir,ur,qt,hr],[-1,-1,-1,-1])||Et,tt=!0}}),tt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(at){if(ze[at[0]]&&!ze[at[1]]&&!ze[at[2]]&&!ze[at[3]]){var vt=Wt[at[0]],_t=Wt[at[1]],Rt=Wt[at[2]],nr=Wt[at[3]],ir=xe(_t,vt,zt,Pt),ur=xe(Rt,vt,zt,Pt),qt=xe(nr,vt,zt,Pt);m?(Et=ae(kt,[vt,ir,ur],[ft[at[0]],-1,-1])||Et,Et=ae(kt,[vt,ur,qt],[ft[at[0]],-1,-1])||Et,Et=ae(kt,[vt,qt,ir],[ft[at[0]],-1,-1])||Et):Et=ae(null,[ir,ur,qt],[-1,-1,-1])||Et,tt=!0}}),Et}t(ye,"tryCreateTetra");function we(kt,ft,zt,Pt,Et,Wt,ze,tt,at,vt,_t){var Rt=!1;return b&&(he(kt,"A")&&(Rt=ye(null,[ft,zt,Pt,Wt],vt,_t)||Rt),he(kt,"B")&&(Rt=ye(null,[zt,Pt,Et,at],vt,_t)||Rt),he(kt,"C")&&(Rt=ye(null,[zt,Wt,ze,at],vt,_t)||Rt),he(kt,"D")&&(Rt=ye(null,[Pt,Wt,tt,at],vt,_t)||Rt),he(kt,"E")&&(Rt=ye(null,[zt,Pt,Wt,at],vt,_t)||Rt)),m&&(Rt=ye(kt,[zt,Pt,Wt,at],vt,_t)||Rt),Rt}t(we,"addCube");function Ee(kt,ft,zt,Pt,Et,Wt,ze,tt){return[tt[0]===!0?!0:de(kt,pe([ft,zt,Pt]),[ft,zt,Pt],Wt,ze),tt[1]===!0?!0:de(kt,pe([Pt,Et,ft]),[Pt,Et,ft],Wt,ze)]}t(Ee,"addRect");function De(kt,ft,zt,Pt,Et,Wt,ze,tt,at){return tt?Ee(kt,ft,zt,Et,Pt,Wt,ze,at):Ee(kt,zt,Et,Pt,ft,Wt,ze,at)}t(De,"begin2dCell");function Fe(kt,ft,zt,Pt,Et,Wt,ze){var tt=!1,at,vt,_t,Rt,nr=t(function(){tt=de(kt,[at,vt,_t],[-1,-1,-1],Et,Wt)||tt,tt=de(kt,[_t,Rt,at],[-1,-1,-1],Et,Wt)||tt},"makeSection"),ir=ze[0],ur=ze[1],qt=ze[2];return ir&&(at=ie(pe([P(ft,zt-0,Pt-0)])[0],pe([P(ft-1,zt-0,Pt-0)])[0],ir),vt=ie(pe([P(ft,zt-0,Pt-1)])[0],pe([P(ft-1,zt-0,Pt-1)])[0],ir),_t=ie(pe([P(ft,zt-1,Pt-1)])[0],pe([P(ft-1,zt-1,Pt-1)])[0],ir),Rt=ie(pe([P(ft,zt-1,Pt-0)])[0],pe([P(ft-1,zt-1,Pt-0)])[0],ir),nr()),ur&&(at=ie(pe([P(ft-0,zt,Pt-0)])[0],pe([P(ft-0,zt-1,Pt-0)])[0],ur),vt=ie(pe([P(ft-0,zt,Pt-1)])[0],pe([P(ft-0,zt-1,Pt-1)])[0],ur),_t=ie(pe([P(ft-1,zt,Pt-1)])[0],pe([P(ft-1,zt-1,Pt-1)])[0],ur),Rt=ie(pe([P(ft-1,zt,Pt-0)])[0],pe([P(ft-1,zt-1,Pt-0)])[0],ur),nr()),qt&&(at=ie(pe([P(ft-0,zt-0,Pt)])[0],pe([P(ft-0,zt-0,Pt-1)])[0],qt),vt=ie(pe([P(ft-0,zt-1,Pt)])[0],pe([P(ft-0,zt-1,Pt-1)])[0],qt),_t=ie(pe([P(ft-1,zt-1,Pt)])[0],pe([P(ft-1,zt-1,Pt-1)])[0],qt),Rt=ie(pe([P(ft-1,zt-0,Pt)])[0],pe([P(ft-1,zt-0,Pt-1)])[0],qt),nr()),tt}t(Fe,"beginSection");function qe(kt,ft,zt,Pt,Et,Wt,ze,tt,at,vt,_t,Rt){var nr=kt;return Rt?(b&&kt==="even"&&(nr=null),we(nr,ft,zt,Pt,Et,Wt,ze,tt,at,vt,_t)):(b&&kt==="odd"&&(nr=null),we(nr,at,tt,ze,Wt,Et,Pt,zt,ft,vt,_t))}t(qe,"begin3dCell");function Je(kt,ft,zt,Pt,Et){for(var Wt=[],ze=0,tt=0;tt<ft.length;tt++)for(var at=ft[tt],vt=1;vt<k;vt++)for(var _t=1;_t<S;_t++)Wt.push(De(kt,P(at,_t-1,vt-1),P(at,_t-1,vt),P(at,_t,vt-1),P(at,_t,vt),zt,Pt,(at+_t+vt)%2,Et&&Et[ze]?Et[ze]:[])),ze++;return Wt}t(Je,"draw2dX");function Ge(kt,ft,zt,Pt,Et){for(var Wt=[],ze=0,tt=0;tt<ft.length;tt++)for(var at=ft[tt],vt=1;vt<A;vt++)for(var _t=1;_t<k;_t++)Wt.push(De(kt,P(vt-1,at,_t-1),P(vt,at,_t-1),P(vt-1,at,_t),P(vt,at,_t),zt,Pt,(vt+at+_t)%2,Et&&Et[ze]?Et[ze]:[])),ze++;return Wt}t(Ge,"draw2dY");function et(kt,ft,zt,Pt,Et){for(var Wt=[],ze=0,tt=0;tt<ft.length;tt++)for(var at=ft[tt],vt=1;vt<S;vt++)for(var _t=1;_t<A;_t++)Wt.push(De(kt,P(_t-1,vt-1,at),P(_t-1,vt,at),P(_t,vt-1,at),P(_t,vt,at),zt,Pt,(_t+vt+at)%2,Et&&Et[ze]?Et[ze]:[])),ze++;return Wt}t(et,"draw2dZ");function Ue(kt,ft,zt){for(var Pt=1;Pt<k;Pt++)for(var Et=1;Et<S;Et++)for(var Wt=1;Wt<A;Wt++)qe(kt,P(Wt-1,Et-1,Pt-1),P(Wt-1,Et-1,Pt),P(Wt-1,Et,Pt-1),P(Wt-1,Et,Pt),P(Wt,Et-1,Pt-1),P(Wt,Et-1,Pt),P(Wt,Et,Pt-1),P(Wt,Et,Pt),ft,zt,(Wt+Et+Pt)%2)}t(Ue,"draw3d");function Ye(kt,ft,zt){m=!0,Ue(kt,ft,zt),m=!1}t(Ye,"drawSpaceframe");function $e(kt,ft,zt){b=!0,Ue(kt,ft,zt),b=!1}t($e,"drawSurface");function Ct(kt,ft,zt,Pt,Et,Wt){for(var ze=[],tt=0,at=0;at<ft.length;at++)for(var vt=ft[at],_t=1;_t<k;_t++)for(var Rt=1;Rt<S;Rt++)ze.push(Fe(kt,vt,Rt,_t,zt,Pt,Et[at],Wt&&Wt[tt]?Wt[tt]:[])),tt++;return ze}t(Ct,"drawSectionX");function It(kt,ft,zt,Pt,Et,Wt){for(var ze=[],tt=0,at=0;at<ft.length;at++)for(var vt=ft[at],_t=1;_t<A;_t++)for(var Rt=1;Rt<k;Rt++)ze.push(Fe(kt,_t,vt,Rt,zt,Pt,Et[at],Wt&&Wt[tt]?Wt[tt]:[])),tt++;return ze}t(It,"drawSectionY");function Vt(kt,ft,zt,Pt,Et,Wt){for(var ze=[],tt=0,at=0;at<ft.length;at++)for(var vt=ft[at],_t=1;_t<S;_t++)for(var Rt=1;Rt<A;Rt++)ze.push(Fe(kt,Rt,_t,vt,zt,Pt,Et[at],Wt&&Wt[tt]?Wt[tt]:[])),tt++;return ze}t(Vt,"drawSectionZ");function $t(kt,ft){for(var zt=[],Pt=kt;Pt<ft;Pt++)zt.push(Pt);return zt}t($t,"createRange");function Gt(){for(var kt=0;kt<A;kt++)for(var ft=0;ft<S;ft++)for(var zt=0;zt<k;zt++){var Pt=P(kt,ft,zt);$(v._x[Pt],v._y[Pt],v._z[Pt],v._value[Pt])}}t(Gt,"insertGridPoints");function Jt(){G(),Gt();var kt=null;if(d&&p&&(W(p),Ye(kt,z,R)),c&&g){W(g);for(var ft=v.surface.pattern,zt=v.surface.count,Pt=0;Pt<zt;Pt++){var Et=zt===1?.5:Pt/(zt-1),Wt=(1-Et)*z+Et*R,ze=Math.abs(Wt-D),tt=Math.abs(Wt-B),at=ze>tt?[D,Wt]:[Wt,B];$e(ft,at[0],at[1])}}var vt=[[Math.min(z,B),Math.max(z,B)],[Math.min(D,R),Math.max(D,R)]];["x","y","z"].forEach(function(_t){for(var Rt=[],nr=0;nr<vt.length;nr++){var ir=0,ur=vt[nr][0],qt=vt[nr][1],hr=v.slices[_t];if(hr.show&&hr.fill){W(hr.fill);var Fr=[],Br=[],na=[];if(hr.locations.length)for(var Ia=0;Ia<hr.locations.length;Ia++){var ea=o(hr.locations[Ia],_t==="x"?M:_t==="y"?w:x);ea.distRatio===0?Fr.push(ea.id):ea.id>0&&(Br.push(ea.id),_t==="x"?na.push([ea.distRatio,0,0]):_t==="y"?na.push([0,ea.distRatio,0]):na.push([0,0,ea.distRatio]))}else _t==="x"?Fr=$t(1,A-1):_t==="y"?Fr=$t(1,S-1):Fr=$t(1,k-1);Br.length>0&&(_t==="x"?Rt[ir]=Ct(kt,Br,ur,qt,na,Rt[ir]):_t==="y"?Rt[ir]=It(kt,Br,ur,qt,na,Rt[ir]):Rt[ir]=Vt(kt,Br,ur,qt,na,Rt[ir]),ir++),Fr.length>0&&(_t==="x"?Rt[ir]=Je(kt,Fr,ur,qt,Rt[ir]):_t==="y"?Rt[ir]=Ge(kt,Fr,ur,qt,Rt[ir]):Rt[ir]=et(kt,Fr,ur,qt,Rt[ir]),ir++)}var Er=v.caps[_t];Er.show&&Er.fill&&(W(Er.fill),_t==="x"?Rt[ir]=Je(kt,[0,A-1],ur,qt,Rt[ir]):_t==="y"?Rt[ir]=Ge(kt,[0,S-1],ur,qt,Rt[ir]):Rt[ir]=et(kt,[0,k-1],ur,qt,Rt[ir]),ir++)}}),y===0&&G(),v._meshX=F,v._meshY=O,v._meshZ=q,v._meshIntensity=H,v._Xs=M,v._Ys=w,v._Zs=x}return t(Jt,"drawAll"),Jt(),v}t(f,"generateIsoMeshes");function h(v,c){var d=v.glplot.gl,g=e({gl:d}),p=new a(v,g,c.uid);return g._trace=p,p.update(c),v.glplot.add(g),p}return t(h,"createIsosurfaceTrace"),bC={findNearestOnAxis:o,generateIsoMeshes:f,createIsosurfaceTrace:h},bC}t(rF,"requireConvert$b");var _C,qX;function SIe(){return qX||(qX=1,_C={attributes:U7(),supplyDefaults:Ahe().supplyDefaults,calc:She(),colorbar:{min:"cmin",max:"cmax"},plot:rF().createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:F0(),categories:["gl3d","showLegend"],meta:{description:["Draws isosurfaces between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}}),_C}t(SIe,"requireIsosurface$1");var UX;function MIe(){return UX||(UX=1,function(e){e.exports=SIe()}(vC)),vC.exports}t(MIe,"requireIsosurface");var wC={exports:{}},TC={exports:{}},HX;function Mhe(){if(HX)return TC.exports;HX=1;var e=Qi,r=U7(),n=Qw(),i=Ni,s=cn.extendFlat,o=_o.overrideAll,a=TC.exports=o(s({x:r.x,y:r.y,z:r.z,value:r.value,isomin:r.isomin,isomax:r.isomax,surface:r.surface,spaceframe:{show:{valType:"boolean",dflt:!1,description:["Displays/hides tetrahedron shapes between minimum and","maximum iso-values. Often useful when either caps or","surfaces are disabled or filled with values less than 1."].join(" ")},fill:{valType:"number",min:0,max:1,dflt:1,description:["Sets the fill ratio of the `spaceframe` elements. The default fill value","is 1 meaning that they are entirely shaded. Applying a `fill` ratio less","than one would allow the creation of openings parallel to the edges."].join(" ")}},slices:r.slices,caps:r.caps,text:r.text,hovertext:r.hovertext,xhoverformat:r.xhoverformat,yhoverformat:r.yhoverformat,zhoverformat:r.zhoverformat,valuehoverformat:r.valuehoverformat,hovertemplate:r.hovertemplate},e("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:r.colorbar,opacity:r.opacity,opacityscale:n.opacityscale,lightposition:r.lightposition,lighting:r.lighting,flatshading:r.flatshading,contour:r.contour,hoverinfo:s({},i.hoverinfo),showlegend:s({},i.showlegend,{dflt:!1})}),"calc","nested");return a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0,TC.exports}t(Mhe,"requireAttributes$p");var AC,$X;function kIe(){if($X)return AC;$X=1;var e=Nt.exports,r=Mhe(),n=Ahe().supplyIsoDefaults,i=The().opacityscaleDefaults;return AC=t(function(o,a,l,u){function f(h,v){return e.coerce(o,a,r,h,v)}t(f,"coerce"),n(o,a,l,u,f),i(o,a,u,f)},"supplyDefaults"),AC}t(kIe,"requireDefaults$q");var SC,VX;function EIe(){if(VX)return SC;VX=1;var e=ys().gl_mesh3d,r=mp().parseColorScale,n=zh(),i=ko.extractOpts,s=bx(),o=rF().findNearestOnAxis,a=rF().generateIsoMeshes;function l(h,v,c){this.scene=h,this.uid=c,this.mesh=v,this.name="",this.data=null,this.showContour=!1}t(l,"VolumeTrace");var u=l.prototype;u.handlePick=function(h){if(h.object===this.mesh){var v=h.data.index,c=this.data._meshX[v],d=this.data._meshY[v],g=this.data._meshZ[v],p=this.data._Ys.length,b=this.data._Zs.length,m=o(c,this.data._Xs).id,y=o(d,this.data._Ys).id,T=o(g,this.data._Zs).id,_=h.index=T+b*y+b*p*m;h.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&M[_]!==void 0?h.textLabel=M[_]:M&&(h.textLabel=M),!0}},u.update=function(h){var v=this.scene,c=v.fullSceneLayout;this.data=a(h);function d(y,T,_,M){return T.map(function(w){return y.d2l(w,0,M)*_})}t(d,"toDataCoords");var g=s(d(c.xaxis,h._meshX,v.dataScale[0],h.xcalendar),d(c.yaxis,h._meshY,v.dataScale[1],h.ycalendar),d(c.zaxis,h._meshZ,v.dataScale[2],h.zcalendar)),p=s(h._meshI,h._meshJ,h._meshK),b={positions:g,cells:p,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,opacityscale:h.opacityscale,contourEnable:h.contour.show,contourColor:n(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading},m=i(h);b.vertexIntensity=h._meshIntensity,b.vertexIntensityBounds=[m.min,m.max],b.colormap=r(h),this.mesh.update(b)},u.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(h,v){var c=h.glplot.gl,d=e({gl:c}),g=new l(h,d,v.uid);return d._trace=g,g.update(v),h.glplot.add(d),g}return t(f,"createVolumeTrace"),SC=f,SC}t(EIe,"requireConvert$a");var MC,GX;function CIe(){return GX||(GX=1,MC={attributes:Mhe(),supplyDefaults:kIe(),calc:She(),colorbar:{min:"cmin",max:"cmax"},plot:EIe(),moduleType:"trace",name:"volume",basePlotModule:F0(),categories:["gl3d","showLegend"],meta:{description:["Draws volume trace between iso-min and iso-max values with coordinates given by","four 1-dimensional arrays containing the `value`, `x`, `y` and `z` of every vertex","of a uniform or non-uniform 3-D grid. Horizontal or vertical slices, caps as well as","spaceframe between iso-min and iso-max values could also be drawn using this trace."].join(" ")}}),MC}t(CIe,"requireVolume$1");var jX;function LIe(){return jX||(jX=1,function(e){e.exports=CIe()}(wC)),wC.exports}t(LIe,"requireVolume");var kC={exports:{}},EC,YX;function RIe(){if(YX)return EC;YX=1;var e=Na,r=Nt.exports,n=ml,i=xx();return EC=t(function(o,a,l,u){function f(g,p){return r.coerce(o,a,i,g,p)}t(f,"coerce");function h(g){var p=g.map(function(b){var m=f(b);return m&&r.isArrayOrTypedArray(m)?m:null});return p.every(function(b){return b&&b.length===p[0].length})&&p}t(h,"readComponents");var v=h(["x","y","z"]);if(!v){a.visible=!1;return}if(h(["i","j","k"]),a.i&&(!a.j||!a.k)||a.j&&(!a.k||!a.i)||a.k&&(!a.i||!a.j)){a.visible=!1;return}var c=e.getComponentMethod("calendars","handleTraceDefaults");c(o,a,["x","y","z"],u),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(g){f(g)});var d=f("contour.show");d&&(f("contour.color"),f("contour.width")),"intensity"in o?(f("intensity"),f("intensitymode"),n(o,a,u,f,{prefix:"",cLetter:"c"})):(a.showscale=!1,"facecolor"in o?f("facecolor"):"vertexcolor"in o?f("vertexcolor"):f("color",l)),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),a._length=null},"supplyDefaults"),EC}t(RIe,"requireDefaults$p");var CC,WX;function PIe(){if(WX)return CC;WX=1;var e=Lf;return CC=t(function(n,i){i.intensity&&e(n,i,{vals:i.intensity,containerStr:"",cLetter:"c"})},"calc"),CC}t(PIe,"requireCalc$k");var LC,XX;function DIe(){if(XX)return LC;XX=1;var e=ys().gl_mesh3d,r=ys().delaunay_triangulate,n=ys().alpha_shape,i=ys().convex_hull,s=mp().parseColorScale,o=zh(),a=ko.extractOpts,l=bx();function u(b,m,y){this.scene=b,this.uid=y,this.mesh=m,this.name="",this.color="#fff",this.data=null,this.showContour=!1}t(u,"Mesh3DTrace");var f=u.prototype;f.handlePick=function(b){if(b.object===this.mesh){var m=b.index=b.data.index;b.data._cellCenter?b.traceCoordinate=b.data.dataCoordinate:b.traceCoordinate=[this.data.x[m],this.data.y[m],this.data.z[m]];var y=this.data.hovertext||this.data.text;return Array.isArray(y)&&y[m]!==void 0?b.textLabel=y[m]:y&&(b.textLabel=y),!0}};function h(b){for(var m=[],y=b.length,T=0;T<y;T++)m[T]=o(b[T]);return m}t(h,"parseColorArray");function v(b,m,y,T){for(var _=[],M=m.length,w=0;w<M;w++)_[w]=b.d2l(m[w],0,T)*y;return _}t(v,"toDataCoords");function c(b){for(var m=[],y=b.length,T=0;T<y;T++)m[T]=Math.round(b[T]);return m}t(c,"toRoundIndex");function d(b,m){for(var y=["x","y","z"].indexOf(b),T=[],_=m.length,M=0;M<_;M++)T[M]=[m[M][(y+1)%3],m[M][(y+2)%3]];return r(T)}t(d,"delaunayCells");function g(b,m){for(var y=b.length,T=0;T<y;T++)if(b[T]<=-.5||b[T]>=m-.5)return!1;return!0}t(g,"hasValidIndices"),f.update=function(b){var m=this.scene,y=m.fullSceneLayout;this.data=b;var T=b.x.length,_=l(v(y.xaxis,b.x,m.dataScale[0],b.xcalendar),v(y.yaxis,b.y,m.dataScale[1],b.ycalendar),v(y.zaxis,b.z,m.dataScale[2],b.zcalendar)),M;if(b.i&&b.j&&b.k){if(b.i.length!==b.j.length||b.j.length!==b.k.length||!g(b.i,T)||!g(b.j,T)||!g(b.k,T))return;M=l(c(b.i),c(b.j),c(b.k))}else b.alphahull===0?M=i(_):b.alphahull>0?M=n(b.alphahull,_):M=d(b.delaunayaxis,_);var w={positions:_,cells:M,lightPosition:[b.lightposition.x,b.lightposition.y,b.lightposition.z],ambient:b.lighting.ambient,diffuse:b.lighting.diffuse,specular:b.lighting.specular,roughness:b.lighting.roughness,fresnel:b.lighting.fresnel,vertexNormalsEpsilon:b.lighting.vertexnormalsepsilon,faceNormalsEpsilon:b.lighting.facenormalsepsilon,opacity:b.opacity,contourEnable:b.contour.show,contourColor:o(b.contour.color).slice(0,3),contourWidth:b.contour.width,useFacetNormals:b.flatshading};if(b.intensity){var x=a(b);this.color="#fff";var A=b.intensitymode;w[A+"Intensity"]=b.intensity,w[A+"IntensityBounds"]=[x.min,x.max],w.colormap=s(b)}else b.vertexcolor?(this.color=b.vertexcolor[0],w.vertexColors=h(b.vertexcolor)):b.facecolor?(this.color=b.facecolor[0],w.cellColors=h(b.facecolor)):(this.color=b.color,w.meshColor=o(b.color));this.mesh.update(w)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(b,m){var y=b.glplot.gl,T=e({gl:y}),_=new u(b,T,m.uid);return T._trace=_,_.update(m),b.glplot.add(T),_}return t(p,"createMesh3DTrace"),LC=p,LC}t(DIe,"requireConvert$9");var RC,ZX;function IIe(){return ZX||(ZX=1,RC={attributes:xx(),supplyDefaults:RIe(),calc:PIe(),colorbar:{min:"cmin",max:"cmax"},plot:DIe(),moduleType:"trace",name:"mesh3d",basePlotModule:F0(),categories:["gl3d","showLegend"],meta:{description:["Draws sets of triangles with coordinates given by","three 1-dimensional arrays in `x`, `y`, `z` and","(1) a sets of `i`, `j`, `k` indices","(2) Delaunay triangulation or","(3) the Alpha-shape algorithm or","(4) the Convex-hull algorithm"].join(" ")}}),RC}t(IIe,"requireMesh3d$1");var KX;function zIe(){return KX||(KX=1,function(e){e.exports=IIe()}(kC)),kC.exports}t(zIe,"requireMesh3d");var PC={exports:{}},DC,JX;function khe(){if(JX)return DC;JX=1;var e=Qi,r=Vo.axisHoverFormat,n=Un.hovertemplateAttrs,i=xx(),s=Ni,o=cn.extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x coordinates of the vector field","and of the displayed cones."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the y coordinates of the vector field","and of the displayed cones."].join(" ")},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the z coordinates of the vector field","and of the displayed cones."].join(" ")},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled",description:["Determines whether `sizeref` is set as a *scaled* (i.e unitless) scalar","(normalized by the max u/v/w norm in the vector field) or as","*absolute* value (in the same units as the vector field)."].join(" ")},sizeref:{valType:"number",editType:"calc",min:0,description:["Adjusts the cone size scaling.","The size of the cones is determined by their u/v/w norm multiplied a factor and `sizeref`.",'This factor (computed internally) corresponds to the minimum "time" to travel across',"two successive x/y/z positions at the average velocity of those two successive positions.","All cones in a given trace use the same factor.","With `sizemode` set to *scaled*, `sizeref` is unitless, its default value is *0.5*","With `sizemode` set to *absolute*, `sizeref` has the same units as the u/v/w vector field,","its the default value is half the sample's maximum vector norm."].join(" ")},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm",description:["Sets the cones' anchor with respect to their x/y/z positions.","Note that *cm* denote the cone's center of mass which corresponds to","1/4 from the tail to tip."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets the text elements associated with the cones.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},hovertemplate:n({editType:"calc"},{keys:["norm"]}),uhoverformat:r("u",1),vhoverformat:r("v",1),whoverformat:r("w",1),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),showlegend:o({},s.showlegend,{dflt:!1})};o(a,e("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var l=["opacity","lightposition","lighting"];return l.forEach(function(u){a[u]=i[u]}),a.hoverinfo=o({},s.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,DC=a,DC}t(khe,"requireAttributes$o");var IC,QX;function FIe(){if(QX)return IC;QX=1;var e=Nt.exports,r=ml,n=khe();return IC=t(function(s,o,a,l){function u(p,b){return e.coerce(s,o,n,p,b)}t(u,"coerce");var f=u("u"),h=u("v"),v=u("w"),c=u("x"),d=u("y"),g=u("z");if(!f||!f.length||!h||!h.length||!v||!v.length||!c||!c.length||!d||!d.length||!g||!g.length){o.visible=!1;return}u("sizeref"),u("sizemode"),u("anchor"),u("lighting.ambient"),u("lighting.diffuse"),u("lighting.specular"),u("lighting.roughness"),u("lighting.fresnel"),u("lightposition.x"),u("lightposition.y"),u("lightposition.z"),r(s,o,l,u,{prefix:"",cLetter:"c"}),u("text"),u("hovertext"),u("hovertemplate"),u("uhoverformat"),u("vhoverformat"),u("whoverformat"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),o._length=null},"supplyDefaults"),IC}t(FIe,"requireDefaults$o");var zC,eZ;function BIe(){if(eZ)return zC;eZ=1;var e=Lf;return zC=t(function(n,i){for(var s=i.u,o=i.v,a=i.w,l=Math.min(i.x.length,i.y.length,i.z.length,s.length,o.length,a.length),u=-1/0,f=1/0,h=0;h<l;h++){var v=s[h],c=o[h],d=a[h],g=Math.sqrt(v*v+c*c+d*d);u=Math.max(u,g),f=Math.min(f,g)}i._len=l,i._normMax=u,e(n,i,{vals:[f,u],containerStr:"",cLetter:"c"})},"calc"),zC}t(BIe,"requireCalc$j");var FC,tZ;function OIe(){if(tZ)return FC;tZ=1;var e=ys().gl_cone3d,r=ys().gl_cone3d.createConeMesh,n=Nt.exports.simpleMap,i=mp().parseColorScale,s=ko.extractOpts,o=bx();function a(d,g){this.scene=d,this.uid=g,this.mesh=null,this.data=null}t(a,"Cone");var l=a.prototype;l.handlePick=function(d){if(d.object===this.mesh){var g=d.index=d.data.index,p=this.data.x[g],b=this.data.y[g],m=this.data.z[g],y=this.data.u[g],T=this.data.v[g],_=this.data.w[g];d.traceCoordinate=[p,b,m,y,T,_,Math.sqrt(y*y+T*T+_*_)];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&M[g]!==void 0?d.textLabel=M[g]:M&&(d.textLabel=M),!0}};var u={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},h={tip:1,tail:1,cm:.75,center:.5};function v(d,g){var p=d.fullSceneLayout,b=d.dataScale,m={};function y(w,x){var A=p[x],S=b[u[x]];return n(w,function(k){return A.d2l(k)*S})}t(y,"toDataCoords"),m.vectors=o(y(g.u,"xaxis"),y(g.v,"yaxis"),y(g.w,"zaxis"),g._len),m.positions=o(y(g.x,"xaxis"),y(g.y,"yaxis"),y(g.z,"zaxis"),g._len);var T=s(g);m.colormap=i(g),m.vertexIntensityBounds=[T.min/g._normMax,T.max/g._normMax],m.coneOffset=f[g.anchor],g.sizemode==="scaled"?m.coneSize=g.sizeref||.5:m.coneSize=g.sizeref&&g._normMax?g.sizeref/g._normMax:.5;var _=e(m),M=g.lightposition;return _.lightPosition=[M.x,M.y,M.z],_.ambient=g.lighting.ambient,_.diffuse=g.lighting.diffuse,_.specular=g.lighting.specular,_.roughness=g.lighting.roughness,_.fresnel=g.lighting.fresnel,_.opacity=g.opacity,g._pad=h[g.anchor]*_.vectorScale*_.coneScale*g._normMax,_}t(v,"convert"),l.update=function(d){this.data=d;var g=v(this.scene,d);this.mesh.update(g)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(d,g){var p=d.glplot.gl,b=v(d,g),m=r(p,b),y=new a(d,g.uid);return y.mesh=m,y.data=g,m._trace=y,d.glplot.add(m),y}return t(c,"createConeTrace"),FC=c,FC}t(OIe,"requireConvert$8");var BC,rZ;function NIe(){return rZ||(rZ=1,BC={moduleType:"trace",name:"cone",basePlotModule:F0(),categories:["gl3d","showLegend"],attributes:khe(),supplyDefaults:FIe(),colorbar:{min:"cmin",max:"cmax"},calc:BIe(),plot:OIe(),eventData:function(e,r){return e.norm=r.traceCoordinate[6],e},meta:{description:["Use cone traces to visualize vector fields.","","Specify a vector field using 6 1D arrays,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, `w`.","The cones are drawn exactly at the positions given","by `x`, `y` and `z`."].join(" ")}}),BC}t(NIe,"requireCone$1");var aZ;function qIe(){return aZ||(aZ=1,function(e){e.exports=NIe()}(PC)),PC.exports}t(qIe,"requireCone");var OC={exports:{}},NC,nZ;function Ehe(){if(nZ)return NC;nZ=1;var e=Qi,r=Vo.axisHoverFormat,n=Un.hovertemplateAttrs,i=xx(),s=Ni,o=cn.extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the x coordinates of the vector field."},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the y coordinates of the vector field."},z:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the z coordinates of the vector field."},u:{valType:"data_array",editType:"calc",description:"Sets the x components of the vector field."},v:{valType:"data_array",editType:"calc",description:"Sets the y components of the vector field."},w:{valType:"data_array",editType:"calc",description:"Sets the z components of the vector field."},starts:{x:{valType:"data_array",editType:"calc",description:["Sets the x components of the starting position of the streamtubes"].join(" ")},y:{valType:"data_array",editType:"calc",description:["Sets the y components of the starting position of the streamtubes"].join(" ")},z:{valType:"data_array",editType:"calc",description:["Sets the z components of the starting position of the streamtubes"].join(" ")},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc",description:["The maximum number of displayed segments in a streamtube."].join(" ")},sizeref:{valType:"number",editType:"calc",min:0,dflt:1,description:["The scaling factor for the streamtubes.","The default is 1, which avoids two max divergence tubes from touching","at adjacent starting positions."].join(" ")},text:{valType:"string",dflt:"",editType:"calc",description:["Sets a text element associated with this trace.","If trace `hoverinfo` contains a *text* flag,","this text element will be seen in all hover labels.","Note that streamtube traces do not support array `text` values."].join(" ")},hovertext:{valType:"string",dflt:"",editType:"calc",description:"Same as `text`."},hovertemplate:n({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:r("u",1),vhoverformat:r("v",1),whoverformat:r("w",1),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),showlegend:o({},s.showlegend,{dflt:!1})};o(a,e("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var l=["opacity","lightposition","lighting"];return l.forEach(function(u){a[u]=i[u]}),a.hoverinfo=o({},s.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,NC=a,NC}t(Ehe,"requireAttributes$n");var qC,iZ;function UIe(){if(iZ)return qC;iZ=1;var e=Nt.exports,r=ml,n=Ehe();return qC=t(function(s,o,a,l){function u(p,b){return e.coerce(s,o,n,p,b)}t(u,"coerce");var f=u("u"),h=u("v"),v=u("w"),c=u("x"),d=u("y"),g=u("z");if(!f||!f.length||!h||!h.length||!v||!v.length||!c||!c.length||!d||!d.length||!g||!g.length){o.visible=!1;return}u("starts.x"),u("starts.y"),u("starts.z"),u("maxdisplayed"),u("sizeref"),u("lighting.ambient"),u("lighting.diffuse"),u("lighting.specular"),u("lighting.roughness"),u("lighting.fresnel"),u("lightposition.x"),u("lightposition.y"),u("lightposition.z"),r(s,o,l,u,{prefix:"",cLetter:"c"}),u("text"),u("hovertext"),u("hovertemplate"),u("uhoverformat"),u("vhoverformat"),u("whoverformat"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),o._length=null},"supplyDefaults"),qC}t(UIe,"requireDefaults$n");var UC,oZ;function HIe(){if(oZ)return UC;oZ=1;var e=ys().gl_streamtube3d,r=e.createTubeMesh,n=Nt.exports,i=mp().parseColorScale,s=ko.extractOpts,o=bx(),a={xaxis:0,yaxis:1,zaxis:2};function l(d,g){this.scene=d,this.uid=g,this.mesh=null,this.data=null}t(l,"Streamtube");var u=l.prototype;u.handlePick=function(d){var g=this.scene.fullSceneLayout,p=this.scene.dataScale;function b(T,_){var M=g[_],w=p[a[_]];return M.l2c(T)/w}if(t(b,"fromDataScale"),d.object===this.mesh){var m=d.data.position,y=d.data.velocity;return d.traceCoordinate=[b(m[0],"xaxis"),b(m[1],"yaxis"),b(m[2],"zaxis"),b(y[0],"xaxis"),b(y[1],"yaxis"),b(y[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}};function f(d){var g=d.length,p;return g>2?p=d.slice(1,g-1):g===2?p=[(d[0]+d[1])/2]:p=d,p}t(f,"getDfltStartingPositions");function h(d){var g=d.length;return g===1?[.5,.5]:[d[1]-d[0],d[g-1]-d[g-2]]}t(h,"getBoundPads");function v(d,g){var p=d.fullSceneLayout,b=d.dataScale,m=g._len,y={};function T(te,ee){var ie=p[ee],se=b[a[ee]];return n.simpleMap(te,function(W){return ie.d2l(W)*se})}if(t(T,"toDataCoords"),y.vectors=o(T(g._u,"xaxis"),T(g._v,"yaxis"),T(g._w,"zaxis"),m),!m)return{positions:[],cells:[]};var _=T(g._Xs,"xaxis"),M=T(g._Ys,"yaxis"),w=T(g._Zs,"zaxis");y.meshgrid=[_,M,w],y.gridFill=g._gridFill;var x=g._slen;if(x)y.startingPositions=o(T(g._startsX,"xaxis"),T(g._startsY,"yaxis"),T(g._startsZ,"zaxis"));else{for(var A=M[0],S=f(_),k=f(w),L=new Array(S.length*k.length),P=0,D=0;D<S.length;D++)for(var B=0;B<k.length;B++)L[P++]=[S[D],A,k[B]];y.startingPositions=L}y.colormap=i(g),y.tubeSize=g.sizeref,y.maxLength=g.maxdisplayed;var z=T(g._xbnds,"xaxis"),R=T(g._ybnds,"yaxis"),F=T(g._zbnds,"zaxis"),O=h(_),q=h(M),H=h(w),j=[[z[0]-O[0],R[0]-q[0],F[0]-H[0]],[z[1]+O[1],R[1]+q[1],F[1]+H[1]]],X=e(y,j),G=s(g);X.vertexIntensityBounds=[G.min/g._normMax,G.max/g._normMax];var $=g.lightposition;return X.lightPosition=[$.x,$.y,$.z],X.ambient=g.lighting.ambient,X.diffuse=g.lighting.diffuse,X.specular=g.lighting.specular,X.roughness=g.lighting.roughness,X.fresnel=g.lighting.fresnel,X.opacity=g.opacity,g._pad=X.tubeScale*g.sizeref*2,X}t(v,"convert"),u.update=function(d){this.data=d;var g=v(this.scene,d);this.mesh.update(g)},u.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(d,g){var p=d.glplot.gl,b=v(d,g),m=r(p,b),y=new l(d,g.uid);return y.mesh=m,y.data=g,m._trace=y,d.glplot.add(m),y}return t(c,"createStreamtubeTrace"),UC=c,UC}t(HIe,"requireConvert$7");var HC,sZ;function $Ie(){return sZ||(sZ=1,HC={moduleType:"trace",name:"streamtube",basePlotModule:F0(),categories:["gl3d","showLegend"],attributes:Ehe(),supplyDefaults:UIe(),colorbar:{min:"cmin",max:"cmax"},calc:tF().calc,plot:HIe(),eventData:function(e,r){return e.tubex=e.x,e.tubey=e.y,e.tubez=e.z,e.tubeu=r.traceCoordinate[3],e.tubev=r.traceCoordinate[4],e.tubew=r.traceCoordinate[5],e.norm=r.traceCoordinate[6],e.divergence=r.traceCoordinate[7],delete e.x,delete e.y,delete e.z,e},meta:{description:["Use a streamtube trace to visualize flow in a vector field.","","Specify a vector field using 6 1D arrays of equal length,","3 position arrays `x`, `y` and `z`","and 3 vector component arrays `u`, `v`, and `w`.","","By default, the tubes' starting positions will be cut from the vector field's","x-z plane at its minimum y value.","To specify your own starting position, use attributes `starts.x`, `starts.y`","and `starts.z`.","The color is encoded by the norm of (u, v, w), and the local radius","by the divergence of (u, v, w)."].join(" ")}}),HC}t($Ie,"requireStreamtube$1");var lZ;function VIe(){return lZ||(lZ=1,function(e){e.exports=$Ie()}(OC)),OC.exports}t(VIe,"requireStreamtube");var $C={exports:{}},VC,uZ;function _x(){if(uZ)return VC;uZ=1;var e=Un.hovertemplateAttrs,r=Un.texttemplateAttrs,n=Ps,i=Ni,s=Qi,o=yu.dash,a=cn.extendFlat,l=_o.overrideAll,u=n.marker,f=n.line,h=u.line;return VC=l({lon:{valType:"data_array",description:"Sets the longitude coordinates (in degrees East)."},lat:{valType:"data_array",description:"Sets the latitude coordinates (in degrees North)."},locations:{valType:"data_array",description:["Sets the coordinates via location IDs or names.","Coordinates correspond to the centroid of each location given.","See `locationmode` for more info."].join(" ")},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3",description:["Determines the set of locations used to match entries in `locations`","to regions on the map.","Values *ISO-3*, *USA-states*, *country names* correspond to features on","the base map and value *geojson-id* corresponds to features from a custom","GeoJSON linked to the `geojson` attribute."].join(" ")},geojson:{valType:"any",editType:"calc",description:["Sets optional GeoJSON data associated with this trace.","If not given, the features on the base map are used when `locations` is set.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")},featureidkey:{valType:"string",editType:"calc",dflt:"id",description:["Sets the key in GeoJSON features which is used as id to match the items","included in the `locations` array.","Only has an effect when `geojson` is set.","Support nested property, for example *properties.name*."].join(" ")},mode:a({},n.mode,{dflt:"markers"}),text:a({},n.text,{description:["Sets text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:r({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},n.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),textfont:n.textfont,textposition:n.textposition,line:{color:f.color,width:f.width,dash:o},connectgaps:n.connectgaps,marker:a({symbol:u.symbol,opacity:u.opacity,angle:u.angle,angleref:a({},u.angleref,{values:["previous","up","north"],description:["Sets the reference for marker angle.","With *previous*, angle 0 points along the line from the previous point to this one.","With *up*, angle 0 points toward the top of the screen.","With *north*, angle 0 points north based on the current map projection."].join(" ")}),standoff:u.standoff,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,colorbar:u.colorbar,line:a({width:h.width},s("marker.line")),gradient:u.gradient},s("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape."].join(" ")},fillcolor:n.fillcolor,selected:n.selected,unselected:n.unselected,hoverinfo:a({},i.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:e()},"calc","nested"),VC}t(_x,"requireAttributes$m");var GC,fZ;function GIe(){if(fZ)return GC;fZ=1;var e=Nt.exports,r=ho,n=Ph,i=mv,s=xv,o=dd,a=_x();return GC=t(function(u,f,h,v){function c(_,M){return e.coerce(u,f,a,_,M)}t(c,"coerce");var d=c("locations"),g;if(d&&d.length){var p=c("geojson"),b;(typeof p=="string"&&p!==""||e.isPlainObject(p))&&(b="geojson-id");var m=c("locationmode",b);m==="geojson-id"&&c("featureidkey"),g=d.length}else{var y=c("lon")||[],T=c("lat")||[];g=Math.min(y.length,T.length)}if(!g){f.visible=!1;return}f._length=g,c("text"),c("hovertext"),c("hovertemplate"),c("mode"),r.hasLines(f)&&(i(u,f,h,v,c),c("connectgaps")),r.hasMarkers(f)&&n(u,f,h,v,c,{gradient:!0}),r.hasText(f)&&(c("texttemplate"),s(u,f,v,c)),c("fill"),f.fill!=="none"&&o(u,f,h,c),e.coerceSelectionMarkerOpacity(f,c)},"supplyDefaults"),GC}t(GIe,"requireDefaults$m");var jC,cZ;function jIe(){if(cZ)return jC;cZ=1;var e=nn();return jC=t(function(n,i,s){var o={},a=s[i.geo]._subplot,l=a.mockAxis,u=n.lonlat;return o.lonLabel=e.tickText(l,l.c2l(u[0]),!0).text,o.latLabel=e.tickText(l,l.c2l(u[1]),!0).text,o},"formatLabels"),jC}t(jIe,"requireFormat_labels$6");var YC,hZ;function Che(){if(hZ)return YC;hZ=1;var e=xn,r=jn.BADNUM,n=Dh,i=pd,s=Ih,o=Nt.exports._;function a(l){return l&&typeof l=="string"}return t(a,"isNonBlankString"),YC=t(function(u,f){var h=Array.isArray(f.locations),v=h?f.locations.length:f._length,c=new Array(v),d;f.geojson?d=t(function(T){return a(T)||e(T)},"isValidLoc"):d=a;for(var g=0;g<v;g++){var p=c[g]={};if(h){var b=f.locations[g];p.loc=d(b)?b:null}else{var m=f.lon[g],y=f.lat[g];e(m)&&e(y)?p.lonlat=[+m,+y]:p.lonlat=[r,r]}}return i(c,f),n(u,f),s(c,f),v&&(c[0].t={labels:{lat:o(u,"lat:")+" ",lon:o(u,"lon:")+" "}}),c},"calc"),YC}t(Che,"requireCalc$i");var WC={exports:{}},Dl={},vZ;function e3(){return vZ||(vZ=1,Dl.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},Dl.axesNames=["lonaxis","lataxis"],Dl.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},Dl.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},Dl.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},Dl.clipPad=.001,Dl.precision=.1,Dl.landColor="#F0DC82",Dl.waterColor="#3399FF",Dl.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},Dl.sphereSVG={type:"Sphere"},Dl.fillLayers={ocean:1,land:1,lakes:1},Dl.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},Dl.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],Dl.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],Dl.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}),Dl}t(e3,"requireConstants$9");function Lhe(e){return e}t(Lhe,"identity$2");function H7(e){if(e==null)return Lhe;var r,n,i=e.scale[0],s=e.scale[1],o=e.translate[0],a=e.translate[1];return function(l,u){u||(r=n=0);var f=2,h=l.length,v=new Array(h);for(v[0]=(r+=l[0])*i+o,v[1]=(n+=l[1])*s+a;f<h;)v[f]=l[f],++f;return v}}t(H7,"transform$1");function Rhe(e){var r=H7(e.transform),n,i=1/0,s=i,o=-i,a=-i;function l(f){f=r(f),f[0]<i&&(i=f[0]),f[0]>o&&(o=f[0]),f[1]<s&&(s=f[1]),f[1]>a&&(a=f[1])}t(l,"bboxPoint");function u(f){switch(f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"Point":l(f.coordinates);break;case"MultiPoint":f.coordinates.forEach(l);break}}t(u,"bboxGeometry"),e.arcs.forEach(function(f){for(var h=-1,v=f.length,c;++h<v;)c=r(f[h],h),c[0]<i&&(i=c[0]),c[0]>o&&(o=c[0]),c[1]<s&&(s=c[1]),c[1]>a&&(a=c[1])});for(n in e.objects)u(e.objects[n]);return[i,s,o,a]}t(Rhe,"bbox");function YIe(e,r){for(var n,i=e.length,s=i-r;s<--i;)n=e[s],e[s++]=e[i],e[i]=n}t(YIe,"reverse");function WIe(e,r){return typeof r=="string"&&(r=e.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(n){return dZ(e,n)})}:dZ(e,r)}t(WIe,"feature");function dZ(e,r){var n=r.id,i=r.bbox,s=r.properties==null?{}:r.properties,o=t3(e,r);return n==null&&i==null?{type:"Feature",properties:s,geometry:o}:i==null?{type:"Feature",id:n,properties:s,geometry:o}:{type:"Feature",id:n,bbox:i,properties:s,geometry:o}}t(dZ,"feature$1");function t3(e,r){var n=H7(e.transform),i=e.arcs;function s(h,v){v.length&&v.pop();for(var c=i[h<0?~h:h],d=0,g=c.length;d<g;++d)v.push(n(c[d],d));h<0&&YIe(v,g)}t(s,"arc");function o(h){return n(h)}t(o,"point");function a(h){for(var v=[],c=0,d=h.length;c<d;++c)s(h[c],v);return v.length<2&&v.push(v[0]),v}t(a,"line");function l(h){for(var v=a(h);v.length<4;)v.push(v[0]);return v}t(l,"ring");function u(h){return h.map(l)}t(u,"polygon");function f(h){var v=h.type,c;switch(v){case"GeometryCollection":return{type:v,geometries:h.geometries.map(f)};case"Point":c=o(h.coordinates);break;case"MultiPoint":c=h.coordinates.map(o);break;case"LineString":c=a(h.arcs);break;case"MultiLineString":c=h.arcs.map(a);break;case"Polygon":c=u(h.arcs);break;case"MultiPolygon":c=h.arcs.map(u);break;default:return null}return{type:v,coordinates:c}}return t(f,"geometry"),f(r)}t(t3,"object$1");function Phe(e,r){var n={},i={},s={},o=[],a=-1;r.forEach(function(f,h){var v=e.arcs[f<0?~f:f],c;v.length<3&&!v[1][0]&&!v[1][1]&&(c=r[++a],r[a]=f,r[h]=c)}),r.forEach(function(f){var h=l(f),v=h[0],c=h[1],d,g;if(d=s[v])if(delete s[d.end],d.push(f),d.end=c,g=i[c]){delete i[g.start];var p=g===d?d:d.concat(g);i[p.start=d.start]=s[p.end=g.end]=p}else i[d.start]=s[d.end]=d;else if(d=i[c])if(delete i[d.start],d.unshift(f),d.start=v,g=s[v]){delete s[g.end];var b=g===d?d:g.concat(d);i[b.start=g.start]=s[b.end=d.end]=b}else i[d.start]=s[d.end]=d;else d=[f],i[d.start=v]=s[d.end=c]=d});function l(f){var h=e.arcs[f<0?~f:f],v=h[0],c;return e.transform?(c=[0,0],h.forEach(function(d){c[0]+=d[0],c[1]+=d[1]})):c=h[h.length-1],f<0?[c,v]:[v,c]}t(l,"ends");function u(f,h){for(var v in f){var c=f[v];delete h[c.start],delete c.start,delete c.end,c.forEach(function(d){n[d<0?~d:d]=1}),o.push(c)}}return t(u,"flush"),u(s,i),u(i,s),r.forEach(function(f){n[f<0?~f:f]||o.push([f])}),o}t(Phe,"stitch$1");function XIe(e){return t3(e,Dhe.apply(this,arguments))}t(XIe,"mesh");function Dhe(e,r,n){var i,s,o;if(arguments.length>1)i=ZIe(e,r,n);else for(s=0,i=new Array(o=e.arcs.length);s<o;++s)i[s]=s;return{type:"MultiLineString",arcs:Phe(e,i)}}t(Dhe,"meshArcs");function ZIe(e,r,n){var i=[],s=[],o;function a(v){var c=v<0?~v:v;(s[c]||(s[c]=[])).push({i:v,g:o})}t(a,"extract0");function l(v){v.forEach(a)}t(l,"extract1");function u(v){v.forEach(l)}t(u,"extract2");function f(v){v.forEach(u)}t(f,"extract3");function h(v){switch(o=v,v.type){case"GeometryCollection":v.geometries.forEach(h);break;case"LineString":l(v.arcs);break;case"MultiLineString":case"Polygon":u(v.arcs);break;case"MultiPolygon":f(v.arcs);break}}return t(h,"geometry"),h(r),s.forEach(n==null?function(v){i.push(v[0].i)}:function(v){n(v[0].g,v[v.length-1].g)&&i.push(v[0].i)}),i}t(ZIe,"extractArcs");function KIe(e){for(var r=-1,n=e.length,i,s=e[n-1],o=0;++r<n;)i=s,s=e[r],o+=i[0]*s[1]-i[1]*s[0];return Math.abs(o)}t(KIe,"planarRingArea");function JIe(e){return t3(e,Ihe.apply(this,arguments))}t(JIe,"merge$1");function Ihe(e,r){var n={},i=[],s=[];r.forEach(o);function o(u){switch(u.type){case"GeometryCollection":u.geometries.forEach(o);break;case"Polygon":a(u.arcs);break;case"MultiPolygon":u.arcs.forEach(a);break}}t(o,"geometry");function a(u){u.forEach(function(f){f.forEach(function(h){(n[h=h<0?~h:h]||(n[h]=[])).push(u)})}),i.push(u)}t(a,"extract");function l(u){return KIe(t3(e,{type:"Polygon",arcs:[u]}).coordinates[0])}return t(l,"area"),i.forEach(function(u){if(!u._){var f=[],h=[u];for(u._=1,s.push(f);u=h.pop();)f.push(u),u.forEach(function(v){v.forEach(function(c){n[c<0?~c:c].forEach(function(d){d._||(d._=1,h.push(d))})})})}}),i.forEach(function(u){delete u._}),{type:"MultiPolygon",arcs:s.map(function(u){var f=[],h;if(u.forEach(function(p){p.forEach(function(b){b.forEach(function(m){n[m<0?~m:m].length<2&&f.push(m)})})}),f=Phe(e,f),(h=f.length)>1)for(var v=1,c=l(f[0]),d,g;v<h;++v)(d=l(f[v]))>c&&(g=f[0],f[0]=f[v],f[v]=g,c=d);return f}).filter(function(u){return u.length>0})}}t(Ihe,"mergeArcs");function pZ(e,r){for(var n=0,i=e.length;n<i;){var s=n+i>>>1;e[s]<r?n=s+1:i=s}return n}t(pZ,"bisect");function QIe(e){var r={},n=e.map(function(){return[]});function i(p,b){p.forEach(function(m){m<0&&(m=~m);var y=r[m];y?y.push(b):r[m]=[b]})}t(i,"line");function s(p,b){p.forEach(function(m){i(m,b)})}t(s,"polygon");function o(p,b){p.type==="GeometryCollection"?p.geometries.forEach(function(m){o(m,b)}):p.type in a&&a[p.type](p.arcs,b)}t(o,"geometry");var a={LineString:i,MultiLineString:s,Polygon:s,MultiPolygon:function(p,b){p.forEach(function(m){s(m,b)})}};e.forEach(o);for(var l in r)for(var u=r[l],f=u.length,h=0;h<f;++h)for(var v=h+1;v<f;++v){var c=u[h],d=u[v],g;(g=n[c])[l=pZ(g,d)]!==d&&g.splice(l,0,d),(g=n[d])[l=pZ(g,c)]!==c&&g.splice(l,0,c)}return n}t(QIe,"neighbors");function zhe(e){if(e==null)return Lhe;var r,n,i=e.scale[0],s=e.scale[1],o=e.translate[0],a=e.translate[1];return function(l,u){u||(r=n=0);var f=2,h=l.length,v=new Array(h),c=Math.round((l[0]-o)/i),d=Math.round((l[1]-a)/s);for(v[0]=c-r,r=c,v[1]=d-n,n=d;f<h;)v[f]=l[f],++f;return v}}t(zhe,"untransform");function e6e(e,r){if(e.transform)throw new Error("already quantized");if(!r||!r.scale){if(!((a=Math.floor(r))>=2))throw new Error("n must be \u22652");u=e.bbox||Rhe(e);var n=u[0],i=u[1],s=u[2],o=u[3],a;r={scale:[s-n?(s-n)/(a-1):1,o-i?(o-i)/(a-1):1],translate:[n,i]}}else u=e.bbox;var l=zhe(r),u,f,h=e.objects,v={};function c(p){return l(p)}t(c,"quantizePoint");function d(p){var b;switch(p.type){case"GeometryCollection":b={type:"GeometryCollection",geometries:p.geometries.map(d)};break;case"Point":b={type:"Point",coordinates:c(p.coordinates)};break;case"MultiPoint":b={type:"MultiPoint",coordinates:p.coordinates.map(c)};break;default:return p}return p.id!=null&&(b.id=p.id),p.bbox!=null&&(b.bbox=p.bbox),p.properties!=null&&(b.properties=p.properties),b}t(d,"quantizeGeometry");function g(p){var b=0,m=1,y=p.length,T,_=new Array(y);for(_[0]=l(p[0],0);++b<y;)((T=l(p[b],b))[0]||T[1])&&(_[m++]=T);return m===1&&(_[m++]=[0,0]),_.length=m,_}t(g,"quantizeArc");for(f in h)v[f]=d(h[f]);return{type:"Topology",bbox:u,transform:r,objects:v,arcs:e.arcs.map(g)}}t(e6e,"quantize$2");const t6e=Object.freeze(Object.defineProperty({__proto__:null,bbox:Rhe,feature:WIe,mesh:XIe,meshArcs:Dhe,merge:JIe,mergeArcs:Ihe,neighbors:QIe,quantize:e6e,transform:H7,untransform:zhe},Symbol.toStringTag,{value:"Module"})),Fhe=Hc(t6e);var gZ;function $7(){if(gZ)return WC.exports;gZ=1;var e=WC.exports={},r=e3().locationmodeToLayer,n=Fhe.feature;return e.getTopojsonName=function(i){return[i.scope.replace(/ /g,"-"),"_",i.resolution.toString(),"m"].join("")},e.getTopojsonPath=function(i,s){return i+s+".json"},e.getTopojsonFeatures=function(i,s){var o=r[i.locationmode],a=s.objects[o];return n(s,a).features},WC.exports}t($7,"requireTopojson_utils");var Mg={},yZ;function r3(){if(yZ)return Mg;yZ=1;var e=jn.BADNUM;return Mg.calcTraceToLineCoords=function(r){for(var n=r[0].trace,i=n.connectgaps,s=[],o=[],a=0;a<r.length;a++){var l=r[a],u=l.lonlat;u[0]!==e?o.push(u):!i&&o.length>0&&(s.push(o),o=[])}return o.length>0&&s.push(o),s},Mg.makeLine=function(r){return r.length===1?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}},Mg.makePolygon=function(r){if(r.length===1)return{type:"Polygon",coordinates:r};for(var n=new Array(r.length),i=0;i<r.length;i++)n[i]=[r[i]];return{type:"MultiPolygon",coordinates:n}},Mg.makeBlank=function(){return{type:"Point",coordinates:[]}},Mg}t(r3,"requireGeojson_utils");var XC,mZ;function r6e(){return mZ||(mZ=1,XC={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}),XC}t(r6e,"requireCountryRegex");var Hb={},Ks={},ZC={},xZ;function Bhe(){return xZ||(xZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=63710088e-1,e.factors={centimeters:e.earthRadius*100,centimetres:e.earthRadius*100,degrees:e.earthRadius/111325,feet:e.earthRadius*3.28084,inches:e.earthRadius*39.37,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:e.earthRadius*1e3,millimetres:e.earthRadius*1e3,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius*1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(L,P,D){D===void 0&&(D={});var B={type:"Feature"};return(D.id===0||D.id)&&(B.id=D.id),D.bbox&&(B.bbox=D.bbox),B.properties=P||{},B.geometry=L,B}t(r,"feature"),e.feature=r;function n(L,P,D){switch(L){case"Point":return i(P).geometry;case"LineString":return l(P).geometry;case"Polygon":return o(P).geometry;case"MultiPoint":return v(P).geometry;case"MultiLineString":return h(P).geometry;case"MultiPolygon":return c(P).geometry;default:throw new Error(L+" is invalid")}}t(n,"geometry"),e.geometry=n;function i(L,P,D){if(D===void 0&&(D={}),!L)throw new Error("coordinates is required");if(!Array.isArray(L))throw new Error("coordinates must be an Array");if(L.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!x(L[0])||!x(L[1]))throw new Error("coordinates must contain numbers");var B={type:"Point",coordinates:L};return r(B,P,D)}t(i,"point"),e.point=i;function s(L,P,D){return D===void 0&&(D={}),f(L.map(function(B){return i(B,P)}),D)}t(s,"points"),e.points=s;function o(L,P,D){D===void 0&&(D={});for(var B=0,z=L;B<z.length;B++){var R=z[B];if(R.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<R[R.length-1].length;F++)if(R[R.length-1][F]!==R[0][F])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:L};return r(O,P,D)}t(o,"polygon"),e.polygon=o;function a(L,P,D){return D===void 0&&(D={}),f(L.map(function(B){return o(B,P)}),D)}t(a,"polygons"),e.polygons=a;function l(L,P,D){if(D===void 0&&(D={}),L.length<2)throw new Error("coordinates must be an array of two or more positions");var B={type:"LineString",coordinates:L};return r(B,P,D)}t(l,"lineString"),e.lineString=l;function u(L,P,D){return D===void 0&&(D={}),f(L.map(function(B){return l(B,P)}),D)}t(u,"lineStrings"),e.lineStrings=u;function f(L,P){P===void 0&&(P={});var D={type:"FeatureCollection"};return P.id&&(D.id=P.id),P.bbox&&(D.bbox=P.bbox),D.features=L,D}t(f,"featureCollection"),e.featureCollection=f;function h(L,P,D){D===void 0&&(D={});var B={type:"MultiLineString",coordinates:L};return r(B,P,D)}t(h,"multiLineString"),e.multiLineString=h;function v(L,P,D){D===void 0&&(D={});var B={type:"MultiPoint",coordinates:L};return r(B,P,D)}t(v,"multiPoint"),e.multiPoint=v;function c(L,P,D){D===void 0&&(D={});var B={type:"MultiPolygon",coordinates:L};return r(B,P,D)}t(c,"multiPolygon"),e.multiPolygon=c;function d(L,P,D){D===void 0&&(D={});var B={type:"GeometryCollection",geometries:L};return r(B,P,D)}t(d,"geometryCollection"),e.geometryCollection=d;function g(L,P){if(P===void 0&&(P=0),P&&!(P>=0))throw new Error("precision must be a positive number");var D=Math.pow(10,P||0);return Math.round(L*D)/D}t(g,"round"),e.round=g;function p(L,P){P===void 0&&(P="kilometers");var D=e.factors[P];if(!D)throw new Error(P+" units is invalid");return L*D}t(p,"radiansToLength"),e.radiansToLength=p;function b(L,P){P===void 0&&(P="kilometers");var D=e.factors[P];if(!D)throw new Error(P+" units is invalid");return L/D}t(b,"lengthToRadians"),e.lengthToRadians=b;function m(L,P){return T(b(L,P))}t(m,"lengthToDegrees"),e.lengthToDegrees=m;function y(L){var P=L%360;return P<0&&(P+=360),P}t(y,"bearingToAzimuth"),e.bearingToAzimuth=y;function T(L){var P=L%(2*Math.PI);return P*180/Math.PI}t(T,"radiansToDegrees"),e.radiansToDegrees=T;function _(L){var P=L%360;return P*Math.PI/180}t(_,"degreesToRadians"),e.degreesToRadians=_;function M(L,P,D){if(P===void 0&&(P="kilometers"),D===void 0&&(D="kilometers"),!(L>=0))throw new Error("length must be a positive number");return p(b(L,P),D)}t(M,"convertLength"),e.convertLength=M;function w(L,P,D){if(P===void 0&&(P="meters"),D===void 0&&(D="kilometers"),!(L>=0))throw new Error("area must be a positive number");var B=e.areaFactors[P];if(!B)throw new Error("invalid original units");var z=e.areaFactors[D];if(!z)throw new Error("invalid final units");return L/B*z}t(w,"convertArea"),e.convertArea=w;function x(L){return!isNaN(L)&&L!==null&&!Array.isArray(L)}t(x,"isNumber"),e.isNumber=x;function A(L){return!!L&&L.constructor===Object}t(A,"isObject"),e.isObject=A;function S(L){if(!L)throw new Error("bbox is required");if(!Array.isArray(L))throw new Error("bbox must be an Array");if(L.length!==4&&L.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");L.forEach(function(P){if(!x(P))throw new Error("bbox must only contain numbers")})}t(S,"validateBBox"),e.validateBBox=S;function k(L){if(!L)throw new Error("id is required");if(["string","number"].indexOf(typeof L)===-1)throw new Error("id must be a number or a string")}t(k,"validateId"),e.validateId=k}(ZC)),ZC}t(Bhe,"requireJs$4");var bZ;function V7(){if(bZ)return Ks;bZ=1,Object.defineProperty(Ks,"__esModule",{value:!0});var e=Bhe();function r(y,T,_){if(y!==null)for(var M,w,x,A,S,k,L,P=0,D=0,B,z=y.type,R=z==="FeatureCollection",F=z==="Feature",O=R?y.features.length:1,q=0;q<O;q++){L=R?y.features[q].geometry:F?y.geometry:y,B=L?L.type==="GeometryCollection":!1,S=B?L.geometries.length:1;for(var H=0;H<S;H++){var j=0,X=0;if(A=B?L.geometries[H]:L,A!==null){k=A.coordinates;var G=A.type;switch(P=_&&(G==="Polygon"||G==="MultiPolygon")?1:0,G){case null:break;case"Point":if(T(k,D,q,j,X)===!1)return!1;D++,j++;break;case"LineString":case"MultiPoint":for(M=0;M<k.length;M++){if(T(k[M],D,q,j,X)===!1)return!1;D++,G==="MultiPoint"&&j++}G==="LineString"&&j++;break;case"Polygon":case"MultiLineString":for(M=0;M<k.length;M++){for(w=0;w<k[M].length-P;w++){if(T(k[M][w],D,q,j,X)===!1)return!1;D++}G==="MultiLineString"&&j++,G==="Polygon"&&X++}G==="Polygon"&&j++;break;case"MultiPolygon":for(M=0;M<k.length;M++){for(X=0,w=0;w<k[M].length;w++){for(x=0;x<k[M][w].length-P;x++){if(T(k[M][w][x],D,q,j,X)===!1)return!1;D++}X++}j++}break;case"GeometryCollection":for(M=0;M<A.geometries.length;M++)if(r(A.geometries[M],T,_)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}t(r,"coordEach");function n(y,T,_,M){var w=_;return r(y,function(x,A,S,k,L){A===0&&_===void 0?w=x:w=T(w,x,A,S,k,L)},M),w}t(n,"coordReduce");function i(y,T){var _;switch(y.type){case"FeatureCollection":for(_=0;_<y.features.length&&T(y.features[_].properties,_)!==!1;_++);break;case"Feature":T(y.properties,0);break}}t(i,"propEach");function s(y,T,_){var M=_;return i(y,function(w,x){x===0&&_===void 0?M=w:M=T(M,w,x)}),M}t(s,"propReduce");function o(y,T){if(y.type==="Feature")T(y,0);else if(y.type==="FeatureCollection")for(var _=0;_<y.features.length&&T(y.features[_],_)!==!1;_++);}t(o,"featureEach");function a(y,T,_){var M=_;return o(y,function(w,x){x===0&&_===void 0?M=w:M=T(M,w,x)}),M}t(a,"featureReduce");function l(y){var T=[];return r(y,function(_){T.push(_)}),T}t(l,"coordAll");function u(y,T){var _,M,w,x,A,S,k,L,P,D,B=0,z=y.type==="FeatureCollection",R=y.type==="Feature",F=z?y.features.length:1;for(_=0;_<F;_++){for(S=z?y.features[_].geometry:R?y.geometry:y,L=z?y.features[_].properties:R?y.properties:{},P=z?y.features[_].bbox:R?y.bbox:void 0,D=z?y.features[_].id:R?y.id:void 0,k=S?S.type==="GeometryCollection":!1,A=k?S.geometries.length:1,w=0;w<A;w++){if(x=k?S.geometries[w]:S,x===null){if(T(null,B,L,P,D)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(T(x,B,L,P,D)===!1)return!1;break}case"GeometryCollection":{for(M=0;M<x.geometries.length;M++)if(T(x.geometries[M],B,L,P,D)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}B++}}t(u,"geomEach");function f(y,T,_){var M=_;return u(y,function(w,x,A,S,k){x===0&&_===void 0?M=w:M=T(M,w,x,A,S,k)}),M}t(f,"geomReduce");function h(y,T){u(y,function(_,M,w,x,A){var S=_===null?null:_.type;switch(S){case null:case"Point":case"LineString":case"Polygon":return T(e.feature(_,w,{bbox:x,id:A}),M,0)===!1?!1:void 0}var k;switch(S){case"MultiPoint":k="Point";break;case"MultiLineString":k="LineString";break;case"MultiPolygon":k="Polygon";break}for(var L=0;L<_.coordinates.length;L++){var P=_.coordinates[L],D={type:k,coordinates:P};if(T(e.feature(D,w),M,L)===!1)return!1}})}t(h,"flattenEach");function v(y,T,_){var M=_;return h(y,function(w,x,A){x===0&&A===0&&_===void 0?M=w:M=T(M,w,x,A)}),M}t(v,"flattenReduce");function c(y,T){h(y,function(_,M,w){var x=0;if(!!_.geometry){var A=_.geometry.type;if(!(A==="Point"||A==="MultiPoint")){var S,k=0,L=0,P=0;if(r(_,function(D,B,z,R,F){if(S===void 0||M>k||R>L||F>P){S=D,k=M,L=R,P=F,x=0;return}var O=e.lineString([S,D],_.properties);if(T(O,M,w,F,x)===!1)return!1;x++,S=D})===!1)return!1}}})}t(c,"segmentEach");function d(y,T,_){var M=_,w=!1;return c(y,function(x,A,S,k,L){w===!1&&_===void 0?M=x:M=T(M,x,A,S,k,L),w=!0}),M}t(d,"segmentReduce");function g(y,T){if(!y)throw new Error("geojson is required");h(y,function(_,M,w){if(_.geometry!==null){var x=_.geometry.type,A=_.geometry.coordinates;switch(x){case"LineString":if(T(_,M,w,0,0)===!1)return!1;break;case"Polygon":for(var S=0;S<A.length;S++)if(T(e.lineString(A[S],_.properties),M,w,S)===!1)return!1;break}}})}t(g,"lineEach");function p(y,T,_){var M=_;return g(y,function(w,x,A,S){x===0&&_===void 0?M=w:M=T(M,w,x,A,S)}),M}t(p,"lineReduce");function b(y,T){if(T=T||{},!e.isObject(T))throw new Error("options is invalid");var _=T.featureIndex||0,M=T.multiFeatureIndex||0,w=T.geometryIndex||0,x=T.segmentIndex||0,A=T.properties,S;switch(y.type){case"FeatureCollection":_<0&&(_=y.features.length+_),A=A||y.features[_].properties,S=y.features[_].geometry;break;case"Feature":A=A||y.properties,S=y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":S=y;break;default:throw new Error("geojson is invalid")}if(S===null)return null;var k=S.coordinates;switch(S.type){case"Point":case"MultiPoint":return null;case"LineString":return x<0&&(x=k.length+x-1),e.lineString([k[x],k[x+1]],A,T);case"Polygon":return w<0&&(w=k.length+w),x<0&&(x=k[w].length+x-1),e.lineString([k[w][x],k[w][x+1]],A,T);case"MultiLineString":return M<0&&(M=k.length+M),x<0&&(x=k[M].length+x-1),e.lineString([k[M][x],k[M][x+1]],A,T);case"MultiPolygon":return M<0&&(M=k.length+M),w<0&&(w=k[M].length+w),x<0&&(x=k[M][w].length-x-1),e.lineString([k[M][w][x],k[M][w][x+1]],A,T)}throw new Error("geojson is invalid")}t(b,"findSegment");function m(y,T){if(T=T||{},!e.isObject(T))throw new Error("options is invalid");var _=T.featureIndex||0,M=T.multiFeatureIndex||0,w=T.geometryIndex||0,x=T.coordIndex||0,A=T.properties,S;switch(y.type){case"FeatureCollection":_<0&&(_=y.features.length+_),A=A||y.features[_].properties,S=y.features[_].geometry;break;case"Feature":A=A||y.properties,S=y.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":S=y;break;default:throw new Error("geojson is invalid")}if(S===null)return null;var k=S.coordinates;switch(S.type){case"Point":return e.point(k,A,T);case"MultiPoint":return M<0&&(M=k.length+M),e.point(k[M],A,T);case"LineString":return x<0&&(x=k.length+x),e.point(k[x],A,T);case"Polygon":return w<0&&(w=k.length+w),x<0&&(x=k[w].length+x),e.point(k[w][x],A,T);case"MultiLineString":return M<0&&(M=k.length+M),x<0&&(x=k[M].length+x),e.point(k[M][x],A,T);case"MultiPolygon":return M<0&&(M=k.length+M),w<0&&(w=k[M].length+w),x<0&&(x=k[M][w].length-x),e.point(k[M][w][x],A,T)}throw new Error("geojson is invalid")}return t(m,"findPoint"),Ks.coordAll=l,Ks.coordEach=r,Ks.coordReduce=n,Ks.featureEach=o,Ks.featureReduce=a,Ks.findPoint=m,Ks.findSegment=b,Ks.flattenEach=h,Ks.flattenReduce=v,Ks.geomEach=u,Ks.geomReduce=f,Ks.lineEach=g,Ks.lineReduce=p,Ks.propEach=i,Ks.propReduce=s,Ks.segmentEach=c,Ks.segmentReduce=d,Ks}t(V7,"requireJs$3");var _Z;function a6e(){if(_Z)return Hb;_Z=1,Object.defineProperty(Hb,"__esModule",{value:!0});var e=V7(),r=6378137;function n(l){return e.geomReduce(l,function(u,f){return u+i(f)},0)}t(n,"area"),Hb.default=n;function i(l){var u=0,f;switch(l.type){case"Polygon":return s(l.coordinates);case"MultiPolygon":for(f=0;f<l.coordinates.length;f++)u+=s(l.coordinates[f]);return u;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}t(i,"calculateArea");function s(l){var u=0;if(l&&l.length>0){u+=Math.abs(o(l[0]));for(var f=1;f<l.length;f++)u-=Math.abs(o(l[f]))}return u}t(s,"polygonArea");function o(l){var u,f,h,v,c,d,g,p=0,b=l.length;if(b>2){for(g=0;g<b;g++)g===b-2?(v=b-2,c=b-1,d=0):g===b-1?(v=b-1,c=0,d=1):(v=g,c=g+1,d=g+2),u=l[v],f=l[c],h=l[d],p+=(a(h[0])-a(u[0]))*Math.sin(a(f[1]));p=p*r*r/2}return p}t(o,"ringArea");function a(l){return l*Math.PI/180}return t(a,"rad"),Hb}t(a6e,"requireJs$2");var $b={},wZ;function n6e(){if(wZ)return $b;wZ=1,Object.defineProperty($b,"__esModule",{value:!0});var e=V7(),r=Bhe();function n(i,s){s===void 0&&(s={});var o=0,a=0,l=0;return e.coordEach(i,function(u){o+=u[0],a+=u[1],l++},!0),r.point([o/l,a/l],s.properties)}return t(n,"centroid"),$b.default=n,$b}t(n6e,"requireJs$1");var Vb={},TZ;function i6e(){if(TZ)return Vb;TZ=1,Object.defineProperty(Vb,"__esModule",{value:!0});var e=V7();function r(n){var i=[1/0,1/0,-1/0,-1/0];return e.coordEach(n,function(s){i[0]>s[0]&&(i[0]=s[0]),i[1]>s[1]&&(i[1]=s[1]),i[2]<s[0]&&(i[2]=s[0]),i[3]<s[1]&&(i[3]=s[1])}),i}return t(r,"bbox"),r.default=r,Vb.default=r,Vb}t(i6e,"requireJs");var KC,AZ;function wx(){if(AZ)return KC;AZ=1;var e=Va.exports,r=r6e(),n=a6e(),i=n6e(),s=i6e(),o=nw,a=cp.exports,l=xy,u=Z2,f=rx.exports,h=Object.keys(r),v={"ISO-3":o,"USA-states":o,"country names":c};function c(_){for(var M=0;M<h.length;M++){var w=h[M],x=new RegExp(r[w]);if(x.test(_.trim().toLowerCase()))return w}return a.log("Unrecognized country name: "+_+"."),!1}t(c,"countryNameToISO3");function d(_,M,w){if(!M||typeof M!="string")return!1;var x=v[_](M),A,S,k;if(x){if(_==="USA-states")for(A=[],k=0;k<w.length;k++)S=w[k],S.properties&&S.properties.gu&&S.properties.gu==="USA"&&A.push(S);else A=w;for(k=0;k<A.length;k++)if(S=A[k],S.id===x)return S;a.log(["Location with id",x,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}t(d,"locationToFeature");function g(_){var M=_.geometry,w=M.coordinates,x=_.id,A=[],S,k,L,P;function D(B){for(var z=0;z<B.length-1;z++)if(B[z][0]>0&&B[z+1][0]<0)return z;return null}switch(t(D,"doesCrossAntiMerdian"),x==="RUS"||x==="FJI"?S=t(function(B){var z;if(D(B)===null)z=B;else for(z=new Array(B.length),P=0;P<B.length;P++)z[P]=[B[P][0]<0?B[P][0]+360:B[P][0],B[P][1]];A.push(f.tester(z))},"appendPolygon"):x==="ATA"?S=t(function(B){var z=D(B);if(z===null)return A.push(f.tester(B));var R=new Array(B.length+1),F=0;for(P=0;P<B.length;P++)P>z?R[F++]=[B[P][0]+360,B[P][1]]:P===z?(R[F++]=B[P],R[F++]=[B[P][0],-90]):R[F++]=B[P];var O=f.tester(R);O.pts.pop(),A.push(O)},"appendPolygon"):S=t(function(B){A.push(f.tester(B))},"appendPolygon"),M.type){case"MultiPolygon":for(k=0;k<w.length;k++)for(L=0;L<w[k].length;L++)S(w[k][L]);break;case"Polygon":for(k=0;k<w.length;k++)S(w[k]);break}return A}t(g,"feature2polygons");function p(_){var M=_.geojson,w=window.PlotlyGeoAssets||{},x=typeof M=="string"?w[M]:M;return l(x)?x:(a.error("Oops ... something went wrong when fetching "+M),!1)}t(p,"getTraceGeojson");function b(_){var M=_[0].trace,w=p(M);if(!w)return!1;var x={},A=[],S;for(S=0;S<M._length;S++){var k=_[S];(k.loc||k.loc===0)&&(x[k.loc]=k)}function L(B){var z=u(B,M.featureidkey||"id").get(),R=x[z];if(R){var F=B.geometry;if(F.type==="Polygon"||F.type==="MultiPolygon"){var O={type:"Feature",id:z,geometry:F,properties:{}};O.properties.ct=m(O),R.fIn=B,R.fOut=O,A.push(O)}else a.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[z]}switch(t(L,"appendFeature"),w.type){case"FeatureCollection":var P=w.features;for(S=0;S<P.length;S++)L(P[S]);break;case"Feature":L(w);break;default:return a.warn(["Invalid GeoJSON type",(w.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var D in x)a.log(["Location *"+D+"*","does not have a matching feature with id-key","*"+M.featureidkey+"*."].join(" "));return A}t(b,"extractTraceFeature");function m(_){var M=_.geometry,w;if(M.type==="MultiPolygon")for(var x=M.coordinates,A=0,S=0;S<x.length;S++){var k={type:"Polygon",coordinates:x[S]},L=n.default(k);L>A&&(A=L,w=k)}else w=M;return i.default(w).geometry.coordinates}t(m,"findCentroid");function y(_){var M=window.PlotlyGeoAssets||{},w=[];function x(P){return new Promise(function(D,B){e.json(P,function(z,R){if(z){delete M[P];var F=z.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return B(new Error(F))}return M[P]=R,D(R)})})}t(x,"fetch");function A(P){return new Promise(function(D,B){var z=0,R=setInterval(function(){if(M[P]&&M[P]!=="pending")return clearInterval(R),D(M[P]);if(z>100)return clearInterval(R),B("Unexpected error while fetching from "+P);z++},50)})}t(A,"wait");for(var S=0;S<_.length;S++){var k=_[S][0].trace,L=k.geojson;typeof L=="string"&&(M[L]?M[L]==="pending"&&w.push(A(L)):(M[L]="pending",w.push(x(L))))}return w}t(y,"fetchTraceGeoData");function T(_){return s.default(_)}return t(T,"computeBbox"),KC={locationToFeature:d,feature2polygons:g,getTraceGeojson:p,extractTraceFeature:b,fetchTraceGeoData:y,computeBbox:T},KC}t(wx,"requireGeo_location_utils");var JC,SZ;function Ohe(){if(SZ)return JC;SZ=1;var e=Va.exports,r=bn.exports,n=$a.exports,i=kf,s=i.stylePoints,o=i.styleText;JC=t(function(u,f){f&&a(u,f)},"style");function a(l,u){var f=u[0].trace,h=u[0].node3;h.style("opacity",u[0].trace.opacity),s(h,f,l),o(h,f,l),h.selectAll("path.js-line").style("fill","none").each(function(v){var c=e.select(this),d=v.trace,g=d.line||{};c.call(n.stroke,g.color).call(r.dashLine,g.dash||"",g.width||0),d.fill!=="none"&&c.call(n.fill,d.fillcolor)})}return t(a,"styleTrace"),JC}t(Ohe,"requireStyle$2");var QC,MZ;function kZ(){if(MZ)return QC;MZ=1;var e=Va.exports,r=Nt.exports,n=$7().getTopojsonFeatures,i=r3(),s=wx(),o=Lh().findExtremes,a=jn.BADNUM,l=kh.calcMarkerSize,u=ho,f=Ohe();function h(c,d,g){var p=d.layers.frontplot.select(".scatterlayer"),b=r.makeTraceGroups(p,g,"trace scattergeo");function m(y,T){y.lonlat[0]===a&&e.select(T).remove()}t(m,"removeBADNUM"),b.selectAll("*").remove(),b.each(function(y){var T=e.select(this),_=y[0].trace;if(u.hasLines(_)||_.fill!=="none"){var M=i.calcTraceToLineCoords(y),w=_.fill!=="none"?i.makePolygon(M):i.makeLine(M);T.selectAll("path.js-line").data([{geojson:w,trace:_}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}u.hasMarkers(_)&&T.selectAll("path.point").data(r.identity).enter().append("path").classed("point",!0).each(function(x){m(x,this)}),u.hasText(_)&&T.selectAll("g").data(r.identity).enter().append("g").append("text").each(function(x){m(x,this)}),f(c,y)})}t(h,"plot");function v(c,d){var g=c[0].trace,p=d[g.geo],b=p._subplot,m=g._length,y,T;if(Array.isArray(g.locations)){var _=g.locationmode,M=_==="geojson-id"?s.extractTraceFeature(c):n(g,b.topojson);for(y=0;y<m;y++){T=c[y];var w=_==="geojson-id"?T.fOut:s.locationToFeature(_,T.loc,M);T.lonlat=w?w.properties.ct:[a,a]}}var x={padded:!0},A,S;if(p.fitbounds==="geojson"&&g.locationmode==="geojson-id"){var k=s.computeBbox(s.getTraceGeojson(g));A=[k[0],k[2]],S=[k[1],k[3]]}else{for(A=new Array(m),S=new Array(m),y=0;y<m;y++)T=c[y],A[y]=T.lonlat[0],S[y]=T.lonlat[1];x.ppad=l(g,m)}g._extremes.lon=o(p.lonaxis._ax,A,x),g._extremes.lat=o(p.lataxis._ax,S,x)}return t(v,"calcGeoJSON"),QC={calcGeoJSON:v,plot:h},QC}t(kZ,"requirePlot$j");var e4,EZ;function o6e(){if(EZ)return e4;EZ=1;var e=Ko,r=jn.BADNUM,n=lx,i=Nt.exports.fillText,s=_x();e4=t(function(l,u,f){var h=l.cd,v=h[0].trace,c=l.xa,d=l.ya,g=l.subplot,p=g.projection.isLonLatOverEdges,b=g.project;function m(A){var S=A.lonlat;if(S[0]===r||p(S))return 1/0;var k=b(S),L=b([u,f]),P=Math.abs(k[0]-L[0]),D=Math.abs(k[1]-L[1]),B=Math.max(3,A.mrc||0);return Math.max(Math.sqrt(P*P+D*D)-B,1-3/B)}if(t(m,"distFn"),e.getClosest(h,m,l),l.index!==!1){var y=h[l.index],T=y.lonlat,_=[c.c2p(T),d.c2p(T)],M=y.mrc||1;l.x0=_[0]-M,l.x1=_[0]+M,l.y0=_[1]-M,l.y1=_[1]+M,l.loc=y.loc,l.lon=T[0],l.lat=T[1];var w={};w[v.geo]={_subplot:g};var x=v._module.formatLabels(y,v,w);return l.lonLabel=x.lonLabel,l.latLabel=x.latLabel,l.color=n(v,y),l.extraText=o(v,y,l,h[0].t.labels),l.hovertemplate=v.hovertemplate,[l]}},"hoverPoints");function o(a,l,u,f){if(a.hovertemplate)return;var h=l.hi||a.hoverinfo,v=h==="all"?s.hoverinfo.flags:h.split("+"),c=v.indexOf("location")!==-1&&Array.isArray(a.locations),d=v.indexOf("lon")!==-1,g=v.indexOf("lat")!==-1,p=v.indexOf("text")!==-1,b=[];function m(y){return y+"\xB0"}return t(m,"format"),c?b.push(l.loc):d&&g?b.push("("+m(u.latLabel)+", "+m(u.lonLabel)+")"):d?b.push(f.lon+m(u.lonLabel)):g&&b.push(f.lat+m(u.latLabel)),p&&i(l,a,b),b.join("<br>")}return t(o,"getExtraText"),e4}t(o6e,"requireHover$b");var t4,CZ;function s6e(){return CZ||(CZ=1,t4=t(function(r,n,i,s,o){r.lon=n.lon,r.lat=n.lat,r.location=n.loc?n.loc:null;var a=s[o];return a.fIn&&a.fIn.properties&&(r.properties=a.fIn.properties),r},"eventData")),t4}t(s6e,"requireEvent_data$4");var r4,LZ;function l6e(){if(LZ)return r4;LZ=1;var e=ho,r=jn.BADNUM;return r4=t(function(i,s){var o=i.cd,a=i.xaxis,l=i.yaxis,u=[],f=o[0].trace,h,v,c,d,g,p=!e.hasMarkers(f)&&!e.hasText(f);if(p)return[];if(s===!1)for(g=0;g<o.length;g++)o[g].selected=0;else for(g=0;g<o.length;g++)h=o[g],v=h.lonlat,v[0]!==r&&(c=a.c2p(v),d=l.c2p(v),s.contains([c,d],null,g,i)?(u.push({pointNumber:g,lon:v[0],lat:v[1]}),h.selected=1):h.selected=0);return u},"selectPoints"),r4}t(l6e,"requireSelect$6");function xp(){return new i2}t(xp,"adder");function i2(){this.reset()}t(i2,"Adder");i2.prototype={constructor:i2,reset:function(){this.s=this.t=0},add:function(e){RZ(Gb,e,this.t),RZ(this,Gb.s,this.s),this.s?this.t+=Gb.t:this.s=Gb.t},valueOf:function(){return this.s}};var Gb=new i2;function RZ(e,r,n){var i=e.s=r+n,s=i-r,o=i-s;e.t=r-o+(n-s)}t(RZ,"add$1");var qn=1e-6,o2=1e-12,xi=Math.PI,Rs=xi/2,s2=xi/4,Zu=xi*2,zo=180/xi,Gn=xi/180,Pi=Math.abs,qy=Math.atan,Ku=Math.atan2,Rn=Math.cos,jb=Math.ceil,Nhe=Math.exp,l2=Math.log,a4=Math.pow,mn=Math.sin,Nc=Math.sign||function(e){return e>0?1:e<0?-1:0},tl=Math.sqrt,G7=Math.tan;function qhe(e){return e>1?0:e<-1?xi:Math.acos(e)}t(qhe,"acos$1");function Ju(e){return e>1?Rs:e<-1?-Rs:Math.asin(e)}t(Ju,"asin$1");function PZ(e){return(e=mn(e/2))*e}t(PZ,"haversin");function ms(){}t(ms,"noop$3");function u2(e,r){e&&IZ.hasOwnProperty(e.type)&&IZ[e.type](e,r)}t(u2,"streamGeometry");var DZ={Feature:function(e,r){u2(e.geometry,r)},FeatureCollection:function(e,r){for(var n=e.features,i=-1,s=n.length;++i<s;)u2(n[i].geometry,r)}},IZ={Sphere:function(e,r){r.sphere()},Point:function(e,r){e=e.coordinates,r.point(e[0],e[1],e[2])},MultiPoint:function(e,r){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)e=n[i],r.point(e[0],e[1],e[2])},LineString:function(e,r){aF(e.coordinates,r,0)},MultiLineString:function(e,r){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)aF(n[i],r,0)},Polygon:function(e,r){zZ(e.coordinates,r)},MultiPolygon:function(e,r){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)zZ(n[i],r)},GeometryCollection:function(e,r){for(var n=e.geometries,i=-1,s=n.length;++i<s;)u2(n[i],r)}};function aF(e,r,n){var i=-1,s=e.length-n,o;for(r.lineStart();++i<s;)o=e[i],r.point(o[0],o[1],o[2]);r.lineEnd()}t(aF,"streamLine");function zZ(e,r){var n=-1,i=e.length;for(r.polygonStart();++n<i;)aF(e[n],r,1);r.polygonEnd()}t(zZ,"streamPolygon");function Af(e,r){e&&DZ.hasOwnProperty(e.type)?DZ[e.type](e,r):u2(e,r)}t(Af,"geoStream");var f2=xp(),c2=xp(),Uhe,Hhe,nF,iF,oF,cv={point:ms,lineStart:ms,lineEnd:ms,polygonStart:function(){f2.reset(),cv.lineStart=u6e,cv.lineEnd=f6e},polygonEnd:function(){var e=+f2;c2.add(e<0?Zu+e:e),this.lineStart=this.lineEnd=this.point=ms},sphere:function(){c2.add(Zu)}};function u6e(){cv.point=c6e}t(u6e,"areaRingStart$1");function f6e(){$he(Uhe,Hhe)}t(f6e,"areaRingEnd$1");function c6e(e,r){cv.point=$he,Uhe=e,Hhe=r,e*=Gn,r*=Gn,nF=e,iF=Rn(r=r/2+s2),oF=mn(r)}t(c6e,"areaPointFirst$1");function $he(e,r){e*=Gn,r*=Gn,r=r/2+s2;var n=e-nF,i=n>=0?1:-1,s=i*n,o=Rn(r),a=mn(r),l=oF*a,u=iF*o+l*Rn(s),f=l*i*mn(s);f2.add(Ku(f,u)),nF=e,iF=o,oF=a}t($he,"areaPoint$1");function h6e(e){return c2.reset(),Af(e,cv),c2*2}t(h6e,"area");function h2(e){return[Ku(e[1],e[0]),Ju(e[2])]}t(h2,"spherical$1");function x0(e){var r=e[0],n=e[1],i=Rn(n);return[i*Rn(r),i*mn(r),mn(n)]}t(x0,"cartesian$1");function Yb(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}t(Yb,"cartesianDot");function cy(e,r){return[e[1]*r[2]-e[2]*r[1],e[2]*r[0]-e[0]*r[2],e[0]*r[1]-e[1]*r[0]]}t(cy,"cartesianCross");function n4(e,r){e[0]+=r[0],e[1]+=r[1],e[2]+=r[2]}t(n4,"cartesianAddInPlace");function Wb(e,r){return[e[0]*r,e[1]*r,e[2]*r]}t(Wb,"cartesianScale");function v2(e){var r=tl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=r,e[1]/=r,e[2]/=r}t(v2,"cartesianNormalizeInPlace");var ps,Tf,Ls,tc,e0,Vhe,Ghe,Kg,v1=xp(),Qd,fd,nd={point:sF,lineStart:FZ,lineEnd:BZ,polygonStart:function(){nd.point=Yhe,nd.lineStart=v6e,nd.lineEnd=d6e,v1.reset(),cv.polygonStart()},polygonEnd:function(){cv.polygonEnd(),nd.point=sF,nd.lineStart=FZ,nd.lineEnd=BZ,f2<0?(ps=-(Ls=180),Tf=-(tc=90)):v1>qn?tc=90:v1<-qn&&(Tf=-90),fd[0]=ps,fd[1]=Ls},sphere:function(){ps=-(Ls=180),Tf=-(tc=90)}};function sF(e,r){Qd.push(fd=[ps=e,Ls=e]),r<Tf&&(Tf=r),r>tc&&(tc=r)}t(sF,"boundsPoint$1");function jhe(e,r){var n=x0([e*Gn,r*Gn]);if(Kg){var i=cy(Kg,n),s=[i[1],-i[0],0],o=cy(s,i);v2(o),o=h2(o);var a=e-e0,l=a>0?1:-1,u=o[0]*zo*l,f,h=Pi(a)>180;h^(l*e0<u&&u<l*e)?(f=o[1]*zo,f>tc&&(tc=f)):(u=(u+360)%360-180,h^(l*e0<u&&u<l*e)?(f=-o[1]*zo,f<Tf&&(Tf=f)):(r<Tf&&(Tf=r),r>tc&&(tc=r))),h?e<e0?Qf(ps,e)>Qf(ps,Ls)&&(Ls=e):Qf(e,Ls)>Qf(ps,Ls)&&(ps=e):Ls>=ps?(e<ps&&(ps=e),e>Ls&&(Ls=e)):e>e0?Qf(ps,e)>Qf(ps,Ls)&&(Ls=e):Qf(e,Ls)>Qf(ps,Ls)&&(ps=e)}else Qd.push(fd=[ps=e,Ls=e]);r<Tf&&(Tf=r),r>tc&&(tc=r),Kg=n,e0=e}t(jhe,"linePoint");function FZ(){nd.point=jhe}t(FZ,"boundsLineStart");function BZ(){fd[0]=ps,fd[1]=Ls,nd.point=sF,Kg=null}t(BZ,"boundsLineEnd");function Yhe(e,r){if(Kg){var n=e-e0;v1.add(Pi(n)>180?n+(n>0?360:-360):n)}else Vhe=e,Ghe=r;cv.point(e,r),jhe(e,r)}t(Yhe,"boundsRingPoint");function v6e(){cv.lineStart()}t(v6e,"boundsRingStart");function d6e(){Yhe(Vhe,Ghe),cv.lineEnd(),Pi(v1)>qn&&(ps=-(Ls=180)),fd[0]=ps,fd[1]=Ls,Kg=null}t(d6e,"boundsRingEnd");function Qf(e,r){return(r-=e)<0?r+360:r}t(Qf,"angle$2");function p6e(e,r){return e[0]-r[0]}t(p6e,"rangeCompare");function OZ(e,r){return e[0]<=e[1]?e[0]<=r&&r<=e[1]:r<e[0]||e[1]<r}t(OZ,"rangeContains");function Whe(e){var r,n,i,s,o,a,l;if(tc=Ls=-(ps=Tf=1/0),Qd=[],Af(e,nd),n=Qd.length){for(Qd.sort(p6e),r=1,i=Qd[0],o=[i];r<n;++r)s=Qd[r],OZ(i,s[0])||OZ(i,s[1])?(Qf(i[0],s[1])>Qf(i[0],i[1])&&(i[1]=s[1]),Qf(s[0],i[1])>Qf(i[0],i[1])&&(i[0]=s[0])):o.push(i=s);for(a=-1/0,n=o.length-1,r=0,i=o[n];r<=n;i=s,++r)s=o[r],(l=Qf(i[1],s[0]))>a&&(a=l,ps=s[0],Ls=i[1])}return Qd=fd=null,ps===1/0||Tf===1/0?[[NaN,NaN],[NaN,NaN]]:[[ps,Tf],[Ls,tc]]}t(Whe,"bounds");var Km,d2,p2,g2,y2,m2,x2,b2,lF,uF,fF,Xhe,Zhe,ju,Yu,Wu,Mh={sphere:ms,point:j7,lineStart:NZ,lineEnd:qZ,polygonStart:function(){Mh.lineStart=m6e,Mh.lineEnd=x6e},polygonEnd:function(){Mh.lineStart=NZ,Mh.lineEnd=qZ}};function j7(e,r){e*=Gn,r*=Gn;var n=Rn(r);Tx(n*Rn(e),n*mn(e),mn(r))}t(j7,"centroidPoint$1");function Tx(e,r,n){++Km,p2+=(e-p2)/Km,g2+=(r-g2)/Km,y2+=(n-y2)/Km}t(Tx,"centroidPointCartesian");function NZ(){Mh.point=g6e}t(NZ,"centroidLineStart$1");function g6e(e,r){e*=Gn,r*=Gn;var n=Rn(r);ju=n*Rn(e),Yu=n*mn(e),Wu=mn(r),Mh.point=y6e,Tx(ju,Yu,Wu)}t(g6e,"centroidLinePointFirst");function y6e(e,r){e*=Gn,r*=Gn;var n=Rn(r),i=n*Rn(e),s=n*mn(e),o=mn(r),a=Ku(tl((a=Yu*o-Wu*s)*a+(a=Wu*i-ju*o)*a+(a=ju*s-Yu*i)*a),ju*i+Yu*s+Wu*o);d2+=a,m2+=a*(ju+(ju=i)),x2+=a*(Yu+(Yu=s)),b2+=a*(Wu+(Wu=o)),Tx(ju,Yu,Wu)}t(y6e,"centroidLinePoint");function qZ(){Mh.point=j7}t(qZ,"centroidLineEnd$1");function m6e(){Mh.point=b6e}t(m6e,"centroidRingStart$1");function x6e(){Khe(Xhe,Zhe),Mh.point=j7}t(x6e,"centroidRingEnd$1");function b6e(e,r){Xhe=e,Zhe=r,e*=Gn,r*=Gn,Mh.point=Khe;var n=Rn(r);ju=n*Rn(e),Yu=n*mn(e),Wu=mn(r),Tx(ju,Yu,Wu)}t(b6e,"centroidRingPointFirst");function Khe(e,r){e*=Gn,r*=Gn;var n=Rn(r),i=n*Rn(e),s=n*mn(e),o=mn(r),a=Yu*o-Wu*s,l=Wu*i-ju*o,u=ju*s-Yu*i,f=tl(a*a+l*l+u*u),h=Ju(f),v=f&&-h/f;lF+=v*a,uF+=v*l,fF+=v*u,d2+=h,m2+=h*(ju+(ju=i)),x2+=h*(Yu+(Yu=s)),b2+=h*(Wu+(Wu=o)),Tx(ju,Yu,Wu)}t(Khe,"centroidRingPoint");function Uy(e){Km=d2=p2=g2=y2=m2=x2=b2=lF=uF=fF=0,Af(e,Mh);var r=lF,n=uF,i=fF,s=r*r+n*n+i*i;return s<o2&&(r=m2,n=x2,i=b2,d2<qn&&(r=p2,n=g2,i=y2),s=r*r+n*n+i*i,s<o2)?[NaN,NaN]:[Ku(n,r)*zo,Ju(i/tl(s))*zo]}t(Uy,"centroid");function kg(e){return function(){return e}}t(kg,"constant$4");function cF(e,r){function n(i,s){return i=e(i,s),r(i[0],i[1])}return t(n,"compose"),e.invert&&r.invert&&(n.invert=function(i,s){return i=r.invert(i,s),i&&e.invert(i[0],i[1])}),n}t(cF,"compose");function hF(e,r){return[Pi(e)>xi?e+Math.round(-e/Zu)*Zu:e,r]}t(hF,"rotationIdentity");hF.invert=hF;function Y7(e,r,n){return(e%=Zu)?r||n?cF(HZ(e),$Z(r,n)):HZ(e):r||n?$Z(r,n):hF}t(Y7,"rotateRadians");function UZ(e){return function(r,n){return r+=e,[r>xi?r-Zu:r<-xi?r+Zu:r,n]}}t(UZ,"forwardRotationLambda");function HZ(e){var r=UZ(e);return r.invert=UZ(-e),r}t(HZ,"rotationLambda");function $Z(e,r){var n=Rn(e),i=mn(e),s=Rn(r),o=mn(r);function a(l,u){var f=Rn(u),h=Rn(l)*f,v=mn(l)*f,c=mn(u),d=c*n+h*i;return[Ku(v*s-d*o,h*n-c*i),Ju(d*s+v*o)]}return t(a,"rotation"),a.invert=function(l,u){var f=Rn(u),h=Rn(l)*f,v=mn(l)*f,c=mn(u),d=c*s-v*o;return[Ku(v*s+c*o,h*n+d*i),Ju(d*n-h*i)]},a}t($Z,"rotationPhiGamma");function hy(e){e=Y7(e[0]*Gn,e[1]*Gn,e.length>2?e[2]*Gn:0);function r(n){return n=e(n[0]*Gn,n[1]*Gn),n[0]*=zo,n[1]*=zo,n}return t(r,"forward"),r.invert=function(n){return n=e.invert(n[0]*Gn,n[1]*Gn),n[0]*=zo,n[1]*=zo,n},r}t(hy,"rotation");function Jhe(e,r,n,i,s,o){if(!!n){var a=Rn(r),l=mn(r),u=i*n;s==null?(s=r+i*Zu,o=r-u/2):(s=VZ(a,s),o=VZ(a,o),(i>0?s<o:s>o)&&(s+=i*Zu));for(var f,h=s;i>0?h>o:h<o;h-=u)f=h2([a,-l*Rn(h),-l*mn(h)]),e.point(f[0],f[1])}}t(Jhe,"circleStream");function VZ(e,r){r=x0(r),r[0]-=e,v2(r);var n=qhe(-r[1]);return((-r[2]<0?-n:n)+Zu-qn)%Zu}t(VZ,"circleRadius");function Qhe(){var e=kg([0,0]),r=kg(90),n=kg(6),i,s,o={point:a};function a(u,f){i.push(u=s(u,f)),u[0]*=zo,u[1]*=zo}t(a,"point");function l(){var u=e.apply(this,arguments),f=r.apply(this,arguments)*Gn,h=n.apply(this,arguments)*Gn;return i=[],s=Y7(-u[0]*Gn,-u[1]*Gn,0).invert,Jhe(o,f,h,1),u={type:"Polygon",coordinates:[i]},i=s=null,u}return t(l,"circle"),l.center=function(u){return arguments.length?(e=typeof u=="function"?u:kg([+u[0],+u[1]]),l):e},l.radius=function(u){return arguments.length?(r=typeof u=="function"?u:kg(+u),l):r},l.precision=function(u){return arguments.length?(n=typeof u=="function"?u:kg(+u),l):n},l}t(Qhe,"geoCircle");function eve(){var e=[],r;return{point:function(n,i,s){r.push([n,i,s])},lineStart:function(){e.push(r=[])},lineEnd:ms,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],r=null,n}}}t(eve,"clipBuffer");function w_(e,r){return Pi(e[0]-r[0])<qn&&Pi(e[1]-r[1])<qn}t(w_,"pointEqual$2");function Xb(e,r,n,i){this.x=e,this.z=r,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}t(Xb,"Intersection");function tve(e,r,n,i,s){var o=[],a=[],l,u;if(e.forEach(function(g){if(!((p=g.length-1)<=0)){var p,b=g[0],m=g[p],y;if(w_(b,m)){if(!b[2]&&!m[2]){for(s.lineStart(),l=0;l<p;++l)s.point((b=g[l])[0],b[1]);s.lineEnd();return}m[0]+=2*qn}o.push(y=new Xb(b,g,null,!0)),a.push(y.o=new Xb(b,null,y,!1)),o.push(y=new Xb(m,g,null,!1)),a.push(y.o=new Xb(m,null,y,!0))}}),!!o.length){for(a.sort(r),GZ(o),GZ(a),l=0,u=a.length;l<u;++l)a[l].e=n=!n;for(var f=o[0],h,v;;){for(var c=f,d=!0;c.v;)if((c=c.n)===f)return;h=c.z,s.lineStart();do{if(c.v=c.o.v=!0,c.e){if(d)for(l=0,u=h.length;l<u;++l)s.point((v=h[l])[0],v[1]);else i(c.x,c.n.x,1,s);c=c.n}else{if(d)for(h=c.p.z,l=h.length-1;l>=0;--l)s.point((v=h[l])[0],v[1]);else i(c.x,c.p.x,-1,s);c=c.p}c=c.o,h=c.z,d=!d}while(!c.v);s.lineEnd()}}}t(tve,"clipRejoin");function GZ(e){if(!!(r=e.length)){for(var r,n=0,i=e[0],s;++n<r;)i.n=s=e[n],s.p=i,i=s;i.n=s=e[0],s.p=i}}t(GZ,"link$2");var i4=xp();function o4(e){return Pi(e[0])<=xi?e[0]:Nc(e[0])*((Pi(e[0])+xi)%Zu-xi)}t(o4,"longitude$1");function rve(e,r){var n=o4(r),i=r[1],s=mn(i),o=[mn(n),-Rn(n),0],a=0,l=0;i4.reset(),s===1?i=Rs+qn:s===-1&&(i=-Rs-qn);for(var u=0,f=e.length;u<f;++u)if(!!(v=(h=e[u]).length))for(var h,v,c=h[v-1],d=o4(c),g=c[1]/2+s2,p=mn(g),b=Rn(g),m=0;m<v;++m,d=T,p=M,b=w,c=y){var y=h[m],T=o4(y),_=y[1]/2+s2,M=mn(_),w=Rn(_),x=T-d,A=x>=0?1:-1,S=A*x,k=S>xi,L=p*M;if(i4.add(Ku(L*A*mn(S),b*w+L*Rn(S))),a+=k?x+A*Zu:x,k^d>=n^T>=n){var P=cy(x0(c),x0(y));v2(P);var D=cy(o,P);v2(D);var B=(k^x>=0?-1:1)*Ju(D[2]);(i>B||i===B&&(P[0]||P[1]))&&(l+=k^x>=0?1:-1)}}return(a<-qn||a<qn&&i4<-qn)^l&1}t(rve,"polygonContains");function a3(e,r){return e<r?-1:e>r?1:e>=r?0:NaN}t(a3,"ascending");function _6e(e){return e.length===1&&(e=w6e(e)),{left:function(r,n,i,s){for(i==null&&(i=0),s==null&&(s=r.length);i<s;){var o=i+s>>>1;e(r[o],n)<0?i=o+1:s=o}return i},right:function(r,n,i,s){for(i==null&&(i=0),s==null&&(s=r.length);i<s;){var o=i+s>>>1;e(r[o],n)>0?s=o:i=o+1}return i}}}t(_6e,"bisector");function w6e(e){return function(r,n){return a3(e(r),n)}}t(w6e,"ascendingComparator");_6e(a3);function jZ(e){return e===null?NaN:+e}t(jZ,"number");function np(e,r,n){e=+e,r=+r,n=(s=arguments.length)<2?(r=e,e=0,1):s<3?1:+n;for(var i=-1,s=Math.max(0,Math.ceil((r-e)/n))|0,o=new Array(s);++i<s;)o[i]=e+i*n;return o}t(np,"range");function _2(e,r){var n=e.length,i=-1,s,o;if(r==null){for(;++i<n;)if((s=e[i])!=null&&s>=s)for(o=s;++i<n;)(s=e[i])!=null&&s>o&&(o=s)}else for(;++i<n;)if((s=r(e[i],i,e))!=null&&s>=s)for(o=s;++i<n;)(s=r(e[i],i,e))!=null&&s>o&&(o=s);return o}t(_2,"max$1");function YZ(e,r){var n=e.length,i=n,s=-1,o,a=0;if(r==null)for(;++s<n;)isNaN(o=jZ(e[s]))?--i:a+=o;else for(;++s<n;)isNaN(o=jZ(r(e[s],s,e)))?--i:a+=o;if(i)return a/i}t(YZ,"mean");function W7(e){for(var r=e.length,n,i=-1,s=0,o,a;++i<r;)s+=e[i].length;for(o=new Array(s);--r>=0;)for(a=e[r],n=a.length;--n>=0;)o[--s]=a[n];return o}t(W7,"merge");function Hy(e,r){var n=e.length,i=-1,s,o;if(r==null){for(;++i<n;)if((s=e[i])!=null&&s>=s)for(o=s;++i<n;)(s=e[i])!=null&&o>s&&(o=s)}else for(;++i<n;)if((s=r(e[i],i,e))!=null&&s>=s)for(o=s;++i<n;)(s=r(e[i],i,e))!=null&&o>s&&(o=s);return o}t(Hy,"min$1");function tv(e,r){var n=e.length,i=-1,s,o=0;if(r==null)for(;++i<n;)(s=+e[i])&&(o+=s);else for(;++i<n;)(s=+r(e[i],i,e))&&(o+=s);return o}t(tv,"sum");function ave(e,r,n,i){return function(s){var o=r(s),a=eve(),l=r(a),u=!1,f,h,v,c={point:d,lineStart:p,lineEnd:b,polygonStart:function(){c.point=m,c.lineStart=y,c.lineEnd=T,h=[],f=[]},polygonEnd:function(){c.point=d,c.lineStart=p,c.lineEnd=b,h=W7(h);var _=rve(f,i);h.length?(u||(s.polygonStart(),u=!0),tve(h,A6e,_,n,s)):_&&(u||(s.polygonStart(),u=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),u&&(s.polygonEnd(),u=!1),h=f=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function d(_,M){e(_,M)&&s.point(_,M)}t(d,"point");function g(_,M){o.point(_,M)}t(g,"pointLine");function p(){c.point=g,o.lineStart()}t(p,"lineStart");function b(){c.point=d,o.lineEnd()}t(b,"lineEnd");function m(_,M){v.push([_,M]),l.point(_,M)}t(m,"pointRing");function y(){l.lineStart(),v=[]}t(y,"ringStart");function T(){m(v[0][0],v[0][1]),l.lineEnd();var _=l.clean(),M=a.result(),w,x=M.length,A,S,k;if(v.pop(),f.push(v),v=null,!!x){if(_&1){if(S=M[0],(A=S.length-1)>0){for(u||(s.polygonStart(),u=!0),s.lineStart(),w=0;w<A;++w)s.point((k=S[w])[0],k[1]);s.lineEnd()}return}x>1&&_&2&&M.push(M.pop().concat(M.shift())),h.push(M.filter(T6e))}}return t(T,"ringEnd"),c}}t(ave,"clip");function T6e(e){return e.length>1}t(T6e,"validSegment");function A6e(e,r){return((e=e.x)[0]<0?e[1]-Rs-qn:Rs-e[1])-((r=r.x)[0]<0?r[1]-Rs-qn:Rs-r[1])}t(A6e,"compareIntersection");const vF=ave(function(){return!0},S6e,k6e,[-xi,-Rs]);function S6e(e){var r=NaN,n=NaN,i=NaN,s;return{lineStart:function(){e.lineStart(),s=1},point:function(o,a){var l=o>0?xi:-xi,u=Pi(o-r);Pi(u-xi)<qn?(e.point(r,n=(n+a)/2>0?Rs:-Rs),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(o,n),s=0):i!==l&&u>=xi&&(Pi(r-i)<qn&&(r-=i*qn),Pi(o-l)<qn&&(o-=l*qn),n=M6e(r,n,o,a),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),s=0),e.point(r=o,n=a),i=l},lineEnd:function(){e.lineEnd(),r=n=NaN},clean:function(){return 2-s}}}t(S6e,"clipAntimeridianLine");function M6e(e,r,n,i){var s,o,a=mn(e-n);return Pi(a)>qn?qy((mn(r)*(o=Rn(i))*mn(n)-mn(i)*(s=Rn(r))*mn(e))/(s*o*a)):(r+i)/2}t(M6e,"clipAntimeridianIntersect");function k6e(e,r,n,i){var s;if(e==null)s=n*Rs,i.point(-xi,s),i.point(0,s),i.point(xi,s),i.point(xi,0),i.point(xi,-s),i.point(0,-s),i.point(-xi,-s),i.point(-xi,0),i.point(-xi,s);else if(Pi(e[0]-r[0])>qn){var o=e[0]<r[0]?xi:-xi;s=n*o/2,i.point(-o,s),i.point(0,s),i.point(o,s)}else i.point(r[0],r[1])}t(k6e,"clipAntimeridianInterpolate");function nve(e){var r=Rn(e),n=6*Gn,i=r>0,s=Pi(r)>qn;function o(h,v,c,d){Jhe(d,e,n,c,h,v)}t(o,"interpolate");function a(h,v){return Rn(h)*Rn(v)>r}t(a,"visible");function l(h){var v,c,d,g,p;return{lineStart:function(){g=d=!1,p=1},point:function(b,m){var y=[b,m],T,_=a(b,m),M=i?_?0:f(b,m):_?f(b+(b<0?xi:-xi),m):0;if(!v&&(g=d=_)&&h.lineStart(),_!==d&&(T=u(v,y),(!T||w_(v,T)||w_(y,T))&&(y[2]=1)),_!==d)p=0,_?(h.lineStart(),T=u(y,v),h.point(T[0],T[1])):(T=u(v,y),h.point(T[0],T[1],2),h.lineEnd()),v=T;else if(s&&v&&i^_){var w;!(M&c)&&(w=u(y,v,!0))&&(p=0,i?(h.lineStart(),h.point(w[0][0],w[0][1]),h.point(w[1][0],w[1][1]),h.lineEnd()):(h.point(w[1][0],w[1][1]),h.lineEnd(),h.lineStart(),h.point(w[0][0],w[0][1],3)))}_&&(!v||!w_(v,y))&&h.point(y[0],y[1]),v=y,d=_,c=M},lineEnd:function(){d&&h.lineEnd(),v=null},clean:function(){return p|(g&&d)<<1}}}t(l,"clipLine");function u(h,v,c){var d=x0(h),g=x0(v),p=[1,0,0],b=cy(d,g),m=Yb(b,b),y=b[0],T=m-y*y;if(!T)return!c&&h;var _=r*m/T,M=-r*y/T,w=cy(p,b),x=Wb(p,_),A=Wb(b,M);n4(x,A);var S=w,k=Yb(x,S),L=Yb(S,S),P=k*k-L*(Yb(x,x)-1);if(!(P<0)){var D=tl(P),B=Wb(S,(-k-D)/L);if(n4(B,x),B=h2(B),!c)return B;var z=h[0],R=v[0],F=h[1],O=v[1],q;R<z&&(q=z,z=R,R=q);var H=R-z,j=Pi(H-xi)<qn,X=j||H<qn;if(!j&&O<F&&(q=F,F=O,O=q),X?j?F+O>0^B[1]<(Pi(B[0]-z)<qn?F:O):F<=B[1]&&B[1]<=O:H>xi^(z<=B[0]&&B[0]<=R)){var G=Wb(S,(-k+D)/L);return n4(G,x),[B,h2(G)]}}}t(u,"intersect");function f(h,v){var c=i?e:xi-e,d=0;return h<-c?d|=1:h>c&&(d|=2),v<-c?d|=4:v>c&&(d|=8),d}return t(f,"code"),ave(a,l,o,i?[0,-e]:[-xi,e-xi])}t(nve,"clipCircle");function E6e(e,r,n,i,s,o){var a=e[0],l=e[1],u=r[0],f=r[1],h=0,v=1,c=u-a,d=f-l,g;if(g=n-a,!(!c&&g>0)){if(g/=c,c<0){if(g<h)return;g<v&&(v=g)}else if(c>0){if(g>v)return;g>h&&(h=g)}if(g=s-a,!(!c&&g<0)){if(g/=c,c<0){if(g>v)return;g>h&&(h=g)}else if(c>0){if(g<h)return;g<v&&(v=g)}if(g=i-l,!(!d&&g>0)){if(g/=d,d<0){if(g<h)return;g<v&&(v=g)}else if(d>0){if(g>v)return;g>h&&(h=g)}if(g=o-l,!(!d&&g<0)){if(g/=d,d<0){if(g>v)return;g>h&&(h=g)}else if(d>0){if(g<h)return;g<v&&(v=g)}return h>0&&(e[0]=a+h*c,e[1]=l+h*d),v<1&&(r[0]=a+v*c,r[1]=l+v*d),!0}}}}}t(E6e,"clipLine");var Jm=1e9,Zb=-Jm;function n3(e,r,n,i){function s(f,h){return e<=f&&f<=n&&r<=h&&h<=i}t(s,"visible");function o(f,h,v,c){var d=0,g=0;if(f==null||(d=a(f,v))!==(g=a(h,v))||u(f,h)<0^v>0)do c.point(d===0||d===3?e:n,d>1?i:r);while((d=(d+v+4)%4)!==g);else c.point(h[0],h[1])}t(o,"interpolate");function a(f,h){return Pi(f[0]-e)<qn?h>0?0:3:Pi(f[0]-n)<qn?h>0?2:1:Pi(f[1]-r)<qn?h>0?1:0:h>0?3:2}t(a,"corner");function l(f,h){return u(f.x,h.x)}t(l,"compareIntersection");function u(f,h){var v=a(f,1),c=a(h,1);return v!==c?v-c:v===0?h[1]-f[1]:v===1?f[0]-h[0]:v===2?f[1]-h[1]:h[0]-f[0]}return t(u,"comparePoint"),function(f){var h=f,v=eve(),c,d,g,p,b,m,y,T,_,M,w,x={point:A,lineStart:P,lineEnd:D,polygonStart:k,polygonEnd:L};function A(z,R){s(z,R)&&h.point(z,R)}t(A,"point");function S(){for(var z=0,R=0,F=d.length;R<F;++R)for(var O=d[R],q=1,H=O.length,j=O[0],X,G,$=j[0],te=j[1];q<H;++q)X=$,G=te,j=O[q],$=j[0],te=j[1],G<=i?te>i&&($-X)*(i-G)>(te-G)*(e-X)&&++z:te<=i&&($-X)*(i-G)<(te-G)*(e-X)&&--z;return z}t(S,"polygonInside");function k(){h=v,c=[],d=[],w=!0}t(k,"polygonStart");function L(){var z=S(),R=w&&z,F=(c=W7(c)).length;(R||F)&&(f.polygonStart(),R&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),F&&tve(c,l,z,o,f),f.polygonEnd()),h=f,c=d=g=null}t(L,"polygonEnd");function P(){x.point=B,d&&d.push(g=[]),M=!0,_=!1,y=T=NaN}t(P,"lineStart");function D(){c&&(B(p,b),m&&_&&v.rejoin(),c.push(v.result())),x.point=A,_&&h.lineEnd()}t(D,"lineEnd");function B(z,R){var F=s(z,R);if(d&&g.push([z,R]),M)p=z,b=R,m=F,M=!1,F&&(h.lineStart(),h.point(z,R));else if(F&&_)h.point(z,R);else{var O=[y=Math.max(Zb,Math.min(Jm,y)),T=Math.max(Zb,Math.min(Jm,T))],q=[z=Math.max(Zb,Math.min(Jm,z)),R=Math.max(Zb,Math.min(Jm,R))];E6e(O,q,e,r,n,i)?(_||(h.lineStart(),h.point(O[0],O[1])),h.point(q[0],q[1]),F||h.lineEnd(),w=!1):F&&(h.lineStart(),h.point(z,R),w=!1)}y=z,T=R,_=F}return t(B,"linePoint"),x}}t(n3,"clipRectangle");function C6e(){var e=0,r=0,n=960,i=500,s,o,a;return a={stream:function(l){return s&&o===l?s:s=n3(e,r,n,i)(o=l)},extent:function(l){return arguments.length?(e=+l[0][0],r=+l[0][1],n=+l[1][0],i=+l[1][1],s=o=null,a):[[e,r],[n,i]]}}}t(C6e,"extent");var dF=xp(),pF,T_,A_,vy={sphere:ms,point:ms,lineStart:L6e,lineEnd:ms,polygonStart:ms,polygonEnd:ms};function L6e(){vy.point=P6e,vy.lineEnd=R6e}t(L6e,"lengthLineStart");function R6e(){vy.point=vy.lineEnd=ms}t(R6e,"lengthLineEnd");function P6e(e,r){e*=Gn,r*=Gn,pF=e,T_=mn(r),A_=Rn(r),vy.point=D6e}t(P6e,"lengthPointFirst$1");function D6e(e,r){e*=Gn,r*=Gn;var n=mn(r),i=Rn(r),s=Pi(e-pF),o=Rn(s),a=mn(s),l=i*a,u=A_*n-T_*i*o,f=T_*n+A_*i*o;dF.add(Ku(tl(l*l+u*u),f)),pF=e,T_=n,A_=i}t(D6e,"lengthPoint$1");function ive(e){return dF.reset(),Af(e,vy),+dF}t(ive,"length$1");var gF=[null,null],I6e={type:"LineString",coordinates:gF};function w2(e,r){return gF[0]=e,gF[1]=r,ive(I6e)}t(w2,"distance$1");var WZ={Feature:function(e,r){return T2(e.geometry,r)},FeatureCollection:function(e,r){for(var n=e.features,i=-1,s=n.length;++i<s;)if(T2(n[i].geometry,r))return!0;return!1}},XZ={Sphere:function(){return!0},Point:function(e,r){return ZZ(e.coordinates,r)},MultiPoint:function(e,r){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)if(ZZ(n[i],r))return!0;return!1},LineString:function(e,r){return KZ(e.coordinates,r)},MultiLineString:function(e,r){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)if(KZ(n[i],r))return!0;return!1},Polygon:function(e,r){return JZ(e.coordinates,r)},MultiPolygon:function(e,r){for(var n=e.coordinates,i=-1,s=n.length;++i<s;)if(JZ(n[i],r))return!0;return!1},GeometryCollection:function(e,r){for(var n=e.geometries,i=-1,s=n.length;++i<s;)if(T2(n[i],r))return!0;return!1}};function T2(e,r){return e&&XZ.hasOwnProperty(e.type)?XZ[e.type](e,r):!1}t(T2,"containsGeometry");function ZZ(e,r){return w2(e,r)===0}t(ZZ,"containsPoint");function KZ(e,r){for(var n,i,s,o=0,a=e.length;o<a;o++){if(i=w2(e[o],r),i===0||o>0&&(s=w2(e[o],e[o-1]),s>0&&n<=s&&i<=s&&(n+i-s)*(1-Math.pow((n-i)/s,2))<o2*s))return!0;n=i}return!1}t(KZ,"containsLine");function JZ(e,r){return!!rve(e.map(z6e),ove(r))}t(JZ,"containsPolygon");function z6e(e){return e=e.map(ove),e.pop(),e}t(z6e,"ringRadians");function ove(e){return[e[0]*Gn,e[1]*Gn]}t(ove,"pointRadians$1");function F6e(e,r){return(e&&WZ.hasOwnProperty(e.type)?WZ[e.type]:T2)(e,r)}t(F6e,"contains$2");function QZ(e,r,n){var i=np(e,r-qn,n).concat(r);return function(s){return i.map(function(o){return[s,o]})}}t(QZ,"graticuleX");function eK(e,r,n){var i=np(e,r-qn,n).concat(r);return function(s){return i.map(function(o){return[o,s]})}}t(eK,"graticuleY");function sve(){var e,r,n,i,s,o,a,l,u=10,f=u,h=90,v=360,c,d,g,p,b=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}t(m,"graticule");function y(){return np(jb(i/h)*h,n,h).map(g).concat(np(jb(l/v)*v,a,v).map(p)).concat(np(jb(r/u)*u,e,u).filter(function(T){return Pi(T%h)>qn}).map(c)).concat(np(jb(o/f)*f,s,f).filter(function(T){return Pi(T%v)>qn}).map(d))}return t(y,"lines"),m.lines=function(){return y().map(function(T){return{type:"LineString",coordinates:T}})},m.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(p(a).slice(1),g(n).reverse().slice(1),p(l).reverse().slice(1))]}},m.extent=function(T){return arguments.length?m.extentMajor(T).extentMinor(T):m.extentMinor()},m.extentMajor=function(T){return arguments.length?(i=+T[0][0],n=+T[1][0],l=+T[0][1],a=+T[1][1],i>n&&(T=i,i=n,n=T),l>a&&(T=l,l=a,a=T),m.precision(b)):[[i,l],[n,a]]},m.extentMinor=function(T){return arguments.length?(r=+T[0][0],e=+T[1][0],o=+T[0][1],s=+T[1][1],r>e&&(T=r,r=e,e=T),o>s&&(T=o,o=s,s=T),m.precision(b)):[[r,o],[e,s]]},m.step=function(T){return arguments.length?m.stepMajor(T).stepMinor(T):m.stepMinor()},m.stepMajor=function(T){return arguments.length?(h=+T[0],v=+T[1],m):[h,v]},m.stepMinor=function(T){return arguments.length?(u=+T[0],f=+T[1],m):[u,f]},m.precision=function(T){return arguments.length?(b=+T,c=QZ(o,s,90),d=eK(r,e,b),g=QZ(l,a,90),p=eK(i,n,b),m):b},m.extentMajor([[-180,-90+qn],[180,90-qn]]).extentMinor([[-180,-80-qn],[180,80+qn]])}t(sve,"graticule");function B6e(){return sve()()}t(B6e,"graticule10");function A2(e,r){var n=e[0]*Gn,i=e[1]*Gn,s=r[0]*Gn,o=r[1]*Gn,a=Rn(i),l=mn(i),u=Rn(o),f=mn(o),h=a*Rn(n),v=a*mn(n),c=u*Rn(s),d=u*mn(s),g=2*Ju(tl(PZ(o-i)+a*u*PZ(s-n))),p=mn(g),b=g?function(m){var y=mn(m*=g)/p,T=mn(g-m)/p,_=T*h+y*c,M=T*v+y*d,w=T*l+y*f;return[Ku(M,_)*zo,Ku(w,tl(_*_+M*M))*zo]}:function(){return[n*zo,i*zo]};return b.distance=g,b}t(A2,"interpolate");function q1(e){return e}t(q1,"identity$1");var s4=xp(),yF=xp(),lve,uve,mF,xF,tp={point:ms,lineStart:ms,lineEnd:ms,polygonStart:function(){tp.lineStart=O6e,tp.lineEnd=q6e},polygonEnd:function(){tp.lineStart=tp.lineEnd=tp.point=ms,s4.add(Pi(yF)),yF.reset()},result:function(){var e=s4/2;return s4.reset(),e}};function O6e(){tp.point=N6e}t(O6e,"areaRingStart");function N6e(e,r){tp.point=fve,lve=mF=e,uve=xF=r}t(N6e,"areaPointFirst");function fve(e,r){yF.add(xF*e-mF*r),mF=e,xF=r}t(fve,"areaPoint");function q6e(){fve(lve,uve)}t(q6e,"areaRingEnd");const tK=tp;var dy=1/0,S2=dy,U1=-dy,M2=U1,U6e={point:H6e,lineStart:ms,lineEnd:ms,polygonStart:ms,polygonEnd:ms,result:function(){var e=[[dy,S2],[U1,M2]];return U1=M2=-(S2=dy=1/0),e}};function H6e(e,r){e<dy&&(dy=e),e>U1&&(U1=e),r<S2&&(S2=r),r>M2&&(M2=r)}t(H6e,"boundsPoint");const k2=U6e;var bF=0,_F=0,Qm=0,E2=0,C2=0,Vg=0,wF=0,TF=0,e1=0,cve,hve,iv,ov,Th={point:b0,lineStart:rK,lineEnd:aK,polygonStart:function(){Th.lineStart=G6e,Th.lineEnd=j6e},polygonEnd:function(){Th.point=b0,Th.lineStart=rK,Th.lineEnd=aK},result:function(){var e=e1?[wF/e1,TF/e1]:Vg?[E2/Vg,C2/Vg]:Qm?[bF/Qm,_F/Qm]:[NaN,NaN];return bF=_F=Qm=E2=C2=Vg=wF=TF=e1=0,e}};function b0(e,r){bF+=e,_F+=r,++Qm}t(b0,"centroidPoint");function rK(){Th.point=$6e}t(rK,"centroidLineStart");function $6e(e,r){Th.point=V6e,b0(iv=e,ov=r)}t($6e,"centroidPointFirstLine");function V6e(e,r){var n=e-iv,i=r-ov,s=tl(n*n+i*i);E2+=s*(iv+e)/2,C2+=s*(ov+r)/2,Vg+=s,b0(iv=e,ov=r)}t(V6e,"centroidPointLine");function aK(){Th.point=b0}t(aK,"centroidLineEnd");function G6e(){Th.point=Y6e}t(G6e,"centroidRingStart");function j6e(){vve(cve,hve)}t(j6e,"centroidRingEnd");function Y6e(e,r){Th.point=vve,b0(cve=iv=e,hve=ov=r)}t(Y6e,"centroidPointFirstRing");function vve(e,r){var n=e-iv,i=r-ov,s=tl(n*n+i*i);E2+=s*(iv+e)/2,C2+=s*(ov+r)/2,Vg+=s,s=ov*e-iv*r,wF+=s*(iv+e),TF+=s*(ov+r),e1+=s*3,b0(iv=e,ov=r)}t(vve,"centroidPointRing");const nK=Th;function dve(e){this._context=e}t(dve,"PathContext");dve.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,r){switch(this._point){case 0:{this._context.moveTo(e,r),this._point=1;break}case 1:{this._context.lineTo(e,r);break}default:{this._context.moveTo(e+this._radius,r),this._context.arc(e,r,this._radius,0,Zu);break}}},result:ms};var AF=xp(),l4,pve,gve,t1,r1,L2={point:ms,lineStart:function(){L2.point=W6e},lineEnd:function(){l4&&yve(pve,gve),L2.point=ms},polygonStart:function(){l4=!0},polygonEnd:function(){l4=null},result:function(){var e=+AF;return AF.reset(),e}};function W6e(e,r){L2.point=yve,pve=t1=e,gve=r1=r}t(W6e,"lengthPointFirst");function yve(e,r){t1-=e,r1-=r,AF.add(tl(t1*t1+r1*r1)),t1=e,r1=r}t(yve,"lengthPoint");const iK=L2;function mve(){this._string=[]}t(mve,"PathString");mve.prototype={_radius:4.5,_circle:oK(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,r){switch(this._point){case 0:{this._string.push("M",e,",",r),this._point=1;break}case 1:{this._string.push("L",e,",",r);break}default:{this._circle==null&&(this._circle=oK(this._radius)),this._string.push("M",e,",",r,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function oK(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}t(oK,"circle");function X6e(e,r){var n=4.5,i,s;function o(a){return a&&(typeof n=="function"&&s.pointRadius(+n.apply(this,arguments)),Af(a,i(s))),s.result()}return t(o,"path"),o.area=function(a){return Af(a,i(tK)),tK.result()},o.measure=function(a){return Af(a,i(iK)),iK.result()},o.bounds=function(a){return Af(a,i(k2)),k2.result()},o.centroid=function(a){return Af(a,i(nK)),nK.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,q1):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(r=null,new mve):new dve(r=a),typeof n!="function"&&s.pointRadius(n),o):r},o.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(s.pointRadius(+a),+a),o):n},o.projection(e).context(r)}t(X6e,"index$2");function Z6e(e){return{stream:Ax(e)}}t(Z6e,"transform");function Ax(e){return function(r){var n=new SF;for(var i in e)n[i]=e[i];return n.stream=r,n}}t(Ax,"transformer");function SF(){}t(SF,"TransformStream");SF.prototype={constructor:SF,point:function(e,r){this.stream.point(e,r)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function X7(e,r,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Af(n,e.stream(k2)),r(k2.result()),i!=null&&e.clipExtent(i),e}t(X7,"fit");function i3(e,r,n){return X7(e,function(i){var s=r[1][0]-r[0][0],o=r[1][1]-r[0][1],a=Math.min(s/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+r[0][0]+(s-a*(i[1][0]+i[0][0]))/2,u=+r[0][1]+(o-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([l,u])},n)}t(i3,"fitExtent");function Z7(e,r,n){return i3(e,[[0,0],r],n)}t(Z7,"fitSize");function K7(e,r,n){return X7(e,function(i){var s=+r,o=s/(i[1][0]-i[0][0]),a=(s-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];e.scale(150*o).translate([a,l])},n)}t(K7,"fitWidth");function J7(e,r,n){return X7(e,function(i){var s=+r,o=s/(i[1][1]-i[0][1]),a=-o*i[0][0],l=(s-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,l])},n)}t(J7,"fitHeight");var sK=16,K6e=Rn(30*Gn);function lK(e,r){return+r?Q6e(e,r):J6e(e)}t(lK,"resample");function J6e(e){return Ax({point:function(r,n){r=e(r,n),this.stream.point(r[0],r[1])}})}t(J6e,"resampleNone");function Q6e(e,r){function n(i,s,o,a,l,u,f,h,v,c,d,g,p,b){var m=f-i,y=h-s,T=m*m+y*y;if(T>4*r&&p--){var _=a+c,M=l+d,w=u+g,x=tl(_*_+M*M+w*w),A=Ju(w/=x),S=Pi(Pi(w)-1)<qn||Pi(o-v)<qn?(o+v)/2:Ku(M,_),k=e(S,A),L=k[0],P=k[1],D=L-i,B=P-s,z=y*D-m*B;(z*z/T>r||Pi((m*D+y*B)/T-.5)>.3||a*c+l*d+u*g<K6e)&&(n(i,s,o,a,l,u,L,P,S,_/=x,M/=x,w,p,b),b.point(L,P),n(L,P,S,_,M,w,f,h,v,c,d,g,p,b))}}return t(n,"resampleLineTo"),function(i){var s,o,a,l,u,f,h,v,c,d,g,p,b={point:m,lineStart:y,lineEnd:_,polygonStart:function(){i.polygonStart(),b.lineStart=M},polygonEnd:function(){i.polygonEnd(),b.lineStart=y}};function m(A,S){A=e(A,S),i.point(A[0],A[1])}t(m,"point");function y(){v=NaN,b.point=T,i.lineStart()}t(y,"lineStart");function T(A,S){var k=x0([A,S]),L=e(A,S);n(v,c,h,d,g,p,v=L[0],c=L[1],h=A,d=k[0],g=k[1],p=k[2],sK,i),i.point(v,c)}t(T,"linePoint");function _(){b.point=m,i.lineEnd()}t(_,"lineEnd");function M(){y(),b.point=w,b.lineEnd=x}t(M,"ringStart");function w(A,S){T(s=A,S),o=v,a=c,l=d,u=g,f=p,b.point=T}t(w,"ringPoint");function x(){n(v,c,h,d,g,p,o,a,s,l,u,f,sK,i),b.lineEnd=_,_()}return t(x,"ringEnd"),b}}t(Q6e,"resample$1");var eze=Ax({point:function(e,r){this.stream.point(e*Gn,r*Gn)}});function tze(e){return Ax({point:function(r,n){var i=e(r,n);return this.stream.point(i[0],i[1])}})}t(tze,"transformRotate");function rze(e,r,n,i,s){function o(a,l){return a*=i,l*=s,[r+e*a,n-e*l]}return t(o,"transform"),o.invert=function(a,l){return[(a-r)/e*i,(n-l)/e*s]},o}t(rze,"scaleTranslate");function uK(e,r,n,i,s,o){var a=Rn(o),l=mn(o),u=a*e,f=l*e,h=a/e,v=l/e,c=(l*n-a*r)/e,d=(l*r+a*n)/e;function g(p,b){return p*=i,b*=s,[u*p-f*b+r,n-f*p-u*b]}return t(g,"transform"),g.invert=function(p,b){return[i*(h*p-v*b+c),s*(d-v*p-h*b)]},g}t(uK,"scaleTranslateRotate");function yn(e){return xl(function(){return e})()}t(yn,"projection");function xl(e){var r,n=150,i=480,s=250,o=0,a=0,l=0,u=0,f=0,h,v=0,c=1,d=1,g=null,p=vF,b=null,m,y,T,_=q1,M=.5,w,x,A,S,k;function L(z){return A(z[0]*Gn,z[1]*Gn)}t(L,"projection");function P(z){return z=A.invert(z[0],z[1]),z&&[z[0]*zo,z[1]*zo]}t(P,"invert"),L.stream=function(z){return S&&k===z?S:S=eze(tze(h)(p(w(_(k=z)))))},L.preclip=function(z){return arguments.length?(p=z,g=void 0,B()):p},L.postclip=function(z){return arguments.length?(_=z,b=m=y=T=null,B()):_},L.clipAngle=function(z){return arguments.length?(p=+z?nve(g=z*Gn):(g=null,vF),B()):g*zo},L.clipExtent=function(z){return arguments.length?(_=z==null?(b=m=y=T=null,q1):n3(b=+z[0][0],m=+z[0][1],y=+z[1][0],T=+z[1][1]),B()):b==null?null:[[b,m],[y,T]]},L.scale=function(z){return arguments.length?(n=+z,D()):n},L.translate=function(z){return arguments.length?(i=+z[0],s=+z[1],D()):[i,s]},L.center=function(z){return arguments.length?(o=z[0]%360*Gn,a=z[1]%360*Gn,D()):[o*zo,a*zo]},L.rotate=function(z){return arguments.length?(l=z[0]%360*Gn,u=z[1]%360*Gn,f=z.length>2?z[2]%360*Gn:0,D()):[l*zo,u*zo,f*zo]},L.angle=function(z){return arguments.length?(v=z%360*Gn,D()):v*zo},L.reflectX=function(z){return arguments.length?(c=z?-1:1,D()):c<0},L.reflectY=function(z){return arguments.length?(d=z?-1:1,D()):d<0},L.precision=function(z){return arguments.length?(w=lK(x,M=z*z),B()):tl(M)},L.fitExtent=function(z,R){return i3(L,z,R)},L.fitSize=function(z,R){return Z7(L,z,R)},L.fitWidth=function(z,R){return K7(L,z,R)},L.fitHeight=function(z,R){return J7(L,z,R)};function D(){var z=uK(n,0,0,c,d,v).apply(null,r(o,a)),R=(v?uK:rze)(n,i-z[0],s-z[1],c,d,v);return h=Y7(l,u,f),x=cF(r,R),A=cF(h,x),w=lK(x,M),B()}t(D,"recenter");function B(){return S=k=null,L}return t(B,"reset"),function(){return r=e.apply(this,arguments),L.invert=r.invert&&P,D()}}t(xl,"projectionMutator");function Q7(e){var r=0,n=xi/3,i=xl(e),s=i(r,n);return s.parallels=function(o){return arguments.length?i(r=o[0]*Gn,n=o[1]*Gn):[r*zo,n*zo]},s}t(Q7,"conicProjection");function aze(e){var r=Rn(e);function n(i,s){return[i*r,mn(s)/r]}return t(n,"forward"),n.invert=function(i,s){return[i/r,Ju(s*r)]},n}t(aze,"cylindricalEqualAreaRaw$1");function xve(e,r){var n=mn(e),i=(n+mn(r))/2;if(Pi(i)<qn)return aze(e);var s=1+n*(2*i-n),o=tl(s)/i;function a(l,u){var f=tl(s-2*i*mn(u))/i;return[f*mn(l*=i),o-f*Rn(l)]}return t(a,"project"),a.invert=function(l,u){var f=o-u,h=Ku(l,Pi(f))*Nc(f);return f*i<0&&(h-=xi*Nc(l)*Nc(f)),[h/i,Ju((s-(l*l+f*f)*i*i)/(2*i))]},a}t(xve,"conicEqualAreaRaw");function R2(){return Q7(xve).scale(155.424).center([0,33.6442])}t(R2,"conicEqualArea");function bve(){return R2().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}t(bve,"albers");function nze(e){var r=e.length;return{point:function(n,i){for(var s=-1;++s<r;)e[s].point(n,i)},sphere:function(){for(var n=-1;++n<r;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<r;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<r;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<r;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<r;)e[n].polygonEnd()}}}t(nze,"multiplex");function ize(){var e,r,n=bve(),i,s=R2().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=R2().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,u,f={point:function(c,d){u=[c,d]}};function h(c){var d=c[0],g=c[1];return u=null,i.point(d,g),u||(o.point(d,g),u)||(l.point(d,g),u)}t(h,"albersUsa"),h.invert=function(c){var d=n.scale(),g=n.translate(),p=(c[0]-g[0])/d,b=(c[1]-g[1])/d;return(b>=.12&&b<.234&&p>=-.425&&p<-.214?s:b>=.166&&b<.234&&p>=-.214&&p<-.115?a:n).invert(c)},h.stream=function(c){return e&&r===c?e:e=nze([n.stream(r=c),s.stream(c),a.stream(c)])},h.precision=function(c){return arguments.length?(n.precision(c),s.precision(c),a.precision(c),v()):n.precision()},h.scale=function(c){return arguments.length?(n.scale(c),s.scale(c*.35),a.scale(c),h.translate(n.translate())):n.scale()},h.translate=function(c){if(!arguments.length)return n.translate();var d=n.scale(),g=+c[0],p=+c[1];return i=n.translate(c).clipExtent([[g-.455*d,p-.238*d],[g+.455*d,p+.238*d]]).stream(f),o=s.translate([g-.307*d,p+.201*d]).clipExtent([[g-.425*d+qn,p+.12*d+qn],[g-.214*d-qn,p+.234*d-qn]]).stream(f),l=a.translate([g-.205*d,p+.212*d]).clipExtent([[g-.214*d+qn,p+.166*d+qn],[g-.115*d-qn,p+.234*d-qn]]).stream(f),v()},h.fitExtent=function(c,d){return i3(h,c,d)},h.fitSize=function(c,d){return Z7(h,c,d)},h.fitWidth=function(c,d){return K7(h,c,d)},h.fitHeight=function(c,d){return J7(h,c,d)};function v(){return e=r=null,h}return t(v,"reset"),h.scale(1070)}t(ize,"albersUsa");function _ve(e){return function(r,n){var i=Rn(r),s=Rn(n),o=e(i*s);return[o*s*mn(r),o*mn(n)]}}t(_ve,"azimuthalRaw");function Sx(e){return function(r,n){var i=tl(r*r+n*n),s=e(i),o=mn(s),a=Rn(s);return[Ku(r*o,i*a),Ju(i&&n*o/i)]}}t(Sx,"azimuthalInvert");var Jg=_ve(function(e){return tl(2/(1+e))});Jg.invert=Sx(function(e){return 2*Ju(e/2)});function oze(){return yn(Jg).scale(124.75).clipAngle(180-.001)}t(oze,"azimuthalEqualArea");var up=_ve(function(e){return(e=qhe(e))&&e/mn(e)});up.invert=Sx(function(e){return e});function sze(){return yn(up).scale(79.4188).clipAngle(180-.001)}t(sze,"azimuthalEquidistant");function Mx(e,r){return[e,l2(G7((Rs+r)/2))]}t(Mx,"mercatorRaw");Mx.invert=function(e,r){return[e,2*qy(Nhe(r))-Rs]};function lze(){return wve(Mx).scale(961/Zu)}t(lze,"mercator");function wve(e){var r=yn(e),n=r.center,i=r.scale,s=r.translate,o=r.clipExtent,a=null,l,u,f;r.scale=function(v){return arguments.length?(i(v),h()):i()},r.translate=function(v){return arguments.length?(s(v),h()):s()},r.center=function(v){return arguments.length?(n(v),h()):n()},r.clipExtent=function(v){return arguments.length?(v==null?a=l=u=f=null:(a=+v[0][0],l=+v[0][1],u=+v[1][0],f=+v[1][1]),h()):a==null?null:[[a,l],[u,f]]};function h(){var v=xi*i(),c=r(hy(r.rotate()).invert([0,0]));return o(a==null?[[c[0]-v,c[1]-v],[c[0]+v,c[1]+v]]:e===Mx?[[Math.max(c[0]-v,a),l],[Math.min(c[0]+v,u),f]]:[[a,Math.max(c[1]-v,l)],[u,Math.min(c[1]+v,f)]])}return t(h,"reclip"),h()}t(wve,"mercatorProjection");function Kb(e){return G7((Rs+e)/2)}t(Kb,"tany");function Tve(e,r){var n=Rn(e),i=e===r?mn(e):l2(n/Rn(r))/l2(Kb(r)/Kb(e)),s=n*a4(Kb(e),i)/i;if(!i)return Mx;function o(a,l){s>0?l<-Rs+qn&&(l=-Rs+qn):l>Rs-qn&&(l=Rs-qn);var u=s/a4(Kb(l),i);return[u*mn(i*a),s-u*Rn(i*a)]}return t(o,"project"),o.invert=function(a,l){var u=s-l,f=Nc(i)*tl(a*a+u*u),h=Ku(a,Pi(u))*Nc(u);return u*i<0&&(h-=xi*Nc(a)*Nc(u)),[h/i,2*qy(a4(s/f,1/i))-Rs]},o}t(Tve,"conicConformalRaw");function uze(){return Q7(Tve).scale(109.5).parallels([30,30])}t(uze,"conicConformal");function H1(e,r){return[e,r]}t(H1,"equirectangularRaw");H1.invert=H1;function Ave(){return yn(H1).scale(152.63)}t(Ave,"geoEquirectangular");function Sve(e,r){var n=Rn(e),i=e===r?mn(e):(n-Rn(r))/(r-e),s=n/i+e;if(Pi(i)<qn)return H1;function o(a,l){var u=s-l,f=i*a;return[u*mn(f),s-u*Rn(f)]}return t(o,"project"),o.invert=function(a,l){var u=s-l,f=Ku(a,Pi(u))*Nc(u);return u*i<0&&(f-=xi*Nc(a)*Nc(u)),[f/i,s-Nc(i)*tl(a*a+u*u)]},o}t(Sve,"conicEquidistantRaw");function fze(){return Q7(Sve).scale(131.154).center([0,13.9389])}t(fze,"conicEquidistant");var d1=1.340264,p1=-.081106,g1=893e-6,y1=.003796,P2=tl(3)/2,cze=12;function e9(e,r){var n=Ju(P2*mn(r)),i=n*n,s=i*i*i;return[e*Rn(n)/(P2*(d1+3*p1*i+s*(7*g1+9*y1*i))),n*(d1+p1*i+s*(g1+y1*i))]}t(e9,"equalEarthRaw");e9.invert=function(e,r){for(var n=r,i=n*n,s=i*i*i,o=0,a,l,u;o<cze&&(l=n*(d1+p1*i+s*(g1+y1*i))-r,u=d1+3*p1*i+s*(7*g1+9*y1*i),n-=a=l/u,i=n*n,s=i*i*i,!(Pi(a)<o2));++o);return[P2*e*(d1+3*p1*i+s*(7*g1+9*y1*i))/Rn(n),Ju(mn(n)/P2)]};function hze(){return yn(e9).scale(177.158)}t(hze,"equalEarth");function $1(e,r){var n=Rn(r),i=Rn(e)*n;return[n*mn(e)/i,mn(r)/i]}t($1,"gnomonicRaw");$1.invert=Sx(qy);function t9(){return yn($1).scale(144.049).clipAngle(60)}t(t9,"gnomonic");function vze(){var e=1,r=0,n=0,i=1,s=1,o=0,a,l,u=null,f,h,v,c=1,d=1,g=Ax({point:function(_,M){var w=T([_,M]);this.stream.point(w[0],w[1])}}),p=q1,b,m;function y(){return c=e*i,d=e*s,b=m=null,T}t(y,"reset");function T(_){var M=_[0]*c,w=_[1]*d;if(o){var x=w*a-M*l;M=M*a+w*l,w=x}return[M+r,w+n]}return t(T,"projection"),T.invert=function(_){var M=_[0]-r,w=_[1]-n;if(o){var x=w*a+M*l;M=M*a-w*l,w=x}return[M/c,w/d]},T.stream=function(_){return b&&m===_?b:b=g(p(m=_))},T.postclip=function(_){return arguments.length?(p=_,u=f=h=v=null,y()):p},T.clipExtent=function(_){return arguments.length?(p=_==null?(u=f=h=v=null,q1):n3(u=+_[0][0],f=+_[0][1],h=+_[1][0],v=+_[1][1]),y()):u==null?null:[[u,f],[h,v]]},T.scale=function(_){return arguments.length?(e=+_,y()):e},T.translate=function(_){return arguments.length?(r=+_[0],n=+_[1],y()):[r,n]},T.angle=function(_){return arguments.length?(o=_%360*Gn,l=mn(o),a=Rn(o),y()):o*zo},T.reflectX=function(_){return arguments.length?(i=_?-1:1,y()):i<0},T.reflectY=function(_){return arguments.length?(s=_?-1:1,y()):s<0},T.fitExtent=function(_,M){return i3(T,_,M)},T.fitSize=function(_,M){return Z7(T,_,M)},T.fitWidth=function(_,M){return K7(T,_,M)},T.fitHeight=function(_,M){return J7(T,_,M)},T}t(vze,"identity");function o3(e,r){var n=r*r,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),r*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}t(o3,"naturalEarth1Raw");o3.invert=function(e,r){var n=r,i=25,s;do{var o=n*n,a=o*o;n-=s=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-r)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Pi(s)>qn&&--i>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Mve(){return yn(o3).scale(175.295)}t(Mve,"naturalEarth1");function r9(e,r){return[Rn(r)*mn(e),mn(r)]}t(r9,"orthographicRaw");r9.invert=Sx(Ju);function kve(){return yn(r9).scale(249.5).clipAngle(90+qn)}t(kve,"geoOrthographic");function a9(e,r){var n=Rn(r),i=1+Rn(e)*n;return[n*mn(e)/i,mn(r)/i]}t(a9,"stereographicRaw");a9.invert=Sx(function(e){return 2*qy(e)});function dze(){return yn(a9).scale(250).clipAngle(142)}t(dze,"stereographic");function n9(e,r){return[l2(G7((Rs+r)/2)),-e]}t(n9,"transverseMercatorRaw");n9.invert=function(e,r){return[-r,2*qy(Nhe(e))-Rs]};function pze(){var e=wve(n9),r=e.center,n=e.rotate;return e.center=function(i){return arguments.length?r([-i[1],i[0]]):(i=r(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}t(pze,"transverseMercator");const gze=Object.freeze(Object.defineProperty({__proto__:null,geoArea:h6e,geoBounds:Whe,geoCentroid:Uy,geoCircle:Qhe,geoClipAntimeridian:vF,geoClipCircle:nve,geoClipExtent:C6e,geoClipRectangle:n3,geoContains:F6e,geoDistance:w2,geoGraticule:sve,geoGraticule10:B6e,geoInterpolate:A2,geoLength:ive,geoPath:X6e,geoAlbers:bve,geoAlbersUsa:ize,geoAzimuthalEqualArea:oze,geoAzimuthalEqualAreaRaw:Jg,geoAzimuthalEquidistant:sze,geoAzimuthalEquidistantRaw:up,geoConicConformal:uze,geoConicConformalRaw:Tve,geoConicEqualArea:R2,geoConicEqualAreaRaw:xve,geoConicEquidistant:fze,geoConicEquidistantRaw:Sve,geoEqualEarth:hze,geoEqualEarthRaw:e9,geoEquirectangular:Ave,geoEquirectangularRaw:H1,geoGnomonic:t9,geoGnomonicRaw:$1,geoIdentity:vze,geoProjection:yn,geoProjectionMutator:xl,geoMercator:lze,geoMercatorRaw:Mx,geoNaturalEarth1:Mve,geoNaturalEarth1Raw:o3,geoOrthographic:kve,geoOrthographicRaw:r9,geoStereographic:dze,geoStereographicRaw:a9,geoTransverseMercator:pze,geoTransverseMercatorRaw:n9,geoRotation:hy,geoStream:Af,geoTransform:Z6e},Symbol.toStringTag,{value:"Module"})),yze=Hc(gze);var jr=Math.abs,bs=Math.atan,Ci=Math.atan2,Tr=Math.cos,hv=Math.exp,py=Math.floor,dl=Math.log,ld=Math.max,Sf=Math.min,V1=Math.pow,D2=Math.round,fi=Math.sign||function(e){return e>0?1:e<0?-1:0},wr=Math.sin,oi=Math.tan,Da=1e-6,B0=1e-12,Ar=Math.PI,Oa=Ar/2,Mf=Ar/4,zc=Math.SQRT1_2,io=Ur(2),Uc=Ur(Ar),xh=Ar*2,Ei=180/Ar,gi=Ar/180;function mze(e){return e?e/Math.sin(e):1}t(mze,"sinci");function Dn(e){return e>1?Oa:e<-1?-Oa:Math.asin(e)}t(Dn,"asin");function Fl(e){return e>1?0:e<-1?Ar:Math.acos(e)}t(Fl,"acos");function Ur(e){return e>0?Math.sqrt(e):0}t(Ur,"sqrt");function xze(e){return e=hv(2*e),(e-1)/(e+1)}t(xze,"tanh");function i9(e){return(hv(e)-hv(-e))/2}t(i9,"sinh");function Eve(e){return(hv(e)+hv(-e))/2}t(Eve,"cosh");function bze(e){return dl(e+Ur(e*e+1))}t(bze,"arsinh");function _ze(e){return dl(e+Ur(e*e-1))}t(_ze,"arcosh");function Cve(e){var r=oi(e/2),n=2*dl(Tr(e/2))/(r*r);function i(s,o){var a=Tr(s),l=Tr(o),u=wr(o),f=l*a,h=-((1-f?dl((1+f)/2)/(1-f):-.5)+n/(1+f));return[h*l*wr(s),h*u]}return t(i,"forward"),i.invert=function(s,o){var a=Ur(s*s+o*o),l=-e/2,u=50,f;if(!a)return[0,0];do{var h=l/2,v=Tr(h),c=wr(h),d=c/v,g=-dl(jr(v));l-=f=(2/d*g-n*d-a)/(-g/(c*c)+1-n/(2*v*v))*(v<0?.7:1)}while(jr(f)>Da&&--u>0);var p=wr(l);return[Ci(s*p,a*Tr(l)),Dn(o*p/a)]},i}t(Cve,"airyRaw");function wze(){var e=Oa,r=xl(Cve),n=r(e);return n.radius=function(i){return arguments.length?r(e=i*gi):e*Ei},n.scale(179.976).clipAngle(147)}t(wze,"airy");function s3(e,r){var n=Tr(r),i=mze(Fl(n*Tr(e/=2)));return[2*n*wr(e)*i,wr(r)*i]}t(s3,"aitoffRaw");s3.invert=function(e,r){if(!(e*e+4*r*r>Ar*Ar+Da)){var n=e,i=r,s=25;do{var o=wr(n),a=wr(n/2),l=Tr(n/2),u=wr(i),f=Tr(i),h=wr(2*i),v=u*u,c=f*f,d=a*a,g=1-c*l*l,p=g?Fl(f*l)*Ur(b=1/g):b=0,b,m=2*p*f*a-e,y=p*u-r,T=b*(c*d+p*f*l*v),_=b*(.5*o*h-p*2*u*a),M=b*.25*(h*a-p*u*c*o),w=b*(v*l+p*d*f),x=_*M-w*T;if(!x)break;var A=(y*_-m*w)/x,S=(m*M-y*T)/x;n-=A,i-=S}while((jr(A)>Da||jr(S)>Da)&&--s>0);return[n,i]}};function Tze(){return yn(s3).scale(152.63)}t(Tze,"aitoff");function Lve(e){var r=wr(e),n=Tr(e),i=e>=0?1:-1,s=oi(i*e),o=(1+r-n)/2;function a(l,u){var f=Tr(u),h=Tr(l/=2);return[(1+f)*wr(l),(i*u>-Ci(h,s)-.001?0:-i*10)+o+wr(u)*n-(1+f)*r*h]}return t(a,"forward"),a.invert=function(l,u){var f=0,h=0,v=50;do{var c=Tr(f),d=wr(f),g=Tr(h),p=wr(h),b=1+g,m=b*d-l,y=o+p*n-b*r*c-u,T=b*c/2,_=-d*p,M=r*b*d/2,w=n*g+r*c*p,x=_*M-w*T,A=(y*_-m*w)/x/2,S=(m*M-y*T)/x;jr(S)>2&&(S/=2),f-=A,h-=S}while((jr(A)>Da||jr(S)>Da)&&--v>0);return i*h>-Ci(Tr(f),s)-.001?[f*2,h]:null},a}t(Lve,"armadilloRaw");function Aze(){var e=20*gi,r=e>=0?1:-1,n=oi(r*e),i=xl(Lve),s=i(e),o=s.stream;return s.parallel=function(a){return arguments.length?(n=oi((r=(e=a*gi)>=0?1:-1)*e),i(e)):e*Ei},s.stream=function(a){var l=s.rotate(),u=o(a),f=(s.rotate([0,0]),o(a)),h=s.precision();return s.rotate(l),u.sphere=function(){f.polygonStart(),f.lineStart();for(var v=r*-180;r*v<180;v+=r*90)f.point(v,r*90);if(e)for(;r*(v-=3*r*h)>=-180;)f.point(v,r*-Ci(Tr(v*gi/2),n)*Ei);f.lineEnd(),f.polygonEnd()},u},s.scale(218.695).center([0,28.0974])}t(Aze,"armadillo");function l3(e,r){var n=oi(r/2),i=Ur(1-n*n),s=1+i*Tr(e/=2),o=wr(e)*i/s,a=n/s,l=o*o,u=a*a;return[4/3*o*(3+l-3*u),4/3*a*(3+3*l-u)]}t(l3,"augustRaw");l3.invert=function(e,r){if(e*=3/8,r*=3/8,!e&&jr(r)>1)return null;var n=e*e,i=r*r,s=1+n+i,o=Ur((s-Ur(s*s-4*r*r))/2),a=Dn(o)/3,l=o?_ze(jr(r/o))/3:bze(jr(e))/3,u=Tr(a),f=Eve(l),h=f*f-u*u;return[fi(e)*2*Ci(i9(l)*u,.25-h),fi(r)*2*Ci(f*wr(a),.25+h)]};function Sze(){return yn(l3).scale(66.1603)}t(Sze,"august");var u4=Ur(8),Mze=dl(1+io);function o9(e,r){var n=jr(r);return n<Mf?[e,dl(oi(Mf+r/2))]:[e*Tr(n)*(2*io-1/wr(n)),fi(r)*(2*io*(n-Mf)-dl(oi(n/2)))]}t(o9,"bakerRaw");o9.invert=function(e,r){if((o=jr(r))<Mze)return[e,2*bs(hv(r))-Oa];var n=Mf,i=25,s,o;do{var a=Tr(n/2),l=oi(n/2);n-=s=(u4*(n-Mf)-dl(l)-o)/(u4-a*a/(2*l))}while(jr(s)>B0&&--i>0);return[e/(Tr(n)*(u4-1/wr(n))),fi(r)*n]};function kze(){return yn(o9).scale(112.314)}t(kze,"baker");function Rve(e){var r=2*Ar/e;function n(i,s){var o=up(i,s);if(jr(i)>Oa){var a=Ci(o[1],o[0]),l=Ur(o[0]*o[0]+o[1]*o[1]),u=r*D2((a-Oa)/r)+Oa,f=Ci(wr(a-=u),2-Tr(a));a=u+Dn(Ar/l*wr(f))-f,o[0]=l*Tr(a),o[1]=l*wr(a)}return o}return t(n,"forward"),n.invert=function(i,s){var o=Ur(i*i+s*s);if(o>Oa){var a=Ci(s,i),l=r*D2((a-Oa)/r)+Oa,u=a>l?-1:1,f=o*Tr(l-a),h=1/oi(u*Fl((f-Ar)/Ur(Ar*(Ar-2*f)+o*o)));a=l+2*bs((h+u*Ur(h*h-3))/3),i=o*Tr(a),s=o*wr(a)}return up.invert(i,s)},n}t(Rve,"berghausRaw");function Eze(){var e=5,r=xl(Rve),n=r(e),i=n.stream,s=.01,o=-Tr(s*gi),a=wr(s*gi);return n.lobes=function(l){return arguments.length?r(e=+l):e},n.stream=function(l){var u=n.rotate(),f=i(l),h=(n.rotate([0,0]),i(l));return n.rotate(u),f.sphere=function(){h.polygonStart(),h.lineStart();for(var v=0,c=360/e,d=2*Ar/e,g=90-180/e,p=Oa;v<e;++v,g-=c,p-=d)h.point(Ci(a*Tr(p),o)*Ei,Dn(a*wr(p))*Ei),g<-90?(h.point(-90,-180-g-s),h.point(-90,-180-g+s)):(h.point(90,g+s),h.point(90,g-s));h.lineEnd(),h.polygonEnd()},f},n.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}t(Eze,"berghaus");function u3(e,r){if(arguments.length<2&&(r=e),r===1)return Jg;if(r===1/0)return Pve;function n(i,s){var o=Jg(i/r,s);return o[0]*=e,o}return t(n,"forward"),n.invert=function(i,s){var o=Jg.invert(i/e,s);return o[0]*=r,o},n}t(u3,"hammerRaw");function Pve(e,r){return[e*Tr(r)/Tr(r/=2),2*wr(r)]}t(Pve,"hammerQuarticAuthalicRaw");Pve.invert=function(e,r){var n=2*Dn(r/2);return[e*Tr(n/2)/Tr(n),n]};function Cze(){var e=2,r=xl(u3),n=r(e);return n.coefficient=function(i){return arguments.length?r(e=+i):e},n.scale(169.529)}t(Cze,"hammer");function I2(e,r,n){var i=100,s,o,a;n=n===void 0?0:+n,r=+r;do o=e(n),a=e(n+Da),o===a&&(a=o+Da),n-=s=-1*Da*(o-r)/(o-a);while(i-- >0&&jr(s)>Da);return i<0?NaN:n}t(I2,"solve");function s9(e,r,n){return r===void 0&&(r=40),n===void 0&&(n=B0),function(i,s,o,a){var l,u,f;o=o===void 0?0:+o,a=a===void 0?0:+a;for(var h=0;h<r;h++){var v=e(o,a),c=v[0]-i,d=v[1]-s;if(jr(c)<n&&jr(d)<n)break;var g=c*c+d*d;if(g>l){o-=u/=2,a-=f/=2;continue}l=g;var p=(o>0?-1:1)*n,b=(a>0?-1:1)*n,m=e(o+p,a),y=e(o,a+b),T=(m[0]-v[0])/p,_=(m[1]-v[1])/p,M=(y[0]-v[0])/b,w=(y[1]-v[1])/b,x=w*T-_*M,A=(jr(x)<.5?.5:1)/x;if(u=(d*M-c*w)*A,f=(c*_-d*T)*A,o+=u,a+=f,jr(u)<n&&jr(f)<n)break}return[o,a]}}t(s9,"solve2d");function Dve(){var e=u3(1.68,2),r=1.4,n=12;function i(s,o){if(s+o<-r){var a=(s-o+1.6)*(s+o+r)/8;s+=a,o-=.8*a*wr(o+Ar/2)}var l=e(s,o),u=(1-Tr(s*o))/n;return l[1]<0&&(l[0]*=1+u),l[1]>0&&(l[1]*=1+u/1.5*l[0]*l[0]),l}return t(i,"forward"),i.invert=s9(i),i}t(Dve,"bertin1953Raw");function Lze(){return yn(Dve()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}t(Lze,"bertin");function Ive(e,r){var n=e*wr(r),i=30,s;do r-=s=(r+wr(r)-n)/(1+Tr(r));while(jr(s)>Da&&--i>0);return r/2}t(Ive,"mollweideBromleyTheta");function l9(e,r,n){function i(s,o){return[e*s*Tr(o=Ive(n,o)),r*wr(o)]}return t(i,"forward"),i.invert=function(s,o){return o=Dn(o/r),[s/(e*Tr(o)),Dn((2*o+wr(2*o))/n)]},i}t(l9,"mollweideBromleyRaw");var bp=l9(io/Oa,io,Ar);function Rze(){return yn(bp).scale(169.529)}t(Rze,"mollweide$1");var z2=2.00276,zve=1.11072;function f3(e,r){var n=Ive(Ar,r);return[z2*e/(1/Tr(r)+zve/Tr(n)),(r+io*wr(n))/z2]}t(f3,"boggsRaw");f3.invert=function(e,r){var n=z2*r,i=r<0?-Mf:Mf,s=25,o,a;do a=n-io*wr(i),i-=o=(wr(2*i)+2*i-Ar*wr(a))/(2*Tr(2*i)+2+Ar*Tr(a)*io*Tr(i));while(jr(o)>Da&&--s>0);return a=n-io*wr(i),[e*(1/Tr(a)+zve/Tr(i))/z2,a]};function Pze(){return yn(f3).scale(160.857)}t(Pze,"boggs$1");function $y(e){var r=0,n=xl(e),i=n(r);return i.parallel=function(s){return arguments.length?n(r=s*gi):r*Ei},i}t($y,"parallel1");function yd(e,r){return[e*Tr(r),r]}t(yd,"sinusoidalRaw");yd.invert=function(e,r){return[e/Tr(r),r]};function Dze(){return yn(yd).scale(152.63)}t(Dze,"sinusoidal$1");function Fve(e){if(!e)return yd;var r=1/oi(e);function n(i,s){var o=r+e-s,a=o&&i*Tr(s)/o;return[o*wr(a),r-o*Tr(a)]}return t(n,"forward"),n.invert=function(i,s){var o=Ur(i*i+(s=r-s)*s),a=r+e-o;return[o/Tr(a)*Ci(i,s),a]},n}t(Fve,"bonneRaw");function Ize(){return $y(Fve).scale(123.082).center([0,26.1441]).parallel(45)}t(Ize,"bonne");function Bve(e){function r(n,i){var s=Oa-i,o=s&&n*e*wr(s)/s;return[s*wr(o)/e,Oa-s*Tr(o)]}return t(r,"forward"),r.invert=function(n,i){var s=n*e,o=Oa-i,a=Ur(s*s+o*o),l=Ci(s,o);return[(a?a/wr(a):1)*l/e,Oa-a]},r}t(Bve,"bottomleyRaw");function zze(){var e=.5,r=xl(Bve),n=r(e);return n.fraction=function(i){return arguments.length?r(e=+i):e},n.scale(158.837)}t(zze,"bottomley");var Ove=l9(1,4/Ar,Ar);function Fze(){return yn(Ove).scale(152.63)}t(Fze,"bromley");function fK(e,r,n,i,s,o){var a=Tr(o),l;if(jr(e)>1||jr(o)>1)l=Fl(n*s+r*i*a);else{var u=wr(e/2),f=wr(o/2);l=2*Dn(Ur(u*u+r*i*f*f))}return jr(l)>Da?[l,Ci(i*wr(o),r*s-n*i*a)]:[0,0]}t(fK,"distance");function f4(e,r,n){return Fl((e*e+r*r-n*n)/(2*e*r))}t(f4,"angle$1");function Bze(e){return e-2*Ar*py((e+Ar)/(2*Ar))}t(Bze,"longitude");function Nve(e,r,n){for(var i=[[e[0],e[1],wr(e[1]),Tr(e[1])],[r[0],r[1],wr(r[1]),Tr(r[1])],[n[0],n[1],wr(n[1]),Tr(n[1])]],s=i[2],o,a=0;a<3;++a,s=o)o=i[a],s.v=fK(o[1]-s[1],s[3],s[2],o[3],o[2],o[0]-s[0]),s.point=[0,0];var l=f4(i[0].v[0],i[2].v[0],i[1].v[0]),u=f4(i[0].v[0],i[1].v[0],i[2].v[0]),f=Ar-l;i[2].point[1]=0,i[0].point[0]=-(i[1].point[0]=i[0].v[0]/2);var h=[i[2].point[0]=i[0].point[0]+i[2].v[0]*Tr(l),2*(i[0].point[1]=i[1].point[1]=i[2].v[0]*wr(l))];function v(c,d){var g=wr(d),p=Tr(d),b=new Array(3),m;for(m=0;m<3;++m){var y=i[m];if(b[m]=fK(d-y[1],y[3],y[2],p,g,c-y[0]),!b[m][0])return y.point;b[m][1]=Bze(b[m][1]-y.v[1])}var T=h.slice();for(m=0;m<3;++m){var _=m==2?0:m+1,M=f4(i[m].v[0],b[m][0],b[_][0]);b[m][1]<0&&(M=-M),m?m==1?(M=u-M,T[0]-=b[m][0]*Tr(M),T[1]-=b[m][0]*wr(M)):(M=f-M,T[0]+=b[m][0]*Tr(M),T[1]+=b[m][0]*wr(M)):(T[0]+=b[m][0]*Tr(M),T[1]-=b[m][0]*wr(M))}return T[0]/=3,T[1]/=3,T}return t(v,"forward"),v}t(Nve,"chamberlinRaw");function c4(e){return e[0]*=gi,e[1]*=gi,e}t(c4,"pointRadians");function Oze(){return qve([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}t(Oze,"chamberlinAfrica");function qve(e,r,n){var i=Uy({type:"MultiPoint",coordinates:[e,r,n]}),s=[-i[0],-i[1]],o=hy(s),a=Nve(c4(o(e)),c4(o(r)),c4(o(n)));a.invert=s9(a);var l=yn(a).rotate(s),u=l.center;return delete l.rotate,l.center=function(f){return arguments.length?u(o(f)):o.invert(u())},l.clipAngle(90)}t(qve,"chamberlin");function sv(e,r){var n=Ur(1-wr(r));return[2/Uc*e*n,Uc*(1-n)]}t(sv,"collignonRaw");sv.invert=function(e,r){var n=(n=r/Uc-1)*n;return[n>0?e*Ur(Ar/n)/2:0,Dn(1-n)]};function Nze(){return yn(sv).scale(95.6464).center([0,30])}t(Nze,"collignon$1");function Uve(e){var r=oi(e);function n(i,s){return[i,(i?i/wr(i):1)*(wr(s)*Tr(i)-r*Tr(s))]}return t(n,"forward"),n.invert=r?function(i,s){i&&(s*=wr(i)/i);var o=Tr(i);return[i,2*Ci(Ur(o*o+r*r-s*s)-o,r-s)]}:function(i,s){return[i,Dn(i?s*oi(i)/i:s)]},n}t(Uve,"craigRaw");function qze(){return $y(Uve).scale(249.828).clipAngle(90)}t(qze,"craig");var F2=Ur(3);function u9(e,r){return[F2*e*(2*Tr(2*r/3)-1)/Uc,F2*Uc*wr(r/3)]}t(u9,"crasterRaw");u9.invert=function(e,r){var n=3*Dn(r/(F2*Uc));return[Uc*e/(F2*(2*Tr(2*n/3)-1)),n]};function Uze(){return yn(u9).scale(156.19)}t(Uze,"craster");function f9(e){var r=Tr(e);function n(i,s){return[i*r,wr(s)/r]}return t(n,"forward"),n.invert=function(i,s){return[i/r,Dn(s*r)]},n}t(f9,"cylindricalEqualAreaRaw");function Hze(){return $y(f9).parallel(38.58).scale(195.044)}t(Hze,"cylindricalEqualArea");function Hve(e){var r=Tr(e);function n(i,s){return[i*r,(1+r)*oi(s/2)]}return t(n,"forward"),n.invert=function(i,s){return[i/r,bs(s/(1+r))*2]},n}t(Hve,"cylindricalStereographicRaw");function $ze(){return $y(Hve).scale(124.75)}t($ze,"cylindricalStereographic");function c9(e,r){var n=Ur(8/(3*Ar));return[n*e*(1-jr(r)/Ar),n*r]}t(c9,"eckert1Raw");c9.invert=function(e,r){var n=Ur(8/(3*Ar)),i=r/n;return[e/(n*(1-jr(i)/Ar)),i]};function Vze(){return yn(c9).scale(165.664)}t(Vze,"eckert1");function h9(e,r){var n=Ur(4-3*wr(jr(r)));return[2/Ur(6*Ar)*e*n,fi(r)*Ur(2*Ar/3)*(2-n)]}t(h9,"eckert2Raw");h9.invert=function(e,r){var n=2-jr(r)/Ur(2*Ar/3);return[e*Ur(6*Ar)/(2*n),fi(r)*Dn((4-n*n)/3)]};function Gze(){return yn(h9).scale(165.664)}t(Gze,"eckert2");function v9(e,r){var n=Ur(Ar*(4+Ar));return[2/n*e*(1+Ur(1-4*r*r/(Ar*Ar))),4/n*r]}t(v9,"eckert3Raw");v9.invert=function(e,r){var n=Ur(Ar*(4+Ar))/2;return[e*n/(1+Ur(1-r*r*(4+Ar)/(4*Ar))),r*n/2]};function jze(){return yn(v9).scale(180.739)}t(jze,"eckert3");function d9(e,r){var n=(2+Oa)*wr(r);r/=2;for(var i=0,s=1/0;i<10&&jr(s)>Da;i++){var o=Tr(r);r-=s=(r+wr(r)*(o+2)-n)/(2*o*(1+o))}return[2/Ur(Ar*(4+Ar))*e*(1+Tr(r)),2*Ur(Ar/(4+Ar))*wr(r)]}t(d9,"eckert4Raw");d9.invert=function(e,r){var n=r*Ur((4+Ar)/Ar)/2,i=Dn(n),s=Tr(i);return[e/(2/Ur(Ar*(4+Ar))*(1+s)),Dn((i+n*(s+2))/(2+Oa))]};function Yze(){return yn(d9).scale(180.739)}t(Yze,"eckert4");function p9(e,r){return[e*(1+Tr(r))/Ur(2+Ar),2*r/Ur(2+Ar)]}t(p9,"eckert5Raw");p9.invert=function(e,r){var n=Ur(2+Ar),i=r*n/2;return[n*e/(1+Tr(i)),i]};function Wze(){return yn(p9).scale(173.044)}t(Wze,"eckert5");function g9(e,r){for(var n=(1+Oa)*wr(r),i=0,s=1/0;i<10&&jr(s)>Da;i++)r-=s=(r+wr(r)-n)/(1+Tr(r));return n=Ur(2+Ar),[e*(1+Tr(r))/n,2*r/n]}t(g9,"eckert6Raw");g9.invert=function(e,r){var n=1+Oa,i=Ur(n/2);return[e*2*i/(1+Tr(r*=i)),Dn((r+wr(r))/n)]};function Xze(){return yn(g9).scale(173.044)}t(Xze,"eckert6");var B2=3+2*io;function y9(e,r){var n=wr(e/=2),i=Tr(e),s=Ur(Tr(r)),o=Tr(r/=2),a=wr(r)/(o+io*i*s),l=Ur(2/(1+a*a)),u=Ur((io*o+(i+n)*s)/(io*o+(i-n)*s));return[B2*(l*(u-1/u)-2*dl(u)),B2*(l*a*(u+1/u)-2*bs(a))]}t(y9,"eisenlohrRaw");y9.invert=function(e,r){if(!(o=l3.invert(e/1.2,r*1.065)))return null;var n=o[0],i=o[1],s=20,o;e/=B2,r/=B2;do{var a=n/2,l=i/2,u=wr(a),f=Tr(a),h=wr(l),v=Tr(l),c=Tr(i),d=Ur(c),g=h/(v+io*f*d),p=g*g,b=Ur(2/(1+p)),m=io*v+(f+u)*d,y=io*v+(f-u)*d,T=m/y,_=Ur(T),M=_-1/_,w=_+1/_,x=b*M-2*dl(_)-e,A=b*g*w-2*bs(g)-r,S=h&&zc*d*u*p/h,k=(io*f*v+d)/(2*(v+io*f*d)*(v+io*f*d)*d),L=-.5*g*b*b*b,P=L*S,D=L*k,B=(B=2*v+io*d*(f-u))*B*_,z=(io*f*v*d+c)/B,R=-(io*u*h)/(d*B),F=M*P-2*z/_+b*(z+z/T),O=M*D-2*R/_+b*(R+R/T),q=g*w*P-2*S/(1+p)+b*w*S+b*g*(z-z/T),H=g*w*D-2*k/(1+p)+b*w*k+b*g*(R-R/T),j=O*q-H*F;if(!j)break;var X=(A*O-x*H)/j,G=(x*q-A*F)/j;n-=X,i=ld(-Oa,Sf(Oa,i-G))}while((jr(X)>Da||jr(G)>Da)&&--s>0);return jr(jr(i)-Oa)<Da?[0,i]:s&&[n,i]};function Zze(){return yn(y9).scale(62.5271)}t(Zze,"eisenlohr");var O2=Tr(35*gi);function m9(e,r){var n=oi(r/2);return[e*O2*Ur(1-n*n),(1+O2)*n]}t(m9,"faheyRaw");m9.invert=function(e,r){var n=r/(1+O2);return[e&&e/(O2*Ur(1-n*n)),2*bs(n)]};function Kze(){return yn(m9).scale(137.152)}t(Kze,"fahey");function x9(e,r){var n=r/2,i=Tr(n);return[2*e/Uc*Tr(r)*i*i,Uc*oi(n)]}t(x9,"foucautRaw");x9.invert=function(e,r){var n=bs(r/Uc),i=Tr(n),s=2*n;return[e*Uc/2/(Tr(s)*i*i),s]};function Jze(){return yn(x9).scale(135.264)}t(Jze,"foucaut");function $ve(e){var r=1-e,n=o(Ar,0)[0]-o(-Ar,0)[0],i=o(0,Oa)[1]-o(0,-Oa)[1],s=Ur(2*i/n);function o(u,f){var h=Tr(f),v=wr(f);return[h/(r+e*h)*u,r*f+e*v]}t(o,"raw");function a(u,f){var h=o(u,f);return[h[0]*s,h[1]/s]}t(a,"forward");function l(u){return a(0,u)[1]}return t(l,"forwardMeridian"),a.invert=function(u,f){var h=I2(l,f),v=u/s*(e+r/Tr(h));return[v,h]},a}t($ve,"foucautSinusoidalRaw");function Qze(){var e=.5,r=xl($ve),n=r(e);return n.alpha=function(i){return arguments.length?r(e=+i):e},n.scale(168.725)}t(Qze,"foucautSinusoidal");function cK(e){return[e[0]/2,Dn(oi(e[1]/2*gi))*Ei]}t(cK,"gilbertForward");function hK(e){return[e[0]*2,2*bs(wr(e[1]*gi))*Ei]}t(hK,"gilbertInvert");function eFe(e){e==null&&(e=kve);var r=e(),n=Ave().scale(Ei).precision(0).clipAngle(null).translate([0,0]);function i(o){return r(cK(o))}t(i,"gilbert"),r.invert&&(i.invert=function(o){return hK(r.invert(o))}),i.stream=function(o){var a=r.stream(o),l=n.stream({point:function(u,f){a.point(u/2,Dn(oi(-f/2*gi))*Ei)},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}});return l.sphere=a.sphere,l};function s(o){i[o]=function(){return arguments.length?(r[o].apply(r,arguments),i):r[o]()}}return t(s,"property"),i.rotate=function(o){return arguments.length?(n.rotate(o),i):n.rotate()},i.center=function(o){return arguments.length?(r.center(cK(o)),i):hK(r.center())},s("angle"),s("clipAngle"),s("clipExtent"),s("fitExtent"),s("fitHeight"),s("fitSize"),s("fitWidth"),s("scale"),s("translate"),s("precision"),i.scale(249.5)}t(eFe,"gilbert");function Vve(e,r){var n=2*Ar/r,i=e*e;function s(o,a){var l=up(o,a),u=l[0],f=l[1],h=u*u+f*f;if(h>i){var v=Ur(h),c=Ci(f,u),d=n*D2(c/n),g=c-d,p=e*Tr(g),b=(e*wr(g)-g*wr(p))/(Oa-p),m=vK(g,b),y=(Ar-e)/Jb(m,p,Ar);u=v;var T=50,_;do u-=_=(e+Jb(m,p,u)*y-v)/(m(u)*y);while(jr(_)>Da&&--T>0);f=g*wr(u),u<Oa&&(f-=b*(u-Oa));var M=wr(d),w=Tr(d);l[0]=u*w-f*M,l[1]=u*M+f*w}return l}return t(s,"forward"),s.invert=function(o,a){var l=o*o+a*a;if(l>i){var u=Ur(l),f=Ci(a,o),h=n*D2(f/n),v=f-h;o=u*Tr(v),a=u*wr(v);for(var c=o-Oa,d=wr(o),g=a/d,p=o<Oa?1/0:0,b=10;;){var m=e*wr(g),y=e*Tr(g),T=wr(y),_=Oa-y,M=(m-g*T)/_,w=vK(g,M);if(jr(p)<B0||!--b)break;g-=p=(g*d-M*c-a)/(d-c*2*(_*(y+g*m*Tr(y)-T)-m*(m-g*T))/(_*_))}u=e+Jb(w,y,o)*(Ar-e)/Jb(w,y,Ar),f=h+g,o=u*Tr(f),a=u*wr(f)}return up.invert(o,a)},s}t(Vve,"gingeryRaw");function vK(e,r){return function(n){var i=e*Tr(n);return n<Oa&&(i-=r),Ur(1+i*i)}}t(vK,"gingeryLength");function Jb(e,r,n){for(var i=50,s=(n-r)/i,o=e(r)+e(n),a=1,l=r;a<i;++a)o+=2*e(l+=s);return o*.5*s}t(Jb,"gingeryIntegrate");function tFe(){var e=6,r=30*gi,n=Tr(r),i=wr(r),s=xl(Vve),o=s(r,e),a=o.stream,l=.01,u=-Tr(l*gi),f=wr(l*gi);return o.radius=function(h){return arguments.length?(n=Tr(r=h*gi),i=wr(r),s(r,e)):r*Ei},o.lobes=function(h){return arguments.length?s(r,e=+h):e},o.stream=function(h){var v=o.rotate(),c=a(h),d=(o.rotate([0,0]),a(h));return o.rotate(v),c.sphere=function(){d.polygonStart(),d.lineStart();for(var g=0,p=2*Ar/e,b=0;g<e;++g,b-=p)d.point(Ci(f*Tr(b),u)*Ei,Dn(f*wr(b))*Ei),d.point(Ci(i*Tr(b-p/2),n)*Ei,Dn(i*wr(b-p/2))*Ei);d.lineEnd(),d.polygonEnd()},c},o.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}t(tFe,"gingery");function c3(e,r,n,i,s,o,a,l){arguments.length<8&&(l=0);function u(f,h){if(!h)return[e*f/Ar,0];var v=h*h,c=e+v*(r+v*(n+v*i)),d=h*(s-1+v*(o-l+v*a)),g=(c*c+d*d)/(2*d),p=f*Dn(c/g)/Ar;return[g*wr(p),h*(1+v*l)+g*(1-Tr(p))]}return t(u,"forward"),u.invert=function(f,h){var v=Ar*f/e,c=h,d,g,p=50;do{var b=c*c,m=e+b*(r+b*(n+b*i)),y=c*(s-1+b*(o-l+b*a)),T=m*m+y*y,_=2*y,M=T/_,w=M*M,x=Dn(m/M)/Ar,A=v*x,S=m*m,k=(2*r+b*(4*n+b*6*i))*c,L=s+b*(3*o+b*5*a),P=2*(m*k+y*(L-1)),D=2*(L-1),B=(P*_-T*D)/(_*_),z=Tr(A),R=wr(A),F=M*z,O=M*R,q=v/Ar*(1/Ur(1-S/w))*(k*M-m*B)/w,H=O-f,j=c*(1+b*l)+M-F-h,X=B*R+F*q,G=F*x,$=1+B-(B*z-O*q),te=O*x,ee=X*te-$*G;if(!ee)break;v-=d=(j*X-H*$)/ee,c-=g=(H*te-j*G)/ee}while((jr(d)>Da||jr(g)>Da)&&--p>0);return[v,c]},u}t(c3,"ginzburgPolyconicRaw");var Gve=c3(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function rFe(){return yn(Gve).scale(149.995)}t(rFe,"ginzburg4");var jve=c3(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function aFe(){return yn(jve).scale(153.93)}t(aFe,"ginzburg5");var Yve=c3(5/6*Ar,-.62636,-.0344,0,1.3493,-.05524,0,.045);function nFe(){return yn(Yve).scale(130.945)}t(nFe,"ginzburg6");function b9(e,r){var n=e*e,i=r*r;return[e*(1-.162388*i)*(.87-952426e-9*n*n),r*(1+i/12)]}t(b9,"ginzburg8Raw");b9.invert=function(e,r){var n=e,i=r,s=50,o;do{var a=i*i;i-=o=(i*(1+a/12)-r)/(1+a/4)}while(jr(o)>Da&&--s>0);s=50,e/=1-.162388*a;do{var l=(l=n*n)*l;n-=o=(n*(.87-952426e-9*l)-e)/(.87-.00476213*l)}while(jr(o)>Da&&--s>0);return[n,i]};function iFe(){return yn(b9).scale(131.747)}t(iFe,"ginzburg8");var Wve=c3(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function oFe(){return yn(Wve).scale(131.087)}t(oFe,"ginzburg9");function Xve(e){var r=e(Oa,0)[0]-e(-Oa,0)[0];function n(i,s){var o=i>0?-.5:.5,a=e(i+o*Ar,s);return a[0]-=o*r,a}return t(n,"projectSquare"),e.invert&&(n.invert=function(i,s){var o=i>0?-.5:.5,a=e.invert(i+o*r,s),l=a[0]-o*Ar;return l<-Ar?l+=2*Ar:l>Ar&&(l-=2*Ar),a[0]=l,a}),n}t(Xve,"squareRaw");function h3(e,r){var n=fi(e),i=fi(r),s=Tr(r),o=Tr(e)*s,a=wr(e)*s,l=wr(i*r);e=jr(Ci(a,l)),r=Dn(o),jr(e-Oa)>Da&&(e%=Oa);var u=sFe(e>Ar/4?Oa-e:e,r);return e>Ar/4&&(l=u[0],u[0]=-u[1],u[1]=-l),u[0]*=n,u[1]*=-i,u}t(h3,"gringortenRaw");h3.invert=function(e,r){jr(e)>1&&(e=fi(e)*2-e),jr(r)>1&&(r=fi(r)*2-r);var n=fi(e),i=fi(r),s=-n*e,o=-i*r,a=o/s<1,l=lFe(a?o:s,a?s:o),u=l[0],f=l[1],h=Tr(f);return a&&(u=-Oa-u),[n*(Ci(wr(u)*h,-wr(f))+Ar),i*Dn(Tr(u)*h)]};function sFe(e,r){if(r===Oa)return[0,0];var n=wr(r),i=n*n,s=i*i,o=1+s,a=1+3*s,l=1-s,u=Dn(1/Ur(o)),f=l+i*o*u,h=(1-n)/f,v=Ur(h),c=h*o,d=Ur(c),g=v*l,p,b;if(e===0)return[0,-(g+i*d)];var m=Tr(r),y=1/m,T=2*n*m,_=(-3*i+u*a)*T,M=(-f*m-(1-n)*_)/(f*f),w=.5*M/v,x=l*w-2*i*v*T,A=i*o*M+h*a*T,S=-y*T,k=-y*A,L=-2*y*x,P=4*e/Ar,D;if(e>.222*Ar||r<Ar/4&&e>.175*Ar){if(p=(g+i*Ur(c*(1+s)-g*g))/(1+s),e>Ar/4)return[p,p];var B=p,z=.5*p;p=.5*(z+B),b=50;do{var R=Ur(c-p*p),F=p*(L+S*R)+k*Dn(p/d)-P;if(!F)break;F<0?z=p:B=p,p=.5*(z+B)}while(jr(B-z)>Da&&--b>0)}else{p=Da,b=25;do{var O=p*p,q=Ur(c-O),H=L+S*q,j=p*H+k*Dn(p/d)-P,X=H+(k-S*O)/q;p-=D=q?j/X:0}while(jr(D)>Da&&--b>0)}return[p,-g-i*Ur(c-p*p)]}t(sFe,"gringortenHexadecant");function lFe(e,r){for(var n=0,i=1,s=.5,o=50;;){var a=s*s,l=Ur(s),u=Dn(1/Ur(1+a)),f=1-a+s*(1+a)*u,h=(1-l)/f,v=Ur(h),c=h*(1+a),d=v*(1-a),g=c-e*e,p=Ur(g),b=r+d+s*p;if(jr(i-n)<B0||--o===0||b===0)break;b>0?n=s:i=s,s=.5*(n+i)}if(!o)return null;var m=Dn(l),y=Tr(m),T=1/y,_=2*l*y,M=(-3*s+u*(1+3*a))*_,w=(-f*y-(1-l)*M)/(f*f),x=.5*w/v,A=(1-a)*x-2*s*v*_,S=-2*T*A,k=-T*_,L=-T*(s*(1+a)*w+h*(1+3*a)*_);return[Ar/4*(e*(S+k*p)+L*Dn(e/Ur(c))),m]}t(lFe,"gringortenHexadecantInvert");function uFe(){return yn(Xve(h3)).scale(239.75)}t(uFe,"gringorten$1");function fFe(e,r,n){var i,s,o;return e?(i=h4(e,n),r?(s=h4(r,1-n),o=s[1]*s[1]+n*i[0]*i[0]*s[0]*s[0],[[i[0]*s[2]/o,i[1]*i[2]*s[0]*s[1]/o],[i[1]*s[1]/o,-i[0]*i[2]*s[0]*s[2]/o],[i[2]*s[1]*s[2]/o,-n*i[0]*i[1]*s[0]/o]]):[[i[0],0],[i[1],0],[i[2],0]]):(s=h4(r,1-n),[[0,s[0]/s[1]],[1/s[1],0],[s[2]/s[1],0]])}t(fFe,"ellipticJi");function h4(e,r){var n,i,s,o,a;if(r<Da)return o=wr(e),i=Tr(e),n=r*(e-o*i)/4,[o-n*i,i+n*o,1-r*o*o/2,e-n];if(r>=1-Da)return n=(1-r)/4,i=Eve(e),o=xze(e),s=1/i,a=i*i9(e),[o+n*(a-e)/(i*i),s-n*o*s*(a-e),s+n*o*s*(a+e),2*bs(hv(e))-Oa+n*(a-e)/i];var l=[1,0,0,0,0,0,0,0,0],u=[Ur(r),0,0,0,0,0,0,0,0],f=0;for(i=Ur(1-r),a=1;jr(u[f]/l[f])>Da&&f<8;)n=l[f++],u[f]=(n-i)/2,l[f]=(n+i)/2,i=Ur(n*i),a*=2;s=a*l[f]*e;do o=u[f]*wr(i=s)/l[f],s=(Dn(o)+s)/2;while(--f);return[wr(s),o=Tr(s),o/Tr(s-i),s]}t(h4,"ellipticJ");function cFe(e,r,n){var i=jr(e),s=jr(r),o=i9(s);if(i){var a=1/wr(i),l=1/(oi(i)*oi(i)),u=-(l+n*(o*o*a*a)-1+n),f=(n-1)*l,h=(-u+Ur(u*u-4*f))/2;return[m1(bs(1/Ur(h)),n)*fi(e),m1(bs(Ur((h/l-1)/n)),1-n)*fi(r)]}return[0,m1(bs(o),1-n)*fi(r)]}t(cFe,"ellipticFi");function m1(e,r){if(!r)return e;if(r===1)return dl(oi(e/2+Mf));for(var n=1,i=Ur(1-r),s=Ur(r),o=0;jr(s)>Da;o++){if(e%Ar){var a=bs(i*oi(e)/n);a<0&&(a+=Ar),e+=a+~~(e/Ar)*Ar}else e+=e;s=(n+i)/2,i=Ur(n*i),s=((n=s)-i)/2}return e/(V1(2,o)*n)}t(m1,"ellipticF");function v3(e,r){var n=(io-1)/(io+1),i=Ur(1-n*n),s=m1(Oa,i*i),o=-1,a=dl(oi(Ar/4+jr(r)/2)),l=hv(o*a)/Ur(n),u=hFe(l*Tr(o*e),l*wr(o*e)),f=cFe(u[0],u[1],i*i);return[-f[1],(r>=0?1:-1)*(.5*s-f[0])]}t(v3,"guyouRaw");function hFe(e,r){var n=e*e,i=r+1,s=1-n-r*r;return[.5*((e>=0?Oa:-Oa)-Ci(s,2*e)),-.25*dl(s*s+4*n)+.5*dl(i*i+n)]}t(hFe,"guyouComplexAtan");function vFe(e,r){var n=r[0]*r[0]+r[1]*r[1];return[(e[0]*r[0]+e[1]*r[1])/n,(e[1]*r[0]-e[0]*r[1])/n]}t(vFe,"guyouComplexDivide");v3.invert=function(e,r){var n=(io-1)/(io+1),i=Ur(1-n*n),s=m1(Oa,i*i),o=-1,a=fFe(.5*s-r,-e,i*i),l=vFe(a[0],a[1]),u=Ci(l[1],l[0])/o;return[u,2*bs(hv(.5/o*dl(n*l[0]*l[0]+n*l[1]*l[1])))-Oa]};function dFe(){return yn(Xve(v3)).scale(151.496)}t(dFe,"guyou");function Zve(e){var r=wr(e),n=Tr(e),i=dK(e);i.invert=dK(-e);function s(o,a){var l=i(o,a);o=l[0],a=l[1];var u=wr(a),f=Tr(a),h=Tr(o),v=Fl(r*u+n*f*h),c=wr(v),d=jr(c)>Da?v/c:1;return[d*n*wr(o),(jr(o)>Oa?d:-d)*(r*f-n*u*h)]}return t(s,"forward"),s.invert=function(o,a){var l=Ur(o*o+a*a),u=-wr(l),f=Tr(l),h=l*f,v=-a*u,c=l*r,d=Ur(h*h+v*v-c*c),g=Ci(h*c+v*d,v*c-h*d),p=(l>Oa?-1:1)*Ci(o*u,l*Tr(g)*f+a*wr(g)*u);return i.invert(p,g)},s}t(Zve,"hammerRetroazimuthalRaw");function dK(e){var r=wr(e),n=Tr(e);return function(i,s){var o=Tr(s),a=Tr(i)*o,l=wr(i)*o,u=wr(s);return[Ci(l,a*n-u*r),Dn(u*n+a*r)]}}t(dK,"hammerRetroazimuthalRotation");function pFe(){var e=0,r=xl(Zve),n=r(e),i=n.rotate,s=n.stream,o=Qhe();return n.parallel=function(a){if(!arguments.length)return e*Ei;var l=n.rotate();return r(e=a*gi).rotate(l)},n.rotate=function(a){return arguments.length?(i.call(n,[a[0],a[1]-e*Ei]),o.center([-a[0],-a[1]]),n):(a=i.call(n),a[1]+=e*Ei,a)},n.stream=function(a){return a=s(a),a.sphere=function(){a.polygonStart();var l=.01,u=o.radius(90-l)().coordinates[0],f=u.length-1,h=-1,v;for(a.lineStart();++h<f;)a.point((v=u[h])[0],v[1]);for(a.lineEnd(),u=o.radius(90+l)().coordinates[0],f=u.length-1,a.lineStart();--h>=0;)a.point((v=u[h])[0],v[1]);a.lineEnd(),a.polygonEnd()},a},n.scale(79.4187).parallel(45).clipAngle(180-.001)}t(pFe,"hammerRetroazimuthal");var gFe=3,_9=Dn(1-1/gFe)*Ei,v4=f9(0);function Kve(e){var r=_9*gi,n=sv(Ar,r)[0]-sv(-Ar,r)[0],i=v4(0,r)[1],s=sv(0,r)[1],o=Uc-s,a=xh/e,l=4/xh,u=i+o*o*4/xh;function f(h,v){var c,d=jr(v);if(d>r){var g=Sf(e-1,ld(0,py((h+Ar)/a)));h+=Ar*(e-1)/e-g*a,c=sv(h,d),c[0]=c[0]*xh/n-xh*(e-1)/(2*e)+g*xh/e,c[1]=i+(c[1]-s)*4*o/xh,v<0&&(c[1]=-c[1])}else c=v4(h,v);return c[0]*=l,c[1]/=u,c}return t(f,"forward"),f.invert=function(h,v){h/=l,v*=u;var c=jr(v);if(c>i){var d=Sf(e-1,ld(0,py((h+Ar)/a)));h=(h+Ar*(e-1)/e-d*a)*n/xh;var g=sv.invert(h,.25*(c-i)*xh/o+s);return g[0]-=Ar*(e-1)/e-d*a,v<0&&(g[1]=-g[1]),g}return v4.invert(h,v)},f}t(Kve,"healpixRaw");function yFe(e,r){return[e,r&1?90-Da:_9]}t(yFe,"sphereTop");function mFe(e,r){return[e,r&1?-90+Da:-_9]}t(mFe,"sphereBottom");function xFe(e){return[e[0]*(1-Da),e[1]]}t(xFe,"sphereNudge");function bFe(e){var r=[].concat(np(-180,180+e/2,e).map(yFe),np(180,-180-e/2,-e).map(mFe));return{type:"Polygon",coordinates:[e===180?r.map(xFe):r]}}t(bFe,"sphere");function _Fe(){var e=4,r=xl(Kve),n=r(e),i=n.stream;return n.lobes=function(s){return arguments.length?r(e=+s):e},n.stream=function(s){var o=n.rotate(),a=i(s),l=(n.rotate([0,0]),i(s));return n.rotate(o),a.sphere=function(){Af(bFe(180/e),l)},a},n.scale(239.75)}t(_Fe,"healpix");function Jve(e){var r=1+e,n=wr(1/r),i=Dn(n),s=2*Ur(Ar/(o=Ar+4*i*r)),o,a=.5*s*(r+Ur(e*(2+e))),l=e*e,u=r*r;function f(h,v){var c=1-wr(v),d,g;if(c&&c<2){var p=Oa-v,b=25,m;do{var y=wr(p),T=Tr(p),_=i+Ci(y,r-T),M=1+u-2*r*T;p-=m=(p-l*i-r*y+M*_-.5*c*o)/(2*r*y*_)}while(jr(m)>B0&&--b>0);d=s*Ur(M),g=h*_/Ar}else d=s*(e+c),g=h*i/Ar;return[d*wr(g),a-d*Tr(g)]}return t(f,"forward"),f.invert=function(h,v){var c=h*h+(v-=a)*v,d=(1+u-c/(s*s))/(2*r),g=Fl(d),p=wr(g),b=i+Ci(p,r-d);return[Dn(h/Ur(c))*Ar/b,Dn(1-2*(g-l*i-r*p+(1+u-2*r*d)*b)/o)]},f}t(Jve,"hillRaw");function wFe(){var e=1,r=xl(Jve),n=r(e);return n.ratio=function(i){return arguments.length?r(e=+i):e},n.scale(167.774).center([0,18.67])}t(wFe,"hill");var d3=.7109889596207567,gy=.0528035274542;function p3(e,r){return r>-d3?(e=bp(e,r),e[1]+=gy,e):yd(e,r)}t(p3,"sinuMollweideRaw");p3.invert=function(e,r){return r>-d3?bp.invert(e,r-gy):yd.invert(e,r)};function TFe(){return yn(p3).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}t(TFe,"sinuMollweide$1");function g3(e,r){return jr(r)>d3?(e=bp(e,r),e[1]-=r>0?gy:-gy,e):yd(e,r)}t(g3,"homolosineRaw");g3.invert=function(e,r){return jr(r)>d3?bp.invert(e,r+(r>0?gy:-gy)):yd.invert(e,r)};function AFe(){return yn(g3).scale(152.63)}t(AFe,"homolosine$1");function Qve(e,r,n,i){var s=Ur(4*Ar/(2*n+(1+e-r/2)*wr(2*n)+(e+r)/2*wr(4*n)+r/2*wr(6*n))),o=Ur(i*wr(n)*Ur((1+e*Tr(2*n)+r*Tr(4*n))/(1+e+r))),a=n*u(1);function l(v){return Ur(1+e*Tr(2*v)+r*Tr(4*v))}t(l,"radius");function u(v){var c=v*n;return(2*c+(1+e-r/2)*wr(2*c)+(e+r)/2*wr(4*c)+r/2*wr(6*c))/n}t(u,"mapping");function f(v){return l(v)*wr(v)}t(f,"inversemapping");var h=t(function(v,c){var d=n*I2(u,a*wr(c)/n,c/Ar);isNaN(d)&&(d=n*fi(c));var g=s*l(d);return[g*o*v/Ar*Tr(d),g/o*wr(d)]},"forward");return h.invert=function(v,c){var d=I2(f,c*o/s);return[v*Ar/(Tr(d)*s*o*l(d)),Dn(n*u(d/n)/a)]},n===0&&(s=Ur(i/Ar),h=t(function(v,c){return[v*s,wr(c)/s]},"forward"),h.invert=function(v,c){return[v/s,Dn(c*s)]}),h}t(Qve,"hufnagelRaw");function SFe(){var e=1,r=0,n=45*gi,i=2,s=xl(Qve),o=s(e,r,n,i);return o.a=function(a){return arguments.length?s(e=+a,r,n,i):e},o.b=function(a){return arguments.length?s(e,r=+a,n,i):r},o.psiMax=function(a){return arguments.length?s(e,r,n=+a*gi,i):n*Ei},o.ratio=function(a){return arguments.length?s(e,r,n,i=+a):i},o.scale(180.739)}t(SFe,"hufnagel");function MF(e,r,n,i,s,o,a,l,u,f,h){if(h.nanEncountered)return NaN;var v,c,d,g,p,b,m,y,T,_;if(v=n-r,c=e(r+v*.25),d=e(n-v*.25),isNaN(c)){h.nanEncountered=!0;return}if(isNaN(d)){h.nanEncountered=!0;return}return g=v*(i+4*c+s)/12,p=v*(s+4*d+o)/12,b=g+p,_=(b-a)/15,f>u?(h.maxDepthCount++,b+_):Math.abs(_)<l?b+_:(m=r+v*.5,y=MF(e,r,m,i,c,s,g,l*.5,u,f+1,h),isNaN(y)?(h.nanEncountered=!0,NaN):(T=MF(e,m,n,s,d,o,p,l*.5,u,f+1,h),isNaN(T)?(h.nanEncountered=!0,NaN):y+T))}t(MF,"adsimp");function MFe(e,r,n,i,s){var o={maxDepthCount:0,nanEncountered:!1};i===void 0&&(i=1e-8),s===void 0&&(s=20);var a=e(r),l=e(.5*(r+n)),u=e(n),f=(a+4*l+u)*(n-r)/6,h=MF(e,r,n,a,l,u,f,i,s,1,o);return h}t(MFe,"integrate");function ede(e,r,n){function i(d){return e+(1-e)*V1(1-V1(d,r),1/r)}t(i,"elliptic");function s(d){return MFe(i,0,d,1e-4)}t(s,"z");for(var o=1/s(1),a=1e3,l=(1+1e-8)*o,u=[],f=0;f<=a;f++)u.push(s(f/a)*l);function h(d){var g=0,p=a,b=a>>1;do u[b]>d?p=b:g=b,b=g+p>>1;while(b>g);var m=u[b+1]-u[b];return m&&(m=(d-u[b+1])/m),(b+1+m)/a}t(h,"Y");var v=2*h(1)/Ar*o/n,c=t(function(d,g){var p=h(jr(wr(g))),b=i(p)*d;return p/=v,[b,g>=0?p:-p]},"forward");return c.invert=function(d,g){var p;return g*=v,jr(g)<1&&(p=fi(g)*Dn(s(jr(g))*o)),[d/i(jr(g)),p]},c}t(ede,"hyperellipticalRaw");function kFe(){var e=0,r=2.5,n=1.183136,i=xl(ede),s=i(e,r,n);return s.alpha=function(o){return arguments.length?i(e=+o,r,n):e},s.k=function(o){return arguments.length?i(e,r=+o,n):r},s.gamma=function(o){return arguments.length?i(e,r,n=+o):n},s.scale(152.63)}t(kFe,"hyperelliptical");function EFe(e,r){return jr(e[0]-r[0])<Da&&jr(e[1]-r[1])<Da}t(EFe,"pointEqual$1");function pK(e,r){for(var n=-1,i=e.length,s=e[0],o,a,l,u=[];++n<i;){o=e[n],a=(o[0]-s[0])/r,l=(o[1]-s[1])/r;for(var f=0;f<r;++f)u.push([s[0]+f*a,s[1]+f*l]);s=o}return u.push(o),u}t(pK,"interpolateLine");function CFe(e){var r=[],n,i,s,o,a,l,u,f=e[0].length;for(u=0;u<f;++u)n=e[0][u],i=n[0][0],s=n[0][1],o=n[1][1],a=n[2][0],l=n[2][1],r.push(pK([[i+Da,s+Da],[i+Da,o-Da],[a-Da,o-Da],[a-Da,l+Da]],30));for(u=e[1].length-1;u>=0;--u)n=e[1][u],i=n[0][0],s=n[0][1],o=n[1][1],a=n[2][0],l=n[2][1],r.push(pK([[a-Da,l-Da],[a-Da,o+Da],[i+Da,o+Da],[i+Da,s-Da]],30));return{type:"Polygon",coordinates:[W7(r)]}}t(CFe,"interpolateSphere");function _p(e,r,n){var i,s;function o(u,f){for(var h=f<0?-1:1,v=r[+(f<0)],c=0,d=v.length-1;c<d&&u>v[c][2][0];++c);var g=e(u-v[c][1][0],f);return g[0]+=e(v[c][1][0],h*f>h*v[c][0][1]?v[c][0][1]:f)[0],g}t(o,"forward"),n?o.invert=n(o):e.invert&&(o.invert=function(u,f){for(var h=s[+(f<0)],v=r[+(f<0)],c=0,d=h.length;c<d;++c){var g=h[c];if(g[0][0]<=u&&u<g[1][0]&&g[0][1]<=f&&f<g[1][1]){var p=e.invert(u-e(v[c][1][0],0)[0],f);return p[0]+=v[c][1][0],EFe(o(p[0],p[1]),[u,f])?p:null}}});var a=yn(o),l=a.stream;return a.stream=function(u){var f=a.rotate(),h=l(u),v=(a.rotate([0,0]),l(u));return a.rotate(f),h.sphere=function(){Af(i,v)},h},a.lobes=function(u){return arguments.length?(i=CFe(u),r=u.map(function(f){return f.map(function(h){return[[h[0][0]*gi,h[0][1]*gi],[h[1][0]*gi,h[1][1]*gi],[h[2][0]*gi,h[2][1]*gi]]})}),s=r.map(function(f){return f.map(function(h){var v=e(h[0][0],h[0][1])[0],c=e(h[2][0],h[2][1])[0],d=e(h[1][0],h[0][1])[1],g=e(h[1][0],h[1][1])[1],p;return d>g&&(p=d,d=g,g=p),[[v,d],[c,g]]})}),a):r.map(function(f){return f.map(function(h){return[[h[0][0]*Ei,h[0][1]*Ei],[h[1][0]*Ei,h[1][1]*Ei],[h[2][0]*Ei,h[2][1]*Ei]]})})},r!=null&&a.lobes(r),a}t(_p,"interrupt");var LFe=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function RFe(){return _p(f3,LFe).scale(160.857)}t(RFe,"boggs");var PFe=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function DFe(){return _p(g3,PFe).scale(152.63)}t(DFe,"homolosine");var IFe=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function zFe(){return _p(bp,IFe).scale(169.529)}t(zFe,"mollweide");var FFe=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function BFe(){return _p(bp,FFe).scale(169.529).rotate([20,0])}t(BFe,"mollweideHemispheres");var OFe=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function NFe(){return _p(p3,OFe,s9).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}t(NFe,"sinuMollweide");var qFe=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function UFe(){return _p(yd,qFe).scale(152.63).rotate([-20,0])}t(UFe,"sinusoidal");function w9(e,r){return[3/xh*e*Ur(Ar*Ar/3-r*r),r]}t(w9,"kavrayskiy7Raw");w9.invert=function(e,r){return[xh/3*e/Ur(Ar*Ar/3-r*r),r]};function HFe(){return yn(w9).scale(158.837)}t(HFe,"kavrayskiy7");function tde(e){function r(n,i){if(jr(jr(i)-Oa)<Da)return[0,i<0?-2:2];var s=wr(i),o=V1((1+s)/(1-s),e/2),a=.5*(o+1/o)+Tr(n*=e);return[2*wr(n)/a,(o-1/o)/a]}return t(r,"forward"),r.invert=function(n,i){var s=jr(i);if(jr(s-2)<Da)return n?null:[0,fi(i)*Oa];if(s>2)return null;n/=2,i/=2;var o=n*n,a=i*i,l=2*i/(1+o+a);return l=V1((1+l)/(1-l),1/e),[Ci(2*n,1-o-a)/e,Dn((l-1)/(l+1))]},r}t(tde,"lagrangeRaw");function $Fe(){var e=.5,r=xl(tde),n=r(e);return n.spacing=function(i){return arguments.length?r(e=+i):e},n.scale(124.75)}t($Fe,"lagrange");var d4=Ar/io;function T9(e,r){return[e*(1+Ur(Tr(r)))/2,r/(Tr(r/2)*Tr(e/6))]}t(T9,"larriveeRaw");T9.invert=function(e,r){var n=jr(e),i=jr(r),s=Da,o=Oa;i<d4?o*=i/d4:s+=6*Fl(d4/i);for(var a=0;a<25;a++){var l=wr(o),u=Ur(Tr(o)),f=wr(o/2),h=Tr(o/2),v=wr(s/6),c=Tr(s/6),d=.5*s*(1+u)-n,g=o/(h*c)-i,p=u?-.25*s*l/u:0,b=.5*(1+u),m=(1+.5*o*f/h)/(h*c),y=o/h*(v/6)/(c*c),T=p*y-m*b,_=(d*y-g*b)/T,M=(g*p-d*m)/T;if(o-=_,s-=M,jr(_)<Da&&jr(M)<Da)break}return[e<0?-s:s,r<0?-o:o]};function VFe(){return yn(T9).scale(97.2672)}t(VFe,"larrivee");function A9(e,r){var n=e*e,i=r*r;return[e*(.975534+i*(-.119161+n*-.0143059+i*-.0547009)),r*(1.00384+n*(.0802894+i*-.02855+n*199025e-9)+i*(.0998909+i*-.0491032))]}t(A9,"laskowskiRaw");A9.invert=function(e,r){var n=fi(e)*Ar,i=r/2,s=50;do{var o=n*n,a=i*i,l=n*i,u=n*(.975534+a*(-.119161+o*-.0143059+a*-.0547009))-e,f=i*(1.00384+o*(.0802894+a*-.02855+o*199025e-9)+a*(.0998909+a*-.0491032))-r,h=.975534-a*(.119161+3*o*.0143059+a*.0547009),v=-l*(2*.119161+4*.0547009*a+2*.0143059*o),c=l*(2*.0802894+4*199025e-9*o+2*-.02855*a),d=1.00384+o*(.0802894+199025e-9*o)+a*(3*(.0998909-.02855*o)-5*.0491032*a),g=v*c-d*h,p=(f*v-u*d)/g,b=(u*c-f*h)/g;n-=p,i-=b}while((jr(p)>Da||jr(b)>Da)&&--s>0);return s&&[n,i]};function GFe(){return yn(A9).scale(139.98)}t(GFe,"laskowski");function S9(e,r){return[wr(e)/Tr(r),oi(r)*Tr(e)]}t(S9,"littrowRaw");S9.invert=function(e,r){var n=e*e,i=r*r,s=i+1,o=n+s,a=e?zc*Ur((o-Ur(o*o-4*n))/n):1/Ur(s);return[Dn(e*a),fi(r)*Fl(a)]};function jFe(){return yn(S9).scale(144.049).clipAngle(90-.001)}t(jFe,"littrow");function rde(e){var r=Tr(e),n=oi(Mf+e/2);function i(s,o){var a=o-e,l=jr(a)<Da?s*r:jr(l=Mf+o/2)<Da||jr(jr(l)-Oa)<Da?0:s*a/dl(oi(l)/n);return[l,a]}return t(i,"forward"),i.invert=function(s,o){var a,l=o+e;return[jr(o)<Da?s/r:jr(a=Mf+l/2)<Da||jr(jr(a)-Oa)<Da?0:s*dl(oi(a)/n)/o,l]},i}t(rde,"loximuthalRaw");function YFe(){return $y(rde).parallel(40).scale(158.837)}t(YFe,"loximuthal");function M9(e,r){return[e,1.25*dl(oi(Mf+.4*r))]}t(M9,"millerRaw");M9.invert=function(e,r){return[e,2.5*bs(hv(.8*r))-.625*Ar]};function WFe(){return yn(M9).scale(108.318)}t(WFe,"miller$1");function ade(e){var r=e.length-1;function n(i,s){for(var o=Tr(s),a=2/(1+o*Tr(i)),l=a*o*wr(i),u=a*wr(s),f=r,h=e[f],v=h[0],c=h[1],d;--f>=0;)h=e[f],v=h[0]+l*(d=v)-u*c,c=h[1]+l*c+u*d;return v=l*(d=v)-u*c,c=l*c+u*d,[v,c]}return t(n,"forward"),n.invert=function(i,s){var o=20,a=i,l=s;do{for(var u=r,f=e[u],h=f[0],v=f[1],c=0,d=0,g;--u>=0;)f=e[u],c=h+a*(g=c)-l*d,d=v+a*d+l*g,h=f[0]+a*(g=h)-l*v,v=f[1]+a*v+l*g;c=h+a*(g=c)-l*d,d=v+a*d+l*g,h=a*(g=h)-l*v-i,v=a*v+l*g-s;var p=c*c+d*d,b,m;a-=b=(h*c+v*d)/p,l-=m=(v*c-h*d)/p}while(jr(b)+jr(m)>Da*Da&&--o>0);if(o){var y=Ur(a*a+l*l),T=2*bs(y*.5),_=wr(T);return[Ci(a*_,y*Tr(T)),y?Dn(l*_/y):0]}},n}t(ade,"modifiedStereographicRaw");var XFe=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ZFe=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],KFe=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],JFe=[[.9245,0],[0,0],[.01943,0]],QFe=[[.721316,0],[0,0],[-.00881625,-.00617325]];function e8e(){return Vy(XFe,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}t(e8e,"modifiedStereographicAlaska");function t8e(){return Vy(ZFe,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}t(t8e,"modifiedStereographicGs48");function r8e(){return Vy(KFe,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}t(r8e,"modifiedStereographicGs50");function a8e(){return Vy(JFe,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}t(a8e,"modifiedStereographicMiller");function n8e(){return Vy(QFe,[165,10]).scale(250).clipAngle(130).center([-165,-10])}t(n8e,"modifiedStereographicLee");function Vy(e,r){var n=yn(ade(e)).rotate(r).clipAngle(90),i=hy(r),s=n.center;return delete n.rotate,n.center=function(o){return arguments.length?s(i(o)):i.invert(s())},n}t(Vy,"modifiedStereographic");var N2=Ur(6),q2=Ur(7);function k9(e,r){var n=Dn(7*wr(r)/(3*N2));return[N2*e*(2*Tr(2*n/3)-1)/q2,9*wr(n/3)/q2]}t(k9,"mtFlatPolarParabolicRaw");k9.invert=function(e,r){var n=3*Dn(r*q2/9);return[e*q2/(N2*(2*Tr(2*n/3)-1)),Dn(wr(n)*3*N2/7)]};function i8e(){return yn(k9).scale(164.859)}t(i8e,"mtFlatPolarParabolic");function E9(e,r){for(var n=(1+zc)*wr(r),i=r,s=0,o;s<25&&(i-=o=(wr(i/2)+wr(i)-n)/(.5*Tr(i/2)+Tr(i)),!(jr(o)<Da));s++);return[e*(1+2*Tr(i)/Tr(i/2))/(3*io),2*Ur(3)*wr(i/2)/Ur(2+io)]}t(E9,"mtFlatPolarQuarticRaw");E9.invert=function(e,r){var n=r*Ur(2+io)/(2*Ur(3)),i=2*Dn(n);return[3*io*e/(1+2*Tr(i)/Tr(i/2)),Dn((n+wr(i))/(1+zc))]};function o8e(){return yn(E9).scale(188.209)}t(o8e,"mtFlatPolarQuartic");function C9(e,r){for(var n=Ur(6/(4+Ar)),i=(1+Ar/4)*wr(r),s=r/2,o=0,a;o<25&&(s-=a=(s/2+wr(s)-i)/(.5+Tr(s)),!(jr(a)<Da));o++);return[n*(.5+Tr(s))*e/1.5,n*s]}t(C9,"mtFlatPolarSinusoidalRaw");C9.invert=function(e,r){var n=Ur(6/(4+Ar)),i=r/n;return jr(jr(i)-Oa)<Da&&(i=i<0?-Oa:Oa),[1.5*e/(n*(.5+Tr(i))),Dn((i/2+wr(i))/(1+Ar/4))]};function s8e(){return yn(C9).scale(166.518)}t(s8e,"mtFlatPolarSinusoidal");function L9(e,r){var n=r*r,i=n*n,s=n*i;return[e*(.84719-.13063*n+s*s*(-.04515+.05494*n-.02326*i+.00331*s)),r*(1.01183+i*i*(-.02625+.01926*n-.00396*i))]}t(L9,"naturalEarth2Raw");L9.invert=function(e,r){var n=r,i=25,s,o,a,l;do o=n*n,a=o*o,n-=s=(n*(1.01183+a*a*(-.02625+.01926*o-.00396*a))-r)/(1.01183+a*a*(9*-.02625+11*.01926*o+13*-.00396*a));while(jr(s)>B0&&--i>0);return o=n*n,a=o*o,l=o*a,[e/(.84719-.13063*o+l*l*(-.04515+.05494*o-.02326*a+.00331*l)),n]};function l8e(){return yn(L9).scale(175.295)}t(l8e,"naturalEarth2");function R9(e,r){return[e*(1+Tr(r))/2,2*(r-oi(r/2))]}t(R9,"nellHammerRaw");R9.invert=function(e,r){for(var n=r/2,i=0,s=1/0;i<10&&jr(s)>Da;++i){var o=Tr(r/2);r-=s=(r-oi(r/2)-n)/(1-.5/(o*o))}return[2*e/(1+Tr(r)),r]};function u8e(){return yn(R9).scale(152.63)}t(u8e,"nellHammer");var f8e=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function c8e(){return _p(u3(1/0),f8e).rotate([20,0]).scale(152.63)}t(c8e,"quarticAuthalic");function P9(e,r){var n=wr(r),i=Tr(r),s=fi(e);if(e===0||jr(r)===Oa)return[0,r];if(r===0)return[e,0];if(jr(e)===Oa)return[e*i,Oa*n];var o=Ar/(2*e)-2*e/Ar,a=2*r/Ar,l=(1-a*a)/(n-a),u=o*o,f=l*l,h=1+u/f,v=1+f/u,c=(o*n/l-o/2)/h,d=(f*n/u+l/2)/v,g=c*c+i*i/h,p=d*d-(f*n*n/u+l*n-1)/v;return[Oa*(c+Ur(g)*s),Oa*(d+Ur(p<0?0:p)*fi(-r*o)*s)]}t(P9,"nicolosiRaw");P9.invert=function(e,r){e/=Oa,r/=Oa;var n=e*e,i=r*r,s=n+i,o=Ar*Ar;return[e?(s-1+Ur((1-s)*(1-s)+4*n))/(2*e)*Oa:0,I2(function(a){return s*(Ar*wr(a)-2*a)*Ar+4*a*a*(r-wr(a))+2*Ar*a-o*r},0)]};function h8e(){return yn(P9).scale(127.267)}t(h8e,"nicolosi");var D9=1.0148,I9=.23185,z9=-.14499,F9=.02406,v8e=D9,d8e=5*I9,p8e=7*z9,g8e=9*F9,Qb=1.790857183;function B9(e,r){var n=r*r;return[e,r*(D9+n*n*(I9+n*(z9+F9*n)))]}t(B9,"pattersonRaw");B9.invert=function(e,r){r>Qb?r=Qb:r<-Qb&&(r=-Qb);var n=r,i;do{var s=n*n;n-=i=(n*(D9+s*s*(I9+s*(z9+F9*s)))-r)/(v8e+s*s*(d8e+s*(p8e+g8e*s)))}while(jr(i)>Da);return[e,n]};function y8e(){return yn(B9).scale(139.319)}t(y8e,"patterson");function O9(e,r){if(jr(r)<Da)return[e,0];var n=oi(r),i=e*wr(r);return[wr(i)/n,r+(1-Tr(i))/n]}t(O9,"polyconicRaw");O9.invert=function(e,r){if(jr(r)<Da)return[e,0];var n=e*e+r*r,i=r*.5,s=10,o;do{var a=oi(i),l=1/Tr(i),u=n-2*r*i+i*i;i-=o=(a*u+2*(i-r))/(2+u*l*l+2*(i-r)*a)}while(jr(o)>Da&&--s>0);return a=oi(i),[(jr(r)<jr(i+1/a)?Dn(e*a):fi(r)*fi(e)*(Fl(jr(e*a))+Oa))/wr(i),i]};function m8e(){return yn(O9).scale(103.74)}t(m8e,"polyconic");function x8e(e,r){var n=gK(e[1],e[0]),i=gK(r[1],r[0]),s=_8e(n,i),o=yK(n)/yK(i);return S_([1,0,e[0][0],0,1,e[0][1]],S_([o,0,0,0,o,0],S_([Tr(s),wr(s),0,-wr(s),Tr(s),0],[1,0,-r[0][0],0,1,-r[0][1]])))}t(x8e,"matrix");function b8e(e){var r=1/(e[0]*e[4]-e[1]*e[3]);return[r*e[4],-r*e[1],r*(e[1]*e[5]-e[2]*e[4]),-r*e[3],r*e[0],r*(e[2]*e[3]-e[0]*e[5])]}t(b8e,"inverse");function S_(e,r){return[e[0]*r[0]+e[1]*r[3],e[0]*r[1]+e[1]*r[4],e[0]*r[2]+e[1]*r[5]+e[2],e[3]*r[0]+e[4]*r[3],e[3]*r[1]+e[4]*r[4],e[3]*r[2]+e[4]*r[5]+e[5]]}t(S_,"multiply");function gK(e,r){return[e[0]-r[0],e[1]-r[1]]}t(gK,"subtract");function yK(e){return Ur(e[0]*e[0]+e[1]*e[1])}t(yK,"length");function _8e(e,r){return Ci(e[0]*r[1]-e[1]*r[0],e[0]*r[0]+e[1]*r[1])}t(_8e,"angle");function y3(e,r,n){i(e,{transform:null});function i(f,h){if(f.edges=T8e(f.face),h.face){var v=f.shared=w8e(f.face,h.face),c=x8e(v.map(h.project),v.map(f.project));f.transform=h.transform?S_(h.transform,c):c;for(var d=h.edges,g=0,p=d.length;g<p;++g)Yd(v[0],d[g][1])&&Yd(v[1],d[g][0])&&(d[g]=f),Yd(v[0],d[g][0])&&Yd(v[1],d[g][1])&&(d[g]=f);for(d=f.edges,g=0,p=d.length;g<p;++g)Yd(v[0],d[g][0])&&Yd(v[1],d[g][1])&&(d[g]=h),Yd(v[0],d[g][1])&&Yd(v[1],d[g][0])&&(d[g]=h)}else f.transform=h.transform;return f.children&&f.children.forEach(function(b){i(b,f)}),f}t(i,"recurse");function s(f,h){var v=r(f,h),c=v.project([f*Ei,h*Ei]),d;return(d=v.transform)?[d[0]*c[0]+d[1]*c[1]+d[2],-(d[3]*c[0]+d[4]*c[1]+d[5])]:(c[1]=-c[1],c)}t(s,"forward"),ide(e)&&(s.invert=function(f,h){var v=o(e,[f,-h]);return v&&(v[0]*=gi,v[1]*=gi,v)});function o(f,h){var v=f.project.invert,c=f.transform,d=h;if(c&&(c=b8e(c),d=[c[0]*d[0]+c[1]*d[1]+c[2],c[3]*d[0]+c[4]*d[1]+c[5]]),v&&f===a(g=v(d)))return g;for(var g,p=f.children,b=0,m=p&&p.length;b<m;++b)if(g=o(p[b],h))return g}t(o,"faceInvert");function a(f){return r(f[0]*gi,f[1]*gi)}t(a,"faceDegrees");var l=yn(s),u=l.stream;return l.stream=function(f){var h=l.rotate(),v=u(f),c=(l.rotate([0,0]),u(f));return l.rotate(h),v.sphere=function(){c.polygonStart(),c.lineStart(),nde(c,e),c.lineEnd(),c.polygonEnd()},v},l.angle(n==null?-30:n*Ei)}t(y3,"polyhedral");function nde(e,r,n){var i,s=r.edges,o=s.length,a,l={type:"MultiPoint",coordinates:r.face},u=r.face.filter(function(p){return jr(p[1])!==90}),f=Whe({type:"MultiPoint",coordinates:u}),h=!1,v=-1,c=f[1][0]-f[0][0],d=c===180||c===360?[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]:Uy(l);if(n)for(;++v<o&&s[v]!==n;);++v;for(var g=0;g<o;++g)a=s[(g+v)%o],Array.isArray(a)?(h||(e.point((i=A2(a[0],d)(Da))[0],i[1]),h=!0),e.point((i=A2(a[1],d)(Da))[0],i[1])):(h=!1,a!==n&&nde(e,a,r))}t(nde,"outline");function Yd(e,r){return e&&r&&e[0]===r[0]&&e[1]===r[1]}t(Yd,"pointEqual");function w8e(e,r){for(var n,i,s=e.length,o=null,a=0;a<s;++a){n=e[a];for(var l=r.length;--l>=0;)if(i=r[l],n[0]===i[0]&&n[1]===i[1]){if(o)return[o,n];o=n}}}t(w8e,"sharedEdge");function T8e(e){for(var r=e.length,n=[],i=e[r-1],s=0;s<r;++s)n.push([i,i=e[s]]);return n}t(T8e,"faceEdges");function ide(e){return e.project.invert||e.children&&e.children.some(ide)}t(ide,"hasInverse");var A8e=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];const U2=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(e){return e.map(function(r){return A8e[r]})});function S8e(e){e=e||function(n){var i=Uy({type:"MultiPoint",coordinates:n});return t9().scale(1).translate([0,0]).rotate([-i[0],-i[1]])};var r=U2.map(function(n){return{face:n,project:e(n)}});return[-1,0,0,1,0,1,4,5].forEach(function(n,i){var s=r[n];s&&(s.children||(s.children=[])).push(r[i])}),y3(r[0],function(n,i){return r[n<-Ar/2?i<0?6:4:n<0?i<0?2:0:n<Ar/2?i<0?3:1:i<0?7:5]}).angle(-30).scale(101.858).center([0,45])}t(S8e,"butterfly");var ode=2/Ur(3);function sde(e,r){var n=sv(e,r);return[n[0]*ode,n[1]]}t(sde,"collignonK");sde.invert=function(e,r){return sv.invert(e/ode,r)};function M8e(e){e=e||function(n){var i=Uy({type:"MultiPoint",coordinates:n});return yn(sde).translate([0,0]).scale(1).rotate(i[1]>0?[-i[0],0]:[180-i[0],180])};var r=U2.map(function(n){return{face:n,project:e(n)}});return[-1,0,0,1,0,1,4,5].forEach(function(n,i){var s=r[n];s&&(s.children||(s.children=[])).push(r[i])}),y3(r[0],function(n,i){return r[n<-Ar/2?i<0?6:4:n<0?i<0?2:0:n<Ar/2?i<0?3:1:i<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}t(M8e,"collignon");function k8e(e){e=e||function(a){var l=a.length===6?Uy({type:"MultiPoint",coordinates:a}):a[0];return t9().scale(1).translate([0,0]).rotate([-l[0],-l[1]])};var r=U2.map(function(a){for(var l=a.map(g4),u=l.length,f=l[u-1],h,v=[],c=0;c<u;++c)h=l[c],v.push(mK([f[0]*.9486832980505138+h[0]*.31622776601683794,f[1]*.9486832980505138+h[1]*.31622776601683794,f[2]*.9486832980505138+h[2]*.31622776601683794]),mK([h[0]*.9486832980505138+f[0]*.31622776601683794,h[1]*.9486832980505138+f[1]*.31622776601683794,h[2]*.9486832980505138+f[2]*.31622776601683794])),f=h;return v}),n=[],i=[-1,0,0,1,0,1,4,5];r.forEach(function(a,l){for(var u=U2[l],f=u.length,h=n[l]=[],v=0;v<f;++v)r.push([u[v],a[(v*2+2)%(2*f)],a[(v*2+1)%(2*f)]]),i.push(l),h.push(E8e(g4(a[(v*2+2)%(2*f)]),g4(a[(v*2+1)%(2*f)])))});var s=r.map(function(a){return{project:e(a),face:a}});i.forEach(function(a,l){var u=s[a];u&&(u.children||(u.children=[])).push(s[l])});function o(a,l){var u=Tr(l),f=[u*Tr(a),u*wr(a),wr(l)],h=a<-Ar/2?l<0?6:4:a<0?l<0?2:0:a<Ar/2?l<0?3:1:l<0?7:5,v=n[h];return s[p4(v[0],f)<0?8+3*h:p4(v[1],f)<0?8+3*h+1:p4(v[2],f)<0?8+3*h+2:h]}return t(o,"face"),y3(s[0],o).angle(-30).scale(110.625).center([0,45])}t(k8e,"waterman");function p4(e,r){for(var n=0,i=e.length,s=0;n<i;++n)s+=e[n]*r[n];return s}t(p4,"dot");function E8e(e,r){return[e[1]*r[2]-e[2]*r[1],e[2]*r[0]-e[0]*r[2],e[0]*r[1]-e[1]*r[0]]}t(E8e,"cross");function mK(e){return[Ci(e[1],e[0])*Ei,Dn(ld(-1,Sf(1,e[2])))*Ei]}t(mK,"spherical");function g4(e){var r=e[0]*gi,n=e[1]*gi,i=Tr(n);return[i*Tr(r),i*wr(r),wr(n)]}t(g4,"cartesian");function M_(){}t(M_,"noop$2");function C8e(e){if((n=e.length)<4)return!1;for(var r=0,n,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++r<n;)i+=e[r-1][1]*e[r][0]-e[r-1][0]*e[r][1];return i<=0}t(C8e,"clockwise");function L8e(e,r){for(var n=r[0],i=r[1],s=!1,o=0,a=e.length,l=a-1;o<a;l=o++){var u=e[o],f=u[0],h=u[1],v=e[l],c=v[0],d=v[1];h>i^d>i&&n<(c-f)*(i-h)/(d-h)+f&&(s=!s)}return s}t(L8e,"contains$1");function R8e(e,r){var n=r.stream,i;if(!n)throw new Error("invalid projection");switch(e&&e.type){case"Feature":i=lde;break;case"FeatureCollection":i=P8e;break;default:i=N9;break}return i(e,n)}t(R8e,"index$1");function P8e(e,r){return{type:"FeatureCollection",features:e.features.map(function(n){return lde(n,r)})}}t(P8e,"projectFeatureCollection");function lde(e,r){return{type:"Feature",id:e.id,properties:e.properties,geometry:N9(e.geometry,r)}}t(lde,"projectFeature");function D8e(e,r){return{type:"GeometryCollection",geometries:e.geometries.map(function(n){return N9(n,r)})}}t(D8e,"projectGeometryCollection");function N9(e,r){if(!e)return null;if(e.type==="GeometryCollection")return D8e(e,r);var n;switch(e.type){case"Point":n=xK;break;case"MultiPoint":n=xK;break;case"LineString":n=bK;break;case"MultiLineString":n=bK;break;case"Polygon":n=y4;break;case"MultiPolygon":n=y4;break;case"Sphere":n=y4;break;default:return null}return Af(e,r(n)),n.result()}t(N9,"projectGeometry");var du=[],av=[],xK={point:function(e,r){du.push([e,r])},result:function(){var e=du.length?du.length<2?{type:"Point",coordinates:du[0]}:{type:"MultiPoint",coordinates:du}:null;return du=[],e}},bK={lineStart:M_,point:function(e,r){du.push([e,r])},lineEnd:function(){du.length&&(av.push(du),du=[])},result:function(){var e=av.length?av.length<2?{type:"LineString",coordinates:av[0]}:{type:"MultiLineString",coordinates:av}:null;return av=[],e}},y4={polygonStart:M_,lineStart:M_,point:function(e,r){du.push([e,r])},lineEnd:function(){var e=du.length;if(e){do du.push(du[0].slice());while(++e<4);av.push(du),du=[]}},polygonEnd:M_,result:function(){if(!av.length)return null;var e=[],r=[];return av.forEach(function(n){C8e(n)?e.push([n]):r.push(n)}),r.forEach(function(n){var i=n[0];e.some(function(s){if(L8e(s[0],i))return s.push(n),!0})||e.push([n])}),av=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}};function q9(e){var r=e(Oa,0)[0]-e(-Oa,0)[0];function n(i,s){var o=jr(i)<Oa,a=e(o?i:i>0?i-Ar:i+Ar,s),l=(a[0]-a[1])*zc,u=(a[0]+a[1])*zc;if(o)return[l,u];var f=r*zc,h=l>0^u>0?-1:1;return[h*l-fi(u)*f,h*u-fi(l)*f]}return t(n,"projectQuincuncial"),e.invert&&(n.invert=function(i,s){var o=(i+s)*zc,a=(s-i)*zc,l=jr(o)<.5*r&&jr(a)<.5*r;if(!l){var u=r*zc,f=o>0^a>0?-1:1,h=-f*i+(a>0?1:-1)*u,v=-f*s+(o>0?1:-1)*u;o=(-h-v)*zc,a=(h-v)*zc}var c=e.invert(o,a);return l||(c[0]+=o>0?Ar:-Ar),c}),yn(n).rotate([-90,-90,45]).clipAngle(180-.001)}t(q9,"quincuncial");function I8e(){return q9(h3).scale(176.423)}t(I8e,"gringorten");function _K(){return q9(v3).scale(111.48)}t(_K,"peirce");function z8e(e,r){if(!(0<=(r=+r)&&r<=20))throw new Error("invalid digits");function n(f){var h=f.length,v=2,c=new Array(h);for(c[0]=+f[0].toFixed(r),c[1]=+f[1].toFixed(r);v<h;)c[v]=f[v],++v;return c}t(n,"quantizePoint");function i(f){return f.map(n)}t(i,"quantizePoints");function s(f){for(var h=n(f[0]),v=[h],c=1;c<f.length;c++){var d=n(f[c]);(d.length>2||d[0]!=h[0]||d[1]!=h[1])&&(v.push(d),h=d)}return v.length===1&&f.length>1&&v.push(n(f[f.length-1])),v}t(s,"quantizePointsNoDuplicates");function o(f){return f.map(s)}t(o,"quantizePolygon");function a(f){if(f==null)return f;var h;switch(f.type){case"GeometryCollection":h={type:"GeometryCollection",geometries:f.geometries.map(a)};break;case"Point":h={type:"Point",coordinates:n(f.coordinates)};break;case"MultiPoint":h={type:f.type,coordinates:i(f.coordinates)};break;case"LineString":h={type:f.type,coordinates:s(f.coordinates)};break;case"MultiLineString":case"Polygon":h={type:f.type,coordinates:o(f.coordinates)};break;case"MultiPolygon":h={type:"MultiPolygon",coordinates:f.coordinates.map(o)};break;default:return f}return f.bbox!=null&&(h.bbox=f.bbox),h}t(a,"quantizeGeometry");function l(f){var h={type:"Feature",properties:f.properties,geometry:a(f.geometry)};return f.id!=null&&(h.id=f.id),f.bbox!=null&&(h.bbox=f.bbox),h}if(t(l,"quantizeFeature"),e!=null)switch(e.type){case"Feature":return l(e);case"FeatureCollection":{var u={type:"FeatureCollection",features:e.features.map(l)};return e.bbox!=null&&(u.bbox=e.bbox),u}default:return a(e)}return e}t(z8e,"quantize$1");function ude(e){var r=wr(e);function n(i,s){var o=r?oi(i*r/2)/r:i/2;if(!s)return[2*o,-e];var a=2*bs(o*wr(s)),l=1/oi(s);return[wr(a)*l,s+(1-Tr(a))*l-e]}return t(n,"forward"),n.invert=function(i,s){if(jr(s+=e)<Da)return[r?2*bs(r*i/2)/r:i,0];var o=i*i+s*s,a=0,l=10,u;do{var f=oi(a),h=1/Tr(a),v=o-2*s*a+a*a;a-=u=(f*v+2*(a-s))/(2+v*h*h+2*(a-s)*f)}while(jr(u)>Da&&--l>0);var c=i*(f=oi(a)),d=oi(jr(s)<jr(a+1/f)?Dn(c)*.5:Fl(c)*.5+Ar/4)/wr(a);return[r?2*bs(r*d)/r:2*d,a]},n}t(ude,"rectangularPolyconicRaw");function F8e(){return $y(ude).scale(131.215)}t(F8e,"rectangularPolyconic");var Kf=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Kf.forEach(function(e){e[1]*=1.0144});function U9(e,r){var n=Sf(18,jr(r)*36/Ar),i=py(n),s=n-i,o=(v=Kf[i])[0],a=v[1],l=(v=Kf[++i])[0],u=v[1],f=(v=Kf[Sf(19,++i)])[0],h=v[1],v;return[e*(l+s*(f-o)/2+s*s*(f-2*l+o)/2),(r>0?Oa:-Oa)*(u+s*(h-a)/2+s*s*(h-2*u+a)/2)]}t(U9,"robinsonRaw");U9.invert=function(e,r){var n=r/Oa,i=n*90,s=Sf(18,jr(i/5)),o=ld(0,py(s));do{var a=Kf[o][1],l=Kf[o+1][1],u=Kf[Sf(19,o+2)][1],f=u-a,h=u-2*l+a,v=2*(jr(n)-l)/f,c=h/f,d=v*(1-c*v*(1-2*c*v));if(d>=0||o===1){i=(r>=0?5:-5)*(d+s);var g=50,p;do s=Sf(18,jr(i)/5),o=py(s),d=s-o,a=Kf[o][1],l=Kf[o+1][1],u=Kf[Sf(19,o+2)][1],i-=(p=(r>=0?Oa:-Oa)*(l+d*(u-a)/2+d*d*(u-2*l+a)/2)-r)*Ei;while(jr(p)>B0&&--g>0);break}}while(--o>=0);var b=Kf[o][0],m=Kf[o+1][0],y=Kf[Sf(19,o+2)][0];return[e/(m+d*(y-b)/2+d*d*(y-2*m+b)/2),i*gi]};function B8e(){return yn(U9).scale(152.63)}t(B8e,"robinson");function O8e(e){function r(n,i){var s=Tr(i),o=(e-1)/(e-s*Tr(n));return[o*s*wr(n),o*wr(i)]}return t(r,"forward"),r.invert=function(n,i){var s=n*n+i*i,o=Ur(s),a=(e-Ur(1-s*(e+1)/(e-1)))/((e-1)/o+o/(e-1));return[Ci(n*a,o*Ur(1-a*a)),o?Dn(i*a/o):0]},r}t(O8e,"satelliteVerticalRaw");function fde(e,r){var n=O8e(e);if(!r)return n;var i=Tr(r),s=wr(r);function o(a,l){var u=n(a,l),f=u[1],h=f*s/(e-1)+i;return[u[0]*i/h,f/h]}return t(o,"forward"),o.invert=function(a,l){var u=(e-1)/(e-1-l*s);return n.invert(u*a,u*l*i)},o}t(fde,"satelliteRaw");function N8e(){var e=2,r=0,n=xl(fde),i=n(e,r);return i.distance=function(s){return arguments.length?n(e=+s,r):e},i.tilt=function(s){return arguments.length?n(e,r=s*gi):r*Ei},i.scale(432.147).clipAngle(Fl(1/e)*Ei-1e-6)}t(N8e,"satellite");var m3=1e-4,wK=1e4,H9=-180,kF=H9+m3,cde=180,EF=cde-m3,$9=-90,CF=$9+m3,V9=90,LF=V9-m3;function q8e(e){return e.length>0}t(q8e,"nonempty");function U8e(e){return Math.floor(e*wK)/wK}t(U8e,"quantize");function TK(e){return e===$9||e===V9?[0,e]:[H9,U8e(e)]}t(TK,"normalizePoint");function G9(e){var r=e[0],n=e[1],i=!1;return r<=kF?(r=H9,i=!0):r>=EF&&(r=cde,i=!0),n<=CF?(n=$9,i=!0):n>=LF&&(n=V9,i=!0),i?[r,n]:e}t(G9,"clampPoint");function AK(e){return e.map(G9)}t(AK,"clampPoints");function SK(e,r,n){for(var i=0,s=e.length;i<s;++i){var o=e[i].slice();n.push({index:-1,polygon:r,ring:o});for(var a=0,l=o.length;a<l;++a){var u=o[a],f=u[0],h=u[1];if(f<=kF||f>=EF||h<=CF||h>=LF){o[a]=G9(u);for(var v=a+1;v<l;++v){var c=o[v],d=c[0],g=c[1];if(d>kF&&d<EF&&g>CF&&g<LF)break}if(v===a+1)continue;if(a){var p={index:-1,polygon:r,ring:o.slice(0,a+1)};p.ring[p.ring.length-1]=TK(h),n[n.length-1]=p}else n.pop();if(v>=l)break;n.push({index:-1,polygon:r,ring:o=o.slice(v-1)}),o[0]=TK(o[0][1]),a=-1,l=o.length}}}}t(SK,"extractFragments");function MK(e){var r,n=e.length,i={},s={},o,a,l,u,f;for(r=0;r<n;++r){if(o=e[r],a=o.ring[0],u=o.ring[o.ring.length-1],a[0]===u[0]&&a[1]===u[1]){o.polygon.push(o.ring),e[r]=null;continue}o.index=r,i[a]=s[u]=o}for(r=0;r<n;++r)if(o=e[r],o){if(a=o.ring[0],u=o.ring[o.ring.length-1],l=s[a],f=i[u],delete i[a],delete s[u],a[0]===u[0]&&a[1]===u[1]){o.polygon.push(o.ring);continue}l?(delete s[a],delete i[l.ring[0]],l.ring.pop(),e[l.index]=null,o={index:-1,polygon:l.polygon,ring:l.ring.concat(o.ring)},l===f?o.polygon.push(o.ring):(o.index=n++,e.push(i[o.ring[0]]=s[o.ring[o.ring.length-1]]=o))):f?(delete i[u],delete s[f.ring[f.ring.length-1]],o.ring.pop(),o={index:n++,polygon:f.polygon,ring:o.ring.concat(f.ring)},e[f.index]=null,e.push(i[o.ring[0]]=s[o.ring[o.ring.length-1]]=o)):(o.ring.push(o.ring[0]),o.polygon.push(o.ring))}}t(MK,"stitchFragments");function kK(e){var r={type:"Feature",geometry:j9(e.geometry)};return e.id!=null&&(r.id=e.id),e.bbox!=null&&(r.bbox=e.bbox),e.properties!=null&&(r.properties=e.properties),r}t(kK,"stitchFeature");function j9(e){if(e==null)return e;var r,n,i,s;switch(e.type){case"GeometryCollection":r={type:"GeometryCollection",geometries:e.geometries.map(j9)};break;case"Point":r={type:"Point",coordinates:G9(e.coordinates)};break;case"MultiPoint":case"LineString":r={type:e.type,coordinates:AK(e.coordinates)};break;case"MultiLineString":r={type:"MultiLineString",coordinates:e.coordinates.map(AK)};break;case"Polygon":{var o=[];SK(e.coordinates,o,n=[]),MK(n),r={type:"Polygon",coordinates:o};break}case"MultiPolygon":{n=[],i=-1,s=e.coordinates.length;for(var a=new Array(s);++i<s;)SK(e.coordinates[i],a[i]=[],n);MK(n),r={type:"MultiPolygon",coordinates:a.filter(q8e)};break}default:return e}return e.bbox!=null&&(r.bbox=e.bbox),r}t(j9,"stitchGeometry");function H8e(e){if(e==null)return e;switch(e.type){case"Feature":return kK(e);case"FeatureCollection":{var r={type:"FeatureCollection",features:e.features.map(kK)};return e.bbox!=null&&(r.bbox=e.bbox),r}default:return j9(e)}}t(H8e,"stitch");function Y9(e,r){var n=oi(r/2),i=wr(Mf*n);return[e*(.74482-.34588*i*i),1.70711*n]}t(Y9,"timesRaw");Y9.invert=function(e,r){var n=r/1.70711,i=wr(Mf*n);return[e/(.74482-.34588*i*i),2*bs(n)]};function $8e(){return yn(Y9).scale(146.153)}t($8e,"times");function hde(e,r,n){var i=A2(r,n),s=i(.5),o=hy([-s[0],-s[1]])(r),a=i.distance/2,l=-Dn(wr(o[1]*gi)/wr(a)),u=[-s[0],-s[1],-(o[0]>0?Ar-l:l)*Ei],f=yn(e(a)).rotate(u),h=hy(u),v=f.center;return delete f.rotate,f.center=function(c){return arguments.length?v(h(c)):h.invert(v())},f.clipAngle(90)}t(hde,"twoPoint");function vde(e){var r=Tr(e);function n(i,s){var o=$1(i,s);return o[0]*=r,o}return t(n,"forward"),n.invert=function(i,s){return $1.invert(i/r,s)},n}t(vde,"twoPointAzimuthalRaw");function V8e(){return dde([-158,21.5],[-77,39]).clipAngle(60).scale(400)}t(V8e,"twoPointAzimuthalUsa");function dde(e,r){return hde(vde,e,r)}t(dde,"twoPointAzimuthal");function pde(e){if(!(e*=2))return up;var r=-e/2,n=-r,i=e*e,s=oi(n),o=.5/wr(n);function a(l,u){var f=Fl(Tr(u)*Tr(l-r)),h=Fl(Tr(u)*Tr(l-n)),v=u<0?-1:1;return f*=f,h*=h,[(f-h)/(2*e),v*Ur(4*i*h-(i-f+h)*(i-f+h))/(2*e)]}return t(a,"forward"),a.invert=function(l,u){var f=u*u,h=Tr(Ur(f+(c=l+r)*c)),v=Tr(Ur(f+(c=l+n)*c)),c,d;return[Ci(d=h-v,c=(h+v)*s),(u<0?-1:1)*Fl(Ur(c*c+d*d)*o)]},a}t(pde,"twoPointEquidistantRaw");function G8e(){return gde([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}t(G8e,"twoPointEquidistantUsa");function gde(e,r){return hde(pde,e,r)}t(gde,"twoPointEquidistant");function W9(e,r){if(jr(r)<Da)return[e,0];var n=jr(r/Oa),i=Dn(n);if(jr(e)<Da||jr(jr(r)-Oa)<Da)return[0,fi(r)*Ar*oi(i/2)];var s=Tr(i),o=jr(Ar/e-e/Ar)/2,a=o*o,l=s/(n+s-1),u=l*(2/n-1),f=u*u,h=f+a,v=l-f,c=a+l;return[fi(e)*Ar*(o*v+Ur(a*v*v-h*(l*l-f)))/h,fi(r)*Ar*(u*c-o*Ur((a+1)*h-c*c))/h]}t(W9,"vanDerGrintenRaw");W9.invert=function(e,r){if(jr(r)<Da)return[e,0];if(jr(e)<Da)return[0,Oa*wr(2*bs(r/Ar))];var n=(e/=Ar)*e,i=(r/=Ar)*r,s=n+i,o=s*s,a=-jr(r)*(1+s),l=a-2*i+n,u=-2*a+1+2*i+o,f=i/u+(2*l*l*l/(u*u*u)-9*a*l/(u*u))/27,h=(a-l*l/(3*u))/u,v=2*Ur(-h/3),c=Fl(3*f/(h*v))/3;return[Ar*(s-1+Ur(1+2*(n-i)+o))/(2*e),fi(r)*Ar*(-v*Tr(c+Ar/3)-l/(3*u))]};function j8e(){return yn(W9).scale(79.4183)}t(j8e,"vanDerGrinten");function X9(e,r){if(jr(r)<Da)return[e,0];var n=jr(r/Oa),i=Dn(n);if(jr(e)<Da||jr(jr(r)-Oa)<Da)return[0,fi(r)*Ar*oi(i/2)];var s=Tr(i),o=jr(Ar/e-e/Ar)/2,a=o*o,l=s*(Ur(1+a)-o*s)/(1+a*n*n);return[fi(e)*Ar*l,fi(r)*Ar*Ur(1-l*(2*o+l))]}t(X9,"vanDerGrinten2Raw");X9.invert=function(e,r){if(!e)return[0,Oa*wr(2*bs(r/Ar))];var n=jr(e/Ar),i=(1-n*n-(r/=Ar)*r)/(2*n),s=i*i,o=Ur(s+1);return[fi(e)*Ar*(o-i),fi(r)*Oa*wr(2*Ci(Ur((1-2*i*n)*(i+o)-n),Ur(o+i+n)))]};function Y8e(){return yn(X9).scale(79.4183)}t(Y8e,"vanDerGrinten2");function Z9(e,r){if(jr(r)<Da)return[e,0];var n=r/Oa,i=Dn(n);if(jr(e)<Da||jr(jr(r)-Oa)<Da)return[0,Ar*oi(i/2)];var s=(Ar/e-e/Ar)/2,o=n/(1+Tr(i));return[Ar*(fi(e)*Ur(s*s+1-o*o)-s),Ar*o]}t(Z9,"vanDerGrinten3Raw");Z9.invert=function(e,r){if(!r)return[e,0];var n=r/Ar,i=(Ar*Ar*(1-n*n)-e*e)/(2*Ar*e);return[e?Ar*(fi(e)*Ur(i*i+1)-i):0,Oa*wr(2*bs(n))]};function W8e(){return yn(Z9).scale(79.4183)}t(W8e,"vanDerGrinten3");function K9(e,r){if(!r)return[e,0];var n=jr(r);if(!e||n===Oa)return[0,r];var i=n/Oa,s=i*i,o=(8*i-s*(s+2)-5)/(2*s*(i-1)),a=o*o,l=i*o,u=s+a+2*l,f=i+3*o,h=e/Oa,v=h+1/h,c=fi(jr(e)-Oa)*Ur(v*v-4),d=c*c,g=u*(s+a*d-1)+(1-s)*(s*(f*f+4*a)+12*l*a+4*a*a),p=(c*(u+a-1)+2*Ur(g))/(4*u+d);return[fi(e)*Oa*p,fi(r)*Oa*Ur(1+c*jr(p)-p*p)]}t(K9,"vanDerGrinten4Raw");K9.invert=function(e,r){var n;if(!e||!r)return[e,r];r/=Ar;var i=fi(e)*e/Oa,s=(i*i-1+4*r*r)/jr(i),o=s*s,a=2*r,l=50;do{var u=a*a,f=(8*a-u*(u+2)-5)/(2*u*(a-1)),h=(3*a-u*a-10)/(2*u*a),v=f*f,c=a*f,d=a+f,g=d*d,p=a+3*f,b=g*(u+v*o-1)+(1-u)*(u*(p*p+4*v)+v*(12*c+4*v)),m=-2*d*(4*c*v+(1-4*u+3*u*u)*(1+h)+v*(-6+14*u-o+(-8+8*u-2*o)*h)+c*(-8+12*u+(-10+10*u-o)*h)),y=Ur(b),T=s*(g+v-1)+2*y-i*(4*g+o),_=s*(2*f*h+2*d*(1+h))+m/y-8*d*(s*(-1+v+g)+2*y)*(1+h)/(o+4*g);a-=n=T/_}while(n>Da&&--l>0);return[fi(e)*(Ur(s*s+4)+s)*Ar/4,Oa*a]};function X8e(){return yn(K9).scale(127.16)}t(X8e,"vanDerGrinten4");function Z8e(e,r,n,i,s){function o(a,l){var u=n*wr(i*l),f=Ur(1-u*u),h=Ur(2/(1+f*Tr(a*=s)));return[e*f*h*wr(a),r*u*h]}return t(o,"forward"),o.invert=function(a,l){var u=a/e,f=l/r,h=Ur(u*u+f*f),v=2*Dn(h/2);return[Ci(a*oi(v),e*h)/s,h&&Dn(l*wr(v)/(r*n*h))/i]},o}t(Z8e,"wagnerFormula");function yde(e,r,n,i){var s=Ar/3;e=ld(e,Da),r=ld(r,Da),e=Sf(e,Oa),r=Sf(r,Ar-Da),n=ld(n,0),n=Sf(n,100-Da),i=ld(i,Da);var o=n/100+1,a=i/100,l=Fl(o*Tr(s))/s,u=wr(e)/wr(l*Oa),f=r/Ar,h=Ur(a*wr(e/2)/wr(r/2)),v=h/Ur(f*u*l),c=1/(h*Ur(f*u*l));return Z8e(v,c,u,l,f)}t(yde,"wagnerRaw");function mde(){var e=65*gi,r=60*gi,n=20,i=200,s=xl(yde),o=s(e,r,n,i);return o.poleline=function(a){return arguments.length?s(e=+a*gi,r,n,i):e*Ei},o.parallels=function(a){return arguments.length?s(e,r=+a*gi,n,i):r*Ei},o.inflation=function(a){return arguments.length?s(e,r,n=+a,i):n},o.ratio=function(a){return arguments.length?s(e,r,n,i=+a):i},o.scale(163.775)}t(mde,"wagner");function K8e(){return mde().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}t(K8e,"wagner7");var xde=4*Ar+3*Ur(3),EK=2*Ur(2*Ar*Ur(3)/xde),bde=l9(EK*Ur(3)/Ar,EK,xde/6);function J8e(){return yn(bde).scale(176.84)}t(J8e,"wagner4");function J9(e,r){return[e*Ur(1-3*r*r/(Ar*Ar)),r]}t(J9,"wagner6Raw");J9.invert=function(e,r){return[e/Ur(1-3*r*r/(Ar*Ar)),r]};function Q8e(){return yn(J9).scale(152.63)}t(Q8e,"wagner6");function Q9(e,r){var n=Tr(r),i=Tr(e)*n,s=1-i,o=Tr(e=Ci(wr(e)*n,-wr(r))),a=wr(e);return n=Ur(1-i*i),[a*n-o*s,-o*n-a*s]}t(Q9,"wiechelRaw");Q9.invert=function(e,r){var n=(e*e+r*r)/-2,i=Ur(-n*(2+n)),s=r*n+e*i,o=e*n-r*i,a=Ur(o*o+s*s);return[Ci(i*s,a*(1+n)),a?-Dn(i*o/a):0]};function e7e(){return yn(Q9).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}t(e7e,"wiechel");function eB(e,r){var n=s3(e,r);return[(n[0]+e/Oa)/2,(n[1]+r)/2]}t(eB,"winkel3Raw");eB.invert=function(e,r){var n=e,i=r,s=25;do{var o=Tr(i),a=wr(i),l=wr(2*i),u=a*a,f=o*o,h=wr(n),v=Tr(n/2),c=wr(n/2),d=c*c,g=1-f*v*v,p=g?Fl(o*v)*Ur(b=1/g):b=0,b,m=.5*(2*p*o*c+n/Oa)-e,y=.5*(p*a+i)-r,T=.5*b*(f*d+p*o*v*u)+.5/Oa,_=b*(h*l/4-p*a*c),M=.125*b*(l*c-p*a*f*h),w=.5*b*(u*v+p*d*o)+.5,x=_*M-w*T,A=(y*_-m*w)/x,S=(m*M-y*T)/x;n-=A,i-=S}while((jr(A)>Da||jr(S)>Da)&&--s>0);return[n,i]};function t7e(){return yn(eB).scale(158.837)}t(t7e,"winkel3");const r7e=Object.freeze(Object.defineProperty({__proto__:null,geoAiry:wze,geoAiryRaw:Cve,geoAitoff:Tze,geoAitoffRaw:s3,geoArmadillo:Aze,geoArmadilloRaw:Lve,geoAugust:Sze,geoAugustRaw:l3,geoBaker:kze,geoBakerRaw:o9,geoBerghaus:Eze,geoBerghausRaw:Rve,geoBertin1953:Lze,geoBertin1953Raw:Dve,geoBoggs:Pze,geoBoggsRaw:f3,geoBonne:Ize,geoBonneRaw:Fve,geoBottomley:zze,geoBottomleyRaw:Bve,geoBromley:Fze,geoBromleyRaw:Ove,geoChamberlin:qve,geoChamberlinRaw:Nve,geoChamberlinAfrica:Oze,geoCollignon:Nze,geoCollignonRaw:sv,geoCraig:qze,geoCraigRaw:Uve,geoCraster:Uze,geoCrasterRaw:u9,geoCylindricalEqualArea:Hze,geoCylindricalEqualAreaRaw:f9,geoCylindricalStereographic:$ze,geoCylindricalStereographicRaw:Hve,geoEckert1:Vze,geoEckert1Raw:c9,geoEckert2:Gze,geoEckert2Raw:h9,geoEckert3:jze,geoEckert3Raw:v9,geoEckert4:Yze,geoEckert4Raw:d9,geoEckert5:Wze,geoEckert5Raw:p9,geoEckert6:Xze,geoEckert6Raw:g9,geoEisenlohr:Zze,geoEisenlohrRaw:y9,geoFahey:Kze,geoFaheyRaw:m9,geoFoucaut:Jze,geoFoucautRaw:x9,geoFoucautSinusoidal:Qze,geoFoucautSinusoidalRaw:$ve,geoGilbert:eFe,geoGingery:tFe,geoGingeryRaw:Vve,geoGinzburg4:rFe,geoGinzburg4Raw:Gve,geoGinzburg5:aFe,geoGinzburg5Raw:jve,geoGinzburg6:nFe,geoGinzburg6Raw:Yve,geoGinzburg8:iFe,geoGinzburg8Raw:b9,geoGinzburg9:oFe,geoGinzburg9Raw:Wve,geoGringorten:uFe,geoGringortenRaw:h3,geoGuyou:dFe,geoGuyouRaw:v3,geoHammer:Cze,geoHammerRaw:u3,geoHammerRetroazimuthal:pFe,geoHammerRetroazimuthalRaw:Zve,geoHealpix:_Fe,geoHealpixRaw:Kve,geoHill:wFe,geoHillRaw:Jve,geoHomolosine:AFe,geoHomolosineRaw:g3,geoHufnagel:SFe,geoHufnagelRaw:Qve,geoHyperelliptical:kFe,geoHyperellipticalRaw:ede,geoInterrupt:_p,geoInterruptedBoggs:RFe,geoInterruptedHomolosine:DFe,geoInterruptedMollweide:zFe,geoInterruptedMollweideHemispheres:BFe,geoInterruptedSinuMollweide:NFe,geoInterruptedSinusoidal:UFe,geoKavrayskiy7:HFe,geoKavrayskiy7Raw:w9,geoLagrange:$Fe,geoLagrangeRaw:tde,geoLarrivee:VFe,geoLarriveeRaw:T9,geoLaskowski:GFe,geoLaskowskiRaw:A9,geoLittrow:jFe,geoLittrowRaw:S9,geoLoximuthal:YFe,geoLoximuthalRaw:rde,geoMiller:WFe,geoMillerRaw:M9,geoModifiedStereographic:Vy,geoModifiedStereographicRaw:ade,geoModifiedStereographicAlaska:e8e,geoModifiedStereographicGs48:t8e,geoModifiedStereographicGs50:r8e,geoModifiedStereographicMiller:a8e,geoModifiedStereographicLee:n8e,geoMollweide:Rze,geoMollweideRaw:bp,geoMtFlatPolarParabolic:i8e,geoMtFlatPolarParabolicRaw:k9,geoMtFlatPolarQuartic:o8e,geoMtFlatPolarQuarticRaw:E9,geoMtFlatPolarSinusoidal:s8e,geoMtFlatPolarSinusoidalRaw:C9,geoNaturalEarth:Mve,geoNaturalEarthRaw:o3,geoNaturalEarth2:l8e,geoNaturalEarth2Raw:L9,geoNellHammer:u8e,geoNellHammerRaw:R9,geoInterruptedQuarticAuthalic:c8e,geoNicolosi:h8e,geoNicolosiRaw:P9,geoPatterson:y8e,geoPattersonRaw:B9,geoPolyconic:m8e,geoPolyconicRaw:O9,geoPolyhedral:y3,geoPolyhedralButterfly:S8e,geoPolyhedralCollignon:M8e,geoPolyhedralWaterman:k8e,geoProject:R8e,geoGringortenQuincuncial:I8e,geoPeirceQuincuncial:_K,geoPierceQuincuncial:_K,geoQuantize:z8e,geoQuincuncial:q9,geoRectangularPolyconic:F8e,geoRectangularPolyconicRaw:ude,geoRobinson:B8e,geoRobinsonRaw:U9,geoSatellite:N8e,geoSatelliteRaw:fde,geoSinuMollweide:TFe,geoSinuMollweideRaw:p3,geoSinusoidal:Dze,geoSinusoidalRaw:yd,geoStitch:H8e,geoTimes:$8e,geoTimesRaw:Y9,geoTwoPointAzimuthal:dde,geoTwoPointAzimuthalRaw:vde,geoTwoPointAzimuthalUsa:V8e,geoTwoPointEquidistant:gde,geoTwoPointEquidistantRaw:pde,geoTwoPointEquidistantUsa:G8e,geoVanDerGrinten:j8e,geoVanDerGrintenRaw:W9,geoVanDerGrinten2:Y8e,geoVanDerGrinten2Raw:X9,geoVanDerGrinten3:W8e,geoVanDerGrinten3Raw:Z9,geoVanDerGrinten4:X8e,geoVanDerGrinten4Raw:K9,geoWagner:mde,geoWagner7:K8e,geoWagnerRaw:yde,geoWagner4:J8e,geoWagner4Raw:bde,geoWagner6:Q8e,geoWagner6Raw:J9,geoWiechel:e7e,geoWiechelRaw:Q9,geoWinkel3:t7e,geoWinkel3Raw:eB},Symbol.toStringTag,{value:"Module"})),a7e=Hc(r7e);var m4,CK;function n7e(){if(CK)return m4;CK=1;var e=Va.exports,r=Nt.exports,n=Na,i=Math.PI/180,s=180/Math.PI,o={cursor:"pointer"},a={cursor:"auto"};function l(k,L){var P=k.projection,D;return L._isScoped?D=h:L._isClipped?D=c:D=v,D(k,P)}t(l,"createGeoZoom"),m4=l;function u(k,L){return e.behavior.zoom().translate(L.translate()).scale(L.scale())}t(u,"initZoom");function f(k,L,P){var D=k.id,B=k.graphDiv,z=B.layout,R=z[D],F=B._fullLayout,O=F[D],q={},H={};function j(X,G){q[D+"."+X]=r.nestedProperty(R,X).get(),n.call("_storeDirectGUIEdit",z,F._preGUI,q);var $=r.nestedProperty(O,X);$.get()!==G&&($.set(G),r.nestedProperty(R,X).set(G),H[D+"."+X]=G)}t(j,"set"),P(j),j("projection.scale",L.scale()/k.fitScale),j("fitbounds",!1),B.emit("plotly_relayout",H)}t(f,"sync");function h(k,L){var P=u(k,L);function D(){e.select(this).style(o)}t(D,"handleZoomstart");function B(){L.scale(e.event.scale).translate(e.event.translate),k.render(!0);var F=L.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":L.scale()/k.fitScale,"geo.center.lon":F[0],"geo.center.lat":F[1]})}t(B,"handleZoom");function z(F){var O=L.invert(k.midPt);F("center.lon",O[0]),F("center.lat",O[1])}t(z,"syncCb");function R(){e.select(this).style(a),f(k,L,z)}return t(R,"handleZoomend"),P.on("zoomstart",D).on("zoom",B).on("zoomend",R),P}t(h,"zoomScoped");function v(k,L){var P=u(k,L),D=2,B,z,R,F,O,q,H,j,X;function G(W){return L.invert(W)}t(G,"position");function $(W){var ne=G(W);if(!ne)return!0;var he=L(ne);return Math.abs(he[0]-W[0])>D||Math.abs(he[1]-W[1])>D}t($,"outside");function te(){e.select(this).style(o),B=e.mouse(this),z=L.rotate(),R=L.translate(),F=z,O=G(B)}t(te,"handleZoomstart");function ee(){if(q=e.mouse(this),$(B)){P.scale(L.scale()),P.translate(L.translate());return}L.scale(e.event.scale),L.translate([R[0],e.event.translate[1]]),O?G(q)&&(j=G(q),H=[F[0]+(j[0]-O[0]),z[1],z[2]],L.rotate(H),F=H):(B=q,O=G(B)),X=!0,k.render(!0);var W=L.rotate(),ne=L.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":L.scale()/k.fitScale,"geo.center.lon":ne[0],"geo.center.lat":ne[1],"geo.projection.rotation.lon":-W[0]})}t(ee,"handleZoom");function ie(){e.select(this).style(a),X&&f(k,L,se)}t(ie,"handleZoomend");function se(W){var ne=L.rotate(),he=L.invert(k.midPt);W("projection.rotation.lon",-ne[0]),W("center.lon",he[0]),W("center.lat",he[1])}return t(se,"syncCb"),P.on("zoomstart",te).on("zoom",ee).on("zoomend",ie),P}t(v,"zoomNonClipped");function c(k,L){L.rotate(),L.scale();var P=u(k,L),D=S(P,"zoomstart","zoom","zoomend"),B=0,z=P.on,R;P.on("zoomstart",function(){e.select(this).style(o);var j=e.mouse(this),X=L.rotate(),G=X,$=L.translate(),te=g(X);R=d(L,j),z.call(P,"zoom",function(){var ee=e.mouse(this);if(L.scale(e.event.scale),!R)j=ee,R=d(L,j);else if(d(L,ee)){L.rotate(X).translate($);var ie=d(L,ee),se=b(R,ie),W=M(p(te,se)),ne=m(W,R,G);(!isFinite(ne[0])||!isFinite(ne[1])||!isFinite(ne[2]))&&(ne=G),L.rotate(ne),G=ne}O(D.of(this,arguments))}),F(D.of(this,arguments))}).on("zoomend",function(){e.select(this).style(a),z.call(P,"zoom",null),q(D.of(this,arguments)),f(k,L,H)}).on("zoom.redraw",function(){k.render(!0);var j=L.rotate();k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":L.scale()/k.fitScale,"geo.projection.rotation.lon":-j[0],"geo.projection.rotation.lat":-j[1]})});function F(j){B++||j({type:"zoomstart"})}t(F,"zoomstarted");function O(j){j({type:"zoom"})}t(O,"zoomed");function q(j){--B||j({type:"zoomend"})}t(q,"zoomended");function H(j){var X=L.rotate();j("projection.rotation.lon",-X[0]),j("projection.rotation.lat",-X[1])}return t(H,"syncCb"),e.rebind(P,D,"on")}t(c,"zoomClipped");function d(k,L){var P=k.invert(L);return P&&isFinite(P[0])&&isFinite(P[1])&&w(P)}t(d,"position");function g(k){var L=.5*k[0]*i,P=.5*k[1]*i,D=.5*k[2]*i,B=Math.sin(L),z=Math.cos(L),R=Math.sin(P),F=Math.cos(P),O=Math.sin(D),q=Math.cos(D);return[z*F*q+B*R*O,B*F*q-z*R*O,z*R*q+B*F*O,z*F*O-B*R*q]}t(g,"quaternionFromEuler");function p(k,L){var P=k[0],D=k[1],B=k[2],z=k[3],R=L[0],F=L[1],O=L[2],q=L[3];return[P*R-D*F-B*O-z*q,P*F+D*R+B*q-z*O,P*O-D*q+B*R+z*F,P*q+D*O-B*F+z*R]}t(p,"multiply");function b(k,L){if(!(!k||!L)){var P=A(k,L),D=Math.sqrt(x(P,P)),B=.5*Math.acos(Math.max(-1,Math.min(1,x(k,L)))),z=Math.sin(B)/D;return D&&[Math.cos(B),P[2]*z,-P[1]*z,P[0]*z]}}t(b,"rotateBetween");function m(k,L,P){var D=_(L,2,k[0]);D=_(D,1,k[1]),D=_(D,0,k[2]-P[2]);var B=L[0],z=L[1],R=L[2],F=D[0],O=D[1],q=D[2],H=Math.atan2(z,B)*s,j=Math.sqrt(B*B+z*z),X,G;Math.abs(O)>j?(G=(O>0?90:-90)-H,X=0):(G=Math.asin(O/j)*s-H,X=Math.sqrt(j*j-O*O));var $=180-G-2*H,te=(Math.atan2(q,F)-Math.atan2(R,X))*s,ee=(Math.atan2(q,F)-Math.atan2(R,-X))*s,ie=y(P[0],P[1],G,te),se=y(P[0],P[1],$,ee);return ie<=se?[G,te,P[2]]:[$,ee,P[2]]}t(m,"unRoll");function y(k,L,P,D){var B=T(P-k),z=T(D-L);return Math.sqrt(B*B+z*z)}t(y,"angleDistance");function T(k){return(k%360+540)%360-180}t(T,"angleMod");function _(k,L,P){var D=P*i,B=k.slice(),z=L===0?1:0,R=L===2?1:2,F=Math.cos(D),O=Math.sin(D);return B[z]=k[z]*F-k[R]*O,B[R]=k[R]*F+k[z]*O,B}t(_,"rotateCartesian");function M(k){return[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*s,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*s,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*s]}t(M,"eulerFromQuaternion");function w(k){var L=k[0]*i,P=k[1]*i,D=Math.cos(P);return[D*Math.cos(L),D*Math.sin(L),Math.sin(P)]}t(w,"cartesian");function x(k,L){for(var P=0,D=0,B=k.length;D<B;++D)P+=k[D]*L[D];return P}t(x,"dot");function A(k,L){return[k[1]*L[2]-k[2]*L[1],k[2]*L[0]-k[0]*L[2],k[0]*L[1]-k[1]*L[0]]}t(A,"cross");function S(k){for(var L=0,P=arguments.length,D=[];++L<P;)D.push(arguments[L]);var B=e.dispatch.apply(null,D);return B.of=function(z,R){return function(F){var O;try{O=F.sourceEvent=e.event,F.target=k,e.event=F,B[F.type].apply(z,R)}finally{e.event=O}}},B}return t(S,"d3eventDispatch"),m4}t(n7e,"requireZoom");var x4,LK;function i7e(){if(LK)return x4;LK=1;var e=Va.exports,r=yze,n=r.geoPath,i=r.geoDistance,s=a7e,o=Na,a=Nt.exports,l=a.strTranslate,u=$a.exports,f=bn.exports,h=Ko,v=so.exports,c=nn(),d=Lh().getAutoRange,g=xu.exports,p=Qs.prepSelect,b=Qs.clearOutline,m=Qs.selectOnClick,y=n7e(),T=e3(),_=wx(),M=$7(),w=Fhe.feature;function x(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}t(x,"Geo");var A=x.prototype;x4=t(function(D){return new x(D)},"createGeo"),A.plot=function(P,D,B,z){var R=this;if(z)return R.update(P,D,!0);R._geoCalcData=P,R._fullLayout=D;var F=D[this.id],O=[],q=!1;for(var H in T.layerNameToAdjective)if(H!=="frame"&&F["show"+H]){q=!0;break}for(var j=!1,X=0;X<P.length;X++){var G=P[0][0].trace;G._geo=R,G.locationmode&&(q=!0);var $=G.marker;if($){var te=$.angle,ee=$.angleref;(te||ee==="north"||ee==="previous")&&(j=!0)}}if(this._hasMarkerAngles=j,q){var ie=M.getTopojsonName(F);(R.topojson===null||ie!==R.topojsonName)&&(R.topojsonName=ie,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&O.push(R.fetchTopojson()))}O=O.concat(_.fetchTraceGeoData(P)),B.push(new Promise(function(se,W){Promise.all(O).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(P,D),se()}).catch(W)}))},A.fetchTopojson=function(){var P=this,D=M.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(B,z){e.json(D,function(R,F){if(R)return R.status===404?z(new Error(["plotly.js could not find topojson file at",D+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):z(new Error(["unexpected error while fetching topojson file at",D].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=F,B()})})},A.update=function(P,D,B){var z=D[this.id];this.hasChoropleth=!1;for(var R=0;R<P.length;R++){var F=P[R],O=F[0].trace;O.type==="choropleth"&&(this.hasChoropleth=!0),O.visible===!0&&O._length>0&&O._module.calcGeoJSON(F,D)}if(!B){var q=this.updateProjection(P,D);if(q)return;(!this.viewInitial||this.scope!==z.scope)&&this.saveViewInitial(z)}this.scope=z.scope,this.updateBaseLayers(D,z),this.updateDims(D,z),this.updateFx(D,z),v.generalUpdatePerTraceModule(this.graphDiv,this,P,z);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var j=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=j.selectAll("path"),this._render()},A.updateProjection=function(P,D){var B=this.graphDiv,z=D[this.id],R=D._size,F=z.domain,O=z.projection,q=z.lonaxis,H=z.lataxis,j=q._ax,X=H._ax,G=this.projection=S(z),$=[[R.l+R.w*F.x[0],R.t+R.h*(1-F.y[1])],[R.l+R.w*F.x[1],R.t+R.h*(1-F.y[0])]],te=z.center||{},ee=O.rotation||{},ie=q.range||[],se=H.range||[];if(z.fitbounds){j._length=$[1][0]-$[0][0],X._length=$[1][1]-$[0][1],j.range=d(B,j),X.range=d(B,X);var W=(j.range[0]+j.range[1])/2,ne=(X.range[0]+X.range[1])/2;if(z._isScoped)te={lon:W,lat:ne};else if(z._isClipped){te={lon:W,lat:ne},ee={lon:W,lat:ne,roll:ee.roll};var he=O.type,re=T.lonaxisSpan[he]/2||180,ae=T.lataxisSpan[he]/2||90;ie=[W-re,W+re],se=[ne-ae,ne+ae]}else te={lon:W,lat:ne},ee={lon:W,lat:ee.lat,roll:ee.roll}}G.center([te.lon-ee.lon,te.lat-ee.lat]).rotate([-ee.lon,-ee.lat,ee.roll]).parallels(O.parallels);var fe=L(ie,se);G.fitExtent($,fe);var ce=this.bounds=G.getBounds(fe),xe=this.fitScale=G.scale(),Te=G.translate();if(z.fitbounds){var me=G.getBounds(L(j.range,X.range)),pe=Math.min((ce[1][0]-ce[0][0])/(me[1][0]-me[0][0]),(ce[1][1]-ce[0][1])/(me[1][1]-me[0][1]));isFinite(pe)?G.scale(pe*xe):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else G.scale(O.scale*xe);var oe=this.midPt=[(ce[0][0]+ce[1][0])/2,(ce[0][1]+ce[1][1])/2];if(G.translate([Te[0]+(oe[0]-Te[0]),Te[1]+(oe[1]-Te[1])]).clipExtent(ce),z._isAlbersUsa){var de=G([te.lon,te.lat]),ye=G.translate();G.translate([ye[0]-(de[0]-ye[0]),ye[1]-(de[1]-ye[1])])}},A.updateBaseLayers=function(P,D){var B=this,z=B.topojson,R=B.layers,F=B.basePaths;function O($){return $==="lonaxis"||$==="lataxis"}t(O,"isAxisLayer");function q($){return Boolean(T.lineLayers[$])}t(q,"isLineLayer");function H($){return Boolean(T.fillLayers[$])}t(H,"isFillLayer");var j=this.hasChoropleth?T.layersForChoropleth:T.layers,X=j.filter(function($){return q($)||H($)?D["show"+$]:O($)?D[$].showgrid:!0}),G=B.framework.selectAll(".layer").data(X,String);G.exit().each(function($){delete R[$],delete F[$],e.select(this).remove()}),G.enter().append("g").attr("class",function($){return"layer "+$}).each(function($){var te=R[$]=e.select(this);$==="bg"?B.bgRect=te.append("rect").style("pointer-events","all"):O($)?F[$]=te.append("path").style("fill","none"):$==="backplot"?te.append("g").classed("choroplethlayer",!0):$==="frontplot"?te.append("g").classed("scatterlayer",!0):q($)?F[$]=te.append("path").style("fill","none").style("stroke-miterlimit",2):H($)&&(F[$]=te.append("path").style("stroke","none"))}),G.order(),G.each(function($){var te=F[$],ee=T.layerNameToAdjective[$];$==="frame"?te.datum(T.sphereSVG):q($)||H($)?te.datum(w(z,z.objects[$])):O($)&&te.datum(k($,D,P)).call(u.stroke,D[$].gridcolor).call(f.dashLine,D[$].griddash,D[$].gridwidth),q($)?te.call(u.stroke,D[ee+"color"]).call(f.dashLine,"",D[ee+"width"]):H($)&&te.call(u.fill,D[ee+"color"])})},A.updateDims=function(P,D){var B=this.bounds,z=(D.framewidth||0)/2,R=B[0][0]-z,F=B[0][1]-z,O=B[1][0]-R+z,q=B[1][1]-F+z;f.setRect(this.clipRect,R,F,O,q),this.bgRect.call(f.setRect,R,F,O,q).call(u.fill,D.bgcolor),this.xaxis._offset=R,this.xaxis._length=O,this.yaxis._offset=F,this.yaxis._length=q},A.updateFx=function(P,D){var B=this,z=B.graphDiv,R=B.bgRect,F=P.dragmode,O=P.clickmode;if(B.isStatic)return;function q(){var G=B.viewInitial,$={};for(var te in G)$[B.id+"."+te]=G[te];o.call("_guiRelayout",z,$),z.emit("plotly_doubleclick",null)}t(q,"zoomReset");function H(G){return B.projection.invert([G[0]+B.xaxis._offset,G[1]+B.yaxis._offset])}t(H,"invert");var j=t(function(G,$){if($.isRect){var te=G.range={};te[B.id]=[H([$.xmin,$.ymin]),H([$.xmax,$.ymax])]}else{var ee=G.lassoPoints={};ee[B.id]=$.map(H)}},"fillRangeItems"),X={element:B.bgRect.node(),gd:z,plotinfo:{id:B.id,xaxis:B.xaxis,yaxis:B.yaxis,fillRangeItems:j},xaxes:[B.xaxis],yaxes:[B.yaxis],subplot:B.id,clickFn:function(G){G===2&&b(z)}};F==="pan"?(R.node().onmousedown=null,R.call(y(B,D)),R.on("dblclick.zoom",q),z._context._scrollZoom.geo||R.on("wheel.zoom",null)):(F==="select"||F==="lasso")&&(R.on(".zoom",null),X.prepFn=function(G,$,te){p(G,$,te,X,F)},g.init(X)),R.on("mousemove",function(){var G=B.projection.invert(a.getPositionFromD3Event());if(!G)return g.unhover(z,e.event);B.xaxis.p2c=function(){return G[0]},B.yaxis.p2c=function(){return G[1]},h.hover(z,e.event,B.id)}),R.on("mouseout",function(){z._dragging||g.unhover(z,e.event)}),R.on("click",function(){F!=="select"&&F!=="lasso"&&(O.indexOf("select")>-1&&m(e.event,z,[B.xaxis],[B.yaxis],B.id,X),O.indexOf("event")>-1&&h.click(z,e.event))})},A.makeFramework=function(){var P=this,D=P.graphDiv,B=D._fullLayout,z="clip"+B._uid+P.id;P.clipDef=B._clips.append("clipPath").attr("id",z),P.clipRect=P.clipDef.append("rect"),P.framework=e.select(P.container).append("g").attr("class","geo "+P.id).call(f.setClipUrl,z,D),P.project=function(R){var F=P.projection(R);return F?[F[0]-P.xaxis._offset,F[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(R){return P.project(R)[0]}},P.yaxis={_id:"y",c2p:function(R){return P.project(R)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(P.mockAxis,B)},A.saveViewInitial=function(P){var D=P.center||{},B=P.projection,z=B.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":B.scale};var R;P._isScoped?R={"center.lon":D.lon,"center.lat":D.lat}:P._isClipped?R={"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:R={"center.lon":D.lon,"center.lat":D.lat,"projection.rotation.lon":z.lon},a.extendFlat(this.viewInitial,R)},A.render=function(P){this._hasMarkerAngles&&P?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},A._render=function(){var P=this.projection,D=P.getPath(),B;function z(F){var O=P(F.lonlat);return O?l(O[0],O[1]):null}t(z,"translatePoints");function R(F){return P.isLonLatOverEdges(F.lonlat)?"none":null}t(R,"hideShowPoints");for(B in this.basePaths)this.basePaths[B].attr("d",D);for(B in this.dataPaths)this.dataPaths[B].attr("d",function(F){return D(F.geojson)});for(B in this.dataPoints)this.dataPoints[B].attr("display",R).attr("transform",z)};function S(P){var D=P.projection,B=D.type,z=T.projNames[B];z="geo"+a.titleCase(z);for(var R=r[z]||s[z],F=R(),O=P._isSatellite?Math.acos(1/D.distance)*180/Math.PI:P._isClipped?T.lonaxisSpan[B]/2:null,q=["center","rotate","parallels","clipExtent"],H=t(function(G){return G?F:[]},"dummyFn"),j=0;j<q.length;j++){var X=q[j];typeof F[X]!="function"&&(F[X]=H)}return F.isLonLatOverEdges=function(G){if(F(G)===null)return!0;if(O){var $=F.rotate(),te=i(G,[-$[0],-$[1]]),ee=O*Math.PI/180;return te>ee}else return!1},F.getPath=function(){return n().projection(F)},F.getBounds=function(G){return F.getPath().bounds(G)},F.precision(T.precision),P._isSatellite&&F.tilt(D.tilt).distance(D.distance),O&&F.clipAngle(O-T.clipPad),F}t(S,"getProjection");function k(P,D,B){var z=1e-6,R=2.5,F=D[P],O=T.scopeDefaults[D.scope],q,H,j;P==="lonaxis"?(q=O.lonaxisRange,H=O.lataxisRange,j=t(function(ne,he){return[ne,he]},"coordFn")):P==="lataxis"&&(q=O.lataxisRange,H=O.lonaxisRange,j=t(function(ne,he){return[he,ne]},"coordFn"));var X={type:"linear",range:[q[0],q[1]-z],tick0:F.tick0,dtick:F.dtick};c.setConvert(X,B);var G=c.calcTicks(X);!D.isScoped&&P==="lonaxis"&&G.pop();for(var $=G.length,te=new Array($),ee=0;ee<$;ee++)for(var ie=G[ee].x,se=te[ee]=[],W=H[0];W<H[1]+R;W+=R)se.push(j(ie,W));return{type:"MultiLineString",coordinates:te}}t(k,"makeGraticule");function L(P,D){var B=T.clipPad,z=P[0]+B,R=P[1]-B,F=D[0]+B,O=D[1]-B;z>0&&R<0&&(R+=360);var q=(R-z)/4;return{type:"Polygon",coordinates:[[[z,F],[z,O],[z+q,O],[z+2*q,O],[z+3*q,O],[R,O],[R,F],[R-q,F],[R-2*q,F],[R-3*q,F],[z,F]]]}}return t(L,"makeRangeBox"),x4}t(i7e,"requireGeo$1");var b4={exports:{}},RK;function _de(){if(RK)return b4.exports;RK=1;var e=Fo,r=vo.attributes,n=yu.dash,i=e3(),s=_o.overrideAll,o=Ay,a={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}],description:["Sets the range of this axis (in degrees),","sets the map's clipped coordinates."].join(" ")},showgrid:{valType:"boolean",dflt:!1,description:"Sets whether or not graticule are shown on the map."},tick0:{valType:"number",dflt:0,description:["Sets the graticule's starting tick longitude/latitude."].join(" ")},dtick:{valType:"number",description:["Sets the graticule's longitude/latitude tick step."].join(" ")},gridcolor:{valType:"color",dflt:e.lightLine,description:["Sets the graticule's stroke color."].join(" ")},gridwidth:{valType:"number",min:0,dflt:1,description:["Sets the graticule's stroke width (in px)."].join(" ")},griddash:n},l=b4.exports=s({domain:r({name:"geo"},{description:["Note that geo subplots are constrained by domain.","In general, when `projection.scale` is set to 1.","a map will fit either its x or y domain, but not both."].join(" ")}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot",description:["Determines if this subplot's view settings are auto-computed to fit trace data.","On scoped maps, setting `fitbounds` leads to `center.lon` and `center.lat` getting auto-filled.","On maps with a non-clipped projection, setting `fitbounds` leads to `center.lon`, `center.lat`,","and `projection.rotation.lon` getting auto-filled.","On maps with a clipped projection, setting `fitbounds` leads to `center.lon`, `center.lat`,","`projection.rotation.lon`, `projection.rotation.lat`, `lonaxis.range` and `lonaxis.range`","getting auto-filled.","If *locations*, only the trace's visible locations are considered in the `fitbounds` computations.","If *geojson*, the entire trace input `geojson` (if provided) is considered in the `fitbounds` computations,","Defaults to *false*."].join(" ")},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0,description:["Sets the resolution of the base layers.","The values have units of km/mm","e.g. 110 corresponds to a scale ratio of 1:110,000,000."].join(" ")},scope:{valType:"enumerated",values:o(i.scopeDefaults),dflt:"world",description:"Set the scope of the map."},projection:{type:{valType:"enumerated",values:o(i.projNames),description:"Sets the projection type."},rotation:{lon:{valType:"number",description:["Rotates the map along parallels","(in degrees East).","Defaults to the center of the `lonaxis.range` values."].join(" ")},lat:{valType:"number",description:["Rotates the map along meridians","(in degrees North)."].join(" ")},roll:{valType:"number",description:["Roll the map (in degrees)","For example, a roll of *180* makes the map appear upside down."].join(" ")}},tilt:{valType:"number",dflt:0,description:["For satellite projection type only.","Sets the tilt angle of perspective projection."].join(" ")},distance:{valType:"number",min:1.001,dflt:2,description:["For satellite projection type only.","Sets the distance from the center of the sphere to the point of view","as a proportion of the sphere\u2019s radius."].join(" ")},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}],description:["For conic projection types only.","Sets the parallels (tangent, secant)","where the cone intersects the sphere."].join(" ")},scale:{valType:"number",min:0,dflt:1,description:["Zooms in or out on the map view.","A scale of *1* corresponds to the largest zoom level","that fits the map's lon and lat ranges. "].join(" ")}},center:{lon:{valType:"number",description:["Sets the longitude of the map's center.","By default, the map's longitude center lies at the middle of the longitude range","for scoped projection and above `projection.rotation.lon` otherwise."].join(" ")},lat:{valType:"number",description:["Sets the latitude of the map's center.","For all projection types, the map's latitude center lies","at the middle of the latitude range by default."].join(" ")}},visible:{valType:"boolean",dflt:!0,description:"Sets the default visibility of the base layers."},showcoastlines:{valType:"boolean",description:"Sets whether or not the coastlines are drawn."},coastlinecolor:{valType:"color",dflt:e.defaultLine,description:"Sets the coastline color."},coastlinewidth:{valType:"number",min:0,dflt:1,description:"Sets the coastline stroke width (in px)."},showland:{valType:"boolean",dflt:!1,description:"Sets whether or not land masses are filled in color."},landcolor:{valType:"color",dflt:i.landColor,description:"Sets the land mass color."},showocean:{valType:"boolean",dflt:!1,description:"Sets whether or not oceans are filled in color."},oceancolor:{valType:"color",dflt:i.waterColor,description:"Sets the ocean color"},showlakes:{valType:"boolean",dflt:!1,description:"Sets whether or not lakes are drawn."},lakecolor:{valType:"color",dflt:i.waterColor,description:"Sets the color of the lakes."},showrivers:{valType:"boolean",dflt:!1,description:"Sets whether or not rivers are drawn."},rivercolor:{valType:"color",dflt:i.waterColor,description:"Sets color of the rivers."},riverwidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the rivers."},showcountries:{valType:"boolean",description:"Sets whether or not country boundaries are drawn."},countrycolor:{valType:"color",dflt:e.defaultLine,description:"Sets line color of the country boundaries."},countrywidth:{valType:"number",min:0,dflt:1,description:"Sets line width (in px) of the country boundaries."},showsubunits:{valType:"boolean",description:["Sets whether or not boundaries of subunits within countries","(e.g. states, provinces) are drawn."].join(" ")},subunitcolor:{valType:"color",dflt:e.defaultLine,description:"Sets the color of the subunits boundaries."},subunitwidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the subunits boundaries."},showframe:{valType:"boolean",description:"Sets whether or not a frame is drawn around the map."},framecolor:{valType:"color",dflt:e.defaultLine,description:"Sets the color the frame."},framewidth:{valType:"number",min:0,dflt:1,description:"Sets the stroke width (in px) of the frame."},bgcolor:{valType:"color",dflt:e.background,description:"Set the background color of the map"},lonaxis:a,lataxis:a},"plot","from-root");return l.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in the view","(projection and center). Defaults to `layout.uirevision`."].join(" ")},b4.exports}t(_de,"requireLayout_attributes$4");var _4,PK;function o7e(){if(PK)return _4;PK=1;var e=Nt.exports,r=Fy(),n=Ns.getSubplotData,i=e3(),s=_de(),o=i.axesNames;_4=t(function(u,f,h){r(u,f,h,{type:"geo",attributes:s,handleDefaults:a,fullData:h,partition:"y"})},"supplyLayoutDefaults");function a(l,u,f,h){var v=n(h.fullData,"geo",h.id),c=v.map(function(se){return se._expandedIndex}),d=f("resolution"),g=f("scope"),p=i.scopeDefaults[g],b=f("projection.type",p.projType),m=u._isAlbersUsa=b==="albers usa";m&&(g=u.scope="usa");var y=u._isScoped=g!=="world",T=u._isSatellite=b==="satellite",_=u._isConic=b.indexOf("conic")!==-1||b==="albers",M=u._isClipped=!!i.lonaxisSpan[b];if(l.visible===!1){var w=e.extendDeep({},u._template);w.showcoastlines=!1,w.showcountries=!1,w.showframe=!1,w.showlakes=!1,w.showland=!1,w.showocean=!1,w.showrivers=!1,w.showsubunits=!1,w.lonaxis&&(w.lonaxis.showgrid=!1),w.lataxis&&(w.lataxis.showgrid=!1),u._template=w}for(var x=f("visible"),A,S=0;S<o.length;S++){var k=o[S],L=[30,10][S],P;if(y)P=p[k+"Range"];else{var D=i[k+"Span"],B=(D[b]||D["*"])/2,z=f("projection.rotation."+k.substr(0,3),p.projRotate[S]);P=[z-B,z+B]}var R=f(k+".range",P);f(k+".tick0"),f(k+".dtick",L),A=f(k+".showgrid",x?void 0:!1),A&&(f(k+".gridcolor"),f(k+".gridwidth"),f(k+".griddash")),u[k]._ax={type:"linear",_id:k.slice(0,3),_traceIndices:c,setScale:e.identity,c2l:e.identity,r2l:e.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var F=u.lonaxis.range,O=u.lataxis.range,q=F[0],H=F[1];q>0&&H<0&&(H+=360);var j=(q+H)/2,X;if(!m){var G=y?p.projRotate:[j,0,0];X=f("projection.rotation.lon",G[0]),f("projection.rotation.lat",G[1]),f("projection.rotation.roll",G[2]),A=f("showcoastlines",!y&&x),A&&(f("coastlinecolor"),f("coastlinewidth")),A=f("showocean",x?void 0:!1),A&&f("oceancolor")}var $,te;if(m?($=-96.6,te=38.7):($=y?j:X,te=(O[0]+O[1])/2),f("center.lon",$),f("center.lat",te),T&&(f("projection.tilt"),f("projection.distance")),_){var ee=p.projParallels||[0,60];f("projection.parallels",ee)}f("projection.scale"),A=f("showland",x?void 0:!1),A&&f("landcolor"),A=f("showlakes",x?void 0:!1),A&&f("lakecolor"),A=f("showrivers",x?void 0:!1),A&&(f("rivercolor"),f("riverwidth")),A=f("showcountries",y&&g!=="usa"&&x),A&&(f("countrycolor"),f("countrywidth")),(g==="usa"||g==="north america"&&d===50)&&(f("showsubunits",x),f("subunitcolor"),f("subunitwidth")),y||(A=f("showframe",x),A&&(f("framecolor"),f("framewidth"))),f("bgcolor");var ie=f("fitbounds");ie&&(delete u.projection.scale,y?(delete u.center.lon,delete u.center.lat):M?(delete u.center.lon,delete u.center.lat,delete u.projection.rotation.lon,delete u.projection.rotation.lat,delete u.lonaxis.range,delete u.lataxis.range):(delete u.center.lon,delete u.center.lat,delete u.projection.rotation.lon))}return t(a,"handleGeoDefaults"),_4}t(o7e,"requireLayout_defaults$4");var w4,DK;function wde(){if(DK)return w4;DK=1;var e=Ns.getSubplotCalcData,r=Nt.exports.counterRegex,n=i7e(),i="geo",s=r(i),o={};o[i]={valType:"subplotid",dflt:i,editType:"calc",description:["Sets a reference between this trace's geospatial coordinates and","a geographic map.","If *geo* (the default value), the geospatial coordinates refer to","`layout.geo`.","If *geo2*, the geospatial coordinates refer to `layout.geo2`,","and so on."].join(" ")};function a(f){for(var h=f._fullLayout,v=f.calcdata,c=h._subplots[i],d=0;d<c.length;d++){var g=c[d],p=e(v,i,g),b=h[g],m=b._subplot;m||(m=n({id:g,graphDiv:f,container:h._geolayer.node(),topojsonURL:f._context.topojsonURL,staticPlot:f._context.staticPlot}),h[g]._subplot=m),m.plot(p,h,f._promises)}}t(a,"plotGeo");function l(f,h,v,c){for(var d=c._subplots[i]||[],g=0;g<d.length;g++){var p=d[g],b=c[p]._subplot;!h[p]&&!!b&&(b.framework.remove(),b.clipDef.remove())}}t(l,"clean");function u(f){for(var h=f._fullLayout,v=h._subplots[i],c=0;c<v.length;c++){var d=h[v[c]],g=d._subplot;g.updateFx(h,d)}}return t(u,"updateFx"),w4={attr:i,name:i,idRoot:i,idRegex:s,attrRegex:s,attributes:o,layoutAttributes:_de(),supplyLayoutDefaults:o7e(),plot:a,updateFx:u,clean:l},w4}t(wde,"requireGeo");var T4,IK;function s7e(){return IK||(IK=1,T4={attributes:_x(),supplyDefaults:GIe(),colorbar:_u,formatLabels:jIe(),calc:Che(),calcGeoJSON:kZ().calcGeoJSON,plot:kZ().plot,style:Ohe(),styleOnSelect:kf.styleOnSelect,hoverPoints:o6e(),eventData:s6e(),selectPoints:l6e(),moduleType:"trace",name:"scattergeo",basePlotModule:wde(),categories:["geo","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_geo",description:["The data visualized as scatter point or lines on a geographic map","is provided either by longitude/latitude pairs in `lon` and `lat`","respectively or by geographic location IDs or names in `locations`."].join(" ")}}),T4}t(s7e,"requireScattergeo$1");var zK;function l7e(){return zK||(zK=1,function(e){e.exports=s7e()}($C)),$C.exports}t(l7e,"requireScattergeo");var A4={exports:{}},S4,FK;function x3(){if(FK)return S4;FK=1;var e=Un.hovertemplateAttrs,r=_x(),n=Qi,i=Ni,s=Fo.defaultLine,o=cn.extendFlat,a=r.marker.line;return S4=o({locations:{valType:"data_array",editType:"calc",description:["Sets the coordinates via location IDs or names.","See `locationmode` for more info."].join(" ")},locationmode:r.locationmode,z:{valType:"data_array",editType:"calc",description:"Sets the color values."},geojson:o({},r.geojson,{description:["Sets optional GeoJSON data associated with this trace.","If not given, the features on the base map are used.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")}),featureidkey:r.featureidkey,text:o({},r.text,{description:"Sets the text elements associated with each location."}),hovertext:o({},r.hovertext,{description:"Same as `text`."}),marker:{line:{color:o({},a.color,{dflt:s}),width:o({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style",description:"Sets the opacity of the locations."},editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:r.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:o({},i.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:e(),showlegend:o({},i.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"})),S4}t(x3,"requireAttributes$l");var M4,BK;function u7e(){if(BK)return M4;BK=1;var e=Nt.exports,r=ml,n=x3();return M4=t(function(s,o,a,l){function u(p,b){return e.coerce(s,o,n,p,b)}t(u,"coerce");var f=u("locations"),h=u("z");if(!(f&&f.length&&e.isArrayOrTypedArray(h)&&h.length)){o.visible=!1;return}o._length=Math.min(f.length,h.length);var v=u("geojson"),c;(typeof v=="string"&&v!==""||e.isPlainObject(v))&&(c="geojson-id");var d=u("locationmode",c);d==="geojson-id"&&u("featureidkey"),u("text"),u("hovertext"),u("hovertemplate");var g=u("marker.line.width");g&&u("marker.line.color"),u("marker.opacity"),r(s,o,l,u,{prefix:"",cLetter:"z"}),e.coerceSelectionMarkerOpacity(o,u)},"supplyDefaults"),M4}t(u7e,"requireDefaults$l");var k4,OK;function Tde(){if(OK)return k4;OK=1;var e=xn,r=jn.BADNUM,n=Lf,i=pd,s=Ih;function o(a){return a&&typeof a=="string"}return t(o,"isNonBlankString"),k4=t(function(l,u){var f=u._length,h=new Array(f),v;u.geojson?v=t(function(b){return o(b)||e(b)},"isValidLoc"):v=o;for(var c=0;c<f;c++){var d=h[c]={},g=u.locations[c],p=u.z[c];v(g)&&e(p)?(d.loc=g,d.z=p):(d.loc=null,d.z=r),d.index=c}return i(h,u),n(l,u,{vals:u.z,containerStr:"",cLetter:"z"}),s(h,u),h},"calc"),k4}t(Tde,"requireCalc$h");var E4,NK;function RF(){if(NK)return E4;NK=1;var e=Va.exports,r=$a.exports,n=bn.exports,i=ko;function s(l,u){u&&o(l,u)}t(s,"style");function o(l,u){var f=u[0].trace,h=u[0].node3,v=h.selectAll(".choroplethlocation"),c=f.marker||{},d=c.line||{},g=i.makeColorScaleFuncFromTrace(f);v.each(function(p){e.select(this).attr("fill",g(p.z)).call(r.stroke,p.mlc||d.color).call(n.dashLine,"",p.mlw||d.width||0).style("opacity",c.opacity)}),n.selectedPointStyle(v,f)}t(o,"styleTrace");function a(l,u){var f=u[0].node3,h=u[0].trace;h.selectedpoints?n.selectedPointStyle(f.selectAll(".choroplethlocation"),h):o(l,u)}return t(a,"styleOnSelect"),E4={style:s,styleOnSelect:a},E4}t(RF,"requireStyle$1");var C4,qK;function UK(){if(qK)return C4;qK=1;var e=Va.exports,r=Nt.exports,n=wx(),i=$7().getTopojsonFeatures,s=Lh().findExtremes,o=RF().style;function a(u,f,h){var v=f.layers.backplot.select(".choroplethlayer");r.makeTraceGroups(v,h,"trace choropleth").each(function(c){var d=e.select(this),g=d.selectAll("path.choroplethlocation").data(r.identity);g.enter().append("path").classed("choroplethlocation",!0),g.exit().remove(),o(u,c)})}t(a,"plot");function l(u,f){for(var h=u[0].trace,v=f[h.geo],c=v._subplot,d=h.locationmode,g=h._length,p=d==="geojson-id"?n.extractTraceFeature(u):i(h,c.topojson),b=[],m=[],y=0;y<g;y++){var T=u[y],_=d==="geojson-id"?T.fOut:n.locationToFeature(d,T.loc,p);if(_){T.geojson=_,T.ct=_.properties.ct,T._polygons=n.feature2polygons(_);var M=n.computeBbox(_);b.push(M[0],M[2]),m.push(M[1],M[3])}else T.geojson=null}if(v.fitbounds==="geojson"&&d==="geojson-id"){var w=n.computeBbox(n.getTraceGeojson(h));b=[w[0],w[2]],m=[w[1],w[3]]}var x={padded:!0};h._extremes.lon=s(v.lonaxis._ax,b,x),h._extremes.lat=s(v.lataxis._ax,m,x)}return t(l,"calcGeoJSON"),C4={calcGeoJSON:l,plot:a},C4}t(UK,"requirePlot$i");var L4,HK;function Ade(){if(HK)return L4;HK=1;var e=nn(),r=x3(),n=Nt.exports.fillText;L4=t(function(o,a,l){var u=o.cd,f=u[0].trace,h=o.subplot,v,c,d,g,p=[a,l],b=[a+360,l];for(c=0;c<u.length;c++)if(v=u[c],g=!1,v._polygons){for(d=0;d<v._polygons.length;d++)v._polygons[d].contains(p)&&(g=!g),v._polygons[d].contains(b)&&(g=!g);if(g)break}if(!(!g||!v))return o.x0=o.x1=o.xa.c2p(v.ct),o.y0=o.y1=o.ya.c2p(v.ct),o.index=v.index,o.location=v.loc,o.z=v.z,o.zLabel=e.tickText(h.mockAxis,h.mockAxis.c2l(v.z),"hover").text,o.hovertemplate=v.hovertemplate,i(o,f,v),[o]},"hoverPoints");function i(s,o,a){if(!o.hovertemplate){var l=a.hi||o.hoverinfo,u=String(a.loc),f=l==="all"?r.hoverinfo.flags:l.split("+"),h=f.indexOf("name")!==-1,v=f.indexOf("location")!==-1,c=f.indexOf("z")!==-1,d=f.indexOf("text")!==-1,g=!h&&v,p=[];g?s.nameOverride=u:(h&&(s.nameOverride=o.name),v&&p.push(u)),c&&p.push(s.zLabel),d&&n(a,o,p),s.extraText=p.join("<br>")}}return t(i,"makeHoverInfo"),L4}t(Ade,"requireHover$a");var R4,$K;function Sde(){return $K||($K=1,R4=t(function(r,n,i,s,o){r.location=n.location,r.z=n.z;var a=s[o];return a.fIn&&a.fIn.properties&&(r.properties=a.fIn.properties),r.ct=a.ct,r},"eventData")),R4}t(Sde,"requireEvent_data$3");var P4,VK;function Mde(){return VK||(VK=1,P4=t(function(r,n){var i=r.cd,s=r.xaxis,o=r.yaxis,a=[],l,u,f,h,v;if(n===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++)u=i[l],f=u.ct,f&&(h=s.c2p(f),v=o.c2p(f),n.contains([h,v],null,l,r)?(a.push({pointNumber:l,lon:f[0],lat:f[1]}),u.selected=1):u.selected=0);return a},"selectPoints")),P4}t(Mde,"requireSelect$5");var D4,GK;function f7e(){return GK||(GK=1,D4={attributes:x3(),supplyDefaults:u7e(),colorbar:zy(),calc:Tde(),calcGeoJSON:UK().calcGeoJSON,plot:UK().plot,style:RF().style,styleOnSelect:RF().styleOnSelect,hoverPoints:Ade(),eventData:Sde(),selectPoints:Mde(),moduleType:"trace",name:"choropleth",basePlotModule:wde(),categories:["geo","noOpacity","showLegend"],meta:{description:["The data that describes the choropleth value-to-color mapping","is set in `z`.","The geographic locations corresponding to each value in `z`","are set in `locations`."].join(" ")}}),D4}t(f7e,"requireChoropleth$1");var jK;function c7e(){return jK||(jK=1,function(e){e.exports=f7e()}(A4)),A4.exports}t(c7e,"requireChoropleth");var I4={exports:{}},z4,YK;function tB(){if(YK)return z4;YK=1;var e=Na,r=Nt.exports,n=lx;function i(o,a,l,u){var f=o.cd,h=f[0].t,v=f[0].trace,c=o.xa,d=o.ya,g=h.x,p=h.y,b=c.c2p(a),m=d.c2p(l),y=o.distance,T;if(h.tree){var _=c.p2c(b-y),M=c.p2c(b+y),w=d.p2c(m-y),x=d.p2c(m+y);u==="x"?T=h.tree.range(Math.min(_,M),Math.min(d._rl[0],d._rl[1]),Math.max(_,M),Math.max(d._rl[0],d._rl[1])):T=h.tree.range(Math.min(_,M),Math.min(w,x),Math.max(_,M),Math.max(w,x))}else T=h.ids;var A,S,k,L,P,D,B,z,R,F=y;if(u==="x"){var O=!!v.xperiodalignment,q=!!v.yperiodalignment;for(P=0;P<T.length;P++){if(A=T[P],k=g[A],D=Math.abs(c.c2p(k)-b),O){var H=c.c2p(v._xStarts[A]),j=c.c2p(v._xEnds[A]);D=b>=Math.min(H,j)&&b<=Math.max(H,j)?0:1/0}if(D<F){if(F=D,L=p[A],B=d.c2p(L)-m,q){var X=d.c2p(v._yStarts[A]),G=d.c2p(v._yEnds[A]);B=m>=Math.min(X,G)&&m<=Math.max(X,G)?0:1/0}R=Math.sqrt(D*D+B*B),S=T[P]}}}else for(P=T.length-1;P>-1;P--)A=T[P],k=g[A],L=p[A],D=c.c2p(k)-b,B=d.c2p(L)-m,z=Math.sqrt(D*D+B*B),z<F&&(F=R=z,S=A);return o.index=S,o.distance=F,o.dxy=R,S===void 0?[o]:[s(o,g,p,v)]}t(i,"hoverPoints");function s(o,a,l,u){var f=o.xa,h=o.ya,v=o.distance,c=o.dxy,d=o.index,g={pointNumber:d,x:a[d],y:l[d]};g.tx=Array.isArray(u.text)?u.text[d]:u.text,g.htx=Array.isArray(u.hovertext)?u.hovertext[d]:u.hovertext,g.data=Array.isArray(u.customdata)?u.customdata[d]:u.customdata,g.tp=Array.isArray(u.textposition)?u.textposition[d]:u.textposition;var p=u.textfont;p&&(g.ts=r.isArrayOrTypedArray(p.size)?p.size[d]:p.size,g.tc=Array.isArray(p.color)?p.color[d]:p.color,g.tf=Array.isArray(p.family)?p.family[d]:p.family);var b=u.marker;b&&(g.ms=r.isArrayOrTypedArray(b.size)?b.size[d]:b.size,g.mo=r.isArrayOrTypedArray(b.opacity)?b.opacity[d]:b.opacity,g.mx=r.isArrayOrTypedArray(b.symbol)?b.symbol[d]:b.symbol,g.ma=r.isArrayOrTypedArray(b.angle)?b.angle[d]:b.angle,g.mc=r.isArrayOrTypedArray(b.color)?b.color[d]:b.color);var m=b&&b.line;m&&(g.mlc=Array.isArray(m.color)?m.color[d]:m.color,g.mlw=r.isArrayOrTypedArray(m.width)?m.width[d]:m.width);var y=b&&b.gradient;y&&y.type!=="none"&&(g.mgt=Array.isArray(y.type)?y.type[d]:y.type,g.mgc=Array.isArray(y.color)?y.color[d]:y.color);var T=f.c2p(g.x,!0),_=h.c2p(g.y,!0),M=g.mrc||1,w=u.hoverlabel;w&&(g.hbg=Array.isArray(w.bgcolor)?w.bgcolor[d]:w.bgcolor,g.hbc=Array.isArray(w.bordercolor)?w.bordercolor[d]:w.bordercolor,g.hts=r.isArrayOrTypedArray(w.font.size)?w.font.size[d]:w.font.size,g.htc=Array.isArray(w.font.color)?w.font.color[d]:w.font.color,g.htf=Array.isArray(w.font.family)?w.font.family[d]:w.font.family,g.hnl=r.isArrayOrTypedArray(w.namelength)?w.namelength[d]:w.namelength);var x=u.hoverinfo;x&&(g.hi=Array.isArray(x)?x[d]:x);var A=u.hovertemplate;A&&(g.ht=Array.isArray(A)?A[d]:A);var S={};S[o.index]=g;var k=u._origX,L=u._origY,P=r.extendFlat({},o,{color:n(u,g),x0:T-M,x1:T+M,xLabelVal:k?k[d]:g.x,y0:_-M,y1:_+M,yLabelVal:L?L[d]:g.y,cd:S,distance:v,spikeDistance:c,hovertemplate:g.ht});return g.htx?P.text=g.htx:g.tx?P.text=g.tx:u.text&&(P.text=u.text),r.fillText(g,u,P),e.getComponentMethod("errorbars","hoverInfo")(g,u,P),P}return t(s,"calcHover"),z4={hoverPoints:i,calcHover:s},z4}t(tB,"requireHover$9");var F4={exports:{}},B4,WK;function O0(){if(WK)return B4;WK=1;var e=20;return B4={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:e,SYMBOL_STROKE:e/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},B4}t(O0,"requireConstants$8");var XK;function b3(){if(XK)return F4.exports;XK=1;var e=Ni,r=Ps,n=Vo.axisHoverFormat,i=Qi,s=Ay,o=cn.extendFlat,a=_o.overrideAll,l=O0().DASHES,u=r.line,f=r.marker,h=f.line,v=F4.exports=a({x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),text:r.text,hovertext:r.hovertext,textposition:r.textposition,textfont:r.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],description:["Determines the drawing mode for this scatter trace."].join(" ")},line:{color:u.color,width:u.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","The values correspond to step-wise line shapes."].join(" ")},dash:{valType:"enumerated",values:s(l),dflt:"solid",description:"Sets the style of the lines."}},marker:o({},i("marker"),{symbol:f.symbol,angle:f.angle,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:o({},i("marker.line"),{width:h.width})}),connectgaps:r.connectgaps,fill:o({},r.fill,{dflt:"none"}),fillcolor:r.fillcolor,selected:{marker:r.selected.marker,textfont:r.selected.textfont},unselected:{marker:r.unselected.marker,textfont:r.unselected.textfont},opacity:e.opacity},"calc","nested");return v.x.editType=v.y.editType=v.x0.editType=v.y0.editType="calc+clearAxisTypes",v.hovertemplate=r.hovertemplate,v.texttemplate=r.texttemplate,F4.exports}t(b3,"requireAttributes$k");var e_={},ZK;function rB(){if(ZK)return e_;ZK=1;var e=O0();return e_.isOpenSymbol=function(r){return typeof r=="string"?e.OPEN_RE.test(r):r%200>100},e_.isDotSymbol=function(r){return typeof r=="string"?e.DOT_RE.test(r):r>200},e_}t(rB,"requireHelpers$5");var O4,KK;function h7e(){if(KK)return O4;KK=1;var e=Nt.exports,r=Na,n=rB(),i=b3(),s=vd,o=ho,a=ix,l=yv,u=Ph,f=mv,h=dd,v=xv;return O4=t(function(d,g,p,b){function m(S,k){return e.coerce(d,g,i,S,k)}t(m,"coerce");var y=d.marker?n.isOpenSymbol(d.marker.symbol):!1,T=o.isBubble(d),_=a(d,g,b,m);if(!_){g.visible=!1;return}l(d,g,b,m),m("xhoverformat"),m("yhoverformat");var M=_<s.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",M),o.hasLines(g)&&(m("connectgaps"),f(d,g,p,b,m),m("line.shape")),o.hasMarkers(g)&&(u(d,g,p,b,m,{noAngleRef:!0,noStandOff:!0}),m("marker.line.width",y||T?1:0)),o.hasText(g)&&(m("texttemplate"),v(d,g,b,m));var w=(g.line||{}).color,x=(g.marker||{}).color;m("fill"),g.fill!=="none"&&h(d,g,p,m);var A=r.getComponentMethod("errorbars","supplyDefaults");A(d,g,w||x||p,{axis:"y"}),A(d,g,w||x||p,{axis:"x",inherit:"y"}),e.coerceSelectionMarkerOpacity(g,m)},"supplyDefaults"),O4}t(h7e,"requireDefaults$k");var N4,JK;function v7e(){if(JK)return N4;JK=1;var e=$8;return N4=t(function(n,i,s){var o=n.i;return"x"in n||(n.x=i._x[o]),"y"in n||(n.y=i._y[o]),e(n,i,s)},"formatLabels"),N4}t(v7e,"requireFormat_labels$5");var q4={exports:{}},U4,QK;function d7e(){if(QK)return U4;QK=1;function e(a,l,u,f,h){for(var v=h+1;f<=h;){var c=f+h>>>1,d=a[c],g=u!==void 0?u(d,l):d-l;g>=0?(v=c,h=c-1):f=c+1}return v}t(e,"ge");function r(a,l,u,f,h){for(var v=h+1;f<=h;){var c=f+h>>>1,d=a[c],g=u!==void 0?u(d,l):d-l;g>0?(v=c,h=c-1):f=c+1}return v}t(r,"gt");function n(a,l,u,f,h){for(var v=f-1;f<=h;){var c=f+h>>>1,d=a[c],g=u!==void 0?u(d,l):d-l;g<0?(v=c,f=c+1):h=c-1}return v}t(n,"lt");function i(a,l,u,f,h){for(var v=f-1;f<=h;){var c=f+h>>>1,d=a[c],g=u!==void 0?u(d,l):d-l;g<=0?(v=c,f=c+1):h=c-1}return v}t(i,"le");function s(a,l,u,f,h){for(;f<=h;){var v=f+h>>>1,c=a[v],d=u!==void 0?u(c,l):c-l;if(d===0)return v;d<=0?f=v+1:h=v-1}return-1}t(s,"eq");function o(a,l,u,f,h,v){return typeof u=="function"?v(a,l,u,f===void 0?0:f|0,h===void 0?a.length-1:h|0):v(a,l,void 0,u===void 0?0:u|0,f===void 0?a.length-1:f|0)}return t(o,"norm"),U4={ge:function(a,l,u,f,h){return o(a,l,u,f,h,e)},gt:function(a,l,u,f,h){return o(a,l,u,f,h,r)},lt:function(a,l,u,f,h){return o(a,l,u,f,h,n)},le:function(a,l,u,f,h){return o(a,l,u,f,h,i)},eq:function(a,l,u,f,h){return o(a,l,u,f,h,s)}},U4}t(d7e,"requireSearchBounds");var H4,eJ;function md(){if(eJ)return H4;eJ=1,H4=t(function(i,s,o){var a={},l,u;if(typeof s=="string"&&(s=r(s)),Array.isArray(s)){var f={};for(u=0;u<s.length;u++)f[s[u]]=!0;s=f}for(l in s)s[l]=r(s[l]);var h={};for(l in s){var v=s[l];if(Array.isArray(v))for(u=0;u<v.length;u++){var c=v[u];if(o&&(h[c]=!0),c in i){if(a[l]=i[c],o)for(var d=u;d<v.length;d++)h[v[d]]=!0;break}}else l in i&&(s[l]&&(a[l]=i[l]),o&&(h[l]=!0))}if(o)for(l in i)h[l]||(a[l]=i[l]);return a},"pick");var e={};function r(n){return e[n]?e[n]:(typeof n=="string"&&(n=e[n]=n.split(/\s*,\s*|\s+/)),n)}return t(r,"toList"),H4}t(md,"requirePickByAlias");var $4,tJ;function kx(){if(tJ)return $4;tJ=1;var e=md();$4=r;function r(n){var i;return arguments.length>1&&(n=arguments),typeof n=="string"?n=n.split(/\s/).map(parseFloat):typeof n=="number"&&(n=[n]),n.length&&typeof n[0]=="number"?n.length===1?i={width:n[0],height:n[0],x:0,y:0}:n.length===2?i={width:n[0],height:n[1],x:0,y:0}:i={x:n[0],y:n[1],width:n[2]-n[0]||0,height:n[3]-n[1]||0}:n&&(n=e(n,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),i={x:n.left||0,y:n.top||0},n.width==null?n.right?i.width=n.right-i.x:i.width=0:i.width=n.width,n.height==null?n.bottom?i.height=n.bottom-i.y:i.height=0:i.height=n.height),i}return t(r,"parseRect"),$4}t(kx,"requireParseRect");var V4,rJ;function Gy(){if(rJ)return V4;rJ=1,V4=e;function e(r,n){if(!r||r.length==null)throw Error("Argument should be an array");n==null?n=1:n=Math.floor(n);for(var i=Array(n*2),s=0;s<n;s++){for(var o=-1/0,a=1/0,l=s,u=r.length;l<u;l+=n)r[l]>o&&(o=r[l]),r[l]<a&&(a=r[l]);i[s]=a,i[n+s]=o}return i}return t(e,"normalize"),V4}t(Gy,"requireArrayBounds");var G4,aJ;function jy(){if(aJ)return G4;aJ=1;var e=O7();G4=r;function r(n,i,s){if(!n)throw new TypeError("must specify data as first parameter");if(s=+(s||0)|0,Array.isArray(n)&&n[0]&&typeof n[0][0]=="number"){var o=n[0].length,a=n.length*o,l,u,f,h;(!i||typeof i=="string")&&(i=new(e(i||"float32"))(a+s));var v=i.length-s;if(a!==v)throw new Error("source length "+a+" ("+o+"x"+n.length+") does not match destination length "+v);for(l=0,f=s;l<n.length;l++)for(u=0;u<o;u++)i[f++]=n[l][u]===null?NaN:n[l][u]}else if(!i||typeof i=="string"){var c=e(i||"float32");if(Array.isArray(n)||i==="array")for(i=new c(n.length+s),l=0,f=s,h=i.length;f<h;f++,l++)i[f]=n[l]===null?NaN:n[l];else s===0?i=new c(n):(i=new c(n.length+s),i.set(n,s))}else i.set(n,s);return i}return t(r,"flattenVertexData"),G4}t(jy,"requireFlattenVertexData");var j4,nJ;function p7e(){return nJ||(nJ=1,j4=t(function(e){var r=typeof e;return e!==null&&(r==="object"||r==="function")},"isObj")),j4}t(p7e,"requireIsObj");var Y4,iJ;function g7e(){return iJ||(iJ=1,Y4=Math.log2||function(e){return Math.log(e)*Math.LOG2E}),Y4}t(g7e,"requireMathLog2");var W4,oJ;function y7e(){if(oJ)return W4;oJ=1;const e=d7e(),r=Jw(),n=kx(),i=Gy(),s=md(),o=phe(),a=jy(),l=p7e(),u=O7(),f=g7e(),h=1073741824;W4=t(function(d,g){g||(g={}),d=a(d,"float64"),g=s(g,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});let p=o(g.maxDepth,255),b=o(g.bounds,i(d,2));b[0]===b[2]&&b[2]++,b[1]===b[3]&&b[3]++;let m=v(d,b),y=d.length>>>1,T;g.dtype||(g.dtype="array"),typeof g.dtype=="string"?T=new(u(g.dtype))(y):g.dtype&&(T=g.dtype,Array.isArray(T)&&(T.length=y));for(let D=0;D<y;++D)T[D]=D;let _=[],M=[],w=[],x=[];S(0,0,1,T,0,1);let A=0;for(let D=0;D<_.length;D++){let B=_[D];if(T.set)T.set(B,A);else for(let R=0,F=B.length;R<F;R++)T[R+A]=B[R];let z=A+_[D].length;x[D]=[A,z],A=z}return T.range=k,T;function S(D,B,z,R,F,O){if(!R.length)return null;let q=_[F]||(_[F]=[]),H=w[F]||(w[F]=[]),j=M[F]||(M[F]=[]),X=q.length;if(F++,F>p||O>h){for(let ne=0;ne<R.length;ne++)q.push(R[ne]),H.push(O),j.push(null,null,null,null);return X}if(q.push(R[0]),H.push(O),R.length<=1)return j.push(null,null,null,null),X;let G=z*.5,$=D+G,te=B+G,ee=[],ie=[],se=[],W=[];for(let ne=1,he=R.length;ne<he;ne++){let re=R[ne],ae=m[re*2],fe=m[re*2+1];ae<$?fe<te?ee.push(re):ie.push(re):fe<te?se.push(re):W.push(re)}return O<<=2,j.push(S(D,B,G,ee,F,O),S(D,te,G,ie,F,O+1),S($,B,G,se,F,O+2),S($,te,G,W,F,O+3)),X}t(S,"sort");function k(...D){let B;if(l(D[D.length-1])){let se=D.pop();!D.length&&(se.x!=null||se.l!=null||se.left!=null)&&(D=[se],B={}),B=s(se,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else B={};D.length||(D=b);let z=n(...D),[R,F,O,q]=[Math.min(z.x,z.x+z.width),Math.min(z.y,z.y+z.height),Math.max(z.x,z.x+z.width),Math.max(z.y,z.y+z.height)],[H,j,X,G]=v([R,F,O,q],b),$=o(B.level,_.length);if(B.d!=null){let se;typeof B.d=="number"?se=[B.d,B.d]:B.d.length&&(se=B.d),$=Math.min(Math.max(Math.ceil(-f(Math.abs(se[0])/(b[2]-b[0]))),Math.ceil(-f(Math.abs(se[1])/(b[3]-b[1])))),$)}if($=Math.min($,_.length),B.lod)return L(H,j,X,G,$);let te=[];ee(0,0,1,0,0,1);function ee(se,W,ne,he,re,ae){if(re===null||ae===null)return;let fe=se+ne,ce=W+ne;if(H>fe||j>ce||X<se||G<W||he>=$||re===ae)return;let xe=_[he];ae===void 0&&(ae=xe.length);for(let De=re;De<ae;De++){let Fe=xe[De],qe=d[Fe*2],Je=d[Fe*2+1];qe>=R&&qe<=O&&Je>=F&&Je<=q&&te.push(Fe)}let Te=M[he],me=Te[re*4+0],pe=Te[re*4+1],oe=Te[re*4+2],de=Te[re*4+3],ye=ie(Te,re+1),we=ne*.5,Ee=he+1;ee(se,W,we,Ee,me,pe||oe||de||ye),ee(se,W+we,we,Ee,pe,oe||de||ye),ee(se+we,W,we,Ee,oe,de||ye),ee(se+we,W+we,we,Ee,de,ye)}t(ee,"select");function ie(se,W){let ne=null,he=0;for(;ne===null;)if(ne=se[W*4+he],he++,he>se.length)return null;return ne}return t(ie,"nextOffset"),te}t(k,"range");function L(D,B,z,R,F){let O=[];for(let q=0;q<F;q++){let H=w[q],j=x[q][0],X=P(D,B,q),G=P(z,R,q),$=e.ge(H,X),te=e.gt(H,G,$,H.length-1);O[q]=[$+j,te+j]}return O}t(L,"lod");function P(D,B,z){let R=1,F=.5,O=.5,q=.5;for(let H=0;H<z;H++)R<<=2,R+=D<F?B<O?0:1:B<O?2:3,q*=.5,F+=D<F?-q:q,O+=B<O?-q:q;return R}t(P,"group")},"cluster");function v(c,d){let[g,p,b,m]=d,y=1/(b-g),T=1/(m-p),_=new Array(c.length);for(let M=0,w=c.length/2;M<w;M++)_[2*M]=r((c[2*M]-g)*y,0,1),_[2*M+1]=r((c[2*M+1]-p)*T,0,1);return _}return t(v,"normalize"),W4}t(y7e,"requireQuad");var sJ;function aB(){return sJ||(sJ=1,function(e){e.exports=y7e()}(q4)),q4.exports}t(aB,"requirePointCluster");var X4,lJ;function kde(){if(lJ)return X4;lJ=1,X4=e;function e(r){var n=0,i=0,s=0,o=0;return r.map(function(a){a=a.slice();var l=a[0],u=l.toUpperCase();if(l!=u)switch(a[0]=u,l){case"a":a[6]+=s,a[7]+=o;break;case"v":a[1]+=o;break;case"h":a[1]+=s;break;default:for(var f=1;f<a.length;)a[f++]+=s,a[f++]+=o}switch(u){case"Z":s=n,o=i;break;case"H":s=a[1];break;case"V":o=a[1];break;case"M":s=n=a[1],o=i=a[2];break;default:s=a[a.length-2],o=a[a.length-1]}return a})}return t(e,"absolutize"),X4}t(kde,"requireAbsSvgPath");var m7e=function(){function e(r,n){var i=[],s=!0,o=!1,a=void 0;try{for(var l=r[Symbol.iterator](),u;!(s=(u=l.next()).done)&&(i.push(u.value),!(n&&i.length===n));s=!0);}catch(f){o=!0,a=f}finally{try{!s&&l.return&&l.return()}finally{if(o)throw a}}return i}return t(e,"sliceIterator"),function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x1=Math.PI*2,Z4=t(function(r,n,i,s,o,a,l){var u=r.x,f=r.y;u*=n,f*=i;var h=s*u-o*f,v=o*u+s*f;return{x:h+a,y:v+l}},"mapToEllipse"),x7e=t(function(r,n){var i=n===1.5707963267948966?.551915024494:n===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(n/4),s=Math.cos(r),o=Math.sin(r),a=Math.cos(r+n),l=Math.sin(r+n);return[{x:s-o*i,y:o+s*i},{x:a+l*i,y:l-a*i},{x:a,y:l}]},"approxUnitArc"),uJ=t(function(r,n,i,s){var o=r*s-n*i<0?-1:1,a=r*i+n*s;return a>1&&(a=1),a<-1&&(a=-1),o*Math.acos(a)},"vectorAngle"),b7e=t(function(r,n,i,s,o,a,l,u,f,h,v,c){var d=Math.pow(o,2),g=Math.pow(a,2),p=Math.pow(v,2),b=Math.pow(c,2),m=d*g-d*b-g*p;m<0&&(m=0),m/=d*b+g*p,m=Math.sqrt(m)*(l===u?-1:1);var y=m*o/a*c,T=m*-a/o*v,_=h*y-f*T+(r+i)/2,M=f*y+h*T+(n+s)/2,w=(v-y)/o,x=(c-T)/a,A=(-v-y)/o,S=(-c-T)/a,k=uJ(1,0,w,x),L=uJ(w,x,A,S);return u===0&&L>0&&(L-=x1),u===1&&L<0&&(L+=x1),[_,M,k,L]},"getArcCenter"),_7e=t(function(r){var n=r.px,i=r.py,s=r.cx,o=r.cy,a=r.rx,l=r.ry,u=r.xAxisRotation,f=u===void 0?0:u,h=r.largeArcFlag,v=h===void 0?0:h,c=r.sweepFlag,d=c===void 0?0:c,g=[];if(a===0||l===0)return[];var p=Math.sin(f*x1/360),b=Math.cos(f*x1/360),m=b*(n-s)/2+p*(i-o)/2,y=-p*(n-s)/2+b*(i-o)/2;if(m===0&&y===0)return[];a=Math.abs(a),l=Math.abs(l);var T=Math.pow(m,2)/Math.pow(a,2)+Math.pow(y,2)/Math.pow(l,2);T>1&&(a*=Math.sqrt(T),l*=Math.sqrt(T));var _=b7e(n,i,s,o,a,l,v,d,p,b,m,y),M=m7e(_,4),w=M[0],x=M[1],A=M[2],S=M[3],k=Math.abs(S)/(x1/4);Math.abs(1-k)<1e-7&&(k=1);var L=Math.max(Math.ceil(k),1);S/=L;for(var P=0;P<L;P++)g.push(x7e(A,S)),A+=S;return g.map(function(D){var B=Z4(D[0],a,l,b,p,w,x),z=B.x,R=B.y,F=Z4(D[1],a,l,b,p,w,x),O=F.x,q=F.y,H=Z4(D[2],a,l,b,p,w,x),j=H.x,X=H.y;return{x1:z,y1:R,x2:O,y2:q,x:j,y:X}})},"arcToBezier");const w7e=Object.freeze(Object.defineProperty({__proto__:null,default:_7e},Symbol.toStringTag,{value:"Module"})),T7e=Hc(w7e);var K4,fJ;function A7e(){if(fJ)return K4;fJ=1,K4=r;var e=T7e;function r(s){for(var o,a=[],l=0,u=0,f=0,h=0,v=null,c=null,d=0,g=0,p=0,b=s.length;p<b;p++){var m=s[p],y=m[0];switch(y){case"M":f=m[1],h=m[2];break;case"A":var T=e({px:d,py:g,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!T.length)continue;for(var _=0,M;_<T.length;_++)M=T[_],m=["C",M.x1,M.y1,M.x2,M.y2,M.x,M.y],_<T.length-1&&a.push(m);break;case"S":var w=d,x=g;(o=="C"||o=="S")&&(w+=w-l,x+=x-u),m=["C",w,x,m[1],m[2],m[3],m[4]];break;case"T":o=="Q"||o=="T"?(v=d*2-v,c=g*2-c):(v=d,c=g),m=i(d,g,v,c,m[1],m[2]);break;case"Q":v=m[1],c=m[2],m=i(d,g,m[1],m[2],m[3],m[4]);break;case"L":m=n(d,g,m[1],m[2]);break;case"H":m=n(d,g,m[1],g);break;case"V":m=n(d,g,d,m[1]);break;case"Z":m=n(d,g,f,h);break}o=y,d=m[m.length-2],g=m[m.length-1],m.length>4?(l=m[m.length-4],u=m[m.length-3]):(l=d,u=g),a.push(m)}return a}t(r,"normalize");function n(s,o,a,l){return["C",s,o,a,l,a,l]}t(n,"line");function i(s,o,a,l,u,f){return["C",s/3+2/3*a,o/3+2/3*l,u/3+2/3*a,f/3+2/3*l,u,f]}return t(i,"quadratic"),K4}t(A7e,"requireNormalizeSvgPath$1");var J4,cJ;function Ede(){return cJ||(cJ=1,J4=t(function(r){return typeof r!="string"?!1:(r=r.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(r)&&/[\dz]$/i.test(r)&&r.length>4))},"isPath")),J4}t(Ede,"requireIsSvgPath");var Q4,hJ;function S7e(){if(hJ)return Q4;hJ=1;var e=dw,r=kde(),n=A7e(),i=Ede();Q4=s;function s(o){if(Array.isArray(o)&&o.length===1&&typeof o[0]=="string"&&(o=o[0]),typeof o=="string"){if(!i(o))throw Error("String is not an SVG path.");o=e(o)}if(!Array.isArray(o))throw Error("Argument should be a string or an array of path segments.");if(o=r(o),o=n(o),!o.length)return[0,0,0,0];for(var a=[1/0,1/0,-1/0,-1/0],l=0,u=o.length;l<u;l++)for(var f=o[l].slice(1),h=0;h<f.length;h+=2)f[h+0]<a[0]&&(a[0]=f[h+0]),f[h+1]<a[1]&&(a[1]=f[h+1]),f[h+0]>a[2]&&(a[2]=f[h+0]),f[h+1]>a[3]&&(a[3]=f[h+1]);return a}return t(s,"pathBounds"),Q4}t(S7e,"requireSvgPathBounds");var eL,vJ;function M7e(){if(vJ)return eL;vJ=1;var e=Math.PI,r=l(120);eL=n;function n(u){for(var f,h=[],v=0,c=0,d=0,g=0,p=null,b=null,m=0,y=0,T=0,_=u.length;T<_;T++){var M=u[T],w=M[0];switch(w){case"M":d=M[1],g=M[2];break;case"A":M=o(m,y,M[1],M[2],l(M[3]),M[4],M[5],M[6],M[7]),M.unshift("C"),M.length>7&&(h.push(M.splice(0,7)),M.unshift("C"));break;case"S":var x=m,A=y;(f=="C"||f=="S")&&(x+=x-v,A+=A-c),M=["C",x,A,M[1],M[2],M[3],M[4]];break;case"T":f=="Q"||f=="T"?(p=m*2-p,b=y*2-b):(p=m,b=y),M=s(m,y,p,b,M[1],M[2]);break;case"Q":p=M[1],b=M[2],M=s(m,y,M[1],M[2],M[3],M[4]);break;case"L":M=i(m,y,M[1],M[2]);break;case"H":M=i(m,y,M[1],y);break;case"V":M=i(m,y,m,M[1]);break;case"Z":M=i(m,y,d,g);break}f=w,m=M[M.length-2],y=M[M.length-1],M.length>4?(v=M[M.length-4],c=M[M.length-3]):(v=m,c=y),h.push(M)}return h}t(n,"normalize");function i(u,f,h,v){return["C",u,f,h,v,h,v]}t(i,"line");function s(u,f,h,v,c,d){return["C",u/3+2/3*h,f/3+2/3*v,c/3+2/3*h,d/3+2/3*v,c,d]}t(s,"quadratic");function o(u,f,h,v,c,d,g,p,b,m){if(m)L=m[0],P=m[1],S=m[2],k=m[3];else{var y=a(u,f,-c);u=y.x,f=y.y,y=a(p,b,-c),p=y.x,b=y.y;var T=(u-p)/2,_=(f-b)/2,M=T*T/(h*h)+_*_/(v*v);M>1&&(M=Math.sqrt(M),h=M*h,v=M*v);var w=h*h,x=v*v,A=(d==g?-1:1)*Math.sqrt(Math.abs((w*x-w*_*_-x*T*T)/(w*_*_+x*T*T)));A==1/0&&(A=1);var S=A*h*_/v+(u+p)/2,k=A*-v*T/h+(f+b)/2,L=Math.asin(((f-k)/v).toFixed(9)),P=Math.asin(((b-k)/v).toFixed(9));L=u<S?e-L:L,P=p<S?e-P:P,L<0&&(L=e*2+L),P<0&&(P=e*2+P),g&&L>P&&(L=L-e*2),!g&&P>L&&(P=P-e*2)}if(Math.abs(P-L)>r){var D=P,B=p,z=b;P=L+r*(g&&P>L?1:-1),p=S+h*Math.cos(P),b=k+v*Math.sin(P);var R=o(p,b,h,v,c,0,g,B,z,[P,D,S,k])}var F=Math.tan((P-L)/4),O=4/3*h*F,q=4/3*v*F,H=[2*u-(u+O*Math.sin(L)),2*f-(f-q*Math.cos(L)),p+O*Math.sin(P),b-q*Math.cos(P),p,b];if(m)return H;R&&(H=H.concat(R));for(var j=0;j<H.length;){var X=a(H[j],H[j+1],c);H[j++]=X.x,H[j++]=X.y}return H}t(o,"arc");function a(u,f,h){return{x:u*Math.cos(h)-f*Math.sin(h),y:u*Math.sin(h)+f*Math.cos(h)}}t(a,"rotate");function l(u){return u*(e/180)}return t(l,"radians"),eL}t(M7e,"requireNormalizeSvgPath");var tL,dJ;function k7e(){if(dJ)return tL;dJ=1;var e=kde(),r=M7e(),n={M:"moveTo",C:"bezierCurveTo"};return tL=t(function(i,s){i.beginPath(),r(e(s)).forEach(function(o){var a=o[0],l=o.slice(1);i[n[a]].apply(i,l)}),i.closePath()},"drawSvgPath"),tL}t(k7e,"requireDrawSvgPath");var rL,pJ;function E7e(){if(pJ)return rL;pJ=1,rL=r;var e=1e20;function r(s,o){o||(o={});var a=o.cutoff==null?.25:o.cutoff,l=o.radius==null?8:o.radius,u=o.channel||0,f,h,v,c,d,g,p,b,m,y,T;if(ArrayBuffer.isView(s)||Array.isArray(s)){if(!o.width||!o.height)throw Error("For raw data width and height should be provided by options");f=o.width,h=o.height,c=s,o.stride?g=o.stride:g=Math.floor(s.length/f/h)}else window.HTMLCanvasElement&&s instanceof window.HTMLCanvasElement?(b=s,p=b.getContext("2d"),f=b.width,h=b.height,m=p.getImageData(0,0,f,h),c=m.data,g=4):window.CanvasRenderingContext2D&&s instanceof window.CanvasRenderingContext2D?(b=s.canvas,p=s,f=b.width,h=b.height,m=p.getImageData(0,0,f,h),c=m.data,g=4):window.ImageData&&s instanceof window.ImageData&&(m=s,f=s.width,h=s.height,c=m.data,g=4);if(v=Math.max(f,h),window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array)for(d=c,c=Array(f*h),y=0,T=Math.floor(d.length/g);y<T;y++)c[y]=d[y*g+u]/255;else if(g!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(f*h),M=Array(f*h),w=Array(v),x=Array(v),A=Array(v+1),S=Array(v);for(y=0,T=f*h;y<T;y++){var k=c[y];_[y]=k===1?0:k===0?e:Math.pow(Math.max(0,.5-k),2),M[y]=k===1?e:k===0?0:Math.pow(Math.max(0,k-.5),2)}n(_,f,h,w,x,S,A),n(M,f,h,w,x,S,A);var L=window.Float32Array?new Float32Array(f*h):new Array(f*h);for(y=0,T=f*h;y<T;y++)L[y]=Math.min(Math.max(1-((_[y]-M[y])/l+a),0),1);return L}t(r,"calcSDF");function n(s,o,a,l,u,f,h){for(var v=0;v<o;v++){for(var c=0;c<a;c++)l[c]=s[c*o+v];for(i(l,u,f,h,a),c=0;c<a;c++)s[c*o+v]=u[c]}for(c=0;c<a;c++){for(v=0;v<o;v++)l[v]=s[c*o+v];for(i(l,u,f,h,o),v=0;v<o;v++)s[c*o+v]=Math.sqrt(u[v])}}t(n,"edt");function i(s,o,a,l,u){a[0]=0,l[0]=-e,l[1]=+e;for(var f=1,h=0;f<u;f++){for(var v=(s[f]+f*f-(s[a[h]]+a[h]*a[h]))/(2*f-2*a[h]);v<=l[h];)h--,v=(s[f]+f*f-(s[a[h]]+a[h]*a[h]))/(2*f-2*a[h]);h++,a[h]=f,l[h]=v,l[h+1]=+e}for(f=0,h=0;f<u;f++){for(;l[h+1]<f;)h++;o[f]=(f-a[h])*(f-a[h])+s[a[h]]}}return t(i,"edt1d"),rL}t(E7e,"requireBitmapSdf");var aL,gJ;function C7e(){if(gJ)return aL;gJ=1;var e=S7e(),r=dw,n=k7e(),i=Ede(),s=E7e(),o=document.createElement("canvas"),a=o.getContext("2d");aL=l;function l(h,v){if(!i(h))throw Error("Argument should be valid svg path string");v||(v={});var c,d;v.shape?(c=v.shape[0],d=v.shape[1]):(c=o.width=v.w||v.width||200,d=o.height=v.h||v.height||200);var g=Math.min(c,d),p=v.stroke||0,b=v.viewbox||v.viewBox||e(h),m=[c/(b[2]-b[0]),d/(b[3]-b[1])],y=Math.min(m[0]||0,m[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,c,d),a.fillStyle="white",p&&(typeof p!="number"&&(p=1),p>0?a.strokeStyle="white":a.strokeStyle="black",a.lineWidth=Math.abs(p)),a.translate(c*.5,d*.5),a.scale(y,y),f()){var T=new Path2D(h);a.fill(T),p&&a.stroke(T)}else{var _=r(h);n(a,_),a.fill(),p&&a.stroke()}a.setTransform(1,0,0,1,0,0);var M=s(a,{cutoff:v.cutoff!=null?v.cutoff:.5,radius:v.radius!=null?v.radius:g*.5});return M}t(l,"pathSdf");var u;function f(){if(u!=null)return u;var h=document.createElement("canvas").getContext("2d");if(h.canvas.width=h.canvas.height=1,!window.Path2D)return u=!1;var v=new Path2D("M0,0h1v1h-1v-1Z");h.fillStyle="black",h.fill(v);var c=h.getImageData(0,0,1,1);return u=c&&c.data&&c.data[3]===255}return t(f,"isPath2DSupported"),aL}t(C7e,"requireSvgPathSdf");var nL,yJ;function yy(){if(yJ)return nL;yJ=1;var e=xn,r=C7e(),n=z0(),i=Na,s=Nt.exports,o=bn.exports,a=$o,l=mp().formatColor,u=ho,f=vw,h=rB(),v=O0(),c=A0.DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},g=Rf.appendArrayPointValue;function p(B,z){var R,F={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},O=B._context.plotGlPixelRatio;if(z.visible!==!0)return F;if(u.hasText(z)&&(F.text=b(B,z),F.textSel=T(B,z,z.selected),F.textUnsel=T(B,z,z.unselected)),u.hasMarkers(z)&&(F.marker=m(B,z),F.markerSel=y(B,z,z.selected),F.markerUnsel=y(B,z,z.unselected),!z.unselected&&s.isArrayOrTypedArray(z.marker.opacity))){var q=z.marker.opacity;for(F.markerUnsel.opacity=new Array(q.length),R=0;R<q.length;R++)F.markerUnsel.opacity[R]=c*q[R]}if(u.hasLines(z)){F.line={overlay:!0,thickness:z.line.width*O,color:z.line.color,opacity:z.opacity};var H=(v.DASHES[z.line.dash]||[1]).slice();for(R=0;R<H.length;++R)H[R]*=z.line.width*O;F.line.dashes=H}return z.error_x&&z.error_x.visible&&(F.errorX=_(z,z.error_x,O)),z.error_y&&z.error_y.visible&&(F.errorY=_(z,z.error_y,O)),!!z.fill&&z.fill!=="none"&&(F.fill={closed:!0,fill:z.fillcolor,thickness:0}),F}t(p,"convertStyle");function b(B,z){var R=B._fullLayout,F=z._length,O=z.textfont,q=z.textposition,H=Array.isArray(q)?q:[q],j=O.color,X=O.size,G=O.family,$={},te,ee=B._context.plotGlPixelRatio,ie=z.texttemplate;if(ie){$.text=[];var se=R._d3locale,W=Array.isArray(ie),ne=W?Math.min(ie.length,F):F,he=W?function(me){return ie[me]}:function(){return ie};for(te=0;te<ne;te++){var re={i:te},ae=z._module.formatLabels(re,z,R),fe={};g(fe,z,te);var ce=z._meta||{};$.text.push(s.texttemplateString(he(te),ae,se,fe,re,ce))}}else Array.isArray(z.text)&&z.text.length<F?$.text=z.text.slice():$.text=z.text;if(Array.isArray($.text))for(te=$.text.length;te<F;te++)$.text[te]="";for($.opacity=z.opacity,$.font={},$.align=[],$.baseline=[],te=0;te<H.length;te++){var xe=H[te].split(/\s+/);switch(xe[1]){case"left":$.align.push("right");break;case"right":$.align.push("left");break;default:$.align.push(xe[1])}switch(xe[0]){case"top":$.baseline.push("bottom");break;case"bottom":$.baseline.push("top");break;default:$.baseline.push(xe[0])}}if(Array.isArray(j))for($.color=new Array(F),te=0;te<F;te++)$.color[te]=j[te];else $.color=j;if(s.isArrayOrTypedArray(X)||Array.isArray(G))for($.font=new Array(F),te=0;te<F;te++){var Te=$.font[te]={};Te.size=(s.isTypedArray(X)?X[te]:Array.isArray(X)?e(X[te])?X[te]:0:X)*ee,Te.family=Array.isArray(G)?G[te]:G}else $.font={size:X*ee,family:G};return $}t(b,"convertTextStyle");function m(B,z){var R=z._length,F=z.marker,O={},q,H=s.isArrayOrTypedArray(F.symbol),j=s.isArrayOrTypedArray(F.angle),X=s.isArrayOrTypedArray(F.color),G=s.isArrayOrTypedArray(F.line.color),$=s.isArrayOrTypedArray(F.opacity),te=s.isArrayOrTypedArray(F.size),ee=s.isArrayOrTypedArray(F.line.width),ie;if(H||(ie=h.isOpenSymbol(F.symbol)),H||X||G||$||j){O.symbols=new Array(R),O.angles=new Array(R),O.colors=new Array(R),O.borderColors=new Array(R);var se=F.symbol,W=F.angle,ne=l(F,F.opacity,R),he=l(F.line,F.opacity,R);if(!Array.isArray(he[0])){var re=he;for(he=Array(R),q=0;q<R;q++)he[q]=re}if(!Array.isArray(ne[0])){var ae=ne;for(ne=Array(R),q=0;q<R;q++)ne[q]=ae}if(!Array.isArray(se)){var fe=se;for(se=Array(R),q=0;q<R;q++)se[q]=fe}if(!Array.isArray(W)){var ce=W;for(W=Array(R),q=0;q<R;q++)W[q]=ce}for(O.symbols=se,O.angles=W,O.colors=ne,O.borderColors=he,q=0;q<R;q++)H&&(ie=h.isOpenSymbol(F.symbol[q])),ie&&(he[q]=ne[q].slice(),ne[q]=ne[q].slice(),ne[q][3]=0);for(O.opacity=z.opacity,O.markers=new Array(R),q=0;q<R;q++)O.markers[q]=k({mx:O.symbols[q],ma:O.angles[q]},z)}else ie?(O.color=n(F.color,"uint8"),O.color[3]=0,O.borderColor=n(F.color,"uint8")):(O.color=n(F.color,"uint8"),O.borderColor=n(F.line.color,"uint8")),O.opacity=z.opacity*F.opacity,O.marker=k({mx:F.symbol,ma:F.angle},z);var xe=1,Te=f(z,xe),me;if(te||ee){var pe=O.sizes=new Array(R),oe=O.borderSizes=new Array(R),de=0,ye;if(te){for(q=0;q<R;q++)pe[q]=Te(F.size[q]),de+=pe[q];ye=de/R}else for(me=Te(F.size),q=0;q<R;q++)pe[q]=me;if(ee)for(q=0;q<R;q++)oe[q]=F.line.width[q];else for(me=F.line.width,q=0;q<R;q++)oe[q]=me;O.sizeAvg=ye}else O.size=Te(F&&F.size||10),O.borderSizes=Te(F.line.width);return O}t(m,"convertMarkerStyle");function y(B,z,R){var F=z.marker,O={};return R&&(R.marker&&R.marker.symbol?O=m(B,s.extendFlat({},F,R.marker)):R.marker&&(R.marker.size&&(O.size=R.marker.size),R.marker.color&&(O.colors=R.marker.color),R.marker.opacity!==void 0&&(O.opacity=R.marker.opacity))),O}t(y,"convertMarkerSelection");function T(B,z,R){var F={};if(!R)return F;if(R.textfont){var O={opacity:1,text:z.text,texttemplate:z.texttemplate,textposition:z.textposition,textfont:s.extendFlat({},z.textfont)};R.textfont&&s.extendFlat(O.textfont,R.textfont),F=b(B,O)}return F}t(T,"convertTextSelection");function _(B,z,R){var F={capSize:z.width*2*R,lineWidth:z.thickness*R,color:z.color};return z.copy_ystyle&&(F=B.error_y),F}t(_,"convertErrorBarStyle");var M=v.SYMBOL_SDF_SIZE,w=v.SYMBOL_SIZE,x=v.SYMBOL_STROKE,A={},S=o.symbolFuncs[0](w*.05);function k(B,z){var R=B.mx;if(R==="circle")return null;var F,O,q=o.symbolNumber(R),H=o.symbolFuncs[q%100],j=!!o.symbolNoDot[q%100],X=!!o.symbolNoFill[q%100],G=h.isDotSymbol(R);if(B.ma&&(R+="_"+B.ma),A[R])return A[R];var $=o.getMarkerAngle(B,z);return G&&!j?F=H(w*1.1,$)+S:F=H(w,$),O=r(F,{w:M,h:M,viewBox:[-w,-w,w,w],stroke:X?x:-x}),A[R]=O,O||null}t(k,"getSymbolSdf");function L(B,z,R){var F=R.length,O=F/2,q,H;if(u.hasLines(z)&&O)if(z.line.shape==="hv"){for(q=[],H=0;H<O-1;H++)isNaN(R[H*2])||isNaN(R[H*2+1])?q.push(NaN,NaN,NaN,NaN):(q.push(R[H*2],R[H*2+1]),!isNaN(R[H*2+2])&&!isNaN(R[H*2+3])?q.push(R[H*2+2],R[H*2+1]):q.push(NaN,NaN));q.push(R[F-2],R[F-1])}else if(z.line.shape==="hvh"){for(q=[],H=0;H<O-1;H++)if(isNaN(R[H*2])||isNaN(R[H*2+1])||isNaN(R[H*2+2])||isNaN(R[H*2+3]))!isNaN(R[H*2])&&!isNaN(R[H*2+1])?q.push(R[H*2],R[H*2+1]):q.push(NaN,NaN),q.push(NaN,NaN);else{var j=(R[H*2]+R[H*2+2])/2;q.push(R[H*2],R[H*2+1],j,R[H*2+1],j,R[H*2+3])}q.push(R[F-2],R[F-1])}else if(z.line.shape==="vhv"){for(q=[],H=0;H<O-1;H++)if(isNaN(R[H*2])||isNaN(R[H*2+1])||isNaN(R[H*2+2])||isNaN(R[H*2+3]))!isNaN(R[H*2])&&!isNaN(R[H*2+1])?q.push(R[H*2],R[H*2+1]):q.push(NaN,NaN),q.push(NaN,NaN);else{var X=(R[H*2+1]+R[H*2+3])/2;q.push(R[H*2],R[H*2+1],R[H*2],X,R[H*2+2],X)}q.push(R[F-2],R[F-1])}else if(z.line.shape==="vh"){for(q=[],H=0;H<O-1;H++)isNaN(R[H*2])||isNaN(R[H*2+1])?q.push(NaN,NaN,NaN,NaN):(q.push(R[H*2],R[H*2+1]),!isNaN(R[H*2+2])&&!isNaN(R[H*2+3])?q.push(R[H*2],R[H*2+3]):q.push(NaN,NaN));q.push(R[F-2],R[F-1])}else q=R;var G=!1;for(H=0;H<q.length;H++)if(isNaN(q[H])){G=!0;break}var $=G||q.length>v.TOO_MANY_POINTS||u.hasMarkers(z)?"rect":"round";if(G&&z.connectgaps){var te=q[0],ee=q[1];for(H=0;H<q.length;H+=2)isNaN(q[H])||isNaN(q[H+1])?(q[H]=te,q[H+1]=ee):(te=q[H],ee=q[H+1])}return{join:$,positions:q}}t(L,"convertLinePositions");function P(B,z,R,F,O){var q=i.getComponentMethod("errorbars","makeComputeError"),H=a.getFromId(B,z.xaxis,"x"),j=a.getFromId(B,z.yaxis,"y"),X=R.length/2,G={};function $(te,ee){var ie=ee._id.charAt(0),se=z["error_"+ie];if(se&&se.visible&&(ee.type==="linear"||ee.type==="log")){for(var W=q(se),ne={x:0,y:1}[ie],he={x:[0,1,2,3],y:[2,3,0,1]}[ie],re=new Float64Array(4*X),ae=1/0,fe=-1/0,ce=0,xe=0;ce<X;ce++,xe+=4){var Te=te[ce];if(e(Te)){var me=R[ce*2+ne],pe=W(Te,ce),oe=pe[0],de=pe[1];if(e(oe)&&e(de)){var ye=Te-oe,we=Te+de;re[xe+he[0]]=me-ee.c2l(ye),re[xe+he[1]]=ee.c2l(we)-me,re[xe+he[2]]=0,re[xe+he[3]]=0,ae=Math.min(ae,Te-oe),fe=Math.max(fe,Te+de)}}}G[ie]={positions:R,errors:re,_bnds:[ae,fe]}}}return t($,"convertOneAxis"),$(F,H),$(O,j),G}t(P,"convertErrorBarPositions");function D(B,z,R,F){var O=z._length,q={},H;if(u.hasMarkers(z)){var j=R.font,X=R.align,G=R.baseline;for(q.offset=new Array(O),H=0;H<O;H++){var $=F.sizes?F.sizes[H]:F.size,te=Array.isArray(j)?j[H].size:j.size,ee=Array.isArray(X)?X.length>1?X[H]:X[0]:X,ie=Array.isArray(G)?G.length>1?G[H]:G[0]:G,se=d[ee],W=d[ie],ne=$?$/.8+1:0,he=-W*ne-W*.5;q.offset[H]=[se*ne/te,he/te]}}return q}return t(D,"convertTextPosition"),nL={style:p,markerStyle:m,markerSelection:y,linePositions:L,errorBarPositions:P,textPosition:D},nL}t(yy,"requireConvert$6");var iL,mJ;function Cde(){if(mJ)return iL;mJ=1;var e=Nt.exports;return iL=t(function(n,i){var s=i._scene,o={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return i._scene||(s=i._scene={},s.init=t(function(){e.extendFlat(s,a,o)},"init"),s.init(),s.update=t(function(u){var f=e.repeat(u,s.count);if(s.fill2d&&s.fill2d.update(f),s.scatter2d&&s.scatter2d.update(f),s.line2d&&s.line2d.update(f),s.error2d&&s.error2d.update(f.concat(f)),s.select2d&&s.select2d.update(f),s.glText)for(var h=0;h<s.count;h++)s.glText[h].update(u)},"update"),s.draw=t(function(){for(var u=s.count,f=s.fill2d,h=s.error2d,v=s.line2d,c=s.scatter2d,d=s.glText,g=s.select2d,p=s.selectBatch,b=s.unselectBatch,m=0;m<u;m++){if(f&&s.fillOrder[m]&&f.draw(s.fillOrder[m]),v&&s.lineOptions[m]&&v.draw(m),h&&(s.errorXOptions[m]&&h.draw(m),s.errorYOptions[m]&&h.draw(m+u)),c&&s.markerOptions[m])if(b[m].length){var y=e.repeat([],s.count);y[m]=b[m],c.draw(y)}else p[m].length||c.draw(m);d[m]&&s.textOptions[m]&&d[m].render()}g&&g.draw(p),s.dirty=!1},"draw"),s.destroy=t(function(){s.fill2d&&s.fill2d.destroy&&s.fill2d.destroy(),s.scatter2d&&s.scatter2d.destroy&&s.scatter2d.destroy(),s.error2d&&s.error2d.destroy&&s.error2d.destroy(),s.line2d&&s.line2d.destroy&&s.line2d.destroy(),s.select2d&&s.select2d.destroy&&s.select2d.destroy(),s.glText&&s.glText.forEach(function(u){u.destroy&&u.destroy()}),s.lineOptions=null,s.fillOptions=null,s.markerOptions=null,s.markerSelectedOptions=null,s.markerUnselectedOptions=null,s.errorXOptions=null,s.errorYOptions=null,s.textOptions=null,s.textSelectedOptions=null,s.textUnselectedOptions=null,s.selectBatch=null,s.unselectBatch=null,i._scene=null},"destroy")),s.dirty||e.extendFlat(s,o),s},"sceneUpdate"),iL}t(Cde,"requireScene_update$1");var oL,xJ;function L7e(){if(xJ)return oL;xJ=1;var e=aB(),r=Nt.exports,n=$o,i=Lh().findExtremes,s=bv,o=kh,a=o.calcMarkerSize,l=o.calcAxisExpansion,u=o.setFirstScatter,f=Dh,h=yy(),v=Cde(),c=jn.BADNUM,d=O0().TOO_MANY_POINTS;oL=t(function(m,y){var T=m._fullLayout,_=y._xA=n.getFromId(m,y.xaxis,"x"),M=y._yA=n.getFromId(m,y.yaxis,"y"),w=T._plots[y.xaxis+y.yaxis],x=y._length,A=x>=d,S=x*2,k={},L,P=_.makeCalcdata(y,"x"),D=M.makeCalcdata(y,"y"),B=s(y,_,"x",P),z=s(y,M,"y",D),R=B.vals,F=z.vals;y._x=R,y._y=F,y.xperiodalignment&&(y._origX=P,y._xStarts=B.starts,y._xEnds=B.ends),y.yperiodalignment&&(y._origY=D,y._yStarts=z.starts,y._yEnds=z.ends);var O=new Array(S),q=new Array(x);for(L=0;L<x;L++)O[L*2]=R[L]===c?NaN:R[L],O[L*2+1]=F[L]===c?NaN:F[L],q[L]=L;if(_.type==="log")for(L=0;L<S;L+=2)O[L]=_.c2l(O[L]);if(M.type==="log")for(L=1;L<S;L+=2)O[L]=M.c2l(O[L]);A&&_.type!=="log"&&M.type!=="log"?k.tree=e(O):k.ids=q,f(m,y);var H=p(m,w,y,O,R,F),j=v(m,w);u(T,y);var X;return A?H.marker&&(X=H.marker.sizeAvg||Math.max(H.marker.size,3)):X=a(y,x),l(m,y,_,M,R,F,X),H.errorX&&g(y,_,H.errorX),H.errorY&&g(y,M,H.errorY),H.fill&&!j.fill2d&&(j.fill2d=!0),H.marker&&!j.scatter2d&&(j.scatter2d=!0),H.line&&!j.line2d&&(j.line2d=!0),(H.errorX||H.errorY)&&!j.error2d&&(j.error2d=!0),H.text&&!j.glText&&(j.glText=!0),H.marker&&(H.marker.snap=x),j.lineOptions.push(H.line),j.errorXOptions.push(H.errorX),j.errorYOptions.push(H.errorY),j.fillOptions.push(H.fill),j.markerOptions.push(H.marker),j.markerSelectedOptions.push(H.markerSel),j.markerUnselectedOptions.push(H.markerUnsel),j.textOptions.push(H.text),j.textSelectedOptions.push(H.textSel),j.textUnselectedOptions.push(H.textUnsel),j.selectBatch.push([]),j.unselectBatch.push([]),k._scene=j,k.index=j.count,k.x=R,k.y=F,k.positions=O,j.count++,[{x:!1,y:!1,t:k,trace:y}]},"calc");function g(b,m,y){var T=b._extremes[m._id],_=i(m,y._bnds,{padded:!0});T.min=T.min.concat(_.min),T.max=T.max.concat(_.max)}t(g,"expandForErrorBars");function p(b,m,y,T,_,M){var w=h.style(b,y);if(w.marker&&(w.marker.positions=T),w.line&&T.length>1&&r.extendFlat(w.line,h.linePositions(b,y,T)),w.errorX||w.errorY){var x=h.errorBarPositions(b,y,T,_,M);w.errorX&&r.extendFlat(w.errorX,x.x),w.errorY&&r.extendFlat(w.errorY,x.y)}return w.text&&(r.extendFlat(w.text,{positions:T},h.textPosition(b,y,w.text,w.marker)),r.extendFlat(w.textSel,{positions:T},h.textPosition(b,y,w.text,w.markerSel)),r.extendFlat(w.textUnsel,{positions:T},h.textPosition(b,y,w.text,w.markerUnsel))),w}return t(p,"sceneOptions"),oL}t(L7e,"requireCalc$g");var sL,bJ;function Lde(){if(bJ)return sL;bJ=1;var e=Nt.exports,r=$a.exports,n=A0.DESELECTDIM;function i(s){var o=s[0],a=o.trace,l=o.t,u=l._scene,f=l.index,h=u.selectBatch[f],v=u.unselectBatch[f],c=u.textOptions[f],d=u.textSelectedOptions[f]||{},g=u.textUnselectedOptions[f]||{},p=e.extendFlat({},c),b,m;if(h.length||v.length){var y=d.color,T=g.color,_=c.color,M=Array.isArray(_);for(p.color=new Array(a._length),b=0;b<h.length;b++)m=h[b],p.color[m]=y||(M?_[m]:_);for(b=0;b<v.length;b++){m=v[b];var w=M?_[m]:_;p.color[m]=T||(y?w:r.addOpacity(w,n))}}u.glText[f].update(p)}return t(i,"styleTextSelection"),sL={styleTextSelection:i},sL}t(Lde,"requireEdit_style$1");var lL,_J;function Rde(){if(_J)return lL;_J=1;var e=ho,r=Lde().styleTextSelection;return lL=t(function(i,s){var o=i.cd,a=i.xaxis,l=i.yaxis,u=[],f=o[0].trace,h=o[0].t,v=f._length,c=h.x,d=h.y,g=h._scene,p=h.index;if(!g)return u;var b=e.hasText(f),m=e.hasMarkers(f),y=!m&&!b;if(f.visible!==!0||y)return u;var T=[],_=[];if(s!==!1&&!s.degenerate)for(var M=0;M<v;M++)s.contains([h.xpx[M],h.ypx[M]],!1,M,i)?(T.push(M),u.push({pointNumber:M,x:a.c2d(c[M]),y:l.c2d(d[M])})):_.push(M);if(m){var w=g.scatter2d;if(!T.length&&!_.length){var x=new Array(g.count);x[p]=g.markerOptions[p],w.update.apply(w,x)}else if(!g.selectBatch[p].length&&!g.unselectBatch[p].length){var A=new Array(g.count);A[p]=g.markerUnselectedOptions[p],w.update.apply(w,A)}}return g.selectBatch[p]=T,g.unselectBatch[p]=_,b&&r(o),u},"select"),lL}t(Rde,"requireSelect$4");var uL,wJ;function R7e(){if(wJ)return uL;wJ=1;var e=tB();return uL={moduleType:"trace",name:"scattergl",basePlotModule:Ti,categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:b3(),supplyDefaults:h7e(),crossTraceDefaults:Iue,colorbar:_u,formatLabels:v7e(),calc:L7e(),hoverPoints:e.hoverPoints,selectPoints:Rde(),meta:{hrName:"scatter_gl",description:["The data visualized as scatter point or lines is set in `x` and `y`","using the WebGL plotting engine.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to a numerical arrays."].join(" ")}},uL}t(R7e,"requireBase_index$3");var fL={exports:{}},Um={exports:{}},TJ;function P7e(){if(TJ)return Um.exports;TJ=1;var e=Jw();Um.exports=r,Um.exports.to=r,Um.exports.from=n;function r(i,s){s==null&&(s=!0);var o=i[0],a=i[1],l=i[2],u=i[3];u==null&&(u=s?1:255),s&&(o*=255,a*=255,l*=255,u*=255),o=e(o,0,255)&255,a=e(a,0,255)&255,l=e(l,0,255)&255,u=e(u,0,255)&255;var f=o*16777216+(a<<16)+(l<<8)+u;return f}t(r,"toNumber");function n(i,s){i=+i;var o=i>>>24,a=(i&16711680)>>>16,l=(i&65280)>>>8,u=i&255;return s===!1?[o,a,l,u]:[o/255,a/255,l/255,u/255]}return t(n,"fromNumber"),Um.exports}t(P7e,"requireColorId");var cL,AJ;function nB(){return AJ||(AJ=1,cL=t(function(e){typeof e=="string"&&(e=[e]);for(var r=[].slice.call(arguments,1),n=[],i=0;i<e.length-1;i++)n.push(e[i],r[i]||"");return n.push(e[i]),n.join("")},"browser")),cL}t(nB,"requireBrowser");var hL,SJ;function Pde(){return SJ||(SJ=1,hL=t(function(r,n,i){Array.isArray(i)||(i=[].slice.call(arguments,2));for(var s=0,o=i.length;s<o;s++){var a=i[s];for(var l in a)if(!(n[l]!==void 0&&!Array.isArray(n[l])&&r[l]===n[l])&&l in n){var u;if(a[l]===!0)u=n[l];else{if(a[l]===!1)continue;if(typeof a[l]=="function"&&(u=a[l](n[l],r,n),u===void 0))continue}r[l]=u}}return r},"updateDiff")),hL}t(Pde,"requireUpdateDiff");var vL,MJ;function D7e(){return MJ||(MJ=1,vL=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))),vL}t(D7e,"requireIsIexplorer");var Kp={exports:{}},kJ;function iB(){if(kJ)return Kp.exports;kJ=1,Kp.exports=n,Kp.exports.float32=Kp.exports.float=n,Kp.exports.fract32=Kp.exports.fract=r;var e=new Float32Array(1);function r(i,s){if(i.length){if(i instanceof Float32Array)return new Float32Array(i.length);s instanceof Float32Array||(s=n(i));for(var o=0,a=s.length;o<a;o++)s[o]=i[o]-s[o];return s}return n(i-n(i))}t(r,"fract32");function n(i){return i.length?i instanceof Float32Array?i:new Float32Array(i):(e[0]=i,e[0])}return t(n,"float32"),Kp.exports}t(iB,"requireToFloat32");var dL,EJ;function Dde(){if(EJ)return dL;EJ=1;function e(k,L){return i(k)||o(k,L)||a(k,L)||f()}t(e,"_slicedToArray");function r(k){return n(k)||s(k)||a(k)||u()}t(r,"_toConsumableArray");function n(k){if(Array.isArray(k))return l(k)}t(n,"_arrayWithoutHoles");function i(k){if(Array.isArray(k))return k}t(i,"_arrayWithHoles");function s(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}t(s,"_iterableToArray");function o(k,L){var P=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(P!=null){var D=[],B=!0,z=!1,R,F;try{for(P=P.call(k);!(B=(R=P.next()).done)&&(D.push(R.value),!(L&&D.length===L));B=!0);}catch(O){z=!0,F=O}finally{try{!B&&P.return!=null&&P.return()}finally{if(z)throw F}}return D}}t(o,"_iterableToArrayLimit");function a(k,L){if(!!k){if(typeof k=="string")return l(k,L);var P=Object.prototype.toString.call(k).slice(8,-1);if(P==="Object"&&k.constructor&&(P=k.constructor.name),P==="Map"||P==="Set")return Array.from(k);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return l(k,L)}}t(a,"_unsupportedIterableToArray");function l(k,L){(L==null||L>k.length)&&(L=k.length);for(var P=0,D=new Array(L);P<L;P++)D[P]=k[P];return D}t(l,"_arrayLikeToArray");function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t(u,"_nonIterableSpread");function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t(f,"_nonIterableRest");var h=z0(),v=Gy(),c=P7e(),d=aB(),g=Os,p=nB(),b=md(),m=Pde(),y=jy(),T=D7e(),_=iB(),M=kx(),w=x;function x(k,L){var P=this;if(!(this instanceof x))return new x(k,L);typeof k=="function"?(L||(L={}),L.regl=k):(L=k,k=null),L&&L.length&&(L.positions=L),k=L.regl;var D=k._gl,B,z=[],R={},F=[],O=[null],q=[null],H=255,j=100;this.tooManyColors=T,B=k.texture({data:new Uint8Array(H*4),width:H,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),g(this,{regl:k,gl:D,groups:F,markerCache:q,markerTextures:O,palette:z,paletteIds:R,paletteTexture:B,maxColors:H,maxSize:j,canvas:D.canvas}),this.update(L);var X={uniforms:{constPointSize:!!L.constPointSize,opacity:k.prop("opacity"),paletteSize:t(function(ee,ie){return[P.tooManyColors?0:H,B.height]},"paletteSize"),pixelRatio:k.context("pixelRatio"),scale:k.prop("scale"),scaleFract:k.prop("scaleFract"),translate:k.prop("translate"),translateFract:k.prop("translateFract"),markerTexture:k.prop("markerTexture"),paletteTexture:B},attributes:{x:t(function(ee,ie){return ie.xAttr||{buffer:ie.positionBuffer,stride:8,offset:0}},"x"),y:t(function(ee,ie){return ie.yAttr||{buffer:ie.positionBuffer,stride:8,offset:4}},"y"),xFract:t(function(ee,ie){return ie.xAttr?{constant:[0,0]}:{buffer:ie.positionFractBuffer,stride:8,offset:0}},"xFract"),yFract:t(function(ee,ie){return ie.yAttr?{constant:[0,0]}:{buffer:ie.positionFractBuffer,stride:8,offset:4}},"yFract"),size:t(function(ee,ie){return ie.size.length?{buffer:ie.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(ie.size*255/P.maxSize)]}},"size"),borderSize:t(function(ee,ie){return ie.borderSize.length?{buffer:ie.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(ie.borderSize*255/P.maxSize)]}},"borderSize"),colorId:t(function(ee,ie){return ie.color.length?{buffer:ie.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?z.slice(ie.color*4,ie.color*4+4):[ie.color]}},"colorId"),borderColorId:t(function(ee,ie){return ie.borderColor.length?{buffer:ie.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?z.slice(ie.borderColor*4,ie.borderColor*4+4):[ie.borderColor]}},"borderColorId"),isActive:t(function(ee,ie){return ie.activation===!0?{constant:[1]}:ie.activation?ie.activation:{constant:[0]}},"isActive")},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:k.prop("viewport")},viewport:k.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:k.prop("elements"),count:k.prop("count"),offset:k.prop("offset"),primitive:"points"},G=g({},X);G.frag=p([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),G.vert=p([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=k(G);var $=g({},X);$.frag=p([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),$.vert=p([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),T&&($.frag=$.frag.replace("smoothstep","smoothStep"),G.frag=G.frag.replace("smoothstep","smoothStep")),this.drawCircle=k($)}t(x,"Scatter"),x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var k=this,L=arguments.length,P=new Array(L),D=0;D<L;D++)P[D]=arguments[D];var B=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var z=0;z<P.length;z++)this.drawItem(z,P[z]);else B.forEach(function(R,F){k.drawItem(F)});return this},x.prototype.drawItem=function(k,L){var P=this.groups,D=P[k];if(typeof L=="number"&&(k=L,D=P[L],L=null),!!(D&&D.count&&D.opacity)){D.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,D,L));for(var B=[],z=1;z<D.activation.length;z++)!D.activation[z]||D.activation[z]!==!0&&!D.activation[z].data.length||B.push.apply(B,r(this.getMarkerDrawOptions(z,D,L)));B.length&&this.drawMarker(B)}},x.prototype.getMarkerDrawOptions=function(k,L,P){var D=L.range,B=L.tree,z=L.viewport,R=L.activation,F=L.selectionBuffer,O=L.count;if(this.regl,!B)return P?[g({},L,{markerTexture:this.markerTextures[k],activation:R[k],count:P.length,elements:P,offset:0})]:[g({},L,{markerTexture:this.markerTextures[k],activation:R[k],offset:0})];var q=[],H=B.range(D,{lod:!0,px:[(D[2]-D[0])/z.width,(D[3]-D[1])/z.height]});if(P){for(var j=R[k],X=j.data,G=new Uint8Array(O),$=0;$<P.length;$++){var te=P[$];G[te]=X?X[te]:1}F.subdata(G)}for(var ee=H.length;ee--;){var ie=e(H[ee],2),se=ie[0],W=ie[1];q.push(g({},L,{markerTexture:this.markerTextures[k],activation:P?F:R[k],offset:se,count:W-se}))}return q},x.prototype.update=function(){for(var k=this,L=arguments.length,P=new Array(L),D=0;D<L;D++)P[D]=arguments[D];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var B=this.groups,z=this.gl,R=this.regl,F=this.maxSize,O=this.maxColors,q=this.palette;this.groups=B=P.map(function(H,j){var X=B[j];if(H===void 0)return X;H===null?H={positions:null}:typeof H=="function"?H={ondraw:H}:typeof H[0]=="number"&&(H={positions:H}),H=b(H,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),H.positions===null&&(H.positions=[]),H.tooManyColors!=null&&(k.tooManyColors=H.tooManyColors),X||(B[j]=X={id:j,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},H=g({},x.defaults,H)),H.positions&&!("marker"in H)&&(H.marker=X.marker,delete X.marker),H.marker&&!("positions"in H)&&(H.positions=X.positions,delete X.positions);var G=0,$=0;if(m(X,H,[{snap:!0,size:t(function(we,Ee){return we==null&&(we=x.defaults.size),G+=we&&we.length?1:0,we},"size"),borderSize:t(function(we,Ee){return we==null&&(we=x.defaults.borderSize),G+=we&&we.length?1:0,we},"borderSize"),opacity:parseFloat,color:t(function(we,Ee){return we==null&&(we=x.defaults.color),we=k.updateColor(we),$++,we},"color"),borderColor:t(function(we,Ee){return we==null&&(we=x.defaults.borderColor),we=k.updateColor(we),$++,we},"borderColor"),bounds:t(function(we,Ee,De){return"range"in De||(De.range=null),we},"bounds"),positions:t(function(we,Ee,De){var Fe=Ee.snap,qe=Ee.positionBuffer,Je=Ee.positionFractBuffer,Ge=Ee.selectionBuffer;if(we.x||we.y)return we.x.length?Ee.xAttr={buffer:R.buffer(we.x),offset:0,stride:4,count:we.x.length}:Ee.xAttr={buffer:we.x.buffer,offset:we.x.offset*4||0,stride:(we.x.stride||1)*4,count:we.x.count},we.y.length?Ee.yAttr={buffer:R.buffer(we.y),offset:0,stride:4,count:we.y.length}:Ee.yAttr={buffer:we.y.buffer,offset:we.y.offset*4||0,stride:(we.y.stride||1)*4,count:we.y.count},Ee.count=Math.max(Ee.xAttr.count,Ee.yAttr.count),we;we=y(we,"float64");var et=Ee.count=Math.floor(we.length/2),Ue=Ee.bounds=et?v(we,2):null;if(!De.range&&!Ee.range&&(delete Ee.range,De.range=Ue),!De.marker&&!Ee.marker&&(delete Ee.marker,De.marker=null),Fe&&(Fe===!0||et>Fe)?Ee.tree=d(we,{bounds:Ue}):Fe&&Fe.length&&(Ee.tree=Fe),Ee.tree){var Ye={primitive:"points",usage:"static",data:Ee.tree,type:"uint32"};Ee.elements?Ee.elements(Ye):Ee.elements=R.elements(Ye)}var $e=_.float32(we);qe({data:$e,usage:"dynamic"});var Ct=_.fract32(we,$e);return Je({data:Ct,usage:"dynamic"}),Ge({data:new Uint8Array(et),type:"uint8",usage:"stream"}),we},"positions")},{marker:t(function(we,Ee,De){var Fe=Ee.activation;if(Fe.forEach(function(Ct){return Ct&&Ct.destroy&&Ct.destroy()}),Fe.length=0,!we||typeof we[0]=="number"){var qe=k.addMarker(we);Fe[qe]=!0}else{for(var Je=[],Ge=0,et=Math.min(we.length,Ee.count);Ge<et;Ge++){var Ue=k.addMarker(we[Ge]);Je[Ue]||(Je[Ue]=new Uint8Array(Ee.count)),Je[Ue][Ge]=1}for(var Ye=0;Ye<Je.length;Ye++)if(!!Je[Ye]){var $e={data:Je[Ye],type:"uint8",usage:"static"};Fe[Ye]?Fe[Ye]($e):Fe[Ye]=R.buffer($e),Fe[Ye].data=Je[Ye]}}return we},"marker"),range:t(function(we,Ee,De){var Fe=Ee.bounds;if(!!Fe)return we||(we=Fe),Ee.scale=[1/(we[2]-we[0]),1/(we[3]-we[1])],Ee.translate=[-we[0],-we[1]],Ee.scaleFract=_.fract(Ee.scale),Ee.translateFract=_.fract(Ee.translate),we},"range"),viewport:t(function(we){var Ee=M(we||[z.drawingBufferWidth,z.drawingBufferHeight]);return Ee},"viewport")}]),G){var te=X,ee=te.count,ie=te.size,se=te.borderSize,W=te.sizeBuffer,ne=new Uint8Array(ee*2);if(ie.length||se.length)for(var he=0;he<ee;he++)ne[he*2]=Math.round((ie[he]==null?ie:ie[he])*255/F),ne[he*2+1]=Math.round((se[he]==null?se:se[he])*255/F);W({data:ne,usage:"dynamic"})}if($){var re=X,ae=re.count,fe=re.color,ce=re.borderColor,xe=re.colorBuffer,Te;if(k.tooManyColors){if(fe.length||ce.length){Te=new Uint8Array(ae*8);for(var me=0;me<ae;me++){var pe=fe[me];Te[me*8]=q[pe*4],Te[me*8+1]=q[pe*4+1],Te[me*8+2]=q[pe*4+2],Te[me*8+3]=q[pe*4+3];var oe=ce[me];Te[me*8+4]=q[oe*4],Te[me*8+5]=q[oe*4+1],Te[me*8+6]=q[oe*4+2],Te[me*8+7]=q[oe*4+3]}}}else if(fe.length||ce.length){Te=new Uint8Array(ae*4+2);for(var de=0;de<ae;de++)fe[de]!=null&&(Te[de*4]=fe[de]%O,Te[de*4+1]=Math.floor(fe[de]/O)),ce[de]!=null&&(Te[de*4+2]=ce[de]%O,Te[de*4+3]=Math.floor(ce[de]/O))}xe({data:Te||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return X})}},x.prototype.addMarker=function(k){var L=this.markerTextures,P=this.regl,D=this.markerCache,B=k==null?0:D.indexOf(k);if(B>=0)return B;var z;if(k instanceof Uint8Array||k instanceof Uint8ClampedArray)z=k;else{z=new Uint8Array(k.length);for(var R=0,F=k.length;R<F;R++)z[R]=k[R]*255}var O=Math.floor(Math.sqrt(z.length));return B=L.length,D.push(k),L.push(P.texture({channels:1,data:z,radius:O,mag:"linear",min:"linear"})),B},x.prototype.updateColor=function(k){var L=this.paletteIds,P=this.palette,D=this.maxColors;Array.isArray(k)||(k=[k]);var B=[];if(typeof k[0]=="number"){var z=[];if(Array.isArray(k))for(var R=0;R<k.length;R+=4)z.push(k.slice(R,R+4));else for(var F=0;F<k.length;F+=4)z.push(k.subarray(F,F+4));k=z}for(var O=0;O<k.length;O++){var q=k[O];q=h(q,"uint8");var H=c(q,!1);if(L[H]==null){var j=P.length;L[H]=Math.floor(j/4),P[j]=q[0],P[j+1]=q[1],P[j+2]=q[2],P[j+3]=q[3]}B[O]=L[H]}return!this.tooManyColors&&P.length>D*4&&(this.tooManyColors=!0),this.updatePalette(P),B.length===1?B[0]:B},x.prototype.updatePalette=function(k){if(!this.tooManyColors){var L=this.maxColors,P=this.paletteTexture,D=Math.ceil(k.length*.25/L);if(D>1){k=k.slice();for(var B=k.length*.25%L;B<D*L;B++)k.push(0,0,0,0)}P.height<D&&P.resize(L,D),P.subimage({width:Math.min(k.length*.25,L),height:D,data:k},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(k){k.sizeBuffer.destroy(),k.positionBuffer.destroy(),k.positionFractBuffer.destroy(),k.colorBuffer.destroy(),k.activation.forEach(function(L){return L&&L.destroy&&L.destroy()}),k.selectionBuffer.destroy(),k.elements&&k.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(k){return k&&k.destroy&&k.destroy()}),this};var A=Os,S=t(function(L,P){var D=new w(L,P),B=D.render.bind(D);return A(B,{render:B,update:D.update.bind(D),draw:D.draw.bind(D),destroy:D.destroy.bind(D),regl:D.regl,gl:D.gl,canvas:D.gl.canvas,groups:D.groups,markers:D.markerCache,palette:D.palette}),B},"reglScatter2d");return dL=S,dL}t(Dde,"requireBundle");var t_={exports:{}},CJ;function I7e(){if(CJ)return t_.exports;CJ=1,t_.exports=e,t_.exports.default=e;function e(R,F,O){O=O||2;var q=F&&F.length,H=q?F[0]*O:R.length,j=r(R,0,H,O,!0),X=[];if(!j||j.next===j.prev)return X;var G,$,te,ee,ie,se,W;if(q&&(j=u(R,F,j,O)),R.length>80*O){G=te=R[0],$=ee=R[1];for(var ne=O;ne<H;ne+=O)ie=R[ne],se=R[ne+1],ie<G&&(G=ie),se<$&&($=se),ie>te&&(te=ie),se>ee&&(ee=se);W=Math.max(te-G,ee-$),W=W!==0?32767/W:0}return i(j,X,O,G,$,W,0),X}t(e,"earcut$1");function r(R,F,O,q,H){var j,X;if(H===z(R,F,O,q)>0)for(j=F;j<O;j+=q)X=P(j,R[j],R[j+1],X);else for(j=O-q;j>=F;j-=q)X=P(j,R[j],R[j+1],X);return X&&_(X,X.next)&&(D(X),X=X.next),X}t(r,"linkedList");function n(R,F){if(!R)return R;F||(F=R);var O=R,q;do if(q=!1,!O.steiner&&(_(O,O.next)||T(O.prev,O,O.next)===0)){if(D(O),O=F=O.prev,O===O.next)break;q=!0}else O=O.next;while(q||O!==F);return F}t(n,"filterPoints");function i(R,F,O,q,H,j,X){if(!!R){!X&&j&&d(R,q,H,j);for(var G=R,$,te;R.prev!==R.next;){if($=R.prev,te=R.next,j?o(R,q,H,j):s(R)){F.push($.i/O|0),F.push(R.i/O|0),F.push(te.i/O|0),D(R),R=te.next,G=te.next;continue}if(R=te,R===G){X?X===1?(R=a(n(R),F,O),i(R,F,O,q,H,j,2)):X===2&&l(R,F,O,q,H,j):i(n(R),F,O,q,H,j,1);break}}}}t(i,"earcutLinked");function s(R){var F=R.prev,O=R,q=R.next;if(T(F,O,q)>=0)return!1;for(var H=F.x,j=O.x,X=q.x,G=F.y,$=O.y,te=q.y,ee=H<j?H<X?H:X:j<X?j:X,ie=G<$?G<te?G:te:$<te?$:te,se=H>j?H>X?H:X:j>X?j:X,W=G>$?G>te?G:te:$>te?$:te,ne=q.next;ne!==F;){if(ne.x>=ee&&ne.x<=se&&ne.y>=ie&&ne.y<=W&&m(H,G,j,$,X,te,ne.x,ne.y)&&T(ne.prev,ne,ne.next)>=0)return!1;ne=ne.next}return!0}t(s,"isEar");function o(R,F,O,q){var H=R.prev,j=R,X=R.next;if(T(H,j,X)>=0)return!1;for(var G=H.x,$=j.x,te=X.x,ee=H.y,ie=j.y,se=X.y,W=G<$?G<te?G:te:$<te?$:te,ne=ee<ie?ee<se?ee:se:ie<se?ie:se,he=G>$?G>te?G:te:$>te?$:te,re=ee>ie?ee>se?ee:se:ie>se?ie:se,ae=p(W,ne,F,O,q),fe=p(he,re,F,O,q),ce=R.prevZ,xe=R.nextZ;ce&&ce.z>=ae&&xe&&xe.z<=fe;){if(ce.x>=W&&ce.x<=he&&ce.y>=ne&&ce.y<=re&&ce!==H&&ce!==X&&m(G,ee,$,ie,te,se,ce.x,ce.y)&&T(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,xe.x>=W&&xe.x<=he&&xe.y>=ne&&xe.y<=re&&xe!==H&&xe!==X&&m(G,ee,$,ie,te,se,xe.x,xe.y)&&T(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;ce&&ce.z>=ae;){if(ce.x>=W&&ce.x<=he&&ce.y>=ne&&ce.y<=re&&ce!==H&&ce!==X&&m(G,ee,$,ie,te,se,ce.x,ce.y)&&T(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;xe&&xe.z<=fe;){if(xe.x>=W&&xe.x<=he&&xe.y>=ne&&xe.y<=re&&xe!==H&&xe!==X&&m(G,ee,$,ie,te,se,xe.x,xe.y)&&T(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}t(o,"isEarHashed");function a(R,F,O){var q=R;do{var H=q.prev,j=q.next.next;!_(H,j)&&M(H,q,q.next,j)&&S(H,j)&&S(j,H)&&(F.push(H.i/O|0),F.push(q.i/O|0),F.push(j.i/O|0),D(q),D(q.next),q=R=j),q=q.next}while(q!==R);return n(q)}t(a,"cureLocalIntersections");function l(R,F,O,q,H,j){var X=R;do{for(var G=X.next.next;G!==X.prev;){if(X.i!==G.i&&y(X,G)){var $=L(X,G);X=n(X,X.next),$=n($,$.next),i(X,F,O,q,H,j,0),i($,F,O,q,H,j,0);return}G=G.next}X=X.next}while(X!==R)}t(l,"splitEarcut");function u(R,F,O,q){var H=[],j,X,G,$,te;for(j=0,X=F.length;j<X;j++)G=F[j]*q,$=j<X-1?F[j+1]*q:R.length,te=r(R,G,$,q,!1),te===te.next&&(te.steiner=!0),H.push(b(te));for(H.sort(f),j=0;j<H.length;j++)O=h(H[j],O);return O}t(u,"eliminateHoles");function f(R,F){return R.x-F.x}t(f,"compareX");function h(R,F){var O=v(R,F);if(!O)return F;var q=L(O,R);return n(q,q.next),n(O,O.next)}t(h,"eliminateHole");function v(R,F){var O=F,q=R.x,H=R.y,j=-1/0,X;do{if(H<=O.y&&H>=O.next.y&&O.next.y!==O.y){var G=O.x+(H-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(G<=q&&G>j&&(j=G,X=O.x<O.next.x?O:O.next,G===q))return X}O=O.next}while(O!==F);if(!X)return null;var $=X,te=X.x,ee=X.y,ie=1/0,se;O=X;do q>=O.x&&O.x>=te&&q!==O.x&&m(H<ee?q:j,H,te,ee,H<ee?j:q,H,O.x,O.y)&&(se=Math.abs(H-O.y)/(q-O.x),S(O,R)&&(se<ie||se===ie&&(O.x>X.x||O.x===X.x&&c(X,O)))&&(X=O,ie=se)),O=O.next;while(O!==$);return X}t(v,"findHoleBridge");function c(R,F){return T(R.prev,R,F.prev)<0&&T(F.next,R,R.next)<0}t(c,"sectorContainsSector");function d(R,F,O,q){var H=R;do H.z===0&&(H.z=p(H.x,H.y,F,O,q)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==R);H.prevZ.nextZ=null,H.prevZ=null,g(H)}t(d,"indexCurve");function g(R){var F,O,q,H,j,X,G,$,te=1;do{for(O=R,R=null,j=null,X=0;O;){for(X++,q=O,G=0,F=0;F<te&&(G++,q=q.nextZ,!!q);F++);for($=te;G>0||$>0&&q;)G!==0&&($===0||!q||O.z<=q.z)?(H=O,O=O.nextZ,G--):(H=q,q=q.nextZ,$--),j?j.nextZ=H:R=H,H.prevZ=j,j=H;O=q}j.nextZ=null,te*=2}while(X>1);return R}t(g,"sortLinked");function p(R,F,O,q,H){return R=(R-O)*H|0,F=(F-q)*H|0,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,F=(F|F<<8)&16711935,F=(F|F<<4)&252645135,F=(F|F<<2)&858993459,F=(F|F<<1)&1431655765,R|F<<1}t(p,"zOrder");function b(R){var F=R,O=R;do(F.x<O.x||F.x===O.x&&F.y<O.y)&&(O=F),F=F.next;while(F!==R);return O}t(b,"getLeftmost");function m(R,F,O,q,H,j,X,G){return(H-X)*(F-G)>=(R-X)*(j-G)&&(R-X)*(q-G)>=(O-X)*(F-G)&&(O-X)*(j-G)>=(H-X)*(q-G)}t(m,"pointInTriangle");function y(R,F){return R.next.i!==F.i&&R.prev.i!==F.i&&!A(R,F)&&(S(R,F)&&S(F,R)&&k(R,F)&&(T(R.prev,R,F.prev)||T(R,F.prev,F))||_(R,F)&&T(R.prev,R,R.next)>0&&T(F.prev,F,F.next)>0)}t(y,"isValidDiagonal");function T(R,F,O){return(F.y-R.y)*(O.x-F.x)-(F.x-R.x)*(O.y-F.y)}t(T,"area");function _(R,F){return R.x===F.x&&R.y===F.y}t(_,"equals");function M(R,F,O,q){var H=x(T(R,F,O)),j=x(T(R,F,q)),X=x(T(O,q,R)),G=x(T(O,q,F));return!!(H!==j&&X!==G||H===0&&w(R,O,F)||j===0&&w(R,q,F)||X===0&&w(O,R,q)||G===0&&w(O,F,q))}t(M,"intersects");function w(R,F,O){return F.x<=Math.max(R.x,O.x)&&F.x>=Math.min(R.x,O.x)&&F.y<=Math.max(R.y,O.y)&&F.y>=Math.min(R.y,O.y)}t(w,"onSegment");function x(R){return R>0?1:R<0?-1:0}t(x,"sign");function A(R,F){var O=R;do{if(O.i!==R.i&&O.next.i!==R.i&&O.i!==F.i&&O.next.i!==F.i&&M(O,O.next,R,F))return!0;O=O.next}while(O!==R);return!1}t(A,"intersectsPolygon");function S(R,F){return T(R.prev,R,R.next)<0?T(R,F,R.next)>=0&&T(R,R.prev,F)>=0:T(R,F,R.prev)<0||T(R,R.next,F)<0}t(S,"locallyInside");function k(R,F){var O=R,q=!1,H=(R.x+F.x)/2,j=(R.y+F.y)/2;do O.y>j!=O.next.y>j&&O.next.y!==O.y&&H<(O.next.x-O.x)*(j-O.y)/(O.next.y-O.y)+O.x&&(q=!q),O=O.next;while(O!==R);return q}t(k,"middleInside");function L(R,F){var O=new B(R.i,R.x,R.y),q=new B(F.i,F.x,F.y),H=R.next,j=F.prev;return R.next=F,F.prev=R,O.next=H,H.prev=O,q.next=O,O.prev=q,j.next=q,q.prev=j,q}t(L,"splitPolygon");function P(R,F,O,q){var H=new B(R,F,O);return q?(H.next=q.next,H.prev=q,q.next.prev=H,q.next=H):(H.prev=H,H.next=H),H}t(P,"insertNode");function D(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}t(D,"removeNode");function B(R,F,O){this.i=R,this.x=F,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}t(B,"Node"),e.deviation=function(R,F,O,q){var H=F&&F.length,j=H?F[0]*O:R.length,X=Math.abs(z(R,0,j,O));if(H)for(var G=0,$=F.length;G<$;G++){var te=F[G]*O,ee=G<$-1?F[G+1]*O:R.length;X-=Math.abs(z(R,te,ee,O))}var ie=0;for(G=0;G<q.length;G+=3){var se=q[G]*O,W=q[G+1]*O,ne=q[G+2]*O;ie+=Math.abs((R[se]-R[ne])*(R[W+1]-R[se+1])-(R[se]-R[W])*(R[ne+1]-R[se+1]))}return X===0&&ie===0?0:Math.abs((ie-X)/X)};function z(R,F,O,q){for(var H=0,j=F,X=O-q;j<O;j+=q)H+=(R[X]-R[j])*(R[j+1]+R[X+1]),X=j;return H}return t(z,"signedArea"),e.flatten=function(R){for(var F=R[0][0].length,O={vertices:[],holes:[],dimensions:F},q=0,H=0;H<R.length;H++){for(var j=0;j<R[H].length;j++)for(var X=0;X<F;X++)O.vertices.push(R[H][j][X]);H>0&&(q+=R[H-1].length,O.holes.push(q))}return O},t_.exports}t(I7e,"requireEarcut");var pL,LJ;function z7e(){if(LJ)return pL;LJ=1;var e=Gy();pL=r;function r(n,i,s){if(!n||n.length==null)throw Error("Argument should be an array");i==null&&(i=1),s==null&&(s=e(n,i));for(var o=0;o<i;o++){var a=s[i+o],l=s[o],u=o,f=n.length;if(a===1/0&&l===-1/0)for(u=o;u<f;u+=i)n[u]=n[u]===a?1:n[u]===l?0:.5;else if(a===1/0)for(u=o;u<f;u+=i)n[u]=n[u]===a?1:0;else if(l===-1/0)for(u=o;u<f;u+=i)n[u]=n[u]===l?0:1;else{var h=a-l;for(u=o;u<f;u+=i)isNaN(n[u])||(n[u]=h===0?.5:(n[u]-l)/h)}}return n}return t(r,"normalize"),pL}t(z7e,"requireArrayNormalize");var gL,RJ;function F7e(){return RJ||(RJ=1,gL=t(function(){var e,r;if(typeof WeakMap!="function")return!1;try{e=new WeakMap([[r={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(e)!=="[object WeakMap]"||typeof e.set!="function"||e.set({},1)!==e||typeof e.delete!="function"||typeof e.has!="function"||e.get(r)!=="one")},"isImplemented$8")),gL}t(F7e,"requireIsImplemented$8");var yL,PJ;function B7e(){return PJ||(PJ=1,yL=t(function(){},"noop$1")),yL}t(B7e,"requireNoop");var mL,DJ;function N0(){if(DJ)return mL;DJ=1;var e=B7e()();return mL=t(function(r){return r!==e&&r!==null},"isValue"),mL}t(N0,"requireIsValue");var xL,IJ;function Ide(){if(IJ)return xL;IJ=1;var e=Object.create,r=Object.getPrototypeOf,n={};return xL=t(function(){var i=Object.setPrototypeOf,s=arguments[0]||e;return typeof i!="function"?!1:r(i(s(null),n))===n},"isImplemented$7"),xL}t(Ide,"requireIsImplemented$7");var bL,zJ;function zde(){if(zJ)return bL;zJ=1;var e=N0(),r={function:!0,object:!0};return bL=t(function(n){return e(n)&&r[typeof n]||!1},"isObject"),bL}t(zde,"requireIsObject");var _L,FJ;function wp(){if(FJ)return _L;FJ=1;var e=N0();return _L=t(function(r){if(!e(r))throw new TypeError("Cannot use null or undefined");return r},"validValue"),_L}t(wp,"requireValidValue");var wL,BJ;function O7e(){if(BJ)return wL;BJ=1;var e=Object.create,r;return Ide()()||(r=Fde()),wL=function(){var n,i,s;return!r||r.level!==1?e:(n={},i={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(o){if(o==="__proto__"){i[o]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}i[o]=s}),Object.defineProperties(n,i),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:n}),function(o,a){return e(o===null?n:o,a)})}(),wL}t(O7e,"requireCreate");var TL,OJ;function Fde(){if(OJ)return TL;OJ=1;var e=zde(),r=wp(),n=Object.prototype.isPrototypeOf,i=Object.defineProperty,s={configurable:!0,enumerable:!1,writable:!0,value:void 0},o;return o=t(function(a,l){if(r(a),l===null||e(l))return a;throw new TypeError("Prototype must be null or an object")},"validate"),TL=function(a){var l,u;return a?(a.level===2?a.set?(u=a.set,l=t(function(f,h){return u.call(o(f,h),h),f},"fn")):l=t(function(f,h){return o(f,h).__proto__=h,f},"fn"):l=t(function f(h,v){var c;return o(h,v),c=n.call(f.nullPolyfill,h),c&&delete f.nullPolyfill.__proto__,v===null&&(v=f.nullPolyfill),h.__proto__=v,c&&i(f.nullPolyfill,"__proto__",s),h},"self"),Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a=Object.create(null),l={},u,f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{u=f.set,u.call(a,l)}catch{}if(Object.getPrototypeOf(a)===l)return{set:u,level:2}}return a.__proto__=l,Object.getPrototypeOf(a)===l?{level:2}:(a={},a.__proto__=l,Object.getPrototypeOf(a)===l?{level:1}:!1)}()),O7e(),TL}t(Fde,"requireShim$5");var AL,NJ;function oB(){return NJ||(NJ=1,AL=Ide()()?Object.setPrototypeOf:Fde()),AL}t(oB,"requireSetPrototypeOf");var SL,qJ;function N7e(){if(qJ)return SL;qJ=1;var e=zde();return SL=t(function(r){if(!e(r))throw new TypeError(r+" is not an Object");return r},"validObject"),SL}t(N7e,"requireValidObject");var ML,UJ;function q7e(){if(UJ)return ML;UJ=1;var e=Object.create(null),r=Math.random;return ML=t(function(){var n;do n=r().toString(36).slice(2);while(e[n]);return n},"randomUniq"),ML}t(q7e,"requireRandomUniq");var kL={exports:{}},EL,HJ;function Yy(){if(HJ)return EL;HJ=1;var e=void 0;return EL=t(function(r){return r!==e&&r!==null},"is$4"),EL}t(Yy,"requireIs$4");var CL,$J;function sB(){if($J)return CL;$J=1;var e=Yy(),r={object:!0,function:!0,undefined:!0};return CL=t(function(n){return e(n)?hasOwnProperty.call(r,typeof n):!1},"is$3"),CL}t(sB,"requireIs$3");var LL,VJ;function U7e(){if(VJ)return LL;VJ=1;var e=sB();return LL=t(function(r){if(!e(r))return!1;try{return r.constructor?r.constructor.prototype===r:!1}catch{return!1}},"is$2"),LL}t(U7e,"requireIs$2");var RL,GJ;function H7e(){if(GJ)return RL;GJ=1;var e=U7e();return RL=t(function(r){if(typeof r!="function"||!hasOwnProperty.call(r,"length"))return!1;try{if(typeof r.length!="number"||typeof r.call!="function"||typeof r.apply!="function")return!1}catch{return!1}return!e(r)},"is$1"),RL}t(H7e,"requireIs$1");var PL,jJ;function Bde(){if(jJ)return PL;jJ=1;var e=H7e(),r=/^\s*class[\s{/}]/,n=Function.prototype.toString;return PL=t(function(i){return!(!e(i)||r.test(n.call(i)))},"is"),PL}t(Bde,"requireIs");var DL,YJ;function $7e(){return YJ||(YJ=1,DL=t(function(){var e=Object.assign,r;return typeof e!="function"?!1:(r={foo:"raz"},e(r,{bar:"dwa"},{trzy:"trzy"}),r.foo+r.bar+r.trzy==="razdwatrzy")},"isImplemented$6")),DL}t($7e,"requireIsImplemented$6");var IL,WJ;function V7e(){return WJ||(WJ=1,IL=t(function(){try{return Object.keys("primitive"),!0}catch{return!1}},"isImplemented$5")),IL}t(V7e,"requireIsImplemented$5");var zL,XJ;function G7e(){if(XJ)return zL;XJ=1;var e=N0(),r=Object.keys;return zL=t(function(n){return r(e(n)?Object(n):n)},"shim$4"),zL}t(G7e,"requireShim$4");var FL,ZJ;function j7e(){return ZJ||(ZJ=1,FL=V7e()()?Object.keys:G7e()),FL}t(j7e,"requireKeys");var BL,KJ;function Y7e(){if(KJ)return BL;KJ=1;var e=j7e(),r=wp(),n=Math.max;return BL=t(function(i,s){var o,a,l=n(arguments.length,2),u;for(i=Object(r(i)),u=t(function(f){try{i[f]=s[f]}catch(h){o||(o=h)}},"assign"),a=1;a<l;++a)s=arguments[a],e(s).forEach(u);if(o!==void 0)throw o;return i},"shim$3"),BL}t(Y7e,"requireShim$3");var OL,JJ;function lB(){return JJ||(JJ=1,OL=$7e()()?Object.assign:Y7e()),OL}t(lB,"requireAssign");var NL,QJ;function Ode(){if(QJ)return NL;QJ=1;var e=N0(),r=Array.prototype.forEach,n=Object.create,i=t(function(s,o){var a;for(a in s)o[a]=s[a]},"process");return NL=t(function(s){var o=n(null);return r.call(arguments,function(a){!e(a)||i(Object(a),o)}),o},"normalizeOptions"),NL}t(Ode,"requireNormalizeOptions");var qL,eQ;function W7e(){if(eQ)return qL;eQ=1;var e="razdwatrzy";return qL=t(function(){return typeof e.contains!="function"?!1:e.contains("dwa")===!0&&e.contains("foo")===!1},"isImplemented$4"),qL}t(W7e,"requireIsImplemented$4");var UL,tQ;function X7e(){if(tQ)return UL;tQ=1;var e=String.prototype.indexOf;return UL=t(function(r){return e.call(this,r,arguments[1])>-1},"shim$2"),UL}t(X7e,"requireShim$2");var HL,rQ;function Nde(){return rQ||(rQ=1,HL=W7e()()?String.prototype.contains:X7e()),HL}t(Nde,"requireContains");var aQ;function Tp(){if(aQ)return kL.exports;aQ=1;var e=Yy(),r=Bde(),n=lB(),i=Ode(),s=Nde(),o=kL.exports=function(a,l){var u,f,h,v,c;return arguments.length<2||typeof a!="string"?(v=l,l=a,a=null):v=arguments[2],e(a)?(u=s.call(a,"c"),f=s.call(a,"e"),h=s.call(a,"w")):(u=h=!0,f=!1),c={value:l,configurable:u,enumerable:f,writable:h},v?n(i(v),c):c};return o.gs=function(a,l,u){var f,h,v,c;return typeof a!="string"?(v=u,u=l,l=a,a=null):v=arguments[3],e(l)?r(l)?e(u)?r(u)||(v=u,u=void 0):u=void 0:(v=l,l=u=void 0):l=void 0,e(a)?(f=s.call(a,"c"),h=s.call(a,"e")):(f=!0,h=!1),c={get:l,set:u,configurable:f,enumerable:h},v?n(i(v),c):c},kL.exports}t(Tp,"requireD");var $L,nQ;function _3(){if(nQ)return $L;nQ=1;var e=Object.prototype.toString,r=e.call(function(){return arguments}());return $L=t(function(n){return e.call(n)===r},"isArguments"),$L}t(_3,"requireIsArguments");var VL,iQ;function w3(){if(iQ)return VL;iQ=1;var e=Object.prototype.toString,r=e.call("");return VL=t(function(n){return typeof n=="string"||n&&typeof n=="object"&&(n instanceof String||e.call(n)===r)||!1},"isString"),VL}t(w3,"requireIsString");var GL={exports:{}},jL,oQ;function Z7e(){return oQ||(oQ=1,jL=t(function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array},"isImplemented$3")),jL}t(Z7e,"requireIsImplemented$3");var YL,sQ;function K7e(){if(sQ)return YL;sQ=1;var e=t(function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")},"naiveFallback");return YL=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}(),YL}t(K7e,"requireImplementation");var WL,lQ;function T3(){return lQ||(lQ=1,WL=Z7e()()?globalThis:K7e()),WL}t(T3,"requireGlobalThis");var XL,uQ;function J7e(){if(uQ)return XL;uQ=1;var e=T3(),r={object:!0,symbol:!0};return XL=t(function(){var n=e.Symbol,i;if(typeof n!="function")return!1;i=n("test symbol");try{String(i)}catch{return!1}return!(!r[typeof n.iterator]||!r[typeof n.toPrimitive]||!r[typeof n.toStringTag])},"isImplemented$2"),XL}t(J7e,"requireIsImplemented$2");var ZL,fQ;function Q7e(){return fQ||(fQ=1,ZL=t(function(e){return e?typeof e=="symbol"?!0:!e.constructor||e.constructor.name!=="Symbol"?!1:e[e.constructor.toStringTag]==="Symbol":!1},"isSymbol")),ZL}t(Q7e,"requireIsSymbol");var KL,cQ;function qde(){if(cQ)return KL;cQ=1;var e=Q7e();return KL=t(function(r){if(!e(r))throw new TypeError(r+" is not a symbol");return r},"validateSymbol"),KL}t(qde,"requireValidateSymbol");var JL,hQ;function e9e(){if(hQ)return JL;hQ=1;var e=Tp(),r=Object.create,n=Object.defineProperty,i=Object.prototype,s=r(null);return JL=t(function(o){for(var a=0,l,u;s[o+(a||"")];)++a;return o+=a||"",s[o]=!0,l="@@"+o,n(i,l,e.gs(null,function(f){u||(u=!0,n(this,l,e(f)),u=!1)})),l},"generateName"),JL}t(e9e,"requireGenerateName");var QL,vQ;function t9e(){if(vQ)return QL;vQ=1;var e=Tp(),r=T3().Symbol;return QL=t(function(n){return Object.defineProperties(n,{hasInstance:e("",r&&r.hasInstance||n("hasInstance")),isConcatSpreadable:e("",r&&r.isConcatSpreadable||n("isConcatSpreadable")),iterator:e("",r&&r.iterator||n("iterator")),match:e("",r&&r.match||n("match")),replace:e("",r&&r.replace||n("replace")),search:e("",r&&r.search||n("search")),species:e("",r&&r.species||n("species")),split:e("",r&&r.split||n("split")),toPrimitive:e("",r&&r.toPrimitive||n("toPrimitive")),toStringTag:e("",r&&r.toStringTag||n("toStringTag")),unscopables:e("",r&&r.unscopables||n("unscopables"))})},"standardSymbols"),QL}t(t9e,"requireStandardSymbols");var eR,dQ;function r9e(){if(dQ)return eR;dQ=1;var e=Tp(),r=qde(),n=Object.create(null);return eR=t(function(i){return Object.defineProperties(i,{for:e(function(s){return n[s]?n[s]:n[s]=i(String(s))}),keyFor:e(function(s){var o;r(s);for(o in n)if(n[o]===s)return o})})},"symbolRegistry"),eR}t(r9e,"requireSymbolRegistry");var tR,pQ;function a9e(){if(pQ)return tR;pQ=1;var e=Tp(),r=qde(),n=T3().Symbol,i=e9e(),s=t9e(),o=r9e(),a=Object.create,l=Object.defineProperties,u=Object.defineProperty,f,h,v;if(typeof n=="function")try{String(n()),v=!0}catch{}else n=null;return h=t(function(d){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return f(d)},"Symbol"),tR=f=t(function c(d){var g;if(this instanceof c)throw new TypeError("Symbol is not a constructor");return v?n(d):(g=a(h.prototype),d=d===void 0?"":String(d),l(g,{__description__:e("",d),__name__:e("",i(d))}))},"Symbol"),s(f),o(f),l(h.prototype,{constructor:e(f),toString:e("",function(){return this.__name__})}),l(f.prototype,{toString:e(function(){return"Symbol ("+r(this).__description__+")"}),valueOf:e(function(){return r(this)})}),u(f.prototype,f.toPrimitive,e("",function(){var c=r(this);return typeof c=="symbol"?c:c.toString()})),u(f.prototype,f.toStringTag,e("c","Symbol")),u(h.prototype,f.toStringTag,e("c",f.prototype[f.toStringTag])),u(h.prototype,f.toPrimitive,e("c",f.prototype[f.toPrimitive])),tR}t(a9e,"requirePolyfill$1");var rR,gQ;function q0(){return gQ||(gQ=1,rR=J7e()()?T3().Symbol:a9e()),rR}t(q0,"requireEs6Symbol");var aR,yQ;function n9e(){if(yQ)return aR;yQ=1;var e=wp();return aR=t(function(){return e(this).length=0,this},"clear"),aR}t(n9e,"requireClear");var nR,mQ;function Ex(){return mQ||(mQ=1,nR=t(function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e},"validCallable")),nR}t(Ex,"requireValidCallable");var iR,xQ;function i9e(){if(xQ)return iR;xQ=1;var e=Yy(),r=sB(),n=Object.prototype.toString;return iR=t(function(i){if(!e(i))return null;if(r(i)){var s=i.toString;if(typeof s!="function"||s===n)return null}try{return""+i}catch{return null}},"coerce"),iR}t(i9e,"requireCoerce");var oR,bQ;function o9e(){return bQ||(bQ=1,oR=t(function(e){try{return e.toString()}catch{try{return String(e)}catch{return null}}},"safeToString")),oR}t(o9e,"requireSafeToString");var sR,_Q;function s9e(){if(_Q)return sR;_Q=1;var e=o9e(),r=/[\n\r\u2028\u2029]/g;return sR=t(function(n){var i=e(n);return i===null?"<Non-coercible to string value>":(i.length>100&&(i=i.slice(0,99)+"\u2026"),i=i.replace(r,function(s){switch(s){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),i)},"toShortString"),sR}t(s9e,"requireToShortString");var lR,wQ;function Ude(){if(wQ)return lR;wQ=1;var e=Yy(),r=sB(),n=i9e(),i=s9e(),s=t(function(o,a){return o.replace("%v",i(a))},"resolveMessage");return lR=t(function(o,a,l){if(!r(l))throw new TypeError(s(a,o));if(!e(o)){if("default"in l)return l.default;if(l.isOptional)return null}var u=n(l.errorMessage);throw e(u)||(u=a),new TypeError(s(u,o))},"resolveException"),lR}t(Ude,"requireResolveException");var uR,TQ;function l9e(){if(TQ)return uR;TQ=1;var e=Ude(),r=Yy();return uR=t(function(n){return r(n)?n:e(n,"Cannot use %v",arguments[1])},"ensure$1"),uR}t(l9e,"requireEnsure$1");var fR,AQ;function u9e(){if(AQ)return fR;AQ=1;var e=Ude(),r=Bde();return fR=t(function(n){return r(n)?n:e(n,"%v is not a plain function",arguments[1])},"ensure"),fR}t(u9e,"requireEnsure");var cR,SQ;function f9e(){return SQ||(SQ=1,cR=t(function(){var e=Array.from,r,n;return typeof e!="function"?!1:(r=["raz","dwa"],n=e(r),Boolean(n&&n!==r&&n[1]==="dwa"))},"isImplemented$1")),cR}t(f9e,"requireIsImplemented$1");var hR,MQ;function c9e(){if(MQ)return hR;MQ=1;var e=Object.prototype.toString,r=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);return hR=t(function(n){return typeof n=="function"&&r(e.call(n))},"isFunction"),hR}t(c9e,"requireIsFunction");var vR,kQ;function h9e(){return kQ||(kQ=1,vR=t(function(){var e=Math.sign;return typeof e!="function"?!1:e(10)===1&&e(-20)===-1},"isImplemented")),vR}t(h9e,"requireIsImplemented");var dR,EQ;function v9e(){return EQ||(EQ=1,dR=t(function(e){return e=Number(e),isNaN(e)||e===0?e:e>0?1:-1},"shim$1")),dR}t(v9e,"requireShim$1");var pR,CQ;function d9e(){return CQ||(CQ=1,pR=h9e()()?Math.sign:v9e()),pR}t(d9e,"requireSign");var gR,LQ;function p9e(){if(LQ)return gR;LQ=1;var e=d9e(),r=Math.abs,n=Math.floor;return gR=t(function(i){return isNaN(i)?0:(i=Number(i),i===0||!isFinite(i)?i:e(i)*n(r(i)))},"toInteger"),gR}t(p9e,"requireToInteger");var yR,RQ;function g9e(){if(RQ)return yR;RQ=1;var e=p9e(),r=Math.max;return yR=t(function(n){return r(0,e(n))},"toPosInteger"),yR}t(g9e,"requireToPosInteger");var mR,PQ;function y9e(){if(PQ)return mR;PQ=1;var e=q0().iterator,r=_3(),n=c9e(),i=g9e(),s=Ex(),o=wp(),a=N0(),l=w3(),u=Array.isArray,f=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},v=Object.defineProperty;return mR=t(function(c){var d=arguments[1],g=arguments[2],p,b,m,y,T,_,M,w,x,A;if(c=Object(o(c)),a(d)&&s(d),!this||this===Array||!n(this)){if(!d){if(r(c))return T=c.length,T!==1?Array.apply(null,c):(y=new Array(1),y[0]=c[0],y);if(u(c)){for(y=new Array(T=c.length),b=0;b<T;++b)y[b]=c[b];return y}}y=[]}else p=this;if(!u(c)){if((x=c[e])!==void 0){for(M=s(x).call(c),p&&(y=new p),w=M.next(),b=0;!w.done;)A=d?f.call(d,g,w.value,b):w.value,p?(h.value=A,v(y,b,h)):y[b]=A,w=M.next(),++b;T=b}else if(l(c)){for(T=c.length,p&&(y=new p),b=0,m=0;b<T;++b)A=c[b],b+1<T&&(_=A.charCodeAt(0),_>=55296&&_<=56319&&(A+=c[++b])),A=d?f.call(d,g,A,m):A,p?(h.value=A,v(y,m,h)):y[m]=A,++m;T=m}}if(T===void 0)for(T=i(c.length),p&&(y=new p(T)),b=0;b<T;++b)A=d?f.call(d,g,c[b],b):c[b],p?(h.value=A,v(y,b,h)):y[b]=A;return p&&(h.value=null,y.length=T),y},"shim"),mR}t(y9e,"requireShim");var xR,DQ;function m9e(){return DQ||(DQ=1,xR=f9e()()?Array.from:y9e()),xR}t(m9e,"requireFrom");var bR,IQ;function x9e(){if(IQ)return bR;IQ=1;var e=m9e(),r=lB(),n=wp();return bR=t(function(i){var s=Object(n(i)),o=arguments[1],a=Object(arguments[2]);if(s!==i&&!o)return s;var l={};return o?e(o,function(u){(a.ensure||u in i)&&(l[u]=i[u])}):r(l,i),l},"copy"),bR}t(x9e,"requireCopy");var _R,zQ;function b9e(){if(zQ)return _R;zQ=1;var e=Ex(),r=wp(),n=Function.prototype.bind,i=Function.prototype.call,s=Object.keys,o=Object.prototype.propertyIsEnumerable;return _R=t(function(a,l){return function(u,f){var h,v=arguments[2],c=arguments[3];return u=Object(r(u)),e(f),h=s(u),c&&h.sort(typeof c=="function"?n.call(c,u):void 0),typeof a!="function"&&(a=h[a]),i.call(a,h,function(d,g){return o.call(u,d)?i.call(f,v,u[d],d,u,g):l})}},"_iterate"),_R}t(b9e,"require_iterate");var wR,FQ;function _9e(){return FQ||(FQ=1,wR=b9e()("forEach")),wR}t(_9e,"requireForEach");var TR,BQ;function w9e(){if(BQ)return TR;BQ=1;var e=Ex(),r=_9e(),n=Function.prototype.call;return TR=t(function(i,s){var o={},a=arguments[2];return e(s),r(i,function(l,u,f,h){o[u]=n.call(s,a,l,u,f,h)}),o},"map$1"),TR}t(w9e,"requireMap");var AR,OQ;function T9e(){if(OQ)return AR;OQ=1;var e=Yy(),r=l9e(),n=u9e(),i=x9e(),s=Ode(),o=w9e(),a=Function.prototype.bind,l=Object.defineProperty,u=Object.prototype.hasOwnProperty,f;return f=t(function(h,v,c){var d=r(v)&&n(v.value),g;return g=i(v),delete g.writable,delete g.value,g.get=function(){return!c.overwriteDefinition&&u.call(this,h)?d:(v.value=a.call(d,c.resolveContext?c.resolveContext(this):this),l(this,h,v),this[h])},g},"define"),AR=t(function(h){var v=s(arguments[1]);return e(v.resolveContext)&&n(v.resolveContext),o(h,function(c,d){return f(d,c,v)})},"autoBind"),AR}t(T9e,"requireAutoBind");var SR,NQ;function Hde(){if(NQ)return SR;NQ=1;var e=n9e(),r=lB(),n=Ex(),i=wp(),s=Tp(),o=T9e(),a=q0(),l=Object.defineProperty,u=Object.defineProperties,f;return SR=f=t(function(h,v){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");u(this,{__list__:s("w",i(h)),__context__:s("w",v),__nextIndex__:s("w",0)}),v&&(n(v.on),v.on("_add",this._onAdd),v.on("_delete",this._onDelete),v.on("_clear",this._onClear))},"Iterator"),delete f.prototype.constructor,u(f.prototype,r({_next:s(function(){var h;if(!!this.__list__){if(this.__redo__&&(h=this.__redo__.shift(),h!==void 0))return h;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:s(function(){return this._createResult(this._next())}),_createResult:s(function(h){return h===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(h)}}),_resolve:s(function(h){return this.__list__[h]}),_unBind:s(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:s(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},o({_onAdd:s(function(h){if(!(h>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){l(this,"__redo__",s("c",[h]));return}this.__redo__.forEach(function(v,c){v>=h&&(this.__redo__[c]=++v)},this),this.__redo__.push(h)}}),_onDelete:s(function(h){var v;h>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(v=this.__redo__.indexOf(h),v!==-1&&this.__redo__.splice(v,1),this.__redo__.forEach(function(c,d){c>h&&(this.__redo__[d]=--c)},this)))}),_onClear:s(function(){this.__redo__&&e.call(this.__redo__),this.__nextIndex__=0})}))),l(f.prototype,a.iterator,s(function(){return this})),SR}t(Hde,"requireEs6Iterator");var qQ;function A9e(){if(qQ)return GL.exports;qQ=1;var e=oB(),r=Nde(),n=Tp(),i=q0(),s=Hde(),o=Object.defineProperty,a;return a=GL.exports=function(l,u){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");s.call(this,l),u?r.call(u,"key+value")?u="key+value":r.call(u,"key")?u="key":u="value":u="value",o(this,"__kind__",n("",u))},e&&e(a,s),delete a.prototype.constructor,a.prototype=Object.create(s.prototype,{_resolve:n(function(l){return this.__kind__==="value"?this.__list__[l]:this.__kind__==="key+value"?[l,this.__list__[l]]:l})}),o(a.prototype,i.toStringTag,n("c","Array Iterator")),GL.exports}t(A9e,"requireArray");var MR={exports:{}},UQ;function S9e(){if(UQ)return MR.exports;UQ=1;var e=oB(),r=Tp(),n=q0(),i=Hde(),s=Object.defineProperty,o;return o=MR.exports=function(a){if(!(this instanceof o))throw new TypeError("Constructor requires 'new'");a=String(a),i.call(this,a),s(this,"__length__",r("",a.length))},e&&e(o,i),delete o.prototype.constructor,o.prototype=Object.create(i.prototype,{_next:r(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:r(function(a){var l=this.__list__[a],u;return this.__nextIndex__===this.__length__?l:(u=l.charCodeAt(0),u>=55296&&u<=56319?l+this.__list__[this.__nextIndex__++]:l)})}),s(o.prototype,n.toStringTag,r("c","String Iterator")),MR.exports}t(S9e,"requireString");var kR,HQ;function M9e(){if(HQ)return kR;HQ=1;var e=_3(),r=N0(),n=w3(),i=q0().iterator,s=Array.isArray;return kR=t(function(o){return r(o)?s(o)||n(o)||e(o)?!0:typeof o[i]=="function":!1},"isIterable"),kR}t(M9e,"requireIsIterable");var ER,$Q;function k9e(){if($Q)return ER;$Q=1;var e=M9e();return ER=t(function(r){if(!e(r))throw new TypeError(r+" is not iterable");return r},"validIterable"),ER}t(k9e,"requireValidIterable");var CR,VQ;function $de(){if(VQ)return CR;VQ=1;var e=_3(),r=w3(),n=A9e(),i=S9e(),s=k9e(),o=q0().iterator;return CR=t(function(a){return typeof s(a)[o]=="function"?a[o]():e(a)?new n(a):r(a)?new i(a):new n(a)},"get$1"),CR}t($de,"requireGet");var LR,GQ;function E9e(){if(GQ)return LR;GQ=1;var e=_3(),r=Ex(),n=w3(),i=$de(),s=Array.isArray,o=Function.prototype.call,a=Array.prototype.some;return LR=t(function(l,u){var f,h=arguments[2],v,c,d,g,p,b,m;if(s(l)||e(l)?f="array":n(l)?f="string":l=i(l),r(u),c=t(function(){d=!0},"doBreak"),f==="array"){a.call(l,function(y){return o.call(u,h,y,c),d});return}if(f==="string"){for(p=l.length,g=0;g<p&&(b=l[g],g+1<p&&(m=b.charCodeAt(0),m>=55296&&m<=56319&&(b+=l[++g])),o.call(u,h,b,c),!d);++g);return}for(v=l.next();!v.done;){if(o.call(u,h,v.value,c),d)return;v=l.next()}},"forOf"),LR}t(E9e,"requireForOf");var RR,jQ;function C9e(){return jQ||(jQ=1,RR=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()),RR}t(C9e,"requireIsNativeImplemented");var PR,YQ;function L9e(){if(YQ)return PR;YQ=1;var e=N0(),r=oB(),n=N7e(),i=wp(),s=q7e(),o=Tp(),a=$de(),l=E9e(),u=q0().toStringTag,f=C9e(),h=Array.isArray,v=Object.defineProperty,c=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf,g;return PR=g=t(function(){var p=arguments[0],b;if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");return b=f&&r&&WeakMap!==g?r(new WeakMap,d(this)):this,e(p)&&(h(p)||(p=a(p))),v(b,"__weakMapData__",o("c","$weakMap$"+s())),p&&l(p,function(m){i(m),b.set(m[0],m[1])}),b},"WeakMapPoly"),f&&(r&&r(g,WeakMap),g.prototype=Object.create(WeakMap.prototype,{constructor:o(g)})),Object.defineProperties(g.prototype,{delete:o(function(p){return c.call(n(p),this.__weakMapData__)?(delete p[this.__weakMapData__],!0):!1}),get:o(function(p){if(!!c.call(n(p),this.__weakMapData__))return p[this.__weakMapData__]}),has:o(function(p){return c.call(n(p),this.__weakMapData__)}),set:o(function(p,b){return v(n(p),this.__weakMapData__,o("c",b)),this}),toString:o(function(){return"[object WeakMap]"})}),v(g.prototype,u,o("c","WeakMap")),PR}t(L9e,"requirePolyfill");var DR,WQ;function Vde(){return WQ||(WQ=1,DR=F7e()()?WeakMap:L9e()),DR}t(Vde,"requireEs6WeakMap");var IR,XQ;function R9e(){return XQ||(XQ=1,IR=t(function(e,r,n){if(typeof Array.prototype.findIndex=="function")return e.findIndex(r,n);if(typeof r!="function")throw new TypeError("predicate must be a function");var i=Object(e),s=i.length;if(s===0)return-1;for(var o=0;o<s;o++)if(r.call(n,i[o],o,i))return o;return-1},"arrayFindIndex")),IR}t(R9e,"requireArrayFindIndex");var zR,ZQ;function Gde(){if(ZQ)return zR;ZQ=1;const e=z0(),r=Gy(),n=Os,i=nB(),s=md(),o=jy(),a=I7e(),l=z7e(),{float32:u,fract32:f}=iB(),h=Vde(),v=kx(),c=R9e();zR=d;function d(g,p){if(!(this instanceof d))return new d(g,p);if(typeof g=="function"?(p||(p={}),p.regl=g):p=g,p.length&&(p.positions=p),g=p.regl,!g.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=g._gl,this.regl=g,this.passes=[],this.shaders=d.shaders.has(g)?d.shaders.get(g):d.shaders.set(g,d.createShaders(g)).get(g),this.update(p)}return t(d,"Line2D"),d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new h,d.createShaders=function(g){let p=g.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),b={primitive:"triangle strip",instances:g.prop("count"),count:4,offset:0,uniforms:{miterMode:(_,M)=>M.join==="round"?2:1,miterLimit:g.prop("miterLimit"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),thickness:g.prop("thickness"),dashTexture:g.prop("dashTexture"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),dashLength:g.prop("dashLength"),viewport:(_,M)=>[M.viewport.x,M.viewport.y,_.viewportWidth,_.viewportHeight],depth:g.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:(_,M)=>!M.overlay},stencil:{enable:!1},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport")},m=g(n({vert:i("./rect-vert.glsl"),frag:i("./rect-frag.glsl"),attributes:{lineEnd:{buffer:p,divisor:0,stride:8,offset:0},lineTop:{buffer:p,divisor:0,stride:8,offset:4},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},b)),y;try{y=g(n({cull:{enable:!0,face:"back"},vert:i("./miter-vert.glsl"),frag:i("./miter-frag.glsl"),attributes:{lineEnd:{buffer:p,divisor:0,stride:8,offset:0},lineTop:{buffer:p,divisor:0,stride:8,offset:4},aColor:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:g.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},b))}catch{y=m}return{fill:g({primitive:"triangle",elements:(_,M)=>M.triangles,offset:0,vert:i("./fill-vert.glsl"),frag:i("./fill-frag.glsl"),uniforms:{scale:g.prop("scale"),color:g.prop("fill"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),viewport:(_,M)=>[M.viewport.x,M.viewport.y,_.viewportWidth,_.viewportHeight]},attributes:{position:{buffer:g.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8}},blend:b.blend,depth:{enable:!1},scissor:b.scissor,stencil:b.stencil,viewport:b.viewport}),rect:m,miter:y}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(...g){g.length&&this.update(...g),this.draw()},d.prototype.draw=function(...g){return(g.length?g:this.passes).forEach((p,b)=>{if(p&&Array.isArray(p))return this.draw(...p);typeof p=="number"&&(p=this.passes[p]),p&&p.count>1&&p.opacity&&(this.regl._refresh(),p.fill&&p.triangles&&p.triangles.length>2&&this.shaders.fill(p),p.thickness&&(p.scale[0]*p.viewport.width>d.precisionThreshold||p.scale[1]*p.viewport.height>d.precisionThreshold?this.shaders.rect(p):p.join==="rect"||!p.join&&(p.thickness<=2||p.count>=d.maxPoints)?this.shaders.rect(p):this.shaders.miter(p)))}),this},d.prototype.update=function(g){if(!g)return;g.length!=null?typeof g[0]=="number"&&(g=[{positions:g}]):Array.isArray(g)||(g=[g]);let{regl:p,gl:b}=this;if(g.forEach((y,T)=>{let _=this.passes[T];if(y!==void 0){if(y===null){this.passes[T]=null;return}if(typeof y[0]=="number"&&(y={positions:y}),y=s(y,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),_||(this.passes[T]=_={id:T,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:p.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:p.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},y=n({},d.defaults,y)),y.thickness!=null&&(_.thickness=parseFloat(y.thickness)),y.opacity!=null&&(_.opacity=parseFloat(y.opacity)),y.miterLimit!=null&&(_.miterLimit=parseFloat(y.miterLimit)),y.overlay!=null&&(_.overlay=!!y.overlay,T<d.maxLines&&(_.depth=2*(d.maxLines-1-T%d.maxLines)/d.maxLines-1)),y.join!=null&&(_.join=y.join),y.hole!=null&&(_.hole=y.hole),y.fill!=null&&(_.fill=y.fill?e(y.fill,"uint8"):null),y.viewport!=null&&(_.viewport=v(y.viewport)),_.viewport||(_.viewport=v([b.drawingBufferWidth,b.drawingBufferHeight])),y.close!=null&&(_.close=y.close),y.positions===null&&(y.positions=[]),y.positions){let x,A;if(y.positions.x&&y.positions.y){let P=y.positions.x,D=y.positions.y;A=_.count=Math.max(P.length,D.length),x=new Float64Array(A*2);for(let B=0;B<A;B++)x[B*2]=P[B],x[B*2+1]=D[B]}else x=o(y.positions,"float64"),A=_.count=Math.floor(x.length/2);let S=_.bounds=r(x,2);if(_.fill){let P=[],D={},B=0;for(let z=0,R=0,F=_.count;z<F;z++){let O=x[z*2],q=x[z*2+1];isNaN(O)||isNaN(q)||O==null||q==null?(O=x[B*2],q=x[B*2+1],D[z]=B):B=z,P[R++]=O,P[R++]=q}if(y.splitNull){_.count-1 in D||(D[_.count]=_.count-1);let z=Object.keys(D).map(Number).sort((q,H)=>q-H),R=[],F=0,O=_.hole!=null?_.hole[0]:null;if(O!=null){let q=c(z,H=>H>=O);z=z.slice(0,q),z.push(O)}for(let q=0;q<z.length;q++){let H=P.slice(F*2,z[q]*2).concat(O?P.slice(O*2):[]),j=(_.hole||[]).map(G=>G-O+(z[q]-F)),X=a(H,j);X=X.map(G=>G+F+(G+F<z[q]?0:O-z[q])),R.push(...X),F=z[q]+1}for(let q=0,H=R.length;q<H;q++)D[R[q]]!=null&&(R[q]=D[R[q]]);_.triangles=R}else{let z=a(P,_.hole||[]);for(let R=0,F=z.length;R<F;R++)D[z[R]]!=null&&(z[R]=D[z[R]]);_.triangles=z}}let k=new Float64Array(x);l(k,2,S);let L=new Float64Array(A*2+6);_.close?x[0]===x[A*2-2]&&x[1]===x[A*2-1]?(L[0]=k[A*2-4],L[1]=k[A*2-3]):(L[0]=k[A*2-2],L[1]=k[A*2-1]):(L[0]=k[0],L[1]=k[1]),L.set(k,2),_.close?x[0]===x[A*2-2]&&x[1]===x[A*2-1]?(L[A*2+2]=k[2],L[A*2+3]=k[3],_.count-=1):(L[A*2+2]=k[0],L[A*2+3]=k[1],L[A*2+4]=k[2],L[A*2+5]=k[3]):(L[A*2+2]=k[A*2-2],L[A*2+3]=k[A*2-1],L[A*2+4]=k[A*2-2],L[A*2+5]=k[A*2-1]);var M=u(L);_.positionBuffer(M);var w=f(L,M);_.positionFractBuffer(w)}if(y.range?_.range=y.range:_.range||(_.range=_.bounds),(y.range||y.positions)&&_.count){let x=_.bounds,A=x[2]-x[0],S=x[3]-x[1],k=_.range[2]-_.range[0],L=_.range[3]-_.range[1];_.scale=[A/k,S/L],_.translate=[-_.range[0]/k+x[0]/k||0,-_.range[1]/L+x[1]/L||0],_.scaleFract=f(_.scale),_.translateFract=f(_.translate)}if(y.dashes){let x=0,A;if(!y.dashes||y.dashes.length<2)x=1,A=new Uint8Array([255,255,255,255,255,255,255,255]);else{x=0;for(let L=0;L<y.dashes.length;++L)x+=y.dashes[L];A=new Uint8Array(x*d.dashMult);let S=0,k=255;for(let L=0;L<2;L++)for(let P=0;P<y.dashes.length;++P){for(let D=0,B=y.dashes[P]*d.dashMult*.5;D<B;++D)A[S++]=k;k^=255}}_.dashLength=x,_.dashTexture({channels:1,data:A,width:A.length,height:1,mag:"linear",min:"linear"},0,0)}if(y.color){let x=_.count,A=y.color;A||(A="transparent");let S=new Uint8Array(x*4+4);if(!Array.isArray(A)||typeof A[0]=="number"){let k=e(A,"uint8");for(let L=0;L<x+1;L++)S.set(k,L*4)}else{for(let k=0;k<x;k++){let L=e(A[k],"uint8");S.set(L,k*4)}S.set(e(A[0],"uint8"),x*4)}_.colorBuffer({usage:"dynamic",type:"uint8",data:S})}}}),g.length<this.passes.length){for(let y=g.length;y<this.passes.length;y++){let T=this.passes[y];!T||(T.colorBuffer.destroy(),T.positionBuffer.destroy(),T.dashTexture.destroy())}this.passes.length=g.length}let m=[];for(let y=0;y<this.passes.length;y++)this.passes[y]!==null&&m.push(this.passes[y]);return this.passes=m,this},d.prototype.destroy=function(){return this.passes.forEach(g=>{g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy()}),this.passes.length=0,this},zR}t(Gde,"requireReglLine2d");var FR,KQ;function P9e(){if(KQ)return FR;KQ=1;const e=Gy(),r=z0(),n=Pde(),i=md(),s=Os,o=jy(),{float32:a,fract32:l}=iB();FR=f;const u=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function f(h,v){if(typeof h=="function"?(v||(v={}),v.regl=h):v=h,v.length&&(v.positions=v),h=v.regl,!h.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");let c=h._gl,d,g,p,b,m,y,T={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return b=h.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),g=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=h.buffer({usage:"static",type:"float",data:u}),A(v),d=h({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:h.prop("range"),lineWidth:h.prop("lineWidth"),capSize:h.prop("capSize"),opacity:h.prop("opacity"),scale:h.prop("scale"),translate:h.prop("translate"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),viewport:(k,L)=>[L.viewport.x,L.viewport.y,k.viewportWidth,k.viewportHeight]},attributes:{color:{buffer:b,offset:(k,L)=>L.offset*4,divisor:1},position:{buffer:g,offset:(k,L)=>L.offset*8,divisor:1},positionFract:{buffer:p,offset:(k,L)=>L.offset*8,divisor:1},error:{buffer:m,offset:(k,L)=>L.offset*16,divisor:1},direction:{buffer:y,stride:24,offset:0},lineOffset:{buffer:y,stride:24,offset:8},capOffset:{buffer:y,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport"),stencil:!1,instances:h.prop("count"),count:u.length}),s(M,{update:A,draw:w,destroy:S,regl:h,gl:c,canvas:c.canvas,groups:_}),M;function M(k){k?A(k):k===null&&S(),w()}t(M,"error2d");function w(k){if(typeof k=="number")return x(k);k&&!Array.isArray(k)&&(k=[k]),h._refresh(),_.forEach((L,P)=>{if(!!L){if(k&&(k[P]?L.draw=!0:L.draw=!1),!L.draw){L.draw=!0;return}x(P)}})}t(w,"draw");function x(k){typeof k=="number"&&(k=_[k]),k!=null&&(!(k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1)||(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],d(k),k.after&&k.after(k)))}t(x,"drawGroup");function A(k){if(!k)return;k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);let L=0,P=0;if(M.groups=_=k.map((z,R)=>{let F=_[R];if(z)typeof z=="function"?z={after:z}:typeof z[0]=="number"&&(z={positions:z});else return F;return z=i(z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),F||(_[R]=F={id:R,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},z=s({},T,z)),n(F,z,[{lineWidth:O=>+O*.5,capSize:O=>+O*.5,opacity:parseFloat,errors:O=>(O=o(O),P+=O.length,O),positions:(O,q)=>(O=o(O,"float64"),q.count=Math.floor(O.length/2),q.bounds=e(O,2),q.offset=L,L+=q.count,O)},{color:(O,q)=>{let H=q.count;if(O||(O="transparent"),!Array.isArray(O)||typeof O[0]=="number"){let X=O;O=Array(H);for(let G=0;G<H;G++)O[G]=X}if(O.length<H)throw Error("Not enough colors");let j=new Uint8Array(H*4);for(let X=0;X<H;X++){let G=r(O[X],"uint8");j.set(G,X*4)}return j},range:(O,q,H)=>{let j=q.bounds;return O||(O=j),q.scale=[1/(O[2]-O[0]),1/(O[3]-O[1])],q.translate=[-O[0],-O[1]],q.scaleFract=l(q.scale),q.translateFract=l(q.translate),O},viewport:O=>{let q;return Array.isArray(O)?q={x:O[0],y:O[1],width:O[2]-O[0],height:O[3]-O[1]}:O?(q={x:O.x||O.left||0,y:O.y||O.top||0},O.right?q.width=O.right-q.x:q.width=O.w||O.width||0,O.bottom?q.height=O.bottom-q.y:q.height=O.h||O.height||0):q={x:0,y:0,width:c.drawingBufferWidth,height:c.drawingBufferHeight},q}}]),F}),L||P){let z=_.reduce((q,H,j)=>q+(H?H.count:0),0),R=new Float64Array(z*2),F=new Uint8Array(z*4),O=new Float32Array(z*4);_.forEach((q,H)=>{if(!q)return;let{positions:j,count:X,offset:G,color:$,errors:te}=q;!X||(F.set($,G*4),O.set(te,G*4),R.set(j,G*2))});var D=a(R);g(D);var B=l(R,D);p(B),b(F),m(O)}}t(A,"update");function S(){g.destroy(),p.destroy(),b.destroy(),m.destroy(),y.destroy()}t(S,"destroy")}return t(f,"Error2D"),FR}t(P9e,"requireReglError2d");var BR,JQ;function D9e(){if(JQ)return BR;JQ=1;var e=/[\'\"]/;return BR=t(function(n){return n?(e.test(n.charAt(0))&&(n=n.substr(1)),e.test(n.charAt(n.length-1))&&(n=n.substr(0,n.length-1)),n):""},"unquote"),BR}t(D9e,"requireUnquote");const jde=["inherit","initial","unset"],Yde=["caption","icon","menu","message-box","small-caption","status-bar"],Wde=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],Xde=["normal","italic","oblique"],Zde=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"];var OR,QQ;function I9e(){if(QQ)return OR;QQ=1;function e(i,s){if(typeof i!="string")return[i];var o=[i];typeof s=="string"||Array.isArray(s)?s={brackets:s}:s||(s={});var a=s.brackets?Array.isArray(s.brackets)?s.brackets:[s.brackets]:["{}","[]","()"],l=s.escape||"___",u=!!s.flat;a.forEach(function(v){var c=new RegExp(["\\",v[0],"[^\\",v[0],"\\",v[1],"]*\\",v[1]].join("")),d=[];function g(p,b,m){var y=o.push(p.slice(v[0].length,-v[1].length))-1;return d.push(y),l+y+l}t(g,"replaceToken"),o.forEach(function(p,b){for(var m,y=0;p!=m;)if(m=p,p=p.replace(c,g),y++>1e4)throw Error("References have circular dependency. Please, check them.");o[b]=p}),d=d.reverse(),o=o.map(function(p){return d.forEach(function(b){p=p.replace(new RegExp("(\\"+l+b+"\\"+l+")","g"),v[0]+"$1"+v[1])}),p})});var f=new RegExp("\\"+l+"([0-9]+)\\"+l);function h(v,c,d){for(var g=[],p,b=0;p=f.exec(v);){if(b++>1e4)throw Error("Circular references in parenthesis");g.push(v.slice(0,p.index)),g.push(h(c[p[1]],c)),v=v.slice(p.index+p[0].length)}return g.push(v),g}return t(h,"nest"),u?o:h(o[0],o)}t(e,"parse");function r(i,s){if(s&&s.flat){var o=s&&s.escape||"___",a=i[0],l;if(!a)return"";for(var u=new RegExp("\\"+o+"([0-9]+)\\"+o),f=0;a!=l;){if(f++>1e4)throw Error("Circular references in "+i);l=a,a=a.replace(u,h)}return a}return i.reduce(t(function v(c,d){return Array.isArray(d)&&(d=d.reduce(v,"")),c+d},"f"),"");function h(v,c){if(i[c]==null)throw Error("Reference "+c+"is undefined");return i[c]}}t(r,"stringify");function n(i,s){return Array.isArray(i)?r(i,s):e(i,s)}return t(n,"parenthesis"),n.parse=e,n.stringify=r,OR=n,OR}t(I9e,"requireParenthesis");var NR,eee;function z9e(){if(eee)return NR;eee=1;var e=I9e();return NR=t(function(n,i,s){if(n==null)throw Error("First argument should be a string");if(i==null)throw Error("Separator should be a string or a RegExp");s?(typeof s=="string"||Array.isArray(s))&&(s={ignore:s}):s={},s.escape==null&&(s.escape=!0),s.ignore==null?s.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof s.ignore=="string"&&(s.ignore=[s.ignore]),s.ignore=s.ignore.map(function(c){return c.length===1&&(c=c+c),c}));var o=e.parse(n,{flat:!0,brackets:s.ignore}),a=o[0],l=a.split(i);if(s.escape){for(var u=[],f=0;f<l.length;f++){var h=l[f],v=l[f+1];h[h.length-1]==="\\"&&h[h.length-2]!=="\\"?(u.push(h+i+v),f++):u.push(h)}l=u}for(var f=0;f<l.length;f++)o[0]=l[f],l[f]=e.stringify(o,{flat:!0});return l},"splitBy"),NR}t(z9e,"requireStringSplitBy");const F9e=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"];var qR,tee;function Kde(){if(tee)return qR;tee=1;var e=F9e;return qR={isSize:t(function(n){return/^[\d\.]/.test(n)||n.indexOf("/")!==-1||e.indexOf(n)!==-1},"isSize")},qR}t(Kde,"requireUtil");var UR,ree;function B9e(){if(ree)return UR;ree=1;var e=D9e(),r=jde,n=Yde,i=Wde,s=Xde,o=Zde,a=z9e(),l=Kde().isSize;UR=f;var u=f.cache={};function f(v){if(typeof v!="string")throw new Error("Font argument must be a string.");if(u[v])return u[v];if(v==="")throw new Error("Cannot parse an empty string.");if(n.indexOf(v)!==-1)return u[v]={system:v};for(var c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=a(v,/\s+/),g;g=d.shift();){if(r.indexOf(g)!==-1)return["style","variant","weight","stretch"].forEach(function(b){c[b]=g}),u[v]=c;if(s.indexOf(g)!==-1){c.style=g;continue}if(g==="normal"||g==="small-caps"){c.variant=g;continue}if(o.indexOf(g)!==-1){c.stretch=g;continue}if(i.indexOf(g)!==-1){c.weight=g;continue}if(l(g)){var p=a(g,"/");if(c.size=p[0],p[1]!=null?c.lineHeight=h(p[1]):d[0]==="/"&&(d.shift(),c.lineHeight=h(d.shift())),!d.length)throw new Error("Missing required font-family.");return c.family=a(d.join(" "),/\s*,\s*/).map(e),u[v]=c}throw new Error("Unknown or unsupported font token: "+g)}throw new Error("Missing required font-size.")}t(f,"parseFont");function h(v){var c=parseFloat(v);return c.toString()===v?c:v}return t(h,"parseLineHeight"),UR}t(B9e,"requireParse");var HR,aee;function Jde(){if(aee)return HR;aee=1;var e=md(),r=Kde().isSize,n=v(jde),i=v(Yde),s=v(Wde),o=v(Xde),a=v(Zde),l={normal:1,"small-caps":1},u={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};HR=t(function(d){if(d=e(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),d.system)return d.system&&h(d.system,i),d.system;if(h(d.style,o),h(d.variant,l),h(d.weight,s),h(d.stretch,a),d.size==null&&(d.size=f.size),typeof d.size=="number"&&(d.size+="px"),!r)throw Error("Bad size value `"+d.size+"`");d.family||(d.family=f.family),Array.isArray(d.family)&&(d.family.length||(d.family=[f.family]),d.family=d.family.map(function(p){return u[p]?p:'"'+p+'"'}).join(", "));var g=[];return g.push(d.style),d.variant!==d.style&&g.push(d.variant),d.weight!==d.variant&&d.weight!==d.style&&g.push(d.weight),d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&g.push(d.stretch),g.push(d.size+(d.lineHeight==null||d.lineHeight==="normal"||d.lineHeight+""=="1"?"":"/"+d.lineHeight)),g.push(d.family),g.filter(Boolean).join(" ")},"stringifyFont");function h(c,d){if(c&&!d[c]&&!n[c])throw Error("Unknown keyword `"+c+"`");return c}t(h,"verify");function v(c){for(var d={},g=0;g<c.length;g++)d[c[g]]=1;return d}return t(v,"a2o"),HR}t(Jde,"requireStringify");var $R,nee;function O9e(){return nee||(nee=1,$R={parse:B9e(),stringify:Jde()}),$R}t(O9e,"requireCssFont");var VR={exports:{}},iee;function Qde(){return iee||(iee=1,function(e,r){(function(n,i){e.exports=i()})(xs,function(){var n=t(function(st,Yt){for(var Zt=Object.keys(Yt),cr=0;cr<Zt.length;++cr)st[Zt[cr]]=Yt[Zt[cr]];return st},"extend"),i=0,s=0,o=5,a=6;function l(st,Yt){this.id=i++,this.type=st,this.data=Yt}t(l,"DynamicVariable");function u(st){return st.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}t(u,"escapeStr");function f(st){if(st.length===0)return[];var Yt=st.charAt(0),Zt=st.charAt(st.length-1);if(st.length>1&&Yt===Zt&&(Yt==='"'||Yt==="'"))return['"'+u(st.substr(1,st.length-2))+'"'];var cr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(st);if(cr)return f(st.substr(0,cr.index)).concat(f(cr[1])).concat(f(st.substr(cr.index+cr[0].length)));var br=st.split(".");if(br.length===1)return['"'+u(st)+'"'];for(var kr=[],Pr=0;Pr<br.length;++Pr)kr=kr.concat(f(br[Pr]));return kr}t(f,"splitParts");function h(st){return"["+f(st).join("][")+"]"}t(h,"toAccessorString");function v(st,Yt){return new l(st,h(Yt+""))}t(v,"defineDynamic");function c(st){return typeof st=="function"&&!st._reglType||st instanceof l}t(c,"isDynamic");function d(st,Yt){if(typeof st=="function")return new l(s,st);if(typeof st=="number"||typeof st=="boolean")return new l(o,st);if(Array.isArray(st))return new l(a,st.map(function(Zt,cr){return d(Zt)}));if(st instanceof l)return st}t(d,"unbox");var g={DynamicVariable:l,define:v,isDynamic:c,unbox:d,accessor:h},p={next:typeof requestAnimationFrame=="function"?function(st){return requestAnimationFrame(st)}:function(st){return setTimeout(st,16)},cancel:typeof cancelAnimationFrame=="function"?function(st){return cancelAnimationFrame(st)}:clearTimeout},b=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function m(){var st={"":0},Yt=[""];return{id:function(Zt){var cr=st[Zt];return cr||(cr=st[Zt]=Yt.length,Yt.push(Zt),cr)},str:function(Zt){return Yt[Zt]}}}t(m,"createStringStore");function y(st,Yt,Zt){var cr=document.createElement("canvas");n(cr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),st.appendChild(cr),st===document.body&&(cr.style.position="absolute",n(st.style,{margin:0,padding:0}));function br(){var la=window.innerWidth,Qr=window.innerHeight;if(st!==document.body){var fa=cr.getBoundingClientRect();la=fa.right-fa.left,Qr=fa.bottom-fa.top}cr.width=Zt*la,cr.height=Zt*Qr}t(br,"resize");var kr;st!==document.body&&typeof ResizeObserver=="function"?(kr=new ResizeObserver(function(){setTimeout(br)}),kr.observe(st)):window.addEventListener("resize",br,!1);function Pr(){kr?kr.disconnect():window.removeEventListener("resize",br),st.removeChild(cr)}return t(Pr,"onDestroy"),br(),{canvas:cr,onDestroy:Pr}}t(y,"createCanvas");function T(st,Yt){function Zt(cr){try{return st.getContext(cr,Yt)}catch{return null}}return t(Zt,"get"),Zt("webgl")||Zt("experimental-webgl")||Zt("webgl-experimental")}t(T,"createContext");function _(st){return typeof st.nodeName=="string"&&typeof st.appendChild=="function"&&typeof st.getBoundingClientRect=="function"}t(_,"isHTMLElement");function M(st){return typeof st.drawArrays=="function"||typeof st.drawElements=="function"}t(M,"isWebGLContext");function w(st){return typeof st=="string"?st.split():st}t(w,"parseExtensions");function x(st){return typeof st=="string"?document.querySelector(st):st}t(x,"getElement");function A(st){var Yt=st||{},Zt,cr,br,kr,Pr={},la=[],Qr=[],fa=typeof window>"u"?1:window.devicePixelRatio,ka=!1,sn={},Ra=t(function(fr){},"onDone"),La=t(function(){},"onDestroy");if(typeof Yt=="string"?Zt=document.querySelector(Yt):typeof Yt=="object"&&(_(Yt)?Zt=Yt:M(Yt)?(kr=Yt,br=kr.canvas):("gl"in Yt?kr=Yt.gl:"canvas"in Yt?br=x(Yt.canvas):"container"in Yt&&(cr=x(Yt.container)),"attributes"in Yt&&(Pr=Yt.attributes),"extensions"in Yt&&(la=w(Yt.extensions)),"optionalExtensions"in Yt&&(Qr=w(Yt.optionalExtensions)),"onDone"in Yt&&(Ra=Yt.onDone),"profile"in Yt&&(ka=!!Yt.profile),"pixelRatio"in Yt&&(fa=+Yt.pixelRatio),"cachedCode"in Yt&&(sn=Yt.cachedCode))),Zt&&(Zt.nodeName.toLowerCase()==="canvas"?br=Zt:cr=Zt),!kr){if(!br){var ra=y(cr||document.body,Ra,fa);if(!ra)return null;br=ra.canvas,La=ra.onDestroy}Pr.premultipliedAlpha===void 0&&(Pr.premultipliedAlpha=!0),kr=T(br,Pr)}return kr?{gl:kr,canvas:br,container:cr,extensions:la,optionalExtensions:Qr,pixelRatio:fa,profile:ka,cachedCode:sn,onDone:Ra,onDestroy:La}:(La(),Ra("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}t(A,"parseArgs");function S(st,Yt){var Zt={};function cr(Pr){var la=Pr.toLowerCase(),Qr;try{Qr=Zt[la]=st.getExtension(la)}catch{}return!!Qr}t(cr,"tryLoadExtension");for(var br=0;br<Yt.extensions.length;++br){var kr=Yt.extensions[br];if(!cr(kr))return Yt.onDestroy(),Yt.onDone('"'+kr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Yt.optionalExtensions.forEach(cr),{extensions:Zt,restore:function(){Object.keys(Zt).forEach(function(Pr){if(Zt[Pr]&&!cr(Pr))throw new Error("(regl): error restoring extension "+Pr)})}}}t(S,"createExtensionCache");function k(st,Yt){for(var Zt=Array(st),cr=0;cr<st;++cr)Zt[cr]=Yt(cr);return Zt}t(k,"loop");var L=5120,P=5121,D=5122,B=5123,z=5124,R=5125,F=5126;function O(st){for(var Yt=16;Yt<=1<<28;Yt*=16)if(st<=Yt)return Yt;return 0}t(O,"nextPow16");function q(st){var Yt,Zt;return Yt=(st>65535)<<4,st>>>=Yt,Zt=(st>255)<<3,st>>>=Zt,Yt|=Zt,Zt=(st>15)<<2,st>>>=Zt,Yt|=Zt,Zt=(st>3)<<1,st>>>=Zt,Yt|=Zt,Yt|st>>1}t(q,"log2");function H(){var st=k(8,function(){return[]});function Yt(kr){var Pr=O(kr),la=st[q(Pr)>>2];return la.length>0?la.pop():new ArrayBuffer(Pr)}t(Yt,"alloc");function Zt(kr){st[q(kr.byteLength)>>2].push(kr)}t(Zt,"free");function cr(kr,Pr){var la=null;switch(kr){case L:la=new Int8Array(Yt(Pr),0,Pr);break;case P:la=new Uint8Array(Yt(Pr),0,Pr);break;case D:la=new Int16Array(Yt(2*Pr),0,Pr);break;case B:la=new Uint16Array(Yt(2*Pr),0,Pr);break;case z:la=new Int32Array(Yt(4*Pr),0,Pr);break;case R:la=new Uint32Array(Yt(4*Pr),0,Pr);break;case F:la=new Float32Array(Yt(4*Pr),0,Pr);break;default:return null}return la.length!==Pr?la.subarray(0,Pr):la}t(cr,"allocType");function br(kr){Zt(kr.buffer)}return t(br,"freeType"),{alloc:Yt,free:Zt,allocType:cr,freeType:br}}t(H,"createPool");var j=H();j.zero=H();var X=3408,G=3410,$=3411,te=3412,ee=3413,ie=3414,se=3415,W=33901,ne=33902,he=3379,re=3386,ae=34921,fe=36347,ce=36348,xe=35661,Te=35660,me=34930,pe=36349,oe=34076,de=34024,ye=7936,we=7937,Ee=7938,De=35724,Fe=34047,qe=36063,Je=34852,Ge=3553,et=34067,Ue=34069,Ye=33984,$e=6408,Ct=5126,It=5121,Vt=36160,$t=36053,Gt=36064,Jt=16384,kt=t(function(st,Yt){var Zt=1;Yt.ext_texture_filter_anisotropic&&(Zt=st.getParameter(Fe));var cr=1,br=1;Yt.webgl_draw_buffers&&(cr=st.getParameter(Je),br=st.getParameter(qe));var kr=!!Yt.oes_texture_float;if(kr){var Pr=st.createTexture();st.bindTexture(Ge,Pr),st.texImage2D(Ge,0,$e,1,1,0,$e,Ct,null);var la=st.createFramebuffer();if(st.bindFramebuffer(Vt,la),st.framebufferTexture2D(Vt,Gt,Ge,Pr,0),st.bindTexture(Ge,null),st.checkFramebufferStatus(Vt)!==$t)kr=!1;else{st.viewport(0,0,1,1),st.clearColor(1,0,0,1),st.clear(Jt);var Qr=j.allocType(Ct,4);st.readPixels(0,0,1,1,$e,Ct,Qr),st.getError()?kr=!1:(st.deleteFramebuffer(la),st.deleteTexture(Pr),kr=Qr[0]===1),j.freeType(Qr)}}var fa=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ka=!0;if(!fa){var sn=st.createTexture(),Ra=j.allocType(It,36);st.activeTexture(Ye),st.bindTexture(et,sn),st.texImage2D(Ue,0,$e,3,3,0,$e,It,Ra),j.freeType(Ra),st.bindTexture(et,null),st.deleteTexture(sn),ka=!st.getError()}return{colorBits:[st.getParameter(G),st.getParameter($),st.getParameter(te),st.getParameter(ee)],depthBits:st.getParameter(ie),stencilBits:st.getParameter(se),subpixelBits:st.getParameter(X),extensions:Object.keys(Yt).filter(function(La){return!!Yt[La]}),maxAnisotropic:Zt,maxDrawbuffers:cr,maxColorAttachments:br,pointSizeDims:st.getParameter(W),lineWidthDims:st.getParameter(ne),maxViewportDims:st.getParameter(re),maxCombinedTextureUnits:st.getParameter(xe),maxCubeMapSize:st.getParameter(oe),maxRenderbufferSize:st.getParameter(de),maxTextureUnits:st.getParameter(me),maxTextureSize:st.getParameter(he),maxAttributes:st.getParameter(ae),maxVertexUniforms:st.getParameter(fe),maxVertexTextureUnits:st.getParameter(Te),maxVaryingVectors:st.getParameter(ce),maxFragmentUniforms:st.getParameter(pe),glsl:st.getParameter(De),renderer:st.getParameter(we),vendor:st.getParameter(ye),version:st.getParameter(Ee),readFloat:kr,npotTextureCube:ka}},"wrapLimits"),ft=t(function(st){return st instanceof Uint8Array||st instanceof Uint16Array||st instanceof Uint32Array||st instanceof Int8Array||st instanceof Int16Array||st instanceof Int32Array||st instanceof Float32Array||st instanceof Float64Array||st instanceof Uint8ClampedArray},"isTypedArray");function zt(st){return!!st&&typeof st=="object"&&Array.isArray(st.shape)&&Array.isArray(st.stride)&&typeof st.offset=="number"&&st.shape.length===st.stride.length&&(Array.isArray(st.data)||ft(st.data))}t(zt,"isNDArrayLike");var Pt=t(function(st){return Object.keys(st).map(function(Yt){return st[Yt]})},"values"),Et={shape:_t,flatten:vt};function Wt(st,Yt,Zt){for(var cr=0;cr<Yt;++cr)Zt[cr]=st[cr]}t(Wt,"flatten1D");function ze(st,Yt,Zt,cr){for(var br=0,kr=0;kr<Yt;++kr)for(var Pr=st[kr],la=0;la<Zt;++la)cr[br++]=Pr[la]}t(ze,"flatten2D");function tt(st,Yt,Zt,cr,br,kr){for(var Pr=kr,la=0;la<Yt;++la)for(var Qr=st[la],fa=0;fa<Zt;++fa)for(var ka=Qr[fa],sn=0;sn<cr;++sn)br[Pr++]=ka[sn]}t(tt,"flatten3D");function at(st,Yt,Zt,cr,br){for(var kr=1,Pr=Zt+1;Pr<Yt.length;++Pr)kr*=Yt[Pr];var la=Yt[Zt];if(Yt.length-Zt===4){var Qr=Yt[Zt+1],fa=Yt[Zt+2],ka=Yt[Zt+3];for(Pr=0;Pr<la;++Pr)tt(st[Pr],Qr,fa,ka,cr,br),br+=kr}else for(Pr=0;Pr<la;++Pr)at(st[Pr],Yt,Zt+1,cr,br),br+=kr}t(at,"flattenRec");function vt(st,Yt,Zt,cr){var br=1;if(Yt.length)for(var kr=0;kr<Yt.length;++kr)br*=Yt[kr];else br=0;var Pr=cr||j.allocType(Zt,br);switch(Yt.length){case 0:break;case 1:Wt(st,Yt[0],Pr);break;case 2:ze(st,Yt[0],Yt[1],Pr);break;case 3:tt(st,Yt[0],Yt[1],Yt[2],Pr,0);break;default:at(st,Yt,0,Pr,0)}return Pr}t(vt,"flattenArray");function _t(st){for(var Yt=[],Zt=st;Zt.length;Zt=Zt[0])Yt.push(Zt.length);return Yt}t(_t,"arrayShape$1");var Rt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},nr=5120,ir=5122,ur=5124,qt=5121,hr=5123,Fr=5125,Br=5126,na=5126,Ia={int8:nr,int16:ir,int32:ur,uint8:qt,uint16:hr,uint32:Fr,float:Br,float32:na},ea=35048,Er=35040,dn={dynamic:ea,stream:Er,static:35044},ya=Et.flatten,Hr=Et.shape,un=35044,Ea=35040,nt=5121,He=5126,Qe=[];Qe[5120]=1,Qe[5122]=2,Qe[5124]=4,Qe[5121]=1,Qe[5123]=2,Qe[5125]=4,Qe[5126]=4;function ot(st){return Rt[Object.prototype.toString.call(st)]|0}t(ot,"typedArrayCode");function Ae(st,Yt){for(var Zt=0;Zt<Yt.length;++Zt)st[Zt]=Yt[Zt]}t(Ae,"copyArray");function Se(st,Yt,Zt,cr,br,kr,Pr){for(var la=0,Qr=0;Qr<Zt;++Qr)for(var fa=0;fa<cr;++fa)st[la++]=Yt[br*Qr+kr*fa+Pr]}t(Se,"transpose");function je(st,Yt,Zt,cr){var br=0,kr={};function Pr(fr){this.id=br++,this.buffer=st.createBuffer(),this.type=fr,this.usage=un,this.byteLength=0,this.dimension=1,this.dtype=nt,this.persistentData=null,Zt.profile&&(this.stats={size:0})}t(Pr,"REGLBuffer"),Pr.prototype.bind=function(){st.bindBuffer(this.type,this.buffer)},Pr.prototype.destroy=function(){Ra(this)};var la=[];function Qr(fr,Mr){var ca=la.pop();return ca||(ca=new Pr(fr)),ca.bind(),sn(ca,Mr,Ea,0,1,!1),ca}t(Qr,"createStream");function fa(fr){la.push(fr)}t(fa,"destroyStream");function ka(fr,Mr,ca){fr.byteLength=Mr.byteLength,st.bufferData(fr.type,Mr,ca)}t(ka,"initBufferFromTypedArray");function sn(fr,Mr,ca,ha,Kr,qa){var Aa;if(fr.usage=ca,Array.isArray(Mr)){if(fr.dtype=ha||He,Mr.length>0){var on;if(Array.isArray(Mr[0])){Aa=Hr(Mr);for(var Gr=1,$r=1;$r<Aa.length;++$r)Gr*=Aa[$r];fr.dimension=Gr,on=ya(Mr,Aa,fr.dtype),ka(fr,on,ca),qa?fr.persistentData=on:j.freeType(on)}else if(typeof Mr[0]=="number"){fr.dimension=Kr;var Wa=j.allocType(fr.dtype,Mr.length);Ae(Wa,Mr),ka(fr,Wa,ca),qa?fr.persistentData=Wa:j.freeType(Wa)}else ft(Mr[0])&&(fr.dimension=Mr[0].length,fr.dtype=ha||ot(Mr[0])||He,on=ya(Mr,[Mr.length,Mr[0].length],fr.dtype),ka(fr,on,ca),qa?fr.persistentData=on:j.freeType(on))}}else if(ft(Mr))fr.dtype=ha||ot(Mr),fr.dimension=Kr,ka(fr,Mr,ca),qa&&(fr.persistentData=new Uint8Array(new Uint8Array(Mr.buffer)));else if(zt(Mr)){Aa=Mr.shape;var Or=Mr.stride,Ba=Mr.offset,va=0,tn=0,Sn=0,ja=0;Aa.length===1?(va=Aa[0],tn=1,Sn=Or[0],ja=0):Aa.length===2&&(va=Aa[0],tn=Aa[1],Sn=Or[0],ja=Or[1]),fr.dtype=ha||ot(Mr.data)||He,fr.dimension=tn;var fn=j.allocType(fr.dtype,va*tn);Se(fn,Mr.data,va,tn,Sn,ja,Ba),ka(fr,fn,ca),qa?fr.persistentData=fn:j.freeType(fn)}else Mr instanceof ArrayBuffer&&(fr.dtype=nt,fr.dimension=Kr,ka(fr,Mr,ca),qa&&(fr.persistentData=new Uint8Array(new Uint8Array(Mr))))}t(sn,"initBufferFromData");function Ra(fr){Yt.bufferCount--,cr(fr);var Mr=fr.buffer;st.deleteBuffer(Mr),fr.buffer=null,delete kr[fr.id]}t(Ra,"destroy");function La(fr,Mr,ca,ha){Yt.bufferCount++;var Kr=new Pr(Mr);kr[Kr.id]=Kr;function qa(Gr){var $r=un,Wa=null,Or=0,Ba=0,va=1;return Array.isArray(Gr)||ft(Gr)||zt(Gr)||Gr instanceof ArrayBuffer?Wa=Gr:typeof Gr=="number"?Or=Gr|0:Gr&&("data"in Gr&&(Wa=Gr.data),"usage"in Gr&&($r=dn[Gr.usage]),"type"in Gr&&(Ba=Ia[Gr.type]),"dimension"in Gr&&(va=Gr.dimension|0),"length"in Gr&&(Or=Gr.length|0)),Kr.bind(),Wa?sn(Kr,Wa,$r,Ba,va,ha):(Or&&st.bufferData(Kr.type,Or,$r),Kr.dtype=Ba||nt,Kr.usage=$r,Kr.dimension=va,Kr.byteLength=Or),Zt.profile&&(Kr.stats.size=Kr.byteLength*Qe[Kr.dtype]),qa}t(qa,"reglBuffer");function Aa(Gr,$r){st.bufferSubData(Kr.type,$r,Gr)}t(Aa,"setSubData");function on(Gr,$r){var Wa=($r||0)|0,Or;if(Kr.bind(),ft(Gr)||Gr instanceof ArrayBuffer)Aa(Gr,Wa);else if(Array.isArray(Gr)){if(Gr.length>0){if(typeof Gr[0]=="number"){var Ba=j.allocType(Kr.dtype,Gr.length);Ae(Ba,Gr),Aa(Ba,Wa),j.freeType(Ba)}else if(Array.isArray(Gr[0])||ft(Gr[0])){Or=Hr(Gr);var va=ya(Gr,Or,Kr.dtype);Aa(va,Wa),j.freeType(va)}}}else if(zt(Gr)){Or=Gr.shape;var tn=Gr.stride,Sn=0,ja=0,fn=0,za=0;Or.length===1?(Sn=Or[0],ja=1,fn=tn[0],za=0):Or.length===2&&(Sn=Or[0],ja=Or[1],fn=tn[0],za=tn[1]);var Hn=Array.isArray(Gr.data)?Kr.dtype:ot(Gr.data),ri=j.allocType(Hn,Sn*ja);Se(ri,Gr.data,Sn,ja,fn,za,Gr.offset),Aa(ri,Wa),j.freeType(ri)}return qa}return t(on,"subdata"),ca||qa(fr),qa._reglType="buffer",qa._buffer=Kr,qa.subdata=on,Zt.profile&&(qa.stats=Kr.stats),qa.destroy=function(){Ra(Kr)},qa}t(La,"createBuffer");function ra(){Pt(kr).forEach(function(fr){fr.buffer=st.createBuffer(),st.bindBuffer(fr.type,fr.buffer),st.bufferData(fr.type,fr.persistentData||fr.byteLength,fr.usage)})}return t(ra,"restoreBuffers"),Zt.profile&&(Yt.getTotalBufferSize=function(){var fr=0;return Object.keys(kr).forEach(function(Mr){fr+=kr[Mr].stats.size}),fr}),{create:La,createStream:Qr,destroyStream:fa,clear:function(){Pt(kr).forEach(Ra),la.forEach(Ra)},getBuffer:function(fr){return fr&&fr._buffer instanceof Pr?fr._buffer:null},restore:ra,_initBuffer:sn}}t(je,"wrapBufferState");var Xe=0,ut=0,xt=1,dt=1,Ot=4,Ht=4,Qt={points:Xe,point:ut,lines:xt,line:dt,triangles:Ot,triangle:Ht,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},mr=0,xr=1,Lr=4,Zr=5120,Sr=5121,xa=5122,aa=5123,Sa=5124,vn=5125,hn=34963,ba=35040,Tn=35044;function Pa(st,Yt,Zt,cr){var br={},kr=0,Pr={uint8:Sr,uint16:aa};Yt.oes_element_index_uint&&(Pr.uint32=vn);function la(ra){this.id=kr++,br[this.id]=this,this.buffer=ra,this.primType=Lr,this.vertCount=0,this.type=0}t(la,"REGLElementBuffer"),la.prototype.bind=function(){this.buffer.bind()};var Qr=[];function fa(ra){var fr=Qr.pop();return fr||(fr=new la(Zt.create(null,hn,!0,!1)._buffer)),sn(fr,ra,ba,-1,-1,0,0),fr}t(fa,"createElementStream");function ka(ra){Qr.push(ra)}t(ka,"destroyElementStream");function sn(ra,fr,Mr,ca,ha,Kr,qa){ra.buffer.bind();var Aa;if(fr){var on=qa;!qa&&(!ft(fr)||zt(fr)&&!ft(fr.data))&&(on=Yt.oes_element_index_uint?vn:aa),Zt._initBuffer(ra.buffer,fr,Mr,on,3)}else st.bufferData(hn,Kr,Mr),ra.buffer.dtype=Aa||Sr,ra.buffer.usage=Mr,ra.buffer.dimension=3,ra.buffer.byteLength=Kr;if(Aa=qa,!qa){switch(ra.buffer.dtype){case Sr:case Zr:Aa=Sr;break;case aa:case xa:Aa=aa;break;case vn:case Sa:Aa=vn;break}ra.buffer.dtype=Aa}ra.type=Aa;var Gr=ha;Gr<0&&(Gr=ra.buffer.byteLength,Aa===aa?Gr>>=1:Aa===vn&&(Gr>>=2)),ra.vertCount=Gr;var $r=ca;if(ca<0){$r=Lr;var Wa=ra.buffer.dimension;Wa===1&&($r=mr),Wa===2&&($r=xr),Wa===3&&($r=Lr)}ra.primType=$r}t(sn,"initElements");function Ra(ra){cr.elementsCount--,delete br[ra.id],ra.buffer.destroy(),ra.buffer=null}t(Ra,"destroyElements");function La(ra,fr){var Mr=Zt.create(null,hn,!0),ca=new la(Mr._buffer);cr.elementsCount++;function ha(Kr){if(!Kr)Mr(),ca.primType=Lr,ca.vertCount=0,ca.type=Sr;else if(typeof Kr=="number")Mr(Kr),ca.primType=Lr,ca.vertCount=Kr|0,ca.type=Sr;else{var qa=null,Aa=Tn,on=-1,Gr=-1,$r=0,Wa=0;Array.isArray(Kr)||ft(Kr)||zt(Kr)?qa=Kr:("data"in Kr&&(qa=Kr.data),"usage"in Kr&&(Aa=dn[Kr.usage]),"primitive"in Kr&&(on=Qt[Kr.primitive]),"count"in Kr&&(Gr=Kr.count|0),"type"in Kr&&(Wa=Pr[Kr.type]),"length"in Kr?$r=Kr.length|0:($r=Gr,Wa===aa||Wa===xa?$r*=2:(Wa===vn||Wa===Sa)&&($r*=4))),sn(ca,qa,Aa,on,Gr,$r,Wa)}return ha}return t(ha,"reglElements"),ha(ra),ha._reglType="elements",ha._elements=ca,ha.subdata=function(Kr,qa){return Mr.subdata(Kr,qa),ha},ha.destroy=function(){Ra(ca)},ha}return t(La,"createElements"),{create:La,createStream:fa,destroyStream:ka,getElements:function(ra){return typeof ra=="function"&&ra._elements instanceof la?ra._elements:null},clear:function(){Pt(br).forEach(Ra)}}}t(Pa,"wrapElementsState");var kn=new Float32Array(1),In=new Uint32Array(kn.buffer),ln=5123;function Pn(st){for(var Yt=j.allocType(ln,st.length),Zt=0;Zt<st.length;++Zt)if(isNaN(st[Zt]))Yt[Zt]=65535;else if(st[Zt]===1/0)Yt[Zt]=31744;else if(st[Zt]===-1/0)Yt[Zt]=64512;else{kn[0]=st[Zt];var cr=In[0],br=cr>>>31<<15,kr=(cr<<1>>>24)-127,Pr=cr>>13&(1<<10)-1;if(kr<-24)Yt[Zt]=br;else if(kr<-14){var la=-14-kr;Yt[Zt]=br+(Pr+(1<<10)>>la)}else kr>15?Yt[Zt]=br+31744:Yt[Zt]=br+(kr+15<<10)+Pr}return Yt}t(Pn,"convertToHalfFloat");function Fa(st){return Array.isArray(st)||ft(st)}t(Fa,"isArrayLike");var Ka=34467,Ja=3553,Xn=34067,Ln=34069,ni=6408,$i=6406,Vi=6407,Ai=6409,_s=6410,eo=32854,lo=32855,Eo=36194,Li=32819,bl=32820,Us=33635,pi=34042,po=6402,wo=34041,Ds=35904,To=35906,uo=36193,Pf=33776,Nl=33777,qi=33778,Hs=33779,Wr=35986,Ma=35987,go=34798,Gi=35840,Ri=35841,_l=35842,is=35843,$s=36196,Jo=5121,Ga=5123,Yn=5125,Bn=5126,wl=10242,nl=10243,Kn=10497,tf=33071,rf=33648,ql=10240,Ul=10241,Co=9728,Di=9729,Fh=9984,af=9985,Au=9986,Tl=9987,Mp=33170,Vc=4352,yi=4353,oc=4354,Df=34046,Qo=3317,ws=37440,_v=37441,Al=37443,Ao=37444,Hl=33984,il=[Fh,Au,af,Tl],Ui=[0,Ai,_s,Vi,ni],Ts={};Ts[Ai]=Ts[$i]=Ts[po]=1,Ts[wo]=Ts[_s]=2,Ts[Vi]=Ts[Ds]=3,Ts[ni]=Ts[To]=4;function Lo(st){return"[object "+st+"]"}t(Lo,"objectName");var Ql=Lo("HTMLCanvasElement"),Su=Lo("OffscreenCanvas"),xd=Lo("CanvasRenderingContext2D"),Vs=Lo("ImageBitmap"),wv=Lo("HTMLImageElement"),Mu=Lo("HTMLVideoElement"),os=Object.keys(Rt).concat([Ql,Su,xd,Vs,wv,Mu]),sc=[];sc[Jo]=1,sc[Bn]=4,sc[uo]=2,sc[Ga]=2,sc[Yn]=4;var to=[];to[eo]=2,to[lo]=2,to[Eo]=2,to[wo]=4,to[Pf]=.5,to[Nl]=.5,to[qi]=1,to[Hs]=1,to[Wr]=.5,to[Ma]=1,to[go]=1,to[Gi]=.5,to[Ri]=.25,to[_l]=.5,to[is]=.25,to[$s]=.5;function ku(st){return Array.isArray(st)&&(st.length===0||typeof st[0]=="number")}t(ku,"isNumericArray");function Bh(st){if(!Array.isArray(st))return!1;var Yt=st.length;return!(Yt===0||!Fa(st[0]))}t(Bh,"isRectArray");function If(st){return Object.prototype.toString.call(st)}t(If,"classString");function bd(st){return If(st)===Ql}t(bd,"isCanvasElement");function Gc(st){return If(st)===Su}t(Gc,"isOffscreenCanvas");function kp(st){return If(st)===xd}t(kp,"isContext2D");function Ep(st){return If(st)===Vs}t(Ep,"isBitmap");function Cp(st){return If(st)===wv}t(Cp,"isImageElement");function Tv(st){return If(st)===Mu}t(Tv,"isVideoElement");function Oh(st){if(!st)return!1;var Yt=If(st);return os.indexOf(Yt)>=0?!0:ku(st)||Bh(st)||zt(st)}t(Oh,"isPixelData");function Av(st){return Rt[Object.prototype.toString.call(st)]|0}t(Av,"typedArrayCode$1");function Sv(st,Yt){var Zt=Yt.length;switch(st.type){case Jo:case Ga:case Yn:case Bn:var cr=j.allocType(st.type,Zt);cr.set(Yt),st.data=cr;break;case uo:st.data=Pn(Yt);break}}t(Sv,"convertData");function Mv(st,Yt){return j.allocType(st.type===uo?Bn:st.type,Yt)}t(Mv,"preConvert");function _d(st,Yt){st.type===uo?(st.data=Pn(Yt),j.freeType(Yt)):st.data=Yt}t(_d,"postConvert");function wd(st,Yt,Zt,cr,br,kr){for(var Pr=st.width,la=st.height,Qr=st.channels,fa=Pr*la*Qr,ka=Mv(st,fa),sn=0,Ra=0;Ra<la;++Ra)for(var La=0;La<Pr;++La)for(var ra=0;ra<Qr;++ra)ka[sn++]=Yt[Zt*La+cr*Ra+br*ra+kr];_d(st,ka)}t(wd,"transposeData");function Eu(st,Yt,Zt,cr,br,kr){var Pr;if(typeof to[st]<"u"?Pr=to[st]:Pr=Ts[st]*sc[Yt],kr&&(Pr*=6),br){for(var la=0,Qr=Zt;Qr>=1;)la+=Pr*Qr*Qr,Qr/=2;return la}else return Pr*Zt*cr}t(Eu,"getTextureSize");function kv(st,Yt,Zt,cr,br,kr,Pr){var la={"don't care":Vc,"dont care":Vc,nice:oc,fast:yi},Qr={repeat:Kn,clamp:tf,mirror:rf},fa={nearest:Co,linear:Di},ka=n({mipmap:Tl,"nearest mipmap nearest":Fh,"linear mipmap nearest":af,"nearest mipmap linear":Au,"linear mipmap linear":Tl},fa),sn={none:0,browser:Ao},Ra={uint8:Jo,rgba4:Li,rgb565:Us,"rgb5 a1":bl},La={alpha:$i,luminance:Ai,"luminance alpha":_s,rgb:Vi,rgba:ni,rgba4:eo,"rgb5 a1":lo,rgb565:Eo},ra={};Yt.ext_srgb&&(La.srgb=Ds,La.srgba=To),Yt.oes_texture_float&&(Ra.float32=Ra.float=Bn),Yt.oes_texture_half_float&&(Ra.float16=Ra["half float"]=uo),Yt.webgl_depth_texture&&(n(La,{depth:po,"depth stencil":wo}),n(Ra,{uint16:Ga,uint32:Yn,"depth stencil":pi})),Yt.webgl_compressed_texture_s3tc&&n(ra,{"rgb s3tc dxt1":Pf,"rgba s3tc dxt1":Nl,"rgba s3tc dxt3":qi,"rgba s3tc dxt5":Hs}),Yt.webgl_compressed_texture_atc&&n(ra,{"rgb atc":Wr,"rgba atc explicit alpha":Ma,"rgba atc interpolated alpha":go}),Yt.webgl_compressed_texture_pvrtc&&n(ra,{"rgb pvrtc 4bppv1":Gi,"rgb pvrtc 2bppv1":Ri,"rgba pvrtc 4bppv1":_l,"rgba pvrtc 2bppv1":is}),Yt.webgl_compressed_texture_etc1&&(ra["rgb etc1"]=$s);var fr=Array.prototype.slice.call(st.getParameter(Ka));Object.keys(ra).forEach(function(le){var be=ra[le];fr.indexOf(be)>=0&&(La[le]=be)});var Mr=Object.keys(La);Zt.textureFormats=Mr;var ca=[];Object.keys(La).forEach(function(le){var be=La[le];ca[be]=le});var ha=[];Object.keys(Ra).forEach(function(le){var be=Ra[le];ha[be]=le});var Kr=[];Object.keys(fa).forEach(function(le){var be=fa[le];Kr[be]=le});var qa=[];Object.keys(ka).forEach(function(le){var be=ka[le];qa[be]=le});var Aa=[];Object.keys(Qr).forEach(function(le){var be=Qr[le];Aa[be]=le});var on=Mr.reduce(function(le,be){var Me=La[be];return Me===Ai||Me===$i||Me===Ai||Me===_s||Me===po||Me===wo||Yt.ext_srgb&&(Me===Ds||Me===To)?le[Me]=Me:Me===lo||be.indexOf("rgba")>=0?le[Me]=ni:le[Me]=Vi,le},{});function Gr(){this.internalformat=ni,this.format=ni,this.type=Jo,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Ao,this.width=0,this.height=0,this.channels=0}t(Gr,"TexFlags");function $r(le,be){le.internalformat=be.internalformat,le.format=be.format,le.type=be.type,le.compressed=be.compressed,le.premultiplyAlpha=be.premultiplyAlpha,le.flipY=be.flipY,le.unpackAlignment=be.unpackAlignment,le.colorSpace=be.colorSpace,le.width=be.width,le.height=be.height,le.channels=be.channels}t($r,"copyFlags");function Wa(le,be){if(!(typeof be!="object"||!be)){if("premultiplyAlpha"in be&&(le.premultiplyAlpha=be.premultiplyAlpha),"flipY"in be&&(le.flipY=be.flipY),"alignment"in be&&(le.unpackAlignment=be.alignment),"colorSpace"in be&&(le.colorSpace=sn[be.colorSpace]),"type"in be){var Me=be.type;le.type=Ra[Me]}var Ie=le.width,Ze=le.height,ct=le.channels,ht=!1;"shape"in be?(Ie=be.shape[0],Ze=be.shape[1],be.shape.length===3&&(ct=be.shape[2],ht=!0)):("radius"in be&&(Ie=Ze=be.radius),"width"in be&&(Ie=be.width),"height"in be&&(Ze=be.height),"channels"in be&&(ct=be.channels,ht=!0)),le.width=Ie|0,le.height=Ze|0,le.channels=ct|0;var Be=!1;if("format"in be){var We=be.format,it=le.internalformat=La[We];le.format=on[it],We in Ra&&("type"in be||(le.type=Ra[We])),We in ra&&(le.compressed=!0),Be=!0}!ht&&Be?le.channels=Ts[le.format]:ht&&!Be&&le.channels!==Ui[le.format]&&(le.format=le.internalformat=Ui[le.channels])}}t(Wa,"parseFlags");function Or(le){st.pixelStorei(ws,le.flipY),st.pixelStorei(_v,le.premultiplyAlpha),st.pixelStorei(Al,le.colorSpace),st.pixelStorei(Qo,le.unpackAlignment)}t(Or,"setFlags");function Ba(){Gr.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}t(Ba,"TexImage");function va(le,be){var Me=null;if(Oh(be)?Me=be:be&&(Wa(le,be),"x"in be&&(le.xOffset=be.x|0),"y"in be&&(le.yOffset=be.y|0),Oh(be.data)&&(Me=be.data)),be.copy){var Ie=br.viewportWidth,Ze=br.viewportHeight;le.width=le.width||Ie-le.xOffset,le.height=le.height||Ze-le.yOffset,le.needsCopy=!0}else if(!Me)le.width=le.width||1,le.height=le.height||1,le.channels=le.channels||4;else if(ft(Me))le.channels=le.channels||4,le.data=Me,!("type"in be)&&le.type===Jo&&(le.type=Av(Me));else if(ku(Me))le.channels=le.channels||4,Sv(le,Me),le.alignment=1,le.needsFree=!0;else if(zt(Me)){var ct=Me.data;!Array.isArray(ct)&&le.type===Jo&&(le.type=Av(ct));var ht=Me.shape,Be=Me.stride,We,it,wt,pt,bt,Mt;ht.length===3?(wt=ht[2],Mt=Be[2]):(wt=1,Mt=1),We=ht[0],it=ht[1],pt=Be[0],bt=Be[1],le.alignment=1,le.width=We,le.height=it,le.channels=wt,le.format=le.internalformat=Ui[wt],le.needsFree=!0,wd(le,ct,pt,bt,Mt,Me.offset)}else if(bd(Me)||Gc(Me)||kp(Me))bd(Me)||Gc(Me)?le.element=Me:le.element=Me.canvas,le.width=le.element.width,le.height=le.element.height,le.channels=4;else if(Ep(Me))le.element=Me,le.width=Me.width,le.height=Me.height,le.channels=4;else if(Cp(Me))le.element=Me,le.width=Me.naturalWidth,le.height=Me.naturalHeight,le.channels=4;else if(Tv(Me))le.element=Me,le.width=Me.videoWidth,le.height=Me.videoHeight,le.channels=4;else if(Bh(Me)){var Dt=le.width||Me[0].length,St=le.height||Me.length,Ft=le.channels;Fa(Me[0][0])?Ft=Ft||Me[0][0].length:Ft=Ft||1;for(var Lt=Et.shape(Me),Xt=1,ar=0;ar<Lt.length;++ar)Xt*=Lt[ar];var vr=Mv(le,Xt);Et.flatten(Me,Lt,"",vr),_d(le,vr),le.alignment=1,le.width=Dt,le.height=St,le.channels=Ft,le.format=le.internalformat=Ui[Ft],le.needsFree=!0}le.type===Bn||le.type}t(va,"parseImage");function tn(le,be,Me){var Ie=le.element,Ze=le.data,ct=le.internalformat,ht=le.format,Be=le.type,We=le.width,it=le.height;Or(le),Ie?st.texImage2D(be,Me,ht,ht,Be,Ie):le.compressed?st.compressedTexImage2D(be,Me,ct,We,it,0,Ze):le.needsCopy?(cr(),st.copyTexImage2D(be,Me,ht,le.xOffset,le.yOffset,We,it,0)):st.texImage2D(be,Me,ht,We,it,0,ht,Be,Ze||null)}t(tn,"setImage");function Sn(le,be,Me,Ie,Ze){var ct=le.element,ht=le.data,Be=le.internalformat,We=le.format,it=le.type,wt=le.width,pt=le.height;Or(le),ct?st.texSubImage2D(be,Ze,Me,Ie,We,it,ct):le.compressed?st.compressedTexSubImage2D(be,Ze,Me,Ie,Be,wt,pt,ht):le.needsCopy?(cr(),st.copyTexSubImage2D(be,Ze,Me,Ie,le.xOffset,le.yOffset,wt,pt)):st.texSubImage2D(be,Ze,Me,Ie,wt,pt,We,it,ht)}t(Sn,"setSubImage");var ja=[];function fn(){return ja.pop()||new Ba}t(fn,"allocImage");function za(le){le.needsFree&&j.freeType(le.data),Ba.call(le),ja.push(le)}t(za,"freeImage");function Hn(){Gr.call(this),this.genMipmaps=!1,this.mipmapHint=Vc,this.mipmask=0,this.images=Array(16)}t(Hn,"MipMap");function ri(le,be,Me){var Ie=le.images[0]=fn();le.mipmask=1,Ie.width=le.width=be,Ie.height=le.height=Me,Ie.channels=le.channels=4}t(ri,"parseMipMapFromShape");function Jn(le,be){var Me=null;if(Oh(be))Me=le.images[0]=fn(),$r(Me,le),va(Me,be),le.mipmask=1;else if(Wa(le,be),Array.isArray(be.mipmap))for(var Ie=be.mipmap,Ze=0;Ze<Ie.length;++Ze)Me=le.images[Ze]=fn(),$r(Me,le),Me.width>>=Ze,Me.height>>=Ze,va(Me,Ie[Ze]),le.mipmask|=1<<Ze;else Me=le.images[0]=fn(),$r(Me,le),va(Me,be),le.mipmask=1;$r(le,le.images[0]),le.compressed&&(le.internalformat===Pf||le.internalformat===Nl||le.internalformat===qi||le.internalformat)}t(Jn,"parseMipMapFromObject");function Po(le,be){for(var Me=le.images,Ie=0;Ie<Me.length;++Ie){if(!Me[Ie])return;tn(Me[Ie],be,Ie)}}t(Po,"setMipMap");var Qn=[];function jo(){var le=Qn.pop()||new Hn;Gr.call(le),le.mipmask=0;for(var be=0;be<16;++be)le.images[be]=null;return le}t(jo,"allocMipMap");function Ii(le){for(var be=le.images,Me=0;Me<be.length;++Me)be[Me]&&za(be[Me]),be[Me]=null;Qn.push(le)}t(Ii,"freeMipMap");function Ms(){this.minFilter=Co,this.magFilter=Co,this.wrapS=tf,this.wrapT=tf,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Vc}t(Ms,"TexInfo");function Yo(le,be){if("min"in be){var Me=be.min;le.minFilter=ka[Me],il.indexOf(le.minFilter)>=0&&!("faces"in be)&&(le.genMipmaps=!0)}if("mag"in be){var Ie=be.mag;le.magFilter=fa[Ie]}var Ze=le.wrapS,ct=le.wrapT;if("wrap"in be){var ht=be.wrap;typeof ht=="string"?Ze=ct=Qr[ht]:Array.isArray(ht)&&(Ze=Qr[ht[0]],ct=Qr[ht[1]])}else{if("wrapS"in be){var Be=be.wrapS;Ze=Qr[Be]}if("wrapT"in be){var We=be.wrapT;ct=Qr[We]}}if(le.wrapS=Ze,le.wrapT=ct,"anisotropic"in be&&(be.anisotropic,le.anisotropic=be.anisotropic),"mipmap"in be){var it=!1;switch(typeof be.mipmap){case"string":le.mipmapHint=la[be.mipmap],le.genMipmaps=!0,it=!0;break;case"boolean":it=le.genMipmaps=be.mipmap;break;case"object":le.genMipmaps=!1,it=!0;break}it&&!("min"in be)&&(le.minFilter=Fh)}}t(Yo,"parseTexInfo");function ks(le,be){st.texParameteri(be,Ul,le.minFilter),st.texParameteri(be,ql,le.magFilter),st.texParameteri(be,wl,le.wrapS),st.texParameteri(be,nl,le.wrapT),Yt.ext_texture_filter_anisotropic&&st.texParameteri(be,Df,le.anisotropic),le.genMipmaps&&(st.hint(Mp,le.mipmapHint),st.generateMipmap(be))}t(ks,"setTexInfo");var Ys=0,rs={},as=Zt.maxTextureUnits,_n=Array(as).map(function(){return null});function kl(le){Gr.call(this),this.mipmask=0,this.internalformat=ni,this.id=Ys++,this.refCount=1,this.target=le,this.texture=st.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ms,Pr.profile&&(this.stats={size:0})}t(kl,"REGLTexture");function zi(le){st.activeTexture(Hl),st.bindTexture(le.target,le.texture)}t(zi,"tempBind");function Wo(){var le=_n[0];le?st.bindTexture(le.target,le.texture):st.bindTexture(Ja,null)}t(Wo,"tempRestore");function Ws(le){var be=le.texture,Me=le.unit,Ie=le.target;Me>=0&&(st.activeTexture(Hl+Me),st.bindTexture(Ie,null),_n[Me]=null),st.deleteTexture(be),le.texture=null,le.params=null,le.pixels=null,le.refCount=0,delete rs[le.id],kr.textureCount--}t(Ws,"destroy"),n(kl.prototype,{bind:function(){var le=this;le.bindCount+=1;var be=le.unit;if(be<0){for(var Me=0;Me<as;++Me){var Ie=_n[Me];if(Ie){if(Ie.bindCount>0)continue;Ie.unit=-1}_n[Me]=le,be=Me;break}Pr.profile&&kr.maxTextureUnits<be+1&&(kr.maxTextureUnits=be+1),le.unit=be,st.activeTexture(Hl+be),st.bindTexture(le.target,le.texture)}return be},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ws(this)}});function Z(le,be){var Me=new kl(Ja);rs[Me.id]=Me,kr.textureCount++;function Ie(ht,Be){var We=Me.texInfo;Ms.call(We);var it=jo();return typeof ht=="number"?typeof Be=="number"?ri(it,ht|0,Be|0):ri(it,ht|0,ht|0):ht?(Yo(We,ht),Jn(it,ht)):ri(it,1,1),We.genMipmaps&&(it.mipmask=(it.width<<1)-1),Me.mipmask=it.mipmask,$r(Me,it),Me.internalformat=it.internalformat,Ie.width=it.width,Ie.height=it.height,zi(Me),Po(it,Ja),ks(We,Ja),Wo(),Ii(it),Pr.profile&&(Me.stats.size=Eu(Me.internalformat,Me.type,it.width,it.height,We.genMipmaps,!1)),Ie.format=ca[Me.internalformat],Ie.type=ha[Me.type],Ie.mag=Kr[We.magFilter],Ie.min=qa[We.minFilter],Ie.wrapS=Aa[We.wrapS],Ie.wrapT=Aa[We.wrapT],Ie}t(Ie,"reglTexture2D");function Ze(ht,Be,We,it){var wt=Be|0,pt=We|0,bt=it|0,Mt=fn();return $r(Mt,Me),Mt.width=0,Mt.height=0,va(Mt,ht),Mt.width=Mt.width||(Me.width>>bt)-wt,Mt.height=Mt.height||(Me.height>>bt)-pt,zi(Me),Sn(Mt,Ja,wt,pt,bt),Wo(),za(Mt),Ie}t(Ze,"subimage");function ct(ht,Be){var We=ht|0,it=Be|0||We;if(We===Me.width&&it===Me.height)return Ie;Ie.width=Me.width=We,Ie.height=Me.height=it,zi(Me);for(var wt=0;Me.mipmask>>wt;++wt){var pt=We>>wt,bt=it>>wt;if(!pt||!bt)break;st.texImage2D(Ja,wt,Me.format,pt,bt,0,Me.format,Me.type,null)}return Wo(),Pr.profile&&(Me.stats.size=Eu(Me.internalformat,Me.type,We,it,!1,!1)),Ie}return t(ct,"resize"),Ie(le,be),Ie.subimage=Ze,Ie.resize=ct,Ie._reglType="texture2d",Ie._texture=Me,Pr.profile&&(Ie.stats=Me.stats),Ie.destroy=function(){Me.decRef()},Ie}t(Z,"createTexture2D");function N(le,be,Me,Ie,Ze,ct){var ht=new kl(Xn);rs[ht.id]=ht,kr.cubeCount++;var Be=new Array(6);function We(pt,bt,Mt,Dt,St,Ft){var Lt,Xt=ht.texInfo;for(Ms.call(Xt),Lt=0;Lt<6;++Lt)Be[Lt]=jo();if(typeof pt=="number"||!pt){var ar=pt|0||1;for(Lt=0;Lt<6;++Lt)ri(Be[Lt],ar,ar)}else if(typeof pt=="object")if(bt)Jn(Be[0],pt),Jn(Be[1],bt),Jn(Be[2],Mt),Jn(Be[3],Dt),Jn(Be[4],St),Jn(Be[5],Ft);else if(Yo(Xt,pt),Wa(ht,pt),"faces"in pt){var vr=pt.faces;for(Lt=0;Lt<6;++Lt)$r(Be[Lt],ht),Jn(Be[Lt],vr[Lt])}else for(Lt=0;Lt<6;++Lt)Jn(Be[Lt],pt);for($r(ht,Be[0]),Xt.genMipmaps?ht.mipmask=(Be[0].width<<1)-1:ht.mipmask=Be[0].mipmask,ht.internalformat=Be[0].internalformat,We.width=Be[0].width,We.height=Be[0].height,zi(ht),Lt=0;Lt<6;++Lt)Po(Be[Lt],Ln+Lt);for(ks(Xt,Xn),Wo(),Pr.profile&&(ht.stats.size=Eu(ht.internalformat,ht.type,We.width,We.height,Xt.genMipmaps,!0)),We.format=ca[ht.internalformat],We.type=ha[ht.type],We.mag=Kr[Xt.magFilter],We.min=qa[Xt.minFilter],We.wrapS=Aa[Xt.wrapS],We.wrapT=Aa[Xt.wrapT],Lt=0;Lt<6;++Lt)Ii(Be[Lt]);return We}t(We,"reglTextureCube");function it(pt,bt,Mt,Dt,St){var Ft=Mt|0,Lt=Dt|0,Xt=St|0,ar=fn();return $r(ar,ht),ar.width=0,ar.height=0,va(ar,bt),ar.width=ar.width||(ht.width>>Xt)-Ft,ar.height=ar.height||(ht.height>>Xt)-Lt,zi(ht),Sn(ar,Ln+pt,Ft,Lt,Xt),Wo(),za(ar),We}t(it,"subimage");function wt(pt){var bt=pt|0;if(bt!==ht.width){We.width=ht.width=bt,We.height=ht.height=bt,zi(ht);for(var Mt=0;Mt<6;++Mt)for(var Dt=0;ht.mipmask>>Dt;++Dt)st.texImage2D(Ln+Mt,Dt,ht.format,bt>>Dt,bt>>Dt,0,ht.format,ht.type,null);return Wo(),Pr.profile&&(ht.stats.size=Eu(ht.internalformat,ht.type,We.width,We.height,!1,!0)),We}}return t(wt,"resize"),We(le,be,Me,Ie,Ze,ct),We.subimage=it,We.resize=wt,We._reglType="textureCube",We._texture=ht,Pr.profile&&(We.stats=ht.stats),We.destroy=function(){ht.decRef()},We}t(N,"createTextureCube");function K(){for(var le=0;le<as;++le)st.activeTexture(Hl+le),st.bindTexture(Ja,null),_n[le]=null;Pt(rs).forEach(Ws),kr.cubeCount=0,kr.textureCount=0}t(K,"destroyTextures"),Pr.profile&&(kr.getTotalTextureSize=function(){var le=0;return Object.keys(rs).forEach(function(be){le+=rs[be].stats.size}),le});function U(){for(var le=0;le<as;++le){var be=_n[le];be&&(be.bindCount=0,be.unit=-1,_n[le]=null)}Pt(rs).forEach(function(Me){Me.texture=st.createTexture(),st.bindTexture(Me.target,Me.texture);for(var Ie=0;Ie<32;++Ie)if((Me.mipmask&1<<Ie)!==0)if(Me.target===Ja)st.texImage2D(Ja,Ie,Me.internalformat,Me.width>>Ie,Me.height>>Ie,0,Me.internalformat,Me.type,null);else for(var Ze=0;Ze<6;++Ze)st.texImage2D(Ln+Ze,Ie,Me.internalformat,Me.width>>Ie,Me.height>>Ie,0,Me.internalformat,Me.type,null);ks(Me.texInfo,Me.target)})}t(U,"restoreTextures");function Q(){for(var le=0;le<as;++le){var be=_n[le];be&&(be.bindCount=0,be.unit=-1,_n[le]=null),st.activeTexture(Hl+le),st.bindTexture(Ja,null),st.bindTexture(Xn,null)}}return t(Q,"refreshTextures"),{create2D:Z,createCube:N,clear:K,getTexture:function(le){return null},restore:U,refresh:Q}}t(kv,"createTextureSet");var Cu=36161,jc=32854,Td=32855,Nh=36194,Ev=33189,Ad=36168,Sd=34041,ol=35907,Yc=34836,lc=34842,Wc=34843,Oo=[];Oo[jc]=2,Oo[Td]=2,Oo[Nh]=2,Oo[Ev]=2,Oo[Ad]=1,Oo[Sd]=4,Oo[ol]=4,Oo[Yc]=16,Oo[lc]=8,Oo[Wc]=6;function Lu(st,Yt,Zt){return Oo[st]*Yt*Zt}t(Lu,"getRenderbufferSize");var qh=t(function(st,Yt,Zt,cr,br){var kr={rgba4:jc,rgb565:Nh,"rgb5 a1":Td,depth:Ev,stencil:Ad,"depth stencil":Sd};Yt.ext_srgb&&(kr.srgba=ol),Yt.ext_color_buffer_half_float&&(kr.rgba16f=lc,kr.rgb16f=Wc),Yt.webgl_color_buffer_float&&(kr.rgba32f=Yc);var Pr=[];Object.keys(kr).forEach(function(La){var ra=kr[La];Pr[ra]=La});var la=0,Qr={};function fa(La){this.id=la++,this.refCount=1,this.renderbuffer=La,this.format=jc,this.width=0,this.height=0,br.profile&&(this.stats={size:0})}t(fa,"REGLRenderbuffer"),fa.prototype.decRef=function(){--this.refCount<=0&&ka(this)};function ka(La){var ra=La.renderbuffer;st.bindRenderbuffer(Cu,null),st.deleteRenderbuffer(ra),La.renderbuffer=null,La.refCount=0,delete Qr[La.id],cr.renderbufferCount--}t(ka,"destroy");function sn(La,ra){var fr=new fa(st.createRenderbuffer());Qr[fr.id]=fr,cr.renderbufferCount++;function Mr(ha,Kr){var qa=0,Aa=0,on=jc;if(typeof ha=="object"&&ha){var Gr=ha;if("shape"in Gr){var $r=Gr.shape;qa=$r[0]|0,Aa=$r[1]|0}else"radius"in Gr&&(qa=Aa=Gr.radius|0),"width"in Gr&&(qa=Gr.width|0),"height"in Gr&&(Aa=Gr.height|0);"format"in Gr&&(on=kr[Gr.format])}else typeof ha=="number"?(qa=ha|0,typeof Kr=="number"?Aa=Kr|0:Aa=qa):ha||(qa=Aa=1);if(!(qa===fr.width&&Aa===fr.height&&on===fr.format))return Mr.width=fr.width=qa,Mr.height=fr.height=Aa,fr.format=on,st.bindRenderbuffer(Cu,fr.renderbuffer),st.renderbufferStorage(Cu,on,qa,Aa),br.profile&&(fr.stats.size=Lu(fr.format,fr.width,fr.height)),Mr.format=Pr[fr.format],Mr}t(Mr,"reglRenderbuffer");function ca(ha,Kr){var qa=ha|0,Aa=Kr|0||qa;return qa===fr.width&&Aa===fr.height||(Mr.width=fr.width=qa,Mr.height=fr.height=Aa,st.bindRenderbuffer(Cu,fr.renderbuffer),st.renderbufferStorage(Cu,fr.format,qa,Aa),br.profile&&(fr.stats.size=Lu(fr.format,fr.width,fr.height))),Mr}return t(ca,"resize"),Mr(La,ra),Mr.resize=ca,Mr._reglType="renderbuffer",Mr._renderbuffer=fr,br.profile&&(Mr.stats=fr.stats),Mr.destroy=function(){fr.decRef()},Mr}t(sn,"createRenderbuffer"),br.profile&&(cr.getTotalRenderbufferSize=function(){var La=0;return Object.keys(Qr).forEach(function(ra){La+=Qr[ra].stats.size}),La});function Ra(){Pt(Qr).forEach(function(La){La.renderbuffer=st.createRenderbuffer(),st.bindRenderbuffer(Cu,La.renderbuffer),st.renderbufferStorage(Cu,La.format,La.width,La.height)}),st.bindRenderbuffer(Cu,null)}return t(Ra,"restoreRenderbuffers"),{create:sn,clear:function(){Pt(Qr).forEach(ka)},restore:Ra}},"wrapRenderbuffers"),Sl=36160,eu=36161,ro=3553,uc=34069,fc=36064,Gs=36096,Cv=36128,Lv=33306,Md=36053,kd=36193,zf=5121,Ed=5126,Lp=6407,Rp=6408,Rv=[];Rv[Rp]=4,Rv[Lp]=3;var cc=[];cc[zf]=1,cc[Ed]=4,cc[kd]=2;function Xc(st,Yt,Zt,cr,br,kr){var Pr={cur:null,next:null,dirty:!1,setFBO:null},la=["rgba"],Qr=["rgba4","rgb565","rgb5 a1"];Yt.ext_srgb&&Qr.push("srgba"),Yt.ext_color_buffer_half_float&&Qr.push("rgba16f","rgb16f"),Yt.webgl_color_buffer_float&&Qr.push("rgba32f"),Yt.oes_texture_half_float,Yt.oes_texture_float;function fa(Or,Ba,va){this.target=Or,this.texture=Ba,this.renderbuffer=va;var tn=0,Sn=0;Ba?(tn=Ba.width,Sn=Ba.height):va&&(tn=va.width,Sn=va.height),this.width=tn,this.height=Sn}t(fa,"FramebufferAttachment");function ka(Or){Or&&(Or.texture&&Or.texture._texture.decRef(),Or.renderbuffer&&Or.renderbuffer._renderbuffer.decRef())}t(ka,"decRef");function sn(Or,Ba,va){if(!!Or)if(Or.texture){var tn=Or.texture._texture;Math.max(1,tn.width),Math.max(1,tn.height),tn.refCount+=1}else{var Sn=Or.renderbuffer._renderbuffer;Sn.refCount+=1}}t(sn,"incRefAndCheckShape");function Ra(Or,Ba){Ba&&(Ba.texture?st.framebufferTexture2D(Sl,Or,Ba.target,Ba.texture._texture.texture,0):st.framebufferRenderbuffer(Sl,Or,eu,Ba.renderbuffer._renderbuffer.renderbuffer))}t(Ra,"attach");function La(Or){var Ba=ro,va=null,tn=null,Sn=Or;typeof Or=="object"&&(Sn=Or.data,"target"in Or&&(Ba=Or.target|0));var ja=Sn._reglType;return ja==="texture2d"||ja==="textureCube"?va=Sn:ja==="renderbuffer"&&(tn=Sn,Ba=eu),new fa(Ba,va,tn)}t(La,"parseAttachment");function ra(Or,Ba,va,tn,Sn){if(va){var ja=cr.create2D({width:Or,height:Ba,format:tn,type:Sn});return ja._texture.refCount=0,new fa(ro,ja,null)}else{var fn=br.create({width:Or,height:Ba,format:tn});return fn._renderbuffer.refCount=0,new fa(eu,null,fn)}}t(ra,"allocAttachment");function fr(Or){return Or&&(Or.texture||Or.renderbuffer)}t(fr,"unwrapAttachment");function Mr(Or,Ba,va){Or&&(Or.texture?Or.texture.resize(Ba,va):Or.renderbuffer&&Or.renderbuffer.resize(Ba,va),Or.width=Ba,Or.height=va)}t(Mr,"resizeAttachment");var ca=0,ha={};function Kr(){this.id=ca++,ha[this.id]=this,this.framebuffer=st.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}t(Kr,"REGLFramebuffer");function qa(Or){Or.colorAttachments.forEach(ka),ka(Or.depthAttachment),ka(Or.stencilAttachment),ka(Or.depthStencilAttachment)}t(qa,"decFBORefs");function Aa(Or){var Ba=Or.framebuffer;st.deleteFramebuffer(Ba),Or.framebuffer=null,kr.framebufferCount--,delete ha[Or.id]}t(Aa,"destroy");function on(Or){var Ba;st.bindFramebuffer(Sl,Or.framebuffer);var va=Or.colorAttachments;for(Ba=0;Ba<va.length;++Ba)Ra(fc+Ba,va[Ba]);for(Ba=va.length;Ba<Zt.maxColorAttachments;++Ba)st.framebufferTexture2D(Sl,fc+Ba,ro,null,0);st.framebufferTexture2D(Sl,Lv,ro,null,0),st.framebufferTexture2D(Sl,Gs,ro,null,0),st.framebufferTexture2D(Sl,Cv,ro,null,0),Ra(Gs,Or.depthAttachment),Ra(Cv,Or.stencilAttachment),Ra(Lv,Or.depthStencilAttachment);var tn=st.checkFramebufferStatus(Sl);st.isContextLost(),st.bindFramebuffer(Sl,Pr.next?Pr.next.framebuffer:null),Pr.cur=Pr.next,st.getError()}t(on,"updateFramebuffer");function Gr(Or,Ba){var va=new Kr;kr.framebufferCount++;function tn(ja,fn){var za,Hn=0,ri=0,Jn=!0,Po=!0,Qn=null,jo=!0,Ii="rgba",Ms="uint8",Yo=1,ks=null,Ys=null,rs=null,as=!1;if(typeof ja=="number")Hn=ja|0,ri=fn|0||Hn;else if(!ja)Hn=ri=1;else{var _n=ja;if("shape"in _n){var kl=_n.shape;Hn=kl[0],ri=kl[1]}else"radius"in _n&&(Hn=ri=_n.radius),"width"in _n&&(Hn=_n.width),"height"in _n&&(ri=_n.height);("color"in _n||"colors"in _n)&&(Qn=_n.color||_n.colors),Qn||("colorCount"in _n&&(Yo=_n.colorCount|0),"colorTexture"in _n&&(jo=!!_n.colorTexture,Ii="rgba4"),"colorType"in _n&&(Ms=_n.colorType,jo||(Ms==="half float"||Ms==="float16"?Ii="rgba16f":(Ms==="float"||Ms==="float32")&&(Ii="rgba32f"))),"colorFormat"in _n&&(Ii=_n.colorFormat,la.indexOf(Ii)>=0?jo=!0:Qr.indexOf(Ii)>=0&&(jo=!1))),("depthTexture"in _n||"depthStencilTexture"in _n)&&(as=!!(_n.depthTexture||_n.depthStencilTexture)),"depth"in _n&&(typeof _n.depth=="boolean"?Jn=_n.depth:(ks=_n.depth,Po=!1)),"stencil"in _n&&(typeof _n.stencil=="boolean"?Po=_n.stencil:(Ys=_n.stencil,Jn=!1)),"depthStencil"in _n&&(typeof _n.depthStencil=="boolean"?Jn=Po=_n.depthStencil:(rs=_n.depthStencil,Jn=!1,Po=!1))}var zi=null,Wo=null,Ws=null,Z=null;if(Array.isArray(Qn))zi=Qn.map(La);else if(Qn)zi=[La(Qn)];else for(zi=new Array(Yo),za=0;za<Yo;++za)zi[za]=ra(Hn,ri,jo,Ii,Ms);for(Hn=Hn||zi[0].width,ri=ri||zi[0].height,ks?Wo=La(ks):Jn&&!Po&&(Wo=ra(Hn,ri,as,"depth","uint32")),Ys?Ws=La(Ys):Po&&!Jn&&(Ws=ra(Hn,ri,!1,"stencil","uint8")),rs?Z=La(rs):!ks&&!Ys&&Po&&Jn&&(Z=ra(Hn,ri,as,"depth stencil","depth stencil")),za=0;za<zi.length;++za)sn(zi[za]),zi[za]&&zi[za].texture&&Rv[zi[za].texture._texture.format]*cc[zi[za].texture._texture.type];return sn(Wo),sn(Ws),sn(Z),qa(va),va.width=Hn,va.height=ri,va.colorAttachments=zi,va.depthAttachment=Wo,va.stencilAttachment=Ws,va.depthStencilAttachment=Z,tn.color=zi.map(fr),tn.depth=fr(Wo),tn.stencil=fr(Ws),tn.depthStencil=fr(Z),tn.width=va.width,tn.height=va.height,on(va),tn}t(tn,"reglFramebuffer");function Sn(ja,fn){var za=Math.max(ja|0,1),Hn=Math.max(fn|0||za,1);if(za===va.width&&Hn===va.height)return tn;for(var ri=va.colorAttachments,Jn=0;Jn<ri.length;++Jn)Mr(ri[Jn],za,Hn);return Mr(va.depthAttachment,za,Hn),Mr(va.stencilAttachment,za,Hn),Mr(va.depthStencilAttachment,za,Hn),va.width=tn.width=za,va.height=tn.height=Hn,on(va),tn}return t(Sn,"resize"),tn(Or,Ba),n(tn,{resize:Sn,_reglType:"framebuffer",_framebuffer:va,destroy:function(){Aa(va),qa(va)},use:function(ja){Pr.setFBO({framebuffer:tn},ja)}})}t(Gr,"createFBO");function $r(Or){var Ba=Array(6);function va(Sn){var ja,fn={color:null},za=0,Hn=null,ri="rgba",Jn="uint8",Po=1;if(typeof Sn=="number")za=Sn|0;else if(!Sn)za=1;else{var Qn=Sn;if("shape"in Qn){var jo=Qn.shape;za=jo[0]}else"radius"in Qn&&(za=Qn.radius|0),"width"in Qn?za=Qn.width|0:"height"in Qn&&(za=Qn.height|0);("color"in Qn||"colors"in Qn)&&(Hn=Qn.color||Qn.colors),Hn||("colorCount"in Qn&&(Po=Qn.colorCount|0),"colorType"in Qn&&(Jn=Qn.colorType),"colorFormat"in Qn&&(ri=Qn.colorFormat)),"depth"in Qn&&(fn.depth=Qn.depth),"stencil"in Qn&&(fn.stencil=Qn.stencil),"depthStencil"in Qn&&(fn.depthStencil=Qn.depthStencil)}var Ii;if(Hn)if(Array.isArray(Hn))for(Ii=[],ja=0;ja<Hn.length;++ja)Ii[ja]=Hn[ja];else Ii=[Hn];else{Ii=Array(Po);var Ms={radius:za,format:ri,type:Jn};for(ja=0;ja<Po;++ja)Ii[ja]=cr.createCube(Ms)}for(fn.color=Array(Ii.length),ja=0;ja<Ii.length;++ja){var Yo=Ii[ja];za=za||Yo.width,fn.color[ja]={target:uc,data:Ii[ja]}}for(ja=0;ja<6;++ja){for(var ks=0;ks<Ii.length;++ks)fn.color[ks].target=uc+ja;ja>0&&(fn.depth=Ba[0].depth,fn.stencil=Ba[0].stencil,fn.depthStencil=Ba[0].depthStencil),Ba[ja]?Ba[ja](fn):Ba[ja]=Gr(fn)}return n(va,{width:za,height:za,color:Ii})}t(va,"reglFramebufferCube");function tn(Sn){var ja,fn=Sn|0;if(fn===va.width)return va;var za=va.color;for(ja=0;ja<za.length;++ja)za[ja].resize(fn);for(ja=0;ja<6;++ja)Ba[ja].resize(fn);return va.width=va.height=fn,va}return t(tn,"resize"),va(Or),n(va,{faces:Ba,resize:tn,_reglType:"framebufferCube",destroy:function(){Ba.forEach(function(Sn){Sn.destroy()})}})}t($r,"createCubeFBO");function Wa(){Pr.cur=null,Pr.next=null,Pr.dirty=!0,Pt(ha).forEach(function(Or){Or.framebuffer=st.createFramebuffer(),on(Or)})}return t(Wa,"restoreFramebuffers"),n(Pr,{getFramebuffer:function(Or){if(typeof Or=="function"&&Or._reglType==="framebuffer"){var Ba=Or._framebuffer;if(Ba instanceof Kr)return Ba}return null},create:Gr,createCube:$r,clear:function(){Pt(ha).forEach(Aa)},restore:Wa})}t(Xc,"wrapFBOState");var Zc=5126,Uh=34962,Kc=34963;function Hh(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Zc,this.offset=0,this.stride=0,this.divisor=0}t(Hh,"AttributeRecord");function Pp(st,Yt,Zt,cr,br,kr,Pr){for(var la=Zt.maxAttributes,Qr=new Array(la),fa=0;fa<la;++fa)Qr[fa]=new Hh;var ka=0,sn={},Ra={Record:Hh,scope:{},state:Qr,currentVAO:null,targetVAO:null,restore:ra()?Aa:function(){},createVAO:on,getVAO:Mr,destroyBuffer:La,setVAO:ra()?ca:ha,clear:ra()?Kr:function(){}};function La(Gr){for(var $r=0;$r<Qr.length;++$r){var Wa=Qr[$r];Wa.buffer===Gr&&(st.disableVertexAttribArray($r),Wa.buffer=null)}}t(La,"destroyBuffer");function ra(){return Yt.oes_vertex_array_object}t(ra,"extVAO");function fr(){return Yt.angle_instanced_arrays}t(fr,"extInstanced");function Mr(Gr){return typeof Gr=="function"&&Gr._vao?Gr._vao:null}t(Mr,"getVAO");function ca(Gr){if(Gr!==Ra.currentVAO){var $r=ra();Gr?$r.bindVertexArrayOES(Gr.vao):$r.bindVertexArrayOES(null),Ra.currentVAO=Gr}}t(ca,"setVAOEXT");function ha(Gr){if(Gr!==Ra.currentVAO){if(Gr)Gr.bindAttrs();else{for(var $r=fr(),Wa=0;Wa<Qr.length;++Wa){var Or=Qr[Wa];Or.buffer?(st.enableVertexAttribArray(Wa),Or.buffer.bind(),st.vertexAttribPointer(Wa,Or.size,Or.type,Or.normalized,Or.stride,Or.offfset),$r&&Or.divisor&&$r.vertexAttribDivisorANGLE(Wa,Or.divisor)):(st.disableVertexAttribArray(Wa),st.vertexAttrib4f(Wa,Or.x,Or.y,Or.z,Or.w))}Pr.elements?st.bindBuffer(Kc,Pr.elements.buffer.buffer):st.bindBuffer(Kc,null)}Ra.currentVAO=Gr}}t(ha,"setVAOEmulated");function Kr(){Pt(sn).forEach(function(Gr){Gr.destroy()})}t(Kr,"destroyVAOEXT");function qa(){this.id=++ka,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Gr=ra();Gr?this.vao=Gr.createVertexArrayOES():this.vao=null,sn[this.id]=this,this.buffers=[]}t(qa,"REGLVAO"),qa.prototype.bindAttrs=function(){for(var Gr=fr(),$r=this.attributes,Wa=0;Wa<$r.length;++Wa){var Or=$r[Wa];Or.buffer?(st.enableVertexAttribArray(Wa),st.bindBuffer(Uh,Or.buffer.buffer),st.vertexAttribPointer(Wa,Or.size,Or.type,Or.normalized,Or.stride,Or.offset),Gr&&Or.divisor&&Gr.vertexAttribDivisorANGLE(Wa,Or.divisor)):(st.disableVertexAttribArray(Wa),st.vertexAttrib4f(Wa,Or.x,Or.y,Or.z,Or.w))}for(var Ba=$r.length;Ba<la;++Ba)st.disableVertexAttribArray(Ba);var va=kr.getElements(this.elements);va?st.bindBuffer(Kc,va.buffer.buffer):st.bindBuffer(Kc,null)},qa.prototype.refresh=function(){var Gr=ra();Gr&&(Gr.bindVertexArrayOES(this.vao),this.bindAttrs(),Ra.currentVAO=null,Gr.bindVertexArrayOES(null))},qa.prototype.destroy=function(){if(this.vao){var Gr=ra();this===Ra.currentVAO&&(Ra.currentVAO=null,Gr.bindVertexArrayOES(null)),Gr.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),sn[this.id]&&(delete sn[this.id],cr.vaoCount-=1)};function Aa(){var Gr=ra();Gr&&Pt(sn).forEach(function($r){$r.refresh()})}t(Aa,"restoreVAO");function on(Gr){var $r=new qa;cr.vaoCount+=1;function Wa(Or){var Ba;if(Array.isArray(Or))Ba=Or,$r.elements&&$r.ownsElements&&$r.elements.destroy(),$r.elements=null,$r.ownsElements=!1,$r.offset=0,$r.count=0,$r.instances=-1,$r.primitive=4;else{if(Or.elements){var va=Or.elements;$r.ownsElements?typeof va=="function"&&va._reglType==="elements"?($r.elements.destroy(),$r.ownsElements=!1):($r.elements(va),$r.ownsElements=!1):kr.getElements(Or.elements)?($r.elements=Or.elements,$r.ownsElements=!1):($r.elements=kr.create(Or.elements),$r.ownsElements=!0)}else $r.elements=null,$r.ownsElements=!1;Ba=Or.attributes,$r.offset=0,$r.count=-1,$r.instances=-1,$r.primitive=4,$r.elements&&($r.count=$r.elements._elements.vertCount,$r.primitive=$r.elements._elements.primType),"offset"in Or&&($r.offset=Or.offset|0),"count"in Or&&($r.count=Or.count|0),"instances"in Or&&($r.instances=Or.instances|0),"primitive"in Or&&($r.primitive=Qt[Or.primitive])}var tn={},Sn=$r.attributes;Sn.length=Ba.length;for(var ja=0;ja<Ba.length;++ja){var fn=Ba[ja],za=Sn[ja]=new Hh,Hn=fn.data||fn;if(Array.isArray(Hn)||ft(Hn)||zt(Hn)){var ri;$r.buffers[ja]&&(ri=$r.buffers[ja],ft(Hn)&&ri._buffer.byteLength>=Hn.byteLength?ri.subdata(Hn):(ri.destroy(),$r.buffers[ja]=null)),$r.buffers[ja]||(ri=$r.buffers[ja]=br.create(fn,Uh,!1,!0)),za.buffer=br.getBuffer(ri),za.size=za.buffer.dimension|0,za.normalized=!1,za.type=za.buffer.dtype,za.offset=0,za.stride=0,za.divisor=0,za.state=1,tn[ja]=1}else br.getBuffer(fn)?(za.buffer=br.getBuffer(fn),za.size=za.buffer.dimension|0,za.normalized=!1,za.type=za.buffer.dtype,za.offset=0,za.stride=0,za.divisor=0,za.state=1):br.getBuffer(fn.buffer)?(za.buffer=br.getBuffer(fn.buffer),za.size=(+fn.size||za.buffer.dimension)|0,za.normalized=!!fn.normalized||!1,"type"in fn?za.type=Ia[fn.type]:za.type=za.buffer.dtype,za.offset=(fn.offset||0)|0,za.stride=(fn.stride||0)|0,za.divisor=(fn.divisor||0)|0,za.state=1):"x"in fn&&(za.x=+fn.x||0,za.y=+fn.y||0,za.z=+fn.z||0,za.w=+fn.w||0,za.state=2)}for(var Jn=0;Jn<$r.buffers.length;++Jn)!tn[Jn]&&$r.buffers[Jn]&&($r.buffers[Jn].destroy(),$r.buffers[Jn]=null);return $r.refresh(),Wa}return t(Wa,"updateVAO"),Wa.destroy=function(){for(var Or=0;Or<$r.buffers.length;++Or)$r.buffers[Or]&&$r.buffers[Or].destroy();$r.buffers.length=0,$r.ownsElements&&($r.elements.destroy(),$r.elements=null,$r.ownsElements=!1),$r.destroy()},Wa._vao=$r,Wa._reglType="vao",Wa(Gr)}return t(on,"createVAO"),Ra}t(Pp,"wrapAttributeState");var Pv=35632,ji=35633,Dp=35718,hc=35721;function Ff(st,Yt,Zt,cr){var br={},kr={};function Pr(fr,Mr,ca,ha){this.name=fr,this.id=Mr,this.location=ca,this.info=ha}t(Pr,"ActiveInfo");function la(fr,Mr){for(var ca=0;ca<fr.length;++ca)if(fr[ca].id===Mr.id){fr[ca].location=Mr.location;return}fr.push(Mr)}t(la,"insertActiveInfo");function Qr(fr,Mr,ca){var ha=fr===Pv?br:kr,Kr=ha[Mr];if(!Kr){var qa=Yt.str(Mr);Kr=st.createShader(fr),st.shaderSource(Kr,qa),st.compileShader(Kr),ha[Mr]=Kr}return Kr}t(Qr,"getShader");var fa={},ka=[],sn=0;function Ra(fr,Mr){this.id=sn++,this.fragId=fr,this.vertId=Mr,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,cr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}t(Ra,"REGLProgram");function La(fr,Mr,ca){var ha,Kr,qa=Qr(Pv,fr.fragId),Aa=Qr(ji,fr.vertId),on=fr.program=st.createProgram();if(st.attachShader(on,qa),st.attachShader(on,Aa),ca)for(ha=0;ha<ca.length;++ha){var Gr=ca[ha];st.bindAttribLocation(on,Gr[0],Gr[1])}st.linkProgram(on);var $r=st.getProgramParameter(on,Dp);cr.profile&&(fr.stats.uniformsCount=$r);var Wa=fr.uniforms;for(ha=0;ha<$r;++ha)if(Kr=st.getActiveUniform(on,ha),Kr)if(Kr.size>1)for(var Or=0;Or<Kr.size;++Or){var Ba=Kr.name.replace("[0]","["+Or+"]");la(Wa,new Pr(Ba,Yt.id(Ba),st.getUniformLocation(on,Ba),Kr))}else la(Wa,new Pr(Kr.name,Yt.id(Kr.name),st.getUniformLocation(on,Kr.name),Kr));var va=st.getProgramParameter(on,hc);cr.profile&&(fr.stats.attributesCount=va);var tn=fr.attributes;for(ha=0;ha<va;++ha)Kr=st.getActiveAttrib(on,ha),Kr&&la(tn,new Pr(Kr.name,Yt.id(Kr.name),st.getAttribLocation(on,Kr.name),Kr))}t(La,"linkProgram"),cr.profile&&(Zt.getMaxUniformsCount=function(){var fr=0;return ka.forEach(function(Mr){Mr.stats.uniformsCount>fr&&(fr=Mr.stats.uniformsCount)}),fr},Zt.getMaxAttributesCount=function(){var fr=0;return ka.forEach(function(Mr){Mr.stats.attributesCount>fr&&(fr=Mr.stats.attributesCount)}),fr});function ra(){br={},kr={};for(var fr=0;fr<ka.length;++fr)La(ka[fr],null,ka[fr].attributes.map(function(Mr){return[Mr.location,Mr.name]}))}return t(ra,"restoreShaders"),{clear:function(){var fr=st.deleteShader.bind(st);Pt(br).forEach(fr),br={},Pt(kr).forEach(fr),kr={},ka.forEach(function(Mr){st.deleteProgram(Mr.program)}),ka.length=0,fa={},Zt.shaderCount=0},program:function(fr,Mr,ca,ha){var Kr=fa[Mr];Kr||(Kr=fa[Mr]={});var qa=Kr[fr];if(qa&&(qa.refCount++,!ha))return qa;var Aa=new Ra(Mr,fr);return Zt.shaderCount++,La(Aa,ca,ha),qa||(Kr[fr]=Aa),ka.push(Aa),n(Aa,{destroy:function(){if(Aa.refCount--,Aa.refCount<=0){st.deleteProgram(Aa.program);var on=ka.indexOf(Aa);ka.splice(on,1),Zt.shaderCount--}Kr[Aa.vertId].refCount<=0&&(st.deleteShader(kr[Aa.vertId]),delete kr[Aa.vertId],delete fa[Aa.fragId][Aa.vertId]),Object.keys(fa[Aa.fragId]).length||(st.deleteShader(br[Aa.fragId]),delete br[Aa.fragId],delete fa[Aa.fragId])}})},restore:ra,shader:Qr,frag:-1,vert:-1}}t(Ff,"wrapShaderState");var Bf=6408,$h=5121,es=3333,Dv=5126;function $l(st,Yt,Zt,cr,br,kr,Pr){function la(ka){var sn;Yt.next===null?sn=$h:sn=Yt.next.colorAttachments[0].texture._texture.type;var Ra=0,La=0,ra=cr.framebufferWidth,fr=cr.framebufferHeight,Mr=null;ft(ka)?Mr=ka:ka&&(Ra=ka.x|0,La=ka.y|0,ra=(ka.width||cr.framebufferWidth-Ra)|0,fr=(ka.height||cr.framebufferHeight-La)|0,Mr=ka.data||null),Zt();var ca=ra*fr*4;return Mr||(sn===$h?Mr=new Uint8Array(ca):sn===Dv&&(Mr=Mr||new Float32Array(ca))),st.pixelStorei(es,4),st.readPixels(Ra,La,ra,fr,Bf,sn,Mr),Mr}t(la,"readPixelsImpl");function Qr(ka){var sn;return Yt.setFBO({framebuffer:ka.framebuffer},function(){sn=la(ka)}),sn}t(Qr,"readPixelsFBO");function fa(ka){return!ka||!("framebuffer"in ka)?la(ka):Qr(ka)}return t(fa,"readPixels"),fa}t($l,"wrapReadPixels");function Ru(st){return Pu(nf(tu(st)))}t(Ru,"hex_sha256");function nf(st){return of(zp(Of(st),st.length*8))}t(nf,"rstr_sha256");function Pu(st){for(var Yt="0123456789abcdef",Zt="",cr,br=0;br<st.length;br++)cr=st.charCodeAt(br),Zt+=Yt.charAt(cr>>>4&15)+Yt.charAt(cr&15);return Zt}t(Pu,"rstr2hex");function tu(st){for(var Yt="",Zt=-1,cr,br;++Zt<st.length;)cr=st.charCodeAt(Zt),br=Zt+1<st.length?st.charCodeAt(Zt+1):0,55296<=cr&&cr<=56319&&56320<=br&&br<=57343&&(cr=65536+((cr&1023)<<10)+(br&1023),Zt++),cr<=127?Yt+=String.fromCharCode(cr):cr<=2047?Yt+=String.fromCharCode(192|cr>>>6&31,128|cr&63):cr<=65535?Yt+=String.fromCharCode(224|cr>>>12&15,128|cr>>>6&63,128|cr&63):cr<=2097151&&(Yt+=String.fromCharCode(240|cr>>>18&7,128|cr>>>12&63,128|cr>>>6&63,128|cr&63));return Yt}t(tu,"str2rstr_utf8");function Of(st){for(var Yt=Array(st.length>>2),Zt=0;Zt<Yt.length;Zt++)Yt[Zt]=0;for(var Zt=0;Zt<st.length*8;Zt+=8)Yt[Zt>>5]|=(st.charCodeAt(Zt/8)&255)<<24-Zt%32;return Yt}t(Of,"rstr2binb");function of(st){for(var Yt="",Zt=0;Zt<st.length*32;Zt+=8)Yt+=String.fromCharCode(st[Zt>>5]>>>24-Zt%32&255);return Yt}t(of,"binb2rstr");function ts(st,Yt){return st>>>Yt|st<<32-Yt}t(ts,"sha256_S");function Iv(st,Yt){return st>>>Yt}t(Iv,"sha256_R");function Ip(st,Yt,Zt){return st&Yt^~st&Zt}t(Ip,"sha256_Ch");function Cd(st,Yt,Zt){return st&Yt^st&Zt^Yt&Zt}t(Cd,"sha256_Maj");function Ld(st){return ts(st,2)^ts(st,13)^ts(st,22)}t(Ld,"sha256_Sigma0256");function zv(st){return ts(st,6)^ts(st,11)^ts(st,25)}t(zv,"sha256_Sigma1256");function Rd(st){return ts(st,7)^ts(st,18)^Iv(st,3)}t(Rd,"sha256_Gamma0256");function Vh(st){return ts(st,17)^ts(st,19)^Iv(st,10)}t(Vh,"sha256_Gamma1256");var Jc=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function zp(st,Yt){var Zt=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),cr=new Array(64),br,kr,Pr,la,Qr,fa,ka,sn,Ra,La,ra,fr;for(st[Yt>>5]|=128<<24-Yt%32,st[(Yt+64>>9<<4)+15]=Yt,Ra=0;Ra<st.length;Ra+=16){for(br=Zt[0],kr=Zt[1],Pr=Zt[2],la=Zt[3],Qr=Zt[4],fa=Zt[5],ka=Zt[6],sn=Zt[7],La=0;La<64;La++)La<16?cr[La]=st[La+Ra]:cr[La]=Ro(Ro(Ro(Vh(cr[La-2]),cr[La-7]),Rd(cr[La-15])),cr[La-16]),ra=Ro(Ro(Ro(Ro(sn,zv(Qr)),Ip(Qr,fa,ka)),Jc[La]),cr[La]),fr=Ro(Ld(br),Cd(br,kr,Pr)),sn=ka,ka=fa,fa=Qr,Qr=Ro(la,ra),la=Pr,Pr=kr,kr=br,br=Ro(ra,fr);Zt[0]=Ro(br,Zt[0]),Zt[1]=Ro(kr,Zt[1]),Zt[2]=Ro(Pr,Zt[2]),Zt[3]=Ro(la,Zt[3]),Zt[4]=Ro(Qr,Zt[4]),Zt[5]=Ro(fa,Zt[5]),Zt[6]=Ro(ka,Zt[6]),Zt[7]=Ro(sn,Zt[7])}return Zt}t(zp,"binb_sha256");function Ro(st,Yt){var Zt=(st&65535)+(Yt&65535),cr=(st>>16)+(Yt>>16)+(Zt>>16);return cr<<16|Zt&65535}t(Ro,"safe_add");function Nf(st){return Array.prototype.slice.call(st)}t(Nf,"slice");function qf(st){return Nf(st).join("")}t(qf,"join");function Fp(st){var Yt=st&&st.cache,Zt=0,cr=[],br=[],kr=[];function Pr(ra,fr){var Mr=fr&&fr.stable;if(!Mr){for(var ca=0;ca<br.length;++ca)if(br[ca]===ra&&!kr[ca])return cr[ca]}var ha="g"+Zt++;return cr.push(ha),br.push(ra),kr.push(Mr),ha}t(Pr,"link");function la(){var ra=[];function fr(){ra.push.apply(ra,Nf(arguments))}t(fr,"push");var Mr=[];function ca(){var ha="v"+Zt++;return Mr.push(ha),arguments.length>0&&(ra.push(ha,"="),ra.push.apply(ra,Nf(arguments)),ra.push(";")),ha}return t(ca,"def"),n(fr,{def:ca,toString:function(){return qf([Mr.length>0?"var "+Mr.join(",")+";":"",qf(ra)])}})}t(la,"block");function Qr(){var ra=la(),fr=la(),Mr=ra.toString,ca=fr.toString;function ha(Kr,qa){fr(Kr,qa,"=",ra.def(Kr,qa),";")}return t(ha,"save"),n(function(){ra.apply(ra,Nf(arguments))},{def:ra.def,entry:ra,exit:fr,save:ha,set:function(Kr,qa,Aa){ha(Kr,qa),ra(Kr,qa,"=",Aa,";")},toString:function(){return Mr()+ca()}})}t(Qr,"scope");function fa(){var ra=qf(arguments),fr=Qr(),Mr=Qr(),ca=fr.toString,ha=Mr.toString;return n(fr,{then:function(){return fr.apply(fr,Nf(arguments)),this},else:function(){return Mr.apply(Mr,Nf(arguments)),this},toString:function(){var Kr=ha();return Kr&&(Kr="else{"+Kr+"}"),qf(["if(",ra,"){",ca(),"}",Kr])}})}t(fa,"conditional");var ka=la(),sn={};function Ra(ra,fr){var Mr=[];function ca(){var on="a"+Mr.length;return Mr.push(on),on}t(ca,"arg"),fr=fr||0;for(var ha=0;ha<fr;++ha)ca();var Kr=Qr(),qa=Kr.toString,Aa=sn[ra]=n(Kr,{arg:ca,toString:function(){return qf(["function(",Mr.join(),"){",qa(),"}"])}});return Aa}t(Ra,"proc");function La(){var ra=['"use strict";',ka,"return {"];Object.keys(sn).forEach(function(ha){ra.push('"',ha,'":',sn[ha].toString(),",")}),ra.push("}");var fr=qf(ra).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Mr;if(Yt&&(Mr=Ru(fr),Yt[Mr]))return Yt[Mr].apply(null,br);var ca=Function.apply(null,cr.concat(fr));return Yt&&(Yt[Mr]=ca),ca.apply(null,br)}return t(La,"compile"),{global:ka,link:Pr,block:la,proc:Ra,scope:Qr,cond:fa,compile:La}}t(Fp,"createEnvironment");var Ml="xyzw".split(""),Fv=5121,Uf=1,Qc=2,eh=0,Gh=1,Bv=2,ru=3,sl=4,sf=5,Ov=6,Nv="dither",vc="blend.enable",Pd="blend.color",au="blend.equation",dc="blend.func",Du="depth.enable",Iu="depth.func",qv="depth.range",Hf="depth.mask",Si="colorMask",th="cull.enable",Uv="cull.face",rh="frontFace",$f="lineWidth",ah="polygonOffset.enable",Vf="polygonOffset.offset",nh="sample.alpha",Hv="sample.enable",ih="sample.coverage",As="stencil.enable",pc="stencil.mask",gc="stencil.func",nu="stencil.opFront",Ss="stencil.opBack",jh="scissor.enable",lf="scissor.box",zu="viewport",iu="profile",uf="framebuffer",oh="vert",js="frag",Gf="elements",ff="primitive",Go="count",Fu="offset",Yh="instances",Vl="vao",cf="Width",jf="Height",yc=uf+cf,Bu=uf+jf,Dd=zu+cf,$v=zu+jf,hf="drawingBuffer",sh=hf+cf,Vv=hf+jf,Id=[dc,au,gc,nu,Ss,ih,zu,lf,Vf],vf=34962,mc=34963,Gv=2884,zd=3042,jv=3024,Yv=2960,lh=2929,Wv=3089,Ou=32823,Xv=32926,Yf=32928,yo=5126,df=35664,Nu=35665,xc=35666,uh=5124,ll=35667,bc=35668,ii=35669,_c=35670,ul=35671,fl=35672,mi=35673,Mi=35674,fh=35675,ou=35676,Gl=35678,Y=35680,ve=4,_e=1028,Ce=1029,Re=2304,Le=2305,Ke=32775,Ne=32776,rt=519,yt=7680,gt=0,Ut=1,Tt=32774,or=513,pr=36160,jt=36064,er={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},rr={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},dr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},gr={cw:Re,ccw:Le};function tr(st){return Array.isArray(st)||ft(st)||zt(st)}t(tr,"isBufferArgs");function Yr(st){return st.sort(function(Yt,Zt){return Yt===zu?-1:Zt===zu?1:Yt<Zt?-1:1})}t(Yr,"sortState");function ia(st,Yt,Zt,cr){this.thisDep=st,this.contextDep=Yt,this.propDep=Zt,this.append=cr}t(ia,"Declaration");function ua(st){return st&&!(st.thisDep||st.contextDep||st.propDep)}t(ua,"isStatic");function oa(st){return new ia(!1,!1,!1,st)}t(oa,"createStaticDecl");function pa(st,Yt){var Zt=st.type;if(Zt===eh){var cr=st.data.length;return new ia(!0,cr>=1,cr>=2,Yt)}else if(Zt===sl){var br=st.data;return new ia(br.thisDep,br.contextDep,br.propDep,Yt)}else{if(Zt===sf)return new ia(!1,!1,!1,Yt);if(Zt===Ov){for(var kr=!1,Pr=!1,la=!1,Qr=0;Qr<st.data.length;++Qr){var fa=st.data[Qr];if(fa.type===Gh)la=!0;else if(fa.type===Bv)Pr=!0;else if(fa.type===ru)kr=!0;else if(fa.type===eh){kr=!0;var ka=fa.data;ka>=1&&(Pr=!0),ka>=2&&(la=!0)}else fa.type===sl&&(kr=kr||fa.data.thisDep,Pr=Pr||fa.data.contextDep,la=la||fa.data.propDep)}return new ia(kr,Pr,la,Yt)}else return new ia(Zt===ru,Zt===Bv,Zt===Gh,Yt)}}t(pa,"createDynamicDecl");var Ya=new ia(!1,!1,!1,function(){});function en(st,Yt,Zt,cr,br,kr,Pr,la,Qr,fa,ka,sn,Ra,La,ra,fr){var Mr=fa.Record,ca={add:32774,subtract:32778,"reverse subtract":32779};Zt.ext_blend_minmax&&(ca.min=Ke,ca.max=Ne);var ha=Zt.angle_instanced_arrays,Kr=Zt.webgl_draw_buffers,qa=Zt.oes_vertex_array_object,Aa={dirty:!0,profile:fr.profile},on={},Gr=[],$r={},Wa={};function Or(Be){return Be.replace(".","_")}t(Or,"propName");function Ba(Be,We,it){var wt=Or(Be);Gr.push(Be),on[wt]=Aa[wt]=!!it,$r[wt]=We}t(Ba,"stateFlag");function va(Be,We,it){var wt=Or(Be);Gr.push(Be),Array.isArray(it)?(Aa[wt]=it.slice(),on[wt]=it.slice()):Aa[wt]=on[wt]=it,Wa[wt]=We}t(va,"stateVariable");function tn(Be){return!!isNaN(Be)}t(tn,"hasVariableReference"),Ba(Nv,jv),Ba(vc,zd),va(Pd,"blendColor",[0,0,0,0]),va(au,"blendEquationSeparate",[Tt,Tt]),va(dc,"blendFuncSeparate",[Ut,gt,Ut,gt]),Ba(Du,lh,!0),va(Iu,"depthFunc",or),va(qv,"depthRange",[0,1]),va(Hf,"depthMask",!0),va(Si,Si,[!0,!0,!0,!0]),Ba(th,Gv),va(Uv,"cullFace",Ce),va(rh,rh,Le),va($f,$f,1),Ba(ah,Ou),va(Vf,"polygonOffset",[0,0]),Ba(nh,Xv),Ba(Hv,Yf),va(ih,"sampleCoverage",[1,!1]),Ba(As,Yv),va(pc,"stencilMask",-1),va(gc,"stencilFunc",[rt,0,-1]),va(nu,"stencilOpSeparate",[_e,yt,yt,yt]),va(Ss,"stencilOpSeparate",[Ce,yt,yt,yt]),Ba(jh,Wv),va(lf,"scissor",[0,0,st.drawingBufferWidth,st.drawingBufferHeight]),va(zu,zu,[0,0,st.drawingBufferWidth,st.drawingBufferHeight]);var Sn={gl:st,context:Ra,strings:Yt,next:on,current:Aa,draw:sn,elements:kr,buffer:br,shader:ka,attributes:fa.state,vao:fa,uniforms:Qr,framebuffer:la,extensions:Zt,timer:La,isBufferArgs:tr},ja={primTypes:Qt,compareFuncs:rr,blendFuncs:er,blendEquations:ca,stencilOps:dr,glTypes:Ia,orientationType:gr};Kr&&(ja.backBuffer=[Ce],ja.drawBuffer=k(cr.maxDrawbuffers,function(Be){return Be===0?[0]:k(Be,function(We){return jt+We})}));var fn=0;function za(){var Be=Fp({cache:ra}),We=Be.link,it=Be.global;Be.id=fn++,Be.batchId="0";var wt=We(Sn),pt=Be.shared={props:"a0"};Object.keys(Sn).forEach(function(Ft){pt[Ft]=it.def(wt,".",Ft)});var bt=Be.next={},Mt=Be.current={};Object.keys(Wa).forEach(function(Ft){Array.isArray(Aa[Ft])&&(bt[Ft]=it.def(pt.next,".",Ft),Mt[Ft]=it.def(pt.current,".",Ft))});var Dt=Be.constants={};Object.keys(ja).forEach(function(Ft){Dt[Ft]=it.def(JSON.stringify(ja[Ft]))}),Be.invoke=function(Ft,Lt){switch(Lt.type){case eh:var Xt=["this",pt.context,pt.props,Be.batchId];return Ft.def(We(Lt.data),".call(",Xt.slice(0,Math.max(Lt.data.length+1,4)),")");case Gh:return Ft.def(pt.props,Lt.data);case Bv:return Ft.def(pt.context,Lt.data);case ru:return Ft.def("this",Lt.data);case sl:return Lt.data.append(Be,Ft),Lt.data.ref;case sf:return Lt.data.toString();case Ov:return Lt.data.map(function(ar){return Be.invoke(Ft,ar)})}},Be.attribCache={};var St={};return Be.scopeAttrib=function(Ft){var Lt=Yt.id(Ft);if(Lt in St)return St[Lt];var Xt=fa.scope[Lt];Xt||(Xt=fa.scope[Lt]=new Mr);var ar=St[Lt]=We(Xt);return ar},Be}t(za,"createREGLEnvironment");function Hn(Be){var We=Be.static,it=Be.dynamic,wt;if(iu in We){var pt=!!We[iu];wt=oa(function(Mt,Dt){return pt}),wt.enable=pt}else if(iu in it){var bt=it[iu];wt=pa(bt,function(Mt,Dt){return Mt.invoke(Dt,bt)})}return wt}t(Hn,"parseProfile");function ri(Be,We){var it=Be.static,wt=Be.dynamic;if(uf in it){var pt=it[uf];return pt?(pt=la.getFramebuffer(pt),oa(function(Mt,Dt){var St=Mt.link(pt),Ft=Mt.shared;Dt.set(Ft.framebuffer,".next",St);var Lt=Ft.context;return Dt.set(Lt,"."+yc,St+".width"),Dt.set(Lt,"."+Bu,St+".height"),St})):oa(function(Mt,Dt){var St=Mt.shared;Dt.set(St.framebuffer,".next","null");var Ft=St.context;return Dt.set(Ft,"."+yc,Ft+"."+sh),Dt.set(Ft,"."+Bu,Ft+"."+Vv),"null"})}else if(uf in wt){var bt=wt[uf];return pa(bt,function(Mt,Dt){var St=Mt.invoke(Dt,bt),Ft=Mt.shared,Lt=Ft.framebuffer,Xt=Dt.def(Lt,".getFramebuffer(",St,")");Dt.set(Lt,".next",Xt);var ar=Ft.context;return Dt.set(ar,"."+yc,Xt+"?"+Xt+".width:"+ar+"."+sh),Dt.set(ar,"."+Bu,Xt+"?"+Xt+".height:"+ar+"."+Vv),Xt})}else return null}t(ri,"parseFramebuffer");function Jn(Be,We,it){var wt=Be.static,pt=Be.dynamic;function bt(St){if(St in wt){var Ft=wt[St],Lt=!0,Xt=Ft.x|0,ar=Ft.y|0,vr,Ir;return"width"in Ft?vr=Ft.width|0:Lt=!1,"height"in Ft?Ir=Ft.height|0:Lt=!1,new ia(!Lt&&We&&We.thisDep,!Lt&&We&&We.contextDep,!Lt&&We&&We.propDep,function(Vr,Xr){var Ta=Vr.shared.context,Jr=vr;"width"in Ft||(Jr=Xr.def(Ta,".",yc,"-",Xt));var sa=Ir;return"height"in Ft||(sa=Xr.def(Ta,".",Bu,"-",ar)),[Xt,ar,Jr,sa]})}else if(St in pt){var zr=pt[St],Dr=pa(zr,function(Vr,Xr){var Ta=Vr.invoke(Xr,zr),Jr=Vr.shared.context,sa=Xr.def(Ta,".x|0"),Nr=Xr.def(Ta,".y|0"),Ua=Xr.def('"width" in ',Ta,"?",Ta,".width|0:","(",Jr,".",yc,"-",sa,")"),wn=Xr.def('"height" in ',Ta,"?",Ta,".height|0:","(",Jr,".",Bu,"-",Nr,")");return[sa,Nr,Ua,wn]});return We&&(Dr.thisDep=Dr.thisDep||We.thisDep,Dr.contextDep=Dr.contextDep||We.contextDep,Dr.propDep=Dr.propDep||We.propDep),Dr}else return We?new ia(We.thisDep,We.contextDep,We.propDep,function(Vr,Xr){var Ta=Vr.shared.context;return[0,0,Xr.def(Ta,".",yc),Xr.def(Ta,".",Bu)]}):null}t(bt,"parseBox");var Mt=bt(zu);if(Mt){var Dt=Mt;Mt=new ia(Mt.thisDep,Mt.contextDep,Mt.propDep,function(St,Ft){var Lt=Dt.append(St,Ft),Xt=St.shared.context;return Ft.set(Xt,"."+Dd,Lt[2]),Ft.set(Xt,"."+$v,Lt[3]),Lt})}return{viewport:Mt,scissor_box:bt(lf)}}t(Jn,"parseViewportScissor");function Po(Be,We){var it=Be.static,wt=typeof it[js]=="string"&&typeof it[oh]=="string";if(wt){if(Object.keys(We.dynamic).length>0)return null;var pt=We.static,bt=Object.keys(pt);if(bt.length>0&&typeof pt[bt[0]]=="number"){for(var Mt=[],Dt=0;Dt<bt.length;++Dt)Mt.push([pt[bt[Dt]]|0,bt[Dt]]);return Mt}}return null}t(Po,"parseAttribLocations");function Qn(Be,We,it){var wt=Be.static,pt=Be.dynamic;function bt(Lt){if(Lt in wt){var Xt=Yt.id(wt[Lt]),ar=oa(function(){return Xt});return ar.id=Xt,ar}else if(Lt in pt){var vr=pt[Lt];return pa(vr,function(Ir,zr){var Dr=Ir.invoke(zr,vr),Vr=zr.def(Ir.shared.strings,".id(",Dr,")");return Vr})}return null}t(bt,"parseShader");var Mt=bt(js),Dt=bt(oh),St=null,Ft;return ua(Mt)&&ua(Dt)?(St=ka.program(Dt.id,Mt.id,null,it),Ft=oa(function(Lt,Xt){return Lt.link(St)})):Ft=new ia(Mt&&Mt.thisDep||Dt&&Dt.thisDep,Mt&&Mt.contextDep||Dt&&Dt.contextDep,Mt&&Mt.propDep||Dt&&Dt.propDep,function(Lt,Xt){var ar=Lt.shared.shader,vr;Mt?vr=Mt.append(Lt,Xt):vr=Xt.def(ar,".",js);var Ir;Dt?Ir=Dt.append(Lt,Xt):Ir=Xt.def(ar,".",oh);var zr=ar+".program("+Ir+","+vr;return Xt.def(zr+")")}),{frag:Mt,vert:Dt,progVar:Ft,program:St}}t(Qn,"parseProgram");function jo(Be,We){var it=Be.static,wt=Be.dynamic,pt={},bt=!1;function Mt(){if(Vl in it){var Xr=it[Vl];return Xr!==null&&fa.getVAO(Xr)===null&&(Xr=fa.createVAO(Xr)),bt=!0,pt.vao=Xr,oa(function(Jr){var sa=fa.getVAO(Xr);return sa?Jr.link(sa):"null"})}else if(Vl in wt){bt=!0;var Ta=wt[Vl];return pa(Ta,function(Jr,sa){var Nr=Jr.invoke(sa,Ta);return sa.def(Jr.shared.vao+".getVAO("+Nr+")")})}return null}t(Mt,"parseVAO");var Dt=Mt(),St=!1;function Ft(){if(Gf in it){var Xr=it[Gf];if(pt.elements=Xr,tr(Xr)){var Ta=pt.elements=kr.create(Xr,!0);Xr=kr.getElements(Ta),St=!0}else Xr&&(Xr=kr.getElements(Xr),St=!0);var Jr=oa(function(Nr,Ua){if(Xr){var wn=Nr.link(Xr);return Nr.ELEMENTS=wn,wn}return Nr.ELEMENTS=null,null});return Jr.value=Xr,Jr}else if(Gf in wt){St=!0;var sa=wt[Gf];return pa(sa,function(Nr,Ua){var wn=Nr.shared,Wn=wn.isBufferArgs,$n=wn.elements,li=Nr.invoke(Ua,sa),gn=Ua.def("null"),Nn=Ua.def(Wn,"(",li,")"),Xi=Nr.cond(Nn).then(gn,"=",$n,".createStream(",li,");").else(gn,"=",$n,".getElements(",li,");");return Ua.entry(Xi),Ua.exit(Nr.cond(Nn).then($n,".destroyStream(",gn,");")),Nr.ELEMENTS=gn,gn})}else if(bt)return new ia(Dt.thisDep,Dt.contextDep,Dt.propDep,function(Nr,Ua){return Ua.def(Nr.shared.vao+".currentVAO?"+Nr.shared.elements+".getElements("+Nr.shared.vao+".currentVAO.elements):null")});return null}t(Ft,"parseElements");var Lt=Ft();function Xt(){if(ff in it){var Xr=it[ff];return pt.primitive=Xr,oa(function(Jr,sa){return Qt[Xr]})}else if(ff in wt){var Ta=wt[ff];return pa(Ta,function(Jr,sa){var Nr=Jr.constants.primTypes,Ua=Jr.invoke(sa,Ta);return sa.def(Nr,"[",Ua,"]")})}else{if(St)return ua(Lt)?Lt.value?oa(function(Jr,sa){return sa.def(Jr.ELEMENTS,".primType")}):oa(function(){return ve}):new ia(Lt.thisDep,Lt.contextDep,Lt.propDep,function(Jr,sa){var Nr=Jr.ELEMENTS;return sa.def(Nr,"?",Nr,".primType:",ve)});if(bt)return new ia(Dt.thisDep,Dt.contextDep,Dt.propDep,function(Jr,sa){return sa.def(Jr.shared.vao+".currentVAO?"+Jr.shared.vao+".currentVAO.primitive:"+ve)})}return null}t(Xt,"parsePrimitive");function ar(Xr,Ta){if(Xr in it){var Jr=it[Xr]|0;return Ta?pt.offset=Jr:pt.instances=Jr,oa(function(Nr,Ua){return Ta&&(Nr.OFFSET=Jr),Jr})}else if(Xr in wt){var sa=wt[Xr];return pa(sa,function(Nr,Ua){var wn=Nr.invoke(Ua,sa);return Ta&&(Nr.OFFSET=wn),wn})}else if(Ta){if(St)return oa(function(Nr,Ua){return Nr.OFFSET=0,0});if(bt)return new ia(Dt.thisDep,Dt.contextDep,Dt.propDep,function(Nr,Ua){return Ua.def(Nr.shared.vao+".currentVAO?"+Nr.shared.vao+".currentVAO.offset:0")})}else if(bt)return new ia(Dt.thisDep,Dt.contextDep,Dt.propDep,function(Nr,Ua){return Ua.def(Nr.shared.vao+".currentVAO?"+Nr.shared.vao+".currentVAO.instances:-1")});return null}t(ar,"parseParam");var vr=ar(Fu,!0);function Ir(){if(Go in it){var Xr=it[Go]|0;return pt.count=Xr,oa(function(){return Xr})}else if(Go in wt){var Ta=wt[Go];return pa(Ta,function(Ua,wn){var Wn=Ua.invoke(wn,Ta);return Wn})}else if(St)if(ua(Lt)){if(Lt)return vr?new ia(vr.thisDep,vr.contextDep,vr.propDep,function(Ua,wn){var Wn=wn.def(Ua.ELEMENTS,".vertCount-",Ua.OFFSET);return Wn}):oa(function(Ua,wn){return wn.def(Ua.ELEMENTS,".vertCount")});var Jr=oa(function(){return-1});return Jr}else{var sa=new ia(Lt.thisDep||vr.thisDep,Lt.contextDep||vr.contextDep,Lt.propDep||vr.propDep,function(Ua,wn){var Wn=Ua.ELEMENTS;return Ua.OFFSET?wn.def(Wn,"?",Wn,".vertCount-",Ua.OFFSET,":-1"):wn.def(Wn,"?",Wn,".vertCount:-1")});return sa}else if(bt){var Nr=new ia(Dt.thisDep,Dt.contextDep,Dt.propDep,function(Ua,wn){return wn.def(Ua.shared.vao,".currentVAO?",Ua.shared.vao,".currentVAO.count:-1")});return Nr}return null}t(Ir,"parseVertCount");var zr=Xt(),Dr=Ir(),Vr=ar(Yh,!1);return{elements:Lt,primitive:zr,count:Dr,instances:Vr,offset:vr,vao:Dt,vaoActive:bt,elementsActive:St,static:pt}}t(jo,"parseDraw");function Ii(Be,We){var it=Be.static,wt=Be.dynamic,pt={};return Gr.forEach(function(bt){var Mt=Or(bt);function Dt(St,Ft){if(bt in it){var Lt=St(it[bt]);pt[Mt]=oa(function(){return Lt})}else if(bt in wt){var Xt=wt[bt];pt[Mt]=pa(Xt,function(ar,vr){return Ft(ar,vr,ar.invoke(vr,Xt))})}}switch(t(Dt,"parseParam"),bt){case th:case vc:case Nv:case As:case Du:case jh:case ah:case nh:case Hv:case Hf:return Dt(function(St){return St},function(St,Ft,Lt){return Lt});case Iu:return Dt(function(St){return rr[St]},function(St,Ft,Lt){var Xt=St.constants.compareFuncs;return Ft.def(Xt,"[",Lt,"]")});case qv:return Dt(function(St){return St},function(St,Ft,Lt){var Xt=Ft.def("+",Lt,"[0]"),ar=Ft.def("+",Lt,"[1]");return[Xt,ar]});case dc:return Dt(function(St){var Ft="srcRGB"in St?St.srcRGB:St.src,Lt="srcAlpha"in St?St.srcAlpha:St.src,Xt="dstRGB"in St?St.dstRGB:St.dst,ar="dstAlpha"in St?St.dstAlpha:St.dst;return[er[Ft],er[Xt],er[Lt],er[ar]]},function(St,Ft,Lt){var Xt=St.constants.blendFuncs;function ar(Ta,Jr){var sa=Ft.def('"',Ta,Jr,'" in ',Lt,"?",Lt,".",Ta,Jr,":",Lt,".",Ta);return sa}t(ar,"read");var vr=ar("src","RGB"),Ir=ar("dst","RGB"),zr=Ft.def(Xt,"[",vr,"]"),Dr=Ft.def(Xt,"[",ar("src","Alpha"),"]"),Vr=Ft.def(Xt,"[",Ir,"]"),Xr=Ft.def(Xt,"[",ar("dst","Alpha"),"]");return[zr,Vr,Dr,Xr]});case au:return Dt(function(St){if(typeof St=="string")return[ca[St],ca[St]];if(typeof St=="object")return[ca[St.rgb],ca[St.alpha]]},function(St,Ft,Lt){var Xt=St.constants.blendEquations,ar=Ft.def(),vr=Ft.def(),Ir=St.cond("typeof ",Lt,'==="string"');return Ir.then(ar,"=",vr,"=",Xt,"[",Lt,"];"),Ir.else(ar,"=",Xt,"[",Lt,".rgb];",vr,"=",Xt,"[",Lt,".alpha];"),Ft(Ir),[ar,vr]});case Pd:return Dt(function(St){return k(4,function(Ft){return+St[Ft]})},function(St,Ft,Lt){return k(4,function(Xt){return Ft.def("+",Lt,"[",Xt,"]")})});case pc:return Dt(function(St){return St|0},function(St,Ft,Lt){return Ft.def(Lt,"|0")});case gc:return Dt(function(St){var Ft=St.cmp||"keep",Lt=St.ref||0,Xt="mask"in St?St.mask:-1;return[rr[Ft],Lt,Xt]},function(St,Ft,Lt){var Xt=St.constants.compareFuncs,ar=Ft.def('"cmp" in ',Lt,"?",Xt,"[",Lt,".cmp]",":",yt),vr=Ft.def(Lt,".ref|0"),Ir=Ft.def('"mask" in ',Lt,"?",Lt,".mask|0:-1");return[ar,vr,Ir]});case nu:case Ss:return Dt(function(St){var Ft=St.fail||"keep",Lt=St.zfail||"keep",Xt=St.zpass||"keep";return[bt===Ss?Ce:_e,dr[Ft],dr[Lt],dr[Xt]]},function(St,Ft,Lt){var Xt=St.constants.stencilOps;function ar(vr){return Ft.def('"',vr,'" in ',Lt,"?",Xt,"[",Lt,".",vr,"]:",yt)}return t(ar,"read"),[bt===Ss?Ce:_e,ar("fail"),ar("zfail"),ar("zpass")]});case Vf:return Dt(function(St){var Ft=St.factor|0,Lt=St.units|0;return[Ft,Lt]},function(St,Ft,Lt){var Xt=Ft.def(Lt,".factor|0"),ar=Ft.def(Lt,".units|0");return[Xt,ar]});case Uv:return Dt(function(St){var Ft=0;return St==="front"?Ft=_e:St==="back"&&(Ft=Ce),Ft},function(St,Ft,Lt){return Ft.def(Lt,'==="front"?',_e,":",Ce)});case $f:return Dt(function(St){return St},function(St,Ft,Lt){return Lt});case rh:return Dt(function(St){return gr[St]},function(St,Ft,Lt){return Ft.def(Lt+'==="cw"?'+Re+":"+Le)});case Si:return Dt(function(St){return St.map(function(Ft){return!!Ft})},function(St,Ft,Lt){return k(4,function(Xt){return"!!"+Lt+"["+Xt+"]"})});case ih:return Dt(function(St){var Ft="value"in St?St.value:1,Lt=!!St.invert;return[Ft,Lt]},function(St,Ft,Lt){var Xt=Ft.def('"value" in ',Lt,"?+",Lt,".value:1"),ar=Ft.def("!!",Lt,".invert");return[Xt,ar]})}}),pt}t(Ii,"parseGLState");function Ms(Be,We){var it=Be.static,wt=Be.dynamic,pt={};return Object.keys(it).forEach(function(bt){var Mt=it[bt],Dt;if(typeof Mt=="number"||typeof Mt=="boolean")Dt=oa(function(){return Mt});else if(typeof Mt=="function"){var St=Mt._reglType;St==="texture2d"||St==="textureCube"?Dt=oa(function(Ft){return Ft.link(Mt)}):(St==="framebuffer"||St==="framebufferCube")&&(Dt=oa(function(Ft){return Ft.link(Mt.color[0])}))}else Fa(Mt)&&(Dt=oa(function(Ft){var Lt=Ft.global.def("[",k(Mt.length,function(Xt){return Mt[Xt]}),"]");return Lt}));Dt.value=Mt,pt[bt]=Dt}),Object.keys(wt).forEach(function(bt){var Mt=wt[bt];pt[bt]=pa(Mt,function(Dt,St){return Dt.invoke(St,Mt)})}),pt}t(Ms,"parseUniforms");function Yo(Be,We){var it=Be.static,wt=Be.dynamic,pt={};return Object.keys(it).forEach(function(bt){var Mt=it[bt],Dt=Yt.id(bt),St=new Mr;if(tr(Mt))St.state=Uf,St.buffer=br.getBuffer(br.create(Mt,vf,!1,!0)),St.type=0;else{var Ft=br.getBuffer(Mt);if(Ft)St.state=Uf,St.buffer=Ft,St.type=0;else if("constant"in Mt){var Lt=Mt.constant;St.buffer="null",St.state=Qc,typeof Lt=="number"?St.x=Lt:Ml.forEach(function(Vr,Xr){Xr<Lt.length&&(St[Vr]=Lt[Xr])})}else{tr(Mt.buffer)?Ft=br.getBuffer(br.create(Mt.buffer,vf,!1,!0)):Ft=br.getBuffer(Mt.buffer);var Xt=Mt.offset|0,ar=Mt.stride|0,vr=Mt.size|0,Ir=!!Mt.normalized,zr=0;"type"in Mt&&(zr=Ia[Mt.type]);var Dr=Mt.divisor|0;St.buffer=Ft,St.state=Uf,St.size=vr,St.normalized=Ir,St.type=zr||Ft.dtype,St.offset=Xt,St.stride=ar,St.divisor=Dr}}pt[bt]=oa(function(Vr,Xr){var Ta=Vr.attribCache;if(Dt in Ta)return Ta[Dt];var Jr={isStream:!1};return Object.keys(St).forEach(function(sa){Jr[sa]=St[sa]}),St.buffer&&(Jr.buffer=Vr.link(St.buffer),Jr.type=Jr.type||Jr.buffer+".dtype"),Ta[Dt]=Jr,Jr})}),Object.keys(wt).forEach(function(bt){var Mt=wt[bt];function Dt(St,Ft){var Lt=St.invoke(Ft,Mt),Xt=St.shared,ar=St.constants,vr=Xt.isBufferArgs,Ir=Xt.buffer,zr={isStream:Ft.def(!1)},Dr=new Mr;Dr.state=Uf,Object.keys(Dr).forEach(function(Jr){zr[Jr]=Ft.def(""+Dr[Jr])});var Vr=zr.buffer,Xr=zr.type;Ft("if(",vr,"(",Lt,")){",zr.isStream,"=true;",Vr,"=",Ir,".createStream(",vf,",",Lt,");",Xr,"=",Vr,".dtype;","}else{",Vr,"=",Ir,".getBuffer(",Lt,");","if(",Vr,"){",Xr,"=",Vr,".dtype;",'}else if("constant" in ',Lt,"){",zr.state,"=",Qc,";","if(typeof "+Lt+'.constant === "number"){',zr[Ml[0]],"=",Lt,".constant;",Ml.slice(1).map(function(Jr){return zr[Jr]}).join("="),"=0;","}else{",Ml.map(function(Jr,sa){return zr[Jr]+"="+Lt+".constant.length>"+sa+"?"+Lt+".constant["+sa+"]:0;"}).join(""),"}}else{","if(",vr,"(",Lt,".buffer)){",Vr,"=",Ir,".createStream(",vf,",",Lt,".buffer);","}else{",Vr,"=",Ir,".getBuffer(",Lt,".buffer);","}",Xr,'="type" in ',Lt,"?",ar.glTypes,"[",Lt,".type]:",Vr,".dtype;",zr.normalized,"=!!",Lt,".normalized;");function Ta(Jr){Ft(zr[Jr],"=",Lt,".",Jr,"|0;")}return t(Ta,"emitReadRecord"),Ta("size"),Ta("offset"),Ta("stride"),Ta("divisor"),Ft("}}"),Ft.exit("if(",zr.isStream,"){",Ir,".destroyStream(",Vr,");","}"),zr}t(Dt,"appendAttributeCode"),pt[bt]=pa(Mt,Dt)}),pt}t(Yo,"parseAttributes");function ks(Be){var We=Be.static,it=Be.dynamic,wt={};return Object.keys(We).forEach(function(pt){var bt=We[pt];wt[pt]=oa(function(Mt,Dt){return typeof bt=="number"||typeof bt=="boolean"?""+bt:Mt.link(bt)})}),Object.keys(it).forEach(function(pt){var bt=it[pt];wt[pt]=pa(bt,function(Mt,Dt){return Mt.invoke(Dt,bt)})}),wt}t(ks,"parseContext");function Ys(Be,We,it,wt,pt){Be.static,Be.dynamic;var bt=Po(Be,We),Mt=ri(Be),Dt=Jn(Be,Mt),St=jo(Be),Ft=Ii(Be),Lt=Qn(Be,pt,bt);function Xt(Vr){var Xr=Dt[Vr];Xr&&(Ft[Vr]=Xr)}t(Xt,"copyBox"),Xt(zu),Xt(Or(lf));var ar=Object.keys(Ft).length>0,vr={framebuffer:Mt,draw:St,shader:Lt,state:Ft,dirty:ar,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(vr.profile=Hn(Be),vr.uniforms=Ms(it),vr.drawVAO=vr.scopeVAO=St.vao,!vr.drawVAO&&Lt.program&&!bt&&Zt.angle_instanced_arrays&&St.static.elements){var Ir=!0,zr=Lt.program.attributes.map(function(Vr){var Xr=We.static[Vr];return Ir=Ir&&!!Xr,Xr});if(Ir&&zr.length>0){var Dr=fa.getVAO(fa.createVAO({attributes:zr,elements:St.static.elements}));vr.drawVAO=new ia(null,null,null,function(Vr,Xr){return Vr.link(Dr)}),vr.useVAO=!0}}return bt?vr.useVAO=!0:vr.attributes=Yo(We),vr.context=ks(wt),vr}t(Ys,"parseArguments");function rs(Be,We,it){var wt=Be.shared,pt=wt.context,bt=Be.scope();Object.keys(it).forEach(function(Mt){We.save(pt,"."+Mt);var Dt=it[Mt],St=Dt.append(Be,We);Array.isArray(St)?bt(pt,".",Mt,"=[",St.join(),"];"):bt(pt,".",Mt,"=",St,";")}),We(bt)}t(rs,"emitContext");function as(Be,We,it,wt){var pt=Be.shared,bt=pt.gl,Mt=pt.framebuffer,Dt;Kr&&(Dt=We.def(pt.extensions,".webgl_draw_buffers"));var St=Be.constants,Ft=St.drawBuffer,Lt=St.backBuffer,Xt;it?Xt=it.append(Be,We):Xt=We.def(Mt,".next"),wt||We("if(",Xt,"!==",Mt,".cur){"),We("if(",Xt,"){",bt,".bindFramebuffer(",pr,",",Xt,".framebuffer);"),Kr&&We(Dt,".drawBuffersWEBGL(",Ft,"[",Xt,".colorAttachments.length]);"),We("}else{",bt,".bindFramebuffer(",pr,",null);"),Kr&&We(Dt,".drawBuffersWEBGL(",Lt,");"),We("}",Mt,".cur=",Xt,";"),wt||We("}")}t(as,"emitPollFramebuffer");function _n(Be,We,it){var wt=Be.shared,pt=wt.gl,bt=Be.current,Mt=Be.next,Dt=wt.current,St=wt.next,Ft=Be.cond(Dt,".dirty");Gr.forEach(function(Lt){var Xt=Or(Lt);if(!(Xt in it.state)){var ar,vr;if(Xt in Mt){ar=Mt[Xt],vr=bt[Xt];var Ir=k(Aa[Xt].length,function(Dr){return Ft.def(ar,"[",Dr,"]")});Ft(Be.cond(Ir.map(function(Dr,Vr){return Dr+"!=="+vr+"["+Vr+"]"}).join("||")).then(pt,".",Wa[Xt],"(",Ir,");",Ir.map(function(Dr,Vr){return vr+"["+Vr+"]="+Dr}).join(";"),";"))}else{ar=Ft.def(St,".",Xt);var zr=Be.cond(ar,"!==",Dt,".",Xt);Ft(zr),Xt in $r?zr(Be.cond(ar).then(pt,".enable(",$r[Xt],");").else(pt,".disable(",$r[Xt],");"),Dt,".",Xt,"=",ar,";"):zr(pt,".",Wa[Xt],"(",ar,");",Dt,".",Xt,"=",ar,";")}}}),Object.keys(it.state).length===0&&Ft(Dt,".dirty=false;"),We(Ft)}t(_n,"emitPollState");function kl(Be,We,it,wt){var pt=Be.shared,bt=Be.current,Mt=pt.current,Dt=pt.gl,St;Yr(Object.keys(it)).forEach(function(Ft){var Lt=it[Ft];if(!(wt&&!wt(Lt))){var Xt=Lt.append(Be,We);if($r[Ft]){var ar=$r[Ft];ua(Lt)?(St=Be.link(Xt,{stable:!0}),We(Be.cond(St).then(Dt,".enable(",ar,");").else(Dt,".disable(",ar,");")),We(Mt,".",Ft,"=",St,";")):(We(Be.cond(Xt).then(Dt,".enable(",ar,");").else(Dt,".disable(",ar,");")),We(Mt,".",Ft,"=",Xt,";"))}else if(Fa(Xt)){var vr=bt[Ft];We(Dt,".",Wa[Ft],"(",Xt,");",Xt.map(function(Ir,zr){return vr+"["+zr+"]="+Ir}).join(";"),";")}else ua(Lt)?(St=Be.link(Xt,{stable:!0}),We(Dt,".",Wa[Ft],"(",St,");",Mt,".",Ft,"=",St,";")):We(Dt,".",Wa[Ft],"(",Xt,");",Mt,".",Ft,"=",Xt,";")}})}t(kl,"emitSetOptions");function zi(Be,We){ha&&(Be.instancing=We.def(Be.shared.extensions,".angle_instanced_arrays"))}t(zi,"injectExtensions");function Wo(Be,We,it,wt,pt){var bt=Be.shared,Mt=Be.stats,Dt=bt.current,St=bt.timer,Ft=it.profile;function Lt(){return typeof performance>"u"?"Date.now()":"performance.now()"}t(Lt,"perfCounter");var Xt,ar;function vr(Ta){Xt=We.def(),Ta(Xt,"=",Lt(),";"),typeof pt=="string"?Ta(Mt,".count+=",pt,";"):Ta(Mt,".count++;"),La&&(wt?(ar=We.def(),Ta(ar,"=",St,".getNumPendingQueries();")):Ta(St,".beginQuery(",Mt,");"))}t(vr,"emitProfileStart");function Ir(Ta){Ta(Mt,".cpuTime+=",Lt(),"-",Xt,";"),La&&(wt?Ta(St,".pushScopeStats(",ar,",",St,".getNumPendingQueries(),",Mt,");"):Ta(St,".endQuery();"))}t(Ir,"emitProfileEnd");function zr(Ta){var Jr=We.def(Dt,".profile");We(Dt,".profile=",Ta,";"),We.exit(Dt,".profile=",Jr,";")}t(zr,"scopeProfile");var Dr;if(Ft){if(ua(Ft)){Ft.enable?(vr(We),Ir(We.exit),zr("true")):zr("false");return}Dr=Ft.append(Be,We),zr(Dr)}else Dr=We.def(Dt,".profile");var Vr=Be.block();vr(Vr),We("if(",Dr,"){",Vr,"}");var Xr=Be.block();Ir(Xr),We.exit("if(",Dr,"){",Xr,"}")}t(Wo,"emitProfile");function Ws(Be,We,it,wt,pt){var bt=Be.shared;function Mt(St){switch(St){case df:case ll:case ul:return 2;case Nu:case bc:case fl:return 3;case xc:case ii:case mi:return 4;default:return 1}}t(Mt,"typeLength");function Dt(St,Ft,Lt){var Xt=bt.gl,ar=We.def(St,".location"),vr=We.def(bt.attributes,"[",ar,"]"),Ir=Lt.state,zr=Lt.buffer,Dr=[Lt.x,Lt.y,Lt.z,Lt.w],Vr=["buffer","normalized","offset","stride"];function Xr(){We("if(!",vr,".buffer){",Xt,".enableVertexAttribArray(",ar,");}");var Jr=Lt.type,sa;if(Lt.size?sa=We.def(Lt.size,"||",Ft):sa=Ft,We("if(",vr,".type!==",Jr,"||",vr,".size!==",sa,"||",Vr.map(function(Ua){return vr+"."+Ua+"!=="+Lt[Ua]}).join("||"),"){",Xt,".bindBuffer(",vf,",",zr,".buffer);",Xt,".vertexAttribPointer(",[ar,sa,Jr,Lt.normalized,Lt.stride,Lt.offset],");",vr,".type=",Jr,";",vr,".size=",sa,";",Vr.map(function(Ua){return vr+"."+Ua+"="+Lt[Ua]+";"}).join(""),"}"),ha){var Nr=Lt.divisor;We("if(",vr,".divisor!==",Nr,"){",Be.instancing,".vertexAttribDivisorANGLE(",[ar,Nr],");",vr,".divisor=",Nr,";}")}}t(Xr,"emitBuffer");function Ta(){We("if(",vr,".buffer){",Xt,".disableVertexAttribArray(",ar,");",vr,".buffer=null;","}if(",Ml.map(function(Jr,sa){return vr+"."+Jr+"!=="+Dr[sa]}).join("||"),"){",Xt,".vertexAttrib4f(",ar,",",Dr,");",Ml.map(function(Jr,sa){return vr+"."+Jr+"="+Dr[sa]+";"}).join(""),"}")}t(Ta,"emitConstant"),Ir===Uf?Xr():Ir===Qc?Ta():(We("if(",Ir,"===",Uf,"){"),Xr(),We("}else{"),Ta(),We("}"))}t(Dt,"emitBindAttribute"),wt.forEach(function(St){var Ft=St.name,Lt=it.attributes[Ft],Xt;if(Lt){if(!pt(Lt))return;Xt=Lt.append(Be,We)}else{if(!pt(Ya))return;var ar=Be.scopeAttrib(Ft);Xt={},Object.keys(new Mr).forEach(function(vr){Xt[vr]=We.def(ar,".",vr)})}Dt(Be.link(St),Mt(St.info.type),Xt)})}t(Ws,"emitAttributes");function Z(Be,We,it,wt,pt,bt){for(var Mt=Be.shared,Dt=Mt.gl,St,Ft=0;Ft<wt.length;++Ft){var Lt=wt[Ft],Xt=Lt.name,ar=Lt.info.type,vr=it.uniforms[Xt],Ir=Be.link(Lt),zr=Ir+".location",Dr;if(vr){if(!pt(vr))continue;if(ua(vr)){var Vr=vr.value;if(ar===Gl||ar===Y){var Xr=Be.link(Vr._texture||Vr.color[0]._texture);We(Dt,".uniform1i(",zr,",",Xr+".bind());"),We.exit(Xr,".unbind();")}else if(ar===Mi||ar===fh||ar===ou){var Ta=Be.global.def("new Float32Array(["+Array.prototype.slice.call(Vr)+"])"),Jr=2;ar===fh?Jr=3:ar===ou&&(Jr=4),We(Dt,".uniformMatrix",Jr,"fv(",zr,",false,",Ta,");")}else{switch(ar){case yo:St="1f";break;case df:St="2f";break;case Nu:St="3f";break;case xc:St="4f";break;case _c:St="1i";break;case uh:St="1i";break;case ul:St="2i";break;case ll:St="2i";break;case fl:St="3i";break;case bc:St="3i";break;case mi:St="4i";break;case ii:St="4i";break}We(Dt,".uniform",St,"(",zr,",",Fa(Vr)?Array.prototype.slice.call(Vr):Vr,");")}continue}else Dr=vr.append(Be,We)}else{if(!pt(Ya))continue;Dr=We.def(Mt.uniforms,"[",Yt.id(Xt),"]")}ar===Gl?We("if(",Dr,"&&",Dr,'._reglType==="framebuffer"){',Dr,"=",Dr,".color[0];","}"):ar===Y&&We("if(",Dr,"&&",Dr,'._reglType==="framebufferCube"){',Dr,"=",Dr,".color[0];","}");var sa=1;switch(ar){case Gl:case Y:var Nr=We.def(Dr,"._texture");We(Dt,".uniform1i(",zr,",",Nr,".bind());"),We.exit(Nr,".unbind();");continue;case uh:case _c:St="1i";break;case ll:case ul:St="2i",sa=2;break;case bc:case fl:St="3i",sa=3;break;case ii:case mi:St="4i",sa=4;break;case yo:St="1f";break;case df:St="2f",sa=2;break;case Nu:St="3f",sa=3;break;case xc:St="4f",sa=4;break;case Mi:St="Matrix2fv";break;case fh:St="Matrix3fv";break;case ou:St="Matrix4fv";break}if(St.charAt(0)==="M"){We(Dt,".uniform",St,"(",zr,",");var Ua=Math.pow(ar-Mi+2,2),wn=Be.global.def("new Float32Array(",Ua,")");Array.isArray(Dr)?We("false,(",k(Ua,function(Nn){return wn+"["+Nn+"]="+Dr[Nn]}),",",wn,")"):We("false,(Array.isArray(",Dr,")||",Dr," instanceof Float32Array)?",Dr,":(",k(Ua,function(Nn){return wn+"["+Nn+"]="+Dr+"["+Nn+"]"}),",",wn,")"),We(");")}else if(sa>1){for(var Wn=[],$n=[],li=0;li<sa;++li)Array.isArray(Dr)?$n.push(Dr[li]):$n.push(We.def(Dr+"["+li+"]")),bt&&Wn.push(We.def());bt&&We("if(!",Be.batchId,"||",Wn.map(function(Nn,Xi){return Nn+"!=="+$n[Xi]}).join("||"),"){",Wn.map(function(Nn,Xi){return Nn+"="+$n[Xi]+";"}).join("")),We(Dt,".uniform",St,"(",zr,",",$n.join(","),");"),bt&&We("}")}else{if(bt){var gn=We.def();We("if(!",Be.batchId,"||",gn,"!==",Dr,"){",gn,"=",Dr,";")}We(Dt,".uniform",St,"(",zr,",",Dr,");"),bt&&We("}")}}}t(Z,"emitUniforms");function N(Be,We,it,wt){var pt=Be.shared,bt=pt.gl,Mt=pt.draw,Dt=wt.draw;function St(){var sa=Dt.elements,Nr,Ua=We;return sa?((sa.contextDep&&wt.contextDynamic||sa.propDep)&&(Ua=it),Nr=sa.append(Be,Ua),Dt.elementsActive&&Ua("if("+Nr+")"+bt+".bindBuffer("+mc+","+Nr+".buffer.buffer);")):(Nr=Ua.def(),Ua(Nr,"=",Mt,".",Gf,";","if(",Nr,"){",bt,".bindBuffer(",mc,",",Nr,".buffer.buffer);}","else if(",pt.vao,".currentVAO){",Nr,"=",Be.shared.elements+".getElements("+pt.vao,".currentVAO.elements);",qa?"":"if("+Nr+")"+bt+".bindBuffer("+mc+","+Nr+".buffer.buffer);","}")),Nr}t(St,"emitElements");function Ft(){var sa=Dt.count,Nr,Ua=We;return sa?((sa.contextDep&&wt.contextDynamic||sa.propDep)&&(Ua=it),Nr=sa.append(Be,Ua)):Nr=Ua.def(Mt,".",Go),Nr}t(Ft,"emitCount");var Lt=St();function Xt(sa){var Nr=Dt[sa];return Nr?Nr.contextDep&&wt.contextDynamic||Nr.propDep?Nr.append(Be,it):Nr.append(Be,We):We.def(Mt,".",sa)}t(Xt,"emitValue");var ar=Xt(ff),vr=Xt(Fu),Ir=Ft();if(typeof Ir=="number"){if(Ir===0)return}else it("if(",Ir,"){"),it.exit("}");var zr,Dr;ha&&(zr=Xt(Yh),Dr=Be.instancing);var Vr=Lt+".type",Xr=Dt.elements&&ua(Dt.elements)&&!Dt.vaoActive;function Ta(){function sa(){it(Dr,".drawElementsInstancedANGLE(",[ar,Ir,Vr,vr+"<<(("+Vr+"-"+Fv+")>>1)",zr],");")}t(sa,"drawElements");function Nr(){it(Dr,".drawArraysInstancedANGLE(",[ar,vr,Ir,zr],");")}t(Nr,"drawArrays"),Lt&&Lt!=="null"?Xr?sa():(it("if(",Lt,"){"),sa(),it("}else{"),Nr(),it("}")):Nr()}t(Ta,"emitInstancing");function Jr(){function sa(){it(bt+".drawElements("+[ar,Ir,Vr,vr+"<<(("+Vr+"-"+Fv+")>>1)"]+");")}t(sa,"drawElements");function Nr(){it(bt+".drawArrays("+[ar,vr,Ir]+");")}t(Nr,"drawArrays"),Lt&&Lt!=="null"?Xr?sa():(it("if(",Lt,"){"),sa(),it("}else{"),Nr(),it("}")):Nr()}t(Jr,"emitRegular"),ha&&(typeof zr!="number"||zr>=0)?typeof zr=="string"?(it("if(",zr,">0){"),Ta(),it("}else if(",zr,"<0){"),Jr(),it("}")):Ta():Jr()}t(N,"emitDraw");function K(Be,We,it,wt,pt){var bt=za(),Mt=bt.proc("body",pt);return ha&&(bt.instancing=Mt.def(bt.shared.extensions,".angle_instanced_arrays")),Be(bt,Mt,it,wt),bt.compile().body}t(K,"createBody");function U(Be,We,it,wt){zi(Be,We),it.useVAO?it.drawVAO?We(Be.shared.vao,".setVAO(",it.drawVAO.append(Be,We),");"):We(Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"):(We(Be.shared.vao,".setVAO(null);"),Ws(Be,We,it,wt.attributes,function(){return!0})),Z(Be,We,it,wt.uniforms,function(){return!0},!1),N(Be,We,We,it)}t(U,"emitDrawBody");function Q(Be,We){var it=Be.proc("draw",1);zi(Be,it),rs(Be,it,We.context),as(Be,it,We.framebuffer),_n(Be,it,We),kl(Be,it,We.state),Wo(Be,it,We,!1,!0);var wt=We.shader.progVar.append(Be,it);if(it(Be.shared.gl,".useProgram(",wt,".program);"),We.shader.program)U(Be,it,We,We.shader.program);else{it(Be.shared.vao,".setVAO(null);");var pt=Be.global.def("{}"),bt=it.def(wt,".id"),Mt=it.def(pt,"[",bt,"]");it(Be.cond(Mt).then(Mt,".call(this,a0);").else(Mt,"=",pt,"[",bt,"]=",Be.link(function(Dt){return K(U,Be,We,Dt,1)}),"(",wt,");",Mt,".call(this,a0);"))}Object.keys(We.state).length>0&&it(Be.shared.current,".dirty=true;"),Be.shared.vao&&it(Be.shared.vao,".setVAO(null);")}t(Q,"emitDrawProc");function le(Be,We,it,wt){Be.batchId="a1",zi(Be,We);function pt(){return!0}t(pt,"all"),Ws(Be,We,it,wt.attributes,pt),Z(Be,We,it,wt.uniforms,pt,!1),N(Be,We,We,it)}t(le,"emitBatchDynamicShaderBody");function be(Be,We,it,wt){zi(Be,We);var pt=it.contextDep,bt=We.def(),Mt="a0",Dt="a1",St=We.def();Be.shared.props=St,Be.batchId=bt;var Ft=Be.scope(),Lt=Be.scope();We(Ft.entry,"for(",bt,"=0;",bt,"<",Dt,";++",bt,"){",St,"=",Mt,"[",bt,"];",Lt,"}",Ft.exit);function Xt(Vr){return Vr.contextDep&&pt||Vr.propDep}t(Xt,"isInnerDefn");function ar(Vr){return!Xt(Vr)}if(t(ar,"isOuterDefn"),it.needsContext&&rs(Be,Lt,it.context),it.needsFramebuffer&&as(Be,Lt,it.framebuffer),kl(Be,Lt,it.state,Xt),it.profile&&Xt(it.profile)&&Wo(Be,Lt,it,!1,!0),wt)it.useVAO?it.drawVAO?Xt(it.drawVAO)?Lt(Be.shared.vao,".setVAO(",it.drawVAO.append(Be,Lt),");"):Ft(Be.shared.vao,".setVAO(",it.drawVAO.append(Be,Ft),");"):Ft(Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"):(Ft(Be.shared.vao,".setVAO(null);"),Ws(Be,Ft,it,wt.attributes,ar),Ws(Be,Lt,it,wt.attributes,Xt)),Z(Be,Ft,it,wt.uniforms,ar,!1),Z(Be,Lt,it,wt.uniforms,Xt,!0),N(Be,Ft,Lt,it);else{var vr=Be.global.def("{}"),Ir=it.shader.progVar.append(Be,Lt),zr=Lt.def(Ir,".id"),Dr=Lt.def(vr,"[",zr,"]");Lt(Be.shared.gl,".useProgram(",Ir,".program);","if(!",Dr,"){",Dr,"=",vr,"[",zr,"]=",Be.link(function(Vr){return K(le,Be,it,Vr,2)}),"(",Ir,");}",Dr,".call(this,a0[",bt,"],",bt,");")}}t(be,"emitBatchBody");function Me(Be,We){var it=Be.proc("batch",2);Be.batchId="0",zi(Be,it);var wt=!1,pt=!0;Object.keys(We.context).forEach(function(vr){wt=wt||We.context[vr].propDep}),wt||(rs(Be,it,We.context),pt=!1);var bt=We.framebuffer,Mt=!1;bt?(bt.propDep?wt=Mt=!0:bt.contextDep&&wt&&(Mt=!0),Mt||as(Be,it,bt)):as(Be,it,null),We.state.viewport&&We.state.viewport.propDep&&(wt=!0);function Dt(vr){return vr.contextDep&&wt||vr.propDep}t(Dt,"isInnerDefn"),_n(Be,it,We),kl(Be,it,We.state,function(vr){return!Dt(vr)}),(!We.profile||!Dt(We.profile))&&Wo(Be,it,We,!1,"a1"),We.contextDep=wt,We.needsContext=pt,We.needsFramebuffer=Mt;var St=We.shader.progVar;if(St.contextDep&&wt||St.propDep)be(Be,it,We,null);else{var Ft=St.append(Be,it);if(it(Be.shared.gl,".useProgram(",Ft,".program);"),We.shader.program)be(Be,it,We,We.shader.program);else{it(Be.shared.vao,".setVAO(null);");var Lt=Be.global.def("{}"),Xt=it.def(Ft,".id"),ar=it.def(Lt,"[",Xt,"]");it(Be.cond(ar).then(ar,".call(this,a0,a1);").else(ar,"=",Lt,"[",Xt,"]=",Be.link(function(vr){return K(be,Be,We,vr,2)}),"(",Ft,");",ar,".call(this,a0,a1);"))}}Object.keys(We.state).length>0&&it(Be.shared.current,".dirty=true;"),Be.shared.vao&&it(Be.shared.vao,".setVAO(null);")}t(Me,"emitBatchProc");function Ie(Be,We){var it=Be.proc("scope",3);Be.batchId="a2";var wt=Be.shared,pt=wt.current;if(rs(Be,it,We.context),We.framebuffer&&We.framebuffer.append(Be,it),Yr(Object.keys(We.state)).forEach(function(Dt){var St=We.state[Dt],Ft=St.append(Be,it);Fa(Ft)?Ft.forEach(function(Lt,Xt){tn(Lt)?it.set(Be.next[Dt],"["+Xt+"]",Lt):it.set(Be.next[Dt],"["+Xt+"]",Be.link(Lt,{stable:!0}))}):ua(St)?it.set(wt.next,"."+Dt,Be.link(Ft,{stable:!0})):it.set(wt.next,"."+Dt,Ft)}),Wo(Be,it,We,!0,!0),[Gf,Fu,Go,Yh,ff].forEach(function(Dt){var St=We.draw[Dt];if(!!St){var Ft=St.append(Be,it);tn(Ft)?it.set(wt.draw,"."+Dt,Ft):it.set(wt.draw,"."+Dt,Be.link(Ft),{stable:!0})}}),Object.keys(We.uniforms).forEach(function(Dt){var St=We.uniforms[Dt].append(Be,it);Array.isArray(St)&&(St="["+St.map(function(Ft){return tn(Ft)?Ft:Be.link(Ft,{stable:!0})})+"]"),it.set(wt.uniforms,"["+Be.link(Yt.id(Dt),{stable:!0})+"]",St)}),Object.keys(We.attributes).forEach(function(Dt){var St=We.attributes[Dt].append(Be,it),Ft=Be.scopeAttrib(Dt);Object.keys(new Mr).forEach(function(Lt){it.set(Ft,"."+Lt,St[Lt])})}),We.scopeVAO){var bt=We.scopeVAO.append(Be,it);tn(bt)?it.set(wt.vao,".targetVAO",bt):it.set(wt.vao,".targetVAO",Be.link(bt,{stable:!0}))}function Mt(Dt){var St=We.shader[Dt];if(St){var Ft=St.append(Be,it);tn(Ft)?it.set(wt.shader,"."+Dt,Ft):it.set(wt.shader,"."+Dt,Be.link(Ft,{stable:!0}))}}t(Mt,"saveShader"),Mt(oh),Mt(js),Object.keys(We.state).length>0&&(it(pt,".dirty=true;"),it.exit(pt,".dirty=true;")),it("a1(",Be.shared.context,",a0,",Be.batchId,");")}t(Ie,"emitScopeProc");function Ze(Be){if(!(typeof Be!="object"||Fa(Be))){for(var We=Object.keys(Be),it=0;it<We.length;++it)if(g.isDynamic(Be[We[it]]))return!0;return!1}}t(Ze,"isDynamicObject");function ct(Be,We,it){var wt=We.static[it];if(!wt||!Ze(wt))return;var pt=Be.global,bt=Object.keys(wt),Mt=!1,Dt=!1,St=!1,Ft=Be.global.def("{}");bt.forEach(function(Xt){var ar=wt[Xt];if(g.isDynamic(ar)){typeof ar=="function"&&(ar=wt[Xt]=g.unbox(ar));var vr=pa(ar,null);Mt=Mt||vr.thisDep,St=St||vr.propDep,Dt=Dt||vr.contextDep}else{switch(pt(Ft,".",Xt,"="),typeof ar){case"number":pt(ar);break;case"string":pt('"',ar,'"');break;case"object":Array.isArray(ar)&&pt("[",ar.join(),"]");break;default:pt(Be.link(ar));break}pt(";")}});function Lt(Xt,ar){bt.forEach(function(vr){var Ir=wt[vr];if(!!g.isDynamic(Ir)){var zr=Xt.invoke(ar,Ir);ar(Ft,".",vr,"=",zr,";")}})}t(Lt,"appendBlock"),We.dynamic[it]=new g.DynamicVariable(sl,{thisDep:Mt,contextDep:Dt,propDep:St,ref:Ft,append:Lt}),delete We.static[it]}t(ct,"splatObject");function ht(Be,We,it,wt,pt){var bt=za();bt.stats=bt.link(pt),Object.keys(We.static).forEach(function(Dt){ct(bt,We,Dt)}),Id.forEach(function(Dt){ct(bt,Be,Dt)});var Mt=Ys(Be,We,it,wt,bt);return Mt.shader.program&&(Mt.shader.program.attributes.sort(function(Dt,St){return Dt.name<St.name?-1:1}),Mt.shader.program.uniforms.sort(function(Dt,St){return Dt.name<St.name?-1:1})),Q(bt,Mt),Ie(bt,Mt),Me(bt,Mt),n(bt.compile(),{destroy:function(){Mt.shader.program.destroy()}})}return t(ht,"compileCommand"),{next:on,current:Aa,procs:function(){var Be=za(),We=Be.proc("poll"),it=Be.proc("refresh"),wt=Be.block();We(wt),it(wt);var pt=Be.shared,bt=pt.gl,Mt=pt.next,Dt=pt.current;wt(Dt,".dirty=false;"),as(Be,We),as(Be,it,null,!0);var St;ha&&(St=Be.link(ha)),Zt.oes_vertex_array_object&&it(Be.link(Zt.oes_vertex_array_object),".bindVertexArrayOES(null);");var Ft=it.def(pt.attributes),Lt=it.def(0),Xt=Be.cond(Lt,".buffer");Xt.then(bt,".enableVertexAttribArray(i);",bt,".bindBuffer(",vf,",",Lt,".buffer.buffer);",bt,".vertexAttribPointer(i,",Lt,".size,",Lt,".type,",Lt,".normalized,",Lt,".stride,",Lt,".offset);").else(bt,".disableVertexAttribArray(i);",bt,".vertexAttrib4f(i,",Lt,".x,",Lt,".y,",Lt,".z,",Lt,".w);",Lt,".buffer=null;");var ar=Be.link(cr.maxAttributes,{stable:!0});return it("for(var i=0;i<",ar,";++i){",Lt,"=",Ft,"[i];",Xt,"}"),ha&&it("for(var i=0;i<",ar,";++i){",St,".vertexAttribDivisorANGLE(i,",Ft,"[i].divisor);","}"),it(Be.shared.vao,".currentVAO=null;",Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"),Object.keys($r).forEach(function(vr){var Ir=$r[vr],zr=wt.def(Mt,".",vr),Dr=Be.block();Dr("if(",zr,"){",bt,".enable(",Ir,")}else{",bt,".disable(",Ir,")}",Dt,".",vr,"=",zr,";"),it(Dr),We("if(",zr,"!==",Dt,".",vr,"){",Dr,"}")}),Object.keys(Wa).forEach(function(vr){var Ir=Wa[vr],zr=Aa[vr],Dr,Vr,Xr=Be.block();if(Xr(bt,".",Ir,"("),Fa(zr)){var Ta=zr.length;Dr=Be.global.def(Mt,".",vr),Vr=Be.global.def(Dt,".",vr),Xr(k(Ta,function(Jr){return Dr+"["+Jr+"]"}),");",k(Ta,function(Jr){return Vr+"["+Jr+"]="+Dr+"["+Jr+"];"}).join("")),We("if(",k(Ta,function(Jr){return Dr+"["+Jr+"]!=="+Vr+"["+Jr+"]"}).join("||"),"){",Xr,"}")}else Dr=wt.def(Mt,".",vr),Vr=wt.def(Dt,".",vr),Xr(Dr,");",Dt,".",vr,"=",Dr,";"),We("if(",Dr,"!==",Vr,"){",Xr,"}");it(Xr)}),Be.compile()}(),compile:ht}}t(en,"reglCore");function Ca(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}t(Ca,"stats");var pn=34918,ti=34919,Hi=35007,si=t(function(st,Yt){if(!Yt.ext_disjoint_timer_query)return null;var Zt=[];function cr(){return Zt.pop()||Yt.ext_disjoint_timer_query.createQueryEXT()}t(cr,"allocQuery");function br(ca){Zt.push(ca)}t(br,"freeQuery");var kr=[];function Pr(ca){var ha=cr();Yt.ext_disjoint_timer_query.beginQueryEXT(Hi,ha),kr.push(ha),La(kr.length-1,kr.length,ca)}t(Pr,"beginQuery");function la(){Yt.ext_disjoint_timer_query.endQueryEXT(Hi)}t(la,"endQuery");function Qr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}t(Qr,"PendingStats");var fa=[];function ka(){return fa.pop()||new Qr}t(ka,"allocPendingStats");function sn(ca){fa.push(ca)}t(sn,"freePendingStats");var Ra=[];function La(ca,ha,Kr){var qa=ka();qa.startQueryIndex=ca,qa.endQueryIndex=ha,qa.sum=0,qa.stats=Kr,Ra.push(qa)}t(La,"pushScopeStats");var ra=[],fr=[];function Mr(){var ca,ha,Kr=kr.length;if(Kr!==0){fr.length=Math.max(fr.length,Kr+1),ra.length=Math.max(ra.length,Kr+1),ra[0]=0,fr[0]=0;var qa=0;for(ca=0,ha=0;ha<kr.length;++ha){var Aa=kr[ha];Yt.ext_disjoint_timer_query.getQueryObjectEXT(Aa,ti)?(qa+=Yt.ext_disjoint_timer_query.getQueryObjectEXT(Aa,pn),br(Aa)):kr[ca++]=Aa,ra[ha+1]=qa,fr[ha+1]=ca}for(kr.length=ca,ca=0,ha=0;ha<Ra.length;++ha){var on=Ra[ha],Gr=on.startQueryIndex,$r=on.endQueryIndex;on.sum+=ra[$r]-ra[Gr];var Wa=fr[Gr],Or=fr[$r];Or===Wa?(on.stats.gpuTime+=on.sum/1e6,sn(on)):(on.startQueryIndex=Wa,on.endQueryIndex=Or,Ra[ca++]=on)}Ra.length=ca}}return t(Mr,"update"),{beginQuery:Pr,endQuery:la,pushScopeStats:La,update:Mr,getNumPendingQueries:function(){return kr.length},clear:function(){Zt.push.apply(Zt,kr);for(var ca=0;ca<Zt.length;ca++)Yt.ext_disjoint_timer_query.deleteQueryEXT(Zt[ca]);kr.length=0,Zt.length=0},restore:function(){kr.length=0,Zt.length=0}}},"createTimer"),wa=16384,En=256,zn=1024,Fn=34962,Yi="webglcontextlost",On="webglcontextrestored",fo=1,Wi=2,mo=3;function No(st,Yt){for(var Zt=0;Zt<st.length;++Zt)if(st[Zt]===Yt)return Zt;return-1}t(No,"find");function ss(st){var Yt=A(st);if(!Yt)return null;var Zt=Yt.gl,cr=Zt.getContextAttributes();Zt.isContextLost();var br=S(Zt,Yt);if(!br)return null;var kr=m(),Pr=Ca(),la=Yt.cachedCode||{},Qr=br.extensions,fa=si(Zt,Qr),ka=b(),sn=Zt.drawingBufferWidth,Ra=Zt.drawingBufferHeight,La={tick:0,time:0,viewportWidth:sn,viewportHeight:Ra,framebufferWidth:sn,framebufferHeight:Ra,drawingBufferWidth:sn,drawingBufferHeight:Ra,pixelRatio:Yt.pixelRatio},ra={},fr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Mr=kt(Zt,Qr),ca=je(Zt,Pr,Yt,qa),ha=Pa(Zt,Qr,ca,Pr),Kr=Pp(Zt,Qr,Mr,Pr,ca,ha,fr);function qa(N){return Kr.destroyBuffer(N)}t(qa,"destroyBuffer");var Aa=Ff(Zt,kr,Pr,Yt),on=kv(Zt,Qr,Mr,function(){Wa.procs.poll()},La,Pr,Yt),Gr=qh(Zt,Qr,Mr,Pr,Yt),$r=Xc(Zt,Qr,Mr,on,Gr,Pr),Wa=en(Zt,kr,Qr,Mr,ca,ha,on,$r,ra,Kr,Aa,fr,La,fa,la,Yt),Or=$l(Zt,$r,Wa.procs.poll,La),Ba=Wa.next,va=Zt.canvas,tn=[],Sn=[],ja=[],fn=[Yt.onDestroy],za=null;function Hn(){if(tn.length===0){fa&&fa.update(),za=null;return}za=p.next(Hn),as();for(var N=tn.length-1;N>=0;--N){var K=tn[N];K&&K(La,null,0)}Zt.flush(),fa&&fa.update()}t(Hn,"handleRAF");function ri(){!za&&tn.length>0&&(za=p.next(Hn))}t(ri,"startRAF");function Jn(){za&&(p.cancel(Hn),za=null)}t(Jn,"stopRAF");function Po(N){N.preventDefault(),Jn(),Sn.forEach(function(K){K()})}t(Po,"handleContextLoss");function Qn(N){Zt.getError(),br.restore(),Aa.restore(),ca.restore(),on.restore(),Gr.restore(),$r.restore(),Kr.restore(),fa&&fa.restore(),Wa.procs.refresh(),ri(),ja.forEach(function(K){K()})}t(Qn,"handleContextRestored"),va&&(va.addEventListener(Yi,Po,!1),va.addEventListener(On,Qn,!1));function jo(){tn.length=0,Jn(),va&&(va.removeEventListener(Yi,Po),va.removeEventListener(On,Qn)),Aa.clear(),$r.clear(),Gr.clear(),Kr.clear(),on.clear(),ha.clear(),ca.clear(),fa&&fa.clear(),fn.forEach(function(N){N()})}t(jo,"destroy");function Ii(N){function K(pt){var bt=n({},pt);delete bt.uniforms,delete bt.attributes,delete bt.context,delete bt.vao,"stencil"in bt&&bt.stencil.op&&(bt.stencil.opBack=bt.stencil.opFront=bt.stencil.op,delete bt.stencil.op);function Mt(Dt){if(Dt in bt){var St=bt[Dt];delete bt[Dt],Object.keys(St).forEach(function(Ft){bt[Dt+"."+Ft]=St[Ft]})}}return t(Mt,"merge"),Mt("blend"),Mt("depth"),Mt("cull"),Mt("stencil"),Mt("polygonOffset"),Mt("scissor"),Mt("sample"),"vao"in pt&&(bt.vao=pt.vao),bt}t(K,"flattenNestedOptions");function U(pt,bt){var Mt={},Dt={};return Object.keys(pt).forEach(function(St){var Ft=pt[St];if(g.isDynamic(Ft)){Dt[St]=g.unbox(Ft,St);return}else if(bt&&Array.isArray(Ft)){for(var Lt=0;Lt<Ft.length;++Lt)if(g.isDynamic(Ft[Lt])){Dt[St]=g.unbox(Ft,St);return}}Mt[St]=Ft}),{dynamic:Dt,static:Mt}}t(U,"separateDynamic");var Q=U(N.context||{},!0),le=U(N.uniforms||{},!0),be=U(N.attributes||{},!1),Me=U(K(N),!1),Ie={gpuTime:0,cpuTime:0,count:0},Ze=Wa.compile(Me,be,le,Q,Ie),ct=Ze.draw,ht=Ze.batch,Be=Ze.scope,We=[];function it(pt){for(;We.length<pt;)We.push(null);return We}t(it,"reserve");function wt(pt,bt){var Mt;if(typeof pt=="function")return Be.call(this,null,pt,0);if(typeof bt=="function")if(typeof pt=="number")for(Mt=0;Mt<pt;++Mt)Be.call(this,null,bt,Mt);else if(Array.isArray(pt))for(Mt=0;Mt<pt.length;++Mt)Be.call(this,pt[Mt],bt,Mt);else return Be.call(this,pt,bt,0);else if(typeof pt=="number"){if(pt>0)return ht.call(this,it(pt|0),pt|0)}else if(Array.isArray(pt)){if(pt.length)return ht.call(this,pt,pt.length)}else return ct.call(this,pt)}return t(wt,"REGLCommand"),n(wt,{stats:Ie,destroy:function(){Ze.destroy()}})}t(Ii,"compileProcedure");var Ms=$r.setFBO=Ii({framebuffer:g.define.call(null,fo,"framebuffer")});function Yo(N,K){var U=0;Wa.procs.poll();var Q=K.color;Q&&(Zt.clearColor(+Q[0]||0,+Q[1]||0,+Q[2]||0,+Q[3]||0),U|=wa),"depth"in K&&(Zt.clearDepth(+K.depth),U|=En),"stencil"in K&&(Zt.clearStencil(K.stencil|0),U|=zn),Zt.clear(U)}t(Yo,"clearImpl");function ks(N){if("framebuffer"in N)if(N.framebuffer&&N.framebuffer_reglType==="framebufferCube")for(var K=0;K<6;++K)Ms(n({framebuffer:N.framebuffer.faces[K]},N),Yo);else Ms(N,Yo);else Yo(null,N)}t(ks,"clear");function Ys(N){tn.push(N);function K(){var U=No(tn,N);function Q(){var le=No(tn,Q);tn[le]=tn[tn.length-1],tn.length-=1,tn.length<=0&&Jn()}t(Q,"pendingCancel"),tn[U]=Q}return t(K,"cancel"),ri(),{cancel:K}}t(Ys,"frame");function rs(){var N=Ba.viewport,K=Ba.scissor_box;N[0]=N[1]=K[0]=K[1]=0,La.viewportWidth=La.framebufferWidth=La.drawingBufferWidth=N[2]=K[2]=Zt.drawingBufferWidth,La.viewportHeight=La.framebufferHeight=La.drawingBufferHeight=N[3]=K[3]=Zt.drawingBufferHeight}t(rs,"pollViewport");function as(){La.tick+=1,La.time=kl(),rs(),Wa.procs.poll()}t(as,"poll");function _n(){on.refresh(),rs(),Wa.procs.refresh(),fa&&fa.update()}t(_n,"refresh");function kl(){return(b()-ka)/1e3}t(kl,"now"),_n();function zi(N,K){var U;switch(N){case"frame":return Ys(K);case"lost":U=Sn;break;case"restore":U=ja;break;case"destroy":U=fn;break}return U.push(K),{cancel:function(){for(var Q=0;Q<U.length;++Q)if(U[Q]===K){U[Q]=U[U.length-1],U.pop();return}}}}t(zi,"addListener");function Wo(){return la}t(Wo,"getCachedCode");function Ws(N){Object.entries(N).forEach(function(K){la[K[0]]=K[1]})}t(Ws,"preloadCachedCode");var Z=n(Ii,{clear:ks,prop:g.define.bind(null,fo),context:g.define.bind(null,Wi),this:g.define.bind(null,mo),draw:Ii({}),buffer:function(N){return ca.create(N,Fn,!1,!1)},elements:function(N){return ha.create(N,!1)},texture:on.create2D,cube:on.createCube,renderbuffer:Gr.create,framebuffer:$r.create,framebufferCube:$r.createCube,vao:Kr.createVAO,attributes:cr,frame:Ys,on:zi,limits:Mr,hasExtension:function(N){return Mr.extensions.indexOf(N.toLowerCase())>=0},read:Or,destroy:jo,_gl:Zt,_refresh:_n,poll:function(){as(),fa&&fa.update()},now:kl,stats:Pr,getCachedCode:Wo,preloadCachedCode:Ws});return Yt.onDone(null,Z),Z}return t(ss,"wrapREGL"),ss})}(VR)),VR.exports}t(Qde,"requireRegl_unchecked");var GR,oee;function N9e(){if(oee)return GR;oee=1;var e=md();GR=t(function(l){if(l?typeof l=="string"&&(l={container:l}):l={},n(l)?l={container:l}:i(l)?l={container:l}:s(l)?l={gl:l}:l=e(l,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),l.pixelRatio||(l.pixelRatio=xs.pixelRatio||1),l.gl)return l.gl;if(l.canvas&&(l.container=l.canvas.parentNode),l.container){if(typeof l.container=="string"){var u=document.querySelector(l.container);if(!u)throw Error("Element "+l.container+" is not found");l.container=u}n(l.container)?(l.canvas=l.container,l.container=l.canvas.parentNode):l.canvas||(l.canvas=o(),l.container.appendChild(l.canvas),r(l))}else if(!l.canvas)if(typeof document<"u")l.container=document.body||document.documentElement,l.canvas=o(),l.container.appendChild(l.canvas),r(l);else throw Error("Not DOM environment. Use headless-gl.");return l.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(f){try{l.gl=l.canvas.getContext(f,l.attrs)}catch{}return l.gl}),l.gl},"setContext");function r(a){if(a.container)if(a.container==document.body)document.body.style.width||(a.canvas.width=a.width||a.pixelRatio*xs.innerWidth),document.body.style.height||(a.canvas.height=a.height||a.pixelRatio*xs.innerHeight);else{var l=a.container.getBoundingClientRect();a.canvas.width=a.width||l.right-l.left,a.canvas.height=a.height||l.bottom-l.top}}t(r,"resize");function n(a){return typeof a.getContext=="function"&&"width"in a&&"height"in a}t(n,"isCanvas");function i(a){return typeof a.nodeName=="string"&&typeof a.appendChild=="function"&&typeof a.getBoundingClientRect=="function"}t(i,"isElement");function s(a){return typeof a.drawArrays=="function"||typeof a.drawElements=="function"}t(s,"isContext");function o(){var a=document.createElement("canvas");return a.style.position="absolute",a.style.top=0,a.style.left=0,a}return t(o,"createCanvas"),GR}t(N9e,"requireContext");var jR,see;function q9e(){if(see)return jR;see=1;var e=Jde(),r=[32,126];jR=n;function n(i){i=i||{};var s=i.shape?i.shape:i.canvas?[i.canvas.width,i.canvas.height]:[512,512],o=i.canvas||document.createElement("canvas"),a=i.font,l=typeof i.step=="number"?[i.step,i.step]:i.step||[32,32],u=i.chars||r;if(a&&typeof a!="string"&&(a=e(a)),!Array.isArray(u))u=String(u).split("");else if(u.length===2&&typeof u[0]=="number"&&typeof u[1]=="number"){for(var f=[],h=u[0],v=0;h<=u[1];h++)f[v++]=String.fromCharCode(h);u=f}s=s.slice(),o.width=s[0],o.height=s[1];var c=o.getContext("2d");c.fillStyle="#000",c.fillRect(0,0,o.width,o.height),c.font=a,c.textAlign="center",c.textBaseline="middle",c.fillStyle="#fff";for(var d=l[0]/2,g=l[1]/2,h=0;h<u.length;h++)c.fillText(u[h],d,g),(d+=l[0])>s[0]-l[0]/2&&(d=l[0]/2,g+=l[1]);return o}return t(n,"atlas"),jR}t(q9e,"requireFontAtlas");var ki={},vs={},lee;function epe(){if(lee)return vs;lee=1;var e=32;vs.INT_BITS=e,vs.INT_MAX=2147483647,vs.INT_MIN=-1<<e-1,vs.sign=function(i){return(i>0)-(i<0)},vs.abs=function(i){var s=i>>e-1;return(i^s)-s},vs.min=function(i,s){return s^(i^s)&-(i<s)},vs.max=function(i,s){return i^(i^s)&-(i<s)},vs.isPow2=function(i){return!(i&i-1)&&!!i},vs.log2=function(i){var s,o;return s=(i>65535)<<4,i>>>=s,o=(i>255)<<3,i>>>=o,s|=o,o=(i>15)<<2,i>>>=o,s|=o,o=(i>3)<<1,i>>>=o,s|=o,s|i>>1},vs.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},vs.popCount=function(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),(i+(i>>>4)&252645135)*16843009>>>24};function r(i){var s=32;return i&=-i,i&&s--,i&65535&&(s-=16),i&16711935&&(s-=8),i&252645135&&(s-=4),i&858993459&&(s-=2),i&1431655765&&(s-=1),s}t(r,"countTrailingZeros"),vs.countTrailingZeros=r,vs.nextPow2=function(i){return i+=i===0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1},vs.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i-(i>>>1)},vs.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,i&=15,27030>>>i&1};var n=new Array(256);return function(i){for(var s=0;s<256;++s){var o=s,a=s,l=7;for(o>>>=1;o;o>>>=1)a<<=1,a|=o&1,--l;i[s]=a<<l&255}}(n),vs.reverse=function(i){return n[i&255]<<24|n[i>>>8&255]<<16|n[i>>>16&255]<<8|n[i>>>24&255]},vs.interleave2=function(i,s){return i&=65535,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,s&=65535,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,i|s<<1},vs.deinterleave2=function(i,s){return i=i>>>s&1431655765,i=(i|i>>>1)&858993459,i=(i|i>>>2)&252645135,i=(i|i>>>4)&16711935,i=(i|i>>>16)&65535,i<<16>>16},vs.interleave3=function(i,s,o){return i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,s&=1023,s=(s|s<<16)&4278190335,s=(s|s<<8)&251719695,s=(s|s<<4)&3272356035,s=(s|s<<2)&1227133513,i|=s<<1,o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,i|o<<2},vs.deinterleave3=function(i,s){return i=i>>>s&1227133513,i=(i|i>>>2)&3272356035,i=(i|i>>>4)&251719695,i=(i|i>>>8)&4278190335,i=(i|i>>>16)&1023,i<<22>>22},vs.nextCombination=function(i){var s=i|i-1;return s+1|(~s&-~s)-1>>>r(i)+1},vs}t(epe,"requireTwiddle");var YR,uee;function U9e(){if(uee)return YR;uee=1;function e(i,s,o){var a=i[o]|0;if(a<=0)return[];var l=new Array(a),u;if(o===i.length-1)for(u=0;u<a;++u)l[u]=s;else for(u=0;u<a;++u)l[u]=e(i,s,o+1);return l}t(e,"dupe_array");function r(i,s){var o,a;for(o=new Array(i),a=0;a<i;++a)o[a]=s;return o}t(r,"dupe_number");function n(i,s){switch(typeof s>"u"&&(s=0),typeof i){case"number":if(i>0)return r(i|0,s);break;case"object":if(typeof i.length=="number")return e(i,s,0);break}return[]}return t(n,"dupe"),YR=n,YR}t(U9e,"requireDup");var fee;function H9e(){if(fee)return ki;fee=1;var e=epe(),r=U9e(),n=bce().Buffer;xs.__TYPEDARRAY_POOL||(xs.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var i=typeof Uint8ClampedArray<"u",s=typeof BigUint64Array<"u",o=typeof BigInt64Array<"u",a=xs.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=r([32,0])),a.BIGUINT64||(a.BIGUINT64=r([32,0])),a.BIGINT64||(a.BIGINT64=r([32,0])),a.BUFFER||(a.BUFFER=r([32,0]));var l=a.DATA,u=a.BUFFER;ki.free=t(function(k){if(n.isBuffer(k))u[e.log2(k.length)].push(k);else{if(Object.prototype.toString.call(k)!=="[object ArrayBuffer]"&&(k=k.buffer),!k)return;var L=k.length||k.byteLength,P=e.log2(L)|0;l[P].push(k)}},"free");function f(S){if(!!S){var k=S.length||S.byteLength,L=e.log2(k);l[L].push(S)}}t(f,"freeArrayBuffer");function h(S){f(S.buffer)}t(h,"freeTypedArray"),ki.freeUint8=ki.freeUint16=ki.freeUint32=ki.freeBigUint64=ki.freeInt8=ki.freeInt16=ki.freeInt32=ki.freeBigInt64=ki.freeFloat32=ki.freeFloat=ki.freeFloat64=ki.freeDouble=ki.freeUint8Clamped=ki.freeDataView=h,ki.freeArrayBuffer=f,ki.freeBuffer=t(function(k){u[e.log2(k.length)].push(k)},"freeBuffer"),ki.malloc=t(function(k,L){if(L===void 0||L==="arraybuffer")return v(k);switch(L){case"uint8":return c(k);case"uint16":return d(k);case"uint32":return g(k);case"int8":return p(k);case"int16":return b(k);case"int32":return m(k);case"float":case"float32":return y(k);case"double":case"float64":return T(k);case"uint8_clamped":return _(k);case"bigint64":return w(k);case"biguint64":return M(k);case"buffer":return A(k);case"data":case"dataview":return x(k);default:return null}return null},"malloc");function v(k){var k=e.nextPow2(k),L=e.log2(k),P=l[L];return P.length>0?P.pop():new ArrayBuffer(k)}t(v,"mallocArrayBuffer"),ki.mallocArrayBuffer=v;function c(S){return new Uint8Array(v(S),0,S)}t(c,"mallocUint8"),ki.mallocUint8=c;function d(S){return new Uint16Array(v(2*S),0,S)}t(d,"mallocUint16"),ki.mallocUint16=d;function g(S){return new Uint32Array(v(4*S),0,S)}t(g,"mallocUint32"),ki.mallocUint32=g;function p(S){return new Int8Array(v(S),0,S)}t(p,"mallocInt8"),ki.mallocInt8=p;function b(S){return new Int16Array(v(2*S),0,S)}t(b,"mallocInt16"),ki.mallocInt16=b;function m(S){return new Int32Array(v(4*S),0,S)}t(m,"mallocInt32"),ki.mallocInt32=m;function y(S){return new Float32Array(v(4*S),0,S)}t(y,"mallocFloat"),ki.mallocFloat32=ki.mallocFloat=y;function T(S){return new Float64Array(v(8*S),0,S)}t(T,"mallocDouble"),ki.mallocFloat64=ki.mallocDouble=T;function _(S){return i?new Uint8ClampedArray(v(S),0,S):c(S)}t(_,"mallocUint8Clamped"),ki.mallocUint8Clamped=_;function M(S){return s?new BigUint64Array(v(8*S),0,S):null}t(M,"mallocBigUint64"),ki.mallocBigUint64=M;function w(S){return o?new BigInt64Array(v(8*S),0,S):null}t(w,"mallocBigInt64"),ki.mallocBigInt64=w;function x(S){return new DataView(v(S),0,S)}t(x,"mallocDataView"),ki.mallocDataView=x;function A(S){S=e.nextPow2(S);var k=e.log2(S),L=u[k];return L.length>0?L.pop():new n(S)}return t(A,"mallocBuffer"),ki.mallocBuffer=A,ki.clearCache=t(function(){for(var k=0;k<32;++k)a.UINT8[k].length=0,a.UINT16[k].length=0,a.UINT32[k].length=0,a.INT8[k].length=0,a.INT16[k].length=0,a.INT32[k].length=0,a.FLOAT[k].length=0,a.DOUBLE[k].length=0,a.BIGUINT64[k].length=0,a.BIGINT64[k].length=0,a.UINT8C[k].length=0,l[k].length=0,u[k].length=0},"clearCache"),ki}t(H9e,"requirePool");var WR,cee;function $9e(){if(cee)return WR;cee=1;var e=Object.prototype.toString;return WR=t(function(r){var n;return e.call(r)==="[object Object]"&&(n=Object.getPrototypeOf(r),n===null||n===Object.getPrototypeOf({}))},"isPlainObj"),WR}t($9e,"requireIsPlainObj");var XR,hee;function tpe(){return hee||(hee=1,XR=t(function(r,n){n||(n=[0,""]),r=String(r);var i=parseFloat(r,10);return n[0]=i,n[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n},"parseUnit")),XR}t(tpe,"requireParseUnit");var ZR,vee;function rpe(){if(vee)return ZR;vee=1;var e=tpe();ZR=s;var r=96;function n(o,a){var l=e(getComputedStyle(o).getPropertyValue(a));return l[0]*s(l[1],o)}t(n,"getPropertyInPX");function i(o,a){var l=document.createElement("div");l.style["font-size"]="128"+o,a.appendChild(l);var u=n(l,"font-size")/128;return a.removeChild(l),u}t(i,"getSizeBrutal");function s(o,a){switch(a=a||document.body,o=(o||"px").trim().toLowerCase(),(a===window||a===document)&&(a=document.body),o){case"%":return a.clientHeight/100;case"ch":case"ex":return i(o,a);case"em":return n(a,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}return t(s,"toPX"),ZR}t(rpe,"requireTopx");var KR,dee;function V9e(){if(dee)return KR;dee=1,KR=i;var e=i.canvas=document.createElement("canvas"),r=e.getContext("2d"),n=s([32,126]);i.createPairs=s,i.ascii=n;function i(o,a){Array.isArray(o)&&(o=o.join(", "));var l={},u,f=16,h=.05;a&&(a.length===2&&typeof a[0]=="number"?u=s(a):Array.isArray(a)?u=a:(a.o?u=s(a.o):a.pairs&&(u=a.pairs),a.fontSize&&(f=a.fontSize),a.threshold!=null&&(h=a.threshold))),u||(u=n),r.font=f+"px "+o;for(var v=0;v<u.length;v++){var c=u[v],d=r.measureText(c[0]).width+r.measureText(c[1]).width,g=r.measureText(c).width;if(Math.abs(d-g)>f*h){var p=(g-d)/f;l[c]=p*1e3}}return l}t(i,"kerning");function s(o){for(var a=[],l=o[0];l<=o[1];l++)for(var u=String.fromCharCode(l),f=o[0];f<o[1];f++){var h=String.fromCharCode(f),v=u+h;a.push(v)}return a}return t(s,"createPairs"),KR}t(V9e,"requireDetectKerning");var JR,pee;function G9e(){if(pee)return JR;pee=1,JR=e,e.canvas=document.createElement("canvas"),e.cache={};function e(h,o){o||(o={}),(typeof h=="string"||Array.isArray(h))&&(o.family=h);var a=Array.isArray(o.family)?o.family.join(", "):o.family;if(!a)throw Error("`family` must be defined");var l=o.size||o.fontSize||o.em||48,u=o.weight||o.fontWeight||"",f=o.style||o.fontStyle||"",h=[f,u,l].join(" ")+"px "+a,v=o.origin||"top";if(e.cache[a]&&l<=e.cache[a].em)return r(e.cache[a],v);var c=o.canvas||e.canvas,d=c.getContext("2d"),g={upper:o.upper!==void 0?o.upper:"H",lower:o.lower!==void 0?o.lower:"x",descent:o.descent!==void 0?o.descent:"p",ascent:o.ascent!==void 0?o.ascent:"h",tittle:o.tittle!==void 0?o.tittle:"i",overshoot:o.overshoot!==void 0?o.overshoot:"O"},p=Math.ceil(l*1.5);c.height=p,c.width=p*.5,d.font=h;var b="H",m={top:0};d.clearRect(0,0,p,p),d.textBaseline="top",d.fillStyle="black",d.fillText(b,0,0);var y=n(d.getImageData(0,0,p,p));d.clearRect(0,0,p,p),d.textBaseline="bottom",d.fillText(b,0,p);var T=n(d.getImageData(0,0,p,p));m.lineHeight=m.bottom=p-T+y,d.clearRect(0,0,p,p),d.textBaseline="alphabetic",d.fillText(b,0,p);var _=n(d.getImageData(0,0,p,p)),M=p-_-1+y;m.baseline=m.alphabetic=M,d.clearRect(0,0,p,p),d.textBaseline="middle",d.fillText(b,0,p*.5);var w=n(d.getImageData(0,0,p,p));m.median=m.middle=p-w-1+y-p*.5,d.clearRect(0,0,p,p),d.textBaseline="hanging",d.fillText(b,0,p*.5);var x=n(d.getImageData(0,0,p,p));m.hanging=p-x-1+y-p*.5,d.clearRect(0,0,p,p),d.textBaseline="ideographic",d.fillText(b,0,p);var A=n(d.getImageData(0,0,p,p));if(m.ideographic=p-A-1+y,g.upper&&(d.clearRect(0,0,p,p),d.textBaseline="top",d.fillText(g.upper,0,0),m.upper=n(d.getImageData(0,0,p,p)),m.capHeight=m.baseline-m.upper),g.lower&&(d.clearRect(0,0,p,p),d.textBaseline="top",d.fillText(g.lower,0,0),m.lower=n(d.getImageData(0,0,p,p)),m.xHeight=m.baseline-m.lower),g.tittle&&(d.clearRect(0,0,p,p),d.textBaseline="top",d.fillText(g.tittle,0,0),m.tittle=n(d.getImageData(0,0,p,p))),g.ascent&&(d.clearRect(0,0,p,p),d.textBaseline="top",d.fillText(g.ascent,0,0),m.ascent=n(d.getImageData(0,0,p,p))),g.descent&&(d.clearRect(0,0,p,p),d.textBaseline="top",d.fillText(g.descent,0,0),m.descent=i(d.getImageData(0,0,p,p))),g.overshoot){d.clearRect(0,0,p,p),d.textBaseline="top",d.fillText(g.overshoot,0,0);var S=i(d.getImageData(0,0,p,p));m.overshoot=S-M}for(var k in m)m[k]/=l;return m.em=l,e.cache[a]=m,r(m,v)}t(e,"measure");function r(s,o){var a={};typeof o=="string"&&(o=s[o]);for(var l in s)l!=="em"&&(a[l]=s[l]-o);return a}t(r,"applyOrigin");function n(s){for(var o=s.height,a=s.data,l=3;l<a.length;l+=4)if(a[l]!==0)return Math.floor((l-3)*.25/o)}t(n,"firstTop");function i(s){for(var o=s.height,a=s.data,l=a.length-1;l>0;l-=4)if(a[l]!==0)return Math.floor((l-3)*.25/o)}return t(i,"firstBottom"),JR}t(G9e,"requireFontMeasure");var QR,gee;function j9e(){if(gee)return QR;gee=1;var e=O9e(),r=md(),n=Qde(),i=N9e(),s=Vde(),o=z0(),a=q9e(),l=H9e(),u=kx(),f=$9e(),h=tpe(),v=rpe(),c=V9e(),d=Os,g=G9e(),p=jy(),b=epe(),m=b.nextPow2,y=new s,T=!1;if(document.body){var _=document.body.appendChild(document.createElement("div"));_.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(_).fontStretch&&(T=!0),document.body.removeChild(_)}var M=t(function(A){w(A)?(A={regl:A},this.gl=A.regl._gl):this.gl=i(A),this.shader=y.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=A.regl||n({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),y.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(A)?A:{})},"GlText");M.prototype.createShader=t(function(){var A=this.regl,S=A({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:A.prop("count"),offset:A.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:A.this("sizeBuffer")},width:{offset:0,stride:8,buffer:A.this("sizeBuffer")},char:A.this("charBuffer"),position:A.this("position")},uniforms:{atlasSize:function(L,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(L,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(L,P){return P.atlas.texture},charStep:function(L,P){return P.atlas.step},em:function(L,P){return P.atlas.em},color:A.prop("color"),opacity:A.prop("opacity"),viewport:A.this("viewportArray"),scale:A.this("scale"),align:A.prop("align"),baseline:A.prop("baseline"),translate:A.this("translate"),positionOffset:A.prop("positionOffset")},primitive:"points",viewport:A.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),k={};return{regl:A,draw:S,atlas:k}},"createShader"),M.prototype.update=t(function(A){var S=this;if(typeof A=="string")A={text:A};else if(!A)return;A=r(A,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),A.opacity!=null&&(Array.isArray(A.opacity)?this.opacity=A.opacity.map(function(qe){return parseFloat(qe)}):this.opacity=parseFloat(A.opacity)),A.viewport!=null&&(this.viewport=u(A.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),A.kerning!=null&&(this.kerning=A.kerning),A.offset!=null&&(typeof A.offset=="number"&&(A.offset=[A.offset,0]),this.positionOffset=p(A.offset)),A.direction&&(this.direction=A.direction),A.range&&(this.range=A.range,this.scale=[1/(A.range[2]-A.range[0]),1/(A.range[3]-A.range[1])],this.translate=[-A.range[0],-A.range[1]]),A.scale&&(this.scale=A.scale),A.translate&&(this.translate=A.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!A.font&&(A.font=M.baseFontSize+"px sans-serif");var k=!1,L=!1;if(A.font&&(Array.isArray(A.font)?A.font:[A.font]).forEach(function(qe,Je){if(typeof qe=="string")try{qe=e.parse(qe)}catch{qe=e.parse(M.baseFontSize+"px "+qe)}else qe=e.parse(e.stringify(qe));var Ge=e.stringify({size:M.baseFontSize,family:qe.family,stretch:T?qe.stretch:void 0,variant:qe.variant,weight:qe.weight,style:qe.style}),et=h(qe.size),Ue=Math.round(et[0]*v(et[1]));if(Ue!==S.fontSize[Je]&&(L=!0,S.fontSize[Je]=Ue),(!S.font[Je]||Ge!=S.font[Je].baseString)&&(k=!0,S.font[Je]=M.fonts[Ge],!S.font[Je])){var Ye=qe.family.join(", "),$e=[qe.style];qe.style!=qe.variant&&$e.push(qe.variant),qe.variant!=qe.weight&&$e.push(qe.weight),T&&qe.weight!=qe.stretch&&$e.push(qe.stretch),S.font[Je]={baseString:Ge,family:Ye,weight:qe.weight,stretch:qe.stretch,style:qe.style,variant:qe.variant,width:{},kerning:{},metrics:g(Ye,{origin:"top",fontSize:M.baseFontSize,fontStyle:$e.join(" ")})},M.fonts[Ge]=S.font[Je]}}),(k||L)&&this.font.forEach(function(qe,Je){var Ge=e.stringify({size:S.fontSize[Je],family:qe.family,stretch:T?qe.stretch:void 0,variant:qe.variant,weight:qe.weight,style:qe.style});if(S.fontAtlas[Je]=S.shader.atlas[Ge],!S.fontAtlas[Je]){var et=qe.metrics;S.shader.atlas[Ge]=S.fontAtlas[Je]={fontString:Ge,step:Math.ceil(S.fontSize[Je]*et.bottom*.5)*2,em:S.fontSize[Je],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:S.regl.texture()}}A.text==null&&(A.text=S.text)}),typeof A.text=="string"&&A.position&&A.position.length>2){for(var P=Array(A.position.length*.5),D=0;D<P.length;D++)P[D]=A.text;A.text=P}var B;if(A.text!=null||k){if(this.textOffsets=[0],Array.isArray(A.text)){this.count=A.text[0].length,this.counts=[this.count];for(var z=1;z<A.text.length;z++)this.textOffsets[z]=this.textOffsets[z-1]+A.text[z-1].length,this.count+=A.text[z].length,this.counts.push(A.text[z].length);this.text=A.text.join("")}else this.text=A.text,this.count=this.text.length,this.counts=[this.count];B=[],this.font.forEach(function(qe,Je){M.atlasContext.font=qe.baseString;for(var Ge=S.fontAtlas[Je],et=0;et<S.text.length;et++){var Ue=S.text.charAt(et);if(Ge.ids[Ue]==null&&(Ge.ids[Ue]=Ge.chars.length,Ge.chars.push(Ue),B.push(Ue)),qe.width[Ue]==null&&(qe.width[Ue]=M.atlasContext.measureText(Ue).width/M.baseFontSize,S.kerning)){var Ye=[];for(var $e in qe.width)Ye.push($e+Ue,Ue+$e);d(qe.kerning,c(qe.family,{pairs:Ye}))}}})}if(A.position)if(A.position.length>2){for(var R=!A.position[0].length,F=l.mallocFloat(this.count*2),O=0,q=0;O<this.counts.length;O++){var H=this.counts[O];if(R)for(var j=0;j<H;j++)F[q++]=A.position[O*2],F[q++]=A.position[O*2+1];else for(var X=0;X<H;X++)F[q++]=A.position[O][0],F[q++]=A.position[O][1]}this.position.call?this.position({type:"float",data:F}):this.position=this.regl.buffer({type:"float",data:F}),l.freeFloat(F)}else this.position.destroy&&this.position.destroy(),this.position={constant:A.position};if(A.text||k){var G=l.mallocUint8(this.count),$=l.mallocFloat(this.count*2);this.textWidth=[];for(var te=0,ee=0;te<this.counts.length;te++){for(var ie=this.counts[te],se=this.font[te]||this.font[0],W=this.fontAtlas[te]||this.fontAtlas[0],ne=0;ne<ie;ne++){var he=this.text.charAt(ee),re=this.text.charAt(ee-1);if(G[ee]=W.ids[he],$[ee*2]=se.width[he],ne){var ae=$[ee*2-2],fe=$[ee*2],ce=$[ee*2-1],xe=ce+ae*.5+fe*.5;if(this.kerning){var Te=se.kerning[re+he];Te&&(xe+=Te*.001)}$[ee*2+1]=xe}else $[ee*2+1]=$[ee*2]*.5;ee++}this.textWidth.push($.length?$[ee*2-2]*.5+$[ee*2-1]:0)}A.align||(A.align=this.align),this.charBuffer({data:G,type:"uint8",usage:"stream"}),this.sizeBuffer({data:$,type:"float",usage:"stream"}),l.freeUint8(G),l.freeFloat($),B.length&&this.font.forEach(function(qe,Je){var Ge=S.fontAtlas[Je],et=Ge.step,Ue=Math.floor(M.maxAtlasSize/et),Ye=Math.min(Ue,Ge.chars.length),$e=Math.ceil(Ge.chars.length/Ye),Ct=m(Ye*et),It=m($e*et);Ge.width=Ct,Ge.height=It,Ge.rows=$e,Ge.cols=Ye,Ge.em&&Ge.texture({data:a({canvas:M.atlasCanvas,font:Ge.fontString,chars:Ge.chars,shape:[Ct,It],step:[et,et]})})})}if(A.align&&(this.align=A.align,this.alignOffset=this.textWidth.map(function(qe,Je){var Ge=Array.isArray(S.align)?S.align.length>1?S.align[Je]:S.align[0]:S.align;if(typeof Ge=="number")return Ge;switch(Ge){case"right":case"end":return-qe;case"center":case"centre":case"middle":return-qe*.5}return 0})),this.baseline==null&&A.baseline==null&&(A.baseline=0),A.baseline!=null&&(this.baseline=A.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(qe,Je){var Ge=(S.font[Je]||S.font[0]).metrics,et=0;return et+=Ge.bottom*.5,typeof qe=="number"?et+=qe-Ge.baseline:et+=-Ge[qe],et*=-1,et})),A.color!=null)if(A.color||(A.color="transparent"),typeof A.color=="string"||!isNaN(A.color))this.color=o(A.color,"uint8");else{var me;if(typeof A.color[0]=="number"&&A.color.length>this.counts.length){var pe=A.color.length;me=l.mallocUint8(pe);for(var oe=(A.color.subarray||A.color.slice).bind(A.color),de=0;de<pe;de+=4)me.set(o(oe(de,de+4),"uint8"),de)}else{var ye=A.color.length;me=l.mallocUint8(ye*4);for(var we=0;we<ye;we++)me.set(o(A.color[we]||0,"uint8"),we*4)}this.color=me}if(A.position||A.text||A.color||A.baseline||A.align||A.font||A.offset||A.opacity){var Ee=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Ee){var De=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(De);for(var Fe=0;Fe<this.batch.length;Fe++)this.batch[Fe]={count:this.counts.length>1?this.counts[Fe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Fe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Fe*4,Fe*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Fe]:this.opacity,baseline:this.baselineOffset[Fe]!=null?this.baselineOffset[Fe]:this.baselineOffset[0],align:this.align?this.alignOffset[Fe]!=null?this.alignOffset[Fe]:this.alignOffset[0]:0,atlas:this.fontAtlas[Fe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Fe*2,Fe*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},"update"),M.prototype.destroy=t(function(){},"destroy"),M.prototype.kerning=!0,M.prototype.position={constant:new Float32Array(2)},M.prototype.translate=null,M.prototype.scale=null,M.prototype.font=null,M.prototype.text="",M.prototype.positionOffset=[0,0],M.prototype.opacity=1,M.prototype.color=new Uint8Array([0,0,0,255]),M.prototype.alignOffset=[0,0],M.maxAtlasSize=1024,M.atlasCanvas=document.createElement("canvas"),M.atlasContext=M.atlasCanvas.getContext("2d",{alpha:!1}),M.baseFontSize=64,M.fonts={};function w(x){return typeof x=="function"&&x._gl&&x.prop&&x.texture&&x.buffer}return t(w,"isRegl"),QR=M,QR}t(j9e,"requireDist");var eP,yee;function uB(){if(yee)return eP;yee=1;var e=q7(),r=Qde();return eP=t(function(i,s,o){var a=i._fullLayout,l=!0;return a._glcanvas.each(function(u){if(u.regl){u.regl.preloadCachedCode(o);return}if(!(u.pick&&!a._has("parcoords"))){try{u.regl=r({canvas:this,attributes:{antialias:!u.pick,preserveDrawingBuffer:!0},pixelRatio:i._context.plotGlPixelRatio||xs.devicePixelRatio,extensions:s||[],cachedCode:o||{}})}catch{l=!1}u.regl||(l=!1),l&&this.addEventListener("webglcontextlost",function(f){i&&i.emit&&i.emit("plotly_webglcontextlost",{event:f,layer:u.key})},!1)}}),l||e({container:a._glcontainer.node()}),l},"prepareRegl"),eP}t(uB,"requirePrepare_regl");var mee;function ape(){if(mee)return fL.exports;mee=1;var e=Dde(),r=Gde(),n=P9e(),i=j9e(),s=Nt.exports,o=Rh.selectMode,a=uB(),l=ho,u=$ue,f=Lde().styleTextSelection,h={};function v(d,g,p,b){var m=d._size,y=d.width*b,T=d.height*b,_=m.l*b,M=m.b*b,w=m.r*b,x=m.t*b,A=m.w*b,S=m.h*b;return[_+g.domain[0]*A,M+p.domain[0]*S,y-w-(1-g.domain[1])*A,T-x-(1-p.domain[1])*S]}t(v,"getViewport");var c=fL.exports=t(function(g,p,b){if(!!b.length){var m=g._fullLayout,y=p._scene,T=p.xaxis,_=p.yaxis,M,w;if(!!y){var x=a(g,["ANGLE_instanced_arrays","OES_element_index_uint"],h);if(!x){y.init();return}var A=y.count,S=m._glcanvas.data()[0].regl;if(u(g,p,b),y.dirty){if(y.error2d===!0&&(y.error2d=n(S)),y.line2d===!0&&(y.line2d=r(S)),y.scatter2d===!0&&(y.scatter2d=e(S)),y.fill2d===!0&&(y.fill2d=r(S)),y.glText===!0)for(y.glText=new Array(A),M=0;M<A;M++)y.glText[M]=new i(S);if(y.glText){if(A>y.glText.length){var k=A-y.glText.length;for(M=0;M<k;M++)y.glText.push(new i(S))}else if(A<y.glText.length){var L=y.glText.length-A,P=y.glText.splice(A,L);P.forEach(function(re){re.destroy()})}for(M=0;M<A;M++)y.glText[M].update(y.textOptions[M])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function(re){if(re&&re.positions){for(var ae=re.positions,fe=0;fe<ae.length&&(isNaN(ae[fe])||isNaN(ae[fe+1]));)fe+=2;for(var ce=ae.length-2;ce>fe&&(isNaN(ae[ce])||isNaN(ae[ce+1]));)ce-=2;re.positions=ae.slice(fe,ce+2)}return re}),y.line2d.update(y.lineOptions)),y.error2d){var D=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(D)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=s.repeat(null,A),y.fill2d&&(y.fillOptions=y.fillOptions.map(function(re,ae){var fe=b[ae];if(!(!re||!fe||!fe[0]||!fe[0].trace)){var ce=fe[0],xe=ce.trace,Te=ce.t,me=y.lineOptions[ae],pe,oe,de=[];xe._ownfill&&de.push(ae),xe._nexttrace&&de.push(ae+1),de.length&&(y.fillOrder[ae]=de);var ye=[],we=me&&me.positions||Te.positions,Ee,De;if(xe.fill==="tozeroy"){for(Ee=0;Ee<we.length&&isNaN(we[Ee+1]);)Ee+=2;for(De=we.length-2;De>Ee&&isNaN(we[De+1]);)De-=2;we[Ee+1]!==0&&(ye=[we[Ee],0]),ye=ye.concat(we.slice(Ee,De+2)),we[De+1]!==0&&(ye=ye.concat([we[De],0]))}else if(xe.fill==="tozerox"){for(Ee=0;Ee<we.length&&isNaN(we[Ee]);)Ee+=2;for(De=we.length-2;De>Ee&&isNaN(we[De]);)De-=2;we[Ee]!==0&&(ye=[0,we[Ee+1]]),ye=ye.concat(we.slice(Ee,De+2)),we[De]!==0&&(ye=ye.concat([0,we[De+1]]))}else if(xe.fill==="toself"||xe.fill==="tonext"){for(ye=[],pe=0,re.splitNull=!0,oe=0;oe<we.length;oe+=2)(isNaN(we[oe])||isNaN(we[oe+1]))&&(ye=ye.concat(we.slice(pe,oe)),ye.push(we[pe],we[pe+1]),ye.push(null,null),pe=oe+2);ye=ye.concat(we.slice(pe)),pe&&ye.push(we[pe],we[pe+1])}else{var Fe=xe._nexttrace;if(Fe){var qe=y.lineOptions[ae+1];if(qe){var Je=qe.positions;if(xe.fill==="tonexty"){for(ye=we.slice(),ae=Math.floor(Je.length/2);ae--;){var Ge=Je[ae*2],et=Je[ae*2+1];isNaN(Ge)||isNaN(et)||ye.push(Ge,et)}re.fill=Fe.fillcolor}}}}if(xe._prevtrace&&xe._prevtrace.fill==="tonext"){var Ue=y.lineOptions[ae-1].positions,Ye=ye.length/2;pe=Ye;var $e=[pe];for(oe=0;oe<Ue.length;oe+=2)(isNaN(Ue[oe])||isNaN(Ue[oe+1]))&&($e.push(oe/2+Ye+1),pe=oe+2);ye=ye.concat(Ue),re.hole=$e}return re.fillmode=xe.fill,re.opacity=xe.opacity,re.positions=ye,re}}),y.fill2d.update(y.fillOptions))}var B=m.dragmode,z=o(B),R=m.clickmode.indexOf("select")>-1;for(M=0;M<A;M++){var F=b[M][0],O=F.trace,q=F.t,H=q.index,j=O._length,X=q.x,G=q.y;if(O.selectedpoints||z||R){if(z||(z=!0),O.selectedpoints){var $=y.selectBatch[H]=s.selIndices2selPoints(O),te={};for(w=0;w<$.length;w++)te[$[w]]=1;var ee=[];for(w=0;w<j;w++)te[w]||ee.push(w);y.unselectBatch[H]=ee}var ie=q.xpx=new Array(j),se=q.ypx=new Array(j);for(w=0;w<j;w++)ie[w]=T.c2p(X[w]),se[w]=_.c2p(G[w])}else q.xpx=q.ypx=null}if(z){if(y.select2d||(y.select2d=e(m._glcanvas.data()[1].regl)),y.scatter2d){var W=new Array(A);for(M=0;M<A;M++)W[M]=y.selectBatch[M].length||y.unselectBatch[M].length?y.markerUnselectedOptions[M]:{};y.scatter2d.update(W)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&b.forEach(function(re){var ae=((re||[])[0]||{}).trace||{};l.hasText(ae)&&f(re)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var ne={viewport:v(m,T,_,g._context.plotGlPixelRatio),range:[(T._rl||T.range)[0],(_._rl||_.range)[0],(T._rl||T.range)[1],(_._rl||_.range)[1]]},he=s.repeat(ne,y.count);y.fill2d&&y.fill2d.update(he),y.line2d&&y.line2d.update(he),y.error2d&&y.error2d.update(he.concat(he)),y.scatter2d&&y.scatter2d.update(he),y.select2d&&y.select2d.update(he),y.glText&&y.glText.forEach(function(re){re.update(ne)})}}},"plot");return c.reglPrecompiled=h,fL.exports}t(ape,"requirePlot$h");var tP,xee;function Y9e(){if(xee)return tP;xee=1;var e=R7e();return e.plot=ape(),tP=e,tP}t(Y9e,"requireScattergl$1");var bee;function W9e(){return bee||(bee=1,function(e){e.exports=Y9e()}(I4)),I4.exports}t(W9e,"requireScattergl");var rP={exports:{}},aP={exports:{}},nP,_ee;function npe(){if(_ee)return nP;_ee=1;var e=Ps,r=Qi,n=Vo.axisHoverFormat,i=Un.hovertemplateAttrs,s=b3(),o=al.idRegex,a=ei.templatedArray,l=cn.extendFlat,u=e.marker,f=u.line,h=l(r("marker.line",{editTypeOverride:"calc"}),{width:l({},f.width,{editType:"calc"}),editType:"calc"}),v=l(r("marker"),{symbol:u.symbol,angle:u.angle,size:l({},u.size,{editType:"markerSize"}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:u.opacity,colorbar:u.colorbar,line:h,editType:"calc"});v.color.editType=v.cmin.editType=v.cmax.editType="style";function c(d){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:o[d],editType:"plot"},description:["Sets the list of "+d+" axes","corresponding to dimensions of this splom trace.","By default, a splom will match the first N "+d+"axes","where N is the number of input dimensions.","Note that, in case where `diagonal.visible` is false and `showupperhalf`","or `showlowerhalf` is false, this splom trace will generate","one less x-axis and one less y-axis."].join(" ")}}return t(c,"makeAxesValObject"),nP={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not this dimension is shown on the graph.","Note that even visible false dimension contribute to the","default grid generate by this splom trace."].join(" ")},label:{valType:"string",editType:"calc",description:"Sets the label corresponding to this splom dimension."},values:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the dimension values to be plotted."},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes",description:["Sets the axis type for this dimension's generated","x and y axes.","Note that the axis `type` values set in layout take","precedence over this attribute."].join(" ")},matches:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not the x & y axes generated by this","dimension match.","Equivalent to setting the `matches` axis attribute in the layout","with the correct axis id."].join(" ")},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},s.text,{description:["Sets text elements associated with each (x,y) pair to appear on hover.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates."].join(" ")}),hovertext:l({},s.hovertext,{description:"Same as `text`."}),hovertemplate:i(),xhoverformat:n("x"),yhoverformat:n("y"),marker:v,xaxes:c("x"),yaxes:c("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the diagonal are displayed."].join(" ")},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the upper half","from the diagonal are displayed."].join(" ")},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not subplots on the lower half","from the diagonal are displayed."].join(" ")},selected:{marker:s.selected.marker,editType:"calc"},unselected:{marker:s.unselected.marker,editType:"calc"},opacity:s.opacity},nP}t(npe,"requireAttributes$j");var iP,wee;function fB(){return wee||(wee=1,iP=t(function(e,r,n,i){i||(i=1/0);var s,o;for(s=0;s<r.length;s++)o=r[s],o.visible&&(i=Math.min(i,o[n].length));for(i===1/0&&(i=0),e._length=i,s=0;s<r.length;s++)o=r[s],o.visible&&(o._length=i);return i},"merge_length")),iP}t(fB,"requireMerge_length");var oP,Tee;function X9e(){if(Tee)return oP;Tee=1;var e=Nt.exports,r=mu,n=npe(),i=ho,s=Ph,o=fB(),a=rB().isOpenSymbol;oP=t(function(h,v,c,d){function g(w,x){return e.coerce(h,v,n,w,x)}t(g,"coerce");var p=r(h,v,{name:"dimensions",handleItemDefaults:l}),b=g("diagonal.visible"),m=g("showupperhalf"),y=g("showlowerhalf"),T=o(v,p,"values");if(!T||!b&&!m&&!y){v.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),s(h,v,c,d,g,{noAngleRef:!0,noStandOff:!0});var _=a(v.marker.symbol),M=i.isBubble(v);g("marker.line.width",_||M?1:0),u(h,v,d,g),e.coerceSelectionMarkerOpacity(v,g)},"supplyDefaults");function l(f,h){function v(d,g){return e.coerce(f,h,n.dimensions,d,g)}t(v,"coerce"),v("label");var c=v("values");c&&c.length?v("visible"):h.visible=!1,v("axis.type"),v("axis.matches")}t(l,"dimensionDefaults");function u(f,h,v,c){var d=h.dimensions,g=d.length,p=h.showupperhalf,b=h.showlowerhalf,m=h.diagonal.visible,y,T,_=new Array(g),M=new Array(g);for(y=0;y<g;y++){var w=y?y+1:"";_[y]="x"+w,M[y]="y"+w}var x=c("xaxes",_),A=c("yaxes",M),S=h._diag=new Array(g);h._xaxes={},h._yaxes={};var k=[],L=[];function P(j,X,G,$){if(!!j){var te=j.charAt(0),ee=v._splomAxes[te];if(h["_"+te+"axes"][j]=1,$.push(j),!(j in ee)){var ie=ee[j]={};G&&(ie.label=G.label||"",G.visible&&G.axis&&(G.axis.type&&(ie.type=G.axis.type),G.axis.matches&&(ie.matches=X)))}}}t(P,"fillAxisStashes");var D=!m&&!b,B=!m&&!p;for(h._axesDim={},y=0;y<g;y++){var z=d[y],R=y===0,F=y===g-1,O=R&&D||F&&B?void 0:x[y],q=R&&B||F&&D?void 0:A[y];P(O,q,z,k),P(q,O,z,L),S[y]=[O,q],h._axesDim[O]=y,h._axesDim[q]=y}for(y=0;y<k.length;y++)for(T=0;T<L.length;T++){var H=k[y]+L[T];(y>T&&p||y<T&&b||y===T&&(m||!b||!p))&&(v._splomSubplots[H]=1)}(!b||!m&&p&&b)&&(v._splomGridDflt.xside="bottom",v._splomGridDflt.yside="left")}return t(u,"handleAxisDefaults"),oP}t(X9e,"requireDefaults$j");var sP,Aee;function Z9e(){if(Aee)return sP;Aee=1;var e=Nt.exports;return sP=t(function(n,i){var s=n._fullLayout,o=i.uid,a=s._splomScenes;a||(a=s._splomScenes={});var l={dirty:!0,selectBatch:[],unselectBatch:[]},u={matrix:!1,selectBatch:[],unselectBatch:[]},f=a[i.uid];return f||(f=a[o]=e.extendFlat({},l,u),f.draw=t(function(){f.matrix&&f.matrix.draw&&(f.selectBatch.length||f.unselectBatch.length?f.matrix.draw(f.unselectBatch,f.selectBatch):f.matrix.draw()),f.dirty=!1},"draw"),f.destroy=t(function(){f.matrix&&f.matrix.destroy&&f.matrix.destroy(),f.matrixOptions=null,f.selectBatch=null,f.unselectBatch=null,f=null},"destroy")),f.dirty||e.extendFlat(f,l),f},"sceneUpdate"),sP}t(Z9e,"requireScene_update");var lP,See;function K9e(){if(See)return lP;See=1;var e=Nt.exports,r=$o,n=kh.calcMarkerSize,i=kh.calcAxisExpansion,s=Dh,o=yy().markerSelection,a=yy().markerStyle,l=Z9e(),u=jn.BADNUM,f=O0().TOO_MANY_POINTS;return lP=t(function(v,c){var d=c.dimensions,g=c._length,p={},b=p.cdata=[],m=p.data=[],y=c._visibleDims=[],T,_,M,w,x;function A(D,B){for(var z=D.makeCalcdata({v:B.values,vcalendar:c.calendar},"v"),R=0;R<z.length;R++)z[R]=z[R]===u?NaN:z[R];b.push(z),m.push(D.type==="log"?e.simpleMap(z,D.c2l):z)}for(t(A,"makeCalcdata"),T=0;T<d.length;T++)if(M=d[T],M.visible){if(w=r.getFromId(v,c._diag[T][0]),x=r.getFromId(v,c._diag[T][1]),w&&x&&w.type!==x.type){e.log("Skipping splom dimension "+T+" with conflicting axis types");continue}w?(A(w,M),x&&x.type==="category"&&(x._categories=w._categories.slice())):A(x,M),y.push(T)}s(v,c),e.extendFlat(p,a(v,c));var S=b.length,k=S*g>f,L;for(k?L=p.sizeAvg||Math.max(p.size,3):L=n(c,g),_=0;_<y.length;_++)T=y[_],M=d[T],w=r.getFromId(v,c._diag[T][0])||{},x=r.getFromId(v,c._diag[T][1])||{},i(v,c,w,x,b[_],b[_],L);var P=l(v,c);return P.matrix||(P.matrix=!0),P.matrixOptions=p,P.selectedOptions=o(v,c,c.selected),P.unselectedOptions=o(v,c,c.unselected),[{x:!1,y:!1,t:{},trace:c}]},"calc"),lP}t(K9e,"requireCalc$f");var Hm={exports:{}},Eg={exports:{}},Mee;function J9e(){return Mee||(Mee=1,function(){var e,r,n,i,s,o;typeof performance<"u"&&performance!==null&&performance.now?Eg.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Eg.exports=function(){return(e()-s)/1e6},r=process.hrtime,e=t(function(){var a;return a=r(),a[0]*1e9+a[1]},"getNanoSeconds"),i=e(),o=process.uptime()*1e9,s=i-o):Date.now?(Eg.exports=function(){return Date.now()-n},n=Date.now()):(Eg.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}.call(xs)),Eg.exports}t(J9e,"requirePerformanceNow");var kee;function Q9e(){if(kee)return Hm.exports;kee=1;for(var e=J9e(),r=typeof window>"u"?xs:window,n=["moz","webkit"],i="AnimationFrame",s=r["request"+i],o=r["cancel"+i]||r["cancelRequest"+i],a=0;!s&&a<n.length;a++)s=r[n[a]+"Request"+i],o=r[n[a]+"Cancel"+i]||r[n[a]+"CancelRequest"+i];if(!s||!o){var l=0,u=0,f=[],h=1e3/60;s=t(function(v){if(f.length===0){var c=e(),d=Math.max(0,h-(c-l));l=d+c,setTimeout(function(){var g=f.slice(0);f.length=0;for(var p=0;p<g.length;p++)if(!g[p].cancelled)try{g[p].callback(l)}catch(b){setTimeout(function(){throw b},0)}},Math.round(d))}return f.push({handle:++u,callback:v,cancelled:!1}),u},"raf$1"),o=t(function(v){for(var c=0;c<f.length;c++)f[c].handle===v&&(f[c].cancelled=!0)},"caf")}return Hm.exports=function(v){return s.call(r,v)},Hm.exports.cancel=function(){o.apply(r,arguments)},Hm.exports.polyfill=function(v){v||(v=r),v.requestAnimationFrame=s,v.cancelAnimationFrame=o},Hm.exports}t(Q9e,"requireRaf");var uP,Eee;function eBe(){return Eee||(Eee=1,uP=t(function(r,n){var i=typeof r=="number",s=typeof n=="number";i&&!s?(n=r,r=0):!i&&!s&&(r=0,n=0),r=r|0,n=n|0;var o=n-r;if(o<0)throw new Error("array length must be positive");for(var a=new Array(o),l=0,u=r;l<o;l++,u++)a[l]=u;return a},"newArray")),uP}t(eBe,"requireArrayRange");var fP,Cee;function tBe(){if(Cee)return fP;Cee=1;const e=Dde(),r=md(),n=Gy(),i=Q9e(),s=eBe(),o=kx(),a=jy();fP=l;function l(v,c){if(!(this instanceof l))return new l(v);this.traces=[],this.passes={},this.regl=v,this.scatter=e(v),this.canvas=this.scatter.canvas}t(l,"SPLOM"),l.prototype.render=function(...v){return v.length&&this.update(...v),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=i(()=>{this.draw(),this.dirty=!0,this.planned=null})):(this.draw(),this.dirty=!0,i(()=>{this.dirty=!1})),this)},l.prototype.update=function(...v){if(!v.length)return;for(let g=0;g<v.length;g++)this.updateItem(g,v[g]);this.traces=this.traces.filter(Boolean);let c=[],d=0;for(let g=0;g<this.traces.length;g++){let p=this.traces[g],b=this.traces[g].passes;for(let m=0;m<b.length;m++)c.push(this.passes[b[m]]);p.passOffset=d,d+=p.passes.length}return this.scatter.update(...c),this},l.prototype.updateItem=function(v,c){let{regl:d}=this;if(c===null)return this.traces[v]=null,this;if(!c)return this;let g=r(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),p=this.traces[v]||(this.traces[v]={id:v,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:o([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(g.color!=null&&(p.color=g.color),g.size!=null&&(p.size=g.size),g.marker!=null&&(p.marker=g.marker),g.borderColor!=null&&(p.borderColor=g.borderColor),g.borderSize!=null&&(p.borderSize=g.borderSize),g.opacity!=null&&(p.opacity=g.opacity),g.viewport&&(p.viewport=o(g.viewport)),g.diagonal!=null&&(p.diagonal=g.diagonal),g.upper!=null&&(p.upper=g.upper),g.lower!=null&&(p.lower=g.lower),g.data){p.buffer(a(g.data)),p.columns=g.data.length,p.count=g.data[0].length,p.bounds=[];for(let k=0;k<p.columns;k++)p.bounds[k]=n(g.data[k],1)}let b;g.range&&(p.range=g.range,b=p.range&&typeof p.range[0]!="number"),g.domain&&(p.domain=g.domain);let m=!1;g.padding!=null&&(Array.isArray(g.padding)&&g.padding.length===p.columns&&typeof g.padding[g.padding.length-1]=="number"?(p.padding=g.padding.map(h),m=!0):p.padding=h(g.padding));let y=p.columns,T=p.count,_=p.viewport.width,M=p.viewport.height,w=p.viewport.x,x=p.viewport.y,A=_/y,S=M/y;p.passes=[];for(let k=0;k<y;k++)for(let L=0;L<y;L++){if(!p.diagonal&&L===k||!p.upper&&k>L||!p.lower&&k<L)continue;let P=u(p.id,k,L),D=this.passes[P]||(this.passes[P]={});if(g.data&&(g.transpose?D.positions={x:{buffer:p.buffer,offset:L,count:T,stride:y},y:{buffer:p.buffer,offset:k,count:T,stride:y}}:D.positions={x:{buffer:p.buffer,offset:L*T,count:T},y:{buffer:p.buffer,offset:k*T,count:T}},D.bounds=f(p.bounds,k,L)),g.domain||g.viewport||g.data){let B=m?f(p.padding,k,L):p.padding;if(p.domain){let[z,R,F,O]=f(p.domain,k,L);D.viewport=[w+z*_+B[0],x+R*M+B[1],w+F*_-B[2],x+O*M-B[3]]}else D.viewport=[w+L*A+A*B[0],x+k*S+S*B[1],w+(L+1)*A-A*B[2],x+(k+1)*S-S*B[3]]}g.color&&(D.color=p.color),g.size&&(D.size=p.size),g.marker&&(D.marker=p.marker),g.borderSize&&(D.borderSize=p.borderSize),g.borderColor&&(D.borderColor=p.borderColor),g.opacity&&(D.opacity=p.opacity),g.range&&(D.range=b?f(p.range,k,L):p.range||D.bounds),p.passes.push(P)}return this},l.prototype.draw=function(...v){if(!v.length)this.scatter.draw();else{let c=[];for(let d=0;d<v.length;d++)if(typeof v[d]=="number"){let{passes:g,passOffset:p}=this.traces[v[d]];c.push(...s(p,p+g.length))}else if(v[d].length){let g=v[d],{passes:p,passOffset:b}=this.traces[d];p=p.map((m,y)=>{c[b+y]=g})}this.scatter.draw(...c)}return this},l.prototype.destroy=function(){return this.traces.forEach(v=>{v.buffer&&v.buffer.destroy&&v.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function u(v,c,d){let g=v.id!=null?v.id:v,p=c,b=d;return g<<16|(p&255)<<8|b&255}t(u,"passId");function f(v,c,d){let g,p,b,m,y=v[c],T=v[d];return y.length>2?(y[0],y[2],g=y[1],p=y[3]):y.length?(g=y[0],p=y[1]):(y.x,g=y.y,y.x+y.width,p=y.y+y.height),T.length>2?(b=T[0],m=T[2],T[1],T[3]):T.length?(b=T[0],m=T[1]):(b=T.x,T.y,m=T.x+T.width,T.y+T.height),[b,g,m,p]}t(f,"getBox");function h(v){if(typeof v=="number")return[v,v,v,v];if(v.length===2)return[v[0],v[1],v[0],v[1]];{let c=o(v);return[c.x,c.y,c.x+c.width,c.y+c.height]}}return t(h,"getPad"),fP}t(tBe,"requireReglSplom");var cP,Lee;function rBe(){if(Lee)return cP;Lee=1;var e=tBe(),r=Nt.exports,n=$o,i=Rh.selectMode;cP=t(function(a,l,u){if(!!u.length)for(var f=0;f<u.length;f++)s(a,u[f][0])},"plot");function s(o,a){var l=o._fullLayout,u=l._size,f=a.trace,h=a.t,v=l._splomScenes[f.uid],c=v.matrixOptions,d=c.cdata,g=l._glcanvas.data()[0].regl,p=l.dragmode,b,m,y,T,_;if(d.length!==0){c.lower=f.showupperhalf,c.upper=f.showlowerhalf,c.diagonal=f.diagonal.visible;var M=f._visibleDims,w=d.length,x=v.viewOpts={};for(x.ranges=new Array(w),x.domains=new Array(w),_=0;_<M.length;_++){y=M[_];var A=x.ranges[_]=new Array(4),S=x.domains[_]=new Array(4);b=n.getFromId(o,f._diag[y][0]),b&&(A[0]=b._rl[0],A[2]=b._rl[1],S[0]=b.domain[0],S[2]=b.domain[1]),m=n.getFromId(o,f._diag[y][1]),m&&(A[1]=m._rl[0],A[3]=m._rl[1],S[1]=m.domain[0],S[3]=m.domain[1])}var k=o._context.plotGlPixelRatio,L=u.l*k,P=u.b*k,D=u.w*k,B=u.h*k;x.viewport=[L,P,D+L,B+P],v.matrix===!0&&(v.matrix=e(g));var z=l.clickmode.indexOf("select")>-1,R=i(p)||!!f.selectedpoints||z,F=!0;if(R){var O=f._length;if(f.selectedpoints){v.selectBatch=f.selectedpoints;var q=f.selectedpoints,H={};for(y=0;y<q.length;y++)H[q[y]]=!0;var j=[];for(y=0;y<O;y++)H[y]||j.push(y);v.unselectBatch=j}var X=h.xpx=new Array(w),G=h.ypx=new Array(w);for(_=0;_<M.length;_++){if(y=M[_],b=n.getFromId(o,f._diag[y][0]),b)for(X[_]=new Array(O),T=0;T<O;T++)X[_][T]=b.c2p(d[_][T]);if(m=n.getFromId(o,f._diag[y][1]),m)for(G[_]=new Array(O),T=0;T<O;T++)G[_][T]=m.c2p(d[_][T])}if(v.selectBatch.length||v.unselectBatch.length){var $=r.extendFlat({},c,v.unselectedOptions,x),te=r.extendFlat({},c,v.selectedOptions,x);v.matrix.update($,te),F=!1}}else h.xpx=h.ypx=null;if(F){var ee=r.extendFlat({},c,x);v.matrix.update(ee,null)}}}return t(s,"plotOne"),cP}t(rBe,"requirePlot$g");var hP={},Ree;function ipe(){return Ree||(Ree=1,hP.getDimIndex=t(function(r,n){for(var i=n._id,s=i.charAt(0),o={x:0,y:1}[s],a=r._visibleDims,l=0;l<a.length;l++){var u=a[l];if(r._diag[u][o]===i)return l}return!1},"getDimIndex")),hP}t(ipe,"requireHelpers$4");var vP,Pee;function aBe(){if(Pee)return vP;Pee=1;var e=ipe(),r=tB().calcHover;function n(i,s,o){var a=i.cd,l=a[0].trace,u=i.scene,f=u.matrixOptions.cdata,h=i.xa,v=i.ya,c=h.c2p(s),d=v.c2p(o),g=i.distance,p=e.getDimIndex(l,h),b=e.getDimIndex(l,v);if(p===!1||b===!1)return[i];for(var m=f[p],y=f[b],T,_,M=g,w=0;w<m.length;w++){var x=m[w],A=y[w],S=h.c2p(x)-c,k=v.c2p(A)-d,L=Math.sqrt(S*S+k*k);L<M&&(M=_=L,T=w)}return i.index=T,i.distance=M,i.dxy=_,T===void 0?[i]:[r(i,m,y,l)]}return t(n,"hoverPoints"),vP={hoverPoints:n},vP}t(aBe,"requireHover$8");var dP,Dee;function nBe(){if(Dee)return dP;Dee=1;var e=Nt.exports,r=e.pushUnique,n=ho,i=ipe();return dP=t(function(o,a){var l=o.cd,u=l[0].trace,f=l[0].t,h=o.scene,v=h.matrixOptions.cdata,c=o.xaxis,d=o.yaxis,g=[];if(!h)return g;var p=!n.hasMarkers(u)&&!n.hasText(u);if(u.visible!==!0||p)return g;var b=i.getDimIndex(u,c),m=i.getDimIndex(u,d);if(b===!1||m===!1)return g;var y=f.xpx[b],T=f.ypx[m],_=v[b],M=v[m],w=(o.scene.selectBatch||[]).slice(),x=[];if(a!==!1&&!a.degenerate)for(var A=0;A<_.length;A++)a.contains([y[A],T[A]],null,A,o)?(g.push({pointNumber:A,x:_[A],y:M[A]}),r(w,A)):w.indexOf(A)!==-1?r(w,A):x.push(A);var S=h.matrixOptions;return!w.length&&!x.length?h.matrix.update(S,null):!h.selectBatch.length&&!h.unselectBatch.length&&h.matrix.update(h.unselectedOptions,e.extendFlat({},S,h.selectedOptions,h.viewOpts)),h.selectBatch=w,h.unselectBatch=x,g},"select"),dP}t(nBe,"requireSelect$3");var pP,Iee;function iBe(){if(Iee)return pP;Iee=1;var e=Nt.exports,r=Dh,n=yy().markerStyle;return pP=t(function(s,o){var a=o.trace,l=s._fullLayout._splomScenes[a.uid];if(l){r(s,a),e.extendFlat(l.matrixOptions,n(s,a));var u=e.extendFlat({},l.matrixOptions,l.viewOpts);l.matrix.update(u,null)}},"editStyle"),pP}t(iBe,"requireEdit_style");var gP,zee;function oBe(){if(zee)return gP;zee=1;var e=Na,r=Dfe;return gP={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:npe(),supplyDefaults:X9e(),colorbar:_u,calc:K9e(),plot:rBe(),hoverPoints:aBe().hoverPoints,selectPoints:nBe(),editStyle:iBe(),meta:{description:["Splom traces generate scatter plot matrix visualizations.","Each splom `dimensions` items correspond to a generated axis.","Values for each of those dimensions are set in `dimensions[i].values`.","Splom traces support all `scattergl` marker style attributes.","Specify `layout.grid` attributes and/or layout x-axis and y-axis attributes","for more control over the axis positioning and style. "].join(" ")}},e.register(r),gP}t(oBe,"requireBase_index$2");var yP,Fee;function sBe(){if(Fee)return yP;Fee=1;var e=Gde(),r=Na,n=uB(),i=Ns.getModuleCalcData,s=Ti,o=$o.getFromId,a=nn().shouldShowZeroLine,l="splom",u={};function f(p){var b=p._fullLayout,m=r.getModule(l),y=i(p.calcdata,m)[0],T=n(p,["ANGLE_instanced_arrays","OES_element_index_uint"],u);!T||(b._hasOnlyLargeSploms&&c(p),m.plot(p,{},y))}t(f,"plot");function h(p){var b=p.calcdata,m=p._fullLayout;m._hasOnlyLargeSploms&&c(p);for(var y=0;y<b.length;y++){var T=b[y][0],_=T.trace,M=m._splomScenes[_.uid];_.type==="splom"&&M&&M.matrix&&v(p,_,M)}}t(h,"drag");function v(p,b,m){for(var y=m.matrixOptions.data.length,T=b._visibleDims,_=m.viewOpts.ranges=new Array(y),M=0;M<T.length;M++){var w=T[M],x=_[M]=new Array(4),A=o(p,b._diag[w][0]);A&&(x[0]=A.r2l(A.range[0]),x[2]=A.r2l(A.range[1]));var S=o(p,b._diag[w][1]);S&&(x[1]=S.r2l(S.range[0]),x[3]=S.r2l(S.range[1]))}m.selectBatch.length||m.unselectBatch.length?m.matrix.update({ranges:_},{ranges:_}):m.matrix.update({ranges:_})}t(v,"dragOne");function c(p){var b=p._fullLayout,m=b._glcanvas.data()[0].regl,y=b._splomGrid;y||(y=b._splomGrid=e(m)),y.update(d(p))}t(c,"updateGrid");function d(p){var b=p._context.plotGlPixelRatio,m=p._fullLayout,y=m._size,T=[0,0,m.width*b,m.height*b],_={},M;function w(j,X,G,$,te,ee){G*=b,$*=b,te*=b,ee*=b;var ie=X[j+"color"],se=X[j+"width"],W=String(ie+se);W in _?_[W].data.push(NaN,NaN,G,$,te,ee):_[W]={data:[G,$,te,ee],join:"rect",thickness:se*b,color:ie,viewport:T,range:T,overlay:!1}}t(w,"push");for(M in m._splomSubplots){var x=m._plots[M],A=x.xaxis,S=x.yaxis,k=A._gridVals,L=S._gridVals,P=A._offset,D=A._length,B=S._length,z=y.b+S.domain[0]*y.h,R=-S._m,F=-R*S.r2l(S.range[0],S.calendar),O,q;if(A.showgrid)for(M=0;M<k.length;M++)O=P+A.l2p(k[M].x),w("grid",A,O,z,O,z+B);if(S.showgrid)for(M=0;M<L.length;M++)q=z+F+R*L[M].x,w("grid",S,P,q,P+D,q);a(p,A,S)&&(O=P+A.l2p(0),w("zeroline",A,O,z,O,z+B)),a(p,S,A)&&(q=z+F+0,w("zeroline",S,P,q,P+D,q))}var H=[];for(M in _)H.push(_[M]);return H}t(d,"makeGridData");function g(p,b,m,y){var T={},_;if(y._splomScenes){for(_=0;_<p.length;_++){var M=p[_];M.type==="splom"&&(T[M.uid]=1)}for(_=0;_<m.length;_++){var w=m[_];if(!T[w.uid]){var x=y._splomScenes[w.uid];x&&x.destroy&&x.destroy(),y._splomScenes[w.uid]=null,delete y._splomScenes[w.uid]}}}Object.keys(y._splomScenes||{}).length===0&&delete y._splomScenes,y._splomGrid&&!b._hasOnlyLargeSploms&&y._hasOnlyLargeSploms&&(y._splomGrid.destroy(),y._splomGrid=null,delete y._splomGrid),s.clean(p,b,m,y)}return t(g,"clean"),yP={name:l,attr:s.attr,attrRegex:s.attrRegex,layoutAttributes:s.layoutAttributes,supplyLayoutDefaults:s.supplyLayoutDefaults,drawFramework:s.drawFramework,plot:f,drag:h,updateGrid:c,clean:g,updateFx:s.updateFx,toSVG:s.toSVG,reglPrecompiled:u},yP}t(sBe,"requireBase_plot$5");var Bee;function lBe(){if(Bee)return aP.exports;Bee=1;var e=oBe();return e.basePlotModule=sBe(),aP.exports=e,aP.exports}t(lBe,"requireSplom$1");var Oee;function uBe(){return Oee||(Oee=1,function(e){e.exports=lBe()}(rP)),rP.exports}t(uBe,"requireSplom");var mP={exports:{}},xP,Nee;function ope(){if(Nee)return xP;Nee=1;var e=Ps;return xP={x:e.x,y:e.y,xy:{valType:"data_array",editType:"calc",description:["Faster alternative to specifying `x` and `y` separately.","If supplied, it must be a typed `Float32Array` array that","represents points such that `xy[i * 2] = x[i]` and `xy[i * 2 + 1] = y[i]`"].join(" ")},indices:{valType:"data_array",editType:"calc",description:["A sequential value, 0..n, supply it to avoid creating this array inside plotting.","If specified, it must be a typed `Int32Array` array.","Its length must be equal to or greater than the number of points.","For the best performance and memory use, create one large `indices` typed array","that is guaranteed to be at least as long as the largest number of points during","use, and reuse it on each `Plotly.restyle()` call."].join(" ")},xbounds:{valType:"data_array",editType:"calc",description:["Specify `xbounds` in the shape of `[xMin, xMax] to avoid looping through","the `xy` typed array. Use it in conjunction with `xy` and `ybounds` for the performance benefits."].join(" ")},ybounds:{valType:"data_array",editType:"calc",description:["Specify `ybounds` in the shape of `[yMin, yMax] to avoid looping through","the `xy` typed array. Use it in conjunction with `xy` and `xbounds` for the performance benefits."].join(" ")},text:e.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc",description:["Sets the marker fill color. It accepts a specific color.","If the color is not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc",description:["Sets the marker opacity. The default value is `1` (fully opaque).","If the markers are not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning.","Opacity fades the color even if `blend` is left on `false` even if there","is no translucency effect in that case."].join(" ")},blend:{valType:"boolean",dflt:null,editType:"calc",description:["Determines if colors are blended together for a translucency effect","in case `opacity` is specified as a value less then `1`.","Setting `blend` to `true` reduces zoom/pan","speed if used with large numbers of points."].join(" ")},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc",description:["Sets the minimum size (in px) of the rendered marker points, effective when","the `pointcloud` shows a million or more points."].join(" ")},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc",description:["Sets the maximum size (in px) of the rendered marker points.","Effective when the `pointcloud` shows only few points."].join(" ")},border:{color:{valType:"color",arrayOk:!1,editType:"calc",description:["Sets the stroke color. It accepts a specific color.","If the color is not fully opaque and there are hundreds of thousands","of points, it may cause slower zooming and panning."].join(" ")},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Specifies what fraction of the marker area is covered with the","border."].join(" ")},editType:"calc"},editType:"calc"},transforms:void 0},xP}t(ope,"requireAttributes$i");var bP,qee;function fBe(){if(qee)return bP;qee=1;var e=Nt.exports,r=ope();return bP=t(function(i,s,o){function a(l,u){return e.coerce(i,s,r,l,u)}t(a,"coerce"),a("x"),a("y"),a("xbounds"),a("ybounds"),i.xy&&i.xy instanceof Float32Array&&(s.xy=i.xy),i.indices&&i.indices instanceof Int32Array&&(s.indices=i.indices),a("text"),a("marker.color",o),a("marker.opacity"),a("marker.blend"),a("marker.sizemin"),a("marker.sizemax"),a("marker.border.color",o),a("marker.border.arearatio"),s._length=null},"supplyDefaults"),bP}t(fBe,"requireDefaults$i");var _P,Uee;function cBe(){if(Uee)return _P;Uee=1;var e=ys().gl_pointcloud2d,r=zh(),n=Lh().findExtremes,i=lx;function s(l,u){this.scene=l,this.uid=u,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=e(l.glplot,this.pointcloudOptions),this.pointcloud._trace=this}t(s,"Pointcloud");var o=s.prototype;o.handlePick=function(l){var u=this.idToIndex[l.pointId];return{trace:this,dataCoord:l.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[u*2],this.pickXYData[u*2+1]]:[this.pickXData[u],this.pickYData[u]],textLabel:Array.isArray(this.textLabels)?this.textLabels[u]:this.textLabels,color:this.color,name:this.name,pointIndex:u,hoverinfo:this.hoverinfo}},o.update=function(l){this.index=l.index,this.textLabels=l.text,this.name=l.name,this.hoverinfo=l.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(l),this.color=i(l,{})},o.updateFast=function(l){var u=this.xData=this.pickXData=l.x,f=this.yData=this.pickYData=l.y,h=this.pickXYData=l.xy,v=l.xbounds&&l.ybounds,c=l.indices,d,g,p,b=this.bounds,m,y,T;if(h){if(p=h,d=h.length>>>1,v)b[0]=l.xbounds[0],b[2]=l.xbounds[1],b[1]=l.ybounds[0],b[3]=l.ybounds[1];else for(T=0;T<d;T++)m=p[T*2],y=p[T*2+1],m<b[0]&&(b[0]=m),m>b[2]&&(b[2]=m),y<b[1]&&(b[1]=y),y>b[3]&&(b[3]=y);if(c)g=c;else for(g=new Int32Array(d),T=0;T<d;T++)g[T]=T}else for(d=u.length,p=new Float32Array(2*d),g=new Int32Array(d),T=0;T<d;T++)m=u[T],y=f[T],g[T]=T,p[T*2]=m,p[T*2+1]=y,m<b[0]&&(b[0]=m),m>b[2]&&(b[2]=m),y<b[1]&&(b[1]=y),y>b[3]&&(b[3]=y);this.idToIndex=g,this.pointcloudOptions.idToIndex=g,this.pointcloudOptions.positions=p;var _=r(l.marker.color),M=r(l.marker.border.color),w=l.opacity*l.marker.opacity;_[3]*=w,this.pointcloudOptions.color=_;var x=l.marker.blend;if(x===null){var A=100;x=u.length<A||f.length<A}this.pointcloudOptions.blend=x,M[3]*=w,this.pointcloudOptions.borderColor=M;var S=l.marker.sizemin,k=Math.max(l.marker.sizemax,l.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=k,this.pointcloudOptions.areaRatio=l.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var L=this.scene.xaxis,P=this.scene.yaxis,D=k/2||.5;l._extremes[L._id]=n(L,[b[0],b[2]],{ppad:D}),l._extremes[P._id]=n(P,[b[1],b[3]],{ppad:D})},o.dispose=function(){this.pointcloud.dispose()};function a(l,u){var f=new s(l,u.uid);return f.update(u),f}return t(a,"createPointcloud"),_P=a,_P}t(cBe,"requireConvert$5");var vu={},wP,Hee;function hBe(){if(Hee)return wP;Hee=1;var e=nn(),r=zh();function n(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}t(n,"Axes2DOptions");var i=n.prototype,s=["xaxis","yaxis"];i.merge=function(a){this.titleEnable=!1,this.backgroundColor=r(a.plot_bgcolor);var l,u,f,h,v,c,d,g,p,b,m;for(b=0;b<2;++b){l=s[b];var y=l.charAt(0);for(u=a[this.scene[l]._name],f=u.title.text===this.scene.fullLayout._dfltTitle[y]?"":u.title.text,m=0;m<=2;m+=2)this.labelEnable[b+m]=!1,this.labels[b+m]=f,this.labelColor[b+m]=r(u.title.font.color),this.labelFont[b+m]=u.title.font.family,this.labelSize[b+m]=u.title.font.size,this.labelPad[b+m]=this.getLabelPad(l,u),this.tickEnable[b+m]=!1,this.tickColor[b+m]=r((u.tickfont||{}).color),this.tickAngle[b+m]=u.tickangle==="auto"?0:Math.PI*-u.tickangle/180,this.tickPad[b+m]=this.getTickPad(u),this.tickMarkLength[b+m]=0,this.tickMarkWidth[b+m]=u.tickwidth||0,this.tickMarkColor[b+m]=r(u.tickcolor),this.borderLineEnable[b+m]=!1,this.borderLineColor[b+m]=r(u.linecolor),this.borderLineWidth[b+m]=u.linewidth||0;d=this.hasSharedAxis(u),v=this.hasAxisInDfltPos(l,u)&&!d,c=this.hasAxisInAltrPos(l,u)&&!d,h=u.mirror||!1,g=d?String(h).indexOf("all")!==-1:!!h,p=d?h==="allticks":String(h).indexOf("ticks")!==-1,v?this.labelEnable[b]=!0:c&&(this.labelEnable[b+2]=!0),v?this.tickEnable[b]=u.showticklabels:c&&(this.tickEnable[b+2]=u.showticklabels),(v||g)&&(this.borderLineEnable[b]=u.showline),(c||g)&&(this.borderLineEnable[b+2]=u.showline),(v||p)&&(this.tickMarkLength[b]=this.getTickMarkLength(u)),(c||p)&&(this.tickMarkLength[b+2]=this.getTickMarkLength(u)),this.gridLineEnable[b]=u.showgrid,this.gridLineColor[b]=r(u.gridcolor),this.gridLineWidth[b]=u.gridwidth,this.zeroLineEnable[b]=u.zeroline,this.zeroLineColor[b]=r(u.zerolinecolor),this.zeroLineWidth[b]=u.zerolinewidth}},i.hasSharedAxis=function(a){var l=this.scene,u=l.fullLayout._subplots.gl2d,f=e.findSubplotsWithAxis(u,a);return f.indexOf(l.id)!==0},i.hasAxisInDfltPos=function(a,l){var u=l.side;if(a==="xaxis")return u==="bottom";if(a==="yaxis")return u==="left"},i.hasAxisInAltrPos=function(a,l){var u=l.side;if(a==="xaxis")return u==="top";if(a==="yaxis")return u==="right"},i.getLabelPad=function(a,l){var u=1.5,f=l.title.font.size,h=l.showticklabels;if(a==="xaxis")return l.side==="top"?-10+f*(u+(h?1:0)):-10+f*(u+(h?.5:0));if(a==="yaxis")return l.side==="right"?10+f*(u+(h?1:.5)):10+f*(u+(h?.5:0))},i.getTickPad=function(a){return a.ticks==="outside"?10+a.ticklen:15},i.getTickMarkLength=function(a){if(!a.ticks)return 0;var l=a.ticklen;return a.ticks==="inside"?-l:l};function o(a){return new n(a)}return t(o,"createAxes2D"),wP=o,wP}t(hBe,"requireConvert$4");var Cg={},$ee;function vBe(){if($ee)return Cg;$ee=1;function e(s){if(typeof s=="object"){if("buttons"in s)return s.buttons;if("which"in s){var o=s.which;if(o===2)return 4;if(o===3)return 2;if(o>0)return 1<<o-1}else if("button"in s){var o=s.button;if(o===1)return 4;if(o===2)return 2;if(o>=0)return 1<<o}}return 0}t(e,"mouseButtons"),Cg.buttons=e;function r(s){return s.target||s.srcElement||window}t(r,"mouseElement"),Cg.element=r;function n(s){if(typeof s=="object"){if("offsetX"in s)return s.offsetX;var o=r(s),a=o.getBoundingClientRect();return s.clientX-a.left}return 0}t(n,"mouseRelativeX"),Cg.x=n;function i(s){if(typeof s=="object"){if("offsetY"in s)return s.offsetY;var o=r(s),a=o.getBoundingClientRect();return s.clientY-a.top}return 0}return t(i,"mouseRelativeY"),Cg.y=i,Cg}t(vBe,"requireMouse");var TP,Vee;function dBe(){if(Vee)return TP;Vee=1,TP=r;var e=vBe();function r(n,i){i||(i=n,n=window);var s=0,o=0,a=0,l={shift:!1,alt:!1,control:!1,meta:!1},u=!1;function f(_){var M=!1;return"altKey"in _&&(M=M||_.altKey!==l.alt,l.alt=!!_.altKey),"shiftKey"in _&&(M=M||_.shiftKey!==l.shift,l.shift=!!_.shiftKey),"ctrlKey"in _&&(M=M||_.ctrlKey!==l.control,l.control=!!_.ctrlKey),"metaKey"in _&&(M=M||_.metaKey!==l.meta,l.meta=!!_.metaKey),M}t(f,"updateMods");function h(_,M){var w=e.x(M),x=e.y(M);"buttons"in M&&(_=M.buttons|0),(_!==s||w!==o||x!==a||f(M))&&(s=_|0,o=w||0,a=x||0,i&&i(s,o,a,l))}t(h,"handleEvent");function v(_){h(0,_)}t(v,"clearState");function c(){(s||o||a||l.shift||l.alt||l.meta||l.control)&&(o=a=0,s=0,l.shift=l.alt=l.control=l.meta=!1,i&&i(0,0,0,l))}t(c,"handleBlur");function d(_){f(_)&&i&&i(s,o,a,l)}t(d,"handleMods");function g(_){e.buttons(_)===0?h(0,_):h(s,_)}t(g,"handleMouseMove");function p(_){h(s|e.buttons(_),_)}t(p,"handleMouseDown");function b(_){h(s&~e.buttons(_),_)}t(b,"handleMouseUp");function m(){u||(u=!0,n.addEventListener("mousemove",g),n.addEventListener("mousedown",p),n.addEventListener("mouseup",b),n.addEventListener("mouseleave",v),n.addEventListener("mouseenter",v),n.addEventListener("mouseout",v),n.addEventListener("mouseover",v),n.addEventListener("blur",c),n.addEventListener("keyup",d),n.addEventListener("keydown",d),n.addEventListener("keypress",d),n!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}t(m,"attachListeners");function y(){!u||(u=!1,n.removeEventListener("mousemove",g),n.removeEventListener("mousedown",p),n.removeEventListener("mouseup",b),n.removeEventListener("mouseleave",v),n.removeEventListener("mouseenter",v),n.removeEventListener("mouseout",v),n.removeEventListener("mouseover",v),n.removeEventListener("blur",c),n.removeEventListener("keyup",d),n.removeEventListener("keydown",d),n.removeEventListener("keypress",d),n!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))}t(y,"detachListeners"),m();var T={element:n};return Object.defineProperties(T,{enabled:{get:function(){return u},set:function(_){_?m():y()},enumerable:!0},buttons:{get:function(){return s},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),T}return t(r,"mouseListen"),TP}t(dBe,"requireMouseListen");var AP,Gee;function pBe(){if(Gee)return AP;Gee=1;var e=rpe();AP=r;function r(n,i,s){typeof n=="function"&&(s=!!i,i=n,n=window);var o=e("ex",n),a=t(function(l){s&&l.preventDefault();var u=l.deltaX||0,f=l.deltaY||0,h=l.deltaZ||0,v=l.deltaMode,c=1;switch(v){case 1:c=o;break;case 2:c=window.innerHeight;break}if(u*=c,f*=c,h*=c,u||f||h)return i(u,f,h,l)},"listener");return n.addEventListener("wheel",a),a}return t(r,"mouseWheelListen"),AP}t(pBe,"requireWheel");var SP,jee;function gBe(){if(jee)return SP;jee=1;var e=dBe(),r=pBe(),n=Qse,i=al,s=gw;SP=a;function o(l,u){this.element=l,this.plot=u,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}t(o,"Camera2D");function a(l){var u=l.mouseContainer,f=l.glplot,h=new o(u,f);function v(){l.xaxis.autorange=!1,l.yaxis.autorange=!1}t(v,"unSetAutoRange");function c(){for(var g=l.graphDiv._fullLayout._axisConstraintGroups,p=l.xaxis._id,b=l.yaxis._id,m=0;m<g.length;m++)if(g[m][p]!==-1){if(g[m][b]!==-1)return!0;break}return!1}t(c,"getSubplotConstraint"),h.mouseListener=e(u,d),u.addEventListener("touchstart",function(g){var p=n(g.changedTouches[0],u);d(0,p[0],p[1]),d(1,p[0],p[1]),g.preventDefault()},s?{passive:!1}:!1),u.addEventListener("touchmove",function(g){g.preventDefault();var p=n(g.changedTouches[0],u);d(1,p[0],p[1]),g.preventDefault()},s?{passive:!1}:!1),u.addEventListener("touchend",function(g){d(0,h.lastPos[0],h.lastPos[1]),g.preventDefault()},s?{passive:!1}:!1);function d(g,p,b){var m=l.calcDataBox(),y=f.viewBox,T=h.lastPos[0],_=h.lastPos[1],M=i.MINDRAG*f.pixelRatio,w=i.MINZOOM*f.pixelRatio,x,A;p*=f.pixelRatio,b*=f.pixelRatio,b=y[3]-y[1]-b;function S(z,R,F){var O=Math.min(R,F),q=Math.max(R,F);O!==q?(m[z]=O,m[z+2]=q,h.dataBox=m,l.setRanges(m)):(l.selectBox.selectBox=[0,0,1,1],l.glplot.setDirty())}switch(t(S,"updateRange"),l.fullLayout.dragmode){case"zoom":if(g){var k=p/(y[2]-y[0])*(m[2]-m[0])+m[0],L=b/(y[3]-y[1])*(m[3]-m[1])+m[1];h.boxInited||(h.boxStart[0]=k,h.boxStart[1]=L,h.dragStart[0]=p,h.dragStart[1]=b),h.boxEnd[0]=k,h.boxEnd[1]=L,h.boxInited=!0,!h.boxEnabled&&(h.boxStart[0]!==h.boxEnd[0]||h.boxStart[1]!==h.boxEnd[1])&&(h.boxEnabled=!0);var P=Math.abs(h.dragStart[0]-p)<w,D=Math.abs(h.dragStart[1]-b)<w;if(c()&&!(P&&D)){x=h.boxEnd[0]-h.boxStart[0],A=h.boxEnd[1]-h.boxStart[1];var B=(m[3]-m[1])/(m[2]-m[0]);Math.abs(x*B)>Math.abs(A)?(h.boxEnd[1]=h.boxStart[1]+Math.abs(x)*B*(A>=0?1:-1),h.boxEnd[1]<m[1]?(h.boxEnd[1]=m[1],h.boxEnd[0]=h.boxStart[0]+(m[1]-h.boxStart[1])/Math.abs(B)):h.boxEnd[1]>m[3]&&(h.boxEnd[1]=m[3],h.boxEnd[0]=h.boxStart[0]+(m[3]-h.boxStart[1])/Math.abs(B))):(h.boxEnd[0]=h.boxStart[0]+Math.abs(A)/B*(x>=0?1:-1),h.boxEnd[0]<m[0]?(h.boxEnd[0]=m[0],h.boxEnd[1]=h.boxStart[1]+(m[0]-h.boxStart[0])*Math.abs(B)):h.boxEnd[0]>m[2]&&(h.boxEnd[0]=m[2],h.boxEnd[1]=h.boxStart[1]+(m[2]-h.boxStart[0])*Math.abs(B)))}else P&&(h.boxEnd[0]=h.boxStart[0]),D&&(h.boxEnd[1]=h.boxStart[1])}else h.boxEnabled?(x=h.boxStart[0]!==h.boxEnd[0],A=h.boxStart[1]!==h.boxEnd[1],x||A?(x&&(S(0,h.boxStart[0],h.boxEnd[0]),l.xaxis.autorange=!1),A&&(S(1,h.boxStart[1],h.boxEnd[1]),l.yaxis.autorange=!1),l.relayoutCallback()):l.glplot.setDirty(),h.boxEnabled=!1,h.boxInited=!1):h.boxInited&&(h.boxInited=!1);break;case"pan":h.boxEnabled=!1,h.boxInited=!1,g?(h.panning||(h.dragStart[0]=p,h.dragStart[1]=b),Math.abs(h.dragStart[0]-p)<M&&(p=h.dragStart[0]),Math.abs(h.dragStart[1]-b)<M&&(b=h.dragStart[1]),x=(T-p)*(m[2]-m[0])/(f.viewBox[2]-f.viewBox[0]),A=(_-b)*(m[3]-m[1])/(f.viewBox[3]-f.viewBox[1]),m[0]+=x,m[2]+=x,m[1]+=A,m[3]+=A,l.setRanges(m),h.panning=!0,h.lastInputTime=Date.now(),v(),l.cameraChanged(),l.handleAnnotations()):h.panning&&(h.panning=!1,l.relayoutCallback());break}h.lastPos[0]=p,h.lastPos[1]=b}return t(d,"handleInteraction"),h.wheelListener=r(u,function(g,p){if(!l.scrollZoom)return!1;var b=l.calcDataBox(),m=f.viewBox,y=h.lastPos[0],T=h.lastPos[1],_=Math.exp(5*p/(m[3]-m[1])),M=y/(m[2]-m[0])*(b[2]-b[0])+b[0],w=T/(m[3]-m[1])*(b[3]-b[1])+b[1];return b[0]=(b[0]-M)*_+M,b[2]=(b[2]-M)*_+M,b[1]=(b[1]-w)*_+w,b[3]=(b[3]-w)*_+w,l.setRanges(b),h.lastInputTime=Date.now(),v(),l.cameraChanged(),l.handleAnnotations(),l.relayoutCallback(),!0},!0),h}return t(a,"createCamera"),SP}t(gBe,"requireCamera");var MP,Yee;function yBe(){if(Yee)return MP;Yee=1;var e=Na,r=nn(),n=Ko,i=ys().gl_plot2d,s=ys().gl_spikes2d,o=ys().gl_select_box,a=bhe(),l=hBe(),u=gBe(),f=q7(),h=I0(),v=h.enforce,c=h.clean,d=Lh().doAutoRange,g=Rh,p=g.drawMode,b=g.selectMode,m=["xaxis","yaxis"],y,T,_=al.SUBPLOT_PATTERN;function M(A,S){this.container=A.container,this.graphDiv=A.graphDiv,this.pixelRatio=A.plotGlPixelRatio||window.devicePixelRatio,this.id=A.id,this.staticPlot=!!A.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),!this.stopped&&(this.glplotOptions=l(this),this.glplotOptions.merge(S),this.glplot=i(this.glplotOptions),this.camera=u(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=o(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}t(M,"Scene2D"),MP=M;var w=M.prototype;w.makeFramework=function(){if(this.staticPlot){if(!T&&(y=document.createElement("canvas"),T=a({canvas:y,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!T))throw new Error("Error creating static canvas/context for image server");this.canvas=y,this.gl=T}else{var A=this.container.querySelector(".gl-canvas-focus"),S=a({canvas:A,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S){f(this),this.stopped=!0;return}this.canvas=A,this.gl=S}var k=this.canvas;k.style.width="100%",k.style.height="100%",k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style["pointer-events"]="none",this.updateSize(k);var L=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var D=this.container;D.appendChild(L),D.appendChild(P);var B=this;P.addEventListener("mouseout",function(){B.isMouseOver=!1,B.unhover()}),P.addEventListener("mouseover",function(){B.isMouseOver=!0})},w.toImage=function(A){A||(A="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(y),this.updateSize(this.canvas);var S=this.glplot.gl,k=S.drawingBufferWidth,L=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var P=new Uint8Array(k*L*4);S.readPixels(0,0,k,L,S.RGBA,S.UNSIGNED_BYTE,P);for(var D=0,B=L-1;D<B;++D,--B)for(var z=0;z<k;++z)for(var R=0;R<4;++R){var F=P[4*(k*D+z)+R];P[4*(k*D+z)+R]=P[4*(k*B+z)+R],P[4*(k*B+z)+R]=F}var O=document.createElement("canvas");O.width=k,O.height=L;var q=O.getContext("2d",{willReadFrequently:!0}),H=q.createImageData(k,L);H.data.set(P),q.putImageData(H,0,0);var j;switch(A){case"jpeg":j=O.toDataURL("image/jpeg");break;case"webp":j=O.toDataURL("image/webp");break;default:j=O.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(y),j},w.updateSize=function(A){A||(A=this.canvas);var S=this.pixelRatio,k=this.fullLayout,L=k.width,P=k.height,D=Math.ceil(S*L)|0,B=Math.ceil(S*P)|0;return(A.width!==D||A.height!==B)&&(A.width=D,A.height=B),A},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var A=[r.calcTicks(this.xaxis),r.calcTicks(this.yaxis)],S=0;S<2;++S)for(var k=0;k<A[S].length;++k)A[S][k].text=A[S][k].text+"";return A};function x(A,S){for(var k=0;k<2;++k){var L=A[k],P=S[k];if(L.length!==P.length)return!0;for(var D=0;D<L.length;++D)if(L[D].x!==P[D].x)return!0}return!1}return t(x,"compareTicks"),w.updateRefs=function(A){this.fullLayout=A;var S=this.id.match(_),k="xaxis"+S[1],L="yaxis"+S[2];this.xaxis=this.fullLayout[k],this.yaxis=this.fullLayout[L]},w.relayoutCallback=function(){var A=this.graphDiv,S=this.xaxis,k=this.yaxis,L=A.layout,P={},D=P[S._name+".range"]=S.range.slice(),B=P[k._name+".range"]=k.range.slice();P[S._name+".autorange"]=S.autorange,P[k._name+".autorange"]=k.autorange,e.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,P);var z=L[S._name];z.range=D,z.autorange=S.autorange;var R=L[k._name];R.range=B,R.autorange=k.autorange,P.lastInputTime=this.camera.lastInputTime,A.emit("plotly_relayout",P)},w.cameraChanged=function(){var A=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks(),k=this.glplotOptions.ticks;x(S,k)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=A.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var A=this.graphDiv,S=this.fullLayout.annotations,k=0;k<S.length;k++){var L=S[k];L.xref===this.xaxis._id&&L.yref===this.yaxis._id&&e.getComponentMethod("annotations","drawOne")(A,k)}},w.destroy=function(){if(!!this.glplot){var A=this.traces;A&&Object.keys(A).map(function(S){A[S].dispose(),delete A[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(A,S,k){var L=this.glplot;this.updateRefs(k),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(A,S),this.updateFx(k.dragmode);var P=k.width,D=k.height;this.updateSize(this.canvas);var B=this.glplotOptions;B.merge(k),B.screenBox=[0,0,P,D];var z={_fullLayout:{_axisConstraintGroups:k._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:k._size}};c(z,this.xaxis),c(z,this.yaxis);var R=k._size,F=this.xaxis.domain,O=this.yaxis.domain;B.viewBox=[R.l+F[0]*R.w,R.b+O[0]*R.h,P-R.r-(1-F[1])*R.w,D-R.t-(1-O[1])*R.h],this.mouseContainer.style.width=R.w*(F[1]-F[0])+"px",this.mouseContainer.style.height=R.h*(O[1]-O[0])+"px",this.mouseContainer.height=R.h*(O[1]-O[0]),this.mouseContainer.style.left=R.l+F[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-O[1])*R.h+"px";var q,H;for(H=0;H<2;++H)q=this[m[H]],q._length=B.viewBox[H+2]-B.viewBox[H],d(this.graphDiv,q),q.setScale();v(z),B.ticks=this.computeTickMarks(),B.dataBox=this.calcDataBox(),B.merge(k),L.update(B),this.glplot.draw()},w.calcDataBox=function(){var A=this.xaxis,S=this.yaxis,k=A.range,L=S.range,P=A.r2l,D=S.r2l;return[P(k[0]),D(L[0]),P(k[1]),D(L[1])]},w.setRanges=function(A){var S=this.xaxis,k=this.yaxis,L=S.l2r,P=k.l2r;S.range=[L(A[0]),L(A[2])],k.range=[P(A[1]),P(A[3])]},w.updateTraces=function(A,S){var k=Object.keys(this.traces),L,P,D;this.fullData=A;e:for(L=0;L<k.length;L++){var B=k[L],z=this.traces[B];for(P=0;P<A.length;P++)if(D=A[P],D.uid===B&&D.type===z.type)continue e;z.dispose(),delete this.traces[B]}for(L=0;L<A.length;L++){D=A[L];var R=S[L],F=this.traces[D.uid];F?F.update(D,R):(F=D._module.plot(this,D,R),this.traces[D.uid]=F)}this.glplot.objects.sort(function(O,q){return O._trace.index-q._trace.index})},w.updateFx=function(A){b(A)||p(A)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),A==="pan"?this.mouseContainer.style.cursor="move":A==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},w.emitPointAction=function(A,S){for(var k=A.trace.uid,L=A.pointIndex,P,D=0;D<this.fullData.length;D++)this.fullData[D].uid===k&&(P=this.fullData[D]);var B={x:A.traceCoord[0],y:A.traceCoord[1],curveNumber:P.index,pointNumber:L,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};n.appendArrayPointValue(B,P,L),this.graphDiv.emit(S,{points:[B]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var A=this.glplot,S=this.camera,k=S.mouseListener,L=this.lastButtonState===1&&k.buttons===0,P=this.fullLayout;this.lastButtonState=k.buttons,this.cameraChanged();var D=k.x*A.pixelRatio,B=this.canvas.height-A.pixelRatio*k.y,z;if(S.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],F=0;F<2;F++)S.boxStart[F]===S.boxEnd[F]&&(R[F]=A.dataBox[F],R[F+2]=A.dataBox[F+2]);A.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var O=P._size,q=this.xaxis.domain,H=this.yaxis.domain;z=A.pick(D/A.pixelRatio+O.l+q[0]*O.w,B/A.pixelRatio-(O.t+(1-H[1])*O.h));var j=z&&z.object._trace.handlePick(z);if(j&&L&&this.emitPointAction(j,"plotly_click"),z&&z.object._trace.hoverinfo!=="skip"&&P.hovermode&&j&&(!this.lastPickResult||this.lastPickResult.traceUid!==j.trace.uid||this.lastPickResult.dataCoord[0]!==j.dataCoord[0]||this.lastPickResult.dataCoord[1]!==j.dataCoord[1])){var X=j;this.lastPickResult={traceUid:j.trace?j.trace.uid:null,dataCoord:j.dataCoord.slice()},this.spikes.update({center:z.dataCoord}),X.screenCoord=[((A.viewBox[2]-A.viewBox[0])*(z.dataCoord[0]-A.dataBox[0])/(A.dataBox[2]-A.dataBox[0])+A.viewBox[0])/A.pixelRatio,(this.canvas.height-(A.viewBox[3]-A.viewBox[1])*(z.dataCoord[1]-A.dataBox[1])/(A.dataBox[3]-A.dataBox[1])-A.viewBox[1])/A.pixelRatio],this.emitPointAction(j,"plotly_hover");var G=this.fullData[X.trace.index]||{},$=X.pointIndex,te=n.castHoverinfo(G,P,$);if(te&&te!=="all"){var ee=te.split("+");ee.indexOf("x")===-1&&(X.traceCoord[0]=void 0),ee.indexOf("y")===-1&&(X.traceCoord[1]=void 0),ee.indexOf("z")===-1&&(X.traceCoord[2]=void 0),ee.indexOf("text")===-1&&(X.textLabel=void 0),ee.indexOf("name")===-1&&(X.name=void 0)}n.loneHover({x:X.screenCoord[0],y:X.screenCoord[1],xLabel:this.hoverFormatter("xaxis",X.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",X.traceCoord[1]),zLabel:X.traceCoord[2],text:X.textLabel,name:X.name,color:n.castHoverOption(G,$,"bgcolor")||X.color,borderColor:n.castHoverOption(G,$,"bordercolor"),fontFamily:n.castHoverOption(G,$,"font.family"),fontSize:n.castHoverOption(G,$,"font.size"),fontColor:n.castHoverOption(G,$,"font.color"),nameLength:n.castHoverOption(G,$,"namelength"),textAlign:n.castHoverOption(G,$,"align")},{container:this.svgContainer,gd:this.graphDiv})}}z||this.unhover(),A.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),n.loneUnhover(this.svgContainer))},w.hoverFormatter=function(A,S){if(S!==void 0){var k=this[A];return r.tickText(k,k.c2l(S),"hover").text}},MP}t(yBe,"requireScene2d");var Wee;function spe(){if(Wee)return vu;Wee=1;var e=_o.overrideAll,r=yBe(),n=Ty,i=ic,s=al,o=Ti,a=fp,l=Ns.getSubplotData;return vu.name="gl2d",vu.attr=["xaxis","yaxis"],vu.idRoot=["x","y"],vu.idRegex=s.idRegex,vu.attrRegex=s.attrRegex,vu.attributes=Gue(),vu.supplyLayoutDefaults=function(u,f,h){f._has("cartesian")||o.supplyLayoutDefaults(u,f,h)},vu.layoutAttrOverrides=e(o.layoutAttributes,"plot","from-root"),vu.baseLayoutAttrOverrides=e({plot_bgcolor:n.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),vu.plot=t(function(f){for(var h=f._fullLayout,v=f._fullData,c=h._subplots.gl2d,d=0;d<c.length;d++){var g=c[d],p=h._plots[g],b=l(v,"gl2d",g),m=p._scene2d;m===void 0&&(m=new r({id:g,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio},h),p._scene2d=m),m.plot(b,f.calcdata,h,f.layout)}},"plot"),vu.clean=function(u,f,h,v){for(var c=v._subplots.gl2d||[],d=0;d<c.length;d++){var g=c[d],p=v._plots[g];if(!!p._scene2d){var b=l(u,"gl2d",g);b.length===0&&(p._scene2d.destroy(),delete v._plots[g])}}o.clean.apply(this,arguments)},vu.drawFramework=function(u){u._context.staticPlot||o.drawFramework(u)},vu.toSVG=function(u){for(var f=u._fullLayout,h=f._subplots.gl2d,v=0;v<h.length;v++){var c=f._plots[h[v]],d=c._scene2d,g=d.toImage("png"),p=f._glimages.append("svg:image");p.attr({xmlns:i.svg,"xlink:href":g,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},vu.updateFx=function(u){for(var f=u._fullLayout,h=f._subplots.gl2d,v=0;v<h.length;v++){var c=f._plots[h[v]]._scene2d;c.updateFx(f.dragmode)}},vu}t(spe,"requireGl2d");var kP,Xee;function mBe(){if(Xee)return kP;Xee=1;var e=["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" ");return kP={attributes:ope(),supplyDefaults:fBe(),calc:xhe(),plot:cBe(),moduleType:"trace",name:"pointcloud",basePlotModule:spe(),categories:["gl","gl2d","showLegend"],meta:{description:[e,"The data visualized as a point cloud set in `x` and `y`","using the WebGl plotting engine."].join(" ")}},kP}t(mBe,"requirePointcloud$1");var Zee;function xBe(){return Zee||(Zee=1,function(e){e.exports=mBe()}(mP)),mP.exports}t(xBe,"requirePointcloud");var EP={exports:{}},CP,Kee;function lpe(){if(Kee)return CP;Kee=1;for(var e=Iy(),r=Qi,n=cn.extendFlat,i=_o.overrideAll,s=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],o={},a=0;a<s.length;a++){var l=s[a];o[l]=e[l]}return o.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc",description:"Picks a smoothing algorithm use to smooth `z` data."},n(o,r("",{cLetter:"z",autoColorDflt:!1})),CP=i(o,"calc","nested"),CP}t(lpe,"requireAttributes$h");var LP,Jee;function bBe(){if(Jee)return LP;Jee=1;var e=Nt.exports,r=Ow(),n=ml,i=lpe();return LP=t(function(o,a,l,u){function f(v,c){return e.coerce(o,a,i,v,c)}t(f,"coerce");var h=r(o,a,f,u);if(!h){a.visible=!1;return}f("text"),f("zsmooth"),n(o,a,u,f,{prefix:"",cLetter:"z"})},"supplyDefaults"),LP}t(bBe,"requireDefaults$h");var RP,Qee;function _Be(){if(Qee)return RP;Qee=1;var e=ys().gl_heatmap2d,r=nn(),n=zh();function i(l,u){this.scene=l,this.uid=u,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=e(l.glplot,this.options),this.heatmap._trace=this}t(i,"Heatmap");var s=i.prototype;s.handlePick=function(l){var u=this.options,f=u.shape,h=l.pointId,v=h%f[0],c=Math.floor(h/f[0]),d=h;return{trace:this,dataCoord:l.dataCoord,traceCoord:[u.x[v],u.y[c],u.z[d]],textLabel:this.textLabels[h],name:this.name,pointIndex:[c,v],hoverinfo:this.hoverinfo}},s.update=function(l,u){var f=u[0];this.index=l.index,this.name=l.name,this.hoverinfo=l.hoverinfo;var h=f.z;this.options.z=[].concat.apply([],h);var v=h[0].length,c=h.length;this.options.shape=[v,c],this.options.x=f.x,this.options.y=f.y,this.options.zsmooth=l.zsmooth;var d=o(l);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],l.text),this.heatmap.update(this.options);var g=this.scene.xaxis,p=this.scene.yaxis,b,m;l.zsmooth===!1&&(b={ppad:f.x[1]-f.x[0]},m={ppad:f.y[1]-f.y[0]}),l._extremes[g._id]=r.findExtremes(g,f.x,b),l._extremes[p._id]=r.findExtremes(p,f.y,m)},s.dispose=function(){this.heatmap.dispose()};function o(l){for(var u=l.colorscale,f=l.zmin,h=l.zmax,v=u.length,c=new Array(v),d=new Array(4*v),g=0;g<v;g++){var p=u[g],b=n(p[1]);c[g]=f+p[0]*(h-f);for(var m=0;m<4;m++)d[4*g+m]=b[m]}return{colorLevels:c,colorValues:d}}t(o,"convertColorscale");function a(l,u,f){var h=new i(l,u.uid);return h.update(u,f),h}return t(a,"createHeatmap"),RP=a,RP}t(_Be,"requireConvert$3");var PP,ete;function wBe(){if(ete)return PP;ete=1;var e=["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" ");return PP={attributes:lpe(),supplyDefaults:bBe(),colorbar:zy(),calc:qw(),plot:_Be(),moduleType:"trace",name:"heatmapgl",basePlotModule:spe(),categories:["gl","gl2d","2dMap"],meta:{description:[e,"WebGL version of the heatmap trace type."].join(" ")}},PP}t(wBe,"requireHeatmapgl$1");var tte;function TBe(){return tte||(tte=1,function(e){e.exports=wBe()}(EP)),EP.exports}t(TBe,"requireHeatmapgl");var DP={exports:{}},IP,rte;function upe(){if(rte)return IP;rte=1;var e=Qi,r=Jl,n=Ho,i=vo.attributes,s=cn.extendFlat,o=ei.templatedArray;return IP={domain:i({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot",description:["Sets the angle of the labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the labels vertically.","Tilted labels with *labelangle* may be positioned better","inside margins when `labelposition` is set to *bottom*."].join(" ")},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Specifies the location of the `label`.","*top* positions labels above, next to the title","*bottom* positions labels below the graph","Tilted labels with *labelangle* may be positioned better","inside margins when `labelposition` is set to *bottom*."].join(" ")},labelfont:n({editType:"plot",description:"Sets the font for the `dimension` labels."}),tickfont:n({editType:"plot",description:"Sets the font for the `dimension` tick values."}),rangefont:n({editType:"plot",description:"Sets the font for the `dimension` range values."}),dimensions:o("dimension",{label:{valType:"string",editType:"plot",description:"The shown name of the dimension."},tickvals:s({},r.tickvals,{editType:"plot",description:["Sets the values at which ticks on this axis appear."].join(" ")}),ticktext:s({},r.ticktext,{editType:"plot",description:["Sets the text displayed at the ticks position via `tickvals`."].join(" ")}),tickformat:s({},r.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot",description:"Shows the dimension when set to `true` (the default). Hides the dimension for `false`."},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["The domain range that represents the full, shown axis extent. Defaults to the `values` extent.","Must be an array of `[fromValue, toValue]` with finite numbers as elements."].join(" ")},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot",description:["The domain range to which the filter on the dimension is constrained. Must be an array","of `[fromValue, toValue]` with `fromValue <= toValue`, or if `multiselect` is not","disabled, you may give an array of arrays, where each inner array is `[fromValue, toValue]`."].join(" ")},multiselect:{valType:"boolean",dflt:!0,editType:"plot",description:"Do we allow multiple selection ranges or just a single range?"},values:{valType:"data_array",editType:"calc",description:["Dimension values. `values[n]` represents the value of the `n`th point in the dataset,","therefore the `values` vector for all dimensions must be the same (longer vectors","will be truncated). Each value must be a finite number."].join(" ")},editType:"calc",description:"The dimensions (variables) of the parallel coordinates chart. 2..60 dimensions are supported."}),line:s({editType:"calc"},e("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot",description:["Sets the base color of unselected lines.","in connection with `unselected.line.opacity`."].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot",description:["Sets the opacity of unselected lines.","The default *auto* decreases the opacity smoothly as the number of lines increases.","Use *1* to achieve exact `unselected.line.color`."].join(" ")},editType:"plot"},editType:"plot"}},IP}t(upe,"requireAttributes$g");var zP,ate;function A3(){return ate||(ate=1,zP={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}),zP}t(A3,"requireConstants$7");var FP,nte;function cd(){if(nte)return FP;nte=1;var e=nw;function r(n){return[n]}return t(r,"wrap"),FP={keyFun:function(n){return n.key},repeat:r,descend:e,wrap:r,unwrap:function(n){return n[0]}},FP}t(cd,"requireGup");var BP,ite;function fpe(){if(ite)return BP;ite=1;var e=A3(),r=Va.exports,n=cd().keyFun,i=cd().repeat,s=Nt.exports.sorterAsc,o=Nt.exports.strTranslate,a=e.bar.snapRatio;function l(H,j){return H*(1-a)+j*a}t(l,"snapOvershoot");var u=e.bar.snapClose;function f(H,j){return H*(1-u)+j*u}t(f,"closeToCovering");function h(H,j,X,G){if(v(X,G))return X;var $=H?-1:1,te=0,ee=j.length-1;if($<0){var ie=te;te=ee,ee=ie}for(var se=j[te],W=se,ne=te;$*ne<$*ee;ne+=$){var he=ne+$,re=j[he];if($*X<$*f(se,re))return l(se,W);if($*X<$*re||he===ee)return l(re,se);W=se,se=re}}t(h,"ordinalScaleSnap");function v(H,j){for(var X=0;X<j.length;X++)if(H>=j[X][0]&&H<=j[X][1])return!0;return!1}t(v,"overlappingExisting");function c(H){H.attr("x",-e.bar.captureWidth/2).attr("width",e.bar.captureWidth)}t(c,"barHorizontalSetup");function d(H){H.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}t(d,"backgroundBarHorizontalSetup");function g(H){if(!H.brush.filterSpecified)return"0,"+H.height;for(var j=p(H.brush.filter.getConsolidated(),H.height),X=[0],G,$,te,ee=j.length?j[0][0]:null,ie=0;ie<j.length;ie++)G=j[ie],$=G[1]-G[0],X.push(ee),X.push($),te=ie+1,te<j.length&&(ee=j[te][0]-G[1]);return X.push(H.height),X}t(g,"setHighlight");function p(H,j){return H.map(function(X){return X.map(function(G){return Math.max(0,G*j)}).sort(s)})}t(p,"unitToPx");function b(H,j){var X=e.bar.handleHeight;if(!(j>H[1]+X||j<H[0]-X))return j>=.9*H[1]+.1*H[0]?"n":j<=.9*H[0]+.1*H[1]?"s":"ns"}t(b,"getRegion");function m(){r.select(document.body).style("cursor",null)}t(m,"clearCursor");function y(H){H.attr("stroke-dasharray",g)}t(y,"styleHighlight");function T(H,j){var X=r.select(H).selectAll(".highlight, .highlight-shadow"),G=j?X.transition().duration(e.bar.snapDuration).each("end",j):X;y(G)}t(T,"renderHighlight");function _(H,j){var X=H.brush,G=X.filterSpecified,$=NaN,te={},ee;if(G){var ie=H.height,se=X.filter.getConsolidated(),W=p(se,ie),ne=NaN,he=NaN,re=NaN;for(ee=0;ee<=W.length;ee++){var ae=W[ee];if(ae&&ae[0]<=j&&j<=ae[1]){ne=ee;break}else if(he=ee?ee-1:NaN,ae&&ae[0]>j){re=ee;break}}if($=ne,isNaN($)&&(isNaN(he)||isNaN(re)?$=isNaN(he)?re:he:$=j-W[he][1]<W[re][0]-j?he:re),!isNaN($)){var fe=W[$],ce=b(fe,j);ce&&(te.interval=se[$],te.intervalPix=fe,te.region=ce)}}if(H.ordinal&&!te.region){var xe=H.unitTickvals,Te=H.unitToPaddedPx.invert(j);for(ee=0;ee<xe.length;ee++){var me=[xe[Math.max(ee-1,0)]*.25+xe[ee]*.75,xe[Math.min(ee+1,xe.length-1)]*.25+xe[ee]*.75];if(Te>=me[0]&&Te<=me[1]){te.clickableOrdinalRange=me;break}}}return te}t(_,"getInterval");function M(H,j){r.event.sourceEvent.stopPropagation();var X=j.height-r.mouse(H)[1]-2*e.verticalPadding,G=j.unitToPaddedPx.invert(X),$=j.brush,te=_(j,X),ee=te.interval,ie=$.svgBrush;if(ie.wasDragged=!1,ie.grabbingBar=te.region==="ns",ie.grabbingBar){var se=ee.map(j.unitToPaddedPx);ie.grabPoint=X-se[0]-e.verticalPadding,ie.barLength=se[1]-se[0]}ie.clickableOrdinalRange=te.clickableOrdinalRange,ie.stayingIntervals=j.multiselect&&$.filterSpecified?$.filter.getConsolidated():[],ee&&(ie.stayingIntervals=ie.stayingIntervals.filter(function(W){return W[0]!==ee[0]&&W[1]!==ee[1]})),ie.startExtent=te.region?ee[te.region==="s"?1:0]:G,j.parent.inBrushDrag=!0,ie.brushStartCallback()}t(M,"dragstart");function w(H,j){r.event.sourceEvent.stopPropagation();var X=j.height-r.mouse(H)[1]-2*e.verticalPadding,G=j.brush.svgBrush;G.wasDragged=!0,G._dragging=!0,G.grabbingBar?G.newExtent=[X-G.grabPoint,X+G.barLength-G.grabPoint].map(j.unitToPaddedPx.invert):G.newExtent=[G.startExtent,j.unitToPaddedPx.invert(X)].sort(s),j.brush.filterSpecified=!0,G.extent=G.stayingIntervals.concat([G.newExtent]),G.brushCallback(j),T(H.parentNode)}t(w,"drag");function x(H,j){var X=j.brush,G=X.filter,$=X.svgBrush;$._dragging||(A(H,j),w(H,j),j.brush.svgBrush.wasDragged=!1),$._dragging=!1;var te=r.event;te.sourceEvent.stopPropagation();var ee=$.grabbingBar;if($.grabbingBar=!1,$.grabLocation=void 0,j.parent.inBrushDrag=!1,m(),!$.wasDragged){$.wasDragged=void 0,$.clickableOrdinalRange?X.filterSpecified&&j.multiselect?$.extent.push($.clickableOrdinalRange):($.extent=[$.clickableOrdinalRange],X.filterSpecified=!0):ee?($.extent=$.stayingIntervals,$.extent.length===0&&B(X)):B(X),$.brushCallback(j),T(H.parentNode),$.brushEndCallback(X.filterSpecified?G.getConsolidated():[]);return}var ie=t(function(){G.set(G.getConsolidated())},"mergeIntervals");if(j.ordinal){var se=j.unitTickvals;se[se.length-1]<se[0]&&se.reverse(),$.newExtent=[h(0,se,$.newExtent[0],$.stayingIntervals),h(1,se,$.newExtent[1],$.stayingIntervals)];var W=$.newExtent[1]>$.newExtent[0];$.extent=$.stayingIntervals.concat(W?[$.newExtent]:[]),$.extent.length||B(X),$.brushCallback(j),W?T(H.parentNode,ie):(ie(),T(H.parentNode))}else ie();$.brushEndCallback(X.filterSpecified?G.getConsolidated():[])}t(x,"dragend");function A(H,j){var X=j.height-r.mouse(H)[1]-2*e.verticalPadding,G=_(j,X),$="crosshair";G.clickableOrdinalRange?$="pointer":G.region&&($=G.region+"-resize"),r.select(document.body).style("cursor",$)}t(A,"mousemove");function S(H){H.on("mousemove",function(j){r.event.preventDefault(),j.parent.inBrushDrag||A(this,j)}).on("mouseleave",function(j){j.parent.inBrushDrag||m()}).call(r.behavior.drag().on("dragstart",function(j){M(this,j)}).on("drag",function(j){w(this,j)}).on("dragend",function(j){x(this,j)}))}t(S,"attachDragBehavior");function k(H,j){return H[0]-j[0]}t(k,"startAsc");function L(H,j,X){var G=X._context.staticPlot,$=H.selectAll(".background").data(i);$.enter().append("rect").classed("background",!0).call(c).call(d).style("pointer-events",G?"none":"auto").attr("transform",o(0,e.verticalPadding)),$.call(S).attr("height",function(ie){return ie.height-e.verticalPadding});var te=H.selectAll(".highlight-shadow").data(i);te.enter().append("line").classed("highlight-shadow",!0).attr("x",-e.bar.width/2).attr("stroke-width",e.bar.width+e.bar.strokeWidth).attr("stroke",j).attr("opacity",e.bar.strokeOpacity).attr("stroke-linecap","butt"),te.attr("y1",function(ie){return ie.height}).call(y);var ee=H.selectAll(".highlight").data(i);ee.enter().append("line").classed("highlight",!0).attr("x",-e.bar.width/2).attr("stroke-width",e.bar.width-e.bar.strokeWidth).attr("stroke",e.bar.fillColor).attr("opacity",e.bar.fillOpacity).attr("stroke-linecap","butt"),ee.attr("y1",function(ie){return ie.height}).call(y)}t(L,"renderAxisBrush");function P(H,j,X){var G=H.selectAll("."+e.cn.axisBrush).data(i,n);G.enter().append("g").classed(e.cn.axisBrush,!0),L(G,j,X)}t(P,"ensureAxisBrush");function D(H){return H.svgBrush.extent.map(function(j){return j.slice()})}t(D,"getBrushExtent");function B(H){H.filterSpecified=!1,H.svgBrush.extent=[[-1/0,1/0]]}t(B,"brushClear");function z(H){return t(function(X){var G=X.brush,$=D(G),te=$.slice();G.filter.set(te),H()},"axisBrushMoved")}t(z,"axisBrushMoved");function R(H){for(var j=H.slice(),X=[],G,$=j.shift();$;){for(G=$.slice();($=j.shift())&&$[0]<=G[1];)G[1]=Math.max(G[1],$[1]);X.push(G)}return X.length===1&&X[0][0]>X[0][1]&&(X=[]),X}t(R,"dedupeRealRanges");function F(){var H=[],j,X;return{set:function(G){H=G.map(function($){return $.slice().sort(s)}).sort(k),H.length===1&&H[0][0]===-1/0&&H[0][1]===1/0&&(H=[[0,-1]]),j=R(H),X=H.reduce(function($,te){return[Math.min($[0],te[0]),Math.max($[1],te[1])]},[1/0,-1/0])},get:function(){return H.slice()},getConsolidated:function(){return j},getBounds:function(){return X}}}t(F,"makeFilter");function O(H,j,X,G,$,te){var ee=F();return ee.set(X),{filter:ee,filterSpecified:j,svgBrush:{extent:[],brushStartCallback:G,brushCallback:z($),brushEndCallback:te}}}t(O,"makeBrush");function q(H,j){if(Array.isArray(H[0])?(H=H.map(function(G){return G.sort(s)}),j.multiselect?H=R(H.sort(k)):H=[H[0]]):H=[H.sort(s)],j.tickvals){var X=j.tickvals.slice().sort(s);if(H=H.map(function(G){var $=[h(0,X,G[0],[]),h(1,X,G[1],[])];if($[1]>$[0])return $}).filter(function(G){return G}),!H.length)return}return H.length>1?H:H[0]}return t(q,"cleanRanges"),BP={makeBrush:O,ensureAxisBrush:P,cleanRanges:q},BP}t(fpe,"requireAxisbrush");var OP,ote;function ABe(){if(ote)return OP;ote=1;var e=Nt.exports,r=Qu.hasColorscale,n=ml,i=vo.defaults,s=mu,o=nn(),a=upe(),l=fpe(),u=A3().maxDimensionCount,f=fB();function h(c,d,g,p,b){var m=b("line.color",g);if(r(c,"line")&&e.isArrayOrTypedArray(m)){if(m.length)return b("line.colorscale"),n(c,d,p,b,{prefix:"line.",cLetter:"c"}),m.length;d.line.color=g}return 1/0}t(h,"handleLineDefaults");function v(c,d,g,p){function b(M,w){return e.coerce(c,d,a.dimensions,M,w)}t(b,"coerce");var m=b("values"),y=b("visible");if(m&&m.length||(y=d.visible=!1),y){b("label"),b("tickvals"),b("ticktext"),b("tickformat");var T=b("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:T},o.setConvert(d._ax,p.layout),b("multiselect");var _=b("constraintrange");_&&(d.constraintrange=l.cleanRanges(_,d))}}return t(v,"dimensionDefaults"),OP=t(function(d,g,p,b){function m(w,x){return e.coerce(d,g,a,w,x)}t(m,"coerce");var y=d.dimensions;Array.isArray(y)&&y.length>u&&(e.log("parcoords traces support up to "+u+" dimensions at the moment"),y.splice(u));var T=s(d,g,{name:"dimensions",layout:b,handleItemDefaults:v}),_=h(d,g,p,b,m);i(g,b,m),(!Array.isArray(T)||!T.length)&&(g.visible=!1),f(g,T,"values",_);var M={family:b.font.family,size:Math.round(b.font.size/1.2),color:b.font.color};e.coerceFont(m,"labelfont",M),e.coerceFont(m,"tickfont",M),e.coerceFont(m,"rangefont",M),m("labelangle"),m("labelside"),m("unselected.line.color"),m("unselected.line.opacity")},"supplyDefaults"),OP}t(ABe,"requireDefaults$g");var NP,ste;function SBe(){if(ste)return NP;ste=1;var e=Nt.exports.isArrayOrTypedArray,r=ko,n=cd().wrap;NP=t(function(o,a){var l,u;return r.hasColorscale(a,"line")&&e(a.line.color)?(l=a.line.color,u=r.extractOpts(a.line).colorscale,r.calc(o,a,{vals:l,containerStr:"line",cLetter:"c"})):(l=i(a._length),u=[[0,a.line.color],[1,a.line.color]]),n({lineColor:l,cscale:u})},"calc");function i(s){for(var o=new Array(s),a=0;a<s;a++)o[a]=.5;return o}return t(i,"constHalf"),NP}t(SBe,"requireCalc$e");var Lg={},qP={exports:{}},$m={},lte;function cpe(){if(lte)return $m;lte=1;var e=Nt.exports.isTypedArray;return $m.convertTypedArray=function(r){return e(r)?Array.prototype.slice.call(r):r},$m.isOrdinal=function(r){return!!r.tickvals},$m.isVisible=function(r){return r.visible||!("visible"in r)},$m}t(cpe,"requireHelpers$3");var UP,ute;function MBe(){if(ute)return UP;ute=1;var e=nB(),r=e("./shaders/vertex.glsl"),n=e("./shaders/fragment.glsl"),i=A3().maxDimensionCount,s=Nt.exports,o=1e-6,a=2048,l=new Uint8Array(4),u=new Uint8Array(4),f={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function h(A){A.read({x:0,y:0,width:1,height:1,data:l})}t(h,"ensureDraw");function v(A,S,k,L,P){var D=A._gl;D.enable(D.SCISSOR_TEST),D.scissor(S,k,L,P),A.clear({color:[0,0,0,0],depth:1})}t(v,"clear");function c(A,S,k,L,P,D){var B=D.key;function z(R){var F=Math.min(L,P-R*L);R===0&&(window.cancelAnimationFrame(k.currentRafs[B]),delete k.currentRafs[B],v(A,D.scissorX,D.scissorY,D.scissorWidth,D.viewBoxSize[1])),!k.clearOnly&&(D.count=2*F,D.offset=2*R*L,S(D),R*L+F<P&&(k.currentRafs[B]=window.requestAnimationFrame(function(){z(R+1)})),k.drawCompleted=!1)}t(z,"render"),k.drawCompleted||(h(A),k.drawCompleted=!0),z(0)}t(c,"renderBlock");function d(A){return Math.max(o,Math.min(1-o,A))}t(d,"adjustDepth");function g(A,S){for(var k=new Array(256),L=0;L<256;L++)k[L]=A(L/255).concat(S);return k}t(g,"palette");function p(A,S){return(A>>>8*S)%256/255}t(p,"calcPickColor");function b(A,S,k){for(var L=new Array(A*(i+4)),P=0,D=0;D<A;D++){for(var B=0;B<i;B++)L[P++]=B<S.length?S[B].paddedUnitValues[D]:.5;L[P++]=p(D,2),L[P++]=p(D,1),L[P++]=p(D,0),L[P++]=d(k[D])}return L}t(b,"makePoints");function m(A,S,k){for(var L=new Array(S*8),P=0,D=0;D<S;D++)for(var B=0;B<2;B++)for(var z=0;z<4;z++){var R=A*4+z,F=k[D*64+R];R===63&&B===0&&(F*=-1),L[P++]=F}return L}t(m,"makeVecAttr");function y(A){var S="0"+A;return S.substr(S.length-2)}t(y,"pad2");function T(A){return A<i?"p"+y(A+1)+"_"+y(A+4):"colors"}t(T,"getAttrName");function _(A,S,k){for(var L=0;L<=i;L+=4)A[T(L)](m(L/4,S,k))}t(_,"setAttributes");function M(A){for(var S={},k=0;k<=i;k+=4)S[T(k)]=A.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return S}t(M,"emptyAttributes");function w(A,S,k,L,P,D,B,z,R,F,O,q,H,j){for(var X=[[],[]],G=0;G<64;G++)X[0][G]=G===P?1:0,X[1][G]=G===D?1:0;B*=j,z*=j,R*=j,F*=j;var $=A.lines.canvasOverdrag*j,te=A.domain,ee=A.canvasWidth*j,ie=A.canvasHeight*j,se=A.pad.l*j,W=A.pad.b*j,ne=A.layoutHeight*j,he=A.layoutWidth*j,re=A.deselectedLines.color,ae=A.deselectedLines.opacity,fe=s.extendFlat({key:O,resolution:[ee,ie],viewBoxPos:[B+$,z],viewBoxSize:[R,F],i0:P,i1:D,dim0A:X[0].slice(0,16),dim0B:X[0].slice(16,32),dim0C:X[0].slice(32,48),dim0D:X[0].slice(48,64),dim1A:X[1].slice(0,16),dim1B:X[1].slice(16,32),dim1C:X[1].slice(32,48),dim1D:X[1].slice(48,64),drwLayer:q,contextColor:[re[0]/255,re[1]/255,re[2]/255,ae!=="auto"?re[3]*ae:Math.max(1/255,Math.pow(1/A.lines.color.length,1/3))],scissorX:(L===S?0:B+$)+(se-$)+he*te.x[0],scissorWidth:(L===k?ee-B+$:R+.5)+(L===S?B+$:0),scissorY:z+W+ne*te.y[0],scissorHeight:F,viewportX:se-$+he*te.x[0],viewportY:W+ne*te.y[0],viewportWidth:ee,viewportHeight:ie},H);return fe}t(w,"makeItem");function x(A){var S=a-1,k=Math.max(0,Math.floor(A[0]*S),0),L=Math.min(S,Math.ceil(A[1]*S),S);return[Math.min(k,L),Math.max(k,L)]}return t(x,"expandedPixelRange"),UP=t(function(A,S){var k=S.context,L=S.pick,P=S.regl,D=P._gl,B=D.getParameter(D.ALIASED_LINE_WIDTH_RANGE),z=Math.max(B[0],Math.min(B[1],S.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},F,O,q,H,j=M(P),X,G=P.texture(f),$=[];ee(S);var te=P({profile:!1,blend:{enable:k,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!k,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:r,frag:n,primitive:"lines",lineWidth:z,attributes:j,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:G,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function ee(re){F=re.model,O=re.viewModel,q=O.dimensions.slice(),H=q[0]?q[0].values.length:0;var ae=F.lines,fe=L?ae.color.map(function(xe,Te){return Te/ae.color.length}):ae.color,ce=b(H,q,fe);_(j,H,ce),!k&&!L&&(G=P.texture(s.extendFlat({data:g(F.unitToColor,255)},f)))}t(ee,"update");function ie(re){var ae,fe,ce,xe=[[],[]];for(ce=0;ce<64;ce++){var Te=!re&&ce<q.length?q[ce].brush.filter.getBounds():[-1/0,1/0];xe[0][ce]=Te[0],xe[1][ce]=Te[1]}var me=a*8,pe=new Array(me);for(ae=0;ae<me;ae++)pe[ae]=255;if(!re)for(ae=0;ae<q.length;ae++){var oe=ae%8,de=(ae-oe)/8,ye=Math.pow(2,oe),we=q[ae],Ee=we.brush.filter.get();if(!(Ee.length<2)){var De=x(Ee[0])[1];for(fe=1;fe<Ee.length;fe++){var Fe=x(Ee[fe]);for(ce=De+1;ce<Fe[0];ce++)pe[ce*8+de]&=~ye;De=Math.max(De,Fe[1])}}}var qe={shape:[8,a],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:pe};return X?X(qe):X=P.texture(qe),{maskTexture:X,maskHeight:a,loA:xe[0].slice(0,16),loB:xe[0].slice(16,32),loC:xe[0].slice(32,48),loD:xe[0].slice(48,64),hiA:xe[1].slice(0,16),hiB:xe[1].slice(16,32),hiC:xe[1].slice(32,48),hiD:xe[1].slice(48,64)}}t(ie,"makeConstraints");function se(re,ae,fe){var ce=re.length,xe,Te,me,pe=1/0,oe=-1/0;for(xe=0;xe<ce;xe++)re[xe].dim0.canvasX<pe&&(pe=re[xe].dim0.canvasX,Te=xe),re[xe].dim1.canvasX>oe&&(oe=re[xe].dim1.canvasX,me=xe);ce===0&&v(P,0,0,F.canvasWidth,F.canvasHeight);var de=ie(k);for(xe=0;xe<ce;xe++){var ye=re[xe],we=ye.dim0.crossfilterDimensionIndex,Ee=ye.dim1.crossfilterDimensionIndex,De=ye.canvasX,Fe=ye.canvasY,qe=De+ye.panelSizeX,Je=ye.plotGlPixelRatio;if(ae||!$[we]||$[we][0]!==De||$[we][1]!==qe){$[we]=[De,qe];var Ge=w(F,Te,me,xe,we,Ee,De,Fe,ye.panelSizeX,ye.panelSizeY,ye.dim0.crossfilterDimensionIndex,k?0:L?2:1,de,Je);R.clearOnly=fe;var et=ae?F.lines.blockLineCount:H;c(P,te,R,et,H,Ge)}}}t(se,"renderGLParcoords");function W(re,ae){return P.read({x:re,y:ae,width:1,height:1,data:u}),u}t(W,"readPixel");function ne(re,ae,fe,ce){var xe=new Uint8Array(4*fe*ce);return P.read({x:re,y:ae,width:fe,height:ce,data:xe}),xe}t(ne,"readPixels");function he(){A.style["pointer-events"]="none",G.destroy(),X&&X.destroy();for(var re in j)j[re].destroy()}return t(he,"destroy"),{render:se,readPixel:W,readPixels:ne,destroy:he,update:ee}},"lines"),UP}t(MBe,"requireLines");var HP,fte;function kBe(){if(fte)return HP;fte=1;var e=Va.exports,r=Nt.exports,n=r.numberFormat,i=ghe(),s=nn(),o=r.strRotate,a=r.strTranslate,l=Ji,u=bn.exports,f=ko,h=cd(),v=h.keyFun,c=h.repeat,d=h.unwrap,g=cpe(),p=A3(),b=fpe(),m=MBe();function y(X,G,$){return r.aggNums(X,null,G,$)}t(y,"findExtreme");function T(X,G){return M(y(Math.min,X,G),y(Math.max,X,G))}t(T,"findExtremes");function _(X){var G=X.range;return G?M(G[0],G[1]):T(X.values,X._length)}t(_,"dimensionExtent");function M(X,G){return(isNaN(X)||!isFinite(X))&&(X=0),(isNaN(G)||!isFinite(G))&&(G=0),X===G&&(X===0?(X-=1,G+=1):(X*=.9,G*=1.1)),[X,G]}t(M,"fixExtremes");function w(X,G){return G?function($,te){var ee=G[te];return ee==null?X($):ee}:X}t(w,"toText");function x(X,G,$,te,ee){var ie=_($);return te?e.scale.ordinal().domain(te.map(w(n($.tickformat),ee))).range(te.map(function(se){var W=(se-ie[0])/(ie[1]-ie[0]);return X-G+W*(2*G-X)})):e.scale.linear().domain(ie).range([X-G,G])}t(x,"domainScale");function A(X,G){return e.scale.linear().range([G,X-G])}t(A,"unitToPaddedPx");function S(X,G){return e.scale.linear().domain(_(X)).range([G,1-G])}t(S,"domainToPaddedUnitScale");function k(X){if(!!X.tickvals){var G=_(X);return e.scale.ordinal().domain(X.tickvals).range(X.tickvals.map(function($){return($-G[0])/(G[1]-G[0])}))}}t(k,"ordinalScale");function L(X){var G=X.map(function(ie){return ie[0]}),$=X.map(function(ie){var se=i(ie[1]);return e.rgb("rgb("+se[0]+","+se[1]+","+se[2]+")")}),te=t(function(ie){return function(se){return se[ie]}},"prop"),ee="rgb".split("").map(function(ie){return e.scale.linear().clamp(!0).domain(G).range($.map(te(ie)))});return function(ie){return ee.map(function(se){return se(ie)})}}t(L,"unitToColorScale");function P(X){return X.dimensions.some(function(G){return G.brush.filterSpecified})}t(P,"someFiltersActive");function D(X,G,$){var te=d(G),ee=te.trace,ie=g.convertTypedArray(te.lineColor),se=ee.line,W={color:i(ee.unselected.line.color),opacity:ee.unselected.line.opacity},ne=f.extractOpts(se),he=ne.reversescale?f.flipScale(te.cscale):te.cscale,re=ee.domain,ae=ee.dimensions,fe=X.width,ce=ee.labelangle,xe=ee.labelside,Te=ee.labelfont,me=ee.tickfont,pe=ee.rangefont,oe=r.extendDeepNoArrays({},se,{color:ie.map(e.scale.linear().domain(_({values:ie,range:[ne.min,ne.max],_length:ee._length}))),blockLineCount:p.blockLineCount,canvasOverdrag:p.overdrag*p.canvasPixelRatio}),de=Math.floor(fe*(re.x[1]-re.x[0])),ye=Math.floor(X.height*(re.y[1]-re.y[0])),we=X.margin||{l:80,r:80,t:100,b:80},Ee=de,De=ye;return{key:$,colCount:ae.filter(g.isVisible).length,dimensions:ae,tickDistance:p.tickDistance,unitToColor:L(he),lines:oe,deselectedLines:W,labelAngle:ce,labelSide:xe,labelFont:Te,tickFont:me,rangeFont:pe,layoutWidth:fe,layoutHeight:X.height,domain:re,translateX:re.x[0]*fe,translateY:X.height-re.y[1]*X.height,pad:we,canvasWidth:Ee*p.canvasPixelRatio+2*oe.canvasOverdrag,canvasHeight:De*p.canvasPixelRatio,width:Ee,height:De,canvasPixelRatio:p.canvasPixelRatio}}t(D,"model");function B(X,G,$){var te=$.width,ee=$.height,ie=$.dimensions,se=$.canvasPixelRatio,W=t(function(fe){return te*fe/Math.max(1,$.colCount-1)},"xScale"),ne=p.verticalPadding/ee,he=A(ee,p.verticalPadding),re={key:$.key,xScale:W,model:$,inBrushDrag:!1},ae={};return re.dimensions=ie.filter(g.isVisible).map(function(fe,ce){var xe=S(fe,ne),Te=ae[fe.label];ae[fe.label]=(Te||0)+1;var me=fe.label+(Te?"__"+Te:""),pe=fe.constraintrange,oe=pe&&pe.length;oe&&!Array.isArray(pe[0])&&(pe=[pe]);var de=oe?pe.map(function(Ue){return Ue.map(xe)}):[[-1/0,1/0]],ye=t(function(){var Ue=re;Ue.focusLayer&&Ue.focusLayer.render(Ue.panels,!0);var Ye=P(Ue);!X.contextShown()&&Ye?(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0),X.contextShown(!0)):X.contextShown()&&!Ye&&(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0,!0),X.contextShown(!1))},"brushMove"),we=fe.values;we.length>fe._length&&(we=we.slice(0,fe._length));var Ee=fe.tickvals,De;function Fe(Ue,Ye){return{val:Ue,text:De[Ye]}}t(Fe,"makeTickItem");function qe(Ue,Ye){return Ue.val-Ye.val}if(t(qe,"sortTickItem"),Array.isArray(Ee)&&Ee.length){De=fe.ticktext,!Array.isArray(De)||!De.length?De=Ee.map(n(fe.tickformat)):De.length>Ee.length?De=De.slice(0,Ee.length):Ee.length>De.length&&(Ee=Ee.slice(0,De.length));for(var Je=1;Je<Ee.length;Je++)if(Ee[Je]<Ee[Je-1]){for(var Ge=Ee.map(Fe).sort(qe),et=0;et<Ee.length;et++)Ee[et]=Ge[et].val,De[et]=Ge[et].text;break}}else Ee=void 0;return we=g.convertTypedArray(we),{key:me,label:fe.label,tickFormat:fe.tickformat,tickvals:Ee,ticktext:De,ordinal:g.isOrdinal(fe),multiselect:fe.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:fe._index,height:ee,values:we,paddedUnitValues:we.map(xe),unitTickvals:Ee&&Ee.map(xe),xScale:W,x:W(ce),canvasX:W(ce)*se,unitToPaddedPx:he,domainScale:x(ee,p.verticalPadding,fe,Ee,De),ordinalScale:k(fe),parent:re,model:$,brush:b.makeBrush(X,oe,de,function(){X.linePickActive(!1)},ye,function(Ue){if(re.focusLayer.render(re.panels,!0),re.pickLayer&&re.pickLayer.render(re.panels,!0),X.linePickActive(!0),G&&G.filterChanged){var Ye=xe.invert,$e=Ue.map(function(Ct){return Ct.map(Ye).sort(r.sorterAsc)}).sort(function(Ct,It){return Ct[0]-It[0]});G.filterChanged(re.key,fe._index,$e)}})}}),re}t(B,"viewModel");function z(X){X.classed(p.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}t(z,"styleExtentTexts");function R(){var X=!0,G=!1;return{linePickActive:function($){return arguments.length?X=!!$:X},contextShown:function($){return arguments.length?G=!!$:G}}}t(R,"parcoordsInteractionState");function F(X,G){var $=G==="top"?1:-1,te=X*Math.PI/180,ee=Math.sin(te),ie=Math.cos(te);return{dir:$,dx:ee,dy:ie,degrees:X}}t(F,"calcTilt");function O(X,G,$){for(var te=G.panels||(G.panels=[]),ee=X.data(),ie=0;ie<ee.length-1;ie++){var se=te[ie]||(te[ie]={}),W=ee[ie],ne=ee[ie+1];se.dim0=W,se.dim1=ne,se.canvasX=W.canvasX,se.panelSizeX=ne.canvasX-W.canvasX,se.panelSizeY=G.model.canvasHeight,se.y=0,se.canvasY=0,se.plotGlPixelRatio=$}}t(O,"updatePanelLayout");function q(X){for(var G=0;G<X.length;G++)for(var $=0;$<X[G].length;$++)for(var te=X[G][$].trace,ee=te.dimensions,ie=0;ie<ee.length;ie++){var se=ee[ie].values,W=ee[ie]._ax;W&&(W.range?W.range=M(W.range[0],W.range[1]):W.range=T(se,te._length),W.dtick||(W.dtick=.01*(Math.abs(W.range[1]-W.range[0])||1)),W.tickformat=ee[ie].tickformat,s.calcTicks(W),W.cleanRange())}}t(q,"calcAllTicks");function H(X,G){return s.tickText(X._ax,G,!1).text}t(H,"linearFormat");function j(X,G){if(X.ordinal)return"";var $=X.domainScale.domain(),te=$[G?$.length-1:0];return H(X.model.dimensions[X.visibleIndex],te)}return t(j,"extremeText"),HP=t(function(G,$,te,ee){var ie=G._context.staticPlot,se=G._fullLayout,W=se._toppaper,ne=se._glcontainer,he=G._context.plotGlPixelRatio,re=G._fullLayout.paper_bgcolor;q($);var ae=R(),fe=$.filter(function(et){return d(et).trace.visible}).map(D.bind(0,te)).map(B.bind(0,ae,ee));ne.each(function(et,Ue){return r.extendFlat(et,fe[Ue])});var ce=ne.selectAll(".gl-canvas").each(function(et){et.viewModel=fe[0],et.viewModel.plotGlPixelRatio=he,et.viewModel.paperColor=re,et.model=et.viewModel?et.viewModel.model:null}),xe=null,Te=ce.filter(function(et){return et.pick});Te.style("pointer-events",ie?"none":"auto").on("mousemove",function(et){if(ae.linePickActive()&&et.lineLayer&&ee&&ee.hover){var Ue=e.event,Ye=this.width,$e=this.height,Ct=e.mouse(this),It=Ct[0],Vt=Ct[1];if(It<0||Vt<0||It>=Ye||Vt>=$e)return;var $t=et.lineLayer.readPixel(It,$e-1-Vt),Gt=$t[3]!==0,Jt=Gt?$t[2]+256*($t[1]+256*$t[0]):null,kt={x:It,y:Vt,clientX:Ue.clientX,clientY:Ue.clientY,dataIndex:et.model.key,curveNumber:Jt};Jt!==xe&&(Gt?ee.hover(kt):ee.unhover&&ee.unhover(kt),xe=Jt)}}),ce.style("opacity",function(et){return et.pick?0:1}),W.style("background","rgba(255, 255, 255, 0)");var me=W.selectAll("."+p.cn.parcoords).data(fe,v);me.exit().remove(),me.enter().append("g").classed(p.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),me.attr("transform",function(et){return a(et.model.translateX,et.model.translateY)});var pe=me.selectAll("."+p.cn.parcoordsControlView).data(c,v);pe.enter().append("g").classed(p.cn.parcoordsControlView,!0),pe.attr("transform",function(et){return a(et.model.pad.l,et.model.pad.t)});var oe=pe.selectAll("."+p.cn.yAxis).data(function(et){return et.dimensions},v);oe.enter().append("g").classed(p.cn.yAxis,!0),pe.each(function(et){O(oe,et,he)}),ce.each(function(et){if(et.viewModel){!et.lineLayer||ee?et.lineLayer=m(this,et):et.lineLayer.update(et),(et.key||et.key===0)&&(et.viewModel[et.key]=et.lineLayer);var Ue=!et.context||ee;et.lineLayer.render(et.viewModel.panels,Ue)}}),oe.attr("transform",function(et){return a(et.xScale(et.xIndex),0)}),oe.call(e.behavior.drag().origin(function(et){return et}).on("drag",function(et){var Ue=et.parent;ae.linePickActive(!1),et.x=Math.max(-p.overdrag,Math.min(et.model.width+p.overdrag,e.event.x)),et.canvasX=et.x*et.model.canvasPixelRatio,oe.sort(function(Ye,$e){return Ye.x-$e.x}).each(function(Ye,$e){Ye.xIndex=$e,Ye.x=et===Ye?Ye.x:Ye.xScale(Ye.xIndex),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio}),O(oe,Ue,he),oe.filter(function(Ye){return Math.abs(et.xIndex-Ye.xIndex)!==0}).attr("transform",function(Ye){return a(Ye.xScale(Ye.xIndex),0)}),e.select(this).attr("transform",a(et.x,0)),oe.each(function(Ye,$e,Ct){Ct===et.parent.key&&(Ue.dimensions[$e]=Ye)}),Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!1,!P(Ue)),Ue.focusLayer.render&&Ue.focusLayer.render(Ue.panels)}).on("dragend",function(et){var Ue=et.parent;et.x=et.xScale(et.xIndex),et.canvasX=et.x*et.model.canvasPixelRatio,O(oe,Ue,he),e.select(this).attr("transform",function(Ye){return a(Ye.x,0)}),Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!1,!P(Ue)),Ue.focusLayer&&Ue.focusLayer.render(Ue.panels),Ue.pickLayer&&Ue.pickLayer.render(Ue.panels,!0),ae.linePickActive(!0),ee&&ee.axesMoved&&ee.axesMoved(Ue.key,Ue.dimensions.map(function(Ye){return Ye.crossfilterDimensionIndex}))})),oe.exit().remove();var de=oe.selectAll("."+p.cn.axisOverlays).data(c,v);de.enter().append("g").classed(p.cn.axisOverlays,!0),de.selectAll("."+p.cn.axis).remove();var ye=de.selectAll("."+p.cn.axis).data(c,v);ye.enter().append("g").classed(p.cn.axis,!0),ye.each(function(et){var Ue=et.model.height/et.model.tickDistance,Ye=et.domainScale,$e=Ye.domain();e.select(this).call(e.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ue,et.tickFormat).tickValues(et.ordinal?$e:null).tickFormat(function(Ct){return g.isOrdinal(et)?Ct:H(et.model.dimensions[et.visibleIndex],Ct)}).scale(Ye)),u.font(ye.selectAll("text"),et.model.tickFont)}),ye.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ye.selectAll("text").style("text-shadow",l.makeTextShadow(re)).style("cursor","default");var we=de.selectAll("."+p.cn.axisHeading).data(c,v);we.enter().append("g").classed(p.cn.axisHeading,!0);var Ee=we.selectAll("."+p.cn.axisTitle).data(c,v);Ee.enter().append("text").classed(p.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ie?"none":"auto"),Ee.text(function(et){return et.label}).each(function(et){var Ue=e.select(this);u.font(Ue,et.model.labelFont),l.convertToTspans(Ue,G)}).attr("transform",function(et){var Ue=F(et.model.labelAngle,et.model.labelSide),Ye=p.axisTitleOffset;return(Ue.dir>0?"":a(0,2*Ye+et.model.height))+o(Ue.degrees)+a(-Ye*Ue.dx,-Ye*Ue.dy)}).attr("text-anchor",function(et){var Ue=F(et.model.labelAngle,et.model.labelSide),Ye=Math.abs(Ue.dx),$e=Math.abs(Ue.dy);return 2*Ye>$e?Ue.dir*Ue.dx<0?"start":"end":"middle"});var De=de.selectAll("."+p.cn.axisExtent).data(c,v);De.enter().append("g").classed(p.cn.axisExtent,!0);var Fe=De.selectAll("."+p.cn.axisExtentTop).data(c,v);Fe.enter().append("g").classed(p.cn.axisExtentTop,!0),Fe.attr("transform",a(0,-p.axisExtentOffset));var qe=Fe.selectAll("."+p.cn.axisExtentTopText).data(c,v);qe.enter().append("text").classed(p.cn.axisExtentTopText,!0).call(z),qe.text(function(et){return j(et,!0)}).each(function(et){u.font(e.select(this),et.model.rangeFont)});var Je=De.selectAll("."+p.cn.axisExtentBottom).data(c,v);Je.enter().append("g").classed(p.cn.axisExtentBottom,!0),Je.attr("transform",function(et){return a(0,et.model.height+p.axisExtentOffset)});var Ge=Je.selectAll("."+p.cn.axisExtentBottomText).data(c,v);Ge.enter().append("text").classed(p.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(z),Ge.text(function(et){return j(et,!1)}).each(function(et){u.font(e.select(this),et.model.rangeFont)}),b.ensureAxisBrush(de,re,G)},"parcoords"),HP}t(kBe,"requireParcoords$2");var cte;function hpe(){if(cte)return qP.exports;cte=1;var e=kBe(),r=uB(),n=cpe().isVisible,i={};function s(l,u,f){var h=u.indexOf(f),v=l.indexOf(h);return v===-1&&(v+=u.length),v}t(s,"newIndex");function o(l,u){return t(function(h,v){return s(l,u,h)-s(l,u,v)},"sorter")}t(o,"sorter");var a=qP.exports=t(function(u,f){var h=u._fullLayout,v=r(u,[],i);if(!!v){var c={},d={},g={},p={},b=h._size;f.forEach(function(M,w){var x=M[0].trace;g[w]=x.index;var A=p[w]=x._fullInput.index;c[w]=u.data[A].dimensions,d[w]=u.data[A].dimensions.slice()});var m=t(function(M,w,x){var A=d[M][w],S=x.map(function(z){return z.slice()}),k="dimensions["+w+"].constraintrange",L=h._tracePreGUI[u._fullData[g[M]]._fullInput.uid];if(L[k]===void 0){var P=A.constraintrange;L[k]=P||null}var D=u._fullData[g[M]].dimensions[w];S.length?(S.length===1&&(S=S[0]),A.constraintrange=S,D.constraintrange=S.slice(),S=[S]):(delete A.constraintrange,delete D.constraintrange,S=null);var B={};B[k]=S,u.emit("plotly_restyle",[B,[p[M]]])},"filterChanged"),y=t(function(M){u.emit("plotly_hover",M)},"hover"),T=t(function(M){u.emit("plotly_unhover",M)},"unhover"),_=t(function(M,w){var x=o(w,d[M].filter(n));c[M].sort(x),d[M].filter(function(A){return!n(A)}).sort(function(A){return d[M].indexOf(A)}).forEach(function(A){c[M].splice(c[M].indexOf(A),1),c[M].splice(d[M].indexOf(A),0,A)}),u.emit("plotly_restyle",[{dimensions:[c[M]]},[p[M]]])},"axesMoved");e(u,f,{width:b.w,height:b.h,margin:{t:b.t,r:b.r,b:b.b,l:b.l}},{filterChanged:m,hover:y,unhover:T,axesMoved:_})}},"plot");return a.reglPrecompiled=i,qP.exports}t(hpe,"requirePlot$f");var hte;function EBe(){if(hte)return Lg;hte=1;var e=Va.exports,r=Ns.getModuleCalcData,n=hpe(),i=ic;return Lg.name="parcoords",Lg.plot=function(s){var o=r(s.calcdata,"parcoords")[0];o.length&&n(s,o)},Lg.clean=function(s,o,a,l){var u=l._has&&l._has("parcoords"),f=o._has&&o._has("parcoords");u&&!f&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())},Lg.toSVG=function(s){var o=s._fullLayout._glimages,a=e.select(s).selectAll(".svg-container"),l=a.filter(function(f,h){return h===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function u(){var f=this,h=f.toDataURL("image/png"),v=o.append("svg:image");v.attr({xmlns:i.svg,"xlink:href":h,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})}t(u,"canvasToImage"),l.each(u),window.setTimeout(function(){e.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)},Lg}t(EBe,"requireBase_plot$4");var $P,vte;function CBe(){return vte||(vte=1,$P={attributes:upe(),supplyDefaults:ABe(),calc:SBe(),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:EBe(),categories:["gl","regl","noOpacity","noHover"],meta:{description:["Parallel coordinates for multidimensional exploratory data analysis.","The samples are specified in `dimensions`.","The colors are set in `line.color`."].join(" ")}}),$P}t(CBe,"requireBase_index$1");var VP,dte;function LBe(){if(dte)return VP;dte=1;var e=CBe();return e.plot=hpe(),VP=e,VP}t(LBe,"requireParcoords$1");var pte;function RBe(){return pte||(pte=1,function(e){e.exports=LBe()}(DP)),DP.exports}t(RBe,"requireParcoords");var GP={exports:{}},jP,gte;function vpe(){if(gte)return jP;gte=1;var e=cn.extendFlat,r=Ni,n=Ho,i=Qi,s=Un.hovertemplateAttrs,o=vo.attributes,a=e({editType:"calc"},i("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot",description:["Sets the shape of the paths.","If `linear`, paths are composed of straight lines.","If `hspline`, paths are composed of horizontal curved splines"].join(" ")},hovertemplate:s({editType:"plot",arrayOk:!1},{keys:["count","probability"],description:["This value here applies when hovering over lines."].join(" ")})});return jP={domain:o({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:e({},r.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot",description:["Sets the hover interaction mode for the parcats diagram.","If `category`, hover interaction take place per category.","If `color`, hover interactions take place per color per category.","If `dimension`, hover interactions take place across all categories per dimension."].join(" ")},hovertemplate:s({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"],description:["This value here applies when hovering over dimensions.","Note that `*categorycount`, *colorcount* and *bandcolorcount*","are only available when `hoveron` contains the *color* flag"].join(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot",description:["Sets the drag interaction mode for categories and dimensions.","If `perpendicular`, the categories can only move along a line perpendicular to the paths.","If `freeform`, the categories can freely move on the plane.","If `fixed`, the categories and dimensions are stationary."].join(" ")},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot",description:"Sort paths so that like colors are bundled together within each category."},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot",description:["Sets the path sorting algorithm.","If `forward`, sort paths based on dimension categories from left to right.","If `backward`, sort paths based on dimensions categories from right to left."].join(" ")},labelfont:n({editType:"calc",description:"Sets the font for the `dimension` labels."}),tickfont:n({editType:"calc",description:"Sets the font for the `category` labels."}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc",description:"The shown name of the dimension."},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the categories in the dimension.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories in this dimension appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},ticktext:{valType:"data_array",editType:"calc",description:["Sets alternative tick labels for the categories in this dimension.","Only has an effect if `categoryorder` is set to *array*.","Should be an array the same length as `categoryarray`","Used with `categoryorder`."].join(" ")},values:{valType:"data_array",dflt:[],editType:"calc",description:["Dimension values. `values[n]` represents the category value of the `n`th point in the dataset,","therefore the `values` vector for all dimensions must be the same (longer vectors","will be truncated)."].join(" ")},displayindex:{valType:"integer",editType:"calc",description:["The display index of dimension, from left to right, zero indexed, defaults to dimension","index."].join(" ")},editType:"calc",description:"The dimensions (variables) of the parallel categories diagram.",visible:{valType:"boolean",dflt:!0,editType:"calc",description:"Shows the dimension when set to `true` (the default). Hides the dimension for `false`."}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc",description:["The number of observations represented by each state. Defaults to 1 so that each state represents","one observation"].join(" ")},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0},jP}t(vpe,"requireAttributes$f");var YP,yte;function PBe(){if(yte)return YP;yte=1;var e=Nt.exports,r=Qu.hasColorscale,n=ml,i=vo.defaults,s=mu,o=vpe(),a=fB();function l(f,h,v,c,d){d("line.shape"),d("line.hovertemplate");var g=d("line.color",c.colorway[0]);if(r(f,"line")&&e.isArrayOrTypedArray(g)){if(g.length)return d("line.colorscale"),n(f,h,c,d,{prefix:"line.",cLetter:"c"}),g.length;h.line.color=v}return 1/0}t(l,"handleLineDefaults");function u(f,h){function v(y,T){return e.coerce(f,h,o.dimensions,y,T)}t(v,"coerce");var c=v("values"),d=v("visible");if(c&&c.length||(d=h.visible=!1),d){v("label"),v("displayindex",h._index);var g=f.categoryarray,p=Array.isArray(g)&&g.length>0,b;p&&(b="array");var m=v("categoryorder",b);m==="array"?(v("categoryarray"),v("ticktext")):(delete f.categoryarray,delete f.ticktext),!p&&m==="array"&&(h.categoryorder="trace")}}return t(u,"dimensionDefaults"),YP=t(function(h,v,c,d){function g(T,_){return e.coerce(h,v,o,T,_)}t(g,"coerce");var p=s(h,v,{name:"dimensions",handleItemDefaults:u}),b=l(h,v,c,d,g);i(v,d,g),(!Array.isArray(p)||!p.length)&&(v.visible=!1),a(v,p,"values",b),g("hoveron"),g("hovertemplate"),g("arrangement"),g("bundlecolors"),g("sortpaths"),g("counts");var m={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};e.coerceFont(g,"labelfont",m);var y={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};e.coerceFont(g,"tickfont",y)},"supplyDefaults"),YP}t(PBe,"requireDefaults$f");var WP,mte;function DBe(){if(mte)return WP;mte=1;var e=cd().wrap,r=Qu.hasColorscale,n=Lf,i=Woe,s=bn.exports,o=Nt.exports,a=xn;WP=t(function(y,T){var _=o.filterVisible(T.dimensions);if(_.length===0)return[];var M=_.map(function(ee){var ie;if(ee.categoryorder==="trace")ie=null;else if(ee.categoryorder==="array")ie=ee.categoryarray;else{ie=i(ee.values);for(var se=!0,W=0;W<ie.length;W++)if(!a(ie[W])){se=!1;break}ie.sort(se?o.sorterAsc:void 0),ee.categoryorder==="category descending"&&(ie=ie.reverse())}return d(ee.values,ie)}),w,x,A;o.isArrayOrTypedArray(T.counts)?w=T.counts:w=[T.counts],g(_),_.forEach(function(ee,ie){p(ee,M[ie])});var S=T.line,k;S?(r(T,"line")&&n(y,T,{vals:T.line.color,containerStr:"line",cLetter:"c"}),k=s.tryColorscale(S)):k=o.identity;function L(ee){var ie,se;return o.isArrayOrTypedArray(S.color)?(ie=S.color[ee%S.color.length],se=ie):ie=S.color,{color:k(ie),rawColor:se}}t(L,"getMarkerColorInfo");var P=_[0].values.length,D={},B=M.map(function(ee){return ee.inds});A=0;var z,R;for(z=0;z<P;z++){var F=[];for(R=0;R<B.length;R++)F.push(B[R][z]);x=w[z%w.length],A+=x;var O=L(z),q=F+"-"+O.rawColor;D[q]===void 0&&(D[q]=v(F,O.color,O.rawColor)),c(D[q],z,x)}var H=_.map(function(ee,ie){return u(ie,ee._index,ee._displayindex,ee.label,A)});for(z=0;z<P;z++)for(x=w[z%w.length],R=0;R<H.length;R++){var j=H[R].containerInd,X=M[R].inds[z],G=H[R].categories;if(G[X]===void 0){var $=T.dimensions[j]._categoryarray[X],te=T.dimensions[j]._ticktext[X];G[X]=f(R,X,$,te)}h(G[X],z,x)}return e(l(H,D,A))},"calc");function l(m,y,T){var _=m.map(function(M){return M.categories.length}).reduce(function(M,w){return Math.max(M,w)});return{dimensions:m,paths:y,trace:void 0,maxCats:_,count:T}}t(l,"createParcatsModel");function u(m,y,T,_,M){return{dimensionInd:m,containerInd:y,displayInd:T,dimensionLabel:_,count:M,categories:[],dragX:null}}t(u,"createDimensionModel");function f(m,y,T,_){return{dimensionInd:m,categoryInd:y,categoryValue:T,displayInd:y,categoryLabel:_,valueInds:[],count:0,dragY:null}}t(f,"createCategoryModel");function h(m,y,T){m.valueInds.push(y),m.count+=T}t(h,"updateCategoryModel");function v(m,y,T){return{categoryInds:m,color:y,rawColor:T,valueInds:[],count:0}}t(v,"createPathModel");function c(m,y,T){m.valueInds.push(y),m.count+=T}t(c,"updatePathModel");function d(m,y){y==null?y=[]:y=y.map(function(k){return k});var T={},_={},M=[];y.forEach(function(k,L){T[k]=0,_[k]=L});for(var w=0;w<m.length;w++){var x=m[w],A;T[x]===void 0?(T[x]=1,A=y.push(x)-1,_[x]=A):(T[x]++,A=_[x]),M.push(A)}var S=y.map(function(k){return T[k]});return{uniqueValues:y,uniqueCounts:S,inds:M}}t(d,"getUniqueInfo");function g(m){var y=m.map(function(_){return _.displayindex}),T;if(b(y))for(T=0;T<m.length;T++)m[T]._displayindex=m[T].displayindex;else for(T=0;T<m.length;T++)m[T]._displayindex=T}t(g,"validateDimensionDisplayInds");function p(m,y){m._categoryarray=y.uniqueValues,m.ticktext===null||m.ticktext===void 0?m._ticktext=[]:m._ticktext=m.ticktext.slice();for(var T=m._ticktext.length;T<y.uniqueValues.length;T++)m._ticktext.push(y.uniqueValues[T])}t(p,"validateCategoryProperties");function b(m){for(var y=new Array(m.length),T=0;T<m.length;T++){if(m[T]<0||m[T]>=m.length||y[m[T]]!==void 0)return!1;y[m[T]]=!0}return!0}return t(b,"isRangePermutation"),WP}t(DBe,"requireCalc$d");var XP,xte;function IBe(){if(xte)return XP;xte=1;var e=Va.exports,r=fy.interpolateNumber,n=lw,i=Ko,s=Nt.exports,o=s.strTranslate,a=bn.exports,l=rl.exports,u=Ji;function f(W,ne,he,re){var ae=ne._context.staticPlot,fe=W.map($.bind(0,ne,he)),ce=re.selectAll("g.parcatslayer").data([null]);ce.enter().append("g").attr("class","parcatslayer").style("pointer-events",ae?"none":"all");var xe=ce.selectAll("g.trace.parcats").data(fe,h),Te=xe.enter().append("g").attr("class","trace parcats");xe.attr("transform",function(Je){return o(Je.x,Je.y)}),Te.append("g").attr("class","paths");var me=xe.select("g.paths"),pe=me.selectAll("path.path").data(function(Je){return Je.paths},h);pe.attr("fill",function(Je){return Je.model.color});var oe=pe.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Je){return Je.model.color}).attr("fill-opacity",0);y(oe),pe.attr("d",function(Je){return Je.svgD}),oe.empty()||pe.sort(c),pe.exit().remove(),pe.on("mouseover",d).on("mouseout",g).on("click",m),Te.append("g").attr("class","dimensions");var de=xe.select("g.dimensions"),ye=de.selectAll("g.dimension").data(function(Je){return Je.dimensions},h);ye.enter().append("g").attr("class","dimension"),ye.attr("transform",function(Je){return o(Je.x,0)}),ye.exit().remove();var we=ye.selectAll("g.category").data(function(Je){return Je.categories},h),Ee=we.enter().append("g").attr("class","category");we.attr("transform",function(Je){return o(0,Je.y)}),Ee.append("rect").attr("class","catrect").attr("pointer-events","none"),we.select("rect.catrect").attr("fill","none").attr("width",function(Je){return Je.width}).attr("height",function(Je){return Je.height}),M(Ee);var De=we.selectAll("rect.bandrect").data(function(Je){return Je.bands},h);De.each(function(){s.raiseToTop(this)}),De.attr("fill",function(Je){return Je.color});var Fe=De.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Je){return Je.color}).attr("fill-opacity",0);De.attr("fill",function(Je){return Je.color}).attr("width",function(Je){return Je.width}).attr("height",function(Je){return Je.height}).attr("y",function(Je){return Je.y}).attr("cursor",function(Je){return Je.parcatsViewModel.arrangement==="fixed"?"default":Je.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),x(Fe),De.exit().remove(),Ee.append("text").attr("class","catlabel").attr("pointer-events","none");var qe=ne._fullLayout.paper_bgcolor;we.select("text.catlabel").attr("text-anchor",function(Je){return v(Je)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",u.makeTextShadow(qe)).style("fill","rgb(0, 0, 0)").attr("x",function(Je){return v(Je)?Je.width+5:-5}).attr("y",function(Je){return Je.height/2}).text(function(Je){return Je.model.categoryLabel}).each(function(Je){a.font(e.select(this),Je.parcatsViewModel.categorylabelfont),u.convertToTspans(e.select(this),ne)}),Ee.append("text").attr("class","dimlabel"),we.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Je){return Je.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Je){return Je.width/2}).attr("y",-5).text(function(Je,Ge){return Ge===0?Je.parcatsViewModel.model.dimensions[Je.model.dimensionInd].dimensionLabel:null}).each(function(Je){a.font(e.select(this),Je.parcatsViewModel.labelfont)}),we.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",F),we.exit().remove(),ye.call(e.behavior.drag().origin(function(Je){return{x:Je.x,y:0}}).on("dragstart",O).on("drag",q).on("dragend",H)),xe.each(function(Je){Je.traceSelection=e.select(this),Je.pathSelection=e.select(this).selectAll("g.paths").selectAll("path.path"),Je.dimensionSelection=e.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),xe.exit().remove()}t(f,"performPlot"),XP=t(function(W,ne,he,re){f(he,W,re,ne)},"parcats$1");function h(W){return W.key}t(h,"key");function v(W){var ne=W.parcatsViewModel.dimensions.length,he=W.parcatsViewModel.dimensions[ne-1].model.dimensionInd;return W.model.dimensionInd===he}t(v,"catInRightDim");function c(W,ne){return W.model.rawColor>ne.model.rawColor?1:W.model.rawColor<ne.model.rawColor?-1:0}t(c,"compareRawColor");function d(W){if(!W.parcatsViewModel.dragDimension&&W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){s.raiseToTop(this),T(e.select(this));var ne=p(W),he=b(W);if(W.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ne,event:e.event,constraints:he}),W.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var re=e.mouse(this)[0],ae=W.parcatsViewModel.graphDiv,fe=W.parcatsViewModel.trace,ce=ae._fullLayout,xe=ce._paperdiv.node().getBoundingClientRect(),Te=W.parcatsViewModel.graphDiv.getBoundingClientRect(),me,pe,oe;for(oe=0;oe<W.leftXs.length-1;oe++)if(W.leftXs[oe]+W.dimWidths[oe]-2<=re&&re<=W.leftXs[oe+1]+2){var de=W.parcatsViewModel.dimensions[oe],ye=W.parcatsViewModel.dimensions[oe+1];me=(de.x+de.width+ye.x)/2,pe=(W.topYs[oe]+W.topYs[oe+1]+W.height)/2;break}var we=W.parcatsViewModel.x+me,Ee=W.parcatsViewModel.y+pe,De=l.mostReadable(W.model.color,["black","white"]),Fe=W.model.count,qe=Fe/W.parcatsViewModel.model.count,Je={countLabel:Fe,probabilityLabel:qe.toFixed(3)},Ge=[];W.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ge.push(["Count:",Je.countLabel].join(" ")),W.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ge.push(["P:",Je.probabilityLabel].join(" "));var et=Ge.join("<br>"),Ue=e.mouse(ae)[0];i.loneHover({trace:fe,x:we-xe.left+Te.left,y:Ee-xe.top+Te.top,text:et,color:W.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:De,idealAlign:Ue<we?"right":"left",hovertemplate:(fe.line||{}).hovertemplate,hovertemplateLabels:Je,eventData:[{data:fe._input,fullData:fe,count:Fe,probability:qe}]},{container:ce._hoverlayer.node(),outerContainer:ce._paper.node(),gd:ae})}}}t(d,"mouseoverPath");function g(W){if(!W.parcatsViewModel.dragDimension&&(y(e.select(this)),i.loneUnhover(W.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),W.parcatsViewModel.pathSelection.sort(c),W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ne=p(W),he=b(W);W.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ne,event:e.event,constraints:he})}}t(g,"mouseoutPath");function p(W){for(var ne=[],he=j(W.parcatsViewModel),re=0;re<W.model.valueInds.length;re++){var ae=W.model.valueInds[re];ne.push({curveNumber:he,pointNumber:ae})}return ne}t(p,"buildPointsArrayForPath");function b(W){for(var ne={},he=W.parcatsViewModel.model.dimensions,re=0;re<he.length;re++){var ae=he[re],fe=ae.categories[W.model.categoryInds[re]];ne[ae.containerInd]=fe.categoryValue}return W.model.rawColor!==void 0&&(ne.color=W.model.rawColor),ne}t(b,"buildConstraintsForPath");function m(W){if(W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ne=p(W),he=b(W);W.parcatsViewModel.graphDiv.emit("plotly_click",{points:ne,event:e.event,constraints:he})}}t(m,"clickPath");function y(W){W.attr("fill",function(ne){return ne.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}t(y,"stylePathsNoHover");function T(W){W.attr("fill-opacity",.8).attr("stroke",function(ne){return l.mostReadable(ne.model.color,["black","white"])}).attr("stroke-width",.3)}t(T,"stylePathsHover");function _(W){W.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}t(_,"styleCategoryHover");function M(W){W.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}t(M,"styleCategoriesNoHover");function w(W){W.attr("stroke","black").attr("stroke-width",1.5)}t(w,"styleBandsHover");function x(W){W.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}t(x,"styleBandsNoHover");function A(W){var ne=W.parcatsViewModel.pathSelection,he=W.categoryViewModel.model.dimensionInd,re=W.categoryViewModel.model.categoryInd;return ne.filter(function(ae){return ae.model.categoryInds[he]===re&&ae.model.color===W.color})}t(A,"selectPathsThroughCategoryBandColor");function S(W){var ne=e.select(W.parentNode).selectAll("rect.bandrect");ne.each(function(he){var re=A(he);T(re),re.each(function(){s.raiseToTop(this)})}),_(e.select(W.parentNode))}t(S,"styleForCategoryHovermode");function k(W){var ne=e.select(W).datum(),he=A(ne);T(he),he.each(function(){s.raiseToTop(this)}),e.select(W.parentNode).selectAll("rect.bandrect").filter(function(re){return re.color===ne.color}).each(function(){s.raiseToTop(this),w(e.select(this))})}t(k,"styleForColorHovermode");function L(W,ne,he){var re=e.select(W).datum(),ae=re.categoryViewModel.model,fe=re.parcatsViewModel.graphDiv,ce=e.select(W.parentNode).selectAll("rect.bandrect"),xe=[];ce.each(function(me){var pe=A(me);pe.each(function(oe){Array.prototype.push.apply(xe,p(oe))})});var Te={};Te[ae.dimensionInd]=ae.categoryValue,fe.emit(ne,{points:xe,event:he,constraints:Te})}t(L,"emitPointsEventCategoryHovermode");function P(W,ne,he){var re=e.select(W).datum(),ae=re.categoryViewModel.model,fe=re.parcatsViewModel.graphDiv,ce=A(re),xe=[];ce.each(function(me){Array.prototype.push.apply(xe,p(me))});var Te={};Te[ae.dimensionInd]=ae.categoryValue,re.rawColor!==void 0&&(Te.color=re.rawColor),fe.emit(ne,{points:xe,event:he,constraints:Te})}t(P,"emitPointsEventColorHovermode");function D(W,ne,he){W._fullLayout._calcInverseTransform(W);var re=W._fullLayout._invScaleX,ae=W._fullLayout._invScaleY,fe=e.select(he.parentNode).select("rect.catrect"),ce=fe.node().getBoundingClientRect(),xe=fe.datum(),Te=xe.parcatsViewModel,me=Te.model.dimensions[xe.model.dimensionInd],pe=Te.trace,oe=ce.top+ce.height/2,de,ye;Te.dimensions.length>1&&me.displayInd===Te.dimensions.length-1?(de=ce.left,ye="left"):(de=ce.left+ce.width,ye="right");var we=xe.model.count,Ee=xe.model.categoryLabel,De=we/xe.parcatsViewModel.model.count,Fe={countLabel:we,categoryLabel:Ee,probabilityLabel:De.toFixed(3)},qe=[];xe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&qe.push(["Count:",Fe.countLabel].join(" ")),xe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&qe.push(["P("+Fe.categoryLabel+"):",Fe.probabilityLabel].join(" "));var Je=qe.join("<br>");return{trace:pe,x:re*(de-ne.left),y:ae*(oe-ne.top),text:Je,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ye,hovertemplate:pe.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:pe._input,fullData:pe,count:we,category:Ee,probability:De}]}}t(D,"createHoverLabelForCategoryHovermode");function B(W,ne,he){var re=[];return e.select(he.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var ae=this;re.push(D(W,ne,ae))}),re}t(B,"createHoverLabelForDimensionHovermode");function z(W,ne,he){W._fullLayout._calcInverseTransform(W);var re=W._fullLayout._invScaleX,ae=W._fullLayout._invScaleY,fe=he.getBoundingClientRect(),ce=e.select(he).datum(),xe=ce.categoryViewModel,Te=xe.parcatsViewModel,me=Te.model.dimensions[xe.model.dimensionInd],pe=Te.trace,oe=fe.y+fe.height/2,de,ye;Te.dimensions.length>1&&me.displayInd===Te.dimensions.length-1?(de=fe.left,ye="left"):(de=fe.left+fe.width,ye="right");var we=xe.model.categoryLabel,Ee=ce.parcatsViewModel.model.count,De=0;ce.categoryViewModel.bands.forEach(function(It){It.color===ce.color&&(De+=It.count)});var Fe=xe.model.count,qe=0;Te.pathSelection.each(function(It){It.model.color===ce.color&&(qe+=It.model.count)});var Je=De/Ee,Ge=De/qe,et=De/Fe,Ue={countLabel:Ee,categoryLabel:we,probabilityLabel:Je.toFixed(3)},Ye=[];xe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ye.push(["Count:",Ue.countLabel].join(" ")),xe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ye.push("P(color \u2229 "+we+"): "+Ue.probabilityLabel),Ye.push("P("+we+" | color): "+Ge.toFixed(3)),Ye.push("P(color | "+we+"): "+et.toFixed(3)));var $e=Ye.join("<br>"),Ct=l.mostReadable(ce.color,["black","white"]);return{trace:pe,x:re*(de-ne.left),y:ae*(oe-ne.top),text:$e,color:ce.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ct,fontSize:10,idealAlign:ye,hovertemplate:pe.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:pe._input,fullData:pe,category:we,count:Ee,probability:Je,categorycount:Fe,colorcount:qe,bandcolorcount:De}]}}t(z,"createHoverLabelForColorHovermode");function R(W){if(!W.parcatsViewModel.dragDimension&&W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ne=e.mouse(this)[1];if(ne<-1)return;var he=W.parcatsViewModel.graphDiv,re=he._fullLayout,ae=re._paperdiv.node().getBoundingClientRect(),fe=W.parcatsViewModel.hoveron,ce=this;if(fe==="color"?(k(ce),P(ce,"plotly_hover",e.event)):(S(ce),L(ce,"plotly_hover",e.event)),W.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var xe;fe==="category"?xe=D(he,ae,ce):fe==="color"?xe=z(he,ae,ce):fe==="dimension"&&(xe=B(he,ae,ce)),xe&&i.loneHover(xe,{container:re._hoverlayer.node(),outerContainer:re._paper.node(),gd:he})}}}t(R,"mouseoverCategoryBand");function F(W){var ne=W.parcatsViewModel;if(!ne.dragDimension&&(y(ne.pathSelection),M(ne.dimensionSelection.selectAll("g.category")),x(ne.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),i.loneUnhover(ne.graphDiv._fullLayout._hoverlayer.node()),ne.pathSelection.sort(c),ne.hoverinfoItems.indexOf("skip")===-1)){var he=W.parcatsViewModel.hoveron,re=this;he==="color"?P(re,"plotly_unhover",e.event):L(re,"plotly_unhover",e.event)}}t(F,"mouseoutCategory");function O(W){W.parcatsViewModel.arrangement!=="fixed"&&(W.dragDimensionDisplayInd=W.model.displayInd,W.initialDragDimensionDisplayInds=W.parcatsViewModel.model.dimensions.map(function(ne){return ne.displayInd}),W.dragHasMoved=!1,W.dragCategoryDisplayInd=null,e.select(this).selectAll("g.category").select("rect.catrect").each(function(ne){var he=e.mouse(this)[0],re=e.mouse(this)[1];-2<=he&&he<=ne.width+2&&-2<=re&&re<=ne.height+2&&(W.dragCategoryDisplayInd=ne.model.displayInd,W.initialDragCategoryDisplayInds=W.model.categories.map(function(ae){return ae.displayInd}),ne.model.dragY=ne.y,s.raiseToTop(this.parentNode),e.select(this.parentNode).selectAll("rect.bandrect").each(function(ae){ae.y<re&&re<=ae.y+ae.height&&(W.potentialClickBand=this)}))}),W.parcatsViewModel.dragDimension=W,i.loneUnhover(W.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}t(O,"dragDimensionStart");function q(W){if(W.parcatsViewModel.arrangement!=="fixed"&&(W.dragHasMoved=!0,W.dragDimensionDisplayInd!==null)){var ne=W.dragDimensionDisplayInd,he=ne-1,re=ne+1,ae=W.parcatsViewModel.dimensions[ne];if(W.dragCategoryDisplayInd!==null){var fe=ae.categories[W.dragCategoryDisplayInd];fe.model.dragY+=e.event.dy;var ce=fe.model.dragY,xe=fe.model.displayInd,Te=ae.categories,me=Te[xe-1],pe=Te[xe+1];me!==void 0&&ce<me.y+me.height/2&&(fe.model.displayInd=me.model.displayInd,me.model.displayInd=xe),pe!==void 0&&ce+fe.height>pe.y+pe.height/2&&(fe.model.displayInd=pe.model.displayInd,pe.model.displayInd=xe),W.dragCategoryDisplayInd=fe.model.displayInd}if(W.dragCategoryDisplayInd===null||W.parcatsViewModel.arrangement==="freeform"){ae.model.dragX=e.event.x;var oe=W.parcatsViewModel.dimensions[he],de=W.parcatsViewModel.dimensions[re];oe!==void 0&&ae.model.dragX<oe.x+oe.width&&(ae.model.displayInd=oe.model.displayInd,oe.model.displayInd=ne),de!==void 0&&ae.model.dragX+ae.width>de.x&&(ae.model.displayInd=de.model.displayInd,de.model.displayInd=W.dragDimensionDisplayInd),W.dragDimensionDisplayInd=ae.model.displayInd}ie(W.parcatsViewModel),ee(W.parcatsViewModel),G(W.parcatsViewModel),X(W.parcatsViewModel)}}t(q,"dragDimension");function H(W){if(W.parcatsViewModel.arrangement!=="fixed"&&W.dragDimensionDisplayInd!==null){e.select(this).selectAll("text").attr("font-weight","normal");var ne={},he=j(W.parcatsViewModel),re=W.parcatsViewModel.model.dimensions.map(function(de){return de.displayInd}),ae=W.initialDragDimensionDisplayInds.some(function(de,ye){return de!==re[ye]});ae&&re.forEach(function(de,ye){var we=W.parcatsViewModel.model.dimensions[ye].containerInd;ne["dimensions["+we+"].displayindex"]=de});var fe=!1;if(W.dragCategoryDisplayInd!==null){var ce=W.model.categories.map(function(de){return de.displayInd});if(fe=W.initialDragCategoryDisplayInds.some(function(de,ye){return de!==ce[ye]}),fe){var xe=W.model.categories.slice().sort(function(de,ye){return de.displayInd-ye.displayInd}),Te=xe.map(function(de){return de.categoryValue}),me=xe.map(function(de){return de.categoryLabel});ne["dimensions["+W.model.containerInd+"].categoryarray"]=[Te],ne["dimensions["+W.model.containerInd+"].ticktext"]=[me],ne["dimensions["+W.model.containerInd+"].categoryorder"]="array"}}if(W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!W.dragHasMoved&&W.potentialClickBand&&(W.parcatsViewModel.hoveron==="color"?P(W.potentialClickBand,"plotly_click",e.event.sourceEvent):L(W.potentialClickBand,"plotly_click",e.event.sourceEvent)),W.model.dragX=null,W.dragCategoryDisplayInd!==null){var pe=W.parcatsViewModel.dimensions[W.dragDimensionDisplayInd].categories[W.dragCategoryDisplayInd];pe.model.dragY=null,W.dragCategoryDisplayInd=null}W.dragDimensionDisplayInd=null,W.parcatsViewModel.dragDimension=null,W.dragHasMoved=null,W.potentialClickBand=null,ie(W.parcatsViewModel),ee(W.parcatsViewModel);var oe=e.transition().duration(300).ease("cubic-in-out");oe.each(function(){G(W.parcatsViewModel,!0),X(W.parcatsViewModel,!0)}).each("end",function(){(ae||fe)&&n.restyle(W.parcatsViewModel.graphDiv,ne,[he])})}}t(H,"dragDimensionEnd");function j(W){for(var ne,he=W.graphDiv._fullData,re=0;re<he.length;re++)if(W.key===he[re].uid){ne=re;break}return ne}t(j,"getTraceIndex");function X(W,ne){ne===void 0&&(ne=!1);function he(re){return ne?re.transition():re}t(he,"transition"),W.pathSelection.data(function(re){return re.paths},h),he(W.pathSelection).attr("d",function(re){return re.svgD})}t(X,"updateSvgPaths");function G(W,ne){ne===void 0&&(ne=!1);function he(Te){return ne?Te.transition():Te}t(he,"transition"),W.dimensionSelection.data(function(Te){return Te.dimensions},h);var re=W.dimensionSelection.selectAll("g.category").data(function(Te){return Te.categories},h);he(W.dimensionSelection).attr("transform",function(Te){return o(Te.x,0)}),he(re).attr("transform",function(Te){return o(0,Te.y)});var ae=re.select(".dimlabel");ae.text(function(Te,me){return me===0?Te.parcatsViewModel.model.dimensions[Te.model.dimensionInd].dimensionLabel:null});var fe=re.select(".catlabel");fe.attr("text-anchor",function(Te){return v(Te)?"start":"end"}).attr("x",function(Te){return v(Te)?Te.width+5:-5}).each(function(Te){var me,pe;v(Te)?(me=Te.width+5,pe="start"):(me=-5,pe="end"),e.select(this).selectAll("tspan").attr("x",me).attr("text-anchor",pe)});var ce=re.selectAll("rect.bandrect").data(function(Te){return Te.bands},h),xe=ce.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(Te){return Te.color}).attr("fill-opacity",0);ce.attr("fill",function(Te){return Te.color}).attr("width",function(Te){return Te.width}).attr("height",function(Te){return Te.height}).attr("y",function(Te){return Te.y}),x(xe),ce.each(function(){s.raiseToTop(this)}),ce.exit().remove()}t(G,"updateSvgCategories");function $(W,ne,he){var re=he[0],ae=ne.margin||{l:80,r:80,t:100,b:80},fe=re.trace,ce=fe.domain,xe=ne.width,Te=ne.height,me=Math.floor(xe*(ce.x[1]-ce.x[0])),pe=Math.floor(Te*(ce.y[1]-ce.y[0])),oe=ce.x[0]*xe+ae.l,de=ne.height-ce.y[1]*ne.height+ae.t,ye=fe.line.shape,we;fe.hoverinfo==="all"?we=["count","probability"]:we=(fe.hoverinfo||"").split("+");var Ee={trace:fe,key:fe.uid,model:re,x:oe,y:de,width:me,height:pe,hoveron:fe.hoveron,hoverinfoItems:we,arrangement:fe.arrangement,bundlecolors:fe.bundlecolors,sortpaths:fe.sortpaths,labelfont:fe.labelfont,categorylabelfont:fe.tickfont,pathShape:ye,dragDimension:null,margin:ae,paths:[],dimensions:[],graphDiv:W,traceSelection:null,pathSelection:null,dimensionSelection:null};return re.dimensions&&(ie(Ee),ee(Ee)),Ee}t($,"createParcatsViewModel");function te(W,ne,he,re,ae){var fe=[],ce=[],xe,Te;for(Te=0;Te<he.length-1;Te++)xe=r(he[Te]+W[Te],W[Te+1]),fe.push(xe(ae)),ce.push(xe(1-ae));var me="M "+W[0]+","+ne[0];for(me+="l"+he[0]+",0 ",Te=1;Te<he.length;Te++)me+="C"+fe[Te-1]+","+ne[Te-1]+" "+ce[Te-1]+","+ne[Te]+" "+W[Te]+","+ne[Te],me+="l"+he[Te]+",0 ";for(me+="l0,"+re+" ",me+="l -"+he[he.length-1]+",0 ",Te=he.length-2;Te>=0;Te--)me+="C"+ce[Te]+","+(ne[Te+1]+re)+" "+fe[Te]+","+(ne[Te]+re)+" "+(W[Te]+he[Te])+","+(ne[Te]+re),me+="l-"+he[Te]+",0 ";return me+="Z",me}t(te,"buildSvgPath");function ee(W){var ne=W.dimensions,he=W.model,re=ne.map(function(Gt){return Gt.categories.map(function(Jt){return Jt.y})}),ae=W.model.dimensions.map(function(Gt){return Gt.categories.map(function(Jt){return Jt.displayInd})}),fe=W.model.dimensions.map(function(Gt){return Gt.displayInd}),ce=W.dimensions.map(function(Gt){return Gt.model.dimensionInd}),xe=ne.map(function(Gt){return Gt.x}),Te=ne.map(function(Gt){return Gt.width}),me=[];for(var pe in he.paths)he.paths.hasOwnProperty(pe)&&me.push(he.paths[pe]);function oe(Gt){var Jt=Gt.categoryInds.map(function(ft,zt){return ae[zt][ft]}),kt=ce.map(function(ft){return Jt[ft]});return kt}t(oe,"pathDisplayCategoryInds"),me.sort(function(Gt,Jt){var kt=oe(Gt),ft=oe(Jt);return W.sortpaths==="backward"&&(kt.reverse(),ft.reverse()),kt.push(Gt.valueInds[0]),ft.push(Jt.valueInds[0]),W.bundlecolors&&(kt.unshift(Gt.rawColor),ft.unshift(Jt.rawColor)),kt<ft?-1:kt>ft?1:0});for(var de=new Array(me.length),ye=ne[0].model.count,we=ne[0].categories.map(function(Gt){return Gt.height}).reduce(function(Gt,Jt){return Gt+Jt}),Ee=0;Ee<me.length;Ee++){var De=me[Ee],Fe;ye>0?Fe=we*(De.count/ye):Fe=0;for(var qe=new Array(re.length),Je=0;Je<De.categoryInds.length;Je++){var Ge=De.categoryInds[Je],et=ae[Je][Ge],Ue=fe[Je];qe[Ue]=re[Ue][et],re[Ue][et]+=Fe;var Ye=W.dimensions[Ue].categories[et],$e=Ye.bands.length,Ct=Ye.bands[$e-1];if(Ct===void 0||De.rawColor!==Ct.rawColor){var It=Ct===void 0?0:Ct.y+Ct.height;Ye.bands.push({key:It,color:De.color,rawColor:De.rawColor,height:Fe,width:Ye.width,count:De.count,y:It,categoryViewModel:Ye,parcatsViewModel:W})}else{var Vt=Ye.bands[$e-1];Vt.height+=Fe,Vt.count+=De.count}}var $t;W.pathShape==="hspline"?$t=te(xe,qe,Te,Fe,.5):$t=te(xe,qe,Te,Fe,0),de[Ee]={key:De.valueInds[0],model:De,height:Fe,leftXs:xe,topYs:qe,dimWidths:Te,svgD:$t,parcatsViewModel:W}}W.paths=de}t(ee,"updatePathViewModels");function ie(W){var ne=W.model.dimensions.map(function(ce){return{displayInd:ce.displayInd,dimensionInd:ce.dimensionInd}});ne.sort(function(ce,xe){return ce.displayInd-xe.displayInd});var he=[];for(var re in ne){var ae=ne[re].dimensionInd,fe=W.model.dimensions[ae];he.push(se(W,fe))}W.dimensions=he}t(ie,"updateDimensionViewModels");function se(W,ne){var he=40,re=16,ae=W.model.dimensions.length,fe=ne.displayInd,ce,xe,Te;ae>1?ce=(W.width-2*he-re)/(ae-1):ce=0,xe=he,Te=xe+ce*fe;var me=[],pe=W.model.maxCats,oe=ne.categories.length,de=8,ye=ne.count,we=W.height-de*(pe-1),Ee,De,Fe,qe,Je,Ge=(pe-oe)*de/2,et=ne.categories.map(function(Ue){return{displayInd:Ue.displayInd,categoryInd:Ue.categoryInd}});for(et.sort(function(Ue,Ye){return Ue.displayInd-Ye.displayInd}),Je=0;Je<oe;Je++)qe=et[Je].categoryInd,De=ne.categories[qe],ye>0?Ee=De.count/ye*we:Ee=0,Fe={key:De.valueInds[0],model:De,width:re,height:Ee,y:De.dragY!==null?De.dragY:Ge,bands:[],parcatsViewModel:W},Ge=Ge+Ee+de,me.push(Fe);return{key:ne.dimensionInd,x:ne.dragX!==null?ne.dragX:Te,y:0,width:re,model:ne,categories:me,parcatsViewModel:W,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}return t(se,"createDimensionViewModel"),XP}t(IBe,"requireParcats$2");var ZP,bte;function dpe(){if(bte)return ZP;bte=1;var e=IBe();return ZP=t(function(n,i,s,o){var a=n._fullLayout,l=a._paper,u=a._size;e(n,l,i,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},s,o)},"plot"),ZP}t(dpe,"requirePlot$e");var Vm={},_te;function zBe(){if(_te)return Vm;_te=1;var e=Ns.getModuleCalcData,r=dpe(),n="parcats";return Vm.name=n,Vm.plot=function(i,s,o,a){var l=e(i.calcdata,n);if(l.length){var u=l[0];r(i,u,o,a)}},Vm.clean=function(i,s,o,a){var l=a._has&&a._has("parcats"),u=s._has&&s._has("parcats");l&&!u&&a._paperdiv.selectAll(".parcats").remove()},Vm}t(zBe,"requireBase_plot$3");var KP,wte;function FBe(){return wte||(wte=1,KP={attributes:vpe(),supplyDefaults:PBe(),calc:DBe(),plot:dpe(),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:zBe(),categories:["noOpacity"],meta:{description:["Parallel categories diagram for multidimensional categorical data."].join(" ")}}),KP}t(FBe,"requireParcats$1");var Tte;function BBe(){return Tte||(Tte=1,function(e){e.exports=FBe()}(GP)),GP.exports}t(BBe,"requireParcats");var JP={exports:{}},QP={exports:{}},eD,Ate;function Ap(){if(Ate)return eD;Ate=1;var e=Ay,r="1.10.1",n='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',i=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',n].join(" "),s=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),o=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:n,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:i,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:i,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:s,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:s,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:o,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},l=e(a);return eD={requiredVersion:r,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:l,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+r+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",l.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}},eD}t(Ap,"requireConstants$6");var Ste;function H2(){if(Ste)return QP.exports;Ste=1;var e=Nt.exports,r=$a.exports.defaultLine,n=vo.attributes,i=Ho,s=Ps.textposition,o=_o.overrideAll,a=ei.templatedArray,l=Ap(),u=i({description:["Sets the icon text font (color=mapbox.layer.paint.text-color, size=mapbox.layer.layout.text-size).","Has an effect only when `type` is set to *symbol*."].join(" ")});u.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var f=QP.exports=o({_arrayAttrRegexps:[e.counterRegex("mapbox",".layers",!0)],domain:n({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0,description:["Sets the mapbox access token to be used for this mapbox map.","Alternatively, the mapbox access token can be set in the","configuration options under `mapboxAccessToken`.","Note that accessToken are only required when `style`","(e.g with values :",l.styleValuesMapbox.join(", "),")","and/or a layout layer references the Mapbox server."].join(" ")},style:{valType:"any",values:l.styleValuesMapbox.concat(l.styleValuesNonMapbox),dflt:l.styleValueDflt,description:["Defines the map layers that are rendered by default below the trace layers defined in `data`,","which are themselves by default rendered below the layers defined in `layout.mapbox.layers`.","","These layers can be defined either explicitly as a Mapbox Style object which can contain multiple","layer definitions that load data from any public or private Tile Map Service (TMS or XYZ) or Web Map Service (WMS)","or implicitly by using one of the built-in style objects which use WMSes which do not require any","access tokens, or by using a default Mapbox style or custom Mapbox style URL, both of","which require a Mapbox access token","","Note that Mapbox access token can be set in the `accesstoken` attribute","or in the `mapboxAccessToken` config option.","","Mapbox Style objects are of the form described in the Mapbox GL JS documentation available at","https://docs.mapbox.com/mapbox-gl-js/style-spec","","The built-in plotly.js styles objects are:",l.styleValuesNonMapbox.join(", "),"","The built-in Mapbox styles are:",l.styleValuesMapbox.join(", "),"","Mapbox style URLs are of the form: mapbox://mapbox.mapbox-<name>-<version>"].join(" ")},center:{lon:{valType:"number",dflt:0,description:"Sets the longitude of the center of the map (in degrees East)."},lat:{valType:"number",dflt:0,description:"Sets the latitude of the center of the map (in degrees North)."}},zoom:{valType:"number",dflt:1,description:"Sets the zoom level of the map (mapbox.zoom)."},bearing:{valType:"number",dflt:0,description:"Sets the bearing angle of the map in degrees counter-clockwise from North (mapbox.bearing)."},pitch:{valType:"number",dflt:0,description:["Sets the pitch angle of the map","(in degrees, where *0* means perpendicular to the surface of the map) (mapbox.pitch)."].join(" ")},bounds:{west:{valType:"number",description:["Sets the minimum longitude of the map (in degrees East)","if `east`, `south` and `north` are declared."].join(" ")},east:{valType:"number",description:["Sets the maximum longitude of the map (in degrees East)","if `west`, `south` and `north` are declared."].join(" ")},south:{valType:"number",description:["Sets the minimum latitude of the map (in degrees North)","if `east`, `west` and `north` are declared."].join(" ")},north:{valType:"number",description:["Sets the maximum latitude of the map (in degrees North)","if `east`, `west` and `south` are declared."].join(" ")}},layers:a("layer",{visible:{valType:"boolean",dflt:!0,description:["Determines whether this layer is displayed"].join(" ")},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson",description:["Sets the source type for this layer,","that is the type of the layer data."].join(" ")},source:{valType:"any",description:["Sets the source data for this layer (mapbox.layer.source).","When `sourcetype` is set to *geojson*, `source` can be a URL to a GeoJSON","or a GeoJSON object.","When `sourcetype` is set to *vector* or *raster*, `source` can be a URL or","an array of tile URLs.","When `sourcetype` is set to *image*, `source` can be a URL to an image."].join(" ")},sourcelayer:{valType:"string",dflt:"",description:["Specifies the layer to use from a vector tile source (mapbox.layer.source-layer).","Required for *vector* source type that supports multiple layers."].join(" ")},sourceattribution:{valType:"string",description:["Sets the attribution for this source."].join(" ")},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle",description:["Sets the layer type,","that is the how the layer data set in `source` will be rendered","With `sourcetype` set to *geojson*, the following values are allowed:","*circle*, *line*, *fill* and *symbol*.","but note that *line* and *fill* are not compatible with Point","GeoJSON geometries.","With `sourcetype` set to *vector*, the following values are allowed:"," *circle*, *line*, *fill* and *symbol*.","With `sourcetype` set to *raster* or `*image*`, only the *raster* value is allowed."].join(" ")},coordinates:{valType:"any",description:["Sets the coordinates array contains [longitude, latitude] pairs","for the image corners listed in clockwise order:","top left, top right, bottom right, bottom left.","Only has an effect for *image* `sourcetype`."].join(" ")},below:{valType:"string",description:["Determines if the layer will be inserted","before the layer with the specified ID.","If omitted or set to '',","the layer will be inserted above every existing layer."].join(" ")},color:{valType:"color",dflt:r,description:["Sets the primary layer color.","If `type` is *circle*, color corresponds to the circle color (mapbox.layer.paint.circle-color)","If `type` is *line*, color corresponds to the line color (mapbox.layer.paint.line-color)","If `type` is *fill*, color corresponds to the fill color (mapbox.layer.paint.fill-color)","If `type` is *symbol*, color corresponds to the icon color (mapbox.layer.paint.icon-color)"].join(" ")},opacity:{valType:"number",min:0,max:1,dflt:1,description:["Sets the opacity of the layer.","If `type` is *circle*, opacity corresponds to the circle opacity (mapbox.layer.paint.circle-opacity)","If `type` is *line*, opacity corresponds to the line opacity (mapbox.layer.paint.line-opacity)","If `type` is *fill*, opacity corresponds to the fill opacity (mapbox.layer.paint.fill-opacity)","If `type` is *symbol*, opacity corresponds to the icon/text opacity (mapbox.layer.paint.text-opacity)"].join(" ")},minzoom:{valType:"number",min:0,max:24,dflt:0,description:["Sets the minimum zoom level (mapbox.layer.minzoom).","At zoom levels less than the minzoom, the layer will be hidden."].join(" ")},maxzoom:{valType:"number",min:0,max:24,dflt:24,description:["Sets the maximum zoom level (mapbox.layer.maxzoom).","At zoom levels equal to or greater than the maxzoom, the layer will be hidden."].join(" ")},circle:{radius:{valType:"number",dflt:15,description:["Sets the circle radius (mapbox.layer.paint.circle-radius).","Has an effect only when `type` is set to *circle*."].join(" ")}},line:{width:{valType:"number",dflt:2,description:["Sets the line width (mapbox.layer.paint.line-width).","Has an effect only when `type` is set to *line*."].join(" ")},dash:{valType:"data_array",description:["Sets the length of dashes and gaps (mapbox.layer.paint.line-dasharray).","Has an effect only when `type` is set to *line*."].join(" ")}},fill:{outlinecolor:{valType:"color",dflt:r,description:["Sets the fill outline color (mapbox.layer.paint.fill-outline-color).","Has an effect only when `type` is set to *fill*."].join(" ")}},symbol:{icon:{valType:"string",dflt:"marker",description:["Sets the symbol icon image (mapbox.layer.layout.icon-image).","Full list: https://www.mapbox.com/maki-icons/"].join(" ")},iconsize:{valType:"number",dflt:10,description:["Sets the symbol icon size (mapbox.layer.layout.icon-size).","Has an effect only when `type` is set to *symbol*."].join(" ")},text:{valType:"string",dflt:"",description:["Sets the symbol text (mapbox.layer.layout.text-field)."].join(" ")},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point",description:["Sets the symbol and/or text placement (mapbox.layer.layout.symbol-placement).","If `placement` is *point*, the label is placed where the geometry is located","If `placement` is *line*, the label is placed along the line of the geometry","If `placement` is *line-center*, the label is placed on the center of the geometry"].join(" ")},textfont:u,textposition:e.extendFlat({},s,{arrayOk:!1})}})},"plot","from-root");return f.uirevision={valType:"any",editType:"none",description:["Controls persistence of user-driven changes in the view:","`center`, `zoom`, `bearing`, `pitch`. Defaults to `layout.uirevision`."].join(" ")},QP.exports}t(H2,"requireLayout_attributes$3");var tD,Mte;function cB(){if(Mte)return tD;Mte=1;var e=Un.hovertemplateAttrs,r=Un.texttemplateAttrs,n=_x(),i=Ps,s=H2(),o=Ni,a=Qi,l=cn.extendFlat,u=_o.overrideAll,f=H2(),h=n.line,v=n.marker;return tD=u({lon:n.lon,lat:n.lat,cluster:{enabled:{valType:"boolean",description:"Determines whether clustering is enabled or disabled."},maxzoom:l({},f.layers.maxzoom,{description:["Sets the maximum zoom level.","At zoom levels equal to or greater than this, points will never be clustered."].join(" ")}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1,description:["Sets how many points it takes to create a cluster or advance to the next cluster step.","Use this in conjunction with arrays for `size` and / or `color`.","If an integer, steps start at multiples of this number.","If an array, each step extends from the given value until one less than the next value."].join(" ")},size:{valType:"number",arrayOk:!0,dflt:20,min:0,description:["Sets the size for each cluster step."].join(" ")},color:{valType:"color",arrayOk:!0,description:["Sets the color for each cluster step."].join(" ")},opacity:l({},v.opacity,{dflt:1})},mode:l({},i.mode,{dflt:"markers",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover."].join(" ")}),text:l({},i.text,{description:["Sets text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:r({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:l({},i.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:h.color,width:h.width},connectgaps:i.connectgaps,marker:l({symbol:{valType:"string",dflt:"circle",arrayOk:!0,description:["Sets the marker symbol.","Full list: https://www.mapbox.com/maki-icons/","Note that the array `marker.color` and `marker.size`","are only available for *circle* symbols."].join(" ")},angle:{valType:"number",dflt:"auto",arrayOk:!0,description:["Sets the marker orientation from true North, in degrees clockwise.","When using the *auto* default, no rotation would be applied","in perspective views which is different from using a zero angle."].join(" ")},allowoverlap:{valType:"boolean",dflt:!1,description:["Flag to draw all symbols, even if they overlap."].join(" ")},opacity:v.opacity,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode},a("marker")),fill:n.fill,fillcolor:i.fillcolor,textfont:s.layers.symbol.textfont,textposition:s.layers.symbol.textposition,below:{valType:"string",description:["Determines if this scattermapbox trace's layers are to be inserted","before the layer with the specified ID.","By default, scattermapbox layers are inserted","above all the base layers.","To place the scattermapbox layers above every other layer, set `below` to *''*."].join(" ")},selected:{marker:i.selected.marker},unselected:{marker:i.unselected.marker},hoverinfo:l({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:e()},"calc","nested"),tD}t(cB,"requireAttributes$e");var rD,kte;function OBe(){if(kte)return rD;kte=1;var e=Nt.exports,r=ho,n=Ph,i=mv,s=xv,o=dd,a=cB();rD=t(function(f,h,v,c){function d(x,A){return e.coerce(f,h,a,x,A)}t(d,"coerce");function g(x,A){return e.coerce2(f,h,a,x,A)}t(g,"coerce2");var p=l(f,h,d);if(!p){h.visible=!1;return}if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),r.hasLines(h)&&(i(f,h,v,c,d,{noDash:!0}),d("connectgaps")),r.hasMarkers(h)){n(f,h,v,c,d,{noLine:!0,noAngle:!0}),d("marker.allowoverlap"),d("marker.angle");var b=h.marker;b.symbol!=="circle"&&(e.isArrayOrTypedArray(b.size)&&(b.size=b.size[0]),e.isArrayOrTypedArray(b.color)&&(b.color=b.color[0]))}var m=g("cluster.maxzoom"),y=g("cluster.step"),T=g("cluster.color",h.marker&&h.marker.color||v),_=g("cluster.size"),M=g("cluster.opacity"),w=m!==!1||y!==!1||T!==!1||_!==!1||M!==!1;d("cluster.enabled",w),r.hasText(h)&&s(f,h,c,d,{noSelect:!0}),d("fill"),h.fill!=="none"&&o(f,h,v,d),e.coerceSelectionMarkerOpacity(h,d)},"supplyDefaults");function l(u,f,h){var v=h("lon")||[],c=h("lat")||[],d=Math.min(v.length,c.length);return f._length=d,d}return t(l,"handleLonLatDefaults"),rD}t(OBe,"requireDefaults$e");var aD,Ete;function ppe(){if(Ete)return aD;Ete=1;var e=nn();return aD=t(function(n,i,s){var o={},a=s[i.subplot]._subplot,l=a.mockAxis,u=n.lonlat;return o.lonLabel=e.tickText(l,l.c2l(u[0]),!0).text,o.latLabel=e.tickText(l,l.c2l(u[1]),!0).text,o},"formatLabels"),aD}t(ppe,"requireFormat_labels$4");var nD,Cte;function gpe(){if(Cte)return nD;Cte=1;var e=Nt.exports;return nD=t(function(n,i){var s=n.split(" "),o=s[0],a=s[1],l=e.isArrayOrTypedArray(i)?e.mean(i):i,u=.5+l/100,f=1.5+l/100,h=["",""],v=[0,0];switch(o){case"top":h[0]="top",v[1]=-f;break;case"bottom":h[0]="bottom",v[1]=f;break}switch(a){case"left":h[1]="right",v[0]=-u;break;case"right":h[1]="left",v[0]=u;break}var c;return h[0]&&h[1]?c=h.join("-"):h[0]?c=h[0]:h[1]?c=h[1]:c="center",{anchor:c,offset:v}},"convertTextOpts"),nD}t(gpe,"requireConvert_text_opts");var iD,Lte;function NBe(){if(Lte)return iD;Lte=1;var e=xn,r=Nt.exports,n=jn.BADNUM,i=r3(),s=ko,o=bn.exports,a=vw,l=ho,u=gpe(),f=Rf.appendArrayPointValue,h=Ji.NEWLINES,v=Ji.BR_TAG_ALL;iD=t(function(_,M){var w=M[0].trace,x=w.visible===!0&&w._length!==0,A=w.fill!=="none",S=l.hasLines(w),k=l.hasMarkers(w),L=l.hasText(w),P=k&&w.marker.symbol==="circle",D=k&&w.marker.symbol!=="circle",B=w.cluster&&w.cluster.enabled,z=c("fill"),R=c("line"),F=c("circle"),O=c("symbol"),q={fill:z,line:R,circle:F,symbol:O};if(!x)return q;var H;if((A||S)&&(H=i.calcTraceToLineCoords(M)),A&&(z.geojson=i.makePolygon(H),z.layout.visibility="visible",r.extendFlat(z.paint,{"fill-color":w.fillcolor})),S&&(R.geojson=i.makeLine(H),R.layout.visibility="visible",r.extendFlat(R.paint,{"line-width":w.line.width,"line-color":w.line.color,"line-opacity":w.opacity})),P){var j=d(M);F.geojson=j.geojson,F.layout.visibility="visible",B&&(F.filter=["!",["has","point_count"]],q.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":y(w.cluster.color,w.cluster.step),"circle-radius":y(w.cluster.size,w.cluster.step),"circle-opacity":y(w.cluster.opacity,w.cluster.step)}},q.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),r.extendFlat(F.paint,{"circle-color":j.mcc,"circle-radius":j.mrc,"circle-opacity":j.mo})}if(P&&B&&(F.filter=["!",["has","point_count"]]),(D||L)&&(O.geojson=g(M,_),r.extendFlat(O.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),D&&(r.extendFlat(O.layout,{"icon-size":w.marker.size/10}),"angle"in w.marker&&w.marker.angle!=="auto"&&r.extendFlat(O.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),O.layout["icon-allow-overlap"]=w.marker.allowoverlap,r.extendFlat(O.paint,{"icon-opacity":w.opacity*w.marker.opacity,"icon-color":w.marker.color})),L)){var X=(w.marker||{}).size,G=u(w.textposition,X);r.extendFlat(O.layout,{"text-size":w.textfont.size,"text-anchor":G.anchor,"text-offset":G.offset}),r.extendFlat(O.paint,{"text-color":w.textfont.color,"text-opacity":w.opacity})}return q},"convert");function c(T){return{type:T,geojson:i.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}t(c,"initContainer");function d(T){var _=T[0].trace,M=_.marker,w=_.selectedpoints,x=r.isArrayOrTypedArray(M.color),A=r.isArrayOrTypedArray(M.size),S=r.isArrayOrTypedArray(M.opacity),k;function L(X){return _.opacity*X}t(L,"addTraceOpacity");function P(X){return X/2}t(P,"size2radius");var D;x&&(s.hasColorscale(_,"marker")?D=s.makeColorScaleFuncFromTrace(M):D=r.identity);var B;A&&(B=a(_));var z;S&&(z=t(function(X){var G=e(X)?+r.constrain(X,0,1):0;return L(G)},"opacityFn"));var R=[];for(k=0;k<T.length;k++){var F=T[k],O=F.lonlat;if(!m(O)){var q={};D&&(q.mcc=F.mcc=D(F.mc)),B&&(q.mrc=F.mrc=B(F.ms)),z&&(q.mo=z(F.mo)),w&&(q.selected=F.selected||0),R.push({type:"Feature",id:k+1,geometry:{type:"Point",coordinates:O},properties:q})}}var H;if(w)for(H=o.makeSelectedPointStyleFns(_),k=0;k<R.length;k++){var j=R[k].properties;H.selectedOpacityFn&&(j.mo=L(H.selectedOpacityFn(j))),H.selectedColorFn&&(j.mcc=H.selectedColorFn(j)),H.selectedSizeFn&&(j.mrc=H.selectedSizeFn(j))}return{geojson:{type:"FeatureCollection",features:R},mcc:x||H&&H.selectedColorFn?{type:"identity",property:"mcc"}:M.color,mrc:A||H&&H.selectedSizeFn?{type:"identity",property:"mrc"}:P(M.size),mo:S||H&&H.selectedOpacityFn?{type:"identity",property:"mo"}:L(M.opacity)}}t(d,"makeCircleOpts");function g(T,_){for(var M=_._fullLayout,w=T[0].trace,x=w.marker||{},A=x.symbol,S=x.angle,k=A!=="circle"?p(A):b,L=S!=="auto"?p(S,!0):b,P=l.hasText(w)?p(w.text):b,D=[],B=0;B<T.length;B++){var z=T[B];if(!m(z.lonlat)){var R=w.texttemplate,F;if(R){var O=Array.isArray(R)?R[B]||"":R,q=w._module.formatLabels(z,w,M),H={};f(H,w,z.i);var j=w._meta||{};F=r.texttemplateString(O,q,M._d3locale,H,z,j)}else F=P(B);F&&(F=F.replace(h,"").replace(v,`
`)),D.push({type:"Feature",geometry:{type:"Point",coordinates:z.lonlat},properties:{symbol:k(B),angle:L(B),text:F}})}}return{type:"FeatureCollection",features:D}}t(g,"makeSymbolGeoJSON");function p(T,_){return r.isArrayOrTypedArray(T)?_?function(M){return e(T[M])?+T[M]:0}:function(M){return T[M]}:T?function(){return T}:b}t(p,"getFillFunc");function b(){return""}t(b,"blankFillFunc");function m(T){return T[0]===n}t(m,"isBADNUM");function y(T,_){var M;if(r.isArrayOrTypedArray(T)&&r.isArrayOrTypedArray(_)){M=["step",["get","point_count"],T[0]];for(var w=1;w<T.length;w++)M.push(_[w-1],T[w])}else M=T;return M}return t(y,"arrayifyAttribute"),iD}t(NBe,"requireConvert$2");var oD,Rte;function qBe(){if(Rte)return oD;Rte=1;var e=Nt.exports,r=NBe(),n=Ap().traceLayerPrefix,i={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function s(a,l,u){this.type="scattermapbox",this.subplot=a,this.uid=l,this.clusterEnabled=u,this.sourceIds={fill:"source-"+l+"-fill",line:"source-"+l+"-line",circle:"source-"+l+"-circle",symbol:"source-"+l+"-symbol",cluster:"source-"+l+"-circle",clusterCount:"source-"+l+"-circle"},this.layerIds={fill:n+l+"-fill",line:n+l+"-line",circle:n+l+"-circle",symbol:n+l+"-symbol",cluster:n+l+"-cluster",clusterCount:n+l+"-cluster-count"},this.below=null}t(s,"ScatterMapbox");var o=s.prototype;return o.addSource=function(a,l,u){var f={type:"geojson",data:l.geojson};u&&u.enabled&&e.extendFlat(f,{cluster:!0,clusterMaxZoom:u.maxzoom}),this.subplot.map.addSource(this.sourceIds[a],f)},o.setSourceData=function(a,l){this.subplot.map.getSource(this.sourceIds[a]).setData(l.geojson)},o.addLayer=function(a,l,u){var f={type:l.type,id:this.layerIds[a],source:this.sourceIds[a],layout:l.layout,paint:l.paint};l.filter&&(f.filter=l.filter),this.subplot.addLayer(f,u)},o.update=t(function(l){var u=l[0].trace,f=this.subplot,h=f.map,v=r(f.gd,l),c=f.belowLookup["trace-"+this.uid],d,g,p,b=!!(u.cluster&&u.cluster.enabled),m=!!this.clusterEnabled;if(c!==this.below){var y=i.nonCluster;for(d=y.length-1;d>=0;d--)g=y[d],h.removeLayer(this.layerIds[g]);for(d=0;d<y.length;d++)g=y[d],p=v[g],this.addLayer(g,p,c);this.below=c}else if(b&&!m){for(d=i.nonCluster.length-1;d>=0;d--)g=i.nonCluster[d],h.removeLayer(this.layerIds[g]),h.removeSource(this.sourceIds[g]);for(this.addSource("circle",v.circle,u.cluster),d=0;d<i.cluster.length;d++)g=i.cluster[d],p=v[g],this.addLayer(g,p,c);this.clusterEnabled=b}else if(!b&&m){for(d=0;d<i.cluster.length;d++)g=i.cluster[d],h.removeLayer(this.layerIds[g]);for(h.removeSource(this.sourceIds.circle),d=0;d<i.nonCluster.length;d++)g=i.nonCluster[d],p=v[g],this.addSource(g,p,u.cluster),this.addLayer(g,p,c);this.clusterEnabled=b}l[0].trace._glTrace=this},"update"),o.dispose=t(function(){for(var l=this.subplot.map,u=this.clusterEnabled?i.cluster:i.nonCluster,f=u.length-1;f>=0;f--){var h=u[f];l.removeLayer(this.layerIds[h]),l.removeSource(this.sourceIds[h])}},"dispose"),oD=t(function(l,u){var f=u[0].trace,h=f.cluster&&f.cluster.enabled,v=new s(l,f.uid,h),c=r(l.gd,u),d=v.below=l.belowLookup["trace-"+f.uid],g,p,b;if(h)for(v.addSource("circle",c.circle,f.cluster),g=0;g<i.cluster.length;g++)p=i.cluster[g],b=c[p],v.addLayer(p,b,d);else for(g=0;g<i.nonCluster.length;g++)p=i.nonCluster[g],b=c[p],v.addSource(p,b,f.cluster),v.addLayer(p,b,d);return u[0].trace._glTrace=v,v},"createScatterMapbox"),oD}t(qBe,"requirePlot$d");var sD,Pte;function PF(){if(Pte)return sD;Pte=1;var e=Ko,r=Nt.exports,n=lx,i=r.fillText,s=jn.BADNUM,o=Ap().traceLayerPrefix;function a(u,f,h){var v=u.cd,c=v[0].trace,d=u.xa,g=u.ya,p=u.subplot,b=[],m=o+c.uid+"-circle",y=c.cluster&&c.cluster.enabled;if(y){var T=p.map.queryRenderedFeatures(null,{layers:[m]});b=T.map(function(R){return R.id})}var _=f>=0?Math.floor((f+180)/360):Math.ceil((f-180)/360),M=_*360,w=f-M;function x(R){var F=R.lonlat;if(F[0]===s||y&&b.indexOf(R.i+1)===-1)return 1/0;var O=r.modHalf(F[0],360),q=F[1],H=p.project([O,q]),j=H.x-d.c2p([w,q]),X=H.y-g.c2p([O,h]),G=Math.max(3,R.mrc||0);return Math.max(Math.sqrt(j*j+X*X)-G,1-3/G)}if(t(x,"distFn"),e.getClosest(v,x,u),u.index!==!1){var A=v[u.index],S=A.lonlat,k=[r.modHalf(S[0],360)+M,S[1]],L=d.c2p(k),P=g.c2p(k),D=A.mrc||1;u.x0=L-D,u.x1=L+D,u.y0=P-D,u.y1=P+D;var B={};B[c.subplot]={_subplot:p};var z=c._module.formatLabels(A,c,B);return u.lonLabel=z.lonLabel,u.latLabel=z.latLabel,u.color=n(c,A),u.extraText=l(c,A,v[0].t.labels),u.hovertemplate=c.hovertemplate,[u]}}t(a,"hoverPoints");function l(u,f,h){if(u.hovertemplate)return;var v=f.hi||u.hoverinfo,c=v.split("+"),d=c.indexOf("all")!==-1,g=c.indexOf("lon")!==-1,p=c.indexOf("lat")!==-1,b=f.lonlat,m=[];function y(T){return T+"\xB0"}return t(y,"format"),d||g&&p?m.push("("+y(b[1])+", "+y(b[0])+")"):g?m.push(h.lon+y(b[0])):p&&m.push(h.lat+y(b[1])),(d||c.indexOf("text")!==-1)&&i(f,u,m),m.join("<br>")}return t(l,"getExtraText"),sD={hoverPoints:a,getExtraText:l},sD}t(PF,"requireHover$7");var lD,Dte;function UBe(){return Dte||(Dte=1,lD=t(function(r,n){return r.lon=n.lon,r.lat=n.lat,r},"eventData")),lD}t(UBe,"requireEvent_data$2");var uD,Ite;function HBe(){if(Ite)return uD;Ite=1;var e=Nt.exports,r=ho,n=jn.BADNUM;return uD=t(function(s,o){var a=s.cd,l=s.xaxis,u=s.yaxis,f=[],h=a[0].trace,v;if(!r.hasMarkers(h))return[];if(o===!1)for(v=0;v<a.length;v++)a[v].selected=0;else for(v=0;v<a.length;v++){var c=a[v],d=c.lonlat;if(d[0]!==n){var g=[e.modHalf(d[0],360),d[1]],p=[l.c2p(g),u.c2p(g)];o.contains(p,null,v,s)?(f.push({pointNumber:v,lon:d[0],lat:d[1]}),c.selected=1):c.selected=0}}return f},"selectPoints"),uD}t(HBe,"requireSelect$2");var Vu={},fD={exports:{}},zte;function ype(){return zte||(zte=1,function(e,r){(function(n,i){e.exports=i()})(xs,function(){var n,i,s;function o(a,l){if(!n)n=l;else if(!i)i=l;else{var u="var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk);",f={};n(f),s=l(f),s.workerUrl=window.URL.createObjectURL(new Blob([u],{type:"text/javascript"}))}}return t(o,"define"),o(["exports"],function(a){function l(E,C){return C={exports:{}},E(C,C.exports),C.exports}t(l,"createCommonjsModule");var u="1.10.1",f=h;function h(E,C,I,V){this.cx=3*E,this.bx=3*(I-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*(V-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=V,this.p2x=I,this.p2y=V}t(h,"UnitBezier"),h.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},h.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},h.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},h.prototype.solveCurveX=function(E,C){typeof C>"u"&&(C=1e-6);var I,V,J,ue,ge;for(J=E,ge=0;ge<8;ge++){if(ue=this.sampleCurveX(J)-E,Math.abs(ue)<C)return J;var ke=this.sampleCurveDerivativeX(J);if(Math.abs(ke)<1e-6)break;J=J-ue/ke}if(I=0,V=1,J=E,J<I)return I;if(J>V)return V;for(;I<V;){if(ue=this.sampleCurveX(J),Math.abs(ue-E)<C)return J;E>ue?I=J:V=J,J=(V-I)*.5+I}return J},h.prototype.solve=function(E,C){return this.sampleCurveY(this.solveCurveX(E,C))};var v=c;function c(E,C){this.x=E,this.y=C}t(c,"Point"),c.prototype={clone:function(){return new c(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,C){return this.clone()._rotateAround(E,C)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var C=E.x-this.x,I=E.y-this.y;return C*C+I*I},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,C){return Math.atan2(this.x*C-this.y*E,this.x*E+this.y*C)},_matMult:function(E){var C=E[0]*this.x+E[1]*this.y,I=E[2]*this.x+E[3]*this.y;return this.x=C,this.y=I,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var C=Math.cos(E),I=Math.sin(E),V=C*this.x-I*this.y,J=I*this.x+C*this.y;return this.x=V,this.y=J,this},_rotateAround:function(E,C){var I=Math.cos(E),V=Math.sin(E),J=C.x+I*(this.x-C.x)-V*(this.y-C.y),ue=C.y+V*(this.x-C.x)+I*(this.y-C.y);return this.x=J,this.y=ue,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(E){return E instanceof c?E:Array.isArray(E)?new c(E[0],E[1]):E};function d(E,C){if(Array.isArray(E)){if(!Array.isArray(C)||E.length!==C.length)return!1;for(var I=0;I<E.length;I++)if(!d(E[I],C[I]))return!1;return!0}if(typeof E=="object"&&E!==null&&C!==null){if(typeof C!="object")return!1;var V=Object.keys(E);if(V.length!==Object.keys(C).length)return!1;for(var J in E)if(!d(E[J],C[J]))return!1;return!0}return E===C}t(d,"deepEqual");function g(E){if(E<=0)return 0;if(E>=1)return 1;var C=E*E,I=C*E;return 4*(E<.5?I:3*(E-C)+I-.75)}t(g,"easeCubicInOut");function p(E,C,I,V){var J=new f(E,C,I,V);return function(ue){return J.solve(ue)}}t(p,"bezier");var b=p(.25,.1,.25,1);function m(E,C,I){return Math.min(I,Math.max(C,E))}t(m,"clamp");function y(E,C,I){var V=I-C,J=((E-C)%V+V)%V+C;return J===C?I:J}t(y,"wrap");function T(E,C,I){if(!E.length)return I(null,[]);var V=E.length,J=new Array(E.length),ue=null;E.forEach(function(ge,ke){C(ge,function(Pe,Oe){Pe&&(ue=Pe),J[ke]=Oe,--V===0&&I(ue,J)})})}t(T,"asyncAll");function _(E){var C=[];for(var I in E)C.push(E[I]);return C}t(_,"values");function M(E,C){var I=[];for(var V in E)V in C||I.push(V);return I}t(M,"keysDifference");function w(E){for(var C=[],I=arguments.length-1;I-- >0;)C[I]=arguments[I+1];for(var V=0,J=C;V<J.length;V+=1){var ue=J[V];for(var ge in ue)E[ge]=ue[ge]}return E}t(w,"extend");function x(E,C){for(var I={},V=0;V<C.length;V++){var J=C[V];J in E&&(I[J]=E[J])}return I}t(x,"pick");var A=1;function S(){return A++}t(S,"uniqueId");function k(){function E(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}return t(E,"b"),E()}t(k,"uuid");function L(E){return E?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E):!1}t(L,"validateUuid");function P(E,C){E.forEach(function(I){!C[I]||(C[I]=C[I].bind(C))})}t(P,"bindAll");function D(E,C){return E.indexOf(C,E.length-C.length)!==-1}t(D,"endsWith");function B(E,C,I){var V={};for(var J in E)V[J]=C.call(I||this,E[J],J,E);return V}t(B,"mapObject");function z(E,C,I){var V={};for(var J in E)C.call(I||this,E[J],J,E)&&(V[J]=E[J]);return V}t(z,"filterObject");function R(E){return Array.isArray(E)?E.map(R):typeof E=="object"&&E?B(E,R):E}t(R,"clone");function F(E,C){for(var I=0;I<E.length;I++)if(C.indexOf(E[I])>=0)return!0;return!1}t(F,"arraysIntersect");var O={};function q(E){O[E]||(typeof console<"u"&&console.warn(E),O[E]=!0)}t(q,"warnOnce");function H(E,C,I){return(I.y-E.y)*(C.x-E.x)>(C.y-E.y)*(I.x-E.x)}t(H,"isCounterClockwise");function j(E){for(var C=0,I=0,V=E.length,J=V-1,ue=void 0,ge=void 0;I<V;J=I++)ue=E[I],ge=E[J],C+=(ge.x-ue.x)*(ue.y+ge.y);return C}t(j,"calculateSignedArea");function X(E){var C=E[0],I=E[1],V=E[2];return I+=90,I*=Math.PI/180,V*=Math.PI/180,{x:C*Math.cos(I)*Math.sin(V),y:C*Math.sin(I)*Math.sin(V),z:C*Math.cos(V)}}t(X,"sphericalToCartesian");function G(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}t(G,"isWorker");function $(E){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,I={};if(E.replace(C,function(J,ue,ge,ke){var Pe=ge||ke;return I[ue]=Pe?Pe.toLowerCase():!0,""}),I["max-age"]){var V=parseInt(I["max-age"],10);isNaN(V)?delete I["max-age"]:I["max-age"]=V}return I}t($,"parseCacheControl");var te=null;function ee(E){if(te==null){var C=E.navigator?E.navigator.userAgent:null;te=!!E.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return te}t(ee,"isSafari");function ie(E){try{var C=self[E];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}t(ie,"storageAvailable");function se(E){return self.btoa(encodeURIComponent(E).replace(/%([0-9A-F]{2})/g,function(C,I){return String.fromCharCode(Number("0x"+I))}))}t(se,"b64EncodeUnicode");function W(E){return decodeURIComponent(self.atob(E).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}t(W,"b64DecodeUnicode");var ne=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),he=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,re=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ae,fe,ce={now:ne,frame:t(function(C){var I=he(C);return{cancel:function(){return re(I)}}},"frame"),getImageData:t(function(C,I){I===void 0&&(I=0);var V=self.document.createElement("canvas"),J=V.getContext("2d");if(!J)throw new Error("failed to create canvas 2d context");return V.width=C.width,V.height=C.height,J.drawImage(C,0,0,C.width,C.height),J.getImageData(-I,-I,C.width+2*I,C.height+2*I)},"getImageData"),resolveURL:t(function(C){return ae||(ae=self.document.createElement("a")),ae.href=C,ae.href},"resolveURL"),hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(fe==null&&(fe=self.matchMedia("(prefers-reduced-motion: reduce)")),fe.matches):!1}},xe={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Te={supported:!1,testSupport:ye},me,pe=!1,oe,de=!1;self.document&&(oe=self.document.createElement("img"),oe.onload=function(){me&&we(me),me=null,de=!0},oe.onerror=function(){pe=!0,me=null},oe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ye(E){pe||!oe||(de?we(E):me=E)}t(ye,"testSupport");function we(E){var C=E.createTexture();E.bindTexture(E.TEXTURE_2D,C);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,oe),E.isContextLost())return;Te.supported=!0}catch{}E.deleteTexture(C),pe=!0}t(we,"testWebpTextureUpload");var Ee="01";function De(){for(var E="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",I="",V=0;V<10;V++)I+=C[Math.floor(Math.random()*62)];var J=12*60*60*1e3,ue=[E,Ee,I].join(""),ge=Date.now()+J;return{token:ue,tokenExpiresAt:ge}}t(De,"createSkuToken");var Fe=t(function(C,I){this._transformRequestFn=C,this._customAccessToken=I,this._createSkuToken()},"RequestManager");Fe.prototype._createSkuToken=t(function(){var C=De();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},"_createSkuToken"),Fe.prototype._isSkuTokenExpired=t(function(){return Date.now()>this._skuTokenExpiresAt},"_isSkuTokenExpired"),Fe.prototype.transformRequest=t(function(C,I){return this._transformRequestFn?this._transformRequestFn(C,I)||{url:C}:{url:C}},"transformRequest"),Fe.prototype.normalizeStyleURL=t(function(C,I){if(!qe(C))return C;var V=$e(C);return V.path="/styles/v1"+V.path,this._makeAPIURL(V,this._customAccessToken||I)},"normalizeStyleURL"),Fe.prototype.normalizeGlyphsURL=t(function(C,I){if(!qe(C))return C;var V=$e(C);return V.path="/fonts/v1"+V.path,this._makeAPIURL(V,this._customAccessToken||I)},"normalizeGlyphsURL"),Fe.prototype.normalizeSourceURL=t(function(C,I){if(!qe(C))return C;var V=$e(C);return V.path="/v4/"+V.authority+".json",V.params.push("secure"),this._makeAPIURL(V,this._customAccessToken||I)},"normalizeSourceURL"),Fe.prototype.normalizeSpriteURL=t(function(C,I,V,J){var ue=$e(C);return qe(C)?(ue.path="/styles/v1"+ue.path+"/sprite"+I+V,this._makeAPIURL(ue,this._customAccessToken||J)):(ue.path+=""+I+V,Ct(ue))},"normalizeSpriteURL"),Fe.prototype.normalizeTileURL=t(function(C,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!qe(C))return C;var V=$e(C),J=/(\.(png|jpg)\d*)(?=$)/,ue=/^.+\/v4\//,ge=ce.devicePixelRatio>=2||I===512?"@2x":"",ke=Te.supported?".webp":"$1";V.path=V.path.replace(J,""+ge+ke),V.path=V.path.replace(ue,"/"),V.path="/v4"+V.path;var Pe=this._customAccessToken||Ue(V.params)||xe.ACCESS_TOKEN;return xe.REQUIRE_ACCESS_TOKEN&&Pe&&this._skuToken&&V.params.push("sku="+this._skuToken),this._makeAPIURL(V,Pe)},"normalizeTileURL"),Fe.prototype.canonicalizeTileURL=t(function(C,I){var V="/v4/",J=/\.[\w]+$/,ue=$e(C);if(!ue.path.match(/(^\/v4\/)/)||!ue.path.match(J))return C;var ge="mapbox://tiles/";ge+=ue.path.replace(V,"");var ke=ue.params;return I&&(ke=ke.filter(function(Pe){return!Pe.match(/^access_token=/)})),ke.length&&(ge+="?"+ke.join("&")),ge},"canonicalizeTileURL"),Fe.prototype.canonicalizeTileset=t(function(C,I){for(var V=I?qe(I):!1,J=[],ue=0,ge=C.tiles||[];ue<ge.length;ue+=1){var ke=ge[ue];Ge(ke)?J.push(this.canonicalizeTileURL(ke,V)):J.push(ke)}return J},"canonicalizeTileset"),Fe.prototype._makeAPIURL=t(function(C,I){var V="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",J=$e(xe.API_URL);if(C.protocol=J.protocol,C.authority=J.authority,J.path!=="/"&&(C.path=""+J.path+C.path),!xe.REQUIRE_ACCESS_TOKEN)return Ct(C);if(I=I||xe.ACCESS_TOKEN,!I)throw new Error("An API access token is required to use Mapbox GL. "+V);if(I[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+V);return C.params=C.params.filter(function(ue){return ue.indexOf("access_token")===-1}),C.params.push("access_token="+I),Ct(C)},"_makeAPIURL");function qe(E){return E.indexOf("mapbox:")===0}t(qe,"isMapboxURL");var Je=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ge(E){return Je.test(E)}t(Ge,"isMapboxHTTPURL");function et(E){return E.indexOf("sku=")>0&&Ge(E)}t(et,"hasCacheDefeatingSku");function Ue(E){for(var C=0,I=E;C<I.length;C+=1){var V=I[C],J=V.match(/^access_token=(.*)$/);if(J)return J[1]}return null}t(Ue,"getAccessToken");var Ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function $e(E){var C=E.match(Ye);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}t($e,"parseUrl");function Ct(E){var C=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+C}t(Ct,"formatUrl");var It="mapbox.eventData";function Vt(E){if(!E)return null;var C=E.split(".");if(!C||C.length!==3)return null;try{var I=JSON.parse(W(C[1]));return I}catch{return null}}t(Vt,"parseAccessToken");var $t=t(function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null},"TelemetryEvent");$t.prototype.getStorageKey=t(function(C){var I=Vt(xe.ACCESS_TOKEN),V="";return I&&I.u?V=se(I.u):V=xe.ACCESS_TOKEN||"",C?It+"."+C+":"+V:It+":"+V},"getStorageKey"),$t.prototype.fetchEventData=t(function(){var C=ie("localStorage"),I=this.getStorageKey(),V=this.getStorageKey("uuid");if(C)try{var J=self.localStorage.getItem(I);J&&(this.eventData=JSON.parse(J));var ue=self.localStorage.getItem(V);ue&&(this.anonId=ue)}catch{q("Unable to read from LocalStorage")}},"fetchEventData"),$t.prototype.saveEventData=t(function(){var C=ie("localStorage"),I=this.getStorageKey(),V=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(V,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(I,JSON.stringify(this.eventData))}catch{q("Unable to write to LocalStorage")}},"saveEventData"),$t.prototype.processRequests=t(function(C){},"processRequests"),$t.prototype.postEvent=t(function(C,I,V,J){var ue=this;if(!!xe.EVENTS_URL){var ge=$e(xe.EVENTS_URL);ge.params.push("access_token="+(J||xe.ACCESS_TOKEN||""));var ke={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:u,skuId:Ee,userId:this.anonId},Pe=I?w(ke,I):ke,Oe={url:Ct(ge),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Pe])};this.pendingRequest=Ae(Oe,function(Ve){ue.pendingRequest=null,V(Ve),ue.saveEventData(),ue.processRequests(J)})}},"postEvent"),$t.prototype.queueRequest=t(function(C,I){this.queue.push(C),this.processRequests(I)},"queueRequest");var Gt=function(E){function C(){E.call(this,"map.load"),this.success={},this.skuToken=""}return t(C,"MapLoadEvent"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=t(function(V,J,ue,ge){this.skuToken=ue,(xe.EVENTS_URL&&ge||xe.ACCESS_TOKEN&&Array.isArray(V)&&V.some(function(ke){return qe(ke)||Ge(ke)}))&&this.queueRequest({id:J,timestamp:Date.now()},ge)},"postMapLoadEvent"),C.prototype.processRequests=t(function(V){var J=this;if(!(this.pendingRequest||this.queue.length===0)){var ue=this.queue.shift(),ge=ue.id,ke=ue.timestamp;ge&&this.success[ge]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=k()),this.postEvent(ke,{skuToken:this.skuToken},function(Pe){Pe||ge&&(J.success[ge]=!0)},V))}},"processRequests"),C}($t),Jt=function(E){function C(I){E.call(this,"appUserTurnstile"),this._customAccessToken=I}return t(C,"TurnstileEvent"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=t(function(V,J){xe.EVENTS_URL&&xe.ACCESS_TOKEN&&Array.isArray(V)&&V.some(function(ue){return qe(ue)||Ge(ue)})&&this.queueRequest(Date.now(),J)},"postTurnstileEvent"),C.prototype.processRequests=t(function(V){var J=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var ue=Vt(xe.ACCESS_TOKEN),ge=ue?ue.u:xe.ACCESS_TOKEN,ke=ge!==this.eventData.tokenU;L(this.anonId)||(this.anonId=k(),ke=!0);var Pe=this.queue.shift();if(this.eventData.lastSuccess){var Oe=new Date(this.eventData.lastSuccess),Ve=new Date(Pe),lt=(Pe-this.eventData.lastSuccess)/(24*60*60*1e3);ke=ke||lt>=1||lt<-1||Oe.getDate()!==Ve.getDate()}else ke=!0;if(!ke)return this.processRequests();this.postEvent(Pe,{"enabled.telemetry":!1},function(At){At||(J.eventData.lastSuccess=Pe,J.eventData.tokenU=ge)},V)}},"processRequests"),C}($t),kt=new Jt,ft=kt.postTurnstileEvent.bind(kt),zt=new Gt,Pt=zt.postMapLoadEvent.bind(zt),Et="mapbox-tiles",Wt=500,ze=50,tt=1e3*60*7,at;function vt(){self.caches&&!at&&(at=self.caches.open(Et))}t(vt,"cacheOpen");var _t;function Rt(E,C){if(_t===void 0)try{new Response(new ReadableStream),_t=!0}catch{_t=!1}_t?C(E.body):E.blob().then(C)}t(Rt,"prepareBody");function nr(E,C,I){if(vt(),!!at){var V={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(ge,ke){return V.headers.set(ke,ge)});var J=$(C.headers.get("Cache-Control")||"");if(!J["no-store"]){J["max-age"]&&V.headers.set("Expires",new Date(I+J["max-age"]*1e3).toUTCString());var ue=new Date(V.headers.get("Expires")).getTime()-I;ue<tt||Rt(C,function(ge){var ke=new self.Response(ge,V);vt(),at&&at.then(function(Pe){return Pe.put(ir(E.url),ke)}).catch(function(Pe){return q(Pe.message)})})}}}t(nr,"cachePut");function ir(E){var C=E.indexOf("?");return C<0?E:E.slice(0,C)}t(ir,"stripQueryParameters");function ur(E,C){if(vt(),!at)return C(null);var I=ir(E.url);at.then(function(V){V.match(I).then(function(J){var ue=qt(J);V.delete(I),ue&&V.put(I,J.clone()),C(null,J,ue)}).catch(C)}).catch(C)}t(ur,"cacheGet");function qt(E){if(!E)return!1;var C=new Date(E.headers.get("Expires")||0),I=$(E.headers.get("Cache-Control")||"");return C>Date.now()&&!I["no-cache"]}t(qt,"isFresh");var hr=1/0;function Fr(E){hr++,hr>ze&&(E.getActor().send("enforceCacheSizeLimit",Wt),hr=0)}t(Fr,"cacheEntryPossiblyAdded");function Br(E){vt(),at&&at.then(function(C){C.keys().then(function(I){for(var V=0;V<I.length-E;V++)C.delete(I[V])})})}t(Br,"enforceCacheSizeLimit");function na(E){var C=self.caches.delete(Et);E&&C.catch(E).then(function(){return E()})}t(na,"clearTileCache");function Ia(E,C){Wt=E,ze=C}t(Ia,"setCacheLimits");var ea;function Er(){return ea==null&&(ea=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),ea}t(Er,"offscreenCanvasSupported");var dn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(dn);var ya=function(E){function C(I,V,J){V===401&&Ge(J)&&(I+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,I),this.status=V,this.url=J,this.name=this.constructor.name,this.message=I}return t(C,"AJAXError"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.toString=t(function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},"toString"),C}(Error),Hr=G()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},un=t(function(E){return/^file:/.test(E)||/^file:/.test(Hr())&&!/^\w+:/.test(E)},"isFileURL");function Ea(E,C){var I=new self.AbortController,V=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:Hr(),signal:I.signal}),J=!1,ue=!1,ge=et(V.url);E.type==="json"&&V.headers.set("Accept","application/json");var ke=t(function(Oe,Ve,lt){if(!ue){if(Oe&&Oe.message!=="SecurityError"&&q(Oe),Ve&&lt)return Pe(Ve);var At=Date.now();self.fetch(V).then(function(mt){if(mt.ok){var Bt=ge?mt.clone():null;return Pe(mt,Bt,At)}else return C(new ya(mt.statusText,mt.status,E.url))}).catch(function(mt){mt.code!==20&&C(new Error(mt.message))})}},"validateOrFetch"),Pe=t(function(Oe,Ve,lt){(E.type==="arrayBuffer"?Oe.arrayBuffer():E.type==="json"?Oe.json():Oe.text()).then(function(At){ue||(Ve&&lt&&nr(V,Ve,lt),J=!0,C(null,At,Oe.headers.get("Cache-Control"),Oe.headers.get("Expires")))}).catch(function(At){ue||C(new Error(At.message))})},"finishRequest");return ge?ur(V,ke):ke(null,null),{cancel:function(){ue=!0,J||I.abort()}}}t(Ea,"makeFetchRequest");function nt(E,C){var I=new self.XMLHttpRequest;I.open(E.method||"GET",E.url,!0),E.type==="arrayBuffer"&&(I.responseType="arraybuffer");for(var V in E.headers)I.setRequestHeader(V,E.headers[V]);return E.type==="json"&&(I.responseType="text",I.setRequestHeader("Accept","application/json")),I.withCredentials=E.credentials==="include",I.onerror=function(){C(new Error(I.statusText))},I.onload=function(){if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){var J=I.response;if(E.type==="json")try{J=JSON.parse(I.response)}catch(ue){return C(ue)}C(null,J,I.getResponseHeader("Cache-Control"),I.getResponseHeader("Expires"))}else C(new ya(I.statusText,I.status,E.url))},I.send(E.body),{cancel:function(){return I.abort()}}}t(nt,"makeXMLHttpRequest");var He=t(function(E,C){if(!un(E.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Ea(E,C);if(G()&&self.worker&&self.worker.actor){var I=!0;return self.worker.actor.send("getResource",E,C,void 0,I)}}return nt(E,C)},"makeRequest"),Qe=t(function(E,C){return He(w(E,{type:"json"}),C)},"getJSON"),ot=t(function(E,C){return He(w(E,{type:"arrayBuffer"}),C)},"getArrayBuffer"),Ae=t(function(E,C){return He(w(E,{method:"POST"}),C)},"postData");function Se(E){var C=self.document.createElement("a");return C.href=E,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}t(Se,"sameOrigin");var je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Xe(E,C,I,V){var J=new self.Image,ue=self.URL;J.onload=function(){C(null,J),ue.revokeObjectURL(J.src)},J.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ge=new self.Blob([new Uint8Array(E)],{type:"image/png"});J.cacheControl=I,J.expires=V,J.src=E.byteLength?ue.createObjectURL(ge):je}t(Xe,"arrayBufferToImage");function ut(E,C){var I=new self.Blob([new Uint8Array(E)],{type:"image/png"});self.createImageBitmap(I).then(function(V){C(null,V)}).catch(function(V){C(new Error("Could not load image because of "+V.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}t(ut,"arrayBufferToImageBitmap");var xt,dt,Ot=t(function(){xt=[],dt=0},"resetImageRequestQueue");Ot();var Ht=t(function(E,C){if(Te.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),dt>=xe.MAX_PARALLEL_IMAGE_REQUESTS){var I={requestParameters:E,callback:C,cancelled:!1,cancel:t(function(){this.cancelled=!0},"cancel")};return xt.push(I),I}dt++;var V=!1,J=t(function(){if(!V)for(V=!0,dt--;xt.length&&dt<xe.MAX_PARALLEL_IMAGE_REQUESTS;){var ge=xt.shift(),ke=ge.requestParameters,Pe=ge.callback,Oe=ge.cancelled;Oe||(ge.cancel=Ht(ke,Pe).cancel)}},"advanceImageRequestQueue"),ue=ot(E,function(ge,ke,Pe,Oe){J(),ge?C(ge):ke&&(Er()?ut(ke,C):Xe(ke,C,Pe,Oe))});return{cancel:function(){ue.cancel(),J()}}},"getImage"),Qt=t(function(E,C){var I=self.document.createElement("video");I.muted=!0,I.onloadstart=function(){C(null,I)};for(var V=0;V<E.length;V++){var J=self.document.createElement("source");Se(E[V])||(I.crossOrigin="Anonymous"),J.src=E[V],I.appendChild(J)}return{cancel:function(){}}},"getVideo");function mr(E,C,I){var V=I[E]&&I[E].indexOf(C)!==-1;V||(I[E]=I[E]||[],I[E].push(C))}t(mr,"_addEventListener");function xr(E,C,I){if(I&&I[E]){var V=I[E].indexOf(C);V!==-1&&I[E].splice(V,1)}}t(xr,"_removeEventListener");var Lr=t(function(C,I){I===void 0&&(I={}),w(this,I),this.type=C},"Event"),Zr=function(E){function C(I,V){V===void 0&&(V={}),E.call(this,"error",w({error:I},V))}return t(C,"ErrorEvent"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Lr),Sr=t(function(){},"Evented");Sr.prototype.on=t(function(C,I){return this._listeners=this._listeners||{},mr(C,I,this._listeners),this},"on"),Sr.prototype.off=t(function(C,I){return xr(C,I,this._listeners),xr(C,I,this._oneTimeListeners),this},"off"),Sr.prototype.once=t(function(C,I){return this._oneTimeListeners=this._oneTimeListeners||{},mr(C,I,this._oneTimeListeners),this},"once"),Sr.prototype.fire=t(function(C,I){typeof C=="string"&&(C=new Lr(C,I||{}));var V=C.type;if(this.listens(V)){C.target=this;for(var J=this._listeners&&this._listeners[V]?this._listeners[V].slice():[],ue=0,ge=J;ue<ge.length;ue+=1){var ke=ge[ue];ke.call(this,C)}for(var Pe=this._oneTimeListeners&&this._oneTimeListeners[V]?this._oneTimeListeners[V].slice():[],Oe=0,Ve=Pe;Oe<Ve.length;Oe+=1){var lt=Ve[Oe];xr(V,lt,this._oneTimeListeners),lt.call(this,C)}var At=this._eventedParent;At&&(w(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),At.fire(C))}else C instanceof Zr&&console.error(C.error);return this},"fire"),Sr.prototype.listens=t(function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},"listens"),Sr.prototype.setEventedParent=t(function(C,I){return this._eventedParent=C,this._eventedParentData=I,this},"setEventedParent");var xa=8,aa={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Sa={"*":{type:"source"}},vn=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],hn={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},ba={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},Tn={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Pa={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},kn={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},In={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},ln={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Pn=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Fa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ka={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ja={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ln={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ni={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$i={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vi={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ai={type:"array",value:"*"},_s={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},eo={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},lo={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Eo={type:"array",value:"*",minimum:1},Li={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},bl={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Us=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],pi={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},po={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},wo={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Ds={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},To={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},uo={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Pf={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Nl={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},qi={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Hs={"*":{type:"string"}},Wr={$version:xa,$root:aa,sources:Sa,source:vn,source_vector:hn,source_raster:ba,source_raster_dem:Tn,source_geojson:Pa,source_video:kn,source_image:In,layer:ln,layout:Pn,layout_background:Fa,layout_fill:Ka,layout_circle:Ja,layout_heatmap:Xn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Ln,layout_symbol:ni,layout_raster:$i,layout_hillshade:Vi,filter:Ai,filter_operator:_s,geometry_type:eo,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:lo,expression:Eo,expression_name:Li,light:bl,paint:Us,paint_fill:pi,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:po,paint_circle:wo,paint_heatmap:Ds,paint_symbol:To,paint_raster:uo,paint_hillshade:Pf,paint_background:Nl,transition:qi,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Hs},Ma=t(function(C,I,V,J){this.message=(C?C+": ":"")+V,J&&(this.identifier=J),I!=null&&I.__line__&&(this.line=I.__line__)},"ValidationError");function go(E){var C=E.key,I=E.value;return I?[new Ma(C,I,"constants have been deprecated as of v8")]:[]}t(go,"validateConstants");function Gi(E){for(var C=[],I=arguments.length-1;I-- >0;)C[I]=arguments[I+1];for(var V=0,J=C;V<J.length;V+=1){var ue=J[V];for(var ge in ue)E[ge]=ue[ge]}return E}t(Gi,"extend$1");function Ri(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}t(Ri,"unbundle");function _l(E){if(Array.isArray(E))return E.map(_l);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var C={};for(var I in E)C[I]=_l(E[I]);return C}return Ri(E)}t(_l,"deepUnbundle");var is=function(E){function C(I,V){E.call(this,V),this.message=V,this.key=I}return t(C,"ParsingError"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Error),$s=t(function(C,I){I===void 0&&(I=[]),this.parent=C,this.bindings={};for(var V=0,J=I;V<J.length;V+=1){var ue=J[V],ge=ue[0],ke=ue[1];this.bindings[ge]=ke}},"Scope");$s.prototype.concat=t(function(C){return new $s(this,C)},"concat"),$s.prototype.get=t(function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},"get"),$s.prototype.has=t(function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1},"has");var Jo={kind:"null"},Ga={kind:"number"},Yn={kind:"string"},Bn={kind:"boolean"},wl={kind:"color"},nl={kind:"object"},Kn={kind:"value"},tf={kind:"error"},rf={kind:"collator"},ql={kind:"formatted"},Ul={kind:"resolvedImage"};function Co(E,C){return{kind:"array",itemType:E,N:C}}t(Co,"array");function Di(E){if(E.kind==="array"){var C=Di(E.itemType);return typeof E.N=="number"?"array<"+C+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+C+">"}else return E.kind}t(Di,"toString");var Fh=[Jo,Ga,Yn,Bn,wl,ql,nl,Co(Kn),Ul];function af(E,C){if(C.kind==="error")return null;if(E.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!af(E.itemType,C.itemType))&&(typeof E.N!="number"||E.N===C.N))return null}else{if(E.kind===C.kind)return null;if(E.kind==="value")for(var I=0,V=Fh;I<V.length;I+=1){var J=V[I];if(!af(J,C))return null}}return"Expected "+Di(E)+" but found "+Di(C)+" instead."}t(af,"checkSubtype");function Au(E,C){return C.some(function(I){return I.kind===E.kind})}t(Au,"isValidType");function Tl(E,C){return C.some(function(I){return I==="null"?E===null:I==="array"?Array.isArray(E):I==="object"?E&&!Array.isArray(E)&&typeof E=="object":I===typeof E})}t(Tl,"isValidNativeType");var Mp=l(function(E,C){var I={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function V(Oe){return Oe=Math.round(Oe),Oe<0?0:Oe>255?255:Oe}t(V,"clamp_css_byte");function J(Oe){return Oe<0?0:Oe>1?1:Oe}t(J,"clamp_css_float");function ue(Oe){return Oe[Oe.length-1]==="%"?V(parseFloat(Oe)/100*255):V(parseInt(Oe))}t(ue,"parse_css_int");function ge(Oe){return Oe[Oe.length-1]==="%"?J(parseFloat(Oe)/100):J(parseFloat(Oe))}t(ge,"parse_css_float");function ke(Oe,Ve,lt){return lt<0?lt+=1:lt>1&&(lt-=1),lt*6<1?Oe+(Ve-Oe)*lt*6:lt*2<1?Ve:lt*3<2?Oe+(Ve-Oe)*(2/3-lt)*6:Oe}t(ke,"css_hue_to_rgb");function Pe(Oe){var Ve=Oe.replace(/ /g,"").toLowerCase();if(Ve in I)return I[Ve].slice();if(Ve[0]==="#"){if(Ve.length===4){var lt=parseInt(Ve.substr(1),16);return lt>=0&&lt<=4095?[(lt&3840)>>4|(lt&3840)>>8,lt&240|(lt&240)>>4,lt&15|(lt&15)<<4,1]:null}else if(Ve.length===7){var lt=parseInt(Ve.substr(1),16);return lt>=0&&lt<=16777215?[(lt&16711680)>>16,(lt&65280)>>8,lt&255,1]:null}return null}var At=Ve.indexOf("("),mt=Ve.indexOf(")");if(At!==-1&&mt+1===Ve.length){var Bt=Ve.substr(0,At),Kt=Ve.substr(At+1,mt-(At+1)).split(","),yr=1;switch(Bt){case"rgba":if(Kt.length!==4)return null;yr=ge(Kt.pop());case"rgb":return Kt.length!==3?null:[ue(Kt[0]),ue(Kt[1]),ue(Kt[2]),yr];case"hsla":if(Kt.length!==4)return null;yr=ge(Kt.pop());case"hsl":if(Kt.length!==3)return null;var lr=(parseFloat(Kt[0])%360+360)%360/360,Rr=ge(Kt[1]),_r=ge(Kt[2]),Cr=_r<=.5?_r*(Rr+1):_r+Rr-_r*Rr,qr=_r*2-Cr;return[V(ke(qr,Cr,lr+1/3)*255),V(ke(qr,Cr,lr)*255),V(ke(qr,Cr,lr-1/3)*255),yr];default:return null}}return null}t(Pe,"parseCSSColor");try{C.parseCSSColor=Pe}catch{}}),Vc=Mp.parseCSSColor,yi=t(function(C,I,V,J){J===void 0&&(J=1),this.r=C,this.g=I,this.b=V,this.a=J},"Color");yi.parse=t(function(C){if(!!C){if(C instanceof yi)return C;if(typeof C=="string"){var I=Vc(C);if(!!I)return new yi(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3])}}},"parse"),yi.prototype.toString=t(function(){var C=this.toArray(),I=C[0],V=C[1],J=C[2],ue=C[3];return"rgba("+Math.round(I)+","+Math.round(V)+","+Math.round(J)+","+ue+")"},"toString"),yi.prototype.toArray=t(function(){var C=this,I=C.r,V=C.g,J=C.b,ue=C.a;return ue===0?[0,0,0,0]:[I*255/ue,V*255/ue,J*255/ue,ue]},"toArray"),yi.black=new yi(0,0,0,1),yi.white=new yi(1,1,1,1),yi.transparent=new yi(0,0,0,0),yi.red=new yi(1,0,0,1);var oc=t(function(C,I,V){C?this.sensitivity=I?"variant":"case":this.sensitivity=I?"accent":"base",this.locale=V,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})},"Collator");oc.prototype.compare=t(function(C,I){return this.collator.compare(C,I)},"compare"),oc.prototype.resolvedLocale=t(function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale},"resolvedLocale");var Df=t(function(C,I,V,J,ue){this.text=C,this.image=I,this.scale=V,this.fontStack=J,this.textColor=ue},"FormattedSection"),Qo=t(function(C){this.sections=C},"Formatted");Qo.fromString=t(function(C){return new Qo([new Df(C,null,null,null,null)])},"fromString"),Qo.prototype.isEmpty=t(function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},"isEmpty"),Qo.factory=t(function(C){return C instanceof Qo?C:Qo.fromString(C)},"factory"),Qo.prototype.toString=t(function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},"toString"),Qo.prototype.serialize=t(function(){for(var C=["format"],I=0,V=this.sections;I<V.length;I+=1){var J=V[I];if(J.image){C.push(["image",J.image.name]);continue}C.push(J.text);var ue={};J.fontStack&&(ue["text-font"]=["literal",J.fontStack.split(",")]),J.scale&&(ue["font-scale"]=J.scale),J.textColor&&(ue["text-color"]=["rgba"].concat(J.textColor.toArray())),C.push(ue)}return C},"serialize");var ws=t(function(C){this.name=C.name,this.available=C.available},"ResolvedImage");ws.prototype.toString=t(function(){return this.name},"toString"),ws.fromString=t(function(C){return C?new ws({name:C,available:!1}):null},"fromString"),ws.prototype.serialize=t(function(){return["image",this.name]},"serialize");function _v(E,C,I,V){if(!(typeof E=="number"&&E>=0&&E<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof I=="number"&&I>=0&&I<=255)){var J=typeof V=="number"?[E,C,I,V]:[E,C,I];return"Invalid rgba value ["+J.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof V>"u"||typeof V=="number"&&V>=0&&V<=1?null:"Invalid rgba value ["+[E,C,I,V].join(", ")+"]: 'a' must be between 0 and 1."}t(_v,"validateRGBA");function Al(E){if(E===null)return!0;if(typeof E=="string")return!0;if(typeof E=="boolean")return!0;if(typeof E=="number")return!0;if(E instanceof yi)return!0;if(E instanceof oc)return!0;if(E instanceof Qo)return!0;if(E instanceof ws)return!0;if(Array.isArray(E)){for(var C=0,I=E;C<I.length;C+=1){var V=I[C];if(!Al(V))return!1}return!0}else if(typeof E=="object"){for(var J in E)if(!Al(E[J]))return!1;return!0}else return!1}t(Al,"isValue");function Ao(E){if(E===null)return Jo;if(typeof E=="string")return Yn;if(typeof E=="boolean")return Bn;if(typeof E=="number")return Ga;if(E instanceof yi)return wl;if(E instanceof oc)return rf;if(E instanceof Qo)return ql;if(E instanceof ws)return Ul;if(Array.isArray(E)){for(var C=E.length,I,V=0,J=E;V<J.length;V+=1){var ue=J[V],ge=Ao(ue);if(!I)I=ge;else{if(I===ge)continue;I=Kn;break}}return Co(I||Kn,C)}else return nl}t(Ao,"typeOf");function Hl(E){var C=typeof E;return E===null?"":C==="string"||C==="number"||C==="boolean"?String(E):E instanceof yi||E instanceof Qo||E instanceof ws?E.toString():JSON.stringify(E)}t(Hl,"toString$1");var il=t(function(C,I){this.type=C,this.value=I},"Literal");il.parse=t(function(C,I){if(C.length!==2)return I.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!Al(C[1]))return I.error("invalid value");var V=C[1],J=Ao(V),ue=I.expectedType;return J.kind==="array"&&J.N===0&&ue&&ue.kind==="array"&&(typeof ue.N!="number"||ue.N===0)&&(J=ue),new il(J,V)},"parse"),il.prototype.evaluate=t(function(){return this.value},"evaluate"),il.prototype.eachChild=t(function(){},"eachChild"),il.prototype.outputDefined=t(function(){return!0},"outputDefined"),il.prototype.serialize=t(function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof yi?["rgba"].concat(this.value.toArray()):this.value instanceof Qo?this.value.serialize():this.value},"serialize");var Ui=t(function(C){this.name="ExpressionEvaluationError",this.message=C},"RuntimeError");Ui.prototype.toJSON=t(function(){return this.message},"toJSON");var Ts={string:Yn,number:Ga,boolean:Bn,object:nl},Lo=t(function(C,I){this.type=C,this.args=I},"Assertion");Lo.parse=t(function(C,I){if(C.length<2)return I.error("Expected at least one argument.");var V=1,J,ue=C[0];if(ue==="array"){var ge;if(C.length>2){var ke=C[1];if(typeof ke!="string"||!(ke in Ts)||ke==="object")return I.error('The item type argument of "array" must be one of string, number, boolean',1);ge=Ts[ke],V++}else ge=Kn;var Pe;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return I.error('The length argument to "array" must be a positive integer literal',2);Pe=C[2],V++}J=Co(ge,Pe)}else J=Ts[ue];for(var Oe=[];V<C.length;V++){var Ve=I.parse(C[V],V,Kn);if(!Ve)return null;Oe.push(Ve)}return new Lo(J,Oe)},"parse"),Lo.prototype.evaluate=t(function(C){for(var I=0;I<this.args.length;I++){var V=this.args[I].evaluate(C),J=af(this.type,Ao(V));if(J){if(I===this.args.length-1)throw new Ui("Expected value to be of type "+Di(this.type)+", but found "+Di(Ao(V))+" instead.")}else return V}return null},"evaluate"),Lo.prototype.eachChild=t(function(C){this.args.forEach(C)},"eachChild"),Lo.prototype.outputDefined=t(function(){return this.args.every(function(C){return C.outputDefined()})},"outputDefined"),Lo.prototype.serialize=t(function(){var C=this.type,I=[C.kind];if(C.kind==="array"){var V=C.itemType;if(V.kind==="string"||V.kind==="number"||V.kind==="boolean"){I.push(V.kind);var J=C.N;(typeof J=="number"||this.args.length>1)&&I.push(J)}}return I.concat(this.args.map(function(ue){return ue.serialize()}))},"serialize");var Ql=t(function(C){this.type=ql,this.sections=C},"FormatExpression");Ql.parse=t(function(C,I){if(C.length<2)return I.error("Expected at least one argument.");var V=C[1];if(!Array.isArray(V)&&typeof V=="object")return I.error("First argument must be an image or text section.");for(var J=[],ue=!1,ge=1;ge<=C.length-1;++ge){var ke=C[ge];if(ue&&typeof ke=="object"&&!Array.isArray(ke)){ue=!1;var Pe=null;if(ke["font-scale"]&&(Pe=I.parse(ke["font-scale"],1,Ga),!Pe))return null;var Oe=null;if(ke["text-font"]&&(Oe=I.parse(ke["text-font"],1,Co(Yn)),!Oe))return null;var Ve=null;if(ke["text-color"]&&(Ve=I.parse(ke["text-color"],1,wl),!Ve))return null;var lt=J[J.length-1];lt.scale=Pe,lt.font=Oe,lt.textColor=Ve}else{var At=I.parse(C[ge],1,Kn);if(!At)return null;var mt=At.type.kind;if(mt!=="string"&&mt!=="value"&&mt!=="null"&&mt!=="resolvedImage")return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ue=!0,J.push({content:At,scale:null,font:null,textColor:null})}}return new Ql(J)},"parse"),Ql.prototype.evaluate=t(function(C){var I=t(function(V){var J=V.content.evaluate(C);return Ao(J)===Ul?new Df("",J,null,null,null):new Df(Hl(J),null,V.scale?V.scale.evaluate(C):null,V.font?V.font.evaluate(C).join(","):null,V.textColor?V.textColor.evaluate(C):null)},"evaluateSection");return new Qo(this.sections.map(I))},"evaluate"),Ql.prototype.eachChild=t(function(C){for(var I=0,V=this.sections;I<V.length;I+=1){var J=V[I];C(J.content),J.scale&&C(J.scale),J.font&&C(J.font),J.textColor&&C(J.textColor)}},"eachChild"),Ql.prototype.outputDefined=t(function(){return!1},"outputDefined"),Ql.prototype.serialize=t(function(){for(var C=["format"],I=0,V=this.sections;I<V.length;I+=1){var J=V[I];C.push(J.content.serialize());var ue={};J.scale&&(ue["font-scale"]=J.scale.serialize()),J.font&&(ue["text-font"]=J.font.serialize()),J.textColor&&(ue["text-color"]=J.textColor.serialize()),C.push(ue)}return C},"serialize");var Su=t(function(C){this.type=Ul,this.input=C},"ImageExpression");Su.parse=t(function(C,I){if(C.length!==2)return I.error("Expected two arguments.");var V=I.parse(C[1],1,Yn);return V?new Su(V):I.error("No image name provided.")},"parse"),Su.prototype.evaluate=t(function(C){var I=this.input.evaluate(C),V=ws.fromString(I);return V&&C.availableImages&&(V.available=C.availableImages.indexOf(I)>-1),V},"evaluate"),Su.prototype.eachChild=t(function(C){C(this.input)},"eachChild"),Su.prototype.outputDefined=t(function(){return!1},"outputDefined"),Su.prototype.serialize=t(function(){return["image",this.input.serialize()]},"serialize");var xd={"to-boolean":Bn,"to-color":wl,"to-number":Ga,"to-string":Yn},Vs=t(function(C,I){this.type=C,this.args=I},"Coercion");Vs.parse=t(function(C,I){if(C.length<2)return I.error("Expected at least one argument.");var V=C[0];if((V==="to-boolean"||V==="to-string")&&C.length!==2)return I.error("Expected one argument.");for(var J=xd[V],ue=[],ge=1;ge<C.length;ge++){var ke=I.parse(C[ge],ge,Kn);if(!ke)return null;ue.push(ke)}return new Vs(J,ue)},"parse"),Vs.prototype.evaluate=t(function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var I,V,J=0,ue=this.args;J<ue.length;J+=1){var ge=ue[J];if(I=ge.evaluate(C),V=null,I instanceof yi)return I;if(typeof I=="string"){var ke=C.parseColor(I);if(ke)return ke}else if(Array.isArray(I)&&(I.length<3||I.length>4?V="Invalid rbga value "+JSON.stringify(I)+": expected an array containing either three or four numeric values.":V=_v(I[0],I[1],I[2],I[3]),!V))return new yi(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new Ui(V||"Could not parse color from value '"+(typeof I=="string"?I:String(JSON.stringify(I)))+"'")}else if(this.type.kind==="number"){for(var Pe=null,Oe=0,Ve=this.args;Oe<Ve.length;Oe+=1){var lt=Ve[Oe];if(Pe=lt.evaluate(C),Pe===null)return 0;var At=Number(Pe);if(!isNaN(At))return At}throw new Ui("Could not convert "+JSON.stringify(Pe)+" to number.")}else return this.type.kind==="formatted"?Qo.fromString(Hl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?ws.fromString(Hl(this.args[0].evaluate(C))):Hl(this.args[0].evaluate(C))},"evaluate"),Vs.prototype.eachChild=t(function(C){this.args.forEach(C)},"eachChild"),Vs.prototype.outputDefined=t(function(){return this.args.every(function(C){return C.outputDefined()})},"outputDefined"),Vs.prototype.serialize=t(function(){if(this.type.kind==="formatted")return new Ql([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Su(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(I){C.push(I.serialize())}),C},"serialize");var wv=["Unknown","Point","LineString","Polygon"],Mu=t(function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null},"EvaluationContext");Mu.prototype.id=t(function(){return this.feature&&"id"in this.feature?this.feature.id:null},"id"),Mu.prototype.geometryType=t(function(){return this.feature?typeof this.feature.type=="number"?wv[this.feature.type]:this.feature.type:null},"geometryType"),Mu.prototype.geometry=t(function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},"geometry"),Mu.prototype.canonicalID=t(function(){return this.canonical},"canonicalID"),Mu.prototype.properties=t(function(){return this.feature&&this.feature.properties||{}},"properties"),Mu.prototype.parseColor=t(function(C){var I=this._parseColorCache[C];return I||(I=this._parseColorCache[C]=yi.parse(C)),I},"parseColor");var os=t(function(C,I,V,J){this.name=C,this.type=I,this._evaluate=V,this.args=J},"CompoundExpression");os.prototype.evaluate=t(function(C){return this._evaluate(C,this.args)},"evaluate"),os.prototype.eachChild=t(function(C){this.args.forEach(C)},"eachChild"),os.prototype.outputDefined=t(function(){return!1},"outputDefined"),os.prototype.serialize=t(function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},"serialize"),os.parse=t(function(C,I){var V,J=C[0],ue=os.definitions[J];if(!ue)return I.error('Unknown expression "'+J+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ge=Array.isArray(ue)?ue[0]:ue.type,ke=Array.isArray(ue)?[[ue[1],ue[2]]]:ue.overloads,Pe=ke.filter(function(Qa){var rn=Qa[0];return!Array.isArray(rn)||rn.length===C.length-1}),Oe=null,Ve=0,lt=Pe;Ve<lt.length;Ve+=1){var At=lt[Ve],mt=At[0],Bt=At[1];Oe=new Lu(I.registry,I.path,null,I.scope);for(var Kt=[],yr=!1,lr=1;lr<C.length;lr++){var Rr=C[lr],_r=Array.isArray(mt)?mt[lr-1]:mt.type,Cr=Oe.parse(Rr,1+Kt.length,_r);if(!Cr){yr=!0;break}Kt.push(Cr)}if(!yr){if(Array.isArray(mt)&&mt.length!==Kt.length){Oe.error("Expected "+mt.length+" arguments, but found "+Kt.length+" instead.");continue}for(var qr=0;qr<Kt.length;qr++){var ta=Array.isArray(mt)?mt[qr]:mt.type,ga=Kt[qr];Oe.concat(qr+1).checkSubtype(ta,ga.type)}if(Oe.errors.length===0)return new os(J,ge,Bt,Kt)}}if(Pe.length===1)(V=I.errors).push.apply(V,Oe.errors);else{for(var da=Pe.length?Pe:ke,an=da.map(function(Qa){var rn=Qa[0];return sc(rn)}).join(" | "),Ha=[],Xa=1;Xa<C.length;Xa++){var Mn=I.parse(C[Xa],1+Ha.length);if(!Mn)return null;Ha.push(Di(Mn.type))}I.error("Expected arguments of type "+an+", but found ("+Ha.join(", ")+") instead.")}return null},"parse"),os.register=t(function(C,I){os.definitions=I;for(var V in I)C[V]=os},"register");function sc(E){return Array.isArray(E)?"("+E.map(Di).join(", ")+")":"("+Di(E.type)+"...)"}t(sc,"stringifySignature");var to=t(function(C,I,V){this.type=rf,this.locale=V,this.caseSensitive=C,this.diacriticSensitive=I},"CollatorExpression");to.parse=t(function(C,I){if(C.length!==2)return I.error("Expected one argument.");var V=C[1];if(typeof V!="object"||Array.isArray(V))return I.error("Collator options argument must be an object.");var J=I.parse(V["case-sensitive"]===void 0?!1:V["case-sensitive"],1,Bn);if(!J)return null;var ue=I.parse(V["diacritic-sensitive"]===void 0?!1:V["diacritic-sensitive"],1,Bn);if(!ue)return null;var ge=null;return V.locale&&(ge=I.parse(V.locale,1,Yn),!ge)?null:new to(J,ue,ge)},"parse"),to.prototype.evaluate=t(function(C){return new oc(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},"evaluate"),to.prototype.eachChild=t(function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},"eachChild"),to.prototype.outputDefined=t(function(){return!1},"outputDefined"),to.prototype.serialize=t(function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]},"serialize");var ku=8192;function Bh(E,C){E[0]=Math.min(E[0],C[0]),E[1]=Math.min(E[1],C[1]),E[2]=Math.max(E[2],C[0]),E[3]=Math.max(E[3],C[1])}t(Bh,"updateBBox");function If(E){return(180+E)/360}t(If,"mercatorXfromLng");function bd(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}t(bd,"mercatorYfromLat");function Gc(E,C){return!(E[0]<=C[0]||E[2]>=C[2]||E[1]<=C[1]||E[3]>=C[3])}t(Gc,"boxWithinBox");function kp(E,C){var I=If(E[0]),V=bd(E[1]),J=Math.pow(2,C.z);return[Math.round(I*J*ku),Math.round(V*J*ku)]}t(kp,"getTileCoordinates");function Ep(E,C,I){var V=E[0]-C[0],J=E[1]-C[1],ue=E[0]-I[0],ge=E[1]-I[1];return V*ge-ue*J===0&&V*ue<=0&&J*ge<=0}t(Ep,"onBoundary");function Cp(E,C,I){return C[1]>E[1]!=I[1]>E[1]&&E[0]<(I[0]-C[0])*(E[1]-C[1])/(I[1]-C[1])+C[0]}t(Cp,"rayIntersect");function Tv(E,C){for(var I=!1,V=0,J=C.length;V<J;V++)for(var ue=C[V],ge=0,ke=ue.length;ge<ke-1;ge++){if(Ep(E,ue[ge],ue[ge+1]))return!1;Cp(E,ue[ge],ue[ge+1])&&(I=!I)}return I}t(Tv,"pointWithinPolygon");function Oh(E,C){for(var I=0;I<C.length;I++)if(Tv(E,C[I]))return!0;return!1}t(Oh,"pointWithinPolygons");function Av(E,C){return E[0]*C[1]-E[1]*C[0]}t(Av,"perp");function Sv(E,C,I,V){var J=E[0]-I[0],ue=E[1]-I[1],ge=C[0]-I[0],ke=C[1]-I[1],Pe=V[0]-I[0],Oe=V[1]-I[1],Ve=J*Oe-Pe*ue,lt=ge*Oe-Pe*ke;return Ve>0&&lt<0||Ve<0&&lt>0}t(Sv,"twoSided");function Mv(E,C,I,V){var J=[C[0]-E[0],C[1]-E[1]],ue=[V[0]-I[0],V[1]-I[1]];return Av(ue,J)===0?!1:!!(Sv(E,C,I,V)&&Sv(I,V,E,C))}t(Mv,"lineIntersectLine");function _d(E,C,I){for(var V=0,J=I;V<J.length;V+=1)for(var ue=J[V],ge=0;ge<ue.length-1;++ge)if(Mv(E,C,ue[ge],ue[ge+1]))return!0;return!1}t(_d,"lineIntersectPolygon");function wd(E,C){for(var I=0;I<E.length;++I)if(!Tv(E[I],C))return!1;for(var V=0;V<E.length-1;++V)if(_d(E[V],E[V+1],C))return!1;return!0}t(wd,"lineStringWithinPolygon");function Eu(E,C){for(var I=0;I<C.length;I++)if(wd(E,C[I]))return!0;return!1}t(Eu,"lineStringWithinPolygons");function kv(E,C,I){for(var V=[],J=0;J<E.length;J++){for(var ue=[],ge=0;ge<E[J].length;ge++){var ke=kp(E[J][ge],I);Bh(C,ke),ue.push(ke)}V.push(ue)}return V}t(kv,"getTilePolygon");function Cu(E,C,I){for(var V=[],J=0;J<E.length;J++){var ue=kv(E[J],C,I);V.push(ue)}return V}t(Cu,"getTilePolygons");function jc(E,C,I,V){if(E[0]<I[0]||E[0]>I[2]){var J=V*.5,ue=E[0]-I[0]>J?-V:I[0]-E[0]>J?V:0;ue===0&&(ue=E[0]-I[2]>J?-V:I[2]-E[0]>J?V:0),E[0]+=ue}Bh(C,E)}t(jc,"updatePoint");function Td(E){E[0]=E[1]=1/0,E[2]=E[3]=-1/0}t(Td,"resetBBox");function Nh(E,C,I,V){for(var J=Math.pow(2,V.z)*ku,ue=[V.x*ku,V.y*ku],ge=[],ke=0,Pe=E;ke<Pe.length;ke+=1)for(var Oe=Pe[ke],Ve=0,lt=Oe;Ve<lt.length;Ve+=1){var At=lt[Ve],mt=[At.x+ue[0],At.y+ue[1]];jc(mt,C,I,J),ge.push(mt)}return ge}t(Nh,"getTilePoints");function Ev(E,C,I,V){for(var J=Math.pow(2,V.z)*ku,ue=[V.x*ku,V.y*ku],ge=[],ke=0,Pe=E;ke<Pe.length;ke+=1){for(var Oe=Pe[ke],Ve=[],lt=0,At=Oe;lt<At.length;lt+=1){var mt=At[lt],Bt=[mt.x+ue[0],mt.y+ue[1]];Bh(C,Bt),Ve.push(Bt)}ge.push(Ve)}if(C[2]-C[0]<=J/2){Td(C);for(var Kt=0,yr=ge;Kt<yr.length;Kt+=1)for(var lr=yr[Kt],Rr=0,_r=lr;Rr<_r.length;Rr+=1){var Cr=_r[Rr];jc(Cr,C,I,J)}}return ge}t(Ev,"getTileLines");function Ad(E,C){var I=[1/0,1/0,-1/0,-1/0],V=[1/0,1/0,-1/0,-1/0],J=E.canonicalID();if(C.type==="Polygon"){var ue=kv(C.coordinates,V,J),ge=Nh(E.geometry(),I,V,J);if(!Gc(I,V))return!1;for(var ke=0,Pe=ge;ke<Pe.length;ke+=1){var Oe=Pe[ke];if(!Tv(Oe,ue))return!1}}if(C.type==="MultiPolygon"){var Ve=Cu(C.coordinates,V,J),lt=Nh(E.geometry(),I,V,J);if(!Gc(I,V))return!1;for(var At=0,mt=lt;At<mt.length;At+=1){var Bt=mt[At];if(!Oh(Bt,Ve))return!1}}return!0}t(Ad,"pointsWithinPolygons");function Sd(E,C){var I=[1/0,1/0,-1/0,-1/0],V=[1/0,1/0,-1/0,-1/0],J=E.canonicalID();if(C.type==="Polygon"){var ue=kv(C.coordinates,V,J),ge=Ev(E.geometry(),I,V,J);if(!Gc(I,V))return!1;for(var ke=0,Pe=ge;ke<Pe.length;ke+=1){var Oe=Pe[ke];if(!wd(Oe,ue))return!1}}if(C.type==="MultiPolygon"){var Ve=Cu(C.coordinates,V,J),lt=Ev(E.geometry(),I,V,J);if(!Gc(I,V))return!1;for(var At=0,mt=lt;At<mt.length;At+=1){var Bt=mt[At];if(!Eu(Bt,Ve))return!1}}return!0}t(Sd,"linesWithinPolygons");var ol=t(function(C,I){this.type=Bn,this.geojson=C,this.geometries=I},"Within");ol.parse=t(function(C,I){if(C.length!==2)return I.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(Al(C[1])){var V=C[1];if(V.type==="FeatureCollection")for(var J=0;J<V.features.length;++J){var ue=V.features[J].geometry.type;if(ue==="Polygon"||ue==="MultiPolygon")return new ol(V,V.features[J].geometry)}else if(V.type==="Feature"){var ge=V.geometry.type;if(ge==="Polygon"||ge==="MultiPolygon")return new ol(V,V.geometry)}else if(V.type==="Polygon"||V.type==="MultiPolygon")return new ol(V,V)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")},"parse"),ol.prototype.evaluate=t(function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return Ad(C,this.geometries);if(C.geometryType()==="LineString")return Sd(C,this.geometries)}return!1},"evaluate"),ol.prototype.eachChild=t(function(){},"eachChild"),ol.prototype.outputDefined=t(function(){return!0},"outputDefined"),ol.prototype.serialize=t(function(){return["within",this.geojson]},"serialize");function Yc(E){if(E instanceof os){if(E.name==="get"&&E.args.length===1)return!1;if(E.name==="feature-state")return!1;if(E.name==="has"&&E.args.length===1)return!1;if(E.name==="properties"||E.name==="geometry-type"||E.name==="id")return!1;if(/^filter-/.test(E.name))return!1}if(E instanceof ol)return!1;var C=!0;return E.eachChild(function(I){C&&!Yc(I)&&(C=!1)}),C}t(Yc,"isFeatureConstant");function lc(E){if(E instanceof os&&E.name==="feature-state")return!1;var C=!0;return E.eachChild(function(I){C&&!lc(I)&&(C=!1)}),C}t(lc,"isStateConstant");function Wc(E,C){if(E instanceof os&&C.indexOf(E.name)>=0)return!1;var I=!0;return E.eachChild(function(V){I&&!Wc(V,C)&&(I=!1)}),I}t(Wc,"isGlobalPropertyConstant");var Oo=t(function(C,I){this.type=I.type,this.name=C,this.boundExpression=I},"Var");Oo.parse=t(function(C,I){if(C.length!==2||typeof C[1]!="string")return I.error("'var' expression requires exactly one string literal argument.");var V=C[1];return I.scope.has(V)?new Oo(V,I.scope.get(V)):I.error('Unknown variable "'+V+'". Make sure "'+V+'" has been bound in an enclosing "let" expression before using it.',1)},"parse"),Oo.prototype.evaluate=t(function(C){return this.boundExpression.evaluate(C)},"evaluate"),Oo.prototype.eachChild=t(function(){},"eachChild"),Oo.prototype.outputDefined=t(function(){return!1},"outputDefined"),Oo.prototype.serialize=t(function(){return["var",this.name]},"serialize");var Lu=t(function(C,I,V,J,ue){I===void 0&&(I=[]),J===void 0&&(J=new $s),ue===void 0&&(ue=[]),this.registry=C,this.path=I,this.key=I.map(function(ge){return"["+ge+"]"}).join(""),this.scope=J,this.errors=ue,this.expectedType=V},"ParsingContext");Lu.prototype.parse=t(function(C,I,V,J,ue){return ue===void 0&&(ue={}),I?this.concat(I,V,J)._parse(C,ue):this._parse(C,ue)},"parse"),Lu.prototype._parse=t(function(C,I){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function V(Ve,lt,At){return At==="assert"?new Lo(lt,[Ve]):At==="coerce"?new Vs(lt,[Ve]):Ve}if(t(V,"annotate"),Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var J=C[0];if(typeof J!="string")return this.error("Expression name must be a string, but found "+typeof J+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ue=this.registry[J];if(ue){var ge=ue.parse(C,this);if(!ge)return null;if(this.expectedType){var ke=this.expectedType,Pe=ge.type;if((ke.kind==="string"||ke.kind==="number"||ke.kind==="boolean"||ke.kind==="object"||ke.kind==="array")&&Pe.kind==="value")ge=V(ge,ke,I.typeAnnotation||"assert");else if((ke.kind==="color"||ke.kind==="formatted"||ke.kind==="resolvedImage")&&(Pe.kind==="value"||Pe.kind==="string"))ge=V(ge,ke,I.typeAnnotation||"coerce");else if(this.checkSubtype(ke,Pe))return null}if(!(ge instanceof il)&&ge.type.kind!=="resolvedImage"&&qh(ge)){var Oe=new Mu;try{ge=new il(ge.type,ge.evaluate(Oe))}catch(Ve){return this.error(Ve.message),null}}return ge}return this.error('Unknown expression "'+J+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C>"u"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},"_parse"),Lu.prototype.concat=t(function(C,I,V){var J=typeof C=="number"?this.path.concat(C):this.path,ue=V?this.scope.concat(V):this.scope;return new Lu(this.registry,J,I||null,ue,this.errors)},"concat"),Lu.prototype.error=t(function(C){for(var I=[],V=arguments.length-1;V-- >0;)I[V]=arguments[V+1];var J=""+this.key+I.map(function(ue){return"["+ue+"]"}).join("");this.errors.push(new is(J,C))},"error"),Lu.prototype.checkSubtype=t(function(C,I){var V=af(C,I);return V&&this.error(V),V},"checkSubtype$1");function qh(E){if(E instanceof Oo)return qh(E.boundExpression);if(E instanceof os&&E.name==="error")return!1;if(E instanceof to)return!1;if(E instanceof ol)return!1;var C=E instanceof Vs||E instanceof Lo,I=!0;return E.eachChild(function(V){C?I=I&&qh(V):I=I&&V instanceof il}),I?Yc(E)&&Wc(E,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}t(qh,"isConstant");function Sl(E,C){for(var I=E.length-1,V=0,J=I,ue=0,ge,ke;V<=J;)if(ue=Math.floor((V+J)/2),ge=E[ue],ke=E[ue+1],ge<=C){if(ue===I||C<ke)return ue;V=ue+1}else if(ge>C)J=ue-1;else throw new Ui("Input is not a number.");return 0}t(Sl,"findStopLessThanOrEqualTo");var eu=t(function(C,I,V){this.type=C,this.input=I,this.labels=[],this.outputs=[];for(var J=0,ue=V;J<ue.length;J+=1){var ge=ue[J],ke=ge[0],Pe=ge[1];this.labels.push(ke),this.outputs.push(Pe)}},"Step");eu.parse=t(function(C,I){if(C.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return I.error("Expected an even number of arguments.");var V=I.parse(C[1],1,Ga);if(!V)return null;var J=[],ue=null;I.expectedType&&I.expectedType.kind!=="value"&&(ue=I.expectedType);for(var ge=1;ge<C.length;ge+=2){var ke=ge===1?-1/0:C[ge],Pe=C[ge+1],Oe=ge,Ve=ge+1;if(typeof ke!="number")return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Oe);if(J.length&&J[J.length-1][0]>=ke)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Oe);var lt=I.parse(Pe,Ve,ue);if(!lt)return null;ue=ue||lt.type,J.push([ke,lt])}return new eu(ue,V,J)},"parse"),eu.prototype.evaluate=t(function(C){var I=this.labels,V=this.outputs;if(I.length===1)return V[0].evaluate(C);var J=this.input.evaluate(C);if(J<=I[0])return V[0].evaluate(C);var ue=I.length;if(J>=I[ue-1])return V[ue-1].evaluate(C);var ge=Sl(I,J);return V[ge].evaluate(C)},"evaluate"),eu.prototype.eachChild=t(function(C){C(this.input);for(var I=0,V=this.outputs;I<V.length;I+=1){var J=V[I];C(J)}},"eachChild"),eu.prototype.outputDefined=t(function(){return this.outputs.every(function(C){return C.outputDefined()})},"outputDefined"),eu.prototype.serialize=t(function(){for(var C=["step",this.input.serialize()],I=0;I<this.labels.length;I++)I>0&&C.push(this.labels[I]),C.push(this.outputs[I].serialize());return C},"serialize");function ro(E,C,I){return E*(1-I)+C*I}t(ro,"number");function uc(E,C,I){return new yi(ro(E.r,C.r,I),ro(E.g,C.g,I),ro(E.b,C.b,I),ro(E.a,C.a,I))}t(uc,"color");function fc(E,C,I){return E.map(function(V,J){return ro(V,C[J],I)})}t(fc,"array$1");var Gs=Object.freeze({__proto__:null,number:ro,color:uc,array:fc}),Cv=.95047,Lv=1,Md=1.08883,kd=4/29,zf=6/29,Ed=3*zf*zf,Lp=zf*zf*zf,Rp=Math.PI/180,Rv=180/Math.PI;function cc(E){return E>Lp?Math.pow(E,1/3):E/Ed+kd}t(cc,"xyz2lab");function Xc(E){return E>zf?E*E*E:Ed*(E-kd)}t(Xc,"lab2xyz");function Zc(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}t(Zc,"xyz2rgb");function Uh(E){return E/=255,E<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}t(Uh,"rgb2xyz");function Kc(E){var C=Uh(E.r),I=Uh(E.g),V=Uh(E.b),J=cc((.4124564*C+.3575761*I+.1804375*V)/Cv),ue=cc((.2126729*C+.7151522*I+.072175*V)/Lv),ge=cc((.0193339*C+.119192*I+.9503041*V)/Md);return{l:116*ue-16,a:500*(J-ue),b:200*(ue-ge),alpha:E.a}}t(Kc,"rgbToLab");function Hh(E){var C=(E.l+16)/116,I=isNaN(E.a)?C:C+E.a/500,V=isNaN(E.b)?C:C-E.b/200;return C=Lv*Xc(C),I=Cv*Xc(I),V=Md*Xc(V),new yi(Zc(3.2404542*I-1.5371385*C-.4985314*V),Zc(-.969266*I+1.8760108*C+.041556*V),Zc(.0556434*I-.2040259*C+1.0572252*V),E.alpha)}t(Hh,"labToRgb");function Pp(E,C,I){return{l:ro(E.l,C.l,I),a:ro(E.a,C.a,I),b:ro(E.b,C.b,I),alpha:ro(E.alpha,C.alpha,I)}}t(Pp,"interpolateLab");function Pv(E){var C=Kc(E),I=C.l,V=C.a,J=C.b,ue=Math.atan2(J,V)*Rv;return{h:ue<0?ue+360:ue,c:Math.sqrt(V*V+J*J),l:I,alpha:E.a}}t(Pv,"rgbToHcl");function ji(E){var C=E.h*Rp,I=E.c,V=E.l;return Hh({l:V,a:Math.cos(C)*I,b:Math.sin(C)*I,alpha:E.alpha})}t(ji,"hclToRgb");function Dp(E,C,I){var V=C-E;return E+I*(V>180||V<-180?V-360*Math.round(V/360):V)}t(Dp,"interpolateHue");function hc(E,C,I){return{h:Dp(E.h,C.h,I),c:ro(E.c,C.c,I),l:ro(E.l,C.l,I),alpha:ro(E.alpha,C.alpha,I)}}t(hc,"interpolateHcl");var Ff={forward:Kc,reverse:Hh,interpolate:Pp},Bf={forward:Pv,reverse:ji,interpolate:hc},$h=Object.freeze({__proto__:null,lab:Ff,hcl:Bf}),es=t(function(C,I,V,J,ue){this.type=C,this.operator=I,this.interpolation=V,this.input=J,this.labels=[],this.outputs=[];for(var ge=0,ke=ue;ge<ke.length;ge+=1){var Pe=ke[ge],Oe=Pe[0],Ve=Pe[1];this.labels.push(Oe),this.outputs.push(Ve)}},"Interpolate");es.interpolationFactor=t(function(C,I,V,J){var ue=0;if(C.name==="exponential")ue=Dv(I,C.base,V,J);else if(C.name==="linear")ue=Dv(I,1,V,J);else if(C.name==="cubic-bezier"){var ge=C.controlPoints,ke=new f(ge[0],ge[1],ge[2],ge[3]);ue=ke.solve(Dv(I,1,V,J))}return ue},"interpolationFactor"),es.parse=t(function(C,I){var V=C[0],J=C[1],ue=C[2],ge=C.slice(3);if(!Array.isArray(J)||J.length===0)return I.error("Expected an interpolation type expression.",1);if(J[0]==="linear")J={name:"linear"};else if(J[0]==="exponential"){var ke=J[1];if(typeof ke!="number")return I.error("Exponential interpolation requires a numeric base.",1,1);J={name:"exponential",base:ke}}else if(J[0]==="cubic-bezier"){var Pe=J.slice(1);if(Pe.length!==4||Pe.some(function(lr){return typeof lr!="number"||lr<0||lr>1}))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);J={name:"cubic-bezier",controlPoints:Pe}}else return I.error("Unknown interpolation type "+String(J[0]),1,0);if(C.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return I.error("Expected an even number of arguments.");if(ue=I.parse(ue,2,Ga),!ue)return null;var Oe=[],Ve=null;V==="interpolate-hcl"||V==="interpolate-lab"?Ve=wl:I.expectedType&&I.expectedType.kind!=="value"&&(Ve=I.expectedType);for(var lt=0;lt<ge.length;lt+=2){var At=ge[lt],mt=ge[lt+1],Bt=lt+3,Kt=lt+4;if(typeof At!="number")return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bt);if(Oe.length&&Oe[Oe.length-1][0]>=At)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Bt);var yr=I.parse(mt,Kt,Ve);if(!yr)return null;Ve=Ve||yr.type,Oe.push([At,yr])}return Ve.kind!=="number"&&Ve.kind!=="color"&&!(Ve.kind==="array"&&Ve.itemType.kind==="number"&&typeof Ve.N=="number")?I.error("Type "+Di(Ve)+" is not interpolatable."):new es(Ve,V,J,ue,Oe)},"parse"),es.prototype.evaluate=t(function(C){var I=this.labels,V=this.outputs;if(I.length===1)return V[0].evaluate(C);var J=this.input.evaluate(C);if(J<=I[0])return V[0].evaluate(C);var ue=I.length;if(J>=I[ue-1])return V[ue-1].evaluate(C);var ge=Sl(I,J),ke=I[ge],Pe=I[ge+1],Oe=es.interpolationFactor(this.interpolation,J,ke,Pe),Ve=V[ge].evaluate(C),lt=V[ge+1].evaluate(C);return this.operator==="interpolate"?Gs[this.type.kind.toLowerCase()](Ve,lt,Oe):this.operator==="interpolate-hcl"?Bf.reverse(Bf.interpolate(Bf.forward(Ve),Bf.forward(lt),Oe)):Ff.reverse(Ff.interpolate(Ff.forward(Ve),Ff.forward(lt),Oe))},"evaluate"),es.prototype.eachChild=t(function(C){C(this.input);for(var I=0,V=this.outputs;I<V.length;I+=1){var J=V[I];C(J)}},"eachChild"),es.prototype.outputDefined=t(function(){return this.outputs.every(function(C){return C.outputDefined()})},"outputDefined"),es.prototype.serialize=t(function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var I=[this.operator,C,this.input.serialize()],V=0;V<this.labels.length;V++)I.push(this.labels[V],this.outputs[V].serialize());return I},"serialize");function Dv(E,C,I,V){var J=V-I,ue=E-I;return J===0?0:C===1?ue/J:(Math.pow(C,ue)-1)/(Math.pow(C,J)-1)}t(Dv,"exponentialInterpolation");var $l=t(function(C,I){this.type=C,this.args=I},"Coalesce");$l.parse=t(function(C,I){if(C.length<2)return I.error("Expectected at least one argument.");var V=null,J=I.expectedType;J&&J.kind!=="value"&&(V=J);for(var ue=[],ge=0,ke=C.slice(1);ge<ke.length;ge+=1){var Pe=ke[ge],Oe=I.parse(Pe,1+ue.length,V,void 0,{typeAnnotation:"omit"});if(!Oe)return null;V=V||Oe.type,ue.push(Oe)}var Ve=J&&ue.some(function(lt){return af(J,lt.type)});return Ve?new $l(Kn,ue):new $l(V,ue)},"parse"),$l.prototype.evaluate=t(function(C){for(var I=null,V=0,J,ue=0,ge=this.args;ue<ge.length;ue+=1){var ke=ge[ue];if(V++,I=ke.evaluate(C),I&&I instanceof ws&&!I.available&&(J||(J=I.name),I=null,V===this.args.length&&(I=J)),I!==null)break}return I},"evaluate"),$l.prototype.eachChild=t(function(C){this.args.forEach(C)},"eachChild"),$l.prototype.outputDefined=t(function(){return this.args.every(function(C){return C.outputDefined()})},"outputDefined"),$l.prototype.serialize=t(function(){var C=["coalesce"];return this.eachChild(function(I){C.push(I.serialize())}),C},"serialize");var Ru=t(function(C,I){this.type=I.type,this.bindings=[].concat(C),this.result=I},"Let");Ru.prototype.evaluate=t(function(C){return this.result.evaluate(C)},"evaluate"),Ru.prototype.eachChild=t(function(C){for(var I=0,V=this.bindings;I<V.length;I+=1){var J=V[I];C(J[1])}C(this.result)},"eachChild"),Ru.parse=t(function(C,I){if(C.length<4)return I.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var V=[],J=1;J<C.length-1;J+=2){var ue=C[J];if(typeof ue!="string")return I.error("Expected string, but found "+typeof ue+" instead.",J);if(/[^a-zA-Z0-9_]/.test(ue))return I.error("Variable names must contain only alphanumeric characters or '_'.",J);var ge=I.parse(C[J+1],J+1);if(!ge)return null;V.push([ue,ge])}var ke=I.parse(C[C.length-1],C.length-1,I.expectedType,V);return ke?new Ru(V,ke):null},"parse"),Ru.prototype.outputDefined=t(function(){return this.result.outputDefined()},"outputDefined"),Ru.prototype.serialize=t(function(){for(var C=["let"],I=0,V=this.bindings;I<V.length;I+=1){var J=V[I],ue=J[0],ge=J[1];C.push(ue,ge.serialize())}return C.push(this.result.serialize()),C},"serialize");var nf=t(function(C,I,V){this.type=C,this.index=I,this.input=V},"At");nf.parse=t(function(C,I){if(C.length!==3)return I.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var V=I.parse(C[1],1,Ga),J=I.parse(C[2],2,Co(I.expectedType||Kn));if(!V||!J)return null;var ue=J.type;return new nf(ue.itemType,V,J)},"parse"),nf.prototype.evaluate=t(function(C){var I=this.index.evaluate(C),V=this.input.evaluate(C);if(I<0)throw new Ui("Array index out of bounds: "+I+" < 0.");if(I>=V.length)throw new Ui("Array index out of bounds: "+I+" > "+(V.length-1)+".");if(I!==Math.floor(I))throw new Ui("Array index must be an integer, but found "+I+" instead.");return V[I]},"evaluate"),nf.prototype.eachChild=t(function(C){C(this.index),C(this.input)},"eachChild"),nf.prototype.outputDefined=t(function(){return!1},"outputDefined"),nf.prototype.serialize=t(function(){return["at",this.index.serialize(),this.input.serialize()]},"serialize");var Pu=t(function(C,I){this.type=Bn,this.needle=C,this.haystack=I},"In");Pu.parse=t(function(C,I){if(C.length!==3)return I.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var V=I.parse(C[1],1,Kn),J=I.parse(C[2],2,Kn);return!V||!J?null:Au(V.type,[Bn,Yn,Ga,Jo,Kn])?new Pu(V,J):I.error("Expected first argument to be of type boolean, string, number or null, but found "+Di(V.type)+" instead")},"parse"),Pu.prototype.evaluate=t(function(C){var I=this.needle.evaluate(C),V=this.haystack.evaluate(C);if(!V)return!1;if(!Tl(I,["boolean","string","number","null"]))throw new Ui("Expected first argument to be of type boolean, string, number or null, but found "+Di(Ao(I))+" instead.");if(!Tl(V,["string","array"]))throw new Ui("Expected second argument to be of type array or string, but found "+Di(Ao(V))+" instead.");return V.indexOf(I)>=0},"evaluate"),Pu.prototype.eachChild=t(function(C){C(this.needle),C(this.haystack)},"eachChild"),Pu.prototype.outputDefined=t(function(){return!0},"outputDefined"),Pu.prototype.serialize=t(function(){return["in",this.needle.serialize(),this.haystack.serialize()]},"serialize");var tu=t(function(C,I,V){this.type=Ga,this.needle=C,this.haystack=I,this.fromIndex=V},"IndexOf");tu.parse=t(function(C,I){if(C.length<=2||C.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var V=I.parse(C[1],1,Kn),J=I.parse(C[2],2,Kn);if(!V||!J)return null;if(!Au(V.type,[Bn,Yn,Ga,Jo,Kn]))return I.error("Expected first argument to be of type boolean, string, number or null, but found "+Di(V.type)+" instead");if(C.length===4){var ue=I.parse(C[3],3,Ga);return ue?new tu(V,J,ue):null}else return new tu(V,J)},"parse"),tu.prototype.evaluate=t(function(C){var I=this.needle.evaluate(C),V=this.haystack.evaluate(C);if(!Tl(I,["boolean","string","number","null"]))throw new Ui("Expected first argument to be of type boolean, string, number or null, but found "+Di(Ao(I))+" instead.");if(!Tl(V,["string","array"]))throw new Ui("Expected second argument to be of type array or string, but found "+Di(Ao(V))+" instead.");if(this.fromIndex){var J=this.fromIndex.evaluate(C);return V.indexOf(I,J)}return V.indexOf(I)},"evaluate"),tu.prototype.eachChild=t(function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},"eachChild"),tu.prototype.outputDefined=t(function(){return!1},"outputDefined"),tu.prototype.serialize=t(function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]},"serialize");var Of=t(function(C,I,V,J,ue,ge){this.inputType=C,this.type=I,this.input=V,this.cases=J,this.outputs=ue,this.otherwise=ge},"Match");Of.parse=t(function(C,I){if(C.length<5)return I.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!==1)return I.error("Expected an even number of arguments.");var V,J;I.expectedType&&I.expectedType.kind!=="value"&&(J=I.expectedType);for(var ue={},ge=[],ke=2;ke<C.length-1;ke+=2){var Pe=C[ke],Oe=C[ke+1];Array.isArray(Pe)||(Pe=[Pe]);var Ve=I.concat(ke);if(Pe.length===0)return Ve.error("Expected at least one branch label.");for(var lt=0,At=Pe;lt<At.length;lt+=1){var mt=At[lt];if(typeof mt!="number"&&typeof mt!="string")return Ve.error("Branch labels must be numbers or strings.");if(typeof mt=="number"&&Math.abs(mt)>Number.MAX_SAFE_INTEGER)return Ve.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof mt=="number"&&Math.floor(mt)!==mt)return Ve.error("Numeric branch labels must be integer values.");if(!V)V=Ao(mt);else if(Ve.checkSubtype(V,Ao(mt)))return null;if(typeof ue[String(mt)]<"u")return Ve.error("Branch labels must be unique.");ue[String(mt)]=ge.length}var Bt=I.parse(Oe,ke,J);if(!Bt)return null;J=J||Bt.type,ge.push(Bt)}var Kt=I.parse(C[1],1,Kn);if(!Kt)return null;var yr=I.parse(C[C.length-1],C.length-1,J);return!yr||Kt.type.kind!=="value"&&I.concat(1).checkSubtype(V,Kt.type)?null:new Of(V,J,Kt,ue,ge,yr)},"parse"),Of.prototype.evaluate=t(function(C){var I=this.input.evaluate(C),V=Ao(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise;return V.evaluate(C)},"evaluate"),Of.prototype.eachChild=t(function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},"eachChild"),Of.prototype.outputDefined=t(function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},"outputDefined"),Of.prototype.serialize=t(function(){for(var C=this,I=["match",this.input.serialize()],V=Object.keys(this.cases).sort(),J=[],ue={},ge=0,ke=V;ge<ke.length;ge+=1){var Pe=ke[ge],Oe=ue[this.cases[Pe]];Oe===void 0?(ue[this.cases[Pe]]=J.length,J.push([this.cases[Pe],[Pe]])):J[Oe][1].push(Pe)}for(var Ve=t(function(Kt){return C.inputType.kind==="number"?Number(Kt):Kt},"coerceLabel"),lt=0,At=J;lt<At.length;lt+=1){var mt=At[lt],Oe=mt[0],Bt=mt[1];Bt.length===1?I.push(Ve(Bt[0])):I.push(Bt.map(Ve)),I.push(this.outputs[outputIndex$1].serialize())}return I.push(this.otherwise.serialize()),I},"serialize");var of=t(function(C,I,V){this.type=C,this.branches=I,this.otherwise=V},"Case");of.parse=t(function(C,I){if(C.length<4)return I.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!==0)return I.error("Expected an odd number of arguments.");var V;I.expectedType&&I.expectedType.kind!=="value"&&(V=I.expectedType);for(var J=[],ue=1;ue<C.length-1;ue+=2){var ge=I.parse(C[ue],ue,Bn);if(!ge)return null;var ke=I.parse(C[ue+1],ue+1,V);if(!ke)return null;J.push([ge,ke]),V=V||ke.type}var Pe=I.parse(C[C.length-1],C.length-1,V);return Pe?new of(V,J,Pe):null},"parse"),of.prototype.evaluate=t(function(C){for(var I=0,V=this.branches;I<V.length;I+=1){var J=V[I],ue=J[0],ge=J[1];if(ue.evaluate(C))return ge.evaluate(C)}return this.otherwise.evaluate(C)},"evaluate"),of.prototype.eachChild=t(function(C){for(var I=0,V=this.branches;I<V.length;I+=1){var J=V[I],ue=J[0],ge=J[1];C(ue),C(ge)}C(this.otherwise)},"eachChild"),of.prototype.outputDefined=t(function(){return this.branches.every(function(C){C[0];var I=C[1];return I.outputDefined()})&&this.otherwise.outputDefined()},"outputDefined"),of.prototype.serialize=t(function(){var C=["case"];return this.eachChild(function(I){C.push(I.serialize())}),C},"serialize");var ts=t(function(C,I,V,J){this.type=C,this.input=I,this.beginIndex=V,this.endIndex=J},"Slice");ts.parse=t(function(C,I){if(C.length<=2||C.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var V=I.parse(C[1],1,Kn),J=I.parse(C[2],2,Ga);if(!V||!J)return null;if(!Au(V.type,[Co(Kn),Yn,Kn]))return I.error("Expected first argument to be of type array or string, but found "+Di(V.type)+" instead");if(C.length===4){var ue=I.parse(C[3],3,Ga);return ue?new ts(V.type,V,J,ue):null}else return new ts(V.type,V,J)},"parse"),ts.prototype.evaluate=t(function(C){var I=this.input.evaluate(C),V=this.beginIndex.evaluate(C);if(!Tl(I,["string","array"]))throw new Ui("Expected first argument to be of type array or string, but found "+Di(Ao(I))+" instead.");if(this.endIndex){var J=this.endIndex.evaluate(C);return I.slice(V,J)}return I.slice(V)},"evaluate"),ts.prototype.eachChild=t(function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},"eachChild"),ts.prototype.outputDefined=t(function(){return!1},"outputDefined"),ts.prototype.serialize=t(function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]},"serialize");function Iv(E,C){return E==="=="||E==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}t(Iv,"isComparableType");function Ip(E,C,I){return C===I}t(Ip,"eq");function Cd(E,C,I){return C!==I}t(Cd,"neq");function Ld(E,C,I){return C<I}t(Ld,"lt");function zv(E,C,I){return C>I}t(zv,"gt");function Rd(E,C,I){return C<=I}t(Rd,"lteq");function Vh(E,C,I){return C>=I}t(Vh,"gteq");function Jc(E,C,I,V){return V.compare(C,I)===0}t(Jc,"eqCollate");function zp(E,C,I,V){return!Jc(E,C,I,V)}t(zp,"neqCollate");function Ro(E,C,I,V){return V.compare(C,I)<0}t(Ro,"ltCollate");function Nf(E,C,I,V){return V.compare(C,I)>0}t(Nf,"gtCollate");function qf(E,C,I,V){return V.compare(C,I)<=0}t(qf,"lteqCollate");function Fp(E,C,I,V){return V.compare(C,I)>=0}t(Fp,"gteqCollate");function Ml(E,C,I){var V=E!=="=="&&E!=="!=";return function(){function J(ue,ge,ke){this.type=Bn,this.lhs=ue,this.rhs=ge,this.collator=ke,this.hasUntypedArgument=ue.type.kind==="value"||ge.type.kind==="value"}return t(J,"Comparison"),J.parse=t(function(ge,ke){if(ge.length!==3&&ge.length!==4)return ke.error("Expected two or three arguments.");var Pe=ge[0],Oe=ke.parse(ge[1],1,Kn);if(!Oe)return null;if(!Iv(Pe,Oe.type))return ke.concat(1).error('"'+Pe+`" comparisons are not supported for type '`+Di(Oe.type)+"'.");var Ve=ke.parse(ge[2],2,Kn);if(!Ve)return null;if(!Iv(Pe,Ve.type))return ke.concat(2).error('"'+Pe+`" comparisons are not supported for type '`+Di(Ve.type)+"'.");if(Oe.type.kind!==Ve.type.kind&&Oe.type.kind!=="value"&&Ve.type.kind!=="value")return ke.error("Cannot compare types '"+Di(Oe.type)+"' and '"+Di(Ve.type)+"'.");V&&(Oe.type.kind==="value"&&Ve.type.kind!=="value"?Oe=new Lo(Ve.type,[Oe]):Oe.type.kind!=="value"&&Ve.type.kind==="value"&&(Ve=new Lo(Oe.type,[Ve])));var lt=null;if(ge.length===4){if(Oe.type.kind!=="string"&&Ve.type.kind!=="string"&&Oe.type.kind!=="value"&&Ve.type.kind!=="value")return ke.error("Cannot use collator to compare non-string types.");if(lt=ke.parse(ge[3],3,rf),!lt)return null}return new J(Oe,Ve,lt)},"parse"),J.prototype.evaluate=t(function(ge){var ke=this.lhs.evaluate(ge),Pe=this.rhs.evaluate(ge);if(V&&this.hasUntypedArgument){var Oe=Ao(ke),Ve=Ao(Pe);if(Oe.kind!==Ve.kind||!(Oe.kind==="string"||Oe.kind==="number"))throw new Ui('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+Oe.kind+", "+Ve.kind+") instead.")}if(this.collator&&!V&&this.hasUntypedArgument){var lt=Ao(ke),At=Ao(Pe);if(lt.kind!=="string"||At.kind!=="string")return C(ge,ke,Pe)}return this.collator?I(ge,ke,Pe,this.collator.evaluate(ge)):C(ge,ke,Pe)},"evaluate"),J.prototype.eachChild=t(function(ge){ge(this.lhs),ge(this.rhs),this.collator&&ge(this.collator)},"eachChild"),J.prototype.outputDefined=t(function(){return!0},"outputDefined"),J.prototype.serialize=t(function(){var ge=[E];return this.eachChild(function(ke){ge.push(ke.serialize())}),ge},"serialize"),J}()}t(Ml,"makeComparison");var Fv=Ml("==",Ip,Jc),Uf=Ml("!=",Cd,zp),Qc=Ml("<",Ld,Ro),eh=Ml(">",zv,Nf),Gh=Ml("<=",Rd,qf),Bv=Ml(">=",Vh,Fp),ru=t(function(C,I,V,J,ue){this.type=Yn,this.number=C,this.locale=I,this.currency=V,this.minFractionDigits=J,this.maxFractionDigits=ue},"NumberFormat");ru.parse=t(function(C,I){if(C.length!==3)return I.error("Expected two arguments.");var V=I.parse(C[1],1,Ga);if(!V)return null;var J=C[2];if(typeof J!="object"||Array.isArray(J))return I.error("NumberFormat options argument must be an object.");var ue=null;if(J.locale&&(ue=I.parse(J.locale,1,Yn),!ue))return null;var ge=null;if(J.currency&&(ge=I.parse(J.currency,1,Yn),!ge))return null;var ke=null;if(J["min-fraction-digits"]&&(ke=I.parse(J["min-fraction-digits"],1,Ga),!ke))return null;var Pe=null;return J["max-fraction-digits"]&&(Pe=I.parse(J["max-fraction-digits"],1,Ga),!Pe)?null:new ru(V,ue,ge,ke,Pe)},"parse"),ru.prototype.evaluate=t(function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},"evaluate"),ru.prototype.eachChild=t(function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},"eachChild"),ru.prototype.outputDefined=t(function(){return!1},"outputDefined"),ru.prototype.serialize=t(function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]},"serialize");var sl=t(function(C){this.type=Ga,this.input=C},"Length");sl.parse=t(function(C,I){if(C.length!==2)return I.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var V=I.parse(C[1],1);return V?V.type.kind!=="array"&&V.type.kind!=="string"&&V.type.kind!=="value"?I.error("Expected argument of type string or array, but found "+Di(V.type)+" instead."):new sl(V):null},"parse"),sl.prototype.evaluate=t(function(C){var I=this.input.evaluate(C);if(typeof I=="string")return I.length;if(Array.isArray(I))return I.length;throw new Ui("Expected value to be of type string or array, but found "+Di(Ao(I))+" instead.")},"evaluate"),sl.prototype.eachChild=t(function(C){C(this.input)},"eachChild"),sl.prototype.outputDefined=t(function(){return!1},"outputDefined"),sl.prototype.serialize=t(function(){var C=["length"];return this.eachChild(function(I){C.push(I.serialize())}),C},"serialize");var sf={"==":Fv,"!=":Uf,">":eh,"<":Qc,">=":Bv,"<=":Gh,array:Lo,at:nf,boolean:Lo,case:of,coalesce:$l,collator:to,format:Ql,image:Su,in:Pu,"index-of":tu,interpolate:es,"interpolate-hcl":es,"interpolate-lab":es,length:sl,let:Ru,literal:il,match:Of,number:Lo,"number-format":ru,object:Lo,slice:ts,step:eu,string:Lo,"to-boolean":Vs,"to-color":Vs,"to-number":Vs,"to-string":Vs,var:Oo,within:ol};function Ov(E,C){var I=C[0],V=C[1],J=C[2],ue=C[3];I=I.evaluate(E),V=V.evaluate(E),J=J.evaluate(E);var ge=ue?ue.evaluate(E):1,ke=_v(I,V,J,ge);if(ke)throw new Ui(ke);return new yi(I/255*ge,V/255*ge,J/255*ge,ge)}t(Ov,"rgba");function Nv(E,C){return E in C}t(Nv,"has");function vc(E,C){var I=C[E];return typeof I>"u"?null:I}t(vc,"get");function Pd(E,C,I,V){for(;I<=V;){var J=I+V>>1;if(C[J]===E)return!0;C[J]>E?V=J-1:I=J+1}return!1}t(Pd,"binarySearch");function au(E){return{type:E}}t(au,"varargs"),os.register(sf,{error:[tf,[Yn],function(E,C){var I=C[0];throw new Ui(I.evaluate(E))}],typeof:[Yn,[Kn],function(E,C){var I=C[0];return Di(Ao(I.evaluate(E)))}],"to-rgba":[Co(Ga,4),[wl],function(E,C){var I=C[0];return I.evaluate(E).toArray()}],rgb:[wl,[Ga,Ga,Ga],Ov],rgba:[wl,[Ga,Ga,Ga,Ga],Ov],has:{type:Bn,overloads:[[[Yn],function(E,C){var I=C[0];return Nv(I.evaluate(E),E.properties())}],[[Yn,nl],function(E,C){var I=C[0],V=C[1];return Nv(I.evaluate(E),V.evaluate(E))}]]},get:{type:Kn,overloads:[[[Yn],function(E,C){var I=C[0];return vc(I.evaluate(E),E.properties())}],[[Yn,nl],function(E,C){var I=C[0],V=C[1];return vc(I.evaluate(E),V.evaluate(E))}]]},"feature-state":[Kn,[Yn],function(E,C){var I=C[0];return vc(I.evaluate(E),E.featureState||{})}],properties:[nl,[],function(E){return E.properties()}],"geometry-type":[Yn,[],function(E){return E.geometryType()}],id:[Kn,[],function(E){return E.id()}],zoom:[Ga,[],function(E){return E.globals.zoom}],"heatmap-density":[Ga,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[Ga,[],function(E){return E.globals.lineProgress||0}],accumulated:[Kn,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[Ga,au(Ga),function(E,C){for(var I=0,V=0,J=C;V<J.length;V+=1){var ue=J[V];I+=ue.evaluate(E)}return I}],"*":[Ga,au(Ga),function(E,C){for(var I=1,V=0,J=C;V<J.length;V+=1){var ue=J[V];I*=ue.evaluate(E)}return I}],"-":{type:Ga,overloads:[[[Ga,Ga],function(E,C){var I=C[0],V=C[1];return I.evaluate(E)-V.evaluate(E)}],[[Ga],function(E,C){var I=C[0];return-I.evaluate(E)}]]},"/":[Ga,[Ga,Ga],function(E,C){var I=C[0],V=C[1];return I.evaluate(E)/V.evaluate(E)}],"%":[Ga,[Ga,Ga],function(E,C){var I=C[0],V=C[1];return I.evaluate(E)%V.evaluate(E)}],ln2:[Ga,[],function(){return Math.LN2}],pi:[Ga,[],function(){return Math.PI}],e:[Ga,[],function(){return Math.E}],"^":[Ga,[Ga,Ga],function(E,C){var I=C[0],V=C[1];return Math.pow(I.evaluate(E),V.evaluate(E))}],sqrt:[Ga,[Ga],function(E,C){var I=C[0];return Math.sqrt(I.evaluate(E))}],log10:[Ga,[Ga],function(E,C){var I=C[0];return Math.log(I.evaluate(E))/Math.LN10}],ln:[Ga,[Ga],function(E,C){var I=C[0];return Math.log(I.evaluate(E))}],log2:[Ga,[Ga],function(E,C){var I=C[0];return Math.log(I.evaluate(E))/Math.LN2}],sin:[Ga,[Ga],function(E,C){var I=C[0];return Math.sin(I.evaluate(E))}],cos:[Ga,[Ga],function(E,C){var I=C[0];return Math.cos(I.evaluate(E))}],tan:[Ga,[Ga],function(E,C){var I=C[0];return Math.tan(I.evaluate(E))}],asin:[Ga,[Ga],function(E,C){var I=C[0];return Math.asin(I.evaluate(E))}],acos:[Ga,[Ga],function(E,C){var I=C[0];return Math.acos(I.evaluate(E))}],atan:[Ga,[Ga],function(E,C){var I=C[0];return Math.atan(I.evaluate(E))}],min:[Ga,au(Ga),function(E,C){return Math.min.apply(Math,C.map(function(I){return I.evaluate(E)}))}],max:[Ga,au(Ga),function(E,C){return Math.max.apply(Math,C.map(function(I){return I.evaluate(E)}))}],abs:[Ga,[Ga],function(E,C){var I=C[0];return Math.abs(I.evaluate(E))}],round:[Ga,[Ga],function(E,C){var I=C[0],V=I.evaluate(E);return V<0?-Math.round(-V):Math.round(V)}],floor:[Ga,[Ga],function(E,C){var I=C[0];return Math.floor(I.evaluate(E))}],ceil:[Ga,[Ga],function(E,C){var I=C[0];return Math.ceil(I.evaluate(E))}],"filter-==":[Bn,[Yn,Kn],function(E,C){var I=C[0],V=C[1];return E.properties()[I.value]===V.value}],"filter-id-==":[Bn,[Kn],function(E,C){var I=C[0];return E.id()===I.value}],"filter-type-==":[Bn,[Yn],function(E,C){var I=C[0];return E.geometryType()===I.value}],"filter-<":[Bn,[Yn,Kn],function(E,C){var I=C[0],V=C[1],J=E.properties()[I.value],ue=V.value;return typeof J==typeof ue&&J<ue}],"filter-id-<":[Bn,[Kn],function(E,C){var I=C[0],V=E.id(),J=I.value;return typeof V==typeof J&&V<J}],"filter->":[Bn,[Yn,Kn],function(E,C){var I=C[0],V=C[1],J=E.properties()[I.value],ue=V.value;return typeof J==typeof ue&&J>ue}],"filter-id->":[Bn,[Kn],function(E,C){var I=C[0],V=E.id(),J=I.value;return typeof V==typeof J&&V>J}],"filter-<=":[Bn,[Yn,Kn],function(E,C){var I=C[0],V=C[1],J=E.properties()[I.value],ue=V.value;return typeof J==typeof ue&&J<=ue}],"filter-id-<=":[Bn,[Kn],function(E,C){var I=C[0],V=E.id(),J=I.value;return typeof V==typeof J&&V<=J}],"filter->=":[Bn,[Yn,Kn],function(E,C){var I=C[0],V=C[1],J=E.properties()[I.value],ue=V.value;return typeof J==typeof ue&&J>=ue}],"filter-id->=":[Bn,[Kn],function(E,C){var I=C[0],V=E.id(),J=I.value;return typeof V==typeof J&&V>=J}],"filter-has":[Bn,[Kn],function(E,C){var I=C[0];return I.value in E.properties()}],"filter-has-id":[Bn,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[Bn,[Co(Yn)],function(E,C){var I=C[0];return I.value.indexOf(E.geometryType())>=0}],"filter-id-in":[Bn,[Co(Kn)],function(E,C){var I=C[0];return I.value.indexOf(E.id())>=0}],"filter-in-small":[Bn,[Yn,Co(Kn)],function(E,C){var I=C[0],V=C[1];return V.value.indexOf(E.properties()[I.value])>=0}],"filter-in-large":[Bn,[Yn,Co(Kn)],function(E,C){var I=C[0],V=C[1];return Pd(E.properties()[I.value],V.value,0,V.value.length-1)}],all:{type:Bn,overloads:[[[Bn,Bn],function(E,C){var I=C[0],V=C[1];return I.evaluate(E)&&V.evaluate(E)}],[au(Bn),function(E,C){for(var I=0,V=C;I<V.length;I+=1){var J=V[I];if(!J.evaluate(E))return!1}return!0}]]},any:{type:Bn,overloads:[[[Bn,Bn],function(E,C){var I=C[0],V=C[1];return I.evaluate(E)||V.evaluate(E)}],[au(Bn),function(E,C){for(var I=0,V=C;I<V.length;I+=1){var J=V[I];if(J.evaluate(E))return!0}return!1}]]},"!":[Bn,[Bn],function(E,C){var I=C[0];return!I.evaluate(E)}],"is-supported-script":[Bn,[Yn],function(E,C){var I=C[0],V=E.globals&&E.globals.isSupportedScript;return V?V(I.evaluate(E)):!0}],upcase:[Yn,[Yn],function(E,C){var I=C[0];return I.evaluate(E).toUpperCase()}],downcase:[Yn,[Yn],function(E,C){var I=C[0];return I.evaluate(E).toLowerCase()}],concat:[Yn,au(Kn),function(E,C){return C.map(function(I){return Hl(I.evaluate(E))}).join("")}],"resolved-locale":[Yn,[rf],function(E,C){var I=C[0];return I.evaluate(E).resolvedLocale()}]});function dc(E){return{result:"success",value:E}}t(dc,"success");function Du(E){return{result:"error",value:E}}t(Du,"error");function Iu(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}t(Iu,"supportsPropertyExpression");function qv(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}t(qv,"supportsZoomExpression");function Hf(E){return!!E.expression&&E.expression.interpolated}t(Hf,"supportsInterpolation");function Si(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}t(Si,"getType");function th(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}t(th,"isFunction");function Uv(E){return E}t(Uv,"identityFunction");function rh(E,C){var I=C.type==="color",V=E.stops&&typeof E.stops[0][0]=="object",J=V||E.property!==void 0,ue=V||!J,ge=E.type||(Hf(C)?"exponential":"interval");if(I&&(E=Gi({},E),E.stops&&(E.stops=E.stops.map(function(da){return[da[0],yi.parse(da[1])]})),E.default?E.default=yi.parse(E.default):E.default=yi.parse(C.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!$h[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);var ke,Pe,Oe;if(ge==="exponential")ke=nh;else if(ge==="interval")ke=Vf;else if(ge==="categorical"){ke=ah,Pe=Object.create(null);for(var Ve=0,lt=E.stops;Ve<lt.length;Ve+=1){var At=lt[Ve];Pe[At[0]]=At[1]}Oe=typeof E.stops[0][0]}else if(ge==="identity")ke=Hv;else throw new Error('Unknown function type "'+ge+'"');if(V){for(var mt={},Bt=[],Kt=0;Kt<E.stops.length;Kt++){var yr=E.stops[Kt],lr=yr[0].zoom;mt[lr]===void 0&&(mt[lr]={zoom:lr,type:E.type,property:E.property,default:E.default,stops:[]},Bt.push(lr)),mt[lr].stops.push([yr[0].value,yr[1]])}for(var Rr=[],_r=0,Cr=Bt;_r<Cr.length;_r+=1){var qr=Cr[_r];Rr.push([mt[qr].zoom,rh(mt[qr],C)])}var ta={name:"linear"};return{kind:"composite",interpolationType:ta,interpolationFactor:es.interpolationFactor.bind(void 0,ta),zoomStops:Rr.map(function(da){return da[0]}),evaluate:t(function(an,Ha){var Xa=an.zoom;return nh({stops:Rr,base:E.base},C,Xa).evaluate(Xa,Ha)},"evaluate")}}else if(ue){var ga=ge==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:ga,interpolationFactor:es.interpolationFactor.bind(void 0,ga),zoomStops:E.stops.map(function(da){return da[0]}),evaluate:function(da){var an=da.zoom;return ke(E,C,an,Pe,Oe)}}}else return{kind:"source",evaluate:t(function(an,Ha){var Xa=Ha&&Ha.properties?Ha.properties[E.property]:void 0;return Xa===void 0?$f(E.default,C.default):ke(E,C,Xa,Pe,Oe)},"evaluate")}}t(rh,"createFunction");function $f(E,C,I){if(E!==void 0)return E;if(C!==void 0)return C;if(I!==void 0)return I}t($f,"coalesce");function ah(E,C,I,V,J){var ue=typeof I===J?V[I]:void 0;return $f(ue,E.default,C.default)}t(ah,"evaluateCategoricalFunction");function Vf(E,C,I){if(Si(I)!=="number")return $f(E.default,C.default);var V=E.stops.length;if(V===1||I<=E.stops[0][0])return E.stops[0][1];if(I>=E.stops[V-1][0])return E.stops[V-1][1];var J=Sl(E.stops.map(function(ue){return ue[0]}),I);return E.stops[J][1]}t(Vf,"evaluateIntervalFunction");function nh(E,C,I){var V=E.base!==void 0?E.base:1;if(Si(I)!=="number")return $f(E.default,C.default);var J=E.stops.length;if(J===1||I<=E.stops[0][0])return E.stops[0][1];if(I>=E.stops[J-1][0])return E.stops[J-1][1];var ue=Sl(E.stops.map(function(lt){return lt[0]}),I),ge=ih(I,V,E.stops[ue][0],E.stops[ue+1][0]),ke=E.stops[ue][1],Pe=E.stops[ue+1][1],Oe=Gs[C.type]||Uv;if(E.colorSpace&&E.colorSpace!=="rgb"){var Ve=$h[E.colorSpace];Oe=t(function(lt,At){return Ve.reverse(Ve.interpolate(Ve.forward(lt),Ve.forward(At),ge))},"interp")}return typeof ke.evaluate=="function"?{evaluate:t(function(){for(var At=[],mt=arguments.length;mt--;)At[mt]=arguments[mt];var Bt=ke.evaluate.apply(void 0,At),Kt=Pe.evaluate.apply(void 0,At);if(!(Bt===void 0||Kt===void 0))return Oe(Bt,Kt,ge)},"evaluate")}:Oe(ke,Pe,ge)}t(nh,"evaluateExponentialFunction");function Hv(E,C,I){return C.type==="color"?I=yi.parse(I):C.type==="formatted"?I=Qo.fromString(I.toString()):C.type==="resolvedImage"?I=ws.fromString(I.toString()):Si(I)!==C.type&&(C.type!=="enum"||!C.values[I])&&(I=void 0),$f(I,E.default,C.default)}t(Hv,"evaluateIdentityFunction");function ih(E,C,I,V){var J=V-I,ue=E-I;return J===0?0:C===1?ue/J:(Math.pow(C,ue)-1)/(Math.pow(C,J)-1)}t(ih,"interpolationFactor");var As=t(function(C,I){this.expression=C,this._warningHistory={},this._evaluator=new Mu,this._defaultValue=I?oh(I):null,this._enumValues=I&&I.type==="enum"?I.values:null},"StyleExpression");As.prototype.evaluateWithoutErrorHandling=t(function(C,I,V,J,ue,ge){return this._evaluator.globals=C,this._evaluator.feature=I,this._evaluator.featureState=V,this._evaluator.canonical=J,this._evaluator.availableImages=ue||null,this._evaluator.formattedSection=ge,this.expression.evaluate(this._evaluator)},"evaluateWithoutErrorHandling"),As.prototype.evaluate=t(function(C,I,V,J,ue,ge){this._evaluator.globals=C,this._evaluator.feature=I||null,this._evaluator.featureState=V||null,this._evaluator.canonical=J,this._evaluator.availableImages=ue||null,this._evaluator.formattedSection=ge||null;try{var ke=this.expression.evaluate(this._evaluator);if(ke==null||typeof ke=="number"&&ke!==ke)return this._defaultValue;if(this._enumValues&&!(ke in this._enumValues))throw new Ui("Expected value to be one of "+Object.keys(this._enumValues).map(function(Pe){return JSON.stringify(Pe)}).join(", ")+", but found "+JSON.stringify(ke)+" instead.");return ke}catch(Pe){return this._warningHistory[Pe.message]||(this._warningHistory[Pe.message]=!0,typeof console<"u"&&console.warn(Pe.message)),this._defaultValue}},"evaluate");function pc(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in sf}t(pc,"isExpression");function gc(E,C){var I=new Lu(sf,[],C?uf(C):void 0),V=I.parse(E,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return V?dc(new As(V,C)):Du(I.errors)}t(gc,"createExpression");var nu=t(function(C,I){this.kind=C,this._styleExpression=I,this.isStateDependent=C!=="constant"&&!lc(I.expression)},"ZoomConstantExpression");nu.prototype.evaluateWithoutErrorHandling=t(function(C,I,V,J,ue,ge){return this._styleExpression.evaluateWithoutErrorHandling(C,I,V,J,ue,ge)},"evaluateWithoutErrorHandling"),nu.prototype.evaluate=t(function(C,I,V,J,ue,ge){return this._styleExpression.evaluate(C,I,V,J,ue,ge)},"evaluate");var Ss=t(function(C,I,V,J){this.kind=C,this.zoomStops=V,this._styleExpression=I,this.isStateDependent=C!=="camera"&&!lc(I.expression),this.interpolationType=J},"ZoomDependentExpression");Ss.prototype.evaluateWithoutErrorHandling=t(function(C,I,V,J,ue,ge){return this._styleExpression.evaluateWithoutErrorHandling(C,I,V,J,ue,ge)},"evaluateWithoutErrorHandling"),Ss.prototype.evaluate=t(function(C,I,V,J,ue,ge){return this._styleExpression.evaluate(C,I,V,J,ue,ge)},"evaluate"),Ss.prototype.interpolationFactor=t(function(C,I,V){return this.interpolationType?es.interpolationFactor(this.interpolationType,C,I,V):0},"interpolationFactor");function jh(E,C){if(E=gc(E,C),E.result==="error")return E;var I=E.value.expression,V=Yc(I);if(!V&&!Iu(C))return Du([new is("","data expressions not supported")]);var J=Wc(I,["zoom"]);if(!J&&!qv(C))return Du([new is("","zoom expressions not supported")]);var ue=iu(I);if(!ue&&!J)return Du([new is("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(ue instanceof is)return Du([ue]);if(ue instanceof es&&!Hf(C))return Du([new is("",'"interpolate" expressions cannot be used with this property')]);if(!ue)return dc(V?new nu("constant",E.value):new nu("source",E.value));var ge=ue instanceof es?ue.interpolation:void 0;return dc(V?new Ss("camera",E.value,ue.labels,ge):new Ss("composite",E.value,ue.labels,ge))}t(jh,"createPropertyExpression");var lf=t(function(C,I){this._parameters=C,this._specification=I,Gi(this,rh(this._parameters,this._specification))},"StylePropertyFunction");lf.deserialize=t(function(C){return new lf(C._parameters,C._specification)},"deserialize"),lf.serialize=t(function(C){return{_parameters:C._parameters,_specification:C._specification}},"serialize");function zu(E,C){if(th(E))return new lf(E,C);if(pc(E)){var I=jh(E,C);if(I.result==="error")throw new Error(I.value.map(function(J){return J.key+": "+J.message}).join(", "));return I.value}else{var V=E;return typeof E=="string"&&C.type==="color"&&(V=yi.parse(E)),{kind:"constant",evaluate:function(){return V}}}}t(zu,"normalizePropertyExpression");function iu(E){var C=null;if(E instanceof Ru)C=iu(E.result);else if(E instanceof $l)for(var I=0,V=E.args;I<V.length;I+=1){var J=V[I];if(C=iu(J),C)break}else(E instanceof eu||E instanceof es)&&E.input instanceof os&&E.input.name==="zoom"&&(C=E);return C instanceof is||E.eachChild(function(ue){var ge=iu(ue);ge instanceof is?C=ge:!C&&ge?C=new is("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&ge&&C!==ge&&(C=new is("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}t(iu,"findZoomCurve");function uf(E){var C={color:wl,string:Yn,number:Ga,enum:Yn,boolean:Bn,formatted:ql,resolvedImage:Ul};return E.type==="array"?Co(C[E.value]||Kn,E.length):C[E.type]}t(uf,"getExpectedType");function oh(E){return E.type==="color"&&th(E.default)?new yi(0,0,0,0):E.type==="color"?yi.parse(E.default)||null:E.default===void 0?null:E.default}t(oh,"getDefaultValue");function js(E){var C=E.key,I=E.value,V=E.valueSpec||{},J=E.objectElementValidators||{},ue=E.style,ge=E.styleSpec,ke=[],Pe=Si(I);if(Pe!=="object")return[new Ma(C,I,"object expected, "+Pe+" found")];for(var Oe in I){var Ve=Oe.split(".")[0],lt=V[Ve]||V["*"],At=void 0;if(J[Ve])At=J[Ve];else if(V[Ve])At=ll;else if(J["*"])At=J["*"];else if(V["*"])At=ll;else{ke.push(new Ma(C,I[Oe],'unknown property "'+Oe+'"'));continue}ke=ke.concat(At({key:(C&&C+".")+Oe,value:I[Oe],valueSpec:lt,style:ue,styleSpec:ge,object:I,objectKey:Oe},I))}for(var mt in V)J[mt]||V[mt].required&&V[mt].default===void 0&&I[mt]===void 0&&ke.push(new Ma(C,I,'missing required property "'+mt+'"'));return ke}t(js,"validateObject");function Gf(E){var C=E.value,I=E.valueSpec,V=E.style,J=E.styleSpec,ue=E.key,ge=E.arrayElementValidator||ll;if(Si(C)!=="array")return[new Ma(ue,C,"array expected, "+Si(C)+" found")];if(I.length&&C.length!==I.length)return[new Ma(ue,C,"array length "+I.length+" expected, length "+C.length+" found")];if(I["min-length"]&&C.length<I["min-length"])return[new Ma(ue,C,"array length at least "+I["min-length"]+" expected, length "+C.length+" found")];var ke={type:I.value,values:I.values};J.$version<7&&(ke.function=I.function),Si(I.value)==="object"&&(ke=I.value);for(var Pe=[],Oe=0;Oe<C.length;Oe++)Pe=Pe.concat(ge({array:C,arrayIndex:Oe,value:C[Oe],valueSpec:ke,style:V,styleSpec:J,key:ue+"["+Oe+"]"}));return Pe}t(Gf,"validateArray");function ff(E){var C=E.key,I=E.value,V=E.valueSpec,J=Si(I);return J==="number"&&I!==I&&(J="NaN"),J!=="number"?[new Ma(C,I,"number expected, "+J+" found")]:"minimum"in V&&I<V.minimum?[new Ma(C,I,I+" is less than the minimum value "+V.minimum)]:"maximum"in V&&I>V.maximum?[new Ma(C,I,I+" is greater than the maximum value "+V.maximum)]:[]}t(ff,"validateNumber");function Go(E){var C=E.valueSpec,I=Ri(E.value.type),V,J={},ue,ge,ke=I!=="categorical"&&E.value.property===void 0,Pe=!ke,Oe=Si(E.value.stops)==="array"&&Si(E.value.stops[0])==="array"&&Si(E.value.stops[0][0])==="object",Ve=js({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:lt,default:Bt}});return I==="identity"&&ke&&Ve.push(new Ma(E.key,E.value,'missing required property "property"')),I!=="identity"&&!E.value.stops&&Ve.push(new Ma(E.key,E.value,'missing required property "stops"')),I==="exponential"&&E.valueSpec.expression&&!Hf(E.valueSpec)&&Ve.push(new Ma(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&(Pe&&!Iu(E.valueSpec)?Ve.push(new Ma(E.key,E.value,"property functions not supported")):ke&&!qv(E.valueSpec)&&Ve.push(new Ma(E.key,E.value,"zoom functions not supported"))),(I==="categorical"||Oe)&&E.value.property===void 0&&Ve.push(new Ma(E.key,E.value,'"property" property is required')),Ve;function lt(Kt){if(I==="identity")return[new Ma(Kt.key,Kt.value,'identity function may not have a "stops" property')];var yr=[],lr=Kt.value;return yr=yr.concat(Gf({key:Kt.key,value:lr,valueSpec:Kt.valueSpec,style:Kt.style,styleSpec:Kt.styleSpec,arrayElementValidator:At})),Si(lr)==="array"&&lr.length===0&&yr.push(new Ma(Kt.key,lr,"array must have at least one stop")),yr}t(lt,"validateFunctionStops");function At(Kt){var yr=[],lr=Kt.value,Rr=Kt.key;if(Si(lr)!=="array")return[new Ma(Rr,lr,"array expected, "+Si(lr)+" found")];if(lr.length!==2)return[new Ma(Rr,lr,"array length 2 expected, length "+lr.length+" found")];if(Oe){if(Si(lr[0])!=="object")return[new Ma(Rr,lr,"object expected, "+Si(lr[0])+" found")];if(lr[0].zoom===void 0)return[new Ma(Rr,lr,"object stop key must have zoom")];if(lr[0].value===void 0)return[new Ma(Rr,lr,"object stop key must have value")];if(ge&&ge>Ri(lr[0].zoom))return[new Ma(Rr,lr[0].zoom,"stop zoom values must appear in ascending order")];Ri(lr[0].zoom)!==ge&&(ge=Ri(lr[0].zoom),ue=void 0,J={}),yr=yr.concat(js({key:Rr+"[0]",value:lr[0],valueSpec:{zoom:{}},style:Kt.style,styleSpec:Kt.styleSpec,objectElementValidators:{zoom:ff,value:mt}}))}else yr=yr.concat(mt({key:Rr+"[0]",value:lr[0],valueSpec:{},style:Kt.style,styleSpec:Kt.styleSpec},lr));return pc(_l(lr[1]))?yr.concat([new Ma(Rr+"[1]",lr[1],"expressions are not allowed in function stops.")]):yr.concat(ll({key:Rr+"[1]",value:lr[1],valueSpec:C,style:Kt.style,styleSpec:Kt.styleSpec}))}t(At,"validateFunctionStop");function mt(Kt,yr){var lr=Si(Kt.value),Rr=Ri(Kt.value),_r=Kt.value!==null?Kt.value:yr;if(!V)V=lr;else if(lr!==V)return[new Ma(Kt.key,_r,lr+" stop domain type must match previous stop domain type "+V)];if(lr!=="number"&&lr!=="string"&&lr!=="boolean")return[new Ma(Kt.key,_r,"stop domain value must be a number, string, or boolean")];if(lr!=="number"&&I!=="categorical"){var Cr="number expected, "+lr+" found";return Iu(C)&&I===void 0&&(Cr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ma(Kt.key,_r,Cr)]}return I==="categorical"&&lr==="number"&&(!isFinite(Rr)||Math.floor(Rr)!==Rr)?[new Ma(Kt.key,_r,"integer expected, found "+Rr)]:I!=="categorical"&&lr==="number"&&ue!==void 0&&Rr<ue?[new Ma(Kt.key,_r,"stop domain values must appear in ascending order")]:(ue=Rr,I==="categorical"&&Rr in J?[new Ma(Kt.key,_r,"stop domain values must be unique")]:(J[Rr]=!0,[]))}t(mt,"validateStopDomainValue");function Bt(Kt){return ll({key:Kt.key,value:Kt.value,valueSpec:C,style:Kt.style,styleSpec:Kt.styleSpec})}t(Bt,"validateFunctionDefault")}t(Go,"validateFunction");function Fu(E){var C=(E.expressionContext==="property"?jh:gc)(_l(E.value),E.valueSpec);if(C.result==="error")return C.value.map(function(V){return new Ma(""+E.key+V.key,E.value,V.message)});var I=C.value.expression||C.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!I.outputDefined())return[new Ma(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!lc(I))return[new Ma(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!lc(I))return[new Ma(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!Wc(I,["zoom","feature-state"]))return[new Ma(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!Yc(I))return[new Ma(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}t(Fu,"validateExpression");function Yh(E){var C=E.value,I=E.key,V=Si(C);return V!=="boolean"?[new Ma(I,C,"boolean expected, "+V+" found")]:[]}t(Yh,"validateBoolean");function Vl(E){var C=E.key,I=E.value,V=Si(I);return V!=="string"?[new Ma(C,I,"color expected, "+V+" found")]:Vc(I)===null?[new Ma(C,I,'color expected, "'+I+'" found')]:[]}t(Vl,"validateColor");function cf(E){var C=E.key,I=E.value,V=E.valueSpec,J=[];return Array.isArray(V.values)?V.values.indexOf(Ri(I))===-1&&J.push(new Ma(C,I,"expected one of ["+V.values.join(", ")+"], "+JSON.stringify(I)+" found")):Object.keys(V.values).indexOf(Ri(I))===-1&&J.push(new Ma(C,I,"expected one of ["+Object.keys(V.values).join(", ")+"], "+JSON.stringify(I)+" found")),J}t(cf,"validateEnum");function jf(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var C=0,I=E.slice(1);C<I.length;C+=1){var V=I[C];if(!jf(V)&&typeof V!="boolean")return!1}return!0;default:return!0}}t(jf,"isExpressionFilter");var yc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bu(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};jf(E)||(E=hf(E));var C=gc(E,yc);if(C.result==="error")throw new Error(C.value.map(function(V){return V.key+": "+V.message}).join(", "));var I=$v(E);return{filter:function(V,J,ue){return C.value.evaluate(V,J,{},ue)},needGeometry:I}}t(Bu,"createFilter");function Dd(E,C){return E<C?-1:E>C?1:0}t(Dd,"compare");function $v(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var C=1;C<E.length;C++)if($v(E[C]))return!0;return!1}t($v,"geometryNeeded");function hf(E){if(!E)return!0;var C=E[0];if(E.length<=1)return C!=="any";var I=C==="=="?sh(E[1],E[2],"=="):C==="!="?mc(sh(E[1],E[2],"==")):C==="<"||C===">"||C==="<="||C===">="?sh(E[1],E[2],C):C==="any"?Vv(E.slice(1)):C==="all"?["all"].concat(E.slice(1).map(hf)):C==="none"?["all"].concat(E.slice(1).map(hf).map(mc)):C==="in"?Id(E[1],E.slice(2)):C==="!in"?mc(Id(E[1],E.slice(2))):C==="has"?vf(E[1]):C==="!has"?mc(vf(E[1])):C==="within"?E:!0;return I}t(hf,"convertFilter");function sh(E,C,I){switch(E){case"$type":return["filter-type-"+I,C];case"$id":return["filter-id-"+I,C];default:return["filter-"+I,E,C]}}t(sh,"convertComparisonOp");function Vv(E){return["any"].concat(E.map(hf))}t(Vv,"convertDisjunctionOp");function Id(E,C){if(C.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(I){return typeof I!=typeof C[0]})?["filter-in-large",E,["literal",C.sort(Dd)]]:["filter-in-small",E,["literal",C]]}}t(Id,"convertInOp");function vf(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}t(vf,"convertHasOp");function mc(E){return["!",E]}t(mc,"convertNegation");function Gv(E){return jf(_l(E.value))?Fu(Gi({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zd(E)}t(Gv,"validateFilter");function zd(E){var C=E.value,I=E.key;if(Si(C)!=="array")return[new Ma(I,C,"array expected, "+Si(C)+" found")];var V=E.styleSpec,J,ue=[];if(C.length<1)return[new Ma(I,C,"filter array must have at least 1 element")];switch(ue=ue.concat(cf({key:I+"[0]",value:C[0],valueSpec:V.filter_operator,style:E.style,styleSpec:E.styleSpec})),Ri(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&Ri(C[1])==="$type"&&ue.push(new Ma(I,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&ue.push(new Ma(I,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(J=Si(C[1]),J!=="string"&&ue.push(new Ma(I+"[1]",C[1],"string expected, "+J+" found")));for(var ge=2;ge<C.length;ge++)J=Si(C[ge]),Ri(C[1])==="$type"?ue=ue.concat(cf({key:I+"["+ge+"]",value:C[ge],valueSpec:V.geometry_type,style:E.style,styleSpec:E.styleSpec})):J!=="string"&&J!=="number"&&J!=="boolean"&&ue.push(new Ma(I+"["+ge+"]",C[ge],"string, number, or boolean expected, "+J+" found"));break;case"any":case"all":case"none":for(var ke=1;ke<C.length;ke++)ue=ue.concat(zd({key:I+"["+ke+"]",value:C[ke],style:E.style,styleSpec:E.styleSpec}));break;case"has":case"!has":J=Si(C[1]),C.length!==2?ue.push(new Ma(I,C,'filter array for "'+C[0]+'" operator must have 2 elements')):J!=="string"&&ue.push(new Ma(I+"[1]",C[1],"string expected, "+J+" found"));break;case"within":J=Si(C[1]),C.length!==2?ue.push(new Ma(I,C,'filter array for "'+C[0]+'" operator must have 2 elements')):J!=="object"&&ue.push(new Ma(I+"[1]",C[1],"object expected, "+J+" found"));break}return ue}t(zd,"validateNonExpressionFilter");function jv(E,C){var I=E.key,V=E.style,J=E.styleSpec,ue=E.value,ge=E.objectKey,ke=J[C+"_"+E.layerType];if(!ke)return[];var Pe=ge.match(/^(.*)-transition$/);if(C==="paint"&&Pe&&ke[Pe[1]]&&ke[Pe[1]].transition)return ll({key:I,value:ue,valueSpec:J.transition,style:V,styleSpec:J});var Oe=E.valueSpec||ke[ge];if(!Oe)return[new Ma(I,ue,'unknown property "'+ge+'"')];var Ve;if(Si(ue)==="string"&&Iu(Oe)&&!Oe.tokens&&(Ve=/^{([^}]+)}$/.exec(ue)))return[new Ma(I,ue,'"'+ge+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ve[1])+" }`.")];var lt=[];return E.layerType==="symbol"&&(ge==="text-field"&&V&&!V.glyphs&&lt.push(new Ma(I,ue,'use of "text-field" requires a style "glyphs" property')),ge==="text-font"&&th(_l(ue))&&Ri(ue.type)==="identity"&&lt.push(new Ma(I,ue,'"text-font" does not support identity functions'))),lt.concat(ll({key:E.key,value:ue,valueSpec:Oe,style:V,styleSpec:J,expressionContext:"property",propertyType:C,propertyKey:ge}))}t(jv,"validateProperty");function Yv(E){return jv(E,"paint")}t(Yv,"validatePaintProperty");function lh(E){return jv(E,"layout")}t(lh,"validateLayoutProperty");function Wv(E){var C=[],I=E.value,V=E.key,J=E.style,ue=E.styleSpec;!I.type&&!I.ref&&C.push(new Ma(V,I,'either "type" or "ref" is required'));var ge=Ri(I.type),ke=Ri(I.ref);if(I.id)for(var Pe=Ri(I.id),Oe=0;Oe<E.arrayIndex;Oe++){var Ve=J.layers[Oe];Ri(Ve.id)===Pe&&C.push(new Ma(V,I.id,'duplicate layer id "'+I.id+'", previously used at line '+Ve.id.__line__))}if("ref"in I){["type","source","source-layer","filter","layout"].forEach(function(Bt){Bt in I&&C.push(new Ma(V,I[Bt],'"'+Bt+'" is prohibited for ref layers'))});var lt;J.layers.forEach(function(Bt){Ri(Bt.id)===ke&&(lt=Bt)}),lt?lt.ref?C.push(new Ma(V,I.ref,"ref cannot reference another ref layer")):ge=Ri(lt.type):C.push(new Ma(V,I.ref,'ref layer "'+ke+'" not found'))}else if(ge!=="background")if(!I.source)C.push(new Ma(V,I,'missing required property "source"'));else{var At=J.sources&&J.sources[I.source],mt=At&&Ri(At.type);At?mt==="vector"&&ge==="raster"?C.push(new Ma(V,I.source,'layer "'+I.id+'" requires a raster source')):mt==="raster"&&ge!=="raster"?C.push(new Ma(V,I.source,'layer "'+I.id+'" requires a vector source')):mt==="vector"&&!I["source-layer"]?C.push(new Ma(V,I,'layer "'+I.id+'" must specify a "source-layer"')):mt==="raster-dem"&&ge!=="hillshade"?C.push(new Ma(V,I.source,"raster-dem source can only be used with layer type 'hillshade'.")):ge==="line"&&I.paint&&I.paint["line-gradient"]&&(mt!=="geojson"||!At.lineMetrics)&&C.push(new Ma(V,I,'layer "'+I.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new Ma(V,I.source,'source "'+I.source+'" not found'))}return C=C.concat(js({key:V,value:I,valueSpec:ue.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":t(function(){return[]},"_"),type:t(function(){return ll({key:V+".type",value:I.type,valueSpec:ue.layer.type,style:E.style,styleSpec:E.styleSpec,object:I,objectKey:"type"})},"type"),filter:Gv,layout:t(function(Kt){return js({layer:I,key:Kt.key,value:Kt.value,style:Kt.style,styleSpec:Kt.styleSpec,objectElementValidators:{"*":t(function(lr){return lh(Gi({layerType:ge},lr))},"_")}})},"layout"),paint:t(function(Kt){return js({layer:I,key:Kt.key,value:Kt.value,style:Kt.style,styleSpec:Kt.styleSpec,objectElementValidators:{"*":t(function(lr){return Yv(Gi({layerType:ge},lr))},"_")}})},"paint")}})),C}t(Wv,"validateLayer");function Ou(E){var C=E.value,I=E.key,V=Si(C);return V!=="string"?[new Ma(I,C,"string expected, "+V+" found")]:[]}t(Ou,"validateString");var Xv={promoteId:yo};function Yf(E){var C=E.value,I=E.key,V=E.styleSpec,J=E.style;if(!C.type)return[new Ma(I,C,'"type" is required')];var ue=Ri(C.type),ge;switch(ue){case"vector":case"raster":case"raster-dem":return ge=js({key:I,value:C,valueSpec:V["source_"+ue.replace("-","_")],style:E.style,styleSpec:V,objectElementValidators:Xv}),ge;case"geojson":if(ge=js({key:I,value:C,valueSpec:V.source_geojson,style:J,styleSpec:V,objectElementValidators:Xv}),C.cluster)for(var ke in C.clusterProperties){var Pe=C.clusterProperties[ke],Oe=Pe[0],Ve=Pe[1],lt=typeof Oe=="string"?[Oe,["accumulated"],["get",ke]]:Oe;ge.push.apply(ge,Fu({key:I+"."+ke+".map",value:Ve,expressionContext:"cluster-map"})),ge.push.apply(ge,Fu({key:I+"."+ke+".reduce",value:lt,expressionContext:"cluster-reduce"}))}return ge;case"video":return js({key:I,value:C,valueSpec:V.source_video,style:J,styleSpec:V});case"image":return js({key:I,value:C,valueSpec:V.source_image,style:J,styleSpec:V});case"canvas":return[new Ma(I,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return cf({key:I+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:J,styleSpec:V})}}t(Yf,"validateSource");function yo(E){var C=E.key,I=E.value;if(Si(I)==="string")return Ou({key:C,value:I});var V=[];for(var J in I)V.push.apply(V,Ou({key:C+"."+J,value:I[J]}));return V}t(yo,"validatePromoteId");function df(E){var C=E.value,I=E.styleSpec,V=I.light,J=E.style,ue=[],ge=Si(C);if(C===void 0)return ue;if(ge!=="object")return ue=ue.concat([new Ma("light",C,"object expected, "+ge+" found")]),ue;for(var ke in C){var Pe=ke.match(/^(.*)-transition$/);Pe&&V[Pe[1]]&&V[Pe[1]].transition?ue=ue.concat(ll({key:ke,value:C[ke],valueSpec:I.transition,style:J,styleSpec:I})):V[ke]?ue=ue.concat(ll({key:ke,value:C[ke],valueSpec:V[ke],style:J,styleSpec:I})):ue=ue.concat([new Ma(ke,C[ke],'unknown property "'+ke+'"')])}return ue}t(df,"validateLight");function Nu(E){return Ou(E).length===0?[]:Fu(E)}t(Nu,"validateFormatted");function xc(E){return Ou(E).length===0?[]:Fu(E)}t(xc,"validateImage");var uh={"*":t(function(){return[]},"_"),array:Gf,boolean:Yh,number:ff,color:Vl,constants:go,enum:cf,filter:Gv,function:Go,layer:Wv,object:js,source:Yf,light:df,string:Ou,formatted:Nu,resolvedImage:xc};function ll(E){var C=E.value,I=E.valueSpec,V=E.styleSpec;if(I.expression&&th(Ri(C)))return Go(E);if(I.expression&&pc(_l(C)))return Fu(E);if(I.type&&uh[I.type])return uh[I.type](E);var J=js(Gi({},E,{valueSpec:I.type?V[I.type]:I}));return J}t(ll,"validate");function bc(E){var C=E.value,I=E.key,V=Ou(E);return V.length||(C.indexOf("{fontstack}")===-1&&V.push(new Ma(I,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&V.push(new Ma(I,C,'"glyphs" url must include a "{range}" token'))),V}t(bc,"validateGlyphsURL");function ii(E,C){C===void 0&&(C=Wr);var I=[];return I=I.concat(ll({key:"",value:E,valueSpec:C.$root,styleSpec:C,style:E,objectElementValidators:{glyphs:bc,"*":t(function(){return[]},"_")}})),E.constants&&(I=I.concat(go({key:"constants",value:E.constants,style:E,styleSpec:C}))),_c(I)}t(ii,"validateStyleMin"),ii.source=ul(Yf),ii.light=ul(df),ii.layer=ul(Wv),ii.filter=ul(Gv),ii.paintProperty=ul(Yv),ii.layoutProperty=ul(lh);function _c(E){return[].concat(E).sort(function(C,I){return C.line-I.line})}t(_c,"sortErrors");function ul(E){return function(){for(var C=[],I=arguments.length;I--;)C[I]=arguments[I];return _c(E.apply(this,C))}}t(ul,"wrapCleanErrors");var fl=ii,mi=fl.light,Mi=fl.paintProperty,fh=fl.layoutProperty;function ou(E,C){var I=!1;if(C&&C.length)for(var V=0,J=C;V<J.length;V+=1){var ue=J[V];E.fire(new Zr(new Error(ue.message))),I=!0}return I}t(ou,"emitValidationErrors");var Gl=ve,Y=3;function ve(E,C,I){var V=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var J=new Int32Array(this.arrayBuffer);E=J[0],C=J[1],I=J[2],this.d=C+2*I;for(var ue=0;ue<this.d*this.d;ue++){var ge=J[Y+ue],ke=J[Y+ue+1];V.push(ge===ke?null:J.subarray(ge,ke))}var Pe=J[Y+V.length],Oe=J[Y+V.length+1];this.keys=J.subarray(Pe,Oe),this.bboxes=J.subarray(Oe),this.insert=this._insertReadonly}else{this.d=C+2*I;for(var Ve=0;Ve<this.d*this.d;Ve++)V.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=E,this.padding=I,this.scale=C/E,this.uid=0;var lt=I/C*E;this.min=-lt,this.max=E+lt}t(ve,"GridIndex"),ve.prototype.insert=function(E,C,I,V,J){this._forEachCell(C,I,V,J,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(C),this.bboxes.push(I),this.bboxes.push(V),this.bboxes.push(J)},ve.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ve.prototype._insertCell=function(E,C,I,V,J,ue){this.cells[J].push(ue)},ve.prototype.query=function(E,C,I,V,J){var ue=this.min,ge=this.max;if(E<=ue&&C<=ue&&ge<=I&&ge<=V&&!J)return Array.prototype.slice.call(this.keys);var ke=[],Pe={};return this._forEachCell(E,C,I,V,this._queryCell,ke,Pe,J),ke},ve.prototype._queryCell=function(E,C,I,V,J,ue,ge,ke){var Pe=this.cells[J];if(Pe!==null)for(var Oe=this.keys,Ve=this.bboxes,lt=0;lt<Pe.length;lt++){var At=Pe[lt];if(ge[At]===void 0){var mt=At*4;(ke?ke(Ve[mt+0],Ve[mt+1],Ve[mt+2],Ve[mt+3]):E<=Ve[mt+2]&&C<=Ve[mt+3]&&I>=Ve[mt+0]&&V>=Ve[mt+1])?(ge[At]=!0,ue.push(Oe[At])):ge[At]=!1}}},ve.prototype._forEachCell=function(E,C,I,V,J,ue,ge,ke){for(var Pe=this._convertToCellCoord(E),Oe=this._convertToCellCoord(C),Ve=this._convertToCellCoord(I),lt=this._convertToCellCoord(V),At=Pe;At<=Ve;At++)for(var mt=Oe;mt<=lt;mt++){var Bt=this.d*mt+At;if(!(ke&&!ke(this._convertFromCellCoord(At),this._convertFromCellCoord(mt),this._convertFromCellCoord(At+1),this._convertFromCellCoord(mt+1)))&&J.call(this,E,C,I,V,Bt,ue,ge,ke))return}},ve.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},ve.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},ve.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,C=Y+this.cells.length+1+1,I=0,V=0;V<this.cells.length;V++)I+=this.cells[V].length;var J=new Int32Array(C+I+this.keys.length+this.bboxes.length);J[0]=this.extent,J[1]=this.n,J[2]=this.padding;for(var ue=C,ge=0;ge<E.length;ge++){var ke=E[ge];J[Y+ge]=ue,J.set(ke,ue),ue+=ke.length}return J[Y+E.length]=ue,J.set(this.keys,ue),ue+=this.keys.length,J[Y+E.length+1]=ue,J.set(this.bboxes,ue),ue+=this.bboxes.length,J.buffer};var _e=self.ImageData,Ce=self.ImageBitmap,Re={};function Le(E,C,I){I===void 0&&(I={}),Object.defineProperty(C,"_classRegistryKey",{value:E,writeable:!1}),Re[E]={klass:C,omit:I.omit||[],shallow:I.shallow||[]}}t(Le,"register"),Le("Object",Object),Gl.serialize=t(function(C,I){var V=C.toArrayBuffer();return I&&I.push(V),{buffer:V}},"serialize"),Gl.deserialize=t(function(C){return new Gl(C.buffer)},"deserialize"),Le("Grid",Gl),Le("Color",yi),Le("Error",Error),Le("ResolvedImage",ws),Le("StylePropertyFunction",lf),Le("StyleExpression",As,{omit:["_evaluator"]}),Le("ZoomDependentExpression",Ss),Le("ZoomConstantExpression",nu),Le("CompoundExpression",os,{omit:["_evaluate"]});for(var Ke in sf)sf[Ke]._classRegistryKey||Le("Expression_"+Ke,sf[Ke]);function Ne(E){return E&&typeof ArrayBuffer<"u"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}t(Ne,"isArrayBuffer");function rt(E){return Ce&&E instanceof Ce}t(rt,"isImageBitmap");function yt(E,C){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(Ne(E)||rt(E))return C&&C.push(E),E;if(ArrayBuffer.isView(E)){var I=E;return C&&C.push(I.buffer),I}if(E instanceof _e)return C&&C.push(E.data.buffer),E;if(Array.isArray(E)){for(var V=[],J=0,ue=E;J<ue.length;J+=1){var ge=ue[J];V.push(yt(ge,C))}return V}if(typeof E=="object"){var ke=E.constructor,Pe=ke._classRegistryKey;if(!Pe)throw new Error("can't serialize object of unregistered class");var Oe=ke.serialize?ke.serialize(E,C):{};if(!ke.serialize){for(var Ve in E)if(!!E.hasOwnProperty(Ve)&&!(Re[Pe].omit.indexOf(Ve)>=0)){var lt=E[Ve];Oe[Ve]=Re[Pe].shallow.indexOf(Ve)>=0?lt:yt(lt,C)}E instanceof Error&&(Oe.message=E.message)}if(Oe.$name)throw new Error("$name property is reserved for worker serialization logic.");return Pe!=="Object"&&(Oe.$name=Pe),Oe}throw new Error("can't serialize object of type "+typeof E)}t(yt,"serialize");function gt(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||Ne(E)||rt(E)||ArrayBuffer.isView(E)||E instanceof _e)return E;if(Array.isArray(E))return E.map(gt);if(typeof E=="object"){var C=E.$name||"Object",I=Re[C],V=I.klass;if(!V)throw new Error("can't deserialize unregistered class "+C);if(V.deserialize)return V.deserialize(E);for(var J=Object.create(V.prototype),ue=0,ge=Object.keys(E);ue<ge.length;ue+=1){var ke=ge[ue];if(ke!=="$name"){var Pe=E[ke];J[ke]=Re[C].shallow.indexOf(ke)>=0?Pe:gt(Pe)}}return J}throw new Error("can't deserialize object of type "+typeof E)}t(gt,"deserialize");var Ut=t(function(){this.first=!0},"ZoomHistory");Ut.prototype.update=t(function(C,I){var V=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=V,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=V,!0):(this.lastFloorZoom>V?(this.lastIntegerZoom=V+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<V&&(this.lastIntegerZoom=V,this.lastIntegerZoomTime=I),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=V,!0):!1)},"update");var Tt={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function or(E){for(var C=0,I=E;C<I.length;C+=1){var V=I[C];if(rr(V.charCodeAt(0)))return!0}return!1}t(or,"allowsVerticalWritingMode");function pr(E){for(var C=0,I=E;C<I.length;C+=1){var V=I[C];if(!jt(V.charCodeAt(0)))return!1}return!0}t(pr,"allowsLetterSpacing");function jt(E){return!(Tt.Arabic(E)||Tt["Arabic Supplement"](E)||Tt["Arabic Extended-A"](E)||Tt["Arabic Presentation Forms-A"](E)||Tt["Arabic Presentation Forms-B"](E))}t(jt,"charAllowsLetterSpacing");function er(E){return E<11904?!1:!!(Tt["Bopomofo Extended"](E)||Tt.Bopomofo(E)||Tt["CJK Compatibility Forms"](E)||Tt["CJK Compatibility Ideographs"](E)||Tt["CJK Compatibility"](E)||Tt["CJK Radicals Supplement"](E)||Tt["CJK Strokes"](E)||Tt["CJK Symbols and Punctuation"](E)||Tt["CJK Unified Ideographs Extension A"](E)||Tt["CJK Unified Ideographs"](E)||Tt["Enclosed CJK Letters and Months"](E)||Tt["Halfwidth and Fullwidth Forms"](E)||Tt.Hiragana(E)||Tt["Ideographic Description Characters"](E)||Tt["Kangxi Radicals"](E)||Tt["Katakana Phonetic Extensions"](E)||Tt.Katakana(E)||Tt["Vertical Forms"](E)||Tt["Yi Radicals"](E)||Tt["Yi Syllables"](E))}t(er,"charAllowsIdeographicBreaking");function rr(E){return E===746||E===747?!0:E<4352?!1:!!(Tt["Bopomofo Extended"](E)||Tt.Bopomofo(E)||Tt["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||Tt["CJK Compatibility Ideographs"](E)||Tt["CJK Compatibility"](E)||Tt["CJK Radicals Supplement"](E)||Tt["CJK Strokes"](E)||Tt["CJK Symbols and Punctuation"](E)&&!(E>=12296&&E<=12305)&&!(E>=12308&&E<=12319)&&E!==12336||Tt["CJK Unified Ideographs Extension A"](E)||Tt["CJK Unified Ideographs"](E)||Tt["Enclosed CJK Letters and Months"](E)||Tt["Hangul Compatibility Jamo"](E)||Tt["Hangul Jamo Extended-A"](E)||Tt["Hangul Jamo Extended-B"](E)||Tt["Hangul Jamo"](E)||Tt["Hangul Syllables"](E)||Tt.Hiragana(E)||Tt["Ideographic Description Characters"](E)||Tt.Kanbun(E)||Tt["Kangxi Radicals"](E)||Tt["Katakana Phonetic Extensions"](E)||Tt.Katakana(E)&&E!==12540||Tt["Halfwidth and Fullwidth Forms"](E)&&E!==65288&&E!==65289&&E!==65293&&!(E>=65306&&E<=65310)&&E!==65339&&E!==65341&&E!==65343&&!(E>=65371&&E<=65503)&&E!==65507&&!(E>=65512&&E<=65519)||Tt["Small Form Variants"](E)&&!(E>=65112&&E<=65118)&&!(E>=65123&&E<=65126)||Tt["Unified Canadian Aboriginal Syllabics"](E)||Tt["Unified Canadian Aboriginal Syllabics Extended"](E)||Tt["Vertical Forms"](E)||Tt["Yijing Hexagram Symbols"](E)||Tt["Yi Syllables"](E)||Tt["Yi Radicals"](E))}t(rr,"charHasUprightVerticalOrientation");function dr(E){return!!(Tt["Latin-1 Supplement"](E)&&(E===167||E===169||E===174||E===177||E===188||E===189||E===190||E===215||E===247)||Tt["General Punctuation"](E)&&(E===8214||E===8224||E===8225||E===8240||E===8241||E===8251||E===8252||E===8258||E===8263||E===8264||E===8265||E===8273)||Tt["Letterlike Symbols"](E)||Tt["Number Forms"](E)||Tt["Miscellaneous Technical"](E)&&(E>=8960&&E<=8967||E>=8972&&E<=8991||E>=8996&&E<=9e3||E===9003||E>=9085&&E<=9114||E>=9150&&E<=9165||E===9167||E>=9169&&E<=9179||E>=9186&&E<=9215)||Tt["Control Pictures"](E)&&E!==9251||Tt["Optical Character Recognition"](E)||Tt["Enclosed Alphanumerics"](E)||Tt["Geometric Shapes"](E)||Tt["Miscellaneous Symbols"](E)&&!(E>=9754&&E<=9759)||Tt["Miscellaneous Symbols and Arrows"](E)&&(E>=11026&&E<=11055||E>=11088&&E<=11097||E>=11192&&E<=11243)||Tt["CJK Symbols and Punctuation"](E)||Tt.Katakana(E)||Tt["Private Use Area"](E)||Tt["CJK Compatibility Forms"](E)||Tt["Small Form Variants"](E)||Tt["Halfwidth and Fullwidth Forms"](E)||E===8734||E===8756||E===8757||E>=9984&&E<=10087||E>=10102&&E<=10131||E===65532||E===65533)}t(dr,"charHasNeutralVerticalOrientation");function gr(E){return!(rr(E)||dr(E))}t(gr,"charHasRotatedVerticalOrientation");function tr(E){return Tt.Arabic(E)||Tt["Arabic Supplement"](E)||Tt["Arabic Extended-A"](E)||Tt["Arabic Presentation Forms-A"](E)||Tt["Arabic Presentation Forms-B"](E)}t(tr,"charInComplexShapingScript");function Yr(E){return E>=1424&&E<=2303||Tt["Arabic Presentation Forms-A"](E)||Tt["Arabic Presentation Forms-B"](E)}t(Yr,"charInRTLScript");function ia(E,C){return!(!C&&Yr(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||Tt.Khmer(E))}t(ia,"charInSupportedScript");function ua(E){for(var C=0,I=E;C<I.length;C+=1){var V=I[C];if(Yr(V.charCodeAt(0)))return!0}return!1}t(ua,"stringContainsRTLText");function oa(E,C){for(var I=0,V=E;I<V.length;I+=1){var J=V[I];if(!ia(J.charCodeAt(0),C))return!1}return!0}t(oa,"isStringInSupportedScript");var pa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ya=null,en=pa.unavailable,Ca=null,pn=t(function(E){E&&typeof E=="string"&&E.indexOf("NetworkError")>-1&&(en=pa.error),Ya&&Ya(E)},"triggerPluginCompletionEvent");function ti(){Hi.fire(new Lr("pluginStateChange",{pluginStatus:en,pluginURL:Ca}))}t(ti,"sendPluginStateToWorker");var Hi=new Sr,si=t(function(){return en},"getRTLTextPluginStatus"),wa=t(function(E){return E({pluginStatus:en,pluginURL:Ca}),Hi.on("pluginStateChange",E),E},"registerForPluginStateChange"),En=t(function(E,C,I){if(I===void 0&&(I=!1),en===pa.deferred||en===pa.loading||en===pa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ca=ce.resolveURL(E),en=pa.deferred,Ya=C,ti(),I||zn()},"setRTLTextPlugin"),zn=t(function(){if(en!==pa.deferred||!Ca)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");en=pa.loading,ti(),Ca&&ot({url:Ca},function(E){E?pn(E):(en=pa.loaded,ti())})},"downloadRTLTextPlugin"),Fn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:t(function(){return en===pa.loaded||Fn.applyArabicShaping!=null},"isLoaded"),isLoading:t(function(){return en===pa.loading},"isLoading"),setState:t(function(C){en=C.pluginStatus,Ca=C.pluginURL},"setState"),isParsed:t(function(){return Fn.applyArabicShaping!=null&&Fn.processBidirectionalText!=null&&Fn.processStyledBidirectionalText!=null},"isParsed"),getPluginURL:t(function(){return Ca},"getPluginURL")},Yi=t(function(){!Fn.isLoading()&&!Fn.isLoaded()&&si()==="deferred"&&zn()},"lazyLoadRTLTextPlugin"),On=t(function(C,I){this.zoom=C,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ut,this.transition={})},"EvaluationParameters");On.prototype.isSupportedScript=t(function(C){return oa(C,Fn.isLoaded())},"isSupportedScript"),On.prototype.crossFadingFactor=t(function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},"crossFadingFactor"),On.prototype.getCrossfadeParameters=t(function(){var C=this.zoom,I=C-Math.floor(C),V=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*V}:{fromScale:.5,toScale:1,t:1-(1-V)*I}},"getCrossfadeParameters");var fo=t(function(C,I){this.property=C,this.value=I,this.expression=zu(I===void 0?C.specification.default:I,C.specification)},"PropertyValue");fo.prototype.isDataDriven=t(function(){return this.expression.kind==="source"||this.expression.kind==="composite"},"isDataDriven"),fo.prototype.possiblyEvaluate=t(function(C,I,V){return this.property.possiblyEvaluate(this,C,I,V)},"possiblyEvaluate");var Wi=t(function(C){this.property=C,this.value=new fo(C,void 0)},"TransitionablePropertyValue");Wi.prototype.transitioned=t(function(C,I){return new No(this.property,this.value,I,w({},C.transition,this.transition),C.now)},"transitioned"),Wi.prototype.untransitioned=t(function(){return new No(this.property,this.value,null,{},0)},"untransitioned");var mo=t(function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)},"Transitionable");mo.prototype.getValue=t(function(C){return R(this._values[C].value.value)},"getValue"),mo.prototype.setValue=t(function(C,I){this._values.hasOwnProperty(C)||(this._values[C]=new Wi(this._values[C].property)),this._values[C].value=new fo(this._values[C].property,I===null?void 0:R(I))},"setValue"),mo.prototype.getTransition=t(function(C){return R(this._values[C].transition)},"getTransition"),mo.prototype.setTransition=t(function(C,I){this._values.hasOwnProperty(C)||(this._values[C]=new Wi(this._values[C].property)),this._values[C].transition=R(I)||void 0},"setTransition"),mo.prototype.serialize=t(function(){for(var C={},I=0,V=Object.keys(this._values);I<V.length;I+=1){var J=V[I],ue=this.getValue(J);ue!==void 0&&(C[J]=ue);var ge=this.getTransition(J);ge!==void 0&&(C[J+"-transition"]=ge)}return C},"serialize"),mo.prototype.transitioned=t(function(C,I){for(var V=new ss(this._properties),J=0,ue=Object.keys(this._values);J<ue.length;J+=1){var ge=ue[J];V._values[ge]=this._values[ge].transitioned(C,I._values[ge])}return V},"transitioned"),mo.prototype.untransitioned=t(function(){for(var C=new ss(this._properties),I=0,V=Object.keys(this._values);I<V.length;I+=1){var J=V[I];C._values[J]=this._values[J].untransitioned()}return C},"untransitioned");var No=t(function(C,I,V,J,ue){this.property=C,this.value=I,this.begin=ue+J.delay||0,this.end=this.begin+J.duration||0,C.specification.transition&&(J.delay||J.duration)&&(this.prior=V)},"TransitioningPropertyValue");No.prototype.possiblyEvaluate=t(function(C,I,V){var J=C.now||0,ue=this.value.possiblyEvaluate(C,I,V),ge=this.prior;if(ge){if(J>this.end)return this.prior=null,ue;if(this.value.isDataDriven())return this.prior=null,ue;if(J<this.begin)return ge.possiblyEvaluate(C,I,V);var ke=(J-this.begin)/(this.end-this.begin);return this.property.interpolate(ge.possiblyEvaluate(C,I,V),ue,g(ke))}else return ue},"possiblyEvaluate");var ss=t(function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)},"Transitioning");ss.prototype.possiblyEvaluate=t(function(C,I,V){for(var J=new Zt(this._properties),ue=0,ge=Object.keys(this._values);ue<ge.length;ue+=1){var ke=ge[ue];J._values[ke]=this._values[ke].possiblyEvaluate(C,I,V)}return J},"possiblyEvaluate"),ss.prototype.hasTransition=t(function(){for(var C=0,I=Object.keys(this._values);C<I.length;C+=1){var V=I[C];if(this._values[V].prior)return!0}return!1},"hasTransition");var st=t(function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)},"Layout");st.prototype.getValue=t(function(C){return R(this._values[C].value)},"getValue"),st.prototype.setValue=t(function(C,I){this._values[C]=new fo(this._values[C].property,I===null?void 0:R(I))},"setValue"),st.prototype.serialize=t(function(){for(var C={},I=0,V=Object.keys(this._values);I<V.length;I+=1){var J=V[I],ue=this.getValue(J);ue!==void 0&&(C[J]=ue)}return C},"serialize"),st.prototype.possiblyEvaluate=t(function(C,I,V){for(var J=new Zt(this._properties),ue=0,ge=Object.keys(this._values);ue<ge.length;ue+=1){var ke=ge[ue];J._values[ke]=this._values[ke].possiblyEvaluate(C,I,V)}return J},"possiblyEvaluate");var Yt=t(function(C,I,V){this.property=C,this.value=I,this.parameters=V},"PossiblyEvaluatedPropertyValue");Yt.prototype.isConstant=t(function(){return this.value.kind==="constant"},"isConstant"),Yt.prototype.constantOr=t(function(C){return this.value.kind==="constant"?this.value.value:C},"constantOr"),Yt.prototype.evaluate=t(function(C,I,V,J){return this.property.evaluate(this.value,this.parameters,C,I,V,J)},"evaluate");var Zt=t(function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)},"PossiblyEvaluated");Zt.prototype.get=t(function(C){return this._values[C]},"get");var cr=t(function(C){this.specification=C},"DataConstantProperty");cr.prototype.possiblyEvaluate=t(function(C,I){return C.expression.evaluate(I)},"possiblyEvaluate"),cr.prototype.interpolate=t(function(C,I,V){var J=Gs[this.specification.type];return J?J(C,I,V):C},"interpolate$1");var br=t(function(C,I){this.specification=C,this.overrides=I},"DataDrivenProperty");br.prototype.possiblyEvaluate=t(function(C,I,V,J){return C.expression.kind==="constant"||C.expression.kind==="camera"?new Yt(this,{kind:"constant",value:C.expression.evaluate(I,null,{},V,J)},I):new Yt(this,C.expression,I)},"possiblyEvaluate"),br.prototype.interpolate=t(function(C,I,V){if(C.value.kind!=="constant"||I.value.kind!=="constant")return C;if(C.value.value===void 0||I.value.value===void 0)return new Yt(this,{kind:"constant",value:void 0},C.parameters);var J=Gs[this.specification.type];return J?new Yt(this,{kind:"constant",value:J(C.value.value,I.value.value,V)},C.parameters):C},"interpolate$2"),br.prototype.evaluate=t(function(C,I,V,J,ue,ge){return C.kind==="constant"?C.value:C.evaluate(I,V,J,ue,ge)},"evaluate");var kr=function(E){function C(){E.apply(this,arguments)}return t(C,"CrossFadedDataDrivenProperty"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=t(function(V,J,ue,ge){if(V.value===void 0)return new Yt(this,{kind:"constant",value:void 0},J);if(V.expression.kind==="constant"){var ke=V.expression.evaluate(J,null,{},ue,ge),Pe=V.property.specification.type==="resolvedImage",Oe=Pe&&typeof ke!="string"?ke.name:ke,Ve=this._calculate(Oe,Oe,Oe,J);return new Yt(this,{kind:"constant",value:Ve},J)}else if(V.expression.kind==="camera"){var lt=this._calculate(V.expression.evaluate({zoom:J.zoom-1}),V.expression.evaluate({zoom:J.zoom}),V.expression.evaluate({zoom:J.zoom+1}),J);return new Yt(this,{kind:"constant",value:lt},J)}else return new Yt(this,V.expression,J)},"possiblyEvaluate"),C.prototype.evaluate=t(function(V,J,ue,ge,ke,Pe){if(V.kind==="source"){var Oe=V.evaluate(J,ue,ge,ke,Pe);return this._calculate(Oe,Oe,Oe,J)}else return V.kind==="composite"?this._calculate(V.evaluate({zoom:Math.floor(J.zoom)-1},ue,ge),V.evaluate({zoom:Math.floor(J.zoom)},ue,ge),V.evaluate({zoom:Math.floor(J.zoom)+1},ue,ge),J):V.value},"evaluate"),C.prototype._calculate=t(function(V,J,ue,ge){var ke=ge.zoom;return ke>ge.zoomHistory.lastIntegerZoom?{from:V,to:J}:{from:ue,to:J}},"_calculate"),C.prototype.interpolate=t(function(V){return V},"interpolate"),C}(br),Pr=t(function(C){this.specification=C},"CrossFadedProperty");Pr.prototype.possiblyEvaluate=t(function(C,I,V,J){if(C.value!==void 0)if(C.expression.kind==="constant"){var ue=C.expression.evaluate(I,null,{},V,J);return this._calculate(ue,ue,ue,I)}else return this._calculate(C.expression.evaluate(new On(Math.floor(I.zoom-1),I)),C.expression.evaluate(new On(Math.floor(I.zoom),I)),C.expression.evaluate(new On(Math.floor(I.zoom+1),I)),I)},"possiblyEvaluate"),Pr.prototype._calculate=t(function(C,I,V,J){var ue=J.zoom;return ue>J.zoomHistory.lastIntegerZoom?{from:C,to:I}:{from:V,to:I}},"_calculate"),Pr.prototype.interpolate=t(function(C){return C},"interpolate");var la=t(function(C){this.specification=C},"ColorRampProperty");la.prototype.possiblyEvaluate=t(function(C,I,V,J){return!!C.expression.evaluate(I,null,{},V,J)},"possiblyEvaluate"),la.prototype.interpolate=t(function(){return!1},"interpolate");var Qr=t(function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var I in C){var V=C[I];V.specification.overridable&&this.overridableProperties.push(I);var J=this.defaultPropertyValues[I]=new fo(V,void 0),ue=this.defaultTransitionablePropertyValues[I]=new Wi(V);this.defaultTransitioningPropertyValues[I]=ue.untransitioned(),this.defaultPossiblyEvaluatedValues[I]=J.possiblyEvaluate({})}},"Properties");Le("DataDrivenProperty",br),Le("DataConstantProperty",cr),Le("CrossFadedDataDrivenProperty",kr),Le("CrossFadedProperty",Pr),Le("ColorRampProperty",la);var fa="-transition",ka=function(E){function C(I,V){if(E.call(this),this.id=I.id,this.type=I.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},I.type!=="custom"&&(I=I,this.metadata=I.metadata,this.minzoom=I.minzoom,this.maxzoom=I.maxzoom,I.type!=="background"&&(this.source=I.source,this.sourceLayer=I["source-layer"],this.filter=I.filter),V.layout&&(this._unevaluatedLayout=new st(V.layout)),V.paint)){this._transitionablePaint=new mo(V.paint);for(var J in I.paint)this.setPaintProperty(J,I.paint[J],{validate:!1});for(var ue in I.layout)this.setLayoutProperty(ue,I.layout[ue],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Zt(V.paint)}}return t(C,"StyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=t(function(){return this._crossfadeParameters},"getCrossfadeParameters"),C.prototype.getLayoutProperty=t(function(V){return V==="visibility"?this.visibility:this._unevaluatedLayout.getValue(V)},"getLayoutProperty"),C.prototype.setLayoutProperty=t(function(V,J,ue){if(ue===void 0&&(ue={}),J!=null){var ge="layers."+this.id+".layout."+V;if(this._validate(fh,ge,V,J,ue))return}if(V==="visibility"){this.visibility=J;return}this._unevaluatedLayout.setValue(V,J)},"setLayoutProperty"),C.prototype.getPaintProperty=t(function(V){return D(V,fa)?this._transitionablePaint.getTransition(V.slice(0,-fa.length)):this._transitionablePaint.getValue(V)},"getPaintProperty"),C.prototype.setPaintProperty=t(function(V,J,ue){if(ue===void 0&&(ue={}),J!=null){var ge="layers."+this.id+".paint."+V;if(this._validate(Mi,ge,V,J,ue))return!1}if(D(V,fa))return this._transitionablePaint.setTransition(V.slice(0,-fa.length),J||void 0),!1;var ke=this._transitionablePaint._values[V],Pe=ke.property.specification["property-type"]==="cross-faded-data-driven",Oe=ke.value.isDataDriven(),Ve=ke.value;this._transitionablePaint.setValue(V,J),this._handleSpecialPaintPropertyUpdate(V);var lt=this._transitionablePaint._values[V].value,At=lt.isDataDriven();return At||Oe||Pe||this._handleOverridablePaintPropertyUpdate(V,Ve,lt)},"setPaintProperty"),C.prototype._handleSpecialPaintPropertyUpdate=t(function(V){},"_handleSpecialPaintPropertyUpdate"),C.prototype._handleOverridablePaintPropertyUpdate=t(function(V,J,ue){return!1},"_handleOverridablePaintPropertyUpdate"),C.prototype.isHidden=t(function(V){return this.minzoom&&V<this.minzoom||this.maxzoom&&V>=this.maxzoom?!0:this.visibility==="none"},"isHidden"),C.prototype.updateTransitions=t(function(V){this._transitioningPaint=this._transitionablePaint.transitioned(V,this._transitioningPaint)},"updateTransitions"),C.prototype.hasTransition=t(function(){return this._transitioningPaint.hasTransition()},"hasTransition"),C.prototype.recalculate=t(function(V,J){V.getCrossfadeParameters&&(this._crossfadeParameters=V.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(V,void 0,J)),this.paint=this._transitioningPaint.possiblyEvaluate(V,void 0,J)},"recalculate"),C.prototype.serialize=t(function(){var V={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(V.layout=V.layout||{},V.layout.visibility=this.visibility),z(V,function(J,ue){return J!==void 0&&!(ue==="layout"&&!Object.keys(J).length)&&!(ue==="paint"&&!Object.keys(J).length)})},"serialize"),C.prototype._validate=t(function(V,J,ue,ge,ke){return ke===void 0&&(ke={}),ke&&ke.validate===!1?!1:ou(this,V.call(fl,{key:J,layerType:this.type,objectKey:ue,value:ge,styleSpec:Wr,style:{glyphs:!0,sprite:!0}}))},"_validate"),C.prototype.is3D=t(function(){return!1},"is3D"),C.prototype.isTileClipped=t(function(){return!1},"isTileClipped"),C.prototype.hasOffscreenPass=t(function(){return!1},"hasOffscreenPass"),C.prototype.resize=t(function(){},"resize"),C.prototype.isStateDependent=t(function(){for(var V in this.paint._values){var J=this.paint.get(V);if(!(!(J instanceof Yt)||!Iu(J.property.specification))&&(J.value.kind==="source"||J.value.kind==="composite")&&J.value.isStateDependent)return!0}return!1},"isStateDependent"),C}(Sr),sn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ra=t(function(C,I){this._structArray=C,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},"Struct"),La=128,ra=5,fr=t(function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)},"StructArray");fr.serialize=t(function(C,I){return C._trim(),I&&(C.isTransferred=!0,I.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},"serialize"),fr.deserialize=t(function(C){var I=Object.create(this.prototype);return I.arrayBuffer=C.arrayBuffer,I.length=C.length,I.capacity=C.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I},"deserialize"),fr.prototype._trim=t(function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},"_trim"),fr.prototype.clear=t(function(){this.length=0},"clear"),fr.prototype.resize=t(function(C){this.reserve(C),this.length=C},"resize"),fr.prototype.reserve=t(function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*ra),La),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}},"reserve"),fr.prototype._refreshViews=t(function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},"_refreshViews");function Mr(E,C){C===void 0&&(C=1);var I=0,V=0,J=E.map(function(ge){var ke=ca(ge.type),Pe=I=ha(I,Math.max(C,ke)),Oe=ge.components||1;return V=Math.max(V,ke),I+=ke*Oe,{name:ge.name,type:ge.type,components:Oe,offset:Pe}}),ue=ha(I,Math.max(V,C));return{members:J,size:ue,alignment:C}}t(Mr,"createLayout");function ca(E){return sn[E].BYTES_PER_ELEMENT}t(ca,"sizeOf");function ha(E,C){return Math.ceil(E/C)*C}t(ha,"align");var Kr=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2i4"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J){var ue=this.length;return this.resize(ue+1),this.emplace(ue,V,J)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue){var ge=V*2;return this.int16[ge+0]=J,this.int16[ge+1]=ue,V},"emplace"),C}(fr);Kr.prototype.bytesPerElement=4,Le("StructArrayLayout2i4",Kr);var qa=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout4i8"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge){var ke=this.length;return this.resize(ke+1),this.emplace(ke,V,J,ue,ge)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke){var Pe=V*4;return this.int16[Pe+0]=J,this.int16[Pe+1]=ue,this.int16[Pe+2]=ge,this.int16[Pe+3]=ke,V},"emplace"),C}(fr);qa.prototype.bytesPerElement=8,Le("StructArrayLayout4i8",qa);var Aa=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2i4i12"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke,Pe){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,V,J,ue,ge,ke,Pe)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe,Oe){var Ve=V*6;return this.int16[Ve+0]=J,this.int16[Ve+1]=ue,this.int16[Ve+2]=ge,this.int16[Ve+3]=ke,this.int16[Ve+4]=Pe,this.int16[Ve+5]=Oe,V},"emplace"),C}(fr);Aa.prototype.bytesPerElement=12,Le("StructArrayLayout2i4i12",Aa);var on=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2i4ub8"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke,Pe){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,V,J,ue,ge,ke,Pe)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe,Oe){var Ve=V*4,lt=V*8;return this.int16[Ve+0]=J,this.int16[Ve+1]=ue,this.uint8[lt+4]=ge,this.uint8[lt+5]=ke,this.uint8[lt+6]=Pe,this.uint8[lt+7]=Oe,V},"emplace"),C}(fr);on.prototype.bytesPerElement=8,Le("StructArrayLayout2i4ub8",on);var Gr=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout8ui2ub18"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At){var mt=this.length;return this.resize(mt+1),this.emplace(mt,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt){var Bt=V*9,Kt=V*18;return this.uint16[Bt+0]=J,this.uint16[Bt+1]=ue,this.uint16[Bt+2]=ge,this.uint16[Bt+3]=ke,this.uint16[Bt+4]=Pe,this.uint16[Bt+5]=Oe,this.uint16[Bt+6]=Ve,this.uint16[Bt+7]=lt,this.uint8[Kt+16]=At,this.uint8[Kt+17]=mt,V},"emplace"),C}(fr);Gr.prototype.bytesPerElement=18,Le("StructArrayLayout8ui2ub18",Gr);var $r=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout4i4ui4i24"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt){var Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt){var yr=V*12;return this.int16[yr+0]=J,this.int16[yr+1]=ue,this.int16[yr+2]=ge,this.int16[yr+3]=ke,this.uint16[yr+4]=Pe,this.uint16[yr+5]=Oe,this.uint16[yr+6]=Ve,this.uint16[yr+7]=lt,this.int16[yr+8]=At,this.int16[yr+9]=mt,this.int16[yr+10]=Bt,this.int16[yr+11]=Kt,V},"emplace"),C}(fr);$r.prototype.bytesPerElement=24,Le("StructArrayLayout4i4ui4i24",$r);var Wa=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout3f12"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue){var ge=this.length;return this.resize(ge+1),this.emplace(ge,V,J,ue)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge){var ke=V*3;return this.float32[ke+0]=J,this.float32[ke+1]=ue,this.float32[ke+2]=ge,V},"emplace"),C}(fr);Wa.prototype.bytesPerElement=12,Le("StructArrayLayout3f12",Wa);var Or=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout1ul4"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V){var J=this.length;return this.resize(J+1),this.emplace(J,V)},"emplaceBack"),C.prototype.emplace=t(function(V,J){var ue=V*1;return this.uint32[ue+0]=J,V},"emplace"),C}(fr);Or.prototype.bytesPerElement=4,Le("StructArrayLayout1ul4",Or);var Ba=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout6i1ul2ui20"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt){var At=this.length;return this.resize(At+1),this.emplace(At,V,J,ue,ge,ke,Pe,Oe,Ve,lt)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At){var mt=V*10,Bt=V*5;return this.int16[mt+0]=J,this.int16[mt+1]=ue,this.int16[mt+2]=ge,this.int16[mt+3]=ke,this.int16[mt+4]=Pe,this.int16[mt+5]=Oe,this.uint32[Bt+3]=Ve,this.uint16[mt+8]=lt,this.uint16[mt+9]=At,V},"emplace"),C}(fr);Ba.prototype.bytesPerElement=20,Le("StructArrayLayout6i1ul2ui20",Ba);var va=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2i2i2i12"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke,Pe){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,V,J,ue,ge,ke,Pe)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe,Oe){var Ve=V*6;return this.int16[Ve+0]=J,this.int16[Ve+1]=ue,this.int16[Ve+2]=ge,this.int16[Ve+3]=ke,this.int16[Ve+4]=Pe,this.int16[Ve+5]=Oe,V},"emplace"),C}(fr);va.prototype.bytesPerElement=12,Le("StructArrayLayout2i2i2i12",va);var tn=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2f1f2i16"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,V,J,ue,ge,ke)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe){var Oe=V*4,Ve=V*8;return this.float32[Oe+0]=J,this.float32[Oe+1]=ue,this.float32[Oe+2]=ge,this.int16[Ve+6]=ke,this.int16[Ve+7]=Pe,V},"emplace"),C}(fr);tn.prototype.bytesPerElement=16,Le("StructArrayLayout2f1f2i16",tn);var Sn=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2ub2f12"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge){var ke=this.length;return this.resize(ke+1),this.emplace(ke,V,J,ue,ge)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke){var Pe=V*12,Oe=V*3;return this.uint8[Pe+0]=J,this.uint8[Pe+1]=ue,this.float32[Oe+1]=ge,this.float32[Oe+2]=ke,V},"emplace"),C}(fr);Sn.prototype.bytesPerElement=12,Le("StructArrayLayout2ub2f12",Sn);var ja=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout3ui6"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue){var ge=this.length;return this.resize(ge+1),this.emplace(ge,V,J,ue)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge){var ke=V*3;return this.uint16[ke+0]=J,this.uint16[ke+1]=ue,this.uint16[ke+2]=ge,V},"emplace"),C}(fr);ja.prototype.bytesPerElement=6,Le("StructArrayLayout3ui6",ja);var fn=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt,yr,lr,Rr,_r){var Cr=this.length;return this.resize(Cr+1),this.emplace(Cr,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt,yr,lr,Rr,_r)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt,yr,lr,Rr,_r,Cr){var qr=V*24,ta=V*12,ga=V*48;return this.int16[qr+0]=J,this.int16[qr+1]=ue,this.uint16[qr+2]=ge,this.uint16[qr+3]=ke,this.uint32[ta+2]=Pe,this.uint32[ta+3]=Oe,this.uint32[ta+4]=Ve,this.uint16[qr+10]=lt,this.uint16[qr+11]=At,this.uint16[qr+12]=mt,this.float32[ta+7]=Bt,this.float32[ta+8]=Kt,this.uint8[ga+36]=yr,this.uint8[ga+37]=lr,this.uint8[ga+38]=Rr,this.uint32[ta+10]=_r,this.int16[qr+22]=Cr,V},"emplace"),C}(fr);fn.prototype.bytesPerElement=48,Le("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",fn);var za=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout8i15ui1ul4f68"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt,yr,lr,Rr,_r,Cr,qr,ta,ga,da,an,Ha,Xa,Mn,Qa,rn){var Vn=this.length;return this.resize(Vn+1),this.emplace(Vn,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt,yr,lr,Rr,_r,Cr,qr,ta,ga,da,an,Ha,Xa,Mn,Qa,rn)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt,yr,lr,Rr,_r,Cr,qr,ta,ga,da,an,Ha,Xa,Mn,Qa,rn,Vn){var An=V*34,ci=V*17;return this.int16[An+0]=J,this.int16[An+1]=ue,this.int16[An+2]=ge,this.int16[An+3]=ke,this.int16[An+4]=Pe,this.int16[An+5]=Oe,this.int16[An+6]=Ve,this.int16[An+7]=lt,this.uint16[An+8]=At,this.uint16[An+9]=mt,this.uint16[An+10]=Bt,this.uint16[An+11]=Kt,this.uint16[An+12]=yr,this.uint16[An+13]=lr,this.uint16[An+14]=Rr,this.uint16[An+15]=_r,this.uint16[An+16]=Cr,this.uint16[An+17]=qr,this.uint16[An+18]=ta,this.uint16[An+19]=ga,this.uint16[An+20]=da,this.uint16[An+21]=an,this.uint16[An+22]=Ha,this.uint32[ci+12]=Xa,this.float32[ci+13]=Mn,this.float32[ci+14]=Qa,this.float32[ci+15]=rn,this.float32[ci+16]=Vn,V},"emplace"),C}(fr);za.prototype.bytesPerElement=68,Le("StructArrayLayout8i15ui1ul4f68",za);var Hn=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout1f4"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V){var J=this.length;return this.resize(J+1),this.emplace(J,V)},"emplaceBack"),C.prototype.emplace=t(function(V,J){var ue=V*1;return this.float32[ue+0]=J,V},"emplace"),C}(fr);Hn.prototype.bytesPerElement=4,Le("StructArrayLayout1f4",Hn);var ri=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout3i6"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue){var ge=this.length;return this.resize(ge+1),this.emplace(ge,V,J,ue)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge){var ke=V*3;return this.int16[ke+0]=J,this.int16[ke+1]=ue,this.int16[ke+2]=ge,V},"emplace"),C}(fr);ri.prototype.bytesPerElement=6,Le("StructArrayLayout3i6",ri);var Jn=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout1ul2ui8"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue){var ge=this.length;return this.resize(ge+1),this.emplace(ge,V,J,ue)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge){var ke=V*2,Pe=V*4;return this.uint32[ke+0]=J,this.uint16[Pe+2]=ue,this.uint16[Pe+3]=ge,V},"emplace"),C}(fr);Jn.prototype.bytesPerElement=8,Le("StructArrayLayout1ul2ui8",Jn);var Po=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2ui4"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J){var ue=this.length;return this.resize(ue+1),this.emplace(ue,V,J)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue){var ge=V*2;return this.uint16[ge+0]=J,this.uint16[ge+1]=ue,V},"emplace"),C}(fr);Po.prototype.bytesPerElement=4,Le("StructArrayLayout2ui4",Po);var Qn=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout1ui2"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V){var J=this.length;return this.resize(J+1),this.emplace(J,V)},"emplaceBack"),C.prototype.emplace=t(function(V,J){var ue=V*1;return this.uint16[ue+0]=J,V},"emplace"),C}(fr);Qn.prototype.bytesPerElement=2,Le("StructArrayLayout1ui2",Qn);var jo=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout2f8"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J){var ue=this.length;return this.resize(ue+1),this.emplace(ue,V,J)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue){var ge=V*2;return this.float32[ge+0]=J,this.float32[ge+1]=ue,V},"emplace"),C}(fr);jo.prototype.bytesPerElement=8,Le("StructArrayLayout2f8",jo);var Ii=function(E){function C(){E.apply(this,arguments)}return t(C,"StructArrayLayout4f16"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=t(function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},"_refreshViews"),C.prototype.emplaceBack=t(function(V,J,ue,ge){var ke=this.length;return this.resize(ke+1),this.emplace(ke,V,J,ue,ge)},"emplaceBack"),C.prototype.emplace=t(function(V,J,ue,ge,ke){var Pe=V*4;return this.float32[Pe+0]=J,this.float32[Pe+1]=ue,this.float32[Pe+2]=ge,this.float32[Pe+3]=ke,V},"emplace"),C}(fr);Ii.prototype.bytesPerElement=16,Le("StructArrayLayout4f16",Ii);var Ms=function(E){function C(){E.apply(this,arguments)}t(C,"CollisionBoxStruct"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var I={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return I.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},I.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},I.x1.get=function(){return this._structArray.int16[this._pos2+2]},I.y1.get=function(){return this._structArray.int16[this._pos2+3]},I.x2.get=function(){return this._structArray.int16[this._pos2+4]},I.y2.get=function(){return this._structArray.int16[this._pos2+5]},I.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},I.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},I.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},I.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,I),C}(Ra);Ms.prototype.size=20;var Yo=function(E){function C(){E.apply(this,arguments)}return t(C,"CollisionBoxArray"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=t(function(V){return new Ms(this,V)},"get"),C}(Ba);Le("CollisionBoxArray",Yo);var ks=function(E){function C(){E.apply(this,arguments)}t(C,"PlacedSymbolStruct"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var I={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return I.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},I.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},I.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},I.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},I.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},I.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},I.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},I.segment.get=function(){return this._structArray.uint16[this._pos2+10]},I.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},I.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},I.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},I.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},I.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},I.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},I.placedOrientation.set=function(V){this._structArray.uint8[this._pos1+37]=V},I.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},I.hidden.set=function(V){this._structArray.uint8[this._pos1+38]=V},I.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},I.crossTileID.set=function(V){this._structArray.uint32[this._pos4+10]=V},I.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,I),C}(Ra);ks.prototype.size=48;var Ys=function(E){function C(){E.apply(this,arguments)}return t(C,"PlacedSymbolArray"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=t(function(V){return new ks(this,V)},"get"),C}(fn);Le("PlacedSymbolArray",Ys);var rs=function(E){function C(){E.apply(this,arguments)}t(C,"SymbolInstanceStruct"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var I={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return I.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},I.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},I.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},I.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},I.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},I.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},I.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},I.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},I.key.get=function(){return this._structArray.uint16[this._pos2+8]},I.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},I.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},I.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},I.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},I.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},I.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},I.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},I.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},I.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},I.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},I.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},I.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},I.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},I.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},I.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},I.crossTileID.set=function(V){this._structArray.uint32[this._pos4+12]=V},I.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},I.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},I.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},I.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,I),C}(Ra);rs.prototype.size=68;var as=function(E){function C(){E.apply(this,arguments)}return t(C,"SymbolInstanceArray"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=t(function(V){return new rs(this,V)},"get"),C}(za);Le("SymbolInstanceArray",as);var _n=function(E){function C(){E.apply(this,arguments)}return t(C,"GlyphOffsetArray"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=t(function(V){return this.float32[V*1+0]},"getoffsetX"),C}(Hn);Le("GlyphOffsetArray",_n);var kl=function(E){function C(){E.apply(this,arguments)}return t(C,"SymbolLineVertexArray"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getx=t(function(V){return this.int16[V*3+0]},"getx"),C.prototype.gety=t(function(V){return this.int16[V*3+1]},"gety"),C.prototype.gettileUnitDistanceFromAnchor=t(function(V){return this.int16[V*3+2]},"gettileUnitDistanceFromAnchor"),C}(ri);Le("SymbolLineVertexArray",kl);var zi=function(E){function C(){E.apply(this,arguments)}t(C,"FeatureIndexStruct"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var I={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return I.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},I.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},I.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,I),C}(Ra);zi.prototype.size=8;var Wo=function(E){function C(){E.apply(this,arguments)}return t(C,"FeatureIndexArray"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=t(function(V){return new zi(this,V)},"get"),C}(Jn);Le("FeatureIndexArray",Wo);var Ws=Mr([{name:"a_pos",components:2,type:"Int16"}],4),Z=Ws.members,N=t(function(C){C===void 0&&(C=[]),this.segments=C},"SegmentVector");N.prototype.prepareSegment=t(function(C,I,V,J){var ue=this.segments[this.segments.length-1];return C>N.MAX_VERTEX_ARRAY_LENGTH&&q("Max vertices per segment is "+N.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!ue||ue.vertexLength+C>N.MAX_VERTEX_ARRAY_LENGTH||ue.sortKey!==J)&&(ue={vertexOffset:I.length,primitiveOffset:V.length,vertexLength:0,primitiveLength:0},J!==void 0&&(ue.sortKey=J),this.segments.push(ue)),ue},"prepareSegment"),N.prototype.get=t(function(){return this.segments},"get"),N.prototype.destroy=t(function(){for(var C=0,I=this.segments;C<I.length;C+=1){var V=I[C];for(var J in V.vaos)V.vaos[J].destroy()}},"destroy"),N.simpleSegment=t(function(C,I,V,J){return new N([{vertexOffset:C,primitiveOffset:I,vertexLength:V,primitiveLength:J,vaos:{},sortKey:0}])},"simpleSegment"),N.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Le("SegmentVector",N);function K(E,C){return E=m(Math.floor(E),0,255),C=m(Math.floor(C),0,255),256*E+C}t(K,"packUint8ToFloat");var U=Mr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Q=l(function(E){function C(I,V){var J,ue,ge,ke,Pe,Oe,Ve,lt;for(J=I.length&3,ue=I.length-J,ge=V,Pe=3432918353,Oe=461845907,lt=0;lt<ue;)Ve=I.charCodeAt(lt)&255|(I.charCodeAt(++lt)&255)<<8|(I.charCodeAt(++lt)&255)<<16|(I.charCodeAt(++lt)&255)<<24,++lt,Ve=(Ve&65535)*Pe+(((Ve>>>16)*Pe&65535)<<16)&4294967295,Ve=Ve<<15|Ve>>>17,Ve=(Ve&65535)*Oe+(((Ve>>>16)*Oe&65535)<<16)&4294967295,ge^=Ve,ge=ge<<13|ge>>>19,ke=(ge&65535)*5+(((ge>>>16)*5&65535)<<16)&4294967295,ge=(ke&65535)+27492+(((ke>>>16)+58964&65535)<<16);switch(Ve=0,J){case 3:Ve^=(I.charCodeAt(lt+2)&255)<<16;case 2:Ve^=(I.charCodeAt(lt+1)&255)<<8;case 1:Ve^=I.charCodeAt(lt)&255,Ve=(Ve&65535)*Pe+(((Ve>>>16)*Pe&65535)<<16)&4294967295,Ve=Ve<<15|Ve>>>17,Ve=(Ve&65535)*Oe+(((Ve>>>16)*Oe&65535)<<16)&4294967295,ge^=Ve}return ge^=I.length,ge^=ge>>>16,ge=(ge&65535)*2246822507+(((ge>>>16)*2246822507&65535)<<16)&4294967295,ge^=ge>>>13,ge=(ge&65535)*3266489909+(((ge>>>16)*3266489909&65535)<<16)&4294967295,ge^=ge>>>16,ge>>>0}t(C,"murmurhash3_32_gc"),E.exports=C}),le=l(function(E){function C(I,V){for(var J=I.length,ue=V^J,ge=0,ke;J>=4;)ke=I.charCodeAt(ge)&255|(I.charCodeAt(++ge)&255)<<8|(I.charCodeAt(++ge)&255)<<16|(I.charCodeAt(++ge)&255)<<24,ke=(ke&65535)*1540483477+(((ke>>>16)*1540483477&65535)<<16),ke^=ke>>>24,ke=(ke&65535)*1540483477+(((ke>>>16)*1540483477&65535)<<16),ue=(ue&65535)*1540483477+(((ue>>>16)*1540483477&65535)<<16)^ke,J-=4,++ge;switch(J){case 3:ue^=(I.charCodeAt(ge+2)&255)<<16;case 2:ue^=(I.charCodeAt(ge+1)&255)<<8;case 1:ue^=I.charCodeAt(ge)&255,ue=(ue&65535)*1540483477+(((ue>>>16)*1540483477&65535)<<16)}return ue^=ue>>>13,ue=(ue&65535)*1540483477+(((ue>>>16)*1540483477&65535)<<16),ue^=ue>>>15,ue>>>0}t(C,"murmurhash2_32_gc"),E.exports=C}),be=Q,Me=Q,Ie=le;be.murmur3=Me,be.murmur2=Ie;var Ze=t(function(){this.ids=[],this.positions=[],this.indexed=!1},"FeaturePositionMap");Ze.prototype.add=t(function(C,I,V,J){this.ids.push(ht(C)),this.positions.push(I,V,J)},"add"),Ze.prototype.getPositions=t(function(C){for(var I=ht(C),V=0,J=this.ids.length-1;V<J;){var ue=V+J>>1;this.ids[ue]>=I?J=ue:V=ue+1}for(var ge=[];this.ids[V]===I;){var ke=this.positions[3*V],Pe=this.positions[3*V+1],Oe=this.positions[3*V+2];ge.push({index:ke,start:Pe,end:Oe}),V++}return ge},"getPositions"),Ze.serialize=t(function(C,I){var V=new Float64Array(C.ids),J=new Uint32Array(C.positions);return Be(V,J,0,V.length-1),I&&I.push(V.buffer,J.buffer),{ids:V,positions:J}},"serialize"),Ze.deserialize=t(function(C){var I=new Ze;return I.ids=C.ids,I.positions=C.positions,I.indexed=!0,I},"deserialize");var ct=Math.pow(2,53)-1;function ht(E){var C=+E;return!isNaN(C)&&C<=ct?C:be(String(E))}t(ht,"getNumericId");function Be(E,C,I,V){for(;I<V;){for(var J=E[I+V>>1],ue=I-1,ge=V+1;;){do ue++;while(E[ue]<J);do ge--;while(E[ge]>J);if(ue>=ge)break;We(E,ue,ge),We(C,3*ue,3*ge),We(C,3*ue+1,3*ge+1),We(C,3*ue+2,3*ge+2)}ge-I<V-ge?(Be(E,C,I,ge),I=ge+1):(Be(E,C,ge+1,V),V=ge)}}t(Be,"sort");function We(E,C,I){var V=E[C];E[C]=E[I],E[I]=V}t(We,"swap"),Le("FeaturePositionMap",Ze);var it=t(function(C,I){this.gl=C.gl,this.location=I},"Uniform"),wt=function(E){function C(I,V){E.call(this,I,V),this.current=0}return t(C,"Uniform1i"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=t(function(V){this.current!==V&&(this.current=V,this.gl.uniform1i(this.location,V))},"set"),C}(it),pt=function(E){function C(I,V){E.call(this,I,V),this.current=0}return t(C,"Uniform1f"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=t(function(V){this.current!==V&&(this.current=V,this.gl.uniform1f(this.location,V))},"set"),C}(it),bt=function(E){function C(I,V){E.call(this,I,V),this.current=[0,0]}return t(C,"Uniform2f"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=t(function(V){(V[0]!==this.current[0]||V[1]!==this.current[1])&&(this.current=V,this.gl.uniform2f(this.location,V[0],V[1]))},"set"),C}(it),Mt=function(E){function C(I,V){E.call(this,I,V),this.current=[0,0,0]}return t(C,"Uniform3f"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=t(function(V){(V[0]!==this.current[0]||V[1]!==this.current[1]||V[2]!==this.current[2])&&(this.current=V,this.gl.uniform3f(this.location,V[0],V[1],V[2]))},"set"),C}(it),Dt=function(E){function C(I,V){E.call(this,I,V),this.current=[0,0,0,0]}return t(C,"Uniform4f"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=t(function(V){(V[0]!==this.current[0]||V[1]!==this.current[1]||V[2]!==this.current[2]||V[3]!==this.current[3])&&(this.current=V,this.gl.uniform4f(this.location,V[0],V[1],V[2],V[3]))},"set"),C}(it),St=function(E){function C(I,V){E.call(this,I,V),this.current=yi.transparent}return t(C,"UniformColor"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=t(function(V){(V.r!==this.current.r||V.g!==this.current.g||V.b!==this.current.b||V.a!==this.current.a)&&(this.current=V,this.gl.uniform4f(this.location,V.r,V.g,V.b,V.a))},"set"),C}(it),Ft=new Float32Array(16),Lt=function(E){function C(I,V){E.call(this,I,V),this.current=Ft}return t(C,"UniformMatrix4f"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=t(function(V){if(V[12]!==this.current[12]||V[0]!==this.current[0]){this.current=V,this.gl.uniformMatrix4fv(this.location,!1,V);return}for(var J=1;J<16;J++)if(V[J]!==this.current[J]){this.current=V,this.gl.uniformMatrix4fv(this.location,!1,V);break}},"set"),C}(it);function Xt(E){return[K(255*E.r,255*E.g),K(255*E.b,255*E.a)]}t(Xt,"packColor");var ar=t(function(C,I,V){this.value=C,this.uniformNames=I.map(function(J){return"u_"+J}),this.type=V},"ConstantBinder");ar.prototype.setUniform=t(function(C,I,V){C.set(V.constantOr(this.value))},"setUniform"),ar.prototype.getBinding=t(function(C,I,V){return this.type==="color"?new St(C,I):new pt(C,I)},"getBinding");var vr=t(function(C,I){this.uniformNames=I.map(function(V){return"u_"+V}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1},"CrossFadedConstantBinder");vr.prototype.setConstantPatternPositions=t(function(C,I){this.pixelRatioFrom=I.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=I.tlbr,this.patternTo=C.tlbr},"setConstantPatternPositions"),vr.prototype.setUniform=t(function(C,I,V,J){var ue=J==="u_pattern_to"?this.patternTo:J==="u_pattern_from"?this.patternFrom:J==="u_pixel_ratio_to"?this.pixelRatioTo:J==="u_pixel_ratio_from"?this.pixelRatioFrom:null;ue&&C.set(ue)},"setUniform"),vr.prototype.getBinding=t(function(C,I,V){return V.substr(0,9)==="u_pattern"?new Dt(C,I):new pt(C,I)},"getBinding");var Ir=t(function(C,I,V,J){this.expression=C,this.type=V,this.maxValue=0,this.paintVertexAttributes=I.map(function(ue){return{name:"a_"+ue,type:"Float32",components:V==="color"?2:1,offset:0}}),this.paintVertexArray=new J},"SourceExpressionBinder");Ir.prototype.populatePaintArray=t(function(C,I,V,J,ue){var ge=this.paintVertexArray.length,ke=this.expression.evaluate(new On(0),I,{},J,[],ue);this.paintVertexArray.resize(C),this._setPaintValue(ge,C,ke)},"populatePaintArray"),Ir.prototype.updatePaintArray=t(function(C,I,V,J){var ue=this.expression.evaluate({zoom:0},V,J);this._setPaintValue(C,I,ue)},"updatePaintArray"),Ir.prototype._setPaintValue=t(function(C,I,V){if(this.type==="color")for(var J=Xt(V),ue=C;ue<I;ue++)this.paintVertexArray.emplace(ue,J[0],J[1]);else{for(var ge=C;ge<I;ge++)this.paintVertexArray.emplace(ge,V);this.maxValue=Math.max(this.maxValue,Math.abs(V))}},"_setPaintValue"),Ir.prototype.upload=t(function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},"upload"),Ir.prototype.destroy=t(function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},"destroy");var zr=t(function(C,I,V,J,ue,ge){this.expression=C,this.uniformNames=I.map(function(ke){return"u_"+ke+"_t"}),this.type=V,this.useIntegerZoom=J,this.zoom=ue,this.maxValue=0,this.paintVertexAttributes=I.map(function(ke){return{name:"a_"+ke,type:"Float32",components:V==="color"?4:2,offset:0}}),this.paintVertexArray=new ge},"CompositeExpressionBinder");zr.prototype.populatePaintArray=t(function(C,I,V,J,ue){var ge=this.expression.evaluate(new On(this.zoom),I,{},J,[],ue),ke=this.expression.evaluate(new On(this.zoom+1),I,{},J,[],ue),Pe=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(Pe,C,ge,ke)},"populatePaintArray"),zr.prototype.updatePaintArray=t(function(C,I,V,J){var ue=this.expression.evaluate({zoom:this.zoom},V,J),ge=this.expression.evaluate({zoom:this.zoom+1},V,J);this._setPaintValue(C,I,ue,ge)},"updatePaintArray"),zr.prototype._setPaintValue=t(function(C,I,V,J){if(this.type==="color")for(var ue=Xt(V),ge=Xt(J),ke=C;ke<I;ke++)this.paintVertexArray.emplace(ke,ue[0],ue[1],ge[0],ge[1]);else{for(var Pe=C;Pe<I;Pe++)this.paintVertexArray.emplace(Pe,V,J);this.maxValue=Math.max(this.maxValue,Math.abs(V),Math.abs(J))}},"_setPaintValue"),zr.prototype.upload=t(function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},"upload"),zr.prototype.destroy=t(function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},"destroy"),zr.prototype.setUniform=t(function(C,I){var V=this.useIntegerZoom?Math.floor(I.zoom):I.zoom,J=m(this.expression.interpolationFactor(V,this.zoom,this.zoom+1),0,1);C.set(J)},"setUniform"),zr.prototype.getBinding=t(function(C,I,V){return new pt(C,I)},"getBinding");var Dr=t(function(C,I,V,J,ue,ge){this.expression=C,this.type=I,this.useIntegerZoom=V,this.zoom=J,this.layerId=ge,this.zoomInPaintVertexArray=new ue,this.zoomOutPaintVertexArray=new ue},"CrossFadedCompositeBinder");Dr.prototype.populatePaintArray=t(function(C,I,V){var J=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(J,C,I.patterns&&I.patterns[this.layerId],V)},"populatePaintArray"),Dr.prototype.updatePaintArray=t(function(C,I,V,J,ue){this._setPaintValues(C,I,V.patterns&&V.patterns[this.layerId],ue)},"updatePaintArray"),Dr.prototype._setPaintValues=t(function(C,I,V,J){if(!(!J||!V)){var ue=V.min,ge=V.mid,ke=V.max,Pe=J[ue],Oe=J[ge],Ve=J[ke];if(!(!Pe||!Oe||!Ve))for(var lt=C;lt<I;lt++)this.zoomInPaintVertexArray.emplace(lt,Oe.tl[0],Oe.tl[1],Oe.br[0],Oe.br[1],Pe.tl[0],Pe.tl[1],Pe.br[0],Pe.br[1],Oe.pixelRatio,Pe.pixelRatio),this.zoomOutPaintVertexArray.emplace(lt,Oe.tl[0],Oe.tl[1],Oe.br[0],Oe.br[1],Ve.tl[0],Ve.tl[1],Ve.br[0],Ve.br[1],Oe.pixelRatio,Ve.pixelRatio)}},"_setPaintValues"),Dr.prototype.upload=t(function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,U.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,U.members,this.expression.isStateDependent))},"upload"),Dr.prototype.destroy=t(function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},"destroy");var Vr=t(function(C,I,V,J){this.binders={},this.layoutAttributes=J,this._buffers=[];var ue=[];for(var ge in C.paint._values)if(!!V(ge)){var ke=C.paint.get(ge);if(!(!(ke instanceof Yt)||!Iu(ke.property.specification))){var Pe=Ta(ge,C.type),Oe=ke.value,Ve=ke.property.specification.type,lt=ke.property.useIntegerZoom,At=ke.property.specification["property-type"],mt=At==="cross-faded"||At==="cross-faded-data-driven";if(Oe.kind==="constant")this.binders[ge]=mt?new vr(Oe.value,Pe):new ar(Oe.value,Pe,Ve),ue.push("/u_"+ge);else if(Oe.kind==="source"||mt){var Bt=sa(ge,Ve,"source");this.binders[ge]=mt?new Dr(Oe,Ve,lt,I,Bt,C.id):new Ir(Oe,Pe,Ve,Bt),ue.push("/a_"+ge)}else{var Kt=sa(ge,Ve,"composite");this.binders[ge]=new zr(Oe,Pe,Ve,lt,I,Kt),ue.push("/z_"+ge)}}}this.cacheKey=ue.sort().join("")},"ProgramConfiguration");Vr.prototype.getMaxValue=t(function(C){var I=this.binders[C];return I instanceof Ir||I instanceof zr?I.maxValue:0},"getMaxValue"),Vr.prototype.populatePaintArrays=t(function(C,I,V,J,ue){for(var ge in this.binders){var ke=this.binders[ge];(ke instanceof Ir||ke instanceof zr||ke instanceof Dr)&&ke.populatePaintArray(C,I,V,J,ue)}},"populatePaintArrays"),Vr.prototype.setConstantPatternPositions=t(function(C,I){for(var V in this.binders){var J=this.binders[V];J instanceof vr&&J.setConstantPatternPositions(C,I)}},"setConstantPatternPositions"),Vr.prototype.updatePaintArrays=t(function(C,I,V,J,ue){var ge=!1;for(var ke in C)for(var Pe=I.getPositions(ke),Oe=0,Ve=Pe;Oe<Ve.length;Oe+=1){var lt=Ve[Oe],At=V.feature(lt.index);for(var mt in this.binders){var Bt=this.binders[mt];if((Bt instanceof Ir||Bt instanceof zr||Bt instanceof Dr)&&Bt.expression.isStateDependent===!0){var Kt=J.paint.get(mt);Bt.expression=Kt.value,Bt.updatePaintArray(lt.start,lt.end,At,C[ke],ue),ge=!0}}}return ge},"updatePaintArrays"),Vr.prototype.defines=t(function(){var C=[];for(var I in this.binders){var V=this.binders[I];(V instanceof ar||V instanceof vr)&&C.push.apply(C,V.uniformNames.map(function(J){return"#define HAS_UNIFORM_"+J}))}return C},"defines"),Vr.prototype.getPaintVertexBuffers=t(function(){return this._buffers},"getPaintVertexBuffers"),Vr.prototype.getUniforms=t(function(C,I){var V=[];for(var J in this.binders){var ue=this.binders[J];if(ue instanceof ar||ue instanceof vr||ue instanceof zr)for(var ge=0,ke=ue.uniformNames;ge<ke.length;ge+=1){var Pe=ke[ge];if(I[Pe]){var Oe=ue.getBinding(C,I[Pe],Pe);V.push({name:Pe,property:J,binding:Oe})}}}return V},"getUniforms"),Vr.prototype.setUniforms=t(function(C,I,V,J){for(var ue=0,ge=I;ue<ge.length;ue+=1){var ke=ge[ue],Pe=ke.name,Oe=ke.property,Ve=ke.binding;this.binders[Oe].setUniform(Ve,J,V.get(Oe),Pe)}},"setUniforms"),Vr.prototype.updatePaintBuffers=t(function(C){this._buffers=[];for(var I in this.binders){var V=this.binders[I];if(C&&V instanceof Dr){var J=C.fromScale===2?V.zoomInPaintVertexBuffer:V.zoomOutPaintVertexBuffer;J&&this._buffers.push(J)}else(V instanceof Ir||V instanceof zr)&&V.paintVertexBuffer&&this._buffers.push(V.paintVertexBuffer)}},"updatePaintBuffers"),Vr.prototype.upload=t(function(C){for(var I in this.binders){var V=this.binders[I];(V instanceof Ir||V instanceof zr||V instanceof Dr)&&V.upload(C)}this.updatePaintBuffers()},"upload"),Vr.prototype.destroy=t(function(){for(var C in this.binders){var I=this.binders[C];(I instanceof Ir||I instanceof zr||I instanceof Dr)&&I.destroy()}},"destroy");var Xr=t(function(C,I,V,J){J===void 0&&(J=t(function(){return!0},"filterProperties")),this.programConfigurations={};for(var ue=0,ge=I;ue<ge.length;ue+=1){var ke=ge[ue];this.programConfigurations[ke.id]=new Vr(ke,V,J,C)}this.needsUpload=!1,this._featureMap=new Ze,this._bufferOffset=0},"ProgramConfigurationSet");Xr.prototype.populatePaintArrays=t(function(C,I,V,J,ue,ge){for(var ke in this.programConfigurations)this.programConfigurations[ke].populatePaintArrays(C,I,J,ue,ge);I.id!==void 0&&this._featureMap.add(I.id,V,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},"populatePaintArrays"),Xr.prototype.updatePaintArrays=t(function(C,I,V,J){for(var ue=0,ge=V;ue<ge.length;ue+=1){var ke=ge[ue];this.needsUpload=this.programConfigurations[ke.id].updatePaintArrays(C,this._featureMap,I,ke,J)||this.needsUpload}},"updatePaintArrays"),Xr.prototype.get=t(function(C){return this.programConfigurations[C]},"get"),Xr.prototype.upload=t(function(C){if(!!this.needsUpload){for(var I in this.programConfigurations)this.programConfigurations[I].upload(C);this.needsUpload=!1}},"upload"),Xr.prototype.destroy=t(function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()},"destroy");function Ta(E,C){var I={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return I[E]||[E.replace(C+"-","").replace(/-/g,"_")]}t(Ta,"paintAttributeNames");function Jr(E){var C={"line-pattern":{source:Gr,composite:Gr},"fill-pattern":{source:Gr,composite:Gr},"fill-extrusion-pattern":{source:Gr,composite:Gr}};return C[E]}t(Jr,"getLayoutException");function sa(E,C,I){var V={color:{source:jo,composite:Ii},number:{source:Hn,composite:jo}},J=Jr(E);return J&&J[I]||V[C][I]}t(sa,"layoutType"),Le("ConstantBinder",ar),Le("CrossFadedConstantBinder",vr),Le("SourceExpressionBinder",Ir),Le("CrossFadedCompositeBinder",Dr),Le("CompositeExpressionBinder",zr),Le("ProgramConfiguration",Vr,{omit:["_buffers"]}),Le("ProgramConfigurationSet",Xr);var Nr=8192;function Ua(E){return{min:-1*Math.pow(2,E-1),max:Math.pow(2,E-1)-1}}t(Ua,"createBounds");var wn=Ua(15);function Wn(E){for(var C=Nr/E.extent,I=E.loadGeometry(),V=0;V<I.length;V++)for(var J=I[V],ue=0;ue<J.length;ue++){var ge=J[ue];ge.x=Math.round(ge.x*C),ge.y=Math.round(ge.y*C),(ge.x<wn.min||ge.x>wn.max||ge.y<wn.min||ge.y>wn.max)&&(q("Geometry exceeds allowed extent, reduce your vector tile buffer size"),ge.x=m(ge.x,wn.min,wn.max),ge.y=m(ge.y,wn.min,wn.max))}return I}t(Wn,"loadGeometry");function $n(E,C,I,V,J){E.emplaceBack(C*2+(V+1)/2,I*2+(J+1)/2)}t($n,"addCircleVertex");var li=t(function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Kr,this.indexArray=new ja,this.segments=new N,this.programConfigurations=new Xr(Z,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})},"CircleBucket");li.prototype.populate=t(function(C,I,V){var J=this.layers[0],ue=[],ge=null;J.type==="circle"&&(ge=J.layout.get("circle-sort-key"));for(var ke=0,Pe=C;ke<Pe.length;ke+=1){var Oe=Pe[ke],Ve=Oe.feature,lt=Oe.id,At=Oe.index,mt=Oe.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,Kt={type:Ve.type,id:lt,properties:Ve.properties,geometry:Bt?Wn(Ve):[]};if(!!this.layers[0]._featureFilter.filter(new On(this.zoom),Kt,V)){Bt||(Kt.geometry=Wn(Ve));var yr=ge?ge.evaluate(Kt,{},V):void 0,lr={id:lt,properties:Ve.properties,type:Ve.type,sourceLayerIndex:mt,index:At,geometry:Kt.geometry,patterns:{},sortKey:yr};ue.push(lr)}}ge&&ue.sort(function(Ha,Xa){return Ha.sortKey-Xa.sortKey});for(var Rr=0,_r=ue;Rr<_r.length;Rr+=1){var Cr=_r[Rr],qr=Cr,ta=qr.geometry,ga=qr.index,da=qr.sourceLayerIndex,an=C[ga].feature;this.addFeature(Cr,ta,ga,V),I.featureIndex.insert(an,ta,ga,da,this.index)}},"populate"),li.prototype.update=t(function(C,I,V){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,I,this.stateDependentLayers,V)},"update"),li.prototype.isEmpty=t(function(){return this.layoutVertexArray.length===0},"isEmpty"),li.prototype.uploadPending=t(function(){return!this.uploaded||this.programConfigurations.needsUpload},"uploadPending"),li.prototype.upload=t(function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Z),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},"upload"),li.prototype.destroy=t(function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},"destroy"),li.prototype.addFeature=t(function(C,I,V,J){for(var ue=0,ge=I;ue<ge.length;ue+=1)for(var ke=ge[ue],Pe=0,Oe=ke;Pe<Oe.length;Pe+=1){var Ve=Oe[Pe],lt=Ve.x,At=Ve.y;if(!(lt<0||lt>=Nr||At<0||At>=Nr)){var mt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),Bt=mt.vertexLength;$n(this.layoutVertexArray,lt,At,-1,-1),$n(this.layoutVertexArray,lt,At,1,-1),$n(this.layoutVertexArray,lt,At,1,1),$n(this.layoutVertexArray,lt,At,-1,1),this.indexArray.emplaceBack(Bt,Bt+1,Bt+2),this.indexArray.emplaceBack(Bt,Bt+3,Bt+2),mt.vertexLength+=4,mt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,V,{},J)},"addFeature"),Le("CircleBucket",li,{omit:["layers"]});function gn(E,C){for(var I=0;I<E.length;I++)if(jl(C,E[I]))return!0;for(var V=0;V<C.length;V++)if(jl(E,C[V]))return!0;return!!gf(E,C)}t(gn,"polygonIntersectsPolygon");function Nn(E,C,I){return!!(jl(E,C)||Tc(C,E,I))}t(Nn,"polygonIntersectsBufferedPoint");function Xi(E,C){if(E.length===1)return Ac(C,E[0]);for(var I=0;I<C.length;I++)for(var V=C[I],J=0;J<V.length;J++)if(jl(E,V[J]))return!0;for(var ue=0;ue<E.length;ue++)if(Ac(C,E[ue]))return!0;for(var ge=0;ge<C.length;ge++)if(gf(E,C[ge]))return!0;return!1}t(Xi,"polygonIntersectsMultiPolygon");function ls(E,C,I){for(var V=0;V<C.length;V++){var J=C[V];if(E.length>=3){for(var ue=0;ue<J.length;ue++)if(jl(E,J[ue]))return!0}if(pf(E,J,I))return!0}return!1}t(ls,"polygonIntersectsBufferedMultiLine");function pf(E,C,I){if(E.length>1){if(gf(E,C))return!0;for(var V=0;V<C.length;V++)if(Tc(C[V],E,I))return!0}for(var J=0;J<E.length;J++)if(Tc(E[J],C,I))return!0;return!1}t(pf,"lineIntersectsBufferedLine");function gf(E,C){if(E.length===0||C.length===0)return!1;for(var I=0;I<E.length-1;I++)for(var V=E[I],J=E[I+1],ue=0;ue<C.length-1;ue++){var ge=C[ue],ke=C[ue+1];if(wc(V,J,ge,ke))return!0}return!1}t(gf,"lineIntersectsLine");function wc(E,C,I,V){return H(E,I,V)!==H(C,I,V)&&H(E,C,I)!==H(E,C,V)}t(wc,"lineSegmentIntersectsLineSegment");function Tc(E,C,I){var V=I*I;if(C.length===1)return E.distSqr(C[0])<V;for(var J=1;J<C.length;J++){var ue=C[J-1],ge=C[J];if(ch(E,ue,ge)<V)return!0}return!1}t(Tc,"pointIntersectsBufferedLine");function ch(E,C,I){var V=C.distSqr(I);if(V===0)return E.distSqr(C);var J=((E.x-C.x)*(I.x-C.x)+(E.y-C.y)*(I.y-C.y))/V;return J<0?E.distSqr(C):J>1?E.distSqr(I):E.distSqr(I.sub(C)._mult(J)._add(C))}t(ch,"distToSegmentSquared");function Ac(E,C){for(var I=!1,V,J,ue,ge=0;ge<E.length;ge++){V=E[ge];for(var ke=0,Pe=V.length-1;ke<V.length;Pe=ke++)J=V[ke],ue=V[Pe],J.y>C.y!=ue.y>C.y&&C.x<(ue.x-J.x)*(C.y-J.y)/(ue.y-J.y)+J.x&&(I=!I)}return I}t(Ac,"multiPolygonContainsPoint");function jl(E,C){for(var I=!1,V=0,J=E.length-1;V<E.length;J=V++){var ue=E[V],ge=E[J];ue.y>C.y!=ge.y>C.y&&C.x<(ge.x-ue.x)*(C.y-ue.y)/(ge.y-ue.y)+ue.x&&(I=!I)}return I}t(jl,"polygonContainsPoint");function Wh(E,C,I,V,J){for(var ue=0,ge=E;ue<ge.length;ue+=1){var ke=ge[ue];if(C<=ke.x&&I<=ke.y&&V>=ke.x&&J>=ke.y)return!0}var Pe=[new v(C,I),new v(C,J),new v(V,J),new v(V,I)];if(E.length>2)for(var Oe=0,Ve=Pe;Oe<Ve.length;Oe+=1){var lt=Ve[Oe];if(jl(E,lt))return!0}for(var At=0;At<E.length-1;At++){var mt=E[At],Bt=E[At+1];if(cl(mt,Bt,Pe))return!0}return!1}t(Wh,"polygonIntersectsBox");function cl(E,C,I){var V=I[0],J=I[2];if(E.x<V.x&&C.x<V.x||E.x>J.x&&C.x>J.x||E.y<V.y&&C.y<V.y||E.y>J.y&&C.y>J.y)return!1;var ue=H(E,C,I[0]);return ue!==H(E,C,I[1])||ue!==H(E,C,I[2])||ue!==H(E,C,I[3])}t(cl,"edgeIntersectsBox");function qu(E,C,I){var V=C.paint.get(E).value;return V.kind==="constant"?V.value:I.programConfigurations.get(C.id).getMaxValue(E)}t(qu,"getMaximumPaintValue");function Sc(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}t(Sc,"translateDistance");function Wf(E,C,I,V,J){if(!C[0]&&!C[1])return E;var ue=v.convert(C)._mult(J);I==="viewport"&&ue._rotate(-V);for(var ge=[],ke=0;ke<E.length;ke++){var Pe=E[ke];ge.push(Pe.sub(ue))}return ge}t(Wf,"translate");var Mc=new Qr({"circle-sort-key":new br(Wr.layout_circle["circle-sort-key"])}),U0=new Qr({"circle-radius":new br(Wr.paint_circle["circle-radius"]),"circle-color":new br(Wr.paint_circle["circle-color"]),"circle-blur":new br(Wr.paint_circle["circle-blur"]),"circle-opacity":new br(Wr.paint_circle["circle-opacity"]),"circle-translate":new cr(Wr.paint_circle["circle-translate"]),"circle-translate-anchor":new cr(Wr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new cr(Wr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new cr(Wr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new br(Wr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new br(Wr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new br(Wr.paint_circle["circle-stroke-opacity"])}),Zv={paint:U0,layout:Mc},Xs=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var E=arguments,C=0,I=arguments.length;I--;)C+=E[I]*E[I];return Math.sqrt(C)});function Bp(){var E=new Xs(4);return Xs!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}t(Bp,"create");function El(E,C,I){var V=C[0],J=C[1],ue=C[2],ge=C[3],ke=Math.sin(I),Pe=Math.cos(I);return E[0]=V*Pe+ue*ke,E[1]=J*Pe+ge*ke,E[2]=V*-ke+ue*Pe,E[3]=J*-ke+ge*Pe,E}t(El,"rotate");function Op(){var E=new Xs(9);return Xs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E}t(Op,"create$1");function H0(E,C){var I=Math.sin(C),V=Math.cos(C);return E[0]=V,E[1]=I,E[2]=0,E[3]=-I,E[4]=V,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E}t(H0,"fromRotation");function $0(){var E=new Xs(16);return Xs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E}t($0,"create$2");function Cx(E){var C=new Xs(16);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3],C[4]=E[4],C[5]=E[5],C[6]=E[6],C[7]=E[7],C[8]=E[8],C[9]=E[9],C[10]=E[10],C[11]=E[11],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15],C}t(Cx,"clone$1");function V0(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}t(V0,"identity");function Fd(E,C){var I=C[0],V=C[1],J=C[2],ue=C[3],ge=C[4],ke=C[5],Pe=C[6],Oe=C[7],Ve=C[8],lt=C[9],At=C[10],mt=C[11],Bt=C[12],Kt=C[13],yr=C[14],lr=C[15],Rr=I*ke-V*ge,_r=I*Pe-J*ge,Cr=I*Oe-ue*ge,qr=V*Pe-J*ke,ta=V*Oe-ue*ke,ga=J*Oe-ue*Pe,da=Ve*Kt-lt*Bt,an=Ve*yr-At*Bt,Ha=Ve*lr-mt*Bt,Xa=lt*yr-At*Kt,Mn=lt*lr-mt*Kt,Qa=At*lr-mt*yr,rn=Rr*Qa-_r*Mn+Cr*Xa+qr*Ha-ta*an+ga*da;return rn?(rn=1/rn,E[0]=(ke*Qa-Pe*Mn+Oe*Xa)*rn,E[1]=(J*Mn-V*Qa-ue*Xa)*rn,E[2]=(Kt*ga-yr*ta+lr*qr)*rn,E[3]=(At*ta-lt*ga-mt*qr)*rn,E[4]=(Pe*Ha-ge*Qa-Oe*an)*rn,E[5]=(I*Qa-J*Ha+ue*an)*rn,E[6]=(yr*Cr-Bt*ga-lr*_r)*rn,E[7]=(Ve*ga-At*Cr+mt*_r)*rn,E[8]=(ge*Mn-ke*Ha+Oe*da)*rn,E[9]=(V*Ha-I*Mn-ue*da)*rn,E[10]=(Bt*ta-Kt*Cr+lr*Rr)*rn,E[11]=(lt*Cr-Ve*ta-mt*Rr)*rn,E[12]=(ke*an-ge*Xa-Pe*da)*rn,E[13]=(I*Xa-V*an+J*da)*rn,E[14]=(Kt*_r-Bt*qr-yr*Rr)*rn,E[15]=(Ve*qr-lt*_r+At*Rr)*rn,E):null}t(Fd,"invert");function Bd(E,C,I){var V=C[0],J=C[1],ue=C[2],ge=C[3],ke=C[4],Pe=C[5],Oe=C[6],Ve=C[7],lt=C[8],At=C[9],mt=C[10],Bt=C[11],Kt=C[12],yr=C[13],lr=C[14],Rr=C[15],_r=I[0],Cr=I[1],qr=I[2],ta=I[3];return E[0]=_r*V+Cr*ke+qr*lt+ta*Kt,E[1]=_r*J+Cr*Pe+qr*At+ta*yr,E[2]=_r*ue+Cr*Oe+qr*mt+ta*lr,E[3]=_r*ge+Cr*Ve+qr*Bt+ta*Rr,_r=I[4],Cr=I[5],qr=I[6],ta=I[7],E[4]=_r*V+Cr*ke+qr*lt+ta*Kt,E[5]=_r*J+Cr*Pe+qr*At+ta*yr,E[6]=_r*ue+Cr*Oe+qr*mt+ta*lr,E[7]=_r*ge+Cr*Ve+qr*Bt+ta*Rr,_r=I[8],Cr=I[9],qr=I[10],ta=I[11],E[8]=_r*V+Cr*ke+qr*lt+ta*Kt,E[9]=_r*J+Cr*Pe+qr*At+ta*yr,E[10]=_r*ue+Cr*Oe+qr*mt+ta*lr,E[11]=_r*ge+Cr*Ve+qr*Bt+ta*Rr,_r=I[12],Cr=I[13],qr=I[14],ta=I[15],E[12]=_r*V+Cr*ke+qr*lt+ta*Kt,E[13]=_r*J+Cr*Pe+qr*At+ta*yr,E[14]=_r*ue+Cr*Oe+qr*mt+ta*lr,E[15]=_r*ge+Cr*Ve+qr*Bt+ta*Rr,E}t(Bd,"multiply");function Xo(E,C,I){var V=I[0],J=I[1],ue=I[2],ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt,yr,lr;return C===E?(E[12]=C[0]*V+C[4]*J+C[8]*ue+C[12],E[13]=C[1]*V+C[5]*J+C[9]*ue+C[13],E[14]=C[2]*V+C[6]*J+C[10]*ue+C[14],E[15]=C[3]*V+C[7]*J+C[11]*ue+C[15]):(ge=C[0],ke=C[1],Pe=C[2],Oe=C[3],Ve=C[4],lt=C[5],At=C[6],mt=C[7],Bt=C[8],Kt=C[9],yr=C[10],lr=C[11],E[0]=ge,E[1]=ke,E[2]=Pe,E[3]=Oe,E[4]=Ve,E[5]=lt,E[6]=At,E[7]=mt,E[8]=Bt,E[9]=Kt,E[10]=yr,E[11]=lr,E[12]=ge*V+Ve*J+Bt*ue+C[12],E[13]=ke*V+lt*J+Kt*ue+C[13],E[14]=Pe*V+At*J+yr*ue+C[14],E[15]=Oe*V+mt*J+lr*ue+C[15]),E}t(Xo,"translate$1");function su(E,C,I){var V=I[0],J=I[1],ue=I[2];return E[0]=C[0]*V,E[1]=C[1]*V,E[2]=C[2]*V,E[3]=C[3]*V,E[4]=C[4]*J,E[5]=C[5]*J,E[6]=C[6]*J,E[7]=C[7]*J,E[8]=C[8]*ue,E[9]=C[9]*ue,E[10]=C[10]*ue,E[11]=C[11]*ue,E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15],E}t(su,"scale");function lu(E,C,I){var V=Math.sin(I),J=Math.cos(I),ue=C[4],ge=C[5],ke=C[6],Pe=C[7],Oe=C[8],Ve=C[9],lt=C[10],At=C[11];return C!==E&&(E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[4]=ue*J+Oe*V,E[5]=ge*J+Ve*V,E[6]=ke*J+lt*V,E[7]=Pe*J+At*V,E[8]=Oe*J-ue*V,E[9]=Ve*J-ge*V,E[10]=lt*J-ke*V,E[11]=At*J-Pe*V,E}t(lu,"rotateX");function G0(E,C,I){var V=Math.sin(I),J=Math.cos(I),ue=C[0],ge=C[1],ke=C[2],Pe=C[3],Oe=C[4],Ve=C[5],lt=C[6],At=C[7];return C!==E&&(E[8]=C[8],E[9]=C[9],E[10]=C[10],E[11]=C[11],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[0]=ue*J+Oe*V,E[1]=ge*J+Ve*V,E[2]=ke*J+lt*V,E[3]=Pe*J+At*V,E[4]=Oe*J-ue*V,E[5]=Ve*J-ge*V,E[6]=lt*J-ke*V,E[7]=At*J-Pe*V,E}t(G0,"rotateZ");function Wy(E,C,I,V,J){var ue=1/Math.tan(C/2),ge;return E[0]=ue/I,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=ue,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,J!=null&&J!==1/0?(ge=1/(V-J),E[10]=(J+V)*ge,E[14]=2*J*V*ge):(E[10]=-1,E[14]=-2*V),E}t(Wy,"perspective");function E3(E,C,I,V,J,ue,ge){var ke=1/(C-I),Pe=1/(V-J),Oe=1/(ue-ge);return E[0]=-2*ke,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*Pe,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*Oe,E[11]=0,E[12]=(C+I)*ke,E[13]=(J+V)*Pe,E[14]=(ge+ue)*Oe,E[15]=1,E}t(E3,"ortho");var C3=Bd;function Np(){var E=new Xs(3);return Xs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0),E}t(Np,"create$3");function L3(E){var C=new Xs(3);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C}t(L3,"clone$2");function j0(E,C,I){return E[0]=C[0]+I[0],E[1]=C[1]+I[1],E[2]=C[2]+I[2],E}t(j0,"add");function R3(E,C,I){return E[0]=C[0]-I[0],E[1]=C[1]-I[1],E[2]=C[2]-I[2],E}t(R3,"subtract");function P3(E,C,I){return E[0]=C[0]*I,E[1]=C[1]*I,E[2]=C[2]*I,E}t(P3,"scale$1");function Xy(E,C){var I=C[0],V=C[1],J=C[2],ue=I*I+V*V+J*J;return ue>0&&(ue=1/Math.sqrt(ue)),E[0]=C[0]*ue,E[1]=C[1]*ue,E[2]=C[2]*ue,E}t(Xy,"normalize");function p0e(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]}t(p0e,"dot");function g0e(E,C,I){var V=C[0],J=C[1],ue=C[2],ge=I[0],ke=I[1],Pe=I[2];return E[0]=J*Pe-ue*ke,E[1]=ue*ge-V*Pe,E[2]=V*ke-J*ge,E}t(g0e,"cross");function y0e(E,C,I){var V=C[0],J=C[1],ue=C[2];return E[0]=V*I[0]+J*I[3]+ue*I[6],E[1]=V*I[1]+J*I[4]+ue*I[7],E[2]=V*I[2]+J*I[5]+ue*I[8],E}t(y0e,"transformMat3");var m0e=R3;(function(){var E=Np();return function(C,I,V,J,ue,ge){var ke,Pe;for(I||(I=3),V||(V=0),J?Pe=Math.min(J*I+V,C.length):Pe=C.length,ke=V;ke<Pe;ke+=I)E[0]=C[ke],E[1]=C[ke+1],E[2]=C[ke+2],ue(E,E,ge),C[ke]=E[0],C[ke+1]=E[1],C[ke+2]=E[2];return C}})();function x0e(){var E=new Xs(4);return Xs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0),E}t(x0e,"create$4");function b0e(E,C,I){return E[0]=C[0]*I,E[1]=C[1]*I,E[2]=C[2]*I,E[3]=C[3]*I,E}t(b0e,"scale$2");function _0e(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3]}t(_0e,"dot$1");function Lx(E,C,I){var V=C[0],J=C[1],ue=C[2],ge=C[3];return E[0]=I[0]*V+I[4]*J+I[8]*ue+I[12]*ge,E[1]=I[1]*V+I[5]*J+I[9]*ue+I[13]*ge,E[2]=I[2]*V+I[6]*J+I[10]*ue+I[14]*ge,E[3]=I[3]*V+I[7]*J+I[11]*ue+I[15]*ge,E}t(Lx,"transformMat4"),function(){var E=x0e();return function(C,I,V,J,ue,ge){var ke,Pe;for(I||(I=4),V||(V=0),J?Pe=Math.min(J*I+V,C.length):Pe=C.length,ke=V;ke<Pe;ke+=I)E[0]=C[ke],E[1]=C[ke+1],E[2]=C[ke+2],E[3]=C[ke+3],ue(E,E,ge),C[ke]=E[0],C[ke+1]=E[1],C[ke+2]=E[2],C[ke+3]=E[3];return C}}();function w0e(){var E=new Xs(2);return Xs!=Float32Array&&(E[0]=0,E[1]=0),E}t(w0e,"create$5");function T0e(E){var C=E[0],I=E[1];return C*C+I*I}t(T0e,"squaredLength");var A0e=T0e;(function(){var E=w0e();return function(C,I,V,J,ue,ge){var ke,Pe;for(I||(I=2),V||(V=0),J?Pe=Math.min(J*I+V,C.length):Pe=C.length,ke=V;ke<Pe;ke+=I)E[0]=C[ke],E[1]=C[ke+1],ue(E,E,ge),C[ke]=E[0],C[ke+1]=E[1];return C}})();var S0e=function(E){function C(I){E.call(this,I,Zv)}return t(C,"CircleStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=t(function(V){return new li(V)},"createBucket"),C.prototype.queryRadius=t(function(V){var J=V;return qu("circle-radius",this,J)+qu("circle-stroke-width",this,J)+Sc(this.paint.get("circle-translate"))},"queryRadius"),C.prototype.queryIntersectsFeature=t(function(V,J,ue,ge,ke,Pe,Oe,Ve){for(var lt=Wf(V,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Pe.angle,Oe),At=this.paint.get("circle-radius").evaluate(J,ue),mt=this.paint.get("circle-stroke-width").evaluate(J,ue),Bt=At+mt,Kt=this.paint.get("circle-pitch-alignment")==="map",yr=Kt?lt:M0e(lt,Ve),lr=Kt?Bt*Oe:Bt,Rr=0,_r=ge;Rr<_r.length;Rr+=1)for(var Cr=_r[Rr],qr=0,ta=Cr;qr<ta.length;qr+=1){var ga=ta[qr],da=Kt?ga:kB(ga,Ve),an=lr,Ha=Lx([],[ga.x,ga.y,0,1],Ve);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?an*=Ha[3]/Pe.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(an*=Pe.cameraToCenterDistance/Ha[3]),Nn(yr,da,an))return!0}return!1},"queryIntersectsFeature"),C}(ka);function kB(E,C){var I=Lx([],[E.x,E.y,0,1],C);return new v(I[0]/I[3],I[1]/I[3])}t(kB,"projectPoint");function M0e(E,C){return E.map(function(I){return kB(I,C)})}t(M0e,"projectQueryGeometry");var EB=function(E){function C(){E.apply(this,arguments)}return t(C,"HeatmapBucket"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(li);Le("HeatmapBucket",EB,{omit:["layers"]});function D3(E,C,I,V){var J=C.width,ue=C.height;if(!V)V=new Uint8Array(J*ue*I);else if(V instanceof Uint8ClampedArray)V=new Uint8Array(V.buffer);else if(V.length!==J*ue*I)throw new RangeError("mismatched image size");return E.width=J,E.height=ue,E.data=V,E}t(D3,"createImage");function CB(E,C,I){var V=C.width,J=C.height;if(!(V===E.width&&J===E.height)){var ue=D3({},{width:V,height:J},I);I3(E,ue,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,V),height:Math.min(E.height,J)},I),E.width=V,E.height=J,E.data=ue.data}}t(CB,"resizeImage");function I3(E,C,I,V,J,ue){if(J.width===0||J.height===0)return C;if(J.width>E.width||J.height>E.height||I.x>E.width-J.width||I.y>E.height-J.height)throw new RangeError("out of range source coordinates for image copy");if(J.width>C.width||J.height>C.height||V.x>C.width-J.width||V.y>C.height-J.height)throw new RangeError("out of range destination coordinates for image copy");for(var ge=E.data,ke=C.data,Pe=0;Pe<J.height;Pe++)for(var Oe=((I.y+Pe)*E.width+I.x)*ue,Ve=((V.y+Pe)*C.width+V.x)*ue,lt=0;lt<J.width*ue;lt++)ke[Ve+lt]=ge[Oe+lt];return C}t(I3,"copyImage");var qp=t(function(C,I){D3(this,C,1,I)},"AlphaImage");qp.prototype.resize=t(function(C){CB(this,C,1)},"resize"),qp.prototype.clone=t(function(){return new qp({width:this.width,height:this.height},new Uint8Array(this.data))},"clone"),qp.copy=t(function(C,I,V,J,ue){I3(C,I,V,J,ue,1)},"copy");var uu=t(function(C,I){D3(this,C,4,I)},"RGBAImage");uu.prototype.resize=t(function(C){CB(this,C,4)},"resize"),uu.prototype.replace=t(function(C,I){I?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},"replace"),uu.prototype.clone=t(function(){return new uu({width:this.width,height:this.height},new Uint8Array(this.data))},"clone"),uu.copy=t(function(C,I,V,J,ue){I3(C,I,V,J,ue,4)},"copy"),Le("AlphaImage",qp),Le("RGBAImage",uu);var k0e=new Qr({"heatmap-radius":new br(Wr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new br(Wr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new cr(Wr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new la(Wr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new cr(Wr.paint_heatmap["heatmap-opacity"])}),E0e={paint:k0e};function LB(E,C){for(var I=new Uint8Array(1024),V={},J=0,ue=0;J<256;J++,ue+=4){V[C]=J/255;var ge=E.evaluate(V);I[ue+0]=Math.floor(ge.r*255/ge.a),I[ue+1]=Math.floor(ge.g*255/ge.a),I[ue+2]=Math.floor(ge.b*255/ge.a),I[ue+3]=Math.floor(ge.a*255)}return new uu({width:256,height:1},I)}t(LB,"renderColorRamp");var C0e=function(E){function C(I){E.call(this,I,E0e),this._updateColorRamp()}return t(C,"HeatmapStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=t(function(V){return new EB(V)},"createBucket"),C.prototype._handleSpecialPaintPropertyUpdate=t(function(V){V==="heatmap-color"&&this._updateColorRamp()},"_handleSpecialPaintPropertyUpdate"),C.prototype._updateColorRamp=t(function(){var V=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=LB(V,"heatmapDensity"),this.colorRampTexture=null},"_updateColorRamp"),C.prototype.resize=t(function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},"resize"),C.prototype.queryRadius=t(function(){return 0},"queryRadius"),C.prototype.queryIntersectsFeature=t(function(){return!1},"queryIntersectsFeature"),C.prototype.hasOffscreenPass=t(function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},"hasOffscreenPass"),C}(ka),L0e=new Qr({"hillshade-illumination-direction":new cr(Wr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new cr(Wr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new cr(Wr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new cr(Wr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new cr(Wr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new cr(Wr.paint_hillshade["hillshade-accent-color"])}),R0e={paint:L0e},P0e=function(E){function C(I){E.call(this,I,R0e)}return t(C,"HillshadeStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=t(function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},"hasOffscreenPass"),C}(ka),D0e=Mr([{name:"a_pos",components:2,type:"Int16"}],4),RB=D0e.members,z3=Rx,I0e=Rx;function Rx(E,C,I){I=I||2;var V=C&&C.length,J=V?C[0]*I:E.length,ue=PB(E,0,J,I,!0),ge=[];if(!ue||ue.next===ue.prev)return ge;var ke,Pe,Oe,Ve,lt,At,mt;if(V&&(ue=N0e(E,C,ue,I)),E.length>80*I){ke=Oe=E[0],Pe=Ve=E[1];for(var Bt=I;Bt<J;Bt+=I)lt=E[Bt],At=E[Bt+1],lt<ke&&(ke=lt),At<Pe&&(Pe=At),lt>Oe&&(Oe=lt),At>Ve&&(Ve=At);mt=Math.max(Oe-ke,Ve-Pe),mt=mt!==0?1/mt:0}return Zy(ue,ge,I,ke,Pe,mt),ge}t(Rx,"earcut");function PB(E,C,I,V,J){var ue,ge;if(J===O3(E,C,I,V)>0)for(ue=C;ue<I;ue+=V)ge=zB(ue,E[ue],E[ue+1],ge);else for(ue=I-V;ue>=C;ue-=V)ge=zB(ue,E[ue],E[ue+1],ge);return ge&&Px(ge,ge.next)&&(Jy(ge),ge=ge.next),ge}t(PB,"linkedList");function Od(E,C){if(!E)return E;C||(C=E);var I=E,V;do if(V=!1,!I.steiner&&(Px(I,I.next)||us(I.prev,I,I.next)===0)){if(Jy(I),I=C=I.prev,I===I.next)break;V=!0}else I=I.next;while(V||I!==C);return C}t(Od,"filterPoints");function Zy(E,C,I,V,J,ue,ge){if(!!E){!ge&&ue&&V0e(E,V,J,ue);for(var ke=E,Pe,Oe;E.prev!==E.next;){if(Pe=E.prev,Oe=E.next,ue?F0e(E,V,J,ue):z0e(E)){C.push(Pe.i/I),C.push(E.i/I),C.push(Oe.i/I),Jy(E),E=Oe.next,ke=Oe.next;continue}if(E=Oe,E===ke){ge?ge===1?(E=B0e(Od(E),C,I),Zy(E,C,I,V,J,ue,2)):ge===2&&O0e(E,C,I,V,J,ue):Zy(Od(E),C,I,V,J,ue,1);break}}}}t(Zy,"earcutLinked");function z0e(E){var C=E.prev,I=E,V=E.next;if(us(C,I,V)>=0)return!1;for(var J=E.next.next;J!==E.prev;){if(Y0(C.x,C.y,I.x,I.y,V.x,V.y,J.x,J.y)&&us(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}t(z0e,"isEar");function F0e(E,C,I,V){var J=E.prev,ue=E,ge=E.next;if(us(J,ue,ge)>=0)return!1;for(var ke=J.x<ue.x?J.x<ge.x?J.x:ge.x:ue.x<ge.x?ue.x:ge.x,Pe=J.y<ue.y?J.y<ge.y?J.y:ge.y:ue.y<ge.y?ue.y:ge.y,Oe=J.x>ue.x?J.x>ge.x?J.x:ge.x:ue.x>ge.x?ue.x:ge.x,Ve=J.y>ue.y?J.y>ge.y?J.y:ge.y:ue.y>ge.y?ue.y:ge.y,lt=F3(ke,Pe,C,I,V),At=F3(Oe,Ve,C,I,V),mt=E.prevZ,Bt=E.nextZ;mt&&mt.z>=lt&&Bt&&Bt.z<=At;){if(mt!==E.prev&&mt!==E.next&&Y0(J.x,J.y,ue.x,ue.y,ge.x,ge.y,mt.x,mt.y)&&us(mt.prev,mt,mt.next)>=0||(mt=mt.prevZ,Bt!==E.prev&&Bt!==E.next&&Y0(J.x,J.y,ue.x,ue.y,ge.x,ge.y,Bt.x,Bt.y)&&us(Bt.prev,Bt,Bt.next)>=0))return!1;Bt=Bt.nextZ}for(;mt&&mt.z>=lt;){if(mt!==E.prev&&mt!==E.next&&Y0(J.x,J.y,ue.x,ue.y,ge.x,ge.y,mt.x,mt.y)&&us(mt.prev,mt,mt.next)>=0)return!1;mt=mt.prevZ}for(;Bt&&Bt.z<=At;){if(Bt!==E.prev&&Bt!==E.next&&Y0(J.x,J.y,ue.x,ue.y,ge.x,ge.y,Bt.x,Bt.y)&&us(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.nextZ}return!0}t(F0e,"isEarHashed");function B0e(E,C,I){var V=E;do{var J=V.prev,ue=V.next.next;!Px(J,ue)&&DB(J,V,V.next,ue)&&Ky(J,ue)&&Ky(ue,J)&&(C.push(J.i/I),C.push(V.i/I),C.push(ue.i/I),Jy(V),Jy(V.next),V=E=ue),V=V.next}while(V!==E);return Od(V)}t(B0e,"cureLocalIntersections");function O0e(E,C,I,V,J,ue){var ge=E;do{for(var ke=ge.next.next;ke!==ge.prev;){if(ge.i!==ke.i&&Y0e(ge,ke)){var Pe=IB(ge,ke);ge=Od(ge,ge.next),Pe=Od(Pe,Pe.next),Zy(ge,C,I,V,J,ue),Zy(Pe,C,I,V,J,ue);return}ke=ke.next}ge=ge.next}while(ge!==E)}t(O0e,"splitEarcut");function N0e(E,C,I,V){var J=[],ue,ge,ke,Pe,Oe;for(ue=0,ge=C.length;ue<ge;ue++)ke=C[ue]*V,Pe=ue<ge-1?C[ue+1]*V:E.length,Oe=PB(E,ke,Pe,V,!1),Oe===Oe.next&&(Oe.steiner=!0),J.push(j0e(Oe));for(J.sort(q0e),ue=0;ue<J.length;ue++)U0e(J[ue],I),I=Od(I,I.next);return I}t(N0e,"eliminateHoles");function q0e(E,C){return E.x-C.x}t(q0e,"compareX");function U0e(E,C){if(C=H0e(E,C),C){var I=IB(C,E);Od(C,C.next),Od(I,I.next)}}t(U0e,"eliminateHole");function H0e(E,C){var I=C,V=E.x,J=E.y,ue=-1/0,ge;do{if(J<=I.y&&J>=I.next.y&&I.next.y!==I.y){var ke=I.x+(J-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(ke<=V&&ke>ue){if(ue=ke,ke===V){if(J===I.y)return I;if(J===I.next.y)return I.next}ge=I.x<I.next.x?I:I.next}}I=I.next}while(I!==C);if(!ge)return null;if(V===ue)return ge;var Pe=ge,Oe=ge.x,Ve=ge.y,lt=1/0,At;I=ge;do V>=I.x&&I.x>=Oe&&V!==I.x&&Y0(J<Ve?V:ue,J,Oe,Ve,J<Ve?ue:V,J,I.x,I.y)&&(At=Math.abs(J-I.y)/(V-I.x),Ky(I,E)&&(At<lt||At===lt&&(I.x>ge.x||I.x===ge.x&&$0e(ge,I)))&&(ge=I,lt=At)),I=I.next;while(I!==Pe);return ge}t(H0e,"findHoleBridge");function $0e(E,C){return us(E.prev,E,C.prev)<0&&us(C.next,E,E.next)<0}t($0e,"sectorContainsSector");function V0e(E,C,I,V){var J=E;do J.z===null&&(J.z=F3(J.x,J.y,C,I,V)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==E);J.prevZ.nextZ=null,J.prevZ=null,G0e(J)}t(V0e,"indexCurve");function G0e(E){var C,I,V,J,ue,ge,ke,Pe,Oe=1;do{for(I=E,E=null,ue=null,ge=0;I;){for(ge++,V=I,ke=0,C=0;C<Oe&&(ke++,V=V.nextZ,!!V);C++);for(Pe=Oe;ke>0||Pe>0&&V;)ke!==0&&(Pe===0||!V||I.z<=V.z)?(J=I,I=I.nextZ,ke--):(J=V,V=V.nextZ,Pe--),ue?ue.nextZ=J:E=J,J.prevZ=ue,ue=J;I=V}ue.nextZ=null,Oe*=2}while(ge>1);return E}t(G0e,"sortLinked");function F3(E,C,I,V,J){return E=32767*(E-I)*J,C=32767*(C-V)*J,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,E|C<<1}t(F3,"zOrder");function j0e(E){var C=E,I=E;do(C.x<I.x||C.x===I.x&&C.y<I.y)&&(I=C),C=C.next;while(C!==E);return I}t(j0e,"getLeftmost");function Y0(E,C,I,V,J,ue,ge,ke){return(J-ge)*(C-ke)-(E-ge)*(ue-ke)>=0&&(E-ge)*(V-ke)-(I-ge)*(C-ke)>=0&&(I-ge)*(ue-ke)-(J-ge)*(V-ke)>=0}t(Y0,"pointInTriangle");function Y0e(E,C){return E.next.i!==C.i&&E.prev.i!==C.i&&!W0e(E,C)&&(Ky(E,C)&&Ky(C,E)&&X0e(E,C)&&(us(E.prev,E,C.prev)||us(E,C.prev,C))||Px(E,C)&&us(E.prev,E,E.next)>0&&us(C.prev,C,C.next)>0)}t(Y0e,"isValidDiagonal");function us(E,C,I){return(C.y-E.y)*(I.x-C.x)-(C.x-E.x)*(I.y-C.y)}t(us,"area");function Px(E,C){return E.x===C.x&&E.y===C.y}t(Px,"equals");function DB(E,C,I,V){var J=Ix(us(E,C,I)),ue=Ix(us(E,C,V)),ge=Ix(us(I,V,E)),ke=Ix(us(I,V,C));return!!(J!==ue&&ge!==ke||J===0&&Dx(E,I,C)||ue===0&&Dx(E,V,C)||ge===0&&Dx(I,E,V)||ke===0&&Dx(I,C,V))}t(DB,"intersects");function Dx(E,C,I){return C.x<=Math.max(E.x,I.x)&&C.x>=Math.min(E.x,I.x)&&C.y<=Math.max(E.y,I.y)&&C.y>=Math.min(E.y,I.y)}t(Dx,"onSegment");function Ix(E){return E>0?1:E<0?-1:0}t(Ix,"sign");function W0e(E,C){var I=E;do{if(I.i!==E.i&&I.next.i!==E.i&&I.i!==C.i&&I.next.i!==C.i&&DB(I,I.next,E,C))return!0;I=I.next}while(I!==E);return!1}t(W0e,"intersectsPolygon");function Ky(E,C){return us(E.prev,E,E.next)<0?us(E,C,E.next)>=0&&us(E,E.prev,C)>=0:us(E,C,E.prev)<0||us(E,E.next,C)<0}t(Ky,"locallyInside");function X0e(E,C){var I=E,V=!1,J=(E.x+C.x)/2,ue=(E.y+C.y)/2;do I.y>ue!=I.next.y>ue&&I.next.y!==I.y&&J<(I.next.x-I.x)*(ue-I.y)/(I.next.y-I.y)+I.x&&(V=!V),I=I.next;while(I!==E);return V}t(X0e,"middleInside");function IB(E,C){var I=new B3(E.i,E.x,E.y),V=new B3(C.i,C.x,C.y),J=E.next,ue=C.prev;return E.next=C,C.prev=E,I.next=J,J.prev=I,V.next=I,I.prev=V,ue.next=V,V.prev=ue,V}t(IB,"splitPolygon");function zB(E,C,I,V){var J=new B3(E,C,I);return V?(J.next=V.next,J.prev=V,V.next.prev=J,V.next=J):(J.prev=J,J.next=J),J}t(zB,"insertNode");function Jy(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}t(Jy,"removeNode");function B3(E,C,I){this.i=E,this.x=C,this.y=I,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}t(B3,"Node"),Rx.deviation=function(E,C,I,V){var J=C&&C.length,ue=J?C[0]*I:E.length,ge=Math.abs(O3(E,0,ue,I));if(J)for(var ke=0,Pe=C.length;ke<Pe;ke++){var Oe=C[ke]*I,Ve=ke<Pe-1?C[ke+1]*I:E.length;ge-=Math.abs(O3(E,Oe,Ve,I))}var lt=0;for(ke=0;ke<V.length;ke+=3){var At=V[ke]*I,mt=V[ke+1]*I,Bt=V[ke+2]*I;lt+=Math.abs((E[At]-E[Bt])*(E[mt+1]-E[At+1])-(E[At]-E[mt])*(E[Bt+1]-E[At+1]))}return ge===0&&lt===0?0:Math.abs((lt-ge)/ge)};function O3(E,C,I,V){for(var J=0,ue=C,ge=I-V;ue<I;ue+=V)J+=(E[ge]-E[ue])*(E[ue+1]+E[ge+1]),ge=ue;return J}t(O3,"signedArea"),Rx.flatten=function(E){for(var C=E[0][0].length,I={vertices:[],holes:[],dimensions:C},V=0,J=0;J<E.length;J++){for(var ue=0;ue<E[J].length;ue++)for(var ge=0;ge<C;ge++)I.vertices.push(E[J][ue][ge]);J>0&&(V+=E[J-1].length,I.holes.push(V))}return I},z3.default=I0e;function Z0e(E,C,I,V,J){FB(E,C,I||0,V||E.length-1,J||K0e)}t(Z0e,"quickselect");function FB(E,C,I,V,J){for(;V>I;){if(V-I>600){var ue=V-I+1,ge=C-I+1,ke=Math.log(ue),Pe=.5*Math.exp(2*ke/3),Oe=.5*Math.sqrt(ke*Pe*(ue-Pe)/ue)*(ge-ue/2<0?-1:1),Ve=Math.max(I,Math.floor(C-ge*Pe/ue+Oe)),lt=Math.min(V,Math.floor(C+(ue-ge)*Pe/ue+Oe));FB(E,C,Ve,lt,J)}var At=E[C],mt=I,Bt=V;for(Qy(E,I,C),J(E[V],At)>0&&Qy(E,I,V);mt<Bt;){for(Qy(E,mt,Bt),mt++,Bt--;J(E[mt],At)<0;)mt++;for(;J(E[Bt],At)>0;)Bt--}J(E[I],At)===0?Qy(E,I,Bt):(Bt++,Qy(E,Bt,V)),Bt<=C&&(I=Bt+1),C<=Bt&&(V=Bt-1)}}t(FB,"quickselectStep");function Qy(E,C,I){var V=E[C];E[C]=E[I],E[I]=V}t(Qy,"swap$1");function K0e(E,C){return E<C?-1:E>C?1:0}t(K0e,"defaultCompare");function N3(E,C){var I=E.length;if(I<=1)return[E];for(var V=[],J,ue,ge=0;ge<I;ge++){var ke=j(E[ge]);ke!==0&&(E[ge].area=Math.abs(ke),ue===void 0&&(ue=ke<0),ue===ke<0?(J&&V.push(J),J=[E[ge]]):J.push(E[ge]))}if(J&&V.push(J),C>1)for(var Pe=0;Pe<V.length;Pe++)V[Pe].length<=C||(Z0e(V[Pe],C,1,V[Pe].length-1,J0e),V[Pe]=V[Pe].slice(0,C));return V}t(N3,"classifyRings");function J0e(E,C){return C.area-E.area}t(J0e,"compareAreas");function q3(E,C,I){for(var V=I.patternDependencies,J=!1,ue=0,ge=C;ue<ge.length;ue+=1){var ke=ge[ue],Pe=ke.paint.get(E+"-pattern");Pe.isConstant()||(J=!0);var Oe=Pe.constantOr(null);Oe&&(J=!0,V[Oe.to]=!0,V[Oe.from]=!0)}return J}t(q3,"hasPattern");function U3(E,C,I,V,J){for(var ue=J.patternDependencies,ge=0,ke=C;ge<ke.length;ge+=1){var Pe=ke[ge],Oe=Pe.paint.get(E+"-pattern"),Ve=Oe.value;if(Ve.kind!=="constant"){var lt=Ve.evaluate({zoom:V-1},I,{},J.availableImages),At=Ve.evaluate({zoom:V},I,{},J.availableImages),mt=Ve.evaluate({zoom:V+1},I,{},J.availableImages);lt=lt&&lt.name?lt.name:lt,At=At&&At.name?At.name:At,mt=mt&&mt.name?mt.name:mt,ue[lt]=!0,ue[At]=!0,ue[mt]=!0,I.patterns[Pe.id]={min:lt,mid:At,max:mt}}}return I}t(U3,"addPatternDependencies");var Q0e=500,hh=t(function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kr,this.indexArray=new ja,this.indexArray2=new Po,this.programConfigurations=new Xr(RB,C.layers,C.zoom),this.segments=new N,this.segments2=new N,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})},"FillBucket");hh.prototype.populate=t(function(C,I,V){this.hasPattern=q3("fill",this.layers,I);for(var J=this.layers[0].layout.get("fill-sort-key"),ue=[],ge=0,ke=C;ge<ke.length;ge+=1){var Pe=ke[ge],Oe=Pe.feature,Ve=Pe.id,lt=Pe.index,At=Pe.sourceLayerIndex,mt=this.layers[0]._featureFilter.needGeometry,Bt={type:Oe.type,id:Ve,properties:Oe.properties,geometry:mt?Wn(Oe):[]};if(!!this.layers[0]._featureFilter.filter(new On(this.zoom),Bt,V)){mt||(Bt.geometry=Wn(Oe));var Kt=J?J.evaluate(Bt,{},V,I.availableImages):void 0,yr={id:Ve,properties:Oe.properties,type:Oe.type,sourceLayerIndex:At,index:lt,geometry:Bt.geometry,patterns:{},sortKey:Kt};ue.push(yr)}}J&&ue.sort(function(Ha,Xa){return Ha.sortKey-Xa.sortKey});for(var lr=0,Rr=ue;lr<Rr.length;lr+=1){var _r=Rr[lr],Cr=_r,qr=Cr.geometry,ta=Cr.index,ga=Cr.sourceLayerIndex;if(this.hasPattern){var da=U3("fill",this.layers,_r,this.zoom,I);this.patternFeatures.push(da)}else this.addFeature(_r,qr,ta,V,{});var an=C[ta].feature;I.featureIndex.insert(an,qr,ta,ga,this.index)}},"populate"),hh.prototype.update=t(function(C,I,V){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,I,this.stateDependentLayers,V)},"update"),hh.prototype.addFeatures=t(function(C,I,V){for(var J=0,ue=this.patternFeatures;J<ue.length;J+=1){var ge=ue[J];this.addFeature(ge,ge.geometry,ge.index,I,V)}},"addFeatures"),hh.prototype.isEmpty=t(function(){return this.layoutVertexArray.length===0},"isEmpty"),hh.prototype.uploadPending=t(function(){return!this.uploaded||this.programConfigurations.needsUpload},"uploadPending"),hh.prototype.upload=t(function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,RB),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},"upload"),hh.prototype.destroy=t(function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},"destroy"),hh.prototype.addFeature=t(function(C,I,V,J,ue){for(var ge=0,ke=N3(I,Q0e);ge<ke.length;ge+=1){for(var Pe=ke[ge],Oe=0,Ve=0,lt=Pe;Ve<lt.length;Ve+=1){var At=lt[Ve];Oe+=At.length}for(var mt=this.segments.prepareSegment(Oe,this.layoutVertexArray,this.indexArray),Bt=mt.vertexLength,Kt=[],yr=[],lr=0,Rr=Pe;lr<Rr.length;lr+=1){var _r=Rr[lr];if(_r.length!==0){_r!==Pe[0]&&yr.push(Kt.length/2);var Cr=this.segments2.prepareSegment(_r.length,this.layoutVertexArray,this.indexArray2),qr=Cr.vertexLength;this.layoutVertexArray.emplaceBack(_r[0].x,_r[0].y),this.indexArray2.emplaceBack(qr+_r.length-1,qr),Kt.push(_r[0].x),Kt.push(_r[0].y);for(var ta=1;ta<_r.length;ta++)this.layoutVertexArray.emplaceBack(_r[ta].x,_r[ta].y),this.indexArray2.emplaceBack(qr+ta-1,qr+ta),Kt.push(_r[ta].x),Kt.push(_r[ta].y);Cr.vertexLength+=_r.length,Cr.primitiveLength+=_r.length}}for(var ga=z3(Kt,yr),da=0;da<ga.length;da+=3)this.indexArray.emplaceBack(Bt+ga[da],Bt+ga[da+1],Bt+ga[da+2]);mt.vertexLength+=Oe,mt.primitiveLength+=ga.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,V,ue,J)},"addFeature"),Le("FillBucket",hh,{omit:["layers","patternFeatures"]});var ege=new Qr({"fill-sort-key":new br(Wr.layout_fill["fill-sort-key"])}),tge=new Qr({"fill-antialias":new cr(Wr.paint_fill["fill-antialias"]),"fill-opacity":new br(Wr.paint_fill["fill-opacity"]),"fill-color":new br(Wr.paint_fill["fill-color"]),"fill-outline-color":new br(Wr.paint_fill["fill-outline-color"]),"fill-translate":new cr(Wr.paint_fill["fill-translate"]),"fill-translate-anchor":new cr(Wr.paint_fill["fill-translate-anchor"]),"fill-pattern":new kr(Wr.paint_fill["fill-pattern"])}),rge={paint:tge,layout:ege},age=function(E){function C(I){E.call(this,I,rge)}return t(C,"FillStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=t(function(V,J){E.prototype.recalculate.call(this,V,J);var ue=this.paint._values["fill-outline-color"];ue.value.kind==="constant"&&ue.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},"recalculate"),C.prototype.createBucket=t(function(V){return new hh(V)},"createBucket"),C.prototype.queryRadius=t(function(){return Sc(this.paint.get("fill-translate"))},"queryRadius"),C.prototype.queryIntersectsFeature=t(function(V,J,ue,ge,ke,Pe,Oe){var Ve=Wf(V,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Pe.angle,Oe);return Xi(Ve,ge)},"queryIntersectsFeature"),C.prototype.isTileClipped=t(function(){return!0},"isTileClipped"),C}(ka),nge=Mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),BB=nge.members,OB=W0;function W0(E,C,I,V,J){this.properties={},this.extent=I,this.type=0,this._pbf=E,this._geometry=-1,this._keys=V,this._values=J,E.readFields(ige,this,C)}t(W0,"VectorTileFeature");function ige(E,C,I){E==1?C.id=I.readVarint():E==2?oge(I,C):E==3?C.type=I.readVarint():E==4&&(C._geometry=I.pos)}t(ige,"readFeature");function oge(E,C){for(var I=E.readVarint()+E.pos;E.pos<I;){var V=C._keys[E.readVarint()],J=C._values[E.readVarint()];C.properties[V]=J}}t(oge,"readTag"),W0.types=["Unknown","Point","LineString","Polygon"],W0.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,I=1,V=0,J=0,ue=0,ge=[],ke;E.pos<C;){if(V<=0){var Pe=E.readVarint();I=Pe&7,V=Pe>>3}if(V--,I===1||I===2)J+=E.readSVarint(),ue+=E.readSVarint(),I===1&&(ke&&ge.push(ke),ke=[]),ke.push(new v(J,ue));else if(I===7)ke&&ke.push(ke[0].clone());else throw new Error("unknown command "+I)}return ke&&ge.push(ke),ge},W0.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,I=1,V=0,J=0,ue=0,ge=1/0,ke=-1/0,Pe=1/0,Oe=-1/0;E.pos<C;){if(V<=0){var Ve=E.readVarint();I=Ve&7,V=Ve>>3}if(V--,I===1||I===2)J+=E.readSVarint(),ue+=E.readSVarint(),J<ge&&(ge=J),J>ke&&(ke=J),ue<Pe&&(Pe=ue),ue>Oe&&(Oe=ue);else if(I!==7)throw new Error("unknown command "+I)}return[ge,Pe,ke,Oe]},W0.prototype.toGeoJSON=function(E,C,I){var V=this.extent*Math.pow(2,I),J=this.extent*E,ue=this.extent*C,ge=this.loadGeometry(),ke=W0.types[this.type],Pe,Oe;function Ve(mt){for(var Bt=0;Bt<mt.length;Bt++){var Kt=mt[Bt],yr=180-(Kt.y+ue)*360/V;mt[Bt]=[(Kt.x+J)*360/V-180,360/Math.PI*Math.atan(Math.exp(yr*Math.PI/180))-90]}}switch(t(Ve,"project"),this.type){case 1:var lt=[];for(Pe=0;Pe<ge.length;Pe++)lt[Pe]=ge[Pe][0];ge=lt,Ve(ge);break;case 2:for(Pe=0;Pe<ge.length;Pe++)Ve(ge[Pe]);break;case 3:for(ge=sge(ge),Pe=0;Pe<ge.length;Pe++)for(Oe=0;Oe<ge[Pe].length;Oe++)Ve(ge[Pe][Oe]);break}ge.length===1?ge=ge[0]:ke="Multi"+ke;var At={type:"Feature",geometry:{type:ke,coordinates:ge},properties:this.properties};return"id"in this&&(At.id=this.id),At};function sge(E){var C=E.length;if(C<=1)return[E];for(var I=[],V,J,ue=0;ue<C;ue++){var ge=lge(E[ue]);ge!==0&&(J===void 0&&(J=ge<0),J===ge<0?(V&&I.push(V),V=[E[ue]]):V.push(E[ue]))}return V&&I.push(V),I}t(sge,"classifyRings$1");function lge(E){for(var C=0,I=0,V=E.length,J=V-1,ue,ge;I<V;J=I++)ue=E[I],ge=E[J],C+=(ge.x-ue.x)*(ue.y+ge.y);return C}t(lge,"signedArea$1");var NB=qB;function qB(E,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(uge,this,C),this.length=this._features.length}t(qB,"VectorTileLayer");function uge(E,C,I){E===15?C.version=I.readVarint():E===1?C.name=I.readString():E===5?C.extent=I.readVarint():E===2?C._features.push(I.pos):E===3?C._keys.push(I.readString()):E===4&&C._values.push(fge(I))}t(uge,"readLayer");function fge(E){for(var C=null,I=E.readVarint()+E.pos;E.pos<I;){var V=E.readVarint()>>3;C=V===1?E.readString():V===2?E.readFloat():V===3?E.readDouble():V===4?E.readVarint64():V===5?E.readVarint():V===6?E.readSVarint():V===7?E.readBoolean():null}return C}t(fge,"readValueMessage"),qB.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var C=this._pbf.readVarint()+this._pbf.pos;return new OB(this._pbf,C,this.extent,this._keys,this._values)};var cge=hge;function hge(E,C){this.layers=E.readFields(vge,{},C)}t(hge,"VectorTile");function vge(E,C,I){if(E===3){var V=new NB(I,I.readVarint()+I.pos);V.length&&(C[V.name]=V)}}t(vge,"readTile");var dge=cge,pge=OB,gge=NB,X0={VectorTile:dge,VectorTileFeature:pge,VectorTileLayer:gge},yge=X0.VectorTileFeature.types,mge=500,H3=Math.pow(2,13);function em(E,C,I,V,J,ue,ge,ke){E.emplaceBack(C,I,Math.floor(V*H3)*2+ge,J*H3*2,ue*H3*2,Math.round(ke))}t(em,"addVertex");var vh=t(function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Aa,this.indexArray=new ja,this.programConfigurations=new Xr(BB,C.layers,C.zoom),this.segments=new N,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})},"FillExtrusionBucket");vh.prototype.populate=t(function(C,I,V){this.features=[],this.hasPattern=q3("fill-extrusion",this.layers,I);for(var J=0,ue=C;J<ue.length;J+=1){var ge=ue[J],ke=ge.feature,Pe=ge.id,Oe=ge.index,Ve=ge.sourceLayerIndex,lt=this.layers[0]._featureFilter.needGeometry,At={type:ke.type,id:Pe,properties:ke.properties,geometry:lt?Wn(ke):[]};if(!!this.layers[0]._featureFilter.filter(new On(this.zoom),At,V)){var mt={id:Pe,sourceLayerIndex:Ve,index:Oe,geometry:lt?At.geometry:Wn(ke),properties:ke.properties,type:ke.type,patterns:{}};typeof ke.id<"u"&&(mt.id=ke.id),this.hasPattern?this.features.push(U3("fill-extrusion",this.layers,mt,this.zoom,I)):this.addFeature(mt,mt.geometry,Oe,V,{}),I.featureIndex.insert(ke,mt.geometry,Oe,Ve,this.index,!0)}}},"populate"),vh.prototype.addFeatures=t(function(C,I,V){for(var J=0,ue=this.features;J<ue.length;J+=1){var ge=ue[J],ke=ge.geometry;this.addFeature(ge,ke,ge.index,I,V)}},"addFeatures"),vh.prototype.update=t(function(C,I,V){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,I,this.stateDependentLayers,V)},"update"),vh.prototype.isEmpty=t(function(){return this.layoutVertexArray.length===0},"isEmpty"),vh.prototype.uploadPending=t(function(){return!this.uploaded||this.programConfigurations.needsUpload},"uploadPending"),vh.prototype.upload=t(function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,BB),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},"upload"),vh.prototype.destroy=t(function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},"destroy"),vh.prototype.addFeature=t(function(C,I,V,J,ue){for(var ge=0,ke=N3(I,mge);ge<ke.length;ge+=1){for(var Pe=ke[ge],Oe=0,Ve=0,lt=Pe;Ve<lt.length;Ve+=1){var At=lt[Ve];Oe+=At.length}for(var mt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Bt=0,Kt=Pe;Bt<Kt.length;Bt+=1){var yr=Kt[Bt];if(yr.length!==0&&!bge(yr))for(var lr=0,Rr=0;Rr<yr.length;Rr++){var _r=yr[Rr];if(Rr>=1){var Cr=yr[Rr-1];if(!xge(_r,Cr)){mt.vertexLength+4>N.MAX_VERTEX_ARRAY_LENGTH&&(mt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var qr=_r.sub(Cr)._perp()._unit(),ta=Cr.dist(_r);lr+ta>32768&&(lr=0),em(this.layoutVertexArray,_r.x,_r.y,qr.x,qr.y,0,0,lr),em(this.layoutVertexArray,_r.x,_r.y,qr.x,qr.y,0,1,lr),lr+=ta,em(this.layoutVertexArray,Cr.x,Cr.y,qr.x,qr.y,0,0,lr),em(this.layoutVertexArray,Cr.x,Cr.y,qr.x,qr.y,0,1,lr);var ga=mt.vertexLength;this.indexArray.emplaceBack(ga,ga+2,ga+1),this.indexArray.emplaceBack(ga+1,ga+2,ga+3),mt.vertexLength+=4,mt.primitiveLength+=2}}}}if(mt.vertexLength+Oe>N.MAX_VERTEX_ARRAY_LENGTH&&(mt=this.segments.prepareSegment(Oe,this.layoutVertexArray,this.indexArray)),yge[C.type]==="Polygon"){for(var da=[],an=[],Ha=mt.vertexLength,Xa=0,Mn=Pe;Xa<Mn.length;Xa+=1){var Qa=Mn[Xa];if(Qa.length!==0){Qa!==Pe[0]&&an.push(da.length/2);for(var rn=0;rn<Qa.length;rn++){var Vn=Qa[rn];em(this.layoutVertexArray,Vn.x,Vn.y,0,0,1,1,0),da.push(Vn.x),da.push(Vn.y)}}}for(var An=z3(da,an),ci=0;ci<An.length;ci+=3)this.indexArray.emplaceBack(Ha+An[ci],Ha+An[ci+2],Ha+An[ci+1]);mt.primitiveLength+=An.length/3,mt.vertexLength+=Oe}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,V,ue,J)},"addFeature"),Le("FillExtrusionBucket",vh,{omit:["layers","features"]});function xge(E,C){return E.x===C.x&&(E.x<0||E.x>Nr)||E.y===C.y&&(E.y<0||E.y>Nr)}t(xge,"isBoundaryEdge");function bge(E){return E.every(function(C){return C.x<0})||E.every(function(C){return C.x>Nr})||E.every(function(C){return C.y<0})||E.every(function(C){return C.y>Nr})}t(bge,"isEntirelyOutside");var _ge=new Qr({"fill-extrusion-opacity":new cr(Wr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new br(Wr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new cr(Wr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new cr(Wr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kr(Wr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new br(Wr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new br(Wr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new cr(Wr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),wge={paint:_ge},Tge=function(E){function C(I){E.call(this,I,wge)}return t(C,"FillExtrusionStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=t(function(V){return new vh(V)},"createBucket"),C.prototype.queryRadius=t(function(){return Sc(this.paint.get("fill-extrusion-translate"))},"queryRadius"),C.prototype.is3D=t(function(){return!0},"is3D"),C.prototype.queryIntersectsFeature=t(function(V,J,ue,ge,ke,Pe,Oe,Ve){var lt=Wf(V,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Pe.angle,Oe),At=this.paint.get("fill-extrusion-height").evaluate(J,ue),mt=this.paint.get("fill-extrusion-base").evaluate(J,ue),Bt=Mge(lt,Ve,Pe,0),Kt=Sge(ge,mt,At,Ve),yr=Kt[0],lr=Kt[1];return Age(yr,lr,Bt)},"queryIntersectsFeature"),C}(ka);function tm(E,C){return E.x*C.x+E.y*C.y}t(tm,"dot$2");function UB(E,C){if(E.length===1){for(var I=0,V=C[I++],J;!J||V.equals(J);)if(J=C[I++],!J)return 1/0;for(;I<C.length;I++){var ue=C[I],ge=E[0],ke=J.sub(V),Pe=ue.sub(V),Oe=ge.sub(V),Ve=tm(ke,ke),lt=tm(ke,Pe),At=tm(Pe,Pe),mt=tm(Oe,ke),Bt=tm(Oe,Pe),Kt=Ve*At-lt*lt,yr=(At*mt-lt*Bt)/Kt,lr=(Ve*Bt-lt*mt)/Kt,Rr=1-yr-lr,_r=V.z*Rr+J.z*yr+ue.z*lr;if(isFinite(_r))return _r}return 1/0}else{for(var Cr=1/0,qr=0,ta=C;qr<ta.length;qr+=1){var ga=ta[qr];Cr=Math.min(Cr,ga.z)}return Cr}}t(UB,"getIntersectionDistance");function Age(E,C,I){var V=1/0;Xi(I,C)&&(V=UB(I,C[0]));for(var J=0;J<C.length;J++)for(var ue=C[J],ge=E[J],ke=0;ke<ue.length-1;ke++){var Pe=ue[ke],Oe=ue[ke+1],Ve=ge[ke],lt=ge[ke+1],At=[Pe,Oe,lt,Ve,Pe];gn(I,At)&&(V=Math.min(V,UB(I,At)))}return V===1/0?!1:V}t(Age,"checkIntersection");function Sge(E,C,I,V){for(var J=[],ue=[],ge=V[8]*C,ke=V[9]*C,Pe=V[10]*C,Oe=V[11]*C,Ve=V[8]*I,lt=V[9]*I,At=V[10]*I,mt=V[11]*I,Bt=0,Kt=E;Bt<Kt.length;Bt+=1){for(var yr=Kt[Bt],lr=[],Rr=[],_r=0,Cr=yr;_r<Cr.length;_r+=1){var qr=Cr[_r],ta=qr.x,ga=qr.y,da=V[0]*ta+V[4]*ga+V[12],an=V[1]*ta+V[5]*ga+V[13],Ha=V[2]*ta+V[6]*ga+V[14],Xa=V[3]*ta+V[7]*ga+V[15],Mn=da+ge,Qa=an+ke,rn=Ha+Pe,Vn=Xa+Oe,An=da+Ve,ci=an+lt,Bi=Ha+At,hi=Xa+mt,vi=new v(Mn/Vn,Qa/Vn);vi.z=rn/Vn,lr.push(vi);var ui=new v(An/hi,ci/hi);ui.z=Bi/hi,Rr.push(ui)}J.push(lr),ue.push(Rr)}return[J,ue]}t(Sge,"projectExtrusion");function Mge(E,C,I,V){for(var J=[],ue=0,ge=E;ue<ge.length;ue+=1){var ke=ge[ue],Pe=[ke.x,ke.y,V,1];Lx(Pe,Pe,C),J.push(new v(Pe[0]/Pe[3],Pe[1]/Pe[3]))}return J}t(Mge,"projectQueryGeometry$1");var kge=Mr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),HB=kge.members,Ege=X0.VectorTileFeature.types,$B=63,Cge=Math.cos(75/2*(Math.PI/180)),Lge=15,Rge=20,Pge=15,VB=1/2,GB=Math.pow(2,Pge-1)/VB,fu=t(function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new on,this.indexArray=new ja,this.programConfigurations=new Xr(HB,C.layers,C.zoom),this.segments=new N,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})},"LineBucket");fu.prototype.populate=t(function(C,I,V){this.hasPattern=q3("line",this.layers,I);for(var J=this.layers[0].layout.get("line-sort-key"),ue=[],ge=0,ke=C;ge<ke.length;ge+=1){var Pe=ke[ge],Oe=Pe.feature,Ve=Pe.id,lt=Pe.index,At=Pe.sourceLayerIndex,mt=this.layers[0]._featureFilter.needGeometry,Bt={type:Oe.type,id:Ve,properties:Oe.properties,geometry:mt?Wn(Oe):[]};if(!!this.layers[0]._featureFilter.filter(new On(this.zoom),Bt,V)){mt||(Bt.geometry=Wn(Oe));var Kt=J?J.evaluate(Bt,{},V):void 0,yr={id:Ve,properties:Oe.properties,type:Oe.type,sourceLayerIndex:At,index:lt,geometry:Bt.geometry,patterns:{},sortKey:Kt};ue.push(yr)}}J&&ue.sort(function(Ha,Xa){return Ha.sortKey-Xa.sortKey});for(var lr=0,Rr=ue;lr<Rr.length;lr+=1){var _r=Rr[lr],Cr=_r,qr=Cr.geometry,ta=Cr.index,ga=Cr.sourceLayerIndex;if(this.hasPattern){var da=U3("line",this.layers,_r,this.zoom,I);this.patternFeatures.push(da)}else this.addFeature(_r,qr,ta,V,{});var an=C[ta].feature;I.featureIndex.insert(an,qr,ta,ga,this.index)}},"populate"),fu.prototype.update=t(function(C,I,V){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,I,this.stateDependentLayers,V)},"update"),fu.prototype.addFeatures=t(function(C,I,V){for(var J=0,ue=this.patternFeatures;J<ue.length;J+=1){var ge=ue[J];this.addFeature(ge,ge.geometry,ge.index,I,V)}},"addFeatures"),fu.prototype.isEmpty=t(function(){return this.layoutVertexArray.length===0},"isEmpty"),fu.prototype.uploadPending=t(function(){return!this.uploaded||this.programConfigurations.needsUpload},"uploadPending"),fu.prototype.upload=t(function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,HB),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},"upload"),fu.prototype.destroy=t(function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},"destroy"),fu.prototype.addFeature=t(function(C,I,V,J,ue){for(var ge=this.layers[0].layout,ke=ge.get("line-join").evaluate(C,{}),Pe=ge.get("line-cap"),Oe=ge.get("line-miter-limit"),Ve=ge.get("line-round-limit"),lt=0,At=I;lt<At.length;lt+=1){var mt=At[lt];this.addLine(mt,C,ke,Pe,Oe,Ve)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,V,ue,J)},"addFeature"),fu.prototype.addLine=t(function(C,I,V,J,ue,ge){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!I.properties&&I.properties.hasOwnProperty("mapbox_clip_start")&&I.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+I.properties.mapbox_clip_start,this.clipEnd=+I.properties.mapbox_clip_end;for(var ke=0;ke<C.length-1;ke++)this.totalDistance+=C[ke].dist(C[ke+1]);this.updateScaledDistance()}for(var Pe=Ege[I.type]==="Polygon",Oe=C.length;Oe>=2&&C[Oe-1].equals(C[Oe-2]);)Oe--;for(var Ve=0;Ve<Oe-1&&C[Ve].equals(C[Ve+1]);)Ve++;if(!(Oe<(Pe?3:2))){V==="bevel"&&(ue=1.05);var lt=this.overscaling<=16?Lge*Nr/(512*this.overscaling):0,At=this.segments.prepareSegment(Oe*10,this.layoutVertexArray,this.indexArray),mt,Bt=void 0,Kt=void 0,yr=void 0,lr=void 0;this.e1=this.e2=-1,Pe&&(mt=C[Oe-2],lr=C[Ve].sub(mt)._unit()._perp());for(var Rr=Ve;Rr<Oe;Rr++)if(Kt=Rr===Oe-1?Pe?C[Ve+1]:void 0:C[Rr+1],!(Kt&&C[Rr].equals(Kt))){lr&&(yr=lr),mt&&(Bt=mt),mt=C[Rr],lr=Kt?Kt.sub(mt)._unit()._perp():yr,yr=yr||lr;var _r=yr.add(lr);(_r.x!==0||_r.y!==0)&&_r._unit();var Cr=yr.x*lr.x+yr.y*lr.y,qr=_r.x*lr.x+_r.y*lr.y,ta=qr!==0?1/qr:1/0,ga=2*Math.sqrt(2-2*qr),da=qr<Cge&&Bt&&Kt,an=yr.x*lr.y-yr.y*lr.x>0;if(da&&Rr>Ve){var Ha=mt.dist(Bt);if(Ha>2*lt){var Xa=mt.sub(mt.sub(Bt)._mult(lt/Ha)._round());this.updateDistance(Bt,Xa),this.addCurrentVertex(Xa,yr,0,0,At),Bt=Xa}}var Mn=Bt&&Kt,Qa=Mn?V:Pe?"butt":J;if(Mn&&Qa==="round"&&(ta<ge?Qa="miter":ta<=2&&(Qa="fakeround")),Qa==="miter"&&ta>ue&&(Qa="bevel"),Qa==="bevel"&&(ta>2&&(Qa="flipbevel"),ta<ue&&(Qa="miter")),Bt&&this.updateDistance(Bt,mt),Qa==="miter")_r._mult(ta),this.addCurrentVertex(mt,_r,0,0,At);else if(Qa==="flipbevel"){if(ta>100)_r=lr.mult(-1);else{var rn=ta*yr.add(lr).mag()/yr.sub(lr).mag();_r._perp()._mult(rn*(an?-1:1))}this.addCurrentVertex(mt,_r,0,0,At),this.addCurrentVertex(mt,_r.mult(-1),0,0,At)}else if(Qa==="bevel"||Qa==="fakeround"){var Vn=-Math.sqrt(ta*ta-1),An=an?Vn:0,ci=an?0:Vn;if(Bt&&this.addCurrentVertex(mt,yr,An,ci,At),Qa==="fakeround")for(var Bi=Math.round(ga*180/Math.PI/Rge),hi=1;hi<Bi;hi++){var vi=hi/Bi;if(vi!==.5){var ui=vi-.5,Zi=1.0904+Cr*(-3.2452+Cr*(3.55645-Cr*1.43519)),no=.848013+Cr*(-1.06021+Cr*.215638);vi=vi+vi*ui*(vi-1)*(Zi*ui*ui+no)}var qo=lr.sub(yr)._mult(vi)._add(yr)._unit()._mult(an?-1:1);this.addHalfVertex(mt,qo.x,qo.y,!1,an,0,At)}Kt&&this.addCurrentVertex(mt,lr,-An,-ci,At)}else if(Qa==="butt")this.addCurrentVertex(mt,_r,0,0,At);else if(Qa==="square"){var Zo=Bt?1:-1;this.addCurrentVertex(mt,_r,Zo,Zo,At)}else Qa==="round"&&(Bt&&(this.addCurrentVertex(mt,yr,0,0,At),this.addCurrentVertex(mt,yr,1,1,At,!0)),Kt&&(this.addCurrentVertex(mt,lr,-1,-1,At,!0),this.addCurrentVertex(mt,lr,0,0,At)));if(da&&Rr<Oe-1){var zs=mt.dist(Kt);if(zs>2*lt){var hs=mt.add(Kt.sub(mt)._mult(lt/zs)._round());this.updateDistance(mt,hs),this.addCurrentVertex(hs,lr,0,0,At),mt=hs}}}}},"addLine"),fu.prototype.addCurrentVertex=t(function(C,I,V,J,ue,ge){ge===void 0&&(ge=!1);var ke=I.x+I.y*V,Pe=I.y-I.x*V,Oe=-I.x+I.y*J,Ve=-I.y-I.x*J;this.addHalfVertex(C,ke,Pe,ge,!1,V,ue),this.addHalfVertex(C,Oe,Ve,ge,!0,-J,ue),this.distance>GB/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,I,V,J,ue,ge))},"addCurrentVertex"),fu.prototype.addHalfVertex=t(function(C,I,V,J,ue,ge,ke){var Pe=C.x,Oe=C.y,Ve=this.scaledDistance*VB;this.layoutVertexArray.emplaceBack((Pe<<1)+(J?1:0),(Oe<<1)+(ue?1:0),Math.round($B*I)+128,Math.round($B*V)+128,(ge===0?0:ge<0?-1:1)+1|(Ve&63)<<2,Ve>>6);var lt=ke.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,lt),ke.primitiveLength++),ue?this.e2=lt:this.e1=lt},"addHalfVertex"),fu.prototype.updateScaledDistance=t(function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(GB-1):this.distance},"updateScaledDistance"),fu.prototype.updateDistance=t(function(C,I){this.distance+=C.dist(I),this.updateScaledDistance()},"updateDistance"),Le("LineBucket",fu,{omit:["layers","patternFeatures"]});var Dge=new Qr({"line-cap":new cr(Wr.layout_line["line-cap"]),"line-join":new br(Wr.layout_line["line-join"]),"line-miter-limit":new cr(Wr.layout_line["line-miter-limit"]),"line-round-limit":new cr(Wr.layout_line["line-round-limit"]),"line-sort-key":new br(Wr.layout_line["line-sort-key"])}),Ige=new Qr({"line-opacity":new br(Wr.paint_line["line-opacity"]),"line-color":new br(Wr.paint_line["line-color"]),"line-translate":new cr(Wr.paint_line["line-translate"]),"line-translate-anchor":new cr(Wr.paint_line["line-translate-anchor"]),"line-width":new br(Wr.paint_line["line-width"]),"line-gap-width":new br(Wr.paint_line["line-gap-width"]),"line-offset":new br(Wr.paint_line["line-offset"]),"line-blur":new br(Wr.paint_line["line-blur"]),"line-dasharray":new Pr(Wr.paint_line["line-dasharray"]),"line-pattern":new kr(Wr.paint_line["line-pattern"]),"line-gradient":new la(Wr.paint_line["line-gradient"])}),jB={paint:Ige,layout:Dge},zge=function(E){function C(){E.apply(this,arguments)}return t(C,"LineFloorwidthProperty"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=t(function(V,J){return J=new On(Math.floor(J.zoom),{now:J.now,fadeDuration:J.fadeDuration,zoomHistory:J.zoomHistory,transition:J.transition}),E.prototype.possiblyEvaluate.call(this,V,J)},"possiblyEvaluate"),C.prototype.evaluate=t(function(V,J,ue,ge){return J=w({},J,{zoom:Math.floor(J.zoom)}),E.prototype.evaluate.call(this,V,J,ue,ge)},"evaluate"),C}(br),YB=new zge(jB.paint.properties["line-width"].specification);YB.useIntegerZoom=!0;var Fge=function(E){function C(I){E.call(this,I,jB)}return t(C,"LineStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=t(function(V){V==="line-gradient"&&this._updateGradient()},"_handleSpecialPaintPropertyUpdate"),C.prototype._updateGradient=t(function(){var V=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=LB(V,"lineProgress"),this.gradientTexture=null},"_updateGradient"),C.prototype.recalculate=t(function(V,J){E.prototype.recalculate.call(this,V,J),this.paint._values["line-floorwidth"]=YB.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,V)},"recalculate"),C.prototype.createBucket=t(function(V){return new fu(V)},"createBucket"),C.prototype.queryRadius=t(function(V){var J=V,ue=WB(qu("line-width",this,J),qu("line-gap-width",this,J)),ge=qu("line-offset",this,J);return ue/2+Math.abs(ge)+Sc(this.paint.get("line-translate"))},"queryRadius"),C.prototype.queryIntersectsFeature=t(function(V,J,ue,ge,ke,Pe,Oe){var Ve=Wf(V,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Pe.angle,Oe),lt=Oe/2*WB(this.paint.get("line-width").evaluate(J,ue),this.paint.get("line-gap-width").evaluate(J,ue)),At=this.paint.get("line-offset").evaluate(J,ue);return At&&(ge=Bge(ge,At*Oe)),ls(Ve,ge,lt)},"queryIntersectsFeature"),C.prototype.isTileClipped=t(function(){return!0},"isTileClipped"),C}(ka);function WB(E,C){return C>0?C+2*E:E}t(WB,"getLineWidth");function Bge(E,C){for(var I=[],V=new v(0,0),J=0;J<E.length;J++){for(var ue=E[J],ge=[],ke=0;ke<ue.length;ke++){var Pe=ue[ke-1],Oe=ue[ke],Ve=ue[ke+1],lt=ke===0?V:Oe.sub(Pe)._unit()._perp(),At=ke===ue.length-1?V:Ve.sub(Oe)._unit()._perp(),mt=lt._add(At)._unit(),Bt=mt.x*At.x+mt.y*At.y;mt._mult(1/Bt),ge.push(mt._mult(C)._add(Oe))}I.push(ge)}return I}t(Bge,"offsetLine");var $3=Mr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Oge=Mr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Mr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Nge=Mr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Mr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var XB=Mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qge=Mr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Mr([{name:"triangle",components:3,type:"Uint16"}]),Mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Mr([{type:"Float32",name:"offsetX"}]),Mr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function Uge(E,C,I){var V=C.layout.get("text-transform").evaluate(I,{});return V==="uppercase"?E=E.toLocaleUpperCase():V==="lowercase"&&(E=E.toLocaleLowerCase()),Fn.applyArabicShaping&&(E=Fn.applyArabicShaping(E)),E}t(Uge,"transformText");function Hge(E,C,I){return E.sections.forEach(function(V){V.text=Uge(V.text,C,I)}),E}t(Hge,"transformText$1");function $ge(E){var C={},I={},V=[],J=0;function ue(lr){V.push(E[lr]),J++}t(ue,"add");function ge(lr,Rr,_r){var Cr=I[lr];return delete I[lr],I[Rr]=Cr,V[Cr].geometry[0].pop(),V[Cr].geometry[0]=V[Cr].geometry[0].concat(_r[0]),Cr}t(ge,"mergeFromRight");function ke(lr,Rr,_r){var Cr=C[Rr];return delete C[Rr],C[lr]=Cr,V[Cr].geometry[0].shift(),V[Cr].geometry[0]=_r[0].concat(V[Cr].geometry[0]),Cr}t(ke,"mergeFromLeft");function Pe(lr,Rr,_r){var Cr=_r?Rr[0][Rr[0].length-1]:Rr[0][0];return lr+":"+Cr.x+":"+Cr.y}t(Pe,"getKey");for(var Oe=0;Oe<E.length;Oe++){var Ve=E[Oe],lt=Ve.geometry,At=Ve.text?Ve.text.toString():null;if(!At){ue(Oe);continue}var mt=Pe(At,lt),Bt=Pe(At,lt,!0);if(mt in I&&Bt in C&&I[mt]!==C[Bt]){var Kt=ke(mt,Bt,lt),yr=ge(mt,Bt,V[Kt].geometry);delete C[mt],delete I[Bt],I[Pe(At,V[yr].geometry,!0)]=yr,V[Kt].geometry=null}else mt in I?ge(mt,Bt,lt):Bt in C?ke(mt,Bt,lt):(ue(Oe),C[mt]=J-1,I[Bt]=J-1)}return V.filter(function(lr){return lr.geometry})}t($ge,"mergeLines");var rm={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function Vge(E){for(var C="",I=0;I<E.length;I++){var V=E.charCodeAt(I+1)||null,J=E.charCodeAt(I-1)||null,ue=(!V||!gr(V)||rm[E[I+1]])&&(!J||!gr(J)||rm[E[I-1]]);ue&&rm[E[I]]?C+=rm[E[I]]:C+=E[I]}return C}t(Vge,"verticalizePunctuation");var Zs=24,Gge=t(function(E,C,I,V,J){var ue,ge,ke=J*8-V-1,Pe=(1<<ke)-1,Oe=Pe>>1,Ve=-7,lt=I?J-1:0,At=I?-1:1,mt=E[C+lt];for(lt+=At,ue=mt&(1<<-Ve)-1,mt>>=-Ve,Ve+=ke;Ve>0;ue=ue*256+E[C+lt],lt+=At,Ve-=8);for(ge=ue&(1<<-Ve)-1,ue>>=-Ve,Ve+=V;Ve>0;ge=ge*256+E[C+lt],lt+=At,Ve-=8);if(ue===0)ue=1-Oe;else{if(ue===Pe)return ge?NaN:(mt?-1:1)*(1/0);ge=ge+Math.pow(2,V),ue=ue-Oe}return(mt?-1:1)*ge*Math.pow(2,ue-V)},"read"),jge=t(function(E,C,I,V,J,ue){var ge,ke,Pe,Oe=ue*8-J-1,Ve=(1<<Oe)-1,lt=Ve>>1,At=J===23?Math.pow(2,-24)-Math.pow(2,-77):0,mt=V?0:ue-1,Bt=V?1:-1,Kt=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(ke=isNaN(C)?1:0,ge=Ve):(ge=Math.floor(Math.log(C)/Math.LN2),C*(Pe=Math.pow(2,-ge))<1&&(ge--,Pe*=2),ge+lt>=1?C+=At/Pe:C+=At*Math.pow(2,1-lt),C*Pe>=2&&(ge++,Pe/=2),ge+lt>=Ve?(ke=0,ge=Ve):ge+lt>=1?(ke=(C*Pe-1)*Math.pow(2,J),ge=ge+lt):(ke=C*Math.pow(2,lt-1)*Math.pow(2,J),ge=0));J>=8;E[I+mt]=ke&255,mt+=Bt,ke/=256,J-=8);for(ge=ge<<J|ke,Oe+=J;Oe>0;E[I+mt]=ge&255,mt+=Bt,ge/=256,Oe-=8);E[I+mt-Bt]|=Kt*128},"write"),zx={read:Gge,write:jge},Fx=ao;function ao(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}t(ao,"Pbf"),ao.Varint=0,ao.Fixed64=1,ao.Bytes=2,ao.Fixed32=5;var V3=(1<<16)*(1<<16),ZB=1/V3,Yge=12,KB=typeof TextDecoder>"u"?null:new TextDecoder("utf8");ao.prototype={destroy:function(){this.buf=null},readFields:function(E,C,I){for(I=I||this.length;this.pos<I;){var V=this.readVarint(),J=V>>3,ue=this.pos;this.type=V&7,E(J,C,this),this.pos===ue&&this.skip(V)}return C},readMessage:function(E,C){return this.readFields(E,C,this.readVarint()+this.pos)},readFixed32:function(){var E=Bx(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=QB(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=Bx(this.buf,this.pos)+Bx(this.buf,this.pos+4)*V3;return this.pos+=8,E},readSFixed64:function(){var E=Bx(this.buf,this.pos)+QB(this.buf,this.pos+4)*V3;return this.pos+=8,E},readFloat:function(){var E=zx.read(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=zx.read(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var C=this.buf,I,V;return V=C[this.pos++],I=V&127,V<128||(V=C[this.pos++],I|=(V&127)<<7,V<128)||(V=C[this.pos++],I|=(V&127)<<14,V<128)||(V=C[this.pos++],I|=(V&127)<<21,V<128)?I:(V=C[this.pos],I|=(V&15)<<28,Wge(I,E,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2===1?(E+1)/-2:E/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var E=this.readVarint()+this.pos,C=this.pos;return this.pos=E,E-C>=Yge&&KB?lye(this.buf,C,E):sye(this.buf,C,E)},readBytes:function(){var E=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,E);return this.pos=E,C},readPackedVarint:function(E,C){if(this.type!==ao.Bytes)return E.push(this.readVarint(C));var I=Kv(this);for(E=E||[];this.pos<I;)E.push(this.readVarint(C));return E},readPackedSVarint:function(E){if(this.type!==ao.Bytes)return E.push(this.readSVarint());var C=Kv(this);for(E=E||[];this.pos<C;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==ao.Bytes)return E.push(this.readBoolean());var C=Kv(this);for(E=E||[];this.pos<C;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==ao.Bytes)return E.push(this.readFloat());var C=Kv(this);for(E=E||[];this.pos<C;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==ao.Bytes)return E.push(this.readDouble());var C=Kv(this);for(E=E||[];this.pos<C;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==ao.Bytes)return E.push(this.readFixed32());var C=Kv(this);for(E=E||[];this.pos<C;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==ao.Bytes)return E.push(this.readSFixed32());var C=Kv(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==ao.Bytes)return E.push(this.readFixed64());var C=Kv(this);for(E=E||[];this.pos<C;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==ao.Bytes)return E.push(this.readSFixed64());var C=Kv(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed64());return E},skip:function(E){var C=E&7;if(C===ao.Varint)for(;this.buf[this.pos++]>127;);else if(C===ao.Bytes)this.pos=this.readVarint()+this.pos;else if(C===ao.Fixed32)this.pos+=4;else if(C===ao.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(E,C){this.writeVarint(E<<3|C)},realloc:function(E){for(var C=this.length||16;C<this.pos+E;)C*=2;if(C!==this.length){var I=new Uint8Array(C);I.set(this.buf),this.buf=I,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),K0(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),K0(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),K0(this.buf,E&-1,this.pos),K0(this.buf,Math.floor(E*ZB),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),K0(this.buf,E&-1,this.pos),K0(this.buf,Math.floor(E*ZB),this.pos+4),this.pos+=8},writeVarint:function(E){if(E=+E||0,E>268435455||E<0){Xge(E,this);return}this.realloc(4),this.buf[this.pos++]=E&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=E>>>7&127)))},writeSVarint:function(E){this.writeVarint(E<0?-E*2-1:E*2)},writeBoolean:function(E){this.writeVarint(Boolean(E))},writeString:function(E){E=String(E),this.realloc(E.length*4),this.pos++;var C=this.pos;this.pos=uye(this.buf,E,this.pos);var I=this.pos-C;I>=128&&JB(C,I,this),this.pos=C-1,this.writeVarint(I),this.pos+=I},writeFloat:function(E){this.realloc(4),zx.write(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),zx.write(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var C=E.length;this.writeVarint(C),this.realloc(C);for(var I=0;I<C;I++)this.buf[this.pos++]=E[I]},writeRawMessage:function(E,C){this.pos++;var I=this.pos;E(C,this);var V=this.pos-I;V>=128&&JB(I,V,this),this.pos=I-1,this.writeVarint(V),this.pos+=V},writeMessage:function(E,C,I){this.writeTag(E,ao.Bytes),this.writeRawMessage(C,I)},writePackedVarint:function(E,C){C.length&&this.writeMessage(E,Jge,C)},writePackedSVarint:function(E,C){C.length&&this.writeMessage(E,Qge,C)},writePackedBoolean:function(E,C){C.length&&this.writeMessage(E,rye,C)},writePackedFloat:function(E,C){C.length&&this.writeMessage(E,eye,C)},writePackedDouble:function(E,C){C.length&&this.writeMessage(E,tye,C)},writePackedFixed32:function(E,C){C.length&&this.writeMessage(E,aye,C)},writePackedSFixed32:function(E,C){C.length&&this.writeMessage(E,nye,C)},writePackedFixed64:function(E,C){C.length&&this.writeMessage(E,iye,C)},writePackedSFixed64:function(E,C){C.length&&this.writeMessage(E,oye,C)},writeBytesField:function(E,C){this.writeTag(E,ao.Bytes),this.writeBytes(C)},writeFixed32Field:function(E,C){this.writeTag(E,ao.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(E,C){this.writeTag(E,ao.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(E,C){this.writeTag(E,ao.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(E,C){this.writeTag(E,ao.Fixed64),this.writeSFixed64(C)},writeVarintField:function(E,C){this.writeTag(E,ao.Varint),this.writeVarint(C)},writeSVarintField:function(E,C){this.writeTag(E,ao.Varint),this.writeSVarint(C)},writeStringField:function(E,C){this.writeTag(E,ao.Bytes),this.writeString(C)},writeFloatField:function(E,C){this.writeTag(E,ao.Fixed32),this.writeFloat(C)},writeDoubleField:function(E,C){this.writeTag(E,ao.Fixed64),this.writeDouble(C)},writeBooleanField:function(E,C){this.writeVarintField(E,Boolean(C))}};function Wge(E,C,I){var V=I.buf,J,ue;if(ue=V[I.pos++],J=(ue&112)>>4,ue<128||(ue=V[I.pos++],J|=(ue&127)<<3,ue<128)||(ue=V[I.pos++],J|=(ue&127)<<10,ue<128)||(ue=V[I.pos++],J|=(ue&127)<<17,ue<128)||(ue=V[I.pos++],J|=(ue&127)<<24,ue<128)||(ue=V[I.pos++],J|=(ue&1)<<31,ue<128))return Z0(E,J,C);throw new Error("Expected varint not more than 10 bytes")}t(Wge,"readVarintRemainder");function Kv(E){return E.type===ao.Bytes?E.readVarint()+E.pos:E.pos+1}t(Kv,"readPackedEnd");function Z0(E,C,I){return I?C*4294967296+(E>>>0):(C>>>0)*4294967296+(E>>>0)}t(Z0,"toNum");function Xge(E,C){var I,V;if(E>=0?(I=E%4294967296|0,V=E/4294967296|0):(I=~(-E%4294967296),V=~(-E/4294967296),I^4294967295?I=I+1|0:(I=0,V=V+1|0)),E>=18446744073709552e3||E<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),Zge(I,V,C),Kge(V,C)}t(Xge,"writeBigVarint");function Zge(E,C,I){I.buf[I.pos++]=E&127|128,E>>>=7,I.buf[I.pos++]=E&127|128,E>>>=7,I.buf[I.pos++]=E&127|128,E>>>=7,I.buf[I.pos++]=E&127|128,E>>>=7,I.buf[I.pos]=E&127}t(Zge,"writeBigVarintLow");function Kge(E,C){var I=(E&7)<<4;C.buf[C.pos++]|=I|((E>>>=3)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127)))))}t(Kge,"writeBigVarintHigh");function JB(E,C,I){var V=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));I.realloc(V);for(var J=I.pos-1;J>=E;J--)I.buf[J+V]=I.buf[J]}t(JB,"makeRoomForExtraLength");function Jge(E,C){for(var I=0;I<E.length;I++)C.writeVarint(E[I])}t(Jge,"writePackedVarint");function Qge(E,C){for(var I=0;I<E.length;I++)C.writeSVarint(E[I])}t(Qge,"writePackedSVarint");function eye(E,C){for(var I=0;I<E.length;I++)C.writeFloat(E[I])}t(eye,"writePackedFloat");function tye(E,C){for(var I=0;I<E.length;I++)C.writeDouble(E[I])}t(tye,"writePackedDouble");function rye(E,C){for(var I=0;I<E.length;I++)C.writeBoolean(E[I])}t(rye,"writePackedBoolean");function aye(E,C){for(var I=0;I<E.length;I++)C.writeFixed32(E[I])}t(aye,"writePackedFixed32");function nye(E,C){for(var I=0;I<E.length;I++)C.writeSFixed32(E[I])}t(nye,"writePackedSFixed32");function iye(E,C){for(var I=0;I<E.length;I++)C.writeFixed64(E[I])}t(iye,"writePackedFixed64");function oye(E,C){for(var I=0;I<E.length;I++)C.writeSFixed64(E[I])}t(oye,"writePackedSFixed64");function Bx(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+E[C+3]*16777216}t(Bx,"readUInt32");function K0(E,C,I){E[I]=C,E[I+1]=C>>>8,E[I+2]=C>>>16,E[I+3]=C>>>24}t(K0,"writeInt32");function QB(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+(E[C+3]<<24)}t(QB,"readInt32");function sye(E,C,I){for(var V="",J=C;J<I;){var ue=E[J],ge=null,ke=ue>239?4:ue>223?3:ue>191?2:1;if(J+ke>I)break;var Pe,Oe,Ve;ke===1?ue<128&&(ge=ue):ke===2?(Pe=E[J+1],(Pe&192)===128&&(ge=(ue&31)<<6|Pe&63,ge<=127&&(ge=null))):ke===3?(Pe=E[J+1],Oe=E[J+2],(Pe&192)===128&&(Oe&192)===128&&(ge=(ue&15)<<12|(Pe&63)<<6|Oe&63,(ge<=2047||ge>=55296&&ge<=57343)&&(ge=null))):ke===4&&(Pe=E[J+1],Oe=E[J+2],Ve=E[J+3],(Pe&192)===128&&(Oe&192)===128&&(Ve&192)===128&&(ge=(ue&15)<<18|(Pe&63)<<12|(Oe&63)<<6|Ve&63,(ge<=65535||ge>=1114112)&&(ge=null))),ge===null?(ge=65533,ke=1):ge>65535&&(ge-=65536,V+=String.fromCharCode(ge>>>10&1023|55296),ge=56320|ge&1023),V+=String.fromCharCode(ge),J+=ke}return V}t(sye,"readUtf8");function lye(E,C,I){return KB.decode(E.subarray(C,I))}t(lye,"readUtf8TextDecoder");function uye(E,C,I){for(var V=0,J,ue;V<C.length;V++){if(J=C.charCodeAt(V),J>55295&&J<57344)if(ue)if(J<56320){E[I++]=239,E[I++]=191,E[I++]=189,ue=J;continue}else J=ue-55296<<10|J-56320|65536,ue=null;else{J>56319||V+1===C.length?(E[I++]=239,E[I++]=191,E[I++]=189):ue=J;continue}else ue&&(E[I++]=239,E[I++]=191,E[I++]=189,ue=null);J<128?E[I++]=J:(J<2048?E[I++]=J>>6|192:(J<65536?E[I++]=J>>12|224:(E[I++]=J>>18|240,E[I++]=J>>12&63|128),E[I++]=J>>6&63|128),E[I++]=J&63|128)}return I}t(uye,"writeUtf8");var G3=3;function fye(E,C,I){E===1&&I.readMessage(cye,C)}t(fye,"readFontstacks");function cye(E,C,I){if(E===3){var V=I.readMessage(hye,{}),J=V.id,ue=V.bitmap,ge=V.width,ke=V.height,Pe=V.left,Oe=V.top,Ve=V.advance;C.push({id:J,bitmap:new qp({width:ge+2*G3,height:ke+2*G3},ue),metrics:{width:ge,height:ke,left:Pe,top:Oe,advance:Ve}})}}t(cye,"readFontstack");function hye(E,C,I){E===1?C.id=I.readVarint():E===2?C.bitmap=I.readBytes():E===3?C.width=I.readVarint():E===4?C.height=I.readVarint():E===5?C.left=I.readSVarint():E===6?C.top=I.readSVarint():E===7&&(C.advance=I.readVarint())}t(hye,"readGlyph");function vye(E){return new Fx(E).readFields(fye,[])}t(vye,"parseGlyphPBF");var eO=G3;function tO(E){for(var C=0,I=0,V=0,J=E;V<J.length;V+=1){var ue=J[V];C+=ue.w*ue.h,I=Math.max(I,ue.w)}E.sort(function(yr,lr){return lr.h-yr.h});for(var ge=Math.max(Math.ceil(Math.sqrt(C/.95)),I),ke=[{x:0,y:0,w:ge,h:1/0}],Pe=0,Oe=0,Ve=0,lt=E;Ve<lt.length;Ve+=1)for(var At=lt[Ve],mt=ke.length-1;mt>=0;mt--){var Bt=ke[mt];if(!(At.w>Bt.w||At.h>Bt.h)){if(At.x=Bt.x,At.y=Bt.y,Oe=Math.max(Oe,At.y+At.h),Pe=Math.max(Pe,At.x+At.w),At.w===Bt.w&&At.h===Bt.h){var Kt=ke.pop();mt<ke.length&&(ke[mt]=Kt)}else At.h===Bt.h?(Bt.x+=At.w,Bt.w-=At.w):At.w===Bt.w?(Bt.y+=At.h,Bt.h-=At.h):(ke.push({x:Bt.x+At.w,y:Bt.y,w:Bt.w-At.w,h:At.h}),Bt.y+=At.h,Bt.h-=At.h);break}}return{w:Pe,h:Oe,fill:C/(Pe*Oe)||0}}t(tO,"potpack");var Uu=1,Ox=t(function(C,I){var V=I.pixelRatio,J=I.version,ue=I.stretchX,ge=I.stretchY,ke=I.content;this.paddedRect=C,this.pixelRatio=V,this.stretchX=ue,this.stretchY=ge,this.content=ke,this.version=J},"ImagePosition"),am={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};am.tl.get=function(){return[this.paddedRect.x+Uu,this.paddedRect.y+Uu]},am.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Uu,this.paddedRect.y+this.paddedRect.h-Uu]},am.tlbr.get=function(){return this.tl.concat(this.br)},am.displaySize.get=function(){return[(this.paddedRect.w-Uu*2)/this.pixelRatio,(this.paddedRect.h-Uu*2)/this.pixelRatio]},Object.defineProperties(Ox.prototype,am);var nm=t(function(C,I){var V={},J={};this.haveRenderCallbacks=[];var ue=[];this.addImages(C,V,ue),this.addImages(I,J,ue);var ge=tO(ue),ke=ge.w,Pe=ge.h,Oe=new uu({width:ke||1,height:Pe||1});for(var Ve in C){var lt=C[Ve],At=V[Ve].paddedRect;uu.copy(lt.data,Oe,{x:0,y:0},{x:At.x+Uu,y:At.y+Uu},lt.data)}for(var mt in I){var Bt=I[mt],Kt=J[mt].paddedRect,yr=Kt.x+Uu,lr=Kt.y+Uu,Rr=Bt.data.width,_r=Bt.data.height;uu.copy(Bt.data,Oe,{x:0,y:0},{x:yr,y:lr},Bt.data),uu.copy(Bt.data,Oe,{x:0,y:_r-1},{x:yr,y:lr-1},{width:Rr,height:1}),uu.copy(Bt.data,Oe,{x:0,y:0},{x:yr,y:lr+_r},{width:Rr,height:1}),uu.copy(Bt.data,Oe,{x:Rr-1,y:0},{x:yr-1,y:lr},{width:1,height:_r}),uu.copy(Bt.data,Oe,{x:0,y:0},{x:yr+Rr,y:lr},{width:1,height:_r})}this.image=Oe,this.iconPositions=V,this.patternPositions=J},"ImageAtlas");nm.prototype.addImages=t(function(C,I,V){for(var J in C){var ue=C[J],ge={x:0,y:0,w:ue.data.width+2*Uu,h:ue.data.height+2*Uu};V.push(ge),I[J]=new Ox(ge,ue),ue.hasRenderCallback&&this.haveRenderCallbacks.push(J)}},"addImages"),nm.prototype.patchUpdatedImages=t(function(C,I){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var V in C.updatedImages)this.patchUpdatedImage(this.iconPositions[V],C.getImage(V),I),this.patchUpdatedImage(this.patternPositions[V],C.getImage(V),I)},"patchUpdatedImages"),nm.prototype.patchUpdatedImage=t(function(C,I,V){if(!(!C||!I)&&C.version!==I.version){C.version=I.version;var J=C.tl,ue=J[0],ge=J[1];V.update(I.data,void 0,{x:ue,y:ge})}},"patchUpdatedImage"),Le("ImagePosition",Ox),Le("ImageAtlas",nm);var yf={horizontal:1,vertical:2,horizontalOnly:3},im=-17;function dye(E){for(var C=0,I=E;C<I.length;C+=1){var V=I[C];if(V.positionedGlyphs.length!==0)return!1}return!0}t(dye,"isEmpty");var rO=57344,aO=63743,J0=t(function(){this.scale=1,this.fontStack="",this.imageName=null},"SectionOptions");J0.forText=t(function(C,I){var V=new J0;return V.scale=C||1,V.fontStack=I,V},"forText"),J0.forImage=t(function(C){var I=new J0;return I.imageName=C,I},"forImage");var Cl=t(function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null},"TaggedString");Cl.fromFeature=t(function(C,I){for(var V=new Cl,J=0;J<C.sections.length;J++){var ue=C.sections[J];ue.image?V.addImageSection(ue):V.addTextSection(ue,I)}return V},"fromFeature"),Cl.prototype.length=t(function(){return this.text.length},"length"),Cl.prototype.getSection=t(function(C){return this.sections[this.sectionIndex[C]]},"getSection"),Cl.prototype.getSectionIndex=t(function(C){return this.sectionIndex[C]},"getSectionIndex"),Cl.prototype.getCharCode=t(function(C){return this.text.charCodeAt(C)},"getCharCode"),Cl.prototype.verticalizePunctuation=t(function(){this.text=Vge(this.text)},"verticalizePunctuation$1"),Cl.prototype.trim=t(function(){for(var C=0,I=0;I<this.text.length&&Xh[this.text.charCodeAt(I)];I++)C++;for(var V=this.text.length,J=this.text.length-1;J>=0&&J>=C&&Xh[this.text.charCodeAt(J)];J--)V--;this.text=this.text.substring(C,V),this.sectionIndex=this.sectionIndex.slice(C,V)},"trim"),Cl.prototype.substring=t(function(C,I){var V=new Cl;return V.text=this.text.substring(C,I),V.sectionIndex=this.sectionIndex.slice(C,I),V.sections=this.sections,V},"substring"),Cl.prototype.toString=t(function(){return this.text},"toString"),Cl.prototype.getMaxScale=t(function(){var C=this;return this.sectionIndex.reduce(function(I,V){return Math.max(I,C.sections[V].scale)},0)},"getMaxScale"),Cl.prototype.addTextSection=t(function(C,I){this.text+=C.text,this.sections.push(J0.forText(C.scale,C.fontStack||I));for(var V=this.sections.length-1,J=0;J<C.text.length;++J)this.sectionIndex.push(V)},"addTextSection"),Cl.prototype.addImageSection=t(function(C){var I=C.image?C.image.name:"";if(I.length===0){q("Can't add FormattedSection with an empty image.");return}var V=this.getNextImageSectionCharCode();if(!V){q("Reached maximum number of images "+(aO-rO+2));return}this.text+=String.fromCharCode(V),this.sections.push(J0.forImage(I)),this.sectionIndex.push(this.sections.length-1)},"addImageSection"),Cl.prototype.getNextImageSectionCharCode=t(function(){return this.imageSectionID?this.imageSectionID>=aO?null:++this.imageSectionID:(this.imageSectionID=rO,this.imageSectionID)},"getNextImageSectionCharCode");function pye(E,C){for(var I=[],V=E.text,J=0,ue=0,ge=C;ue<ge.length;ue+=1){var ke=ge[ue];I.push(E.substring(J,ke)),J=ke}return J<V.length&&I.push(E.substring(J,V.length)),I}t(pye,"breakLines");function Nx(E,C,I,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt){var yr=Cl.fromFeature(E,J);lt===yf.vertical&&yr.verticalizePunctuation();var lr,Rr=Fn.processBidirectionalText,_r=Fn.processStyledBidirectionalText;if(Rr&&yr.sections.length===1){lr=[];for(var Cr=Rr(yr.toString(),j3(yr,Oe,ue,C,V,mt,Bt)),qr=0,ta=Cr;qr<ta.length;qr+=1){var ga=ta[qr],da=new Cl;da.text=ga,da.sections=yr.sections;for(var an=0;an<ga.length;an++)da.sectionIndex.push(0);lr.push(da)}}else if(_r){lr=[];for(var Ha=_r(yr.text,yr.sectionIndex,j3(yr,Oe,ue,C,V,mt,Bt)),Xa=0,Mn=Ha;Xa<Mn.length;Xa+=1){var Qa=Mn[Xa],rn=new Cl;rn.text=Qa[0],rn.sectionIndex=Qa[1],rn.sections=yr.sections,lr.push(rn)}}else lr=pye(yr,j3(yr,Oe,ue,C,V,mt,Bt));var Vn=[],An={positionedLines:Vn,text:yr.toString(),top:Ve[1],bottom:Ve[1],left:Ve[0],right:Ve[0],writingMode:lt,iconsInText:!1,verticalizable:!1};return mye(An,C,I,V,lr,ge,ke,Pe,lt,Oe,At,Kt),dye(Vn)?!1:An}t(Nx,"shapeText");var Xh={};Xh[9]=!0,Xh[10]=!0,Xh[11]=!0,Xh[12]=!0,Xh[13]=!0,Xh[32]=!0;var Hu={};Hu[10]=!0,Hu[32]=!0,Hu[38]=!0,Hu[40]=!0,Hu[41]=!0,Hu[43]=!0,Hu[45]=!0,Hu[47]=!0,Hu[173]=!0,Hu[183]=!0,Hu[8203]=!0,Hu[8208]=!0,Hu[8211]=!0,Hu[8231]=!0;function nO(E,C,I,V,J,ue){if(C.imageName){var Pe=V[C.imageName];return Pe?Pe.displaySize[0]*C.scale*Zs/ue+J:0}else{var ge=I[C.fontStack],ke=ge&&ge[E];return ke?ke.metrics.advance*C.scale+J:0}}t(nO,"getGlyphAdvance");function gye(E,C,I,V,J,ue){for(var ge=0,ke=0;ke<E.length();ke++){var Pe=E.getSection(ke);ge+=nO(E.getCharCode(ke),Pe,V,J,C,ue)}var Oe=Math.max(1,Math.ceil(ge/I));return ge/Oe}t(gye,"determineAverageLineWidth");function iO(E,C,I,V){var J=Math.pow(E-C,2);return V?E<C?J/2:J*2:J+Math.abs(I)*I}t(iO,"calculateBadness");function yye(E,C,I){var V=0;return E===10&&(V-=1e4),I&&(V+=150),(E===40||E===65288)&&(V+=50),(C===41||C===65289)&&(V+=50),V}t(yye,"calculatePenalty");function oO(E,C,I,V,J,ue){for(var ge=null,ke=iO(C,I,J,ue),Pe=0,Oe=V;Pe<Oe.length;Pe+=1){var Ve=Oe[Pe],lt=C-Ve.x,At=iO(lt,I,J,ue)+Ve.badness;At<=ke&&(ge=Ve,ke=At)}return{index:E,x:C,priorBreak:ge,badness:ke}}t(oO,"evaluateBreak");function sO(E){return E?sO(E.priorBreak).concat(E.index):[]}t(sO,"leastBadBreaks");function j3(E,C,I,V,J,ue,ge){if(ue!=="point")return[];if(!E)return[];for(var ke=[],Pe=gye(E,C,I,V,J,ge),Oe=E.text.indexOf("\u200B")>=0,Ve=0,lt=0;lt<E.length();lt++){var At=E.getSection(lt),mt=E.getCharCode(lt);if(Xh[mt]||(Ve+=nO(mt,At,V,J,C,ge)),lt<E.length()-1){var Bt=er(mt);(Hu[mt]||Bt||At.imageName)&&ke.push(oO(lt+1,Ve,Pe,ke,yye(mt,E.getCharCode(lt+1),Bt&&Oe),!1))}}return sO(oO(E.length(),Ve,Pe,ke,0,!0))}t(j3,"determineLineBreaks");function Y3(E){var C=.5,I=.5;switch(E){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(E){case"bottom":case"bottom-right":case"bottom-left":I=1;break;case"top":case"top-right":case"top-left":I=0;break}return{horizontalAlign:C,verticalAlign:I}}t(Y3,"getAnchorAlignment");function mye(E,C,I,V,J,ue,ge,ke,Pe,Oe,Ve,lt){for(var At=0,mt=im,Bt=0,Kt=0,yr=ke==="right"?1:ke==="left"?0:.5,lr=0,Rr=0,_r=J;Rr<_r.length;Rr+=1){var Cr=_r[Rr];Cr.trim();var qr=Cr.getMaxScale(),ta=(qr-1)*Zs,ga={positionedGlyphs:[],lineOffset:0};E.positionedLines[lr]=ga;var da=ga.positionedGlyphs,an=0;if(!Cr.length()){mt+=ue,++lr;continue}for(var Ha=0;Ha<Cr.length();Ha++){var Xa=Cr.getSection(Ha),Mn=Cr.getSectionIndex(Ha),Qa=Cr.getCharCode(Ha),rn=0,Vn=null,An=null,ci=null,Bi=Zs,hi=!(Pe===yf.horizontal||!Ve&&!rr(Qa)||Ve&&(Xh[Qa]||tr(Qa)));if(Xa.imageName){var qo=V[Xa.imageName];if(!qo)continue;ci=Xa.imageName,E.iconsInText=E.iconsInText||!0,An=qo.paddedRect;var Zo=qo.displaySize;Xa.scale=Xa.scale*Zs/lt,Vn={width:Zo[0],height:Zo[1],left:Uu,top:-eO,advance:hi?Zo[1]:Zo[0]};var zs=Zs-Zo[1]*Xa.scale;rn=ta+zs,Bi=Vn.advance;var hs=hi?Zo[0]*Xa.scale-Zs*qr:Zo[1]*Xa.scale-Zs*qr;hs>0&&hs>an&&(an=hs)}else{var vi=I[Xa.fontStack],ui=vi&&vi[Qa];if(ui&&ui.rect)An=ui.rect,Vn=ui.metrics;else{var Zi=C[Xa.fontStack],no=Zi&&Zi[Qa];if(!no)continue;Vn=no.metrics}rn=(qr-Xa.scale)*Zs}hi?(E.verticalizable=!0,da.push({glyph:Qa,imageName:ci,x:At,y:mt+rn,vertical:hi,scale:Xa.scale,fontStack:Xa.fontStack,sectionIndex:Mn,metrics:Vn,rect:An}),At+=Bi*Xa.scale+Oe):(da.push({glyph:Qa,imageName:ci,x:At,y:mt+rn,vertical:hi,scale:Xa.scale,fontStack:Xa.fontStack,sectionIndex:Mn,metrics:Vn,rect:An}),At+=Vn.advance*Xa.scale+Oe)}if(da.length!==0){var Ll=At-Oe;Bt=Math.max(Ll,Bt),xye(da,0,da.length-1,yr,an)}At=0;var Rl=ue*qr+an;ga.lineOffset=Math.max(an,ta),mt+=Rl,Kt=Math.max(Rl,Kt),++lr}var Fs=mt-im,Yl=Y3(ge),Wl=Yl.horizontalAlign,Es=Yl.verticalAlign;bye(E.positionedLines,yr,Wl,Es,Bt,Kt,ue,Fs,J.length),E.top+=-Es*Fs,E.bottom=E.top+Fs,E.left+=-Wl*Bt,E.right=E.left+Bt}t(mye,"shapeLines");function xye(E,C,I,V,J){if(!(!V&&!J))for(var ue=E[I],ge=ue.metrics.advance*ue.scale,ke=(E[I].x+ge)*V,Pe=C;Pe<=I;Pe++)E[Pe].x-=ke,E[Pe].y+=J}t(xye,"justifyLine");function bye(E,C,I,V,J,ue,ge,ke,Pe){var Oe=(C-I)*J,Ve=0;ue!==ge?Ve=-ke*V-im:Ve=(-V*Pe+.5)*ge;for(var lt=0,At=E;lt<At.length;lt+=1)for(var mt=At[lt],Bt=0,Kt=mt.positionedGlyphs;Bt<Kt.length;Bt+=1){var yr=Kt[Bt];yr.x+=Oe,yr.y+=Ve}}t(bye,"align$1");function _ye(E,C,I){var V=Y3(I),J=V.horizontalAlign,ue=V.verticalAlign,ge=C[0],ke=C[1],Pe=ge-E.displaySize[0]*J,Oe=Pe+E.displaySize[0],Ve=ke-E.displaySize[1]*ue,lt=Ve+E.displaySize[1];return{image:E,top:Ve,bottom:lt,left:Pe,right:Oe}}t(_ye,"shapeIcon");function lO(E,C,I,V,J,ue){var ge=E.image,ke;if(ge.content){var Pe=ge.content,Oe=ge.pixelRatio||1;ke=[Pe[0]/Oe,Pe[1]/Oe,ge.displaySize[0]-Pe[2]/Oe,ge.displaySize[1]-Pe[3]/Oe]}var Ve=C.left*ue,lt=C.right*ue,At,mt,Bt,Kt;I==="width"||I==="both"?(Kt=J[0]+Ve-V[3],mt=J[0]+lt+V[1]):(Kt=J[0]+(Ve+lt-ge.displaySize[0])/2,mt=Kt+ge.displaySize[0]);var yr=C.top*ue,lr=C.bottom*ue;return I==="height"||I==="both"?(At=J[1]+yr-V[0],Bt=J[1]+lr+V[2]):(At=J[1]+(yr+lr-ge.displaySize[1])/2,Bt=At+ge.displaySize[1]),{image:ge,top:At,right:mt,bottom:Bt,left:Kt,collisionPadding:ke}}t(lO,"fitIconToText");var Q0=function(E){function C(I,V,J,ue){E.call(this,I,V),this.angle=J,ue!==void 0&&(this.segment=ue)}return t(C,"Anchor"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.clone=t(function(){return new C(this.x,this.y,this.angle,this.segment)},"clone"),C}(v);Le("Anchor",Q0);var dh=128;function W3(E,C){var I=C.expression;if(I.kind==="constant"){var V=I.evaluate(new On(E+1));return{kind:"constant",layoutSize:V}}else{if(I.kind==="source")return{kind:"source"};for(var J=I.zoomStops,ue=I.interpolationType,ge=0;ge<J.length&&J[ge]<=E;)ge++;ge=Math.max(0,ge-1);for(var ke=ge;ke<J.length&&J[ke]<E+1;)ke++;ke=Math.min(J.length-1,ke);var Pe=J[ge],Oe=J[ke];if(I.kind==="composite")return{kind:"composite",minZoom:Pe,maxZoom:Oe,interpolationType:ue};var Ve=I.evaluate(new On(Pe)),lt=I.evaluate(new On(Oe));return{kind:"camera",minZoom:Pe,maxZoom:Oe,minSize:Ve,maxSize:lt,interpolationType:ue}}}t(W3,"getSizeData");function uO(E,C,I){var V=C.uSize,J=C.uSizeT,ue=I.lowerSize,ge=I.upperSize;return E.kind==="source"?ue/dh:E.kind==="composite"?ro(ue/dh,ge/dh,J):V}t(uO,"evaluateSizeForFeature");function fO(E,C){var I=0,V=0;if(E.kind==="constant")V=E.layoutSize;else if(E.kind!=="source"){var J=E.interpolationType,ue=E.minZoom,ge=E.maxZoom,ke=J?m(es.interpolationFactor(J,C,ue,ge),0,1):0;E.kind==="camera"?V=ro(E.minSize,E.maxSize,ke):I=ke}return{uSizeT:I,uSize:V}}t(fO,"evaluateSizeForZoom");var wye=Object.freeze({__proto__:null,getSizeData:W3,evaluateSizeForFeature:uO,evaluateSizeForZoom:fO,SIZE_PACK_FACTOR:dh});function cO(E,C,I,V,J){if(C.segment===void 0)return!0;for(var ue=C,ge=C.segment+1,ke=0;ke>-I/2;){if(ge--,ge<0)return!1;ke-=E[ge].dist(ue),ue=E[ge]}ke+=E[ge].dist(E[ge+1]),ge++;for(var Pe=[],Oe=0;ke<I/2;){var Ve=E[ge-1],lt=E[ge],At=E[ge+1];if(!At)return!1;var mt=Ve.angleTo(lt)-lt.angleTo(At);for(mt=Math.abs((mt+3*Math.PI)%(Math.PI*2)-Math.PI),Pe.push({distance:ke,angleDelta:mt}),Oe+=mt;ke-Pe[0].distance>V;)Oe-=Pe.shift().angleDelta;if(Oe>J)return!1;ge++,ke+=lt.dist(At)}return!0}t(cO,"checkMaxAngle");function hO(E){for(var C=0,I=0;I<E.length-1;I++)C+=E[I].dist(E[I+1]);return C}t(hO,"getLineLength");function vO(E,C,I){return E?3/5*C*I:0}t(vO,"getAngleWindowSize");function dO(E,C){return Math.max(E?E.right-E.left:0,C?C.right-C.left:0)}t(dO,"getShapedLabelLength");function Tye(E,C,I,V,J,ue){for(var ge=vO(I,J,ue),ke=dO(I,V)*ue,Pe=0,Oe=hO(E)/2,Ve=0;Ve<E.length-1;Ve++){var lt=E[Ve],At=E[Ve+1],mt=lt.dist(At);if(Pe+mt>Oe){var Bt=(Oe-Pe)/mt,Kt=ro(lt.x,At.x,Bt),yr=ro(lt.y,At.y,Bt),lr=new Q0(Kt,yr,At.angleTo(lt),Ve);return lr._round(),!ge||cO(E,lr,ke,ge,C)?lr:void 0}Pe+=mt}}t(Tye,"getCenterAnchor");function Aye(E,C,I,V,J,ue,ge,ke,Pe){var Oe=vO(V,ue,ge),Ve=dO(V,J),lt=Ve*ge,At=E[0].x===0||E[0].x===Pe||E[0].y===0||E[0].y===Pe;C-lt<C/4&&(C=lt+C/4);var mt=ue*2,Bt=At?C/2*ke%C:(Ve/2+mt)*ge*ke%C;return pO(E,Bt,C,Oe,I,lt,At,!1,Pe)}t(Aye,"getAnchors");function pO(E,C,I,V,J,ue,ge,ke,Pe){for(var Oe=ue/2,Ve=hO(E),lt=0,At=C-I,mt=[],Bt=0;Bt<E.length-1;Bt++){for(var Kt=E[Bt],yr=E[Bt+1],lr=Kt.dist(yr),Rr=yr.angleTo(Kt);At+I<lt+lr;){At+=I;var _r=(At-lt)/lr,Cr=ro(Kt.x,yr.x,_r),qr=ro(Kt.y,yr.y,_r);if(Cr>=0&&Cr<Pe&&qr>=0&&qr<Pe&&At-Oe>=0&&At+Oe<=Ve){var ta=new Q0(Cr,qr,Rr,Bt);ta._round(),(!V||cO(E,ta,ue,V,J))&&mt.push(ta)}}lt+=lr}return!ke&&!mt.length&&!ge&&(mt=pO(E,lt/2,I,V,J,ue,ge,!0,Pe)),mt}t(pO,"resample");function gO(E,C,I,V,J){for(var ue=[],ge=0;ge<E.length;ge++)for(var ke=E[ge],Pe=void 0,Oe=0;Oe<ke.length-1;Oe++){var Ve=ke[Oe],lt=ke[Oe+1];Ve.x<C&&lt.x<C||(Ve.x<C?Ve=new v(C,Ve.y+(lt.y-Ve.y)*((C-Ve.x)/(lt.x-Ve.x)))._round():lt.x<C&&(lt=new v(C,Ve.y+(lt.y-Ve.y)*((C-Ve.x)/(lt.x-Ve.x)))._round()),!(Ve.y<I&&lt.y<I)&&(Ve.y<I?Ve=new v(Ve.x+(lt.x-Ve.x)*((I-Ve.y)/(lt.y-Ve.y)),I)._round():lt.y<I&&(lt=new v(Ve.x+(lt.x-Ve.x)*((I-Ve.y)/(lt.y-Ve.y)),I)._round()),!(Ve.x>=V&&lt.x>=V)&&(Ve.x>=V?Ve=new v(V,Ve.y+(lt.y-Ve.y)*((V-Ve.x)/(lt.x-Ve.x)))._round():lt.x>=V&&(lt=new v(V,Ve.y+(lt.y-Ve.y)*((V-Ve.x)/(lt.x-Ve.x)))._round()),!(Ve.y>=J&&lt.y>=J)&&(Ve.y>=J?Ve=new v(Ve.x+(lt.x-Ve.x)*((J-Ve.y)/(lt.y-Ve.y)),J)._round():lt.y>=J&&(lt=new v(Ve.x+(lt.x-Ve.x)*((J-Ve.y)/(lt.y-Ve.y)),J)._round()),(!Pe||!Ve.equals(Pe[Pe.length-1]))&&(Pe=[Ve],ue.push(Pe)),Pe.push(lt)))))}return ue}t(gO,"clipLine");var eg=Uu;function yO(E,C,I,V){var J=[],ue=E.image,ge=ue.pixelRatio,ke=ue.paddedRect.w-2*eg,Pe=ue.paddedRect.h-2*eg,Oe=E.right-E.left,Ve=E.bottom-E.top,lt=ue.stretchX||[[0,ke]],At=ue.stretchY||[[0,Pe]],mt=t(function(vi,ui){return vi+ui[1]-ui[0]},"reduceRanges"),Bt=lt.reduce(mt,0),Kt=At.reduce(mt,0),yr=ke-Bt,lr=Pe-Kt,Rr=0,_r=Bt,Cr=0,qr=Kt,ta=0,ga=yr,da=0,an=lr;if(ue.content&&V){var Ha=ue.content;Rr=qx(lt,0,Ha[0]),Cr=qx(At,0,Ha[1]),_r=qx(lt,Ha[0],Ha[2]),qr=qx(At,Ha[1],Ha[3]),ta=Ha[0]-Rr,da=Ha[1]-Cr,ga=Ha[2]-Ha[0]-_r,an=Ha[3]-Ha[1]-qr}var Xa=t(function(vi,ui,Zi,no){var qo=Ux(vi.stretch-Rr,_r,Oe,E.left),Zo=Hx(vi.fixed-ta,ga,vi.stretch,Bt),zs=Ux(ui.stretch-Cr,qr,Ve,E.top),hs=Hx(ui.fixed-da,an,ui.stretch,Kt),Ll=Ux(Zi.stretch-Rr,_r,Oe,E.left),Rl=Hx(Zi.fixed-ta,ga,Zi.stretch,Bt),Fs=Ux(no.stretch-Cr,qr,Ve,E.top),Yl=Hx(no.fixed-da,an,no.stretch,Kt),Wl=new v(qo,zs),Es=new v(Ll,zs),Xl=new v(Ll,Fs),mf=new v(qo,Fs),ed=new v(Zo/ge,hs/ge),Ud=new v(Rl/ge,Yl/ge),Hd=C*Math.PI/180;if(Hd){var $d=Math.sin(Hd),lg=Math.cos(Hd),kc=[lg,-$d,$d,lg];Wl._matMult(kc),Es._matMult(kc),mf._matMult(kc),Xl._matMult(kc)}var Wx=vi.stretch+vi.fixed,rT=Zi.stretch+Zi.fixed,Xx=ui.stretch+ui.fixed,aT=no.stretch+no.fixed,Xf={x:ue.paddedRect.x+eg+Wx,y:ue.paddedRect.y+eg+Xx,w:rT-Wx,h:aT-Xx},ug=ga/ge/Oe,Zx=an/ge/Ve;return{tl:Wl,tr:Es,bl:mf,br:Xl,tex:Xf,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ed,pixelOffsetBR:Ud,minFontScaleX:ug,minFontScaleY:Zx,isSDF:I}},"makeBox");if(!V||!ue.stretchX&&!ue.stretchY)J.push(Xa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ke+1},{fixed:0,stretch:Pe+1}));else for(var Mn=mO(lt,yr,Bt),Qa=mO(At,lr,Kt),rn=0;rn<Mn.length-1;rn++)for(var Vn=Mn[rn],An=Mn[rn+1],ci=0;ci<Qa.length-1;ci++){var Bi=Qa[ci],hi=Qa[ci+1];J.push(Xa(Vn,Bi,An,hi))}return J}t(yO,"getIconQuads");function qx(E,C,I){for(var V=0,J=0,ue=E;J<ue.length;J+=1){var ge=ue[J];V+=Math.max(C,Math.min(I,ge[1]))-Math.max(C,Math.min(I,ge[0]))}return V}t(qx,"sumWithinRange");function mO(E,C,I){for(var V=[{fixed:-eg,stretch:0}],J=0,ue=E;J<ue.length;J+=1){var ge=ue[J],ke=ge[0],Pe=ge[1],Oe=V[V.length-1];V.push({fixed:ke-Oe.stretch,stretch:Oe.stretch}),V.push({fixed:ke-Oe.stretch,stretch:Oe.stretch+(Pe-ke)})}return V.push({fixed:C+eg,stretch:I}),V}t(mO,"stretchZonesToCuts");function Ux(E,C,I,V){return E/C*I+V}t(Ux,"getEmOffset");function Hx(E,C,I,V){return E-C*I/V}t(Hx,"getPxOffset");function Sye(E,C,I,V,J,ue,ge,ke){for(var Pe=V.layout.get("text-rotate").evaluate(ue,{})*Math.PI/180,Oe=[],Ve=0,lt=C.positionedLines;Ve<lt.length;Ve+=1)for(var At=lt[Ve],mt=0,Bt=At.positionedGlyphs;mt<Bt.length;mt+=1){var Kt=Bt[mt];if(!!Kt.rect){var yr=Kt.rect||{},lr=1,Rr=eO+lr,_r=!0,Cr=1,qr=0,ta=(J||ke)&&Kt.vertical,ga=Kt.metrics.advance*Kt.scale/2;if(ke&&C.verticalizable){var da=(Kt.scale-1)*Zs,an=(Zs-Kt.metrics.width*Kt.scale)/2;qr=At.lineOffset/2-(Kt.imageName?-an:da)}if(Kt.imageName){var Ha=ge[Kt.imageName];_r=Ha.sdf,Cr=Ha.pixelRatio,Rr=Uu/Cr}var Xa=J?[Kt.x+ga,Kt.y]:[0,0],Mn=J?[0,0]:[Kt.x+ga+I[0],Kt.y+I[1]-qr],Qa=[0,0];ta&&(Qa=Mn,Mn=[0,0]);var rn=(Kt.metrics.left-Rr)*Kt.scale-ga+Mn[0],Vn=(-Kt.metrics.top-Rr)*Kt.scale+Mn[1],An=rn+yr.w*Kt.scale/Cr,ci=Vn+yr.h*Kt.scale/Cr,Bi=new v(rn,Vn),hi=new v(An,Vn),vi=new v(rn,ci),ui=new v(An,ci);if(ta){var Zi=new v(-ga,ga-im),no=-Math.PI/2,qo=Zs/2-ga,Zo=Kt.imageName?qo:0,zs=new v(5-im-qo,-Zo),hs=new(Function.prototype.bind.apply(v,[null].concat(Qa)));Bi._rotateAround(no,Zi)._add(zs)._add(hs),hi._rotateAround(no,Zi)._add(zs)._add(hs),vi._rotateAround(no,Zi)._add(zs)._add(hs),ui._rotateAround(no,Zi)._add(zs)._add(hs)}if(Pe){var Ll=Math.sin(Pe),Rl=Math.cos(Pe),Fs=[Rl,-Ll,Ll,Rl];Bi._matMult(Fs),hi._matMult(Fs),vi._matMult(Fs),ui._matMult(Fs)}var Yl=new v(0,0),Wl=new v(0,0),Es=0,Xl=0;Oe.push({tl:Bi,tr:hi,bl:vi,br:ui,tex:yr,writingMode:C.writingMode,glyphOffset:Xa,sectionIndex:Kt.sectionIndex,isSDF:_r,pixelOffsetTL:Yl,pixelOffsetBR:Wl,minFontScaleX:Es,minFontScaleY:Xl})}}return Oe}t(Sye,"getGlyphQuads");var $x=t(function(C,I,V,J,ue,ge,ke,Pe,Oe,Ve){if(this.boxStartIndex=C.length,Oe){var lt=ge.top,At=ge.bottom,mt=ge.collisionPadding;mt&&(lt-=mt[1],At+=mt[3]);var Bt=At-lt;Bt>0&&(Bt=Math.max(10,Bt),this.circleDiameter=Bt)}else{var Kt=ge.top*ke-Pe,yr=ge.bottom*ke+Pe,lr=ge.left*ke-Pe,Rr=ge.right*ke+Pe,_r=ge.collisionPadding;if(_r&&(lr-=_r[0]*ke,Kt-=_r[1]*ke,Rr+=_r[2]*ke,yr+=_r[3]*ke),Ve){var Cr=new v(lr,Kt),qr=new v(Rr,Kt),ta=new v(lr,yr),ga=new v(Rr,yr),da=Ve*Math.PI/180;Cr._rotate(da),qr._rotate(da),ta._rotate(da),ga._rotate(da),lr=Math.min(Cr.x,qr.x,ta.x,ga.x),Rr=Math.max(Cr.x,qr.x,ta.x,ga.x),Kt=Math.min(Cr.y,qr.y,ta.y,ga.y),yr=Math.max(Cr.y,qr.y,ta.y,ga.y)}C.emplaceBack(I.x,I.y,lr,Kt,Rr,yr,V,J,ue)}this.boxEndIndex=C.length},"CollisionFeature"),tg=t(function(C,I){if(C===void 0&&(C=[]),I===void 0&&(I=Mye),this.data=C,this.length=this.data.length,this.compare=I,this.length>0)for(var V=(this.length>>1)-1;V>=0;V--)this._down(V)},"TinyQueue");tg.prototype.push=t(function(C){this.data.push(C),this.length++,this._up(this.length-1)},"push"),tg.prototype.pop=t(function(){if(this.length!==0){var C=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),C}},"pop"),tg.prototype.peek=t(function(){return this.data[0]},"peek"),tg.prototype._up=t(function(C){for(var I=this,V=I.data,J=I.compare,ue=V[C];C>0;){var ge=C-1>>1,ke=V[ge];if(J(ue,ke)>=0)break;V[C]=ke,C=ge}V[C]=ue},"_up"),tg.prototype._down=t(function(C){for(var I=this,V=I.data,J=I.compare,ue=this.length>>1,ge=V[C];C<ue;){var ke=(C<<1)+1,Pe=V[ke],Oe=ke+1;if(Oe<this.length&&J(V[Oe],Pe)<0&&(ke=Oe,Pe=V[Oe]),J(Pe,ge)>=0)break;V[C]=Pe,C=ke}V[C]=ge},"_down");function Mye(E,C){return E<C?-1:E>C?1:0}t(Mye,"defaultCompare$1");function kye(E,C,I){C===void 0&&(C=1),I===void 0&&(I=!1);for(var V=1/0,J=1/0,ue=-1/0,ge=-1/0,ke=E[0],Pe=0;Pe<ke.length;Pe++){var Oe=ke[Pe];(!Pe||Oe.x<V)&&(V=Oe.x),(!Pe||Oe.y<J)&&(J=Oe.y),(!Pe||Oe.x>ue)&&(ue=Oe.x),(!Pe||Oe.y>ge)&&(ge=Oe.y)}var Ve=ue-V,lt=ge-J,At=Math.min(Ve,lt),mt=At/2,Bt=new tg([],Eye);if(At===0)return new v(V,J);for(var Kt=V;Kt<ue;Kt+=At)for(var yr=J;yr<ge;yr+=At)Bt.push(new rg(Kt+mt,yr+mt,mt,E));for(var lr=Lye(E),Rr=Bt.length;Bt.length;){var _r=Bt.pop();(_r.d>lr.d||!lr.d)&&(lr=_r,I&&console.log("found best %d after %d probes",Math.round(1e4*_r.d)/1e4,Rr)),!(_r.max-lr.d<=C)&&(mt=_r.h/2,Bt.push(new rg(_r.p.x-mt,_r.p.y-mt,mt,E)),Bt.push(new rg(_r.p.x+mt,_r.p.y-mt,mt,E)),Bt.push(new rg(_r.p.x-mt,_r.p.y+mt,mt,E)),Bt.push(new rg(_r.p.x+mt,_r.p.y+mt,mt,E)),Rr+=4)}return I&&(console.log("num probes: "+Rr),console.log("best distance: "+lr.d)),lr.p}t(kye,"findPoleOfInaccessibility");function Eye(E,C){return C.max-E.max}t(Eye,"compareMax");function rg(E,C,I,V){this.p=new v(E,C),this.h=I,this.d=Cye(this.p,V),this.max=this.d+this.h*Math.SQRT2}t(rg,"Cell");function Cye(E,C){for(var I=!1,V=1/0,J=0;J<C.length;J++)for(var ue=C[J],ge=0,ke=ue.length,Pe=ke-1;ge<ke;Pe=ge++){var Oe=ue[ge],Ve=ue[Pe];Oe.y>E.y!=Ve.y>E.y&&E.x<(Ve.x-Oe.x)*(E.y-Oe.y)/(Ve.y-Oe.y)+Oe.x&&(I=!I),V=Math.min(V,ch(E,Oe,Ve))}return(I?1:-1)*Math.sqrt(V)}t(Cye,"pointToPolygonDist");function Lye(E){for(var C=0,I=0,V=0,J=E[0],ue=0,ge=J.length,ke=ge-1;ue<ge;ke=ue++){var Pe=J[ue],Oe=J[ke],Ve=Pe.x*Oe.y-Oe.x*Pe.y;I+=(Pe.x+Oe.x)*Ve,V+=(Pe.y+Oe.y)*Ve,C+=Ve*3}return new rg(I/C,V/C,0,E)}t(Lye,"getCentroidCell");var ag=7,X3=Number.POSITIVE_INFINITY;function xO(E,C){function I(J,ue){var ge=0,ke=0;ue<0&&(ue=0);var Pe=ue/Math.sqrt(2);switch(J){case"top-right":case"top-left":ke=Pe-ag;break;case"bottom-right":case"bottom-left":ke=-Pe+ag;break;case"bottom":ke=-ue+ag;break;case"top":ke=ue-ag;break}switch(J){case"top-right":case"bottom-right":ge=-Pe;break;case"top-left":case"bottom-left":ge=Pe;break;case"left":ge=ue;break;case"right":ge=-ue;break}return[ge,ke]}t(I,"fromRadialOffset");function V(J,ue,ge){var ke=0,Pe=0;switch(ue=Math.abs(ue),ge=Math.abs(ge),J){case"top-right":case"top-left":case"top":Pe=ge-ag;break;case"bottom-right":case"bottom-left":case"bottom":Pe=-ge+ag;break}switch(J){case"top-right":case"bottom-right":case"right":ke=-ue;break;case"top-left":case"bottom-left":case"left":ke=ue;break}return[ke,Pe]}return t(V,"fromTextOffset"),C[1]!==X3?V(E,C[0],C[1]):I(E,C[0])}t(xO,"evaluateVariableOffset");function Rye(E,C,I,V,J,ue,ge){E.createArrays();var ke=512*E.overscaling;E.tilePixelRatio=Nr/ke,E.compareText={},E.iconsNeedLinear=!1;var Pe=E.layers[0].layout,Oe=E.layers[0]._unevaluatedLayout._values,Ve={};if(E.textSizeData.kind==="composite"){var lt=E.textSizeData,At=lt.minZoom,mt=lt.maxZoom;Ve.compositeTextSizes=[Oe["text-size"].possiblyEvaluate(new On(At),ge),Oe["text-size"].possiblyEvaluate(new On(mt),ge)]}if(E.iconSizeData.kind==="composite"){var Bt=E.iconSizeData,Kt=Bt.minZoom,yr=Bt.maxZoom;Ve.compositeIconSizes=[Oe["icon-size"].possiblyEvaluate(new On(Kt),ge),Oe["icon-size"].possiblyEvaluate(new On(yr),ge)]}Ve.layoutTextSize=Oe["text-size"].possiblyEvaluate(new On(E.zoom+1),ge),Ve.layoutIconSize=Oe["icon-size"].possiblyEvaluate(new On(E.zoom+1),ge),Ve.textMaxSize=Oe["text-size"].possiblyEvaluate(new On(18));for(var lr=Pe.get("text-line-height")*Zs,Rr=Pe.get("text-rotation-alignment")==="map"&&Pe.get("symbol-placement")!=="point",_r=Pe.get("text-keep-upright"),Cr=Pe.get("text-size"),qr=t(function(){var da=ga[ta],an=Pe.get("text-font").evaluate(da,{},ge).join(","),Ha=Cr.evaluate(da,{},ge),Xa=Ve.layoutTextSize.evaluate(da,{},ge),Mn=Ve.layoutIconSize.evaluate(da,{},ge),Qa={horizontal:{},vertical:void 0},rn=da.text,Vn=[0,0];if(rn){var An=rn.toString(),ci=Pe.get("text-letter-spacing").evaluate(da,{},ge)*Zs,Bi=pr(An)?ci:0,hi=Pe.get("text-anchor").evaluate(da,{},ge),vi=Pe.get("text-variable-anchor");if(!vi){var ui=Pe.get("text-radial-offset").evaluate(da,{},ge);ui?Vn=xO(hi,[ui*Zs,X3]):Vn=Pe.get("text-offset").evaluate(da,{},ge).map(function(ed){return ed*Zs})}var Zi=Rr?"center":Pe.get("text-justify").evaluate(da,{},ge),no=Pe.get("symbol-placement"),qo=no==="point"?Pe.get("text-max-width").evaluate(da,{},ge)*Zs:0,Zo=t(function(){E.allowVerticalPlacement&&or(An)&&(Qa.vertical=Nx(rn,C,I,J,an,qo,lr,hi,"left",Bi,Vn,yf.vertical,!0,no,Xa,Ha))},"addVerticalShapingForPointLabelIfNeeded");if(!Rr&&vi){for(var zs=Zi==="auto"?vi.map(function(ed){return Z3(ed)}):[Zi],hs=!1,Ll=0;Ll<zs.length;Ll++){var Rl=zs[Ll];if(!Qa.horizontal[Rl])if(hs)Qa.horizontal[Rl]=Qa.horizontal[0];else{var Fs=Nx(rn,C,I,J,an,qo,lr,"center",Rl,Bi,Vn,yf.horizontal,!1,no,Xa,Ha);Fs&&(Qa.horizontal[Rl]=Fs,hs=Fs.positionedLines.length===1)}}Zo()}else{Zi==="auto"&&(Zi=Z3(hi));var Yl=Nx(rn,C,I,J,an,qo,lr,hi,Zi,Bi,Vn,yf.horizontal,!1,no,Xa,Ha);Yl&&(Qa.horizontal[Zi]=Yl),Zo(),or(An)&&Rr&&_r&&(Qa.vertical=Nx(rn,C,I,J,an,qo,lr,hi,Zi,Bi,Vn,yf.vertical,!1,no,Xa,Ha))}}var Wl=void 0,Es=!1;if(da.icon&&da.icon.name){var Xl=V[da.icon.name];Xl&&(Wl=_ye(J[da.icon.name],Pe.get("icon-offset").evaluate(da,{},ge),Pe.get("icon-anchor").evaluate(da,{},ge)),Es=Xl.sdf,E.sdfIcons===void 0?E.sdfIcons=Xl.sdf:E.sdfIcons!==Xl.sdf&&q("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xl.pixelRatio!==E.pixelRatio||Pe.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var mf=_O(Qa.horizontal)||Qa.vertical;E.iconsInText=mf?mf.iconsInText:!1,(mf||Wl)&&Pye(E,da,Qa,Wl,V,Ve,Xa,Mn,Vn,Es,ge)},"loop"),ta=0,ga=E.features;ta<ga.length;ta+=1)qr();ue&&E.generateCollisionDebugBuffers()}t(Rye,"performSymbolLayout");function Z3(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}t(Z3,"getAnchorJustification");function Pye(E,C,I,V,J,ue,ge,ke,Pe,Oe,Ve){var lt=ue.textMaxSize.evaluate(C,{});lt===void 0&&(lt=ge);var At=E.layers[0].layout,mt=At.get("icon-offset").evaluate(C,{},Ve),Bt=_O(I.horizontal),Kt=24,yr=ge/Kt,lr=E.tilePixelRatio*yr,Rr=E.tilePixelRatio*lt/Kt,_r=E.tilePixelRatio*ke,Cr=E.tilePixelRatio*At.get("symbol-spacing"),qr=At.get("text-padding")*E.tilePixelRatio,ta=At.get("icon-padding")*E.tilePixelRatio,ga=At.get("text-max-angle")/180*Math.PI,da=At.get("text-rotation-alignment")==="map"&&At.get("symbol-placement")!=="point",an=At.get("icon-rotation-alignment")==="map"&&At.get("symbol-placement")!=="point",Ha=At.get("symbol-placement"),Xa=Cr/2,Mn=At.get("icon-text-fit"),Qa;V&&Mn!=="none"&&(E.allowVerticalPlacement&&I.vertical&&(Qa=lO(V,I.vertical,Mn,At.get("icon-text-fit-padding"),mt,yr)),Bt&&(V=lO(V,Bt,Mn,At.get("icon-text-fit-padding"),mt,yr)));var rn=t(function(lg,kc){kc.x<0||kc.x>=Nr||kc.y<0||kc.y>=Nr||Dye(E,kc,lg,I,V,J,Qa,E.layers[0],E.collisionBoxArray,C.index,C.sourceLayerIndex,E.index,lr,qr,da,Pe,_r,ta,an,mt,C,ue,Oe,Ve,ge)},"addSymbolAtAnchor");if(Ha==="line")for(var Vn=0,An=gO(C.geometry,0,0,Nr,Nr);Vn<An.length;Vn+=1)for(var ci=An[Vn],Bi=Aye(ci,Cr,ga,I.vertical||Bt,V,Kt,Rr,E.overscaling,Nr),hi=0,vi=Bi;hi<vi.length;hi+=1){var ui=vi[hi],Zi=Bt;(!Zi||!Iye(E,Zi.text,Xa,ui))&&rn(ci,ui)}else if(Ha==="line-center")for(var no=0,qo=C.geometry;no<qo.length;no+=1){var Zo=qo[no];if(Zo.length>1){var zs=Tye(Zo,ga,I.vertical||Bt,V,Kt,Rr);zs&&rn(Zo,zs)}}else if(C.type==="Polygon")for(var hs=0,Ll=N3(C.geometry,0);hs<Ll.length;hs+=1){var Rl=Ll[hs],Fs=kye(Rl,16);rn(Rl[0],new Q0(Fs.x,Fs.y,0))}else if(C.type==="LineString")for(var Yl=0,Wl=C.geometry;Yl<Wl.length;Yl+=1){var Es=Wl[Yl];rn(Es,new Q0(Es[0].x,Es[0].y,0))}else if(C.type==="Point")for(var Xl=0,mf=C.geometry;Xl<mf.length;Xl+=1)for(var ed=mf[Xl],Ud=0,Hd=ed;Ud<Hd.length;Ud+=1){var $d=Hd[Ud];rn([$d],new Q0($d.x,$d.y,0))}}t(Pye,"addFeature");var om=255,Nd=om*dh;function bO(E,C,I,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt){var Kt=Sye(C,I,ke,J,ue,ge,V,E.allowVerticalPlacement),yr=E.textSizeData,lr=null;yr.kind==="source"?(lr=[dh*J.layout.get("text-size").evaluate(ge,{})],lr[0]>Nd&&q(E.layerIds[0]+': Value for "text-size" is >= '+om+'. Reduce your "text-size".')):yr.kind==="composite"&&(lr=[dh*mt.compositeTextSizes[0].evaluate(ge,{},Bt),dh*mt.compositeTextSizes[1].evaluate(ge,{},Bt)],(lr[0]>Nd||lr[1]>Nd)&&q(E.layerIds[0]+': Value for "text-size" is >= '+om+'. Reduce your "text-size".')),E.addSymbols(E.text,Kt,lr,ke,ue,ge,Oe,C,Pe.lineStartIndex,Pe.lineLength,At,Bt);for(var Rr=0,_r=Ve;Rr<_r.length;Rr+=1){var Cr=_r[Rr];lt[Cr]=E.text.placedSymbolArray.length-1}return Kt.length*4}t(bO,"addTextVertices");function _O(E){for(var C in E)return E[C];return null}t(_O,"getDefaultHorizontalShaping");function Dye(E,C,I,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At,mt,Bt,Kt,yr,lr,Rr,_r,Cr,qr,ta,ga,da){var an,Ha=E.addToLineVertexArray(C,I),Xa,Mn,Qa,rn,Vn=0,An=0,ci=0,Bi=0,hi=-1,vi=-1,ui={},Zi=be(""),no=0,qo=0;if(ke._unevaluatedLayout.getValue("text-radial-offset")===void 0?(an=ke.layout.get("text-offset").evaluate(Cr,{},ga).map(function(um){return um*Zs}),no=an[0],qo=an[1]):(no=ke.layout.get("text-radial-offset").evaluate(Cr,{},ga)*Zs,qo=X3),E.allowVerticalPlacement&&V.vertical){var Zo=ke.layout.get("text-rotate").evaluate(Cr,{},ga),zs=Zo+90,hs=V.vertical;Qa=new $x(Pe,C,Oe,Ve,lt,hs,At,mt,Bt,zs),ge&&(rn=new $x(Pe,C,Oe,Ve,lt,ge,yr,lr,Bt,zs))}if(J){var Ll=ke.layout.get("icon-rotate").evaluate(Cr,{}),Rl=ke.layout.get("icon-text-fit")!=="none",Fs=yO(J,Ll,ta,Rl),Yl=ge?yO(ge,Ll,ta,Rl):void 0;Mn=new $x(Pe,C,Oe,Ve,lt,J,yr,lr,!1,Ll),Vn=Fs.length*4;var Wl=E.iconSizeData,Es=null;Wl.kind==="source"?(Es=[dh*ke.layout.get("icon-size").evaluate(Cr,{})],Es[0]>Nd&&q(E.layerIds[0]+': Value for "icon-size" is >= '+om+'. Reduce your "icon-size".')):Wl.kind==="composite"&&(Es=[dh*qr.compositeIconSizes[0].evaluate(Cr,{},ga),dh*qr.compositeIconSizes[1].evaluate(Cr,{},ga)],(Es[0]>Nd||Es[1]>Nd)&&q(E.layerIds[0]+': Value for "icon-size" is >= '+om+'. Reduce your "icon-size".')),E.addSymbols(E.icon,Fs,Es,_r,Rr,Cr,!1,C,Ha.lineStartIndex,Ha.lineLength,-1,ga),hi=E.icon.placedSymbolArray.length-1,Yl&&(An=Yl.length*4,E.addSymbols(E.icon,Yl,Es,_r,Rr,Cr,yf.vertical,C,Ha.lineStartIndex,Ha.lineLength,-1,ga),vi=E.icon.placedSymbolArray.length-1)}for(var Xl in V.horizontal){var mf=V.horizontal[Xl];if(!Xa){Zi=be(mf.text);var ed=ke.layout.get("text-rotate").evaluate(Cr,{},ga);Xa=new $x(Pe,C,Oe,Ve,lt,mf,At,mt,Bt,ed)}var Ud=mf.positionedLines.length===1;if(ci+=bO(E,C,mf,ue,ke,Bt,Cr,Kt,Ha,V.vertical?yf.horizontal:yf.horizontalOnly,Ud?Object.keys(V.horizontal):[Xl],ui,hi,qr,ga),Ud)break}V.vertical&&(Bi+=bO(E,C,V.vertical,ue,ke,Bt,Cr,Kt,Ha,yf.vertical,["vertical"],ui,vi,qr,ga));var Hd=Xa?Xa.boxStartIndex:E.collisionBoxArray.length,$d=Xa?Xa.boxEndIndex:E.collisionBoxArray.length,lg=Qa?Qa.boxStartIndex:E.collisionBoxArray.length,kc=Qa?Qa.boxEndIndex:E.collisionBoxArray.length,Wx=Mn?Mn.boxStartIndex:E.collisionBoxArray.length,rT=Mn?Mn.boxEndIndex:E.collisionBoxArray.length,Xx=rn?rn.boxStartIndex:E.collisionBoxArray.length,aT=rn?rn.boxEndIndex:E.collisionBoxArray.length,Xf=-1,ug=t(function(um,BO){return um&&um.circleDiameter?Math.max(um.circleDiameter,BO):BO},"getCollisionCircleHeight");Xf=ug(Xa,Xf),Xf=ug(Qa,Xf),Xf=ug(Mn,Xf),Xf=ug(rn,Xf);var Zx=Xf>-1?1:0;Zx&&(Xf*=da/Zs),E.glyphOffsetArray.length>=Fi.MAX_GLYPHS&&q("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cr.sortKey!==void 0&&E.addToSortKeyRanges(E.symbolInstances.length,Cr.sortKey),E.symbolInstances.emplaceBack(C.x,C.y,ui.right>=0?ui.right:-1,ui.center>=0?ui.center:-1,ui.left>=0?ui.left:-1,ui.vertical||-1,hi,vi,Zi,Hd,$d,lg,kc,Wx,rT,Xx,aT,Oe,ci,Bi,Vn,An,Zx,0,At,no,qo,Xf)}t(Dye,"addSymbol");function Iye(E,C,I,V){var J=E.compareText;if(!(C in J))J[C]=[];else for(var ue=J[C],ge=ue.length-1;ge>=0;ge--)if(V.dist(ue[ge])<I)return!0;return J[C].push(V),!1}t(Iye,"anchorIsTooClose");var zye=X0.VectorTileFeature.types,Fye=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Vx(E,C,I,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At){var mt=ke?Math.min(Nd,Math.round(ke[0])):0,Bt=ke?Math.min(Nd,Math.round(ke[1])):0;E.emplaceBack(C,I,Math.round(V*32),Math.round(J*32),ue,ge,(mt<<1)+(Pe?1:0),Bt,Oe*16,Ve*16,lt*256,At*256)}t(Vx,"addVertex$1");function K3(E,C,I){E.emplaceBack(C.x,C.y,I),E.emplaceBack(C.x,C.y,I),E.emplaceBack(C.x,C.y,I),E.emplaceBack(C.x,C.y,I)}t(K3,"addDynamicAttributes");function Bye(E){for(var C=0,I=E.sections;C<I.length;C+=1){var V=I[C];if(ua(V.text))return!0}return!1}t(Bye,"containsRTLText");var ng=t(function(C){this.layoutVertexArray=new $r,this.indexArray=new ja,this.programConfigurations=C,this.segments=new N,this.dynamicLayoutVertexArray=new Wa,this.opacityVertexArray=new Or,this.placedSymbolArray=new Ys},"SymbolBuffers");ng.prototype.isEmpty=t(function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},"isEmpty"),ng.prototype.upload=t(function(C,I,V,J){this.isEmpty()||(V&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,$3.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,Oge.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,Fye,!0),this.opacityVertexBuffer.itemSize=1),(V||J)&&this.programConfigurations.upload(C))},"upload"),ng.prototype.destroy=t(function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},"destroy"),Le("SymbolBuffers",ng);var sm=t(function(C,I,V){this.layoutVertexArray=new C,this.layoutAttributes=I,this.indexArray=new V,this.segments=new N,this.collisionVertexArray=new Sn},"CollisionBuffers");sm.prototype.upload=t(function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,Nge.members,!0)},"upload"),sm.prototype.destroy=t(function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},"destroy"),Le("CollisionBuffers",sm);var Fi=t(function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(Pe){return Pe.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=V0([]),this.placementViewportMatrix=V0([]);var I=this.layers[0],V=I._unevaluatedLayout._values;this.textSizeData=W3(this.zoom,V["text-size"]),this.iconSizeData=W3(this.zoom,V["icon-size"]);var J=this.layers[0].layout,ue=J.get("symbol-sort-key"),ge=J.get("symbol-z-order");this.sortFeaturesByKey=ge!=="viewport-y"&&ue.constantOr(1)!==void 0;var ke=ge==="viewport-y"||ge==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=ke&&(J.get("text-allow-overlap")||J.get("icon-allow-overlap")||J.get("text-ignore-placement")||J.get("icon-ignore-placement")),J.get("symbol-placement")==="point"&&(this.writingModes=J.get("text-writing-mode").map(function(Pe){return yf[Pe]})),this.stateDependentLayerIds=this.layers.filter(function(Pe){return Pe.isStateDependent()}).map(function(Pe){return Pe.id}),this.sourceID=C.sourceID},"SymbolBucket");Fi.prototype.createArrays=t(function(){this.text=new ng(new Xr($3.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new ng(new Xr($3.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new _n,this.lineVertexArray=new kl,this.symbolInstances=new as},"createArrays"),Fi.prototype.calculateGlyphDependencies=t(function(C,I,V,J,ue){for(var ge=0;ge<C.length;ge++)if(I[C.charCodeAt(ge)]=!0,(V||J)&&ue){var ke=rm[C.charAt(ge)];ke&&(I[ke.charCodeAt(0)]=!0)}},"calculateGlyphDependencies"),Fi.prototype.populate=t(function(C,I,V){var J=this.layers[0],ue=J.layout,ge=ue.get("text-font"),ke=ue.get("text-field"),Pe=ue.get("icon-image"),Oe=(ke.value.kind!=="constant"||ke.value.value instanceof Qo&&!ke.value.value.isEmpty()||ke.value.value.toString().length>0)&&(ge.value.kind!=="constant"||ge.value.value.length>0),Ve=Pe.value.kind!=="constant"||!!Pe.value.value||Object.keys(Pe.parameters).length>0,lt=ue.get("symbol-sort-key");if(this.features=[],!(!Oe&&!Ve)){for(var At=I.iconDependencies,mt=I.glyphDependencies,Bt=I.availableImages,Kt=new On(this.zoom),yr=0,lr=C;yr<lr.length;yr+=1){var Rr=lr[yr],_r=Rr.feature,Cr=Rr.id,qr=Rr.index,ta=Rr.sourceLayerIndex,ga=J._featureFilter.needGeometry,da={type:_r.type,id:Cr,properties:_r.properties,geometry:ga?Wn(_r):[]};if(!!J._featureFilter.filter(Kt,da,V)){ga||(da.geometry=Wn(_r));var an=void 0;if(Oe){var Ha=J.getValueAndResolveTokens("text-field",da,V,Bt),Xa=Qo.factory(Ha);Bye(Xa)&&(this.hasRTLText=!0),(!this.hasRTLText||si()==="unavailable"||this.hasRTLText&&Fn.isParsed())&&(an=Hge(Xa,J,da))}var Mn=void 0;if(Ve){var Qa=J.getValueAndResolveTokens("icon-image",da,V,Bt);Qa instanceof ws?Mn=Qa:Mn=ws.fromString(Qa)}if(!(!an&&!Mn)){var rn=this.sortFeaturesByKey?lt.evaluate(da,{},V):void 0,Vn={id:Cr,text:an,icon:Mn,index:qr,sourceLayerIndex:ta,geometry:Wn(_r),properties:_r.properties,type:zye[_r.type],sortKey:rn};if(this.features.push(Vn),Mn&&(At[Mn.name]=!0),an){var An=ge.evaluate(da,{},V).join(","),ci=ue.get("text-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(yf.vertical)>=0;for(var Bi=0,hi=an.sections;Bi<hi.length;Bi+=1){var vi=hi[Bi];if(vi.image)At[vi.image.name]=!0;else{var ui=or(an.toString()),Zi=vi.fontStack||An,no=mt[Zi]=mt[Zi]||{};this.calculateGlyphDependencies(vi.text,no,ci,this.allowVerticalPlacement,ui)}}}}}}ue.get("symbol-placement")==="line"&&(this.features=$ge(this.features)),this.sortFeaturesByKey&&this.features.sort(function(qo,Zo){return qo.sortKey-Zo.sortKey})}},"populate"),Fi.prototype.update=t(function(C,I,V){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,I,this.layers,V),this.icon.programConfigurations.updatePaintArrays(C,I,this.layers,V))},"update"),Fi.prototype.isEmpty=t(function(){return this.symbolInstances.length===0&&!this.hasRTLText},"isEmpty"),Fi.prototype.uploadPending=t(function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},"uploadPending"),Fi.prototype.upload=t(function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},"upload"),Fi.prototype.destroyDebugData=t(function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},"destroyDebugData"),Fi.prototype.destroy=t(function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},"destroy"),Fi.prototype.addToLineVertexArray=t(function(C,I){var V=this.lineVertexArray.length;if(C.segment!==void 0){for(var J=C.dist(I[C.segment+1]),ue=C.dist(I[C.segment]),ge={},ke=C.segment+1;ke<I.length;ke++)ge[ke]={x:I[ke].x,y:I[ke].y,tileUnitDistanceFromAnchor:J},ke<I.length-1&&(J+=I[ke+1].dist(I[ke]));for(var Pe=C.segment||0;Pe>=0;Pe--)ge[Pe]={x:I[Pe].x,y:I[Pe].y,tileUnitDistanceFromAnchor:ue},Pe>0&&(ue+=I[Pe-1].dist(I[Pe]));for(var Oe=0;Oe<I.length;Oe++){var Ve=ge[Oe];this.lineVertexArray.emplaceBack(Ve.x,Ve.y,Ve.tileUnitDistanceFromAnchor)}}return{lineStartIndex:V,lineLength:this.lineVertexArray.length-V}},"addToLineVertexArray"),Fi.prototype.addSymbols=t(function(C,I,V,J,ue,ge,ke,Pe,Oe,Ve,lt,At){for(var mt=C.indexArray,Bt=C.layoutVertexArray,Kt=C.segments.prepareSegment(4*I.length,Bt,mt,ge.sortKey),yr=this.glyphOffsetArray.length,lr=Kt.vertexLength,Rr=this.allowVerticalPlacement&&ke===yf.vertical?Math.PI/2:0,_r=ge.text&&ge.text.sections,Cr=0;Cr<I.length;Cr++){var qr=I[Cr],ta=qr.tl,ga=qr.tr,da=qr.bl,an=qr.br,Ha=qr.tex,Xa=qr.pixelOffsetTL,Mn=qr.pixelOffsetBR,Qa=qr.minFontScaleX,rn=qr.minFontScaleY,Vn=qr.glyphOffset,An=qr.isSDF,ci=qr.sectionIndex,Bi=Kt.vertexLength,hi=Vn[1];Vx(Bt,Pe.x,Pe.y,ta.x,hi+ta.y,Ha.x,Ha.y,V,An,Xa.x,Xa.y,Qa,rn),Vx(Bt,Pe.x,Pe.y,ga.x,hi+ga.y,Ha.x+Ha.w,Ha.y,V,An,Mn.x,Xa.y,Qa,rn),Vx(Bt,Pe.x,Pe.y,da.x,hi+da.y,Ha.x,Ha.y+Ha.h,V,An,Xa.x,Mn.y,Qa,rn),Vx(Bt,Pe.x,Pe.y,an.x,hi+an.y,Ha.x+Ha.w,Ha.y+Ha.h,V,An,Mn.x,Mn.y,Qa,rn),K3(C.dynamicLayoutVertexArray,Pe,Rr),mt.emplaceBack(Bi,Bi+1,Bi+2),mt.emplaceBack(Bi+1,Bi+2,Bi+3),Kt.vertexLength+=4,Kt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vn[0]),(Cr===I.length-1||ci!==I[Cr+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(Bt.length,ge,ge.index,{},At,_r&&_r[ci])}C.placedSymbolArray.emplaceBack(Pe.x,Pe.y,yr,this.glyphOffsetArray.length-yr,lr,Oe,Ve,Pe.segment,V?V[0]:0,V?V[1]:0,J[0],J[1],ke,0,!1,0,lt)},"addSymbols"),Fi.prototype._addCollisionDebugVertex=t(function(C,I,V,J,ue,ge){return I.emplaceBack(0,0),C.emplaceBack(V.x,V.y,J,ue,Math.round(ge.x),Math.round(ge.y))},"_addCollisionDebugVertex"),Fi.prototype.addCollisionDebugVertices=t(function(C,I,V,J,ue,ge,ke){var Pe=ue.segments.prepareSegment(4,ue.layoutVertexArray,ue.indexArray),Oe=Pe.vertexLength,Ve=ue.layoutVertexArray,lt=ue.collisionVertexArray,At=ke.anchorX,mt=ke.anchorY;this._addCollisionDebugVertex(Ve,lt,ge,At,mt,new v(C,I)),this._addCollisionDebugVertex(Ve,lt,ge,At,mt,new v(V,I)),this._addCollisionDebugVertex(Ve,lt,ge,At,mt,new v(V,J)),this._addCollisionDebugVertex(Ve,lt,ge,At,mt,new v(C,J)),Pe.vertexLength+=4;var Bt=ue.indexArray;Bt.emplaceBack(Oe,Oe+1),Bt.emplaceBack(Oe+1,Oe+2),Bt.emplaceBack(Oe+2,Oe+3),Bt.emplaceBack(Oe+3,Oe),Pe.primitiveLength+=4},"addCollisionDebugVertices"),Fi.prototype.addDebugCollisionBoxes=t(function(C,I,V,J){for(var ue=C;ue<I;ue++){var ge=this.collisionBoxArray.get(ue),ke=ge.x1,Pe=ge.y1,Oe=ge.x2,Ve=ge.y2;this.addCollisionDebugVertices(ke,Pe,Oe,Ve,J?this.textCollisionBox:this.iconCollisionBox,ge.anchorPoint,V)}},"addDebugCollisionBoxes"),Fi.prototype.generateCollisionDebugBuffers=t(function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sm(va,XB.members,Po),this.iconCollisionBox=new sm(va,XB.members,Po);for(var C=0;C<this.symbolInstances.length;C++){var I=this.symbolInstances.get(C);this.addDebugCollisionBoxes(I.textBoxStartIndex,I.textBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.iconBoxStartIndex,I.iconBoxEndIndex,I,!1),this.addDebugCollisionBoxes(I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I,!1)}},"generateCollisionDebugBuffers"),Fi.prototype._deserializeCollisionBoxesForSymbol=t(function(C,I,V,J,ue,ge,ke,Pe,Oe){for(var Ve={},lt=I;lt<V;lt++){var At=C.get(lt);Ve.textBox={x1:At.x1,y1:At.y1,x2:At.x2,y2:At.y2,anchorPointX:At.anchorPointX,anchorPointY:At.anchorPointY},Ve.textFeatureIndex=At.featureIndex;break}for(var mt=J;mt<ue;mt++){var Bt=C.get(mt);Ve.verticalTextBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},Ve.verticalTextFeatureIndex=Bt.featureIndex;break}for(var Kt=ge;Kt<ke;Kt++){var yr=C.get(Kt);Ve.iconBox={x1:yr.x1,y1:yr.y1,x2:yr.x2,y2:yr.y2,anchorPointX:yr.anchorPointX,anchorPointY:yr.anchorPointY},Ve.iconFeatureIndex=yr.featureIndex;break}for(var lr=Pe;lr<Oe;lr++){var Rr=C.get(lr);Ve.verticalIconBox={x1:Rr.x1,y1:Rr.y1,x2:Rr.x2,y2:Rr.y2,anchorPointX:Rr.anchorPointX,anchorPointY:Rr.anchorPointY},Ve.verticalIconFeatureIndex=Rr.featureIndex;break}return Ve},"_deserializeCollisionBoxesForSymbol"),Fi.prototype.deserializeCollisionBoxes=t(function(C){this.collisionArrays=[];for(var I=0;I<this.symbolInstances.length;I++){var V=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,V.textBoxStartIndex,V.textBoxEndIndex,V.verticalTextBoxStartIndex,V.verticalTextBoxEndIndex,V.iconBoxStartIndex,V.iconBoxEndIndex,V.verticalIconBoxStartIndex,V.verticalIconBoxEndIndex))}},"deserializeCollisionBoxes"),Fi.prototype.hasTextData=t(function(){return this.text.segments.get().length>0},"hasTextData"),Fi.prototype.hasIconData=t(function(){return this.icon.segments.get().length>0},"hasIconData"),Fi.prototype.hasDebugData=t(function(){return this.textCollisionBox&&this.iconCollisionBox},"hasDebugData"),Fi.prototype.hasTextCollisionBoxData=t(function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},"hasTextCollisionBoxData"),Fi.prototype.hasIconCollisionBoxData=t(function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},"hasIconCollisionBoxData"),Fi.prototype.addIndicesForPlacedSymbol=t(function(C,I){for(var V=C.placedSymbolArray.get(I),J=V.vertexStartIndex+V.numGlyphs*4,ue=V.vertexStartIndex;ue<J;ue+=4)C.indexArray.emplaceBack(ue,ue+1,ue+2),C.indexArray.emplaceBack(ue+1,ue+2,ue+3)},"addIndicesForPlacedSymbol"),Fi.prototype.getSortedSymbolIndexes=t(function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var I=Math.sin(C),V=Math.cos(C),J=[],ue=[],ge=[],ke=0;ke<this.symbolInstances.length;++ke){ge.push(ke);var Pe=this.symbolInstances.get(ke);J.push(Math.round(I*Pe.anchorX+V*Pe.anchorY)|0),ue.push(Pe.featureIndex)}return ge.sort(function(Oe,Ve){return J[Oe]-J[Ve]||ue[Ve]-ue[Oe]}),ge},"getSortedSymbolIndexes"),Fi.prototype.addToSortKeyRanges=t(function(C,I){var V=this.sortKeyRanges[this.sortKeyRanges.length-1];V&&V.sortKey===I?V.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:C,symbolInstanceEnd:C+1})},"addToSortKeyRanges"),Fi.prototype.sortFeatures=t(function(C){var I=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var V=0,J=this.symbolInstanceIndexes;V<J.length;V+=1){var ue=J[V],ge=this.symbolInstances.get(ue);this.featureSortOrder.push(ge.featureIndex),[ge.rightJustifiedTextSymbolIndex,ge.centerJustifiedTextSymbolIndex,ge.leftJustifiedTextSymbolIndex].forEach(function(ke,Pe,Oe){ke>=0&&Oe.indexOf(ke)===Pe&&I.addIndicesForPlacedSymbol(I.text,ke)}),ge.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ge.verticalPlacedTextSymbolIndex),ge.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ge.placedIconSymbolIndex),ge.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ge.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},"sortFeatures"),Le("SymbolBucket",Fi,{omit:["layers","collisionBoxArray","features","compareText"]}),Fi.MAX_GLYPHS=65535,Fi.addDynamicAttributes=K3;function Oye(E,C){return C.replace(/{([^{}]+)}/g,function(I,V){return V in E?String(E[V]):""})}t(Oye,"resolveTokens");var Nye=new Qr({"symbol-placement":new cr(Wr.layout_symbol["symbol-placement"]),"symbol-spacing":new cr(Wr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new cr(Wr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new br(Wr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new cr(Wr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new cr(Wr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new cr(Wr.layout_symbol["icon-ignore-placement"]),"icon-optional":new cr(Wr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new cr(Wr.layout_symbol["icon-rotation-alignment"]),"icon-size":new br(Wr.layout_symbol["icon-size"]),"icon-text-fit":new cr(Wr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new cr(Wr.layout_symbol["icon-text-fit-padding"]),"icon-image":new br(Wr.layout_symbol["icon-image"]),"icon-rotate":new br(Wr.layout_symbol["icon-rotate"]),"icon-padding":new cr(Wr.layout_symbol["icon-padding"]),"icon-keep-upright":new cr(Wr.layout_symbol["icon-keep-upright"]),"icon-offset":new br(Wr.layout_symbol["icon-offset"]),"icon-anchor":new br(Wr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new cr(Wr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new cr(Wr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new cr(Wr.layout_symbol["text-rotation-alignment"]),"text-field":new br(Wr.layout_symbol["text-field"]),"text-font":new br(Wr.layout_symbol["text-font"]),"text-size":new br(Wr.layout_symbol["text-size"]),"text-max-width":new br(Wr.layout_symbol["text-max-width"]),"text-line-height":new cr(Wr.layout_symbol["text-line-height"]),"text-letter-spacing":new br(Wr.layout_symbol["text-letter-spacing"]),"text-justify":new br(Wr.layout_symbol["text-justify"]),"text-radial-offset":new br(Wr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new cr(Wr.layout_symbol["text-variable-anchor"]),"text-anchor":new br(Wr.layout_symbol["text-anchor"]),"text-max-angle":new cr(Wr.layout_symbol["text-max-angle"]),"text-writing-mode":new cr(Wr.layout_symbol["text-writing-mode"]),"text-rotate":new br(Wr.layout_symbol["text-rotate"]),"text-padding":new cr(Wr.layout_symbol["text-padding"]),"text-keep-upright":new cr(Wr.layout_symbol["text-keep-upright"]),"text-transform":new br(Wr.layout_symbol["text-transform"]),"text-offset":new br(Wr.layout_symbol["text-offset"]),"text-allow-overlap":new cr(Wr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new cr(Wr.layout_symbol["text-ignore-placement"]),"text-optional":new cr(Wr.layout_symbol["text-optional"])}),qye=new Qr({"icon-opacity":new br(Wr.paint_symbol["icon-opacity"]),"icon-color":new br(Wr.paint_symbol["icon-color"]),"icon-halo-color":new br(Wr.paint_symbol["icon-halo-color"]),"icon-halo-width":new br(Wr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new br(Wr.paint_symbol["icon-halo-blur"]),"icon-translate":new cr(Wr.paint_symbol["icon-translate"]),"icon-translate-anchor":new cr(Wr.paint_symbol["icon-translate-anchor"]),"text-opacity":new br(Wr.paint_symbol["text-opacity"]),"text-color":new br(Wr.paint_symbol["text-color"],{runtimeType:wl,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new br(Wr.paint_symbol["text-halo-color"]),"text-halo-width":new br(Wr.paint_symbol["text-halo-width"]),"text-halo-blur":new br(Wr.paint_symbol["text-halo-blur"]),"text-translate":new cr(Wr.paint_symbol["text-translate"]),"text-translate-anchor":new cr(Wr.paint_symbol["text-translate-anchor"])}),J3={paint:qye,layout:Nye},ig=t(function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:Jo,this.defaultValue=C},"FormatSectionOverride");ig.prototype.evaluate=t(function(C){if(C.formattedSection){var I=this.defaultValue.property.overrides;if(I&&I.hasOverride(C.formattedSection))return I.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},"evaluate"),ig.prototype.eachChild=t(function(C){if(!this.defaultValue.isConstant()){var I=this.defaultValue.value;C(I._styleExpression.expression)}},"eachChild"),ig.prototype.outputDefined=t(function(){return!1},"outputDefined"),ig.prototype.serialize=t(function(){return null},"serialize"),Le("FormatSectionOverride",ig,{omit:["defaultValue"]});var Uye=function(E){function C(I){E.call(this,I,J3)}return t(C,"SymbolStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=t(function(V,J){if(E.prototype.recalculate.call(this,V,J),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var ue=this.layout.get("text-writing-mode");if(ue){for(var ge=[],ke=0,Pe=ue;ke<Pe.length;ke+=1){var Oe=Pe[ke];ge.indexOf(Oe)<0&&ge.push(Oe)}this.layout._values["text-writing-mode"]=ge}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},"recalculate"),C.prototype.getValueAndResolveTokens=t(function(V,J,ue,ge){var ke=this.layout.get(V).evaluate(J,{},ue,ge),Pe=this._unevaluatedLayout._values[V];return!Pe.isDataDriven()&&!pc(Pe.value)&&ke?Oye(J.properties,ke):ke},"getValueAndResolveTokens"),C.prototype.createBucket=t(function(V){return new Fi(V)},"createBucket"),C.prototype.queryRadius=t(function(){return 0},"queryRadius"),C.prototype.queryIntersectsFeature=t(function(){return!1},"queryIntersectsFeature"),C.prototype._setPaintOverrides=t(function(){for(var V=0,J=J3.paint.overridableProperties;V<J.length;V+=1){var ue=J[V];if(!!C.hasPaintOverride(this.layout,ue)){var ge=this.paint.get(ue),ke=new ig(ge),Pe=new As(ke,ge.property.specification),Oe=null;ge.value.kind==="constant"||ge.value.kind==="source"?Oe=new nu("source",Pe):Oe=new Ss("composite",Pe,ge.value.zoomStops,ge.value._interpolationType),this.paint._values[ue]=new Yt(ge.property,Oe,ge.parameters)}}},"_setPaintOverrides"),C.prototype._handleOverridablePaintPropertyUpdate=t(function(V,J,ue){return!this.layout||J.isDataDriven()||ue.isDataDriven()?!1:C.hasPaintOverride(this.layout,V)},"_handleOverridablePaintPropertyUpdate"),C.hasPaintOverride=t(function(V,J){var ue=V.get("text-field"),ge=J3.paint.properties[J],ke=!1,Pe=t(function(lt){for(var At=0,mt=lt;At<mt.length;At+=1){var Bt=mt[At];if(ge.overrides&&ge.overrides.hasOverride(Bt)){ke=!0;return}}},"checkSections");if(ue.value.kind==="constant"&&ue.value.value instanceof Qo)Pe(ue.value.value.sections);else if(ue.value.kind==="source"){var Oe=t(function(lt){if(!ke)if(lt instanceof il&&Ao(lt.value)===ql){var At=lt.value;Pe(At.sections)}else lt instanceof Ql?Pe(lt.sections):lt.eachChild(Oe)},"checkExpression"),Ve=ue.value;Ve._styleExpression&&Oe(Ve._styleExpression.expression)}return ke},"hasPaintOverride"),C}(ka),Hye=new Qr({"background-color":new cr(Wr.paint_background["background-color"]),"background-pattern":new Pr(Wr.paint_background["background-pattern"]),"background-opacity":new cr(Wr.paint_background["background-opacity"])}),$ye={paint:Hye},Vye=function(E){function C(I){E.call(this,I,$ye)}return t(C,"BackgroundStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ka),Gye=new Qr({"raster-opacity":new cr(Wr.paint_raster["raster-opacity"]),"raster-hue-rotate":new cr(Wr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new cr(Wr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new cr(Wr.paint_raster["raster-brightness-max"]),"raster-saturation":new cr(Wr.paint_raster["raster-saturation"]),"raster-contrast":new cr(Wr.paint_raster["raster-contrast"]),"raster-resampling":new cr(Wr.paint_raster["raster-resampling"]),"raster-fade-duration":new cr(Wr.paint_raster["raster-fade-duration"])}),jye={paint:Gye},Yye=function(E){function C(I){E.call(this,I,jye)}return t(C,"RasterStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ka);function Wye(E){var C=[],I=E.id;return I===void 0&&C.push({message:"layers."+I+': missing required property "id"'}),E.render===void 0&&C.push({message:"layers."+I+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&C.push({message:"layers."+I+': property "renderingMode" must be either "2d" or "3d"'}),C}t(Wye,"validateCustomStyleLayer");var Xye=function(E){function C(I){E.call(this,I,{}),this.implementation=I}return t(C,"CustomStyleLayer"),E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.is3D=t(function(){return this.implementation.renderingMode==="3d"},"is3D"),C.prototype.hasOffscreenPass=t(function(){return this.implementation.prerender!==void 0},"hasOffscreenPass"),C.prototype.recalculate=t(function(){},"recalculate"),C.prototype.updateTransitions=t(function(){},"updateTransitions"),C.prototype.hasTransition=t(function(){},"hasTransition"),C.prototype.serialize=t(function(){},"serialize"),C.prototype.onAdd=t(function(V){this.implementation.onAdd&&this.implementation.onAdd(V,V.painter.context.gl)},"onAdd"),C.prototype.onRemove=t(function(V){this.implementation.onRemove&&this.implementation.onRemove(V,V.painter.context.gl)},"onRemove"),C}(ka),Zye={circle:S0e,heatmap:C0e,hillshade:P0e,fill:age,"fill-extrusion":Tge,line:Fge,symbol:Uye,background:Vye,raster:Yye};function Kye(E){return E.type==="custom"?new Xye(E):new Zye[E.type](E)}t(Kye,"createStyleLayer");var wO=self.HTMLImageElement,TO=self.HTMLCanvasElement,AO=self.HTMLVideoElement,SO=self.ImageData,Gx=self.ImageBitmap,Up=t(function(C,I,V,J){this.context=C,this.format=V,this.texture=C.gl.createTexture(),this.update(I,J)},"Texture");Up.prototype.update=t(function(C,I,V){var J=C.width,ue=C.height,ge=(!this.size||this.size[0]!==J||this.size[1]!==ue)&&!V,ke=this,Pe=ke.context,Oe=Pe.gl;if(this.useMipmap=Boolean(I&&I.useMipmap),Oe.bindTexture(Oe.TEXTURE_2D,this.texture),Pe.pixelStoreUnpackFlipY.set(!1),Pe.pixelStoreUnpack.set(1),Pe.pixelStoreUnpackPremultiplyAlpha.set(this.format===Oe.RGBA&&(!I||I.premultiply!==!1)),ge)this.size=[J,ue],C instanceof wO||C instanceof TO||C instanceof AO||C instanceof SO||Gx&&C instanceof Gx?Oe.texImage2D(Oe.TEXTURE_2D,0,this.format,this.format,Oe.UNSIGNED_BYTE,C):Oe.texImage2D(Oe.TEXTURE_2D,0,this.format,J,ue,0,this.format,Oe.UNSIGNED_BYTE,C.data);else{var Ve=V||{x:0,y:0},lt=Ve.x,At=Ve.y;C instanceof wO||C instanceof TO||C instanceof AO||C instanceof SO||Gx&&C instanceof Gx?Oe.texSubImage2D(Oe.TEXTURE_2D,0,lt,At,Oe.RGBA,Oe.UNSIGNED_BYTE,C):Oe.texSubImage2D(Oe.TEXTURE_2D,0,lt,At,J,ue,Oe.RGBA,Oe.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Oe.generateMipmap(Oe.TEXTURE_2D)},"update"),Up.prototype.bind=t(function(C,I,V){var J=this,ue=J.context,ge=ue.gl;ge.bindTexture(ge.TEXTURE_2D,this.texture),V===ge.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(V=ge.LINEAR),C!==this.filter&&(ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MAG_FILTER,C),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MIN_FILTER,V||C),this.filter=C),I!==this.wrap&&(ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_S,I),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_T,I),this.wrap=I)},"bind"),Up.prototype.isSizePowerOfTwo=t(function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},"isSizePowerOfTwo"),Up.prototype.destroy=t(function(){var C=this.context,I=C.gl;I.deleteTexture(this.texture),this.texture=null},"destroy");var Q3=t(function(C){var I=this;this._callback=C,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){I._triggered=!1,I._callback()})},"ThrottledInvoker");Q3.prototype.trigger=t(function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},"trigger"),Q3.prototype.remove=t(function(){delete this._channel,this._callback=function(){}},"remove");var og=t(function(C,I,V){this.target=C,this.parent=I,this.mapId=V,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},P(["receive","process"],this),this.invoker=new Q3(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=G()?C:self},"Actor");og.prototype.send=t(function(C,I,V,J,ue){var ge=this;ue===void 0&&(ue=!1);var ke=Math.round(Math.random()*1e18).toString(36).substring(0,10);V&&(this.callbacks[ke]=V);var Pe=ee(this.globalScope)?void 0:[];return this.target.postMessage({id:ke,type:C,hasCallback:!!V,targetMapId:J,mustQueue:ue,sourceMapId:this.mapId,data:yt(I,Pe)},Pe),{cancel:function(){V&&delete ge.callbacks[ke],ge.target.postMessage({id:ke,type:"<cancel>",targetMapId:J,sourceMapId:ge.mapId})}}},"send"),og.prototype.receive=t(function(C){var I=C.data,V=I.id;if(!!V&&!(I.targetMapId&&this.mapId!==I.targetMapId))if(I.type==="<cancel>"){delete this.tasks[V];var J=this.cancelCallbacks[V];delete this.cancelCallbacks[V],J&&J()}else G()||I.mustQueue?(this.tasks[V]=I,this.taskQueue.push(V),this.invoker.trigger()):this.processTask(V,I)},"receive"),og.prototype.process=t(function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),I=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),I&&this.processTask(C,I)}},"process"),og.prototype.processTask=t(function(C,I){var V=this;if(I.type==="<response>"){var J=this.callbacks[C];delete this.callbacks[C],J&&(I.error?J(gt(I.error)):J(null,gt(I.data)))}else{var ue=!1,ge=ee(this.globalScope)?void 0:[],ke=I.hasCallback?function(At,mt){ue=!0,delete V.cancelCallbacks[C],V.target.postMessage({id:C,type:"<response>",sourceMapId:V.mapId,error:At?yt(At):null,data:yt(mt,ge)},ge)}:function(At){ue=!0},Pe=null,Oe=gt(I.data);if(this.parent[I.type])Pe=this.parent[I.type](I.sourceMapId,Oe,ke);else if(this.parent.getWorkerSource){var Ve=I.type.split("."),lt=this.parent.getWorkerSource(I.sourceMapId,Ve[0],Oe.source);Pe=lt[Ve[1]](Oe,ke)}else ke(new Error("Could not find function "+I.type));!ue&&Pe&&Pe.cancel&&(this.cancelCallbacks[C]=Pe.cancel)}},"processTask"),og.prototype.remove=t(function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)},"remove");function Jye(E,C,I){C=Math.pow(2,I)-C-1;var V=MO(E*256,C*256,I),J=MO((E+1)*256,(C+1)*256,I);return V[0]+","+V[1]+","+J[0]+","+J[1]}t(Jye,"getTileBBox");function MO(E,C,I){var V=2*Math.PI*6378137/256/Math.pow(2,I),J=E*V-2*Math.PI*6378137/2,ue=C*V-2*Math.PI*6378137/2;return[J,ue]}t(MO,"getMercCoords");var fs=t(function(C,I){C&&(I?this.setSouthWest(C).setNorthEast(I):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))},"LngLatBounds");fs.prototype.setNorthEast=t(function(C){return this._ne=C instanceof xo?new xo(C.lng,C.lat):xo.convert(C),this},"setNorthEast"),fs.prototype.setSouthWest=t(function(C){return this._sw=C instanceof xo?new xo(C.lng,C.lat):xo.convert(C),this},"setSouthWest"),fs.prototype.extend=t(function(C){var I=this._sw,V=this._ne,J,ue;if(C instanceof xo)J=C,ue=C;else if(C instanceof fs){if(J=C._sw,ue=C._ne,!J||!ue)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var ge=C;return this.extend(fs.convert(ge))}else{var ke=C;return this.extend(xo.convert(ke))}return this}return!I&&!V?(this._sw=new xo(J.lng,J.lat),this._ne=new xo(ue.lng,ue.lat)):(I.lng=Math.min(J.lng,I.lng),I.lat=Math.min(J.lat,I.lat),V.lng=Math.max(ue.lng,V.lng),V.lat=Math.max(ue.lat,V.lat)),this},"extend"),fs.prototype.getCenter=t(function(){return new xo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},"getCenter"),fs.prototype.getSouthWest=t(function(){return this._sw},"getSouthWest"),fs.prototype.getNorthEast=t(function(){return this._ne},"getNorthEast"),fs.prototype.getNorthWest=t(function(){return new xo(this.getWest(),this.getNorth())},"getNorthWest"),fs.prototype.getSouthEast=t(function(){return new xo(this.getEast(),this.getSouth())},"getSouthEast"),fs.prototype.getWest=t(function(){return this._sw.lng},"getWest"),fs.prototype.getSouth=t(function(){return this._sw.lat},"getSouth"),fs.prototype.getEast=t(function(){return this._ne.lng},"getEast"),fs.prototype.getNorth=t(function(){return this._ne.lat},"getNorth"),fs.prototype.toArray=t(function(){return[this._sw.toArray(),this._ne.toArray()]},"toArray"),fs.prototype.toString=t(function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},"toString"),fs.prototype.isEmpty=t(function(){return!(this._sw&&this._ne)},"isEmpty"),fs.prototype.contains=t(function(C){var I=xo.convert(C),V=I.lng,J=I.lat,ue=this._sw.lat<=J&&J<=this._ne.lat,ge=this._sw.lng<=V&&V<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ge=this._sw.lng>=V&&V>=this._ne.lng),ue&&ge},"contains"),fs.convert=t(function(C){return!C||C instanceof fs?C:new fs(C)},"convert");var kO=63710088e-1,xo=t(function(C,I){if(isNaN(C)||isNaN(I))throw new Error("Invalid LngLat object: ("+C+", "+I+")");if(this.lng=+C,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")},"LngLat");xo.prototype.wrap=t(function(){return new xo(y(this.lng,-180,180),this.lat)},"wrap$1"),xo.prototype.toArray=t(function(){return[this.lng,this.lat]},"toArray"),xo.prototype.toString=t(function(){return"LngLat("+this.lng+", "+this.lat+")"},"toString"),xo.prototype.distanceTo=t(function(C){var I=Math.PI/180,V=this.lat*I,J=C.lat*I,ue=Math.sin(V)*Math.sin(J)+Math.cos(V)*Math.cos(J)*Math.cos((C.lng-this.lng)*I),ge=kO*Math.acos(Math.min(ue,1));return ge},"distanceTo"),xo.prototype.toBounds=t(function(C){C===void 0&&(C=0);var I=40075017,V=360*C/I,J=V/Math.cos(Math.PI/180*this.lat);return new fs(new xo(this.lng-J,this.lat-V),new xo(this.lng+J,this.lat+V))},"toBounds"),xo.convert=t(function(C){if(C instanceof xo)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new xo(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new xo(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},"convert");var EO=2*Math.PI*kO;function CO(E){return EO*Math.cos(E*Math.PI/180)}t(CO,"circumferenceAtLatitude");function LO(E){return(180+E)/360}t(LO,"mercatorXfromLng$1");function RO(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}t(RO,"mercatorYfromLat$1");function PO(E,C){return E/CO(C)}t(PO,"mercatorZfromAltitude");function Qye(E){return E*360-180}t(Qye,"lngFromMercatorX");function eT(E){var C=180-E*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}t(eT,"latFromMercatorY");function eme(E,C){return E*CO(eT(C))}t(eme,"altitudeFromMercatorZ");function tme(E){return 1/Math.cos(E*Math.PI/180)}t(tme,"mercatorScale");var Hp=t(function(C,I,V){V===void 0&&(V=0),this.x=+C,this.y=+I,this.z=+V},"MercatorCoordinate");Hp.fromLngLat=t(function(C,I){I===void 0&&(I=0);var V=xo.convert(C);return new Hp(LO(V.lng),RO(V.lat),PO(I,V.lat))},"fromLngLat"),Hp.prototype.toLngLat=t(function(){return new xo(Qye(this.x),eT(this.y))},"toLngLat"),Hp.prototype.toAltitude=t(function(){return eme(this.z,this.y)},"toAltitude"),Hp.prototype.meterInMercatorCoordinateUnits=t(function(){return 1/EO*tme(eT(this.y))},"meterInMercatorCoordinateUnits");var $p=t(function(C,I,V){this.z=C,this.x=I,this.y=V,this.key=lm(0,C,C,I,V)},"CanonicalTileID");$p.prototype.equals=t(function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},"equals"),$p.prototype.url=t(function(C,I){var V=Jye(this.x,this.y,this.z),J=rme(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(I==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",J).replace("{bbox-epsg-3857}",V)},"url"),$p.prototype.getTilePoint=t(function(C){var I=Math.pow(2,this.z);return new v((C.x*I-this.x)*Nr,(C.y*I-this.y)*Nr)},"getTilePoint"),$p.prototype.toString=t(function(){return this.z+"/"+this.x+"/"+this.y},"toString");var DO=t(function(C,I){this.wrap=C,this.canonical=I,this.key=lm(C,I.z,I.z,I.x,I.y)},"UnwrappedTileID"),cs=t(function(C,I,V,J,ue){this.overscaledZ=C,this.wrap=I,this.canonical=new $p(V,+J,+ue),this.key=lm(I,C,V,J,ue)},"OverscaledTileID");cs.prototype.equals=t(function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},"equals"),cs.prototype.scaledTo=t(function(C){var I=this.canonical.z-C;return C>this.canonical.z?new cs(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new cs(C,this.wrap,C,this.canonical.x>>I,this.canonical.y>>I)},"scaledTo"),cs.prototype.calculateScaledKey=t(function(C,I){var V=this.canonical.z-C;return C>this.canonical.z?lm(this.wrap*+I,C,this.canonical.z,this.canonical.x,this.canonical.y):lm(this.wrap*+I,C,C,this.canonical.x>>V,this.canonical.y>>V)},"calculateScaledKey"),cs.prototype.isChildOf=t(function(C){if(C.wrap!==this.wrap)return!1;var I=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>I&&C.canonical.y===this.canonical.y>>I},"isChildOf"),cs.prototype.children=t(function(C){if(this.overscaledZ>=C)return[new cs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var I=this.canonical.z+1,V=this.canonical.x*2,J=this.canonical.y*2;return[new cs(I,this.wrap,I,V,J),new cs(I,this.wrap,I,V+1,J),new cs(I,this.wrap,I,V,J+1),new cs(I,this.wrap,I,V+1,J+1)]},"children"),cs.prototype.isLessThan=t(function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},"isLessThan"),cs.prototype.wrapped=t(function(){return new cs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},"wrapped"),cs.prototype.unwrapTo=t(function(C){return new cs(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},"unwrapTo"),cs.prototype.overscaleFactor=t(function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},"overscaleFactor"),cs.prototype.toUnwrapped=t(function(){return new DO(this.wrap,this.canonical)},"toUnwrapped"),cs.prototype.toString=t(function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},"toString"),cs.prototype.getTilePoint=t(function(C){return this.canonical.getTilePoint(new Hp(C.x-this.wrap,C.y))},"getTilePoint");function lm(E,C,I,V,J){E*=2,E<0&&(E=E*-1-1);var ue=1<<I;return(ue*ue*E+ue*J+V).toString(36)+I.toString(36)+C.toString(36)}t(lm,"calculateKey");function rme(E,C,I){for(var V="",J,ue=E;ue>0;ue--)J=1<<ue-1,V+=(C&J?1:0)+(I&J?2:0);return V}t(rme,"getQuadkey"),Le("CanonicalTileID",$p),Le("OverscaledTileID",cs,{omit:["posMatrix"]});var Jv=t(function(C,I,V){if(this.uid=C,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(V&&V!=="mapbox"&&V!=="terrarium")return q('"'+V+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=I.height;var J=this.dim=I.height-2;this.data=new Uint32Array(I.data.buffer),this.encoding=V||"mapbox";for(var ue=0;ue<J;ue++)this.data[this._idx(-1,ue)]=this.data[this._idx(0,ue)],this.data[this._idx(J,ue)]=this.data[this._idx(J-1,ue)],this.data[this._idx(ue,-1)]=this.data[this._idx(ue,0)],this.data[this._idx(ue,J)]=this.data[this._idx(ue,J-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(J,-1)]=this.data[this._idx(J-1,0)],this.data[this._idx(-1,J)]=this.data[this._idx(0,J-1)],this.data[this._idx(J,J)]=this.data[this._idx(J-1,J-1)]},"DEMData");Jv.prototype.get=t(function(C,I){var V=new Uint8Array(this.data.buffer),J=this._idx(C,I)*4,ue=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return ue(V[J],V[J+1],V[J+2])},"get"),Jv.prototype.getUnpackVector=t(function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},"getUnpackVector"),Jv.prototype._idx=t(function(C,I){if(C<-1||C>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(C+1)},"_idx"),Jv.prototype._unpackMapbox=t(function(C,I,V){return(C*256*256+I*256+V)/10-1e4},"_unpackMapbox"),Jv.prototype._unpackTerrarium=t(function(C,I,V){return C*256+I+V/256-32768},"_unpackTerrarium"),Jv.prototype.getPixels=t(function(){return new uu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},"getPixels"),Jv.prototype.backfillBorder=t(function(C,I,V){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var J=I*this.dim,ue=I*this.dim+this.dim,ge=V*this.dim,ke=V*this.dim+this.dim;switch(I){case-1:J=ue-1;break;case 1:ue=J+1;break}switch(V){case-1:ge=ke-1;break;case 1:ke=ge+1;break}for(var Pe=-I*this.dim,Oe=-V*this.dim,Ve=ge;Ve<ke;Ve++)for(var lt=J;lt<ue;lt++)this.data[this._idx(lt,Ve)]=C.data[this._idx(lt+Pe,Ve+Oe)]},"backfillBorder"),Le("DEMData",Jv);function ame(E,C){var I={};if(!C)return I;for(var V=t(function(){var ge=ue[J],ke=ge.layerIds.map(function(lt){return C.getLayer(lt)}).filter(Boolean);if(ke.length!==0){ge.layers=ke,ge.stateDependentLayerIds&&(ge.stateDependentLayers=ge.stateDependentLayerIds.map(function(lt){return ke.filter(function(At){return At.id===lt})[0]}));for(var Pe=0,Oe=ke;Pe<Oe.length;Pe+=1){var Ve=Oe[Pe];I[Ve.id]=ge}}},"loop"),J=0,ue=E;J<ue.length;J+=1)V();return I}t(ame,"deserialize$1");var jx=t(function(C){this._stringToNumber={},this._numberToString=[];for(var I=0;I<C.length;I++){var V=C[I];this._stringToNumber[V]=I,this._numberToString[I]=V}},"DictionaryCoder");jx.prototype.encode=t(function(C){return this._stringToNumber[C]},"encode"),jx.prototype.decode=t(function(C){return this._numberToString[C]},"decode");var Yx=t(function(C,I,V,J,ue){this.type="Feature",this._vectorTileFeature=C,C._z=I,C._x=V,C._y=J,this.properties=C.properties,this.id=ue},"Feature"),tT={geometry:{configurable:!0}};tT.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},tT.geometry.set=function(E){this._geometry=E},Yx.prototype.toJSON=t(function(){var C={geometry:this.geometry};for(var I in this)I==="_geometry"||I==="_vectorTileFeature"||(C[I]=this[I]);return C},"toJSON"),Object.defineProperties(Yx.prototype,tT);var sg=t(function(){this.state={},this.stateChanges={},this.deletedStates={}},"SourceFeatureState");sg.prototype.updateState=t(function(C,I,V){var J=String(I);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][J]=this.stateChanges[C][J]||{},w(this.stateChanges[C][J],V),this.deletedStates[C]===null){this.deletedStates[C]={};for(var ue in this.state[C])ue!==J&&(this.deletedStates[C][ue]=null)}else{var ge=this.deletedStates[C]&&this.deletedStates[C][J]===null;if(ge){this.deletedStates[C][J]={};for(var ke in this.state[C][J])V[ke]||(this.deletedStates[C][J][ke]=null)}else for(var Pe in V){var Oe=this.deletedStates[C]&&this.deletedStates[C][J]&&this.deletedStates[C][J][Pe]===null;Oe&&delete this.deletedStates[C][J][Pe]}}},"updateState"),sg.prototype.removeFeatureState=t(function(C,I,V){var J=this.deletedStates[C]===null;if(!J){var ue=String(I);if(this.deletedStates[C]=this.deletedStates[C]||{},V&&I!==void 0)this.deletedStates[C][ue]!==null&&(this.deletedStates[C][ue]=this.deletedStates[C][ue]||{},this.deletedStates[C][ue][V]=null);else if(I!==void 0){var ge=this.stateChanges[C]&&this.stateChanges[C][ue];if(ge){this.deletedStates[C][ue]={};for(V in this.stateChanges[C][ue])this.deletedStates[C][ue][V]=null}else this.deletedStates[C][ue]=null}else this.deletedStates[C]=null}},"removeFeatureState"),sg.prototype.getState=t(function(C,I){var V=String(I),J=this.state[C]||{},ue=this.stateChanges[C]||{},ge=w({},J[V],ue[V]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var ke=this.deletedStates[C][I];if(ke===null)return{};for(var Pe in ke)delete ge[Pe]}return ge},"getState"),sg.prototype.initializeTileState=t(function(C,I){C.setFeatureState(this.state,I)},"initializeTileState"),sg.prototype.coalesceChanges=t(function(C,I){var V={};for(var J in this.stateChanges){this.state[J]=this.state[J]||{};var ue={};for(var ge in this.stateChanges[J])this.state[J][ge]||(this.state[J][ge]={}),w(this.state[J][ge],this.stateChanges[J][ge]),ue[ge]=this.state[J][ge];V[J]=ue}for(var ke in this.deletedStates){this.state[ke]=this.state[ke]||{};var Pe={};if(this.deletedStates[ke]===null)for(var Oe in this.state[ke])Pe[Oe]={},this.state[ke][Oe]={};else for(var Ve in this.deletedStates[ke]){var lt=this.deletedStates[ke][Ve]===null;if(lt)this.state[ke][Ve]={};else for(var At=0,mt=Object.keys(this.deletedStates[ke][Ve]);At<mt.length;At+=1){var Bt=mt[At];delete this.state[ke][Ve][Bt]}Pe[Ve]=this.state[ke][Ve]}V[ke]=V[ke]||{},w(V[ke],Pe)}if(this.stateChanges={},this.deletedStates={},Object.keys(V).length!==0)for(var Kt in C){var yr=C[Kt];yr.setFeatureState(V,I)}},"coalesceChanges");var Qv=t(function(C,I){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Gl(Nr,16,0),this.grid3D=new Gl(Nr,16,0),this.featureIndexArray=new Wo,this.promoteId=I},"FeatureIndex");Qv.prototype.insert=t(function(C,I,V,J,ue,ge){var ke=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(V,J,ue);for(var Pe=ge?this.grid3D:this.grid,Oe=0;Oe<I.length;Oe++){for(var Ve=I[Oe],lt=[1/0,1/0,-1/0,-1/0],At=0;At<Ve.length;At++){var mt=Ve[At];lt[0]=Math.min(lt[0],mt.x),lt[1]=Math.min(lt[1],mt.y),lt[2]=Math.max(lt[2],mt.x),lt[3]=Math.max(lt[3],mt.y)}lt[0]<Nr&&lt[1]<Nr&&lt[2]>=0&&lt[3]>=0&&Pe.insert(ke,lt[0],lt[1],lt[2],lt[3])}},"insert"),Qv.prototype.loadVTLayers=t(function(){return this.vtLayers||(this.vtLayers=new X0.VectorTile(new Fx(this.rawTileData)).layers,this.sourceLayerCoder=new jx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},"loadVTLayers"),Qv.prototype.query=t(function(C,I,V,J){var ue=this;this.loadVTLayers();for(var ge=C.params||{},ke=Nr/C.tileSize/C.scale,Pe=Bu(ge.filter),Oe=C.queryGeometry,Ve=C.queryPadding*ke,lt=zO(Oe),At=this.grid.query(lt.minX-Ve,lt.minY-Ve,lt.maxX+Ve,lt.maxY+Ve),mt=zO(C.cameraQueryGeometry),Bt=this.grid3D.query(mt.minX-Ve,mt.minY-Ve,mt.maxX+Ve,mt.maxY+Ve,function(ta,ga,da,an){return Wh(C.cameraQueryGeometry,ta-Ve,ga-Ve,da+Ve,an+Ve)}),Kt=0,yr=Bt;Kt<yr.length;Kt+=1){var lr=yr[Kt];At.push(lr)}At.sort(nme);for(var Rr={},_r,Cr=t(function(ta){var ga=At[ta];if(ga!==_r){_r=ga;var da=ue.featureIndexArray.get(ga),an=null;ue.loadMatchingFeature(Rr,da.bucketIndex,da.sourceLayerIndex,da.featureIndex,Pe,ge.layers,ge.availableImages,I,V,J,function(Ha,Xa,Mn){return an||(an=Wn(Ha)),Xa.queryIntersectsFeature(Oe,Ha,Mn,an,ue.z,C.transform,ke,C.pixelPosMatrix)})}},"loop"),qr=0;qr<At.length;qr++)Cr(qr);return Rr},"query"),Qv.prototype.loadMatchingFeature=t(function(C,I,V,J,ue,ge,ke,Pe,Oe,Ve,lt){var At=this.bucketLayerIDs[I];if(!(ge&&!F(ge,At))){var mt=this.sourceLayerCoder.decode(V),Bt=this.vtLayers[mt],Kt=Bt.feature(J);if(!!ue.filter(new On(this.tileID.overscaledZ),Kt))for(var yr=this.getId(Kt,mt),lr=0;lr<At.length;lr++){var Rr=At[lr];if(!(ge&&ge.indexOf(Rr)<0)){var _r=Pe[Rr];if(!!_r){var Cr={};yr!==void 0&&Ve&&(Cr=Ve.getState(_r.sourceLayer||"_geojsonTileLayer",yr));var qr=Oe[Rr];qr.paint=IO(qr.paint,_r.paint,Kt,Cr,ke),qr.layout=IO(qr.layout,_r.layout,Kt,Cr,ke);var ta=!lt||lt(Kt,_r,Cr);if(!!ta){var ga=new Yx(Kt,this.z,this.x,this.y,yr);ga.layer=qr;var da=C[Rr];da===void 0&&(da=C[Rr]=[]),da.push({featureIndex:J,feature:ga,intersectionZ:ta})}}}}}},"loadMatchingFeature"),Qv.prototype.lookupSymbolFeatures=t(function(C,I,V,J,ue,ge,ke,Pe){var Oe={};this.loadVTLayers();for(var Ve=Bu(ue),lt=0,At=C;lt<At.length;lt+=1){var mt=At[lt];this.loadMatchingFeature(Oe,V,J,mt,Ve,ge,ke,Pe,I)}return Oe},"lookupSymbolFeatures"),Qv.prototype.hasLayer=t(function(C){for(var I=0,V=this.bucketLayerIDs;I<V.length;I+=1)for(var J=V[I],ue=0,ge=J;ue<ge.length;ue+=1){var ke=ge[ue];if(C===ke)return!0}return!1},"hasLayer"),Qv.prototype.getId=t(function(C,I){var V=C.id;if(this.promoteId){var J=typeof this.promoteId=="string"?this.promoteId:this.promoteId[I];V=C.properties[J],typeof V=="boolean"&&(V=Number(V))}return V},"getId"),Le("FeatureIndex",Qv,{omit:["rawTileData","sourceLayerCoder"]});function IO(E,C,I,V,J){return B(E,function(ue,ge){var ke=C instanceof Zt?C.get(ge):null;return ke&&ke.evaluate?ke.evaluate(I,V,J):ke})}t(IO,"evaluateProperties");function zO(E){for(var C=1/0,I=1/0,V=-1/0,J=-1/0,ue=0,ge=E;ue<ge.length;ue+=1){var ke=ge[ue];C=Math.min(C,ke.x),I=Math.min(I,ke.y),V=Math.max(V,ke.x),J=Math.max(J,ke.y)}return{minX:C,minY:I,maxX:V,maxY:J}}t(zO,"getBounds");function nme(E,C){return C-E}t(nme,"topDownFeatureComparator");var ime=3e4,Is=t(function(C,I){this.tileID=C,this.uid=S(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"},"Tile");Is.prototype.registerFadeDuration=t(function(C){var I=C+this.timeAdded;I<ce.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)},"registerFadeDuration"),Is.prototype.wasRequested=t(function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},"wasRequested"),Is.prototype.loadVectorData=t(function(C,I,V){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Yo;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=ame(C.buckets,I.style),this.hasSymbolBuckets=!1;for(var J in this.buckets){var ue=this.buckets[J];if(ue instanceof Fi)if(this.hasSymbolBuckets=!0,V)ue.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ge in this.buckets){var ke=this.buckets[ge];if(ke instanceof Fi&&ke.hasRTLText){this.hasRTLText=!0,Yi();break}}this.queryPadding=0;for(var Pe in this.buckets){var Oe=this.buckets[Pe];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(Pe).queryRadius(Oe))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},"loadVectorData"),Is.prototype.unloadVectorData=t(function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},"unloadVectorData"),Is.prototype.getBucket=t(function(C){return this.buckets[C.id]},"getBucket"),Is.prototype.upload=t(function(C){for(var I in this.buckets){var V=this.buckets[I];V.uploadPending()&&V.upload(C)}var J=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Up(C,this.imageAtlas.image,J.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Up(C,this.glyphAtlasImage,J.ALPHA),this.glyphAtlasImage=null)},"upload"),Is.prototype.prepare=t(function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},"prepare"),Is.prototype.queryRenderedFeatures=t(function(C,I,V,J,ue,ge,ke,Pe,Oe,Ve){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:J,cameraQueryGeometry:ue,scale:ge,tileSize:this.tileSize,pixelPosMatrix:Ve,transform:Pe,params:ke,queryPadding:this.queryPadding*Oe},C,I,V)},"queryRenderedFeatures"),Is.prototype.querySourceFeatures=t(function(C,I){var V=this.latestFeatureIndex;if(!(!V||!V.rawTileData)){var J=V.loadVTLayers(),ue=I?I.sourceLayer:"",ge=J._geojsonTileLayer||J[ue];if(!!ge)for(var ke=Bu(I&&I.filter),Pe=this.tileID.canonical,Oe=Pe.z,Ve=Pe.x,lt=Pe.y,At={z:Oe,x:Ve,y:lt},mt=0;mt<ge.length;mt++){var Bt=ge.feature(mt);if(ke.filter(new On(this.tileID.overscaledZ),Bt)){var Kt=V.getId(Bt,ue),yr=new Yx(Bt,Oe,Ve,lt,Kt);yr.tile=At,C.push(yr)}}}},"querySourceFeatures"),Is.prototype.hasData=t(function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},"hasData"),Is.prototype.patternsLoaded=t(function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},"patternsLoaded"),Is.prototype.setExpiryData=t(function(C){var I=this.expirationTime;if(C.cacheControl){var V=$(C.cacheControl);V["max-age"]&&(this.expirationTime=Date.now()+V["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var J=Date.now(),ue=!1;if(this.expirationTime>J)ue=!1;else if(!I)ue=!0;else if(this.expirationTime<I)ue=!0;else{var ge=this.expirationTime-I;ge?this.expirationTime=J+Math.max(ge,ime):ue=!0}ue?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},"setExpiryData"),Is.prototype.getExpiryTimeout=t(function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},"getExpiryTimeout"),Is.prototype.setFeatureState=t(function(C,I){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var V=this.latestFeatureIndex.loadVTLayers();for(var J in this.buckets)if(!!I.style.hasLayer(J)){var ue=this.buckets[J],ge=ue.layers[0].sourceLayer||"_geojsonTileLayer",ke=V[ge],Pe=C[ge];if(!(!ke||!Pe||Object.keys(Pe).length===0)){ue.update(Pe,ke,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Oe=I&&I.style&&I.style.getLayer(J);Oe&&(this.queryPadding=Math.max(this.queryPadding,Oe.queryRadius(ue)))}}}},"setFeatureState"),Is.prototype.holdingForFade=t(function(){return this.symbolFadeHoldUntil!==void 0},"holdingForFade"),Is.prototype.symbolFadeFinished=t(function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ce.now()},"symbolFadeFinished"),Is.prototype.clearFadeHold=t(function(){this.symbolFadeHoldUntil=void 0},"clearFadeHold"),Is.prototype.setHoldDuration=t(function(C){this.symbolFadeHoldUntil=ce.now()+C},"setHoldDuration"),Is.prototype.setDependencies=t(function(C,I){for(var V={},J=0,ue=I;J<ue.length;J+=1){var ge=ue[J];V[ge]=!0}this.dependencies[C]=V},"setDependencies"),Is.prototype.hasDependency=t(function(C,I){for(var V=0,J=C;V<J.length;V+=1){var ue=J[V],ge=this.dependencies[ue];if(ge)for(var ke=0,Pe=I;ke<Pe.length;ke+=1){var Oe=Pe[ke];if(ge[Oe])return!0}}return!1},"hasDependency");var ome=["type","source","source-layer","minzoom","maxzoom","filter","layout"],qd=self.performance,FO=t(function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},qd.mark(this._marks.start)},"RequestPerformance");FO.prototype.finish=t(function(){qd.mark(this._marks.end);var C=qd.getEntriesByName(this._marks.measure);return C.length===0&&(qd.measure(this._marks.measure,this._marks.start,this._marks.end),C=qd.getEntriesByName(this._marks.measure),qd.clearMarks(this._marks.start),qd.clearMarks(this._marks.end),qd.clearMeasures(this._marks.measure)),C},"finish"),a.Actor=og,a.AlphaImage=qp,a.CanonicalTileID=$p,a.CollisionBoxArray=Yo,a.Color=yi,a.DEMData=Jv,a.DataConstantProperty=cr,a.DictionaryCoder=jx,a.EXTENT=Nr,a.ErrorEvent=Zr,a.EvaluationParameters=On,a.Event=Lr,a.Evented=Sr,a.FeatureIndex=Qv,a.FillBucket=hh,a.FillExtrusionBucket=vh,a.ImageAtlas=nm,a.ImagePosition=Ox,a.LineBucket=fu,a.LngLat=xo,a.LngLatBounds=fs,a.MercatorCoordinate=Hp,a.ONE_EM=Zs,a.OverscaledTileID=cs,a.Point=v,a.Point$1=v,a.Properties=Qr,a.Protobuf=Fx,a.RGBAImage=uu,a.RequestManager=Fe,a.RequestPerformance=FO,a.ResourceType=dn,a.SegmentVector=N,a.SourceFeatureState=sg,a.StructArrayLayout1ui2=Qn,a.StructArrayLayout2f1f2i16=tn,a.StructArrayLayout2i4=Kr,a.StructArrayLayout3ui6=ja,a.StructArrayLayout4i8=qa,a.SymbolBucket=Fi,a.Texture=Up,a.Tile=Is,a.Transitionable=mo,a.Uniform1f=pt,a.Uniform1i=wt,a.Uniform2f=bt,a.Uniform3f=Mt,a.Uniform4f=Dt,a.UniformColor=St,a.UniformMatrix4f=Lt,a.UnwrappedTileID=DO,a.ValidationError=Ma,a.WritingMode=yf,a.ZoomHistory=Ut,a.add=j0,a.addDynamicAttributes=K3,a.asyncAll=T,a.bezier=p,a.bindAll=P,a.browser=ce,a.cacheEntryPossiblyAdded=Fr,a.clamp=m,a.clearTileCache=na,a.clipLine=gO,a.clone=Cx,a.clone$1=R,a.clone$2=L3,a.collisionCircleLayout=qge,a.config=xe,a.create=$0,a.create$1=Op,a.create$2=Bp,a.createCommonjsModule=l,a.createExpression=gc,a.createLayout=Mr,a.createStyleLayer=Kye,a.cross=g0e,a.deepEqual=d,a.dot=p0e,a.dot$1=_0e,a.ease=b,a.emitValidationErrors=ou,a.endsWith=D,a.enforceCacheSizeLimit=Br,a.evaluateSizeForFeature=uO,a.evaluateSizeForZoom=fO,a.evaluateVariableOffset=xO,a.evented=Hi,a.extend=w,a.featureFilter=Bu,a.filterObject=z,a.fromRotation=H0,a.getAnchorAlignment=Y3,a.getAnchorJustification=Z3,a.getArrayBuffer=ot,a.getImage=Ht,a.getJSON=Qe,a.getRTLTextPluginStatus=si,a.getReferrer=Hr,a.getVideo=Qt,a.identity=V0,a.invert=Fd,a.isChar=Tt,a.isMapboxURL=qe,a.keysDifference=M,a.makeRequest=He,a.mapObject=B,a.mercatorXfromLng=LO,a.mercatorYfromLat=RO,a.mercatorZfromAltitude=PO,a.mul=C3,a.multiply=Bd,a.mvt=X0,a.normalize=Xy,a.number=ro,a.offscreenCanvasSupported=Er,a.ortho=E3,a.parseGlyphPBF=vye,a.pbf=Fx,a.performSymbolLayout=Rye,a.perspective=Wy,a.pick=x,a.plugin=Fn,a.polygonIntersectsPolygon=gn,a.postMapLoadEvent=Pt,a.postTurnstileEvent=ft,a.potpack=tO,a.refProperties=ome,a.register=Le,a.registerForPluginStateChange=wa,a.rotate=El,a.rotateX=lu,a.rotateZ=G0,a.scale=su,a.scale$1=b0e,a.scale$2=P3,a.setCacheLimits=Ia,a.setRTLTextPlugin=En,a.sphericalToCartesian=X,a.sqrLen=A0e,a.styleSpec=Wr,a.sub=m0e,a.symbolSize=wye,a.transformMat3=y0e,a.transformMat4=Lx,a.translate=Xo,a.triggerPluginCompletionEvent=pn,a.uniqueId=S,a.validateCustomStyleLayer=Wye,a.validateLight=mi,a.validateStyle=fl,a.values=_,a.vectorTile=X0,a.version=u,a.warnOnce=q,a.webpSupported=Te,a.window=self,a.wrap=y}),o(["./shared"],function(a){function l(nt){var He=typeof nt;if(He==="number"||He==="boolean"||He==="string"||nt===void 0||nt===null)return JSON.stringify(nt);if(Array.isArray(nt)){for(var Qe="[",ot=0,Ae=nt;ot<Ae.length;ot+=1){var Se=Ae[ot];Qe+=l(Se)+","}return Qe+"]"}for(var je=Object.keys(nt).sort(),Xe="{",ut=0;ut<je.length;ut++)Xe+=JSON.stringify(je[ut])+":"+l(nt[je[ut]])+",";return Xe+"}"}t(l,"stringify");function u(nt){for(var He="",Qe=0,ot=a.refProperties;Qe<ot.length;Qe+=1){var Ae=ot[Qe];He+="/"+l(nt[Ae])}return He}t(u,"getKey");function f(nt,He){for(var Qe={},ot=0;ot<nt.length;ot++){var Ae=He&&He[nt[ot].id]||u(nt[ot]);He&&(He[nt[ot].id]=Ae);var Se=Qe[Ae];Se||(Se=Qe[Ae]=[]),Se.push(nt[ot])}var je=[];for(var Xe in Qe)je.push(Qe[Xe]);return je}t(f,"groupByLayout");var h=t(function(He){this.keyCache={},He&&this.replace(He)},"StyleLayerIndex");h.prototype.replace=t(function(He){this._layerConfigs={},this._layers={},this.update(He,[])},"replace"),h.prototype.update=t(function(He,Qe){for(var ot=this,Ae=0,Se=He;Ae<Se.length;Ae+=1){var je=Se[Ae];this._layerConfigs[je.id]=je;var Xe=this._layers[je.id]=a.createStyleLayer(je);Xe._featureFilter=a.featureFilter(Xe.filter),this.keyCache[je.id]&&delete this.keyCache[je.id]}for(var ut=0,xt=Qe;ut<xt.length;ut+=1){var dt=xt[ut];delete this.keyCache[dt],delete this._layerConfigs[dt],delete this._layers[dt]}this.familiesBySource={};for(var Ot=f(a.values(this._layerConfigs),this.keyCache),Ht=0,Qt=Ot;Ht<Qt.length;Ht+=1){var mr=Qt[Ht],xr=mr.map(function(Sa){return ot._layers[Sa.id]}),Lr=xr[0];if(Lr.visibility!=="none"){var Zr=Lr.source||"",Sr=this.familiesBySource[Zr];Sr||(Sr=this.familiesBySource[Zr]={});var xa=Lr.sourceLayer||"_geojsonTileLayer",aa=Sr[xa];aa||(aa=Sr[xa]=[]),aa.push(xr)}}},"update");var v=1,c=t(function(He){var Qe={},ot=[];for(var Ae in He){var Se=He[Ae],je=Qe[Ae]={};for(var Xe in Se){var ut=Se[+Xe];if(!(!ut||ut.bitmap.width===0||ut.bitmap.height===0)){var xt={x:0,y:0,w:ut.bitmap.width+2*v,h:ut.bitmap.height+2*v};ot.push(xt),je[Xe]={rect:xt,metrics:ut.metrics}}}}var dt=a.potpack(ot),Ot=dt.w,Ht=dt.h,Qt=new a.AlphaImage({width:Ot||1,height:Ht||1});for(var mr in He){var xr=He[mr];for(var Lr in xr){var Zr=xr[+Lr];if(!(!Zr||Zr.bitmap.width===0||Zr.bitmap.height===0)){var Sr=Qe[mr][Lr].rect;a.AlphaImage.copy(Zr.bitmap,Qt,{x:0,y:0},{x:Sr.x+v,y:Sr.y+v},Zr.bitmap)}}}this.image=Qt,this.positions=Qe},"GlyphAtlas");a.register("GlyphAtlas",c);var d=t(function(He){this.tileID=new a.OverscaledTileID(He.tileID.overscaledZ,He.tileID.wrap,He.tileID.canonical.z,He.tileID.canonical.x,He.tileID.canonical.y),this.uid=He.uid,this.zoom=He.zoom,this.pixelRatio=He.pixelRatio,this.tileSize=He.tileSize,this.source=He.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=He.showCollisionBoxes,this.collectResourceTiming=!!He.collectResourceTiming,this.returnDependencies=!!He.returnDependencies,this.promoteId=He.promoteId},"WorkerTile");d.prototype.parse=t(function(He,Qe,ot,Ae,Se){var je=this;this.status="parsing",this.data=He,this.collisionBoxArray=new a.CollisionBoxArray;var Xe=new a.DictionaryCoder(Object.keys(He.layers).sort()),ut=new a.FeatureIndex(this.tileID,this.promoteId);ut.bucketLayerIDs=[];var xt={},dt={featureIndex:ut,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ot},Ot=Qe.familiesBySource[this.source];for(var Ht in Ot){var Qt=He.layers[Ht];if(!!Qt){Qt.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Ht+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var mr=Xe.encode(Ht),xr=[],Lr=0;Lr<Qt.length;Lr++){var Zr=Qt.feature(Lr),Sr=ut.getId(Zr,Ht);xr.push({feature:Zr,id:Sr,index:Lr,sourceLayerIndex:mr})}for(var xa=0,aa=Ot[Ht];xa<aa.length;xa+=1){var Sa=aa[xa],vn=Sa[0];if(!(vn.minzoom&&this.zoom<Math.floor(vn.minzoom))&&!(vn.maxzoom&&this.zoom>=vn.maxzoom)&&vn.visibility!=="none"){g(Sa,this.zoom,ot);var hn=xt[vn.id]=vn.createBucket({index:ut.bucketLayerIDs.length,layers:Sa,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:mr,sourceID:this.source});hn.populate(xr,dt,this.tileID.canonical),ut.bucketLayerIDs.push(Sa.map(function(Ka){return Ka.id}))}}}}var ba,Tn,Pa,kn,In=a.mapObject(dt.glyphDependencies,function(Ka){return Object.keys(Ka).map(Number)});Object.keys(In).length?Ae.send("getGlyphs",{uid:this.uid,stacks:In},function(Ka,Ja){ba||(ba=Ka,Tn=Ja,Fa.call(je))}):Tn={};var ln=Object.keys(dt.iconDependencies);ln.length?Ae.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"icons"},function(Ka,Ja){ba||(ba=Ka,Pa=Ja,Fa.call(je))}):Pa={};var Pn=Object.keys(dt.patternDependencies);Pn.length?Ae.send("getImages",{icons:Pn,source:this.source,tileID:this.tileID,type:"patterns"},function(Ka,Ja){ba||(ba=Ka,kn=Ja,Fa.call(je))}):kn={},Fa.call(this);function Fa(){if(ba)return Se(ba);if(Tn&&Pa&&kn){var Ka=new c(Tn),Ja=new a.ImageAtlas(Pa,kn);for(var Xn in xt){var Ln=xt[Xn];Ln instanceof a.SymbolBucket?(g(Ln.layers,this.zoom,ot),a.performSymbolLayout(Ln,Tn,Ka.positions,Pa,Ja.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ln.hasPattern&&(Ln instanceof a.LineBucket||Ln instanceof a.FillBucket||Ln instanceof a.FillExtrusionBucket)&&(g(Ln.layers,this.zoom,ot),Ln.addFeatures(dt,this.tileID.canonical,Ja.patternPositions))}this.status="done",Se(null,{buckets:a.values(xt).filter(function(ni){return!ni.isEmpty()}),featureIndex:ut,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ka.image,imageAtlas:Ja,glyphMap:this.returnDependencies?Tn:null,iconMap:this.returnDependencies?Pa:null,glyphPositions:this.returnDependencies?Ka.positions:null})}}t(Fa,"maybePrepare")},"parse");function g(nt,He,Qe){for(var ot=new a.EvaluationParameters(He),Ae=0,Se=nt;Ae<Se.length;Ae+=1){var je=Se[Ae];je.recalculate(ot,Qe)}}t(g,"recalculateLayers");function p(nt,He){var Qe=a.getArrayBuffer(nt.request,function(ot,Ae,Se,je){ot?He(ot):Ae&&He(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Ae)),rawData:Ae,cacheControl:Se,expires:je})});return function(){Qe.cancel(),He()}}t(p,"loadVectorTile");var b=t(function(He,Qe,ot,Ae){this.actor=He,this.layerIndex=Qe,this.availableImages=ot,this.loadVectorData=Ae||p,this.loading={},this.loaded={}},"VectorTileWorkerSource");b.prototype.loadTile=t(function(He,Qe){var ot=this,Ae=He.uid;this.loading||(this.loading={});var Se=He&&He.request&&He.request.collectResourceTiming?new a.RequestPerformance(He.request):!1,je=this.loading[Ae]=new d(He);je.abort=this.loadVectorData(He,function(Xe,ut){if(delete ot.loading[Ae],Xe||!ut)return je.status="done",ot.loaded[Ae]=je,Qe(Xe);var xt=ut.rawData,dt={};ut.expires&&(dt.expires=ut.expires),ut.cacheControl&&(dt.cacheControl=ut.cacheControl);var Ot={};if(Se){var Ht=Se.finish();Ht&&(Ot.resourceTiming=JSON.parse(JSON.stringify(Ht)))}je.vectorTile=ut.vectorTile,je.parse(ut.vectorTile,ot.layerIndex,ot.availableImages,ot.actor,function(Qt,mr){if(Qt||!mr)return Qe(Qt);Qe(null,a.extend({rawTileData:xt.slice(0)},mr,dt,Ot))}),ot.loaded=ot.loaded||{},ot.loaded[Ae]=je})},"loadTile"),b.prototype.reloadTile=t(function(He,Qe){var ot=this,Ae=this.loaded,Se=He.uid,je=this;if(Ae&&Ae[Se]){var Xe=Ae[Se];Xe.showCollisionBoxes=He.showCollisionBoxes;var ut=t(function(xt,dt){var Ot=Xe.reloadCallback;Ot&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,je.layerIndex,ot.availableImages,je.actor,Ot)),Qe(xt,dt)},"done");Xe.status==="parsing"?Xe.reloadCallback=ut:Xe.status==="done"&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,ut):ut())}},"reloadTile"),b.prototype.abortTile=t(function(He,Qe){var ot=this.loading,Ae=He.uid;ot&&ot[Ae]&&ot[Ae].abort&&(ot[Ae].abort(),delete ot[Ae]),Qe()},"abortTile"),b.prototype.removeTile=t(function(He,Qe){var ot=this.loaded,Ae=He.uid;ot&&ot[Ae]&&delete ot[Ae],Qe()},"removeTile");var m=a.window.ImageBitmap,y=t(function(){this.loaded={}},"RasterDEMTileWorkerSource");y.prototype.loadTile=t(function(He,Qe){var ot=He.uid,Ae=He.encoding,Se=He.rawImageData,je=m&&Se instanceof m?this.getImageData(Se):Se,Xe=new a.DEMData(ot,je,Ae);this.loaded=this.loaded||{},this.loaded[ot]=Xe,Qe(null,Xe)},"loadTile"),y.prototype.getImageData=t(function(He){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(He.width,He.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=He.width,this.offscreenCanvas.height=He.height,this.offscreenCanvasContext.drawImage(He,0,0,He.width,He.height);var Qe=this.offscreenCanvasContext.getImageData(-1,-1,He.width+2,He.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Qe.width,height:Qe.height},Qe.data)},"getImageData"),y.prototype.removeTile=t(function(He){var Qe=this.loaded,ot=He.uid;Qe&&Qe[ot]&&delete Qe[ot]},"removeTile");var T=_;function _(nt,He){var Qe=nt&&nt.type,ot;if(Qe==="FeatureCollection")for(ot=0;ot<nt.features.length;ot++)_(nt.features[ot],He);else if(Qe==="GeometryCollection")for(ot=0;ot<nt.geometries.length;ot++)_(nt.geometries[ot],He);else if(Qe==="Feature")_(nt.geometry,He);else if(Qe==="Polygon")M(nt.coordinates,He);else if(Qe==="MultiPolygon")for(ot=0;ot<nt.coordinates.length;ot++)M(nt.coordinates[ot],He);return nt}t(_,"rewind");function M(nt,He){if(nt.length!==0){w(nt[0],He);for(var Qe=1;Qe<nt.length;Qe++)w(nt[Qe],!He)}}t(M,"rewindRings");function w(nt,He){for(var Qe=0,ot=0,Ae=nt.length,Se=Ae-1;ot<Ae;Se=ot++)Qe+=(nt[ot][0]-nt[Se][0])*(nt[Se][1]+nt[ot][1]);Qe>=0!=!!He&&nt.reverse()}t(w,"rewindRing");var x=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,A=t(function(He){this._feature=He,this.extent=a.EXTENT,this.type=He.type,this.properties=He.tags,"id"in He&&!isNaN(He.id)&&(this.id=parseInt(He.id,10))},"FeatureWrapper");A.prototype.loadGeometry=t(function(){if(this._feature.type===1){for(var He=[],Qe=0,ot=this._feature.geometry;Qe<ot.length;Qe+=1){var Ae=ot[Qe];He.push([new a.Point$1(Ae[0],Ae[1])])}return He}else{for(var Se=[],je=0,Xe=this._feature.geometry;je<Xe.length;je+=1){for(var ut=Xe[je],xt=[],dt=0,Ot=ut;dt<Ot.length;dt+=1){var Ht=Ot[dt];xt.push(new a.Point$1(Ht[0],Ht[1]))}Se.push(xt)}return Se}},"loadGeometry"),A.prototype.toGeoJSON=t(function(He,Qe,ot){return x.call(this,He,Qe,ot)},"toGeoJSON$1");var S=t(function(He){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=He.length,this._features=He},"GeoJSONWrapper");S.prototype.feature=t(function(He){return new A(this._features[He])},"feature");var k=a.vectorTile.VectorTileFeature,L=P;function P(nt,He){this.options=He||{},this.features=nt,this.length=nt.length}t(P,"GeoJSONWrapper$1"),P.prototype.feature=function(nt){return new D(this.features[nt],this.options.extent)};function D(nt,He){this.id=typeof nt.id=="number"?nt.id:void 0,this.type=nt.type,this.rawGeometry=nt.type===1?[nt.geometry]:nt.geometry,this.properties=nt.tags,this.extent=He||4096}t(D,"FeatureWrapper$1"),D.prototype.loadGeometry=function(){var nt=this.rawGeometry;this.geometry=[];for(var He=0;He<nt.length;He++){for(var Qe=nt[He],ot=[],Ae=0;Ae<Qe.length;Ae++)ot.push(new a.Point$1(Qe[Ae][0],Qe[Ae][1]));this.geometry.push(ot)}return this.geometry},D.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var nt=this.geometry,He=1/0,Qe=-1/0,ot=1/0,Ae=-1/0,Se=0;Se<nt.length;Se++)for(var je=nt[Se],Xe=0;Xe<je.length;Xe++){var ut=je[Xe];He=Math.min(He,ut.x),Qe=Math.max(Qe,ut.x),ot=Math.min(ot,ut.y),Ae=Math.max(Ae,ut.y)}return[He,ot,Qe,Ae]},D.prototype.toGeoJSON=k.prototype.toGeoJSON;var B=O,z=O,R=q,F=L;function O(nt){var He=new a.pbf;return H(nt,He),He.finish()}t(O,"fromVectorTileJs");function q(nt,He){He=He||{};var Qe={};for(var ot in nt)Qe[ot]=new L(nt[ot].features,He),Qe[ot].name=ot,Qe[ot].version=He.version,Qe[ot].extent=He.extent;return O({layers:Qe})}t(q,"fromGeojsonVt");function H(nt,He){for(var Qe in nt.layers)He.writeMessage(3,j,nt.layers[Qe])}t(H,"writeTile");function j(nt,He){He.writeVarintField(15,nt.version||1),He.writeStringField(1,nt.name||""),He.writeVarintField(5,nt.extent||4096);var Qe,ot={keys:[],values:[],keycache:{},valuecache:{}};for(Qe=0;Qe<nt.length;Qe++)ot.feature=nt.feature(Qe),He.writeMessage(2,X,ot);var Ae=ot.keys;for(Qe=0;Qe<Ae.length;Qe++)He.writeStringField(3,Ae[Qe]);var Se=ot.values;for(Qe=0;Qe<Se.length;Qe++)He.writeMessage(4,ie,Se[Qe])}t(j,"writeLayer");function X(nt,He){var Qe=nt.feature;Qe.id!==void 0&&He.writeVarintField(1,Qe.id),He.writeMessage(2,G,nt),He.writeVarintField(3,Qe.type),He.writeMessage(4,ee,Qe)}t(X,"writeFeature");function G(nt,He){var Qe=nt.feature,ot=nt.keys,Ae=nt.values,Se=nt.keycache,je=nt.valuecache;for(var Xe in Qe.properties){var ut=Se[Xe];typeof ut>"u"&&(ot.push(Xe),ut=ot.length-1,Se[Xe]=ut),He.writeVarint(ut);var xt=Qe.properties[Xe],dt=typeof xt;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(xt=JSON.stringify(xt));var Ot=dt+":"+xt,Ht=je[Ot];typeof Ht>"u"&&(Ae.push(xt),Ht=Ae.length-1,je[Ot]=Ht),He.writeVarint(Ht)}}t(G,"writeProperties");function $(nt,He){return(He<<3)+(nt&7)}t($,"command");function te(nt){return nt<<1^nt>>31}t(te,"zigzag");function ee(nt,He){for(var Qe=nt.loadGeometry(),ot=nt.type,Ae=0,Se=0,je=Qe.length,Xe=0;Xe<je;Xe++){var ut=Qe[Xe],xt=1;ot===1&&(xt=ut.length),He.writeVarint($(1,xt));for(var dt=ot===3?ut.length-1:ut.length,Ot=0;Ot<dt;Ot++){Ot===1&&ot!==1&&He.writeVarint($(2,dt-1));var Ht=ut[Ot].x-Ae,Qt=ut[Ot].y-Se;He.writeVarint(te(Ht)),He.writeVarint(te(Qt)),Ae+=Ht,Se+=Qt}ot===3&&He.writeVarint($(7,1))}}t(ee,"writeGeometry");function ie(nt,He){var Qe=typeof nt;Qe==="string"?He.writeStringField(1,nt):Qe==="boolean"?He.writeBooleanField(7,nt):Qe==="number"&&(nt%1!==0?He.writeDoubleField(3,nt):nt<0?He.writeSVarintField(6,nt):He.writeVarintField(5,nt))}t(ie,"writeValue"),B.fromVectorTileJs=z,B.fromGeojsonVt=R,B.GeoJSONWrapper=F;function se(nt,He,Qe,ot,Ae,Se){if(!(Ae-ot<=Qe)){var je=ot+Ae>>1;W(nt,He,je,ot,Ae,Se%2),se(nt,He,Qe,ot,je-1,Se+1),se(nt,He,Qe,je+1,Ae,Se+1)}}t(se,"sortKD");function W(nt,He,Qe,ot,Ae,Se){for(;Ae>ot;){if(Ae-ot>600){var je=Ae-ot+1,Xe=Qe-ot+1,ut=Math.log(je),xt=.5*Math.exp(2*ut/3),dt=.5*Math.sqrt(ut*xt*(je-xt)/je)*(Xe-je/2<0?-1:1),Ot=Math.max(ot,Math.floor(Qe-Xe*xt/je+dt)),Ht=Math.min(Ae,Math.floor(Qe+(je-Xe)*xt/je+dt));W(nt,He,Qe,Ot,Ht,Se)}var Qt=He[2*Qe+Se],mr=ot,xr=Ae;for(ne(nt,He,ot,Qe),He[2*Ae+Se]>Qt&&ne(nt,He,ot,Ae);mr<xr;){for(ne(nt,He,mr,xr),mr++,xr--;He[2*mr+Se]<Qt;)mr++;for(;He[2*xr+Se]>Qt;)xr--}He[2*ot+Se]===Qt?ne(nt,He,ot,xr):(xr++,ne(nt,He,xr,Ae)),xr<=Qe&&(ot=xr+1),Qe<=xr&&(Ae=xr-1)}}t(W,"select");function ne(nt,He,Qe,ot){he(nt,Qe,ot),he(He,2*Qe,2*ot),he(He,2*Qe+1,2*ot+1)}t(ne,"swapItem");function he(nt,He,Qe){var ot=nt[He];nt[He]=nt[Qe],nt[Qe]=ot}t(he,"swap");function re(nt,He,Qe,ot,Ae,Se,je){for(var Xe=[0,nt.length-1,0],ut=[],xt,dt;Xe.length;){var Ot=Xe.pop(),Ht=Xe.pop(),Qt=Xe.pop();if(Ht-Qt<=je){for(var mr=Qt;mr<=Ht;mr++)xt=He[2*mr],dt=He[2*mr+1],xt>=Qe&&xt<=Ae&&dt>=ot&&dt<=Se&&ut.push(nt[mr]);continue}var xr=Math.floor((Qt+Ht)/2);xt=He[2*xr],dt=He[2*xr+1],xt>=Qe&&xt<=Ae&&dt>=ot&&dt<=Se&&ut.push(nt[xr]);var Lr=(Ot+1)%2;(Ot===0?Qe<=xt:ot<=dt)&&(Xe.push(Qt),Xe.push(xr-1),Xe.push(Lr)),(Ot===0?Ae>=xt:Se>=dt)&&(Xe.push(xr+1),Xe.push(Ht),Xe.push(Lr))}return ut}t(re,"range");function ae(nt,He,Qe,ot,Ae,Se){for(var je=[0,nt.length-1,0],Xe=[],ut=Ae*Ae;je.length;){var xt=je.pop(),dt=je.pop(),Ot=je.pop();if(dt-Ot<=Se){for(var Ht=Ot;Ht<=dt;Ht++)fe(He[2*Ht],He[2*Ht+1],Qe,ot)<=ut&&Xe.push(nt[Ht]);continue}var Qt=Math.floor((Ot+dt)/2),mr=He[2*Qt],xr=He[2*Qt+1];fe(mr,xr,Qe,ot)<=ut&&Xe.push(nt[Qt]);var Lr=(xt+1)%2;(xt===0?Qe-Ae<=mr:ot-Ae<=xr)&&(je.push(Ot),je.push(Qt-1),je.push(Lr)),(xt===0?Qe+Ae>=mr:ot+Ae>=xr)&&(je.push(Qt+1),je.push(dt),je.push(Lr))}return Xe}t(ae,"within");function fe(nt,He,Qe,ot){var Ae=nt-Qe,Se=He-ot;return Ae*Ae+Se*Se}t(fe,"sqDist");var ce=t(function(nt){return nt[0]},"defaultGetX"),xe=t(function(nt){return nt[1]},"defaultGetY"),Te=t(function(He,Qe,ot,Ae,Se){Qe===void 0&&(Qe=ce),ot===void 0&&(ot=xe),Ae===void 0&&(Ae=64),Se===void 0&&(Se=Float64Array),this.nodeSize=Ae,this.points=He;for(var je=He.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new je(He.length),ut=this.coords=new Se(He.length*2),xt=0;xt<He.length;xt++)Xe[xt]=xt,ut[2*xt]=Qe(He[xt]),ut[2*xt+1]=ot(He[xt]);se(Xe,ut,Ae,0,Xe.length-1,0)},"KDBush");Te.prototype.range=t(function(He,Qe,ot,Ae){return re(this.ids,this.coords,He,Qe,ot,Ae,this.nodeSize)},"range$1"),Te.prototype.within=t(function(He,Qe,ot){return ae(this.ids,this.coords,He,Qe,ot,this.nodeSize)},"within$1");var me={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(nt){return nt}},pe=t(function(He){this.options=Je(Object.create(me),He),this.trees=new Array(this.options.maxZoom+1)},"Supercluster");pe.prototype.load=t(function(He){var Qe=this.options,ot=Qe.log,Ae=Qe.minZoom,Se=Qe.maxZoom,je=Qe.nodeSize;ot&&console.time("total time");var Xe="prepare "+He.length+" points";ot&&console.time(Xe),this.points=He;for(var ut=[],xt=0;xt<He.length;xt++)!He[xt].geometry||ut.push(de(He[xt],xt));this.trees[Se+1]=new Te(ut,Ge,et,je,Float32Array),ot&&console.timeEnd(Xe);for(var dt=Se;dt>=Ae;dt--){var Ot=+Date.now();ut=this._cluster(ut,dt),this.trees[dt]=new Te(ut,Ge,et,je,Float32Array),ot&&console.log("z%d: %d clusters in %dms",dt,ut.length,+Date.now()-Ot)}return ot&&console.timeEnd("total time"),this},"load"),pe.prototype.getClusters=t(function(He,Qe){var ot=((He[0]+180)%360+360)%360-180,Ae=Math.max(-90,Math.min(90,He[1])),Se=He[2]===180?180:((He[2]+180)%360+360)%360-180,je=Math.max(-90,Math.min(90,He[3]));if(He[2]-He[0]>=360)ot=-180,Se=180;else if(ot>Se){var Xe=this.getClusters([ot,Ae,180,je],Qe),ut=this.getClusters([-180,Ae,Se,je],Qe);return Xe.concat(ut)}for(var xt=this.trees[this._limitZoom(Qe)],dt=xt.range(Ee(ot),De(je),Ee(Se),De(Ae)),Ot=[],Ht=0,Qt=dt;Ht<Qt.length;Ht+=1){var mr=Qt[Ht],xr=xt.points[mr];Ot.push(xr.numPoints?ye(xr):this.points[xr.index])}return Ot},"getClusters"),pe.prototype.getChildren=t(function(He){var Qe=this._getOriginId(He),ot=this._getOriginZoom(He),Ae="No cluster with the specified id.",Se=this.trees[ot];if(!Se)throw new Error(Ae);var je=Se.points[Qe];if(!je)throw new Error(Ae);for(var Xe=this.options.radius/(this.options.extent*Math.pow(2,ot-1)),ut=Se.within(je.x,je.y,Xe),xt=[],dt=0,Ot=ut;dt<Ot.length;dt+=1){var Ht=Ot[dt],Qt=Se.points[Ht];Qt.parentId===He&&xt.push(Qt.numPoints?ye(Qt):this.points[Qt.index])}if(xt.length===0)throw new Error(Ae);return xt},"getChildren"),pe.prototype.getLeaves=t(function(He,Qe,ot){Qe=Qe||10,ot=ot||0;var Ae=[];return this._appendLeaves(Ae,He,Qe,ot,0),Ae},"getLeaves"),pe.prototype.getTile=t(function(He,Qe,ot){var Ae=this.trees[this._limitZoom(He)],Se=Math.pow(2,He),je=this.options,Xe=je.extent,ut=je.radius,xt=ut/Xe,dt=(ot-xt)/Se,Ot=(ot+1+xt)/Se,Ht={features:[]};return this._addTileFeatures(Ae.range((Qe-xt)/Se,dt,(Qe+1+xt)/Se,Ot),Ae.points,Qe,ot,Se,Ht),Qe===0&&this._addTileFeatures(Ae.range(1-xt/Se,dt,1,Ot),Ae.points,Se,ot,Se,Ht),Qe===Se-1&&this._addTileFeatures(Ae.range(0,dt,xt/Se,Ot),Ae.points,-1,ot,Se,Ht),Ht.features.length?Ht:null},"getTile"),pe.prototype.getClusterExpansionZoom=t(function(He){for(var Qe=this._getOriginZoom(He)-1;Qe<=this.options.maxZoom;){var ot=this.getChildren(He);if(Qe++,ot.length!==1)break;He=ot[0].properties.cluster_id}return Qe},"getClusterExpansionZoom"),pe.prototype._appendLeaves=t(function(He,Qe,ot,Ae,Se){for(var je=this.getChildren(Qe),Xe=0,ut=je;Xe<ut.length;Xe+=1){var xt=ut[Xe],dt=xt.properties;if(dt&&dt.cluster?Se+dt.point_count<=Ae?Se+=dt.point_count:Se=this._appendLeaves(He,dt.cluster_id,ot,Ae,Se):Se<Ae?Se++:He.push(xt),He.length===ot)break}return Se},"_appendLeaves"),pe.prototype._addTileFeatures=t(function(He,Qe,ot,Ae,Se,je){for(var Xe=0,ut=He;Xe<ut.length;Xe+=1){var xt=ut[Xe],dt=Qe[xt],Ot=dt.numPoints,Ht={type:1,geometry:[[Math.round(this.options.extent*(dt.x*Se-ot)),Math.round(this.options.extent*(dt.y*Se-Ae))]],tags:Ot?we(dt):this.points[dt.index].properties},Qt=void 0;Ot?Qt=dt.id:this.options.generateId?Qt=dt.index:this.points[dt.index].id&&(Qt=this.points[dt.index].id),Qt!==void 0&&(Ht.id=Qt),je.features.push(Ht)}},"_addTileFeatures"),pe.prototype._limitZoom=t(function(He){return Math.max(this.options.minZoom,Math.min(He,this.options.maxZoom+1))},"_limitZoom"),pe.prototype._cluster=t(function(He,Qe){for(var ot=[],Ae=this.options,Se=Ae.radius,je=Ae.extent,Xe=Ae.reduce,ut=Se/(je*Math.pow(2,Qe)),xt=0;xt<He.length;xt++){var dt=He[xt];if(!(dt.zoom<=Qe)){dt.zoom=Qe;for(var Ot=this.trees[Qe+1],Ht=Ot.within(dt.x,dt.y,ut),Qt=dt.numPoints||1,mr=dt.x*Qt,xr=dt.y*Qt,Lr=Xe&&Qt>1?this._map(dt,!0):null,Zr=(xt<<5)+(Qe+1)+this.points.length,Sr=0,xa=Ht;Sr<xa.length;Sr+=1){var aa=xa[Sr],Sa=Ot.points[aa];if(!(Sa.zoom<=Qe)){Sa.zoom=Qe;var vn=Sa.numPoints||1;mr+=Sa.x*vn,xr+=Sa.y*vn,Qt+=vn,Sa.parentId=Zr,Xe&&(Lr||(Lr=this._map(dt,!0)),Xe(Lr,this._map(Sa)))}}Qt===1?ot.push(dt):(dt.parentId=Zr,ot.push(oe(mr/Qt,xr/Qt,Zr,Qt,Lr)))}}return ot},"_cluster"),pe.prototype._getOriginId=t(function(He){return He-this.points.length>>5},"_getOriginId"),pe.prototype._getOriginZoom=t(function(He){return(He-this.points.length)%32},"_getOriginZoom"),pe.prototype._map=t(function(He,Qe){if(He.numPoints)return Qe?Je({},He.properties):He.properties;var ot=this.points[He.index].properties,Ae=this.options.map(ot);return Qe&&Ae===ot?Je({},Ae):Ae},"_map");function oe(nt,He,Qe,ot,Ae){return{x:nt,y:He,zoom:1/0,id:Qe,parentId:-1,numPoints:ot,properties:Ae}}t(oe,"createCluster");function de(nt,He){var Qe=nt.geometry.coordinates,ot=Qe[0],Ae=Qe[1];return{x:Ee(ot),y:De(Ae),zoom:1/0,index:He,parentId:-1}}t(de,"createPointCluster");function ye(nt){return{type:"Feature",id:nt.id,properties:we(nt),geometry:{type:"Point",coordinates:[Fe(nt.x),qe(nt.y)]}}}t(ye,"getClusterJSON");function we(nt){var He=nt.numPoints,Qe=He>=1e4?Math.round(He/1e3)+"k":He>=1e3?Math.round(He/100)/10+"k":He;return Je(Je({},nt.properties),{cluster:!0,cluster_id:nt.id,point_count:He,point_count_abbreviated:Qe})}t(we,"getClusterProperties");function Ee(nt){return nt/360+.5}t(Ee,"lngX");function De(nt){var He=Math.sin(nt*Math.PI/180),Qe=.5-.25*Math.log((1+He)/(1-He))/Math.PI;return Qe<0?0:Qe>1?1:Qe}t(De,"latY");function Fe(nt){return(nt-.5)*360}t(Fe,"xLng");function qe(nt){var He=(180-nt*360)*Math.PI/180;return 360*Math.atan(Math.exp(He))/Math.PI-90}t(qe,"yLat");function Je(nt,He){for(var Qe in He)nt[Qe]=He[Qe];return nt}t(Je,"extend");function Ge(nt){return nt.x}t(Ge,"getX");function et(nt){return nt.y}t(et,"getY");function Ue(nt,He,Qe,ot){for(var Ae=ot,Se=Qe-He>>1,je=Qe-He,Xe,ut=nt[He],xt=nt[He+1],dt=nt[Qe],Ot=nt[Qe+1],Ht=He+3;Ht<Qe;Ht+=3){var Qt=Ye(nt[Ht],nt[Ht+1],ut,xt,dt,Ot);if(Qt>Ae)Xe=Ht,Ae=Qt;else if(Qt===Ae){var mr=Math.abs(Ht-Se);mr<je&&(Xe=Ht,je=mr)}}Ae>ot&&(Xe-He>3&&Ue(nt,He,Xe,ot),nt[Xe+2]=Ae,Qe-Xe>3&&Ue(nt,Xe,Qe,ot))}t(Ue,"simplify");function Ye(nt,He,Qe,ot,Ae,Se){var je=Ae-Qe,Xe=Se-ot;if(je!==0||Xe!==0){var ut=((nt-Qe)*je+(He-ot)*Xe)/(je*je+Xe*Xe);ut>1?(Qe=Ae,ot=Se):ut>0&&(Qe+=je*ut,ot+=Xe*ut)}return je=nt-Qe,Xe=He-ot,je*je+Xe*Xe}t(Ye,"getSqSegDist");function $e(nt,He,Qe,ot){var Ae={id:typeof nt>"u"?null:nt,type:He,geometry:Qe,tags:ot,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ct(Ae),Ae}t($e,"createFeature");function Ct(nt){var He=nt.geometry,Qe=nt.type;if(Qe==="Point"||Qe==="MultiPoint"||Qe==="LineString")It(nt,He);else if(Qe==="Polygon"||Qe==="MultiLineString")for(var ot=0;ot<He.length;ot++)It(nt,He[ot]);else if(Qe==="MultiPolygon")for(ot=0;ot<He.length;ot++)for(var Ae=0;Ae<He[ot].length;Ae++)It(nt,He[ot][Ae])}t(Ct,"calcBBox");function It(nt,He){for(var Qe=0;Qe<He.length;Qe+=3)nt.minX=Math.min(nt.minX,He[Qe]),nt.minY=Math.min(nt.minY,He[Qe+1]),nt.maxX=Math.max(nt.maxX,He[Qe]),nt.maxY=Math.max(nt.maxY,He[Qe+1])}t(It,"calcLineBBox");function Vt(nt,He){var Qe=[];if(nt.type==="FeatureCollection")for(var ot=0;ot<nt.features.length;ot++)$t(Qe,nt.features[ot],He,ot);else nt.type==="Feature"?$t(Qe,nt,He):$t(Qe,{geometry:nt},He);return Qe}t(Vt,"convert");function $t(nt,He,Qe,ot){if(!!He.geometry){var Ae=He.geometry.coordinates,Se=He.geometry.type,je=Math.pow(Qe.tolerance/((1<<Qe.maxZoom)*Qe.extent),2),Xe=[],ut=He.id;if(Qe.promoteId?ut=He.properties[Qe.promoteId]:Qe.generateId&&(ut=ot||0),Se==="Point")Gt(Ae,Xe);else if(Se==="MultiPoint")for(var xt=0;xt<Ae.length;xt++)Gt(Ae[xt],Xe);else if(Se==="LineString")Jt(Ae,Xe,je,!1);else if(Se==="MultiLineString")if(Qe.lineMetrics){for(xt=0;xt<Ae.length;xt++)Xe=[],Jt(Ae[xt],Xe,je,!1),nt.push($e(ut,"LineString",Xe,He.properties));return}else kt(Ae,Xe,je,!1);else if(Se==="Polygon")kt(Ae,Xe,je,!0);else if(Se==="MultiPolygon")for(xt=0;xt<Ae.length;xt++){var dt=[];kt(Ae[xt],dt,je,!0),Xe.push(dt)}else if(Se==="GeometryCollection"){for(xt=0;xt<He.geometry.geometries.length;xt++)$t(nt,{id:ut,geometry:He.geometry.geometries[xt],properties:He.properties},Qe,ot);return}else throw new Error("Input data is not a valid GeoJSON object.");nt.push($e(ut,Se,Xe,He.properties))}}t($t,"convertFeature");function Gt(nt,He){He.push(ft(nt[0])),He.push(zt(nt[1])),He.push(0)}t(Gt,"convertPoint");function Jt(nt,He,Qe,ot){for(var Ae,Se,je=0,Xe=0;Xe<nt.length;Xe++){var ut=ft(nt[Xe][0]),xt=zt(nt[Xe][1]);He.push(ut),He.push(xt),He.push(0),Xe>0&&(ot?je+=(Ae*xt-ut*Se)/2:je+=Math.sqrt(Math.pow(ut-Ae,2)+Math.pow(xt-Se,2))),Ae=ut,Se=xt}var dt=He.length-3;He[2]=1,Ue(He,0,dt,Qe),He[dt+2]=1,He.size=Math.abs(je),He.start=0,He.end=He.size}t(Jt,"convertLine");function kt(nt,He,Qe,ot){for(var Ae=0;Ae<nt.length;Ae++){var Se=[];Jt(nt[Ae],Se,Qe,ot),He.push(Se)}}t(kt,"convertLines");function ft(nt){return nt/360+.5}t(ft,"projectX");function zt(nt){var He=Math.sin(nt*Math.PI/180),Qe=.5-.25*Math.log((1+He)/(1-He))/Math.PI;return Qe<0?0:Qe>1?1:Qe}t(zt,"projectY");function Pt(nt,He,Qe,ot,Ae,Se,je,Xe){if(Qe/=He,ot/=He,Se>=Qe&&je<ot)return nt;if(je<Qe||Se>=ot)return null;for(var ut=[],xt=0;xt<nt.length;xt++){var dt=nt[xt],Ot=dt.geometry,Ht=dt.type,Qt=Ae===0?dt.minX:dt.minY,mr=Ae===0?dt.maxX:dt.maxY;if(Qt>=Qe&&mr<ot){ut.push(dt);continue}else if(mr<Qe||Qt>=ot)continue;var xr=[];if(Ht==="Point"||Ht==="MultiPoint")Et(Ot,xr,Qe,ot,Ae);else if(Ht==="LineString")Wt(Ot,xr,Qe,ot,Ae,!1,Xe.lineMetrics);else if(Ht==="MultiLineString")tt(Ot,xr,Qe,ot,Ae,!1);else if(Ht==="Polygon")tt(Ot,xr,Qe,ot,Ae,!0);else if(Ht==="MultiPolygon")for(var Lr=0;Lr<Ot.length;Lr++){var Zr=[];tt(Ot[Lr],Zr,Qe,ot,Ae,!0),Zr.length&&xr.push(Zr)}if(xr.length){if(Xe.lineMetrics&&Ht==="LineString"){for(Lr=0;Lr<xr.length;Lr++)ut.push($e(dt.id,Ht,xr[Lr],dt.tags));continue}(Ht==="LineString"||Ht==="MultiLineString")&&(xr.length===1?(Ht="LineString",xr=xr[0]):Ht="MultiLineString"),(Ht==="Point"||Ht==="MultiPoint")&&(Ht=xr.length===3?"Point":"MultiPoint"),ut.push($e(dt.id,Ht,xr,dt.tags))}}return ut.length?ut:null}t(Pt,"clip");function Et(nt,He,Qe,ot,Ae){for(var Se=0;Se<nt.length;Se+=3){var je=nt[Se+Ae];je>=Qe&&je<=ot&&(He.push(nt[Se]),He.push(nt[Se+1]),He.push(nt[Se+2]))}}t(Et,"clipPoints");function Wt(nt,He,Qe,ot,Ae,Se,je){for(var Xe=ze(nt),ut=Ae===0?vt:_t,xt=nt.start,dt,Ot,Ht=0;Ht<nt.length-3;Ht+=3){var Qt=nt[Ht],mr=nt[Ht+1],xr=nt[Ht+2],Lr=nt[Ht+3],Zr=nt[Ht+4],Sr=Ae===0?Qt:mr,xa=Ae===0?Lr:Zr,aa=!1;je&&(dt=Math.sqrt(Math.pow(Qt-Lr,2)+Math.pow(mr-Zr,2))),Sr<Qe?xa>Qe&&(Ot=ut(Xe,Qt,mr,Lr,Zr,Qe),je&&(Xe.start=xt+dt*Ot)):Sr>ot?xa<ot&&(Ot=ut(Xe,Qt,mr,Lr,Zr,ot),je&&(Xe.start=xt+dt*Ot)):at(Xe,Qt,mr,xr),xa<Qe&&Sr>=Qe&&(Ot=ut(Xe,Qt,mr,Lr,Zr,Qe),aa=!0),xa>ot&&Sr<=ot&&(Ot=ut(Xe,Qt,mr,Lr,Zr,ot),aa=!0),!Se&&aa&&(je&&(Xe.end=xt+dt*Ot),He.push(Xe),Xe=ze(nt)),je&&(xt+=dt)}var Sa=nt.length-3;Qt=nt[Sa],mr=nt[Sa+1],xr=nt[Sa+2],Sr=Ae===0?Qt:mr,Sr>=Qe&&Sr<=ot&&at(Xe,Qt,mr,xr),Sa=Xe.length-3,Se&&Sa>=3&&(Xe[Sa]!==Xe[0]||Xe[Sa+1]!==Xe[1])&&at(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&He.push(Xe)}t(Wt,"clipLine");function ze(nt){var He=[];return He.size=nt.size,He.start=nt.start,He.end=nt.end,He}t(ze,"newSlice");function tt(nt,He,Qe,ot,Ae,Se){for(var je=0;je<nt.length;je++)Wt(nt[je],He,Qe,ot,Ae,Se,!1)}t(tt,"clipLines");function at(nt,He,Qe,ot){nt.push(He),nt.push(Qe),nt.push(ot)}t(at,"addPoint");function vt(nt,He,Qe,ot,Ae,Se){var je=(Se-He)/(ot-He);return nt.push(Se),nt.push(Qe+(Ae-Qe)*je),nt.push(1),je}t(vt,"intersectX");function _t(nt,He,Qe,ot,Ae,Se){var je=(Se-Qe)/(Ae-Qe);return nt.push(He+(ot-He)*je),nt.push(Se),nt.push(1),je}t(_t,"intersectY");function Rt(nt,He){var Qe=He.buffer/He.extent,ot=nt,Ae=Pt(nt,1,-1-Qe,Qe,0,-1,2,He),Se=Pt(nt,1,1-Qe,2+Qe,0,-1,2,He);return(Ae||Se)&&(ot=Pt(nt,1,-Qe,1+Qe,0,-1,2,He)||[],Ae&&(ot=nr(Ae,1).concat(ot)),Se&&(ot=ot.concat(nr(Se,-1)))),ot}t(Rt,"wrap");function nr(nt,He){for(var Qe=[],ot=0;ot<nt.length;ot++){var Ae=nt[ot],Se=Ae.type,je;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")je=ir(Ae.geometry,He);else if(Se==="MultiLineString"||Se==="Polygon"){je=[];for(var Xe=0;Xe<Ae.geometry.length;Xe++)je.push(ir(Ae.geometry[Xe],He))}else if(Se==="MultiPolygon")for(je=[],Xe=0;Xe<Ae.geometry.length;Xe++){for(var ut=[],xt=0;xt<Ae.geometry[Xe].length;xt++)ut.push(ir(Ae.geometry[Xe][xt],He));je.push(ut)}Qe.push($e(Ae.id,Se,je,Ae.tags))}return Qe}t(nr,"shiftFeatureCoords");function ir(nt,He){var Qe=[];Qe.size=nt.size,nt.start!==void 0&&(Qe.start=nt.start,Qe.end=nt.end);for(var ot=0;ot<nt.length;ot+=3)Qe.push(nt[ot]+He,nt[ot+1],nt[ot+2]);return Qe}t(ir,"shiftCoords");function ur(nt,He){if(nt.transformed)return nt;var Qe=1<<nt.z,ot=nt.x,Ae=nt.y,Se,je,Xe;for(Se=0;Se<nt.features.length;Se++){var ut=nt.features[Se],xt=ut.geometry,dt=ut.type;if(ut.geometry=[],dt===1)for(je=0;je<xt.length;je+=2)ut.geometry.push(qt(xt[je],xt[je+1],He,Qe,ot,Ae));else for(je=0;je<xt.length;je++){var Ot=[];for(Xe=0;Xe<xt[je].length;Xe+=2)Ot.push(qt(xt[je][Xe],xt[je][Xe+1],He,Qe,ot,Ae));ut.geometry.push(Ot)}}return nt.transformed=!0,nt}t(ur,"transformTile");function qt(nt,He,Qe,ot,Ae,Se){return[Math.round(Qe*(nt*ot-Ae)),Math.round(Qe*(He*ot-Se))]}t(qt,"transformPoint");function hr(nt,He,Qe,ot,Ae){for(var Se=He===Ae.maxZoom?0:Ae.tolerance/((1<<He)*Ae.extent),je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Qe,y:ot,z:He,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xe=0;Xe<nt.length;Xe++){je.numFeatures++,Fr(je,nt[Xe],Se,Ae);var ut=nt[Xe].minX,xt=nt[Xe].minY,dt=nt[Xe].maxX,Ot=nt[Xe].maxY;ut<je.minX&&(je.minX=ut),xt<je.minY&&(je.minY=xt),dt>je.maxX&&(je.maxX=dt),Ot>je.maxY&&(je.maxY=Ot)}return je}t(hr,"createTile");function Fr(nt,He,Qe,ot){var Ae=He.geometry,Se=He.type,je=[];if(Se==="Point"||Se==="MultiPoint")for(var Xe=0;Xe<Ae.length;Xe+=3)je.push(Ae[Xe]),je.push(Ae[Xe+1]),nt.numPoints++,nt.numSimplified++;else if(Se==="LineString")Br(je,Ae,nt,Qe,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(Xe=0;Xe<Ae.length;Xe++)Br(je,Ae[Xe],nt,Qe,Se==="Polygon",Xe===0);else if(Se==="MultiPolygon")for(var ut=0;ut<Ae.length;ut++){var xt=Ae[ut];for(Xe=0;Xe<xt.length;Xe++)Br(je,xt[Xe],nt,Qe,!0,Xe===0)}if(je.length){var dt=He.tags||null;if(Se==="LineString"&&ot.lineMetrics){dt={};for(var Ot in He.tags)dt[Ot]=He.tags[Ot];dt.mapbox_clip_start=Ae.start/Ae.size,dt.mapbox_clip_end=Ae.end/Ae.size}var Ht={geometry:je,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:dt};He.id!==null&&(Ht.id=He.id),nt.features.push(Ht)}}t(Fr,"addFeature");function Br(nt,He,Qe,ot,Ae,Se){var je=ot*ot;if(ot>0&&He.size<(Ae?je:ot)){Qe.numPoints+=He.length/3;return}for(var Xe=[],ut=0;ut<He.length;ut+=3)(ot===0||He[ut+2]>je)&&(Qe.numSimplified++,Xe.push(He[ut]),Xe.push(He[ut+1])),Qe.numPoints++;Ae&&na(Xe,Se),nt.push(Xe)}t(Br,"addLine");function na(nt,He){for(var Qe=0,ot=0,Ae=nt.length,Se=Ae-2;ot<Ae;Se=ot,ot+=2)Qe+=(nt[ot]-nt[Se])*(nt[ot+1]+nt[Se+1]);if(Qe>0===He)for(ot=0,Ae=nt.length;ot<Ae/2;ot+=2){var je=nt[ot],Xe=nt[ot+1];nt[ot]=nt[Ae-2-ot],nt[ot+1]=nt[Ae-1-ot],nt[Ae-2-ot]=je,nt[Ae-1-ot]=Xe}}t(na,"rewind$1");function Ia(nt,He){return new ea(nt,He)}t(Ia,"geojsonvt");function ea(nt,He){He=this.options=dn(Object.create(this.options),He);var Qe=He.debug;if(Qe&&console.time("preprocess data"),He.maxZoom<0||He.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(He.promoteId&&He.generateId)throw new Error("promoteId and generateId cannot be used together.");var ot=Vt(nt,He);this.tiles={},this.tileCoords=[],Qe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",He.indexMaxZoom,He.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ot=Rt(ot,He),ot.length&&this.splitTile(ot,0,0,0),Qe&&(ot.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}t(ea,"GeoJSONVT"),ea.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ea.prototype.splitTile=function(nt,He,Qe,ot,Ae,Se,je){for(var Xe=[nt,He,Qe,ot],ut=this.options,xt=ut.debug;Xe.length;){ot=Xe.pop(),Qe=Xe.pop(),He=Xe.pop(),nt=Xe.pop();var dt=1<<He,Ot=Er(He,Qe,ot),Ht=this.tiles[Ot];if(!Ht&&(xt>1&&console.time("creation"),Ht=this.tiles[Ot]=hr(nt,He,Qe,ot,ut),this.tileCoords.push({z:He,x:Qe,y:ot}),xt)){xt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",He,Qe,ot,Ht.numFeatures,Ht.numPoints,Ht.numSimplified),console.timeEnd("creation"));var Qt="z"+He;this.stats[Qt]=(this.stats[Qt]||0)+1,this.total++}if(Ht.source=nt,Ae){if(He===ut.maxZoom||He===Ae)continue;var mr=1<<Ae-He;if(Qe!==Math.floor(Se/mr)||ot!==Math.floor(je/mr))continue}else if(He===ut.indexMaxZoom||Ht.numPoints<=ut.indexMaxPoints)continue;if(Ht.source=null,nt.length!==0){xt>1&&console.time("clipping");var xr=.5*ut.buffer/ut.extent,Lr=.5-xr,Zr=.5+xr,Sr=1+xr,xa,aa,Sa,vn,hn,ba;xa=aa=Sa=vn=null,hn=Pt(nt,dt,Qe-xr,Qe+Zr,0,Ht.minX,Ht.maxX,ut),ba=Pt(nt,dt,Qe+Lr,Qe+Sr,0,Ht.minX,Ht.maxX,ut),nt=null,hn&&(xa=Pt(hn,dt,ot-xr,ot+Zr,1,Ht.minY,Ht.maxY,ut),aa=Pt(hn,dt,ot+Lr,ot+Sr,1,Ht.minY,Ht.maxY,ut),hn=null),ba&&(Sa=Pt(ba,dt,ot-xr,ot+Zr,1,Ht.minY,Ht.maxY,ut),vn=Pt(ba,dt,ot+Lr,ot+Sr,1,Ht.minY,Ht.maxY,ut),ba=null),xt>1&&console.timeEnd("clipping"),Xe.push(xa||[],He+1,Qe*2,ot*2),Xe.push(aa||[],He+1,Qe*2,ot*2+1),Xe.push(Sa||[],He+1,Qe*2+1,ot*2),Xe.push(vn||[],He+1,Qe*2+1,ot*2+1)}}},ea.prototype.getTile=function(nt,He,Qe){var ot=this.options,Ae=ot.extent,Se=ot.debug;if(nt<0||nt>24)return null;var je=1<<nt;He=(He%je+je)%je;var Xe=Er(nt,He,Qe);if(this.tiles[Xe])return ur(this.tiles[Xe],Ae);Se>1&&console.log("drilling down to z%d-%d-%d",nt,He,Qe);for(var ut=nt,xt=He,dt=Qe,Ot;!Ot&&ut>0;)ut--,xt=Math.floor(xt/2),dt=Math.floor(dt/2),Ot=this.tiles[Er(ut,xt,dt)];return!Ot||!Ot.source?null:(Se>1&&console.log("found parent tile z%d-%d-%d",ut,xt,dt),Se>1&&console.time("drilling down"),this.splitTile(Ot.source,ut,xt,dt,nt,He,Qe),Se>1&&console.timeEnd("drilling down"),this.tiles[Xe]?ur(this.tiles[Xe],Ae):null)};function Er(nt,He,Qe){return((1<<nt)*Qe+He)*32+nt}t(Er,"toID");function dn(nt,He){for(var Qe in He)nt[Qe]=He[Qe];return nt}t(dn,"extend$1");function ya(nt,He){var Qe=nt.tileID.canonical;if(!this._geoJSONIndex)return He(null,null);var ot=this._geoJSONIndex.getTile(Qe.z,Qe.x,Qe.y);if(!ot)return He(null,null);var Ae=new S(ot.features),Se=B(Ae);(Se.byteOffset!==0||Se.byteLength!==Se.buffer.byteLength)&&(Se=new Uint8Array(Se)),He(null,{vectorTile:Ae,rawData:Se.buffer})}t(ya,"loadGeoJSONTile");var Hr=function(nt){function He(Qe,ot,Ae,Se){nt.call(this,Qe,ot,Ae,ya),Se&&(this.loadGeoJSON=Se)}return t(He,"GeoJSONWorkerSource"),nt&&(He.__proto__=nt),He.prototype=Object.create(nt&&nt.prototype),He.prototype.constructor=He,He.prototype.loadData=t(function(ot,Ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ae,this._pendingLoadDataParams=ot,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},"loadData"),He.prototype._loadData=t(function(){var ot=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ae=this._pendingCallback,Se=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var je=Se&&Se.request&&Se.request.collectResourceTiming?new a.RequestPerformance(Se.request):!1;this.loadGeoJSON(Se,function(Xe,ut){if(Xe||!ut)return Ae(Xe);if(typeof ut!="object")return Ae(new Error("Input data given to '"+Se.source+"' is not a valid GeoJSON object."));T(ut,!0);try{ot._geoJSONIndex=Se.cluster?new pe(un(Se)).load(ut.features):Ia(ut,Se.geojsonVtOptions)}catch(Ot){return Ae(Ot)}ot.loaded={};var xt={};if(je){var dt=je.finish();dt&&(xt.resourceTiming={},xt.resourceTiming[Se.source]=JSON.parse(JSON.stringify(dt)))}Ae(null,xt)})}},"_loadData"),He.prototype.coalesce=t(function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},"coalesce"),He.prototype.reloadTile=t(function(ot,Ae){var Se=this.loaded,je=ot.uid;return Se&&Se[je]?nt.prototype.reloadTile.call(this,ot,Ae):this.loadTile(ot,Ae)},"reloadTile"),He.prototype.loadGeoJSON=t(function(ot,Ae){if(ot.request)a.getJSON(ot.request,Ae);else if(typeof ot.data=="string")try{return Ae(null,JSON.parse(ot.data))}catch{return Ae(new Error("Input data given to '"+ot.source+"' is not a valid GeoJSON object."))}else return Ae(new Error("Input data given to '"+ot.source+"' is not a valid GeoJSON object."))},"loadGeoJSON"),He.prototype.removeSource=t(function(ot,Ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ae()},"removeSource"),He.prototype.getClusterExpansionZoom=t(function(ot,Ae){try{Ae(null,this._geoJSONIndex.getClusterExpansionZoom(ot.clusterId))}catch(Se){Ae(Se)}},"getClusterExpansionZoom"),He.prototype.getClusterChildren=t(function(ot,Ae){try{Ae(null,this._geoJSONIndex.getChildren(ot.clusterId))}catch(Se){Ae(Se)}},"getClusterChildren"),He.prototype.getClusterLeaves=t(function(ot,Ae){try{Ae(null,this._geoJSONIndex.getLeaves(ot.clusterId,ot.limit,ot.offset))}catch(Se){Ae(Se)}},"getClusterLeaves"),He}(b);function un(nt){var He=nt.superclusterOptions,Qe=nt.clusterProperties;if(!Qe||!He)return He;for(var ot={},Ae={},Se={accumulated:null,zoom:0},je={properties:null},Xe=Object.keys(Qe),ut=0,xt=Xe;ut<xt.length;ut+=1){var dt=xt[ut],Ot=Qe[dt],Ht=Ot[0],Qt=Ot[1],mr=a.createExpression(Qt),xr=a.createExpression(typeof Ht=="string"?[Ht,["accumulated"],["get",dt]]:Ht);ot[dt]=mr.value,Ae[dt]=xr.value}return He.map=function(Lr){je.properties=Lr;for(var Zr={},Sr=0,xa=Xe;Sr<xa.length;Sr+=1){var aa=xa[Sr];Zr[aa]=ot[aa].evaluate(Se,je)}return Zr},He.reduce=function(Lr,Zr){je.properties=Zr;for(var Sr=0,xa=Xe;Sr<xa.length;Sr+=1){var aa=xa[Sr];Se.accumulated=Lr[aa],Lr[aa]=Ae[aa].evaluate(Se,je)}},He}t(un,"getSuperclusterOptions");var Ea=t(function(He){var Qe=this;this.self=He,this.actor=new a.Actor(He,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:b,geojson:Hr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ot,Ae){if(Qe.workerSourceTypes[ot])throw new Error('Worker source with name "'+ot+'" already registered.');Qe.workerSourceTypes[ot]=Ae},this.self.registerRTLTextPlugin=function(ot){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=ot.applyArabicShaping,a.plugin.processBidirectionalText=ot.processBidirectionalText,a.plugin.processStyledBidirectionalText=ot.processStyledBidirectionalText}},"Worker");return Ea.prototype.setReferrer=t(function(He,Qe){this.referrer=Qe},"setReferrer"),Ea.prototype.setImages=t(function(He,Qe,ot){this.availableImages[He]=Qe;for(var Ae in this.workerSources[He]){var Se=this.workerSources[He][Ae];for(var je in Se)Se[je].availableImages=Qe}ot()},"setImages"),Ea.prototype.setLayers=t(function(He,Qe,ot){this.getLayerIndex(He).replace(Qe),ot()},"setLayers"),Ea.prototype.updateLayers=t(function(He,Qe,ot){this.getLayerIndex(He).update(Qe.layers,Qe.removedIds),ot()},"updateLayers"),Ea.prototype.loadTile=t(function(He,Qe,ot){this.getWorkerSource(He,Qe.type,Qe.source).loadTile(Qe,ot)},"loadTile"),Ea.prototype.loadDEMTile=t(function(He,Qe,ot){this.getDEMWorkerSource(He,Qe.source).loadTile(Qe,ot)},"loadDEMTile"),Ea.prototype.reloadTile=t(function(He,Qe,ot){this.getWorkerSource(He,Qe.type,Qe.source).reloadTile(Qe,ot)},"reloadTile"),Ea.prototype.abortTile=t(function(He,Qe,ot){this.getWorkerSource(He,Qe.type,Qe.source).abortTile(Qe,ot)},"abortTile"),Ea.prototype.removeTile=t(function(He,Qe,ot){this.getWorkerSource(He,Qe.type,Qe.source).removeTile(Qe,ot)},"removeTile"),Ea.prototype.removeDEMTile=t(function(He,Qe){this.getDEMWorkerSource(He,Qe.source).removeTile(Qe)},"removeDEMTile"),Ea.prototype.removeSource=t(function(He,Qe,ot){if(!(!this.workerSources[He]||!this.workerSources[He][Qe.type]||!this.workerSources[He][Qe.type][Qe.source])){var Ae=this.workerSources[He][Qe.type][Qe.source];delete this.workerSources[He][Qe.type][Qe.source],Ae.removeSource!==void 0?Ae.removeSource(Qe,ot):ot()}},"removeSource"),Ea.prototype.loadWorkerSource=t(function(He,Qe,ot){try{this.self.importScripts(Qe.url),ot()}catch(Ae){ot(Ae.toString())}},"loadWorkerSource"),Ea.prototype.syncRTLPluginState=t(function(He,Qe,ot){try{a.plugin.setState(Qe);var Ae=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Ae!=null){this.self.importScripts(Ae);var Se=a.plugin.isParsed(),je=Se?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ae);ot(je,Se)}}catch(Xe){ot(Xe.toString())}},"syncRTLPluginState"),Ea.prototype.getAvailableImages=t(function(He){var Qe=this.availableImages[He];return Qe||(Qe=[]),Qe},"getAvailableImages"),Ea.prototype.getLayerIndex=t(function(He){var Qe=this.layerIndexes[He];return Qe||(Qe=this.layerIndexes[He]=new h),Qe},"getLayerIndex"),Ea.prototype.getWorkerSource=t(function(He,Qe,ot){var Ae=this;if(this.workerSources[He]||(this.workerSources[He]={}),this.workerSources[He][Qe]||(this.workerSources[He][Qe]={}),!this.workerSources[He][Qe][ot]){var Se={send:function(je,Xe,ut){Ae.actor.send(je,Xe,ut,He)}};this.workerSources[He][Qe][ot]=new this.workerSourceTypes[Qe](Se,this.getLayerIndex(He),this.getAvailableImages(He))}return this.workerSources[He][Qe][ot]},"getWorkerSource"),Ea.prototype.getDEMWorkerSource=t(function(He,Qe){return this.demWorkerSources[He]||(this.demWorkerSources[He]={}),this.demWorkerSources[He][Qe]||(this.demWorkerSources[He][Qe]=new y),this.demWorkerSources[He][Qe]},"getDEMWorkerSource"),Ea.prototype.enforceCacheSizeLimit=t(function(He,Qe){a.enforceCacheSizeLimit(Qe)},"enforceCacheSizeLimit$1"),typeof WorkerGlobalScope<"u"&&typeof a.window<"u"&&a.window instanceof WorkerGlobalScope&&(a.window.worker=new Ea(a.window)),Ea}),o(["./shared"],function(a){var l=a.createCommonjsModule(function(Z){Z.exports?Z.exports=N:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=N,window.mapboxgl.notSupportedReason=K);function N(pt){return!K(pt)}t(N,"isSupported");function K(pt){if(!U())return"not a browser";if(!Q())return"insufficent Array support";if(!le())return"insufficient Function support";if(!be())return"insufficient Object support";if(!Me())return"insufficient JSON support";if(!Ie())return"insufficient worker support";if(!Ze())return"insufficient Uint8ClampedArray support";if(!ct())return"insufficient ArrayBuffer support";if(!ht())return"insufficient Canvas/getImageData support";if(!We(pt&&pt.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}t(K,"notSupportedReason");function U(){return typeof window<"u"&&typeof document<"u"}t(U,"isBrowser");function Q(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}t(Q,"isArraySupported");function le(){return Function.prototype&&Function.prototype.bind}t(le,"isFunctionSupported");function be(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}t(be,"isObjectSupported");function Me(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}t(Me,"isJSONSupported");function Ie(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var pt=new Blob([""],{type:"text/javascript"}),bt=URL.createObjectURL(pt),Mt,Dt;try{Dt=new Worker(bt),Mt=!0}catch{Mt=!1}return Dt&&Dt.terminate(),URL.revokeObjectURL(bt),Mt}t(Ie,"isWorkerSupported");function Ze(){return"Uint8ClampedArray"in window}t(Ze,"isUint8ClampedArraySupported");function ct(){return ArrayBuffer.isView}t(ct,"isArrayBufferSupported");function ht(){var pt=document.createElement("canvas");pt.width=pt.height=1;var bt=pt.getContext("2d");if(!bt)return!1;var Mt=bt.getImageData(0,0,1,1);return Mt&&Mt.width===pt.width}t(ht,"isCanvasGetImageDataSupported");var Be={};function We(pt){return Be[pt]===void 0&&(Be[pt]=wt(pt)),Be[pt]}t(We,"isWebGLSupportedCached"),N.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function it(pt){var bt=document.createElement("canvas"),Mt=Object.create(N.webGLContextAttributes);return Mt.failIfMajorPerformanceCaveat=pt,bt.probablySupportsContext?bt.probablySupportsContext("webgl",Mt)||bt.probablySupportsContext("experimental-webgl",Mt):bt.supportsContext?bt.supportsContext("webgl",Mt)||bt.supportsContext("experimental-webgl",Mt):bt.getContext("webgl",Mt)||bt.getContext("experimental-webgl",Mt)}t(it,"getWebGLContext");function wt(pt){var bt=it(pt);if(!bt)return!1;var Mt=bt.createShader(bt.VERTEX_SHADER);return!Mt||bt.isContextLost()?!1:(bt.shaderSource(Mt,"void main() {}"),bt.compileShader(Mt),bt.getShaderParameter(Mt,bt.COMPILE_STATUS)===!0)}t(wt,"isWebGLSupported")}),u={};u.create=function(Z,N,K){var U=a.window.document.createElement(Z);return N!==void 0&&(U.className=N),K&&K.appendChild(U),U},u.createNS=function(Z,N){var K=a.window.document.createElementNS(Z,N);return K};var f=a.window.document.documentElement.style;function h(Z){if(!f)return Z[0];for(var N=0;N<Z.length;N++)if(Z[N]in f)return Z[N];return Z[0]}t(h,"testProp");var v=h(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),c;u.disableDrag=function(){f&&v&&(c=f[v],f[v]="none")},u.enableDrag=function(){f&&v&&(f[v]=c)};var d=h(["transform","WebkitTransform"]);u.setTransform=function(Z,N){Z.style[d]=N};var g=!1;try{var p=Object.defineProperty({},"passive",{get:t(function(){g=!0},"get")});a.window.addEventListener("test",p,p),a.window.removeEventListener("test",p,p)}catch{g=!1}u.addEventListener=function(Z,N,K,U){U===void 0&&(U={}),"passive"in U&&g?Z.addEventListener(N,K,U):Z.addEventListener(N,K,U.capture)},u.removeEventListener=function(Z,N,K,U){U===void 0&&(U={}),"passive"in U&&g?Z.removeEventListener(N,K,U):Z.removeEventListener(N,K,U.capture)};var b=t(function(Z){Z.preventDefault(),Z.stopPropagation(),a.window.removeEventListener("click",b,!0)},"suppressClick");u.suppressClick=function(){a.window.addEventListener("click",b,!0),a.window.setTimeout(function(){a.window.removeEventListener("click",b,!0)},0)},u.mousePos=function(Z,N){var K=Z.getBoundingClientRect();return new a.Point(N.clientX-K.left-Z.clientLeft,N.clientY-K.top-Z.clientTop)},u.touchPos=function(Z,N){for(var K=Z.getBoundingClientRect(),U=[],Q=0;Q<N.length;Q++)U.push(new a.Point(N[Q].clientX-K.left-Z.clientLeft,N[Q].clientY-K.top-Z.clientTop));return U},u.mouseButton=function(Z){return typeof a.window.InstallTrigger<"u"&&Z.button===2&&Z.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:Z.button},u.remove=function(Z){Z.parentNode&&Z.parentNode.removeChild(Z)};function m(Z,N,K){var U,Q,le,be=a.browser.devicePixelRatio>1?"@2x":"",Me=a.getJSON(N.transformRequest(N.normalizeSpriteURL(Z,be,".json"),a.ResourceType.SpriteJSON),function(ct,ht){Me=null,le||(le=ct,U=ht,Ze())}),Ie=a.getImage(N.transformRequest(N.normalizeSpriteURL(Z,be,".png"),a.ResourceType.SpriteImage),function(ct,ht){Ie=null,le||(le=ct,Q=ht,Ze())});function Ze(){if(le)K(le);else if(U&&Q){var ct=a.browser.getImageData(Q),ht={};for(var Be in U){var We=U[Be],it=We.width,wt=We.height,pt=We.x,bt=We.y,Mt=We.sdf,Dt=We.pixelRatio,St=We.stretchX,Ft=We.stretchY,Lt=We.content,Xt=new a.RGBAImage({width:it,height:wt});a.RGBAImage.copy(ct,Xt,{x:pt,y:bt},{x:0,y:0},{width:it,height:wt}),ht[Be]={data:Xt,pixelRatio:Dt,sdf:Mt,stretchX:St,stretchY:Ft,content:Lt}}K(null,ht)}}return t(Ze,"maybeComplete"),{cancel:t(function(){Me&&(Me.cancel(),Me=null),Ie&&(Ie.cancel(),Ie=null)},"cancel")}}t(m,"loadSprite");function y(Z){var N=Z.userImage;if(N&&N.render){var K=N.render();if(K)return Z.data.replace(new Uint8Array(N.data.buffer)),!0}return!1}t(y,"renderStyleImage");var T=1,_=function(Z){function N(){Z.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return t(N,"ImageManager"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.isLoaded=t(function(){return this.loaded},"isLoaded"),N.prototype.setLoaded=t(function(U){if(this.loaded!==U&&(this.loaded=U,U)){for(var Q=0,le=this.requestors;Q<le.length;Q+=1){var be=le[Q],Me=be.ids,Ie=be.callback;this._notify(Me,Ie)}this.requestors=[]}},"setLoaded"),N.prototype.getImage=t(function(U){return this.images[U]},"getImage"),N.prototype.addImage=t(function(U,Q){this._validate(U,Q)&&(this.images[U]=Q)},"addImage"),N.prototype._validate=t(function(U,Q){var le=!0;return this._validateStretch(Q.stretchX,Q.data&&Q.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+U+'" has invalid "stretchX" value'))),le=!1),this._validateStretch(Q.stretchY,Q.data&&Q.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+U+'" has invalid "stretchY" value'))),le=!1),this._validateContent(Q.content,Q)||(this.fire(new a.ErrorEvent(new Error('Image "'+U+'" has invalid "content" value'))),le=!1),le},"_validate"),N.prototype._validateStretch=t(function(U,Q){if(!U)return!0;for(var le=0,be=0,Me=U;be<Me.length;be+=1){var Ie=Me[be];if(Ie[0]<le||Ie[1]<Ie[0]||Q<Ie[1])return!1;le=Ie[1]}return!0},"_validateStretch"),N.prototype._validateContent=t(function(U,Q){return U?!(U.length!==4||U[0]<0||Q.data.width<U[0]||U[1]<0||Q.data.height<U[1]||U[2]<0||Q.data.width<U[2]||U[3]<0||Q.data.height<U[3]||U[2]<U[0]||U[3]<U[1]):!0},"_validateContent"),N.prototype.updateImage=t(function(U,Q){var le=this.images[U];Q.version=le.version+1,this.images[U]=Q,this.updatedImages[U]=!0},"updateImage"),N.prototype.removeImage=t(function(U){var Q=this.images[U];delete this.images[U],delete this.patterns[U],Q.userImage&&Q.userImage.onRemove&&Q.userImage.onRemove()},"removeImage"),N.prototype.listImages=t(function(){return Object.keys(this.images)},"listImages"),N.prototype.getImages=t(function(U,Q){var le=!0;if(!this.isLoaded())for(var be=0,Me=U;be<Me.length;be+=1){var Ie=Me[be];this.images[Ie]||(le=!1)}this.isLoaded()||le?this._notify(U,Q):this.requestors.push({ids:U,callback:Q})},"getImages"),N.prototype._notify=t(function(U,Q){for(var le={},be=0,Me=U;be<Me.length;be+=1){var Ie=Me[be];this.images[Ie]||this.fire(new a.Event("styleimagemissing",{id:Ie}));var Ze=this.images[Ie];Ze?le[Ie]={data:Ze.data.clone(),pixelRatio:Ze.pixelRatio,sdf:Ze.sdf,version:Ze.version,stretchX:Ze.stretchX,stretchY:Ze.stretchY,content:Ze.content,hasRenderCallback:Boolean(Ze.userImage&&Ze.userImage.render)}:a.warnOnce('Image "'+Ie+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}Q(null,le)},"_notify"),N.prototype.getPixelSize=t(function(){var U=this.atlasImage,Q=U.width,le=U.height;return{width:Q,height:le}},"getPixelSize"),N.prototype.getPattern=t(function(U){var Q=this.patterns[U],le=this.getImage(U);if(!le)return null;if(Q&&Q.position.version===le.version)return Q.position;if(Q)Q.position.version=le.version;else{var be=le.data.width+T*2,Me=le.data.height+T*2,Ie={w:be,h:Me,x:0,y:0},Ze=new a.ImagePosition(Ie,le);this.patterns[U]={bin:Ie,position:Ze}}return this._updatePatternAtlas(),this.patterns[U].position},"getPattern"),N.prototype.bind=t(function(U){var Q=U.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(U,this.atlasImage,Q.RGBA),this.atlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)},"bind"),N.prototype._updatePatternAtlas=t(function(){var U=[];for(var Q in this.patterns)U.push(this.patterns[Q].bin);var le=a.potpack(U),be=le.w,Me=le.h,Ie=this.atlasImage;Ie.resize({width:be||1,height:Me||1});for(var Ze in this.patterns){var ct=this.patterns[Ze],ht=ct.bin,Be=ht.x+T,We=ht.y+T,it=this.images[Ze].data,wt=it.width,pt=it.height;a.RGBAImage.copy(it,Ie,{x:0,y:0},{x:Be,y:We},{width:wt,height:pt}),a.RGBAImage.copy(it,Ie,{x:0,y:pt-1},{x:Be,y:We-1},{width:wt,height:1}),a.RGBAImage.copy(it,Ie,{x:0,y:0},{x:Be,y:We+pt},{width:wt,height:1}),a.RGBAImage.copy(it,Ie,{x:wt-1,y:0},{x:Be-1,y:We},{width:1,height:pt}),a.RGBAImage.copy(it,Ie,{x:0,y:0},{x:Be+wt,y:We},{width:1,height:pt})}this.dirty=!0},"_updatePatternAtlas"),N.prototype.beginFrame=t(function(){this.callbackDispatchedThisFrame={}},"beginFrame"),N.prototype.dispatchRenderCallbacks=t(function(U){for(var Q=0,le=U;Q<le.length;Q+=1){var be=le[Q];if(!this.callbackDispatchedThisFrame[be]){this.callbackDispatchedThisFrame[be]=!0;var Me=this.images[be],Ie=y(Me);Ie&&this.updateImage(be,Me)}}},"dispatchRenderCallbacks"),N}(a.Evented);function M(Z,N,K,U,Q){var le=N*256,be=le+255,Me=U.transformRequest(U.normalizeGlyphsURL(K).replace("{fontstack}",Z).replace("{range}",le+"-"+be),a.ResourceType.Glyphs);a.getArrayBuffer(Me,function(Ie,Ze){if(Ie)Q(Ie);else if(Ze){for(var ct={},ht=0,Be=a.parseGlyphPBF(Ze);ht<Be.length;ht+=1){var We=Be[ht];ct[We.id]=We}Q(null,ct)}})}t(M,"loadGlyphRange");var w=S,x=S,A=1e20;function S(Z,N,K,U,Q,le){this.fontSize=Z||24,this.buffer=N===void 0?3:N,this.cutoff=U||.25,this.fontFamily=Q||"sans-serif",this.fontWeight=le||"normal",this.radius=K||8;var be=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=be,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(be*be),this.gridInner=new Float64Array(be*be),this.f=new Float64Array(be),this.d=new Float64Array(be),this.z=new Float64Array(be+1),this.v=new Int16Array(be),this.middle=Math.round(be/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}t(S,"TinySDF"),S.prototype.draw=function(Z){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(Z,this.buffer,this.middle);for(var N=this.ctx.getImageData(0,0,this.size,this.size),K=new Uint8ClampedArray(this.size*this.size),U=0;U<this.size*this.size;U++){var Q=N.data[U*4+3]/255;this.gridOuter[U]=Q===1?0:Q===0?A:Math.pow(Math.max(0,.5-Q),2),this.gridInner[U]=Q===1?A:Q===0?0:Math.pow(Math.max(0,Q-.5),2)}for(k(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),k(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),U=0;U<this.size*this.size;U++){var le=this.gridOuter[U]-this.gridInner[U];K[U]=Math.max(0,Math.min(255,Math.round(255-255*(le/this.radius+this.cutoff))))}return K};function k(Z,N,K,U,Q,le,be){for(var Me=0;Me<N;Me++){for(var Ie=0;Ie<K;Ie++)U[Ie]=Z[Ie*N+Me];for(L(U,Q,le,be,K),Ie=0;Ie<K;Ie++)Z[Ie*N+Me]=Q[Ie]}for(Ie=0;Ie<K;Ie++){for(Me=0;Me<N;Me++)U[Me]=Z[Ie*N+Me];for(L(U,Q,le,be,N),Me=0;Me<N;Me++)Z[Ie*N+Me]=Math.sqrt(Q[Me])}}t(k,"edt");function L(Z,N,K,U,Q){K[0]=0,U[0]=-A,U[1]=+A;for(var le=1,be=0;le<Q;le++){for(var Me=(Z[le]+le*le-(Z[K[be]]+K[be]*K[be]))/(2*le-2*K[be]);Me<=U[be];)be--,Me=(Z[le]+le*le-(Z[K[be]]+K[be]*K[be]))/(2*le-2*K[be]);be++,K[be]=le,U[be]=Me,U[be+1]=+A}for(le=0,be=0;le<Q;le++){for(;U[be+1]<le;)be++;N[le]=(le-K[be])*(le-K[be])+Z[K[be]]}}t(L,"edt1d"),w.default=x;var P=t(function(N,K){this.requestManager=N,this.localIdeographFontFamily=K,this.entries={}},"GlyphManager");P.prototype.setURL=t(function(N){this.url=N},"setURL"),P.prototype.getGlyphs=t(function(N,K){var U=this,Q=[];for(var le in N)for(var be=0,Me=N[le];be<Me.length;be+=1){var Ie=Me[be];Q.push({stack:le,id:Ie})}a.asyncAll(Q,function(Ze,ct){var ht=Ze.stack,Be=Ze.id,We=U.entries[ht];We||(We=U.entries[ht]={glyphs:{},requests:{},ranges:{}});var it=We.glyphs[Be];if(it!==void 0){ct(null,{stack:ht,id:Be,glyph:it});return}if(it=U._tinySDF(We,ht,Be),it){We.glyphs[Be]=it,ct(null,{stack:ht,id:Be,glyph:it});return}var wt=Math.floor(Be/256);if(wt*256>65535){ct(new Error("glyphs > 65535 not supported"));return}if(We.ranges[wt]){ct(null,{stack:ht,id:Be,glyph:it});return}var pt=We.requests[wt];pt||(pt=We.requests[wt]=[],P.loadGlyphRange(ht,wt,U.url,U.requestManager,function(bt,Mt){if(Mt){for(var Dt in Mt)U._doesCharSupportLocalGlyph(+Dt)||(We.glyphs[+Dt]=Mt[+Dt]);We.ranges[wt]=!0}for(var St=0,Ft=pt;St<Ft.length;St+=1){var Lt=Ft[St];Lt(bt,Mt)}delete We.requests[wt]})),pt.push(function(bt,Mt){bt?ct(bt):Mt&&ct(null,{stack:ht,id:Be,glyph:Mt[Be]||null})})},function(Ze,ct){if(Ze)K(Ze);else if(ct){for(var ht={},Be=0,We=ct;Be<We.length;Be+=1){var it=We[Be],wt=it.stack,pt=it.id,bt=it.glyph;(ht[wt]||(ht[wt]={}))[pt]=bt&&{id:bt.id,bitmap:bt.bitmap.clone(),metrics:bt.metrics}}K(null,ht)}})},"getGlyphs"),P.prototype._doesCharSupportLocalGlyph=t(function(N){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](N)||a.isChar["Hangul Syllables"](N)||a.isChar.Hiragana(N)||a.isChar.Katakana(N))},"_doesCharSupportLocalGlyph"),P.prototype._tinySDF=t(function(N,K,U){var Q=this.localIdeographFontFamily;if(!!Q&&!!this._doesCharSupportLocalGlyph(U)){var le=N.tinySDF;if(!le){var be="400";/bold/i.test(K)?be="900":/medium/i.test(K)?be="500":/light/i.test(K)&&(be="200"),le=N.tinySDF=new P.TinySDF(24,3,8,.25,Q,be)}return{id:U,bitmap:new a.AlphaImage({width:30,height:30},le.draw(String.fromCharCode(U))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},"_tinySDF"),P.loadGlyphRange=M,P.TinySDF=w;var D=t(function(){this.specification=a.styleSpec.light.position},"LightPositionProperty");D.prototype.possiblyEvaluate=t(function(N,K){return a.sphericalToCartesian(N.expression.evaluate(K))},"possiblyEvaluate"),D.prototype.interpolate=t(function(N,K,U){return{x:a.number(N.x,K.x,U),y:a.number(N.y,K.y,U),z:a.number(N.z,K.z,U)}},"interpolate$1");var B=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new D,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),z="-transition",R=function(Z){function N(K){Z.call(this),this._transitionable=new a.Transitionable(B),this.setLight(K),this._transitioning=this._transitionable.untransitioned()}return t(N,"Light"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getLight=t(function(){return this._transitionable.serialize()},"getLight"),N.prototype.setLight=t(function(U,Q){if(Q===void 0&&(Q={}),!this._validate(a.validateLight,U,Q))for(var le in U){var be=U[le];a.endsWith(le,z)?this._transitionable.setTransition(le.slice(0,-z.length),be):this._transitionable.setValue(le,be)}},"setLight"),N.prototype.updateTransitions=t(function(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)},"updateTransitions"),N.prototype.hasTransition=t(function(){return this._transitioning.hasTransition()},"hasTransition"),N.prototype.recalculate=t(function(U){this.properties=this._transitioning.possiblyEvaluate(U)},"recalculate"),N.prototype._validate=t(function(U,Q,le){return le&&le.validate===!1?!1:a.emitValidationErrors(this,U.call(a.validateStyle,a.extend({value:Q,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},"_validate"),N}(a.Evented),F=t(function(N,K){this.width=N,this.height=K,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}},"LineAtlas");F.prototype.getDash=t(function(N,K){var U=N.join(",")+String(K);return this.dashEntry[U]||(this.dashEntry[U]=this.addDash(N,K)),this.dashEntry[U]},"getDash"),F.prototype.getDashRanges=t(function(N,K,U){var Q=N.length%2===1,le=[],be=Q?-N[N.length-1]*U:0,Me=N[0]*U,Ie=!0;le.push({left:be,right:Me,isDash:Ie,zeroLength:N[0]===0});for(var Ze=N[0],ct=1;ct<N.length;ct++){Ie=!Ie;var ht=N[ct];be=Ze*U,Ze+=ht,Me=Ze*U,le.push({left:be,right:Me,isDash:Ie,zeroLength:ht===0})}return le},"getDashRanges"),F.prototype.addRoundDash=t(function(N,K,U){for(var Q=K/2,le=-U;le<=U;le++)for(var be=this.nextRow+U+le,Me=this.width*be,Ie=0,Ze=N[Ie],ct=0;ct<this.width;ct++){ct/Ze.right>1&&(Ze=N[++Ie]);var ht=Math.abs(ct-Ze.left),Be=Math.abs(ct-Ze.right),We=Math.min(ht,Be),it=void 0,wt=le/U*(Q+1);if(Ze.isDash){var pt=Q-Math.abs(wt);it=Math.sqrt(We*We+pt*pt)}else it=Q-Math.sqrt(We*We+wt*wt);this.data[Me+ct]=Math.max(0,Math.min(255,it+128))}},"addRoundDash"),F.prototype.addRegularDash=t(function(N){for(var K=N.length-1;K>=0;--K){var U=N[K],Q=N[K+1];U.zeroLength?N.splice(K,1):Q&&Q.isDash===U.isDash&&(Q.left=U.left,N.splice(K,1))}var le=N[0],be=N[N.length-1];le.isDash===be.isDash&&(le.left=be.left-this.width,be.right=le.right+this.width);for(var Me=this.width*this.nextRow,Ie=0,Ze=N[Ie],ct=0;ct<this.width;ct++){ct/Ze.right>1&&(Ze=N[++Ie]);var ht=Math.abs(ct-Ze.left),Be=Math.abs(ct-Ze.right),We=Math.min(ht,Be),it=Ze.isDash?We:-We;this.data[Me+ct]=Math.max(0,Math.min(255,it+128))}},"addRegularDash"),F.prototype.addDash=t(function(N,K){var U=K?7:0,Q=2*U+1;if(this.nextRow+Q>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var le=0,be=0;be<N.length;be++)le+=N[be];if(le!==0){var Me=this.width/le,Ie=this.getDashRanges(N,this.width,Me);K?this.addRoundDash(Ie,Me,U):this.addRegularDash(Ie)}var Ze={y:(this.nextRow+U+.5)/this.height,height:2*U/this.height,width:le};return this.nextRow+=Q,this.dirty=!0,Ze},"addDash"),F.prototype.bind=t(function(N){var K=N.gl;this.texture?(K.bindTexture(K.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,K.texSubImage2D(K.TEXTURE_2D,0,0,0,this.width,this.height,K.ALPHA,K.UNSIGNED_BYTE,this.data))):(this.texture=K.createTexture(),K.bindTexture(K.TEXTURE_2D,this.texture),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.REPEAT),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.REPEAT),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR),K.texImage2D(K.TEXTURE_2D,0,K.ALPHA,this.width,this.height,0,K.ALPHA,K.UNSIGNED_BYTE,this.data))},"bind");var O=t(function Z(N,K){this.workerPool=N,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var U=this.workerPool.acquire(this.id),Q=0;Q<U.length;Q++){var le=U[Q],be=new Z.Actor(le,K,this.id);be.name="Worker "+Q,this.actors.push(be)}},"Dispatcher");O.prototype.broadcast=t(function(N,K,U){U=U||function(){},a.asyncAll(this.actors,function(Q,le){Q.send(N,K,le)},U)},"broadcast"),O.prototype.getActor=t(function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},"getActor"),O.prototype.remove=t(function(){this.actors.forEach(function(N){N.remove()}),this.actors=[],this.workerPool.release(this.id)},"remove"),O.Actor=a.Actor;function q(Z,N,K){var U=t(function(Q,le){if(Q)return K(Q);if(le){var be=a.pick(a.extend(le,Z),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);le.vector_layers&&(be.vectorLayers=le.vector_layers,be.vectorLayerIds=be.vectorLayers.map(function(Me){return Me.id})),be.tiles=N.canonicalizeTileset(be,Z.url),K(null,be)}},"loaded");return Z.url?a.getJSON(N.transformRequest(N.normalizeSourceURL(Z.url),a.ResourceType.Source),U):a.browser.frame(function(){return U(null,Z)})}t(q,"loadTileJSON");var H=t(function(N,K,U){this.bounds=a.LngLatBounds.convert(this.validateBounds(N)),this.minzoom=K||0,this.maxzoom=U||24},"TileBounds");H.prototype.validateBounds=t(function(N){return!Array.isArray(N)||N.length!==4?[-180,-90,180,90]:[Math.max(-180,N[0]),Math.max(-90,N[1]),Math.min(180,N[2]),Math.min(90,N[3])]},"validateBounds"),H.prototype.contains=t(function(N){var K=Math.pow(2,N.z),U={minX:Math.floor(a.mercatorXfromLng(this.bounds.getWest())*K),minY:Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*K),maxX:Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*K),maxY:Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*K)},Q=N.x>=U.minX&&N.x<U.maxX&&N.y>=U.minY&&N.y<U.maxY;return Q},"contains");var j=function(Z){function N(K,U,Q,le){if(Z.call(this),this.id=K,this.dispatcher=Q,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(U,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},U),this._collectResourceTiming=U.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(le)}return t(N,"VectorTileSource"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.load=t(function(){var U=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=q(this._options,this.map._requestManager,function(Q,le){U._tileJSONRequest=null,U._loaded=!0,Q?U.fire(new a.ErrorEvent(Q)):le&&(a.extend(U,le),le.bounds&&(U.tileBounds=new H(le.bounds,U.minzoom,U.maxzoom)),a.postTurnstileEvent(le.tiles,U.map._requestManager._customAccessToken),a.postMapLoadEvent(le.tiles,U.map._getMapId(),U.map._requestManager._skuToken,U.map._requestManager._customAccessToken),U.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},"load"),N.prototype.loaded=t(function(){return this._loaded},"loaded"),N.prototype.hasTile=t(function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)},"hasTile"),N.prototype.onAdd=t(function(U){this.map=U,this.load()},"onAdd"),N.prototype.onRemove=t(function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},"onRemove"),N.prototype.serialize=t(function(){return a.extend({},this._options)},"serialize"),N.prototype.loadTile=t(function(U,Q){var le=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme)),be={request:this.map._requestManager.transformRequest(le,a.ResourceType.Tile),uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,tileSize:this.tileSize*U.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};be.request.collectResourceTiming=this._collectResourceTiming,!U.actor||U.state==="expired"?(U.actor=this.dispatcher.getActor(),U.request=U.actor.send("loadTile",be,Me.bind(this))):U.state==="loading"?U.reloadCallback=Q:U.request=U.actor.send("reloadTile",be,Me.bind(this));function Me(Ie,Ze){if(delete U.request,U.aborted)return Q(null);if(Ie&&Ie.status!==404)return Q(Ie);Ze&&Ze.resourceTiming&&(U.resourceTiming=Ze.resourceTiming),this.map._refreshExpiredTiles&&Ze&&U.setExpiryData(Ze),U.loadVectorData(Ze,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),Q(null),U.reloadCallback&&(this.loadTile(U,U.reloadCallback),U.reloadCallback=null)}t(Me,"done")},"loadTile"),N.prototype.abortTile=t(function(U){U.request&&(U.request.cancel(),delete U.request),U.actor&&U.actor.send("abortTile",{uid:U.uid,type:this.type,source:this.id},void 0)},"abortTile"),N.prototype.unloadTile=t(function(U){U.unloadVectorData(),U.actor&&U.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id},void 0)},"unloadTile"),N.prototype.hasTransition=t(function(){return!1},"hasTransition"),N}(a.Evented),X=function(Z){function N(K,U,Q,le){Z.call(this),this.id=K,this.dispatcher=Q,this.setEventedParent(le),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},U),a.extend(this,a.pick(U,["url","scheme","tileSize"]))}return t(N,"RasterTileSource"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.load=t(function(){var U=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=q(this._options,this.map._requestManager,function(Q,le){U._tileJSONRequest=null,U._loaded=!0,Q?U.fire(new a.ErrorEvent(Q)):le&&(a.extend(U,le),le.bounds&&(U.tileBounds=new H(le.bounds,U.minzoom,U.maxzoom)),a.postTurnstileEvent(le.tiles),a.postMapLoadEvent(le.tiles,U.map._getMapId(),U.map._requestManager._skuToken),U.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},"load"),N.prototype.loaded=t(function(){return this._loaded},"loaded"),N.prototype.onAdd=t(function(U){this.map=U,this.load()},"onAdd"),N.prototype.onRemove=t(function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},"onRemove"),N.prototype.serialize=t(function(){return a.extend({},this._options)},"serialize"),N.prototype.hasTile=t(function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)},"hasTile"),N.prototype.loadTile=t(function(U,Q){var le=this,be=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);U.request=a.getImage(this.map._requestManager.transformRequest(be,a.ResourceType.Tile),function(Me,Ie){if(delete U.request,U.aborted)U.state="unloaded",Q(null);else if(Me)U.state="errored",Q(Me);else if(Ie){le.map._refreshExpiredTiles&&U.setExpiryData(Ie),delete Ie.cacheControl,delete Ie.expires;var Ze=le.map.painter.context,ct=Ze.gl;U.texture=le.map.painter.getTileTexture(Ie.width),U.texture?U.texture.update(Ie,{useMipmap:!0}):(U.texture=new a.Texture(Ze,Ie,ct.RGBA,{useMipmap:!0}),U.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE,ct.LINEAR_MIPMAP_NEAREST),Ze.extTextureFilterAnisotropic&&ct.texParameterf(ct.TEXTURE_2D,Ze.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ze.extTextureFilterAnisotropicMax)),U.state="loaded",a.cacheEntryPossiblyAdded(le.dispatcher),Q(null)}})},"loadTile"),N.prototype.abortTile=t(function(U,Q){U.request&&(U.request.cancel(),delete U.request),Q()},"abortTile"),N.prototype.unloadTile=t(function(U,Q){U.texture&&this.map.painter.saveTileTexture(U.texture),Q()},"unloadTile"),N.prototype.hasTransition=t(function(){return!1},"hasTransition"),N}(a.Evented),G=function(Z){function N(K,U,Q,le){Z.call(this,K,U,Q,le),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},U),this.encoding=U.encoding||"mapbox"}return t(N,"RasterDEMTileSource"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.serialize=t(function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},"serialize"),N.prototype.loadTile=t(function(U,Q){var le=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);U.request=a.getImage(this.map._requestManager.transformRequest(le,a.ResourceType.Tile),be.bind(this)),U.neighboringTiles=this._getNeighboringTiles(U.tileID);function be(Ie,Ze){if(delete U.request,U.aborted)U.state="unloaded",Q(null);else if(Ie)U.state="errored",Q(Ie);else if(Ze){this.map._refreshExpiredTiles&&U.setExpiryData(Ze),delete Ze.cacheControl,delete Ze.expires;var ct=a.window.ImageBitmap&&Ze instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported(),ht=ct?Ze:a.browser.getImageData(Ze,1),Be={uid:U.uid,coord:U.tileID,source:this.id,rawImageData:ht,encoding:this.encoding};(!U.actor||U.state==="expired")&&(U.actor=this.dispatcher.getActor(),U.actor.send("loadDEMTile",Be,Me.bind(this)))}}t(be,"imageLoaded");function Me(Ie,Ze){Ie&&(U.state="errored",Q(Ie)),Ze&&(U.dem=Ze,U.needsHillshadePrepare=!0,U.state="loaded",Q(null))}t(Me,"done")},"loadTile"),N.prototype._getNeighboringTiles=t(function(U){var Q=U.canonical,le=Math.pow(2,Q.z),be=(Q.x-1+le)%le,Me=Q.x===0?U.wrap-1:U.wrap,Ie=(Q.x+1+le)%le,Ze=Q.x+1===le?U.wrap+1:U.wrap,ct={};return ct[new a.OverscaledTileID(U.overscaledZ,Me,Q.z,be,Q.y).key]={backfilled:!1},ct[new a.OverscaledTileID(U.overscaledZ,Ze,Q.z,Ie,Q.y).key]={backfilled:!1},Q.y>0&&(ct[new a.OverscaledTileID(U.overscaledZ,Me,Q.z,be,Q.y-1).key]={backfilled:!1},ct[new a.OverscaledTileID(U.overscaledZ,U.wrap,Q.z,Q.x,Q.y-1).key]={backfilled:!1},ct[new a.OverscaledTileID(U.overscaledZ,Ze,Q.z,Ie,Q.y-1).key]={backfilled:!1}),Q.y+1<le&&(ct[new a.OverscaledTileID(U.overscaledZ,Me,Q.z,be,Q.y+1).key]={backfilled:!1},ct[new a.OverscaledTileID(U.overscaledZ,U.wrap,Q.z,Q.x,Q.y+1).key]={backfilled:!1},ct[new a.OverscaledTileID(U.overscaledZ,Ze,Q.z,Ie,Q.y+1).key]={backfilled:!1}),ct},"_getNeighboringTiles"),N.prototype.unloadTile=t(function(U){U.demTexture&&this.map.painter.saveTileTexture(U.demTexture),U.fbo&&(U.fbo.destroy(),delete U.fbo),U.dem&&delete U.dem,delete U.neighboringTiles,U.state="unloaded",U.actor&&U.actor.send("removeDEMTile",{uid:U.uid,source:this.id})},"unloadTile"),N}(X),$=function(Z){function N(K,U,Q,le){Z.call(this),this.id=K,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Q.getActor(),this.setEventedParent(le),this._data=U.data,this._options=a.extend({},U),this._collectResourceTiming=U.collectResourceTiming,this._resourceTiming=[],U.maxzoom!==void 0&&(this.maxzoom=U.maxzoom),U.type&&(this.type=U.type),U.attribution&&(this.attribution=U.attribution),this.promoteId=U.promoteId;var be=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:U.cluster||!1,geojsonVtOptions:{buffer:(U.buffer!==void 0?U.buffer:128)*be,tolerance:(U.tolerance!==void 0?U.tolerance:.375)*be,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:U.lineMetrics||!1,generateId:U.generateId||!1},superclusterOptions:{maxZoom:U.clusterMaxZoom!==void 0?Math.min(U.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(U.clusterRadius||50)*be,log:!1,generateId:U.generateId||!1},clusterProperties:U.clusterProperties},U.workerOptions)}return t(N,"GeoJSONSource"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.load=t(function(){var U=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Q){if(Q){U.fire(new a.ErrorEvent(Q));return}var le={dataType:"source",sourceDataType:"metadata"};U._collectResourceTiming&&U._resourceTiming&&U._resourceTiming.length>0&&(le.resourceTiming=U._resourceTiming,U._resourceTiming=[]),U.fire(new a.Event("data",le))})},"load"),N.prototype.onAdd=t(function(U){this.map=U,this.load()},"onAdd"),N.prototype.setData=t(function(U){var Q=this;return this._data=U,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(le){if(le){Q.fire(new a.ErrorEvent(le));return}var be={dataType:"source",sourceDataType:"content"};Q._collectResourceTiming&&Q._resourceTiming&&Q._resourceTiming.length>0&&(be.resourceTiming=Q._resourceTiming,Q._resourceTiming=[]),Q.fire(new a.Event("data",be))}),this},"setData"),N.prototype.getClusterExpansionZoom=t(function(U,Q){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:U,source:this.id},Q),this},"getClusterExpansionZoom"),N.prototype.getClusterChildren=t(function(U,Q){return this.actor.send("geojson.getClusterChildren",{clusterId:U,source:this.id},Q),this},"getClusterChildren"),N.prototype.getClusterLeaves=t(function(U,Q,le,be){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:U,limit:Q,offset:le},be),this},"getClusterLeaves"),N.prototype._updateWorkerData=t(function(U){var Q=this;this._loaded=!1;var le=a.extend({},this.workerOptions),be=this._data;typeof be=="string"?(le.request=this.map._requestManager.transformRequest(a.browser.resolveURL(be),a.ResourceType.Source),le.request.collectResourceTiming=this._collectResourceTiming):le.data=JSON.stringify(be),this.actor.send(this.type+".loadData",le,function(Me,Ie){Q._removed||Ie&&Ie.abandoned||(Q._loaded=!0,Ie&&Ie.resourceTiming&&Ie.resourceTiming[Q.id]&&(Q._resourceTiming=Ie.resourceTiming[Q.id].slice(0)),Q.actor.send(Q.type+".coalesce",{source:le.source},null),U(Me))})},"_updateWorkerData"),N.prototype.loaded=t(function(){return this._loaded},"loaded"),N.prototype.loadTile=t(function(U,Q){var le=this,be=U.actor?"reloadTile":"loadTile";U.actor=this.actor;var Me={type:this.type,uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};U.request=this.actor.send(be,Me,function(Ie,Ze){return delete U.request,U.unloadVectorData(),U.aborted?Q(null):Ie?Q(Ie):(U.loadVectorData(Ze,le.map.painter,be==="reloadTile"),Q(null))})},"loadTile"),N.prototype.abortTile=t(function(U){U.request&&(U.request.cancel(),delete U.request),U.aborted=!0},"abortTile"),N.prototype.unloadTile=t(function(U){U.unloadVectorData(),this.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id})},"unloadTile"),N.prototype.onRemove=t(function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},"onRemove"),N.prototype.serialize=t(function(){return a.extend({},this._options,{type:this.type,data:this._data})},"serialize"),N.prototype.hasTransition=t(function(){return!1},"hasTransition"),N}(a.Evented),te=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ee=function(Z){function N(K,U,Q,le){Z.call(this),this.id=K,this.dispatcher=Q,this.coordinates=U.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(le),this.options=U}return t(N,"ImageSource"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.load=t(function(U,Q){var le=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(be,Me){le._loaded=!0,be?le.fire(new a.ErrorEvent(be)):Me&&(le.image=Me,U&&(le.coordinates=U),Q&&Q(),le._finishLoading())})},"load"),N.prototype.loaded=t(function(){return this._loaded},"loaded"),N.prototype.updateImage=t(function(U){var Q=this;return!this.image||!U.url?this:(this.options.url=U.url,this.load(U.coordinates,function(){Q.texture=null}),this)},"updateImage"),N.prototype._finishLoading=t(function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},"_finishLoading"),N.prototype.onAdd=t(function(U){this.map=U,this.load()},"onAdd"),N.prototype.setCoordinates=t(function(U){var Q=this;this.coordinates=U;var le=U.map(a.MercatorCoordinate.fromLngLat);this.tileID=ie(le),this.minzoom=this.maxzoom=this.tileID.z;var be=le.map(function(Me){return Q.tileID.getTilePoint(Me)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(be[0].x,be[0].y,0,0),this._boundsArray.emplaceBack(be[1].x,be[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(be[3].x,be[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(be[2].x,be[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},"setCoordinates"),N.prototype.prepare=t(function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var U=this.map.painter.context,Q=U.gl;this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(U,this.image,Q.RGBA),this.texture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE));for(var le in this.tiles){var be=this.tiles[le];be.state!=="loaded"&&(be.state="loaded",be.texture=this.texture)}}},"prepare"),N.prototype.loadTile=t(function(U,Q){this.tileID&&this.tileID.equals(U.tileID.canonical)?(this.tiles[String(U.tileID.wrap)]=U,U.buckets={},Q(null)):(U.state="errored",Q(null))},"loadTile"),N.prototype.serialize=t(function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},"serialize"),N.prototype.hasTransition=t(function(){return!1},"hasTransition"),N}(a.Evented);function ie(Z){for(var N=1/0,K=1/0,U=-1/0,Q=-1/0,le=0,be=Z;le<be.length;le+=1){var Me=be[le];N=Math.min(N,Me.x),K=Math.min(K,Me.y),U=Math.max(U,Me.x),Q=Math.max(Q,Me.y)}var Ie=U-N,Ze=Q-K,ct=Math.max(Ie,Ze),ht=Math.max(0,Math.floor(-Math.log(ct)/Math.LN2)),Be=Math.pow(2,ht);return new a.CanonicalTileID(ht,Math.floor((N+U)/2*Be),Math.floor((K+Q)/2*Be))}t(ie,"getCoordinatesCenterTileID");var se=function(Z){function N(K,U,Q,le){Z.call(this,K,U,Q,le),this.roundZoom=!0,this.type="video",this.options=U}return t(N,"VideoSource"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.load=t(function(){var U=this;this._loaded=!1;var Q=this.options;this.urls=[];for(var le=0,be=Q.urls;le<be.length;le+=1){var Me=be[le];this.urls.push(this.map._requestManager.transformRequest(Me,a.ResourceType.Source).url)}a.getVideo(this.urls,function(Ie,Ze){U._loaded=!0,Ie?U.fire(new a.ErrorEvent(Ie)):Ze&&(U.video=Ze,U.video.loop=!0,U.video.addEventListener("playing",function(){U.map.triggerRepaint()}),U.map&&U.video.play(),U._finishLoading())})},"load"),N.prototype.pause=t(function(){this.video&&this.video.pause()},"pause"),N.prototype.play=t(function(){this.video&&this.video.play()},"play"),N.prototype.seek=t(function(U){if(this.video){var Q=this.video.seekable;U<Q.start(0)||U>Q.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+Q.start(0)+" and "+Q.end(0)+"-second mark."))):this.video.currentTime=U}},"seek"),N.prototype.getVideo=t(function(){return this.video},"getVideo"),N.prototype.onAdd=t(function(U){this.map||(this.map=U,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},"onAdd"),N.prototype.prepare=t(function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var U=this.map.painter.context,Q=U.gl;this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Q.texSubImage2D(Q.TEXTURE_2D,0,0,0,Q.RGBA,Q.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(U,this.video,Q.RGBA),this.texture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE));for(var le in this.tiles){var be=this.tiles[le];be.state!=="loaded"&&(be.state="loaded",be.texture=this.texture)}}},"prepare"),N.prototype.serialize=t(function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},"serialize"),N.prototype.hasTransition=t(function(){return this.video&&!this.video.paused},"hasTransition"),N}(ee),W=function(Z){function N(K,U,Q,le){Z.call(this,K,U,Q,le),U.coordinates?(!Array.isArray(U.coordinates)||U.coordinates.length!==4||U.coordinates.some(function(be){return!Array.isArray(be)||be.length!==2||be.some(function(Me){return typeof Me!="number"})}))&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+K,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+K,null,'missing required property "coordinates"'))),U.animate&&typeof U.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+K,null,'optional "animate" property must be a boolean value'))),U.canvas?typeof U.canvas!="string"&&!(U.canvas instanceof a.window.HTMLCanvasElement)&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+K,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+K,null,'missing required property "canvas"'))),this.options=U,this.animate=U.animate!==void 0?U.animate:!0}return t(N,"CanvasSource"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.load=t(function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},"load"),N.prototype.getCanvas=t(function(){return this.canvas},"getCanvas"),N.prototype.onAdd=t(function(U){this.map=U,this.load(),this.canvas&&this.animate&&this.play()},"onAdd"),N.prototype.onRemove=t(function(){this.pause()},"onRemove"),N.prototype.prepare=t(function(){var U=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,U=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,U=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var Q=this.map.painter.context,le=Q.gl;this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(U||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(Q,this.canvas,le.RGBA,{premultiply:!0});for(var be in this.tiles){var Me=this.tiles[be];Me.state!=="loaded"&&(Me.state="loaded",Me.texture=this.texture)}}},"prepare"),N.prototype.serialize=t(function(){return{type:"canvas",coordinates:this.coordinates}},"serialize"),N.prototype.hasTransition=t(function(){return this._playing},"hasTransition"),N.prototype._hasInvalidDimensions=t(function(){for(var U=0,Q=[this.canvas.width,this.canvas.height];U<Q.length;U+=1){var le=Q[U];if(isNaN(le)||le<=0)return!0}return!1},"_hasInvalidDimensions"),N}(ee),ne={vector:j,raster:X,"raster-dem":G,geojson:$,video:se,image:ee,canvas:W},he=t(function(Z,N,K,U){var Q=new ne[N.type](Z,N,K,U);if(Q.id!==Z)throw new Error("Expected Source id to be "+Z+" instead of "+Q.id);return a.bindAll(["load","abort","unload","serialize","prepare"],Q),Q},"create"),re=t(function(Z){return ne[Z]},"getType"),ae=t(function(Z,N){ne[Z]=N},"setType");function fe(Z,N){var K=a.identity([]);return a.translate(K,K,[1,1,0]),a.scale(K,K,[Z.width*.5,Z.height*.5,1]),a.multiply(K,K,Z.calculatePosMatrix(N.toUnwrapped()))}t(fe,"getPixelPosMatrix");function ce(Z,N,K){if(Z)for(var U=0,Q=Z;U<Q.length;U+=1){var le=Q[U],be=N[le];if(be&&be.source===K&&be.type==="fill-extrusion")return!0}else for(var Me in N){var Ie=N[Me];if(Ie.source===K&&Ie.type==="fill-extrusion")return!0}return!1}t(ce,"queryIncludes3DLayer");function xe(Z,N,K,U,Q,le){var be=ce(Q&&Q.layers,N,Z.id),Me=le.maxPitchScaleFactor(),Ie=Z.tilesIn(U,Me,be);Ie.sort(pe);for(var Ze=[],ct=0,ht=Ie;ct<ht.length;ct+=1){var Be=ht[ct];Ze.push({wrappedTileID:Be.tileID.wrapped().key,queryResults:Be.tile.queryRenderedFeatures(N,K,Z._state,Be.queryGeometry,Be.cameraQueryGeometry,Be.scale,Q,le,Me,fe(Z.transform,Be.tileID))})}var We=oe(Ze);for(var it in We)We[it].forEach(function(wt){var pt=wt.feature,bt=Z.getFeatureState(pt.layer["source-layer"],pt.id);pt.source=pt.layer.source,pt.layer["source-layer"]&&(pt.sourceLayer=pt.layer["source-layer"]),pt.state=bt});return We}t(xe,"queryRenderedFeatures");function Te(Z,N,K,U,Q,le,be){for(var Me={},Ie=le.queryRenderedSymbols(U),Ze=[],ct=0,ht=Object.keys(Ie).map(Number);ct<ht.length;ct+=1){var Be=ht[ct];Ze.push(be[Be])}Ze.sort(pe);for(var We=t(function(){var Mt=wt[it],Dt=Mt.featureIndex.lookupSymbolFeatures(Ie[Mt.bucketInstanceId],N,Mt.bucketIndex,Mt.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,Z);for(var St in Dt){var Ft=Me[St]=Me[St]||[],Lt=Dt[St];Lt.sort(function(Ir,zr){var Dr=Mt.featureSortOrder;if(Dr){var Vr=Dr.indexOf(Ir.featureIndex),Xr=Dr.indexOf(zr.featureIndex);return Xr-Vr}else return zr.featureIndex-Ir.featureIndex});for(var Xt=0,ar=Lt;Xt<ar.length;Xt+=1){var vr=ar[Xt];Ft.push(vr)}}},"loop"),it=0,wt=Ze;it<wt.length;it+=1)We();var pt=t(function(Mt){Me[Mt].forEach(function(Dt){var St=Dt.feature,Ft=Z[Mt],Lt=K[Ft.source],Xt=Lt.getFeatureState(St.layer["source-layer"],St.id);St.source=St.layer.source,St.layer["source-layer"]&&(St.sourceLayer=St.layer["source-layer"]),St.state=Xt})},"loop$1");for(var bt in Me)pt(bt);return Me}t(Te,"queryRenderedSymbols");function me(Z,N){for(var K=Z.getRenderableIds().map(function(Ie){return Z.getTileByID(Ie)}),U=[],Q={},le=0;le<K.length;le++){var be=K[le],Me=be.tileID.canonical.key;Q[Me]||(Q[Me]=!0,be.querySourceFeatures(U,N))}return U}t(me,"querySourceFeatures");function pe(Z,N){var K=Z.tileID,U=N.tileID;return K.overscaledZ-U.overscaledZ||K.canonical.y-U.canonical.y||K.wrap-U.wrap||K.canonical.x-U.canonical.x}t(pe,"sortTilesIn");function oe(Z){for(var N={},K={},U=0,Q=Z;U<Q.length;U+=1){var le=Q[U],be=le.queryResults,Me=le.wrappedTileID,Ie=K[Me]=K[Me]||{};for(var Ze in be)for(var ct=be[Ze],ht=Ie[Ze]=Ie[Ze]||{},Be=N[Ze]=N[Ze]||[],We=0,it=ct;We<it.length;We+=1){var wt=it[We];ht[wt.featureIndex]||(ht[wt.featureIndex]=!0,Be.push(wt))}}return N}t(oe,"mergeRenderedFeatureLayers");var de=t(function(N,K){this.max=N,this.onRemove=K,this.reset()},"TileCache");de.prototype.reset=t(function(){for(var N in this.data)for(var K=0,U=this.data[N];K<U.length;K+=1){var Q=U[K];Q.timeout&&clearTimeout(Q.timeout),this.onRemove(Q.value)}return this.data={},this.order=[],this},"reset"),de.prototype.add=t(function(N,K,U){var Q=this,le=N.wrapped().key;this.data[le]===void 0&&(this.data[le]=[]);var be={value:K,timeout:void 0};if(U!==void 0&&(be.timeout=setTimeout(function(){Q.remove(N,be)},U)),this.data[le].push(be),this.order.push(le),this.order.length>this.max){var Me=this._getAndRemoveByKey(this.order[0]);Me&&this.onRemove(Me)}return this},"add"),de.prototype.has=t(function(N){return N.wrapped().key in this.data},"has"),de.prototype.getAndRemove=t(function(N){return this.has(N)?this._getAndRemoveByKey(N.wrapped().key):null},"getAndRemove"),de.prototype._getAndRemoveByKey=t(function(N){var K=this.data[N].shift();return K.timeout&&clearTimeout(K.timeout),this.data[N].length===0&&delete this.data[N],this.order.splice(this.order.indexOf(N),1),K.value},"_getAndRemoveByKey"),de.prototype.getByKey=t(function(N){var K=this.data[N];return K?K[0].value:null},"getByKey"),de.prototype.get=t(function(N){if(!this.has(N))return null;var K=this.data[N.wrapped().key][0];return K.value},"get"),de.prototype.remove=t(function(N,K){if(!this.has(N))return this;var U=N.wrapped().key,Q=K===void 0?0:this.data[U].indexOf(K),le=this.data[U][Q];return this.data[U].splice(Q,1),le.timeout&&clearTimeout(le.timeout),this.data[U].length===0&&delete this.data[U],this.onRemove(le.value),this.order.splice(this.order.indexOf(U),1),this},"remove"),de.prototype.setMaxSize=t(function(N){for(this.max=N;this.order.length>this.max;){var K=this._getAndRemoveByKey(this.order[0]);K&&this.onRemove(K)}return this},"setMaxSize"),de.prototype.filter=t(function(N){var K=[];for(var U in this.data)for(var Q=0,le=this.data[U];Q<le.length;Q+=1){var be=le[Q];N(be.value)||K.push(be)}for(var Me=0,Ie=K;Me<Ie.length;Me+=1){var Ze=Ie[Me];this.remove(Ze.value.tileID,Ze)}},"filter");var ye=t(function(N,K,U){this.context=N;var Q=N.gl;this.buffer=Q.createBuffer(),this.dynamicDraw=Boolean(U),this.context.unbindVAO(),N.bindElementBuffer.set(this.buffer),Q.bufferData(Q.ELEMENT_ARRAY_BUFFER,K.arrayBuffer,this.dynamicDraw?Q.DYNAMIC_DRAW:Q.STATIC_DRAW),this.dynamicDraw||delete K.arrayBuffer},"IndexBuffer");ye.prototype.bind=t(function(){this.context.bindElementBuffer.set(this.buffer)},"bind"),ye.prototype.updateData=t(function(N){var K=this.context.gl;this.context.unbindVAO(),this.bind(),K.bufferSubData(K.ELEMENT_ARRAY_BUFFER,0,N.arrayBuffer)},"updateData"),ye.prototype.destroy=t(function(){var N=this.context.gl;this.buffer&&(N.deleteBuffer(this.buffer),delete this.buffer)},"destroy");var we={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ee=t(function(N,K,U,Q){this.length=K.length,this.attributes=U,this.itemSize=K.bytesPerElement,this.dynamicDraw=Q,this.context=N;var le=N.gl;this.buffer=le.createBuffer(),N.bindVertexBuffer.set(this.buffer),le.bufferData(le.ARRAY_BUFFER,K.arrayBuffer,this.dynamicDraw?le.DYNAMIC_DRAW:le.STATIC_DRAW),this.dynamicDraw||delete K.arrayBuffer},"VertexBuffer");Ee.prototype.bind=t(function(){this.context.bindVertexBuffer.set(this.buffer)},"bind"),Ee.prototype.updateData=t(function(N){var K=this.context.gl;this.bind(),K.bufferSubData(K.ARRAY_BUFFER,0,N.arrayBuffer)},"updateData"),Ee.prototype.enableAttributes=t(function(N,K){for(var U=0;U<this.attributes.length;U++){var Q=this.attributes[U],le=K.attributes[Q.name];le!==void 0&&N.enableVertexAttribArray(le)}},"enableAttributes"),Ee.prototype.setVertexAttribPointers=t(function(N,K,U){for(var Q=0;Q<this.attributes.length;Q++){var le=this.attributes[Q],be=K.attributes[le.name];be!==void 0&&N.vertexAttribPointer(be,le.components,N[we[le.type]],!1,this.itemSize,le.offset+this.itemSize*(U||0))}},"setVertexAttribPointers"),Ee.prototype.destroy=t(function(){var N=this.context.gl;this.buffer&&(N.deleteBuffer(this.buffer),delete this.buffer)},"destroy");var De=t(function(N){this.gl=N.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1},"BaseValue");De.prototype.get=t(function(){return this.current},"get"),De.prototype.set=t(function(N){},"set"),De.prototype.getDefault=t(function(){return this.default},"getDefault"),De.prototype.setDefault=t(function(){this.set(this.default)},"setDefault");var Fe=function(Z){function N(){Z.apply(this,arguments)}return t(N,"ClearColor"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return a.Color.transparent},"getDefault"),N.prototype.set=t(function(U){var Q=this.current;U.r===Q.r&&U.g===Q.g&&U.b===Q.b&&U.a===Q.a&&!this.dirty||(this.gl.clearColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)},"set"),N}(De),qe=function(Z){function N(){Z.apply(this,arguments)}return t(N,"ClearDepth"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return 1},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.clearDepth(U),this.current=U,this.dirty=!1)},"set"),N}(De),Je=function(Z){function N(){Z.apply(this,arguments)}return t(N,"ClearStencil"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return 0},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.clearStencil(U),this.current=U,this.dirty=!1)},"set"),N}(De),Ge=function(Z){function N(){Z.apply(this,arguments)}return t(N,"ColorMask"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return[!0,!0,!0,!0]},"getDefault"),N.prototype.set=t(function(U){var Q=this.current;U[0]===Q[0]&&U[1]===Q[1]&&U[2]===Q[2]&&U[3]===Q[3]&&!this.dirty||(this.gl.colorMask(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)},"set"),N}(De),et=function(Z){function N(){Z.apply(this,arguments)}return t(N,"DepthMask"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return!0},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.depthMask(U),this.current=U,this.dirty=!1)},"set"),N}(De),Ue=function(Z){function N(){Z.apply(this,arguments)}return t(N,"StencilMask"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return 255},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.stencilMask(U),this.current=U,this.dirty=!1)},"set"),N}(De),Ye=function(Z){function N(){Z.apply(this,arguments)}return t(N,"StencilFunc"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},"getDefault"),N.prototype.set=t(function(U){var Q=this.current;U.func===Q.func&&U.ref===Q.ref&&U.mask===Q.mask&&!this.dirty||(this.gl.stencilFunc(U.func,U.ref,U.mask),this.current=U,this.dirty=!1)},"set"),N}(De),$e=function(Z){function N(){Z.apply(this,arguments)}return t(N,"StencilOp"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){var U=this.gl;return[U.KEEP,U.KEEP,U.KEEP]},"getDefault"),N.prototype.set=t(function(U){var Q=this.current;U[0]===Q[0]&&U[1]===Q[1]&&U[2]===Q[2]&&!this.dirty||(this.gl.stencilOp(U[0],U[1],U[2]),this.current=U,this.dirty=!1)},"set"),N}(De),Ct=function(Z){function N(){Z.apply(this,arguments)}return t(N,"StencilTest"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return!1},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;U?Q.enable(Q.STENCIL_TEST):Q.disable(Q.STENCIL_TEST),this.current=U,this.dirty=!1}},"set"),N}(De),It=function(Z){function N(){Z.apply(this,arguments)}return t(N,"DepthRange"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return[0,1]},"getDefault"),N.prototype.set=t(function(U){var Q=this.current;U[0]===Q[0]&&U[1]===Q[1]&&!this.dirty||(this.gl.depthRange(U[0],U[1]),this.current=U,this.dirty=!1)},"set"),N}(De),Vt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"DepthTest"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return!1},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;U?Q.enable(Q.DEPTH_TEST):Q.disable(Q.DEPTH_TEST),this.current=U,this.dirty=!1}},"set"),N}(De),$t=function(Z){function N(){Z.apply(this,arguments)}return t(N,"DepthFunc"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return this.gl.LESS},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.depthFunc(U),this.current=U,this.dirty=!1)},"set"),N}(De),Gt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"Blend"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return!1},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;U?Q.enable(Q.BLEND):Q.disable(Q.BLEND),this.current=U,this.dirty=!1}},"set"),N}(De),Jt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"BlendFunc"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){var U=this.gl;return[U.ONE,U.ZERO]},"getDefault"),N.prototype.set=t(function(U){var Q=this.current;U[0]===Q[0]&&U[1]===Q[1]&&!this.dirty||(this.gl.blendFunc(U[0],U[1]),this.current=U,this.dirty=!1)},"set"),N}(De),kt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"BlendColor"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return a.Color.transparent},"getDefault"),N.prototype.set=t(function(U){var Q=this.current;U.r===Q.r&&U.g===Q.g&&U.b===Q.b&&U.a===Q.a&&!this.dirty||(this.gl.blendColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)},"set"),N}(De),ft=function(Z){function N(){Z.apply(this,arguments)}return t(N,"BlendEquation"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return this.gl.FUNC_ADD},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.blendEquation(U),this.current=U,this.dirty=!1)},"set"),N}(De),zt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"CullFace"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return!1},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;U?Q.enable(Q.CULL_FACE):Q.disable(Q.CULL_FACE),this.current=U,this.dirty=!1}},"set"),N}(De),Pt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"CullFaceSide"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return this.gl.BACK},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.cullFace(U),this.current=U,this.dirty=!1)},"set"),N}(De),Et=function(Z){function N(){Z.apply(this,arguments)}return t(N,"FrontFace"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return this.gl.CCW},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.frontFace(U),this.current=U,this.dirty=!1)},"set"),N}(De),Wt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"Program"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return null},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.useProgram(U),this.current=U,this.dirty=!1)},"set"),N}(De),ze=function(Z){function N(){Z.apply(this,arguments)}return t(N,"ActiveTextureUnit"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return this.gl.TEXTURE0},"getDefault"),N.prototype.set=t(function(U){U===this.current&&!this.dirty||(this.gl.activeTexture(U),this.current=U,this.dirty=!1)},"set"),N}(De),tt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"Viewport"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){var U=this.gl;return[0,0,U.drawingBufferWidth,U.drawingBufferHeight]},"getDefault"),N.prototype.set=t(function(U){var Q=this.current;U[0]===Q[0]&&U[1]===Q[1]&&U[2]===Q[2]&&U[3]===Q[3]&&!this.dirty||(this.gl.viewport(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)},"set"),N}(De),at=function(Z){function N(){Z.apply(this,arguments)}return t(N,"BindFramebuffer"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return null},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;Q.bindFramebuffer(Q.FRAMEBUFFER,U),this.current=U,this.dirty=!1}},"set"),N}(De),vt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"BindRenderbuffer"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return null},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;Q.bindRenderbuffer(Q.RENDERBUFFER,U),this.current=U,this.dirty=!1}},"set"),N}(De),_t=function(Z){function N(){Z.apply(this,arguments)}return t(N,"BindTexture"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return null},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;Q.bindTexture(Q.TEXTURE_2D,U),this.current=U,this.dirty=!1}},"set"),N}(De),Rt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"BindVertexBuffer"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return null},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;Q.bindBuffer(Q.ARRAY_BUFFER,U),this.current=U,this.dirty=!1}},"set"),N}(De),nr=function(Z){function N(){Z.apply(this,arguments)}return t(N,"BindElementBuffer"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return null},"getDefault"),N.prototype.set=t(function(U){var Q=this.gl;Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,U),this.current=U,this.dirty=!1},"set"),N}(De),ir=function(Z){function N(K){Z.call(this,K),this.vao=K.extVertexArrayObject}return t(N,"BindVertexArrayOES"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return null},"getDefault"),N.prototype.set=t(function(U){!this.vao||U===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(U),this.current=U,this.dirty=!1)},"set"),N}(De),ur=function(Z){function N(){Z.apply(this,arguments)}return t(N,"PixelStoreUnpack"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return 4},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;Q.pixelStorei(Q.UNPACK_ALIGNMENT,U),this.current=U,this.dirty=!1}},"set"),N}(De),qt=function(Z){function N(){Z.apply(this,arguments)}return t(N,"PixelStoreUnpackPremultiplyAlpha"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return!1},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),this.current=U,this.dirty=!1}},"set"),N}(De),hr=function(Z){function N(){Z.apply(this,arguments)}return t(N,"PixelStoreUnpackFlipY"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return!1},"getDefault"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){var Q=this.gl;Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,U),this.current=U,this.dirty=!1}},"set"),N}(De),Fr=function(Z){function N(K,U){Z.call(this,K),this.context=K,this.parent=U}return t(N,"FramebufferAttachment"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getDefault=t(function(){return null},"getDefault"),N}(De),Br=function(Z){function N(){Z.apply(this,arguments)}return t(N,"ColorAttachment"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.setDirty=t(function(){this.dirty=!0},"setDirty"),N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var Q=this.gl;Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,U,0),this.current=U,this.dirty=!1}},"set"),N}(Fr),na=function(Z){function N(){Z.apply(this,arguments)}return t(N,"DepthAttachment"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.set=t(function(U){if(!(U===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var Q=this.gl;Q.framebufferRenderbuffer(Q.FRAMEBUFFER,Q.DEPTH_ATTACHMENT,Q.RENDERBUFFER,U),this.current=U,this.dirty=!1}},"set"),N}(Fr),Ia=t(function(N,K,U,Q){this.context=N,this.width=K,this.height=U;var le=N.gl,be=this.framebuffer=le.createFramebuffer();this.colorAttachment=new Br(N,be),Q&&(this.depthAttachment=new na(N,be))},"Framebuffer");Ia.prototype.destroy=t(function(){var N=this.context.gl,K=this.colorAttachment.get();if(K&&N.deleteTexture(K),this.depthAttachment){var U=this.depthAttachment.get();U&&N.deleteRenderbuffer(U)}N.deleteFramebuffer(this.framebuffer)},"destroy");var ea=519,Er=t(function(N,K,U){this.func=N,this.mask=K,this.range=U},"DepthMode");Er.ReadOnly=!1,Er.ReadWrite=!0,Er.disabled=new Er(ea,Er.ReadOnly,[0,1]);var dn=519,ya=7680,Hr=t(function(N,K,U,Q,le,be){this.test=N,this.ref=K,this.mask=U,this.fail=Q,this.depthFail=le,this.pass=be},"StencilMode");Hr.disabled=new Hr({func:dn,mask:0},0,0,ya,ya,ya);var un=0,Ea=1,nt=771,He=t(function(N,K,U){this.blendFunction=N,this.blendColor=K,this.mask=U},"ColorMode");He.Replace=[Ea,un],He.disabled=new He(He.Replace,a.Color.transparent,[!1,!1,!1,!1]),He.unblended=new He(He.Replace,a.Color.transparent,[!0,!0,!0,!0]),He.alphaBlended=new He([Ea,nt],a.Color.transparent,[!0,!0,!0,!0]);var Qe=1029,ot=2305,Ae=t(function(N,K,U){this.enable=N,this.mode=K,this.frontFace=U},"CullFaceMode");Ae.disabled=new Ae(!1,Qe,ot),Ae.backCCW=new Ae(!0,Qe,ot);var Se=t(function(N){this.gl=N,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Fe(this),this.clearDepth=new qe(this),this.clearStencil=new Je(this),this.colorMask=new Ge(this),this.depthMask=new et(this),this.stencilMask=new Ue(this),this.stencilFunc=new Ye(this),this.stencilOp=new $e(this),this.stencilTest=new Ct(this),this.depthRange=new It(this),this.depthTest=new Vt(this),this.depthFunc=new $t(this),this.blend=new Gt(this),this.blendFunc=new Jt(this),this.blendColor=new kt(this),this.blendEquation=new ft(this),this.cullFace=new zt(this),this.cullFaceSide=new Pt(this),this.frontFace=new Et(this),this.program=new Wt(this),this.activeTexture=new ze(this),this.viewport=new tt(this),this.bindFramebuffer=new at(this),this.bindRenderbuffer=new vt(this),this.bindTexture=new _t(this),this.bindVertexBuffer=new Rt(this),this.bindElementBuffer=new nr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ir(this),this.pixelStoreUnpack=new ur(this),this.pixelStoreUnpackPremultiplyAlpha=new qt(this),this.pixelStoreUnpackFlipY=new hr(this),this.extTextureFilterAnisotropic=N.getExtension("EXT_texture_filter_anisotropic")||N.getExtension("MOZ_EXT_texture_filter_anisotropic")||N.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=N.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=N.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(N.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=N.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=N.getExtension("EXT_disjoint_timer_query")},"Context");Se.prototype.setDefault=t(function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},"setDefault"),Se.prototype.setDirty=t(function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},"setDirty"),Se.prototype.createIndexBuffer=t(function(N,K){return new ye(this,N,K)},"createIndexBuffer"),Se.prototype.createVertexBuffer=t(function(N,K,U){return new Ee(this,N,K,U)},"createVertexBuffer"),Se.prototype.createRenderbuffer=t(function(N,K,U){var Q=this.gl,le=Q.createRenderbuffer();return this.bindRenderbuffer.set(le),Q.renderbufferStorage(Q.RENDERBUFFER,N,K,U),this.bindRenderbuffer.set(null),le},"createRenderbuffer"),Se.prototype.createFramebuffer=t(function(N,K,U){return new Ia(this,N,K,U)},"createFramebuffer"),Se.prototype.clear=t(function(N){var K=N.color,U=N.depth,Q=this.gl,le=0;K&&(le|=Q.COLOR_BUFFER_BIT,this.clearColor.set(K),this.colorMask.set([!0,!0,!0,!0])),typeof U<"u"&&(le|=Q.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(U),this.depthMask.set(!0)),Q.clear(le)},"clear"),Se.prototype.setCullFace=t(function(N){N.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(N.mode),this.frontFace.set(N.frontFace))},"setCullFace"),Se.prototype.setDepthMode=t(function(N){N.func===this.gl.ALWAYS&&!N.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(N.func),this.depthMask.set(N.mask),this.depthRange.set(N.range))},"setDepthMode"),Se.prototype.setStencilMode=t(function(N){N.test.func===this.gl.ALWAYS&&!N.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(N.mask),this.stencilOp.set([N.fail,N.depthFail,N.pass]),this.stencilFunc.set({func:N.test.func,ref:N.ref,mask:N.test.mask}))},"setStencilMode"),Se.prototype.setColorMode=t(function(N){a.deepEqual(N.blendFunction,He.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(N.blendFunction),this.blendColor.set(N.blendColor)),this.colorMask.set(N.mask)},"setColorMode"),Se.prototype.unbindVAO=t(function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)},"unbindVAO");var je=function(Z){function N(K,U,Q){var le=this;Z.call(this),this.id=K,this.dispatcher=Q,this.on("data",function(be){be.dataType==="source"&&be.sourceDataType==="metadata"&&(le._sourceLoaded=!0),le._sourceLoaded&&!le._paused&&be.dataType==="source"&&be.sourceDataType==="content"&&(le.reload(),le.transform&&le.update(le.transform))}),this.on("error",function(){le._sourceErrored=!0}),this._source=he(K,U,Q,this),this._tiles={},this._cache=new de(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return t(N,"SourceCache"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.onAdd=t(function(U){this.map=U,this._maxTileCacheSize=U?U._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(U)},"onAdd"),N.prototype.onRemove=t(function(U){this._source&&this._source.onRemove&&this._source.onRemove(U)},"onRemove"),N.prototype.loaded=t(function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var U in this._tiles){var Q=this._tiles[U];if(Q.state!=="loaded"&&Q.state!=="errored")return!1}return!0},"loaded"),N.prototype.getSource=t(function(){return this._source},"getSource"),N.prototype.pause=t(function(){this._paused=!0},"pause"),N.prototype.resume=t(function(){if(!!this._paused){var U=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,U&&this.reload(),this.transform&&this.update(this.transform)}},"resume"),N.prototype._loadTile=t(function(U,Q){return this._source.loadTile(U,Q)},"_loadTile"),N.prototype._unloadTile=t(function(U){if(this._source.unloadTile)return this._source.unloadTile(U,function(){})},"_unloadTile"),N.prototype._abortTile=t(function(U){if(this._source.abortTile)return this._source.abortTile(U,function(){})},"_abortTile"),N.prototype.serialize=t(function(){return this._source.serialize()},"serialize"),N.prototype.prepare=t(function(U){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var Q in this._tiles){var le=this._tiles[Q];le.upload(U),le.prepare(this.map.style.imageManager)}},"prepare"),N.prototype.getIds=t(function(){return a.values(this._tiles).map(function(U){return U.tileID}).sort(Xe).map(function(U){return U.key})},"getIds"),N.prototype.getRenderableIds=t(function(U){var Q=this,le=[];for(var be in this._tiles)this._isIdRenderable(be,U)&&le.push(this._tiles[be]);return U?le.sort(function(Me,Ie){var Ze=Me.tileID,ct=Ie.tileID,ht=new a.Point(Ze.canonical.x,Ze.canonical.y)._rotate(Q.transform.angle),Be=new a.Point(ct.canonical.x,ct.canonical.y)._rotate(Q.transform.angle);return Ze.overscaledZ-ct.overscaledZ||Be.y-ht.y||Be.x-ht.x}).map(function(Me){return Me.tileID.key}):le.map(function(Me){return Me.tileID}).sort(Xe).map(function(Me){return Me.key})},"getRenderableIds"),N.prototype.hasRenderableParent=t(function(U){var Q=this.findLoadedParent(U,0);return Q?this._isIdRenderable(Q.tileID.key):!1},"hasRenderableParent"),N.prototype._isIdRenderable=t(function(U,Q){return this._tiles[U]&&this._tiles[U].hasData()&&!this._coveredTiles[U]&&(Q||!this._tiles[U].holdingForFade())},"_isIdRenderable"),N.prototype.reload=t(function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var U in this._tiles)this._tiles[U].state!=="errored"&&this._reloadTile(U,"reloading")},"reload"),N.prototype._reloadTile=t(function(U,Q){var le=this._tiles[U];!le||(le.state!=="loading"&&(le.state=Q),this._loadTile(le,this._tileLoaded.bind(this,le,U,Q)))},"_reloadTile"),N.prototype._tileLoaded=t(function(U,Q,le,be){if(be){U.state="errored",be.status!==404?this._source.fire(new a.ErrorEvent(be,{tile:U})):this.update(this.transform);return}U.timeAdded=a.browser.now(),le==="expired"&&(U.refreshedUponExpiration=!0),this._setTileReloadTimer(Q,U),this.getSource().type==="raster-dem"&&U.dem&&this._backfillDEM(U),this._state.initializeTileState(U,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:U,coord:U.tileID}))},"_tileLoaded"),N.prototype._backfillDEM=t(function(U){for(var Q=this.getRenderableIds(),le=0;le<Q.length;le++){var be=Q[le];if(U.neighboringTiles&&U.neighboringTiles[be]){var Me=this.getTileByID(be);Ie(U,Me),Ie(Me,U)}}function Ie(Ze,ct){Ze.needsHillshadePrepare=!0;var ht=ct.tileID.canonical.x-Ze.tileID.canonical.x,Be=ct.tileID.canonical.y-Ze.tileID.canonical.y,We=Math.pow(2,Ze.tileID.canonical.z),it=ct.tileID.key;ht===0&&Be===0||Math.abs(Be)>1||(Math.abs(ht)>1&&(Math.abs(ht+We)===1?ht+=We:Math.abs(ht-We)===1&&(ht-=We)),!(!ct.dem||!Ze.dem)&&(Ze.dem.backfillBorder(ct.dem,ht,Be),Ze.neighboringTiles&&Ze.neighboringTiles[it]&&(Ze.neighboringTiles[it].backfilled=!0)))}t(Ie,"fillBorder")},"_backfillDEM"),N.prototype.getTile=t(function(U){return this.getTileByID(U.key)},"getTile"),N.prototype.getTileByID=t(function(U){return this._tiles[U]},"getTileByID"),N.prototype._retainLoadedChildren=t(function(U,Q,le,be){for(var Me in this._tiles){var Ie=this._tiles[Me];if(!(be[Me]||!Ie.hasData()||Ie.tileID.overscaledZ<=Q||Ie.tileID.overscaledZ>le)){for(var Ze=Ie.tileID;Ie&&Ie.tileID.overscaledZ>Q+1;){var ct=Ie.tileID.scaledTo(Ie.tileID.overscaledZ-1);Ie=this._tiles[ct.key],Ie&&Ie.hasData()&&(Ze=ct)}for(var ht=Ze;ht.overscaledZ>Q;)if(ht=ht.scaledTo(ht.overscaledZ-1),U[ht.key]){be[Ze.key]=Ze;break}}}},"_retainLoadedChildren"),N.prototype.findLoadedParent=t(function(U,Q){if(U.key in this._loadedParentTiles){var le=this._loadedParentTiles[U.key];return le&&le.tileID.overscaledZ>=Q?le:null}for(var be=U.overscaledZ-1;be>=Q;be--){var Me=U.scaledTo(be),Ie=this._getLoadedTile(Me);if(Ie)return Ie}},"findLoadedParent"),N.prototype._getLoadedTile=t(function(U){var Q=this._tiles[U.key];if(Q&&Q.hasData())return Q;var le=this._cache.getByKey(U.wrapped().key);return le},"_getLoadedTile"),N.prototype.updateCacheSize=t(function(U){var Q=Math.ceil(U.width/this._source.tileSize)+1,le=Math.ceil(U.height/this._source.tileSize)+1,be=Q*le,Me=5,Ie=Math.floor(be*Me),Ze=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Ie):Ie;this._cache.setMaxSize(Ze)},"updateCacheSize"),N.prototype.handleWrapJump=t(function(U){var Q=this._prevLng===void 0?U:this._prevLng,le=U-Q,be=le/360,Me=Math.round(be);if(this._prevLng=U,Me){var Ie={};for(var Ze in this._tiles){var ct=this._tiles[Ze];ct.tileID=ct.tileID.unwrapTo(ct.tileID.wrap+Me),Ie[ct.tileID.key]=ct}this._tiles=Ie;for(var ht in this._timers)clearTimeout(this._timers[ht]),delete this._timers[ht];for(var Be in this._tiles){var We=this._tiles[Be];this._setTileReloadTimer(Be,We)}}},"handleWrapJump"),N.prototype.update=t(function(U){var Q=this;if(this.transform=U,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(U),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var le;this.used?this._source.tileID?le=U.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ir){return new a.OverscaledTileID(Ir.canonical.z,Ir.wrap,Ir.canonical.z,Ir.canonical.x,Ir.canonical.y)}):(le=U.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(le=le.filter(function(Ir){return Q._source.hasTile(Ir)}))):le=[];var be=U.coveringZoomLevel(this._source),Me=Math.max(be-N.maxOverzooming,this._source.minzoom),Ie=Math.max(be+N.maxUnderzooming,this._source.minzoom),Ze=this._updateRetainedTiles(le,be);if(ut(this._source.type)){for(var ct={},ht={},Be=Object.keys(Ze),We=0,it=Be;We<it.length;We+=1){var wt=it[We],pt=Ze[wt],bt=this._tiles[wt];if(!(!bt||bt.fadeEndTime&&bt.fadeEndTime<=a.browser.now())){var Mt=this.findLoadedParent(pt,Me);Mt&&(this._addTile(Mt.tileID),ct[Mt.tileID.key]=Mt.tileID),ht[wt]=pt}}this._retainLoadedChildren(ht,be,Ie,Ze);for(var Dt in ct)Ze[Dt]||(this._coveredTiles[Dt]=!0,Ze[Dt]=ct[Dt])}for(var St in Ze)this._tiles[St].clearFadeHold();for(var Ft=a.keysDifference(this._tiles,Ze),Lt=0,Xt=Ft;Lt<Xt.length;Lt+=1){var ar=Xt[Lt],vr=this._tiles[ar];vr.hasSymbolBuckets&&!vr.holdingForFade()?vr.setHoldDuration(this.map._fadeDuration):(!vr.hasSymbolBuckets||vr.symbolFadeFinished())&&this._removeTile(ar)}this._updateLoadedParentTileCache()}},"update"),N.prototype.releaseSymbolFadeTiles=t(function(){for(var U in this._tiles)this._tiles[U].holdingForFade()&&this._removeTile(U)},"releaseSymbolFadeTiles"),N.prototype._updateRetainedTiles=t(function(U,Q){for(var le={},be={},Me=Math.max(Q-N.maxOverzooming,this._source.minzoom),Ie=Math.max(Q+N.maxUnderzooming,this._source.minzoom),Ze={},ct=0,ht=U;ct<ht.length;ct+=1){var Be=ht[ct],We=this._addTile(Be);le[Be.key]=Be,!We.hasData()&&Q<this._source.maxzoom&&(Ze[Be.key]=Be)}this._retainLoadedChildren(Ze,Q,Ie,le);for(var it=0,wt=U;it<wt.length;it+=1){var pt=wt[it],bt=this._tiles[pt.key];if(!bt.hasData()){if(Q+1>this._source.maxzoom){var Mt=pt.children(this._source.maxzoom)[0],Dt=this.getTile(Mt);if(!!Dt&&Dt.hasData()){le[Mt.key]=Mt;continue}}else{var St=pt.children(this._source.maxzoom);if(le[St[0].key]&&le[St[1].key]&&le[St[2].key]&&le[St[3].key])continue}for(var Ft=bt.wasRequested(),Lt=pt.overscaledZ-1;Lt>=Me;--Lt){var Xt=pt.scaledTo(Lt);if(be[Xt.key]||(be[Xt.key]=!0,bt=this.getTile(Xt),!bt&&Ft&&(bt=this._addTile(Xt)),bt&&(le[Xt.key]=Xt,Ft=bt.wasRequested(),bt.hasData())))break}}}return le},"_updateRetainedTiles"),N.prototype._updateLoadedParentTileCache=t(function(){this._loadedParentTiles={};for(var U in this._tiles){for(var Q=[],le=void 0,be=this._tiles[U].tileID;be.overscaledZ>0;){if(be.key in this._loadedParentTiles){le=this._loadedParentTiles[be.key];break}Q.push(be.key);var Me=be.scaledTo(be.overscaledZ-1);if(le=this._getLoadedTile(Me),le)break;be=Me}for(var Ie=0,Ze=Q;Ie<Ze.length;Ie+=1){var ct=Ze[Ie];this._loadedParentTiles[ct]=le}}},"_updateLoadedParentTileCache"),N.prototype._addTile=t(function(U){var Q=this._tiles[U.key];if(Q)return Q;Q=this._cache.getAndRemove(U),Q&&(this._setTileReloadTimer(U.key,Q),Q.tileID=U,this._state.initializeTileState(Q,this.map?this.map.painter:null),this._cacheTimers[U.key]&&(clearTimeout(this._cacheTimers[U.key]),delete this._cacheTimers[U.key],this._setTileReloadTimer(U.key,Q)));var le=Boolean(Q);return le||(Q=new a.Tile(U,this._source.tileSize*U.overscaleFactor()),this._loadTile(Q,this._tileLoaded.bind(this,Q,U.key,Q.state))),Q?(Q.uses++,this._tiles[U.key]=Q,le||this._source.fire(new a.Event("dataloading",{tile:Q,coord:Q.tileID,dataType:"source"})),Q):null},"_addTile"),N.prototype._setTileReloadTimer=t(function(U,Q){var le=this;U in this._timers&&(clearTimeout(this._timers[U]),delete this._timers[U]);var be=Q.getExpiryTimeout();be&&(this._timers[U]=setTimeout(function(){le._reloadTile(U,"expired"),delete le._timers[U]},be))},"_setTileReloadTimer"),N.prototype._removeTile=t(function(U){var Q=this._tiles[U];!Q||(Q.uses--,delete this._tiles[U],this._timers[U]&&(clearTimeout(this._timers[U]),delete this._timers[U]),!(Q.uses>0)&&(Q.hasData()&&Q.state!=="reloading"?this._cache.add(Q.tileID,Q,Q.getExpiryTimeout()):(Q.aborted=!0,this._abortTile(Q),this._unloadTile(Q))))},"_removeTile"),N.prototype.clearTiles=t(function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var U in this._tiles)this._removeTile(U);this._cache.reset()},"clearTiles"),N.prototype.tilesIn=t(function(U,Q,le){var be=this,Me=[],Ie=this.transform;if(!Ie)return Me;for(var Ze=le?Ie.getCameraQueryGeometry(U):U,ct=U.map(function(Lt){return Ie.pointCoordinate(Lt)}),ht=Ze.map(function(Lt){return Ie.pointCoordinate(Lt)}),Be=this.getIds(),We=1/0,it=1/0,wt=-1/0,pt=-1/0,bt=0,Mt=ht;bt<Mt.length;bt+=1){var Dt=Mt[bt];We=Math.min(We,Dt.x),it=Math.min(it,Dt.y),wt=Math.max(wt,Dt.x),pt=Math.max(pt,Dt.y)}for(var St=t(function(Lt){var Xt=be._tiles[Be[Lt]];if(!Xt.holdingForFade()){var ar=Xt.tileID,vr=Math.pow(2,Ie.zoom-Xt.tileID.overscaledZ),Ir=Q*Xt.queryPadding*a.EXTENT/Xt.tileSize/vr,zr=[ar.getTilePoint(new a.MercatorCoordinate(We,it)),ar.getTilePoint(new a.MercatorCoordinate(wt,pt))];if(zr[0].x-Ir<a.EXTENT&&zr[0].y-Ir<a.EXTENT&&zr[1].x+Ir>=0&&zr[1].y+Ir>=0){var Dr=ct.map(function(Xr){return ar.getTilePoint(Xr)}),Vr=ht.map(function(Xr){return ar.getTilePoint(Xr)});Me.push({tile:Xt,tileID:ar,queryGeometry:Dr,cameraQueryGeometry:Vr,scale:vr})}}},"loop"),Ft=0;Ft<Be.length;Ft++)St(Ft);return Me},"tilesIn"),N.prototype.getVisibleCoordinates=t(function(U){for(var Q=this,le=this.getRenderableIds(U).map(function(Ze){return Q._tiles[Ze].tileID}),be=0,Me=le;be<Me.length;be+=1){var Ie=Me[be];Ie.posMatrix=this.transform.calculatePosMatrix(Ie.toUnwrapped())}return le},"getVisibleCoordinates"),N.prototype.hasTransition=t(function(){if(this._source.hasTransition())return!0;if(ut(this._source.type))for(var U in this._tiles){var Q=this._tiles[U];if(Q.fadeEndTime!==void 0&&Q.fadeEndTime>=a.browser.now())return!0}return!1},"hasTransition"),N.prototype.setFeatureState=t(function(U,Q,le){U=U||"_geojsonTileLayer",this._state.updateState(U,Q,le)},"setFeatureState"),N.prototype.removeFeatureState=t(function(U,Q,le){U=U||"_geojsonTileLayer",this._state.removeFeatureState(U,Q,le)},"removeFeatureState"),N.prototype.getFeatureState=t(function(U,Q){return U=U||"_geojsonTileLayer",this._state.getState(U,Q)},"getFeatureState"),N.prototype.setDependencies=t(function(U,Q,le){var be=this._tiles[U];be&&be.setDependencies(Q,le)},"setDependencies"),N.prototype.reloadTilesForDependencies=t(function(U,Q){for(var le in this._tiles){var be=this._tiles[le];be.hasDependency(U,Q)&&this._reloadTile(le,"reloading")}this._cache.filter(function(Me){return!Me.hasDependency(U,Q)})},"reloadTilesForDependencies"),N}(a.Evented);je.maxOverzooming=10,je.maxUnderzooming=3;function Xe(Z,N){var K=Math.abs(Z.wrap*2)-+(Z.wrap<0),U=Math.abs(N.wrap*2)-+(N.wrap<0);return Z.overscaledZ-N.overscaledZ||U-K||N.canonical.y-Z.canonical.y||N.canonical.x-Z.canonical.x}t(Xe,"compareTileId");function ut(Z){return Z==="raster"||Z==="image"||Z==="video"}t(ut,"isRasterType");function xt(){return new a.window.Worker(Ws.workerUrl)}t(xt,"WebWorker");var dt="mapboxgl_preloaded_worker_pool",Ot=t(function(){this.active={}},"WorkerPool");Ot.prototype.acquire=t(function(N){if(!this.workers)for(this.workers=[];this.workers.length<Ot.workerCount;)this.workers.push(new xt);return this.active[N]=!0,this.workers.slice()},"acquire"),Ot.prototype.release=t(function(N){delete this.active[N],this.numActive()===0&&(this.workers.forEach(function(K){K.terminate()}),this.workers=null)},"release"),Ot.prototype.isPreloaded=t(function(){return!!this.active[dt]},"isPreloaded"),Ot.prototype.numActive=t(function(){return Object.keys(this.active).length},"numActive");var Ht=Math.floor(a.browser.hardwareConcurrency/2);Ot.workerCount=Math.max(Math.min(Ht,6),1);var Qt;function mr(){return Qt||(Qt=new Ot),Qt}t(mr,"getGlobalWorkerPool");function xr(){var Z=mr();Z.acquire(dt)}t(xr,"prewarm");function Lr(){var Z=Qt;Z&&(Z.isPreloaded()&&Z.numActive()===1?(Z.release(dt),Qt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}t(Lr,"clearPrewarmedResources");function Zr(Z,N){var K={};for(var U in Z)U!=="ref"&&(K[U]=Z[U]);return a.refProperties.forEach(function(Q){Q in N&&(K[Q]=N[Q])}),K}t(Zr,"deref");function Sr(Z){Z=Z.slice();for(var N=Object.create(null),K=0;K<Z.length;K++)N[Z[K].id]=Z[K];for(var U=0;U<Z.length;U++)"ref"in Z[U]&&(Z[U]=Zr(Z[U],N[Z[U].ref]));return Z}t(Sr,"derefLayers");function xa(){var Z={},N=a.styleSpec.$version;for(var K in a.styleSpec.$root){var U=a.styleSpec.$root[K];if(U.required){var Q=null;K==="version"?Q=N:U.type==="array"?Q=[]:Q={},Q!=null&&(Z[K]=Q)}}return Z}t(xa,"emptyStyle");var aa={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Sa(Z,N,K){K.push({command:aa.addSource,args:[Z,N[Z]]})}t(Sa,"addSource");function vn(Z,N,K){N.push({command:aa.removeSource,args:[Z]}),K[Z]=!0}t(vn,"removeSource");function hn(Z,N,K,U){vn(Z,K,U),Sa(Z,N,K)}t(hn,"updateSource");function ba(Z,N,K){var U;for(U in Z[K])if(!!Z[K].hasOwnProperty(U)&&U!=="data"&&!a.deepEqual(Z[K][U],N[K][U]))return!1;for(U in N[K])if(!!N[K].hasOwnProperty(U)&&U!=="data"&&!a.deepEqual(Z[K][U],N[K][U]))return!1;return!0}t(ba,"canUpdateGeoJSON");function Tn(Z,N,K,U){Z=Z||{},N=N||{};var Q;for(Q in Z)!Z.hasOwnProperty(Q)||N.hasOwnProperty(Q)||vn(Q,K,U);for(Q in N)!N.hasOwnProperty(Q)||(Z.hasOwnProperty(Q)?a.deepEqual(Z[Q],N[Q])||(Z[Q].type==="geojson"&&N[Q].type==="geojson"&&ba(Z,N,Q)?K.push({command:aa.setGeoJSONSourceData,args:[Q,N[Q].data]}):hn(Q,N,K,U)):Sa(Q,N,K))}t(Tn,"diffSources");function Pa(Z,N,K,U,Q,le){Z=Z||{},N=N||{};var be;for(be in Z)!Z.hasOwnProperty(be)||a.deepEqual(Z[be],N[be])||K.push({command:le,args:[U,be,N[be],Q]});for(be in N)!N.hasOwnProperty(be)||Z.hasOwnProperty(be)||a.deepEqual(Z[be],N[be])||K.push({command:le,args:[U,be,N[be],Q]})}t(Pa,"diffLayerPropertyChanges");function kn(Z){return Z.id}t(kn,"pluckId");function In(Z,N){return Z[N.id]=N,Z}t(In,"indexById");function ln(Z,N,K){Z=Z||[],N=N||[];var U=Z.map(kn),Q=N.map(kn),le=Z.reduce(In,{}),be=N.reduce(In,{}),Me=U.slice(),Ie=Object.create(null),Ze,ct,ht,Be,We,it,wt;for(Ze=0,ct=0;Ze<U.length;Ze++)ht=U[Ze],be.hasOwnProperty(ht)?ct++:(K.push({command:aa.removeLayer,args:[ht]}),Me.splice(Me.indexOf(ht,ct),1));for(Ze=0,ct=0;Ze<Q.length;Ze++)ht=Q[Q.length-1-Ze],Me[Me.length-1-Ze]!==ht&&(le.hasOwnProperty(ht)?(K.push({command:aa.removeLayer,args:[ht]}),Me.splice(Me.lastIndexOf(ht,Me.length-ct),1)):ct++,it=Me[Me.length-Ze],K.push({command:aa.addLayer,args:[be[ht],it]}),Me.splice(Me.length-Ze,0,ht),Ie[ht]=!0);for(Ze=0;Ze<Q.length;Ze++)if(ht=Q[Ze],Be=le[ht],We=be[ht],!(Ie[ht]||a.deepEqual(Be,We))){if(!a.deepEqual(Be.source,We.source)||!a.deepEqual(Be["source-layer"],We["source-layer"])||!a.deepEqual(Be.type,We.type)){K.push({command:aa.removeLayer,args:[ht]}),it=Me[Me.lastIndexOf(ht)+1],K.push({command:aa.addLayer,args:[We,it]});continue}Pa(Be.layout,We.layout,K,ht,null,aa.setLayoutProperty),Pa(Be.paint,We.paint,K,ht,null,aa.setPaintProperty),a.deepEqual(Be.filter,We.filter)||K.push({command:aa.setFilter,args:[ht,We.filter]}),(!a.deepEqual(Be.minzoom,We.minzoom)||!a.deepEqual(Be.maxzoom,We.maxzoom))&&K.push({command:aa.setLayerZoomRange,args:[ht,We.minzoom,We.maxzoom]});for(wt in Be)!Be.hasOwnProperty(wt)||wt==="layout"||wt==="paint"||wt==="filter"||wt==="metadata"||wt==="minzoom"||wt==="maxzoom"||(wt.indexOf("paint.")===0?Pa(Be[wt],We[wt],K,ht,wt.slice(6),aa.setPaintProperty):a.deepEqual(Be[wt],We[wt])||K.push({command:aa.setLayerProperty,args:[ht,wt,We[wt]]}));for(wt in We)!We.hasOwnProperty(wt)||Be.hasOwnProperty(wt)||wt==="layout"||wt==="paint"||wt==="filter"||wt==="metadata"||wt==="minzoom"||wt==="maxzoom"||(wt.indexOf("paint.")===0?Pa(Be[wt],We[wt],K,ht,wt.slice(6),aa.setPaintProperty):a.deepEqual(Be[wt],We[wt])||K.push({command:aa.setLayerProperty,args:[ht,wt,We[wt]]}))}}t(ln,"diffLayers");function Pn(Z,N){if(!Z)return[{command:aa.setStyle,args:[N]}];var K=[];try{if(!a.deepEqual(Z.version,N.version))return[{command:aa.setStyle,args:[N]}];a.deepEqual(Z.center,N.center)||K.push({command:aa.setCenter,args:[N.center]}),a.deepEqual(Z.zoom,N.zoom)||K.push({command:aa.setZoom,args:[N.zoom]}),a.deepEqual(Z.bearing,N.bearing)||K.push({command:aa.setBearing,args:[N.bearing]}),a.deepEqual(Z.pitch,N.pitch)||K.push({command:aa.setPitch,args:[N.pitch]}),a.deepEqual(Z.sprite,N.sprite)||K.push({command:aa.setSprite,args:[N.sprite]}),a.deepEqual(Z.glyphs,N.glyphs)||K.push({command:aa.setGlyphs,args:[N.glyphs]}),a.deepEqual(Z.transition,N.transition)||K.push({command:aa.setTransition,args:[N.transition]}),a.deepEqual(Z.light,N.light)||K.push({command:aa.setLight,args:[N.light]});var U={},Q=[];Tn(Z.sources,N.sources,Q,U);var le=[];Z.layers&&Z.layers.forEach(function(be){U[be.source]?K.push({command:aa.removeLayer,args:[be.id]}):le.push(be)}),K=K.concat(Q),ln(le,N.layers,K)}catch(be){console.warn("Unable to compute style diff:",be),K=[{command:aa.setStyle,args:[N]}]}return K}t(Pn,"diffStyles");var Fa=t(function(N,K){this.reset(N,K)},"PathInterpolator");Fa.prototype.reset=t(function(N,K){this.points=N||[],this._distances=[0];for(var U=1;U<this.points.length;U++)this._distances[U]=this._distances[U-1]+this.points[U].dist(this.points[U-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(K||0,this.length*.5),this.paddedLength=this.length-this.padding*2},"reset"),Fa.prototype.lerp=t(function(N){if(this.points.length===1)return this.points[0];N=a.clamp(N,0,1);for(var K=1,U=this._distances[K],Q=N*this.paddedLength+this.padding;U<Q&&K<this._distances.length;)U=this._distances[++K];var le=K-1,be=this._distances[le],Me=U-be,Ie=Me>0?(Q-be)/Me:0;return this.points[le].mult(1-Ie).add(this.points[K].mult(Ie))},"lerp");var Ka=t(function(N,K,U){var Q=this.boxCells=[],le=this.circleCells=[];this.xCellCount=Math.ceil(N/U),this.yCellCount=Math.ceil(K/U);for(var be=0;be<this.xCellCount*this.yCellCount;be++)Q.push([]),le.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=N,this.height=K,this.xScale=this.xCellCount/N,this.yScale=this.yCellCount/K,this.boxUid=0,this.circleUid=0},"GridIndex");Ka.prototype.keysLength=t(function(){return this.boxKeys.length+this.circleKeys.length},"keysLength"),Ka.prototype.insert=t(function(N,K,U,Q,le){this._forEachCell(K,U,Q,le,this._insertBoxCell,this.boxUid++),this.boxKeys.push(N),this.bboxes.push(K),this.bboxes.push(U),this.bboxes.push(Q),this.bboxes.push(le)},"insert"),Ka.prototype.insertCircle=t(function(N,K,U,Q){this._forEachCell(K-Q,U-Q,K+Q,U+Q,this._insertCircleCell,this.circleUid++),this.circleKeys.push(N),this.circles.push(K),this.circles.push(U),this.circles.push(Q)},"insertCircle"),Ka.prototype._insertBoxCell=t(function(N,K,U,Q,le,be){this.boxCells[le].push(be)},"_insertBoxCell"),Ka.prototype._insertCircleCell=t(function(N,K,U,Q,le,be){this.circleCells[le].push(be)},"_insertCircleCell"),Ka.prototype._query=t(function(N,K,U,Q,le,be){if(U<0||N>this.width||Q<0||K>this.height)return le?!1:[];var Me=[];if(N<=0&&K<=0&&this.width<=U&&this.height<=Q){if(le)return!0;for(var Ie=0;Ie<this.boxKeys.length;Ie++)Me.push({key:this.boxKeys[Ie],x1:this.bboxes[Ie*4],y1:this.bboxes[Ie*4+1],x2:this.bboxes[Ie*4+2],y2:this.bboxes[Ie*4+3]});for(var Ze=0;Ze<this.circleKeys.length;Ze++){var ct=this.circles[Ze*3],ht=this.circles[Ze*3+1],Be=this.circles[Ze*3+2];Me.push({key:this.circleKeys[Ze],x1:ct-Be,y1:ht-Be,x2:ct+Be,y2:ht+Be})}return be?Me.filter(be):Me}else{var We={hitTest:le,seenUids:{box:{},circle:{}}};return this._forEachCell(N,K,U,Q,this._queryCell,Me,We,be),le?Me.length>0:Me}},"_query"),Ka.prototype._queryCircle=t(function(N,K,U,Q,le){var be=N-U,Me=N+U,Ie=K-U,Ze=K+U;if(Me<0||be>this.width||Ze<0||Ie>this.height)return Q?!1:[];var ct=[],ht={hitTest:Q,circle:{x:N,y:K,radius:U},seenUids:{box:{},circle:{}}};return this._forEachCell(be,Ie,Me,Ze,this._queryCellCircle,ct,ht,le),Q?ct.length>0:ct},"_queryCircle"),Ka.prototype.query=t(function(N,K,U,Q,le){return this._query(N,K,U,Q,!1,le)},"query"),Ka.prototype.hitTest=t(function(N,K,U,Q,le){return this._query(N,K,U,Q,!0,le)},"hitTest"),Ka.prototype.hitTestCircle=t(function(N,K,U,Q){return this._queryCircle(N,K,U,!0,Q)},"hitTestCircle"),Ka.prototype._queryCell=t(function(N,K,U,Q,le,be,Me,Ie){var Ze=Me.seenUids,ct=this.boxCells[le];if(ct!==null)for(var ht=this.bboxes,Be=0,We=ct;Be<We.length;Be+=1){var it=We[Be];if(!Ze.box[it]){Ze.box[it]=!0;var wt=it*4;if(N<=ht[wt+2]&&K<=ht[wt+3]&&U>=ht[wt+0]&&Q>=ht[wt+1]&&(!Ie||Ie(this.boxKeys[it]))){if(Me.hitTest)return be.push(!0),!0;be.push({key:this.boxKeys[it],x1:ht[wt],y1:ht[wt+1],x2:ht[wt+2],y2:ht[wt+3]})}}}var pt=this.circleCells[le];if(pt!==null)for(var bt=this.circles,Mt=0,Dt=pt;Mt<Dt.length;Mt+=1){var St=Dt[Mt];if(!Ze.circle[St]){Ze.circle[St]=!0;var Ft=St*3;if(this._circleAndRectCollide(bt[Ft],bt[Ft+1],bt[Ft+2],N,K,U,Q)&&(!Ie||Ie(this.circleKeys[St]))){if(Me.hitTest)return be.push(!0),!0;var Lt=bt[Ft],Xt=bt[Ft+1],ar=bt[Ft+2];be.push({key:this.circleKeys[St],x1:Lt-ar,y1:Xt-ar,x2:Lt+ar,y2:Xt+ar})}}}},"_queryCell"),Ka.prototype._queryCellCircle=t(function(N,K,U,Q,le,be,Me,Ie){var Ze=Me.circle,ct=Me.seenUids,ht=this.boxCells[le];if(ht!==null)for(var Be=this.bboxes,We=0,it=ht;We<it.length;We+=1){var wt=it[We];if(!ct.box[wt]){ct.box[wt]=!0;var pt=wt*4;if(this._circleAndRectCollide(Ze.x,Ze.y,Ze.radius,Be[pt+0],Be[pt+1],Be[pt+2],Be[pt+3])&&(!Ie||Ie(this.boxKeys[wt])))return be.push(!0),!0}}var bt=this.circleCells[le];if(bt!==null)for(var Mt=this.circles,Dt=0,St=bt;Dt<St.length;Dt+=1){var Ft=St[Dt];if(!ct.circle[Ft]){ct.circle[Ft]=!0;var Lt=Ft*3;if(this._circlesCollide(Mt[Lt],Mt[Lt+1],Mt[Lt+2],Ze.x,Ze.y,Ze.radius)&&(!Ie||Ie(this.circleKeys[Ft])))return be.push(!0),!0}}},"_queryCellCircle"),Ka.prototype._forEachCell=t(function(N,K,U,Q,le,be,Me,Ie){for(var Ze=this._convertToXCellCoord(N),ct=this._convertToYCellCoord(K),ht=this._convertToXCellCoord(U),Be=this._convertToYCellCoord(Q),We=Ze;We<=ht;We++)for(var it=ct;it<=Be;it++){var wt=this.xCellCount*it+We;if(le.call(this,N,K,U,Q,wt,be,Me,Ie))return}},"_forEachCell"),Ka.prototype._convertToXCellCoord=t(function(N){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(N*this.xScale)))},"_convertToXCellCoord"),Ka.prototype._convertToYCellCoord=t(function(N){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(N*this.yScale)))},"_convertToYCellCoord"),Ka.prototype._circlesCollide=t(function(N,K,U,Q,le,be){var Me=Q-N,Ie=le-K,Ze=U+be;return Ze*Ze>Me*Me+Ie*Ie},"_circlesCollide"),Ka.prototype._circleAndRectCollide=t(function(N,K,U,Q,le,be,Me){var Ie=(be-Q)/2,Ze=Math.abs(N-(Q+Ie));if(Ze>Ie+U)return!1;var ct=(Me-le)/2,ht=Math.abs(K-(le+ct));if(ht>ct+U)return!1;if(Ze<=Ie||ht<=ct)return!0;var Be=Ze-Ie,We=ht-ct;return Be*Be+We*We<=U*U},"_circleAndRectCollide");function Ja(Z,N,K,U,Q){var le=a.create();return N?(a.scale(le,le,[1/Q,1/Q,1]),K||a.rotateZ(le,le,U.angle)):a.multiply(le,U.labelPlaneMatrix,Z),le}t(Ja,"getLabelPlaneMatrix");function Xn(Z,N,K,U,Q){if(N){var le=a.clone(Z);return a.scale(le,le,[Q,Q,1]),K||a.rotateZ(le,le,-U.angle),le}else return U.glCoordMatrix}t(Xn,"getGlCoordMatrix");function Ln(Z,N){var K=[Z.x,Z.y,0,1];Us(K,K,N);var U=K[3];return{point:new a.Point(K[0]/U,K[1]/U),signedDistanceFromCamera:U}}t(Ln,"project");function ni(Z,N){return .5+.5*(Z/N)}t(ni,"getPerspectiveRatio");function $i(Z,N){var K=Z[0]/Z[3],U=Z[1]/Z[3],Q=K>=-N[0]&&K<=N[0]&&U>=-N[1]&&U<=N[1];return Q}t($i,"isVisible");function Vi(Z,N,K,U,Q,le,be,Me){var Ie=U?Z.textSizeData:Z.iconSizeData,Ze=a.evaluateSizeForZoom(Ie,K.transform.zoom),ct=[256/K.width*2+1,256/K.height*2+1],ht=U?Z.text.dynamicLayoutVertexArray:Z.icon.dynamicLayoutVertexArray;ht.clear();for(var Be=Z.lineVertexArray,We=U?Z.text.placedSymbolArray:Z.icon.placedSymbolArray,it=K.transform.width/K.transform.height,wt=!1,pt=0;pt<We.length;pt++){var bt=We.get(pt);if(bt.hidden||bt.writingMode===a.WritingMode.vertical&&!wt){bl(bt.numGlyphs,ht);continue}wt=!1;var Mt=[bt.anchorX,bt.anchorY,0,1];if(a.transformMat4(Mt,Mt,N),!$i(Mt,ct)){bl(bt.numGlyphs,ht);continue}var Dt=Mt[3],St=ni(K.transform.cameraToCenterDistance,Dt),Ft=a.evaluateSizeForFeature(Ie,Ze,bt),Lt=be?Ft/St:Ft*St,Xt=new a.Point(bt.anchorX,bt.anchorY),ar=Ln(Xt,Q).point,vr={},Ir=eo(bt,Lt,!1,Me,N,Q,le,Z.glyphOffsetArray,Be,ht,ar,Xt,vr,it);wt=Ir.useVertical,(Ir.notEnoughRoom||wt||Ir.needsFlipping&&eo(bt,Lt,!0,Me,N,Q,le,Z.glyphOffsetArray,Be,ht,ar,Xt,vr,it).notEnoughRoom)&&bl(bt.numGlyphs,ht)}U?Z.text.dynamicLayoutVertexBuffer.updateData(ht):Z.icon.dynamicLayoutVertexBuffer.updateData(ht)}t(Vi,"updateLineLabels");function Ai(Z,N,K,U,Q,le,be,Me,Ie,Ze,ct){var ht=Me.glyphStartIndex+Me.numGlyphs,Be=Me.lineStartIndex,We=Me.lineStartIndex+Me.lineLength,it=N.getoffsetX(Me.glyphStartIndex),wt=N.getoffsetX(ht-1),pt=Eo(Z*it,K,U,Q,le,be,Me.segment,Be,We,Ie,Ze,ct);if(!pt)return null;var bt=Eo(Z*wt,K,U,Q,le,be,Me.segment,Be,We,Ie,Ze,ct);return bt?{first:pt,last:bt}:null}t(Ai,"placeFirstAndLastGlyph");function _s(Z,N,K,U){if(Z===a.WritingMode.horizontal){var Q=Math.abs(K.y-N.y),le=Math.abs(K.x-N.x)*U;if(Q>le)return{useVertical:!0}}return(Z===a.WritingMode.vertical?N.y<K.y:N.x>K.x)?{needsFlipping:!0}:null}t(_s,"requiresOrientationChange");function eo(Z,N,K,U,Q,le,be,Me,Ie,Ze,ct,ht,Be,We){var it=N/24,wt=Z.lineOffsetX*it,pt=Z.lineOffsetY*it,bt;if(Z.numGlyphs>1){var Mt=Z.glyphStartIndex+Z.numGlyphs,Dt=Z.lineStartIndex,St=Z.lineStartIndex+Z.lineLength,Ft=Ai(it,Me,wt,pt,K,ct,ht,Z,Ie,le,Be);if(!Ft)return{notEnoughRoom:!0};var Lt=Ln(Ft.first.point,be).point,Xt=Ln(Ft.last.point,be).point;if(U&&!K){var ar=_s(Z.writingMode,Lt,Xt,We);if(ar)return ar}bt=[Ft.first];for(var vr=Z.glyphStartIndex+1;vr<Mt-1;vr++)bt.push(Eo(it*Me.getoffsetX(vr),wt,pt,K,ct,ht,Z.segment,Dt,St,Ie,le,Be));bt.push(Ft.last)}else{if(U&&!K){var Ir=Ln(ht,Q).point,zr=Z.lineStartIndex+Z.segment+1,Dr=new a.Point(Ie.getx(zr),Ie.gety(zr)),Vr=Ln(Dr,Q),Xr=Vr.signedDistanceFromCamera>0?Vr.point:lo(ht,Dr,Ir,1,Q),Ta=_s(Z.writingMode,Ir,Xr,We);if(Ta)return Ta}var Jr=Eo(it*Me.getoffsetX(Z.glyphStartIndex),wt,pt,K,ct,ht,Z.segment,Z.lineStartIndex,Z.lineStartIndex+Z.lineLength,Ie,le,Be);if(!Jr)return{notEnoughRoom:!0};bt=[Jr]}for(var sa=0,Nr=bt;sa<Nr.length;sa+=1){var Ua=Nr[sa];a.addDynamicAttributes(Ze,Ua.point,Ua.angle)}return{}}t(eo,"placeGlyphsAlongLine");function lo(Z,N,K,U,Q){var le=Ln(Z.add(Z.sub(N)._unit()),Q).point,be=K.sub(le);return K.add(be._mult(U/be.mag()))}t(lo,"projectTruncatedLineSegment");function Eo(Z,N,K,U,Q,le,be,Me,Ie,Ze,ct,ht){var Be=U?Z-N:Z+N,We=Be>0?1:-1,it=0;U&&(We*=-1,it=Math.PI),We<0&&(it+=Math.PI);for(var wt=We>0?Me+be:Me+be+1,pt=Q,bt=Q,Mt=0,Dt=0,St=Math.abs(Be),Ft=[];Mt+Dt<=St;){if(wt+=We,wt<Me||wt>=Ie)return null;if(bt=pt,Ft.push(pt),pt=ht[wt],pt===void 0){var Lt=new a.Point(Ze.getx(wt),Ze.gety(wt)),Xt=Ln(Lt,ct);if(Xt.signedDistanceFromCamera>0)pt=ht[wt]=Xt.point;else{var ar=wt-We,vr=Mt===0?le:new a.Point(Ze.getx(ar),Ze.gety(ar));pt=lo(vr,Lt,bt,St-Mt+1,ct)}}Mt+=Dt,Dt=bt.dist(pt)}var Ir=(St-Mt)/Dt,zr=pt.sub(bt),Dr=zr.mult(Ir)._add(bt);Dr._add(zr._unit()._perp()._mult(K*We));var Vr=it+Math.atan2(pt.y-bt.y,pt.x-bt.x);return Ft.push(Dr),{point:Dr,angle:Vr,path:Ft}}t(Eo,"placeGlyphAlongLine");var Li=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function bl(Z,N){for(var K=0;K<Z;K++){var U=N.length;N.resize(U+4),N.float32.set(Li,U*3)}}t(bl,"hideGlyphs");function Us(Z,N,K){var U=N[0],Q=N[1];return Z[0]=K[0]*U+K[4]*Q+K[12],Z[1]=K[1]*U+K[5]*Q+K[13],Z[3]=K[3]*U+K[7]*Q+K[15],Z}t(Us,"xyTransformMat4");var pi=100,po=t(function(N,K,U){K===void 0&&(K=new Ka(N.width+2*pi,N.height+2*pi,25)),U===void 0&&(U=new Ka(N.width+2*pi,N.height+2*pi,25)),this.transform=N,this.grid=K,this.ignoredGrid=U,this.pitchfactor=Math.cos(N._pitch)*N.cameraToCenterDistance,this.screenRightBoundary=N.width+pi,this.screenBottomBoundary=N.height+pi,this.gridRightBoundary=N.width+2*pi,this.gridBottomBoundary=N.height+2*pi},"CollisionIndex");po.prototype.placeCollisionBox=t(function(N,K,U,Q,le){var be=this.projectAndGetPerspectiveRatio(Q,N.anchorPointX,N.anchorPointY),Me=U*be.perspectiveRatio,Ie=N.x1*Me+be.point.x,Ze=N.y1*Me+be.point.y,ct=N.x2*Me+be.point.x,ht=N.y2*Me+be.point.y;return!this.isInsideGrid(Ie,Ze,ct,ht)||!K&&this.grid.hitTest(Ie,Ze,ct,ht,le)?{box:[],offscreen:!1}:{box:[Ie,Ze,ct,ht],offscreen:this.isOffscreen(Ie,Ze,ct,ht)}},"placeCollisionBox"),po.prototype.placeCollisionCircles=t(function(N,K,U,Q,le,be,Me,Ie,Ze,ct,ht,Be,We){var it=[],wt=new a.Point(K.anchorX,K.anchorY),pt=Ln(wt,be),bt=ni(this.transform.cameraToCenterDistance,pt.signedDistanceFromCamera),Mt=ct?le/bt:le*bt,Dt=Mt/a.ONE_EM,St=Ln(wt,Me).point,Ft={},Lt=K.lineOffsetX*Dt,Xt=K.lineOffsetY*Dt,ar=Ai(Dt,Q,Lt,Xt,!1,St,wt,K,U,Me,Ft),vr=!1,Ir=!1,zr=!0;if(ar){for(var Dr=Be*.5*bt+We,Vr=new a.Point(-pi,-pi),Xr=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),Ta=new Fa,Jr=ar.first,sa=ar.last,Nr=[],Ua=Jr.path.length-1;Ua>=1;Ua--)Nr.push(Jr.path[Ua]);for(var wn=1;wn<sa.path.length;wn++)Nr.push(sa.path[wn]);var Wn=Dr*2.5;if(Ie){var $n=Nr.map(function(Mc){return Ln(Mc,Ie)});$n.some(function(Mc){return Mc.signedDistanceFromCamera<=0})?Nr=[]:Nr=$n.map(function(Mc){return Mc.point})}var li=[];if(Nr.length>0){for(var gn=Nr[0].clone(),Nn=Nr[0].clone(),Xi=1;Xi<Nr.length;Xi++)gn.x=Math.min(gn.x,Nr[Xi].x),gn.y=Math.min(gn.y,Nr[Xi].y),Nn.x=Math.max(Nn.x,Nr[Xi].x),Nn.y=Math.max(Nn.y,Nr[Xi].y);gn.x>=Vr.x&&Nn.x<=Xr.x&&gn.y>=Vr.y&&Nn.y<=Xr.y?li=[Nr]:Nn.x<Vr.x||gn.x>Xr.x||Nn.y<Vr.y||gn.y>Xr.y?li=[]:li=a.clipLine([Nr],Vr.x,Vr.y,Xr.x,Xr.y)}for(var ls=0,pf=li;ls<pf.length;ls+=1){var gf=pf[ls];Ta.reset(gf,Dr*.25);var wc=0;Ta.length<=.5*Dr?wc=1:wc=Math.ceil(Ta.paddedLength/Wn)+1;for(var Tc=0;Tc<wc;Tc++){var ch=Tc/Math.max(wc-1,1),Ac=Ta.lerp(ch),jl=Ac.x+pi,Wh=Ac.y+pi;it.push(jl,Wh,Dr,0);var cl=jl-Dr,qu=Wh-Dr,Sc=jl+Dr,Wf=Wh+Dr;if(zr=zr&&this.isOffscreen(cl,qu,Sc,Wf),Ir=Ir||this.isInsideGrid(cl,qu,Sc,Wf),!N&&this.grid.hitTestCircle(jl,Wh,Dr,ht)&&(vr=!0,!Ze))return{circles:[],offscreen:!1,collisionDetected:vr}}}}return{circles:!Ze&&vr||!Ir?[]:it,offscreen:zr,collisionDetected:vr}},"placeCollisionCircles"),po.prototype.queryRenderedSymbols=t(function(N){if(N.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var K=[],U=1/0,Q=1/0,le=-1/0,be=-1/0,Me=0,Ie=N;Me<Ie.length;Me+=1){var Ze=Ie[Me],ct=new a.Point(Ze.x+pi,Ze.y+pi);U=Math.min(U,ct.x),Q=Math.min(Q,ct.y),le=Math.max(le,ct.x),be=Math.max(be,ct.y),K.push(ct)}for(var ht=this.grid.query(U,Q,le,be).concat(this.ignoredGrid.query(U,Q,le,be)),Be={},We={},it=0,wt=ht;it<wt.length;it+=1){var pt=wt[it],bt=pt.key;if(Be[bt.bucketInstanceId]===void 0&&(Be[bt.bucketInstanceId]={}),!Be[bt.bucketInstanceId][bt.featureIndex]){var Mt=[new a.Point(pt.x1,pt.y1),new a.Point(pt.x2,pt.y1),new a.Point(pt.x2,pt.y2),new a.Point(pt.x1,pt.y2)];!a.polygonIntersectsPolygon(K,Mt)||(Be[bt.bucketInstanceId][bt.featureIndex]=!0,We[bt.bucketInstanceId]===void 0&&(We[bt.bucketInstanceId]=[]),We[bt.bucketInstanceId].push(bt.featureIndex))}}return We},"queryRenderedSymbols"),po.prototype.insertCollisionBox=t(function(N,K,U,Q,le){var be=K?this.ignoredGrid:this.grid,Me={bucketInstanceId:U,featureIndex:Q,collisionGroupID:le};be.insert(Me,N[0],N[1],N[2],N[3])},"insertCollisionBox"),po.prototype.insertCollisionCircles=t(function(N,K,U,Q,le){for(var be=K?this.ignoredGrid:this.grid,Me={bucketInstanceId:U,featureIndex:Q,collisionGroupID:le},Ie=0;Ie<N.length;Ie+=4)be.insertCircle(Me,N[Ie],N[Ie+1],N[Ie+2])},"insertCollisionCircles"),po.prototype.projectAndGetPerspectiveRatio=t(function(N,K,U){var Q=[K,U,0,1];Us(Q,Q,N);var le=new a.Point((Q[0]/Q[3]+1)/2*this.transform.width+pi,(-Q[1]/Q[3]+1)/2*this.transform.height+pi);return{point:le,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/Q[3])}},"projectAndGetPerspectiveRatio"),po.prototype.isOffscreen=t(function(N,K,U,Q){return U<pi||N>=this.screenRightBoundary||Q<pi||K>this.screenBottomBoundary},"isOffscreen"),po.prototype.isInsideGrid=t(function(N,K,U,Q){return U>=0&&N<this.gridRightBoundary&&Q>=0&&K<this.gridBottomBoundary},"isInsideGrid"),po.prototype.getViewportMatrix=t(function(){var N=a.identity([]);return a.translate(N,N,[-pi,-pi,0]),N},"getViewportMatrix");function wo(Z,N,K){return N*(a.EXTENT/(Z.tileSize*Math.pow(2,K-Z.tileID.overscaledZ)))}t(wo,"pixelsToTileUnits");var Ds=t(function(N,K,U,Q){N?this.opacity=Math.max(0,Math.min(1,N.opacity+(N.placed?K:-K))):this.opacity=Q&&U?1:0,this.placed=U},"OpacityState");Ds.prototype.isHidden=t(function(){return this.opacity===0&&!this.placed},"isHidden");var To=t(function(N,K,U,Q,le){this.text=new Ds(N?N.text:null,K,U,le),this.icon=new Ds(N?N.icon:null,K,Q,le)},"JointOpacityState");To.prototype.isHidden=t(function(){return this.text.isHidden()&&this.icon.isHidden()},"isHidden");var uo=t(function(N,K,U){this.text=N,this.icon=K,this.skipFade=U},"JointPlacement"),Pf=t(function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},"CollisionCircleArray"),Nl=t(function(N,K,U,Q,le){this.bucketInstanceId=N,this.featureIndex=K,this.sourceLayerIndex=U,this.bucketIndex=Q,this.tileID=le},"RetainedQueryData"),qi=t(function(N){this.crossSourceCollisions=N,this.maxGroupID=0,this.collisionGroups={}},"CollisionGroups");qi.prototype.get=t(function(N){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[N]){var K=++this.maxGroupID;this.collisionGroups[N]={ID:K,predicate:function(U){return U.collisionGroupID===K}}}return this.collisionGroups[N]},"get");function Hs(Z,N,K,U,Q){var le=a.getAnchorAlignment(Z),be=le.horizontalAlign,Me=le.verticalAlign,Ie=-(be-.5)*N,Ze=-(Me-.5)*K,ct=a.evaluateVariableOffset(Z,U);return new a.Point(Ie+ct[0]*Q,Ze+ct[1]*Q)}t(Hs,"calculateVariableLayoutShift");function Wr(Z,N,K,U,Q,le){var be=Z.x1,Me=Z.x2,Ie=Z.y1,Ze=Z.y2,ct=Z.anchorPointX,ht=Z.anchorPointY,Be=new a.Point(N,K);return U&&Be._rotate(Q?le:-le),{x1:be+Be.x,y1:Ie+Be.y,x2:Me+Be.x,y2:Ze+Be.y,anchorPointX:ct,anchorPointY:ht}}t(Wr,"shiftVariableCollisionBox");var Ma=t(function(N,K,U,Q){this.transform=N.clone(),this.collisionIndex=new po(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=K,this.retainedQueryData={},this.collisionGroups=new qi(U),this.collisionCircleArrays={},this.prevPlacement=Q,Q&&(Q.prevPlacement=void 0),this.placedOrientations={}},"Placement");Ma.prototype.getBucketParts=t(function(N,K,U,Q){var le=U.getBucket(K),be=U.latestFeatureIndex;if(!(!le||!be||K.id!==le.layerIds[0])){var Me=U.collisionBoxArray,Ie=le.layers[0].layout,Ze=Math.pow(2,this.transform.zoom-U.tileID.overscaledZ),ct=U.tileSize/a.EXTENT,ht=this.transform.calculatePosMatrix(U.tileID.toUnwrapped()),Be=Ie.get("text-pitch-alignment")==="map",We=Ie.get("text-rotation-alignment")==="map",it=wo(U,1,this.transform.zoom),wt=Ja(ht,Be,We,this.transform,it),pt=null;if(Be){var bt=Xn(ht,Be,We,this.transform,it);pt=a.multiply([],this.transform.labelPlaneMatrix,bt)}this.retainedQueryData[le.bucketInstanceId]=new Nl(le.bucketInstanceId,be,le.sourceLayerIndex,le.index,U.tileID);var Mt={bucket:le,layout:Ie,posMatrix:ht,textLabelPlaneMatrix:wt,labelToScreenMatrix:pt,scale:Ze,textPixelRatio:ct,holdingForFade:U.holdingForFade(),collisionBoxArray:Me,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(le.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(le.sourceID)};if(Q)for(var Dt=0,St=le.sortKeyRanges;Dt<St.length;Dt+=1){var Ft=St[Dt],Lt=Ft.sortKey,Xt=Ft.symbolInstanceStart,ar=Ft.symbolInstanceEnd;N.push({sortKey:Lt,symbolInstanceStart:Xt,symbolInstanceEnd:ar,parameters:Mt})}else N.push({symbolInstanceStart:0,symbolInstanceEnd:le.symbolInstances.length,parameters:Mt})}},"getBucketParts"),Ma.prototype.attemptAnchorPlacement=t(function(N,K,U,Q,le,be,Me,Ie,Ze,ct,ht,Be,We,it,wt){var pt=[Be.textOffset0,Be.textOffset1],bt=Hs(N,U,Q,pt,le),Mt=this.collisionIndex.placeCollisionBox(Wr(K,bt.x,bt.y,be,Me,this.transform.angle),ht,Ie,Ze,ct.predicate);if(wt){var Dt=this.collisionIndex.placeCollisionBox(Wr(wt,bt.x,bt.y,be,Me,this.transform.angle),ht,Ie,Ze,ct.predicate);if(Dt.box.length===0)return}if(Mt.box.length>0){var St;return this.prevPlacement&&this.prevPlacement.variableOffsets[Be.crossTileID]&&this.prevPlacement.placements[Be.crossTileID]&&this.prevPlacement.placements[Be.crossTileID].text&&(St=this.prevPlacement.variableOffsets[Be.crossTileID].anchor),this.variableOffsets[Be.crossTileID]={textOffset:pt,width:U,height:Q,anchor:N,textBoxScale:le,prevAnchor:St},this.markUsedJustification(We,N,Be,it),We.allowVerticalPlacement&&(this.markUsedOrientation(We,it,Be),this.placedOrientations[Be.crossTileID]=it),{shift:bt,placedGlyphBoxes:Mt}}},"attemptAnchorPlacement"),Ma.prototype.placeLayerBucketPart=t(function(N,K,U){var Q=this,le=N.parameters,be=le.bucket,Me=le.layout,Ie=le.posMatrix,Ze=le.textLabelPlaneMatrix,ct=le.labelToScreenMatrix,ht=le.textPixelRatio,Be=le.holdingForFade,We=le.collisionBoxArray,it=le.partiallyEvaluatedTextSize,wt=le.collisionGroup,pt=Me.get("text-optional"),bt=Me.get("icon-optional"),Mt=Me.get("text-allow-overlap"),Dt=Me.get("icon-allow-overlap"),St=Me.get("text-rotation-alignment")==="map",Ft=Me.get("text-pitch-alignment")==="map",Lt=Me.get("icon-text-fit")!=="none",Xt=Me.get("symbol-z-order")==="viewport-y",ar=Mt&&(Dt||!be.hasIconData()||bt),vr=Dt&&(Mt||!be.hasTextData()||pt);!be.collisionArrays&&We&&be.deserializeCollisionBoxes(We);var Ir=t(function(Jr,sa){if(!K[Jr.crossTileID]){if(Be){Q.placements[Jr.crossTileID]=new uo(!1,!1,!1);return}var Nr=!1,Ua=!1,wn=!0,Wn=null,$n={box:null,offscreen:null},li={box:null,offscreen:null},gn=null,Nn=null,Xi=null,ls=0,pf=0,gf=0;sa.textFeatureIndex?ls=sa.textFeatureIndex:Jr.useRuntimeCollisionCircles&&(ls=Jr.featureIndex),sa.verticalTextFeatureIndex&&(pf=sa.verticalTextFeatureIndex);var wc=sa.textBox;if(wc){var Tc=t(function(Xo){var su=a.WritingMode.horizontal;if(be.allowVerticalPlacement&&!Xo&&Q.prevPlacement){var lu=Q.prevPlacement.placedOrientations[Jr.crossTileID];lu&&(Q.placedOrientations[Jr.crossTileID]=lu,su=lu,Q.markUsedOrientation(be,su,Jr))}return su},"updatePreviousOrientationIfNotPlaced"),ch=t(function(Xo,su){if(be.allowVerticalPlacement&&Jr.numVerticalGlyphVertices>0&&sa.verticalTextBox)for(var lu=0,G0=be.writingModes;lu<G0.length;lu+=1){var Wy=G0[lu];if(Wy===a.WritingMode.vertical?($n=su(),li=$n):$n=Xo(),$n&&$n.box&&$n.box.length)break}else $n=Xo()},"placeTextForPlacementModes");if(Me.get("text-variable-anchor")){var cl=Me.get("text-variable-anchor");if(Q.prevPlacement&&Q.prevPlacement.variableOffsets[Jr.crossTileID]){var qu=Q.prevPlacement.variableOffsets[Jr.crossTileID];cl.indexOf(qu.anchor)>0&&(cl=cl.filter(function(Xo){return Xo!==qu.anchor}),cl.unshift(qu.anchor))}var Sc=t(function(Xo,su,lu){for(var G0=Xo.x2-Xo.x1,Wy=Xo.y2-Xo.y1,E3=Jr.textBoxScale,C3=Lt&&!Dt?su:null,Np={box:[],offscreen:!1},L3=Mt?cl.length*2:cl.length,j0=0;j0<L3;++j0){var R3=cl[j0%cl.length],P3=j0>=cl.length,Xy=Q.attemptAnchorPlacement(R3,Xo,G0,Wy,E3,St,Ft,ht,Ie,wt,P3,Jr,be,lu,C3);if(Xy&&(Np=Xy.placedGlyphBoxes,Np&&Np.box&&Np.box.length)){Nr=!0,Wn=Xy.shift;break}}return Np},"placeBoxForVariableAnchors"),Wf=t(function(){return Sc(wc,sa.iconBox,a.WritingMode.horizontal)},"placeHorizontal$1"),Mc=t(function(){var Xo=sa.verticalTextBox,su=$n&&$n.box&&$n.box.length;return be.allowVerticalPlacement&&!su&&Jr.numVerticalGlyphVertices>0&&Xo?Sc(Xo,sa.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}},"placeVertical$1");ch(Wf,Mc),$n&&(Nr=$n.box,wn=$n.offscreen);var U0=Tc($n&&$n.box);if(!Nr&&Q.prevPlacement){var Zv=Q.prevPlacement.variableOffsets[Jr.crossTileID];Zv&&(Q.variableOffsets[Jr.crossTileID]=Zv,Q.markUsedJustification(be,Zv.anchor,Jr,U0))}}else{var Ac=t(function(Xo,su){var lu=Q.collisionIndex.placeCollisionBox(Xo,Mt,ht,Ie,wt.predicate);return lu&&lu.box&&lu.box.length&&(Q.markUsedOrientation(be,su,Jr),Q.placedOrientations[Jr.crossTileID]=su),lu},"placeBox"),jl=t(function(){return Ac(wc,a.WritingMode.horizontal)},"placeHorizontal"),Wh=t(function(){var Xo=sa.verticalTextBox;return be.allowVerticalPlacement&&Jr.numVerticalGlyphVertices>0&&Xo?Ac(Xo,a.WritingMode.vertical):{box:null,offscreen:null}},"placeVertical");ch(jl,Wh),Tc($n&&$n.box&&$n.box.length)}}if(gn=$n,Nr=gn&&gn.box&&gn.box.length>0,wn=gn&&gn.offscreen,Jr.useRuntimeCollisionCircles){var Xs=be.text.placedSymbolArray.get(Jr.centerJustifiedTextSymbolIndex),Bp=a.evaluateSizeForFeature(be.textSizeData,it,Xs),El=Me.get("text-padding"),Op=Jr.collisionCircleDiameter;Nn=Q.collisionIndex.placeCollisionCircles(Mt,Xs,be.lineVertexArray,be.glyphOffsetArray,Bp,Ie,Ze,ct,U,Ft,wt.predicate,Op,El),Nr=Mt||Nn.circles.length>0&&!Nn.collisionDetected,wn=wn&&Nn.offscreen}if(sa.iconFeatureIndex&&(gf=sa.iconFeatureIndex),sa.iconBox){var H0=t(function(Xo){var su=Lt&&Wn?Wr(Xo,Wn.x,Wn.y,St,Ft,Q.transform.angle):Xo;return Q.collisionIndex.placeCollisionBox(su,Dt,ht,Ie,wt.predicate)},"placeIconFeature");li&&li.box&&li.box.length&&sa.verticalIconBox?(Xi=H0(sa.verticalIconBox),Ua=Xi.box.length>0):(Xi=H0(sa.iconBox),Ua=Xi.box.length>0),wn=wn&&Xi.offscreen}var $0=pt||Jr.numHorizontalGlyphVertices===0&&Jr.numVerticalGlyphVertices===0,Cx=bt||Jr.numIconVertices===0;if(!$0&&!Cx?Ua=Nr=Ua&&Nr:Cx?$0||(Ua=Ua&&Nr):Nr=Ua&&Nr,Nr&&gn&&gn.box&&(li&&li.box&&pf?Q.collisionIndex.insertCollisionBox(gn.box,Me.get("text-ignore-placement"),be.bucketInstanceId,pf,wt.ID):Q.collisionIndex.insertCollisionBox(gn.box,Me.get("text-ignore-placement"),be.bucketInstanceId,ls,wt.ID)),Ua&&Xi&&Q.collisionIndex.insertCollisionBox(Xi.box,Me.get("icon-ignore-placement"),be.bucketInstanceId,gf,wt.ID),Nn&&(Nr&&Q.collisionIndex.insertCollisionCircles(Nn.circles,Me.get("text-ignore-placement"),be.bucketInstanceId,ls,wt.ID),U)){var V0=be.bucketInstanceId,Fd=Q.collisionCircleArrays[V0];Fd===void 0&&(Fd=Q.collisionCircleArrays[V0]=new Pf);for(var Bd=0;Bd<Nn.circles.length;Bd+=4)Fd.circles.push(Nn.circles[Bd+0]),Fd.circles.push(Nn.circles[Bd+1]),Fd.circles.push(Nn.circles[Bd+2]),Fd.circles.push(Nn.collisionDetected?1:0)}Q.placements[Jr.crossTileID]=new uo(Nr||ar,Ua||vr,wn||be.justReloaded),K[Jr.crossTileID]=!0}},"placeSymbol");if(Xt)for(var zr=be.getSortedSymbolIndexes(this.transform.angle),Dr=zr.length-1;Dr>=0;--Dr){var Vr=zr[Dr];Ir(be.symbolInstances.get(Vr),be.collisionArrays[Vr])}else for(var Xr=N.symbolInstanceStart;Xr<N.symbolInstanceEnd;Xr++)Ir(be.symbolInstances.get(Xr),be.collisionArrays[Xr]);if(U&&be.bucketInstanceId in this.collisionCircleArrays){var Ta=this.collisionCircleArrays[be.bucketInstanceId];a.invert(Ta.invProjMatrix,Ie),Ta.viewportMatrix=this.collisionIndex.getViewportMatrix()}be.justReloaded=!1},"placeLayerBucketPart"),Ma.prototype.markUsedJustification=t(function(N,K,U,Q){var le={left:U.leftJustifiedTextSymbolIndex,center:U.centerJustifiedTextSymbolIndex,right:U.rightJustifiedTextSymbolIndex},be;Q===a.WritingMode.vertical?be=U.verticalPlacedTextSymbolIndex:be=le[a.getAnchorJustification(K)];for(var Me=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex,U.verticalPlacedTextSymbolIndex],Ie=0,Ze=Me;Ie<Ze.length;Ie+=1){var ct=Ze[Ie];ct>=0&&(be>=0&&ct!==be?N.text.placedSymbolArray.get(ct).crossTileID=0:N.text.placedSymbolArray.get(ct).crossTileID=U.crossTileID)}},"markUsedJustification"),Ma.prototype.markUsedOrientation=t(function(N,K,U){for(var Q=K===a.WritingMode.horizontal||K===a.WritingMode.horizontalOnly?K:0,le=K===a.WritingMode.vertical?K:0,be=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex],Me=0,Ie=be;Me<Ie.length;Me+=1){var Ze=Ie[Me];N.text.placedSymbolArray.get(Ze).placedOrientation=Q}U.verticalPlacedTextSymbolIndex&&(N.text.placedSymbolArray.get(U.verticalPlacedTextSymbolIndex).placedOrientation=le)},"markUsedOrientation"),Ma.prototype.commit=t(function(N){this.commitTime=N,this.zoomAtLastRecencyCheck=this.transform.zoom;var K=this.prevPlacement,U=!1;this.prevZoomAdjustment=K?K.zoomAdjustment(this.transform.zoom):0;var Q=K?K.symbolFadeChange(N):1,le=K?K.opacities:{},be=K?K.variableOffsets:{},Me=K?K.placedOrientations:{};for(var Ie in this.placements){var Ze=this.placements[Ie],ct=le[Ie];ct?(this.opacities[Ie]=new To(ct,Q,Ze.text,Ze.icon),U=U||Ze.text!==ct.text.placed||Ze.icon!==ct.icon.placed):(this.opacities[Ie]=new To(null,Q,Ze.text,Ze.icon,Ze.skipFade),U=U||Ze.text||Ze.icon)}for(var ht in le){var Be=le[ht];if(!this.opacities[ht]){var We=new To(Be,Q,!1,!1);We.isHidden()||(this.opacities[ht]=We,U=U||Be.text.placed||Be.icon.placed)}}for(var it in be)!this.variableOffsets[it]&&this.opacities[it]&&!this.opacities[it].isHidden()&&(this.variableOffsets[it]=be[it]);for(var wt in Me)!this.placedOrientations[wt]&&this.opacities[wt]&&!this.opacities[wt].isHidden()&&(this.placedOrientations[wt]=Me[wt]);U?this.lastPlacementChangeTime=N:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=K?K.lastPlacementChangeTime:N)},"commit"),Ma.prototype.updateLayerOpacities=t(function(N,K){for(var U={},Q=0,le=K;Q<le.length;Q+=1){var be=le[Q],Me=be.getBucket(N);Me&&be.latestFeatureIndex&&N.id===Me.layerIds[0]&&this.updateBucketOpacities(Me,U,be.collisionBoxArray)}},"updateLayerOpacities"),Ma.prototype.updateBucketOpacities=t(function(N,K,U){var Q=this;N.hasTextData()&&N.text.opacityVertexArray.clear(),N.hasIconData()&&N.icon.opacityVertexArray.clear(),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexArray.clear(),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexArray.clear();var le=N.layers[0].layout,be=new To(null,0,!1,!1,!0),Me=le.get("text-allow-overlap"),Ie=le.get("icon-allow-overlap"),Ze=le.get("text-variable-anchor"),ct=le.get("text-rotation-alignment")==="map",ht=le.get("text-pitch-alignment")==="map",Be=le.get("icon-text-fit")!=="none",We=new To(null,0,Me&&(Ie||!N.hasIconData()||le.get("icon-optional")),Ie&&(Me||!N.hasTextData()||le.get("text-optional")),!0);!N.collisionArrays&&U&&(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData())&&N.deserializeCollisionBoxes(U);for(var it=t(function(Mt,Dt,St){for(var Ft=0;Ft<Dt/4;Ft++)Mt.opacityVertexArray.emplaceBack(St)},"addOpacities"),wt=t(function(Mt){var Dt=N.symbolInstances.get(Mt),St=Dt.numHorizontalGlyphVertices,Ft=Dt.numVerticalGlyphVertices,Lt=Dt.crossTileID,Xt=K[Lt],ar=Q.opacities[Lt];Xt?ar=be:ar||(ar=We,Q.opacities[Lt]=ar),K[Lt]=!0;var vr=St>0||Ft>0,Ir=Dt.numIconVertices>0,zr=Q.placedOrientations[Dt.crossTileID],Dr=zr===a.WritingMode.vertical,Vr=zr===a.WritingMode.horizontal||zr===a.WritingMode.horizontalOnly;if(vr){var Xr=Yn(ar.text),Ta=Dr?Bn:Xr;it(N.text,St,Ta);var Jr=Vr?Bn:Xr;it(N.text,Ft,Jr);var sa=ar.text.isHidden();[Dt.rightJustifiedTextSymbolIndex,Dt.centerJustifiedTextSymbolIndex,Dt.leftJustifiedTextSymbolIndex].forEach(function(gf){gf>=0&&(N.text.placedSymbolArray.get(gf).hidden=sa||Dr?1:0)}),Dt.verticalPlacedTextSymbolIndex>=0&&(N.text.placedSymbolArray.get(Dt.verticalPlacedTextSymbolIndex).hidden=sa||Vr?1:0);var Nr=Q.variableOffsets[Dt.crossTileID];Nr&&Q.markUsedJustification(N,Nr.anchor,Dt,zr);var Ua=Q.placedOrientations[Dt.crossTileID];Ua&&(Q.markUsedJustification(N,"left",Dt,Ua),Q.markUsedOrientation(N,Ua,Dt))}if(Ir){var wn=Yn(ar.icon),Wn=!(Be&&Dt.verticalPlacedIconSymbolIndex&&Dr);if(Dt.placedIconSymbolIndex>=0){var $n=Wn?wn:Bn;it(N.icon,Dt.numIconVertices,$n),N.icon.placedSymbolArray.get(Dt.placedIconSymbolIndex).hidden=ar.icon.isHidden()}if(Dt.verticalPlacedIconSymbolIndex>=0){var li=Wn?Bn:wn;it(N.icon,Dt.numVerticalIconVertices,li),N.icon.placedSymbolArray.get(Dt.verticalPlacedIconSymbolIndex).hidden=ar.icon.isHidden()}}if(N.hasIconCollisionBoxData()||N.hasTextCollisionBoxData()){var gn=N.collisionArrays[Mt];if(gn){var Nn=new a.Point(0,0);if(gn.textBox||gn.verticalTextBox){var Xi=!0;if(Ze){var ls=Q.variableOffsets[Lt];ls?(Nn=Hs(ls.anchor,ls.width,ls.height,ls.textOffset,ls.textBoxScale),ct&&Nn._rotate(ht?Q.transform.angle:-Q.transform.angle)):Xi=!1}gn.textBox&&go(N.textCollisionBox.collisionVertexArray,ar.text.placed,!Xi||Dr,Nn.x,Nn.y),gn.verticalTextBox&&go(N.textCollisionBox.collisionVertexArray,ar.text.placed,!Xi||Vr,Nn.x,Nn.y)}var pf=Boolean(!Vr&&gn.verticalIconBox);gn.iconBox&&go(N.iconCollisionBox.collisionVertexArray,ar.icon.placed,pf,Be?Nn.x:0,Be?Nn.y:0),gn.verticalIconBox&&go(N.iconCollisionBox.collisionVertexArray,ar.icon.placed,!pf,Be?Nn.x:0,Be?Nn.y:0)}}},"loop"),pt=0;pt<N.symbolInstances.length;pt++)wt(pt);if(N.sortFeatures(this.transform.angle),this.retainedQueryData[N.bucketInstanceId]&&(this.retainedQueryData[N.bucketInstanceId].featureSortOrder=N.featureSortOrder),N.hasTextData()&&N.text.opacityVertexBuffer&&N.text.opacityVertexBuffer.updateData(N.text.opacityVertexArray),N.hasIconData()&&N.icon.opacityVertexBuffer&&N.icon.opacityVertexBuffer.updateData(N.icon.opacityVertexArray),N.hasIconCollisionBoxData()&&N.iconCollisionBox.collisionVertexBuffer&&N.iconCollisionBox.collisionVertexBuffer.updateData(N.iconCollisionBox.collisionVertexArray),N.hasTextCollisionBoxData()&&N.textCollisionBox.collisionVertexBuffer&&N.textCollisionBox.collisionVertexBuffer.updateData(N.textCollisionBox.collisionVertexArray),N.bucketInstanceId in this.collisionCircleArrays){var bt=this.collisionCircleArrays[N.bucketInstanceId];N.placementInvProjMatrix=bt.invProjMatrix,N.placementViewportMatrix=bt.viewportMatrix,N.collisionCircleArray=bt.circles,delete this.collisionCircleArrays[N.bucketInstanceId]}},"updateBucketOpacities"),Ma.prototype.symbolFadeChange=t(function(N){return this.fadeDuration===0?1:(N-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},"symbolFadeChange"),Ma.prototype.zoomAdjustment=t(function(N){return Math.max(0,(this.transform.zoom-N)/1.5)},"zoomAdjustment"),Ma.prototype.hasTransitions=t(function(N){return this.stale||N-this.lastPlacementChangeTime<this.fadeDuration},"hasTransitions"),Ma.prototype.stillRecent=t(function(N,K){var U=this.zoomAtLastRecencyCheck===K?1-this.zoomAdjustment(K):1;return this.zoomAtLastRecencyCheck=K,this.commitTime+this.fadeDuration*U>N},"stillRecent"),Ma.prototype.setStale=t(function(){this.stale=!0},"setStale");function go(Z,N,K,U,Q){Z.emplaceBack(N?1:0,K?1:0,U||0,Q||0),Z.emplaceBack(N?1:0,K?1:0,U||0,Q||0),Z.emplaceBack(N?1:0,K?1:0,U||0,Q||0),Z.emplaceBack(N?1:0,K?1:0,U||0,Q||0)}t(go,"updateCollisionVertices");var Gi=Math.pow(2,25),Ri=Math.pow(2,24),_l=Math.pow(2,17),is=Math.pow(2,16),$s=Math.pow(2,9),Jo=Math.pow(2,8),Ga=Math.pow(2,1);function Yn(Z){if(Z.opacity===0&&!Z.placed)return 0;if(Z.opacity===1&&Z.placed)return 4294967295;var N=Z.placed?1:0,K=Math.floor(Z.opacity*127);return K*Gi+N*Ri+K*_l+N*is+K*$s+N*Jo+K*Ga+N}t(Yn,"packOpacity");var Bn=0,wl=t(function(N){this._sortAcrossTiles=N.layout.get("symbol-z-order")!=="viewport-y"&&N.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]},"LayerPlacement");wl.prototype.continuePlacement=t(function(N,K,U,Q,le){for(var be=this._bucketParts;this._currentTileIndex<N.length;){var Me=N[this._currentTileIndex];if(K.getBucketParts(be,Q,Me,this._sortAcrossTiles),this._currentTileIndex++,le())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,be.sort(function(Ze,ct){return Ze.sortKey-ct.sortKey}));this._currentPartIndex<be.length;){var Ie=be[this._currentPartIndex];if(K.placeLayerBucketPart(Ie,this._seenCrossTileIDs,U),this._currentPartIndex++,le())return!0}return!1},"continuePlacement");var nl=t(function(N,K,U,Q,le,be,Me){this.placement=new Ma(N,le,be,Me),this._currentPlacementIndex=K.length-1,this._forceFullPlacement=U,this._showCollisionBoxes=Q,this._done=!1},"PauseablePlacement");nl.prototype.isDone=t(function(){return this._done},"isDone"),nl.prototype.continuePlacement=t(function(N,K,U){for(var Q=this,le=a.browser.now(),be=t(function(){var ht=a.browser.now()-le;return Q._forceFullPlacement?!1:ht>2},"shouldPausePlacement");this._currentPlacementIndex>=0;){var Me=N[this._currentPlacementIndex],Ie=K[Me],Ze=this.placement.collisionIndex.transform.zoom;if(Ie.type==="symbol"&&(!Ie.minzoom||Ie.minzoom<=Ze)&&(!Ie.maxzoom||Ie.maxzoom>Ze)){this._inProgressLayer||(this._inProgressLayer=new wl(Ie));var ct=this._inProgressLayer.continuePlacement(U[Ie.source],this.placement,this._showCollisionBoxes,Ie,be);if(ct)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},"continuePlacement"),nl.prototype.commit=t(function(N){return this.placement.commit(N),this.placement},"commit");var Kn=512/a.EXTENT/2,tf=t(function(N,K,U){this.tileID=N,this.indexedSymbolInstances={},this.bucketInstanceId=U;for(var Q=0;Q<K.length;Q++){var le=K.get(Q),be=le.key;this.indexedSymbolInstances[be]||(this.indexedSymbolInstances[be]=[]),this.indexedSymbolInstances[be].push({crossTileID:le.crossTileID,coord:this.getScaledCoordinates(le,N)})}},"TileLayerIndex");tf.prototype.getScaledCoordinates=t(function(N,K){var U=K.canonical.z-this.tileID.canonical.z,Q=Kn/Math.pow(2,U);return{x:Math.floor((K.canonical.x*a.EXTENT+N.anchorX)*Q),y:Math.floor((K.canonical.y*a.EXTENT+N.anchorY)*Q)}},"getScaledCoordinates"),tf.prototype.findMatches=t(function(N,K,U){for(var Q=this.tileID.canonical.z<K.canonical.z?1:Math.pow(2,this.tileID.canonical.z-K.canonical.z),le=0;le<N.length;le++){var be=N.get(le);if(!be.crossTileID){var Me=this.indexedSymbolInstances[be.key];if(!!Me)for(var Ie=this.getScaledCoordinates(be,K),Ze=0,ct=Me;Ze<ct.length;Ze+=1){var ht=ct[Ze];if(Math.abs(ht.coord.x-Ie.x)<=Q&&Math.abs(ht.coord.y-Ie.y)<=Q&&!U[ht.crossTileID]){U[ht.crossTileID]=!0,be.crossTileID=ht.crossTileID;break}}}}},"findMatches");var rf=t(function(){this.maxCrossTileID=0},"CrossTileIDs");rf.prototype.generate=t(function(){return++this.maxCrossTileID},"generate");var ql=t(function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0},"CrossTileSymbolLayerIndex");ql.prototype.handleWrapJump=t(function(N){var K=Math.round((N-this.lng)/360);if(K!==0)for(var U in this.indexes){var Q=this.indexes[U],le={};for(var be in Q){var Me=Q[be];Me.tileID=Me.tileID.unwrapTo(Me.tileID.wrap+K),le[Me.tileID.key]=Me}this.indexes[U]=le}this.lng=N},"handleWrapJump"),ql.prototype.addBucket=t(function(N,K,U){if(this.indexes[N.overscaledZ]&&this.indexes[N.overscaledZ][N.key]){if(this.indexes[N.overscaledZ][N.key].bucketInstanceId===K.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(N.overscaledZ,this.indexes[N.overscaledZ][N.key])}for(var Q=0;Q<K.symbolInstances.length;Q++){var le=K.symbolInstances.get(Q);le.crossTileID=0}this.usedCrossTileIDs[N.overscaledZ]||(this.usedCrossTileIDs[N.overscaledZ]={});var be=this.usedCrossTileIDs[N.overscaledZ];for(var Me in this.indexes){var Ie=this.indexes[Me];if(Number(Me)>N.overscaledZ)for(var Ze in Ie){var ct=Ie[Ze];ct.tileID.isChildOf(N)&&ct.findMatches(K.symbolInstances,N,be)}else{var ht=N.scaledTo(Number(Me)),Be=Ie[ht.key];Be&&Be.findMatches(K.symbolInstances,N,be)}}for(var We=0;We<K.symbolInstances.length;We++){var it=K.symbolInstances.get(We);it.crossTileID||(it.crossTileID=U.generate(),be[it.crossTileID]=!0)}return this.indexes[N.overscaledZ]===void 0&&(this.indexes[N.overscaledZ]={}),this.indexes[N.overscaledZ][N.key]=new tf(N,K.symbolInstances,K.bucketInstanceId),!0},"addBucket"),ql.prototype.removeBucketCrossTileIDs=t(function(N,K){for(var U in K.indexedSymbolInstances)for(var Q=0,le=K.indexedSymbolInstances[U];Q<le.length;Q+=1){var be=le[Q];delete this.usedCrossTileIDs[N][be.crossTileID]}},"removeBucketCrossTileIDs"),ql.prototype.removeStaleBuckets=t(function(N){var K=!1;for(var U in this.indexes){var Q=this.indexes[U];for(var le in Q)N[Q[le].bucketInstanceId]||(this.removeBucketCrossTileIDs(U,Q[le]),delete Q[le],K=!0)}return K},"removeStaleBuckets");var Ul=t(function(){this.layerIndexes={},this.crossTileIDs=new rf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}},"CrossTileSymbolIndex");Ul.prototype.addLayer=t(function(N,K,U){var Q=this.layerIndexes[N.id];Q===void 0&&(Q=this.layerIndexes[N.id]=new ql);var le=!1,be={};Q.handleWrapJump(U);for(var Me=0,Ie=K;Me<Ie.length;Me+=1){var Ze=Ie[Me],ct=Ze.getBucket(N);!ct||N.id!==ct.layerIds[0]||(ct.bucketInstanceId||(ct.bucketInstanceId=++this.maxBucketInstanceId),Q.addBucket(Ze.tileID,ct,this.crossTileIDs)&&(le=!0),be[ct.bucketInstanceId]=!0)}return Q.removeStaleBuckets(be)&&(le=!0),le},"addLayer"),Ul.prototype.pruneUnusedLayers=t(function(N){var K={};N.forEach(function(Q){K[Q]=!0});for(var U in this.layerIndexes)K[U]||delete this.layerIndexes[U]},"pruneUnusedLayers");var Co=t(function(Z,N){return a.emitValidationErrors(Z,N&&N.filter(function(K){return K.identifier!=="source.canvas"}))},"emitValidationErrors"),Di=a.pick(aa,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Fh=a.pick(aa,["setCenter","setZoom","setBearing","setPitch"]),af=xa(),Au=function(Z){function N(K,U){var Q=this;U===void 0&&(U={}),Z.call(this),this.map=K,this.dispatcher=new O(mr(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new P(K._requestManager,U.localIdeographFontFamily),this.lineAtlas=new F(256,512),this.crossTileSymbolIndex=new Ul,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var le=this;this._rtlTextPluginCallback=N.registerForPluginStateChange(function(be){var Me={pluginStatus:be.pluginStatus,pluginURL:be.pluginURL};le.dispatcher.broadcast("syncRTLPluginState",Me,function(Ie,Ze){if(a.triggerPluginCompletionEvent(Ie),Ze){var ct=Ze.every(function(Be){return Be});if(ct)for(var ht in le.sourceCaches)le.sourceCaches[ht].reload()}})}),this.on("data",function(be){if(!(be.dataType!=="source"||be.sourceDataType!=="metadata")){var Me=Q.sourceCaches[be.sourceId];if(!!Me){var Ie=Me.getSource();if(!(!Ie||!Ie.vectorLayerIds))for(var Ze in Q._layers){var ct=Q._layers[Ze];ct.source===Ie.id&&Q._validateLayer(ct)}}}})}return t(N,"Style"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.loadURL=t(function(U,Q){var le=this;Q===void 0&&(Q={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var be=typeof Q.validate=="boolean"?Q.validate:!a.isMapboxURL(U);U=this.map._requestManager.normalizeStyleURL(U,Q.accessToken);var Me=this.map._requestManager.transformRequest(U,a.ResourceType.Style);this._request=a.getJSON(Me,function(Ie,Ze){le._request=null,Ie?le.fire(new a.ErrorEvent(Ie)):Ze&&le._load(Ze,be)})},"loadURL"),N.prototype.loadJSON=t(function(U,Q){var le=this;Q===void 0&&(Q={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(function(){le._request=null,le._load(U,Q.validate!==!1)})},"loadJSON"),N.prototype.loadEmpty=t(function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(af,!1)},"loadEmpty"),N.prototype._load=t(function(U,Q){if(!(Q&&Co(this,a.validateStyle(U)))){this._loaded=!0,this.stylesheet=U;for(var le in U.sources)this.addSource(le,U.sources[le],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(U.glyphs);var be=Sr(this.stylesheet.layers);this._order=be.map(function(ct){return ct.id}),this._layers={},this._serializedLayers={};for(var Me=0,Ie=be;Me<Ie.length;Me+=1){var Ze=Ie[Me];Ze=a.createStyleLayer(Ze),Ze.setEventedParent(this,{layer:{id:Ze.id}}),this._layers[Ze.id]=Ze,this._serializedLayers[Ze.id]=Ze.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new R(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},"_load"),N.prototype._loadSprite=t(function(U){var Q=this;this._spriteRequest=m(U,this.map._requestManager,function(le,be){if(Q._spriteRequest=null,le)Q.fire(new a.ErrorEvent(le));else if(be)for(var Me in be)Q.imageManager.addImage(Me,be[Me]);Q.imageManager.setLoaded(!0),Q._availableImages=Q.imageManager.listImages(),Q.dispatcher.broadcast("setImages",Q._availableImages),Q.fire(new a.Event("data",{dataType:"style"}))})},"_loadSprite"),N.prototype._validateLayer=t(function(U){var Q=this.sourceCaches[U.source];if(!!Q){var le=U.sourceLayer;if(!!le){var be=Q.getSource();(be.type==="geojson"||be.vectorLayerIds&&be.vectorLayerIds.indexOf(le)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+le+'" does not exist on source "'+be.id+'" as specified by style layer "'+U.id+'"')))}}},"_validateLayer"),N.prototype.loaded=t(function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var U in this.sourceCaches)if(!this.sourceCaches[U].loaded())return!1;return!!this.imageManager.isLoaded()},"loaded"),N.prototype._serializeLayers=t(function(U){for(var Q=[],le=0,be=U;le<be.length;le+=1){var Me=be[le],Ie=this._layers[Me];Ie.type!=="custom"&&Q.push(Ie.serialize())}return Q},"_serializeLayers"),N.prototype.hasTransitions=t(function(){if(this.light&&this.light.hasTransition())return!0;for(var U in this.sourceCaches)if(this.sourceCaches[U].hasTransition())return!0;for(var Q in this._layers)if(this._layers[Q].hasTransition())return!0;return!1},"hasTransitions"),N.prototype._checkLoaded=t(function(){if(!this._loaded)throw new Error("Style is not done loading")},"_checkLoaded"),N.prototype.update=t(function(U){if(!!this._loaded){var Q=this._changed;if(this._changed){var le=Object.keys(this._updatedLayers),be=Object.keys(this._removedLayers);(le.length||be.length)&&this._updateWorkerLayers(le,be);for(var Me in this._updatedSources){var Ie=this._updatedSources[Me];Ie==="reload"?this._reloadSource(Me):Ie==="clear"&&this._clearSource(Me)}this._updateTilesForChangedImages();for(var Ze in this._updatedPaintProps)this._layers[Ze].updateTransitions(U);this.light.updateTransitions(U),this._resetUpdates()}for(var ct in this.sourceCaches)this.sourceCaches[ct].used=!1;for(var ht=0,Be=this._order;ht<Be.length;ht+=1){var We=Be[ht],it=this._layers[We];it.recalculate(U,this._availableImages),!it.isHidden(U.zoom)&&it.source&&(this.sourceCaches[it.source].used=!0)}this.light.recalculate(U),this.z=U.zoom,Q&&this.fire(new a.Event("data",{dataType:"style"}))}},"update"),N.prototype._updateTilesForChangedImages=t(function(){var U=Object.keys(this._changedImages);if(U.length){for(var Q in this.sourceCaches)this.sourceCaches[Q].reloadTilesForDependencies(["icons","patterns"],U);this._changedImages={}}},"_updateTilesForChangedImages"),N.prototype._updateWorkerLayers=t(function(U,Q){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(U),removedIds:Q})},"_updateWorkerLayers"),N.prototype._resetUpdates=t(function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},"_resetUpdates"),N.prototype.setState=t(function(U){var Q=this;if(this._checkLoaded(),Co(this,a.validateStyle(U)))return!1;U=a.clone$1(U),U.layers=Sr(U.layers);var le=Pn(this.serialize(),U).filter(function(Me){return!(Me.command in Fh)});if(le.length===0)return!1;var be=le.filter(function(Me){return!(Me.command in Di)});if(be.length>0)throw new Error("Unimplemented: "+be.map(function(Me){return Me.command}).join(", ")+".");return le.forEach(function(Me){Me.command!=="setTransition"&&Q[Me.command].apply(Q,Me.args)}),this.stylesheet=U,!0},"setState"),N.prototype.addImage=t(function(U,Q){if(this.getImage(U))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(U,Q),this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.fire(new a.Event("data",{dataType:"style"}))},"addImage"),N.prototype.updateImage=t(function(U,Q){this.imageManager.updateImage(U,Q)},"updateImage"),N.prototype.getImage=t(function(U){return this.imageManager.getImage(U)},"getImage"),N.prototype.removeImage=t(function(U){if(!this.getImage(U))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(U),this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.fire(new a.Event("data",{dataType:"style"}))},"removeImage"),N.prototype.listImages=t(function(){return this._checkLoaded(),this.imageManager.listImages()},"listImages"),N.prototype.addSource=t(function(U,Q,le){var be=this;if(le===void 0&&(le={}),this._checkLoaded(),this.sourceCaches[U]!==void 0)throw new Error("There is already a source with this ID");if(!Q.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(Q).join(", ")+".");var Me=["vector","raster","geojson","video","image"],Ie=Me.indexOf(Q.type)>=0;if(!(Ie&&this._validate(a.validateStyle.source,"sources."+U,Q,null,le))){this.map&&this.map._collectResourceTiming&&(Q.collectResourceTiming=!0);var Ze=this.sourceCaches[U]=new je(U,Q,this.dispatcher);Ze.style=this,Ze.setEventedParent(this,function(){return{isSourceLoaded:be.loaded(),source:Ze.serialize(),sourceId:U}}),Ze.onAdd(this.map),this._changed=!0}},"addSource"),N.prototype.removeSource=t(function(U){if(this._checkLoaded(),this.sourceCaches[U]===void 0)throw new Error("There is no source with this ID");for(var Q in this._layers)if(this._layers[Q].source===U)return this.fire(new a.ErrorEvent(new Error('Source "'+U+'" cannot be removed while layer "'+Q+'" is using it.')));var le=this.sourceCaches[U];delete this.sourceCaches[U],delete this._updatedSources[U],le.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:U})),le.setEventedParent(null),le.clearTiles(),le.onRemove&&le.onRemove(this.map),this._changed=!0},"removeSource"),N.prototype.setGeoJSONSourceData=t(function(U,Q){this._checkLoaded();var le=this.sourceCaches[U].getSource();le.setData(Q),this._changed=!0},"setGeoJSONSourceData"),N.prototype.getSource=t(function(U){return this.sourceCaches[U]&&this.sourceCaches[U].getSource()},"getSource"),N.prototype.addLayer=t(function(U,Q,le){le===void 0&&(le={}),this._checkLoaded();var be=U.id;if(this.getLayer(be)){this.fire(new a.ErrorEvent(new Error('Layer with id "'+be+'" already exists on this map')));return}var Me;if(U.type==="custom"){if(Co(this,a.validateCustomStyleLayer(U)))return;Me=a.createStyleLayer(U)}else{if(typeof U.source=="object"&&(this.addSource(be,U.source),U=a.clone$1(U),U=a.extend(U,{source:be})),this._validate(a.validateStyle.layer,"layers."+be,U,{arrayIndex:-1},le))return;Me=a.createStyleLayer(U),this._validateLayer(Me),Me.setEventedParent(this,{layer:{id:be}}),this._serializedLayers[Me.id]=Me.serialize()}var Ie=Q?this._order.indexOf(Q):this._order.length;if(Q&&Ie===-1){this.fire(new a.ErrorEvent(new Error('Layer with id "'+Q+'" does not exist on this map.')));return}if(this._order.splice(Ie,0,be),this._layerOrderChanged=!0,this._layers[be]=Me,this._removedLayers[be]&&Me.source&&Me.type!=="custom"){var Ze=this._removedLayers[be];delete this._removedLayers[be],Ze.type!==Me.type?this._updatedSources[Me.source]="clear":(this._updatedSources[Me.source]="reload",this.sourceCaches[Me.source].pause())}this._updateLayer(Me),Me.onAdd&&Me.onAdd(this.map)},"addLayer"),N.prototype.moveLayer=t(function(U,Q){this._checkLoaded(),this._changed=!0;var le=this._layers[U];if(!le){this.fire(new a.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be moved.")));return}if(U!==Q){var be=this._order.indexOf(U);this._order.splice(be,1);var Me=Q?this._order.indexOf(Q):this._order.length;if(Q&&Me===-1){this.fire(new a.ErrorEvent(new Error('Layer with id "'+Q+'" does not exist on this map.')));return}this._order.splice(Me,0,U),this._layerOrderChanged=!0}},"moveLayer"),N.prototype.removeLayer=t(function(U){this._checkLoaded();var Q=this._layers[U];if(!Q){this.fire(new a.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be removed.")));return}Q.setEventedParent(null);var le=this._order.indexOf(U);this._order.splice(le,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[U]=Q,delete this._layers[U],delete this._serializedLayers[U],delete this._updatedLayers[U],delete this._updatedPaintProps[U],Q.onRemove&&Q.onRemove(this.map)},"removeLayer"),N.prototype.getLayer=t(function(U){return this._layers[U]},"getLayer"),N.prototype.hasLayer=t(function(U){return U in this._layers},"hasLayer"),N.prototype.setLayerZoomRange=t(function(U,Q,le){this._checkLoaded();var be=this.getLayer(U);if(!be){this.fire(new a.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot have zoom extent.")));return}be.minzoom===Q&&be.maxzoom===le||(Q!=null&&(be.minzoom=Q),le!=null&&(be.maxzoom=le),this._updateLayer(be))},"setLayerZoomRange"),N.prototype.setFilter=t(function(U,Q,le){le===void 0&&(le={}),this._checkLoaded();var be=this.getLayer(U);if(!be){this.fire(new a.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be filtered.")));return}if(!a.deepEqual(be.filter,Q)){if(Q==null){be.filter=void 0,this._updateLayer(be);return}this._validate(a.validateStyle.filter,"layers."+be.id+".filter",Q,null,le)||(be.filter=a.clone$1(Q),this._updateLayer(be))}},"setFilter"),N.prototype.getFilter=t(function(U){return a.clone$1(this.getLayer(U).filter)},"getFilter"),N.prototype.setLayoutProperty=t(function(U,Q,le,be){be===void 0&&(be={}),this._checkLoaded();var Me=this.getLayer(U);if(!Me){this.fire(new a.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")));return}a.deepEqual(Me.getLayoutProperty(Q),le)||(Me.setLayoutProperty(Q,le,be),this._updateLayer(Me))},"setLayoutProperty"),N.prototype.getLayoutProperty=t(function(U,Q){var le=this.getLayer(U);if(!le){this.fire(new a.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style.")));return}return le.getLayoutProperty(Q)},"getLayoutProperty"),N.prototype.setPaintProperty=t(function(U,Q,le,be){be===void 0&&(be={}),this._checkLoaded();var Me=this.getLayer(U);if(!Me){this.fire(new a.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")));return}if(!a.deepEqual(Me.getPaintProperty(Q),le)){var Ie=Me.setPaintProperty(Q,le,be);Ie&&this._updateLayer(Me),this._changed=!0,this._updatedPaintProps[U]=!0}},"setPaintProperty"),N.prototype.getPaintProperty=t(function(U,Q){return this.getLayer(U).getPaintProperty(Q)},"getPaintProperty"),N.prototype.setFeatureState=t(function(U,Q){this._checkLoaded();var le=U.source,be=U.sourceLayer,Me=this.sourceCaches[le];if(Me===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+le+"' does not exist in the map's style.")));return}var Ie=Me.getSource().type;if(Ie==="geojson"&&be){this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(Ie==="vector"&&!be){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}U.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),Me.setFeatureState(be,U.id,Q)},"setFeatureState"),N.prototype.removeFeatureState=t(function(U,Q){this._checkLoaded();var le=U.source,be=this.sourceCaches[le];if(be===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+le+"' does not exist in the map's style.")));return}var Me=be.getSource().type,Ie=Me==="vector"?U.sourceLayer:void 0;if(Me==="vector"&&!Ie){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(Q&&typeof U.id!="string"&&typeof U.id!="number"){this.fire(new a.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}be.removeFeatureState(Ie,U.id,Q)},"removeFeatureState"),N.prototype.getFeatureState=t(function(U){this._checkLoaded();var Q=U.source,le=U.sourceLayer,be=this.sourceCaches[Q];if(be===void 0){this.fire(new a.ErrorEvent(new Error("The source '"+Q+"' does not exist in the map's style.")));return}var Me=be.getSource().type;if(Me==="vector"&&!le){this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return U.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),be.getFeatureState(le,U.id)},"getFeatureState"),N.prototype.getTransition=t(function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},"getTransition"),N.prototype.serialize=t(function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(U){return U.serialize()}),layers:this._serializeLayers(this._order)},function(U){return U!==void 0})},"serialize"),N.prototype._updateLayer=t(function(U){this._updatedLayers[U.id]=!0,U.source&&!this._updatedSources[U.source]&&this.sourceCaches[U.source].getSource().type!=="raster"&&(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause()),this._changed=!0},"_updateLayer"),N.prototype._flattenAndSortRenderedFeatures=t(function(U){for(var Q=this,le=t(function(Vr){return Q._layers[Vr].type==="fill-extrusion"},"isLayer3D"),be={},Me=[],Ie=this._order.length-1;Ie>=0;Ie--){var Ze=this._order[Ie];if(le(Ze)){be[Ze]=Ie;for(var ct=0,ht=U;ct<ht.length;ct+=1){var Be=ht[ct],We=Be[Ze];if(We)for(var it=0,wt=We;it<wt.length;it+=1){var pt=wt[it];Me.push(pt)}}}}Me.sort(function(Vr,Xr){return Xr.intersectionZ-Vr.intersectionZ});for(var bt=[],Mt=this._order.length-1;Mt>=0;Mt--){var Dt=this._order[Mt];if(le(Dt))for(var St=Me.length-1;St>=0;St--){var Ft=Me[St].feature;if(be[Ft.layer.id]<Mt)break;bt.push(Ft),Me.pop()}else for(var Lt=0,Xt=U;Lt<Xt.length;Lt+=1){var ar=Xt[Lt],vr=ar[Dt];if(vr)for(var Ir=0,zr=vr;Ir<zr.length;Ir+=1){var Dr=zr[Ir];bt.push(Dr.feature)}}}return bt},"_flattenAndSortRenderedFeatures"),N.prototype.queryRenderedFeatures=t(function(U,Q,le){Q&&Q.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",Q.filter,null,Q);var be={};if(Q&&Q.layers){if(!Array.isArray(Q.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Me=0,Ie=Q.layers;Me<Ie.length;Me+=1){var Ze=Ie[Me],ct=this._layers[Ze];if(!ct)return this.fire(new a.ErrorEvent(new Error("The layer '"+Ze+"' does not exist in the map's style and cannot be queried for features."))),[];be[ct.source]=!0}}var ht=[];Q.availableImages=this._availableImages;for(var Be in this.sourceCaches)Q.layers&&!be[Be]||ht.push(xe(this.sourceCaches[Be],this._layers,this._serializedLayers,U,Q,le));return this.placement&&ht.push(Te(this._layers,this._serializedLayers,this.sourceCaches,U,Q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ht)},"queryRenderedFeatures$1"),N.prototype.querySourceFeatures=t(function(U,Q){Q&&Q.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",Q.filter,null,Q);var le=this.sourceCaches[U];return le?me(le,Q):[]},"querySourceFeatures$1"),N.prototype.addSourceType=t(function(U,Q,le){if(N.getSourceType(U))return le(new Error('A source type called "'+U+'" already exists.'));if(N.setSourceType(U,Q),!Q.workerSourceURL)return le(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:U,url:Q.workerSourceURL},le)},"addSourceType"),N.prototype.getLight=t(function(){return this.light.getLight()},"getLight"),N.prototype.setLight=t(function(U,Q){Q===void 0&&(Q={}),this._checkLoaded();var le=this.light.getLight(),be=!1;for(var Me in U)if(!a.deepEqual(U[Me],le[Me])){be=!0;break}if(!!be){var Ie={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(U,Q),this.light.updateTransitions(Ie)}},"setLight"),N.prototype._validate=t(function(U,Q,le,be,Me){return Me===void 0&&(Me={}),Me&&Me.validate===!1?!1:Co(this,U.call(a.validateStyle,a.extend({key:Q,style:this.serialize(),value:le,styleSpec:a.styleSpec},be)))},"_validate"),N.prototype._remove=t(function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var U in this._layers){var Q=this._layers[U];Q.setEventedParent(null)}for(var le in this.sourceCaches)this.sourceCaches[le].clearTiles(),this.sourceCaches[le].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},"_remove"),N.prototype._clearSource=t(function(U){this.sourceCaches[U].clearTiles()},"_clearSource"),N.prototype._reloadSource=t(function(U){this.sourceCaches[U].resume(),this.sourceCaches[U].reload()},"_reloadSource"),N.prototype._updateSources=t(function(U){for(var Q in this.sourceCaches)this.sourceCaches[Q].update(U)},"_updateSources"),N.prototype._generateCollisionBoxes=t(function(){for(var U in this.sourceCaches)this._reloadSource(U)},"_generateCollisionBoxes"),N.prototype._updatePlacement=t(function(U,Q,le,be,Me){Me===void 0&&(Me=!1);for(var Ie=!1,Ze=!1,ct={},ht=0,Be=this._order;ht<Be.length;ht+=1){var We=Be[ht],it=this._layers[We];if(it.type==="symbol"){if(!ct[it.source]){var wt=this.sourceCaches[it.source];ct[it.source]=wt.getRenderableIds(!0).map(function(Lt){return wt.getTileByID(Lt)}).sort(function(Lt,Xt){return Xt.tileID.overscaledZ-Lt.tileID.overscaledZ||(Lt.tileID.isLessThan(Xt.tileID)?-1:1)})}var pt=this.crossTileSymbolIndex.addLayer(it,ct[it.source],U.center.lng);Ie=Ie||pt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Me=Me||this._layerOrderChanged||le===0,(Me||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),U.zoom))&&(this.pauseablePlacement=new nl(U,this._order,Me,Q,le,be,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ct),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),Ze=!0),Ie&&this.pauseablePlacement.placement.setStale()),Ze||Ie)for(var bt=0,Mt=this._order;bt<Mt.length;bt+=1){var Dt=Mt[bt],St=this._layers[Dt];St.type==="symbol"&&this.placement.updateLayerOpacities(St,ct[St.source])}var Ft=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now());return Ft},"_updatePlacement"),N.prototype._releaseSymbolFadeTiles=t(function(){for(var U in this.sourceCaches)this.sourceCaches[U].releaseSymbolFadeTiles()},"_releaseSymbolFadeTiles"),N.prototype.getImages=t(function(U,Q,le){this.imageManager.getImages(Q.icons,le),this._updateTilesForChangedImages();var be=this.sourceCaches[Q.source];be&&be.setDependencies(Q.tileID.key,Q.type,Q.icons)},"getImages"),N.prototype.getGlyphs=t(function(U,Q,le){this.glyphManager.getGlyphs(Q.stacks,le)},"getGlyphs"),N.prototype.getResource=t(function(U,Q,le){return a.makeRequest(Q,le)},"getResource"),N}(a.Evented);Au.getSourceType=re,Au.setSourceType=ae,Au.registerForPluginStateChange=a.registerForPluginStateChange;var Tl=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Mp=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Vc=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,yi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,oc="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Df=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Qo="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",ws=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_v=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Al="void main() {gl_FragColor=vec4(1.0);}",Ao="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Hl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,il=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Ui=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,Ts="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Lo="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Ql="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Su="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",xd="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",Vs="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",wv="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Mu=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,os=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,sc=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,to=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,ku=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bh=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,If=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bd=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Gc=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,kp=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Ep=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cp=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Tv=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Oh="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Av=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sv="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Mv=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_d=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,wd=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Eu=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,kv=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,jc=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Td=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Nh=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ev="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Ad=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sd=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,ol=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,lc=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Oo=ji(Mp,Vc),Lu=ji(yi,oc),qh=ji(Df,Qo),Sl=ji(ws,_v),eu=ji(Al,Ao),ro=ji(Hl,il),uc=ji(Ui,Ts),fc=ji(Lo,Ql),Gs=ji(Su,xd),Cv=ji(Vs,wv),Lv=ji(Mu,os),Md=ji(sc,to),kd=ji(ku,Bh),zf=ji(If,bd),Ed=ji(Gc,kp),Lp=ji(Ep,Cp),Rp=ji(Tv,Oh),Rv=ji(Av,Sv),cc=ji(Mv,_d),Xc=ji(wd,Eu),Zc=ji(kv,Cu),Uh=ji(jc,Td),Kc=ji(Nh,Ev),Hh=ji(Ad,Sd),Pp=ji(ol,Yc),Pv=ji(lc,Wc);function ji(Z,N){var K=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,U={};return Z=Z.replace(K,function(Q,le,be,Me,Ie){return U[Ie]=!0,le==="define"?`
#ifndef HAS_UNIFORM_u_`+Ie+`
varying `+be+" "+Me+" "+Ie+`;
#else
uniform `+be+" "+Me+" u_"+Ie+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ie+`
    `+be+" "+Me+" "+Ie+" = u_"+Ie+`;
#endif
`}),N=N.replace(K,function(Q,le,be,Me,Ie){var Ze=Me==="float"?"vec2":"vec4",ct=Ie.match(/color/)?"color":Ze;return U[Ie]?le==="define"?`
#ifndef HAS_UNIFORM_u_`+Ie+`
uniform lowp float u_`+Ie+`_t;
attribute `+be+" "+Ze+" a_"+Ie+`;
varying `+be+" "+Me+" "+Ie+`;
#else
uniform `+be+" "+Me+" u_"+Ie+`;
#endif
`:ct==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ie+`
    `+Ie+" = a_"+Ie+`;
#else
    `+be+" "+Me+" "+Ie+" = u_"+Ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ie+`
    `+Ie+" = unpack_mix_"+ct+"(a_"+Ie+", u_"+Ie+`_t);
#else
    `+be+" "+Me+" "+Ie+" = u_"+Ie+`;
#endif
`:le==="define"?`
#ifndef HAS_UNIFORM_u_`+Ie+`
uniform lowp float u_`+Ie+`_t;
attribute `+be+" "+Ze+" a_"+Ie+`;
#else
uniform `+be+" "+Me+" u_"+Ie+`;
#endif
`:ct==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ie+`
    `+be+" "+Me+" "+Ie+" = a_"+Ie+`;
#else
    `+be+" "+Me+" "+Ie+" = u_"+Ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ie+`
    `+be+" "+Me+" "+Ie+" = unpack_mix_"+ct+"(a_"+Ie+", u_"+Ie+`_t);
#else
    `+be+" "+Me+" "+Ie+" = u_"+Ie+`;
#endif
`}),{fragmentSource:Z,vertexSource:N}}t(ji,"compile");var Dp=Object.freeze({__proto__:null,prelude:Oo,background:Lu,backgroundPattern:qh,circle:Sl,clippingMask:eu,heatmap:ro,heatmapTexture:uc,collisionBox:fc,collisionCircle:Gs,debug:Cv,fill:Lv,fillOutline:Md,fillOutlinePattern:kd,fillPattern:zf,fillExtrusion:Ed,fillExtrusionPattern:Lp,hillshadePrepare:Rp,hillshade:Rv,line:cc,lineGradient:Xc,linePattern:Zc,lineSDF:Uh,raster:Kc,symbolIcon:Hh,symbolSDF:Pp,symbolTextAndIcon:Pv}),hc=t(function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null},"VertexArrayObject");hc.prototype.bind=t(function(N,K,U,Q,le,be,Me,Ie){this.context=N;for(var Ze=this.boundPaintVertexBuffers.length!==Q.length,ct=0;!Ze&&ct<Q.length;ct++)this.boundPaintVertexBuffers[ct]!==Q[ct]&&(Ze=!0);var ht=!this.vao||this.boundProgram!==K||this.boundLayoutVertexBuffer!==U||Ze||this.boundIndexBuffer!==le||this.boundVertexOffset!==be||this.boundDynamicVertexBuffer!==Me||this.boundDynamicVertexBuffer2!==Ie;!N.extVertexArrayObject||ht?this.freshBind(K,U,Q,le,be,Me,Ie):(N.bindVertexArrayOES.set(this.vao),Me&&Me.bind(),le&&le.dynamicDraw&&le.bind(),Ie&&Ie.bind())},"bind"),hc.prototype.freshBind=t(function(N,K,U,Q,le,be,Me){var Ie,Ze=N.numAttributes,ct=this.context,ht=ct.gl;if(ct.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ct.extVertexArrayObject.createVertexArrayOES(),ct.bindVertexArrayOES.set(this.vao),Ie=0,this.boundProgram=N,this.boundLayoutVertexBuffer=K,this.boundPaintVertexBuffers=U,this.boundIndexBuffer=Q,this.boundVertexOffset=le,this.boundDynamicVertexBuffer=be,this.boundDynamicVertexBuffer2=Me;else{Ie=ct.currentNumAttributes||0;for(var Be=Ze;Be<Ie;Be++)ht.disableVertexAttribArray(Be)}K.enableAttributes(ht,N);for(var We=0,it=U;We<it.length;We+=1){var wt=it[We];wt.enableAttributes(ht,N)}be&&be.enableAttributes(ht,N),Me&&Me.enableAttributes(ht,N),K.bind(),K.setVertexAttribPointers(ht,N,le);for(var pt=0,bt=U;pt<bt.length;pt+=1){var Mt=bt[pt];Mt.bind(),Mt.setVertexAttribPointers(ht,N,le)}be&&(be.bind(),be.setVertexAttribPointers(ht,N,le)),Q&&Q.bind(),Me&&(Me.bind(),Me.setVertexAttribPointers(ht,N,le)),ct.currentNumAttributes=Ze},"freshBind"),hc.prototype.destroy=t(function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},"destroy");var Ff=t(function(N,K,U,Q,le){var be=N.gl;this.program=be.createProgram();var Me=U?U.defines():[];le&&Me.push("#define OVERDRAW_INSPECTOR;");var Ie=Me.concat(Oo.fragmentSource,K.fragmentSource).join(`
`),Ze=Me.concat(Oo.vertexSource,K.vertexSource).join(`
`),ct=be.createShader(be.FRAGMENT_SHADER);if(be.isContextLost()){this.failedToCreate=!0;return}be.shaderSource(ct,Ie),be.compileShader(ct),be.attachShader(this.program,ct);var ht=be.createShader(be.VERTEX_SHADER);if(be.isContextLost()){this.failedToCreate=!0;return}be.shaderSource(ht,Ze),be.compileShader(ht),be.attachShader(this.program,ht);for(var Be=U?U.layoutAttributes:[],We=0;We<Be.length;We++)be.bindAttribLocation(this.program,We,Be[We].name);be.linkProgram(this.program),be.deleteShader(ht),be.deleteShader(ct),this.numAttributes=be.getProgramParameter(this.program,be.ACTIVE_ATTRIBUTES),this.attributes={};for(var it={},wt=0;wt<this.numAttributes;wt++){var pt=be.getActiveAttrib(this.program,wt);pt&&(this.attributes[pt.name]=be.getAttribLocation(this.program,pt.name))}for(var bt=be.getProgramParameter(this.program,be.ACTIVE_UNIFORMS),Mt=0;Mt<bt;Mt++){var Dt=be.getActiveUniform(this.program,Mt);Dt&&(it[Dt.name]=be.getUniformLocation(this.program,Dt.name))}this.fixedUniforms=Q(N,it),this.binderUniforms=U?U.getUniforms(N,it):[]},"Program");Ff.prototype.draw=t(function(N,K,U,Q,le,be,Me,Ie,Ze,ct,ht,Be,We,it,wt,pt){var bt,Mt=N.gl;if(!this.failedToCreate){N.program.set(this.program),N.setDepthMode(U),N.setStencilMode(Q),N.setColorMode(le),N.setCullFace(be);for(var Dt in this.fixedUniforms)this.fixedUniforms[Dt].set(Me[Dt]);it&&it.setUniforms(N,this.binderUniforms,Be,{zoom:We});for(var St=(bt={},bt[Mt.LINES]=2,bt[Mt.TRIANGLES]=3,bt[Mt.LINE_STRIP]=1,bt)[K],Ft=0,Lt=ht.get();Ft<Lt.length;Ft+=1){var Xt=Lt[Ft],ar=Xt.vaos||(Xt.vaos={}),vr=ar[Ie]||(ar[Ie]=new hc);vr.bind(N,this,Ze,it?it.getPaintVertexBuffers():[],ct,Xt.vertexOffset,wt,pt),Mt.drawElements(K,Xt.primitiveLength*St,Mt.UNSIGNED_SHORT,Xt.primitiveOffset*St*2)}}},"draw");function Bf(Z,N,K){var U=1/wo(K,1,N.transform.tileZoom),Q=Math.pow(2,K.tileID.overscaledZ),le=K.tileSize*Math.pow(2,N.transform.tileZoom)/Q,be=le*(K.tileID.canonical.x+K.tileID.wrap*Q),Me=le*K.tileID.canonical.y;return{u_image:0,u_texsize:K.imageAtlasTexture.size,u_scale:[U,Z.fromScale,Z.toScale],u_fade:Z.t,u_pixel_coord_upper:[be>>16,Me>>16],u_pixel_coord_lower:[be&65535,Me&65535]}}t(Bf,"patternUniformValues");function $h(Z,N,K,U){var Q=K.imageManager.getPattern(Z.from.toString()),le=K.imageManager.getPattern(Z.to.toString()),be=K.imageManager.getPixelSize(),Me=be.width,Ie=be.height,Ze=Math.pow(2,U.tileID.overscaledZ),ct=U.tileSize*Math.pow(2,K.transform.tileZoom)/Ze,ht=ct*(U.tileID.canonical.x+U.tileID.wrap*Ze),Be=ct*U.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:le.tl,u_pattern_br_b:le.br,u_texsize:[Me,Ie],u_mix:N.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:le.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/wo(U,1,K.transform.tileZoom),u_pixel_coord_upper:[ht>>16,Be>>16],u_pixel_coord_lower:[ht&65535,Be&65535]}}t($h,"bgPatternUniformValues");var es=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_lightpos:new a.Uniform3f(Z,N.u_lightpos),u_lightintensity:new a.Uniform1f(Z,N.u_lightintensity),u_lightcolor:new a.Uniform3f(Z,N.u_lightcolor),u_vertical_gradient:new a.Uniform1f(Z,N.u_vertical_gradient),u_opacity:new a.Uniform1f(Z,N.u_opacity)}},"fillExtrusionUniforms"),Dv=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_lightpos:new a.Uniform3f(Z,N.u_lightpos),u_lightintensity:new a.Uniform1f(Z,N.u_lightintensity),u_lightcolor:new a.Uniform3f(Z,N.u_lightcolor),u_vertical_gradient:new a.Uniform1f(Z,N.u_vertical_gradient),u_height_factor:new a.Uniform1f(Z,N.u_height_factor),u_image:new a.Uniform1i(Z,N.u_image),u_texsize:new a.Uniform2f(Z,N.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Z,N.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Z,N.u_pixel_coord_lower),u_scale:new a.Uniform3f(Z,N.u_scale),u_fade:new a.Uniform1f(Z,N.u_fade),u_opacity:new a.Uniform1f(Z,N.u_opacity)}},"fillExtrusionPatternUniforms"),$l=t(function(Z,N,K,U){var Q=N.style.light,le=Q.properties.get("position"),be=[le.x,le.y,le.z],Me=a.create$1();Q.properties.get("anchor")==="viewport"&&a.fromRotation(Me,-N.transform.angle),a.transformMat3(be,be,Me);var Ie=Q.properties.get("color");return{u_matrix:Z,u_lightpos:be,u_lightintensity:Q.properties.get("intensity"),u_lightcolor:[Ie.r,Ie.g,Ie.b],u_vertical_gradient:+K,u_opacity:U}},"fillExtrusionUniformValues"),Ru=t(function(Z,N,K,U,Q,le,be){return a.extend($l(Z,N,K,U),Bf(le,N,be),{u_height_factor:-Math.pow(2,Q.overscaledZ)/be.tileSize/8})},"fillExtrusionPatternUniformValues"),nf=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix)}},"fillUniforms"),Pu=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_image:new a.Uniform1i(Z,N.u_image),u_texsize:new a.Uniform2f(Z,N.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Z,N.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Z,N.u_pixel_coord_lower),u_scale:new a.Uniform3f(Z,N.u_scale),u_fade:new a.Uniform1f(Z,N.u_fade)}},"fillPatternUniforms"),tu=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_world:new a.Uniform2f(Z,N.u_world)}},"fillOutlineUniforms"),Of=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_world:new a.Uniform2f(Z,N.u_world),u_image:new a.Uniform1i(Z,N.u_image),u_texsize:new a.Uniform2f(Z,N.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Z,N.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Z,N.u_pixel_coord_lower),u_scale:new a.Uniform3f(Z,N.u_scale),u_fade:new a.Uniform1f(Z,N.u_fade)}},"fillOutlinePatternUniforms"),of=t(function(Z){return{u_matrix:Z}},"fillUniformValues"),ts=t(function(Z,N,K,U){return a.extend(of(Z),Bf(K,N,U))},"fillPatternUniformValues"),Iv=t(function(Z,N){return{u_matrix:Z,u_world:N}},"fillOutlineUniformValues"),Ip=t(function(Z,N,K,U,Q){return a.extend(ts(Z,N,K,U),{u_world:Q})},"fillOutlinePatternUniformValues"),Cd=t(function(Z,N){return{u_camera_to_center_distance:new a.Uniform1f(Z,N.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(Z,N.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(Z,N.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(Z,N.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(Z,N.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(Z,N.u_matrix)}},"circleUniforms"),Ld=t(function(Z,N,K,U){var Q=Z.transform,le,be;if(U.paint.get("circle-pitch-alignment")==="map"){var Me=wo(K,1,Q.zoom);le=!0,be=[Me,Me]}else le=!1,be=Q.pixelsToGLUnits;return{u_camera_to_center_distance:Q.cameraToCenterDistance,u_scale_with_map:+(U.paint.get("circle-pitch-scale")==="map"),u_matrix:Z.translatePosMatrix(N.posMatrix,K,U.paint.get("circle-translate"),U.paint.get("circle-translate-anchor")),u_pitch_with_map:+le,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:be}},"circleUniformValues"),zv=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_camera_to_center_distance:new a.Uniform1f(Z,N.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(Z,N.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(Z,N.u_extrude_scale),u_overscale_factor:new a.Uniform1f(Z,N.u_overscale_factor)}},"collisionUniforms"),Rd=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_inv_matrix:new a.UniformMatrix4f(Z,N.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(Z,N.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(Z,N.u_viewport_size)}},"collisionCircleUniforms"),Vh=t(function(Z,N,K){var U=wo(K,1,N.zoom),Q=Math.pow(2,N.zoom-K.tileID.overscaledZ),le=K.tileID.overscaleFactor();return{u_matrix:Z,u_camera_to_center_distance:N.cameraToCenterDistance,u_pixels_to_tile_units:U,u_extrude_scale:[N.pixelsToGLUnits[0]/(U*Q),N.pixelsToGLUnits[1]/(U*Q)],u_overscale_factor:le}},"collisionUniformValues"),Jc=t(function(Z,N,K){return{u_matrix:Z,u_inv_matrix:N,u_camera_to_center_distance:K.cameraToCenterDistance,u_viewport_size:[K.width,K.height]}},"collisionCircleUniformValues"),zp=t(function(Z,N){return{u_color:new a.UniformColor(Z,N.u_color),u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_overlay:new a.Uniform1i(Z,N.u_overlay),u_overlay_scale:new a.Uniform1f(Z,N.u_overlay_scale)}},"debugUniforms"),Ro=t(function(Z,N,K){return K===void 0&&(K=1),{u_matrix:Z,u_color:N,u_overlay:0,u_overlay_scale:K}},"debugUniformValues"),Nf=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix)}},"clippingMaskUniforms"),qf=t(function(Z){return{u_matrix:Z}},"clippingMaskUniformValues"),Fp=t(function(Z,N){return{u_extrude_scale:new a.Uniform1f(Z,N.u_extrude_scale),u_intensity:new a.Uniform1f(Z,N.u_intensity),u_matrix:new a.UniformMatrix4f(Z,N.u_matrix)}},"heatmapUniforms"),Ml=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_world:new a.Uniform2f(Z,N.u_world),u_image:new a.Uniform1i(Z,N.u_image),u_color_ramp:new a.Uniform1i(Z,N.u_color_ramp),u_opacity:new a.Uniform1f(Z,N.u_opacity)}},"heatmapTextureUniforms"),Fv=t(function(Z,N,K,U){return{u_matrix:Z,u_extrude_scale:wo(N,1,K),u_intensity:U}},"heatmapUniformValues"),Uf=t(function(Z,N,K,U){var Q=a.create();a.ortho(Q,0,Z.width,Z.height,0,0,1);var le=Z.context.gl;return{u_matrix:Q,u_world:[le.drawingBufferWidth,le.drawingBufferHeight],u_image:K,u_color_ramp:U,u_opacity:N.paint.get("heatmap-opacity")}},"heatmapTextureUniformValues"),Qc=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_image:new a.Uniform1i(Z,N.u_image),u_latrange:new a.Uniform2f(Z,N.u_latrange),u_light:new a.Uniform2f(Z,N.u_light),u_shadow:new a.UniformColor(Z,N.u_shadow),u_highlight:new a.UniformColor(Z,N.u_highlight),u_accent:new a.UniformColor(Z,N.u_accent)}},"hillshadeUniforms"),eh=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_image:new a.Uniform1i(Z,N.u_image),u_dimension:new a.Uniform2f(Z,N.u_dimension),u_zoom:new a.Uniform1f(Z,N.u_zoom),u_maxzoom:new a.Uniform1f(Z,N.u_maxzoom),u_unpack:new a.Uniform4f(Z,N.u_unpack)}},"hillshadePrepareUniforms"),Gh=t(function(Z,N,K){var U=K.paint.get("hillshade-shadow-color"),Q=K.paint.get("hillshade-highlight-color"),le=K.paint.get("hillshade-accent-color"),be=K.paint.get("hillshade-illumination-direction")*(Math.PI/180);K.paint.get("hillshade-illumination-anchor")==="viewport"&&(be-=Z.transform.angle);var Me=!Z.options.moving;return{u_matrix:Z.transform.calculatePosMatrix(N.tileID.toUnwrapped(),Me),u_image:0,u_latrange:ru(Z,N.tileID),u_light:[K.paint.get("hillshade-exaggeration"),be],u_shadow:U,u_highlight:Q,u_accent:le}},"hillshadeUniformValues"),Bv=t(function(Z,N,K){var U=N.stride,Q=a.create();return a.ortho(Q,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Q,Q,[0,-a.EXTENT,0]),{u_matrix:Q,u_image:1,u_dimension:[U,U],u_zoom:Z.overscaledZ,u_maxzoom:K,u_unpack:N.getUnpackVector()}},"hillshadeUniformPrepareValues");function ru(Z,N){var K=Math.pow(2,N.canonical.z),U=N.canonical.y;return[new a.MercatorCoordinate(0,U/K).toLngLat().lat,new a.MercatorCoordinate(0,(U+1)/K).toLngLat().lat]}t(ru,"getTileLatRange");var sl=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_ratio:new a.Uniform1f(Z,N.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Z,N.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(Z,N.u_units_to_pixels)}},"lineUniforms"),sf=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_ratio:new a.Uniform1f(Z,N.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Z,N.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(Z,N.u_units_to_pixels),u_image:new a.Uniform1i(Z,N.u_image)}},"lineGradientUniforms"),Ov=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_texsize:new a.Uniform2f(Z,N.u_texsize),u_ratio:new a.Uniform1f(Z,N.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Z,N.u_device_pixel_ratio),u_image:new a.Uniform1i(Z,N.u_image),u_units_to_pixels:new a.Uniform2f(Z,N.u_units_to_pixels),u_scale:new a.Uniform3f(Z,N.u_scale),u_fade:new a.Uniform1f(Z,N.u_fade)}},"linePatternUniforms"),Nv=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_ratio:new a.Uniform1f(Z,N.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Z,N.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(Z,N.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(Z,N.u_patternscale_a),u_patternscale_b:new a.Uniform2f(Z,N.u_patternscale_b),u_sdfgamma:new a.Uniform1f(Z,N.u_sdfgamma),u_image:new a.Uniform1i(Z,N.u_image),u_tex_y_a:new a.Uniform1f(Z,N.u_tex_y_a),u_tex_y_b:new a.Uniform1f(Z,N.u_tex_y_b),u_mix:new a.Uniform1f(Z,N.u_mix)}},"lineSDFUniforms"),vc=t(function(Z,N,K){var U=Z.transform;return{u_matrix:Iu(Z,N,K),u_ratio:1/wo(N,1,U.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]]}},"lineUniformValues"),Pd=t(function(Z,N,K){return a.extend(vc(Z,N,K),{u_image:0})},"lineGradientUniformValues"),au=t(function(Z,N,K,U){var Q=Z.transform,le=Du(N,Q);return{u_matrix:Iu(Z,N,K),u_texsize:N.imageAtlasTexture.size,u_ratio:1/wo(N,1,Q.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[le,U.fromScale,U.toScale],u_fade:U.t,u_units_to_pixels:[1/Q.pixelsToGLUnits[0],1/Q.pixelsToGLUnits[1]]}},"linePatternUniformValues"),dc=t(function(Z,N,K,U,Q){var le=Z.transform,be=Z.lineAtlas,Me=Du(N,le),Ie=K.layout.get("line-cap")==="round",Ze=be.getDash(U.from,Ie),ct=be.getDash(U.to,Ie),ht=Ze.width*Q.fromScale,Be=ct.width*Q.toScale;return a.extend(vc(Z,N,K),{u_patternscale_a:[Me/ht,-Ze.height/2],u_patternscale_b:[Me/Be,-ct.height/2],u_sdfgamma:be.width/(Math.min(ht,Be)*256*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ze.y,u_tex_y_b:ct.y,u_mix:Q.t})},"lineSDFUniformValues");function Du(Z,N){return 1/wo(Z,1,N.tileZoom)}t(Du,"calculateTileRatio");function Iu(Z,N,K){return Z.translatePosMatrix(N.tileID.posMatrix,N,K.paint.get("line-translate"),K.paint.get("line-translate-anchor"))}t(Iu,"calculateMatrix");var qv=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_tl_parent:new a.Uniform2f(Z,N.u_tl_parent),u_scale_parent:new a.Uniform1f(Z,N.u_scale_parent),u_buffer_scale:new a.Uniform1f(Z,N.u_buffer_scale),u_fade_t:new a.Uniform1f(Z,N.u_fade_t),u_opacity:new a.Uniform1f(Z,N.u_opacity),u_image0:new a.Uniform1i(Z,N.u_image0),u_image1:new a.Uniform1i(Z,N.u_image1),u_brightness_low:new a.Uniform1f(Z,N.u_brightness_low),u_brightness_high:new a.Uniform1f(Z,N.u_brightness_high),u_saturation_factor:new a.Uniform1f(Z,N.u_saturation_factor),u_contrast_factor:new a.Uniform1f(Z,N.u_contrast_factor),u_spin_weights:new a.Uniform3f(Z,N.u_spin_weights)}},"rasterUniforms"),Hf=t(function(Z,N,K,U,Q){return{u_matrix:Z,u_tl_parent:N,u_scale_parent:K,u_buffer_scale:1,u_fade_t:U.mix,u_opacity:U.opacity*Q.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Q.paint.get("raster-brightness-min"),u_brightness_high:Q.paint.get("raster-brightness-max"),u_saturation_factor:Uv(Q.paint.get("raster-saturation")),u_contrast_factor:th(Q.paint.get("raster-contrast")),u_spin_weights:Si(Q.paint.get("raster-hue-rotate"))}},"rasterUniformValues");function Si(Z){Z*=Math.PI/180;var N=Math.sin(Z),K=Math.cos(Z);return[(2*K+1)/3,(-Math.sqrt(3)*N-K+1)/3,(Math.sqrt(3)*N-K+1)/3]}t(Si,"spinWeights");function th(Z){return Z>0?1/(1-Z):1+Z}t(th,"contrastFactor");function Uv(Z){return Z>0?1-1/(1.001-Z):-Z}t(Uv,"saturationFactor");var rh=t(function(Z,N){return{u_is_size_zoom_constant:new a.Uniform1i(Z,N.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Z,N.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Z,N.u_size_t),u_size:new a.Uniform1f(Z,N.u_size),u_camera_to_center_distance:new a.Uniform1f(Z,N.u_camera_to_center_distance),u_pitch:new a.Uniform1f(Z,N.u_pitch),u_rotate_symbol:new a.Uniform1i(Z,N.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(Z,N.u_aspect_ratio),u_fade_change:new a.Uniform1f(Z,N.u_fade_change),u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Z,N.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Z,N.u_coord_matrix),u_is_text:new a.Uniform1i(Z,N.u_is_text),u_pitch_with_map:new a.Uniform1i(Z,N.u_pitch_with_map),u_texsize:new a.Uniform2f(Z,N.u_texsize),u_texture:new a.Uniform1i(Z,N.u_texture)}},"symbolIconUniforms"),$f=t(function(Z,N){return{u_is_size_zoom_constant:new a.Uniform1i(Z,N.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Z,N.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Z,N.u_size_t),u_size:new a.Uniform1f(Z,N.u_size),u_camera_to_center_distance:new a.Uniform1f(Z,N.u_camera_to_center_distance),u_pitch:new a.Uniform1f(Z,N.u_pitch),u_rotate_symbol:new a.Uniform1i(Z,N.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(Z,N.u_aspect_ratio),u_fade_change:new a.Uniform1f(Z,N.u_fade_change),u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Z,N.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Z,N.u_coord_matrix),u_is_text:new a.Uniform1i(Z,N.u_is_text),u_pitch_with_map:new a.Uniform1i(Z,N.u_pitch_with_map),u_texsize:new a.Uniform2f(Z,N.u_texsize),u_texture:new a.Uniform1i(Z,N.u_texture),u_gamma_scale:new a.Uniform1f(Z,N.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(Z,N.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(Z,N.u_is_halo)}},"symbolSDFUniforms"),ah=t(function(Z,N){return{u_is_size_zoom_constant:new a.Uniform1i(Z,N.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Z,N.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Z,N.u_size_t),u_size:new a.Uniform1f(Z,N.u_size),u_camera_to_center_distance:new a.Uniform1f(Z,N.u_camera_to_center_distance),u_pitch:new a.Uniform1f(Z,N.u_pitch),u_rotate_symbol:new a.Uniform1i(Z,N.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(Z,N.u_aspect_ratio),u_fade_change:new a.Uniform1f(Z,N.u_fade_change),u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Z,N.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Z,N.u_coord_matrix),u_is_text:new a.Uniform1i(Z,N.u_is_text),u_pitch_with_map:new a.Uniform1i(Z,N.u_pitch_with_map),u_texsize:new a.Uniform2f(Z,N.u_texsize),u_texsize_icon:new a.Uniform2f(Z,N.u_texsize_icon),u_texture:new a.Uniform1i(Z,N.u_texture),u_texture_icon:new a.Uniform1i(Z,N.u_texture_icon),u_gamma_scale:new a.Uniform1f(Z,N.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(Z,N.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(Z,N.u_is_halo)}},"symbolTextAndIconUniforms"),Vf=t(function(Z,N,K,U,Q,le,be,Me,Ie,Ze){var ct=Q.transform;return{u_is_size_zoom_constant:+(Z==="constant"||Z==="source"),u_is_size_feature_constant:+(Z==="constant"||Z==="camera"),u_size_t:N?N.uSizeT:0,u_size:N?N.uSize:0,u_camera_to_center_distance:ct.cameraToCenterDistance,u_pitch:ct.pitch/360*2*Math.PI,u_rotate_symbol:+K,u_aspect_ratio:ct.width/ct.height,u_fade_change:Q.options.fadeDuration?Q.symbolFadeChange:1,u_matrix:le,u_label_plane_matrix:be,u_coord_matrix:Me,u_is_text:+Ie,u_pitch_with_map:+U,u_texsize:Ze,u_texture:0}},"symbolIconUniformValues"),nh=t(function(Z,N,K,U,Q,le,be,Me,Ie,Ze,ct){var ht=Q.transform;return a.extend(Vf(Z,N,K,U,Q,le,be,Me,Ie,Ze),{u_gamma_scale:U?Math.cos(ht._pitch)*ht.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+ct})},"symbolSDFUniformValues"),Hv=t(function(Z,N,K,U,Q,le,be,Me,Ie,Ze){return a.extend(nh(Z,N,K,U,Q,le,be,Me,!0,Ie,!0),{u_texsize_icon:Ze,u_texture_icon:1})},"symbolTextAndIconUniformValues"),ih=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_opacity:new a.Uniform1f(Z,N.u_opacity),u_color:new a.UniformColor(Z,N.u_color)}},"backgroundUniforms"),As=t(function(Z,N){return{u_matrix:new a.UniformMatrix4f(Z,N.u_matrix),u_opacity:new a.Uniform1f(Z,N.u_opacity),u_image:new a.Uniform1i(Z,N.u_image),u_pattern_tl_a:new a.Uniform2f(Z,N.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(Z,N.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(Z,N.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(Z,N.u_pattern_br_b),u_texsize:new a.Uniform2f(Z,N.u_texsize),u_mix:new a.Uniform1f(Z,N.u_mix),u_pattern_size_a:new a.Uniform2f(Z,N.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(Z,N.u_pattern_size_b),u_scale_a:new a.Uniform1f(Z,N.u_scale_a),u_scale_b:new a.Uniform1f(Z,N.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(Z,N.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Z,N.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(Z,N.u_tile_units_to_pixels)}},"backgroundPatternUniforms"),pc=t(function(Z,N,K){return{u_matrix:Z,u_opacity:N,u_color:K}},"backgroundUniformValues"),gc=t(function(Z,N,K,U,Q,le){return a.extend($h(U,le,K,Q),{u_matrix:Z,u_opacity:N})},"backgroundPatternUniformValues"),nu={fillExtrusion:es,fillExtrusionPattern:Dv,fill:nf,fillPattern:Pu,fillOutline:tu,fillOutlinePattern:Of,circle:Cd,collisionBox:zv,collisionCircle:Rd,debug:zp,clippingMask:Nf,heatmap:Fp,heatmapTexture:Ml,hillshade:Qc,hillshadePrepare:eh,line:sl,lineGradient:sf,linePattern:Ov,lineSDF:Nv,raster:qv,symbolIcon:rh,symbolSDF:$f,symbolTextAndIcon:ah,background:ih,backgroundPattern:As},Ss;function jh(Z,N,K,U,Q,le,be){for(var Me=Z.context,Ie=Me.gl,Ze=Z.useProgram("collisionBox"),ct=[],ht=0,Be=0,We=0;We<U.length;We++){var it=U[We],wt=N.getTile(it),pt=wt.getBucket(K);if(!!pt){var bt=it.posMatrix;(Q[0]!==0||Q[1]!==0)&&(bt=Z.translatePosMatrix(it.posMatrix,wt,Q,le));var Mt=be?pt.textCollisionBox:pt.iconCollisionBox,Dt=pt.collisionCircleArray;if(Dt.length>0){var St=a.create(),Ft=bt;a.mul(St,pt.placementInvProjMatrix,Z.transform.glCoordMatrix),a.mul(St,St,pt.placementViewportMatrix),ct.push({circleArray:Dt,circleOffset:Be,transform:Ft,invTransform:St}),ht+=Dt.length/4,Be=ht}!Mt||Ze.draw(Me,Ie.LINES,Er.disabled,Hr.disabled,Z.colorModeForRenderPass(),Ae.disabled,Vh(bt,Z.transform,wt),K.id,Mt.layoutVertexBuffer,Mt.indexBuffer,Mt.segments,null,Z.transform.zoom,null,null,Mt.collisionVertexBuffer)}}if(!(!be||!ct.length)){var Lt=Z.useProgram("collisionCircle"),Xt=new a.StructArrayLayout2f1f2i16;Xt.resize(ht*4),Xt._trim();for(var ar=0,vr=0,Ir=ct;vr<Ir.length;vr+=1)for(var zr=Ir[vr],Dr=0;Dr<zr.circleArray.length/4;Dr++){var Vr=Dr*4,Xr=zr.circleArray[Vr+0],Ta=zr.circleArray[Vr+1],Jr=zr.circleArray[Vr+2],sa=zr.circleArray[Vr+3];Xt.emplace(ar++,Xr,Ta,Jr,sa,0),Xt.emplace(ar++,Xr,Ta,Jr,sa,1),Xt.emplace(ar++,Xr,Ta,Jr,sa,2),Xt.emplace(ar++,Xr,Ta,Jr,sa,3)}(!Ss||Ss.length<ht*2)&&(Ss=lf(ht));for(var Nr=Me.createIndexBuffer(Ss,!0),Ua=Me.createVertexBuffer(Xt,a.collisionCircleLayout.members,!0),wn=0,Wn=ct;wn<Wn.length;wn+=1){var $n=Wn[wn],li=Jc($n.transform,$n.invTransform,Z.transform);Lt.draw(Me,Ie.TRIANGLES,Er.disabled,Hr.disabled,Z.colorModeForRenderPass(),Ae.disabled,li,K.id,Ua,Nr,a.SegmentVector.simpleSegment(0,$n.circleOffset*2,$n.circleArray.length,$n.circleArray.length/2),null,Z.transform.zoom,null,null,null)}Ua.destroy(),Nr.destroy()}}t(jh,"drawCollisionDebug");function lf(Z){var N=Z*2,K=new a.StructArrayLayout3ui6;K.resize(N),K._trim();for(var U=0;U<N;U++){var Q=U*6;K.uint16[Q+0]=U*4+0,K.uint16[Q+1]=U*4+1,K.uint16[Q+2]=U*4+2,K.uint16[Q+3]=U*4+2,K.uint16[Q+4]=U*4+3,K.uint16[Q+5]=U*4+0}return K}t(lf,"createQuadTriangles");var zu=a.identity(new Float32Array(16));function iu(Z,N,K,U,Q){if(Z.renderPass==="translucent"){var le=Hr.disabled,be=Z.colorModeForRenderPass(),Me=K.layout.get("text-variable-anchor");Me&&oh(U,Z,K,N,K.layout.get("text-rotation-alignment"),K.layout.get("text-pitch-alignment"),Q),K.paint.get("icon-opacity").constantOr(1)!==0&&ff(Z,N,K,U,!1,K.paint.get("icon-translate"),K.paint.get("icon-translate-anchor"),K.layout.get("icon-rotation-alignment"),K.layout.get("icon-pitch-alignment"),K.layout.get("icon-keep-upright"),le,be),K.paint.get("text-opacity").constantOr(1)!==0&&ff(Z,N,K,U,!0,K.paint.get("text-translate"),K.paint.get("text-translate-anchor"),K.layout.get("text-rotation-alignment"),K.layout.get("text-pitch-alignment"),K.layout.get("text-keep-upright"),le,be),N.map.showCollisionBoxes&&(jh(Z,N,K,U,K.paint.get("text-translate"),K.paint.get("text-translate-anchor"),!0),jh(Z,N,K,U,K.paint.get("icon-translate"),K.paint.get("icon-translate-anchor"),!1))}}t(iu,"drawSymbols");function uf(Z,N,K,U,Q,le){var be=a.getAnchorAlignment(Z),Me=be.horizontalAlign,Ie=be.verticalAlign,Ze=-(Me-.5)*N,ct=-(Ie-.5)*K,ht=a.evaluateVariableOffset(Z,U);return new a.Point((Ze/Q+ht[0])*le,(ct/Q+ht[1])*le)}t(uf,"calculateVariableRenderShift");function oh(Z,N,K,U,Q,le,be){for(var Me=N.transform,Ie=Q==="map",Ze=le==="map",ct=0,ht=Z;ct<ht.length;ct+=1){var Be=ht[ct],We=U.getTile(Be),it=We.getBucket(K);if(!(!it||!it.text||!it.text.segments.get().length)){var wt=it.textSizeData,pt=a.evaluateSizeForZoom(wt,Me.zoom),bt=wo(We,1,N.transform.zoom),Mt=Ja(Be.posMatrix,Ze,Ie,N.transform,bt),Dt=K.layout.get("icon-text-fit")!=="none"&&it.hasIconData();if(pt){var St=Math.pow(2,Me.zoom-We.tileID.overscaledZ);js(it,Ie,Ze,be,a.symbolSize,Me,Mt,Be.posMatrix,St,pt,Dt)}}}}t(oh,"updateVariableAnchors");function js(Z,N,K,U,Q,le,be,Me,Ie,Ze,ct){var ht=Z.text.placedSymbolArray,Be=Z.text.dynamicLayoutVertexArray,We=Z.icon.dynamicLayoutVertexArray,it={};Be.clear();for(var wt=0;wt<ht.length;wt++){var pt=ht.get(wt),bt=Z.allowVerticalPlacement&&!pt.placedOrientation,Mt=!pt.hidden&&pt.crossTileID&&!bt?U[pt.crossTileID]:null;if(!Mt)bl(pt.numGlyphs,Be);else{var Dt=new a.Point(pt.anchorX,pt.anchorY),St=Ln(Dt,K?Me:be),Ft=ni(le.cameraToCenterDistance,St.signedDistanceFromCamera),Lt=Q.evaluateSizeForFeature(Z.textSizeData,Ze,pt)*Ft/a.ONE_EM;K&&(Lt*=Z.tilePixelRatio/Ie);for(var Xt=Mt.width,ar=Mt.height,vr=Mt.anchor,Ir=Mt.textOffset,zr=Mt.textBoxScale,Dr=uf(vr,Xt,ar,Ir,zr,Lt),Vr=K?Ln(Dt.add(Dr),be).point:St.point.add(N?Dr.rotate(-le.angle):Dr),Xr=Z.allowVerticalPlacement&&pt.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,Ta=0;Ta<pt.numGlyphs;Ta++)a.addDynamicAttributes(Be,Vr,Xr);ct&&pt.associatedIconIndex>=0&&(it[pt.associatedIconIndex]={shiftedAnchor:Vr,angle:Xr})}}if(ct){We.clear();for(var Jr=Z.icon.placedSymbolArray,sa=0;sa<Jr.length;sa++){var Nr=Jr.get(sa);if(Nr.hidden)bl(Nr.numGlyphs,We);else{var Ua=it[sa];if(!Ua)bl(Nr.numGlyphs,We);else for(var wn=0;wn<Nr.numGlyphs;wn++)a.addDynamicAttributes(We,Ua.shiftedAnchor,Ua.angle)}}Z.icon.dynamicLayoutVertexBuffer.updateData(We)}Z.text.dynamicLayoutVertexBuffer.updateData(Be)}t(js,"updateVariableAnchorsForBucket");function Gf(Z,N,K){return K.iconsInText&&N?"symbolTextAndIcon":Z?"symbolSDF":"symbolIcon"}t(Gf,"getSymbolProgramName");function ff(Z,N,K,U,Q,le,be,Me,Ie,Ze,ct,ht){for(var Be=Z.context,We=Be.gl,it=Z.transform,wt=Me==="map",pt=Ie==="map",bt=wt&&K.layout.get("symbol-placement")!=="point",Mt=wt&&!pt&&!bt,Dt=K.layout.get("symbol-sort-key").constantOr(1)!==void 0,St=Z.depthModeForSublayer(0,Er.ReadOnly),Ft=K.layout.get("text-variable-anchor"),Lt=[],Xt=0,ar=U;Xt<ar.length;Xt+=1){var vr=ar[Xt],Ir=N.getTile(vr),zr=Ir.getBucket(K);if(!!zr){var Dr=Q?zr.text:zr.icon;if(!(!Dr||!Dr.segments.get().length)){var Vr=Dr.programConfigurations.get(K.id),Xr=Q||zr.sdfIcons,Ta=Q?zr.textSizeData:zr.iconSizeData,Jr=pt||it.pitch!==0,sa=Z.useProgram(Gf(Xr,Q,zr),Vr),Nr=a.evaluateSizeForZoom(Ta,it.zoom),Ua=void 0,wn=[0,0],Wn=void 0,$n=void 0,li=null,gn=void 0;if(Q){if(Wn=Ir.glyphAtlasTexture,$n=We.LINEAR,Ua=Ir.glyphAtlasTexture.size,zr.iconsInText){wn=Ir.imageAtlasTexture.size,li=Ir.imageAtlasTexture;var Nn=Ta.kind==="composite"||Ta.kind==="camera";gn=Jr||Z.options.rotating||Z.options.zooming||Nn?We.LINEAR:We.NEAREST}}else{var Xi=K.layout.get("icon-size").constantOr(0)!==1||zr.iconsNeedLinear;Wn=Ir.imageAtlasTexture,$n=Xr||Z.options.rotating||Z.options.zooming||Xi||Jr?We.LINEAR:We.NEAREST,Ua=Ir.imageAtlasTexture.size}var ls=wo(Ir,1,Z.transform.zoom),pf=Ja(vr.posMatrix,pt,wt,Z.transform,ls),gf=Xn(vr.posMatrix,pt,wt,Z.transform,ls),wc=Ft&&zr.hasTextData(),Tc=K.layout.get("icon-text-fit")!=="none"&&wc&&zr.hasIconData();bt&&Vi(zr,vr.posMatrix,Z,Q,pf,gf,pt,Ze);var ch=Z.translatePosMatrix(vr.posMatrix,Ir,le,be),Ac=bt||Q&&Ft||Tc?zu:pf,jl=Z.translatePosMatrix(gf,Ir,le,be,!0),Wh=Xr&&K.paint.get(Q?"text-halo-width":"icon-halo-width").constantOr(1)!==0,cl=void 0;Xr?zr.iconsInText?cl=Hv(Ta.kind,Nr,Mt,pt,Z,ch,Ac,jl,Ua,wn):cl=nh(Ta.kind,Nr,Mt,pt,Z,ch,Ac,jl,Q,Ua,!0):cl=Vf(Ta.kind,Nr,Mt,pt,Z,ch,Ac,jl,Q,Ua);var qu={program:sa,buffers:Dr,uniformValues:cl,atlasTexture:Wn,atlasTextureIcon:li,atlasInterpolation:$n,atlasInterpolationIcon:gn,isSDF:Xr,hasHalo:Wh};if(Dt)for(var Sc=Dr.segments.get(),Wf=0,Mc=Sc;Wf<Mc.length;Wf+=1){var U0=Mc[Wf];Lt.push({segments:new a.SegmentVector([U0]),sortKey:U0.sortKey,state:qu})}else Lt.push({segments:Dr.segments,sortKey:0,state:qu})}}}Dt&&Lt.sort(function(H0,$0){return H0.sortKey-$0.sortKey});for(var Zv=0,Xs=Lt;Zv<Xs.length;Zv+=1){var Bp=Xs[Zv],El=Bp.state;if(Be.activeTexture.set(We.TEXTURE0),El.atlasTexture.bind(El.atlasInterpolation,We.CLAMP_TO_EDGE),El.atlasTextureIcon&&(Be.activeTexture.set(We.TEXTURE1),El.atlasTextureIcon&&El.atlasTextureIcon.bind(El.atlasInterpolationIcon,We.CLAMP_TO_EDGE)),El.isSDF){var Op=El.uniformValues;El.hasHalo&&(Op.u_is_halo=1,Go(El.buffers,Bp.segments,K,Z,El.program,St,ct,ht,Op)),Op.u_is_halo=0}Go(El.buffers,Bp.segments,K,Z,El.program,St,ct,ht,El.uniformValues)}}t(ff,"drawLayerSymbols");function Go(Z,N,K,U,Q,le,be,Me,Ie){var Ze=U.context,ct=Ze.gl;Q.draw(Ze,ct.TRIANGLES,le,be,Me,Ae.disabled,Ie,K.id,Z.layoutVertexBuffer,Z.indexBuffer,N,K.paint,U.transform.zoom,Z.programConfigurations.get(K.id),Z.dynamicLayoutVertexBuffer,Z.opacityVertexBuffer)}t(Go,"drawSymbolElements");function Fu(Z,N,K,U){if(Z.renderPass==="translucent"){var Q=K.paint.get("circle-opacity"),le=K.paint.get("circle-stroke-width"),be=K.paint.get("circle-stroke-opacity"),Me=K.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(Q.constantOr(1)===0&&(le.constantOr(1)===0||be.constantOr(1)===0))){for(var Ie=Z.context,Ze=Ie.gl,ct=Z.depthModeForSublayer(0,Er.ReadOnly),ht=Hr.disabled,Be=Z.colorModeForRenderPass(),We=[],it=0;it<U.length;it++){var wt=U[it],pt=N.getTile(wt),bt=pt.getBucket(K);if(!!bt){var Mt=bt.programConfigurations.get(K.id),Dt=Z.useProgram("circle",Mt),St=bt.layoutVertexBuffer,Ft=bt.indexBuffer,Lt=Ld(Z,wt,pt,K),Xt={programConfiguration:Mt,program:Dt,layoutVertexBuffer:St,indexBuffer:Ft,uniformValues:Lt};if(Me)for(var ar=bt.segments.get(),vr=0,Ir=ar;vr<Ir.length;vr+=1){var zr=Ir[vr];We.push({segments:new a.SegmentVector([zr]),sortKey:zr.sortKey,state:Xt})}else We.push({segments:bt.segments,sortKey:0,state:Xt})}}Me&&We.sort(function($n,li){return $n.sortKey-li.sortKey});for(var Dr=0,Vr=We;Dr<Vr.length;Dr+=1){var Xr=Vr[Dr],Ta=Xr.state,Jr=Ta.programConfiguration,sa=Ta.program,Nr=Ta.layoutVertexBuffer,Ua=Ta.indexBuffer,wn=Ta.uniformValues,Wn=Xr.segments;sa.draw(Ie,Ze.TRIANGLES,ct,ht,Be,Ae.disabled,wn,K.id,Nr,Ua,Wn,K.paint,Z.transform.zoom,Jr)}}}}t(Fu,"drawCircles");function Yh(Z,N,K,U){if(K.paint.get("heatmap-opacity")!==0)if(Z.renderPass==="offscreen"){var Q=Z.context,le=Q.gl,be=Hr.disabled,Me=new He([le.ONE,le.ONE],a.Color.transparent,[!0,!0,!0,!0]);Vl(Q,Z,K),Q.clear({color:a.Color.transparent});for(var Ie=0;Ie<U.length;Ie++){var Ze=U[Ie];if(!N.hasRenderableParent(Ze)){var ct=N.getTile(Ze),ht=ct.getBucket(K);if(!!ht){var Be=ht.programConfigurations.get(K.id),We=Z.useProgram("heatmap",Be),it=Z.transform,wt=it.zoom;We.draw(Q,le.TRIANGLES,Er.disabled,be,Me,Ae.disabled,Fv(Ze.posMatrix,ct,wt,K.paint.get("heatmap-intensity")),K.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,K.paint,Z.transform.zoom,Be)}}}Q.viewport.set([0,0,Z.width,Z.height])}else Z.renderPass==="translucent"&&(Z.context.setColorMode(Z.colorModeForRenderPass()),jf(Z,K))}t(Yh,"drawHeatmap");function Vl(Z,N,K){var U=Z.gl;Z.activeTexture.set(U.TEXTURE1),Z.viewport.set([0,0,N.width/4,N.height/4]);var Q=K.heatmapFbo;if(Q)U.bindTexture(U.TEXTURE_2D,Q.colorAttachment.get()),Z.bindFramebuffer.set(Q.framebuffer);else{var le=U.createTexture();U.bindTexture(U.TEXTURE_2D,le),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.LINEAR),Q=K.heatmapFbo=Z.createFramebuffer(N.width/4,N.height/4,!1),cf(Z,N,le,Q)}}t(Vl,"bindFramebuffer");function cf(Z,N,K,U){var Q=Z.gl,le=Z.extRenderToTextureHalfFloat?Z.extTextureHalfFloat.HALF_FLOAT_OES:Q.UNSIGNED_BYTE;Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,N.width/4,N.height/4,0,Q.RGBA,le,null),U.colorAttachment.set(K)}t(cf,"bindTextureToFramebuffer");function jf(Z,N){var K=Z.context,U=K.gl,Q=N.heatmapFbo;if(!!Q){K.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Q.colorAttachment.get()),K.activeTexture.set(U.TEXTURE1);var le=N.colorRampTexture;le||(le=N.colorRampTexture=new a.Texture(K,N.colorRamp,U.RGBA)),le.bind(U.LINEAR,U.CLAMP_TO_EDGE),Z.useProgram("heatmapTexture").draw(K,U.TRIANGLES,Er.disabled,Hr.disabled,Z.colorModeForRenderPass(),Ae.disabled,Uf(Z,N,0,1),N.id,Z.viewportBuffer,Z.quadTriangleIndexBuffer,Z.viewportSegments,N.paint,Z.transform.zoom)}}t(jf,"renderTextureToMap");function yc(Z,N,K,U){if(Z.renderPass==="translucent"){var Q=K.paint.get("line-opacity"),le=K.paint.get("line-width");if(!(Q.constantOr(1)===0||le.constantOr(1)===0)){var be=Z.depthModeForSublayer(0,Er.ReadOnly),Me=Z.colorModeForRenderPass(),Ie=K.paint.get("line-dasharray"),Ze=K.paint.get("line-pattern"),ct=Ze.constantOr(1),ht=K.paint.get("line-gradient"),Be=K.getCrossfadeParameters(),We=ct?"linePattern":Ie?"lineSDF":ht?"lineGradient":"line",it=Z.context,wt=it.gl,pt=!0;if(ht){it.activeTexture.set(wt.TEXTURE0);var bt=K.gradientTexture;if(!K.gradient)return;bt||(bt=K.gradientTexture=new a.Texture(it,K.gradient,wt.RGBA)),bt.bind(wt.LINEAR,wt.CLAMP_TO_EDGE)}for(var Mt=0,Dt=U;Mt<Dt.length;Mt+=1){var St=Dt[Mt],Ft=N.getTile(St);if(!(ct&&!Ft.patternsLoaded())){var Lt=Ft.getBucket(K);if(!!Lt){var Xt=Lt.programConfigurations.get(K.id),ar=Z.context.program.get(),vr=Z.useProgram(We,Xt),Ir=pt||vr.program!==ar,zr=Ze.constantOr(null);if(zr&&Ft.imageAtlas){var Dr=Ft.imageAtlas,Vr=Dr.patternPositions[zr.to.toString()],Xr=Dr.patternPositions[zr.from.toString()];Vr&&Xr&&Xt.setConstantPatternPositions(Vr,Xr)}var Ta=ct?au(Z,Ft,K,Be):Ie?dc(Z,Ft,K,Ie,Be):ht?Pd(Z,Ft,K):vc(Z,Ft,K);ct?(it.activeTexture.set(wt.TEXTURE0),Ft.imageAtlasTexture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),Xt.updatePaintBuffers(Be)):Ie&&(Ir||Z.lineAtlas.dirty)&&(it.activeTexture.set(wt.TEXTURE0),Z.lineAtlas.bind(it)),vr.draw(it,wt.TRIANGLES,be,Z.stencilModeForClipping(St),Me,Ae.disabled,Ta,K.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,K.paint,Z.transform.zoom,Xt),pt=!1}}}}}}t(yc,"drawLine");function Bu(Z,N,K,U){var Q=K.paint.get("fill-color"),le=K.paint.get("fill-opacity");if(le.constantOr(1)!==0){var be=Z.colorModeForRenderPass(),Me=K.paint.get("fill-pattern"),Ie=Z.opaquePassEnabledForLayer()&&!Me.constantOr(1)&&Q.constantOr(a.Color.transparent).a===1&&le.constantOr(0)===1?"opaque":"translucent";if(Z.renderPass===Ie){var Ze=Z.depthModeForSublayer(1,Z.renderPass==="opaque"?Er.ReadWrite:Er.ReadOnly);Dd(Z,N,K,U,Ze,be,!1)}if(Z.renderPass==="translucent"&&K.paint.get("fill-antialias")){var ct=Z.depthModeForSublayer(K.getPaintProperty("fill-outline-color")?2:0,Er.ReadOnly);Dd(Z,N,K,U,ct,be,!0)}}}t(Bu,"drawFill");function Dd(Z,N,K,U,Q,le,be){var Me=Z.context.gl,Ie=K.paint.get("fill-pattern"),Ze=Ie&&Ie.constantOr(1),ct=K.getCrossfadeParameters(),ht,Be,We,it,wt;be?(Be=Ze&&!K.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ht=Me.LINES):(Be=Ze?"fillPattern":"fill",ht=Me.TRIANGLES);for(var pt=0,bt=U;pt<bt.length;pt+=1){var Mt=bt[pt],Dt=N.getTile(Mt);if(!(Ze&&!Dt.patternsLoaded())){var St=Dt.getBucket(K);if(!!St){var Ft=St.programConfigurations.get(K.id),Lt=Z.useProgram(Be,Ft);Ze&&(Z.context.activeTexture.set(Me.TEXTURE0),Dt.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),Ft.updatePaintBuffers(ct));var Xt=Ie.constantOr(null);if(Xt&&Dt.imageAtlas){var ar=Dt.imageAtlas,vr=ar.patternPositions[Xt.to.toString()],Ir=ar.patternPositions[Xt.from.toString()];vr&&Ir&&Ft.setConstantPatternPositions(vr,Ir)}var zr=Z.translatePosMatrix(Mt.posMatrix,Dt,K.paint.get("fill-translate"),K.paint.get("fill-translate-anchor"));if(!be)it=St.indexBuffer,wt=St.segments,We=Ze?ts(zr,Z,ct,Dt):of(zr);else{it=St.indexBuffer2,wt=St.segments2;var Dr=[Me.drawingBufferWidth,Me.drawingBufferHeight];We=Be==="fillOutlinePattern"&&Ze?Ip(zr,Z,ct,Dt,Dr):Iv(zr,Dr)}Lt.draw(Z.context,ht,Q,Z.stencilModeForClipping(Mt),le,Ae.disabled,We,K.id,St.layoutVertexBuffer,it,wt,K.paint,Z.transform.zoom,Ft)}}}}t(Dd,"drawFillTiles");function $v(Z,N,K,U){var Q=K.paint.get("fill-extrusion-opacity");if(Q!==0&&Z.renderPass==="translucent"){var le=new Er(Z.context.gl.LEQUAL,Er.ReadWrite,Z.depthRangeFor3D);if(Q===1&&!K.paint.get("fill-extrusion-pattern").constantOr(1)){var be=Z.colorModeForRenderPass();hf(Z,N,K,U,le,Hr.disabled,be)}else hf(Z,N,K,U,le,Hr.disabled,He.disabled),hf(Z,N,K,U,le,Z.stencilModeFor3D(),Z.colorModeForRenderPass())}}t($v,"draw");function hf(Z,N,K,U,Q,le,be){for(var Me=Z.context,Ie=Me.gl,Ze=K.paint.get("fill-extrusion-pattern"),ct=Ze.constantOr(1),ht=K.getCrossfadeParameters(),Be=K.paint.get("fill-extrusion-opacity"),We=0,it=U;We<it.length;We+=1){var wt=it[We],pt=N.getTile(wt),bt=pt.getBucket(K);if(!!bt){var Mt=bt.programConfigurations.get(K.id),Dt=Z.useProgram(ct?"fillExtrusionPattern":"fillExtrusion",Mt);ct&&(Z.context.activeTexture.set(Ie.TEXTURE0),pt.imageAtlasTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),Mt.updatePaintBuffers(ht));var St=Ze.constantOr(null);if(St&&pt.imageAtlas){var Ft=pt.imageAtlas,Lt=Ft.patternPositions[St.to.toString()],Xt=Ft.patternPositions[St.from.toString()];Lt&&Xt&&Mt.setConstantPatternPositions(Lt,Xt)}var ar=Z.translatePosMatrix(wt.posMatrix,pt,K.paint.get("fill-extrusion-translate"),K.paint.get("fill-extrusion-translate-anchor")),vr=K.paint.get("fill-extrusion-vertical-gradient"),Ir=ct?Ru(ar,Z,vr,Be,wt,ht,pt):$l(ar,Z,vr,Be);Dt.draw(Me,Me.gl.TRIANGLES,Q,le,be,Ae.backCCW,Ir,K.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,K.paint,Z.transform.zoom,Mt)}}}t(hf,"drawExtrusionTiles");function sh(Z,N,K,U){if(!(Z.renderPass!=="offscreen"&&Z.renderPass!=="translucent")){for(var Q=Z.context,le=N.getSource().maxzoom,be=Z.depthModeForSublayer(0,Er.ReadOnly),Me=Z.colorModeForRenderPass(),Ie=Z.renderPass==="translucent"?Z.stencilConfigForOverlap(U):[{},U],Ze=Ie[0],ct=Ie[1],ht=0,Be=ct;ht<Be.length;ht+=1){var We=Be[ht],it=N.getTile(We);it.needsHillshadePrepare&&Z.renderPass==="offscreen"?Id(Z,it,K,le,be,Hr.disabled,Me):Z.renderPass==="translucent"&&Vv(Z,it,K,be,Ze[We.overscaledZ],Me)}Q.viewport.set([0,0,Z.width,Z.height])}}t(sh,"drawHillshade");function Vv(Z,N,K,U,Q,le){var be=Z.context,Me=be.gl,Ie=N.fbo;if(!!Ie){var Ze=Z.useProgram("hillshade");be.activeTexture.set(Me.TEXTURE0),Me.bindTexture(Me.TEXTURE_2D,Ie.colorAttachment.get());var ct=Gh(Z,N,K);Ze.draw(be,Me.TRIANGLES,U,Q,le,Ae.disabled,ct,K.id,Z.rasterBoundsBuffer,Z.quadTriangleIndexBuffer,Z.rasterBoundsSegments)}}t(Vv,"renderHillshade");function Id(Z,N,K,U,Q,le,be){var Me=Z.context,Ie=Me.gl,Ze=N.dem;if(Ze&&Ze.data){var ct=Ze.dim,ht=Ze.stride,Be=Ze.getPixels();if(Me.activeTexture.set(Ie.TEXTURE1),Me.pixelStoreUnpackPremultiplyAlpha.set(!1),N.demTexture=N.demTexture||Z.getTileTexture(ht),N.demTexture){var We=N.demTexture;We.update(Be,{premultiply:!1}),We.bind(Ie.NEAREST,Ie.CLAMP_TO_EDGE)}else N.demTexture=new a.Texture(Me,Be,Ie.RGBA,{premultiply:!1}),N.demTexture.bind(Ie.NEAREST,Ie.CLAMP_TO_EDGE);Me.activeTexture.set(Ie.TEXTURE0);var it=N.fbo;if(!it){var wt=new a.Texture(Me,{width:ct,height:ct,data:null},Ie.RGBA);wt.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),it=N.fbo=Me.createFramebuffer(ct,ct,!0),it.colorAttachment.set(wt.texture)}Me.bindFramebuffer.set(it.framebuffer),Me.viewport.set([0,0,ct,ct]),Z.useProgram("hillshadePrepare").draw(Me,Ie.TRIANGLES,Q,le,be,Ae.disabled,Bv(N.tileID,Ze,U),K.id,Z.rasterBoundsBuffer,Z.quadTriangleIndexBuffer,Z.rasterBoundsSegments),N.needsHillshadePrepare=!1}}t(Id,"prepareHillshade");function vf(Z,N,K,U){if(Z.renderPass==="translucent"&&K.paint.get("raster-opacity")!==0&&!!U.length)for(var Q=Z.context,le=Q.gl,be=N.getSource(),Me=Z.useProgram("raster"),Ie=Z.colorModeForRenderPass(),Ze=be instanceof ee?[{},U]:Z.stencilConfigForOverlap(U),ct=Ze[0],ht=Ze[1],Be=ht[ht.length-1].overscaledZ,We=!Z.options.moving,it=0,wt=ht;it<wt.length;it+=1){var pt=wt[it],bt=Z.depthModeForSublayer(pt.overscaledZ-Be,K.paint.get("raster-opacity")===1?Er.ReadWrite:Er.ReadOnly,le.LESS),Mt=N.getTile(pt),Dt=Z.transform.calculatePosMatrix(pt.toUnwrapped(),We);Mt.registerFadeDuration(K.paint.get("raster-fade-duration"));var St=N.findLoadedParent(pt,0),Ft=mc(Mt,St,N,K,Z.transform),Lt=void 0,Xt=void 0,ar=K.paint.get("raster-resampling")==="nearest"?le.NEAREST:le.LINEAR;Q.activeTexture.set(le.TEXTURE0),Mt.texture.bind(ar,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST),Q.activeTexture.set(le.TEXTURE1),St?(St.texture.bind(ar,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST),Lt=Math.pow(2,St.tileID.overscaledZ-Mt.tileID.overscaledZ),Xt=[Mt.tileID.canonical.x*Lt%1,Mt.tileID.canonical.y*Lt%1]):Mt.texture.bind(ar,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST);var vr=Hf(Dt,Xt||[0,0],Lt||1,Ft,K);be instanceof ee?Me.draw(Q,le.TRIANGLES,bt,Hr.disabled,Ie,Ae.disabled,vr,K.id,be.boundsBuffer,Z.quadTriangleIndexBuffer,be.boundsSegments):Me.draw(Q,le.TRIANGLES,bt,ct[pt.overscaledZ],Ie,Ae.disabled,vr,K.id,Z.rasterBoundsBuffer,Z.quadTriangleIndexBuffer,Z.rasterBoundsSegments)}}t(vf,"drawRaster");function mc(Z,N,K,U,Q){var le=U.paint.get("raster-fade-duration");if(le>0){var be=a.browser.now(),Me=(be-Z.timeAdded)/le,Ie=N?(be-N.timeAdded)/le:-1,Ze=K.getSource(),ct=Q.coveringZoomLevel({tileSize:Ze.tileSize,roundZoom:Ze.roundZoom}),ht=!N||Math.abs(N.tileID.overscaledZ-ct)>Math.abs(Z.tileID.overscaledZ-ct),Be=ht&&Z.refreshedUponExpiration?1:a.clamp(ht?Me:1-Ie,0,1);return Z.refreshedUponExpiration&&Me>=1&&(Z.refreshedUponExpiration=!1),N?{opacity:1,mix:1-Be}:{opacity:Be,mix:0}}else return{opacity:1,mix:0}}t(mc,"getFadeValues");function Gv(Z,N,K){var U=K.paint.get("background-color"),Q=K.paint.get("background-opacity");if(Q!==0){var le=Z.context,be=le.gl,Me=Z.transform,Ie=Me.tileSize,Ze=K.paint.get("background-pattern");if(!Z.isPatternMissing(Ze)){var ct=!Ze&&U.a===1&&Q===1&&Z.opaquePassEnabledForLayer()?"opaque":"translucent";if(Z.renderPass===ct){var ht=Hr.disabled,Be=Z.depthModeForSublayer(0,ct==="opaque"?Er.ReadWrite:Er.ReadOnly),We=Z.colorModeForRenderPass(),it=Z.useProgram(Ze?"backgroundPattern":"background"),wt=Me.coveringTiles({tileSize:Ie});Ze&&(le.activeTexture.set(be.TEXTURE0),Z.imageManager.bind(Z.context));for(var pt=K.getCrossfadeParameters(),bt=0,Mt=wt;bt<Mt.length;bt+=1){var Dt=Mt[bt],St=Z.transform.calculatePosMatrix(Dt.toUnwrapped()),Ft=Ze?gc(St,Q,Z,Ze,{tileID:Dt,tileSize:Ie},pt):pc(St,Q,U);it.draw(le,be.TRIANGLES,Be,ht,We,Ae.disabled,Ft,K.id,Z.tileExtentBuffer,Z.quadTriangleIndexBuffer,Z.tileExtentSegments)}}}}}t(Gv,"drawBackground");var zd=new a.Color(1,0,0,1),jv=new a.Color(0,1,0,1),Yv=new a.Color(0,0,1,1),lh=new a.Color(1,0,1,1),Wv=new a.Color(0,1,1,1);function Ou(Z){var N=Z.transform.padding,K=3;Yf(Z,Z.transform.height-(N.top||0),K,zd),Yf(Z,N.bottom||0,K,jv),yo(Z,N.left||0,K,Yv),yo(Z,Z.transform.width-(N.right||0),K,lh);var U=Z.transform.centerPoint;Xv(Z,U.x,Z.transform.height-U.y,Wv)}t(Ou,"drawDebugPadding");function Xv(Z,N,K,U){var Q=20,le=2;df(Z,N-le/2,K-Q/2,le,Q,U),df(Z,N-Q/2,K-le/2,Q,le,U)}t(Xv,"drawCrosshair");function Yf(Z,N,K,U){df(Z,0,N+K/2,Z.transform.width,K,U)}t(Yf,"drawHorizontalLine");function yo(Z,N,K,U){df(Z,N-K/2,0,K,Z.transform.height,U)}t(yo,"drawVerticalLine");function df(Z,N,K,U,Q,le){var be=Z.context,Me=be.gl;Me.enable(Me.SCISSOR_TEST),Me.scissor(N*a.browser.devicePixelRatio,K*a.browser.devicePixelRatio,U*a.browser.devicePixelRatio,Q*a.browser.devicePixelRatio),be.clear({color:le}),Me.disable(Me.SCISSOR_TEST)}t(df,"drawDebugSSRect");function Nu(Z,N,K){for(var U=0;U<K.length;U++)xc(Z,N,K[U])}t(Nu,"drawDebug");function xc(Z,N,K){var U=Z.context,Q=U.gl,le=K.posMatrix,be=Z.useProgram("debug"),Me=Er.disabled,Ie=Hr.disabled,Ze=Z.colorModeForRenderPass(),ct="$debug";U.activeTexture.set(Q.TEXTURE0),Z.emptyTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),be.draw(U,Q.LINE_STRIP,Me,Ie,Ze,Ae.disabled,Ro(le,a.Color.red),ct,Z.debugBuffer,Z.tileBorderIndexBuffer,Z.debugSegments);var ht=N.getTileByID(K.key).latestRawTileData,Be=ht&&ht.byteLength||0,We=Math.floor(Be/1024),it=N.getTile(K).tileSize,wt=512/Math.min(it,512)*(K.overscaledZ/Z.transform.zoom)*.5,pt=K.canonical.toString();K.overscaledZ!==K.canonical.z&&(pt+=" => "+K.overscaledZ);var bt=pt+" "+We+"kb";uh(Z,bt),be.draw(U,Q.TRIANGLES,Me,Ie,He.alphaBlended,Ae.disabled,Ro(le,a.Color.transparent,wt),ct,Z.debugBuffer,Z.quadTriangleIndexBuffer,Z.debugSegments)}t(xc,"drawDebugTile");function uh(Z,N){Z.initDebugOverlayCanvas();var K=Z.debugOverlayCanvas,U=Z.context.gl,Q=Z.debugOverlayCanvas.getContext("2d");Q.clearRect(0,0,K.width,K.height),Q.shadowColor="white",Q.shadowBlur=2,Q.lineWidth=1.5,Q.strokeStyle="white",Q.textBaseline="top",Q.font="bold "+36+"px Open Sans, sans-serif",Q.fillText(N,5,5),Q.strokeText(N,5,5),Z.debugOverlayTexture.update(K),Z.debugOverlayTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE)}t(uh,"drawTextToOverlay");function ll(Z,N,K){var U=Z.context,Q=K.implementation;if(Z.renderPass==="offscreen"){var le=Q.prerender;le&&(Z.setCustomLayerDefaults(),U.setColorMode(Z.colorModeForRenderPass()),le.call(Q,U.gl,Z.transform.customLayerMatrix()),U.setDirty(),Z.setBaseState())}else if(Z.renderPass==="translucent"){Z.setCustomLayerDefaults(),U.setColorMode(Z.colorModeForRenderPass()),U.setStencilMode(Hr.disabled);var be=Q.renderingMode==="3d"?new Er(Z.context.gl.LEQUAL,Er.ReadWrite,Z.depthRangeFor3D):Z.depthModeForSublayer(0,Er.ReadOnly);U.setDepthMode(be),Q.render(U.gl,Z.transform.customLayerMatrix()),U.setDirty(),Z.setBaseState(),U.bindFramebuffer.set(null)}}t(ll,"drawCustom");var bc={symbol:iu,circle:Fu,heatmap:Yh,line:yc,fill:Bu,"fill-extrusion":$v,hillshade:sh,raster:vf,background:Gv,debug:Nu,custom:ll},ii=t(function(N,K){this.context=new Se(N),this.transform=K,this._tileTextures={},this.setup(),this.numSublayers=je.maxUnderzooming+je.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ul,this.gpuTimers={}},"Painter");ii.prototype.resize=t(function(N,K){if(this.width=N*a.browser.devicePixelRatio,this.height=K*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var U=0,Q=this.style._order;U<Q.length;U+=1){var le=Q[U];this.style._layers[le].resize()}},"resize"),ii.prototype.setup=t(function(){var N=this.context,K=new a.StructArrayLayout2i4;K.emplaceBack(0,0),K.emplaceBack(a.EXTENT,0),K.emplaceBack(0,a.EXTENT),K.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=N.createVertexBuffer(K,Tl.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var U=new a.StructArrayLayout2i4;U.emplaceBack(0,0),U.emplaceBack(a.EXTENT,0),U.emplaceBack(0,a.EXTENT),U.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=N.createVertexBuffer(U,Tl.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var Q=new a.StructArrayLayout4i8;Q.emplaceBack(0,0,0,0),Q.emplaceBack(a.EXTENT,0,a.EXTENT,0),Q.emplaceBack(0,a.EXTENT,0,a.EXTENT),Q.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=N.createVertexBuffer(Q,te.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var le=new a.StructArrayLayout2i4;le.emplaceBack(0,0),le.emplaceBack(1,0),le.emplaceBack(0,1),le.emplaceBack(1,1),this.viewportBuffer=N.createVertexBuffer(le,Tl.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var be=new a.StructArrayLayout1ui2;be.emplaceBack(0),be.emplaceBack(1),be.emplaceBack(3),be.emplaceBack(2),be.emplaceBack(0),this.tileBorderIndexBuffer=N.createIndexBuffer(be);var Me=new a.StructArrayLayout3ui6;Me.emplaceBack(0,1,2),Me.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=N.createIndexBuffer(Me),this.emptyTexture=new a.Texture(N,{width:1,height:1,data:new Uint8Array([0,0,0,0])},N.gl.RGBA);var Ie=this.context.gl;this.stencilClearMode=new Hr({func:Ie.ALWAYS,mask:0},0,255,Ie.ZERO,Ie.ZERO,Ie.ZERO)},"setup"),ii.prototype.clearStencil=t(function(){var N=this.context,K=N.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var U=a.create();a.ortho(U,0,this.width,this.height,0,0,1),a.scale(U,U,[K.drawingBufferWidth,K.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(N,K.TRIANGLES,Er.disabled,this.stencilClearMode,He.disabled,Ae.disabled,qf(U),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},"clearStencil"),ii.prototype._renderTileClippingMasks=t(function(N,K){if(!(this.currentStencilSource===N.source||!N.isTileClipped()||!K||!K.length)){this.currentStencilSource=N.source;var U=this.context,Q=U.gl;this.nextStencilID+K.length>256&&this.clearStencil(),U.setColorMode(He.disabled),U.setDepthMode(Er.disabled);var le=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var be=0,Me=K;be<Me.length;be+=1){var Ie=Me[be],Ze=this._tileClippingMaskIDs[Ie.key]=this.nextStencilID++;le.draw(U,Q.TRIANGLES,Er.disabled,new Hr({func:Q.ALWAYS,mask:0},Ze,255,Q.KEEP,Q.KEEP,Q.REPLACE),He.disabled,Ae.disabled,qf(Ie.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},"_renderTileClippingMasks"),ii.prototype.stencilModeFor3D=t(function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var N=this.nextStencilID++,K=this.context.gl;return new Hr({func:K.NOTEQUAL,mask:255},N,255,K.KEEP,K.KEEP,K.REPLACE)},"stencilModeFor3D"),ii.prototype.stencilModeForClipping=t(function(N){var K=this.context.gl;return new Hr({func:K.EQUAL,mask:255},this._tileClippingMaskIDs[N.key],0,K.KEEP,K.KEEP,K.REPLACE)},"stencilModeForClipping"),ii.prototype.stencilConfigForOverlap=t(function(N){var K,U=this.context.gl,Q=N.sort(function(Ze,ct){return ct.overscaledZ-Ze.overscaledZ}),le=Q[Q.length-1].overscaledZ,be=Q[0].overscaledZ-le+1;if(be>1){this.currentStencilSource=void 0,this.nextStencilID+be>256&&this.clearStencil();for(var Me={},Ie=0;Ie<be;Ie++)Me[Ie+le]=new Hr({func:U.GEQUAL,mask:255},Ie+this.nextStencilID,255,U.KEEP,U.KEEP,U.REPLACE);return this.nextStencilID+=be,[Me,Q]}return[(K={},K[le]=Hr.disabled,K),Q]},"stencilConfigForOverlap"),ii.prototype.colorModeForRenderPass=t(function(){var N=this.context.gl;if(this._showOverdrawInspector){var K=8,U=1/K;return new He([N.CONSTANT_COLOR,N.ONE],new a.Color(U,U,U,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?He.unblended:He.alphaBlended},"colorModeForRenderPass"),ii.prototype.depthModeForSublayer=t(function(N,K,U){if(!this.opaquePassEnabledForLayer())return Er.disabled;var Q=1-((1+this.currentLayer)*this.numSublayers+N)*this.depthEpsilon;return new Er(U||this.context.gl.LEQUAL,K,[Q,Q])},"depthModeForSublayer"),ii.prototype.opaquePassEnabledForLayer=t(function(){return this.currentLayer<this.opaquePassCutoff},"opaquePassEnabledForLayer"),ii.prototype.render=t(function(N,K){var U=this;this.style=N,this.options=K,this.lineAtlas=N.lineAtlas,this.imageManager=N.imageManager,this.glyphManager=N.glyphManager,this.symbolFadeChange=N.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var Q=this.style._order,le=this.style.sourceCaches;for(var be in le){var Me=le[be];Me.used&&Me.prepare(this.context)}var Ie={},Ze={},ct={};for(var ht in le){var Be=le[ht];Ie[ht]=Be.getVisibleCoordinates(),Ze[ht]=Ie[ht].slice().reverse(),ct[ht]=Be.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var We=0;We<Q.length;We++){var it=Q[We];if(this.style._layers[it].is3D()){this.opaquePassCutoff=We;break}}this.renderPass="offscreen";for(var wt=0,pt=Q;wt<pt.length;wt+=1){var bt=pt[wt],Mt=this.style._layers[bt];if(!(!Mt.hasOffscreenPass()||Mt.isHidden(this.transform.zoom))){var Dt=Ze[Mt.source];Mt.type!=="custom"&&!Dt.length||this.renderLayer(this,le[Mt.source],Mt,Dt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:K.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=K.showOverdrawInspector,this.depthRangeFor3D=[0,1-(N._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=Q.length-1;this.currentLayer>=0;this.currentLayer--){var St=this.style._layers[Q[this.currentLayer]],Ft=le[St.source],Lt=Ie[St.source];this._renderTileClippingMasks(St,Lt),this.renderLayer(this,Ft,St,Lt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<Q.length;this.currentLayer++){var Xt=this.style._layers[Q[this.currentLayer]],ar=le[Xt.source],vr=(Xt.type==="symbol"?ct:Ze)[Xt.source];this._renderTileClippingMasks(Xt,Ie[Xt.source]),this.renderLayer(this,ar,Xt,vr)}if(this.options.showTileBoundaries){var Ir,zr,Dr=a.values(this.style._layers);Dr.forEach(function(Vr){Vr.source&&!Vr.isHidden(U.transform.zoom)&&(Vr.source!==(zr&&zr.id)&&(zr=U.style.sourceCaches[Vr.source]),(!Ir||Ir.getSource().maxzoom<zr.getSource().maxzoom)&&(Ir=zr))}),Ir&&bc.debug(this,Ir,Ir.getVisibleCoordinates())}this.options.showPadding&&Ou(this),this.context.setDefault()},"render"),ii.prototype.renderLayer=t(function(N,K,U,Q){U.isHidden(this.transform.zoom)||U.type!=="background"&&U.type!=="custom"&&!Q.length||(this.id=U.id,this.gpuTimingStart(U),bc[U.type](N,K,U,Q,this.style.placement.variableOffsets),this.gpuTimingEnd())},"renderLayer"),ii.prototype.gpuTimingStart=t(function(N){if(!!this.options.gpuTiming){var K=this.context.extTimerQuery,U=this.gpuTimers[N.id];U||(U=this.gpuTimers[N.id]={calls:0,cpuTime:0,query:K.createQueryEXT()}),U.calls++,K.beginQueryEXT(K.TIME_ELAPSED_EXT,U.query)}},"gpuTimingStart"),ii.prototype.gpuTimingEnd=t(function(){if(!!this.options.gpuTiming){var N=this.context.extTimerQuery;N.endQueryEXT(N.TIME_ELAPSED_EXT)}},"gpuTimingEnd"),ii.prototype.collectGpuTimers=t(function(){var N=this.gpuTimers;return this.gpuTimers={},N},"collectGpuTimers"),ii.prototype.queryGpuTimers=t(function(N){var K={};for(var U in N){var Q=N[U],le=this.context.extTimerQuery,be=le.getQueryObjectEXT(Q.query,le.QUERY_RESULT_EXT)/(1e3*1e3);le.deleteQueryEXT(Q.query),K[U]=be}return K},"queryGpuTimers"),ii.prototype.translatePosMatrix=t(function(N,K,U,Q,le){if(!U[0]&&!U[1])return N;var be=le?Q==="map"?this.transform.angle:0:Q==="viewport"?-this.transform.angle:0;if(be){var Me=Math.sin(be),Ie=Math.cos(be);U=[U[0]*Ie-U[1]*Me,U[0]*Me+U[1]*Ie]}var Ze=[le?U[0]:wo(K,U[0],this.transform.zoom),le?U[1]:wo(K,U[1],this.transform.zoom),0],ct=new Float32Array(16);return a.translate(ct,N,Ze),ct},"translatePosMatrix"),ii.prototype.saveTileTexture=t(function(N){var K=this._tileTextures[N.size[0]];K?K.push(N):this._tileTextures[N.size[0]]=[N]},"saveTileTexture"),ii.prototype.getTileTexture=t(function(N){var K=this._tileTextures[N];return K&&K.length>0?K.pop():null},"getTileTexture"),ii.prototype.isPatternMissing=t(function(N){if(!N)return!1;if(!N.from||!N.to)return!0;var K=this.imageManager.getPattern(N.from.toString()),U=this.imageManager.getPattern(N.to.toString());return!K||!U},"isPatternMissing"),ii.prototype.useProgram=t(function(N,K){this.cache=this.cache||{};var U=""+N+(K?K.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[U]||(this.cache[U]=new Ff(this.context,Dp[N],K,nu[N],this._showOverdrawInspector)),this.cache[U]},"useProgram"),ii.prototype.setCustomLayerDefaults=t(function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},"setCustomLayerDefaults"),ii.prototype.setBaseState=t(function(){var N=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(N.FUNC_ADD)},"setBaseState"),ii.prototype.initDebugOverlayCanvas=t(function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var N=this.context.gl;this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,N.RGBA)}},"initDebugOverlayCanvas"),ii.prototype.destroy=t(function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()},"destroy");var _c=t(function(N,K){this.points=N,this.planes=K},"Frustum");_c.fromInvProjectionMatrix=t(function(N,K,U){var Q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],le=Math.pow(2,U),be=Q.map(function(Ze){return a.transformMat4([],Ze,N)}).map(function(Ze){return a.scale$1([],Ze,1/Ze[3]/K*le)}),Me=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Ie=Me.map(function(Ze){var ct=a.sub([],be[Ze[0]],be[Ze[1]]),ht=a.sub([],be[Ze[2]],be[Ze[1]]),Be=a.normalize([],a.cross([],ct,ht)),We=-a.dot(Be,be[Ze[1]]);return Be.concat(We)});return new _c(be,Ie)},"fromInvProjectionMatrix");var ul=t(function(N,K){this.min=N,this.max=K,this.center=a.scale$2([],a.add([],this.min,this.max),.5)},"Aabb");ul.prototype.quadrant=t(function(N){for(var K=[N%2===0,N<2],U=a.clone$2(this.min),Q=a.clone$2(this.max),le=0;le<K.length;le++)U[le]=K[le]?this.min[le]:this.center[le],Q[le]=K[le]?this.center[le]:this.max[le];return Q[2]=this.max[2],new ul(U,Q)},"quadrant"),ul.prototype.distanceX=t(function(N){var K=Math.max(Math.min(this.max[0],N[0]),this.min[0]);return K-N[0]},"distanceX"),ul.prototype.distanceY=t(function(N){var K=Math.max(Math.min(this.max[1],N[1]),this.min[1]);return K-N[1]},"distanceY"),ul.prototype.intersects=t(function(N){for(var K=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],U=!0,Q=0;Q<N.planes.length;Q++){for(var le=N.planes[Q],be=0,Me=0;Me<K.length;Me++)be+=a.dot$1(le,K[Me])>=0;if(be===0)return 0;be!==K.length&&(U=!1)}if(U)return 2;for(var Ie=0;Ie<3;Ie++){for(var Ze=Number.MAX_VALUE,ct=-Number.MAX_VALUE,ht=0;ht<N.points.length;ht++){var Be=N.points[ht][Ie]-this.min[Ie];Ze=Math.min(Ze,Be),ct=Math.max(ct,Be)}if(ct<0||Ze>this.max[Ie]-this.min[Ie])return 0}return 1},"intersects");var fl=t(function(N,K,U,Q){if(N===void 0&&(N=0),K===void 0&&(K=0),U===void 0&&(U=0),Q===void 0&&(Q=0),isNaN(N)||N<0||isNaN(K)||K<0||isNaN(U)||U<0||isNaN(Q)||Q<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=N,this.bottom=K,this.left=U,this.right=Q},"EdgeInsets");fl.prototype.interpolate=t(function(N,K,U){return K.top!=null&&N.top!=null&&(this.top=a.number(N.top,K.top,U)),K.bottom!=null&&N.bottom!=null&&(this.bottom=a.number(N.bottom,K.bottom,U)),K.left!=null&&N.left!=null&&(this.left=a.number(N.left,K.left,U)),K.right!=null&&N.right!=null&&(this.right=a.number(N.right,K.right,U)),this},"interpolate"),fl.prototype.getCenter=t(function(N,K){var U=a.clamp((this.left+N-this.right)/2,0,N),Q=a.clamp((this.top+K-this.bottom)/2,0,K);return new a.Point(U,Q)},"getCenter"),fl.prototype.equals=t(function(N){return this.top===N.top&&this.bottom===N.bottom&&this.left===N.left&&this.right===N.right},"equals"),fl.prototype.clone=t(function(){return new fl(this.top,this.bottom,this.left,this.right)},"clone"),fl.prototype.toJSON=t(function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}},"toJSON");var mi=t(function(N,K,U,Q,le){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=le===void 0?!0:le,this._minZoom=N||0,this._maxZoom=K||22,this._minPitch=U==null?0:U,this._maxPitch=Q==null?60:Q,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fl,this._posMatrixCache={},this._alignedPosMatrixCache={}},"Transform"),Mi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};mi.prototype.clone=t(function(){var N=new mi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return N.tileSize=this.tileSize,N.latRange=this.latRange,N.width=this.width,N.height=this.height,N._center=this._center,N.zoom=this.zoom,N.angle=this.angle,N._fov=this._fov,N._pitch=this._pitch,N._unmodified=this._unmodified,N._edgeInsets=this._edgeInsets.clone(),N._calcMatrices(),N},"clone"),Mi.minZoom.get=function(){return this._minZoom},Mi.minZoom.set=function(Z){this._minZoom!==Z&&(this._minZoom=Z,this.zoom=Math.max(this.zoom,Z))},Mi.maxZoom.get=function(){return this._maxZoom},Mi.maxZoom.set=function(Z){this._maxZoom!==Z&&(this._maxZoom=Z,this.zoom=Math.min(this.zoom,Z))},Mi.minPitch.get=function(){return this._minPitch},Mi.minPitch.set=function(Z){this._minPitch!==Z&&(this._minPitch=Z,this.pitch=Math.max(this.pitch,Z))},Mi.maxPitch.get=function(){return this._maxPitch},Mi.maxPitch.set=function(Z){this._maxPitch!==Z&&(this._maxPitch=Z,this.pitch=Math.min(this.pitch,Z))},Mi.renderWorldCopies.get=function(){return this._renderWorldCopies},Mi.renderWorldCopies.set=function(Z){Z===void 0?Z=!0:Z===null&&(Z=!1),this._renderWorldCopies=Z},Mi.worldSize.get=function(){return this.tileSize*this.scale},Mi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Mi.size.get=function(){return new a.Point(this.width,this.height)},Mi.bearing.get=function(){return-this.angle/Math.PI*180},Mi.bearing.set=function(Z){var N=-a.wrap(Z,-180,180)*Math.PI/180;this.angle!==N&&(this._unmodified=!1,this.angle=N,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Mi.pitch.get=function(){return this._pitch/Math.PI*180},Mi.pitch.set=function(Z){var N=a.clamp(Z,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==N&&(this._unmodified=!1,this._pitch=N,this._calcMatrices())},Mi.fov.get=function(){return this._fov/Math.PI*180},Mi.fov.set=function(Z){Z=Math.max(.01,Math.min(60,Z)),this._fov!==Z&&(this._unmodified=!1,this._fov=Z/180*Math.PI,this._calcMatrices())},Mi.zoom.get=function(){return this._zoom},Mi.zoom.set=function(Z){var N=Math.min(Math.max(Z,this.minZoom),this.maxZoom);this._zoom!==N&&(this._unmodified=!1,this._zoom=N,this.scale=this.zoomScale(N),this.tileZoom=Math.floor(N),this.zoomFraction=N-this.tileZoom,this._constrain(),this._calcMatrices())},Mi.center.get=function(){return this._center},Mi.center.set=function(Z){Z.lat===this._center.lat&&Z.lng===this._center.lng||(this._unmodified=!1,this._center=Z,this._constrain(),this._calcMatrices())},Mi.padding.get=function(){return this._edgeInsets.toJSON()},Mi.padding.set=function(Z){this._edgeInsets.equals(Z)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,Z,1),this._calcMatrices())},Mi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},mi.prototype.isPaddingEqual=t(function(N){return this._edgeInsets.equals(N)},"isPaddingEqual"),mi.prototype.interpolatePadding=t(function(N,K,U){this._unmodified=!1,this._edgeInsets.interpolate(N,K,U),this._constrain(),this._calcMatrices()},"interpolatePadding"),mi.prototype.coveringZoomLevel=t(function(N){var K=(N.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/N.tileSize));return Math.max(0,K)},"coveringZoomLevel"),mi.prototype.getVisibleUnwrappedCoordinates=t(function(N){var K=[new a.UnwrappedTileID(0,N)];if(this._renderWorldCopies)for(var U=this.pointCoordinate(new a.Point(0,0)),Q=this.pointCoordinate(new a.Point(this.width,0)),le=this.pointCoordinate(new a.Point(this.width,this.height)),be=this.pointCoordinate(new a.Point(0,this.height)),Me=Math.floor(Math.min(U.x,Q.x,le.x,be.x)),Ie=Math.floor(Math.max(U.x,Q.x,le.x,be.x)),Ze=1,ct=Me-Ze;ct<=Ie+Ze;ct++)ct!==0&&K.push(new a.UnwrappedTileID(ct,N));return K},"getVisibleUnwrappedCoordinates"),mi.prototype.coveringTiles=t(function(N){var K=this.coveringZoomLevel(N),U=K;if(N.minzoom!==void 0&&K<N.minzoom)return[];N.maxzoom!==void 0&&K>N.maxzoom&&(K=N.maxzoom);var Q=a.MercatorCoordinate.fromLngLat(this.center),le=Math.pow(2,K),be=[le*Q.x,le*Q.y,0],Me=_c.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,K),Ie=N.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ie=K);var Ze=3,ct=t(function(Dr){return{aabb:new ul([Dr*le,0,0],[(Dr+1)*le,le,0]),zoom:0,x:0,y:0,wrap:Dr,fullyVisible:!1}},"newRootTile"),ht=[],Be=[],We=K,it=N.reparseOverscaled?U:K;if(this._renderWorldCopies)for(var wt=1;wt<=3;wt++)ht.push(ct(-wt)),ht.push(ct(wt));for(ht.push(ct(0));ht.length>0;){var pt=ht.pop(),bt=pt.x,Mt=pt.y,Dt=pt.fullyVisible;if(!Dt){var St=pt.aabb.intersects(Me);if(St===0)continue;Dt=St===2}var Ft=pt.aabb.distanceX(be),Lt=pt.aabb.distanceY(be),Xt=Math.max(Math.abs(Ft),Math.abs(Lt)),ar=Ze+(1<<We-pt.zoom)-2;if(pt.zoom===We||Xt>ar&&pt.zoom>=Ie){Be.push({tileID:new a.OverscaledTileID(pt.zoom===We?it:pt.zoom,pt.wrap,pt.zoom,bt,Mt),distanceSq:a.sqrLen([be[0]-.5-bt,be[1]-.5-Mt])});continue}for(var vr=0;vr<4;vr++){var Ir=(bt<<1)+vr%2,zr=(Mt<<1)+(vr>>1);ht.push({aabb:pt.aabb.quadrant(vr),zoom:pt.zoom+1,x:Ir,y:zr,wrap:pt.wrap,fullyVisible:Dt})}}return Be.sort(function(Dr,Vr){return Dr.distanceSq-Vr.distanceSq}).map(function(Dr){return Dr.tileID})},"coveringTiles"),mi.prototype.resize=t(function(N,K){this.width=N,this.height=K,this.pixelsToGLUnits=[2/N,-2/K],this._constrain(),this._calcMatrices()},"resize"),Mi.unmodified.get=function(){return this._unmodified},mi.prototype.zoomScale=t(function(N){return Math.pow(2,N)},"zoomScale"),mi.prototype.scaleZoom=t(function(N){return Math.log(N)/Math.LN2},"scaleZoom"),mi.prototype.project=t(function(N){var K=a.clamp(N.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(N.lng)*this.worldSize,a.mercatorYfromLat(K)*this.worldSize)},"project"),mi.prototype.unproject=t(function(N){return new a.MercatorCoordinate(N.x/this.worldSize,N.y/this.worldSize).toLngLat()},"unproject"),Mi.point.get=function(){return this.project(this.center)},mi.prototype.setLocationAtPoint=t(function(N,K){var U=this.pointCoordinate(K),Q=this.pointCoordinate(this.centerPoint),le=this.locationCoordinate(N),be=new a.MercatorCoordinate(le.x-(U.x-Q.x),le.y-(U.y-Q.y));this.center=this.coordinateLocation(be),this._renderWorldCopies&&(this.center=this.center.wrap())},"setLocationAtPoint"),mi.prototype.locationPoint=t(function(N){return this.coordinatePoint(this.locationCoordinate(N))},"locationPoint"),mi.prototype.pointLocation=t(function(N){return this.coordinateLocation(this.pointCoordinate(N))},"pointLocation"),mi.prototype.locationCoordinate=t(function(N){return a.MercatorCoordinate.fromLngLat(N)},"locationCoordinate"),mi.prototype.coordinateLocation=t(function(N){return N.toLngLat()},"coordinateLocation"),mi.prototype.pointCoordinate=t(function(N){var K=0,U=[N.x,N.y,0,1],Q=[N.x,N.y,1,1];a.transformMat4(U,U,this.pixelMatrixInverse),a.transformMat4(Q,Q,this.pixelMatrixInverse);var le=U[3],be=Q[3],Me=U[0]/le,Ie=Q[0]/be,Ze=U[1]/le,ct=Q[1]/be,ht=U[2]/le,Be=Q[2]/be,We=ht===Be?0:(K-ht)/(Be-ht);return new a.MercatorCoordinate(a.number(Me,Ie,We)/this.worldSize,a.number(Ze,ct,We)/this.worldSize)},"pointCoordinate"),mi.prototype.coordinatePoint=t(function(N){var K=[N.x*this.worldSize,N.y*this.worldSize,0,1];return a.transformMat4(K,K,this.pixelMatrix),new a.Point(K[0]/K[3],K[1]/K[3])},"coordinatePoint"),mi.prototype.getBounds=t(function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},"getBounds"),mi.prototype.getMaxBounds=t(function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},"getMaxBounds"),mi.prototype.setMaxBounds=t(function(N){N?(this.lngRange=[N.getWest(),N.getEast()],this.latRange=[N.getSouth(),N.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},"setMaxBounds"),mi.prototype.calculatePosMatrix=t(function(N,K){K===void 0&&(K=!1);var U=N.key,Q=K?this._alignedPosMatrixCache:this._posMatrixCache;if(Q[U])return Q[U];var le=N.canonical,be=this.worldSize/this.zoomScale(le.z),Me=le.x+Math.pow(2,le.z)*N.wrap,Ie=a.identity(new Float64Array(16));return a.translate(Ie,Ie,[Me*be,le.y*be,0]),a.scale(Ie,Ie,[be/a.EXTENT,be/a.EXTENT,1]),a.multiply(Ie,K?this.alignedProjMatrix:this.projMatrix,Ie),Q[U]=new Float32Array(Ie),Q[U]},"calculatePosMatrix"),mi.prototype.customLayerMatrix=t(function(){return this.mercatorMatrix.slice()},"customLayerMatrix"),mi.prototype._constrain=t(function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var N=-90,K=90,U=-180,Q=180,le,be,Me,Ie,Ze=this.size,ct=this._unmodified;if(this.latRange){var ht=this.latRange;N=a.mercatorYfromLat(ht[1])*this.worldSize,K=a.mercatorYfromLat(ht[0])*this.worldSize,le=K-N<Ze.y?Ze.y/(K-N):0}if(this.lngRange){var Be=this.lngRange;U=a.mercatorXfromLng(Be[0])*this.worldSize,Q=a.mercatorXfromLng(Be[1])*this.worldSize,be=Q-U<Ze.x?Ze.x/(Q-U):0}var We=this.point,it=Math.max(be||0,le||0);if(it){this.center=this.unproject(new a.Point(be?(Q+U)/2:We.x,le?(K+N)/2:We.y)),this.zoom+=this.scaleZoom(it),this._unmodified=ct,this._constraining=!1;return}if(this.latRange){var wt=We.y,pt=Ze.y/2;wt-pt<N&&(Ie=N+pt),wt+pt>K&&(Ie=K-pt)}if(this.lngRange){var bt=We.x,Mt=Ze.x/2;bt-Mt<U&&(Me=U+Mt),bt+Mt>Q&&(Me=Q-Mt)}(Me!==void 0||Ie!==void 0)&&(this.center=this.unproject(new a.Point(Me!==void 0?Me:We.x,Ie!==void 0?Ie:We.y))),this._unmodified=ct,this._constraining=!1}},"_constrain"),mi.prototype._calcMatrices=t(function(){if(!!this.height){var N=this._fov/2,K=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(N)*this.height;var U=Math.PI/2+this._pitch,Q=this._fov*(.5+K.y/this.height),le=Math.sin(Q)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-U-Q,.01,Math.PI-.01)),be=this.point,Me=be.x,Ie=be.y,Ze=Math.cos(Math.PI/2-this._pitch)*le+this.cameraToCenterDistance,ct=Ze*1.01,ht=this.height/50,Be=new Float64Array(16);a.perspective(Be,this._fov,this.width/this.height,ht,ct),Be[8]=-K.x*2/this.width,Be[9]=K.y*2/this.height,a.scale(Be,Be,[1,-1,1]),a.translate(Be,Be,[0,0,-this.cameraToCenterDistance]),a.rotateX(Be,Be,this._pitch),a.rotateZ(Be,Be,this.angle),a.translate(Be,Be,[-Me,-Ie,0]),this.mercatorMatrix=a.scale([],Be,[this.worldSize,this.worldSize,this.worldSize]),a.scale(Be,Be,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Be,this.invProjMatrix=a.invert([],this.projMatrix);var We=this.width%2/2,it=this.height%2/2,wt=Math.cos(this.angle),pt=Math.sin(this.angle),bt=Me-Math.round(Me)+wt*We+pt*it,Mt=Ie-Math.round(Ie)+wt*it+pt*We,Dt=new Float64Array(Be);if(a.translate(Dt,Dt,[bt>.5?bt-1:bt,Mt>.5?Mt-1:Mt,0]),this.alignedProjMatrix=Dt,Be=a.create(),a.scale(Be,Be,[this.width/2,-this.height/2,1]),a.translate(Be,Be,[1,-1,0]),this.labelPlaneMatrix=Be,Be=a.create(),a.scale(Be,Be,[1,-1,1]),a.translate(Be,Be,[-1,-1,0]),a.scale(Be,Be,[2/this.width,2/this.height,1]),this.glCoordMatrix=Be,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),Be=a.invert(new Float64Array(16),this.pixelMatrix),!Be)throw new Error("failed to invert matrix");this.pixelMatrixInverse=Be,this._posMatrixCache={},this._alignedPosMatrixCache={}}},"_calcMatrices"),mi.prototype.maxPitchScaleFactor=t(function(){if(!this.pixelMatrixInverse)return 1;var N=this.pointCoordinate(new a.Point(0,0)),K=[N.x*this.worldSize,N.y*this.worldSize,0,1],U=a.transformMat4(K,K,this.pixelMatrix);return U[3]/this.cameraToCenterDistance},"maxPitchScaleFactor"),mi.prototype.getCameraPoint=t(function(){var N=this._pitch,K=Math.tan(N)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,K))},"getCameraPoint"),mi.prototype.getCameraQueryGeometry=t(function(N){var K=this.getCameraPoint();if(N.length===1)return[N[0],K];for(var U=K.x,Q=K.y,le=K.x,be=K.y,Me=0,Ie=N;Me<Ie.length;Me+=1){var Ze=Ie[Me];U=Math.min(U,Ze.x),Q=Math.min(Q,Ze.y),le=Math.max(le,Ze.x),be=Math.max(be,Ze.y)}return[new a.Point(U,Q),new a.Point(le,Q),new a.Point(le,be),new a.Point(U,be),new a.Point(U,Q)]},"getCameraQueryGeometry"),Object.defineProperties(mi.prototype,Mi);function fh(Z,N){var K=!1,U=null,Q=t(function(){U=null,K&&(Z(),U=setTimeout(Q,N),K=!1)},"later");return function(){return K=!0,U||Q(),U}}t(fh,"throttle");var ou=t(function(N){this._hashName=N&&encodeURIComponent(N),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=fh(this._updateHashUnthrottled.bind(this),30*1e3/100)},"Hash");ou.prototype.addTo=t(function(N){return this._map=N,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},"addTo"),ou.prototype.remove=t(function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},"remove"),ou.prototype.getHashString=t(function(N){var K=this._map.getCenter(),U=Math.round(this._map.getZoom()*100)/100,Q=Math.ceil((U*Math.LN2+Math.log(512/360/.5))/Math.LN10),le=Math.pow(10,Q),be=Math.round(K.lng*le)/le,Me=Math.round(K.lat*le)/le,Ie=this._map.getBearing(),Ze=this._map.getPitch(),ct="";if(N?ct+="/"+be+"/"+Me+"/"+U:ct+=U+"/"+Me+"/"+be,(Ie||Ze)&&(ct+="/"+Math.round(Ie*10)/10),Ze&&(ct+="/"+Math.round(Ze)),this._hashName){var ht=this._hashName,Be=!1,We=a.window.location.hash.slice(1).split("&").map(function(it){var wt=it.split("=")[0];return wt===ht?(Be=!0,wt+"="+ct):it}).filter(function(it){return it});return Be||We.push(ht+"="+ct),"#"+We.join("&")}return"#"+ct},"getHashString"),ou.prototype._getCurrentHash=t(function(){var N=this,K=a.window.location.hash.replace("#","");if(this._hashName){var U;return K.split("&").map(function(Q){return Q.split("=")}).forEach(function(Q){Q[0]===N._hashName&&(U=Q)}),(U&&U[1]||"").split("/")}return K.split("/")},"_getCurrentHash"),ou.prototype._onHashChange=t(function(){var N=this._getCurrentHash();if(N.length>=3&&!N.some(function(U){return isNaN(U)})){var K=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(N[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+N[2],+N[1]],zoom:+N[0],bearing:K,pitch:+(N[4]||0)}),!0}return!1},"_onHashChange"),ou.prototype._updateHashUnthrottled=t(function(){var N=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",N)}catch{}},"_updateHashUnthrottled");var Gl={linearity:.3,easing:a.bezier(0,0,.3,1)},Y=a.extend({deceleration:2500,maxSpeed:1400},Gl),ve=a.extend({deceleration:20,maxSpeed:1400},Gl),_e=a.extend({deceleration:1e3,maxSpeed:360},Gl),Ce=a.extend({deceleration:1e3,maxSpeed:90},Gl),Re=t(function(N){this._map=N,this.clear()},"HandlerInertia");Re.prototype.clear=t(function(){this._inertiaBuffer=[]},"clear"),Re.prototype.record=t(function(N){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:N})},"record"),Re.prototype._drainInertiaBuffer=t(function(){for(var N=this._inertiaBuffer,K=a.browser.now(),U=160;N.length>0&&K-N[0].time>U;)N.shift()},"_drainInertiaBuffer"),Re.prototype._onMoveEnd=t(function(N){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var K={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},U=0,Q=this._inertiaBuffer;U<Q.length;U+=1){var le=Q[U],be=le.settings;K.zoom+=be.zoomDelta||0,K.bearing+=be.bearingDelta||0,K.pitch+=be.pitchDelta||0,be.panDelta&&K.pan._add(be.panDelta),be.around&&(K.around=be.around),be.pinchAround&&(K.pinchAround=be.pinchAround)}var Me=this._inertiaBuffer[this._inertiaBuffer.length-1],Ie=Me.time-this._inertiaBuffer[0].time,Ze={};if(K.pan.mag()){var ct=Ke(K.pan.mag(),Ie,a.extend({},Y,N||{}));Ze.offset=K.pan.mult(ct.amount/K.pan.mag()),Ze.center=this._map.transform.center,Le(Ze,ct)}if(K.zoom){var ht=Ke(K.zoom,Ie,ve);Ze.zoom=this._map.transform.zoom+ht.amount,Le(Ze,ht)}if(K.bearing){var Be=Ke(K.bearing,Ie,_e);Ze.bearing=this._map.transform.bearing+a.clamp(Be.amount,-179,179),Le(Ze,Be)}if(K.pitch){var We=Ke(K.pitch,Ie,Ce);Ze.pitch=this._map.transform.pitch+We.amount,Le(Ze,We)}if(Ze.zoom||Ze.bearing){var it=K.pinchAround===void 0?K.around:K.pinchAround;Ze.around=it?this._map.unproject(it):this._map.getCenter()}return this.clear(),a.extend(Ze,{noMoveStart:!0})}},"_onMoveEnd");function Le(Z,N){(!Z.duration||Z.duration<N.duration)&&(Z.duration=N.duration,Z.easing=N.easing)}t(Le,"extendDuration");function Ke(Z,N,K){var U=K.maxSpeed,Q=K.linearity,le=K.deceleration,be=a.clamp(Z*Q/(N/1e3),-U,U),Me=Math.abs(be)/(le*Q);return{easing:K.easing,duration:Me*1e3,amount:be*(Me/2)}}t(Ke,"calculateEasing");var Ne=function(Z){function N(U,Q,le,be){be===void 0&&(be={});var Me=u.mousePos(Q.getCanvasContainer(),le),Ie=Q.unproject(Me);Z.call(this,U,a.extend({point:Me,lngLat:Ie,originalEvent:le},be)),this._defaultPrevented=!1,this.target=Q}t(N,"MapMouseEvent"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N;var K={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=t(function(){this._defaultPrevented=!0},"preventDefault"),K.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,K),N}(a.Event),rt=function(Z){function N(U,Q,le){var be=U==="touchend"?le.changedTouches:le.touches,Me=u.touchPos(Q.getCanvasContainer(),be),Ie=Me.map(function(ht){return Q.unproject(ht)}),Ze=Me.reduce(function(ht,Be,We,it){return ht.add(Be.div(it.length))},new a.Point(0,0)),ct=Q.unproject(Ze);Z.call(this,U,{points:Me,point:Ze,lngLats:Ie,lngLat:ct,originalEvent:le}),this._defaultPrevented=!1}t(N,"MapTouchEvent"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N;var K={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=t(function(){this._defaultPrevented=!0},"preventDefault"),K.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,K),N}(a.Event),yt=function(Z){function N(U,Q,le){Z.call(this,U,{originalEvent:le}),this._defaultPrevented=!1}t(N,"MapWheelEvent"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N;var K={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=t(function(){this._defaultPrevented=!0},"preventDefault"),K.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,K),N}(a.Event),gt=t(function(N,K){this._map=N,this._clickTolerance=K.clickTolerance},"MapEventHandler");gt.prototype.reset=t(function(){delete this._mousedownPos},"reset"),gt.prototype.wheel=t(function(N){return this._firePreventable(new yt(N.type,this._map,N))},"wheel"),gt.prototype.mousedown=t(function(N,K){return this._mousedownPos=K,this._firePreventable(new Ne(N.type,this._map,N))},"mousedown"),gt.prototype.mouseup=t(function(N){this._map.fire(new Ne(N.type,this._map,N))},"mouseup"),gt.prototype.click=t(function(N,K){this._mousedownPos&&this._mousedownPos.dist(K)>=this._clickTolerance||this._map.fire(new Ne(N.type,this._map,N))},"click"),gt.prototype.dblclick=t(function(N){return this._firePreventable(new Ne(N.type,this._map,N))},"dblclick"),gt.prototype.mouseover=t(function(N){this._map.fire(new Ne(N.type,this._map,N))},"mouseover"),gt.prototype.mouseout=t(function(N){this._map.fire(new Ne(N.type,this._map,N))},"mouseout"),gt.prototype.touchstart=t(function(N){return this._firePreventable(new rt(N.type,this._map,N))},"touchstart"),gt.prototype.touchmove=t(function(N){this._map.fire(new rt(N.type,this._map,N))},"touchmove"),gt.prototype.touchend=t(function(N){this._map.fire(new rt(N.type,this._map,N))},"touchend"),gt.prototype.touchcancel=t(function(N){this._map.fire(new rt(N.type,this._map,N))},"touchcancel"),gt.prototype._firePreventable=t(function(N){if(this._map.fire(N),N.defaultPrevented)return{}},"_firePreventable"),gt.prototype.isEnabled=t(function(){return!0},"isEnabled"),gt.prototype.isActive=t(function(){return!1},"isActive"),gt.prototype.enable=t(function(){},"enable"),gt.prototype.disable=t(function(){},"disable");var Ut=t(function(N){this._map=N},"BlockableMapEventHandler");Ut.prototype.reset=t(function(){this._delayContextMenu=!1,delete this._contextMenuEvent},"reset"),Ut.prototype.mousemove=t(function(N){this._map.fire(new Ne(N.type,this._map,N))},"mousemove"),Ut.prototype.mousedown=t(function(){this._delayContextMenu=!0},"mousedown"),Ut.prototype.mouseup=t(function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ne("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},"mouseup"),Ut.prototype.contextmenu=t(function(N){this._delayContextMenu?this._contextMenuEvent=N:this._map.fire(new Ne(N.type,this._map,N)),this._map.listens("contextmenu")&&N.preventDefault()},"contextmenu"),Ut.prototype.isEnabled=t(function(){return!0},"isEnabled"),Ut.prototype.isActive=t(function(){return!1},"isActive"),Ut.prototype.enable=t(function(){},"enable"),Ut.prototype.disable=t(function(){},"disable");var Tt=t(function(N,K){this._map=N,this._el=N.getCanvasContainer(),this._container=N.getContainer(),this._clickTolerance=K.clickTolerance||1},"BoxZoomHandler");Tt.prototype.isEnabled=t(function(){return!!this._enabled},"isEnabled"),Tt.prototype.isActive=t(function(){return!!this._active},"isActive"),Tt.prototype.enable=t(function(){this.isEnabled()||(this._enabled=!0)},"enable"),Tt.prototype.disable=t(function(){!this.isEnabled()||(this._enabled=!1)},"disable"),Tt.prototype.mousedown=t(function(N,K){!this.isEnabled()||!(N.shiftKey&&N.button===0)||(u.disableDrag(),this._startPos=this._lastPos=K,this._active=!0)},"mousedown"),Tt.prototype.mousemoveWindow=t(function(N,K){if(!!this._active){var U=K;if(!(this._lastPos.equals(U)||!this._box&&U.dist(this._startPos)<this._clickTolerance)){var Q=this._startPos;this._lastPos=U,this._box||(this._box=u.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",N));var le=Math.min(Q.x,U.x),be=Math.max(Q.x,U.x),Me=Math.min(Q.y,U.y),Ie=Math.max(Q.y,U.y);u.setTransform(this._box,"translate("+le+"px,"+Me+"px)"),this._box.style.width=be-le+"px",this._box.style.height=Ie-Me+"px"}}},"mousemoveWindow"),Tt.prototype.mouseupWindow=t(function(N,K){var U=this;if(!!this._active&&N.button===0){var Q=this._startPos,le=K;if(this.reset(),u.suppressClick(),Q.x===le.x&&Q.y===le.y)this._fireEvent("boxzoomcancel",N);else return this._map.fire(new a.Event("boxzoomend",{originalEvent:N})),{cameraAnimation:function(be){return be.fitScreenCoordinates(Q,le,U._map.getBearing(),{linear:!0})}}}},"mouseupWindow"),Tt.prototype.keydown=t(function(N){!this._active||N.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",N))},"keydown"),Tt.prototype.reset=t(function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(u.remove(this._box),this._box=null),u.enableDrag(),delete this._startPos,delete this._lastPos},"reset"),Tt.prototype._fireEvent=t(function(N,K){return this._map.fire(new a.Event(N,{originalEvent:K}))},"_fireEvent");function or(Z,N){for(var K={},U=0;U<Z.length;U++)K[Z[U].identifier]=N[U];return K}t(or,"indexTouches");function pr(Z){for(var N=new a.Point(0,0),K=0,U=Z;K<U.length;K+=1){var Q=U[K];N._add(Q)}return N.div(Z.length)}t(pr,"getCentroid");var jt=500,er=500,rr=30,dr=t(function(N){this.reset(),this.numTouches=N.numTouches},"SingleTapRecognizer");dr.prototype.reset=t(function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},"reset"),dr.prototype.touchstart=t(function(N,K,U){(this.centroid||U.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=N.timeStamp),U.length===this.numTouches&&(this.centroid=pr(K),this.touches=or(U,K)))},"touchstart"),dr.prototype.touchmove=t(function(N,K,U){if(!(this.aborted||!this.centroid)){var Q=or(U,K);for(var le in this.touches){var be=this.touches[le],Me=Q[le];(!Me||Me.dist(be)>rr)&&(this.aborted=!0)}}},"touchmove"),dr.prototype.touchend=t(function(N,K,U){if((!this.centroid||N.timeStamp-this.startTime>er)&&(this.aborted=!0),U.length===0){var Q=!this.aborted&&this.centroid;if(this.reset(),Q)return Q}},"touchend");var gr=t(function(N){this.singleTap=new dr(N),this.numTaps=N.numTaps,this.reset()},"TapRecognizer");gr.prototype.reset=t(function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},"reset"),gr.prototype.touchstart=t(function(N,K,U){this.singleTap.touchstart(N,K,U)},"touchstart"),gr.prototype.touchmove=t(function(N,K,U){this.singleTap.touchmove(N,K,U)},"touchmove"),gr.prototype.touchend=t(function(N,K,U){var Q=this.singleTap.touchend(N,K,U);if(Q){var le=N.timeStamp-this.lastTime<jt,be=!this.lastTap||this.lastTap.dist(Q)<rr;if((!le||!be)&&this.reset(),this.count++,this.lastTime=N.timeStamp,this.lastTap=Q,this.count===this.numTaps)return this.reset(),Q}},"touchend");var tr=t(function(){this._zoomIn=new gr({numTouches:1,numTaps:2}),this._zoomOut=new gr({numTouches:2,numTaps:1}),this.reset()},"TapZoomHandler");tr.prototype.reset=t(function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},"reset"),tr.prototype.touchstart=t(function(N,K,U){this._zoomIn.touchstart(N,K,U),this._zoomOut.touchstart(N,K,U)},"touchstart"),tr.prototype.touchmove=t(function(N,K,U){this._zoomIn.touchmove(N,K,U),this._zoomOut.touchmove(N,K,U)},"touchmove"),tr.prototype.touchend=t(function(N,K,U){var Q=this,le=this._zoomIn.touchend(N,K,U),be=this._zoomOut.touchend(N,K,U);if(le)return this._active=!0,N.preventDefault(),setTimeout(function(){return Q.reset()},0),{cameraAnimation:function(Me){return Me.easeTo({duration:300,zoom:Me.getZoom()+1,around:Me.unproject(le)},{originalEvent:N})}};if(be)return this._active=!0,N.preventDefault(),setTimeout(function(){return Q.reset()},0),{cameraAnimation:function(Me){return Me.easeTo({duration:300,zoom:Me.getZoom()-1,around:Me.unproject(be)},{originalEvent:N})}}},"touchend"),tr.prototype.touchcancel=t(function(){this.reset()},"touchcancel"),tr.prototype.enable=t(function(){this._enabled=!0},"enable"),tr.prototype.disable=t(function(){this._enabled=!1,this.reset()},"disable"),tr.prototype.isEnabled=t(function(){return this._enabled},"isEnabled"),tr.prototype.isActive=t(function(){return this._active},"isActive");var Yr=0,ia=2,ua=t(function(N){this.reset(),this._clickTolerance=N.clickTolerance||1},"MouseHandler");ua.prototype.reset=t(function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},"reset"),ua.prototype._correctButton=t(function(N,K){return!1},"_correctButton"),ua.prototype._move=t(function(N,K){return{}},"_move"),ua.prototype.mousedown=t(function(N,K){if(!this._lastPoint){var U=u.mouseButton(N);!this._correctButton(N,U)||(this._lastPoint=K,this._eventButton=U)}},"mousedown"),ua.prototype.mousemoveWindow=t(function(N,K){var U=this._lastPoint;if(!!U&&(N.preventDefault(),!(!this._moved&&K.dist(U)<this._clickTolerance)))return this._moved=!0,this._lastPoint=K,this._move(U,K)},"mousemoveWindow"),ua.prototype.mouseupWindow=t(function(N){var K=u.mouseButton(N);K===this._eventButton&&(this._moved&&u.suppressClick(),this.reset())},"mouseupWindow"),ua.prototype.enable=t(function(){this._enabled=!0},"enable"),ua.prototype.disable=t(function(){this._enabled=!1,this.reset()},"disable"),ua.prototype.isEnabled=t(function(){return this._enabled},"isEnabled"),ua.prototype.isActive=t(function(){return this._active},"isActive");var oa=function(Z){function N(){Z.apply(this,arguments)}return t(N,"MousePanHandler"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.mousedown=t(function(U,Q){Z.prototype.mousedown.call(this,U,Q),this._lastPoint&&(this._active=!0)},"mousedown"),N.prototype._correctButton=t(function(U,Q){return Q===Yr&&!U.ctrlKey},"_correctButton"),N.prototype._move=t(function(U,Q){return{around:Q,panDelta:Q.sub(U)}},"_move"),N}(ua),pa=function(Z){function N(){Z.apply(this,arguments)}return t(N,"MouseRotateHandler"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype._correctButton=t(function(U,Q){return Q===Yr&&U.ctrlKey||Q===ia},"_correctButton"),N.prototype._move=t(function(U,Q){var le=.8,be=(Q.x-U.x)*le;if(be)return this._active=!0,{bearingDelta:be}},"_move"),N.prototype.contextmenu=t(function(U){U.preventDefault()},"contextmenu"),N}(ua),Ya=function(Z){function N(){Z.apply(this,arguments)}return t(N,"MousePitchHandler"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype._correctButton=t(function(U,Q){return Q===Yr&&U.ctrlKey||Q===ia},"_correctButton"),N.prototype._move=t(function(U,Q){var le=-.5,be=(Q.y-U.y)*le;if(be)return this._active=!0,{pitchDelta:be}},"_move"),N.prototype.contextmenu=t(function(U){U.preventDefault()},"contextmenu"),N}(ua),en=t(function(N){this._minTouches=1,this._clickTolerance=N.clickTolerance||1,this.reset()},"TouchPanHandler");en.prototype.reset=t(function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},"reset"),en.prototype.touchstart=t(function(N,K,U){return this._calculateTransform(N,K,U)},"touchstart"),en.prototype.touchmove=t(function(N,K,U){if(!!this._active)return N.preventDefault(),this._calculateTransform(N,K,U)},"touchmove"),en.prototype.touchend=t(function(N,K,U){this._calculateTransform(N,K,U),this._active&&U.length<this._minTouches&&this.reset()},"touchend"),en.prototype.touchcancel=t(function(){this.reset()},"touchcancel"),en.prototype._calculateTransform=t(function(N,K,U){U.length>0&&(this._active=!0);var Q=or(U,K),le=new a.Point(0,0),be=new a.Point(0,0),Me=0;for(var Ie in Q){var Ze=Q[Ie],ct=this._touches[Ie];ct&&(le._add(Ze),be._add(Ze.sub(ct)),Me++,Q[Ie]=Ze)}if(this._touches=Q,!(Me<this._minTouches||!be.mag())){var ht=be.div(Me);if(this._sum._add(ht),!(this._sum.mag()<this._clickTolerance)){var Be=le.div(Me);return{around:Be,panDelta:ht}}}},"_calculateTransform"),en.prototype.enable=t(function(){this._enabled=!0},"enable"),en.prototype.disable=t(function(){this._enabled=!1,this.reset()},"disable"),en.prototype.isEnabled=t(function(){return this._enabled},"isEnabled"),en.prototype.isActive=t(function(){return this._active},"isActive");var Ca=t(function(){this.reset()},"TwoTouchHandler");Ca.prototype.reset=t(function(){this._active=!1,delete this._firstTwoTouches},"reset"),Ca.prototype._start=t(function(N){},"_start"),Ca.prototype._move=t(function(N,K,U){return{}},"_move"),Ca.prototype.touchstart=t(function(N,K,U){this._firstTwoTouches||U.length<2||(this._firstTwoTouches=[U[0].identifier,U[1].identifier],this._start([K[0],K[1]]))},"touchstart"),Ca.prototype.touchmove=t(function(N,K,U){if(!!this._firstTwoTouches){N.preventDefault();var Q=this._firstTwoTouches,le=Q[0],be=Q[1],Me=pn(U,K,le),Ie=pn(U,K,be);if(!(!Me||!Ie)){var Ze=this._aroundCenter?null:Me.add(Ie).div(2);return this._move([Me,Ie],Ze,N)}}},"touchmove"),Ca.prototype.touchend=t(function(N,K,U){if(!!this._firstTwoTouches){var Q=this._firstTwoTouches,le=Q[0],be=Q[1],Me=pn(U,K,le),Ie=pn(U,K,be);Me&&Ie||(this._active&&u.suppressClick(),this.reset())}},"touchend"),Ca.prototype.touchcancel=t(function(){this.reset()},"touchcancel"),Ca.prototype.enable=t(function(N){this._enabled=!0,this._aroundCenter=!!N&&N.around==="center"},"enable"),Ca.prototype.disable=t(function(){this._enabled=!1,this.reset()},"disable"),Ca.prototype.isEnabled=t(function(){return this._enabled},"isEnabled"),Ca.prototype.isActive=t(function(){return this._active},"isActive");function pn(Z,N,K){for(var U=0;U<Z.length;U++)if(Z[U].identifier===K)return N[U]}t(pn,"getTouchById");var ti=.1;function Hi(Z,N){return Math.log(Z/N)/Math.LN2}t(Hi,"getZoomDelta");var si=function(Z){function N(){Z.apply(this,arguments)}return t(N,"TouchZoomHandler"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.reset=t(function(){Z.prototype.reset.call(this),delete this._distance,delete this._startDistance},"reset"),N.prototype._start=t(function(U){this._startDistance=this._distance=U[0].dist(U[1])},"_start"),N.prototype._move=t(function(U,Q){var le=this._distance;if(this._distance=U[0].dist(U[1]),!(!this._active&&Math.abs(Hi(this._distance,this._startDistance))<ti))return this._active=!0,{zoomDelta:Hi(this._distance,le),pinchAround:Q}},"_move"),N}(Ca),wa=25;function En(Z,N){return Z.angleWith(N)*180/Math.PI}t(En,"getBearingDelta");var zn=function(Z){function N(){Z.apply(this,arguments)}return t(N,"TouchRotateHandler"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.reset=t(function(){Z.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},"reset"),N.prototype._start=t(function(U){this._startVector=this._vector=U[0].sub(U[1]),this._minDiameter=U[0].dist(U[1])},"_start"),N.prototype._move=t(function(U,Q){var le=this._vector;if(this._vector=U[0].sub(U[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:En(this._vector,le),pinchAround:Q}},"_move"),N.prototype._isBelowThreshold=t(function(U){this._minDiameter=Math.min(this._minDiameter,U.mag());var Q=Math.PI*this._minDiameter,le=wa/Q*360,be=En(U,this._startVector);return Math.abs(be)<le},"_isBelowThreshold"),N}(Ca);function Fn(Z){return Math.abs(Z.y)>Math.abs(Z.x)}t(Fn,"isVertical");var Yi=100,On=function(Z){function N(){Z.apply(this,arguments)}return t(N,"TouchPitchHandler"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.reset=t(function(){Z.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},"reset"),N.prototype._start=t(function(U){this._lastPoints=U,Fn(U[0].sub(U[1]))&&(this._valid=!1)},"_start"),N.prototype._move=t(function(U,Q,le){var be=U[0].sub(this._lastPoints[0]),Me=U[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(be,Me,le.timeStamp),!!this._valid){this._lastPoints=U,this._active=!0;var Ie=(be.y+Me.y)/2,Ze=-.5;return{pitchDelta:Ie*Ze}}},"_move"),N.prototype.gestureBeginsVertically=t(function(U,Q,le){if(this._valid!==void 0)return this._valid;var be=2,Me=U.mag()>=be,Ie=Q.mag()>=be;if(!(!Me&&!Ie)){if(!Me||!Ie)return this._firstMove===void 0&&(this._firstMove=le),le-this._firstMove<Yi?void 0:!1;var Ze=U.y>0==Q.y>0;return Fn(U)&&Fn(Q)&&Ze}},"gestureBeginsVertically"),N}(Ca),fo={panStep:100,bearingStep:15,pitchStep:10},Wi=t(function(){var N=fo;this._panStep=N.panStep,this._bearingStep=N.bearingStep,this._pitchStep=N.pitchStep},"KeyboardHandler");Wi.prototype.reset=t(function(){this._active=!1},"reset"),Wi.prototype.keydown=t(function(N){var K=this;if(!(N.altKey||N.ctrlKey||N.metaKey)){var U=0,Q=0,le=0,be=0,Me=0;switch(N.keyCode){case 61:case 107:case 171:case 187:U=1;break;case 189:case 109:case 173:U=-1;break;case 37:N.shiftKey?Q=-1:(N.preventDefault(),be=-1);break;case 39:N.shiftKey?Q=1:(N.preventDefault(),be=1);break;case 38:N.shiftKey?le=1:(N.preventDefault(),Me=-1);break;case 40:N.shiftKey?le=-1:(N.preventDefault(),Me=1);break;default:return}return{cameraAnimation:function(Ie){var Ze=Ie.getZoom();Ie.easeTo({duration:300,easeId:"keyboardHandler",easing:mo,zoom:U?Math.round(Ze)+U*(N.shiftKey?2:1):Ze,bearing:Ie.getBearing()+Q*K._bearingStep,pitch:Ie.getPitch()+le*K._pitchStep,offset:[-be*K._panStep,-Me*K._panStep],center:Ie.getCenter()},{originalEvent:N})}}}},"keydown"),Wi.prototype.enable=t(function(){this._enabled=!0},"enable"),Wi.prototype.disable=t(function(){this._enabled=!1,this.reset()},"disable"),Wi.prototype.isEnabled=t(function(){return this._enabled},"isEnabled"),Wi.prototype.isActive=t(function(){return this._active},"isActive");function mo(Z){return Z*(2-Z)}t(mo,"easeOut");var No=4.000244140625,ss=1/100,st=1/450,Yt=2,Zt=t(function(N,K){this._map=N,this._el=N.getCanvasContainer(),this._handler=K,this._delta=0,this._defaultZoomRate=ss,this._wheelZoomRate=st,a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)},"ScrollZoomHandler");Zt.prototype.setZoomRate=t(function(N){this._defaultZoomRate=N},"setZoomRate"),Zt.prototype.setWheelZoomRate=t(function(N){this._wheelZoomRate=N},"setWheelZoomRate"),Zt.prototype.isEnabled=t(function(){return!!this._enabled},"isEnabled"),Zt.prototype.isActive=t(function(){return!!this._active||this._finishTimeout!==void 0},"isActive"),Zt.prototype.isZooming=t(function(){return!!this._zooming},"isZooming"),Zt.prototype.enable=t(function(N){this.isEnabled()||(this._enabled=!0,this._aroundCenter=N&&N.around==="center")},"enable"),Zt.prototype.disable=t(function(){!this.isEnabled()||(this._enabled=!1)},"disable"),Zt.prototype.wheel=t(function(N){if(!!this.isEnabled()){var K=N.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?N.deltaY*40:N.deltaY,U=a.browser.now(),Q=U-(this._lastWheelEventTime||0);this._lastWheelEventTime=U,K!==0&&K%No===0?this._type="wheel":K!==0&&Math.abs(K)<4?this._type="trackpad":Q>400?(this._type=null,this._lastValue=K,this._timeout=setTimeout(this._onTimeout,40,N)):this._type||(this._type=Math.abs(Q*K)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,K+=this._lastValue)),N.shiftKey&&K&&(K=K/4),this._type&&(this._lastWheelEvent=N,this._delta-=K,this._active||this._start(N)),N.preventDefault()}},"wheel"),Zt.prototype._onTimeout=t(function(N){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(N)},"_onTimeout"),Zt.prototype._start=t(function(N){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var K=u.mousePos(this._el,N);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(K)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},"_start"),Zt.prototype.renderFrame=t(function(){return this._onScrollFrame()},"renderFrame"),Zt.prototype._onScrollFrame=t(function(){var N=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var K=this._map.transform;if(this._delta!==0){var U=this._type==="wheel"&&Math.abs(this._delta)>No?this._wheelZoomRate:this._defaultZoomRate,Q=Yt/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&Q!==0&&(Q=1/Q);var le=typeof this._targetZoom=="number"?K.zoomScale(this._targetZoom):K.scale;this._targetZoom=Math.min(K.maxZoom,Math.max(K.minZoom,K.scaleZoom(le*Q))),this._type==="wheel"&&(this._startZoom=K.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var be=typeof this._targetZoom=="number"?this._targetZoom:K.zoom,Me=this._startZoom,Ie=this._easing,Ze=!1,ct;if(this._type==="wheel"&&Me&&Ie){var ht=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Be=Ie(ht);ct=a.number(Me,be,Be),ht<1?this._frameId||(this._frameId=!0):Ze=!0}else ct=be,Ze=!0;return this._active=!0,Ze&&(this._active=!1,this._finishTimeout=setTimeout(function(){N._zooming=!1,N._handler._triggerRenderFrame(),delete N._targetZoom,delete N._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ze,zoomDelta:ct-K.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},"_onScrollFrame"),Zt.prototype._smoothOutEasing=t(function(N){var K=a.ease;if(this._prevEase){var U=this._prevEase,Q=(a.browser.now()-U.start)/U.duration,le=U.easing(Q+.01)-U.easing(Q),be=.27/Math.sqrt(le*le+1e-4)*.01,Me=Math.sqrt(.27*.27-be*be);K=a.bezier(be,Me,.25,1)}return this._prevEase={start:a.browser.now(),duration:N,easing:K},K},"_smoothOutEasing"),Zt.prototype.reset=t(function(){this._active=!1},"reset");var cr=t(function(N,K){this._clickZoom=N,this._tapZoom=K},"DoubleClickZoomHandler");cr.prototype.enable=t(function(){this._clickZoom.enable(),this._tapZoom.enable()},"enable"),cr.prototype.disable=t(function(){this._clickZoom.disable(),this._tapZoom.disable()},"disable"),cr.prototype.isEnabled=t(function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},"isEnabled"),cr.prototype.isActive=t(function(){return this._clickZoom.isActive()||this._tapZoom.isActive()},"isActive");var br=t(function(){this.reset()},"ClickZoomHandler");br.prototype.reset=t(function(){this._active=!1},"reset"),br.prototype.dblclick=t(function(N,K){return N.preventDefault(),{cameraAnimation:function(U){U.easeTo({duration:300,zoom:U.getZoom()+(N.shiftKey?-1:1),around:U.unproject(K)},{originalEvent:N})}}},"dblclick"),br.prototype.enable=t(function(){this._enabled=!0},"enable"),br.prototype.disable=t(function(){this._enabled=!1,this.reset()},"disable"),br.prototype.isEnabled=t(function(){return this._enabled},"isEnabled"),br.prototype.isActive=t(function(){return this._active},"isActive");var kr=t(function(){this._tap=new gr({numTouches:1,numTaps:1}),this.reset()},"TapDragZoomHandler");kr.prototype.reset=t(function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},"reset"),kr.prototype.touchstart=t(function(N,K,U){this._swipePoint||(this._tapTime&&N.timeStamp-this._tapTime>jt&&this.reset(),this._tapTime?U.length>0&&(this._swipePoint=K[0],this._swipeTouch=U[0].identifier):this._tap.touchstart(N,K,U))},"touchstart"),kr.prototype.touchmove=t(function(N,K,U){if(!this._tapTime)this._tap.touchmove(N,K,U);else if(this._swipePoint){if(U[0].identifier!==this._swipeTouch)return;var Q=K[0],le=Q.y-this._swipePoint.y;return this._swipePoint=Q,N.preventDefault(),this._active=!0,{zoomDelta:le/128}}},"touchmove"),kr.prototype.touchend=t(function(N,K,U){if(this._tapTime)this._swipePoint&&U.length===0&&this.reset();else{var Q=this._tap.touchend(N,K,U);Q&&(this._tapTime=N.timeStamp)}},"touchend"),kr.prototype.touchcancel=t(function(){this.reset()},"touchcancel"),kr.prototype.enable=t(function(){this._enabled=!0},"enable"),kr.prototype.disable=t(function(){this._enabled=!1,this.reset()},"disable"),kr.prototype.isEnabled=t(function(){return this._enabled},"isEnabled"),kr.prototype.isActive=t(function(){return this._active},"isActive");var Pr=t(function(N,K,U){this._el=N,this._mousePan=K,this._touchPan=U},"DragPanHandler");Pr.prototype.enable=t(function(N){this._inertiaOptions=N||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},"enable"),Pr.prototype.disable=t(function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},"disable"),Pr.prototype.isEnabled=t(function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},"isEnabled"),Pr.prototype.isActive=t(function(){return this._mousePan.isActive()||this._touchPan.isActive()},"isActive");var la=t(function(N,K,U){this._pitchWithRotate=N.pitchWithRotate,this._mouseRotate=K,this._mousePitch=U},"DragRotateHandler");la.prototype.enable=t(function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},"enable"),la.prototype.disable=t(function(){this._mouseRotate.disable(),this._mousePitch.disable()},"disable"),la.prototype.isEnabled=t(function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},"isEnabled"),la.prototype.isActive=t(function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()},"isActive");var Qr=t(function(N,K,U,Q){this._el=N,this._touchZoom=K,this._touchRotate=U,this._tapDragZoom=Q,this._rotationDisabled=!1,this._enabled=!0},"TouchZoomRotateHandler");Qr.prototype.enable=t(function(N){this._touchZoom.enable(N),this._rotationDisabled||this._touchRotate.enable(N),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},"enable"),Qr.prototype.disable=t(function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},"disable"),Qr.prototype.isEnabled=t(function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},"isEnabled"),Qr.prototype.isActive=t(function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},"isActive"),Qr.prototype.disableRotation=t(function(){this._rotationDisabled=!0,this._touchRotate.disable()},"disableRotation"),Qr.prototype.enableRotation=t(function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()},"enableRotation");var fa=t(function(Z){return Z.zoom||Z.drag||Z.pitch||Z.rotate},"isMoving"),ka=function(Z){function N(){Z.apply(this,arguments)}return t(N,"RenderFrameEvent"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N}(a.Event);function sn(Z){return Z.panDelta&&Z.panDelta.mag()||Z.zoomDelta||Z.bearingDelta||Z.pitchDelta}t(sn,"hasChange");var Ra=t(function(N,K){this._map=N,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Re(N),this._bearingSnap=K.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(K),a.bindAll(["handleEvent","handleWindowEvent"],this);var U=this._el;this._listeners=[[U,"touchstart",{passive:!1}],[U,"touchmove",{passive:!1}],[U,"touchend",void 0],[U,"touchcancel",void 0],[U,"mousedown",void 0],[U,"mousemove",void 0],[U,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[U,"mouseover",void 0],[U,"mouseout",void 0],[U,"dblclick",void 0],[U,"click",void 0],[U,"keydown",{capture:!1}],[U,"keyup",void 0],[U,"wheel",{passive:!1}],[U,"contextmenu",void 0],[a.window,"blur",void 0]];for(var Q=0,le=this._listeners;Q<le.length;Q+=1){var be=le[Q],Me=be[0],Ie=be[1],Ze=be[2];u.addEventListener(Me,Ie,Me===a.window.document?this.handleWindowEvent:this.handleEvent,Ze)}},"HandlerManager");Ra.prototype.destroy=t(function(){for(var N=0,K=this._listeners;N<K.length;N+=1){var U=K[N],Q=U[0],le=U[1],be=U[2];u.removeEventListener(Q,le,Q===a.window.document?this.handleWindowEvent:this.handleEvent,be)}},"destroy"),Ra.prototype._addDefaultHandlers=t(function(N){var K=this._map,U=K.getCanvasContainer();this._add("mapEvent",new gt(K,N));var Q=K.boxZoom=new Tt(K,N);this._add("boxZoom",Q);var le=new tr,be=new br;K.doubleClickZoom=new cr(be,le),this._add("tapZoom",le),this._add("clickZoom",be);var Me=new kr;this._add("tapDragZoom",Me);var Ie=K.touchPitch=new On;this._add("touchPitch",Ie);var Ze=new pa(N),ct=new Ya(N);K.dragRotate=new la(N,Ze,ct),this._add("mouseRotate",Ze,["mousePitch"]),this._add("mousePitch",ct,["mouseRotate"]);var ht=new oa(N),Be=new en(N);K.dragPan=new Pr(U,ht,Be),this._add("mousePan",ht),this._add("touchPan",Be,["touchZoom","touchRotate"]);var We=new zn,it=new si;K.touchZoomRotate=new Qr(U,it,We,Me),this._add("touchRotate",We,["touchPan","touchZoom"]),this._add("touchZoom",it,["touchPan","touchRotate"]);var wt=K.scrollZoom=new Zt(K,this);this._add("scrollZoom",wt,["mousePan"]);var pt=K.keyboard=new Wi;this._add("keyboard",pt),this._add("blockableMapEvent",new Ut(K));for(var bt=0,Mt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];bt<Mt.length;bt+=1){var Dt=Mt[bt];N.interactive&&N[Dt]&&K[Dt].enable(N[Dt])}},"_addDefaultHandlers"),Ra.prototype._add=t(function(N,K,U){this._handlers.push({handlerName:N,handler:K,allowed:U}),this._handlersById[N]=K},"_add"),Ra.prototype.stop=t(function(){if(!this._updatingCamera){for(var N=0,K=this._handlers;N<K.length;N+=1){var U=K[N],Q=U.handler;Q.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},"stop"),Ra.prototype.isActive=t(function(){for(var N=0,K=this._handlers;N<K.length;N+=1){var U=K[N],Q=U.handler;if(Q.isActive())return!0}return!1},"isActive"),Ra.prototype.isZooming=t(function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},"isZooming"),Ra.prototype.isRotating=t(function(){return!!this._eventsInProgress.rotate},"isRotating"),Ra.prototype.isMoving=t(function(){return Boolean(fa(this._eventsInProgress))||this.isZooming()},"isMoving$1"),Ra.prototype._blockedByActive=t(function(N,K,U){for(var Q in N)if(Q!==U&&(!K||K.indexOf(Q)<0))return!0;return!1},"_blockedByActive"),Ra.prototype.handleWindowEvent=t(function(N){this.handleEvent(N,N.type+"Window")},"handleWindowEvent"),Ra.prototype._getMapTouches=t(function(N){for(var K=[],U=0,Q=N;U<Q.length;U+=1){var le=Q[U],be=le.target;this._el.contains(be)&&K.push(le)}return K},"_getMapTouches"),Ra.prototype.handleEvent=t(function(N,K){if(N.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var U=N.type==="renderFrame"?void 0:N,Q={needsRenderFrame:!1},le={},be={},Me=N.touches?this._getMapTouches(N.touches):void 0,Ie=Me?u.touchPos(this._el,Me):u.mousePos(this._el,N),Ze=0,ct=this._handlers;Ze<ct.length;Ze+=1){var ht=ct[Ze],Be=ht.handlerName,We=ht.handler,it=ht.allowed;if(!!We.isEnabled()){var wt=void 0;this._blockedByActive(be,it,Be)?We.reset():We[K||N.type]&&(wt=We[K||N.type](N,Ie,Me),this.mergeHandlerResult(Q,le,wt,Be,U),wt&&wt.needsRenderFrame&&this._triggerRenderFrame()),(wt||We.isActive())&&(be[Be]=We)}}var pt={};for(var bt in this._previousActiveHandlers)be[bt]||(pt[bt]=U);this._previousActiveHandlers=be,(Object.keys(pt).length||sn(Q))&&(this._changes.push([Q,le,pt]),this._triggerRenderFrame()),(Object.keys(be).length||sn(Q))&&this._map._stop(!0),this._updatingCamera=!1;var Mt=Q.cameraAnimation;Mt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Mt(this._map))},"handleEvent"),Ra.prototype.mergeHandlerResult=t(function(N,K,U,Q,le){if(!!U){a.extend(N,U);var be={handlerName:Q,originalEvent:U.originalEvent||le};U.zoomDelta!==void 0&&(K.zoom=be),U.panDelta!==void 0&&(K.drag=be),U.pitchDelta!==void 0&&(K.pitch=be),U.bearingDelta!==void 0&&(K.rotate=be)}},"mergeHandlerResult"),Ra.prototype._applyChanges=t(function(){for(var N={},K={},U={},Q=0,le=this._changes;Q<le.length;Q+=1){var be=le[Q],Me=be[0],Ie=be[1],Ze=be[2];Me.panDelta&&(N.panDelta=(N.panDelta||new a.Point(0,0))._add(Me.panDelta)),Me.zoomDelta&&(N.zoomDelta=(N.zoomDelta||0)+Me.zoomDelta),Me.bearingDelta&&(N.bearingDelta=(N.bearingDelta||0)+Me.bearingDelta),Me.pitchDelta&&(N.pitchDelta=(N.pitchDelta||0)+Me.pitchDelta),Me.around!==void 0&&(N.around=Me.around),Me.pinchAround!==void 0&&(N.pinchAround=Me.pinchAround),Me.noInertia&&(N.noInertia=Me.noInertia),a.extend(K,Ie),a.extend(U,Ze)}this._updateMapTransform(N,K,U),this._changes=[]},"_applyChanges"),Ra.prototype._updateMapTransform=t(function(N,K,U){var Q=this._map,le=Q.transform;if(!sn(N))return this._fireEvents(K,U);var be=N.panDelta,Me=N.zoomDelta,Ie=N.bearingDelta,Ze=N.pitchDelta,ct=N.around,ht=N.pinchAround;ht!==void 0&&(ct=ht),Q._stop(!0),ct=ct||Q.transform.centerPoint;var Be=le.pointLocation(be?ct.sub(be):ct);Ie&&(le.bearing+=Ie),Ze&&(le.pitch+=Ze),Me&&(le.zoom+=Me),le.setLocationAtPoint(Be,ct),this._map._update(),N.noInertia||this._inertia.record(N),this._fireEvents(K,U)},"_updateMapTransform"),Ra.prototype._fireEvents=t(function(N,K){var U=this,Q=fa(this._eventsInProgress),le=fa(N),be={};for(var Me in N){var Ie=N[Me],Ze=Ie.originalEvent;this._eventsInProgress[Me]||(be[Me+"start"]=Ze),this._eventsInProgress[Me]=N[Me]}!Q&&le&&this._fireEvent("movestart",le.originalEvent);for(var ct in be)this._fireEvent(ct,be[ct]);N.rotate&&(this._bearingChanged=!0),le&&this._fireEvent("move",le.originalEvent);for(var ht in N){var Be=N[ht],We=Be.originalEvent;this._fireEvent(ht,We)}var it={},wt;for(var pt in this._eventsInProgress){var bt=this._eventsInProgress[pt],Mt=bt.handlerName,Dt=bt.originalEvent;this._handlersById[Mt].isActive()||(delete this._eventsInProgress[pt],wt=K[Mt]||Dt,it[pt+"end"]=wt)}for(var St in it)this._fireEvent(St,it[St]);var Ft=fa(this._eventsInProgress);if((Q||le)&&!Ft){this._updatingCamera=!0;var Lt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Xt=t(function(ar){return ar!==0&&-U._bearingSnap<ar&&ar<U._bearingSnap},"shouldSnapToNorth");Lt?(Xt(Lt.bearing||this._map.getBearing())&&(Lt.bearing=0),this._map.easeTo(Lt,{originalEvent:wt})):(this._map.fire(new a.Event("moveend",{originalEvent:wt})),Xt(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},"_fireEvents"),Ra.prototype._fireEvent=t(function(N,K){this._map.fire(new a.Event(N,K?{originalEvent:K}:{}))},"_fireEvent"),Ra.prototype._triggerRenderFrame=t(function(){var N=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(K){delete N._frameId,N.handleEvent(new ka("renderFrame",{timeStamp:K})),N._applyChanges()}))},"_triggerRenderFrame");var La=function(Z){function N(K,U){Z.call(this),this._moving=!1,this._zooming=!1,this.transform=K,this._bearingSnap=U.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return t(N,"Camera"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.getCenter=t(function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},"getCenter"),N.prototype.setCenter=t(function(U,Q){return this.jumpTo({center:U},Q)},"setCenter"),N.prototype.panBy=t(function(U,Q,le){return U=a.Point.convert(U).mult(-1),this.panTo(this.transform.center,a.extend({offset:U},Q),le)},"panBy"),N.prototype.panTo=t(function(U,Q,le){return this.easeTo(a.extend({center:U},Q),le)},"panTo"),N.prototype.getZoom=t(function(){return this.transform.zoom},"getZoom"),N.prototype.setZoom=t(function(U,Q){return this.jumpTo({zoom:U},Q),this},"setZoom"),N.prototype.zoomTo=t(function(U,Q,le){return this.easeTo(a.extend({zoom:U},Q),le)},"zoomTo"),N.prototype.zoomIn=t(function(U,Q){return this.zoomTo(this.getZoom()+1,U,Q),this},"zoomIn"),N.prototype.zoomOut=t(function(U,Q){return this.zoomTo(this.getZoom()-1,U,Q),this},"zoomOut"),N.prototype.getBearing=t(function(){return this.transform.bearing},"getBearing"),N.prototype.setBearing=t(function(U,Q){return this.jumpTo({bearing:U},Q),this},"setBearing"),N.prototype.getPadding=t(function(){return this.transform.padding},"getPadding"),N.prototype.setPadding=t(function(U,Q){return this.jumpTo({padding:U},Q),this},"setPadding"),N.prototype.rotateTo=t(function(U,Q,le){return this.easeTo(a.extend({bearing:U},Q),le)},"rotateTo"),N.prototype.resetNorth=t(function(U,Q){return this.rotateTo(0,a.extend({duration:1e3},U),Q),this},"resetNorth"),N.prototype.resetNorthPitch=t(function(U,Q){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},U),Q),this},"resetNorthPitch"),N.prototype.snapToNorth=t(function(U,Q){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(U,Q):this},"snapToNorth"),N.prototype.getPitch=t(function(){return this.transform.pitch},"getPitch"),N.prototype.setPitch=t(function(U,Q){return this.jumpTo({pitch:U},Q),this},"setPitch"),N.prototype.cameraForBounds=t(function(U,Q){return U=a.LngLatBounds.convert(U),this._cameraForBoxAndBearing(U.getNorthWest(),U.getSouthEast(),0,Q)},"cameraForBounds"),N.prototype._cameraForBoxAndBearing=t(function(U,Q,le,be){var Me={top:0,bottom:0,right:0,left:0};if(be=a.extend({padding:Me,offset:[0,0],maxZoom:this.transform.maxZoom},be),typeof be.padding=="number"){var Ie=be.padding;be.padding={top:Ie,bottom:Ie,right:Ie,left:Ie}}be.padding=a.extend(Me,be.padding);var Ze=this.transform,ct=Ze.padding,ht=Ze.project(a.LngLat.convert(U)),Be=Ze.project(a.LngLat.convert(Q)),We=ht.rotate(-le*Math.PI/180),it=Be.rotate(-le*Math.PI/180),wt=new a.Point(Math.max(We.x,it.x),Math.max(We.y,it.y)),pt=new a.Point(Math.min(We.x,it.x),Math.min(We.y,it.y)),bt=wt.sub(pt),Mt=(Ze.width-(ct.left+ct.right+be.padding.left+be.padding.right))/bt.x,Dt=(Ze.height-(ct.top+ct.bottom+be.padding.top+be.padding.bottom))/bt.y;if(Dt<0||Mt<0){a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var St=Math.min(Ze.scaleZoom(Ze.scale*Math.min(Mt,Dt)),be.maxZoom),Ft=a.Point.convert(be.offset),Lt=(be.padding.left-be.padding.right)/2,Xt=(be.padding.top-be.padding.bottom)/2,ar=new a.Point(Ft.x+Lt,Ft.y+Xt),vr=ar.mult(Ze.scale/Ze.zoomScale(St)),Ir=Ze.unproject(ht.add(Be).div(2).sub(vr));return{center:Ir,zoom:St,bearing:le}},"_cameraForBoxAndBearing"),N.prototype.fitBounds=t(function(U,Q,le){return this._fitInternal(this.cameraForBounds(U,Q),Q,le)},"fitBounds"),N.prototype.fitScreenCoordinates=t(function(U,Q,le,be,Me){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(U)),this.transform.pointLocation(a.Point.convert(Q)),le,be),be,Me)},"fitScreenCoordinates"),N.prototype._fitInternal=t(function(U,Q,le){return U?(Q=a.extend(U,Q),delete Q.padding,Q.linear?this.easeTo(Q,le):this.flyTo(Q,le)):this},"_fitInternal"),N.prototype.jumpTo=t(function(U,Q){this.stop();var le=this.transform,be=!1,Me=!1,Ie=!1;return"zoom"in U&&le.zoom!==+U.zoom&&(be=!0,le.zoom=+U.zoom),U.center!==void 0&&(le.center=a.LngLat.convert(U.center)),"bearing"in U&&le.bearing!==+U.bearing&&(Me=!0,le.bearing=+U.bearing),"pitch"in U&&le.pitch!==+U.pitch&&(Ie=!0,le.pitch=+U.pitch),U.padding!=null&&!le.isPaddingEqual(U.padding)&&(le.padding=U.padding),this.fire(new a.Event("movestart",Q)).fire(new a.Event("move",Q)),be&&this.fire(new a.Event("zoomstart",Q)).fire(new a.Event("zoom",Q)).fire(new a.Event("zoomend",Q)),Me&&this.fire(new a.Event("rotatestart",Q)).fire(new a.Event("rotate",Q)).fire(new a.Event("rotateend",Q)),Ie&&this.fire(new a.Event("pitchstart",Q)).fire(new a.Event("pitch",Q)).fire(new a.Event("pitchend",Q)),this.fire(new a.Event("moveend",Q))},"jumpTo"),N.prototype.easeTo=t(function(U,Q){var le=this;this._stop(!1,U.easeId),U=a.extend({offset:[0,0],duration:500,easing:a.ease},U),(U.animate===!1||!U.essential&&a.browser.prefersReducedMotion)&&(U.duration=0);var be=this.transform,Me=this.getZoom(),Ie=this.getBearing(),Ze=this.getPitch(),ct=this.getPadding(),ht="zoom"in U?+U.zoom:Me,Be="bearing"in U?this._normalizeBearing(U.bearing,Ie):Ie,We="pitch"in U?+U.pitch:Ze,it="padding"in U?U.padding:be.padding,wt=a.Point.convert(U.offset),pt=be.centerPoint.add(wt),bt=be.pointLocation(pt),Mt=a.LngLat.convert(U.center||bt);this._normalizeCenter(Mt);var Dt=be.project(bt),St=be.project(Mt).sub(Dt),Ft=be.zoomScale(ht-Me),Lt,Xt;U.around&&(Lt=a.LngLat.convert(U.around),Xt=be.locationPoint(Lt));var ar={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ht!==Me,this._rotating=this._rotating||Ie!==Be,this._pitching=this._pitching||We!==Ze,this._padding=!be.isPaddingEqual(it),this._easeId=U.easeId,this._prepareEase(Q,U.noMoveStart,ar),clearTimeout(this._easeEndTimeoutID),this._ease(function(vr){if(le._zooming&&(be.zoom=a.number(Me,ht,vr)),le._rotating&&(be.bearing=a.number(Ie,Be,vr)),le._pitching&&(be.pitch=a.number(Ze,We,vr)),le._padding&&(be.interpolatePadding(ct,it,vr),pt=be.centerPoint.add(wt)),Lt)be.setLocationAtPoint(Lt,Xt);else{var Ir=be.zoomScale(be.zoom-Me),zr=ht>Me?Math.min(2,Ft):Math.max(.5,Ft),Dr=Math.pow(zr,1-vr),Vr=be.unproject(Dt.add(St.mult(vr*Dr)).mult(Ir));be.setLocationAtPoint(be.renderWorldCopies?Vr.wrap():Vr,pt)}le._fireMoveEvents(Q)},function(vr){le._afterEase(Q,vr)},U),this},"easeTo"),N.prototype._prepareEase=t(function(U,Q,le){le===void 0&&(le={}),this._moving=!0,!Q&&!le.moving&&this.fire(new a.Event("movestart",U)),this._zooming&&!le.zooming&&this.fire(new a.Event("zoomstart",U)),this._rotating&&!le.rotating&&this.fire(new a.Event("rotatestart",U)),this._pitching&&!le.pitching&&this.fire(new a.Event("pitchstart",U))},"_prepareEase"),N.prototype._fireMoveEvents=t(function(U){this.fire(new a.Event("move",U)),this._zooming&&this.fire(new a.Event("zoom",U)),this._rotating&&this.fire(new a.Event("rotate",U)),this._pitching&&this.fire(new a.Event("pitch",U))},"_fireMoveEvents"),N.prototype._afterEase=t(function(U,Q){if(!(this._easeId&&Q&&this._easeId===Q)){delete this._easeId;var le=this._zooming,be=this._rotating,Me=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,le&&this.fire(new a.Event("zoomend",U)),be&&this.fire(new a.Event("rotateend",U)),Me&&this.fire(new a.Event("pitchend",U)),this.fire(new a.Event("moveend",U))}},"_afterEase"),N.prototype.flyTo=t(function(U,Q){var le=this;if(!U.essential&&a.browser.prefersReducedMotion){var be=a.pick(U,["center","zoom","bearing","pitch","around"]);return this.jumpTo(be,Q)}this.stop(),U=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},U);var Me=this.transform,Ie=this.getZoom(),Ze=this.getBearing(),ct=this.getPitch(),ht=this.getPadding(),Be="zoom"in U?a.clamp(+U.zoom,Me.minZoom,Me.maxZoom):Ie,We="bearing"in U?this._normalizeBearing(U.bearing,Ze):Ze,it="pitch"in U?+U.pitch:ct,wt="padding"in U?U.padding:Me.padding,pt=Me.zoomScale(Be-Ie),bt=a.Point.convert(U.offset),Mt=Me.centerPoint.add(bt),Dt=Me.pointLocation(Mt),St=a.LngLat.convert(U.center||Dt);this._normalizeCenter(St);var Ft=Me.project(Dt),Lt=Me.project(St).sub(Ft),Xt=U.curve,ar=Math.max(Me.width,Me.height),vr=ar/pt,Ir=Lt.mag();if("minZoom"in U){var zr=a.clamp(Math.min(U.minZoom,Ie,Be),Me.minZoom,Me.maxZoom),Dr=ar/Me.zoomScale(zr-Ie);Xt=Math.sqrt(Dr/Ir*2)}var Vr=Xt*Xt;function Xr(gn){var Nn=(vr*vr-ar*ar+(gn?-1:1)*Vr*Vr*Ir*Ir)/(2*(gn?vr:ar)*Vr*Ir);return Math.log(Math.sqrt(Nn*Nn+1)-Nn)}t(Xr,"r");function Ta(gn){return(Math.exp(gn)-Math.exp(-gn))/2}t(Ta,"sinh");function Jr(gn){return(Math.exp(gn)+Math.exp(-gn))/2}t(Jr,"cosh");function sa(gn){return Ta(gn)/Jr(gn)}t(sa,"tanh");var Nr=Xr(0),Ua=t(function(gn){return Jr(Nr)/Jr(Nr+Xt*gn)},"w"),wn=t(function(gn){return ar*((Jr(Nr)*sa(Nr+Xt*gn)-Ta(Nr))/Vr)/Ir},"u"),Wn=(Xr(1)-Nr)/Xt;if(Math.abs(Ir)<1e-6||!isFinite(Wn)){if(Math.abs(ar-vr)<1e-6)return this.easeTo(U,Q);var $n=vr<ar?-1:1;Wn=Math.abs(Math.log(vr/ar))/Xt,wn=t(function(){return 0},"u"),Ua=t(function(gn){return Math.exp($n*Xt*gn)},"w")}if("duration"in U)U.duration=+U.duration;else{var li="screenSpeed"in U?+U.screenSpeed/Xt:+U.speed;U.duration=1e3*Wn/li}return U.maxDuration&&U.duration>U.maxDuration&&(U.duration=0),this._zooming=!0,this._rotating=Ze!==We,this._pitching=it!==ct,this._padding=!Me.isPaddingEqual(wt),this._prepareEase(Q,!1),this._ease(function(gn){var Nn=gn*Wn,Xi=1/Ua(Nn);Me.zoom=gn===1?Be:Ie+Me.scaleZoom(Xi),le._rotating&&(Me.bearing=a.number(Ze,We,gn)),le._pitching&&(Me.pitch=a.number(ct,it,gn)),le._padding&&(Me.interpolatePadding(ht,wt,gn),Mt=Me.centerPoint.add(bt));var ls=gn===1?St:Me.unproject(Ft.add(Lt.mult(wn(Nn))).mult(Xi));Me.setLocationAtPoint(Me.renderWorldCopies?ls.wrap():ls,Mt),le._fireMoveEvents(Q)},function(){return le._afterEase(Q)},U),this},"flyTo"),N.prototype.isEasing=t(function(){return!!this._easeFrameId},"isEasing"),N.prototype.stop=t(function(){return this._stop()},"stop"),N.prototype._stop=t(function(U,Q){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var le=this._onEaseEnd;delete this._onEaseEnd,le.call(this,Q)}if(!U){var be=this.handlers;be&&be.stop()}return this},"_stop"),N.prototype._ease=t(function(U,Q,le){le.animate===!1||le.duration===0?(U(1),Q()):(this._easeStart=a.browser.now(),this._easeOptions=le,this._onEaseFrame=U,this._onEaseEnd=Q,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},"_ease"),N.prototype._renderFrameCallback=t(function(){var U=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(U)),U<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},"_renderFrameCallback"),N.prototype._normalizeBearing=t(function(U,Q){U=a.wrap(U,-180,180);var le=Math.abs(U-Q);return Math.abs(U-360-Q)<le&&(U-=360),Math.abs(U+360-Q)<le&&(U+=360),U},"_normalizeBearing"),N.prototype._normalizeCenter=t(function(U){var Q=this.transform;if(!(!Q.renderWorldCopies||Q.lngRange)){var le=U.lng-Q.center.lng;U.lng+=le>180?-360:le<-180?360:0}},"_normalizeCenter"),N}(a.Evented),ra=t(function(N){N===void 0&&(N={}),this.options=N,a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)},"AttributionControl");ra.prototype.getDefaultPosition=t(function(){return"bottom-right"},"getDefaultPosition"),ra.prototype.onAdd=t(function(N){var K=this.options&&this.options.compact;return this._map=N,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=u.create("div","mapboxgl-ctrl-attrib-inner",this._container),K&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),K===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},"onAdd"),ra.prototype.onRemove=t(function(){u.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},"onRemove"),ra.prototype._updateEditLink=t(function(){var N=this._editLink;N||(N=this._editLink=this._container.querySelector(".mapbox-improve-map"));var K=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(N){var U=K.reduce(function(Q,le,be){return le.value&&(Q+=le.key+"="+le.value+(be<K.length-1?"&":"")),Q},"?");N.href=a.config.FEEDBACK_URL+"/"+U+(this._map._hash?this._map._hash.getHashString(!0):""),N.rel="noopener nofollow"}},"_updateEditLink"),ra.prototype._updateData=t(function(N){N&&(N.sourceDataType==="metadata"||N.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},"_updateData"),ra.prototype._updateAttributions=t(function(){if(!!this._map.style){var N=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?N=N.concat(this.options.customAttribution.map(function(Ie){return typeof Ie!="string"?"":Ie})):typeof this.options.customAttribution=="string"&&N.push(this.options.customAttribution)),this._map.style.stylesheet){var K=this._map.style.stylesheet;this.styleOwner=K.owner,this.styleId=K.id}var U=this._map.style.sourceCaches;for(var Q in U){var le=U[Q];if(le.used){var be=le.getSource();be.attribution&&N.indexOf(be.attribution)<0&&N.push(be.attribution)}}N.sort(function(Ie,Ze){return Ie.length-Ze.length}),N=N.filter(function(Ie,Ze){for(var ct=Ze+1;ct<N.length;ct++)if(N[ct].indexOf(Ie)>=0)return!1;return!0});var Me=N.join(" | ");Me!==this._attribHTML&&(this._attribHTML=Me,N.length?(this._innerContainer.innerHTML=Me,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},"_updateAttributions"),ra.prototype._updateCompact=t(function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},"_updateCompact");var fr=t(function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)},"LogoControl");fr.prototype.onAdd=t(function(N){this._map=N,this._container=u.create("div","mapboxgl-ctrl");var K=u.create("a","mapboxgl-ctrl-logo");return K.target="_blank",K.rel="noopener nofollow",K.href="https://www.mapbox.com/",K.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),K.setAttribute("rel","noopener nofollow"),this._container.appendChild(K),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},"onAdd"),fr.prototype.onRemove=t(function(){u.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},"onRemove"),fr.prototype.getDefaultPosition=t(function(){return"bottom-left"},"getDefaultPosition"),fr.prototype._updateLogo=t(function(N){(!N||N.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},"_updateLogo"),fr.prototype._logoRequired=t(function(){if(!!this._map.style){var N=this._map.style.sourceCaches;for(var K in N){var U=N[K].getSource();if(U.mapbox_logo)return!0}return!1}},"_logoRequired"),fr.prototype._updateCompact=t(function(){var N=this._container.children;if(N.length){var K=N[0];this._map.getCanvasContainer().offsetWidth<250?K.classList.add("mapboxgl-compact"):K.classList.remove("mapboxgl-compact")}},"_updateCompact");var Mr=t(function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1},"TaskQueue");Mr.prototype.add=t(function(N){var K=++this._id,U=this._queue;return U.push({callback:N,id:K,cancelled:!1}),K},"add"),Mr.prototype.remove=t(function(N){for(var K=this._currentlyRunning,U=K?this._queue.concat(K):this._queue,Q=0,le=U;Q<le.length;Q+=1){var be=le[Q];if(be.id===N){be.cancelled=!0;return}}},"remove"),Mr.prototype.run=t(function(N){N===void 0&&(N=0);var K=this._currentlyRunning=this._queue;this._queue=[];for(var U=0,Q=K;U<Q.length;U+=1){var le=Q[U];if(!le.cancelled&&(le.callback(N),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},"run"),Mr.prototype.clear=t(function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]},"clear");var ca={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ha=a.window.HTMLImageElement,Kr=a.window.HTMLElement,qa=a.window.ImageBitmap,Aa=-2,on=22,Gr=0,$r=60,Wa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Aa,maxZoom:on,minPitch:Gr,maxPitch:$r,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Or=function(Z){function N(U){var Q=this;if(U=a.extend({},Wa,U),U.minZoom!=null&&U.maxZoom!=null&&U.minZoom>U.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(U.minPitch!=null&&U.maxPitch!=null&&U.minPitch>U.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(U.minPitch!=null&&U.minPitch<Gr)throw new Error("minPitch must be greater than or equal to "+Gr);if(U.maxPitch!=null&&U.maxPitch>$r)throw new Error("maxPitch must be less than or equal to "+$r);var le=new mi(U.minZoom,U.maxZoom,U.minPitch,U.maxPitch,U.renderWorldCopies);if(Z.call(this,le,U),this._interactive=U.interactive,this._maxTileCacheSize=U.maxTileCacheSize,this._failIfMajorPerformanceCaveat=U.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=U.preserveDrawingBuffer,this._antialias=U.antialias,this._trackResize=U.trackResize,this._bearingSnap=U.bearingSnap,this._refreshExpiredTiles=U.refreshExpiredTiles,this._fadeDuration=U.fadeDuration,this._crossSourceCollisions=U.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=U.collectResourceTiming,this._renderTaskQueue=new Mr,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},ca,U.locale),this._requestManager=new a.RequestManager(U.transformRequest,U.accessToken),typeof U.container=="string"){if(this._container=a.window.document.getElementById(U.container),!this._container)throw new Error("Container '"+U.container+"' not found.")}else if(U.container instanceof Kr)this._container=U.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(U.maxBounds&&this.setMaxBounds(U.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Q._update(!1)}),this.on("moveend",function(){return Q._update(!1)}),this.on("zoom",function(){return Q._update(!0)}),typeof a.window<"u"&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Ra(this,U);var be=typeof U.hash=="string"&&U.hash||void 0;this._hash=U.hash&&new ou(be).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:U.center,zoom:U.zoom,bearing:U.bearing,pitch:U.pitch}),U.bounds&&(this.resize(),this.fitBounds(U.bounds,a.extend({},U.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=U.localIdeographFontFamily,U.style&&this.setStyle(U.style,{localIdeographFontFamily:U.localIdeographFontFamily}),U.attributionControl&&this.addControl(new ra({customAttribution:U.customAttribution})),this.addControl(new fr,U.logoPosition),this.on("style.load",function(){Q.transform.unmodified&&Q.jumpTo(Q.style.stylesheet)}),this.on("data",function(Me){Q._update(Me.dataType==="style"),Q.fire(new a.Event(Me.dataType+"data",Me))}),this.on("dataloading",function(Me){Q.fire(new a.Event(Me.dataType+"dataloading",Me))})}t(N,"Map"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N;var K={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return N.prototype._getMapId=t(function(){return this._mapId},"_getMapId"),N.prototype.addControl=t(function(Q,le){if(le===void 0&&Q.getDefaultPosition&&(le=Q.getDefaultPosition()),le===void 0&&(le="top-right"),!Q||!Q.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var be=Q.onAdd(this);this._controls.push(Q);var Me=this._controlPositions[le];return le.indexOf("bottom")!==-1?Me.insertBefore(be,Me.firstChild):Me.appendChild(be),this},"addControl"),N.prototype.removeControl=t(function(Q){if(!Q||!Q.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var le=this._controls.indexOf(Q);return le>-1&&this._controls.splice(le,1),Q.onRemove(this),this},"removeControl"),N.prototype.resize=t(function(Q){var le=this._containerDimensions(),be=le[0],Me=le[1];this._resizeCanvas(be,Me),this.transform.resize(be,Me),this.painter.resize(be,Me);var Ie=!this._moving;return Ie&&(this.stop(),this.fire(new a.Event("movestart",Q)).fire(new a.Event("move",Q))),this.fire(new a.Event("resize",Q)),Ie&&this.fire(new a.Event("moveend",Q)),this},"resize"),N.prototype.getBounds=t(function(){return this.transform.getBounds()},"getBounds"),N.prototype.getMaxBounds=t(function(){return this.transform.getMaxBounds()},"getMaxBounds"),N.prototype.setMaxBounds=t(function(Q){return this.transform.setMaxBounds(a.LngLatBounds.convert(Q)),this._update()},"setMaxBounds"),N.prototype.setMinZoom=t(function(Q){if(Q=Q==null?Aa:Q,Q>=Aa&&Q<=this.transform.maxZoom)return this.transform.minZoom=Q,this._update(),this.getZoom()<Q&&this.setZoom(Q),this;throw new Error("minZoom must be between "+Aa+" and the current maxZoom, inclusive")},"setMinZoom"),N.prototype.getMinZoom=t(function(){return this.transform.minZoom},"getMinZoom"),N.prototype.setMaxZoom=t(function(Q){if(Q=Q==null?on:Q,Q>=this.transform.minZoom)return this.transform.maxZoom=Q,this._update(),this.getZoom()>Q&&this.setZoom(Q),this;throw new Error("maxZoom must be greater than the current minZoom")},"setMaxZoom"),N.prototype.getMaxZoom=t(function(){return this.transform.maxZoom},"getMaxZoom"),N.prototype.setMinPitch=t(function(Q){if(Q=Q==null?Gr:Q,Q<Gr)throw new Error("minPitch must be greater than or equal to "+Gr);if(Q>=Gr&&Q<=this.transform.maxPitch)return this.transform.minPitch=Q,this._update(),this.getPitch()<Q&&this.setPitch(Q),this;throw new Error("minPitch must be between "+Gr+" and the current maxPitch, inclusive")},"setMinPitch"),N.prototype.getMinPitch=t(function(){return this.transform.minPitch},"getMinPitch"),N.prototype.setMaxPitch=t(function(Q){if(Q=Q==null?$r:Q,Q>$r)throw new Error("maxPitch must be less than or equal to "+$r);if(Q>=this.transform.minPitch)return this.transform.maxPitch=Q,this._update(),this.getPitch()>Q&&this.setPitch(Q),this;throw new Error("maxPitch must be greater than the current minPitch")},"setMaxPitch"),N.prototype.getMaxPitch=t(function(){return this.transform.maxPitch},"getMaxPitch"),N.prototype.getRenderWorldCopies=t(function(){return this.transform.renderWorldCopies},"getRenderWorldCopies"),N.prototype.setRenderWorldCopies=t(function(Q){return this.transform.renderWorldCopies=Q,this._update()},"setRenderWorldCopies"),N.prototype.project=t(function(Q){return this.transform.locationPoint(a.LngLat.convert(Q))},"project"),N.prototype.unproject=t(function(Q){return this.transform.pointLocation(a.Point.convert(Q))},"unproject"),N.prototype.isMoving=t(function(){return this._moving||this.handlers.isMoving()},"isMoving"),N.prototype.isZooming=t(function(){return this._zooming||this.handlers.isZooming()},"isZooming"),N.prototype.isRotating=t(function(){return this._rotating||this.handlers.isRotating()},"isRotating"),N.prototype._createDelegatedListener=t(function(Q,le,be){var Me=this,Ie;if(Q==="mouseenter"||Q==="mouseover"){var Ze=!1,ct=t(function(pt){var bt=Me.getLayer(le)?Me.queryRenderedFeatures(pt.point,{layers:[le]}):[];bt.length?Ze||(Ze=!0,be.call(Me,new Ne(Q,Me,pt.originalEvent,{features:bt}))):Ze=!1},"mousemove"),ht=t(function(){Ze=!1},"mouseout");return{layer:le,listener:be,delegates:{mousemove:ct,mouseout:ht}}}else if(Q==="mouseleave"||Q==="mouseout"){var Be=!1,We=t(function(pt){var bt=Me.getLayer(le)?Me.queryRenderedFeatures(pt.point,{layers:[le]}):[];bt.length?Be=!0:Be&&(Be=!1,be.call(Me,new Ne(Q,Me,pt.originalEvent)))},"mousemove$1"),it=t(function(pt){Be&&(Be=!1,be.call(Me,new Ne(Q,Me,pt.originalEvent)))},"mouseout$1");return{layer:le,listener:be,delegates:{mousemove:We,mouseout:it}}}else{var wt=t(function(pt){var bt=Me.getLayer(le)?Me.queryRenderedFeatures(pt.point,{layers:[le]}):[];bt.length&&(pt.features=bt,be.call(Me,pt),delete pt.features)},"delegate");return{layer:le,listener:be,delegates:(Ie={},Ie[Q]=wt,Ie)}}},"_createDelegatedListener"),N.prototype.on=t(function(Q,le,be){if(be===void 0)return Z.prototype.on.call(this,Q,le);var Me=this._createDelegatedListener(Q,le,be);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[Q]=this._delegatedListeners[Q]||[],this._delegatedListeners[Q].push(Me);for(var Ie in Me.delegates)this.on(Ie,Me.delegates[Ie]);return this},"on"),N.prototype.once=t(function(Q,le,be){if(be===void 0)return Z.prototype.once.call(this,Q,le);var Me=this._createDelegatedListener(Q,le,be);for(var Ie in Me.delegates)this.once(Ie,Me.delegates[Ie]);return this},"once"),N.prototype.off=t(function(Q,le,be){var Me=this;if(be===void 0)return Z.prototype.off.call(this,Q,le);var Ie=t(function(Ze){for(var ct=Ze[Q],ht=0;ht<ct.length;ht++){var Be=ct[ht];if(Be.layer===le&&Be.listener===be){for(var We in Be.delegates)Me.off(We,Be.delegates[We]);return ct.splice(ht,1),Me}}},"removeDelegatedListener");return this._delegatedListeners&&this._delegatedListeners[Q]&&Ie(this._delegatedListeners),this},"off"),N.prototype.queryRenderedFeatures=t(function(Q,le){if(!this.style)return[];le===void 0&&Q!==void 0&&!(Q instanceof a.Point)&&!Array.isArray(Q)&&(le=Q,Q=void 0),le=le||{},Q=Q||[[0,0],[this.transform.width,this.transform.height]];var be;if(Q instanceof a.Point||typeof Q[0]=="number")be=[a.Point.convert(Q)];else{var Me=a.Point.convert(Q[0]),Ie=a.Point.convert(Q[1]);be=[Me,new a.Point(Ie.x,Me.y),Ie,new a.Point(Me.x,Ie.y),Me]}return this.style.queryRenderedFeatures(be,le,this.transform)},"queryRenderedFeatures"),N.prototype.querySourceFeatures=t(function(Q,le){return this.style.querySourceFeatures(Q,le)},"querySourceFeatures"),N.prototype.setStyle=t(function(Q,le){return le=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},le),le.diff!==!1&&le.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&Q?(this._diffStyle(Q,le),this):(this._localIdeographFontFamily=le.localIdeographFontFamily,this._updateStyle(Q,le))},"setStyle"),N.prototype._getUIString=t(function(Q){var le=this._locale[Q];if(le==null)throw new Error("Missing UI string '"+Q+"'");return le},"_getUIString"),N.prototype._updateStyle=t(function(Q,le){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),Q)this.style=new Au(this,le||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof Q=="string"?this.style.loadURL(Q):this.style.loadJSON(Q),this},"_updateStyle"),N.prototype._lazyInitEmptyStyle=t(function(){this.style||(this.style=new Au(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},"_lazyInitEmptyStyle"),N.prototype._diffStyle=t(function(Q,le){var be=this;if(typeof Q=="string"){var Me=this._requestManager.normalizeStyleURL(Q),Ie=this._requestManager.transformRequest(Me,a.ResourceType.Style);a.getJSON(Ie,function(Ze,ct){Ze?be.fire(new a.ErrorEvent(Ze)):ct&&be._updateDiff(ct,le)})}else typeof Q=="object"&&this._updateDiff(Q,le)},"_diffStyle"),N.prototype._updateDiff=t(function(Q,le){try{this.style.setState(Q)&&this._update(!0)}catch(be){a.warnOnce("Unable to perform style diff: "+(be.message||be.error||be)+".  Rebuilding the style from scratch."),this._updateStyle(Q,le)}},"_updateDiff"),N.prototype.getStyle=t(function(){if(this.style)return this.style.serialize()},"getStyle"),N.prototype.isStyleLoaded=t(function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},"isStyleLoaded"),N.prototype.addSource=t(function(Q,le){return this._lazyInitEmptyStyle(),this.style.addSource(Q,le),this._update(!0)},"addSource"),N.prototype.isSourceLoaded=t(function(Q){var le=this.style&&this.style.sourceCaches[Q];if(le===void 0){this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+Q+"'")));return}return le.loaded()},"isSourceLoaded"),N.prototype.areTilesLoaded=t(function(){var Q=this.style&&this.style.sourceCaches;for(var le in Q){var be=Q[le],Me=be._tiles;for(var Ie in Me){var Ze=Me[Ie];if(!(Ze.state==="loaded"||Ze.state==="errored"))return!1}}return!0},"areTilesLoaded"),N.prototype.addSourceType=t(function(Q,le,be){return this._lazyInitEmptyStyle(),this.style.addSourceType(Q,le,be)},"addSourceType"),N.prototype.removeSource=t(function(Q){return this.style.removeSource(Q),this._update(!0)},"removeSource"),N.prototype.getSource=t(function(Q){return this.style.getSource(Q)},"getSource"),N.prototype.addImage=t(function(Q,le,be){be===void 0&&(be={});var Me=be.pixelRatio;Me===void 0&&(Me=1);var Ie=be.sdf;Ie===void 0&&(Ie=!1);var Ze=be.stretchX,ct=be.stretchY,ht=be.content;this._lazyInitEmptyStyle();var Be=0;if(le instanceof ha||qa&&le instanceof qa){var We=a.browser.getImageData(le),it=We.width,wt=We.height,pt=We.data;this.style.addImage(Q,{data:new a.RGBAImage({width:it,height:wt},pt),pixelRatio:Me,stretchX:Ze,stretchY:ct,content:ht,sdf:Ie,version:Be})}else{if(le.width===void 0||le.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var bt=le.width,Mt=le.height,Dt=le.data,St=le;this.style.addImage(Q,{data:new a.RGBAImage({width:bt,height:Mt},new Uint8Array(Dt)),pixelRatio:Me,stretchX:Ze,stretchY:ct,content:ht,sdf:Ie,version:Be,userImage:St}),St.onAdd&&St.onAdd(this,Q)}},"addImage"),N.prototype.updateImage=t(function(Q,le){var be=this.style.getImage(Q);if(!be)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Me=le instanceof ha||qa&&le instanceof qa?a.browser.getImageData(le):le,Ie=Me.width,Ze=Me.height,ct=Me.data;if(Ie===void 0||Ze===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Ie!==be.data.width||Ze!==be.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ht=!(le instanceof ha||qa&&le instanceof qa);be.data.replace(ct,ht),this.style.updateImage(Q,be)},"updateImage"),N.prototype.hasImage=t(function(Q){return Q?!!this.style.getImage(Q):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},"hasImage"),N.prototype.removeImage=t(function(Q){this.style.removeImage(Q)},"removeImage"),N.prototype.loadImage=t(function(Q,le){a.getImage(this._requestManager.transformRequest(Q,a.ResourceType.Image),le)},"loadImage"),N.prototype.listImages=t(function(){return this.style.listImages()},"listImages"),N.prototype.addLayer=t(function(Q,le){return this._lazyInitEmptyStyle(),this.style.addLayer(Q,le),this._update(!0)},"addLayer"),N.prototype.moveLayer=t(function(Q,le){return this.style.moveLayer(Q,le),this._update(!0)},"moveLayer"),N.prototype.removeLayer=t(function(Q){return this.style.removeLayer(Q),this._update(!0)},"removeLayer"),N.prototype.getLayer=t(function(Q){return this.style.getLayer(Q)},"getLayer"),N.prototype.setLayerZoomRange=t(function(Q,le,be){return this.style.setLayerZoomRange(Q,le,be),this._update(!0)},"setLayerZoomRange"),N.prototype.setFilter=t(function(Q,le,be){return be===void 0&&(be={}),this.style.setFilter(Q,le,be),this._update(!0)},"setFilter"),N.prototype.getFilter=t(function(Q){return this.style.getFilter(Q)},"getFilter"),N.prototype.setPaintProperty=t(function(Q,le,be,Me){return Me===void 0&&(Me={}),this.style.setPaintProperty(Q,le,be,Me),this._update(!0)},"setPaintProperty"),N.prototype.getPaintProperty=t(function(Q,le){return this.style.getPaintProperty(Q,le)},"getPaintProperty"),N.prototype.setLayoutProperty=t(function(Q,le,be,Me){return Me===void 0&&(Me={}),this.style.setLayoutProperty(Q,le,be,Me),this._update(!0)},"setLayoutProperty"),N.prototype.getLayoutProperty=t(function(Q,le){return this.style.getLayoutProperty(Q,le)},"getLayoutProperty"),N.prototype.setLight=t(function(Q,le){return le===void 0&&(le={}),this._lazyInitEmptyStyle(),this.style.setLight(Q,le),this._update(!0)},"setLight"),N.prototype.getLight=t(function(){return this.style.getLight()},"getLight"),N.prototype.setFeatureState=t(function(Q,le){return this.style.setFeatureState(Q,le),this._update()},"setFeatureState"),N.prototype.removeFeatureState=t(function(Q,le){return this.style.removeFeatureState(Q,le),this._update()},"removeFeatureState"),N.prototype.getFeatureState=t(function(Q){return this.style.getFeatureState(Q)},"getFeatureState"),N.prototype.getContainer=t(function(){return this._container},"getContainer"),N.prototype.getCanvasContainer=t(function(){return this._canvasContainer},"getCanvasContainer"),N.prototype.getCanvas=t(function(){return this._canvas},"getCanvas"),N.prototype._containerDimensions=t(function(){var Q=0,le=0;return this._container&&(Q=this._container.clientWidth||400,le=this._container.clientHeight||300),[Q,le]},"_containerDimensions"),N.prototype._detectMissingCSS=t(function(){var Q=a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");Q!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},"_detectMissingCSS"),N.prototype._setupContainer=t(function(){var Q=this._container;Q.classList.add("mapboxgl-map");var le=this._missingCSSCanary=u.create("div","mapboxgl-canary",Q);le.style.visibility="hidden",this._detectMissingCSS();var be=this._canvasContainer=u.create("div","mapboxgl-canvas-container",Q);this._interactive&&be.classList.add("mapboxgl-interactive"),this._canvas=u.create("canvas","mapboxgl-canvas",be),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Me=this._containerDimensions();this._resizeCanvas(Me[0],Me[1]);var Ie=this._controlContainer=u.create("div","mapboxgl-control-container",Q),Ze=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ct){Ze[ct]=u.create("div","mapboxgl-ctrl-"+ct,Ie)})},"_setupContainer"),N.prototype._resizeCanvas=t(function(Q,le){var be=a.browser.devicePixelRatio||1;this._canvas.width=be*Q,this._canvas.height=be*le,this._canvas.style.width=Q+"px",this._canvas.style.height=le+"px"},"_resizeCanvas"),N.prototype._setupPainter=t(function(){var Q=a.extend({},l.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),le=this._canvas.getContext("webgl",Q)||this._canvas.getContext("experimental-webgl",Q);if(!le){this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new ii(le,this.transform),a.webpSupported.testSupport(le)},"_setupPainter"),N.prototype._contextLost=t(function(Q){Q.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:Q}))},"_contextLost"),N.prototype._contextRestored=t(function(Q){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:Q}))},"_contextRestored"),N.prototype.loaded=t(function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},"loaded"),N.prototype._update=t(function(Q){return this.style?(this._styleDirty=this._styleDirty||Q,this._sourcesDirty=!0,this.triggerRepaint(),this):this},"_update"),N.prototype._requestRenderFrame=t(function(Q){return this._update(),this._renderTaskQueue.add(Q)},"_requestRenderFrame"),N.prototype._cancelRenderFrame=t(function(Q){this._renderTaskQueue.remove(Q)},"_cancelRenderFrame"),N.prototype._render=t(function(Q){var le=this,be,Me=0,Ie=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(be=Ie.createQueryEXT(),Ie.beginQueryEXT(Ie.TIME_ELAPSED_EXT,be),Me=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(Q),!this._removed){var Ze=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ct=this.transform.zoom,ht=a.browser.now();this.style.zoomHistory.update(ct,ht);var Be=new a.EvaluationParameters(ct,{now:ht,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),We=Be.crossFadingFactor();(We!==1||We!==this._crossFadingFactor)&&(Ze=!0,this._crossFadingFactor=We),this.style.update(Be)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||Ze)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var it=a.browser.now()-Me;Ie.endQueryEXT(Ie.TIME_ELAPSED_EXT,be),setTimeout(function(){var bt=Ie.getQueryObjectEXT(be,Ie.QUERY_RESULT_EXT)/1e6;Ie.deleteQueryEXT(be),le.fire(new a.Event("gpu-timing-frame",{cpuTime:it,gpuTime:bt}))},50)}if(this.listens("gpu-timing-layer")){var wt=this.painter.collectGpuTimers();setTimeout(function(){var bt=le.painter.queryGpuTimers(wt);le.fire(new a.Event("gpu-timing-layer",{layerTimes:bt}))},50)}var pt=this._sourcesDirty||this._styleDirty||this._placementDirty;return pt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this}},"_render"),N.prototype.remove=t(function(){this._hash&&this._hash.remove();for(var Q=0,le=this._controls;Q<le.length;Q+=1){var be=le[Q];be.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof a.window<"u"&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var Me=this.painter.context.gl.getExtension("WEBGL_lose_context");Me&&Me.loseContext(),Ba(this._canvasContainer),Ba(this._controlContainer),Ba(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},"remove"),N.prototype.triggerRepaint=t(function(){var Q=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(le){Q._frame=null,Q._render(le)}))},"triggerRepaint"),N.prototype._onWindowOnline=t(function(){this._update()},"_onWindowOnline"),N.prototype._onWindowResize=t(function(Q){this._trackResize&&this.resize({originalEvent:Q})._update()},"_onWindowResize"),K.showTileBoundaries.get=function(){return!!this._showTileBoundaries},K.showTileBoundaries.set=function(U){this._showTileBoundaries!==U&&(this._showTileBoundaries=U,this._update())},K.showPadding.get=function(){return!!this._showPadding},K.showPadding.set=function(U){this._showPadding!==U&&(this._showPadding=U,this._update())},K.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},K.showCollisionBoxes.set=function(U){this._showCollisionBoxes!==U&&(this._showCollisionBoxes=U,U?this.style._generateCollisionBoxes():this._update())},K.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},K.showOverdrawInspector.set=function(U){this._showOverdrawInspector!==U&&(this._showOverdrawInspector=U,this._update())},K.repaint.get=function(){return!!this._repaint},K.repaint.set=function(U){this._repaint!==U&&(this._repaint=U,this.triggerRepaint())},K.vertices.get=function(){return!!this._vertices},K.vertices.set=function(U){this._vertices=U,this._update()},N.prototype._setCacheLimits=t(function(Q,le){a.setCacheLimits(Q,le)},"_setCacheLimits"),K.version.get=function(){return a.version},Object.defineProperties(N.prototype,K),N}(La);function Ba(Z){Z.parentNode&&Z.parentNode.removeChild(Z)}t(Ba,"removeNode");var va={showCompass:!0,showZoom:!0,visualizePitch:!1},tn=t(function(N){var K=this;this.options=a.extend({},va,N),this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(U){return U.preventDefault()}),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(U){return K._map.zoomIn({},{originalEvent:U})}),u.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(U){return K._map.zoomOut({},{originalEvent:U})}),u.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(U){K.options.visualizePitch?K._map.resetNorthPitch({},{originalEvent:U}):K._map.resetNorth({},{originalEvent:U})}),this._compassIcon=u.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))},"NavigationControl");tn.prototype._updateZoomButtons=t(function(){var N=this._map.getZoom();this._zoomInButton.disabled=N===this._map.getMaxZoom(),this._zoomOutButton.disabled=N===this._map.getMinZoom()},"_updateZoomButtons"),tn.prototype._rotateCompassArrow=t(function(){var N=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=N},"_rotateCompassArrow"),tn.prototype.onAdd=t(function(N){return this._map=N,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Sn(this._map,this._compass,this.options.visualizePitch)),this._container},"onAdd"),tn.prototype.onRemove=t(function(){u.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},"onRemove"),tn.prototype._createButton=t(function(N,K){var U=u.create("button",N,this._container);return U.type="button",U.addEventListener("click",K),U},"_createButton"),tn.prototype._setButtonTitle=t(function(N,K){var U=this._map._getUIString("NavigationControl."+K);N.title=U,N.setAttribute("aria-label",U)},"_setButtonTitle");var Sn=t(function(N,K,U){U===void 0&&(U=!1),this._clickTolerance=10,this.element=K,this.mouseRotate=new pa({clickTolerance:N.dragRotate._mouseRotate._clickTolerance}),this.map=N,U&&(this.mousePitch=new Ya({clickTolerance:N.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener(K,"mousedown",this.mousedown),u.addEventListener(K,"touchstart",this.touchstart,{passive:!1}),u.addEventListener(K,"touchmove",this.touchmove),u.addEventListener(K,"touchend",this.touchend),u.addEventListener(K,"touchcancel",this.reset)},"MouseRotateWrapper");Sn.prototype.down=t(function(N,K){this.mouseRotate.mousedown(N,K),this.mousePitch&&this.mousePitch.mousedown(N,K),u.disableDrag()},"down"),Sn.prototype.move=t(function(N,K){var U=this.map,Q=this.mouseRotate.mousemoveWindow(N,K);if(Q&&Q.bearingDelta&&U.setBearing(U.getBearing()+Q.bearingDelta),this.mousePitch){var le=this.mousePitch.mousemoveWindow(N,K);le&&le.pitchDelta&&U.setPitch(U.getPitch()+le.pitchDelta)}},"move"),Sn.prototype.off=t(function(){var N=this.element;u.removeEventListener(N,"mousedown",this.mousedown),u.removeEventListener(N,"touchstart",this.touchstart,{passive:!1}),u.removeEventListener(N,"touchmove",this.touchmove),u.removeEventListener(N,"touchend",this.touchend),u.removeEventListener(N,"touchcancel",this.reset),this.offTemp()},"off"),Sn.prototype.offTemp=t(function(){u.enableDrag(),u.removeEventListener(a.window,"mousemove",this.mousemove),u.removeEventListener(a.window,"mouseup",this.mouseup)},"offTemp"),Sn.prototype.mousedown=t(function(N){this.down(a.extend({},N,{ctrlKey:!0,preventDefault:function(){return N.preventDefault()}}),u.mousePos(this.element,N)),u.addEventListener(a.window,"mousemove",this.mousemove),u.addEventListener(a.window,"mouseup",this.mouseup)},"mousedown"),Sn.prototype.mousemove=t(function(N){this.move(N,u.mousePos(this.element,N))},"mousemove"),Sn.prototype.mouseup=t(function(N){this.mouseRotate.mouseupWindow(N),this.mousePitch&&this.mousePitch.mouseupWindow(N),this.offTemp()},"mouseup"),Sn.prototype.touchstart=t(function(N){N.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=u.touchPos(this.element,N.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return N.preventDefault()}},this._startPos))},"touchstart"),Sn.prototype.touchmove=t(function(N){N.targetTouches.length!==1?this.reset():(this._lastPos=u.touchPos(this.element,N.targetTouches)[0],this.move({preventDefault:function(){return N.preventDefault()}},this._lastPos))},"touchmove"),Sn.prototype.touchend=t(function(N){N.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},"touchend"),Sn.prototype.reset=t(function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},"reset");function ja(Z,N,K){if(Z=new a.LngLat(Z.lng,Z.lat),N){var U=new a.LngLat(Z.lng-360,Z.lat),Q=new a.LngLat(Z.lng+360,Z.lat),le=K.locationPoint(Z).distSqr(N);K.locationPoint(U).distSqr(N)<le?Z=U:K.locationPoint(Q).distSqr(N)<le&&(Z=Q)}for(;Math.abs(Z.lng-K.center.lng)>180;){var be=K.locationPoint(Z);if(be.x>=0&&be.y>=0&&be.x<=K.width&&be.y<=K.height)break;Z.lng>K.center.lng?Z.lng-=360:Z.lng+=360}return Z}t(ja,"smartWrap");var fn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function za(Z,N,K){var U=Z.classList;for(var Q in fn)U.remove("mapboxgl-"+K+"-anchor-"+Q);U.add("mapboxgl-"+K+"-anchor-"+N)}t(za,"applyAnchorClass");var Hn=function(Z){function N(K,U){var Q=this;if(Z.call(this),(K instanceof a.window.HTMLElement||U)&&(K=a.extend({element:K},U)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=K&&K.anchor||"center",this._color=K&&K.color||"#3FB1CE",this._draggable=K&&K.draggable||!1,this._state="inactive",this._rotation=K&&K.rotation||0,this._rotationAlignment=K&&K.rotationAlignment||"auto",this._pitchAlignment=K&&K.pitchAlignment&&K.pitchAlignment!=="auto"?K.pitchAlignment:this._rotationAlignment,!K||!K.element){this._defaultMarker=!0,this._element=u.create("div"),this._element.setAttribute("aria-label","Map marker");var le=u.createNS("http://www.w3.org/2000/svg","svg");le.setAttributeNS(null,"display","block"),le.setAttributeNS(null,"height","41px"),le.setAttributeNS(null,"width","27px"),le.setAttributeNS(null,"viewBox","0 0 27 41");var be=u.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"stroke","none"),be.setAttributeNS(null,"stroke-width","1"),be.setAttributeNS(null,"fill","none"),be.setAttributeNS(null,"fill-rule","evenodd");var Me=u.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"fill-rule","nonzero");var Ie=u.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ie.setAttributeNS(null,"fill","#000000");for(var Ze=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],ct=0,ht=Ze;ct<ht.length;ct+=1){var Be=ht[ct],We=u.createNS("http://www.w3.org/2000/svg","ellipse");We.setAttributeNS(null,"opacity","0.04"),We.setAttributeNS(null,"cx","10.5"),We.setAttributeNS(null,"cy","5.80029008"),We.setAttributeNS(null,"rx",Be.rx),We.setAttributeNS(null,"ry",Be.ry),Ie.appendChild(We)}var it=u.createNS("http://www.w3.org/2000/svg","g");it.setAttributeNS(null,"fill",this._color);var wt=u.createNS("http://www.w3.org/2000/svg","path");wt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),it.appendChild(wt);var pt=u.createNS("http://www.w3.org/2000/svg","g");pt.setAttributeNS(null,"opacity","0.25"),pt.setAttributeNS(null,"fill","#000000");var bt=u.createNS("http://www.w3.org/2000/svg","path");bt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),pt.appendChild(bt);var Mt=u.createNS("http://www.w3.org/2000/svg","g");Mt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Mt.setAttributeNS(null,"fill","#FFFFFF");var Dt=u.createNS("http://www.w3.org/2000/svg","g");Dt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var St=u.createNS("http://www.w3.org/2000/svg","circle");St.setAttributeNS(null,"fill","#000000"),St.setAttributeNS(null,"opacity","0.25"),St.setAttributeNS(null,"cx","5.5"),St.setAttributeNS(null,"cy","5.5"),St.setAttributeNS(null,"r","5.4999962");var Ft=u.createNS("http://www.w3.org/2000/svg","circle");Ft.setAttributeNS(null,"fill","#FFFFFF"),Ft.setAttributeNS(null,"cx","5.5"),Ft.setAttributeNS(null,"cy","5.5"),Ft.setAttributeNS(null,"r","5.4999962"),Dt.appendChild(St),Dt.appendChild(Ft),Me.appendChild(Ie),Me.appendChild(it),Me.appendChild(pt),Me.appendChild(Mt),Me.appendChild(Dt),le.appendChild(Me),this._element.appendChild(le),this._offset=a.Point.convert(K&&K.offset||[0,-14])}else this._element=K.element,this._offset=a.Point.convert(K&&K.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Lt){Lt.preventDefault()}),this._element.addEventListener("mousedown",function(Lt){Lt.preventDefault()}),this._element.addEventListener("focus",function(){var Lt=Q._map.getContainer();Lt.scrollTop=0,Lt.scrollLeft=0}),za(this._element,this._anchor,"marker"),this._popup=null}return t(N,"Marker"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.addTo=t(function(U){return this.remove(),this._map=U,U.getCanvasContainer().appendChild(this._element),U.on("move",this._update),U.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},"addTo"),N.prototype.remove=t(function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),u.remove(this._element),this._popup&&this._popup.remove(),this},"remove"),N.prototype.getLngLat=t(function(){return this._lngLat},"getLngLat"),N.prototype.setLngLat=t(function(U){return this._lngLat=a.LngLat.convert(U),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},"setLngLat"),N.prototype.getElement=t(function(){return this._element},"getElement"),N.prototype.setPopup=t(function(U){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),U){if(!("offset"in U.options)){var Q=38.1,le=13.5,be=Math.sqrt(Math.pow(le,2)/2);U.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-Q],"bottom-left":[be,(Q-le+be)*-1],"bottom-right":[-be,(Q-le+be)*-1],left:[le,(Q-le)*-1],right:[-le,(Q-le)*-1]}:this._offset}this._popup=U,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},"setPopup"),N.prototype._onKeyPress=t(function(U){var Q=U.code,le=U.charCode||U.keyCode;(Q==="Space"||Q==="Enter"||le===32||le===13)&&this.togglePopup()},"_onKeyPress"),N.prototype._onMapClick=t(function(U){var Q=U.originalEvent.target,le=this._element;this._popup&&(Q===le||le.contains(Q))&&this.togglePopup()},"_onMapClick"),N.prototype.getPopup=t(function(){return this._popup},"getPopup"),N.prototype.togglePopup=t(function(){var U=this._popup;if(U)U.isOpen()?U.remove():U.addTo(this._map);else return this;return this},"togglePopup"),N.prototype._update=t(function(U){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ja(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var Q="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?Q="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(Q="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var le="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?le="rotateX(0deg)":this._pitchAlignment==="map"&&(le="rotateX("+this._map.getPitch()+"deg)"),(!U||U.type==="moveend")&&(this._pos=this._pos.round()),u.setTransform(this._element,fn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+le+" "+Q)}},"_update"),N.prototype.getOffset=t(function(){return this._offset},"getOffset"),N.prototype.setOffset=t(function(U){return this._offset=a.Point.convert(U),this._update(),this},"setOffset"),N.prototype._onMove=t(function(U){this._pos=U.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag"))},"_onMove"),N.prototype._onUp=t(function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},"_onUp"),N.prototype._addDragHandler=t(function(U){this._element.contains(U.originalEvent.target)&&(U.preventDefault(),this._positionDelta=U.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},"_addDragHandler"),N.prototype.setDraggable=t(function(U){return this._draggable=!!U,this._map&&(U?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},"setDraggable"),N.prototype.isDraggable=t(function(){return this._draggable},"isDraggable"),N.prototype.setRotation=t(function(U){return this._rotation=U||0,this._update(),this},"setRotation"),N.prototype.getRotation=t(function(){return this._rotation},"getRotation"),N.prototype.setRotationAlignment=t(function(U){return this._rotationAlignment=U||"auto",this._update(),this},"setRotationAlignment"),N.prototype.getRotationAlignment=t(function(){return this._rotationAlignment},"getRotationAlignment"),N.prototype.setPitchAlignment=t(function(U){return this._pitchAlignment=U&&U!=="auto"?U:this._rotationAlignment,this._update(),this},"setPitchAlignment"),N.prototype.getPitchAlignment=t(function(){return this._pitchAlignment},"getPitchAlignment"),N}(a.Evented),ri={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Jn;function Po(Z){Jn!==void 0?Z(Jn):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then(function(N){Jn=N.state!=="denied",Z(Jn)}):(Jn=!!a.window.navigator.geolocation,Z(Jn))}t(Po,"checkGeolocationSupport");var Qn=0,jo=!1,Ii=function(Z){function N(K){Z.call(this),this.options=a.extend({},ri,K),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t(N,"GeolocateControl"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.onAdd=t(function(U){return this._map=U,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Po(this._setupUI),this._container},"onAdd"),N.prototype.onRemove=t(function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),u.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qn=0,jo=!1},"onRemove"),N.prototype._isOutOfMapMaxBounds=t(function(U){var Q=this._map.getMaxBounds(),le=U.coords;return Q&&(le.longitude<Q.getWest()||le.longitude>Q.getEast()||le.latitude<Q.getSouth()||le.latitude>Q.getNorth())},"_isOutOfMapMaxBounds"),N.prototype._setErrorState=t(function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},"_setErrorState"),N.prototype._onSuccess=t(function(U){if(!!this._map){if(this._isOutOfMapMaxBounds(U)){this._setErrorState(),this.fire(new a.Event("outofmaxbounds",U)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=U,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(U),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(U),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",U)),this._finish()}},"_onSuccess"),N.prototype._updateCamera=t(function(U){var Q=new a.LngLat(U.coords.longitude,U.coords.latitude),le=U.coords.accuracy,be=this._map.getBearing(),Me=a.extend({bearing:be},this.options.fitBoundsOptions);this._map.fitBounds(Q.toBounds(le),Me,{geolocateSource:!0})},"_updateCamera"),N.prototype._updateMarker=t(function(U){if(U){var Q=new a.LngLat(U.coords.longitude,U.coords.latitude);this._accuracyCircleMarker.setLngLat(Q).addTo(this._map),this._userLocationDotMarker.setLngLat(Q).addTo(this._map),this._accuracy=U.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},"_updateMarker"),N.prototype._updateCircleRadius=t(function(){var U=this._map._container.clientHeight/2,Q=this._map.unproject([0,U]),le=this._map.unproject([1,U]),be=Q.distanceTo(le),Me=Math.ceil(2*this._accuracy/be);this._circleElement.style.width=Me+"px",this._circleElement.style.height=Me+"px"},"_updateCircleRadius"),N.prototype._onZoom=t(function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},"_onZoom"),N.prototype._onError=t(function(U){if(!!this._map){if(this.options.trackUserLocation)if(U.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var Q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(U.code===3&&jo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",U)),this._finish()}},"_onError"),N.prototype._finish=t(function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},"_finish"),N.prototype._setupUI=t(function(U){var Q=this;if(this._container.addEventListener("contextmenu",function(Me){return Me.preventDefault()}),this._geolocateButton=u.create("button","mapboxgl-ctrl-geolocate",this._container),u.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",U===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var le=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=le,this._geolocateButton.setAttribute("aria-label",le)}else{var be=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=be,this._geolocateButton.setAttribute("aria-label",be)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=u.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Hn(this._dotElement),this._circleElement=u.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Hn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Me){var Ie=Me.originalEvent&&Me.originalEvent.type==="resize";!Me.geolocateSource&&Q._watchState==="ACTIVE_LOCK"&&!Ie&&(Q._watchState="BACKGROUND",Q._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),Q._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),Q.fire(new a.Event("trackuserlocationend")))})},"_setupUI"),N.prototype.trigger=t(function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qn--,jo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qn++;var U;Qn>1?(U={maximumAge:6e5,timeout:0},jo=!0):(U=this.options.positionOptions,jo=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,U)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},"trigger"),N.prototype._clearWatch=t(function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},"_clearWatch"),N}(a.Evented),Ms={maxWidth:100,unit:"metric"},Yo=t(function(N){this.options=a.extend({},Ms,N),a.bindAll(["_onMove","setUnit"],this)},"ScaleControl");Yo.prototype.getDefaultPosition=t(function(){return"bottom-left"},"getDefaultPosition"),Yo.prototype._onMove=t(function(){ks(this._map,this._container,this.options)},"_onMove"),Yo.prototype.onAdd=t(function(N){return this._map=N,this._container=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",N.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},"onAdd"),Yo.prototype.onRemove=t(function(){u.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},"onRemove"),Yo.prototype.setUnit=t(function(N){this.options.unit=N,ks(this._map,this._container,this.options)},"setUnit");function ks(Z,N,K){var U=K&&K.maxWidth||100,Q=Z._container.clientHeight/2,le=Z.unproject([0,Q]),be=Z.unproject([U,Q]),Me=le.distanceTo(be);if(K&&K.unit==="imperial"){var Ie=3.2808*Me;if(Ie>5280){var Ze=Ie/5280;Ys(N,U,Ze,Z._getUIString("ScaleControl.Miles"))}else Ys(N,U,Ie,Z._getUIString("ScaleControl.Feet"))}else if(K&&K.unit==="nautical"){var ct=Me/1852;Ys(N,U,ct,Z._getUIString("ScaleControl.NauticalMiles"))}else Me>=1e3?Ys(N,U,Me/1e3,Z._getUIString("ScaleControl.Kilometers")):Ys(N,U,Me,Z._getUIString("ScaleControl.Meters"))}t(ks,"updateScale");function Ys(Z,N,K,U){var Q=as(K),le=Q/K;Z.style.width=N*le+"px",Z.innerHTML=Q+"&nbsp;"+U}t(Ys,"setScale");function rs(Z){var N=Math.pow(10,Math.ceil(-Math.log(Z)/Math.LN10));return Math.round(Z*N)/N}t(rs,"getDecimalRoundNum");function as(Z){var N=Math.pow(10,(""+Math.floor(Z)).length-1),K=Z/N;return K=K>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:rs(K),N*K}t(as,"getRoundNum");var _n=t(function(N){this._fullscreen=!1,N&&N.container&&(N.container instanceof a.window.HTMLElement?this._container=N.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")},"FullscreenControl");_n.prototype.onAdd=t(function(N){return this._map=N,this._container||(this._container=this._map.getContainer()),this._controlContainer=u.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},"onAdd"),_n.prototype.onRemove=t(function(){u.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},"onRemove"),_n.prototype._checkFullscreenSupport=t(function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},"_checkFullscreenSupport"),_n.prototype._setupUI=t(function(){var N=this._fullscreenButton=u.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);u.create("span","mapboxgl-ctrl-icon",N).setAttribute("aria-hidden",!0),N.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},"_setupUI"),_n.prototype._updateTitle=t(function(){var N=this._getTitle();this._fullscreenButton.setAttribute("aria-label",N),this._fullscreenButton.title=N},"_updateTitle"),_n.prototype._getTitle=t(function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},"_getTitle"),_n.prototype._isFullscreen=t(function(){return this._fullscreen},"_isFullscreen"),_n.prototype._changeIcon=t(function(){var N=a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement;N===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},"_changeIcon"),_n.prototype._onClickFullscreen=t(function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()},"_onClickFullscreen");var kl={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},zi=function(Z){function N(K){Z.call(this),this.options=a.extend(Object.create(kl),K),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return t(N,"Popup"),Z&&(N.__proto__=Z),N.prototype=Object.create(Z&&Z.prototype),N.prototype.constructor=N,N.prototype.addTo=t(function(U){return this._map&&this.remove(),this._map=U,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},"addTo"),N.prototype.isOpen=t(function(){return!!this._map},"isOpen"),N.prototype.remove=t(function(){return this._content&&u.remove(this._content),this._container&&(u.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},"remove"),N.prototype.getLngLat=t(function(){return this._lngLat},"getLngLat"),N.prototype.setLngLat=t(function(U){return this._lngLat=a.LngLat.convert(U),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},"setLngLat"),N.prototype.trackPointer=t(function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},"trackPointer"),N.prototype.getElement=t(function(){return this._container},"getElement"),N.prototype.setText=t(function(U){return this.setDOMContent(a.window.document.createTextNode(U))},"setText"),N.prototype.setHTML=t(function(U){var Q=a.window.document.createDocumentFragment(),le=a.window.document.createElement("body"),be;for(le.innerHTML=U;be=le.firstChild,!!be;)Q.appendChild(be);return this.setDOMContent(Q)},"setHTML"),N.prototype.getMaxWidth=t(function(){return this._container&&this._container.style.maxWidth},"getMaxWidth"),N.prototype.setMaxWidth=t(function(U){return this.options.maxWidth=U,this._update(),this},"setMaxWidth"),N.prototype.setDOMContent=t(function(U){return this._createContent(),this._content.appendChild(U),this._update(),this},"setDOMContent"),N.prototype.addClassName=t(function(U){this._container&&this._container.classList.add(U)},"addClassName"),N.prototype.removeClassName=t(function(U){this._container&&this._container.classList.remove(U)},"removeClassName"),N.prototype.toggleClassName=t(function(U){if(this._container)return this._container.classList.toggle(U)},"toggleClassName"),N.prototype._createContent=t(function(){this._content&&u.remove(this._content),this._content=u.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=u.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},"_createContent"),N.prototype._onMouseUp=t(function(U){this._update(U.point)},"_onMouseUp"),N.prototype._onMouseMove=t(function(U){this._update(U.point)},"_onMouseMove"),N.prototype._onDrag=t(function(U){this._update(U.point)},"_onDrag"),N.prototype._update=t(function(U){var Q=this,le=this._lngLat||this._trackPointer;if(!(!this._map||!le||!this._content)&&(this._container||(this._container=u.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=u.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(We){return Q._container.classList.add(We)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ja(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!U))){var be=this._pos=this._trackPointer&&U?U:this._map.project(this._lngLat),Me=this.options.anchor,Ie=Wo(this.options.offset);if(!Me){var Ze=this._container.offsetWidth,ct=this._container.offsetHeight,ht;be.y+Ie.bottom.y<ct?ht=["top"]:be.y>this._map.transform.height-ct?ht=["bottom"]:ht=[],be.x<Ze/2?ht.push("left"):be.x>this._map.transform.width-Ze/2&&ht.push("right"),ht.length===0?Me="bottom":Me=ht.join("-")}var Be=be.add(Ie[Me]).round();u.setTransform(this._container,fn[Me]+" translate("+Be.x+"px,"+Be.y+"px)"),za(this._container,Me,"popup")}},"_update"),N.prototype._onClose=t(function(){this.remove()},"_onClose"),N}(a.Evented);function Wo(Z){if(Z)if(typeof Z=="number"){var N=Math.round(Math.sqrt(.5*Math.pow(Z,2)));return{center:new a.Point(0,0),top:new a.Point(0,Z),"top-left":new a.Point(N,N),"top-right":new a.Point(-N,N),bottom:new a.Point(0,-Z),"bottom-left":new a.Point(N,-N),"bottom-right":new a.Point(-N,-N),left:new a.Point(Z,0),right:new a.Point(-Z,0)}}else if(Z instanceof a.Point||Array.isArray(Z)){var K=a.Point.convert(Z);return{center:K,top:K,"top-left":K,"top-right":K,bottom:K,"bottom-left":K,"bottom-right":K,left:K,right:K}}else return{center:a.Point.convert(Z.center||[0,0]),top:a.Point.convert(Z.top||[0,0]),"top-left":a.Point.convert(Z["top-left"]||[0,0]),"top-right":a.Point.convert(Z["top-right"]||[0,0]),bottom:a.Point.convert(Z.bottom||[0,0]),"bottom-left":a.Point.convert(Z["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(Z["bottom-right"]||[0,0]),left:a.Point.convert(Z.left||[0,0]),right:a.Point.convert(Z.right||[0,0])};else return Wo(new a.Point(0,0))}t(Wo,"normalizeOffset");var Ws={version:a.version,supported:l,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Or,NavigationControl:tn,GeolocateControl:Ii,AttributionControl:ra,ScaleControl:Yo,FullscreenControl:_n,Popup:zi,Marker:Hn,Style:Au,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:xr,clearPrewarmedResources:Lr,get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(Z){a.config.ACCESS_TOKEN=Z},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(Z){a.config.API_URL=Z},get workerCount(){return Ot.workerCount},set workerCount(Z){Ot.workerCount=Z},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(Z){a.config.MAX_PARALLEL_IMAGE_REQUESTS=Z},clearStorage:t(function(N){a.clearTileCache(N)},"clearStorage"),workerUrl:""};return Ws}),s})}(fD)),fD.exports}t(ype,"requireMapboxGlUnminified");var cD,Fte;function $Be(){if(Fte)return cD;Fte=1;var e=Nt.exports,r=Ji.sanitizeHTML,n=gpe(),i=Ap();function s(f,h){this.subplot=f,this.uid=f.uid+"-"+h,this.index=h,this.idSource="source-"+this.uid,this.idLayer=i.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}t(s,"MapboxLayer");var o=s.prototype;o.update=t(function(h){this.visible?this.needsNewImage(h)?this.updateImage(h):this.needsNewSource(h)?(this.removeLayer(),this.updateSource(h),this.updateLayer(h)):this.needsNewLayer(h)?this.updateLayer(h):this.updateStyle(h):(this.updateSource(h),this.updateLayer(h)),this.visible=a(h)},"update"),o.needsNewImage=function(f){var h=this.subplot.map;return h.getSource(this.idSource)&&this.sourceType==="image"&&f.sourcetype==="image"&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},o.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},o.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},o.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},o.updateImage=function(f){var h=this.subplot.map;h.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var v=this.findFollowingMapboxLayerId(this.lookupBelow());v!==null&&this.subplot.map.moveLayer(this.idLayer,v)},o.updateSource=function(f){var h=this.subplot.map;if(h.getSource(this.idSource)&&h.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,!!a(f)){var v=u(f);h.addSource(this.idSource,v)}},o.findFollowingMapboxLayerId=function(f){if(f==="traces")for(var h=this.subplot.getMapLayers(),v=0;v<h.length;v++){var c=h[v].id;if(typeof c=="string"&&c.indexOf(i.traceLayerPrefix)===0){f=c;break}}return f},o.updateLayer=function(f){var h=this.subplot,v=l(f),c=this.lookupBelow(),d=this.findFollowingMapboxLayerId(c);this.removeLayer(),a(f)&&h.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:v.layout,paint:v.paint},d),this.layerType=f.type,this.below=c},o.updateStyle=function(f){if(a(f)){var h=l(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",h.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",h.paint)}},o.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},o.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)};function a(f){if(!f.visible)return!1;var h=f.source;if(Array.isArray(h)&&h.length>0){for(var v=0;v<h.length;v++)if(typeof h[v]!="string"||h[v].length===0)return!1;return!0}return e.isPlainObject(h)||typeof h=="string"&&h.length>0}t(a,"isVisible");function l(f){var h={},v={};switch(f.type){case"circle":e.extendFlat(v,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":e.extendFlat(v,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":e.extendFlat(v,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var c=f.symbol,d=n(c.textposition,c.iconsize);e.extendFlat(h,{"icon-image":c.icon+"-15","icon-size":c.iconsize/10,"text-field":c.text,"text-size":c.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":c.placement}),e.extendFlat(v,{"icon-color":f.color,"text-color":c.textfont.color,"text-opacity":f.opacity});break;case"raster":e.extendFlat(v,{"raster-fade-duration":0,"raster-opacity":f.opacity});break}return{layout:h,paint:v}}t(l,"convertOpts");function u(f){var h=f.sourcetype,v=f.source,c={type:h},d;return h==="geojson"?d="data":h==="vector"?d=typeof v=="string"?"url":"tiles":h==="raster"?(d="tiles",c.tileSize=256):h==="image"&&(d="url",c.coordinates=f.coordinates),c[d]=v,f.sourceattribution&&(c.attribution=r(f.sourceattribution)),c}return t(u,"convertSourceOpts"),cD=t(function(h,v,c){var d=new s(h,v);return d.update(c),d},"createMapboxLayer"),cD}t($Be,"requireLayers");var hD,Bte;function VBe(){if(Bte)return hD;Bte=1;var e=ype(),r=Nt.exports,n=wx(),i=Na,s=nn(),o=xu.exports,a=Ko,l=Rh,u=l.drawMode,f=l.selectMode,h=Qs.prepSelect,v=Qs.clearOutline,c=Qs.clearSelectionsCache,d=Qs.selectOnClick,g=Ap(),p=$Be();function b(w,x){this.id=x,this.gd=w;var A=w._fullLayout,S=w._context;this.container=A._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=A._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(A),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}t(b,"Mapbox");var m=b.prototype;m.plot=function(w,x,A){var S=this,k=x[S.id];S.map&&k.accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]);var L;S.map?L=new Promise(function(P,D){S.updateMap(w,x,P,D)}):L=new Promise(function(P,D){S.createMap(w,x,P,D)}),A.push(L)},m.createMap=function(w,x,A,S){var k=this,L=x[k.id],P=k.styleObj=T(L.style);k.accessToken=L.accesstoken;var D=L.bounds,B=D?[[D.west,D.south],[D.east,D.north]]:null,z=k.map=new e.Map({container:k.div,style:P.style,center:M(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:B,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new e.AttributionControl({compact:!0}));z._canvas.style.left="0px",z._canvas.style.top="0px",k.rejectOnError(S),k.isStatic||k.initFx(w,x);var R=[];R.push(new Promise(function(F){z.once("load",F)})),R=R.concat(n.fetchTraceGeoData(w)),Promise.all(R).then(function(){k.fillBelowLookup(w,x),k.updateData(w),k.updateLayout(x),k.resolveOnRender(A)}).catch(S)},m.updateMap=function(w,x,A,S){var k=this,L=k.map,P=x[this.id];k.rejectOnError(S);var D=[],B=T(P.style);JSON.stringify(k.styleObj)!==JSON.stringify(B)&&(k.styleObj=B,L.setStyle(B.style),k.traceHash={},D.push(new Promise(function(z){L.once("styledata",z)}))),D=D.concat(n.fetchTraceGeoData(w)),Promise.all(D).then(function(){k.fillBelowLookup(w,x),k.updateData(w),k.updateLayout(x),k.resolveOnRender(A)}).catch(S)},m.fillBelowLookup=function(w,x){var A=x[this.id],S=A.layers,k,L,P=this.belowLookup={},D=!1;for(k=0;k<w.length;k++){var B=w[k][0].trace,z=B._module;typeof B.below=="string"?L=B.below:z.getBelow&&(L=z.getBelow(B,this)),L===""&&(D=!0),P["trace-"+B.uid]=L||""}for(k=0;k<S.length;k++){var R=S[k];typeof R.below=="string"?L=R.below:D?L="traces":L="",P["layout-"+k]=L}var F={},O,q;for(O in P)L=P[O],F[L]?F[L].push(O):F[L]=[O];for(L in F){var H=F[L];if(H.length>1)for(k=0;k<H.length;k++)O=H[k],O.indexOf("trace-")===0?(q=O.split("trace-")[1],this.traceHash[q]&&(this.traceHash[q].below=null)):O.indexOf("layout-")===0&&(q=O.split("layout-")[1],this.layerList[q]&&(this.layerList[q].below=null))}};var y={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};m.updateData=function(w){var x=this.traceHash,A,S,k,L,P=w.slice().sort(function(F,O){return y[F[0].trace.type]-y[O[0].trace.type]});for(k=0;k<P.length;k++){var D=P[k];S=D[0].trace,A=x[S.uid];var B=!1;A&&(A.type===S.type?(A.update(D),B=!0):A.dispose()),!B&&S._module&&(x[S.uid]=S._module.plot(this,D))}var z=Object.keys(x);e:for(k=0;k<z.length;k++){var R=z[k];for(L=0;L<w.length;L++)if(S=w[L][0].trace,R===S.uid)continue e;A=x[R],A.dispose(),delete x[R]}},m.updateLayout=function(w){var x=this.map,A=w[this.id];!this.dragging&&!this.wheeling&&(x.setCenter(M(A.center)),x.setZoom(A.zoom),x.setBearing(A.bearing),x.setPitch(A.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?x.scrollZoom.enable():x.scrollZoom.disable()},m.resolveOnRender=function(w){var x=this.map;x.on("render",t(function A(){x.loaded()&&(x.off("render",A),setTimeout(w,10))},"onRender"))},m.rejectOnError=function(w){var x=this.map;function A(){w(new Error(g.mapOnErrorMsg))}t(A,"handler"),x.once("error",A),x.once("style.error",A),x.once("source.error",A),x.once("tile.error",A),x.once("layer.error",A)},m.createFramework=function(w){var x=this,A=x.div=document.createElement("div");A.id=x.uid,A.style.position="absolute",x.container.appendChild(A),x.xaxis={_id:"x",c2p:function(S){return x.project(S).x}},x.yaxis={_id:"y",c2p:function(S){return x.project(S).y}},x.updateFramework(w),x.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(x.mockAxis,w)},m.initFx=function(w,x){var A=this,S=A.gd,k=A.map;k.on("moveend",function(D){if(!!A.map){var B=S._fullLayout;if(D.originalEvent||A.wheeling){var z=B[A.id];i.call("_storeDirectGUIEdit",S.layout,B._preGUI,A.getViewEdits(z));var R=A.getView();z._input.center=z.center=R.center,z._input.zoom=z.zoom=R.zoom,z._input.bearing=z.bearing=R.bearing,z._input.pitch=z.pitch=R.pitch,S.emit("plotly_relayout",A.getViewEditsWithDerived(R))}D.originalEvent&&D.originalEvent.type==="mouseup"?A.dragging=!1:A.wheeling&&(A.wheeling=!1),B._rehover&&B._rehover()}}),k.on("wheel",function(){A.wheeling=!0}),k.on("mousemove",function(D){var B=A.div.getBoundingClientRect(),z=[D.originalEvent.offsetX,D.originalEvent.offsetY];D.target.getBoundingClientRect=function(){return B},A.xaxis.p2c=function(){return k.unproject(z).lng},A.yaxis.p2c=function(){return k.unproject(z).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===A.id&&S._fullLayout[A.id]&&a.hover(S,D,A.id)},a.hover(S,D,A.id),S._fullLayout._hoversubplot=A.id});function L(){a.loneUnhover(x._hoverlayer)}t(L,"unhover"),k.on("dragstart",function(){A.dragging=!0,L()}),k.on("zoomstart",L),k.on("mouseout",function(){S._fullLayout._hoversubplot=null});function P(){var D=A.getView();S.emit("plotly_relayouting",A.getViewEditsWithDerived(D))}t(P,"emitUpdate"),k.on("drag",P),k.on("zoom",P),k.on("dblclick",function(){var D=S._fullLayout[A.id];i.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,A.getViewEdits(D));var B=A.viewInitial;k.setCenter(M(B.center)),k.setZoom(B.zoom),k.setBearing(B.bearing),k.setPitch(B.pitch);var z=A.getView();D._input.center=D.center=z.center,D._input.zoom=D.zoom=z.zoom,D._input.bearing=D.bearing=z.bearing,D._input.pitch=D.pitch=z.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",A.getViewEditsWithDerived(z))}),A.clearOutline=function(){c(A.dragOptions),v(A.dragOptions.gd)},A.onClickInPanFn=function(D){return function(B){var z=S._fullLayout.clickmode;z.indexOf("select")>-1&&d(B.originalEvent,S,[A.xaxis],[A.yaxis],A.id,D),z.indexOf("event")>-1&&a.click(S,B.originalEvent)}}},m.updateFx=function(w){var x=this,A=x.map,S=x.gd;if(x.isStatic)return;function k(B){var z=x.map.unproject(B);return[z.lng,z.lat]}t(k,"invert");var L=w.dragmode,P;P=t(function(B,z){if(z.isRect){var R=B.range={};R[x.id]=[k([z.xmin,z.ymin]),k([z.xmax,z.ymax])]}else{var F=B.lassoPoints={};F[x.id]=z.map(k)}},"fillRangeItems");var D=x.dragOptions;x.dragOptions=r.extendDeep(D||{},{dragmode:w.dragmode,element:x.div,gd:S,plotinfo:{id:x.id,domain:w[x.id].domain,xaxis:x.xaxis,yaxis:x.yaxis,fillRangeItems:P},xaxes:[x.xaxis],yaxes:[x.yaxis],subplot:x.id}),A.off("click",x.onClickInPanHandler),f(L)||u(L)?(A.dragPan.disable(),A.on("zoomstart",x.clearSelect),x.dragOptions.prepFn=function(B,z,R){h(B,z,R,x.dragOptions,L)},o.init(x.dragOptions)):(A.dragPan.enable(),A.off("zoomstart",x.clearSelect),x.div.onmousedown=null,x.div.ontouchstart=null,x.div.removeEventListener("touchstart",x.div._ontouchstart),x.onClickInPanHandler=x.onClickInPanFn(x.dragOptions),A.on("click",x.onClickInPanHandler))},m.updateFramework=function(w){var x=w[this.id].domain,A=w._size,S=this.div.style;S.width=A.w*(x.x[1]-x.x[0])+"px",S.height=A.h*(x.y[1]-x.y[0])+"px",S.left=A.l+x.x[0]*A.w+"px",S.top=A.t+(1-x.y[1])*A.h+"px",this.xaxis._offset=A.l+x.x[0]*A.w,this.xaxis._length=A.w*(x.x[1]-x.x[0]),this.yaxis._offset=A.t+(1-x.y[1])*A.h,this.yaxis._length=A.h*(x.y[1]-x.y[0])},m.updateLayers=function(w){var x=w[this.id],A=x.layers,S=this.layerList,k;if(A.length!==S.length){for(k=0;k<S.length;k++)S[k].dispose();for(S=this.layerList=[],k=0;k<A.length;k++)S.push(p(this,k,A[k]))}else for(k=0;k<A.length;k++)S[k].update(A[k])},m.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},m.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},m.setOptions=function(w,x,A){for(var S in A)this.map[x](w,S,A[S])},m.getMapLayers=function(){return this.map.getStyle().layers},m.addLayer=function(w,x){var A=this.map;if(typeof x=="string"){if(x===""){A.addLayer(w,x);return}for(var S=this.getMapLayers(),k=0;k<S.length;k++)if(x===S[k].id){A.addLayer(w,x);return}r.warn(["Trying to add layer with *below* value",x,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}A.addLayer(w)},m.project=function(w){return this.map.project(new e.LngLat(w[0],w[1]))},m.getView=function(){var w=this.map,x=w.getCenter(),A=x.lng,S=x.lat,k={lon:A,lat:S},L=w.getCanvas(),P=parseInt(L.style.width),D=parseInt(L.style.height);return{center:k,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([P,0]).toArray(),w.unproject([P,D]).toArray(),w.unproject([0,D]).toArray()]}}},m.getViewEdits=function(w){for(var x=this.id,A=["center","zoom","bearing","pitch"],S={},k=0;k<A.length;k++){var L=A[k];S[x+"."+L]=w[L]}return S},m.getViewEditsWithDerived=function(w){var x=this.id,A=this.getViewEdits(w);return A[x+"._derived"]=w._derived,A};function T(w){var x={};return r.isPlainObject(w)?(x.id=w.id,x.style=w):typeof w=="string"?(x.id=w,g.styleValuesMapbox.indexOf(w)!==-1?x.style=_(w):g.stylesNonMapbox[w]?x.style=g.stylesNonMapbox[w]:x.style=w):(x.id=g.styleValueDflt,x.style=_(g.styleValueDflt)),x.transition={duration:0,delay:0},x}t(T,"getStyleObj");function _(w){return g.styleUrlPrefix+w+"-"+g.styleUrlSuffix}t(_,"convertStyleVal");function M(w){return[w.lon,w.lat]}return t(M,"convertCenter"),hD=b,hD}t(VBe,"requireMapbox$1");var vD,Ote;function GBe(){if(Ote)return vD;Ote=1;var e=Nt.exports,r=Fy(),n=mu,i=H2();vD=t(function(l,u,f){r(l,u,f,{type:"mapbox",attributes:i,handleDefaults:s,partition:"y",accessToken:u._mapboxAccessToken})},"supplyLayoutDefaults");function s(a,l,u,f){u("accesstoken",f.accessToken),u("style"),u("center.lon"),u("center.lat"),u("zoom"),u("bearing"),u("pitch");var h=u("bounds.west"),v=u("bounds.east"),c=u("bounds.south"),d=u("bounds.north");(h===void 0||v===void 0||c===void 0||d===void 0)&&delete l.bounds,n(a,l,{name:"layers",handleItemDefaults:o}),l._input=a}t(s,"handleDefaults");function o(a,l){function u(g,p){return e.coerce(a,l,i.layers,g,p)}t(u,"coerce");var f=u("visible");if(f){var h=u("sourcetype"),v=h==="raster"||h==="image";u("source"),u("sourceattribution"),h==="vector"&&u("sourcelayer"),h==="image"&&u("coordinates");var c;v&&(c="raster");var d=u("type",c);v&&d!=="raster"&&(d=l.type="raster",e.log("Source types *raster* and *image* must drawn *raster* layer type.")),u("below"),u("color"),u("opacity"),u("minzoom"),u("maxzoom"),d==="circle"&&u("circle.radius"),d==="line"&&(u("line.width"),u("line.dash")),d==="fill"&&u("fill.outlinecolor"),d==="symbol"&&(u("symbol.icon"),u("symbol.iconsize"),u("symbol.text"),e.coerceFont(u,"symbol.textfont"),u("symbol.textposition"),u("symbol.placement"))}}return t(o,"handleLayerDefaults"),vD}t(GBe,"requireLayout_defaults$3");var Nte;function hB(){if(Nte)return Vu;Nte=1;var e=ype(),r=Nt.exports,n=r.strTranslate,i=r.strScale,s=Ns.getSubplotCalcData,o=ic,a=Va.exports,l=bn.exports,u=Ji,f=VBe(),h="mapbox",v=Vu.constants=Ap();Vu.name=h,Vu.attr="subplot",Vu.idRoot=h,Vu.idRegex=Vu.attrRegex=r.counterRegex(h),Vu.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc",description:["Sets a reference between this trace's data coordinates and","a mapbox subplot.","If *mapbox* (the default value), the data refer to `layout.mapbox`.","If *mapbox2*, the data refer to `layout.mapbox2`, and so on."].join(" ")}},Vu.layoutAttributes=H2(),Vu.supplyLayoutDefaults=GBe(),Vu.plot=t(function(p){var b=p._fullLayout,m=p.calcdata,y=b._subplots[h];if(e.version!==v.requiredVersion)throw new Error(v.wrongVersionErrorMsg);var T=c(p,y);e.accessToken=T;for(var _=0;_<y.length;_++){var M=y[_],w=s(m,h,M),x=b[M],A=x._subplot;A||(A=new f(p,M),b[M]._subplot=A),A.viewInitial||(A.viewInitial={center:r.extendFlat({},x.center),zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),A.plot(w,b,p._promises)}},"plot"),Vu.clean=function(g,p,b,m){for(var y=m._subplots[h]||[],T=0;T<y.length;T++){var _=y[T];!p[_]&&!!m[_]._subplot&&m[_]._subplot.destroy()}},Vu.toSVG=function(g){for(var p=g._fullLayout,b=p._subplots[h],m=p._size,y=0;y<b.length;y++){var T=p[b[y]],_=T.domain,M=T._subplot,w=M.toImage("png"),x=p._glimages.append("svg:image");x.attr({xmlns:o.svg,"xlink:href":w,x:m.l+m.w*_.x[0],y:m.t+m.h*(1-_.y[1]),width:m.w*(_.x[1]-_.x[0]),height:m.h*(_.y[1]-_.y[0]),preserveAspectRatio:"none"});var A=a.select(T._subplot.div),S=A.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!S){var k=p._glimages.append("g");k.attr("transform",n(m.l+m.w*_.x[0]+10,m.t+m.h*(1-_.y[0])-31)),k.append("path").attr("d",v.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),k.append("path").attr("d",v.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),k.append("path").attr("d",v.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),k.append("polygon").attr("points",v.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var L=A.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=p._glimages.append("g"),D=P.append("text");D.text(L).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":L});var B=l.bBox(D.node()),z=m.w*(_.x[1]-_.x[0]);if(B.width>z/2){var R=L.split("|").join("<br>");D.text(R).attr("data-unformatted",R).call(u.convertToTspans,g),B=l.bBox(D.node())}D.attr("transform",n(-3,-B.height+8)),P.insert("rect",".static-attribution").attr({x:-B.width-6,y:-B.height-3,width:B.width+6,height:B.height+3,fill:"rgba(255, 255, 255, 0.75)"});var F=1;B.width+6>z&&(F=z/(B.width+6));var O=[m.l+m.w*_.x[1],m.t+m.h*(1-_.y[0])];P.attr("transform",n(O[0],O[1])+i(F))}};function c(g,p){var b=g._fullLayout,m=g._context;if(m.mapboxAccessToken==="")return"";for(var y=[],T=[],_=!1,M=!1,w=0;w<p.length;w++){var x=b[p[w]],A=x.accesstoken;d(x.style)&&(A?r.pushUnique(y,A):(d(x._input.style)&&(r.error("Uses Mapbox map style, but did not set an access token."),_=!0),M=!0)),A&&r.pushUnique(T,A)}if(M){var S=_?v.noAccessTokenErrorMsg:v.missingStyleErrorMsg;throw r.error(S),new Error(S)}return y.length?(y.length>1&&r.warn(v.multipleTokensErrorMsg),y[0]):(T.length&&r.log(["Listed mapbox access token(s)",T.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}t(c,"findAccessToken");function d(g){return typeof g=="string"&&(v.styleValuesMapbox.indexOf(g)!==-1||g.indexOf("mapbox://")===0)}return t(d,"isMapboxStyle"),Vu.updateFx=function(g){for(var p=g._fullLayout,b=p._subplots[h],m=0;m<b.length;m++){var y=p[b[m]]._subplot;y.updateFx(p)}},Vu}t(hB,"requireMapbox");var dD,qte;function jBe(){return qte||(qte=1,dD={attributes:cB(),supplyDefaults:OBe(),colorbar:_u,formatLabels:ppe(),calc:Che(),plot:qBe(),hoverPoints:PF().hoverPoints,eventData:UBe(),selectPoints:HBe(),styleOnSelect:function(e,r){if(r){var n=r[0].trace;n._glTrace.update(r)}},moduleType:"trace",name:"scattermapbox",basePlotModule:hB(),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_mapbox",description:["The data visualized as scatter point, lines or marker symbols","on a Mapbox GL geographic map","is provided by longitude/latitude pairs in `lon` and `lat`."].join(" ")}}),dD}t(jBe,"requireScattermapbox$1");var Ute;function YBe(){return Ute||(Ute=1,function(e){e.exports=jBe()}(JP)),JP.exports}t(YBe,"requireScattermapbox");var pD={exports:{}},gD,Hte;function mpe(){if(Hte)return gD;Hte=1;var e=x3(),r=Qi,n=Un.hovertemplateAttrs,i=Ni,s=cn.extendFlat;return gD=s({locations:{valType:"data_array",editType:"calc",description:["Sets which features found in *geojson* to plot using","their feature `id` field."].join(" ")},z:{valType:"data_array",editType:"calc",description:"Sets the color values."},geojson:{valType:"any",editType:"calc",description:["Sets the GeoJSON data associated with this trace.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")},featureidkey:s({},e.featureidkey,{description:["Sets the key in GeoJSON features which is used as id to match the items","included in the `locations` array.","Support nested property, for example *properties.name*."].join(" ")}),below:{valType:"string",editType:"plot",description:["Determines if the choropleth polygons will be inserted","before the layer with the specified ID.","By default, choroplethmapbox traces are placed above the water layers.","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:e.text,hovertext:e.hovertext,marker:{line:{color:s({},e.marker.line.color,{editType:"plot"}),width:s({},e.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:s({},e.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:s({},e.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:s({},e.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:e.hoverinfo,hovertemplate:n({},{keys:["properties"]}),showlegend:s({},i.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"})),gD}t(mpe,"requireAttributes$d");var yD,$te;function WBe(){if($te)return yD;$te=1;var e=Nt.exports,r=ml,n=mpe();return yD=t(function(s,o,a,l){function u(d,g){return e.coerce(s,o,n,d,g)}t(u,"coerce");var f=u("locations"),h=u("z"),v=u("geojson");if(!e.isArrayOrTypedArray(f)||!f.length||!e.isArrayOrTypedArray(h)||!h.length||!(typeof v=="string"&&v!==""||e.isPlainObject(v))){o.visible=!1;return}u("featureidkey"),o._length=Math.min(f.length,h.length),u("below"),u("text"),u("hovertext"),u("hovertemplate");var c=u("marker.line.width");c&&u("marker.line.color"),u("marker.opacity"),r(s,o,l,u,{prefix:"",cLetter:"z"}),e.coerceSelectionMarkerOpacity(o,u)},"supplyDefaults"),yD}t(WBe,"requireDefaults$d");var mD,Vte;function Gte(){if(Vte)return mD;Vte=1;var e=xn,r=Nt.exports,n=ko,i=bn.exports,s=r3().makeBlank,o=wx();function a(u){var f=u[0].trace,h=f.visible===!0&&f._length!==0,v={layout:{visibility:"none"},paint:{}},c={layout:{visibility:"none"},paint:{}},d=f._opts={fill:v,line:c,geojson:s()};if(!h)return d;var g=o.extractTraceFeature(u);if(!g)return d;var p=n.makeColorScaleFuncFromTrace(f),b=f.marker,m=b.line||{},y;r.isArrayOrTypedArray(b.opacity)&&(y=t(function(k){var L=k.mo;return e(L)?+r.constrain(L,0,1):0},"opacityFn"));var T;r.isArrayOrTypedArray(m.color)&&(T=t(function(k){return k.mlc},"lineColorFn"));var _;r.isArrayOrTypedArray(m.width)&&(_=t(function(k){return k.mlw},"lineWidthFn"));for(var M=0;M<u.length;M++){var w=u[M],x=w.fOut;if(x){var A=x.properties;A.fc=p(w.z),y&&(A.mo=y(w)),T&&(A.mlc=T(w)),_&&(A.mlw=_(w)),w.ct=A.ct,w._polygons=o.feature2polygons(x)}}var S=y?{type:"identity",property:"mo"}:b.opacity;return r.extendFlat(v.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),r.extendFlat(c.paint,{"line-color":T?{type:"identity",property:"mlc"}:m.color,"line-width":_?{type:"identity",property:"mlw"}:m.width,"line-opacity":S}),v.layout.visibility="visible",c.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:g},l(u),d}t(a,"convert");function l(u){var f=u[0].trace,h=f._opts,v;if(f.selectedpoints){for(var c=i.makeSelectedPointStyleFns(f),d=0;d<u.length;d++){var g=u[d];g.fOut&&(g.fOut.properties.mo2=c.selectedOpacityFn(g))}v={type:"identity",property:"mo2"}}else v=r.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return r.extendFlat(h.fill.paint,{"fill-opacity":v}),r.extendFlat(h.line.paint,{"line-opacity":v}),h}return t(l,"convertOnSelect"),mD={convert:a,convertOnSelect:l},mD}t(Gte,"requireConvert$1");var xD,jte;function XBe(){if(jte)return xD;jte=1;var e=Gte().convert,r=Gte().convertOnSelect,n=Ap().traceLayerPrefix;function i(o,a){this.type="choroplethmapbox",this.subplot=o,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",n+a+"-fill"],["line",n+a+"-line"]],this.below=null}t(i,"ChoroplethMapbox");var s=i.prototype;return s.update=function(o){this._update(e(o))},s.updateOnSelect=function(o){this._update(r(o))},s._update=function(o){var a=this.subplot,l=this.layerList,u=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(o.geojson),u!==this.below&&(this._removeLayers(),this._addLayers(o,u),this.below=u);for(var f=0;f<l.length;f++){var h=l[f],v=h[0],c=h[1],d=o[v];a.setOptions(c,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&a.setOptions(c,"setPaintProperty",d.paint)}},s._addLayers=function(o,a){for(var l=this.subplot,u=this.layerList,f=this.sourceId,h=0;h<u.length;h++){var v=u[h],c=v[0],d=o[c];l.addLayer({type:c,id:v[1],source:f,layout:d.layout,paint:d.paint},a)}},s._removeLayers=function(){for(var o=this.subplot.map,a=this.layerList,l=a.length-1;l>=0;l--)o.removeLayer(a[l][1])},s.dispose=function(){var o=this.subplot.map;this._removeLayers(),o.removeSource(this.sourceId)},xD=t(function(a,l){var u=l[0].trace,f=new i(a,u.uid),h=f.sourceId,v=e(l),c=f.below=a.belowLookup["trace-"+u.uid];return a.map.addSource(h,{type:"geojson",data:v.geojson}),f._addLayers(v,c),l[0].trace._glTrace=f,f},"createChoroplethMapbox"),xD}t(XBe,"requirePlot$c");var bD,Yte;function ZBe(){return Yte||(Yte=1,bD={attributes:mpe(),supplyDefaults:WBe(),colorbar:zy(),calc:Tde(),plot:XBe(),hoverPoints:Ade(),eventData:Sde(),selectPoints:Mde(),styleOnSelect:function(e,r){if(r){var n=r[0].trace;n._glTrace.updateOnSelect(r)}},getBelow:function(e,r){for(var n=r.getMapLayers(),i=n.length-2;i>=0;i--){var s=n[i].id;if(typeof s=="string"&&s.indexOf("water")===0){for(var o=i+1;o<n.length;o++)if(s=n[o].id,typeof s=="string"&&s.indexOf("plotly-")===-1)return s}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:hB(),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox",description:["GeoJSON features to be filled are set in `geojson`","The data that describes the choropleth value-to-color mapping","is set in `locations` and `z`."].join(" ")}}),bD}t(ZBe,"requireChoroplethmapbox$1");var Wte;function KBe(){return Wte||(Wte=1,function(e){e.exports=ZBe()}(pD)),pD.exports}t(KBe,"requireChoroplethmapbox");var _D={exports:{}},wD,Xte;function xpe(){if(Xte)return wD;Xte=1;var e=Qi,r=Un.hovertemplateAttrs,n=Ni,i=cB(),s=cn.extendFlat;return wD=s({lon:i.lon,lat:i.lat,z:{valType:"data_array",editType:"calc",description:["Sets the points' weight.","For example, a value of 10 would be equivalent to having 10 points of weight 1","in the same spot"].join(" ")},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30,description:["Sets the radius of influence of one `lon` / `lat` point in pixels.","Increasing the value makes the densitymapbox trace smoother, but less detailed."].join(" ")},below:{valType:"string",editType:"plot",description:["Determines if the densitymapbox trace will be inserted","before the layer with the specified ID.","By default, densitymapbox traces are placed below the first","layer of type symbol","If set to '',","the layer will be inserted above every existing layer."].join(" ")},text:i.text,hovertext:i.hovertext,hoverinfo:s({},n.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:r(),showlegend:s({},n.showlegend,{dflt:!1})},e("",{cLetter:"z",editTypeOverride:"calc"})),wD}t(xpe,"requireAttributes$c");var TD,Zte;function JBe(){if(Zte)return TD;Zte=1;var e=Nt.exports,r=ml,n=xpe();return TD=t(function(s,o,a,l){function u(c,d){return e.coerce(s,o,n,c,d)}t(u,"coerce");var f=u("lon")||[],h=u("lat")||[],v=Math.min(f.length,h.length);if(!v){o.visible=!1;return}o._length=v,u("z"),u("radius"),u("below"),u("text"),u("hovertext"),u("hovertemplate"),r(s,o,l,u,{prefix:"",cLetter:"z"})},"supplyDefaults"),TD}t(JBe,"requireDefaults$c");var AD,Kte;function QBe(){if(Kte)return AD;Kte=1;var e=xn,r=Nt.exports.isArrayOrTypedArray,n=jn.BADNUM,i=Lf,s=Nt.exports._;return AD=t(function(a,l){for(var u=l._length,f=new Array(u),h=l.z,v=r(h)&&h.length,c=0;c<u;c++){var d=f[c]={},g=l.lon[c],p=l.lat[c];if(d.lonlat=e(g)&&e(p)?[+g,+p]:[n,n],v){var b=h[c];d.z=e(b)?b:n}}return i(a,l,{vals:v?h:[0,1],containerStr:"",cLetter:"z"}),u&&(f[0].t={labels:{lat:s(a,"lat:")+" ",lon:s(a,"lon:")+" "}}),f},"calc"),AD}t(QBe,"requireCalc$c");var SD,Jte;function eOe(){if(Jte)return SD;Jte=1;var e=xn,r=Nt.exports,n=$a.exports,i=ko,s=jn.BADNUM,o=r3().makeBlank;return SD=t(function(l){var u=l[0].trace,f=u.visible===!0&&u._length!==0,h={layout:{visibility:"none"},paint:{}},v=u._opts={heatmap:h,geojson:o()};if(!f)return v;var c=[],d,g=u.z,p=u.radius,b=r.isArrayOrTypedArray(g)&&g.length,m=r.isArrayOrTypedArray(p);for(d=0;d<l.length;d++){var y=l[d],T=y.lonlat;if(T[0]!==s){var _={};if(b){var M=y.z;_.z=M!==s?M:0}m&&(_.r=e(p[d])&&p[d]>0?+p[d]:0),c.push({type:"Feature",geometry:{type:"Point",coordinates:T},properties:_})}}var w=i.extractOpts(u),x=w.reversescale?i.flipScale(w.colorscale):w.colorscale,A=x[0][1],S=n.opacity(A)<1?A:n.addOpacity(A,0),k=["interpolate",["linear"],["heatmap-density"],0,S];for(d=1;d<x.length;d++)k.push(x[d][0],x[d][1]);var L=["interpolate",["linear"],["get","z"],w.min,0,w.max,1];return r.extendFlat(v.heatmap.paint,{"heatmap-weight":b?L:1/(w.max-w.min),"heatmap-color":k,"heatmap-radius":m?{type:"identity",property:"r"}:u.radius,"heatmap-opacity":u.opacity}),v.geojson={type:"FeatureCollection",features:c},v.heatmap.layout.visibility="visible",v},"convert"),SD}t(eOe,"requireConvert");var MD,Qte;function tOe(){if(Qte)return MD;Qte=1;var e=eOe(),r=Ap().traceLayerPrefix;function n(s,o){this.type="densitymapbox",this.subplot=s,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",r+o+"-heatmap"]],this.below=null}t(n,"DensityMapbox");var i=n.prototype;return i.update=function(s){var o=this.subplot,a=this.layerList,l=e(s),u=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(l.geojson),u!==this.below&&(this._removeLayers(),this._addLayers(l,u),this.below=u);for(var f=0;f<a.length;f++){var h=a[f],v=h[0],c=h[1],d=l[v];o.setOptions(c,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&o.setOptions(c,"setPaintProperty",d.paint)}},i._addLayers=function(s,o){for(var a=this.subplot,l=this.layerList,u=this.sourceId,f=0;f<l.length;f++){var h=l[f],v=h[0],c=s[v];a.addLayer({type:v,id:h[1],source:u,layout:c.layout,paint:c.paint},o)}},i._removeLayers=function(){for(var s=this.subplot.map,o=this.layerList,a=o.length-1;a>=0;a--)s.removeLayer(o[a][1])},i.dispose=function(){var s=this.subplot.map;this._removeLayers(),s.removeSource(this.sourceId)},MD=t(function(o,a){var l=a[0].trace,u=new n(o,l.uid),f=u.sourceId,h=e(a),v=u.below=o.belowLookup["trace-"+l.uid];return o.map.addSource(f,{type:"geojson",data:h.geojson}),u._addLayers(h,v),u},"createDensityMapbox"),MD}t(tOe,"requirePlot$b");var kD,ere;function rOe(){if(ere)return kD;ere=1;var e=nn(),r=PF().hoverPoints,n=PF().getExtraText;return kD=t(function(s,o,a){var l=r(s,o,a);if(!!l){var u=l[0],f=u.cd,h=f[0].trace,v=f[u.index];if(delete u.color,"z"in v){var c=u.subplot.mockAxis;u.z=v.z,u.zLabel=e.tickText(c,c.c2l(v.z),"hover").text}return u.extraText=n(h,v,f[0].t.labels),[u]}},"hoverPoints"),kD}t(rOe,"requireHover$6");var ED,tre;function aOe(){return tre||(tre=1,ED=t(function(r,n){return r.lon=n.lon,r.lat=n.lat,r.z=n.z,r},"eventData")),ED}t(aOe,"requireEvent_data$1");var CD,rre;function nOe(){return rre||(rre=1,CD={attributes:xpe(),supplyDefaults:JBe(),colorbar:zy(),formatLabels:ppe(),calc:QBe(),plot:tOe(),hoverPoints:rOe(),eventData:aOe(),getBelow:function(e,r){for(var n=r.getMapLayers(),i=0;i<n.length;i++){var s=n[i],o=s.id;if(s.type==="symbol"&&typeof o=="string"&&o.indexOf("plotly-")===-1)return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:hB(),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox",description:["Draws a bivariate kernel density estimation with a Gaussian kernel","from `lon` and `lat` coordinates and optional `z` values using a colorscale."].join(" ")}}),CD}t(nOe,"requireDensitymapbox$1");var are;function iOe(){return are||(are=1,function(e){e.exports=nOe()}(_D)),_D.exports}t(iOe,"requireDensitymapbox");var LD={exports:{}},RD={exports:{}},nre;function bpe(){if(nre)return RD.exports;nre=1;var e=Ho,r=Ni,n=Fo,i=X1,s=vo.attributes,o=Un.hovertemplateAttrs,a=Qi,l=ei.templatedArray,u=Vo.descriptionOnlyNumbers,f=cn.extendFlat,h=_o.overrideAll,v=RD.exports=h({hoverinfo:f({},r.hoverinfo,{flags:[],arrayOk:!1,description:["Determines which trace information appear on hover.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired.","Note that this attribute is superseded by `node.hoverinfo` and `node.hoverinfo`","for nodes and links respectively."].join(" ")}),hoverlabel:i.hoverlabel,domain:s({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h",description:"Sets the orientation of the Sankey diagram."},valueformat:{valType:"string",dflt:".3s",description:u("value")},valuesuffix:{valType:"string",dflt:"",description:["Adds a unit to follow the value in the hover tooltip. Add a space if a separation","is necessary from the value."].join(" ")},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap",description:["If value is `snap` (the default), the node arrangement is assisted by automatic snapping of elements to","preserve space between nodes specified via `nodepad`.","If value is `perpendicular`, the nodes can only move along a line perpendicular to the flow.","If value is `freeform`, the nodes can freely move on the plane.","If value is `fixed`, the nodes are stationary."].join(" ")},textfont:e({description:"Sets the font for node labels"}),customdata:void 0,node:{label:{valType:"data_array",dflt:[],description:"The shown name of the node."},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"},description:["Groups of nodes.","Each group is defined by an array with the indices of the nodes it contains.","Multiple groups can be specified."].join(" ")},x:{valType:"data_array",dflt:[],description:"The normalized horizontal position of the node."},y:{valType:"data_array",dflt:[],description:"The normalized vertical position of the node."},color:{valType:"color",arrayOk:!0,description:["Sets the `node` color. It can be a single value, or an array for specifying color for each `node`.","If `node.color` is omitted, then the default `Plotly` color palette will be cycled through","to have a variety of colors. These defaults are not fully opaque, to allow some visibility of","what is beneath the node."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data to each node."].join(" ")},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0,description:["Sets the color of the `line` around each `node`."].join(" ")},width:{valType:"number",min:0,dflt:.5,arrayOk:!0,description:["Sets the width (in px) of the `line` around each `node`."].join(" ")}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20,description:"Sets the padding (in px) between the `nodes`."},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20,description:"Sets the thickness (in px) of the `nodes`."},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all",description:["Determines which trace information appear when hovering nodes.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:i.hoverlabel,hovertemplate:o({},{description:"Variables `sourceLinks` and `targetLinks` are arrays of link objects.",keys:["value","label"]}),description:"The nodes of the Sankey plot."},link:{arrowlen:{valType:"number",min:0,dflt:0,description:["Sets the length (in px) of the links arrow, if 0 no arrow will be drawn."].join(" ")},label:{valType:"data_array",dflt:[],description:"The shown name of the link."},color:{valType:"color",arrayOk:!0,description:["Sets the `link` color. It can be a single value, or an array for specifying color for each `link`.","If `link.color` is omitted, then by default, a translucent grey link will be used."].join(" ")},customdata:{valType:"data_array",editType:"calc",description:["Assigns extra data to each link."].join(" ")},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0,description:["Sets the color of the `line` around each `link`."].join(" ")},width:{valType:"number",min:0,dflt:0,arrayOk:!0,description:["Sets the width (in px) of the `line` around each `link`."].join(" ")}},source:{valType:"data_array",dflt:[],description:"An integer number `[0..nodes.length - 1]` that represents the source node."},target:{valType:"data_array",dflt:[],description:"An integer number `[0..nodes.length - 1]` that represents the target node."},value:{valType:"data_array",dflt:[],description:"A numeric value representing the flow volume value."},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all",description:["Determines which trace information appear when hovering links.","If `none` or `skip` are set, no information is displayed upon hovering.","But, if `none` is set, click and hover events are still fired."].join(" ")},hoverlabel:i.hoverlabel,hovertemplate:o({},{description:"Variables `source` and `target` are node objects.",keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",description:"The label of the links to color based on their concentration within a flow.",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1,description:"Sets the upper bound of the color domain."},cmin:{valType:"number",editType:"calc",dflt:0,description:"Sets the lower bound of the color domain."},colorscale:f(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})}),description:"The links of the Sankey plot."}},"calc","nested");return v.transforms=void 0,RD.exports}t(bpe,"requireAttributes$b");var PD,ire;function oOe(){if(ire)return PD;ire=1;var e=Nt.exports,r=bpe(),n=$a.exports,i=rl.exports,s=vo.defaults,o=mw,a=ei,l=mu;PD=t(function(h,v,c,d){function g(k,L){return e.coerce(h,v,r,k,L)}t(g,"coerce");var p=e.extendDeep(d.hoverlabel,h.hoverlabel),b=h.node,m=a.newContainer(v,"node");function y(k,L){return e.coerce(b,m,r.node,k,L)}t(y,"coerceNode"),y("label"),y("groups"),y("x"),y("y"),y("pad"),y("thickness"),y("line.color"),y("line.width"),y("hoverinfo",h.hoverinfo),o(b,m,y,p),y("hovertemplate");var T=d.colorway,_=t(function(k){return T[k%T.length]},"defaultNodePalette");y("color",m.label.map(function(k,L){return n.addOpacity(_(L),.8)})),y("customdata");var M=h.link||{},w=a.newContainer(v,"link");function x(k,L){return e.coerce(M,w,r.link,k,L)}t(x,"coerceLink"),x("label"),x("arrowlen"),x("source"),x("target"),x("value"),x("line.color"),x("line.width"),x("hoverinfo",h.hoverinfo),o(M,w,x,p),x("hovertemplate");var A=i(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";x("color",e.repeat(A,w.value.length)),x("customdata"),l(M,w,{name:"colorscales",handleItemDefaults:u}),s(v,d,g),g("orientation"),g("valueformat"),g("valuesuffix");var S;m.x.length&&m.y.length&&(S="freeform"),g("arrangement",S),e.coerceFont(g,"textfont",e.extendFlat({},d.font)),v._length=null},"supplyDefaults");function u(f,h){function v(c,d){return e.coerce(f,h,r.link.colorscales,c,d)}t(v,"coerce"),v("label"),v("cmin"),v("cmax"),v("colorscale")}return t(u,"concentrationscalesDefaults"),PD}t(oOe,"requireDefaults$b");var DD,ore;function _pe(){if(ore)return DD;ore=1,DD=e;function e(r){for(var n=r.length,i=new Array(n),s=new Array(n),o=new Array(n),a=new Array(n),l=new Array(n),u=new Array(n),f=0;f<n;++f)i[f]=-1,s[f]=0,o[f]=!1,a[f]=0,l[f]=-1,u[f]=[];var h=0,v=[],c=[];function d(m){var y=[m],T=[m];for(i[m]=s[m]=h,o[m]=!0,h+=1;T.length>0;){m=T[T.length-1];var _=r[m];if(a[m]<_.length){for(var M=a[m];M<_.length;++M){var w=_[M];if(i[w]<0){i[w]=s[w]=h,o[w]=!0,h+=1,y.push(w),T.push(w);break}else o[w]&&(s[m]=Math.min(s[m],s[w])|0);l[w]>=0&&u[m].push(l[w])}a[m]=M}else{if(s[m]===i[m]){for(var x=[],A=[],S=0,M=y.length-1;M>=0;--M){var k=y[M];if(o[k]=!1,x.push(k),A.push(u[k]),S+=u[k].length,l[k]=v.length,k===m){y.length=M;break}}v.push(x);for(var L=new Array(S),M=0;M<A.length;M++)for(var P=0;P<A[M].length;P++)L[--S]=A[M][P];c.push(L)}T.pop()}}}t(d,"strongConnect");for(var f=0;f<n;++f)i[f]<0&&d(f);for(var g,f=0;f<c.length;f++){var p=c[f];if(p.length!==0){p.sort(function(y,T){return y-T}),g=[p[0]];for(var b=1;b<p.length;b++)p[b]!==p[b-1]&&g.push(p[b]);c[f]=g}}return{components:v,adjacencyList:c}}return t(e,"stronglyConnectedComponents"),DD}t(_pe,"requireScc");var ID,sre;function sOe(){if(sre)return ID;sre=1;var e=_pe(),r=Nt.exports,n=cd().wrap,i=r.isArrayOrTypedArray,s=r.isIndex,o=ko;function a(u){var f=u.node,h=u.link,v=[],c=i(h.color),d=i(h.customdata),g={},p={},b=h.colorscales.length,m;for(m=0;m<b;m++){var y=h.colorscales[m],T=o.extractScale(y,{cLetter:"c"}),_=o.makeColorScaleFunc(T);p[y.label]=_}var M=0;for(m=0;m<h.value.length;m++)h.source[m]>M&&(M=h.source[m]),h.target[m]>M&&(M=h.target[m]);var w=M+1;u.node._count=w;var x,A=u.node.groups,S={};for(m=0;m<A.length;m++){var k=A[m];for(x=0;x<k.length;x++){var L=k[x],P=w+m;S.hasOwnProperty(L)?r.warn("Node "+L+" is already part of a group."):S[L]=P}}var D={source:[],target:[]};for(m=0;m<h.value.length;m++){var B=h.value[m],z=h.source[m],R=h.target[m];if(!!(B>0&&s(z,w)&&s(R,w))&&!(S.hasOwnProperty(z)&&S.hasOwnProperty(R)&&S[z]===S[R])){S.hasOwnProperty(R)&&(R=S[R]),S.hasOwnProperty(z)&&(z=S[z]),z=+z,R=+R,g[z]=g[R]=!0;var F="";h.label&&h.label[m]&&(F=h.label[m]);var O=null;F&&p.hasOwnProperty(F)&&(O=p[F]),v.push({pointNumber:m,label:F,color:c?h.color[m]:h.color,customdata:d?h.customdata[m]:h.customdata,concentrationscale:O,source:z,target:R,value:+B}),D.source.push(z),D.target.push(R)}}var q=w+A.length,H=i(f.color),j=i(f.customdata),X=[];for(m=0;m<q;m++)if(!!g[m]){var G=f.label[m];X.push({group:m>w-1,childrenNodes:[],pointNumber:m,label:G,color:H?f.color[m]:f.color,customdata:j?f.customdata[m]:f.customdata})}var $=!1;return l(q,D.source,D.target)&&($=!0),{circular:$,links:v,nodes:X,groups:A,groupLookup:S}}t(a,"convertToD3Sankey");function l(u,f,h){for(var v=r.init2dArray(u,0),c=0;c<Math.min(f.length,h.length);c++)if(r.isIndex(f[c],u)&&r.isIndex(h[c],u)){if(f[c]===h[c])return!0;v[f[c]].push(h[c])}var d=e(v);return d.components.some(function(g){return g.length>1})}return t(l,"circularityPresent"),ID=t(function(f,h){var v=a(h);return n({circular:v.circular,_nodes:v.nodes,_links:v.links,_groups:v.groups,_groupLookup:v.groupLookup})},"calc"),ID}t(sOe,"requireCalc$b");function lOe(e,r){var n;e==null&&(e=0),r==null&&(r=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=l/o-e,u=u/o-r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return t(i,"force"),i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(r=+s,i):r},i}t(lOe,"center$2");function hl(e){return function(){return e}}t(hl,"constant$3");function ip(){return(Math.random()-.5)*1e-6}t(ip,"jiggle");function uOe(e){var r=+this._x.call(null,e),n=+this._y.call(null,e);return wpe(this.cover(r,n),r,n,e)}t(uOe,"tree_add");function wpe(e,r,n,i){if(isNaN(r)||isNaN(n))return e;var s,o=e._root,a={data:i},l=e._x0,u=e._y0,f=e._x1,h=e._y1,v,c,d,g,p,b,m,y;if(!o)return e._root=a,e;for(;o.length;)if((p=r>=(v=(l+f)/2))?l=v:f=v,(b=n>=(c=(u+h)/2))?u=c:h=c,s=o,!(o=o[m=b<<1|p]))return s[m]=a,e;if(d=+e._x.call(null,o.data),g=+e._y.call(null,o.data),r===d&&n===g)return a.next=o,s?s[m]=a:e._root=a,e;do s=s?s[m]=new Array(4):e._root=new Array(4),(p=r>=(v=(l+f)/2))?l=v:f=v,(b=n>=(c=(u+h)/2))?u=c:h=c;while((m=b<<1|p)===(y=(g>=c)<<1|d>=v));return s[y]=o,s[m]=a,e}t(wpe,"add");function fOe(e){var r,n,i=e.length,s,o,a=new Array(i),l=new Array(i),u=1/0,f=1/0,h=-1/0,v=-1/0;for(n=0;n<i;++n)isNaN(s=+this._x.call(null,r=e[n]))||isNaN(o=+this._y.call(null,r))||(a[n]=s,l[n]=o,s<u&&(u=s),s>h&&(h=s),o<f&&(f=o),o>v&&(v=o));if(u>h||f>v)return this;for(this.cover(u,f).cover(h,v),n=0;n<i;++n)wpe(this,a[n],l[n],e[n]);return this}t(fOe,"addAll");function cOe(e,r){if(isNaN(e=+e)||isNaN(r=+r))return this;var n=this._x0,i=this._y0,s=this._x1,o=this._y1;if(isNaN(n))s=(n=Math.floor(e))+1,o=(i=Math.floor(r))+1;else{for(var a=s-n,l=this._root,u,f;n>e||e>=s||i>r||r>=o;)switch(f=(r<i)<<1|e<n,u=new Array(4),u[f]=l,l=u,a*=2,f){case 0:s=n+a,o=i+a;break;case 1:n=s-a,o=i+a;break;case 2:s=n+a,i=o-a;break;case 3:n=s-a,i=o-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=s,this._y1=o,this}t(cOe,"tree_cover");function hOe(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}t(hOe,"tree_data");function vOe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}t(vOe,"tree_extent");function Xu(e,r,n,i,s){this.node=e,this.x0=r,this.y0=n,this.x1=i,this.y1=s}t(Xu,"Quad");function dOe(e,r,n){var i,s=this._x0,o=this._y0,a,l,u,f,h=this._x1,v=this._y1,c=[],d=this._root,g,p;for(d&&c.push(new Xu(d,s,o,h,v)),n==null?n=1/0:(s=e-n,o=r-n,h=e+n,v=r+n,n*=n);g=c.pop();)if(!(!(d=g.node)||(a=g.x0)>h||(l=g.y0)>v||(u=g.x1)<s||(f=g.y1)<o))if(d.length){var b=(a+u)/2,m=(l+f)/2;c.push(new Xu(d[3],b,m,u,f),new Xu(d[2],a,m,b,f),new Xu(d[1],b,l,u,m),new Xu(d[0],a,l,b,m)),(p=(r>=m)<<1|e>=b)&&(g=c[c.length-1],c[c.length-1]=c[c.length-1-p],c[c.length-1-p]=g)}else{var y=e-+this._x.call(null,d.data),T=r-+this._y.call(null,d.data),_=y*y+T*T;if(_<n){var M=Math.sqrt(n=_);s=e-M,o=r-M,h=e+M,v=r+M,i=d.data}}return i}t(dOe,"tree_find");function pOe(e){if(isNaN(h=+this._x.call(null,e))||isNaN(v=+this._y.call(null,e)))return this;var r,n=this._root,i,s,o,a=this._x0,l=this._y0,u=this._x1,f=this._y1,h,v,c,d,g,p,b,m;if(!n)return this;if(n.length)for(;;){if((g=h>=(c=(a+u)/2))?a=c:u=c,(p=v>=(d=(l+f)/2))?l=d:f=d,r=n,!(n=n[b=p<<1|g]))return this;if(!n.length)break;(r[b+1&3]||r[b+2&3]||r[b+3&3])&&(i=r,m=b)}for(;n.data!==e;)if(s=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,s?(o?s.next=o:delete s.next,this):r?(o?r[b]=o:delete r[b],(n=r[0]||r[1]||r[2]||r[3])&&n===(r[3]||r[2]||r[1]||r[0])&&!n.length&&(i?i[m]=n:this._root=n),this):(this._root=o,this)}t(pOe,"tree_remove");function gOe(e){for(var r=0,n=e.length;r<n;++r)this.remove(e[r]);return this}t(gOe,"removeAll");function yOe(){return this._root}t(yOe,"tree_root");function mOe(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}t(mOe,"tree_size");function xOe(e){var r=[],n,i=this._root,s,o,a,l,u;for(i&&r.push(new Xu(i,this._x0,this._y0,this._x1,this._y1));n=r.pop();)if(!e(i=n.node,o=n.x0,a=n.y0,l=n.x1,u=n.y1)&&i.length){var f=(o+l)/2,h=(a+u)/2;(s=i[3])&&r.push(new Xu(s,f,h,l,u)),(s=i[2])&&r.push(new Xu(s,o,h,f,u)),(s=i[1])&&r.push(new Xu(s,f,a,l,h)),(s=i[0])&&r.push(new Xu(s,o,a,f,h))}return this}t(xOe,"tree_visit");function bOe(e){var r=[],n=[],i;for(this._root&&r.push(new Xu(this._root,this._x0,this._y0,this._x1,this._y1));i=r.pop();){var s=i.node;if(s.length){var o,a=i.x0,l=i.y0,u=i.x1,f=i.y1,h=(a+u)/2,v=(l+f)/2;(o=s[0])&&r.push(new Xu(o,a,l,h,v)),(o=s[1])&&r.push(new Xu(o,h,l,u,v)),(o=s[2])&&r.push(new Xu(o,a,v,h,f)),(o=s[3])&&r.push(new Xu(o,h,v,u,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}t(bOe,"tree_visitAfter");function _Oe(e){return e[0]}t(_Oe,"defaultX");function wOe(e){return arguments.length?(this._x=e,this):this._x}t(wOe,"tree_x");function TOe(e){return e[1]}t(TOe,"defaultY");function AOe(e){return arguments.length?(this._y=e,this):this._y}t(AOe,"tree_y");function vB(e,r,n){var i=new dB(r==null?_Oe:r,n==null?TOe:n,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}t(vB,"quadtree");function dB(e,r,n,i,s,o){this._x=e,this._y=r,this._x0=n,this._y0=i,this._x1=s,this._y1=o,this._root=void 0}t(dB,"Quadtree");function lre(e){for(var r={data:e.data},n=r;e=e.next;)n=n.next={data:e.data};return r}t(lre,"leaf_copy");var ef=vB.prototype=dB.prototype;ef.copy=function(){var e=new dB(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,n,i;if(!r)return e;if(!r.length)return e._root=lre(r),e;for(n=[{source:r,target:e._root=new Array(4)}];r=n.pop();)for(var s=0;s<4;++s)(i=r.source[s])&&(i.length?n.push({source:i,target:r.target[s]=new Array(4)}):r.target[s]=lre(i));return e};ef.add=uOe;ef.addAll=fOe;ef.cover=cOe;ef.data=hOe;ef.extent=vOe;ef.find=dOe;ef.remove=pOe;ef.removeAll=gOe;ef.root=yOe;ef.size=mOe;ef.visit=xOe;ef.visitAfter=bOe;ef.x=wOe;ef.y=AOe;function SOe(e){return e.x+e.vx}t(SOe,"x$3");function MOe(e){return e.y+e.vy}t(MOe,"y$3");function kOe(e){var r,n,i=1,s=1;typeof e!="function"&&(e=hl(e==null?1:+e));function o(){for(var u,f=r.length,h,v,c,d,g,p,b=0;b<s;++b)for(h=vB(r,SOe,MOe).visitAfter(a),u=0;u<f;++u)v=r[u],g=n[v.index],p=g*g,c=v.x+v.vx,d=v.y+v.vy,h.visit(m);function m(y,T,_,M,w){var x=y.data,A=y.r,S=g+A;if(x){if(x.index>v.index){var k=c-x.x-x.vx,L=d-x.y-x.vy,P=k*k+L*L;P<S*S&&(k===0&&(k=ip(),P+=k*k),L===0&&(L=ip(),P+=L*L),P=(S-(P=Math.sqrt(P)))/P*i,v.vx+=(k*=P)*(S=(A*=A)/(p+A)),v.vy+=(L*=P)*S,x.vx-=k*(S=1-S),x.vy-=L*S)}return}return T>c+S||M<c-S||_>d+S||w<d-S}t(m,"apply")}t(o,"force");function a(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}t(a,"prepare");function l(){if(!!r){var u,f=r.length,h;for(n=new Array(f),u=0;u<f;++u)h=r[u],n[h.index]=+e(h,u,r)}}return t(l,"initialize"),o.initialize=function(u){r=u,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:hl(+u),l(),o):e},o}t(kOe,"collide");var Rc="$";function $2(){}t($2,"Map");$2.prototype=Sp.prototype={constructor:$2,has:function(e){return Rc+e in this},get:function(e){return this[Rc+e]},set:function(e,r){return this[Rc+e]=r,this},remove:function(e){var r=Rc+e;return r in this&&delete this[r]},clear:function(){for(var e in this)e[0]===Rc&&delete this[e]},keys:function(){var e=[];for(var r in this)r[0]===Rc&&e.push(r.slice(1));return e},values:function(){var e=[];for(var r in this)r[0]===Rc&&e.push(this[r]);return e},entries:function(){var e=[];for(var r in this)r[0]===Rc&&e.push({key:r.slice(1),value:this[r]});return e},size:function(){var e=0;for(var r in this)r[0]===Rc&&++e;return e},empty:function(){for(var e in this)if(e[0]===Rc)return!1;return!0},each:function(e){for(var r in this)r[0]===Rc&&e(this[r],r.slice(1),this)}};function Sp(e,r){var n=new $2;if(e instanceof $2)e.each(function(l,u){n.set(u,l)});else if(Array.isArray(e)){var i=-1,s=e.length,o;if(r==null)for(;++i<s;)n.set(i,e[i]);else for(;++i<s;)n.set(r(o=e[i],i,e),o)}else if(e)for(var a in e)n.set(a,e[a]);return n}t(Sp,"map");function Tpe(){var e=[],r=[],n,i,s;function o(l,u,f,h){if(u>=e.length)return n!=null&&l.sort(n),i!=null?i(l):l;for(var v=-1,c=l.length,d=e[u++],g,p,b=Sp(),m,y=f();++v<c;)(m=b.get(g=d(p=l[v])+""))?m.push(p):b.set(g,[p]);return b.each(function(T,_){h(y,_,o(T,u,f,h))}),y}t(o,"apply");function a(l,u){if(++u>e.length)return l;var f,h=r[u-1];return i!=null&&u>=e.length?f=l.entries():(f=[],l.each(function(v,c){f.push({key:c,values:a(v,u)})})),h!=null?f.sort(function(v,c){return h(v.key,c.key)}):f}return t(a,"entries"),s={object:function(l){return o(l,0,EOe,COe)},map:function(l){return o(l,0,ure,fre)},entries:function(l){return a(o(l,0,ure,fre),0)},key:function(l){return e.push(l),s},sortKeys:function(l){return r[e.length-1]=l,s},sortValues:function(l){return n=l,s},rollup:function(l){return i=l,s}}}t(Tpe,"nest");function EOe(){return{}}t(EOe,"createObject");function COe(e,r,n){e[r]=n}t(COe,"setObject");function ure(){return Sp()}t(ure,"createMap");function fre(e,r,n){e.set(r,n)}t(fre,"setMap");function cre(){}t(cre,"Set");var Jp=Sp.prototype;cre.prototype={constructor:cre,has:Jp.has,add:function(e){return e+="",this[Rc+e]=e,this},remove:Jp.remove,clear:Jp.clear,values:Jp.keys,size:Jp.size,empty:Jp.empty,each:Jp.each};function LOe(e){return e.index}t(LOe,"index");function hre(e,r){var n=e.get(r);if(!n)throw new Error("missing: "+r);return n}t(hre,"find$2");function ROe(e){var r=LOe,n=h,i,s=hl(30),o,a,l,u,f=1;e==null&&(e=[]);function h(p){return 1/Math.min(l[p.source.index],l[p.target.index])}t(h,"defaultStrength");function v(p){for(var b=0,m=e.length;b<f;++b)for(var y=0,T,_,M,w,x,A,S;y<m;++y)T=e[y],_=T.source,M=T.target,w=M.x+M.vx-_.x-_.vx||ip(),x=M.y+M.vy-_.y-_.vy||ip(),A=Math.sqrt(w*w+x*x),A=(A-o[y])/A*p*i[y],w*=A,x*=A,M.vx-=w*(S=u[y]),M.vy-=x*S,_.vx+=w*(S=1-S),_.vy+=x*S}t(v,"force");function c(){if(!!a){var p,b=a.length,m=e.length,y=Sp(a,r),T;for(p=0,l=new Array(b);p<m;++p)T=e[p],T.index=p,typeof T.source!="object"&&(T.source=hre(y,T.source)),typeof T.target!="object"&&(T.target=hre(y,T.target)),l[T.source.index]=(l[T.source.index]||0)+1,l[T.target.index]=(l[T.target.index]||0)+1;for(p=0,u=new Array(m);p<m;++p)T=e[p],u[p]=l[T.source.index]/(l[T.source.index]+l[T.target.index]);i=new Array(m),d(),o=new Array(m),g()}}t(c,"initialize");function d(){if(!!a)for(var p=0,b=e.length;p<b;++p)i[p]=+n(e[p],p,e)}t(d,"initializeStrength");function g(){if(!!a)for(var p=0,b=e.length;p<b;++p)o[p]=+s(e[p],p,e)}return t(g,"initializeDistance"),v.initialize=function(p){a=p,c()},v.links=function(p){return arguments.length?(e=p,c(),v):e},v.id=function(p){return arguments.length?(r=p,v):r},v.iterations=function(p){return arguments.length?(f=+p,v):f},v.strength=function(p){return arguments.length?(n=typeof p=="function"?p:hl(+p),d(),v):n},v.distance=function(p){return arguments.length?(s=typeof p=="function"?p:hl(+p),g(),v):s},v}t(ROe,"link$1");var POe={value:function(){}};function Ape(){for(var e=0,r=arguments.length,n={},i;e<r;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new k_(n)}t(Ape,"dispatch");function k_(e){this._=e}t(k_,"Dispatch");function DOe(e,r){return e.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}t(DOe,"parseTypenames");k_.prototype=Ape.prototype={constructor:k_,on:function(e,r){var n=this._,i=DOe(e+"",n),s,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((s=(e=i[o]).type)&&(s=IOe(n[s],e.name)))return s;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++o<a;)if(s=(e=i[o]).type)n[s]=vre(n[s],e.name,r);else if(r==null)for(s in n)n[s]=vre(n[s],e.name,null);return this},copy:function(){var e={},r=this._;for(var n in r)e[n]=r[n].slice();return new k_(e)},call:function(e,r){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,o;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,s=o.length;i<s;++i)o[i].value.apply(r,n)},apply:function(e,r,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,o=i.length;s<o;++s)i[s].value.apply(r,n)}};function IOe(e,r){for(var n=0,i=e.length,s;n<i;++n)if((s=e[n]).name===r)return s.value}t(IOe,"get");function vre(e,r,n){for(var i=0,s=e.length;i<s;++i)if(e[i].name===r){e[i]=POe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:r,value:n}),e}t(vre,"set");var my=0,a1=0,Gm=0,Spe=1e3,V2,n1,G2=0,_0=0,S3=0,G1=typeof performance=="object"&&performance.now?performance:Date,Mpe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kpe(){return _0||(Mpe(zOe),_0=G1.now()+S3)}t(kpe,"now");function zOe(){_0=0}t(zOe,"clearNow");function DF(){this._call=this._time=this._next=null}t(DF,"Timer");DF.prototype=Epe.prototype={constructor:DF,restart:function(e,r,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?kpe():+n)+(r==null?0:+r),!this._next&&n1!==this&&(n1?n1._next=this:V2=this,n1=this),this._call=e,this._time=n,IF()},stop:function(){this._call&&(this._call=null,this._time=1/0,IF())}};function Epe(e,r,n){var i=new DF;return i.restart(e,r,n),i}t(Epe,"timer");function FOe(){kpe(),++my;for(var e=V2,r;e;)(r=_0-e._time)>=0&&e._call.call(null,r),e=e._next;--my}t(FOe,"timerFlush");function dre(){_0=(G2=G1.now())+S3,my=a1=0;try{FOe()}finally{my=0,OOe(),_0=0}}t(dre,"wake");function BOe(){var e=G1.now(),r=e-G2;r>Spe&&(S3-=r,G2=e)}t(BOe,"poke");function OOe(){for(var e,r=V2,n,i=1/0;r;)r._call?(i>r._time&&(i=r._time),e=r,r=r._next):(n=r._next,r._next=null,r=e?e._next=n:V2=n);n1=e,IF(i)}t(OOe,"nap");function IF(e){if(!my){a1&&(a1=clearTimeout(a1));var r=e-_0;r>24?(e<1/0&&(a1=setTimeout(dre,e-G1.now()-S3)),Gm&&(Gm=clearInterval(Gm))):(Gm||(G2=G1.now(),Gm=setInterval(BOe,Spe)),my=1,Mpe(dre))}}t(IF,"sleep");function NOe(e){return e.x}t(NOe,"x$2");function qOe(e){return e.y}t(qOe,"y$2");var UOe=10,HOe=Math.PI*(3-Math.sqrt(5));function $Oe(e){var r,n=1,i=.001,s=1-Math.pow(i,1/300),o=0,a=.6,l=Sp(),u=Epe(h),f=Ape("tick","end");e==null&&(e=[]);function h(){v(),f.call("tick",r),n<i&&(u.stop(),f.call("end",r))}t(h,"step");function v(g){var p,b=e.length,m;g===void 0&&(g=1);for(var y=0;y<g;++y)for(n+=(o-n)*s,l.each(function(T){T(n)}),p=0;p<b;++p)m=e[p],m.fx==null?m.x+=m.vx*=a:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=a:(m.y=m.fy,m.vy=0);return r}t(v,"tick");function c(){for(var g=0,p=e.length,b;g<p;++g){if(b=e[g],b.index=g,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var m=UOe*Math.sqrt(g),y=g*HOe;b.x=m*Math.cos(y),b.y=m*Math.sin(y)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}t(c,"initializeNodes");function d(g){return g.initialize&&g.initialize(e),g}return t(d,"initializeForce"),c(),r={tick:v,restart:function(){return u.restart(h),r},stop:function(){return u.stop(),r},nodes:function(g){return arguments.length?(e=g,c(),l.each(d),r):e},alpha:function(g){return arguments.length?(n=+g,r):n},alphaMin:function(g){return arguments.length?(i=+g,r):i},alphaDecay:function(g){return arguments.length?(s=+g,r):+s},alphaTarget:function(g){return arguments.length?(o=+g,r):o},velocityDecay:function(g){return arguments.length?(a=1-g,r):1-a},force:function(g,p){return arguments.length>1?(p==null?l.remove(g):l.set(g,d(p)),r):l.get(g)},find:function(g,p,b){var m=0,y=e.length,T,_,M,w,x;for(b==null?b=1/0:b*=b,m=0;m<y;++m)w=e[m],T=g-w.x,_=p-w.y,M=T*T+_*_,M<b&&(x=w,b=M);return x},on:function(g,p){return arguments.length>1?(f.on(g,p),r):f.on(g)}}}t($Oe,"simulation");function VOe(){var e,r,n,i=hl(-30),s,o=1,a=1/0,l=.81;function u(c){var d,g=e.length,p=vB(e,NOe,qOe).visitAfter(h);for(n=c,d=0;d<g;++d)r=e[d],p.visit(v)}t(u,"force");function f(){if(!!e){var c,d=e.length,g;for(s=new Array(d),c=0;c<d;++c)g=e[c],s[g.index]=+i(g,c,e)}}t(f,"initialize");function h(c){var d=0,g,p,b=0,m,y,T;if(c.length){for(m=y=T=0;T<4;++T)(g=c[T])&&(p=Math.abs(g.value))&&(d+=g.value,b+=p,m+=p*g.x,y+=p*g.y);c.x=m/b,c.y=y/b}else{g=c,g.x=g.data.x,g.y=g.data.y;do d+=s[g.data.index];while(g=g.next)}c.value=d}t(h,"accumulate");function v(c,d,g,p){if(!c.value)return!0;var b=c.x-r.x,m=c.y-r.y,y=p-d,T=b*b+m*m;if(y*y/l<T)return T<a&&(b===0&&(b=ip(),T+=b*b),m===0&&(m=ip(),T+=m*m),T<o&&(T=Math.sqrt(o*T)),r.vx+=b*c.value*n/T,r.vy+=m*c.value*n/T),!0;if(c.length||T>=a)return;(c.data!==r||c.next)&&(b===0&&(b=ip(),T+=b*b),m===0&&(m=ip(),T+=m*m),T<o&&(T=Math.sqrt(o*T)));do c.data!==r&&(y=s[c.data.index]*n/T,r.vx+=b*y,r.vy+=m*y);while(c=c.next)}return t(v,"apply"),u.initialize=function(c){e=c,f()},u.strength=function(c){return arguments.length?(i=typeof c=="function"?c:hl(+c),f(),u):i},u.distanceMin=function(c){return arguments.length?(o=c*c,u):Math.sqrt(o)},u.distanceMax=function(c){return arguments.length?(a=c*c,u):Math.sqrt(a)},u.theta=function(c){return arguments.length?(l=c*c,u):Math.sqrt(l)},u}t(VOe,"manyBody");function GOe(e,r,n){var i,s=hl(.1),o,a;typeof e!="function"&&(e=hl(+e)),r==null&&(r=0),n==null&&(n=0);function l(f){for(var h=0,v=i.length;h<v;++h){var c=i[h],d=c.x-r||1e-6,g=c.y-n||1e-6,p=Math.sqrt(d*d+g*g),b=(a[h]-p)*o[h]*f/p;c.vx+=d*b,c.vy+=g*b}}t(l,"force");function u(){if(!!i){var f,h=i.length;for(o=new Array(h),a=new Array(h),f=0;f<h;++f)a[f]=+e(i[f],f,i),o[f]=isNaN(a[f])?0:+s(i[f],f,i)}}return t(u,"initialize"),l.initialize=function(f){i=f,u()},l.strength=function(f){return arguments.length?(s=typeof f=="function"?f:hl(+f),u(),l):s},l.radius=function(f){return arguments.length?(e=typeof f=="function"?f:hl(+f),u(),l):e},l.x=function(f){return arguments.length?(r=+f,l):r},l.y=function(f){return arguments.length?(n=+f,l):n},l}t(GOe,"radial");function jOe(e){var r=hl(.1),n,i,s;typeof e!="function"&&(e=hl(e==null?0:+e));function o(l){for(var u=0,f=n.length,h;u<f;++u)h=n[u],h.vx+=(s[u]-h.x)*i[u]*l}t(o,"force");function a(){if(!!n){var l,u=n.length;for(i=new Array(u),s=new Array(u),l=0;l<u;++l)i[l]=isNaN(s[l]=+e(n[l],l,n))?0:+r(n[l],l,n)}}return t(a,"initialize"),o.initialize=function(l){n=l,a()},o.strength=function(l){return arguments.length?(r=typeof l=="function"?l:hl(+l),a(),o):r},o.x=function(l){return arguments.length?(e=typeof l=="function"?l:hl(+l),a(),o):e},o}t(jOe,"x$1");function YOe(e){var r=hl(.1),n,i,s;typeof e!="function"&&(e=hl(e==null?0:+e));function o(l){for(var u=0,f=n.length,h;u<f;++u)h=n[u],h.vy+=(s[u]-h.y)*i[u]*l}t(o,"force");function a(){if(!!n){var l,u=n.length;for(i=new Array(u),s=new Array(u),l=0;l<u;++l)i[l]=isNaN(s[l]=+e(n[l],l,n))?0:+r(n[l],l,n)}}return t(a,"initialize"),o.initialize=function(l){n=l,a()},o.strength=function(l){return arguments.length?(r=typeof l=="function"?l:hl(+l),a(),o):r},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:hl(+l),a(),o):e},o}t(YOe,"y$1");const WOe=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:lOe,forceCollide:kOe,forceLink:ROe,forceManyBody:VOe,forceRadial:GOe,forceSimulation:$Oe,forceX:jOe,forceY:YOe},Symbol.toStringTag,{value:"Module"})),XOe=Hc(WOe);function ZOe(e){return e.target.depth}t(ZOe,"targetDepth$1");function KOe(e){return e.depth}t(KOe,"left$1");function JOe(e,r){return r-1-e.height}t(JOe,"right$1");function Cpe(e,r){return e.sourceLinks.length?e.depth:r-1}t(Cpe,"justify$1");function QOe(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?Hy(e.sourceLinks,ZOe)-1:0}t(QOe,"center$1");function r_(e){return function(){return e}}t(r_,"constant$2");function eNe(e,r){return pB(e.source,r.source)||e.index-r.index}t(eNe,"ascendingSourceBreadth$1");function tNe(e,r){return pB(e.target,r.target)||e.index-r.index}t(tNe,"ascendingTargetBreadth$1");function pB(e,r){return e.y0-r.y0}t(pB,"ascendingBreadth$1");function jm(e){return e.value}t(jm,"value$1");function j2(e){return(e.y0+e.y1)/2}t(j2,"nodeCenter$1");function rNe(e){return j2(e.source)*e.value}t(rNe,"weightedSource");function aNe(e){return j2(e.target)*e.value}t(aNe,"weightedTarget");function nNe(e){return e.index}t(nNe,"defaultId$1");function iNe(e){return e.nodes}t(iNe,"defaultNodes$1");function oNe(e){return e.links}t(oNe,"defaultLinks$1");function pre(e,r){var n=e.get(r);if(!n)throw new Error("missing: "+r);return n}t(pre,"find$1");function sNe(){var e=0,r=0,n=1,i=1,s=24,o=8,a=nNe,l=Cpe,u=iNe,f=oNe,h=32,v=2/3;function c(){var y={nodes:u.apply(null,arguments),links:f.apply(null,arguments)};return d(y),g(y),p(y),b(y),m(y),y}t(c,"sankey"),c.update=function(y){return m(y),y},c.nodeId=function(y){return arguments.length?(a=typeof y=="function"?y:r_(y),c):a},c.nodeAlign=function(y){return arguments.length?(l=typeof y=="function"?y:r_(y),c):l},c.nodeWidth=function(y){return arguments.length?(s=+y,c):s},c.nodePadding=function(y){return arguments.length?(o=+y,c):o},c.nodes=function(y){return arguments.length?(u=typeof y=="function"?y:r_(y),c):u},c.links=function(y){return arguments.length?(f=typeof y=="function"?y:r_(y),c):f},c.size=function(y){return arguments.length?(e=r=0,n=+y[0],i=+y[1],c):[n-e,i-r]},c.extent=function(y){return arguments.length?(e=+y[0][0],n=+y[1][0],r=+y[0][1],i=+y[1][1],c):[[e,r],[n,i]]},c.iterations=function(y){return arguments.length?(h=+y,c):h};function d(y){y.nodes.forEach(function(_,M){_.index=M,_.sourceLinks=[],_.targetLinks=[]});var T=Sp(y.nodes,a);y.links.forEach(function(_,M){_.index=M;var w=_.source,x=_.target;typeof w!="object"&&(w=_.source=pre(T,w)),typeof x!="object"&&(x=_.target=pre(T,x)),w.sourceLinks.push(_),x.targetLinks.push(_)})}t(d,"computeNodeLinks");function g(y){y.nodes.forEach(function(T){T.value=Math.max(tv(T.sourceLinks,jm),tv(T.targetLinks,jm))})}t(g,"computeNodeValues");function p(y){var T,_,M;for(T=y.nodes,_=[],M=0;T.length;++M,T=_,_=[])T.forEach(function(x){x.depth=M,x.sourceLinks.forEach(function(A){_.indexOf(A.target)<0&&_.push(A.target)})});for(T=y.nodes,_=[],M=0;T.length;++M,T=_,_=[])T.forEach(function(x){x.height=M,x.targetLinks.forEach(function(A){_.indexOf(A.source)<0&&_.push(A.source)})});var w=(n-e-s)/(M-1);y.nodes.forEach(function(x){x.x1=(x.x0=e+Math.max(0,Math.min(M-1,Math.floor(l.call(null,x,M))))*w)+s})}t(p,"computeNodeDepths");function b(y){var T=Tpe().key(function(k){return k.x0}).sortKeys(a3).entries(y.nodes).map(function(k){return k.values});w(),S();for(var _=1,M=h;M>0;--M)A(_*=.99),S(),x(_),S();function w(){var k=_2(T,function(D){return D.length}),L=v*(i-r)/(k-1);o>L&&(o=L);var P=Hy(T,function(D){return(i-r-(D.length-1)*o)/tv(D,jm)});T.forEach(function(D){D.forEach(function(B,z){B.y1=(B.y0=z)+B.value*P})}),y.links.forEach(function(D){D.width=D.value*P})}t(w,"initializeNodeBreadth");function x(k){T.forEach(function(L){L.forEach(function(P){if(P.targetLinks.length){var D=(tv(P.targetLinks,rNe)/tv(P.targetLinks,jm)-j2(P))*k;P.y0+=D,P.y1+=D}})})}t(x,"relaxLeftToRight");function A(k){T.slice().reverse().forEach(function(L){L.forEach(function(P){if(P.sourceLinks.length){var D=(tv(P.sourceLinks,aNe)/tv(P.sourceLinks,jm)-j2(P))*k;P.y0+=D,P.y1+=D}})})}t(A,"relaxRightToLeft");function S(){T.forEach(function(k){var L,P,D=r,B=k.length,z;for(k.sort(pB),z=0;z<B;++z)L=k[z],P=D-L.y0,P>0&&(L.y0+=P,L.y1+=P),D=L.y1+o;if(P=D-o-i,P>0)for(D=L.y0-=P,L.y1-=P,z=B-2;z>=0;--z)L=k[z],P=L.y1+o-D,P>0&&(L.y0-=P,L.y1-=P),D=L.y0})}t(S,"resolveCollisions")}t(b,"computeNodeBreadths");function m(y){y.nodes.forEach(function(T){T.sourceLinks.sort(tNe),T.targetLinks.sort(eNe)}),y.nodes.forEach(function(T){var _=T.y0,M=_;T.sourceLinks.forEach(function(w){w.y0=_+w.width/2,_+=w.width}),T.targetLinks.forEach(function(w){w.y1=M+w.width/2,M+=w.width})})}return t(m,"computeLinkBreadths"),c}t(sNe,"sankey$1");var zF=Math.PI,FF=2*zF,t0=1e-6,lNe=FF-t0;function BF(){this._x0=this._y0=this._x1=this._y1=null,this._=""}t(BF,"Path");function Lpe(){return new BF}t(Lpe,"path");BF.prototype=Lpe.prototype={constructor:BF,moveTo:function(e,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,r){this._+="L"+(this._x1=+e)+","+(this._y1=+r)},quadraticCurveTo:function(e,r,n,i){this._+="Q"+ +e+","+ +r+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,r,n,i,s,o){this._+="C"+ +e+","+ +r+","+ +n+","+ +i+","+(this._x1=+s)+","+(this._y1=+o)},arcTo:function(e,r,n,i,s){e=+e,r=+r,n=+n,i=+i,s=+s;var o=this._x1,a=this._y1,l=n-e,u=i-r,f=o-e,h=a-r,v=f*f+h*h;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=r);else if(v>t0)if(!(Math.abs(h*l-u*f)>t0)||!s)this._+="L"+(this._x1=e)+","+(this._y1=r);else{var c=n-o,d=i-a,g=l*l+u*u,p=c*c+d*d,b=Math.sqrt(g),m=Math.sqrt(v),y=s*Math.tan((zF-Math.acos((g+v-p)/(2*b*m)))/2),T=y/m,_=y/b;Math.abs(T-1)>t0&&(this._+="L"+(e+T*f)+","+(r+T*h)),this._+="A"+s+","+s+",0,0,"+ +(h*c>f*d)+","+(this._x1=e+_*l)+","+(this._y1=r+_*u)}},arc:function(e,r,n,i,s,o){e=+e,r=+r,n=+n,o=!!o;var a=n*Math.cos(i),l=n*Math.sin(i),u=e+a,f=r+l,h=1^o,v=o?i-s:s-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+f:(Math.abs(this._x1-u)>t0||Math.abs(this._y1-f)>t0)&&(this._+="L"+u+","+f),n&&(v<0&&(v=v%FF+FF),v>lNe?this._+="A"+n+","+n+",0,1,"+h+","+(e-a)+","+(r-l)+"A"+n+","+n+",0,1,"+h+","+(this._x1=u)+","+(this._y1=f):v>t0&&(this._+="A"+n+","+n+",0,"+ +(v>=zF)+","+h+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=r+n*Math.sin(s))))},rect:function(e,r,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+r)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function gre(e){return t(function(){return e},"constant")}t(gre,"constant$1");function uNe(e){return e[0]}t(uNe,"x");function fNe(e){return e[1]}t(fNe,"y");var cNe=Array.prototype.slice;function hNe(e){return e.source}t(hNe,"linkSource");function vNe(e){return e.target}t(vNe,"linkTarget");function dNe(e){var r=hNe,n=vNe,i=uNe,s=fNe,o=null;function a(){var l,u=cNe.call(arguments),f=r.apply(this,u),h=n.apply(this,u);if(o||(o=l=Lpe()),e(o,+i.apply(this,(u[0]=f,u)),+s.apply(this,u),+i.apply(this,(u[0]=h,u)),+s.apply(this,u)),l)return o=null,l+""||null}return t(a,"link"),a.source=function(l){return arguments.length?(r=l,a):r},a.target=function(l){return arguments.length?(n=l,a):n},a.x=function(l){return arguments.length?(i=typeof l=="function"?l:gre(+l),a):i},a.y=function(l){return arguments.length?(s=typeof l=="function"?l:gre(+l),a):s},a.context=function(l){return arguments.length?(o=l==null?null:l,a):o},a}t(dNe,"link");function pNe(e,r,n,i,s){e.moveTo(r,n),e.bezierCurveTo(r=(r+i)/2,n,r,s,i,s)}t(pNe,"curveHorizontal");function Rpe(){return dNe(pNe)}t(Rpe,"linkHorizontal");function gNe(e){return[e.source.x1,e.y0]}t(gNe,"horizontalSource");function yNe(e){return[e.target.x0,e.y1]}t(yNe,"horizontalTarget");function mNe(){return Rpe().source(gNe).target(yNe)}t(mNe,"sankeyLinkHorizontal");const xNe=Object.freeze(Object.defineProperty({__proto__:null,sankey:sNe,sankeyCenter:QOe,sankeyLeft:KOe,sankeyRight:JOe,sankeyJustify:Cpe,sankeyLinkHorizontal:mNe},Symbol.toStringTag,{value:"Module"})),bNe=Hc(xNe);var _Ne=_pe(),wNe=t(function(r,n){var i=[],s=[],o=[],a={},l=[],u;function f(T){o[T]=!1,a.hasOwnProperty(T)&&Object.keys(a[T]).forEach(function(_){delete a[T][_],o[_]&&f(_)})}t(f,"unblock");function h(T){var _=!1;s.push(T),o[T]=!0;var M,w;for(M=0;M<l[T].length;M++)w=l[T][M],w===u?(v(u,s),_=!0):o[w]||(_=h(w));if(_)f(T);else for(M=0;M<l[T].length;M++){w=l[T][M];var x=a[w];x||(x={},a[w]=x),x[w]=!0}return s.pop(),_}t(h,"circuit");function v(T,_){var M=[].concat(_).concat(T);n?n(M):i.push(M)}t(v,"output");function c(T){for(var _=0;_<r.length;_++)(_<T||!r[_])&&(r[_]=[]),r[_]=r[_].filter(function(M){return M>=T})}t(c,"subgraph");function d(T){c(T);for(var _=r,M=_Ne(_),w=M.components.filter(function(D){return D.length>1}),x=1/0,A,S=0;S<w.length;S++)for(var k=0;k<w[S].length;k++)w[S][k]<x&&(x=w[S][k],A=S);var L=w[A];if(!L)return!1;var P=r.map(function(D,B){return L.indexOf(B)===-1?[]:D.filter(function(z){return L.indexOf(z)!==-1})});return{leastVertex:x,adjList:P}}t(d,"adjacencyStructureSCC"),u=0;for(var g=r.length;u<g;){var p=d(u);if(u=p.leastVertex,l=p.adjList,l){for(var b=0;b<l.length;b++)for(var m=0;m<l[b].length;m++){var y=l[b][m];o[+y]=!1,a[y]={}}h(u),u=u+1}else u=g}if(!n)return i},"findCircuits");function TNe(e){return e.target.depth}t(TNe,"targetDepth");function ANe(e){return e.depth}t(ANe,"left");function SNe(e,r){return r-1-e.height}t(SNe,"right");function Ppe(e,r){return e.sourceLinks.length?e.depth:r-1}t(Ppe,"justify");function MNe(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?Hy(e.sourceLinks,TNe)-1:0}t(MNe,"center");function a_(e){return function(){return e}}t(a_,"constant");var yre=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function kNe(e,r){return gB(e.source,r.source)||e.index-r.index}t(kNe,"ascendingSourceBreadth");function ENe(e,r){return gB(e.target,r.target)||e.index-r.index}t(ENe,"ascendingTargetBreadth");function gB(e,r){return e.partOfCycle===r.partOfCycle?e.y0-r.y0:e.circularLinkType==="top"||r.circularLinkType==="bottom"?-1:1}t(gB,"ascendingBreadth");function zD(e){return e.value}t(zD,"value");function yB(e){return(e.y0+e.y1)/2}t(yB,"nodeCenter");function CNe(e){return yB(e.source)}t(CNe,"linkSourceCenter");function LNe(e){return yB(e.target)}t(LNe,"linkTargetCenter");function RNe(e){return e.index}t(RNe,"defaultId");function PNe(e){return e.nodes}t(PNe,"defaultNodes");function DNe(e){return e.links}t(DNe,"defaultLinks");function mre(e,r){var n=e.get(r);if(!n)throw new Error("missing: "+r);return n}t(mre,"find");function pu(e,r){return r(e)}t(pu,"getNodeID");var op=25,Jf=10,INe=.3;function zNe(){var e=0,r=0,n=1,i=1,s=24,o,a=RNe,l=Ppe,u=PNe,f=DNe,h=32,v=2,c,d=null;function g(){var w={nodes:u.apply(null,arguments),links:f.apply(null,arguments)};p(w),FNe(w,a,d),b(w),T(w),xre(w,a),_(w,h,a),M(w);for(var x=4,A=0;A<x;A++)FD(w,i,a),BD(w,i,a),HNe(w,r,i,a),FD(w,i,a),BD(w,i,a);return VNe(w,r,i),wre(w,v,i,a),w}t(g,"sankeyCircular"),g.nodeId=function(w){return arguments.length?(a=typeof w=="function"?w:a_(w),g):a},g.nodeAlign=function(w){return arguments.length?(l=typeof w=="function"?w:a_(w),g):l},g.nodeWidth=function(w){return arguments.length?(s=+w,g):s},g.nodePadding=function(w){return arguments.length?(o=+w,g):o},g.nodes=function(w){return arguments.length?(u=typeof w=="function"?w:a_(w),g):u},g.links=function(w){return arguments.length?(f=typeof w=="function"?w:a_(w),g):f},g.size=function(w){return arguments.length?(e=r=0,n=+w[0],i=+w[1],g):[n-e,i-r]},g.extent=function(w){return arguments.length?(e=+w[0][0],n=+w[1][0],r=+w[0][1],i=+w[1][1],g):[[e,r],[n,i]]},g.iterations=function(w){return arguments.length?(h=+w,g):h},g.circularLinkGap=function(w){return arguments.length?(v=+w,g):v},g.nodePaddingRatio=function(w){return arguments.length?(c=+w,g):c},g.sortNodes=function(w){return arguments.length?(d=w,g):d},g.update=function(w){return xre(w,a),M(w),w.links.forEach(function(x){x.circular&&(x.circularLinkType=x.y0+x.y1<i?"top":"bottom",x.source.circularLinkType=x.circularLinkType,x.target.circularLinkType=x.circularLinkType)}),FD(w,i,a,!1),BD(w,i,a),wre(w,v,i,a),w};function p(w){w.nodes.forEach(function(A,S){A.index=S,A.sourceLinks=[],A.targetLinks=[]});var x=Sp(w.nodes,a);return w.links.forEach(function(A,S){A.index=S;var k=A.source,L=A.target;(typeof k>"u"?"undefined":yre(k))!=="object"&&(k=A.source=mre(x,k)),(typeof L>"u"?"undefined":yre(L))!=="object"&&(L=A.target=mre(x,L)),k.sourceLinks.push(A),L.targetLinks.push(A)}),w}t(p,"computeNodeLinks");function b(w){w.nodes.forEach(function(x){x.partOfCycle=!1,x.value=Math.max(tv(x.sourceLinks,zD),tv(x.targetLinks,zD)),x.sourceLinks.forEach(function(A){A.circular&&(x.partOfCycle=!0,x.circularLinkType=A.circularLinkType)}),x.targetLinks.forEach(function(A){A.circular&&(x.partOfCycle=!0,x.circularLinkType=A.circularLinkType)})})}t(b,"computeNodeValues");function m(w){var x=0,A=0,S=0,k=0,L=_2(w.nodes,function(P){return P.column});return w.links.forEach(function(P){P.circular&&(P.circularLinkType=="top"?x=x+P.width:A=A+P.width,P.target.column==0&&(k=k+P.width),P.source.column==L&&(S=S+P.width))}),x=x>0?x+op+Jf:x,A=A>0?A+op+Jf:A,S=S>0?S+op+Jf:S,k=k>0?k+op+Jf:k,{top:x,bottom:A,left:k,right:S}}t(m,"getCircleMargins");function y(w,x){var A=_2(w.nodes,function(z){return z.column}),S=n-e,k=i-r,L=S+x.right+x.left,P=k+x.top+x.bottom,D=S/L,B=k/P;return e=e*D+x.left,n=x.right==0?n:n*D,r=r*B+x.top,i=i*B,w.nodes.forEach(function(z){z.x0=e+z.column*((n-e-s)/A),z.x1=z.x0+s}),B}t(y,"scaleSankeySize");function T(w){var x,A,S;for(x=w.nodes,A=[],S=0;x.length;++S,x=A,A=[])x.forEach(function(k){k.depth=S,k.sourceLinks.forEach(function(L){A.indexOf(L.target)<0&&!L.circular&&A.push(L.target)})});for(x=w.nodes,A=[],S=0;x.length;++S,x=A,A=[])x.forEach(function(k){k.height=S,k.targetLinks.forEach(function(L){A.indexOf(L.source)<0&&!L.circular&&A.push(L.source)})});w.nodes.forEach(function(k){k.column=Math.floor(l.call(null,k,S))})}t(T,"computeNodeDepths");function _(w,x,A){var S=Tpe().key(function(z){return z.column}).sortKeys(a3).entries(w.nodes).map(function(z){return z.values});P(A),B();for(var k=1,L=x;L>0;--L)D(k*=.99,A),B();function P(z){if(c){var R=1/0;S.forEach(function(H){var j=i*c/(H.length+1);R=j<R?j:R}),o=R}var F=Hy(S,function(H){return(i-r-(H.length-1)*o)/tv(H,zD)});F=F*INe,w.links.forEach(function(H){H.width=H.value*F});var O=m(w),q=y(w,O);F=F*q,w.links.forEach(function(H){H.width=H.value*F}),S.forEach(function(H){var j=H.length;H.forEach(function(X,G){X.depth==S.length-1&&j==1||X.depth==0&&j==1?(X.y0=i/2-X.value*F,X.y1=X.y0+X.value*F):X.partOfCycle?bre(X,z)==0?(X.y0=i/2+G,X.y1=X.y0+X.value*F):X.circularLinkType=="top"?(X.y0=r+G,X.y1=X.y0+X.value*F):(X.y0=i-X.value*F-G,X.y1=X.y0+X.value*F):O.top==0||O.bottom==0?(X.y0=(i-r)/j*G,X.y1=X.y0+X.value*F):(X.y0=(i-r)/2-j/2+G,X.y1=X.y0+X.value*F)})})}t(P,"initializeNodeBreadth");function D(z,R){var F=S.length;S.forEach(function(O){var q=O.length,H=O[0].depth;O.forEach(function(j){var X;if((j.sourceLinks.length||j.targetLinks.length)&&!(j.partOfCycle&&bre(j,R)>0))if(H==0&&q==1)X=j.y1-j.y0,j.y0=i/2-X/2,j.y1=i/2+X/2;else if(H==F-1&&q==1)X=j.y1-j.y0,j.y0=i/2-X/2,j.y1=i/2+X/2;else{var G=0,$=YZ(j.sourceLinks,LNe),te=YZ(j.targetLinks,CNe);$&&te?G=($+te)/2:G=$||te;var ee=(G-yB(j))*z;j.y0+=ee,j.y1+=ee}})})}t(D,"relaxLeftAndRight");function B(){S.forEach(function(z){var R,F,O=r,q=z.length,H;for(z.sort(gB),H=0;H<q;++H)R=z[H],F=O-R.y0,F>0&&(R.y0+=F,R.y1+=F),O=R.y1+o;if(F=O-o-i,F>0)for(O=R.y0-=F,R.y1-=F,H=q-2;H>=0;--H)R=z[H],F=R.y1+o-O,F>0&&(R.y0-=F,R.y1-=F),O=R.y0})}t(B,"resolveCollisions")}t(_,"computeNodeBreadths");function M(w){w.nodes.forEach(function(x){x.sourceLinks.sort(ENe),x.targetLinks.sort(kNe)}),w.nodes.forEach(function(x){var A=x.y0,S=A,k=x.y1,L=k;x.sourceLinks.forEach(function(P){P.circular?(P.y0=k-P.width/2,k=k-P.width):(P.y0=A+P.width/2,A+=P.width)}),x.targetLinks.forEach(function(P){P.circular?(P.y1=L-P.width/2,L=L-P.width):(P.y1=S+P.width/2,S+=P.width)})})}return t(M,"computeLinkBreadths"),g}t(zNe,"sankeyCircular");function FNe(e,r,n){var i=0;if(n===null){for(var s=[],o=0;o<e.links.length;o++){var a=e.links[o],l=a.source.index,u=a.target.index;s[l]||(s[l]=[]),s[u]||(s[u]=[]),s[l].indexOf(u)===-1&&s[l].push(u)}var f=wNe(s);f.sort(function(d,g){return d.length-g.length});var h={};for(o=0;o<f.length;o++){var v=f[o],c=v.slice(-2);h[c[0]]||(h[c[0]]={}),h[c[0]][c[1]]=!0}e.links.forEach(function(d){var g=d.target.index,p=d.source.index;g===p||h[p]&&h[p][g]?(d.circular=!0,d.circularLinkID=i,i=i+1):d.circular=!1})}else e.links.forEach(function(d){d.source[n]<d.target[n]?d.circular=!1:(d.circular=!0,d.circularLinkID=i,i=i+1)})}t(FNe,"identifyCircles");function xre(e,r){var n=0,i=0;e.links.forEach(function(s){s.circular&&(s.source.circularLinkType||s.target.circularLinkType?s.circularLinkType=s.source.circularLinkType?s.source.circularLinkType:s.target.circularLinkType:s.circularLinkType=n<i?"top":"bottom",s.circularLinkType=="top"?n=n+1:i=i+1,e.nodes.forEach(function(o){(pu(o,r)==pu(s.source,r)||pu(o,r)==pu(s.target,r))&&(o.circularLinkType=s.circularLinkType)}))}),e.links.forEach(function(s){s.circular&&(s.source.circularLinkType==s.target.circularLinkType&&(s.circularLinkType=s.source.circularLinkType),j1(s,r)&&(s.circularLinkType=s.source.circularLinkType))})}t(xre,"selectCircularLinkTypes");function Dpe(e){var r=Math.abs(e.y1-e.y0),n=Math.abs(e.target.x0-e.source.x1);return Math.atan(n/r)}t(Dpe,"linkAngle");function BNe(e,r){return e.source.column<r.target.column?!1:!(e.target.column>r.source.column)}t(BNe,"circularLinksCross");function bre(e,r){var n=0;e.sourceLinks.forEach(function(s){n=s.circular&&!j1(s,r)?n+1:n});var i=0;return e.targetLinks.forEach(function(s){i=s.circular&&!j1(s,r)?i+1:i}),n+i}t(bre,"numberOfNonSelfLinkingCycles");function Ipe(e){var r=e.source.sourceLinks,n=0;r.forEach(function(o){n=o.circular?n+1:n});var i=e.target.targetLinks,s=0;return i.forEach(function(o){s=o.circular?s+1:s}),!(n>1||s>1)}t(Ipe,"onlyCircularLink");function _re(e,r,n){return e.sort(NNe),e.forEach(function(i,s){var o=0;if(j1(i,n)&&Ipe(i))i.circularPathData.verticalBuffer=o+i.width/2;else{var a=0;for(a;a<s;a++)if(BNe(e[s],e[a])){var l=e[a].circularPathData.verticalBuffer+e[a].width/2+r;o=l>o?l:o}i.circularPathData.verticalBuffer=o+i.width/2}}),e}t(_re,"calcVerticalBuffer");function wre(e,r,n,i){var s=5,o=Hy(e.links,function(u){return u.source.y0});e.links.forEach(function(u){u.circular&&(u.circularPathData={})});var a=e.links.filter(function(u){return u.circularLinkType=="top"});_re(a,r,i);var l=e.links.filter(function(u){return u.circularLinkType=="bottom"});_re(l,r,i),e.links.forEach(function(u){if(u.circular){if(u.circularPathData.arcRadius=u.width+Jf,u.circularPathData.leftNodeBuffer=s,u.circularPathData.rightNodeBuffer=s,u.circularPathData.sourceWidth=u.source.x1-u.source.x0,u.circularPathData.sourceX=u.source.x0+u.circularPathData.sourceWidth,u.circularPathData.targetX=u.target.x0,u.circularPathData.sourceY=u.y0,u.circularPathData.targetY=u.y1,j1(u,i)&&Ipe(u))u.circularPathData.leftSmallArcRadius=Jf+u.width/2,u.circularPathData.leftLargeArcRadius=Jf+u.width/2,u.circularPathData.rightSmallArcRadius=Jf+u.width/2,u.circularPathData.rightLargeArcRadius=Jf+u.width/2,u.circularLinkType=="bottom"?(u.circularPathData.verticalFullExtent=u.source.y1+op+u.circularPathData.verticalBuffer,u.circularPathData.verticalLeftInnerExtent=u.circularPathData.verticalFullExtent-u.circularPathData.leftLargeArcRadius,u.circularPathData.verticalRightInnerExtent=u.circularPathData.verticalFullExtent-u.circularPathData.rightLargeArcRadius):(u.circularPathData.verticalFullExtent=u.source.y0-op-u.circularPathData.verticalBuffer,u.circularPathData.verticalLeftInnerExtent=u.circularPathData.verticalFullExtent+u.circularPathData.leftLargeArcRadius,u.circularPathData.verticalRightInnerExtent=u.circularPathData.verticalFullExtent+u.circularPathData.rightLargeArcRadius);else{var f=u.source.column,h=u.circularLinkType,v=e.links.filter(function(g){return g.source.column==f&&g.circularLinkType==h});u.circularLinkType=="bottom"?v.sort(Fpe):v.sort(zpe);var c=0;v.forEach(function(g,p){g.circularLinkID==u.circularLinkID&&(u.circularPathData.leftSmallArcRadius=Jf+u.width/2+c,u.circularPathData.leftLargeArcRadius=Jf+u.width/2+p*r+c),c=c+g.width}),f=u.target.column,v=e.links.filter(function(g){return g.target.column==f&&g.circularLinkType==h}),u.circularLinkType=="bottom"?v.sort(UNe):v.sort(qNe),c=0,v.forEach(function(g,p){g.circularLinkID==u.circularLinkID&&(u.circularPathData.rightSmallArcRadius=Jf+u.width/2+c,u.circularPathData.rightLargeArcRadius=Jf+u.width/2+p*r+c),c=c+g.width}),u.circularLinkType=="bottom"?(u.circularPathData.verticalFullExtent=Math.max(n,u.source.y1,u.target.y1)+op+u.circularPathData.verticalBuffer,u.circularPathData.verticalLeftInnerExtent=u.circularPathData.verticalFullExtent-u.circularPathData.leftLargeArcRadius,u.circularPathData.verticalRightInnerExtent=u.circularPathData.verticalFullExtent-u.circularPathData.rightLargeArcRadius):(u.circularPathData.verticalFullExtent=o-op-u.circularPathData.verticalBuffer,u.circularPathData.verticalLeftInnerExtent=u.circularPathData.verticalFullExtent+u.circularPathData.leftLargeArcRadius,u.circularPathData.verticalRightInnerExtent=u.circularPathData.verticalFullExtent+u.circularPathData.rightLargeArcRadius)}u.circularPathData.leftInnerExtent=u.circularPathData.sourceX+u.circularPathData.leftNodeBuffer,u.circularPathData.rightInnerExtent=u.circularPathData.targetX-u.circularPathData.rightNodeBuffer,u.circularPathData.leftFullExtent=u.circularPathData.sourceX+u.circularPathData.leftLargeArcRadius+u.circularPathData.leftNodeBuffer,u.circularPathData.rightFullExtent=u.circularPathData.targetX-u.circularPathData.rightLargeArcRadius-u.circularPathData.rightNodeBuffer}if(u.circular)u.path=ONe(u);else{var d=Rpe().source(function(g){var p=g.source.x0+(g.source.x1-g.source.x0),b=g.y0;return[p,b]}).target(function(g){var p=g.target.x0,b=g.y1;return[p,b]});u.path=d(u)}})}t(wre,"addCircularPathData");function ONe(e){var r="";return e.circularLinkType=="top"?r="M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 0 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY-e.circularPathData.leftSmallArcRadius)+" L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 0 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 0 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY-e.circularPathData.rightSmallArcRadius)+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 0 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" L"+e.circularPathData.targetX+" "+e.circularPathData.targetY:r="M"+e.circularPathData.sourceX+" "+e.circularPathData.sourceY+" L"+e.circularPathData.leftInnerExtent+" "+e.circularPathData.sourceY+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftSmallArcRadius+" 0 0 1 "+e.circularPathData.leftFullExtent+" "+(e.circularPathData.sourceY+e.circularPathData.leftSmallArcRadius)+" L"+e.circularPathData.leftFullExtent+" "+e.circularPathData.verticalLeftInnerExtent+" A"+e.circularPathData.leftLargeArcRadius+" "+e.circularPathData.leftLargeArcRadius+" 0 0 1 "+e.circularPathData.leftInnerExtent+" "+e.circularPathData.verticalFullExtent+" L"+e.circularPathData.rightInnerExtent+" "+e.circularPathData.verticalFullExtent+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightLargeArcRadius+" 0 0 1 "+e.circularPathData.rightFullExtent+" "+e.circularPathData.verticalRightInnerExtent+" L"+e.circularPathData.rightFullExtent+" "+(e.circularPathData.targetY+e.circularPathData.rightSmallArcRadius)+" A"+e.circularPathData.rightLargeArcRadius+" "+e.circularPathData.rightSmallArcRadius+" 0 0 1 "+e.circularPathData.rightInnerExtent+" "+e.circularPathData.targetY+" L"+e.circularPathData.targetX+" "+e.circularPathData.targetY,r}t(ONe,"createCircularPathString");function NNe(e,r){return n_(e)==n_(r)?e.circularLinkType=="bottom"?Fpe(e,r):zpe(e,r):n_(r)-n_(e)}t(NNe,"sortLinkColumnAscending");function zpe(e,r){return e.y0-r.y0}t(zpe,"sortLinkSourceYAscending");function Fpe(e,r){return r.y0-e.y0}t(Fpe,"sortLinkSourceYDescending");function qNe(e,r){return e.y1-r.y1}t(qNe,"sortLinkTargetYAscending");function UNe(e,r){return r.y1-e.y1}t(UNe,"sortLinkTargetYDescending");function n_(e){return e.target.column-e.source.column}t(n_,"linkColumnDistance");function Bpe(e){return e.target.x0-e.source.x1}t(Bpe,"linkXLength");function Tre(e,r){var n=Dpe(e),i=Bpe(r)/Math.tan(n),s=Y2(e)=="up"?e.y1+i:e.y1-i;return s}t(Tre,"linkPerpendicularYToLinkSource");function Are(e,r){var n=Dpe(e),i=Bpe(r)/Math.tan(n),s=Y2(e)=="up"?e.y1-i:e.y1+i;return s}t(Are,"linkPerpendicularYToLinkTarget");function HNe(e,r,n,i){e.links.forEach(function(s){if(!s.circular&&s.target.column-s.source.column>1){var o=s.source.column+1,a=s.target.column-1,l=1,u=a-o+1;for(l=1;o<=a;o++,l++)e.nodes.forEach(function(f){if(f.column==o){var h=l/(u+1),v=Math.pow(1-h,3),c=3*h*Math.pow(1-h,2),d=3*Math.pow(h,2)*(1-h),g=Math.pow(h,3),p=v*s.y0+c*s.y0+d*s.y1+g*s.y1,b=p-s.width/2,m=p+s.width/2,y;b>f.y0&&b<f.y1?(y=f.y1-b+10,y=f.circularLinkType=="bottom"?y:-y,f=Rg(f,y,r,n),e.nodes.forEach(function(T){pu(T,i)==pu(f,i)||T.column!=f.column||$Ne(f,T)&&Rg(T,y,r,n)})):m>f.y0&&m<f.y1?(y=m-f.y0+10,f=Rg(f,y,r,n),e.nodes.forEach(function(T){pu(T,i)==pu(f,i)||T.column!=f.column||T.y0<f.y1&&T.y1>f.y1&&Rg(T,y,r,n)})):b<f.y0&&m>f.y1&&(y=m-f.y0+10,f=Rg(f,y,r,n),e.nodes.forEach(function(T){pu(T,i)==pu(f,i)||T.column!=f.column||T.y0<f.y1&&T.y1>f.y1&&Rg(T,y,r,n)}))}})}})}t(HNe,"resolveNodeLinkOverlaps");function $Ne(e,r){return e.y0>r.y0&&e.y0<r.y1||e.y1>r.y0&&e.y1<r.y1?!0:e.y0<r.y0&&e.y1>r.y1}t($Ne,"nodesOverlap");function Rg(e,r,n,i){return e.y0+r>=n&&e.y1+r<=i&&(e.y0=e.y0+r,e.y1=e.y1+r,e.targetLinks.forEach(function(s){s.y1=s.y1+r}),e.sourceLinks.forEach(function(s){s.y0=s.y0+r})),e}t(Rg,"adjustNodeHeight");function FD(e,r,n,i){e.nodes.forEach(function(s){i&&s.y+(s.y1-s.y0)>r&&(s.y=s.y-(s.y+(s.y1-s.y0)-r));var o=e.links.filter(function(u){return pu(u.source,n)==pu(s,n)}),a=o.length;a>1&&o.sort(function(u,f){if(!u.circular&&!f.circular){if(u.target.column==f.target.column)return u.y1-f.y1;if(Ope(u,f)){if(u.target.column>f.target.column){var h=Are(f,u);return u.y1-h}if(f.target.column>u.target.column){var v=Are(u,f);return v-f.y1}}else return u.y1-f.y1}if(u.circular&&!f.circular)return u.circularLinkType=="top"?-1:1;if(f.circular&&!u.circular)return f.circularLinkType=="top"?1:-1;if(u.circular&&f.circular)return u.circularLinkType===f.circularLinkType&&u.circularLinkType=="top"?u.target.column===f.target.column?u.target.y1-f.target.y1:f.target.column-u.target.column:u.circularLinkType===f.circularLinkType&&u.circularLinkType=="bottom"?u.target.column===f.target.column?f.target.y1-u.target.y1:u.target.column-f.target.column:u.circularLinkType=="top"?-1:1});var l=s.y0;o.forEach(function(u){u.y0=l+u.width/2,l=l+u.width}),o.forEach(function(u,f){if(u.circularLinkType=="bottom"){var h=f+1,v=0;for(h;h<a;h++)v=v+o[h].width;u.y0=s.y1-v-u.width/2}})})}t(FD,"sortSourceLinks");function BD(e,r,n){e.nodes.forEach(function(i){var s=e.links.filter(function(l){return pu(l.target,n)==pu(i,n)}),o=s.length;o>1&&s.sort(function(l,u){if(!l.circular&&!u.circular){if(l.source.column==u.source.column)return l.y0-u.y0;if(Ope(l,u)){if(u.source.column<l.source.column){var f=Tre(u,l);return l.y0-f}if(l.source.column<u.source.column){var h=Tre(l,u);return h-u.y0}}else return l.y0-u.y0}if(l.circular&&!u.circular)return l.circularLinkType=="top"?-1:1;if(u.circular&&!l.circular)return u.circularLinkType=="top"?1:-1;if(l.circular&&u.circular)return l.circularLinkType===u.circularLinkType&&l.circularLinkType=="top"?l.source.column===u.source.column?l.source.y1-u.source.y1:l.source.column-u.source.column:l.circularLinkType===u.circularLinkType&&l.circularLinkType=="bottom"?l.source.column===u.source.column?l.source.y1-u.source.y1:u.source.column-l.source.column:l.circularLinkType=="top"?-1:1});var a=i.y0;s.forEach(function(l){l.y1=a+l.width/2,a=a+l.width}),s.forEach(function(l,u){if(l.circularLinkType=="bottom"){var f=u+1,h=0;for(f;f<o;f++)h=h+s[f].width;l.y1=i.y1-h-l.width/2}})})}t(BD,"sortTargetLinks");function Ope(e,r){return Y2(e)==Y2(r)}t(Ope,"sameInclines");function Y2(e){return e.y0-e.y1>0?"up":"down"}t(Y2,"incline");function j1(e,r){return pu(e.source,r)==pu(e.target,r)}t(j1,"selfLinking");function VNe(e,r,n){var i=e.nodes,s=e.links,o=!1,a=!1;if(s.forEach(function(c){c.circularLinkType=="top"?o=!0:c.circularLinkType=="bottom"&&(a=!0)}),o==!1||a==!1){var l=Hy(i,function(c){return c.y0}),u=_2(i,function(c){return c.y1}),f=u-l,h=n-r,v=h/f;i.forEach(function(c){var d=(c.y1-c.y0)*v;c.y0=(c.y0-l)*v,c.y1=c.y0+d}),s.forEach(function(c){c.y0=(c.y0-l)*v,c.y1=(c.y1-l)*v,c.width=c.width*v})}}t(VNe,"fillHeight");const GNe=Object.freeze(Object.defineProperty({__proto__:null,sankeyCircular:zNe,sankeyCenter:MNe,sankeyLeft:ANe,sankeyRight:SNe,sankeyJustify:Ppe},Symbol.toStringTag,{value:"Module"})),jNe=Hc(GNe);var OD,Sre;function Npe(){return Sre||(Sre=1,OD={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}),OD}t(Npe,"requireConstants$5");var ND,Mre;function YNe(){if(Mre)return ND;Mre=1;var e=XOe,r=fy.interpolateNumber,n=Va.exports,i=bNe,s=jNe,o=Npe(),a=rl.exports,l=$a.exports,u=bn.exports,f=Nt.exports,h=f.strTranslate,v=f.strRotate,c=cd(),d=c.keyFun,g=c.repeat,p=c.unwrap,b=Ji,m=Na,y=yl,T=y.CAP_SHIFT,_=y.LINE_SPACING,M=3;function w(se,W,ne){var he=p(W),re=he.trace,ae=re.domain,fe=re.orientation==="h",ce=re.node.pad,xe=re.node.thickness,Te=se.width*(ae.x[1]-ae.x[0]),me=se.height*(ae.y[1]-ae.y[0]),pe=he._nodes,oe=he._links,de=he.circular,ye;de?ye=s.sankeyCircular().circularLinkGap(0):ye=i.sankey(),ye.iterations(o.sankeyIterations).size(fe?[Te,me]:[me,Te]).nodeWidth(xe).nodePadding(ce).nodeId(function($t){return $t.pointNumber}).nodes(pe).links(oe);var we=ye();ye.nodePadding()<ce&&f.warn("node.pad was reduced to ",ye.nodePadding()," to fit within the figure.");var Ee,De,Fe;for(var qe in he._groupLookup){var Je=parseInt(he._groupLookup[qe]),Ge;for(Ee=0;Ee<we.nodes.length;Ee++)if(we.nodes[Ee].pointNumber===Je){Ge=we.nodes[Ee];break}if(!!Ge){var et={pointNumber:parseInt(qe),x0:Ge.x0,x1:Ge.x1,y0:Ge.y0,y1:Ge.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};we.nodes.unshift(et),Ge.childrenNodes.unshift(et)}}function Ue(){for(Ee=0;Ee<we.nodes.length;Ee++){var $t=we.nodes[Ee],Gt={},Jt,kt;for(De=0;De<$t.targetLinks.length;De++)kt=$t.targetLinks[De],Jt=kt.source.pointNumber+":"+kt.target.pointNumber,Gt.hasOwnProperty(Jt)||(Gt[Jt]=[]),Gt[Jt].push(kt);var ft=Object.keys(Gt);for(De=0;De<ft.length;De++){Jt=ft[De];var zt=Gt[Jt],Pt=0,Et={};for(Fe=0;Fe<zt.length;Fe++)kt=zt[Fe],Et[kt.label]||(Et[kt.label]=0),Et[kt.label]+=kt.value,Pt+=kt.value;for(Fe=0;Fe<zt.length;Fe++)kt=zt[Fe],kt.flow={value:Pt,labelConcentration:Et[kt.label]/Pt,concentration:kt.value/Pt,links:zt},kt.concentrationscale&&(kt.color=a(kt.concentrationscale(kt.flow.labelConcentration)))}var Wt=0;for(De=0;De<$t.sourceLinks.length;De++)Wt+=$t.sourceLinks[De].value;for(De=0;De<$t.sourceLinks.length;De++)kt=$t.sourceLinks[De],kt.concentrationOut=kt.value/Wt;var ze=0;for(De=0;De<$t.targetLinks.length;De++)ze+=$t.targetLinks[De].value;for(De=0;De<$t.targetLinks.length;De++)kt=$t.targetLinks[De],kt.concenrationIn=kt.value/ze}}t(Ue,"computeLinkConcentrations"),Ue();function Ye($t){$t.forEach(function(Gt){var Jt,kt,ft=0,zt=Gt.length,Pt;for(Gt.sort(function(Et,Wt){return Et.y0-Wt.y0}),Pt=0;Pt<zt;++Pt)Jt=Gt[Pt],Jt.y0>=ft||(kt=ft-Jt.y0,kt>1e-6&&(Jt.y0+=kt,Jt.y1+=kt)),ft=Jt.y1+ce})}t(Ye,"resolveCollisionsTopToBottom");function $e($t){var Gt=$t.map(function(Wt,ze){return{x0:Wt.x0,index:ze}}).sort(function(Wt,ze){return Wt.x0-ze.x0}),Jt=[],kt=-1,ft,zt=-1/0,Pt;for(Ee=0;Ee<Gt.length;Ee++){var Et=$t[Gt[Ee].index];Et.x0>zt+xe&&(kt+=1,ft=Et.x0),zt=Et.x0,Jt[kt]||(Jt[kt]=[]),Jt[kt].push(Et),Pt=ft-Et.x0,Et.x0+=Pt,Et.x1+=Pt}return Jt}if(t($e,"snapToColumns"),re.node.x.length&&re.node.y.length){for(Ee=0;Ee<Math.min(re.node.x.length,re.node.y.length,we.nodes.length);Ee++)if(re.node.x[Ee]&&re.node.y[Ee]){var Ct=[re.node.x[Ee]*Te,re.node.y[Ee]*me];we.nodes[Ee].x0=Ct[0]-xe/2,we.nodes[Ee].x1=Ct[0]+xe/2;var It=we.nodes[Ee].y1-we.nodes[Ee].y0;we.nodes[Ee].y0=Ct[1]-It/2,we.nodes[Ee].y1=Ct[1]+It/2}if(re.arrangement==="snap"){pe=we.nodes;var Vt=$e(pe);Ye(Vt)}ye.update(we)}return{circular:de,key:ne,trace:re,guid:f.randstr(),horizontal:fe,width:Te,height:me,nodePad:re.node.pad,nodeLineColor:re.node.line.color,nodeLineWidth:re.node.line.width,linkLineColor:re.link.line.color,linkLineWidth:re.link.line.width,linkArrowLength:re.link.arrowlen,valueFormat:re.valueformat,valueSuffix:re.valuesuffix,textFont:re.textfont,translateX:ae.x[0]*se.width+se.margin.l,translateY:se.height-ae.y[1]*se.height+se.margin.t,dragParallel:fe?me:Te,dragPerpendicular:fe?Te:me,arrangement:re.arrangement,sankey:ye,graph:we,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}t(w,"sankeyModel");function x(se,W,ne){var he=a(W.color),re=W.source.label+"|"+W.target.label,ae=re+"__"+ne;return W.trace=se.trace,W.curveNumber=se.trace.index,{circular:se.circular,key:ae,traceId:se.key,pointNumber:W.pointNumber,link:W,tinyColorHue:l.tinyRGB(he),tinyColorAlpha:he.getAlpha(),linkPath:S,linkLineColor:se.linkLineColor,linkLineWidth:se.linkLineWidth,linkArrowLength:se.linkArrowLength,valueFormat:se.valueFormat,valueSuffix:se.valueSuffix,sankey:se.sankey,parent:se,interactionState:se.interactionState,flow:W.flow}}t(x,"linkModel");function A(se,W){var ne="",he=se.width/2,re=se.circularPathData;return se.circularLinkType==="top"?ne="M "+(re.targetX-W)+" "+(re.targetY+he)+" L"+(re.rightInnerExtent-W)+" "+(re.targetY+he)+"A"+(re.rightLargeArcRadius+he)+" "+(re.rightSmallArcRadius+he)+" 0 0 1 "+(re.rightFullExtent-he-W)+" "+(re.targetY-re.rightSmallArcRadius)+"L"+(re.rightFullExtent-he-W)+" "+re.verticalRightInnerExtent+"A"+(re.rightLargeArcRadius+he)+" "+(re.rightLargeArcRadius+he)+" 0 0 1 "+(re.rightInnerExtent-W)+" "+(re.verticalFullExtent-he)+"L"+re.leftInnerExtent+" "+(re.verticalFullExtent-he)+"A"+(re.leftLargeArcRadius+he)+" "+(re.leftLargeArcRadius+he)+" 0 0 1 "+(re.leftFullExtent+he)+" "+re.verticalLeftInnerExtent+"L"+(re.leftFullExtent+he)+" "+(re.sourceY-re.leftSmallArcRadius)+"A"+(re.leftLargeArcRadius+he)+" "+(re.leftSmallArcRadius+he)+" 0 0 1 "+re.leftInnerExtent+" "+(re.sourceY+he)+"L"+re.sourceX+" "+(re.sourceY+he)+"L"+re.sourceX+" "+(re.sourceY-he)+"L"+re.leftInnerExtent+" "+(re.sourceY-he)+"A"+(re.leftLargeArcRadius-he)+" "+(re.leftSmallArcRadius-he)+" 0 0 0 "+(re.leftFullExtent-he)+" "+(re.sourceY-re.leftSmallArcRadius)+"L"+(re.leftFullExtent-he)+" "+re.verticalLeftInnerExtent+"A"+(re.leftLargeArcRadius-he)+" "+(re.leftLargeArcRadius-he)+" 0 0 0 "+re.leftInnerExtent+" "+(re.verticalFullExtent+he)+"L"+(re.rightInnerExtent-W)+" "+(re.verticalFullExtent+he)+"A"+(re.rightLargeArcRadius-he)+" "+(re.rightLargeArcRadius-he)+" 0 0 0 "+(re.rightFullExtent+he-W)+" "+re.verticalRightInnerExtent+"L"+(re.rightFullExtent+he-W)+" "+(re.targetY-re.rightSmallArcRadius)+"A"+(re.rightLargeArcRadius-he)+" "+(re.rightSmallArcRadius-he)+" 0 0 0 "+(re.rightInnerExtent-W)+" "+(re.targetY-he)+"L"+(re.targetX-W)+" "+(re.targetY-he)+(W>0?"L"+re.targetX+" "+re.targetY:"")+"Z":ne="M "+(re.targetX-W)+" "+(re.targetY-he)+" L"+(re.rightInnerExtent-W)+" "+(re.targetY-he)+"A"+(re.rightLargeArcRadius+he)+" "+(re.rightSmallArcRadius+he)+" 0 0 0 "+(re.rightFullExtent-he-W)+" "+(re.targetY+re.rightSmallArcRadius)+"L"+(re.rightFullExtent-he-W)+" "+re.verticalRightInnerExtent+"A"+(re.rightLargeArcRadius+he)+" "+(re.rightLargeArcRadius+he)+" 0 0 0 "+(re.rightInnerExtent-W)+" "+(re.verticalFullExtent+he)+"L"+re.leftInnerExtent+" "+(re.verticalFullExtent+he)+"A"+(re.leftLargeArcRadius+he)+" "+(re.leftLargeArcRadius+he)+" 0 0 0 "+(re.leftFullExtent+he)+" "+re.verticalLeftInnerExtent+"L"+(re.leftFullExtent+he)+" "+(re.sourceY+re.leftSmallArcRadius)+"A"+(re.leftLargeArcRadius+he)+" "+(re.leftSmallArcRadius+he)+" 0 0 0 "+re.leftInnerExtent+" "+(re.sourceY-he)+"L"+re.sourceX+" "+(re.sourceY-he)+"L"+re.sourceX+" "+(re.sourceY+he)+"L"+re.leftInnerExtent+" "+(re.sourceY+he)+"A"+(re.leftLargeArcRadius-he)+" "+(re.leftSmallArcRadius-he)+" 0 0 1 "+(re.leftFullExtent-he)+" "+(re.sourceY+re.leftSmallArcRadius)+"L"+(re.leftFullExtent-he)+" "+re.verticalLeftInnerExtent+"A"+(re.leftLargeArcRadius-he)+" "+(re.leftLargeArcRadius-he)+" 0 0 1 "+re.leftInnerExtent+" "+(re.verticalFullExtent-he)+"L"+(re.rightInnerExtent-W)+" "+(re.verticalFullExtent-he)+"A"+(re.rightLargeArcRadius-he)+" "+(re.rightLargeArcRadius-he)+" 0 0 1 "+(re.rightFullExtent+he-W)+" "+re.verticalRightInnerExtent+"L"+(re.rightFullExtent+he-W)+" "+(re.targetY+re.rightSmallArcRadius)+"A"+(re.rightLargeArcRadius-he)+" "+(re.rightSmallArcRadius-he)+" 0 0 1 "+(re.rightInnerExtent-W)+" "+(re.targetY+he)+"L"+(re.targetX-W)+" "+(re.targetY+he)+(W>0?"L"+re.targetX+" "+re.targetY:"")+"Z",ne}t(A,"createCircularClosedPathString");function S(){var se=.5;function W(ne){var he=ne.linkArrowLength;if(ne.link.circular)return A(ne.link,he);var re=Math.abs((ne.link.target.x0-ne.link.source.x1)/2);he>re&&(he=re);var ae=ne.link.source.x1,fe=ne.link.target.x0-he,ce=r(ae,fe),xe=ce(se),Te=ce(1-se),me=ne.link.y0-ne.link.width/2,pe=ne.link.y0+ne.link.width/2,oe=ne.link.y1-ne.link.width/2,de=ne.link.y1+ne.link.width/2,ye="M"+ae+","+me,we="C"+xe+","+me+" "+Te+","+oe+" "+fe+","+oe,Ee="C"+Te+","+de+" "+xe+","+pe+" "+ae+","+pe,De=he>0?"L"+(fe+he)+","+(oe+ne.link.width/2):"";return De+="L"+fe+","+de,ye+we+De+Ee+"Z"}return t(W,"path"),W}t(S,"linkPath");function k(se,W){var ne=a(W.color),he=o.nodePadAcross,re=se.nodePad/2;W.dx=W.x1-W.x0,W.dy=W.y1-W.y0;var ae=W.dx,fe=Math.max(.5,W.dy),ce="node_"+W.pointNumber;return W.group&&(ce=f.randstr()),W.trace=se.trace,W.curveNumber=se.trace.index,{index:W.pointNumber,key:ce,partOfGroup:W.partOfGroup||!1,group:W.group,traceId:se.key,trace:se.trace,node:W,nodePad:se.nodePad,nodeLineColor:se.nodeLineColor,nodeLineWidth:se.nodeLineWidth,textFont:se.textFont,size:se.horizontal?se.height:se.width,visibleWidth:Math.ceil(ae),visibleHeight:fe,zoneX:-he,zoneY:-re,zoneWidth:ae+2*he,zoneHeight:fe+2*re,labelY:se.horizontal?W.dy/2+1:W.dx/2+1,left:W.originalLayer===1,sizeAcross:se.width,forceLayouts:se.forceLayouts,horizontal:se.horizontal,darkBackground:ne.getBrightness()<=128,tinyColorHue:l.tinyRGB(ne),tinyColorAlpha:ne.getAlpha(),valueFormat:se.valueFormat,valueSuffix:se.valueSuffix,sankey:se.sankey,graph:se.graph,arrangement:se.arrangement,uniqueNodeLabelPathId:[se.guid,se.key,ce].join("_"),interactionState:se.interactionState,figure:se}}t(k,"nodeModel");function L(se){se.attr("transform",function(W){return h(W.node.x0.toFixed(3),W.node.y0.toFixed(3))})}t(L,"updateNodePositions");function P(se){se.call(L)}t(P,"updateNodeShapes");function D(se,W){se.call(P),W.attr("d",S())}t(D,"updateShapes");function B(se){se.attr("width",function(W){return W.node.x1-W.node.x0}).attr("height",function(W){return W.visibleHeight})}t(B,"sizeNode");function z(se){return se.link.width>1||se.linkLineWidth>0}t(z,"salientEnough");function R(se){var W=h(se.translateX,se.translateY);return W+(se.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}t(R,"sankeyTransform");function F(se,W,ne){se.on(".basic",null).on("mouseover.basic",function(he){!he.interactionState.dragInProgress&&!he.partOfGroup&&(ne.hover(this,he,W),he.interactionState.hovered=[this,he])}).on("mousemove.basic",function(he){!he.interactionState.dragInProgress&&!he.partOfGroup&&(ne.follow(this,he),he.interactionState.hovered=[this,he])}).on("mouseout.basic",function(he){!he.interactionState.dragInProgress&&!he.partOfGroup&&(ne.unhover(this,he,W),he.interactionState.hovered=!1)}).on("click.basic",function(he){he.interactionState.hovered&&(ne.unhover(this,he,W),he.interactionState.hovered=!1),!he.interactionState.dragInProgress&&!he.partOfGroup&&ne.select(this,he,W)})}t(F,"attachPointerEvents");function O(se,W,ne,he){var re=n.behavior.drag().origin(function(ae){return{x:ae.node.x0+ae.visibleWidth/2,y:ae.node.y0+ae.visibleHeight/2}}).on("dragstart",function(ae){if(ae.arrangement!=="fixed"&&(f.ensureSingle(he._fullLayout._infolayer,"g","dragcover",function(ce){he._fullLayout._dragCover=ce}),f.raiseToTop(this),ae.interactionState.dragInProgress=ae.node,$(ae.node),ae.interactionState.hovered&&(ne.nodeEvents.unhover.apply(0,ae.interactionState.hovered),ae.interactionState.hovered=!1),ae.arrangement==="snap")){var fe=ae.traceId+"|"+ae.key;ae.forceLayouts[fe]?ae.forceLayouts[fe].alpha(1):q(se,fe,ae),H(se,W,ae,fe,he)}}).on("drag",function(ae){if(ae.arrangement!=="fixed"){var fe=n.event.x,ce=n.event.y;ae.arrangement==="snap"?(ae.node.x0=fe-ae.visibleWidth/2,ae.node.x1=fe+ae.visibleWidth/2,ae.node.y0=ce-ae.visibleHeight/2,ae.node.y1=ce+ae.visibleHeight/2):(ae.arrangement==="freeform"&&(ae.node.x0=fe-ae.visibleWidth/2,ae.node.x1=fe+ae.visibleWidth/2),ce=Math.max(0,Math.min(ae.size-ae.visibleHeight/2,ce)),ae.node.y0=ce-ae.visibleHeight/2,ae.node.y1=ce+ae.visibleHeight/2),$(ae.node),ae.arrangement!=="snap"&&(ae.sankey.update(ae.graph),D(se.filter(te(ae)),W))}}).on("dragend",function(ae){if(ae.arrangement!=="fixed"){ae.interactionState.dragInProgress=!1;for(var fe=0;fe<ae.node.childrenNodes.length;fe++)ae.node.childrenNodes[fe].x=ae.node.x,ae.node.childrenNodes[fe].y=ae.node.y;ae.arrangement!=="snap"&&X(ae,he)}});se.on(".drag",null).call(re)}t(O,"attachDragHandler");function q(se,W,ne,he){ee(ne.graph.nodes);var re=ne.graph.nodes.filter(function(ae){return ae.originalX===ne.node.originalX}).filter(function(ae){return!ae.partOfGroup});ne.forceLayouts[W]=e.forceSimulation(re).alphaDecay(0).force("collide",e.forceCollide().radius(function(ae){return ae.dy/2+ne.nodePad/2}).strength(1).iterations(o.forceIterations)).force("constrain",j(se,W,re,ne)).stop()}t(q,"attachForce");function H(se,W,ne,he,re){window.requestAnimationFrame(t(function ae(){var fe;for(fe=0;fe<o.forceTicksPerFrame;fe++)ne.forceLayouts[he].tick();var ce=ne.graph.nodes;if(ie(ce),ne.sankey.update(ne.graph),D(se.filter(te(ne)),W),ne.forceLayouts[he].alpha()>0)window.requestAnimationFrame(ae);else{var xe=ne.node.originalX;ne.node.x0=xe-ne.visibleWidth/2,ne.node.x1=xe+ne.visibleWidth/2,X(ne,re)}},"faster"))}t(H,"startForce");function j(se,W,ne,he){return t(function(){for(var ae=0,fe=0;fe<ne.length;fe++){var ce=ne[fe];ce===he.interactionState.dragInProgress?(ce.x=ce.lastDraggedX,ce.y=ce.lastDraggedY):(ce.vx=(ce.originalX-ce.x)/o.forceTicksPerFrame,ce.y=Math.min(he.size-ce.dy/2,Math.max(ce.dy/2,ce.y))),ae=Math.max(ae,Math.abs(ce.vx),Math.abs(ce.vy))}!he.interactionState.dragInProgress&&ae<.1&&he.forceLayouts[W].alpha()>0&&he.forceLayouts[W].alpha(0)},"_snappingForce")}t(j,"snappingForce");function X(se,W){for(var ne=[],he=[],re=0;re<se.graph.nodes.length;re++){var ae=(se.graph.nodes[re].x0+se.graph.nodes[re].x1)/2,fe=(se.graph.nodes[re].y0+se.graph.nodes[re].y1)/2;ne.push(ae/se.figure.width),he.push(fe/se.figure.height)}m.call("_guiRestyle",W,{"node.x":[ne],"node.y":[he]},se.trace.index).then(function(){W._fullLayout._dragCover&&W._fullLayout._dragCover.remove()})}t(X,"persistFinalNodePositions");function G(se){var W=[],ne;for(ne=0;ne<se.length;ne++)se[ne].originalX=(se[ne].x0+se[ne].x1)/2,se[ne].originalY=(se[ne].y0+se[ne].y1)/2,W.indexOf(se[ne].originalX)===-1&&W.push(se[ne].originalX);for(W.sort(function(he,re){return he-re}),ne=0;ne<se.length;ne++)se[ne].originalLayerIndex=W.indexOf(se[ne].originalX),se[ne].originalLayer=se[ne].originalLayerIndex/(W.length-1)}t(G,"persistOriginalPlace");function $(se){se.lastDraggedX=se.x0+se.dx/2,se.lastDraggedY=se.y0+se.dy/2}t($,"saveCurrentDragPosition");function te(se){return function(W){return W.node.originalX===se.node.originalX}}t(te,"sameLayer");function ee(se){for(var W=0;W<se.length;W++)se[W].y=(se[W].y0+se[W].y1)/2,se[W].x=(se[W].x0+se[W].x1)/2}t(ee,"switchToForceFormat");function ie(se){for(var W=0;W<se.length;W++)se[W].y0=se[W].y-se[W].dy/2,se[W].y1=se[W].y0+se[W].dy,se[W].x0=se[W].x-se[W].dx/2,se[W].x1=se[W].x0+se[W].dx}return t(ie,"switchToSankeyFormat"),ND=t(function(se,W,ne,he,re){var ae=se._context.staticPlot,fe=!1;f.ensureSingle(se._fullLayout._infolayer,"g","first-render",function(){fe=!0});var ce=se._fullLayout._dragCover,xe=ne.filter(function(Ee){return p(Ee).trace.visible}).map(w.bind(null,he)),Te=W.selectAll("."+o.cn.sankey).data(xe,d);Te.exit().remove(),Te.enter().append("g").classed(o.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",ae?"none":"auto").attr("transform",R),Te.each(function(Ee,De){se._fullData[De]._sankey=Ee;var Fe="bgsankey-"+Ee.trace.uid+"-"+De;f.ensureSingle(se._fullLayout._draggers,"rect",Fe),se._fullData[De]._bgRect=n.select("."+Fe),se._fullData[De]._bgRect.style("pointer-events",ae?"none":"all").attr("width",Ee.width).attr("height",Ee.height).attr("x",Ee.translateX).attr("y",Ee.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),Te.transition().ease(o.ease).duration(o.duration).attr("transform",R);var me=Te.selectAll("."+o.cn.sankeyLinks).data(g,d);me.enter().append("g").classed(o.cn.sankeyLinks,!0).style("fill","none");var pe=me.selectAll("."+o.cn.sankeyLink).data(function(Ee){var De=Ee.graph.links;return De.filter(function(Fe){return Fe.value}).map(x.bind(null,Ee))},d);pe.enter().append("path").classed(o.cn.sankeyLink,!0).call(F,Te,re.linkEvents),pe.style("stroke",function(Ee){return z(Ee)?l.tinyRGB(a(Ee.linkLineColor)):Ee.tinyColorHue}).style("stroke-opacity",function(Ee){return z(Ee)?l.opacity(Ee.linkLineColor):Ee.tinyColorAlpha}).style("fill",function(Ee){return Ee.tinyColorHue}).style("fill-opacity",function(Ee){return Ee.tinyColorAlpha}).style("stroke-width",function(Ee){return z(Ee)?Ee.linkLineWidth:1}).attr("d",S()),pe.style("opacity",function(){return se._context.staticPlot||fe||ce?1:0}).transition().ease(o.ease).duration(o.duration).style("opacity",1),pe.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var oe=Te.selectAll("."+o.cn.sankeyNodeSet).data(g,d);oe.enter().append("g").classed(o.cn.sankeyNodeSet,!0),oe.style("cursor",function(Ee){switch(Ee.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var de=oe.selectAll("."+o.cn.sankeyNode).data(function(Ee){var De=Ee.graph.nodes;return G(De),De.map(k.bind(null,Ee))},d);de.enter().append("g").classed(o.cn.sankeyNode,!0).call(L).style("opacity",function(Ee){return(se._context.staticPlot||fe)&&!Ee.partOfGroup?1:0}),de.call(F,Te,re.nodeEvents).call(O,pe,re,se),de.transition().ease(o.ease).duration(o.duration).call(L).style("opacity",function(Ee){return Ee.partOfGroup?0:1}),de.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var ye=de.selectAll("."+o.cn.nodeRect).data(g);ye.enter().append("rect").classed(o.cn.nodeRect,!0).call(B),ye.style("stroke-width",function(Ee){return Ee.nodeLineWidth}).style("stroke",function(Ee){return l.tinyRGB(a(Ee.nodeLineColor))}).style("stroke-opacity",function(Ee){return l.opacity(Ee.nodeLineColor)}).style("fill",function(Ee){return Ee.tinyColorHue}).style("fill-opacity",function(Ee){return Ee.tinyColorAlpha}),ye.transition().ease(o.ease).duration(o.duration).call(B);var we=de.selectAll("."+o.cn.nodeLabel).data(g);we.enter().append("text").classed(o.cn.nodeLabel,!0).style("cursor","default"),we.attr("data-notex",1).text(function(Ee){return Ee.node.label}).each(function(Ee){var De=n.select(this);u.font(De,Ee.textFont),b.convertToTspans(De,se)}).style("text-shadow",b.makeTextShadow(se._fullLayout.paper_bgcolor)).attr("text-anchor",function(Ee){return Ee.horizontal&&Ee.left?"end":"start"}).attr("transform",function(Ee){var De=n.select(this),Fe=b.lineCount(De),qe=Ee.textFont.size*((Fe-1)*_-T),Je=Ee.nodeLineWidth/2+M,Ge=((Ee.horizontal?Ee.visibleHeight:Ee.visibleWidth)-qe)/2;Ee.horizontal&&(Ee.left?Je=-Je:Je+=Ee.visibleWidth);var et=Ee.horizontal?"":"scale(-1,1)"+v(90);return h(Ee.horizontal?Je:Ge,Ee.horizontal?Ge:Je)+et}),we.transition().ease(o.ease).duration(o.duration)},"render"),ND}t(YNe,"requireRender");var qD,kre;function qpe(){if(kre)return qD;kre=1;var e=Va.exports,r=Nt.exports,n=r.numberFormat,i=YNe(),s=Ko,o=$a.exports,a=Npe().cn,l=r._;function u(T){return T!==""}t(u,"renderableValuePresent");function f(T,_){return T.filter(function(M){return M.key===_.traceId})}t(f,"ownTrace");function h(T,_){e.select(T).select("path").style("fill-opacity",_),e.select(T).select("rect").style("fill-opacity",_)}t(h,"makeTranslucent");function v(T){e.select(T).select("text.name").style("fill","black")}t(v,"makeTextContrasty");function c(T){return function(_){return T.node.sourceLinks.indexOf(_.link)!==-1||T.node.targetLinks.indexOf(_.link)!==-1}}t(c,"relatedLinks");function d(T){return function(_){return _.node.sourceLinks.indexOf(T.link)!==-1||_.node.targetLinks.indexOf(T.link)!==-1}}t(d,"relatedNodes");function g(T,_,M){_&&M&&f(M,_).selectAll("."+a.sankeyLink).filter(c(_)).call(b.bind(0,_,M,!1))}t(g,"nodeHoveredStyle");function p(T,_,M){_&&M&&f(M,_).selectAll("."+a.sankeyLink).filter(c(_)).call(m.bind(0,_,M,!1))}t(p,"nodeNonHoveredStyle");function b(T,_,M,w){var x=w.datum().link.label;w.style("fill-opacity",function(A){if(!A.link.concentrationscale)return .4}),x&&f(_,T).selectAll("."+a.sankeyLink).filter(function(A){return A.link.label===x}).style("fill-opacity",function(A){if(!A.link.concentrationscale)return .4}),M&&f(_,T).selectAll("."+a.sankeyNode).filter(d(T)).call(g)}t(b,"linkHoveredStyle");function m(T,_,M,w){var x=w.datum().link.label;w.style("fill-opacity",function(A){return A.tinyColorAlpha}),x&&f(_,T).selectAll("."+a.sankeyLink).filter(function(A){return A.link.label===x}).style("fill-opacity",function(A){return A.tinyColorAlpha}),M&&f(_,T).selectAll(a.sankeyNode).filter(d(T)).call(p)}t(m,"linkNonHoveredStyle");function y(T,_){var M=T.hoverlabel||{},w=r.nestedProperty(M,_).get();return Array.isArray(w)?!1:w}return t(y,"castHoverOption"),qD=t(function(_,M){for(var w=_._fullLayout,x=w._paper,A=w._size,S=0;S<_._fullData.length;S++)if(!!_._fullData[S].visible&&_._fullData[S].type===a.sankey&&!_._fullData[S]._viewInitial){var k=_._fullData[S].node;_._fullData[S]._viewInitial={node:{groups:k.groups.slice(),x:k.x.slice(),y:k.y.slice()}}}var L=t(function($,te){var ee=te.link;ee.originalEvent=e.event,_._hoverdata=[ee],s.click(_,{target:!0})},"linkSelect"),P=t(function($,te,ee){_._fullLayout.hovermode!==!1&&(e.select($).call(b.bind(0,te,ee,!0)),te.link.trace.link.hoverinfo!=="skip"&&(te.link.fullData=te.link.trace,_.emit("plotly_hover",{event:e.event,points:[te.link]})))},"linkHover"),D=l(_,"source:")+" ",B=l(_,"target:")+" ",z=l(_,"concentration:")+" ",R=l(_,"incoming flow count:")+" ",F=l(_,"outgoing flow count:")+" ",O=t(function($,te){if(_._fullLayout.hovermode===!1)return;var ee=te.link.trace.link;if(ee.hoverinfo==="none"||ee.hoverinfo==="skip")return;var ie=[];function se(ce){var xe,Te;ce.circular?(xe=(ce.circularPathData.leftInnerExtent+ce.circularPathData.rightInnerExtent)/2,Te=ce.circularPathData.verticalFullExtent):(xe=(ce.source.x1+ce.target.x0)/2,Te=(ce.y0+ce.y1)/2);var me=[xe,Te];return ce.trace.orientation==="v"&&me.reverse(),me[0]+=te.parent.translateX,me[1]+=te.parent.translateY,me}t(se,"hoverCenterPosition");for(var W=0,ne=0;ne<te.flow.links.length;ne++){var he=te.flow.links[ne];if(!(_._fullLayout.hovermode==="closest"&&te.link.pointNumber!==he.pointNumber)){te.link.pointNumber===he.pointNumber&&(W=ne),he.fullData=he.trace,ee=te.link.trace.link;var re=se(he),ae={valueLabel:n(te.valueFormat)(he.value)+te.valueSuffix};ie.push({x:re[0],y:re[1],name:ae.valueLabel,text:[he.label||"",D+he.source.label,B+he.target.label,he.concentrationscale?z+n("%0.2f")(he.flow.labelConcentration):""].filter(u).join("<br>"),color:y(ee,"bgcolor")||o.addOpacity(he.color,1),borderColor:y(ee,"bordercolor"),fontFamily:y(ee,"font.family"),fontSize:y(ee,"font.size"),fontColor:y(ee,"font.color"),nameLength:y(ee,"namelength"),textAlign:y(ee,"align"),idealAlign:e.event.x<re[0]?"right":"left",hovertemplate:ee.hovertemplate,hovertemplateLabels:ae,eventData:[he]})}}var fe=s.loneHover(ie,{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:_,anchorIndex:W});fe.each(function(){var ce=this;te.link.concentrationscale||h(ce,.65),v(ce)})},"linkHoverFollow"),q=t(function($,te,ee){_._fullLayout.hovermode!==!1&&(e.select($).call(m.bind(0,te,ee,!0)),te.link.trace.link.hoverinfo!=="skip"&&(te.link.fullData=te.link.trace,_.emit("plotly_unhover",{event:e.event,points:[te.link]})),s.loneUnhover(w._hoverlayer.node()))},"linkUnhover"),H=t(function($,te,ee){var ie=te.node;ie.originalEvent=e.event,_._hoverdata=[ie],e.select($).call(p,te,ee),s.click(_,{target:!0})},"nodeSelect"),j=t(function($,te,ee){_._fullLayout.hovermode!==!1&&(e.select($).call(g,te,ee),te.node.trace.node.hoverinfo!=="skip"&&(te.node.fullData=te.node.trace,_.emit("plotly_hover",{event:e.event,points:[te.node]})))},"nodeHover"),X=t(function($,te){if(_._fullLayout.hovermode!==!1){var ee=te.node.trace.node;if(!(ee.hoverinfo==="none"||ee.hoverinfo==="skip")){var ie=e.select($).select("."+a.nodeRect),se=_._fullLayout._paperdiv.node().getBoundingClientRect(),W=ie.node().getBoundingClientRect(),ne=W.left-2-se.left,he=W.right+2-se.left,re=W.top+W.height/4-se.top,ae={valueLabel:n(te.valueFormat)(te.node.value)+te.valueSuffix};te.node.fullData=te.node.trace,_._fullLayout._calcInverseTransform(_);var fe=_._fullLayout._invScaleX,ce=_._fullLayout._invScaleY,xe=s.loneHover({x0:fe*ne,x1:fe*he,y:ce*re,name:n(te.valueFormat)(te.node.value)+te.valueSuffix,text:[te.node.label,R+te.node.targetLinks.length,F+te.node.sourceLinks.length].filter(u).join("<br>"),color:y(ee,"bgcolor")||te.tinyColorHue,borderColor:y(ee,"bordercolor"),fontFamily:y(ee,"font.family"),fontSize:y(ee,"font.size"),fontColor:y(ee,"font.color"),nameLength:y(ee,"namelength"),textAlign:y(ee,"align"),idealAlign:"left",hovertemplate:ee.hovertemplate,hovertemplateLabels:ae,eventData:[te.node]},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:_});h(xe,.85),v(xe)}}},"nodeHoverFollow"),G=t(function($,te,ee){_._fullLayout.hovermode!==!1&&(e.select($).call(p,te,ee),te.node.trace.node.hoverinfo!=="skip"&&(te.node.fullData=te.node.trace,_.emit("plotly_unhover",{event:e.event,points:[te.node]})),s.loneUnhover(w._hoverlayer.node()))},"nodeUnhover");i(_,x,M,{width:A.w,height:A.h,margin:{t:A.t,r:A.r,b:A.b,l:A.l}},{linkEvents:{hover:P,follow:O,unhover:q,select:L},nodeEvents:{hover:j,follow:X,unhover:G,select:H}})},"plot"),qD}t(qpe,"requirePlot$a");var UD={},Ere;function WNe(){return Ere||(Ere=1,function(e){var r=_o.overrideAll,n=Ns.getModuleCalcData,i=qpe(),s=fp,o=pv,a=xu.exports,l=Qs.prepSelect,u=Nt.exports,f=Na,h="sankey";e.name=h,e.baseLayoutAttrOverrides=r({hoverlabel:s.hoverlabel},"plot","nested"),e.plot=function(c){var d=n(c.calcdata,h)[0];i(c,d),e.updateFx(c)},e.clean=function(c,d,g,p){var b=p._has&&p._has(h),m=d._has&&d._has(h);b&&!m&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},e.updateFx=function(c){for(var d=0;d<c._fullData.length;d++)v(c,d)};function v(c,d){var g=c._fullData[d],p=c._fullLayout,b=p.dragmode,m=p.dragmode==="pan"?"move":"crosshair",y=g._bgRect;if(!!y&&!(b==="pan"||b==="zoom")){o(y,m);var T={_id:"x",c2p:u.identity,_offset:g._sankey.translateX,_length:g._sankey.width},_={_id:"y",c2p:u.identity,_offset:g._sankey.translateY,_length:g._sankey.height},M={gd:c,element:y.node(),plotinfo:{id:d,xaxis:T,yaxis:_,fillRangeItems:u.noop},subplot:d,xaxes:[T],yaxes:[_],doneFnCompleted:function(w){var x=c._fullData[d],A,S=x.node.groups.slice(),k=[];function L(z){for(var R=x._sankey.graph.nodes,F=0;F<R.length;F++)if(R[F].pointNumber===z)return R[F]}t(L,"findNode");for(var P=0;P<w.length;P++){var D=L(w[P].pointNumber);if(!!D)if(D.group){for(var B=0;B<D.childrenNodes.length;B++)k.push(D.childrenNodes[B].pointNumber);S[D.pointNumber-x.node._count]=!1}else k.push(D.pointNumber)}A=S.filter(Boolean).concat([k]),f.call("_guiRestyle",c,{"node.groups":[A]},d)}};M.prepFn=function(w,x,A){l(w,x,A,M,b)},a.init(M)}}t(v,"subplotUpdateFx")}(UD)),UD}t(WNe,"requireBase_plot$2");var HD,Cre;function XNe(){return Cre||(Cre=1,HD=t(function(r,n){for(var i=r.cd,s=[],o=i[0].trace,a=o._sankey.graph.nodes,l=0;l<a.length;l++){var u=a[l];if(!u.partOfGroup){var f=[(u.x0+u.x1)/2,(u.y0+u.y1)/2];o.orientation==="v"&&f.reverse(),n&&n.contains(f,!1,l,r)&&s.push({pointNumber:u.pointNumber})}}return s},"selectPoints")),HD}t(XNe,"requireSelect$1");var $D,Lre;function ZNe(){return Lre||(Lre=1,$D={attributes:bpe(),supplyDefaults:oOe(),calc:sOe(),plot:qpe(),moduleType:"trace",name:"sankey",basePlotModule:WNe(),selectPoints:XNe(),categories:["noOpacity"],meta:{description:["Sankey plots for network flow data analysis.","The nodes are specified in `nodes` and the links between sources and targets in `links`.","The colors are set in `nodes[i].color` and `links[i].color`, otherwise defaults are used."].join(" ")}}),$D}t(ZNe,"requireSankey$1");var Rre;function KNe(){return Rre||(Rre=1,function(e){e.exports=ZNe()}(LD)),LD.exports}t(KNe,"requireSankey");var VD={exports:{}},GD={},Pre;function JNe(){return Pre||(Pre=1,function(e){var r=so.exports;e.name="indicator",e.plot=function(n,i,s,o){r.plotBasePlot(e.name,n,i,s,o)},e.clean=function(n,i,s,o){r.cleanBasePlot(e.name,n,i,s,o)}}(GD)),GD}t(JNe,"requireBase_plot$1");var jD,Dre;function Upe(){if(Dre)return jD;Dre=1;var e=cn.extendFlat,r=cn.extendDeep,n=_o.overrideAll,i=Ho,s=Fo,o=vo.attributes,a=Jl,l=ei.templatedArray,u=px(),f=Vo.descriptionOnlyNumbers,h=i({editType:"plot",colorEditType:"plot"}),v={color:{valType:"color",editType:"plot",description:["Sets the background color of the arc."].join(" ")},line:{color:{valType:"color",dflt:s.defaultLine,editType:"plot",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot",description:["Sets the thickness of the bar as a fraction of the total thickness of the gauge."].join(" ")},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["Sets the range of this axis."].join(" ")},d=l("step",r({},v,{range:c}));return jD={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number",description:["Determines how the value is displayed on the graph.","`number` displays the value numerically in text.","`delta` displays the difference to a reference value in text.","Finally, `gauge` displays the value graphically on an axis."].join(" ")},value:{valType:"number",editType:"calc",anim:!0,description:["Sets the number to be displayed."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],editType:"plot",description:["Sets the horizontal alignment of the `text` within the box.","Note that this attribute has no effect if an angular gauge is displayed:","in this case, it is always centered"].join(" ")},domain:o({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot",description:["Sets the title of this indicator."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],editType:"plot",description:["Sets the horizontal alignment of the title.","It defaults to `center` except for bullet charts","for which it defaults to right."].join(" ")},font:e({},h,{description:["Set the font used to display the title"].join(" ")}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:e({},h,{description:["Set the font used to display main number"].join(" ")}),prefix:{valType:"string",dflt:"",editType:"plot",description:["Sets a prefix appearing before the number."].join(" ")},suffix:{valType:"string",dflt:"",editType:"plot",description:["Sets a suffix appearing next to the number."].join(" ")},editType:"plot"},delta:{reference:{valType:"number",editType:"calc",description:["Sets the reference value to compute the delta.","By default, it is set to the current value."].join(" ")},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot",description:["Sets the position of delta with respect to the number."].join(" ")},relative:{valType:"boolean",editType:"plot",dflt:!1,description:["Show relative change"].join(" ")},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:u.INCREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",dflt:u.INCREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:u.DECREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",dflt:u.DECREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},font:e({},h,{description:["Set the font used to display the delta"].join(" ")}),prefix:{valType:"string",dflt:"",editType:"plot",description:["Sets a prefix appearing before the delta."].join(" ")},suffix:{valType:"string",dflt:"",editType:"plot",description:["Sets a suffix appearing next to the delta."].join(" ")},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"],description:["Set the shape of the gauge"].join(" ")},bar:r({},v,{color:{dflt:"green"},description:["Set the appearance of the gauge's value"].join(" ")}),bgcolor:{valType:"color",editType:"plot",description:"Sets the gauge background color."},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the gauge."},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot",description:"Sets the width (in px) of the border enclosing the gauge."},axis:n({range:c,visible:e({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:e({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,tickfont:i({description:"Sets the color bar's tick label font"}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:d,threshold:{line:{color:e({},v.line.color,{description:["Sets the color of the threshold line."].join(" ")}),width:e({},v.line.width,{dflt:1,description:["Sets the width (in px) of the threshold line."].join(" ")}),editType:"plot"},thickness:e({},v.thickness,{dflt:.85,description:["Sets the thickness of the threshold line as a fraction of the thickness of the gauge."].join(" ")}),value:{valType:"number",editType:"calc",dflt:!1,description:["Sets a treshold value drawn as a line."].join(" ")},editType:"plot"},description:"The gauge of the Indicator plot.",editType:"plot"}},jD}t(Upe,"requireAttributes$a");var YD,Ire;function Hpe(){return Ire||(Ire=1,YD={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}),YD}t(Hpe,"requireConstants$4");var WD,zre;function QNe(){if(zre)return WD;zre=1;var e=Nt.exports,r=Upe(),n=vo.defaults,i=ei,s=mu,o=Hpe(),a=ky,l=J1,u=L0,f=R0;function h(c,d,g,p){function b(z,R){return e.coerce(c,d,r,z,R)}t(b,"coerce"),n(d,p,b),b("mode"),d._hasNumber=d.mode.indexOf("number")!==-1,d._hasDelta=d.mode.indexOf("delta")!==-1,d._hasGauge=d.mode.indexOf("gauge")!==-1;var m=b("value");d._range=[0,typeof m=="number"?1.5*m:1];var y=new Array(2),T;d._hasNumber&&(b("number.valueformat"),b("number.font.color",p.font.color),b("number.font.family",p.font.family),b("number.font.size"),d.number.font.size===void 0&&(d.number.font.size=o.defaultNumberFontSize,y[0]=!0),b("number.prefix"),b("number.suffix"),T=d.number.font.size);var _;d._hasDelta&&(b("delta.font.color",p.font.color),b("delta.font.family",p.font.family),b("delta.font.size"),d.delta.font.size===void 0&&(d.delta.font.size=(d._hasNumber?.5:1)*(T||o.defaultNumberFontSize),y[1]=!0),b("delta.reference",d.value),b("delta.relative"),b("delta.valueformat",d.delta.relative?"2%":""),b("delta.increasing.symbol"),b("delta.increasing.color"),b("delta.decreasing.symbol"),b("delta.decreasing.color"),b("delta.position"),b("delta.prefix"),b("delta.suffix"),_=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||y[0])&&(!d._hasDelta||y[1])||!1,b("title.font.color",p.font.color),b("title.font.family",p.font.family),b("title.font.size",.25*(T||_||o.defaultNumberFontSize)),b("title.text");var M,w,x,A;function S(z,R){return e.coerce(M,w,r.gauge,z,R)}t(S,"coerceGauge");function k(z,R){return e.coerce(x,A,r.gauge.axis,z,R)}if(t(k,"coerceGaugeAxis"),d._hasGauge){M=c.gauge,M||(M={}),w=i.newContainer(d,"gauge"),S("shape");var L=d._isBullet=d.gauge.shape==="bullet";L||b("title.align","center");var P=d._isAngular=d.gauge.shape==="angular";P||b("align","center"),S("bgcolor",p.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width");var D=o.valueThickness*(d.gauge.shape==="bullet"?.5:1);S("bar.thickness",D),s(M,w,{name:"steps",handleItemDefaults:v}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),x={},M&&(x=M.axis||{}),A=i.newContainer(w,"axis"),k("visible"),d._range=k("range",d._range);var B={outerTicks:!0};a(x,A,k,"linear"),f(x,A,k,"linear",B),u(x,A,k,"linear",B),l(x,A,k,B)}else b("title.align","center"),b("align","center"),d._isAngular=d._isBullet=!1;d._length=null}t(h,"supplyDefaults");function v(c,d){function g(p,b){return e.coerce(c,d,r.gauge.steps,p,b)}t(g,"coerce"),g("color"),g("line.color"),g("line.width"),g("range"),g("thickness")}return t(v,"stepDefaults"),WD={supplyDefaults:h},WD}t(QNe,"requireDefaults$a");var XD,Fre;function eqe(){if(Fre)return XD;Fre=1;function e(r,n){var i=[],s=n.value;typeof n._lastValue!="number"&&(n._lastValue=n.value);var o=n._lastValue,a=o;return n._hasDelta&&typeof n.delta.reference=="number"&&(a=n.delta.reference),i[0]={y:s,lastY:o,delta:s-a,relativeDelta:(s-a)/a},i}return t(e,"calc"),XD={calc:e},XD}t(eqe,"requireCalc$a");var ZD,Bre;function tqe(){if(Bre)return ZD;Bre=1;var e=Va.exports,r=fy.interpolate,n=fy.interpolateNumber,i=Nt.exports,s=i.strScale,o=i.strTranslate,a=i.rad2deg,l=yl.MID_SHIFT,u=bn.exports,f=Hpe(),h=Ji,v=nn(),c=Rw,d=Y8,g=Jl,p=$a.exports,b={left:"start",center:"middle",right:"end"},m={left:0,center:.5,right:1},y=/[yzafpnmkMGTPEZY]/;function T(B){return B&&B.duration>0}t(T,"hasTransition"),ZD=t(function(z,R,F,O){var q=z._fullLayout,H;T(F)&&O&&(H=O()),i.makeTraceGroups(q._indicatorlayer,R,"trace").each(function(j){var X=j[0],G=X.trace,$=e.select(this),te=G._hasGauge,ee=G._isAngular,ie=G._isBullet,se=G.domain,W={w:q._size.w*(se.x[1]-se.x[0]),h:q._size.h*(se.y[1]-se.y[0]),l:q._size.l+q._size.w*se.x[0],r:q._size.r+q._size.w*(1-se.x[1]),t:q._size.t+q._size.h*(1-se.y[1]),b:q._size.b+q._size.h*se.y[0]},ne=W.l+W.w/2,he=W.t+W.h/2,re=Math.min(W.w/2,W.h),ae=f.innerRadius*re,fe,ce,xe,Te=G.align||"center";if(ce=he,!te)fe=W.l+m[Te]*W.w,xe=t(function(qe){return k(qe,W.w,W.h)},"numbersScaler");else if(ee&&(fe=ne,ce=he+re/2,xe=t(function(qe){return L(qe,.9*ae)},"numbersScaler")),ie){var me=f.bulletPadding,pe=1-f.bulletNumberDomainSize+me;fe=W.l+(pe+(1-pe)*m[Te])*W.w,xe=t(function(qe){return k(qe,(f.bulletNumberDomainSize-me)*W.w,W.h)},"numbersScaler")}w(z,$,j,{numbersX:fe,numbersY:ce,numbersScaler:xe,transitionOpts:F,onComplete:H});var oe,de;te&&(oe={range:G.gauge.axis.range,color:G.gauge.bgcolor,line:{color:G.gauge.bordercolor,width:0},thickness:1},de={range:G.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:G.gauge.bordercolor,width:G.gauge.borderwidth},thickness:1});var ye=$.selectAll("g.angular").data(ee?j:[]);ye.exit().remove();var we=$.selectAll("g.angularaxis").data(ee?j:[]);we.exit().remove(),ee&&M(z,$,j,{radius:re,innerRadius:ae,gauge:ye,layer:we,size:W,gaugeBg:oe,gaugeOutline:de,transitionOpts:F,onComplete:H});var Ee=$.selectAll("g.bullet").data(ie?j:[]);Ee.exit().remove();var De=$.selectAll("g.bulletaxis").data(ie?j:[]);De.exit().remove(),ie&&_(z,$,j,{gauge:Ee,layer:De,size:W,gaugeBg:oe,gaugeOutline:de,transitionOpts:F,onComplete:H});var Fe=$.selectAll("text.title").data(j);Fe.exit().remove(),Fe.enter().append("text").classed("title",!0),Fe.attr("text-anchor",function(){return ie?b.right:b[G.title.align]}).text(G.title.text).call(u.font,G.title.font).call(h.convertToTspans,z),Fe.attr("transform",function(){var qe=W.l+W.w*m[G.title.align],Je,Ge=f.titlePadding,et=u.bBox(Fe.node());if(te){if(ee)if(G.gauge.axis.visible){var Ue=u.bBox(we.node());Je=Ue.top-Ge-et.bottom}else Je=W.t+W.h/2-re/2-et.bottom-Ge;ie&&(Je=ce-(et.top+et.bottom)/2,qe=W.l-f.bulletPadding*W.w)}else Je=G._numbersTop-Ge-et.bottom;return o(qe,Je)})})},"plot");function _(B,z,R,F){var O=R[0].trace,q=F.gauge,H=F.layer,j=F.gaugeBg,X=F.gaugeOutline,G=F.size,$=O.domain,te=F.transitionOpts,ee=F.onComplete,ie,se,W,ne,he;q.enter().append("g").classed("bullet",!0),q.attr("transform",o(G.l,G.t)),H.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),H.selectAll("g.xbulletaxistick,path,text").remove();var re=G.h,ae=O.gauge.bar.thickness*re,fe=$.x[0],ce=$.x[0]+($.x[1]-$.x[0])*(O._hasNumber||O._hasDelta?1-f.bulletNumberDomainSize:1);ie=S(B,O.gauge.axis),ie._id="xbulletaxis",ie.domain=[fe,ce],ie.setScale(),se=v.calcTicks(ie),W=v.makeTransTickFn(ie),ne=v.getTickSigns(ie)[2],he=G.t+G.h,ie.visible&&(v.drawTicks(B,ie,{vals:ie.ticks==="inside"?v.clipEnds(ie,se):se,layer:H,path:v.makeTickPath(ie,he,ne),transFn:W}),v.drawLabels(B,ie,{vals:se,layer:H,transFn:W,labelFns:v.makeLabelFns(ie,he)}));function xe(we){we.attr("width",function(Ee){return Math.max(0,ie.c2p(Ee.range[1])-ie.c2p(Ee.range[0]))}).attr("x",function(Ee){return ie.c2p(Ee.range[0])}).attr("y",function(Ee){return .5*(1-Ee.thickness)*re}).attr("height",function(Ee){return Ee.thickness*re})}t(xe,"drawRect");var Te=[j].concat(O.gauge.steps),me=q.selectAll("g.bg-bullet").data(Te);me.enter().append("g").classed("bg-bullet",!0).append("rect"),me.select("rect").call(xe).call(x),me.exit().remove();var pe=q.selectAll("g.value-bullet").data([O.gauge.bar]);pe.enter().append("g").classed("value-bullet",!0).append("rect"),pe.select("rect").attr("height",ae).attr("y",(re-ae)/2).call(x),T(te)?pe.select("rect").transition().duration(te.duration).ease(te.easing).each("end",function(){ee&&ee()}).each("interrupt",function(){ee&&ee()}).attr("width",Math.max(0,ie.c2p(Math.min(O.gauge.axis.range[1],R[0].y)))):pe.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,ie.c2p(Math.min(O.gauge.axis.range[1],R[0].y))):0),pe.exit().remove();var oe=R.filter(function(){return O.gauge.threshold.value||O.gauge.threshold.value===0}),de=q.selectAll("g.threshold-bullet").data(oe);de.enter().append("g").classed("threshold-bullet",!0).append("line"),de.select("line").attr("x1",ie.c2p(O.gauge.threshold.value)).attr("x2",ie.c2p(O.gauge.threshold.value)).attr("y1",(1-O.gauge.threshold.thickness)/2*re).attr("y2",(1-(1-O.gauge.threshold.thickness)/2)*re).call(p.stroke,O.gauge.threshold.line.color).style("stroke-width",O.gauge.threshold.line.width),de.exit().remove();var ye=q.selectAll("g.gauge-outline").data([X]);ye.enter().append("g").classed("gauge-outline",!0).append("rect"),ye.select("rect").call(xe).call(x),ye.exit().remove()}t(_,"drawBulletGauge");function M(B,z,R,F){var O=R[0].trace,q=F.size,H=F.radius,j=F.innerRadius,X=F.gaugeBg,G=F.gaugeOutline,$=[q.l+q.w/2,q.t+q.h/2+H/2],te=F.gauge,ee=F.layer,ie=F.transitionOpts,se=F.onComplete,W=Math.PI/2;function ne(Ye){var $e=O.gauge.axis.range[0],Ct=O.gauge.axis.range[1],It=(Ye-$e)/(Ct-$e)*Math.PI-W;return It<-W?-W:It>W?W:It}t(ne,"valueToAngle");function he(Ye){return e.svg.arc().innerRadius((j+H)/2-Ye/2*(H-j)).outerRadius((j+H)/2+Ye/2*(H-j)).startAngle(-W)}t(he,"arcPathGenerator");function re(Ye){Ye.attr("d",function($e){return he($e.thickness).startAngle(ne($e.range[0])).endAngle(ne($e.range[1]))()})}t(re,"drawArc");var ae,fe,ce,xe;te.enter().append("g").classed("angular",!0),te.attr("transform",o($[0],$[1])),ee.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),ee.selectAll("g.xangularaxistick,path,text").remove(),ae=S(B,O.gauge.axis),ae.type="linear",ae.range=O.gauge.axis.range,ae._id="xangularaxis",ae.ticklabeloverflow="allow",ae.setScale();var Te=t(function(Ye){return(ae.range[0]-Ye.x)/(ae.range[1]-ae.range[0])*Math.PI+Math.PI},"t2g"),me={},pe=v.makeLabelFns(ae,0),oe=pe.labelStandoff;me.xFn=function(Ye){var $e=Te(Ye);return Math.cos($e)*oe},me.yFn=function(Ye){var $e=Te(Ye),Ct=Math.sin($e)>0?.2:1;return-Math.sin($e)*(oe+Ye.fontSize*Ct)+Math.abs(Math.cos($e))*(Ye.fontSize*l)},me.anchorFn=function(Ye){var $e=Te(Ye),Ct=Math.cos($e);return Math.abs(Ct)<.1?"middle":Ct>0?"start":"end"},me.heightFn=function(Ye,$e,Ct){var It=Te(Ye);return-.5*(1+Math.sin(It))*Ct};var de=t(function(Ye){return o($[0]+H*Math.cos(Ye),$[1]-H*Math.sin(Ye))},"_transFn");ce=t(function(Ye){return de(Te(Ye))},"transFn");var ye=t(function(Ye){var $e=Te(Ye);return de($e)+"rotate("+-a($e)+")"},"transFn2");if(fe=v.calcTicks(ae),xe=v.getTickSigns(ae)[2],ae.visible){xe=ae.ticks==="inside"?-1:1;var we=(ae.linewidth||1)/2;v.drawTicks(B,ae,{vals:fe,layer:ee,path:"M"+xe*we+",0h"+xe*ae.ticklen,transFn:ye}),v.drawLabels(B,ae,{vals:fe,layer:ee,transFn:ce,labelFns:me})}var Ee=[X].concat(O.gauge.steps),De=te.selectAll("g.bg-arc").data(Ee);De.enter().append("g").classed("bg-arc",!0).append("path"),De.select("path").call(re).call(x),De.exit().remove();var Fe=he(O.gauge.bar.thickness),qe=te.selectAll("g.value-arc").data([O.gauge.bar]);qe.enter().append("g").classed("value-arc",!0).append("path");var Je=qe.select("path");T(ie)?(Je.transition().duration(ie.duration).ease(ie.easing).each("end",function(){se&&se()}).each("interrupt",function(){se&&se()}).attrTween("d",A(Fe,ne(R[0].lastY),ne(R[0].y))),O._lastValue=R[0].y):Je.attr("d",typeof R[0].y=="number"?Fe.endAngle(ne(R[0].y)):"M0,0Z"),Je.call(x),qe.exit().remove(),Ee=[];var Ge=O.gauge.threshold.value;(Ge||Ge===0)&&Ee.push({range:[Ge,Ge],color:O.gauge.threshold.color,line:{color:O.gauge.threshold.line.color,width:O.gauge.threshold.line.width},thickness:O.gauge.threshold.thickness});var et=te.selectAll("g.threshold-arc").data(Ee);et.enter().append("g").classed("threshold-arc",!0).append("path"),et.select("path").call(re).call(x),et.exit().remove();var Ue=te.selectAll("g.gauge-outline").data([G]);Ue.enter().append("g").classed("gauge-outline",!0).append("path"),Ue.select("path").call(re).call(x),Ue.exit().remove()}t(M,"drawAngularGauge");function w(B,z,R,F){var O=R[0].trace,q=F.numbersX,H=F.numbersY,j=O.align||"center",X=b[j],G=F.transitionOpts,$=F.onComplete,te=i.ensureSingle(z,"g","numbers"),ee,ie,se,W=[];O._hasNumber&&W.push("number"),O._hasDelta&&(W.push("delta"),O.delta.position==="left"&&W.reverse());var ne=te.selectAll("text").data(W);ne.enter().append("text"),ne.attr("text-anchor",function(){return X}).attr("class",function(de){return de}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ne.exit().remove();function he(de,ye,we,Ee){if(de.match("s")&&we>=0!=Ee>=0&&!ye(we).slice(-1).match(y)&&!ye(Ee).slice(-1).match(y)){var De=de.slice().replace("s","f").replace(/\d+/,function(qe){return parseInt(qe)-1}),Fe=S(B,{tickformat:De});return function(qe){return Math.abs(qe)<1?v.tickText(Fe,qe).text:ye(qe)}}else return ye}t(he,"transitionFormat");function re(){var de=S(B,{tickformat:O.number.valueformat},O._range);de.setScale(),v.prepTicks(de);var ye=t(function(qe){return v.tickText(de,qe).text},"bignumberFmt"),we=O.number.suffix,Ee=O.number.prefix,De=te.select("text.number");function Fe(){var qe=typeof R[0].y=="number"?Ee+ye(R[0].y)+we:"-";De.text(qe).call(u.font,O.number.font).call(h.convertToTspans,B)}return t(Fe,"writeNumber"),T(G)?De.transition().duration(G.duration).ease(G.easing).each("end",function(){Fe(),$&&$()}).each("interrupt",function(){Fe(),$&&$()}).attrTween("text",function(){var qe=e.select(this),Je=n(R[0].lastY,R[0].y);O._lastValue=R[0].y;var Ge=he(O.number.valueformat,ye,R[0].lastY,R[0].y);return function(et){qe.text(Ee+Ge(Je(et))+we)}}):Fe(),ee=P(Ee+ye(R[0].y)+we,O.number.font,X,B),De}t(re,"drawBignumber");function ae(){var de=S(B,{tickformat:O.delta.valueformat},O._range);de.setScale(),v.prepTicks(de);var ye=t(function(et){return v.tickText(de,et).text},"deltaFmt"),we=O.delta.suffix,Ee=O.delta.prefix,De=t(function(et){var Ue=O.delta.relative?et.relativeDelta:et.delta;return Ue},"deltaValue"),Fe=t(function(et,Ue){return et===0||typeof et!="number"||isNaN(et)?"-":(et>0?O.delta.increasing.symbol:O.delta.decreasing.symbol)+Ee+Ue(et)+we},"deltaFormatText"),qe=t(function(et){return et.delta>=0?O.delta.increasing.color:O.delta.decreasing.color},"deltaFill");O._deltaLastValue===void 0&&(O._deltaLastValue=De(R[0]));var Je=te.select("text.delta");Je.call(u.font,O.delta.font).call(p.fill,qe({delta:O._deltaLastValue}));function Ge(){Je.text(Fe(De(R[0]),ye)).call(p.fill,qe(R[0])).call(h.convertToTspans,B)}return t(Ge,"writeDelta"),T(G)?Je.transition().duration(G.duration).ease(G.easing).tween("text",function(){var et=e.select(this),Ue=De(R[0]),Ye=O._deltaLastValue,$e=he(O.delta.valueformat,ye,Ye,Ue),Ct=n(Ye,Ue);return O._deltaLastValue=Ue,function(It){et.text(Fe(Ct(It),$e)),et.call(p.fill,qe({delta:Ct(It)}))}}).each("end",function(){Ge(),$&&$()}).each("interrupt",function(){Ge(),$&&$()}):Ge(),ie=P(Fe(De(R[0]),ye),O.delta.font,X,B),Je}t(ae,"drawDelta");var fe=O.mode+O.align,ce;if(O._hasDelta&&(ce=ae(),fe+=O.delta.position+O.delta.font.size+O.delta.font.family+O.delta.valueformat,fe+=O.delta.increasing.symbol+O.delta.decreasing.symbol,se=ie),O._hasNumber&&(re(),fe+=O.number.font.size+O.number.font.family+O.number.valueformat+O.number.suffix+O.number.prefix,se=ee),O._hasDelta&&O._hasNumber){var xe=[(ee.left+ee.right)/2,(ee.top+ee.bottom)/2],Te=[(ie.left+ie.right)/2,(ie.top+ie.bottom)/2],me,pe,oe=.75*O.delta.font.size;O.delta.position==="left"&&(me=D(O,"deltaPos",0,-1*(ee.width*m[O.align]+ie.width*(1-m[O.align])+oe),fe,Math.min),pe=xe[1]-Te[1],se={width:ee.width+ie.width+oe,height:Math.max(ee.height,ie.height),left:ie.left+me,right:ee.right,top:Math.min(ee.top,ie.top+pe),bottom:Math.max(ee.bottom,ie.bottom+pe)}),O.delta.position==="right"&&(me=D(O,"deltaPos",0,ee.width*(1-m[O.align])+ie.width*m[O.align]+oe,fe,Math.max),pe=xe[1]-Te[1],se={width:ee.width+ie.width+oe,height:Math.max(ee.height,ie.height),left:ee.left,right:ie.right+me,top:Math.min(ee.top,ie.top+pe),bottom:Math.max(ee.bottom,ie.bottom+pe)}),O.delta.position==="bottom"&&(me=null,pe=ie.height,se={width:Math.max(ee.width,ie.width),height:ee.height+ie.height,left:Math.min(ee.left,ie.left),right:Math.max(ee.right,ie.right),top:ee.bottom-ee.height,bottom:ee.bottom+ie.height}),O.delta.position==="top"&&(me=null,pe=ee.top,se={width:Math.max(ee.width,ie.width),height:ee.height+ie.height,left:Math.min(ee.left,ie.left),right:Math.max(ee.right,ie.right),top:ee.bottom-ee.height-ie.height,bottom:ee.bottom}),ce.attr({dx:me,dy:pe})}(O._hasNumber||O._hasDelta)&&te.attr("transform",function(){var de=F.numbersScaler(se);fe+=de[2];var ye=D(O,"numbersScale",1,de[0],fe,Math.min),we;O._scaleNumbers||(ye=1),O._isAngular?we=H-ye*se.bottom:we=H-ye*(se.top+se.bottom)/2,O._numbersTop=ye*se.top+we;var Ee=se[j];j==="center"&&(Ee=(se.left+se.right)/2);var De=q-ye*Ee;return De=D(O,"numbersTranslate",0,De,fe,Math.max),o(De,we)+s(ye)})}t(w,"drawNumbers");function x(B){B.each(function(z){p.stroke(e.select(this),z.line.color)}).each(function(z){p.fill(e.select(this),z.color)}).style("stroke-width",function(z){return z.line.width})}t(x,"styleShape");function A(B,z,R){return function(){var F=r(z,R);return function(O){return B.endAngle(F(O))()}}}t(A,"arcTween");function S(B,z,R){var F=B._fullLayout,O=i.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},z),q={type:"linear",_id:"x"+z._id},H={letter:"x",font:F.font,noHover:!0,noTickson:!0};function j(X,G){return i.coerce(O,q,g,X,G)}return t(j,"coerce"),c(O,q,j,H,F),d(O,q,j,H),q}t(S,"mockAxis");function k(B,z,R){var F=Math.min(z/B.width,R/B.height);return[F,B,z+"x"+R]}t(k,"fitTextInsideBox");function L(B,z){var R=Math.sqrt(B.width/2*(B.width/2)+B.height*B.height),F=z/R;return[F,B,z]}t(L,"fitTextInsideCircle");function P(B,z,R,F){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),q=e.select(O);return q.text(B).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",B).call(h.convertToTspans,F).call(u.font,z),u.bBox(q.node())}t(P,"measureText");function D(B,z,R,F,O,q){var H="_cache"+z;B[H]&&B[H].key===O||(B[H]={key:O,value:R});var j=i.aggNums(q,null,[B[H].value,F],2);return B[H].value=j,j}return t(D,"cache"),ZD}t(tqe,"requirePlot$9");var KD,Ore;function rqe(){return Ore||(Ore=1,KD={moduleType:"trace",name:"indicator",basePlotModule:JNe(),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:Upe(),supplyDefaults:QNe().supplyDefaults,calc:eqe().calc,plot:tqe(),meta:{description:["An indicator is used to visualize a single `value` along with some","contextual information such as `steps` or a `threshold`, using a","combination of three visual elements: a number, a delta, and/or a gauge.","Deltas are taken with respect to a `reference`.","Gauges can be either angular or bullet (aka linear) gauges."].join(" ")}}),KD}t(rqe,"requireIndicator$1");var Nre;function aqe(){return Nre||(Nre=1,function(e){e.exports=rqe()}(VD)),VD.exports}t(aqe,"requireIndicator");var JD={exports:{}},QD={exports:{}},qre;function $pe(){if(qre)return QD.exports;qre=1;var e=Ry,r=cn.extendFlat,n=_o.overrideAll,i=Ho,s=vo.attributes,o=Vo.descriptionOnlyNumbers,a=QD.exports=n({domain:s({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null,description:["The width of columns expressed as a ratio. Columns fill the available width","in proportion of their specified column widths."].join(" ")},columnorder:{valType:"data_array",description:["Specifies the rendered order of the data columns; for example, a value `2` at position `0`","means that column index `0` in the data will be rendered as the","third column, as columns have an index base of zero."].join(" ")},header:{values:{valType:"data_array",dflt:[],description:["Header cell values. `values[m][n]` represents the value of the `n`th point in column `m`,","therefore the `values[m]` vector length for all columns must be the same (longer vectors","will be truncated). Each value must be a finite number or a string."].join(" ")},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null,description:"Prefix for cell values."},suffix:{valType:"string",arrayOk:!0,dflt:null,description:"Suffix for cell values."},height:{valType:"number",dflt:28,description:"The height of cells."},align:r({},e.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white",description:["Sets the cell fill color. It accepts either a specific color","or an array of colors or a 2D array of colors."].join(" ")}},font:r({},i({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[],description:["Cell values. `values[m][n]` represents the value of the `n`th point in column `m`,","therefore the `values[m]` vector length for all columns must be the same (longer vectors","will be truncated). Each value must be a finite number or a string."].join(" ")},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null,description:"Prefix for cell values."},suffix:{valType:"string",arrayOk:!0,dflt:null,description:"Suffix for cell values."},height:{valType:"number",dflt:20,description:"The height of cells."},align:r({},e.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white",description:["Sets the cell fill color. It accepts either a specific color","or an array of colors or a 2D array of colors."].join(" ")}},font:r({},i({arrayOk:!0}))}},"calc","from-root");return a.transforms=void 0,QD.exports}t($pe,"requireAttributes$9");var eI,Ure;function nqe(){if(Ure)return eI;Ure=1;var e=Nt.exports,r=$pe(),n=vo.defaults;function i(s,o){for(var a=s.columnorder||[],l=s.header.values.length,u=a.slice(0,l),f=u.slice().sort(function(c,d){return c-d}),h=u.map(function(c){return f.indexOf(c)}),v=h.length;v<l;v++)h.push(v);o("columnorder",h)}return t(i,"defaultColumnOrder"),eI=t(function(o,a,l,u){function f(h,v){return e.coerce(o,a,r,h,v)}t(f,"coerce"),n(a,u,f),f("columnwidth"),f("header.values"),f("header.format"),f("header.align"),f("header.prefix"),f("header.suffix"),f("header.height"),f("header.line.width"),f("header.line.color"),f("header.fill.color"),e.coerceFont(f,"header.font",e.extendFlat({},u.font)),i(a,f),f("cells.values"),f("cells.format"),f("cells.align"),f("cells.prefix"),f("cells.suffix"),f("cells.height"),f("cells.line.width"),f("cells.line.color"),f("cells.fill.color"),e.coerceFont(f,"cells.font",e.extendFlat({},u.font)),a._length=null},"supplyDefaults"),eI}t(nqe,"requireDefaults$9");var tI,Hre;function iqe(){if(Hre)return tI;Hre=1;var e=cd().wrap;return tI=t(function(){return e({})},"calc"),tI}t(iqe,"requireCalc$9");var rI,$re;function Vpe(){return $re||($re=1,rI={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}),rI}t(Vpe,"requireConstants$3");var aI,Vre;function oqe(){if(Vre)return aI;Vre=1;var e=Vpe(),r=cn.extendFlat,n=xn;aI=t(function(c,d){var g=o(d.cells.values),p=t(function(H){return H.slice(d.header.values.length,H.length)},"slicer"),b=o(d.header.values);b.length&&!b[0].length&&(b[0]=[""],b=o(b));var m=b.concat(p(g).map(function(){return a((b[0]||[""]).length)})),y=d.domain,T=Math.floor(c._fullLayout._size.w*(y.x[1]-y.x[0])),_=Math.floor(c._fullLayout._size.h*(y.y[1]-y.y[0])),M=d.header.values.length?m[0].map(function(){return d.header.height}):[e.emptyHeaderHeight],w=g.length?g[0].map(function(){return d.cells.height}):[],x=M.reduce(s,0),A=_-x,S=A+e.uplift,k=f(w,S),L=f(M,x),P=u(L,[]),D=u(k,P),B={},z=d._fullInput.columnorder.concat(p(g.map(function(H,j){return j}))),R=m.map(function(H,j){var X=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(j,d.columnwidth.length-1)]:d.columnwidth;return n(X)?Number(X):1}),F=R.reduce(s,0);R=R.map(function(H){return H/F*T});var O=Math.max(i(d.header.line.width),i(d.cells.line.width)),q={key:d.uid+c._context.staticPlot,translateX:y.x[0]*c._fullLayout._size.w,translateY:c._fullLayout._size.h*(1-y.y[1]),size:c._fullLayout._size,width:T,maxLineWidth:O,height:_,columnOrder:z,groupHeight:_,rowBlocks:D,headerRowBlocks:P,scrollY:0,cells:r({},d.cells,{values:g}),headerCells:r({},d.header,{values:m}),gdColumns:m.map(function(H){return H[0]}),gdColumnsOriginalOrder:m.map(function(H){return H[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:m.map(function(H,j){var X=B[H];B[H]=(X||0)+1;var G=H+"__"+B[H];return{key:G,label:H,specIndex:j,xIndex:z[j],xScale:l,x:void 0,calcdata:void 0,columnWidth:R[j]}})};return q.columns.forEach(function(H){H.calcdata=q,H.x=l(H)}),q},"calc");function i(v){if(Array.isArray(v)){for(var c=0,d=0;d<v.length;d++)c=Math.max(c,i(v[d]));return c}return v}t(i,"arrayMax");function s(v,c){return v+c}t(s,"sum");function o(v){var c=v.slice(),d=1/0,g=0,p;for(p=0;p<c.length;p++)Array.isArray(c[p])||(c[p]=[c[p]]),d=Math.min(d,c[p].length),g=Math.max(g,c[p].length);if(d!==g)for(p=0;p<c.length;p++){var b=g-c[p].length;b&&(c[p]=c[p].concat(a(b)))}return c}t(o,"squareStringMatrix");function a(v){for(var c=new Array(v),d=0;d<v;d++)c[d]="";return c}t(a,"emptyStrings");function l(v){return v.calcdata.columns.reduce(function(c,d){return d.xIndex<v.xIndex?c+d.columnWidth:c},0)}t(l,"xScale");function u(v,c){var d=Object.keys(v);return d.map(function(g){return r({},v[g],{auxiliaryBlocks:c})})}t(u,"makeRowBlock");function f(v,c){for(var d={},g,p=0,b=0,m=h(),y=0,T=0,_=0;_<v.length;_++)g=v[_],m.rows.push({rowIndex:_,rowHeight:g}),b+=g,(b>=c||_===v.length-1)&&(d[p]=m,m.key=T++,m.firstRowIndex=y,m.lastRowIndex=_,m=h(),p+=b,y=_+1,b=0);return d}t(f,"makeAnchorToRowBlock");function h(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}return t(h,"makeIdentity"),aI}t(oqe,"requireData_preparation_helper");var i_={},Gre;function sqe(){if(Gre)return i_;Gre=1;var e=cn.extendFlat;i_.splitToPanels=function(n){var i=[0,0],s=e({},n,{key:"header",type:"header",page:0,prevPages:i,currentRepaint:[null,null],dragHandle:!0,values:n.calcdata.headerCells.values[n.specIndex],rowBlocks:n.calcdata.headerRowBlocks,calcdata:e({},n.calcdata,{cells:n.calcdata.headerCells})}),o=e({},n,{key:"cells1",type:"cells",page:0,prevPages:i,currentRepaint:[null,null],dragHandle:!1,values:n.calcdata.cells.values[n.specIndex],rowBlocks:n.calcdata.rowBlocks}),a=e({},n,{key:"cells2",type:"cells",page:1,prevPages:i,currentRepaint:[null,null],dragHandle:!1,values:n.calcdata.cells.values[n.specIndex],rowBlocks:n.calcdata.rowBlocks});return[o,a,s]},i_.splitToCells=function(n){var i=r(n);return(n.values||[]).slice(i[0],i[1]).map(function(s,o){var a=typeof s=="string"&&s.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:o+a,key:i[0]+o,column:n,calcdata:n.calcdata,page:n.page,rowBlocks:n.rowBlocks,value:s}})};function r(n){var i=n.rowBlocks[n.page],s=i?i.rows[0].rowIndex:0,o=i?s+i.rows.length:0;return[s,o]}return t(r,"rowFromTo"),i_}t(sqe,"requireData_split_helpers");var nI,jre;function Gpe(){if(jre)return nI;jre=1;var e=Vpe(),r=Va.exports,n=Nt.exports,i=n.numberFormat,s=cd(),o=bn.exports,a=Ji,l=Nt.exports.raiseToTop,u=Nt.exports.strTranslate,f=Nt.exports.cancelTransition,h=oqe(),v=sqe(),c=$a.exports;nI=t(function(fe,ce){var xe=!fe._context.staticPlot,Te=fe._fullLayout._paper.selectAll("."+e.cn.table).data(ce.map(function(Ue){var Ye=s.unwrap(Ue),$e=Ye.trace;return h(fe,$e)}),s.keyFun);Te.exit().remove(),Te.enter().append("g").classed(e.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),Te.attr("width",function(Ue){return Ue.width+Ue.size.l+Ue.size.r}).attr("height",function(Ue){return Ue.height+Ue.size.t+Ue.size.b}).attr("transform",function(Ue){return u(Ue.translateX,Ue.translateY)});var me=Te.selectAll("."+e.cn.tableControlView).data(s.repeat,s.keyFun),pe=me.enter().append("g").classed(e.cn.tableControlView,!0).style("box-sizing","content-box");if(xe){var oe="onwheel"in document?"wheel":"mousewheel";pe.on("mousemove",function(Ue){me.filter(function(Ye){return Ue===Ye}).call(m,fe)}).on(oe,function(Ue){if(!Ue.scrollbarState.wheeling){Ue.scrollbarState.wheeling=!0;var Ye=Ue.scrollY+r.event.deltaY,$e=X(fe,me,null,Ye)(Ue);$e||(r.event.stopPropagation(),r.event.preventDefault()),Ue.scrollbarState.wheeling=!1}}).call(m,fe,!0)}me.attr("transform",function(Ue){return u(Ue.size.l,Ue.size.t)});var de=me.selectAll("."+e.cn.scrollBackground).data(s.repeat,s.keyFun);de.enter().append("rect").classed(e.cn.scrollBackground,!0).attr("fill","none"),de.attr("width",function(Ue){return Ue.width}).attr("height",function(Ue){return Ue.height}),me.each(function(Ue){o.setClipUrl(r.select(this),g(fe,Ue),fe)});var ye=me.selectAll("."+e.cn.yColumn).data(function(Ue){return Ue.columns},s.keyFun);ye.enter().append("g").classed(e.cn.yColumn,!0),ye.exit().remove(),ye.attr("transform",function(Ue){return u(Ue.x,0)}),xe&&ye.call(r.behavior.drag().origin(function(Ue){var Ye=r.select(this);return R(Ye,Ue,-e.uplift),l(this),Ue.calcdata.columnDragInProgress=!0,m(me.filter(function($e){return Ue.calcdata.key===$e.key}),fe),Ue}).on("drag",function(Ue){var Ye=r.select(this),$e=t(function(Vt){return(Ue===Vt?r.event.x:Vt.x)+Vt.columnWidth/2},"getter");Ue.x=Math.max(-e.overdrag,Math.min(Ue.calcdata.width+e.overdrag-Ue.columnWidth,r.event.x));var Ct=b(ye).filter(function(Vt){return Vt.calcdata.key===Ue.calcdata.key}),It=Ct.sort(function(Vt,$t){return $e(Vt)-$e($t)});It.forEach(function(Vt,$t){Vt.xIndex=$t,Vt.x=Ue===Vt?Vt.x:Vt.xScale(Vt)}),ye.filter(function(Vt){return Ue!==Vt}).transition().ease(e.transitionEase).duration(e.transitionDuration).attr("transform",function(Vt){return u(Vt.x,0)}),Ye.call(f).attr("transform",u(Ue.x,-e.uplift))}).on("dragend",function(Ue){var Ye=r.select(this),$e=Ue.calcdata;Ue.x=Ue.xScale(Ue),Ue.calcdata.columnDragInProgress=!1,R(Ye,Ue,0),B(fe,$e,$e.columns.map(function(Ct){return Ct.xIndex}))})),ye.each(function(Ue){o.setClipUrl(r.select(this),p(fe,Ue),fe)});var we=ye.selectAll("."+e.cn.columnBlock).data(v.splitToPanels,s.keyFun);we.enter().append("g").classed(e.cn.columnBlock,!0).attr("id",function(Ue){return Ue.key}),we.style("cursor",function(Ue){return Ue.dragHandle?"ew-resize":Ue.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Ee=we.filter(O),De=we.filter(F);xe&&De.call(r.behavior.drag().origin(function(Ue){return r.event.stopPropagation(),Ue}).on("drag",X(fe,me,-1)).on("dragend",function(){})),y(fe,me,Ee,we),y(fe,me,De,we);var Fe=me.selectAll("."+e.cn.scrollAreaClip).data(s.repeat,s.keyFun);Fe.enter().append("clipPath").classed(e.cn.scrollAreaClip,!0).attr("id",function(Ue){return g(fe,Ue)});var qe=Fe.selectAll("."+e.cn.scrollAreaClipRect).data(s.repeat,s.keyFun);qe.enter().append("rect").classed(e.cn.scrollAreaClipRect,!0).attr("x",-e.overdrag).attr("y",-e.uplift).attr("fill","none"),qe.attr("width",function(Ue){return Ue.width+2*e.overdrag}).attr("height",function(Ue){return Ue.height+e.uplift});var Je=ye.selectAll("."+e.cn.columnBoundary).data(s.repeat,s.keyFun);Je.enter().append("g").classed(e.cn.columnBoundary,!0);var Ge=ye.selectAll("."+e.cn.columnBoundaryClippath).data(s.repeat,s.keyFun);Ge.enter().append("clipPath").classed(e.cn.columnBoundaryClippath,!0),Ge.attr("id",function(Ue){return p(fe,Ue)});var et=Ge.selectAll("."+e.cn.columnBoundaryRect).data(s.repeat,s.keyFun);et.enter().append("rect").classed(e.cn.columnBoundaryRect,!0).attr("fill","none"),et.attr("width",function(Ue){return Ue.columnWidth+2*d(Ue)}).attr("height",function(Ue){return Ue.calcdata.height+2*d(Ue)+e.uplift}).attr("x",function(Ue){return-d(Ue)}).attr("y",function(Ue){return-d(Ue)}),j(null,De,me)},"plot");function d(ae){return Math.ceil(ae.calcdata.maxLineWidth/2)}t(d,"roundHalfWidth");function g(ae,fe){return"clip"+ae._fullLayout._uid+"_scrollAreaBottomClip_"+fe.key}t(g,"scrollAreaBottomClipKey");function p(ae,fe){return"clip"+ae._fullLayout._uid+"_columnBoundaryClippath_"+fe.calcdata.key+"_"+fe.specIndex}t(p,"columnBoundaryClipKey");function b(ae){return[].concat.apply([],ae.map(function(fe){return fe})).map(function(fe){return fe.__data__})}t(b,"flatData");function m(ae,fe,ce){function xe(ye){var we=ye.rowBlocks;return se(we,we.length-1)+(we.length?W(we[we.length-1],1/0):1)}t(xe,"calcTotalHeight");var Te=ae.selectAll("."+e.cn.scrollbarKit).data(s.repeat,s.keyFun);Te.enter().append("g").classed(e.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),Te.each(function(ye){var we=ye.scrollbarState;we.totalHeight=xe(ye),we.scrollableAreaHeight=ye.groupHeight-q(ye),we.currentlyVisibleHeight=Math.min(we.totalHeight,we.scrollableAreaHeight),we.ratio=we.currentlyVisibleHeight/we.totalHeight,we.barLength=Math.max(we.ratio*we.currentlyVisibleHeight,e.goldenRatio*e.scrollbarWidth),we.barWiggleRoom=we.currentlyVisibleHeight-we.barLength,we.wiggleRoom=Math.max(0,we.totalHeight-we.scrollableAreaHeight),we.topY=we.barWiggleRoom===0?0:ye.scrollY/we.wiggleRoom*we.barWiggleRoom,we.bottomY=we.topY+we.barLength,we.dragMultiplier=we.wiggleRoom/we.barWiggleRoom}).attr("transform",function(ye){var we=ye.width+e.scrollbarWidth/2+e.scrollbarOffset;return u(we,q(ye))});var me=Te.selectAll("."+e.cn.scrollbar).data(s.repeat,s.keyFun);me.enter().append("g").classed(e.cn.scrollbar,!0);var pe=me.selectAll("."+e.cn.scrollbarSlider).data(s.repeat,s.keyFun);pe.enter().append("g").classed(e.cn.scrollbarSlider,!0),pe.attr("transform",function(ye){return u(0,ye.scrollbarState.topY||0)});var oe=pe.selectAll("."+e.cn.scrollbarGlyph).data(s.repeat,s.keyFun);oe.enter().append("line").classed(e.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",e.scrollbarWidth).attr("stroke-linecap","round").attr("y1",e.scrollbarWidth/2),oe.attr("y2",function(ye){return ye.scrollbarState.barLength-e.scrollbarWidth/2}).attr("stroke-opacity",function(ye){return ye.columnDragInProgress||!ye.scrollbarState.barWiggleRoom||ce?0:.4}),oe.transition().delay(0).duration(0),oe.transition().delay(e.scrollbarHideDelay).duration(e.scrollbarHideDuration).attr("stroke-opacity",0);var de=me.selectAll("."+e.cn.scrollbarCaptureZone).data(s.repeat,s.keyFun);de.enter().append("line").classed(e.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",e.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ye){var we=r.event.y,Ee=this.getBoundingClientRect(),De=ye.scrollbarState,Fe=we-Ee.top,qe=r.scale.linear().domain([0,De.scrollableAreaHeight]).range([0,De.totalHeight]).clamp(!0);De.topY<=Fe&&Fe<=De.bottomY||X(fe,ae,null,qe(Fe-De.barLength/2))(ye)}).call(r.behavior.drag().origin(function(ye){return r.event.stopPropagation(),ye.scrollbarState.scrollbarScrollInProgress=!0,ye}).on("drag",X(fe,ae)).on("dragend",function(){})),de.attr("y2",function(ye){return ye.scrollbarState.scrollableAreaHeight}),fe._context.staticPlot&&(oe.remove(),de.remove())}t(m,"renderScrollbarKit");function y(ae,fe,ce,xe){var Te=T(ce),me=_(Te);A(me);var pe=M(me);k(pe);var oe=x(me),de=w(oe);S(de),L(de,fe,xe,ae),ie(me)}t(y,"renderColumnCellTree");function T(ae){var fe=ae.selectAll("."+e.cn.columnCells).data(s.repeat,s.keyFun);return fe.enter().append("g").classed(e.cn.columnCells,!0),fe.exit().remove(),fe}t(T,"renderColumnCells");function _(ae){var fe=ae.selectAll("."+e.cn.columnCell).data(v.splitToCells,function(ce){return ce.keyWithinBlock});return fe.enter().append("g").classed(e.cn.columnCell,!0),fe.exit().remove(),fe}t(_,"renderColumnCell");function M(ae){var fe=ae.selectAll("."+e.cn.cellRect).data(s.repeat,function(ce){return ce.keyWithinBlock});return fe.enter().append("rect").classed(e.cn.cellRect,!0),fe}t(M,"renderCellRect");function w(ae){var fe=ae.selectAll("."+e.cn.cellText).data(s.repeat,function(ce){return ce.keyWithinBlock});return fe.enter().append("text").classed(e.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){r.event.stopPropagation()}),fe}t(w,"renderCellText");function x(ae){var fe=ae.selectAll("."+e.cn.cellTextHolder).data(s.repeat,function(ce){return ce.keyWithinBlock});return fe.enter().append("g").classed(e.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),fe}t(x,"renderCellTextHolder");function A(ae){ae.each(function(fe,ce){var xe=fe.calcdata.cells.font,Te=fe.column.specIndex,me={size:z(xe.size,Te,ce),color:z(xe.color,Te,ce),family:z(xe.family,Te,ce)};fe.rowNumber=fe.key,fe.align=z(fe.calcdata.cells.align,Te,ce),fe.cellBorderWidth=z(fe.calcdata.cells.line.width,Te,ce),fe.font=me})}t(A,"supplyStylingValues");function S(ae){ae.each(function(fe){o.font(r.select(this),fe.font)})}t(S,"setFont");function k(ae){ae.attr("width",function(fe){return fe.column.columnWidth}).attr("stroke-width",function(fe){return fe.cellBorderWidth}).each(function(fe){var ce=r.select(this);c.stroke(ce,z(fe.calcdata.cells.line.color,fe.column.specIndex,fe.rowNumber)),c.fill(ce,z(fe.calcdata.cells.fill.color,fe.column.specIndex,fe.rowNumber))})}t(k,"sizeAndStyleRect");function L(ae,fe,ce,xe){ae.text(function(Te){var me=Te.column.specIndex,pe=Te.rowNumber,oe=Te.value,de=typeof oe=="string",ye=de&&oe.match(/<br>/i),we=!de||ye;Te.mayHaveMarkup=de&&oe.match(/[<&>]/);var Ee=P(oe);Te.latex=Ee;var De=Ee?"":z(Te.calcdata.cells.prefix,me,pe)||"",Fe=Ee?"":z(Te.calcdata.cells.suffix,me,pe)||"",qe=Ee?null:z(Te.calcdata.cells.format,me,pe)||null,Je=De+(qe?i(qe)(Te.value):Te.value)+Fe,Ge;Te.wrappingNeeded=!Te.wrapped&&!we&&!Ee&&(Ge=D(Je)),Te.cellHeightMayIncrease=ye||Ee||Te.mayHaveMarkup||(Ge===void 0?D(Je):Ge),Te.needsConvertToTspans=Te.mayHaveMarkup||Te.wrappingNeeded||Te.latex;var et;if(Te.wrappingNeeded){var Ue=e.wrapSplitCharacter===" "?Je.replace(/<a href=/ig,"<a_href="):Je,Ye=Ue.split(e.wrapSplitCharacter),$e=e.wrapSplitCharacter===" "?Ye.map(function(Ct){return Ct.replace(/<a_href=/ig,"<a href=")}):Ye;Te.fragments=$e.map(function(Ct){return{text:Ct,width:null}}),Te.fragments.push({fragment:e.wrapSpacer,width:null}),et=$e.join(e.lineBreaker)+e.lineBreaker+e.wrapSpacer}else delete Te.fragments,et=Je;return et}).attr("dy",function(Te){return Te.needsConvertToTspans?0:"0.75em"}).each(function(Te){var me=this,pe=r.select(me),oe=Te.wrappingNeeded?$:te;Te.needsConvertToTspans?a.convertToTspans(pe,xe,oe(ce,me,fe,xe,Te)):r.select(me.parentNode).attr("transform",function(de){return u(ee(de),e.cellPad)}).attr("text-anchor",function(de){return{left:"start",center:"middle",right:"end"}[de.align]})})}t(L,"populateCellText");function P(ae){return typeof ae=="string"&&ae.match(e.latexCheck)}t(P,"isLatex");function D(ae){return ae.indexOf(e.wrapSplitCharacter)!==-1}t(D,"hasWrapCharacter");function B(ae,fe,ce){var xe=fe.gdColumnsOriginalOrder;fe.gdColumns.sort(function(Te,me){return ce[xe.indexOf(Te)]-ce[xe.indexOf(me)]}),fe.columnorder=ce,ae.emit("plotly_restyle")}t(B,"columnMoved");function z(ae,fe,ce){if(Array.isArray(ae)){var xe=ae[Math.min(fe,ae.length-1)];return Array.isArray(xe)?xe[Math.min(ce,xe.length-1)]:xe}else return ae}t(z,"gridPick");function R(ae,fe,ce){ae.transition().ease(e.releaseTransitionEase).duration(e.releaseTransitionDuration).attr("transform",u(fe.x,ce))}t(R,"easeColumn");function F(ae){return ae.type==="cells"}t(F,"cellsBlock");function O(ae){return ae.type==="header"}t(O,"headerBlock");function q(ae){var fe=ae.rowBlocks.length?ae.rowBlocks[0].auxiliaryBlocks:[];return fe.reduce(function(ce,xe){return ce+W(xe,1/0)},0)}t(q,"headerHeight");function H(ae,fe,ce){for(var xe=[],Te=0,me=0;me<ae.length;me++){for(var pe=ae[me],oe=pe.rows,de=0,ye=0;ye<oe.length;ye++)de+=oe[ye].rowHeight;pe.allRowsHeight=de;var we=Te+de,Ee=fe,De=Ee+ce;Ee<we&&De>Te&&xe.push(me),Te+=de}return xe}t(H,"findPagesAndCacheHeights");function j(ae,fe,ce){var xe=b(fe)[0];if(xe!==void 0){var Te=xe.rowBlocks,me=xe.calcdata,pe=se(Te,Te.length),oe=xe.calcdata.groupHeight-q(xe),de=me.scrollY=Math.max(0,Math.min(pe-oe,me.scrollY)),ye=H(Te,de,oe);ye.length===1&&(ye[0]===Te.length-1?ye.unshift(ye[0]-1):ye.push(ye[0]+1)),ye[0]%2&&ye.reverse(),fe.each(function(we,Ee){we.page=ye[Ee],we.scrollY=de}),fe.attr("transform",function(we){var Ee=se(we.rowBlocks,we.page)-we.scrollY;return u(0,Ee)}),ae&&(G(ae,ce,fe,ye,xe.prevPages,xe,0),G(ae,ce,fe,ye,xe.prevPages,xe,1),m(ce,ae))}}t(j,"updateBlockYPosition");function X(ae,fe,ce,xe){return t(function(me){var pe=me.calcdata?me.calcdata:me,oe=fe.filter(function(Ee){return pe.key===Ee.key}),de=ce||pe.scrollbarState.dragMultiplier,ye=pe.scrollY;pe.scrollY=xe===void 0?pe.scrollY+de*r.event.dy:xe;var we=oe.selectAll("."+e.cn.yColumn).selectAll("."+e.cn.columnBlock).filter(F);return j(ae,we,oe),pe.scrollY===ye},"dragRow")}t(X,"makeDragRow");function G(ae,fe,ce,xe,Te,me,pe){var oe=xe[pe]!==Te[pe];oe&&(clearTimeout(me.currentRepaint[pe]),me.currentRepaint[pe]=setTimeout(function(){var de=ce.filter(function(ye,we){return we===pe&&xe[we]!==Te[we]});y(ae,fe,de,ce),Te[pe]=xe[pe]}))}t(G,"conditionalPanelRerender");function $(ae,fe,ce,xe){return t(function(){var me=r.select(fe.parentNode);me.each(function(pe){var oe=pe.fragments;me.selectAll("tspan.line").each(function(Je,Ge){oe[Ge].width=this.getComputedTextLength()});var de=oe[oe.length-1].width,ye=oe.slice(0,-1),we=[],Ee,De,Fe=0,qe=pe.column.columnWidth-2*e.cellPad;for(pe.value="";ye.length;)Ee=ye.shift(),De=Ee.width+de,Fe+De>qe&&(pe.value+=we.join(e.wrapSpacer)+e.lineBreaker,we=[],Fe=0),we.push(Ee.text),Fe+=De;Fe&&(pe.value+=we.join(e.wrapSpacer)),pe.wrapped=!0}),me.selectAll("tspan.line").remove(),L(me.select("."+e.cn.cellText),ce,ae,xe),r.select(fe.parentNode.parentNode).call(ie)},"wrapText")}t($,"wrapTextMaker");function te(ae,fe,ce,xe,Te){return t(function(){if(!Te.settledY){var pe=r.select(fe.parentNode),oe=he(Te),de=Te.key-oe.firstRowIndex,ye=oe.rows[de].rowHeight,we=Te.cellHeightMayIncrease?fe.parentNode.getBoundingClientRect().height+2*e.cellPad:ye,Ee=Math.max(we,ye),De=Ee-oe.rows[de].rowHeight;De&&(oe.rows[de].rowHeight=Ee,ae.selectAll("."+e.cn.columnCell).call(ie),j(null,ae.filter(F),0),m(ce,xe,!0)),pe.attr("transform",function(){var Fe=this,qe=Fe.parentNode,Je=qe.getBoundingClientRect(),Ge=r.select(Fe.parentNode).select("."+e.cn.cellRect).node().getBoundingClientRect(),et=Fe.transform.baseVal.consolidate(),Ue=Ge.top-Je.top+(et?et.matrix.f:e.cellPad);return u(ee(Te,r.select(Fe.parentNode).select("."+e.cn.cellTextHolder).node().getBoundingClientRect().width),Ue)}),Te.settledY=!0}},"updateYPosition")}t(te,"updateYPositionMaker");function ee(ae,fe){switch(ae.align){case"left":return e.cellPad;case"right":return ae.column.columnWidth-(fe||0)-e.cellPad;case"center":return(ae.column.columnWidth-(fe||0))/2;default:return e.cellPad}}t(ee,"xPosition");function ie(ae){ae.attr("transform",function(fe){var ce=fe.rowBlocks[0].auxiliaryBlocks.reduce(function(pe,oe){return pe+W(oe,1/0)},0),xe=he(fe),Te=W(xe,fe.key),me=Te+ce;return u(0,me)}).selectAll("."+e.cn.cellRect).attr("height",function(fe){return re(he(fe),fe.key).rowHeight})}t(ie,"setCellHeightAndPositionY");function se(ae,fe){for(var ce=0,xe=fe-1;xe>=0;xe--)ce+=ne(ae[xe]);return ce}t(se,"firstRowAnchor");function W(ae,fe){for(var ce=0,xe=0;xe<ae.rows.length&&ae.rows[xe].rowIndex<fe;xe++)ce+=ae.rows[xe].rowHeight;return ce}t(W,"rowsHeight");function ne(ae){var fe=ae.allRowsHeight;if(fe!==void 0)return fe;for(var ce=0,xe=0;xe<ae.rows.length;xe++)ce+=ae.rows[xe].rowHeight;return ae.allRowsHeight=ce,ce}t(ne,"allRowsHeight");function he(ae){return ae.rowBlocks[ae.page]}t(he,"getBlock");function re(ae,fe){return ae.rows[fe-ae.firstRowIndex]}return t(re,"getRow"),nI}t(Gpe,"requirePlot$8");var Ym={},Yre;function lqe(){if(Yre)return Ym;Yre=1;var e=Ns.getModuleCalcData,r=Gpe(),n="table";return Ym.name=n,Ym.plot=function(i){var s=e(i.calcdata,n)[0];s.length&&r(i,s)},Ym.clean=function(i,s,o,a){var l=a._has&&a._has(n),u=s._has&&s._has(n);l&&!u&&a._paperdiv.selectAll(".table").remove()},Ym}t(lqe,"requireBase_plot");var iI,Wre;function uqe(){return Wre||(Wre=1,iI={attributes:$pe(),supplyDefaults:nqe(),calc:iqe(),plot:Gpe(),moduleType:"trace",name:"table",basePlotModule:lqe(),categories:["noOpacity"],meta:{description:["Table view for detailed data viewing.","The data are arranged in a grid of rows and columns.","Most styling can be specified for columns, rows or individual cells.","Table is using a column-major order, ie. the grid is represented as a vector of column vectors."].join(" ")}}),iI}t(uqe,"requireTable$1");var Xre;function fqe(){return Xre||(Xre=1,function(e){e.exports=uqe()}(JD)),JD.exports}t(fqe,"requireTable");var oI={exports:{}},sI,Zre;function cqe(){if(Zre)return sI;Zre=1;var e=Ho,r=Fo,n=Jl,i=Vo.descriptionWithDates,s=_o.overrideAll,o=yu.dash,a=cn.extendFlat;return sI={color:{valType:"color",editType:"calc",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc",description:["Sets the title of this axis.","Note that before the existence of `title.text`, the title's","contents used to be defined as the `title` attribute itself.","This behavior has been deprecated."].join(" ")},font:e({editType:"calc",description:["Sets this axis' title font.","Note that the title's font used to be set","by the now deprecated `titlefont` attribute."].join(" ")}),offset:{valType:"number",dflt:10,editType:"calc",description:["An additional amount by which to offset the title from the tick","labels, given in pixels.","Note that this used to be set","by the now deprecated `titleoffset` attribute."].join(" ")},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc",description:["Sets the axis type.","By default, plotly attempts to determined the axis type","by looking into the data of the traces that referenced","the axis in question."].join(" ")},autotypenumbers:n.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",description:["Determines whether or not the range of this axis is","computed in relation to the input data.","See `rangemode` for more info.","If `range` is provided, then `autorange` is set to *false*."].join(" ")},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc",description:["If *normal*, the range is computed in relation to the extrema","of the input data.","If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data."].join(" ")},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],description:["Sets the range of this axis.","If the axis `type` is *log*, then you must take the log of your","desired range (e.g. to set the range from 1 to 100,","set the range from 0 to 2).","If the axis `type` is *date*, it should be date strings,","like date data, though Date objects and unix milliseconds","will be accepted and converted to strings.","If the axis `type` is *category*, it should be numbers,","using the scale where each category is assigned a serial","number from zero in the order it appears."].join(" ")},fixedrange:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not this axis is zoom-able.","If true, then zoom is disabled."].join(" ")},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of ticks for the particular axis.","The actual number of ticks will be chosen automatically to be","less than or equal to `nticks`.","Has an effect only if `tickmode` is set to *auto*."].join(" ")},tickvals:{valType:"data_array",editType:"calc",description:["Sets the values at which ticks on this axis appear.","Only has an effect if `tickmode` is set to *array*.","Used with `ticktext`."].join(" ")},ticktext:{valType:"data_array",editType:"calc",description:["Sets the text displayed at the ticks position via `tickvals`.","Only has an effect if `tickmode` is set to *array*.","Used with `tickvals`."].join(" ")},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc",description:["Determines whether axis labels are drawn on the low side,","the high side, both, or neither side of the axis."].join(" ")},tickfont:e({editType:"calc",description:"Sets the tick font."}),tickangle:{valType:"angle",dflt:"auto",editType:"calc",description:["Sets the angle of the tick labels with respect to the horizontal.","For example, a `tickangle` of -90 draws the tick labels","vertically."].join(" ")},tickprefix:{valType:"string",dflt:"",editType:"calc",description:"Sets a tick label prefix."},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:["If *all*, all tick labels are displayed with a prefix.","If *first*, only the first tick is displayed with a prefix.","If *last*, only the last tick is displayed with a suffix.","If *none*, tick prefixes are hidden."].join(" ")},ticksuffix:{valType:"string",dflt:"",editType:"calc",description:"Sets a tick label suffix."},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:"Same as `showtickprefix` but for tick suffixes."},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc",description:["If *all*, all exponents are shown besides their significands.","If *first*, only the exponent of the first tick is shown.","If *last*, only the exponent of the last tick is shown.","If *none*, no exponents appear."].join(" ")},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc",description:["Determines a formatting rule for the tick exponents.","For example, consider the number 1,000,000,000.","If *none*, it appears as 1,000,000,000.","If *e*, 1e+9.","If *E*, 1E+9.","If *power*, 1x10^9 (with 9 in a super script).","If *SI*, 1G.","If *B*, 1B."].join(" ")},minexponent:{valType:"number",dflt:3,min:0,editType:"calc",description:["Hide SI prefix for 10^n if |n| is below this number"].join(" ")},separatethousands:{valType:"boolean",dflt:!1,editType:"calc",description:['If "true", even 4-digit integers are separated'].join(" ")},tickformat:{valType:"string",dflt:"",editType:"calc",description:i("tick label")},tickformatstops:s(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc",description:["Specifies the ordering logic for the case of categorical variables.","By default, plotly uses *trace*, which specifies the order that is present in the data supplied.","Set `categoryorder` to *category ascending* or *category descending* if order should be determined by","the alphanumerical order of the category names.","Set `categoryorder` to *array* to derive the ordering from the attribute `categoryarray`. If a category","is not found in the `categoryarray` array, the sorting behavior for that attribute will be identical to","the *trace* mode. The unspecified categories will follow the categories in `categoryarray`."].join(" ")},categoryarray:{valType:"data_array",editType:"calc",description:["Sets the order in which categories on this axis appear.","Only has an effect if `categoryorder` is set to *array*.","Used with `categoryorder`."].join(" ")},labelpadding:{valType:"integer",dflt:10,editType:"calc",description:"Extra padding between label and the axis"},labelprefix:{valType:"string",editType:"calc",description:"Sets a axis label prefix."},labelsuffix:{valType:"string",dflt:"",editType:"calc",description:"Sets a axis label suffix."},showline:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not a line bounding this axis is drawn."].join(" ")},linecolor:{valType:"color",dflt:r.defaultLine,editType:"calc",description:"Sets the axis line color."},linewidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the axis line."},gridcolor:{valType:"color",editType:"calc",description:"Sets the axis line color."},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the axis line."},griddash:a({},o,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether or not grid lines are drawn.","If *true*, the grid lines are drawn at every tick mark."].join(" ")},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc",description:"Sets the number of minor grid ticks per major grid tick"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc",description:"Sets the width (in px) of the grid lines."},minorgriddash:a({},o,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:r.lightLine,editType:"calc",description:"Sets the color of the grid lines."},startline:{valType:"boolean",editType:"calc",description:["Determines whether or not a line is drawn at along the starting value","of this axis.","If *true*, the start line is drawn on top of the grid lines."].join(" ")},startlinecolor:{valType:"color",editType:"calc",description:"Sets the line color of the start line."},startlinewidth:{valType:"number",dflt:1,editType:"calc",description:"Sets the width (in px) of the start line."},endline:{valType:"boolean",editType:"calc",description:["Determines whether or not a line is drawn at along the final value","of this axis.","If *true*, the end line is drawn on top of the grid lines."].join(" ")},endlinewidth:{valType:"number",dflt:1,editType:"calc",description:"Sets the width (in px) of the end line."},endlinecolor:{valType:"color",editType:"calc",description:"Sets the line color of the end line."},tick0:{valType:"number",min:0,dflt:0,editType:"calc",description:"The starting index of grid lines along the axis"},dtick:{valType:"number",min:0,dflt:1,editType:"calc",description:"The stride between grid lines along the axis"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc",description:"The starting index of grid lines along the axis"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc",description:"The stride between grid lines along the axis"},_deprecated:{title:{valType:"string",editType:"calc",description:["Deprecated in favor of `title.text`.","Note that value of `title` is no longer a simple","*string* but a set of sub-attributes."].join(" ")},titlefont:e({editType:"calc",description:"Deprecated in favor of `title.font`."}),titleoffset:{valType:"number",dflt:10,editType:"calc",description:"Deprecated in favor of `title.offset`."}},editType:"calc"},sI}t(cqe,"requireAxis_attributes");var lI,Kre;function mB(){if(Kre)return lI;Kre=1;var e=Ho,r=cqe(),n=Fo,i=e({editType:"calc",description:"The default font used for axis & tick labels on this carpet"});return i.family.dflt='"Open Sans", verdana, arial, sans-serif',i.size.dflt=12,i.color.dflt=n.defaultLine,lI={carpet:{valType:"string",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["A two dimensional array of x coordinates at each carpet point.","If omitted, the plot is a cheater plot and the xaxis is hidden","by default."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:"A two dimensional array of y coordinates at each carpet point."},a:{valType:"data_array",editType:"calc",description:["An array containing values of the first parameter value"].join(" ")},a0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `a`.","Builds a linear space of a coordinates.","Use with `da`","where `a0` is the starting coordinate and `da` the step."].join(" ")},da:{valType:"number",dflt:1,editType:"calc",description:["Sets the a coordinate step.","See `a0` for more info."].join(" ")},b:{valType:"data_array",editType:"calc",description:"A two dimensional array of y coordinates at each carpet point."},b0:{valType:"number",dflt:0,editType:"calc",description:["Alternate to `b`.","Builds a linear space of a coordinates.","Use with `db`","where `b0` is the starting coordinate and `db` the step."].join(" ")},db:{valType:"number",dflt:1,editType:"calc",description:["Sets the b coordinate step.","See `b0` for more info."].join(" ")},cheaterslope:{valType:"number",dflt:1,editType:"calc",description:["The shift applied to each successive row of data in creating a cheater plot.","Only used if `x` is been omitted."].join(" ")},aaxis:r,baxis:r,font:i,color:{valType:"color",dflt:n.defaultLine,editType:"plot",description:["Sets default for all colors associated with this axis","all at once: line, font, tick, and grid colors.","Grid color is lightened by blending this with the plot background","Individual pieces can override this."].join(" ")},transforms:void 0},lI}t(mB,"requireAttributes$8");var uI,Jre;function hqe(){if(Jre)return uI;Jre=1;var e=Nt.exports.isArray1D;return uI=t(function(n,i,s){var o=s("x"),a=o&&o.length,l=s("y"),u=l&&l.length;if(!a&&!u)return!1;if(i._cheater=!o,(!a||e(o))&&(!u||e(l))){var f=a?o.length:1/0;u&&(f=Math.min(f,l.length)),i.a&&i.a.length&&(f=Math.min(f,i.a.length)),i.b&&i.b.length&&(f=Math.min(f,i.b.length)),i._length=f}else i._length=null;return!0},"handleXYDefaults"),uI}t(hqe,"requireXy_defaults");var fI,Qre;function vqe(){if(Qre)return fI;Qre=1;var e=mB(),r=$a.exports.addOpacity,n=Na,i=Nt.exports,s=ky,o=L0,a=R0,l=j8,u=hd(),f=Q1();fI=t(function(c,d,g){var p=g.letter,b=g.font||{},m=e[p+"axis"];function y(H,j){return i.coerce(c,d,m,H,j)}t(y,"coerce");function T(H,j){return i.coerce2(c,d,m,H,j)}t(T,"coerce2"),g.name&&(d._name=g.name,d._id=g.name),y("autotypenumbers",g.autotypenumbersDflt);var _=y("type");if(_==="-"&&(g.data&&h(d,g.data),d.type==="-"?d.type="linear":_=c.type=d.type),y("smoothing"),y("cheatertype"),y("showticklabels"),y("labelprefix",p+" = "),y("labelsuffix"),y("showtickprefix"),y("showticksuffix"),y("separatethousands"),y("tickformat"),y("exponentformat"),y("minexponent"),y("showexponent"),y("categoryorder"),y("tickmode"),y("tickvals"),y("ticktext"),y("tick0"),y("dtick"),d.tickmode==="array"&&(y("arraytick0"),y("arraydtick")),y("labelpadding"),d._hovertitle=p,_==="date"){var M=n.getComponentMethod("calendars","handleDefaults");M(c,d,"calendar",g.calendar)}u(d,g.fullLayout),d.c2p=i.identity;var w=y("color",g.dfltColor),x=w===c.color?w:b.color,A=y("title.text");A&&(i.coerceFont(y,"title.font",{family:b.family,size:i.bigFont(b.size),color:x}),y("title.offset")),y("tickangle");var S=y("autorange",!d.isValidRange(c.range));S&&y("rangemode"),y("range"),d.cleanRange(),y("fixedrange"),s(c,d,y,_),a(c,d,y,_,g),o(c,d,y,_,g),l(c,d,y,{data:g.data,dataAttr:p});var k=T("gridcolor",r(w,.3)),L=T("gridwidth"),P=T("griddash"),D=y("showgrid");D||(delete d.gridcolor,delete d.gridwidth,delete d.griddash);var B=T("startlinecolor",w),z=T("startlinewidth",L),R=y("startline",d.showgrid||!!B||!!z);R||(delete d.startlinecolor,delete d.startlinewidth);var F=T("endlinecolor",w),O=T("endlinewidth",L),q=y("endline",d.showgrid||!!F||!!O);return q||(delete d.endlinecolor,delete d.endlinewidth),D?(y("minorgridcount"),y("minorgridwidth",L),y("minorgriddash",P),y("minorgridcolor",r(k,.06)),d.minorgridcount||(delete d.minorgridwidth,delete d.minorgriddash,delete d.minorgridcolor)):(delete d.gridcolor,delete d.gridwidth,delete d.griddash),d.showticklabels==="none"&&(delete d.tickfont,delete d.tickangle,delete d.showexponent,delete d.exponentformat,delete d.minexponent,delete d.tickformat,delete d.showticksuffix,delete d.showtickprefix),d.showticksuffix||delete d.ticksuffix,d.showtickprefix||delete d.tickprefix,y("tickmode"),d},"handleAxisDefaults");function h(v,c){if(v.type==="-"){var d=v._id,g=d.charAt(0),p=g+"calendar",b=v[p];v.type=f(c,b,{autotypenumbers:v.autotypenumbers})}}return t(h,"setAutoType"),fI}t(vqe,"requireAxis_defaults");var cI,eae;function dqe(){if(eae)return cI;eae=1;var e=vqe(),r=ei;cI=t(function(s,o,a,l,u){var f=l("a");f||(l("da"),l("a0"));var h=l("b");h||(l("db"),l("b0")),n(s,o,a,u)},"handleABDefaults");function n(i,s,o,a){var l=["aaxis","baxis"];l.forEach(function(u){var f=u.charAt(0),h=i[u]||{},v=r.newContainer(s,u),c={noTicklabelstep:!0,tickfont:"x",id:f+"axis",letter:f,font:s.font,name:u,data:i[f],calendar:s.calendar,dfltColor:a,bgColor:o.paper_bgcolor,autotypenumbersDflt:o.autotypenumbers,fullLayout:o};e(h,v,c),v._categories=v._categories||[],!i[u]&&h.type!=="-"&&(i[u]={type:h.type})})}return t(n,"mimickAxisDefaults"),cI}t(dqe,"requireAb_defaults");var hI,tae;function pqe(){if(tae)return hI;tae=1;var e=Nt.exports,r=hqe(),n=dqe(),i=mB(),s=Fo;return hI=t(function(a,l,u,f){function h(d,g){return e.coerce(a,l,i,d,g)}t(h,"coerce"),l._clipPathId="clip"+l.uid+"carpet";var v=h("color",s.defaultLine);if(e.coerceFont(h,"font"),h("carpet"),n(a,l,f,h,v),!l.a||!l.b){l.visible=!1;return}l.a.length<3&&(l.aaxis.smoothing=0),l.b.length<3&&(l.baxis.smoothing=0);var c=r(a,l,h);c||(l.visible=!1),l._cheater&&h("cheaterslope")},"supplyDefaults"),hI}t(pqe,"requireDefaults$8");var vI,rae;function jpe(){if(rae)return vI;rae=1;var e=Nt.exports.isArrayOrTypedArray;return vI=t(function(n,i,s){var o;for(e(n)?n.length>i.length&&(n=n.slice(0,i.length)):n=[],o=0;o<i.length;o++)n[o]=s(i[o]);return n},"mapArray"),vI}t(jpe,"requireMap_1d_array");var dI,aae;function Ype(){return aae||(aae=1,dI=t(function(r,n,i){if(r.length===0)return"";var s,o=[],a=i?3:1;for(s=0;s<r.length;s+=a)o.push(r[s]+","+n[s]),i&&s<r.length-a&&(o.push("C"),o.push([r[s+1]+","+n[s+1],r[s+2]+","+n[s+2]+" "].join(" ")));return o.join(i?"":"L")},"makePath")),dI}t(Ype,"requireMakepath");var pI,nae;function gqe(){return nae||(nae=1,pI=t(function(r,n,i,s,o,a){var l=o[0]*r.dpdx(n),u=o[1]*r.dpdy(i),f=1,h=1;if(a){var v=Math.sqrt(o[0]*o[0]+o[1]*o[1]),c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),d=(o[0]*a[0]+o[1]*a[1])/v/c;h=Math.max(0,d)}var g=Math.atan2(u,l)*180/Math.PI;return g<-90?(g+=180,f=-f):g>90&&(g-=180,f=-f),{angle:g,flip:f,p:r.c2p(s,n,i),offsetMultplier:h}},"orientText")),pI}t(gqe,"requireOrient_text");var gI,iae;function yqe(){if(iae)return gI;iae=1;var e=Va.exports,r=bn.exports,n=jpe(),i=Ype(),s=gqe(),o=Ji,a=Nt.exports,l=a.strRotate,u=a.strTranslate,f=yl;gI=t(function(y,T,_,M){var w=T.xaxis,x=T.yaxis,A=y._fullLayout,S=A._clips;a.makeTraceGroups(M,_,"trace").each(function(k){var L=e.select(this),P=k[0],D=P.trace,B=D.aaxis,z=D.baxis,R=a.ensureSingle(L,"g","minorlayer"),F=a.ensureSingle(L,"g","majorlayer"),O=a.ensureSingle(L,"g","boundarylayer"),q=a.ensureSingle(L,"g","labellayer");L.style("opacity",D.opacity),v(w,x,F,B,"a",B._gridlines),v(w,x,F,z,"b",z._gridlines),v(w,x,R,B,"a",B._minorgridlines),v(w,x,R,z,"b",z._minorgridlines),v(w,x,O,B,"a-boundary",B._boundarylines),v(w,x,O,z,"b-boundary",z._boundarylines);var H=c(y,w,x,D,P,q,B._labels,"a-label"),j=c(y,w,x,D,P,q,z._labels,"b-label");d(y,q,D,P,w,x,H,j),h(D,P,S,w,x)})},"plot");function h(m,y,T,_,M){var w,x,A,S,k=T.select("#"+m._clipPathId);k.size()||(k=T.append("clipPath").classed("carpetclip",!0));var L=a.ensureSingle(k,"path","carpetboundary"),P=y.clipsegments,D=[];for(S=0;S<P.length;S++)w=P[S],x=n([],w.x,_.c2p),A=n([],w.y,M.c2p),D.push(i(x,A,w.bicubic));var B="M"+D.join("L")+"Z";k.attr("id",m._clipPathId),L.attr("d",B)}t(h,"drawClipPath");function v(m,y,T,_,M,w){var x="const-"+M+"-lines",A=T.selectAll("."+x).data(w);A.enter().append("path").classed(x,!0).style("vector-effect","non-scaling-stroke"),A.each(function(S){var k=S,L=k.x,P=k.y,D=n([],L,m.c2p),B=n([],P,y.c2p),z="M"+i(D,B,k.smoothing),R=e.select(this);R.attr("d",z).style("stroke-width",k.width).style("stroke",k.color).style("stroke-dasharray",r.dashStyle(k.dash,k.width)).style("fill","none")}),A.exit().remove()}t(v,"drawGridLines");function c(m,y,T,_,M,w,x,A){var S=w.selectAll("text."+A).data(x);S.enter().append("text").classed(A,!0);var k=0,L={};return S.each(function(P,D){var B;if(P.axis.tickangle==="auto")B=s(_,y,T,P.xy,P.dxy);else{var z=(P.axis.tickangle+180)*Math.PI/180;B=s(_,y,T,P.xy,[Math.cos(z),Math.sin(z)])}D||(L={angle:B.angle,flip:B.flip});var R=(P.endAnchor?-1:1)*B.flip,F=e.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(r.font,P.font).text(P.text).call(o.convertToTspans,m),O=r.bBox(this);F.attr("transform",u(B.p[0],B.p[1])+l(B.angle)+u(P.axis.labelpadding*R,O.height*.3)),k=Math.max(k,O.width+P.axis.labelpadding)}),S.exit().remove(),L.maxExtent=k,L}t(c,"drawAxisLabels");function d(m,y,T,_,M,w,x,A){var S,k,L,P,D=a.aggNums(Math.min,null,T.a),B=a.aggNums(Math.max,null,T.a),z=a.aggNums(Math.min,null,T.b),R=a.aggNums(Math.max,null,T.b);S=.5*(D+B),k=z,L=T.ab2xy(S,k,!0),P=T.dxyda_rough(S,k),x.angle===void 0&&a.extendFlat(x,s(T,M,w,L,T.dxydb_rough(S,k))),b(m,y,T,_,L,P,T.aaxis,M,w,x,"a-title"),S=D,k=.5*(z+R),L=T.ab2xy(S,k,!0),P=T.dxydb_rough(S,k),A.angle===void 0&&a.extendFlat(A,s(T,M,w,L,T.dxyda_rough(S,k))),b(m,y,T,_,L,P,T.baxis,M,w,A,"b-title")}t(d,"drawAxisTitles");var g=f.LINE_SPACING,p=(1-f.MID_SHIFT)/g+1;function b(m,y,T,_,M,w,x,A,S,k,L){var P=[];x.title.text&&P.push(x.title.text);var D=y.selectAll("text."+L).data(P),B=k.maxExtent;D.enter().append("text").classed(L,!0),D.each(function(){var z=s(T,A,S,M,w);["start","both"].indexOf(x.showticklabels)===-1&&(B=0);var R=x.title.font.size;B+=R+x.title.offset;var F=k.angle+(k.flip<0?180:0),O=(F-z.angle+450)%360,q=O>90&&O<270,H=e.select(this);H.text(x.title.text).call(o.convertToTspans,m),q&&(B=(-o.lineCount(H)+p)*g*R-B),H.attr("transform",u(z.p[0],z.p[1])+l(z.angle)+u(0,B)).attr("text-anchor","middle").call(r.font,x.title.font)}),D.exit().remove()}return t(b,"drawAxisTitle"),gI}t(yqe,"requirePlot$7");var yI,oae;function mqe(){if(oae)return yI;oae=1;var e=Nt.exports.isArrayOrTypedArray;return yI=t(function(r,n,i){var s,o,a,l,u,f,h=[],v=e(r)?r.length:r,c=e(n)?n.length:n,d=e(r)?r:null,g=e(n)?n:null;d&&(a=(d.length-1)/(d[d.length-1]-d[0])/(v-1)),g&&(l=(g.length-1)/(g[g.length-1]-g[0])/(c-1));var p,b=1/0,m=-1/0;for(o=0;o<c;o++)for(h[o]=[],f=g?(g[o]-g[0])*l:o/(c-1),s=0;s<v;s++)u=d?(d[s]-d[0])*a:s/(v-1),p=u-f*i,b=Math.min(p,b),m=Math.max(p,m),h[o][s]=p;var y=1/(m-b),T=-b*y;for(o=0;o<c;o++)for(s=0;s<v;s++)h[o][s]=y*h[o][s]+T;return h},"cheater_basis"),yI}t(mqe,"requireCheater_basis");var mI,sae;function xqe(){if(sae)return mI;sae=1;var e=Nt.exports.isArrayOrTypedArray;mI=t(function(n){return r(n,0)},"array_minmax");function r(n,i){if(!e(n)||i>=10)return null;for(var s=1/0,o=-1/0,a=n.length,l=0;l<a;l++){var u=n[l];if(e(u)){var f=r(u,i+1);f&&(s=Math.min(f[0],s),o=Math.max(f[1],o))}else s=Math.min(u,s),o=Math.max(u,o)}return[s,o]}return t(r,"minMax"),mI}t(xqe,"requireArray_minmax");var xI,lae;function bqe(){if(lae)return xI;lae=1;var e=nn(),r=cn.extendFlat;return xI=t(function(i,s,o){var a,l,u,f,h,v,c,d,g,p,b,m,y,T,_=i["_"+s],M=i[s+"axis"],w=M._gridlines=[],x=M._minorgridlines=[],A=M._boundarylines=[],S=i["_"+o],k=i[o+"axis"];M.tickmode==="array"&&(M.tickvals=_.slice());var L=i._xctrl,P=i._yctrl,D=L[0].length,B=L.length,z=i._a.length,R=i._b.length;e.prepTicks(M),M.tickmode==="array"&&delete M.tickvals;var F=M.smoothing?3:1;function O(H){var j,X,G,$,te,ee,ie,se,W,ne,he,re,ae=[],fe=[],ce={};if(s==="b")for(X=i.b2j(H),G=Math.floor(Math.max(0,Math.min(R-2,X))),$=X-G,ce.length=R,ce.crossLength=z,ce.xy=function(xe){return i.evalxy([],xe,X)},ce.dxy=function(xe,Te){return i.dxydi([],xe,G,Te,$)},j=0;j<z;j++)ee=Math.min(z-2,j),ie=j-ee,se=i.evalxy([],j,X),k.smoothing&&j>0&&(W=i.dxydi([],j-1,G,0,$),ae.push(te[0]+W[0]/3),fe.push(te[1]+W[1]/3),ne=i.dxydi([],j-1,G,1,$),ae.push(se[0]-ne[0]/3),fe.push(se[1]-ne[1]/3)),ae.push(se[0]),fe.push(se[1]),te=se;else for(j=i.a2i(H),ee=Math.floor(Math.max(0,Math.min(z-2,j))),ie=j-ee,ce.length=z,ce.crossLength=R,ce.xy=function(xe){return i.evalxy([],j,xe)},ce.dxy=function(xe,Te){return i.dxydj([],ee,xe,ie,Te)},X=0;X<R;X++)G=Math.min(R-2,X),$=X-G,se=i.evalxy([],j,X),k.smoothing&&X>0&&(he=i.dxydj([],ee,X-1,ie,0),ae.push(te[0]+he[0]/3),fe.push(te[1]+he[1]/3),re=i.dxydj([],ee,X-1,ie,1),ae.push(se[0]-re[0]/3),fe.push(se[1]-re[1]/3)),ae.push(se[0]),fe.push(se[1]),te=se;return ce.axisLetter=s,ce.axis=M,ce.crossAxis=k,ce.value=H,ce.constvar=o,ce.index=d,ce.x=ae,ce.y=fe,ce.smoothing=k.smoothing,ce}t(O,"constructValueGridline");function q(H){var j,X,G,$,te,ee=[],ie=[],se={};if(se.length=_.length,se.crossLength=S.length,s==="b")for(G=Math.max(0,Math.min(R-2,H)),te=Math.min(1,Math.max(0,H-G)),se.xy=function(W){return i.evalxy([],W,H)},se.dxy=function(W,ne){return i.dxydi([],W,G,ne,te)},j=0;j<D;j++)ee[j]=L[H*F][j],ie[j]=P[H*F][j];else for(X=Math.max(0,Math.min(z-2,H)),$=Math.min(1,Math.max(0,H-X)),se.xy=function(W){return i.evalxy([],H,W)},se.dxy=function(W,ne){return i.dxydj([],X,W,$,ne)},j=0;j<B;j++)ee[j]=L[j][H*F],ie[j]=P[j][H*F];return se.axisLetter=s,se.axis=M,se.crossAxis=k,se.value=_[H],se.constvar=o,se.index=H,se.x=ee,se.y=ie,se.smoothing=k.smoothing,se}if(t(q,"constructArrayGridline"),M.tickmode==="array"){for(f=5e-15,h=[Math.floor((_.length-1-M.arraytick0)/M.arraydtick*(1+f)),Math.ceil(-M.arraytick0/M.arraydtick/(1+f))].sort(function(H,j){return H-j}),v=h[0]-1,c=h[1]+1,d=v;d<c;d++)l=M.arraytick0+M.arraydtick*d,!(l<0||l>_.length-1)&&w.push(r(q(l),{color:M.gridcolor,width:M.gridwidth,dash:M.griddash}));for(d=v;d<c;d++)if(u=M.arraytick0+M.arraydtick*d,b=Math.min(u+M.arraydtick,_.length-1),!(u<0||u>_.length-1)&&!(b<0||b>_.length-1))for(m=_[u],y=_[b],a=0;a<M.minorgridcount;a++)T=b-u,!(T<=0)&&(p=m+(y-m)*(a+1)/(M.minorgridcount+1)*(M.arraydtick/T),!(p<_[0]||p>_[_.length-1])&&x.push(r(O(p),{color:M.minorgridcolor,width:M.minorgridwidth,dash:M.minorgriddash})));M.startline&&A.push(r(q(0),{color:M.startlinecolor,width:M.startlinewidth})),M.endline&&A.push(r(q(_.length-1),{color:M.endlinecolor,width:M.endlinewidth}))}else{for(f=5e-15,h=[Math.floor((_[_.length-1]-M.tick0)/M.dtick*(1+f)),Math.ceil((_[0]-M.tick0)/M.dtick/(1+f))].sort(function(H,j){return H-j}),v=h[0],c=h[1],d=v;d<=c;d++)g=M.tick0+M.dtick*d,w.push(r(O(g),{color:M.gridcolor,width:M.gridwidth,dash:M.griddash}));for(d=v-1;d<c+1;d++)for(g=M.tick0+M.dtick*d,a=0;a<M.minorgridcount;a++)p=g+M.dtick*(a+1)/(M.minorgridcount+1),!(p<_[0]||p>_[_.length-1])&&x.push(r(O(p),{color:M.minorgridcolor,width:M.minorgridwidth,dash:M.minorgriddash}));M.startline&&A.push(r(O(_[0]),{color:M.startlinecolor,width:M.startlinewidth})),M.endline&&A.push(r(O(_[_.length-1]),{color:M.endlinecolor,width:M.endlinewidth}))}},"calcGridlines"),xI}t(bqe,"requireCalc_gridlines");var bI,uae;function _qe(){if(uae)return bI;uae=1;var e=nn(),r=cn.extendFlat;return bI=t(function(i,s){var o,a,l,u,f,h=s._labels=[],v=s._gridlines;for(o=0;o<v.length;o++)f=v[o],["start","both"].indexOf(s.showticklabels)!==-1&&(a=e.tickText(s,f.value),r(a,{prefix:l,suffix:u,endAnchor:!0,xy:f.xy(0),dxy:f.dxy(0,0),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:o===0,isLast:o===v.length-1}),h.push(a)),["end","both"].indexOf(s.showticklabels)!==-1&&(a=e.tickText(s,f.value),r(a,{endAnchor:!1,xy:f.xy(f.crossLength-1),dxy:f.dxy(f.crossLength-2,1),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:o===0,isLast:o===v.length-1}),h.push(a))},"calcLabels"),bI}t(_qe,"requireCalc_labels");var _I,fae;function wqe(){return fae||(fae=1,_I=t(function(r,n,i,s){var o,a,l,u=[],f=!!i.smoothing,h=!!s.smoothing,v=r[0].length-1,c=r.length-1;for(o=0,a=[],l=[];o<=v;o++)a[o]=r[0][o],l[o]=n[0][o];for(u.push({x:a,y:l,bicubic:f}),o=0,a=[],l=[];o<=c;o++)a[o]=r[o][v],l[o]=n[o][v];for(u.push({x:a,y:l,bicubic:h}),o=v,a=[],l=[];o>=0;o--)a[v-o]=r[c][o],l[v-o]=n[c][o];for(u.push({x:a,y:l,bicubic:f}),o=c,a=[],l=[];o>=0;o--)a[c-o]=r[o][0],l[c-o]=n[o][0];return u.push({x:a,y:l,bicubic:h}),u},"makeClipPath")),_I}t(wqe,"requireCalc_clippath");var wI,cae;function Tqe(){if(cae)return wI;cae=1;var e=Nt.exports;return wI=t(function(n,i,s){var o,a,l,u=[],f=[],h=n[0].length,v=n.length;function c(X,G){var $=0,te,ee=0;return X>0&&(te=n[G][X-1])!==void 0&&(ee++,$+=te),X<h-1&&(te=n[G][X+1])!==void 0&&(ee++,$+=te),G>0&&(te=n[G-1][X])!==void 0&&(ee++,$+=te),G<v-1&&(te=n[G+1][X])!==void 0&&(ee++,$+=te),$/Math.max(1,ee)}t(c,"avgSurrounding");var d=0;for(o=0;o<h;o++)for(a=0;a<v;a++)n[a][o]===void 0&&(u.push(o),f.push(a),n[a][o]=c(o,a)),d=Math.max(d,Math.abs(n[a][o]));if(!u.length)return n;var g,p,b,m,y,T,_,M,w,x,A,S=1e-5,k=0,L=100,P=0,D=u.length;do{for(k=0,l=0;l<D;l++){o=u[l],a=f[l];var B=0,z=0,R,F,O,q,H,j;o===0?(H=Math.min(h-1,2),O=i[H],q=i[1],R=n[a][H],F=n[a][1],z+=F+(F-R)*(i[0]-q)/(q-O),B++):o===h-1&&(H=Math.max(0,h-3),O=i[H],q=i[h-2],R=n[a][H],F=n[a][h-2],z+=F+(F-R)*(i[h-1]-q)/(q-O),B++),(o===0||o===h-1)&&a>0&&a<v-1&&(g=s[a+1]-s[a],p=s[a]-s[a-1],z+=(p*n[a+1][o]+g*n[a-1][o])/(p+g),B++),a===0?(j=Math.min(v-1,2),O=s[j],q=s[1],R=n[j][o],F=n[1][o],z+=F+(F-R)*(s[0]-q)/(q-O),B++):a===v-1&&(j=Math.max(0,v-3),O=s[j],q=s[v-2],R=n[j][o],F=n[v-2][o],z+=F+(F-R)*(s[v-1]-q)/(q-O),B++),(a===0||a===v-1)&&o>0&&o<h-1&&(g=i[o+1]-i[o],p=i[o]-i[o-1],z+=(p*n[a][o+1]+g*n[a][o-1])/(p+g),B++),B?z/=B:(b=i[o+1]-i[o],m=i[o]-i[o-1],y=s[a+1]-s[a],T=s[a]-s[a-1],_=b*m*(b+m),M=y*T*(y+T),z=(_*(T*n[a+1][o]+y*n[a-1][o])+M*(m*n[a][o+1]+b*n[a][o-1]))/(M*(m+b)+_*(T+y))),w=z-n[a][o],x=w/d,k+=x*x,A=B?0:.85,n[a][o]+=w*(1+A)}k=Math.sqrt(k)}while(P++<L&&k>S);return e.log("Smoother converged to",k,"after",P,"iterations"),n},"smoothFill2dArray"),wI}t(Tqe,"requireSmooth_fill_2d_array");var TI,hae;function Aqe(){return hae||(hae=1,TI={RELATIVE_CULL_TOLERANCE:1e-6}),TI}t(Aqe,"requireConstants$2");var AI,vae;function Sqe(){if(vae)return AI;vae=1;var e=.5;return AI=t(function(n,i,s,o){var a=n[0]-i[0],l=n[1]-i[1],u=s[0]-i[0],f=s[1]-i[1],h=Math.pow(a*a+l*l,e/2),v=Math.pow(u*u+f*f,e/2),c=(v*v*a-h*h*u)*o,d=(v*v*l-h*h*f)*o,g=v*(h+v)*3,p=h*(h+v)*3;return[[i[0]+(g&&c/g),i[1]+(g&&d/g)],[i[0]-(p&&c/p),i[1]-(p&&d/p)]]},"makeControlPoints"),AI}t(Sqe,"requireCatmull_rom");var SI,dae;function Mqe(){if(dae)return SI;dae=1;var e=Sqe(),r=Nt.exports.ensureArray;function n(i,s,o){var a=-.5*o[0]+1.5*s[0],l=-.5*o[1]+1.5*s[1];return[(2*a+i[0])/3,(2*l+i[1])/3]}return t(n,"inferCubicControlPoint"),SI=t(function(s,o,a,l,u,f){var h,v,c,d,g,p,b,m,y,T,_=a[0].length,M=a.length,w=u?3*_-2:_,x=f?3*M-2:M;for(s=r(s,x),o=r(o,x),c=0;c<x;c++)s[c]=r(s[c],w),o[c]=r(o[c],w);for(v=0,d=0;v<M;v++,d+=f?3:1)for(g=s[d],p=o[d],b=a[v],m=l[v],h=0,c=0;h<_;h++,c+=u?3:1)g[c]=b[h],p[c]=m[h];if(u)for(v=0,d=0;v<M;v++,d+=f?3:1){for(h=1,c=3;h<_-1;h++,c+=3)y=e([a[v][h-1],l[v][h-1]],[a[v][h],l[v][h]],[a[v][h+1],l[v][h+1]],u),s[d][c-1]=y[0][0],o[d][c-1]=y[0][1],s[d][c+1]=y[1][0],o[d][c+1]=y[1][1];T=n([s[d][0],o[d][0]],[s[d][2],o[d][2]],[s[d][3],o[d][3]]),s[d][1]=T[0],o[d][1]=T[1],T=n([s[d][w-1],o[d][w-1]],[s[d][w-3],o[d][w-3]],[s[d][w-4],o[d][w-4]]),s[d][w-2]=T[0],o[d][w-2]=T[1]}if(f)for(c=0;c<w;c++){for(d=3;d<x-3;d+=3)y=e([s[d-3][c],o[d-3][c]],[s[d][c],o[d][c]],[s[d+3][c],o[d+3][c]],f),s[d-1][c]=y[0][0],o[d-1][c]=y[0][1],s[d+1][c]=y[1][0],o[d+1][c]=y[1][1];T=n([s[0][c],o[0][c]],[s[2][c],o[2][c]],[s[3][c],o[3][c]]),s[1][c]=T[0],o[1][c]=T[1],T=n([s[x-1][c],o[x-1][c]],[s[x-3][c],o[x-3][c]],[s[x-4][c],o[x-4][c]]),s[x-2][c]=T[0],o[x-2][c]=T[1]}if(u&&f)for(d=1;d<x;d+=(d+1)%3===0?2:1){for(c=3;c<w-3;c+=3)y=e([s[d][c-3],o[d][c-3]],[s[d][c],o[d][c]],[s[d][c+3],o[d][c+3]],u),s[d][c-1]=.5*(s[d][c-1]+y[0][0]),o[d][c-1]=.5*(o[d][c-1]+y[0][1]),s[d][c+1]=.5*(s[d][c+1]+y[1][0]),o[d][c+1]=.5*(o[d][c+1]+y[1][1]);T=n([s[d][0],o[d][0]],[s[d][2],o[d][2]],[s[d][3],o[d][3]]),s[d][1]=.5*(s[d][1]+T[0]),o[d][1]=.5*(o[d][1]+T[1]),T=n([s[d][w-1],o[d][w-1]],[s[d][w-3],o[d][w-3]],[s[d][w-4],o[d][w-4]]),s[d][w-2]=.5*(s[d][w-2]+T[0]),o[d][w-2]=.5*(o[d][w-2]+T[1])}return[s,o]},"computeControlPoints"),SI}t(Mqe,"requireCompute_control_points");var MI,pae;function kqe(){return pae||(pae=1,MI=t(function(e,r,n,i,s){var o=r-2,a=n-2;return i&&s?function(l,u,f){l||(l=[]);var h,v,c,d,g,p,b=Math.max(0,Math.min(Math.floor(u),o)),m=Math.max(0,Math.min(Math.floor(f),a)),y=Math.max(0,Math.min(1,u-b)),T=Math.max(0,Math.min(1,f-m));b*=3,m*=3;var _=y*y,M=_*y,w=1-y,x=w*w,A=x*w,S=T*T,k=S*T,L=1-T,P=L*L,D=P*L;for(p=0;p<e.length;p++)g=e[p],h=A*g[m][b]+3*(x*y*g[m][b+1]+w*_*g[m][b+2])+M*g[m][b+3],v=A*g[m+1][b]+3*(x*y*g[m+1][b+1]+w*_*g[m+1][b+2])+M*g[m+1][b+3],c=A*g[m+2][b]+3*(x*y*g[m+2][b+1]+w*_*g[m+2][b+2])+M*g[m+2][b+3],d=A*g[m+3][b]+3*(x*y*g[m+3][b+1]+w*_*g[m+3][b+2])+M*g[m+3][b+3],l[p]=D*h+3*(P*T*v+L*S*c)+k*d;return l}:i?function(l,u,f){l||(l=[]);var h=Math.max(0,Math.min(Math.floor(u),o)),v=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,u-h)),d=Math.max(0,Math.min(1,f-v)),g,p,b,m,y,T;h*=3;var _=c*c,M=_*c,w=1-c,x=w*w,A=x*w,S=1-d;for(y=0;y<e.length;y++)T=e[y],g=S*T[v][h]+d*T[v+1][h],p=S*T[v][h+1]+d*T[v+1][h+1],b=S*T[v][h+2]+d*T[v+1][h+1],m=S*T[v][h+3]+d*T[v+1][h+1],l[y]=A*g+3*(x*c*p+w*_*b)+M*m;return l}:s?function(l,u,f){l||(l=[]);var h=Math.max(0,Math.min(Math.floor(u),o)),v=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,u-h)),d=Math.max(0,Math.min(1,f-v)),g,p,b,m,y,T;v*=3;var _=d*d,M=_*d,w=1-d,x=w*w,A=x*w,S=1-c;for(y=0;y<e.length;y++)T=e[y],g=S*T[v][h]+c*T[v][h+1],p=S*T[v+1][h]+c*T[v+1][h+1],b=S*T[v+2][h]+c*T[v+2][h+1],m=S*T[v+3][h]+c*T[v+3][h+1],l[y]=A*g+3*(x*d*p+w*_*b)+M*m;return l}:function(l,u,f){l||(l=[]);var h=Math.max(0,Math.min(Math.floor(u),o)),v=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,u-h)),d=Math.max(0,Math.min(1,f-v)),g,p,b,m,y=1-d,T=1-c;for(b=0;b<e.length;b++)m=e[b],g=T*m[v][h]+c*m[v][h+1],p=T*m[v+1][h]+c*m[v+1][h+1],l[b]=y*g+d*p;return l}},"create_spline_evaluator")),MI}t(kqe,"requireCreate_spline_evaluator");var kI,gae;function Eqe(){return gae||(gae=1,kI=t(function(e,r,n){return r&&n?function(i,s,o,a,l){i||(i=[]);var u,f,h,v,c,d;s*=3,o*=3;var g=a*a,p=1-a,b=p*p,m=p*a*2,y=-3*b,T=3*(b-m),_=3*(m-g),M=3*g,w=l*l,x=w*l,A=1-l,S=A*A,k=S*A;for(d=0;d<e.length;d++)c=e[d],u=y*c[o][s]+T*c[o][s+1]+_*c[o][s+2]+M*c[o][s+3],f=y*c[o+1][s]+T*c[o+1][s+1]+_*c[o+1][s+2]+M*c[o+1][s+3],h=y*c[o+2][s]+T*c[o+2][s+1]+_*c[o+2][s+2]+M*c[o+2][s+3],v=y*c[o+3][s]+T*c[o+3][s+1]+_*c[o+3][s+2]+M*c[o+3][s+3],i[d]=k*u+3*(S*l*f+A*w*h)+x*v;return i}:r?function(i,s,o,a,l){i||(i=[]);var u,f,h,v;s*=3;var c=a*a,d=1-a,g=d*d,p=d*a*2,b=-3*g,m=3*(g-p),y=3*(p-c),T=3*c,_=1-l;for(h=0;h<e.length;h++)v=e[h],u=b*v[o][s]+m*v[o][s+1]+y*v[o][s+2]+T*v[o][s+3],f=b*v[o+1][s]+m*v[o+1][s+1]+y*v[o+1][s+2]+T*v[o+1][s+3],i[h]=_*u+l*f;return i}:n?function(i,s,o,a,l){i||(i=[]);var u,f,h,v,c,d;o*=3;var g=l*l,p=g*l,b=1-l,m=b*b,y=m*b;for(c=0;c<e.length;c++)d=e[c],u=d[o][s+1]-d[o][s],f=d[o+1][s+1]-d[o+1][s],h=d[o+2][s+1]-d[o+2][s],v=d[o+3][s+1]-d[o+3][s],i[c]=y*u+3*(m*l*f+b*g*h)+p*v;return i}:function(i,s,o,a,l){i||(i=[]);var u,f,h,v,c=1-l;for(h=0;h<e.length;h++)v=e[h],u=v[o][s+1]-v[o][s],f=v[o+1][s+1]-v[o+1][s],i[h]=c*u+l*f;return i}},"create_i_derivative_evaluator")),kI}t(Eqe,"requireCreate_i_derivative_evaluator");var EI,yae;function Cqe(){return yae||(yae=1,EI=t(function(e,r,n){return r&&n?function(i,s,o,a,l){i||(i=[]);var u,f,h,v,c,d;s*=3,o*=3;var g=a*a,p=g*a,b=1-a,m=b*b,y=m*b,T=l*l,_=1-l,M=_*_,w=_*l*2,x=-3*M,A=3*(M-w),S=3*(w-T),k=3*T;for(d=0;d<e.length;d++)c=e[d],u=x*c[o][s]+A*c[o+1][s]+S*c[o+2][s]+k*c[o+3][s],f=x*c[o][s+1]+A*c[o+1][s+1]+S*c[o+2][s+1]+k*c[o+3][s+1],h=x*c[o][s+2]+A*c[o+1][s+2]+S*c[o+2][s+2]+k*c[o+3][s+2],v=x*c[o][s+3]+A*c[o+1][s+3]+S*c[o+2][s+3]+k*c[o+3][s+3],i[d]=y*u+3*(m*a*f+b*g*h)+p*v;return i}:r?function(i,s,o,a,l){i||(i=[]);var u,f,h,v,c,d;s*=3;var g=l*l,p=g*l,b=1-l,m=b*b,y=m*b;for(c=0;c<e.length;c++)d=e[c],u=d[o+1][s]-d[o][s],f=d[o+1][s+1]-d[o][s+1],h=d[o+1][s+2]-d[o][s+2],v=d[o+1][s+3]-d[o][s+3],i[c]=y*u+3*(m*l*f+b*g*h)+p*v;return i}:n?function(i,s,o,a,l){i||(i=[]);var u,f,h,v;o*=3;var c=1-a,d=l*l,g=1-l,p=g*g,b=g*l*2,m=-3*p,y=3*(p-b),T=3*(b-d),_=3*d;for(h=0;h<e.length;h++)v=e[h],u=m*v[o][s]+y*v[o+1][s]+T*v[o+2][s]+_*v[o+3][s],f=m*v[o][s+1]+y*v[o+1][s+1]+T*v[o+2][s+1]+_*v[o+3][s+1],i[h]=c*u+a*f;return i}:function(i,s,o,a,l){i||(i=[]);var u,f,h,v,c=1-a;for(h=0;h<e.length;h++)v=e[h],u=v[o+1][s]-v[o][s],f=v[o+1][s+1]-v[o][s+1],i[h]=c*u+a*f;return i}},"create_j_derivative_evaluator")),EI}t(Cqe,"requireCreate_j_derivative_evaluator");var CI,mae;function Lqe(){if(mae)return CI;mae=1;var e=Aqe(),r=aw.findBin,n=Mqe(),i=kqe(),s=Eqe(),o=Cqe();return CI=t(function(l){var u=l._a,f=l._b,h=u.length,v=f.length,c=l.aaxis,d=l.baxis,g=u[0],p=u[h-1],b=f[0],m=f[v-1],y=u[u.length-1]-u[0],T=f[f.length-1]-f[0],_=y*e.RELATIVE_CULL_TOLERANCE,M=T*e.RELATIVE_CULL_TOLERANCE;g-=_,p+=_,b-=M,m+=M,l.isVisible=function(w,x){return w>g&&w<p&&x>b&&x<m},l.isOccluded=function(w,x){return w<g||w>p||x<b||x>m},l.setScale=function(){var w=l._x,x=l._y,A=n(l._xctrl,l._yctrl,w,x,c.smoothing,d.smoothing);l._xctrl=A[0],l._yctrl=A[1],l.evalxy=i([l._xctrl,l._yctrl],h,v,c.smoothing,d.smoothing),l.dxydi=s([l._xctrl,l._yctrl],c.smoothing,d.smoothing),l.dxydj=o([l._xctrl,l._yctrl],c.smoothing,d.smoothing)},l.i2a=function(w){var x=Math.max(0,Math.floor(w[0]),h-2),A=w[0]-x;return(1-A)*u[x]+A*u[x+1]},l.j2b=function(w){var x=Math.max(0,Math.floor(w[1]),h-2),A=w[1]-x;return(1-A)*f[x]+A*f[x+1]},l.ij2ab=function(w){return[l.i2a(w[0]),l.j2b(w[1])]},l.a2i=function(w){var x=Math.max(0,Math.min(r(w,u),h-2)),A=u[x],S=u[x+1];return Math.max(0,Math.min(h-1,x+(w-A)/(S-A)))},l.b2j=function(w){var x=Math.max(0,Math.min(r(w,f),v-2)),A=f[x],S=f[x+1];return Math.max(0,Math.min(v-1,x+(w-A)/(S-A)))},l.ab2ij=function(w){return[l.a2i(w[0]),l.b2j(w[1])]},l.i2c=function(w,x){return l.evalxy([],w,x)},l.ab2xy=function(w,x,A){if(!A&&(w<u[0]||w>u[h-1]|x<f[0]||x>f[v-1]))return[!1,!1];var S=l.a2i(w),k=l.b2j(x),L=l.evalxy([],S,k);if(A){var P=0,D=0,B=[],z,R,F,O;w<u[0]?(z=0,R=0,P=(w-u[0])/(u[1]-u[0])):w>u[h-1]?(z=h-2,R=1,P=(w-u[h-1])/(u[h-1]-u[h-2])):(z=Math.max(0,Math.min(h-2,Math.floor(S))),R=S-z),x<f[0]?(F=0,O=0,D=(x-f[0])/(f[1]-f[0])):x>f[v-1]?(F=v-2,O=1,D=(x-f[v-1])/(f[v-1]-f[v-2])):(F=Math.max(0,Math.min(v-2,Math.floor(k))),O=k-F),P&&(l.dxydi(B,z,F,R,O),L[0]+=B[0]*P,L[1]+=B[1]*P),D&&(l.dxydj(B,z,F,R,O),L[0]+=B[0]*D,L[1]+=B[1]*D)}return L},l.c2p=function(w,x,A){return[x.c2p(w[0]),A.c2p(w[1])]},l.p2x=function(w,x,A){return[x.p2c(w[0]),A.p2c(w[1])]},l.dadi=function(w){var x=Math.max(0,Math.min(u.length-2,w));return u[x+1]-u[x]},l.dbdj=function(w){var x=Math.max(0,Math.min(f.length-2,w));return f[x+1]-f[x]},l.dxyda=function(w,x,A,S){var k=l.dxydi(null,w,x,A,S),L=l.dadi(w,A);return[k[0]/L,k[1]/L]},l.dxydb=function(w,x,A,S){var k=l.dxydj(null,w,x,A,S),L=l.dbdj(x,S);return[k[0]/L,k[1]/L]},l.dxyda_rough=function(w,x,A){var S=y*(A||.1),k=l.ab2xy(w+S,x,!0),L=l.ab2xy(w-S,x,!0);return[(k[0]-L[0])*.5/S,(k[1]-L[1])*.5/S]},l.dxydb_rough=function(w,x,A){var S=T*(A||.1),k=l.ab2xy(w,x+S,!0),L=l.ab2xy(w,x-S,!0);return[(k[0]-L[0])*.5/S,(k[1]-L[1])*.5/S]},l.dpdx=function(w){return w._m},l.dpdy=function(w){return w._m}},"setConvert"),CI}t(Lqe,"requireSet_convert$1");var LI,xae;function Rqe(){if(xae)return LI;xae=1;var e=nn(),r=Nt.exports.isArray1D,n=mqe(),i=xqe(),s=bqe(),o=_qe(),a=wqe(),l=c7(),u=Tqe(),f=f7(),h=Lqe();return LI=t(function(c,d){var g=e.getFromId(c,d.xaxis),p=e.getFromId(c,d.yaxis),b=d.aaxis,m=d.baxis,y=d.x,T=d.y,_=[];y&&r(y)&&_.push("x"),T&&r(T)&&_.push("y"),_.length&&f(d,b,m,"a","b",_);var M=d._a=d._a||d.a,w=d._b=d._b||d.b;y=d._x||d.x,T=d._y||d.y;var x={};if(d._cheater){var A=b.cheatertype==="index"?M.length:M,S=m.cheatertype==="index"?w.length:w;y=n(A,S,d.cheaterslope)}d._x=y=l(y),d._y=T=l(T),u(y,M,w),u(T,M,w),h(d),d.setScale();var k=i(y),L=i(T),P=.5*(k[1]-k[0]),D=.5*(k[1]+k[0]),B=.5*(L[1]-L[0]),z=.5*(L[1]+L[0]),R=1.3;return k=[D-P*R,D+P*R],L=[z-B*R,z+B*R],d._extremes[g._id]=e.findExtremes(g,k,{padded:!0}),d._extremes[p._id]=e.findExtremes(p,L,{padded:!0}),s(d,"a","b"),s(d,"b","a"),o(d,b),o(d,m),x.clipsegments=a(d._xctrl,d._yctrl,b,m),x.x=y,x.y=T,x.a=M,x.b=w,[x]},"calc"),LI}t(Rqe,"requireCalc$8");var RI,bae;function Pqe(){return bae||(bae=1,RI={attributes:mB(),supplyDefaults:pqe(),plot:yqe(),calc:Rqe(),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:Ti,categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{description:["The data describing carpet axis layout is set in `y` and (optionally)","also `x`. If only `y` is present, `x` the plot is interpreted as a","cheater plot and is filled in using the `y` values.","`x` and `y` may either be 2D arrays matching with each dimension matching","that of `a` and `b`, or they may be 1D arrays with total length equal to","that of `a` and `b`."].join(" ")}}),RI}t(Pqe,"requireCarpet$1");var _ae;function Dqe(){return _ae||(_ae=1,function(e){e.exports=Pqe()}(oI)),oI.exports}t(Dqe,"requireCarpet");var PI={exports:{}},DI,wae;function Wpe(){if(wae)return DI;wae=1;var e=Ps,r=Ni,n=Un.hovertemplateAttrs,i=Un.texttemplateAttrs,s=Qi,o=cn.extendFlat,a=e.marker,l=e.line,u=a.line;return DI={carpet:{valType:"string",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},a:{valType:"data_array",editType:"calc",description:"Sets the a-axis coordinates."},b:{valType:"data_array",editType:"calc",description:"Sets the b-axis coordinates."},mode:o({},e.mode,{dflt:"markers"}),text:o({},e.text,{description:["Sets text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:i({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},e.hovertext,{description:["Sets hover text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:e.connectgaps,fill:o({},e.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterternary has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:e.fillcolor,marker:o({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,angle:a.angle,angleref:a.angleref,standoff:a.standoff,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:o({width:u.width,editType:"calc"},s("marker.line")),gradient:a.gradient,editType:"calc"},s("marker")),textfont:e.textfont,textposition:e.textposition,selected:e.selected,unselected:e.unselected,hoverinfo:o({},r.hoverinfo,{flags:["a","b","text","name"]}),hoveron:e.hoveron,hovertemplate:n()},DI}t(Wpe,"requireAttributes$7");var II,Tae;function Iqe(){if(Tae)return II;Tae=1;var e=Nt.exports,r=vd,n=ho,i=Ph,s=mv,o=ox,a=xv,l=dd,u=Wpe();return II=t(function(h,v,c,d){function g(M,w){return e.coerce(h,v,u,M,w)}t(g,"coerce"),g("carpet"),v.xaxis="x",v.yaxis="y";var p=g("a"),b=g("b"),m=Math.min(p.length,b.length);if(!m){v.visible=!1;return}v._length=m,g("text"),g("texttemplate"),g("hovertext");var y=m<r.PTS_LINESONLY?"lines+markers":"lines";g("mode",y),n.hasLines(v)&&(s(h,v,c,d,g,{backoff:!0}),o(h,v,g),g("connectgaps")),n.hasMarkers(v)&&i(h,v,c,d,g,{gradient:!0}),n.hasText(v)&&a(h,v,d,g);var T=[];(n.hasMarkers(v)||n.hasText(v))&&(g("marker.maxdisplayed"),T.push("points")),g("fill"),v.fill!=="none"&&(l(h,v,c,g),n.hasLines(v)||o(h,v,g)),(v.fill==="tonext"||v.fill==="toself")&&T.push("fills");var _=g("hoveron",T.join("+")||"points");_!=="fills"&&g("hovertemplate"),e.coerceSelectionMarkerOpacity(v,g)},"supplyDefaults"),II}t(Iqe,"requireDefaults$7");var zI,Aae;function zqe(){return Aae||(Aae=1,zI=t(function(r,n){var i={},s=n._carpet,o=s.ab2ij([r.a,r.b]),a=Math.floor(o[0]),l=o[0]-a,u=Math.floor(o[1]),f=o[1]-u,h=s.evalxy([],a,u,l,f);return i.yLabel=h[1].toFixed(3),i},"formatLabels")),zI}t(zqe,"requireFormat_labels$3");var FI,Sae;function xB(){return Sae||(Sae=1,FI=t(function(e,r){for(var n=e._fullData.length,i,s=0;s<n;s++){var o=e._fullData[s];if(o.index!==r.index&&o.type==="carpet"&&(i||(i=o),o.carpet===r.carpet))return o}return i},"lookup_carpetid")),FI}t(xB,"requireLookup_carpetid");var BI,Mae;function Fqe(){if(Mae)return BI;Mae=1;var e=xn,r=Dh,n=pd,i=Ih,s=kh.calcMarkerSize,o=xB();return BI=t(function(l,u){var f=u._carpetTrace=o(l,u);if(!(!f||!f.visible||f.visible==="legendonly")){var h;u.xaxis=f.xaxis,u.yaxis=f.yaxis;var v=u._length,c=new Array(v),d,g,p=!1;for(h=0;h<v;h++)if(d=u.a[h],g=u.b[h],e(d)&&e(g)){var b=f.ab2xy(+d,+g,!0),m=f.isVisible(+d,+g);m||(p=!0),c[h]={x:b[0],y:b[1],a:d,b:g,vis:m}}else c[h]={x:!1,y:!1};return u._needsCull=p,c[0].carpet=f,c[0].trace=u,s(u,v),r(l,u),n(c,u),i(c,u),c}},"calc"),BI}t(Fqe,"requireCalc$7");var OI,kae;function Bqe(){if(kae)return OI;kae=1;var e=sx,r=nn(),n=bn.exports;return OI=t(function(s,o,a,l){var u,f,h,v=a[0][0].carpet,c=r.getFromId(s,v.xaxis||"x"),d=r.getFromId(s,v.yaxis||"y"),g={xaxis:c,yaxis:d,plot:o.plot};for(u=0;u<a.length;u++)f=a[u][0].trace,f._xA=c,f._yA=d;for(e(s,g,a,l),u=0;u<a.length;u++)f=a[u][0].trace,h=l.selectAll("g.trace"+f.uid+" .js-line"),n.setClipUrl(h,a[u][0].carpet._clipPathId,s)},"plot"),OI}t(Bqe,"requirePlot$6");var NI,Eae;function Oqe(){if(Eae)return NI;Eae=1;var e=ux,r=Nt.exports.fillText;return NI=t(function(i,s,o,a){var l=e(i,s,o,a);if(!l||l[0].index===!1)return;var u=l[0];if(u.index===void 0){var f=1-u.y0/i.ya._length,h=i.xa._length,v=h*f/2,c=h-v;return u.x0=Math.max(Math.min(u.x0,c),v),u.x1=Math.max(Math.min(u.x1,c),v),l}var d=u.cd[u.index];u.a=d.a,u.b=d.b,u.xLabelVal=void 0,u.yLabelVal=void 0;var g=u.trace,p=g._carpet,b=g._module.formatLabels(d,g);u.yLabel=b.yLabel,delete u.text;var m=[];function y(M,w){var x;M.labelprefix&&M.labelprefix.length>0?x=M.labelprefix.replace(/ = $/,""):x=M._hovertitle,m.push(x+": "+w.toFixed(3)+M.labelsuffix)}if(t(y,"textPart"),!g.hovertemplate){var T=d.hi||g.hoverinfo,_=T.split("+");_.indexOf("all")!==-1&&(_=["a","b","text"]),_.indexOf("a")!==-1&&y(p.aaxis,d.a),_.indexOf("b")!==-1&&y(p.baxis,d.b),m.push("y: "+u.yLabel),_.indexOf("text")!==-1&&r(d,g,m),u.extraText=m.join("<br>")}return l},"hoverPoints"),NI}t(Oqe,"requireHover$5");var qI,Cae;function Nqe(){return Cae||(Cae=1,qI=t(function(r,n,i,s,o){var a=s[o];return r.a=a.a,r.b=a.b,r.y=a.y,r},"eventData")),qI}t(Nqe,"requireEvent_data");var UI,Lae;function qqe(){return Lae||(Lae=1,UI={attributes:Wpe(),supplyDefaults:Iqe(),colorbar:_u,formatLabels:zqe(),calc:Fqe(),plot:Bqe(),style:kf.style,styleOnSelect:kf.styleOnSelect,hoverPoints:Oqe(),selectPoints:fx,eventData:Nqe(),moduleType:"trace",name:"scattercarpet",basePlotModule:Ti,categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{hrName:"scatter_carpet",description:["Plots a scatter trace on either the first carpet axis or the","carpet axis with a matching `carpet` attribute."].join(" ")}}),UI}t(qqe,"requireScattercarpet$1");var Rae;function Uqe(){return Rae||(Rae=1,function(e){e.exports=qqe()}(PI)),PI.exports}t(Uqe,"requireScattercarpet");var HI={exports:{}},$I,Pae;function Xpe(){if(Pae)return $I;Pae=1;var e=Iy(),r=Hw(),n=Qi,i=cn.extendFlat,s=r.contours;return $I=i({carpet:{valType:"string",editType:"calc",description:["The `carpet` of the carpet axes on which this contour trace lies"].join(" ")},z:e.z,a:e.x,a0:e.x0,da:e.dx,b:e.y,b0:e.y0,db:e.dy,text:e.text,hovertext:e.hovertext,transpose:e.transpose,atype:e.xtype,btype:e.ytype,fillcolor:r.fillcolor,autocontour:r.autocontour,ncontours:r.ncontours,contours:{type:s.type,start:s.start,end:s.end,size:s.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc",description:["Determines the coloring method showing the contour values.","If *fill*, coloring is done evenly between each contour level","If *lines*, coloring is done on the contour lines.","If *none*, no coloring is applied on this trace."].join(" ")},showlines:s.showlines,showlabels:s.showlabels,labelfont:s.labelfont,labelformat:s.labelformat,operation:s.operation,value:s.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r.line.color,width:r.line.width,dash:r.line.dash,smoothing:r.line.smoothing,editType:"plot"},transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1})),$I}t(Xpe,"requireAttributes$6");var VI,Dae;function Zpe(){if(Dae)return VI;Dae=1;var e=Nt.exports,r=Ow(),n=Xpe(),i=fce(),s=b7(),o=_7();return VI=t(function(l,u,f,h){function v(p,b){return e.coerce(l,u,n,p,b)}t(v,"coerce");function c(p){return e.coerce2(l,u,n,p)}if(t(c,"coerce2"),v("carpet"),l.a&&l.b){var d=r(l,u,v,h,"a","b");if(!d){u.visible=!1;return}v("text");var g=v("contours.type")==="constraint";g?i(l,u,v,h,f,{hasHover:!1}):(s(l,u,v,c),o(l,u,v,h,{hasHover:!1}))}else u._defaultColor=f,u._length=null},"supplyDefaults"),VI}t(Zpe,"requireDefaults$6");var GI,Iae;function Hqe(){if(Iae)return GI;Iae=1;var e=Lf,r=Nt.exports,n=f7(),i=c7(),s=h7(),o=v7(),a=Xfe(),l=Zpe(),u=xB(),f=tce();GI=t(function(c,d){var g=d._carpetTrace=u(c,d);if(!(!g||!g.visible||g.visible==="legendonly")){if(!d.a||!d.b){var p=c.data[g.index],b=c.data[d.index];b.a||(b.a=p.a),b.b||(b.b=p.b),l(b,d,d._defaultColor,c._fullLayout)}var m=h(c,d);return f(d,d._z),m}},"calc");function h(v,c){var d=c._carpetTrace,g=d.aaxis,p=d.baxis,b,m,y,T,_,M,w;g._minDtick=0,p._minDtick=0,r.isArray1D(c.z)&&n(c,g,p,"a","b",["z"]),b=c._a=c._a||c.a,T=c._b=c._b||c.b,b=b?g.makeCalcdata(c,"_a"):[],T=T?p.makeCalcdata(c,"_b"):[],m=c.a0||0,y=c.da||1,_=c.b0||0,M=c.db||1,w=c._z=i(c._z||c.z,c.transpose),c._emptypoints=o(w),s(w,c._emptypoints);var x=r.maxRowLength(w),A=c.xtype==="scaled"?"":b,S=a(c,A,m,y,x,g),k=c.ytype==="scaled"?"":T,L=a(c,k,_,M,w.length,p),P={a:S,b:L,z:w};return c.contours.type==="levels"&&c.contours.coloring!=="none"&&e(v,c,{vals:w,containerStr:"",cLetter:"z"}),[P]}return t(h,"heatmappishCalc"),GI}t(Hqe,"requireCalc$6");var jI,zae;function $qe(){if(zae)return jI;zae=1;var e=Nt.exports.isArrayOrTypedArray;return jI=t(function(r,n,i,s){var o,a,l,u,f,h,v,c,d,g,p,b,m,y=e(i)?"a":"b",T=y==="a"?r.aaxis:r.baxis,_=T.smoothing,M=y==="a"?r.a2i:r.b2j,w=y==="a"?i:s,x=y==="a"?s:i,A=y==="a"?n.a.length:n.b.length,S=y==="a"?n.b.length:n.a.length,k=Math.floor(y==="a"?r.b2j(x):r.a2i(x)),L=y==="a"?function(G){return r.evalxy([],G,k)}:function(G){return r.evalxy([],k,G)};_&&(l=Math.max(0,Math.min(S-2,k)),u=k-l,a=y==="a"?function(G,$){return r.dxydi([],G,l,$,u)}:function(G,$){return r.dxydj([],l,G,u,$)});var P=M(w[0]),D=M(w[1]),B=P<D?1:-1,z=(D-P)*1e-8,R=B>0?Math.floor:Math.ceil,F=B>0?Math.ceil:Math.floor,O=B>0?Math.min:Math.max,q=B>0?Math.max:Math.min,H=R(P+z),j=F(D-z);v=L(P);var X=[[v]];for(o=H;o*B<j*B;o+=B)f=[],p=q(P,o),b=O(D,o+B),m=b-p,h=Math.max(0,Math.min(A-2,Math.floor(.5*(p+b)))),c=L(b),_&&(d=a(h,p-h),g=a(h,b-h),f.push([v[0]+d[0]/3*m,v[1]+d[1]/3*m]),f.push([c[0]-g[0]/3*m,c[1]-g[1]/3*m])),f.push(c),X.push(f),v=c;return X},"axis_aligned_line"),jI}t($qe,"requireAxis_aligned_line");var YI,Fae;function Vqe(){if(Fae)return YI;Fae=1;var e=Va.exports,r=jpe(),n=Ype(),i=bn.exports,s=Nt.exports,o=ace(),a=nce(),l=w7(),u=Vw(),f=oce(),h=ice(),v=sce(),c=xB(),d=$qe();YI=t(function(A,S,k,L){var P=S.xaxis,D=S.yaxis;s.makeTraceGroups(L,k,"contour").each(function(B){var z=e.select(this),R=B[0],F=R.trace,O=F._carpetTrace=c(A,F),q=A.calcdata[O.index][0];if(!O.visible||O.visible==="legendonly")return;var H=R.a,j=R.b,X=F.contours,G=h(X,S,R),$=X.type==="constraint",te=X._operation,ee=$?te==="="?"lines":"fill":X.coloring;function ie(me){var pe=O.ab2xy(me[0],me[1],!0);return[P.c2p(pe[0]),D.c2p(pe[1])]}t(ie,"ab2p");var se=[[H[0],j[j.length-1]],[H[H.length-1],j[j.length-1]],[H[H.length-1],j[0]],[H[0],j[0]]];o(G);var W=(H[H.length-1]-H[0])*1e-8,ne=(j[j.length-1]-j[0])*1e-8;a(G,W,ne);var he=G;X.type==="constraint"&&(he=f(G,te)),g(G,ie);var re,ae,fe,ce,xe=[];for(ce=q.clipsegments.length-1;ce>=0;ce--)re=q.clipsegments[ce],ae=r([],re.x,P.c2p),fe=r([],re.y,D.c2p),ae.reverse(),fe.reverse(),xe.push(n(ae,fe,re.bicubic));var Te="M"+xe.join("L")+"Z";_(z,q.clipsegments,P,D,$,ee),M(F,z,P,D,he,se,ie,O,q,ee,Te),p(z,G,A,R,X,S,O),i.setClipUrl(z,O._clipPathId,A)})},"plot");function g(x,A){var S,k,L,P,D,B,z,R,F;for(S=0;S<x.length;S++){for(P=x[S],D=P.pedgepaths=[],B=P.ppaths=[],k=0;k<P.edgepaths.length;k++){for(F=P.edgepaths[k],z=[],L=0;L<F.length;L++)z[L]=A(F[L]);D.push(z)}for(k=0;k<P.paths.length;k++){for(F=P.paths[k],R=[],L=0;L<F.length;L++)R[L]=A(F[L]);B.push(R)}}}t(g,"mapPathinfo");function p(x,A,S,k,L,P,D){var B=s.ensureSingle(x,"g","contourlines"),z=L.showlines!==!1,R=L.showlabels,F=z&&R,O=l.createLines(B,z||R,A),q=l.createLineClip(B,F,S,k.trace.uid),H=x.selectAll("g.contourlabels").data(R?[0]:[]);if(H.exit().remove(),H.enter().append("g").classed("contourlabels",!0),R){var j=P.xaxis,X=P.yaxis,G=j._length,$=X._length,te=[[[0,0],[G,0],[G,$],[0,$]]],ee=[];s.clearLocationCache();var ie=l.labelFormatter(S,k),se=i.tester.append("text").attr("data-notex",1).call(i.font,L.labelfont),W={left:0,right:G,center:G/2,top:0,bottom:$,middle:$/2},ne=Math.sqrt(G*G+$*$),he=u.LABELDISTANCE*ne/Math.max(1,A.length/u.LABELINCREASE);O.each(function(re){var ae=l.calcTextOpts(re.level,ie,se,S);e.select(this).selectAll("path").each(function(fe){var ce=this,xe=s.getVisibleSegment(ce,W,ae.height/2);if(!!xe&&(b(ce,fe,re,xe,D,ae.height),!(xe.len<(ae.width+ae.height)*u.LABELMIN)))for(var Te=Math.min(Math.ceil(xe.len/he),u.LABELMAX),me=0;me<Te;me++){var pe=l.findBestTextLocation(ce,xe,ae,ee,W);if(!pe)break;l.addLabelData(pe,ae,ee,te)}})}),se.remove(),l.drawLabels(H,ee,S,q,F?te:null)}R&&!z&&O.remove()}t(p,"makeLinesAndLabels");function b(x,A,S,k,L,P){for(var D,B=0;B<S.pedgepaths.length;B++)A===S.pedgepaths[B]&&(D=S.edgepaths[B]);if(!D)return;var z=L.a[0],R=L.a[L.a.length-1],F=L.b[0],O=L.b[L.b.length-1];function q($,te){var ee=0,ie,se=.1;return(Math.abs($[0]-z)<se||Math.abs($[0]-R)<se)&&(ie=y(L.dxydb_rough($[0],$[1],se)),ee=Math.max(ee,P*T(te,ie)/2)),(Math.abs($[1]-F)<se||Math.abs($[1]-O)<se)&&(ie=y(L.dxyda_rough($[0],$[1],se)),ee=Math.max(ee,P*T(te,ie)/2)),ee}t(q,"getOffset");var H=m(x,0,1),j=m(x,k.total,k.total-1),X=q(D[0],H),G=k.total-q(D[D.length-1],j);k.min<X&&(k.min=X),k.max>G&&(k.max=G),k.len=k.max-k.min}t(b,"constrainToCarpet");function m(x,A,S){var k=x.getPointAtLength(A),L=x.getPointAtLength(S),P=L.x-k.x,D=L.y-k.y,B=Math.sqrt(P*P+D*D);return[P/B,D/B]}t(m,"getUnitVector");function y(x){var A=Math.sqrt(x[0]*x[0]+x[1]*x[1]);return[x[0]/A,x[1]/A]}t(y,"normalizeVector");function T(x,A){var S=Math.abs(x[0]*A[0]+x[1]*A[1]),k=Math.sqrt(1-S*S);return k/S}t(T,"vectorTan");function _(x,A,S,k,L,P){var D,B,z,R,F=s.ensureSingle(x,"g","contourbg"),O=F.selectAll("path").data(P==="fill"&&!L?[0]:[]);O.enter().append("path"),O.exit().remove();var q=[];for(R=0;R<A.length;R++)D=A[R],B=r([],D.x,S.c2p),z=r([],D.y,k.c2p),q.push(n(B,z,D.bicubic));O.attr("d","M"+q.join("L")+"Z").style("stroke","none")}t(_,"makeBackground");function M(x,A,S,k,L,P,D,B,z,R,F){var O=R==="fill";O&&v(L,x.contours);var q=s.ensureSingle(A,"g","contourfill"),H=q.selectAll("path").data(O?L:[]);H.enter().append("path"),H.exit().remove(),H.each(function(j){var X=(j.prefixBoundary?F:"")+w(x,j,P,D,B,z,S,k);X?e.select(this).attr("d",X).style("stroke","none"):e.select(this).remove()})}t(M,"makeFills");function w(x,A,S,k,L,P,D,B){var z,R="",F=A.edgepaths.map(function(fe,ce){return ce}),O=!0,q,H,j,X,G,$,te=Math.abs(S[0][0]-S[2][0])*1e-4,ee=Math.abs(S[0][1]-S[2][1])*1e-4;function ie(fe){return Math.abs(fe[1]-S[0][1])<ee}t(ie,"istop");function se(fe){return Math.abs(fe[1]-S[2][1])<ee}t(se,"isbottom");function W(fe){return Math.abs(fe[0]-S[0][0])<te}t(W,"isleft");function ne(fe){return Math.abs(fe[0]-S[2][0])<te}t(ne,"isright");function he(fe,ce){var xe,Te,me,pe,oe="";for(ie(fe)&&!ne(fe)||se(fe)&&!W(fe)?(pe=L.aaxis,me=d(L,P,[fe[0],ce[0]],.5*(fe[1]+ce[1]))):(pe=L.baxis,me=d(L,P,.5*(fe[0]+ce[0]),[fe[1],ce[1]])),xe=1;xe<me.length;xe++)for(oe+=pe.smoothing?"C":"L",Te=0;Te<me[xe].length;Te++){var de=me[xe][Te];oe+=[D.c2p(de[0]),B.c2p(de[1])]+" "}return oe}for(t(he,"pathto"),z=0,q=null;F.length;){var re=A.edgepaths[z][0];for(q&&(R+=he(q,re)),$=i.smoothopen(A.edgepaths[z].map(k),A.smoothing),R+=O?$:$.replace(/^M/,"L"),F.splice(F.indexOf(z),1),q=A.edgepaths[z][A.edgepaths[z].length-1],X=-1,j=0;j<4;j++){if(!q){s.log("Missing end?",z,A);break}for(ie(q)&&!ne(q)?H=S[1]:W(q)?H=S[0]:se(q)?H=S[3]:ne(q)&&(H=S[2]),G=0;G<A.edgepaths.length;G++){var ae=A.edgepaths[G][0];Math.abs(q[0]-H[0])<te?Math.abs(q[0]-ae[0])<te&&(ae[1]-q[1])*(H[1]-ae[1])>=0&&(H=ae,X=G):Math.abs(q[1]-H[1])<ee?Math.abs(q[1]-ae[1])<ee&&(ae[0]-q[0])*(H[0]-ae[0])>=0&&(H=ae,X=G):s.log("endpt to newendpt is not vert. or horz.",q,H,ae)}if(X>=0)break;R+=he(q,H),q=H}if(X===A.edgepaths.length){s.log("unclosed perimeter path");break}z=X,O=F.indexOf(z)===-1,O&&(z=F[0],R+=he(q,H)+"Z",q=null)}for(z=0;z<A.paths.length;z++)R+=i.smoothclosed(A.paths[z].map(k),A.smoothing);return R}return t(w,"joinAllPaths"),YI}t(Vqe,"requirePlot$5");var WI,Bae;function Gqe(){return Bae||(Bae=1,WI={attributes:Xpe(),supplyDefaults:Zpe(),colorbar:A7(),calc:Hqe(),plot:Vqe(),style:T7(),moduleType:"trace",name:"contourcarpet",basePlotModule:Ti,categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{hrName:"contour_carpet",description:["Plots contours on either the first carpet axis or the","carpet axis with a matching `carpet` attribute. Data `z`","is interpreted as matching that of the corresponding carpet","axis."].join(" ")}}),WI}t(Gqe,"requireContourcarpet$1");var Oae;function jqe(){return Oae||(Oae=1,function(e){e.exports=Gqe()}(HI)),HI.exports}t(jqe,"requireContourcarpet");var XI={exports:{}},ZI,Nae;function bB(){if(Nae)return ZI;Nae=1;var e=Nt.exports.extendFlat,r=Ps,n=Vo.axisHoverFormat,i=yu.dash,s=X1,o=px(),a=o.INCREASING.COLOR,l=o.DECREASING.COLOR,u=r.line;function f(h){return{line:{color:e({},u.color,{dflt:h}),width:u.width,dash:i,editType:"style"},editType:"style"}}return t(f,"directionAttrs"),ZI={xperiod:r.xperiod,xperiod0:r.xperiod0,xperiodalignment:r.xperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the x coordinates.","If absent, linear coordinate will be generated."].join(" ")},open:{valType:"data_array",editType:"calc",description:"Sets the open values."},high:{valType:"data_array",editType:"calc",description:"Sets the high values."},low:{valType:"data_array",editType:"calc",description:"Sets the low values."},close:{valType:"data_array",editType:"calc",description:"Sets the close values."},line:{width:e({},u.width,{description:[u.width,"Note that this style setting can also be set per","direction via `increasing.line.width` and","`decreasing.line.width`."].join(" ")}),dash:e({},i,{description:[i.description,"Note that this style setting can also be set per","direction via `increasing.line.dash` and","`decreasing.line.dash`."].join(" ")}),editType:"style"},increasing:f(a),decreasing:f(l),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets hover text elements associated with each sample point.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to","this trace's sample points."].join(" ")},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:"Same as `text`."},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc",description:["Sets the width of the open/close tick marks","relative to the *x* minimal interval."].join(" ")},hoverlabel:e({},s.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style",description:["Show hover information (open, close, high, low) in","separate labels."].join(" ")}})},ZI}t(bB,"requireAttributes$5");var KI,qae;function Kpe(){if(qae)return KI;qae=1;var e=Na,r=Nt.exports;return KI=t(function(i,s,o,a){var l=o("x"),u=o("open"),f=o("high"),h=o("low"),v=o("close");o("hoverlabel.split");var c=e.getComponentMethod("calendars","handleTraceDefaults");if(c(i,s,["x"],a),!!(u&&f&&h&&v)){var d=Math.min(u.length,f.length,h.length,v.length);return l&&(d=Math.min(d,r.minRowLength(l))),s._length=d,d}},"handleOHLC"),KI}t(Kpe,"requireOhlc_defaults");var JI,Uae;function Yqe(){if(Uae)return JI;Uae=1;var e=Nt.exports,r=Kpe(),n=yv,i=bB();JI=t(function(a,l,u,f){function h(c,d){return e.coerce(a,l,i,c,d)}t(h,"coerce");var v=r(a,l,h,f);if(!v){l.visible=!1;return}n(a,l,f,h,{x:!0}),h("xhoverformat"),h("yhoverformat"),h("line.width"),h("line.dash"),s(a,l,h,"increasing"),s(a,l,h,"decreasing"),h("text"),h("hovertext"),h("tickwidth"),f._requestRangeslider[l.xaxis]=!0},"supplyDefaults");function s(o,a,l,u){l(u+".line.color"),l(u+".line.width",a.line.width),l(u+".line.dash",a.line.dash)}return t(s,"handleDirection"),JI}t(Yqe,"requireDefaults$5");var QI,Hae;function Jpe(){if(Hae)return QI;Hae=1;var e=Nt.exports,r=e._,n=nn(),i=bv,s=jn.BADNUM;function o(f,h){var v=n.getFromId(f,h.xaxis),c=n.getFromId(f,h.yaxis),d=u(f,v,h),g=h._minDiff;h._minDiff=null;var p=h._origX;h._origX=null;var b=h._xcalc;h._xcalc=null;var m=l(f,h,p,b,c,a);return h._extremes[v._id]=n.findExtremes(v,b,{vpad:g/2}),m.length?(e.extendFlat(m[0].t,{wHover:g/2,tickLen:d}),m):[{t:{empty:!0}}]}t(o,"calc");function a(f,h,v,c){return{o:f,h,l:v,c}}t(a,"ptFunc");function l(f,h,v,c,d,g){for(var p=d.makeCalcdata(h,"open"),b=d.makeCalcdata(h,"high"),m=d.makeCalcdata(h,"low"),y=d.makeCalcdata(h,"close"),T=Array.isArray(h.text),_=Array.isArray(h.hovertext),M=!0,w=null,x=!!h.xperiodalignment,A=[],S=0;S<c.length;S++){var k=c[S],L=p[S],P=b[S],D=m[S],B=y[S];if(k!==s&&L!==s&&P!==s&&D!==s&&B!==s){B===L?w!==null&&B!==w&&(M=B>w):M=B>L,w=B;var z=g(L,P,D,B);z.pos=k,z.yc=(L+B)/2,z.i=S,z.dir=M?"increasing":"decreasing",z.x=z.pos,z.y=[D,P],x&&(z.orig_p=v[S]),T&&(z.tx=h.text[S]),_&&(z.htx=h.hovertext[S]),A.push(z)}else A.push({pos:k,empty:!0})}return h._extremes[d._id]=n.findExtremes(d,e.concat(m,b),{padded:!0}),A.length&&(A[0].t={labels:{open:r(f,"open:")+" ",high:r(f,"high:")+" ",low:r(f,"low:")+" ",close:r(f,"close:")+" "}}),A}t(l,"calcCommon");function u(f,h,v){var c=v._minDiff;if(!c){var d=f._fullData,g=[];c=1/0;var p;for(p=0;p<d.length;p++){var b=d[p];if(b.type==="ohlc"&&b.visible===!0&&b.xaxis===h._id){g.push(b);var m=h.makeCalcdata(b,"x");b._origX=m;var y=i(v,h,"x",m).vals;b._xcalc=y;var T=e.distinctVals(y).minDiff;T&&isFinite(T)&&(c=Math.min(c,T))}}for(c===1/0&&(c=1),p=0;p<g.length;p++)g[p]._minDiff=c}return c*v.tickwidth}return t(u,"convertTickWidth"),QI={calc:o,calcCommon:l},QI}t(Jpe,"requireCalc$5");var e6,$ae;function Wqe(){if($ae)return e6;$ae=1;var e=Va.exports,r=Nt.exports;return e6=t(function(i,s,o,a){var l=s.yaxis,u=s.xaxis,f=!!u.rangebreaks;r.makeTraceGroups(a,o,"trace ohlc").each(function(h){var v=e.select(this),c=h[0],d=c.t,g=c.trace;if(g.visible!==!0||d.empty){v.remove();return}var p=d.tickLen,b=v.selectAll("path").data(r.identity);b.enter().append("path"),b.exit().remove(),b.attr("d",function(m){if(m.empty)return"M0,0Z";var y=u.c2p(m.pos-p,!0),T=u.c2p(m.pos+p,!0),_=f?(y+T)/2:u.c2p(m.pos,!0),M=l.c2p(m.o,!0),w=l.c2p(m.h,!0),x=l.c2p(m.l,!0),A=l.c2p(m.c,!0);return"M"+y+","+M+"H"+_+"M"+_+","+w+"V"+x+"M"+T+","+A+"H"+_})})},"plot"),e6}t(Wqe,"requirePlot$4");var t6,Vae;function Xqe(){if(Vae)return t6;Vae=1;var e=Va.exports,r=bn.exports,n=$a.exports;return t6=t(function(s,o,a){var l=a||e.select(s).selectAll("g.ohlclayer").selectAll("g.trace");l.style("opacity",function(u){return u[0].trace.opacity}),l.each(function(u){var f=u[0].trace;e.select(this).selectAll("path").each(function(h){if(!h.empty){var v=f[h.dir].line;e.select(this).style("fill","none").call(n.stroke,v.color).call(r.dashLine,v.dash,v.width).style("opacity",f.selectedpoints&&!h.selected?.3:1)}})})},"style"),t6}t(Xqe,"requireStyle");var r6,Gae;function Qpe(){if(Gae)return r6;Gae=1;var e=nn(),r=Nt.exports,n=Ko,i=$a.exports,s=Nt.exports.fillText,o=px(),a={increasing:o.INCREASING.SYMBOL,decreasing:o.DECREASING.SYMBOL};function l(v,c,d,g){var p=v.cd,b=p[0].trace;return b.hoverlabel.split?f(v,c,d,g):h(v,c,d,g)}t(l,"hoverPoints");function u(v,c,d,g){var p=v.cd,b=v.xa,m=p[0].trace,y=p[0].t,T=m.type,_=T==="ohlc"?"l":"min",M=T==="ohlc"?"h":"max",w,x,A=y.bPos||0,S=t(function(j){return j.pos+A-c},"shiftPos"),k=y.bdPos||y.tickLen,L=y.wHover,P=Math.min(1,k/Math.abs(b.r2c(b.range[1])-b.r2c(b.range[0])));w=v.maxHoverDistance-P,x=v.maxSpikeDistance-P;function D(j){var X=S(j);return n.inbox(X-L,X+L,w)}t(D,"dx");function B(j){var X=j[_],G=j[M];return X===G||n.inbox(X-d,G-d,w)}t(B,"dy");function z(j){return(D(j)+B(j))/2}t(z,"dxy");var R=n.getDistanceFunction(g,D,B,z);if(n.getClosest(p,R,v),v.index===!1)return null;var F=p[v.index];if(F.empty)return null;var O=F.dir,q=m[O],H=q.line.color;return i.opacity(H)&&q.line.width?v.color=H:v.color=q.fillcolor,v.x0=b.c2p(F.pos+A-k,!0),v.x1=b.c2p(F.pos+A+k,!0),v.xLabelVal=F.orig_p!==void 0?F.orig_p:F.pos,v.spikeDistance=z(F)*x/w,v.xSpike=b.c2p(F.pos,!0),v}t(u,"_getClosestPoint");function f(v,c,d,g){var p=v.cd,b=v.ya,m=p[0].trace,y=p[0].t,T=[],_=u(v,c,d,g);if(!_)return[];var M=_.index,w=p[M],x=w.hi||m.hoverinfo,A=x.split("+"),S=x==="all",k=S||A.indexOf("y")!==-1;if(!k)return[];for(var L=["high","open","close","low"],P={},D=0;D<L.length;D++){var B=L[D],z=m[B][_.index],R=b.c2p(z,!0),F;z in P?(F=P[z],F.yLabel+="<br>"+y.labels[B]+e.hoverLabelText(b,z,m.yhoverformat)):(F=r.extendFlat({},_),F.y0=F.y1=R,F.yLabelVal=z,F.yLabel=y.labels[B]+e.hoverLabelText(b,z,m.yhoverformat),F.name="",T.push(F),P[z]=F)}return T}t(f,"hoverSplit");function h(v,c,d,g){var p=v.cd,b=v.ya,m=p[0].trace,y=p[0].t,T=u(v,c,d,g);if(!T)return[];var _=T.index,M=p[_],w=T.index=M.i,x=M.dir;function A(z){return y.labels[z]+e.hoverLabelText(b,m[z][w],m.yhoverformat)}t(A,"getLabelLine");var S=M.hi||m.hoverinfo,k=S.split("+"),L=S==="all",P=L||k.indexOf("y")!==-1,D=L||k.indexOf("text")!==-1,B=P?[A("open"),A("high"),A("low"),A("close")+"  "+a[x]]:[];return D&&s(M,m,B),T.extraText=B.join("<br>"),T.y0=T.y1=b.c2p(M.yc,!0),[T]}return t(h,"hoverOnPoints"),r6={hoverPoints:l,hoverSplit:f,hoverOnPoints:h},r6}t(Qpe,"requireHover$4");var a6,jae;function e0e(){return jae||(jae=1,a6=t(function(r,n){var i=r.cd,s=r.xaxis,o=r.yaxis,a=[],l,u=i[0].t.bPos||0;if(n===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++){var f=i[l];n.contains([s.c2p(f.pos+u),o.c2p(f.yc)],null,f.i,r)?(a.push({pointNumber:f.i,x:s.c2d(f.pos),y:o.c2d(f.yc)}),f.selected=1):f.selected=0}return a},"selectPoints")),a6}t(e0e,"requireSelect");var n6,Yae;function Zqe(){return Yae||(Yae=1,n6={moduleType:"trace",name:"ohlc",basePlotModule:Ti,categories:["cartesian","svg","showLegend"],meta:{description:["The ohlc (short for Open-High-Low-Close) is a style of financial chart describing","open, high, low and close for a given `x` coordinate (most likely time).","The tip of the lines represent the `low` and `high` values and","the horizontal segments represent the `open` and `close` values.","Sample points where the close value is higher (lower) then the open","value are called increasing (decreasing).","By default, increasing items are drawn in green whereas","decreasing are drawn in red."].join(" ")},attributes:bB(),supplyDefaults:Yqe(),calc:Jpe().calc,plot:Wqe(),style:Xqe(),hoverPoints:Qpe().hoverPoints,selectPoints:e0e()}),n6}t(Zqe,"requireOhlc$1");var Wae;function Kqe(){return Wae||(Wae=1,function(e){e.exports=Zqe()}(XI)),XI.exports}t(Kqe,"requireOhlc");var i6={exports:{}},o6,Xae;function t0e(){if(Xae)return o6;Xae=1;var e=Nt.exports.extendFlat,r=Vo.axisHoverFormat,n=bB(),i=Fw();function s(o){return{line:{color:e({},i.line.color,{dflt:o}),width:i.line.width,editType:"style"},fillcolor:i.fillcolor,editType:"style"}}return t(s,"directionAttrs"),o6={xperiod:n.xperiod,xperiod0:n.xperiod0,xperiodalignment:n.xperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),x:n.x,open:n.open,high:n.high,low:n.low,close:n.close,line:{width:e({},i.line.width,{description:[i.line.width.description,"Note that this style setting can also be set per","direction via `increasing.line.width` and","`decreasing.line.width`."].join(" ")}),editType:"style"},increasing:s(n.increasing.line.color.dflt),decreasing:s(n.decreasing.line.color.dflt),text:n.text,hovertext:n.hovertext,whiskerwidth:e({},i.whiskerwidth,{dflt:0}),hoverlabel:n.hoverlabel},o6}t(t0e,"requireAttributes$4");var s6,Zae;function Jqe(){if(Zae)return s6;Zae=1;var e=Nt.exports,r=$a.exports,n=Kpe(),i=yv,s=t0e();s6=t(function(l,u,f,h){function v(d,g){return e.coerce(l,u,s,d,g)}t(v,"coerce");var c=n(l,u,v,h);if(!c){u.visible=!1;return}i(l,u,h,v,{x:!0}),v("xhoverformat"),v("yhoverformat"),v("line.width"),o(l,u,v,"increasing"),o(l,u,v,"decreasing"),v("text"),v("hovertext"),v("whiskerwidth"),h._requestRangeslider[u.xaxis]=!0},"supplyDefaults");function o(a,l,u,f){var h=u(f+".line.color");u(f+".line.width",l.line.width),u(f+".fillcolor",r.addOpacity(h,.5))}return t(o,"handleDirection"),s6}t(Jqe,"requireDefaults$4");var l6,Kae;function Qqe(){if(Kae)return l6;Kae=1;var e=Nt.exports,r=nn(),n=bv,i=Jpe().calcCommon;l6=t(function(o,a){var l=o._fullLayout,u=r.getFromId(o,a.xaxis),f=r.getFromId(o,a.yaxis),h=u.makeCalcdata(a,"x"),v=n(a,u,"x",h).vals,c=i(o,a,h,v,f,s);return c.length?(e.extendFlat(c[0].t,{num:l._numBoxes,dPos:e.distinctVals(v).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,c):[{t:{empty:!0}}]},"calc$3");function s(o,a,l,u){return{min:l,q1:Math.min(o,u),med:u,q3:Math.max(o,u),max:a}}return t(s,"ptFunc"),l6}t(Qqe,"requireCalc$4");var u6,Jae;function eUe(){return Jae||(Jae=1,u6={moduleType:"trace",name:"candlestick",basePlotModule:Ti,categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{description:["The candlestick is a style of financial chart describing","open, high, low and close for a given `x` coordinate (most likely time).","The boxes represent the spread between the `open` and `close` values and","the lines represent the spread between the `low` and `high` values","Sample points where the close value is higher (lower) then the open","value are called increasing (decreasing).","By default, increasing candles are drawn in green whereas","decreasing are drawn in red."].join(" ")},attributes:t0e(),layoutAttributes:Bw(),supplyLayoutDefaults:s7().supplyLayoutDefaults,crossTraceCalc:l7().crossTraceCalc,supplyDefaults:Jqe(),calc:Qqe(),plot:u7().plot,layerName:"boxlayer",style:Yz().style,hoverPoints:Qpe().hoverPoints,selectPoints:e0e()}),u6}t(eUe,"requireCandlestick$1");var Qae;function tUe(){return Qae||(Qae=1,function(e){e.exports=eUe()}(i6)),i6.exports}t(tUe,"requireCandlestick");var f6={exports:{}},c6,ene;function r0e(){if(ene)return c6;ene=1;var e=Nt.exports,r=hd(),n=e.deg2rad,i=e.rad2deg;c6=t(function(f,h,v){switch(r(f,v),f._id){case"x":case"radialaxis":s(f,h);break;case"angularaxis":l(f,h);break}},"setConvert");function s(u,f){var h=f._subplot;u.setGeometry=function(){var v=u._rl[0],c=u._rl[1],d=h.innerRadius,g=(h.radius-d)/(c-v),p=d/g,b=v>c?function(m){return m<=0}:function(m){return m>=0};u.c2g=function(m){var y=u.c2l(m)-v;return(b(y)?y:0)+p},u.g2c=function(m){return u.l2c(m+v-p)},u.g2p=function(m){return m*g},u.c2p=function(m){return u.g2p(u.c2g(m))}}}t(s,"setConvertRadial");function o(u,f){return f==="degrees"?n(u):u}t(o,"toRadians");function a(u,f){return f==="degrees"?i(u):u}t(a,"fromRadians");function l(u,f){var h=u.type;if(h==="linear"){var v=u.d2c,c=u.c2d;u.d2c=function(d,g){return o(v(d),g)},u.c2d=function(d,g){return c(a(d,g))}}u.makeCalcdata=function(d,g){var p=d[g],b=d._length,m,y,T=t(function(A){return u.d2c(A,d.thetaunit)},"_d2c");if(p){if(e.isTypedArray(p)&&h==="linear"){if(b===p.length)return p;if(p.subarray)return p.subarray(0,b)}for(m=new Array(b),y=0;y<b;y++)m[y]=T(p[y])}else{var _=g+"0",M="d"+g,w=_ in d?T(d[_]):0,x=d[M]?T(d[M]):(u.period||2*Math.PI)/b;for(m=new Array(b),y=0;y<b;y++)m[y]=w+y*x}return m},u.setGeometry=function(){var d=f.sector,g=d.map(n),p={clockwise:-1,counterclockwise:1}[u.direction],b=n(u.rotation),m=t(function(S){return p*S+b},"rad2g"),y=t(function(S){return(S-b)/p},"g2rad"),T,_,M,w;switch(h){case"linear":_=T=e.identity,w=n,M=i,u.range=e.isFullCircle(g)?[d[0],d[0]+360]:g.map(y).map(i);break;case"category":var x=u._categories.length,A=u.period?Math.max(u.period,x):x;A===0&&(A=1),_=w=t(function(S){return S*2*Math.PI/A},"t2rad"),T=M=t(function(S){return S*A/Math.PI/2},"rad2t"),u.range=[0,A];break}u.c2g=function(S){return m(_(S))},u.g2c=function(S){return T(y(S))},u.t2g=function(S){return m(w(S))},u.g2t=function(S){return M(y(S))}}}return t(l,"setConvertAngular"),c6}t(r0e,"requireSet_convert");var h6,tne;function _B(){return tne||(tne=1,h6={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}),h6}t(_B,"requireConstants$1");var v6,rne;function wB(){if(rne)return v6;rne=1;var e=Nt.exports,r=rx.exports.tester,n=e.findIndexOfMin,i=e.isAngleInsideSector,s=e.angleDelta,o=e.angleDist;function a(y,T,_,M,w){if(!i(T,M))return!1;var x,A;_[0]<_[1]?(x=_[0],A=_[1]):(x=_[1],A=_[0]);var S=r(v(x,M[0],M[1],w)),k=r(v(A,M[0],M[1],w)),L=[y*Math.cos(T),y*Math.sin(T)];return k.contains(L)&&!S.contains(L)}t(a,"isPtInsidePolygon");function l(y,T,_,M){var w,x,A=M[0],S=M[1],k=g(Math.sin(T)-Math.sin(y)),L=g(Math.cos(T)-Math.cos(y)),P=Math.tan(_),D=g(1/P),B=k/L,z=S-B*A;return D?k&&L?(w=z/(P-B),x=P*w):L?(w=S*D,x=S):(w=A,x=A*P):k&&L?(w=0,x=z):L?(w=0,x=S):w=x=NaN,[w,x]}t(l,"findIntersectionXY");function u(y,T,_,M){var w=-T*_,x=T*T+1,A=2*(T*w-_),S=w*w+_*_-y*y,k=Math.sqrt(A*A-4*x*S),L=(-A+k)/(2*x),P=(-A-k)/(2*x);return[[L,T*L+w+M],[P,T*P+w+M]]}t(u,"findXYatLength");function f(y,T){var _=T.length,M=new Array(_+1),w;for(w=0;w<_;w++){var x=T[w];M[w]=[y*Math.cos(x),y*Math.sin(x)]}return M[w]=M[0].slice(),M}t(f,"makeRegularPolygon");function h(y,T,_,M){var w=M.length,x=[],A,S;function k(q){return[y*Math.cos(q),y*Math.sin(q)]}t(k,"a2xy");function L(q,H,j){return l(q,H,j,k(q))}t(L,"findXY");function P(q){return e.mod(q,w)}t(P,"cycleIndex");function D(q){return i(q,[T,_])}t(D,"isInside");var B=n(M,function(q){return D(q)?o(q,T):1/0}),z=L(M[B],M[P(B-1)],T);for(x.push(z),A=B,S=0;S<w;A++,S++){var R=M[P(A)];if(!D(R))break;x.push(k(R))}var F=n(M,function(q){return D(q)?o(q,_):1/0}),O=L(M[F],M[P(F+1)],_);return x.push(O),x.push([0,0]),x.push(x[0].slice()),x}t(h,"makeClippedPolygon");function v(y,T,_,M){return e.isFullCircle([T,_])?f(y,M):h(y,T,_,M)}t(v,"makePolygon");function c(y,T,_,M){for(var w=1/0,x=1/0,A=v(y,T,_,M),S=0;S<A.length;S++){var k=A[S];w=Math.min(w,k[0]),x=Math.min(x,-k[1])}return[w,x]}t(c,"findPolygonOffset");function d(y,T){var _=t(function(x){var A=s(x,y);return A>0?A:1/0},"minFn"),M=n(T,_),w=e.mod(M+1,T.length);return[T[M],T[w]]}t(d,"findEnclosingVertexAngles");function g(y){return Math.abs(y)>1e-10?y:0}t(g,"clampTiny");function p(y,T,_){T=T||0,_=_||0;for(var M=y.length,w=new Array(M),x=0;x<M;x++){var A=y[x];w[x]=[T+A[0],_-A[1]]}return w}t(p,"transformForSVG");function b(y,T,_,M,w,x){var A=v(y,T,_,M);return"M"+p(A,w,x).join("L")}t(b,"pathPolygon");function m(y,T,_,M,w,x,A){var S,k;y<T?(S=y,k=T):(S=T,k=y);var L=p(v(S,_,M,w),x,A),P=p(v(k,_,M,w),x,A);return"M"+P.reverse().join("L")+"M"+L.join("L")}return t(m,"pathPolygonAnnulus"),v6={isPtInsidePolygon:a,findPolygonOffset:c,findEnclosingVertexAngles:d,findIntersectionXY:l,findXYatLength:u,clampTiny:g,pathPolygon:b,pathPolygonAnnulus:m},v6}t(wB,"requireHelpers$2");var d6,ane;function a0e(){if(ane)return d6;ane=1;function e(a){return a<0?-1:a>0?1:0}t(e,"sign");function r(a){var l=a[0],u=a[1];if(!isFinite(l)||!isFinite(u))return[1,0];var f=(l+1)*(l+1)+u*u;return[(l*l+u*u-1)/f,2*u/f]}t(r,"smith");function n(a,l){var u=l[0],f=l[1];return[u*a.radius+a.cx,-f*a.radius+a.cy]}t(n,"transform");function i(a,l){return l*a.radius}t(i,"scale");function s(a,l,u,f){var h=n(a,r([u,l])),v=h[0],c=h[1],d=n(a,r([f,l])),g=d[0],p=d[1];if(l===0)return["M"+v+","+c,"L"+g+","+p].join(" ");var b=i(a,1/Math.abs(l));return["M"+v+","+c,"A"+b+","+b+" 0 0,"+(l<0?1:0)+" "+g+","+p].join(" ")}t(s,"reactanceArc");function o(a,l,u,f){var h=i(a,1/(l+1)),v=n(a,r([l,u])),c=v[0],d=v[1],g=n(a,r([l,f])),p=g[0],b=g[1];if(e(u)!==e(f)){var m=n(a,r([l,0])),y=m[0],T=m[1];return["M"+c+","+d,"A"+h+","+h+" 0 0,"+(0<u?0:1)+" "+y+","+T,"A"+h+","+h+" 0 0,"+(f<0?0:1)+p+","+b].join(" ")}return["M"+c+","+d,"A"+h+","+h+" 0 0,"+(f<u?0:1)+" "+p+","+b].join(" ")}return t(o,"resistanceArc"),d6={smith:r,reactanceArc:s,resistanceArc:o,smithTransform:n},d6}t(a0e,"requireHelpers$1");var p6,nne;function n0e(){if(nne)return p6;nne=1;var e=Va.exports,r=rl.exports,n=Na,i=Nt.exports,s=i.strRotate,o=i.strTranslate,a=$a.exports,l=bn.exports,u=so.exports,f=nn(),h=hd(),v=r0e(),c=Lh().doAutoRange,d=Tue,g=xu.exports,p=Ko,b=Ey,m=Qs.prepSelect,y=Qs.selectOnClick,T=Qs.clearOutline,_=pv,M=xw,w=tx.redrawReglTraces,x=yl.MID_SHIFT,A=_B(),S=wB(),k=a0e(),L=k.smith,P=k.reactanceArc,D=k.resistanceArc,B=k.smithTransform,z=i._,R=i.mod,F=i.deg2rad,O=i.rad2deg;function q(te,ee,ie){this.isSmith=ie||!1,this.id=ee,this.gd=te,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var se=te._fullLayout,W="clip"+se._uid+ee;this.clipIds.forTraces=W+"-for-traces",this.clipPaths.forTraces=se._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=se["_"+(ie?"smith":"polar")+"layer"].append("g").attr("class",ee),this.getHole=function(ne){return this.isSmith?0:ne.hole},this.getSector=function(ne){return this.isSmith?[0,360]:ne.sector},this.getRadial=function(ne){return this.isSmith?ne.realaxis:ne.radialaxis},this.getAngular=function(ne){return this.isSmith?ne.imaginaryaxis:ne.angularaxis},ie||(this.radialTickLayout=null,this.angularTickLayout=null)}t(q,"Polar");var H=q.prototype;p6=t(function(ee,ie,se){return new q(ee,ie,se)},"createPolar"),H.plot=function(te,ee){for(var ie=this,se=ee[ie.id],W=!1,ne=0;ne<te.length;ne++){var he=te[ne][0].trace;if(he.cliponaxis===!1){W=!0;break}}ie._hasClipOnAxisFalse=W,ie.updateLayers(ee,se),ie.updateLayout(ee,se),u.generalUpdatePerTraceModule(ie.gd,ie,te,se),ie.updateFx(ee,se),ie.isSmith&&(delete se.realaxis.range,delete se.imaginaryaxis.range)},H.updateLayers=function(te,ee){var ie=this,se=ie.isSmith,W=ie.layers,ne=ie.getRadial(ee),he=ie.getAngular(ee),re=A.layerNames,ae=re.indexOf("frontplot"),fe=re.slice(0,ae),ce=he.layer==="below traces",xe=ne.layer==="below traces";ce&&fe.push("angular-line"),xe&&fe.push("radial-line"),ce&&fe.push("angular-axis"),xe&&fe.push("radial-axis"),fe.push("frontplot"),ce||fe.push("angular-line"),xe||fe.push("radial-line"),ce||fe.push("angular-axis"),xe||fe.push("radial-axis");var Te=(se?"smith":"polar")+"sublayer",me=ie.framework.selectAll("."+Te).data(fe,String);me.enter().append("g").attr("class",function(pe){return Te+" "+pe}).each(function(pe){var oe=W[pe]=e.select(this);switch(pe){case"frontplot":se||oe.append("g").classed("barlayer",!0),oe.append("g").classed("scatterlayer",!0);break;case"backplot":oe.append("g").classed("maplayer",!0);break;case"plotbg":W.bg=oe.append("path");break;case"radial-grid":oe.style("fill","none");break;case"angular-grid":oe.style("fill","none");break;case"radial-line":oe.append("line").style("fill","none");break;case"angular-line":oe.append("path").style("fill","none");break}}),me.order()},H.updateLayout=function(te,ee){var ie=this,se=ie.layers,W=te._size,ne=ie.getRadial(ee),he=ie.getAngular(ee),re=ee.domain.x,ae=ee.domain.y;ie.xOffset=W.l+W.w*re[0],ie.yOffset=W.t+W.h*(1-ae[1]);var fe=ie.xLength=W.w*(re[1]-re[0]),ce=ie.yLength=W.h*(ae[1]-ae[0]),xe=ie.getSector(ee);ie.sectorInRad=xe.map(F);var Te=ie.sectorBBox=X(xe),me=Te[2]-Te[0],pe=Te[3]-Te[1],oe=ce/fe,de=Math.abs(pe/me),ye,we,Ee,De,Fe;oe>de?(ye=fe,we=fe*de,Fe=(ce-we)/W.h/2,Ee=[re[0],re[1]],De=[ae[0]+Fe,ae[1]-Fe]):(ye=ce/de,we=ce,Fe=(fe-ye)/W.w/2,Ee=[re[0]+Fe,re[1]-Fe],De=[ae[0],ae[1]]),ie.xLength2=ye,ie.yLength2=we,ie.xDomain2=Ee,ie.yDomain2=De;var qe=ie.xOffset2=W.l+W.w*Ee[0],Je=ie.yOffset2=W.t+W.h*(1-De[1]),Ge=ie.radius=ye/me,et=ie.innerRadius=ie.getHole(ee)*Ge,Ue=ie.cx=qe-Ge*Te[0],Ye=ie.cy=Je+Ge*Te[3],$e=ie.cxx=Ue-qe,Ct=ie.cyy=Ye-Je,It=ne.side,Vt;It==="counterclockwise"?(Vt=It,It="top"):It==="clockwise"&&(Vt=It,It="bottom"),ie.radialAxis=ie.mockAxis(te,ee,ne,{_id:"x",side:It,_trueSide:Vt,domain:[et/W.w,Ge/W.w]}),ie.angularAxis=ie.mockAxis(te,ee,he,{side:"right",domain:[0,Math.PI],autorange:!1}),ie.doAutoRange(te,ee),ie.updateAngularAxis(te,ee),ie.updateRadialAxis(te,ee),ie.updateRadialAxisTitle(te,ee),ie.xaxis=ie.mockCartesianAxis(te,ee,{_id:"x",domain:Ee}),ie.yaxis=ie.mockCartesianAxis(te,ee,{_id:"y",domain:De});var $t=ie.pathSubplot();ie.clipPaths.forTraces.select("path").attr("d",$t).attr("transform",o($e,Ct)),se.frontplot.attr("transform",o(qe,Je)).call(l.setClipUrl,ie._hasClipOnAxisFalse?null:ie.clipIds.forTraces,ie.gd),se.bg.attr("d",$t).attr("transform",o(Ue,Ye)).call(a.fill,ee.bgcolor)},H.mockAxis=function(te,ee,ie,se){var W=i.extendFlat({},ie,se);return v(W,ee,te),W},H.mockCartesianAxis=function(te,ee,ie){var se=this,W=se.isSmith,ne=ie._id,he=i.extendFlat({type:"linear"},ie);h(he,te);var re={x:[0,2],y:[1,3]};return he.setRange=function(){var ae=se.sectorBBox,fe=re[ne],ce=se.radialAxis._rl,xe=(ce[1]-ce[0])/(1-se.getHole(ee));he.range=[ae[fe[0]]*xe,ae[fe[1]]*xe]},he.isPtWithinRange=ne==="x"&&!W?function(ae){return se.isPtInside(ae)}:function(){return!0},he.setRange(),he.setScale(),he},H.doAutoRange=function(te,ee){var ie=this,se=ie.gd,W=ie.radialAxis,ne=ie.getRadial(ee);c(se,W);var he=W.range;ne.range=he.slice(),ne._input.range=he.slice(),W._rl=[W.r2l(he[0],null,"gregorian"),W.r2l(he[1],null,"gregorian")]},H.updateRadialAxis=function(te,ee){var ie=this,se=ie.gd,W=ie.layers,ne=ie.radius,he=ie.innerRadius,re=ie.cx,ae=ie.cy,fe=ie.getRadial(ee),ce=R(ie.getSector(ee)[0],360),xe=ie.radialAxis,Te=he<ne,me=ie.isSmith;me||(ie.fillViewInitialKey("radialaxis.angle",fe.angle),ie.fillViewInitialKey("radialaxis.range",xe.range.slice()),xe.setGeometry()),xe.tickangle==="auto"&&ce>90&&ce<=270&&(xe.tickangle=180);var pe=me?function(Ge){var et=B(ie,L([Ge.x,0]));return o(et[0]-re,et[1]-ae)}:function(Ge){return o(xe.l2p(Ge.x)+he,0)},oe=me?function(Ge){return D(ie,Ge.x,-1/0,1/0)}:function(Ge){return ie.pathArc(xe.r2p(Ge.x)+he)},de=j(fe);if(ie.radialTickLayout!==de&&(W["radial-axis"].selectAll(".xtick").remove(),ie.radialTickLayout=de),Te){xe.setScale();var ye=0,we=me?(xe.tickvals||[]).filter(function(Ge){return Ge>=0}).map(function(Ge){return f.tickText(xe,Ge,!0,!1)}):f.calcTicks(xe),Ee=me?we:f.clipEnds(xe,we),De=f.getTickSigns(xe)[2];me&&((xe.ticks==="top"&&xe.side==="bottom"||xe.ticks==="bottom"&&xe.side==="top")&&(De=-De),xe.ticks==="top"&&xe.side==="top"&&(ye=-xe.ticklen),xe.ticks==="bottom"&&xe.side==="bottom"&&(ye=xe.ticklen)),f.drawTicks(se,xe,{vals:we,layer:W["radial-axis"],path:f.makeTickPath(xe,0,De),transFn:pe,crisp:!1}),f.drawGrid(se,xe,{vals:Ee,layer:W["radial-grid"],path:oe,transFn:i.noop,crisp:!1}),f.drawLabels(se,xe,{vals:we,layer:W["radial-axis"],transFn:pe,labelFns:f.makeLabelFns(xe,ye)})}var Fe=ie.radialAxisAngle=ie.vangles?O(G(F(fe.angle),ie.vangles)):fe.angle,qe=o(re,ae),Je=qe+s(-Fe);$(W["radial-axis"],Te&&(fe.showticklabels||fe.ticks),{transform:Je}),$(W["radial-grid"],Te&&fe.showgrid,{transform:me?"":qe}),$(W["radial-line"].select("line"),Te&&fe.showline,{x1:me?-ne:he,y1:0,x2:ne,y2:0,transform:Je}).attr("stroke-width",fe.linewidth).call(a.stroke,fe.linecolor)},H.updateRadialAxisTitle=function(te,ee,ie){if(!this.isSmith){var se=this,W=se.gd,ne=se.radius,he=se.cx,re=se.cy,ae=se.getRadial(ee),fe=se.id+"title",ce=0;if(ae.title){var xe=l.bBox(se.layers["radial-axis"].node()).height,Te=ae.title.font.size,me=ae.side;ce=me==="top"?Te:me==="counterclockwise"?-(xe+Te*.4):xe+Te*.8}var pe=ie!==void 0?ie:se.radialAxisAngle,oe=F(pe),de=Math.cos(oe),ye=Math.sin(oe),we=he+ne/2*de+ce*ye,Ee=re-ne/2*ye+ce*de;se.layers["radial-axis-title"]=b.draw(W,fe,{propContainer:ae,propName:se.id+".radialaxis.title",placeholder:z(W,"Click to enter radial axis title"),attributes:{x:we,y:Ee,"text-anchor":"middle"},transform:{rotate:-pe}})}},H.updateAngularAxis=function(te,ee){var ie=this,se=ie.gd,W=ie.layers,ne=ie.radius,he=ie.innerRadius,re=ie.cx,ae=ie.cy,fe=ie.getAngular(ee),ce=ie.angularAxis,xe=ie.isSmith;xe||(ie.fillViewInitialKey("angularaxis.rotation",fe.rotation),ce.setGeometry(),ce.setScale());var Te=xe?function(et){var Ue=B(ie,L([0,et.x]));return Math.atan2(Ue[0]-re,Ue[1]-ae)-Math.PI/2}:function(et){return ce.t2g(et.x)};ce.type==="linear"&&ce.thetaunit==="radians"&&(ce.tick0=O(ce.tick0),ce.dtick=O(ce.dtick));var me=t(function(et){return o(re+ne*Math.cos(et),ae-ne*Math.sin(et))},"_transFn"),pe=xe?function(et){var Ue=B(ie,L([0,et.x]));return o(Ue[0],Ue[1])}:function(et){return me(Te(et))},oe=xe?function(et){var Ue=B(ie,L([0,et.x])),Ye=Math.atan2(Ue[0]-re,Ue[1]-ae)-Math.PI/2;return o(Ue[0],Ue[1])+s(-O(Ye))}:function(et){var Ue=Te(et);return me(Ue)+s(-O(Ue))},de=xe?function(et){return P(ie,et.x,0,1/0)}:function(et){var Ue=Te(et),Ye=Math.cos(Ue),$e=Math.sin(Ue);return"M"+[re+he*Ye,ae-he*$e]+"L"+[re+ne*Ye,ae-ne*$e]},ye=f.makeLabelFns(ce,0),we=ye.labelStandoff,Ee={};Ee.xFn=function(et){var Ue=Te(et);return Math.cos(Ue)*we},Ee.yFn=function(et){var Ue=Te(et),Ye=Math.sin(Ue)>0?.2:1;return-Math.sin(Ue)*(we+et.fontSize*Ye)+Math.abs(Math.cos(Ue))*(et.fontSize*x)},Ee.anchorFn=function(et){var Ue=Te(et),Ye=Math.cos(Ue);return Math.abs(Ye)<.1?"middle":Ye>0?"start":"end"},Ee.heightFn=function(et,Ue,Ye){var $e=Te(et);return-.5*(1+Math.sin($e))*Ye};var De=j(fe);ie.angularTickLayout!==De&&(W["angular-axis"].selectAll("."+ce._id+"tick").remove(),ie.angularTickLayout=De);var Fe=xe?[1/0].concat(ce.tickvals||[]).map(function(et){return f.tickText(ce,et,!0,!1)}):f.calcTicks(ce);xe&&(Fe[0].text="\u221E",Fe[0].fontSize*=1.75);var qe;if(ee.gridshape==="linear"?(qe=Fe.map(Te),i.angleDelta(qe[0],qe[1])<0&&(qe=qe.slice().reverse())):qe=null,ie.vangles=qe,ce.type==="category"&&(Fe=Fe.filter(function(et){return i.isAngleInsideSector(Te(et),ie.sectorInRad)})),ce.visible){var Je=ce.ticks==="inside"?-1:1,Ge=(ce.linewidth||1)/2;f.drawTicks(se,ce,{vals:Fe,layer:W["angular-axis"],path:"M"+Je*Ge+",0h"+Je*ce.ticklen,transFn:oe,crisp:!1}),f.drawGrid(se,ce,{vals:Fe,layer:W["angular-grid"],path:de,transFn:i.noop,crisp:!1}),f.drawLabels(se,ce,{vals:Fe,layer:W["angular-axis"],repositionOnUpdate:!0,transFn:pe,labelFns:Ee})}$(W["angular-line"].select("path"),fe.showline,{d:ie.pathSubplot(),transform:o(re,ae)}).attr("stroke-width",fe.linewidth).call(a.stroke,fe.linecolor)},H.updateFx=function(te,ee){if(!this.gd._context.staticPlot){var ie=!this.isSmith;ie&&(this.updateAngularDrag(te),this.updateRadialDrag(te,ee,0),this.updateRadialDrag(te,ee,1)),this.updateHoverAndMainDrag(te)}},H.updateHoverAndMainDrag=function(te){var ee=this,ie=ee.isSmith,se=ee.gd,W=ee.layers,ne=te._zoomlayer,he=A.MINZOOM,re=A.OFFEDGE,ae=ee.radius,fe=ee.innerRadius,ce=ee.cx,xe=ee.cy,Te=ee.cxx,me=ee.cyy,pe=ee.sectorInRad,oe=ee.vangles,de=ee.radialAxis,ye=S.clampTiny,we=S.findXYatLength,Ee=S.findEnclosingVertexAngles,De=A.cornerHalfWidth,Fe=A.cornerLen/2,qe,Je,Ge=d.makeDragger(W,"path","maindrag",te.dragmode===!1?"none":"crosshair");e.select(Ge).attr("d",ee.pathSubplot()).attr("transform",o(ce,xe)),Ge.onmousemove=function(qt){p.hover(se,qt,ee.id),se._fullLayout._lasthover=Ge,se._fullLayout._hoversubplot=ee.id},Ge.onmouseout=function(qt){se._dragging||g.unhover(se,qt)};var et={element:Ge,gd:se,subplot:ee.id,plotinfo:{id:ee.id,xaxis:ee.xaxis,yaxis:ee.yaxis},xaxes:[ee.xaxis],yaxes:[ee.yaxis]},Ue,Ye,$e,Ct,It,Vt,$t,Gt,Jt;function kt(qt,hr){return Math.sqrt(qt*qt+hr*hr)}t(kt,"norm");function ft(qt,hr){return kt(qt-Te,hr-me)}t(ft,"xy2r");function zt(qt,hr){return Math.atan2(me-hr,qt-Te)}t(zt,"xy2a");function Pt(qt,hr){return[qt*Math.cos(hr),qt*Math.sin(-hr)]}t(Pt,"ra2xy");function Et(qt,hr){if(qt===0)return ee.pathSector(2*De);var Fr=Fe/qt,Br=hr-Fr,na=hr+Fr,Ia=Math.max(0,Math.min(qt,ae)),ea=Ia-De,Er=Ia+De;return"M"+Pt(ea,Br)+"A"+[ea,ea]+" 0,0,0 "+Pt(ea,na)+"L"+Pt(Er,na)+"A"+[Er,Er]+" 0,0,1 "+Pt(Er,Br)+"Z"}t(Et,"pathCorner");function Wt(qt,hr,Fr){if(qt===0)return ee.pathSector(2*De);var Br=Pt(qt,hr),na=Pt(qt,Fr),Ia=ye((Br[0]+na[0])/2),ea=ye((Br[1]+na[1])/2),Er,dn;if(Ia&&ea){var ya=ea/Ia,Hr=-1/ya,un=we(De,ya,Ia,ea);Er=we(Fe,Hr,un[0][0],un[0][1]),dn=we(Fe,Hr,un[1][0],un[1][1])}else{var Ea,nt;ea?(Ea=Fe,nt=De):(Ea=De,nt=Fe),Er=[[Ia-Ea,ea-nt],[Ia+Ea,ea-nt]],dn=[[Ia-Ea,ea+nt],[Ia+Ea,ea+nt]]}return"M"+Er.join("L")+"L"+dn.reverse().join("L")+"Z"}t(Wt,"pathCornerForPolygons");function ze(){$e=null,Ct=null,It=ee.pathSubplot(),Vt=!1;var qt=se._fullLayout[ee.id];$t=r(qt.bgcolor).getLuminance(),Gt=d.makeZoombox(ne,$t,ce,xe,It),Gt.attr("fill-rule","evenodd"),Jt=d.makeCorners(ne,ce,xe),T(se)}t(ze,"zoomPrep");function tt(qt,hr){return hr=Math.max(Math.min(hr,ae),fe),qt<re?qt=0:ae-qt<re?qt=ae:hr<re?hr=0:ae-hr<re&&(hr=ae),Math.abs(hr-qt)>he?(qt<hr?($e=qt,Ct=hr):($e=hr,Ct=qt),!0):($e=null,Ct=null,!1)}t(tt,"clampAndSetR0R1");function at(qt,hr){qt=qt||It,hr=hr||"M0,0Z",Gt.attr("d",qt),Jt.attr("d",hr),d.transitionZoombox(Gt,Jt,Vt,$t),Vt=!0;var Fr={};ir(Fr),se.emit("plotly_relayouting",Fr)}t(at,"applyZoomMove");function vt(qt,hr){qt=qt*qe,hr=hr*Je;var Fr=Ue+qt,Br=Ye+hr,na=ft(Ue,Ye),Ia=Math.min(ft(Fr,Br),ae),ea=zt(Ue,Ye),Er,dn;tt(na,Ia)&&(Er=It+ee.pathSector(Ct),$e&&(Er+=ee.pathSector($e)),dn=Et($e,ea)+Et(Ct,ea)),at(Er,dn)}t(vt,"zoomMove");function _t(qt,hr,Fr,Br){var na=S.findIntersectionXY(Fr,Br,Fr,[qt-Te,me-hr]);return kt(na[0],na[1])}t(_t,"findPolygonRadius");function Rt(qt,hr){var Fr=Ue+qt,Br=Ye+hr,na=zt(Ue,Ye),Ia=zt(Fr,Br),ea=Ee(na,oe),Er=Ee(Ia,oe),dn=_t(Ue,Ye,ea[0],ea[1]),ya=Math.min(_t(Fr,Br,Er[0],Er[1]),ae),Hr,un;tt(dn,ya)&&(Hr=It+ee.pathSector(Ct),$e&&(Hr+=ee.pathSector($e)),un=[Wt($e,ea[0],ea[1]),Wt(Ct,ea[0],ea[1])].join(" ")),at(Hr,un)}t(Rt,"zoomMoveForPolygons");function nr(){if(d.removeZoombox(se),!($e===null||Ct===null)){var qt={};ir(qt),d.showDoubleClickNotifier(se),n.call("_guiRelayout",se,qt)}}t(nr,"zoomDone");function ir(qt){var hr=de._rl,Fr=(hr[1]-hr[0])/(1-fe/ae)/ae,Br=[hr[0]+($e-fe)*Fr,hr[0]+(Ct-fe)*Fr];qt[ee.id+".radialaxis.range"]=Br}t(ir,"computeZoomUpdates");function ur(qt,hr){var Fr=se._fullLayout.clickmode;if(d.removeZoombox(se),qt===2){var Br={};for(var na in ee.viewInitial)Br[ee.id+"."+na]=ee.viewInitial[na];se.emit("plotly_doubleclick",null),n.call("_guiRelayout",se,Br)}Fr.indexOf("select")>-1&&qt===1&&y(hr,se,[ee.xaxis],[ee.yaxis],ee.id,et),Fr.indexOf("event")>-1&&p.click(se,hr,ee.id)}t(ur,"zoomClick"),et.prepFn=function(qt,hr,Fr){var Br=se._fullLayout.dragmode,na=Ge.getBoundingClientRect();se._fullLayout._calcInverseTransform(se);var Ia=se._fullLayout._invTransform;qe=se._fullLayout._invScaleX,Je=se._fullLayout._invScaleY;var ea=i.apply3DTransform(Ia)(hr-na.left,Fr-na.top);if(Ue=ea[0],Ye=ea[1],oe){var Er=S.findPolygonOffset(ae,pe[0],pe[1],oe);Ue+=Te+Er[0],Ye+=me+Er[1]}switch(Br){case"zoom":et.clickFn=ur,ie||(oe?et.moveFn=Rt:et.moveFn=vt,et.doneFn=nr,ze());break;case"select":case"lasso":m(qt,hr,Fr,et,Br);break}},g.init(et)},H.updateRadialDrag=function(te,ee,ie){var se=this,W=se.gd,ne=se.layers,he=se.radius,re=se.innerRadius,ae=se.cx,fe=se.cy,ce=se.radialAxis,xe=A.radialDragBoxSize,Te=xe/2;if(!ce.visible)return;var me=F(se.radialAxisAngle),pe=ce._rl,oe=pe[0],de=pe[1],ye=pe[ie],we=.75*(pe[1]-pe[0])/(1-se.getHole(ee))/he,Ee,De,Fe;ie?(Ee=ae+(he+Te)*Math.cos(me),De=fe-(he+Te)*Math.sin(me),Fe="radialdrag"):(Ee=ae+(re-Te)*Math.cos(me),De=fe-(re-Te)*Math.sin(me),Fe="radialdrag-inner");var qe=d.makeRectDragger(ne,Fe,"crosshair",-Te,-Te,xe,xe),Je={element:qe,gd:W};te.dragmode===!1&&(Je.dragmode=!1),$(e.select(qe),ce.visible&&re<he,{transform:o(Ee,De)});var Ge,et,Ue;function Ye($t,Gt){if(Ge)Ge($t,Gt);else{var Jt=[$t,-Gt],kt=[Math.cos(me),Math.sin(me)],ft=Math.abs(i.dot(Jt,kt)/Math.sqrt(i.dot(Jt,Jt)));isNaN(ft)||(Ge=ft<.5?It:Vt)}var zt={};$e(zt),W.emit("plotly_relayouting",zt)}t(Ye,"moveFn");function $e($t){et!==null?$t[se.id+".radialaxis.angle"]=et:Ue!==null&&($t[se.id+".radialaxis.range["+ie+"]"]=Ue)}t($e,"computeRadialAxisUpdates");function Ct(){et!==null?n.call("_guiRelayout",W,se.id+".radialaxis.angle",et):Ue!==null&&n.call("_guiRelayout",W,se.id+".radialaxis.range["+ie+"]",Ue)}t(Ct,"doneFn");function It($t,Gt){if(ie!==0){var Jt=Ee+$t,kt=De+Gt;et=Math.atan2(fe-kt,Jt-ae),se.vangles&&(et=G(et,se.vangles)),et=O(et);var ft=o(ae,fe)+s(-et);ne["radial-axis"].attr("transform",ft),ne["radial-line"].select("line").attr("transform",ft);var zt=se.gd._fullLayout,Pt=zt[se.id];se.updateRadialAxisTitle(zt,Pt,et)}}t(It,"rotateMove");function Vt($t,Gt){var Jt=i.dot([$t,-Gt],[Math.cos(me),Math.sin(me)]);if(Ue=ye-we*Jt,we>0!=(ie?Ue>oe:Ue<de)){Ue=null;return}var kt=W._fullLayout,ft=kt[se.id];ce.range[ie]=Ue,ce._rl[ie]=Ue,se.updateRadialAxis(kt,ft),se.xaxis.setRange(),se.xaxis.setScale(),se.yaxis.setRange(),se.yaxis.setScale();var zt=!1;for(var Pt in se.traceHash){var Et=se.traceHash[Pt],Wt=i.filterVisible(Et),ze=Et[0][0].trace._module;ze.plot(W,se,Wt,ft),n.traceIs(Pt,"gl")&&Wt.length&&(zt=!0)}zt&&(M(W),w(W))}t(Vt,"rerangeMove"),Je.prepFn=function(){Ge=null,et=null,Ue=null,Je.moveFn=Ye,Je.doneFn=Ct,T(W)},Je.clampFn=function($t,Gt){return Math.sqrt($t*$t+Gt*Gt)<A.MINDRAG&&($t=0,Gt=0),[$t,Gt]},g.init(Je)},H.updateAngularDrag=function(te){var ee=this,ie=ee.gd,se=ee.layers,W=ee.radius,ne=ee.angularAxis,he=ee.cx,re=ee.cy,ae=ee.cxx,fe=ee.cyy,ce=A.angularDragBoxSize,xe=d.makeDragger(se,"path","angulardrag",te.dragmode===!1?"none":"move"),Te={element:xe,gd:ie};te.dragmode===!1?Te.dragmode=!1:e.select(xe).attr("d",ee.pathAnnulus(W,W+ce)).attr("transform",o(he,re)).call(_,"move");function me(Ue,Ye){return Math.atan2(fe+ce-Ye,Ue-ae-ce)}t(me,"xy2a");var pe=se.frontplot.select(".scatterlayer").selectAll(".trace"),oe=pe.selectAll(".point"),de=pe.selectAll(".textpoint"),ye,we,Ee,De,Fe,qe;function Je(Ue,Ye){var $e=ee.gd._fullLayout,Ct=$e[ee.id],It=ye+Ue*te._invScaleX,Vt=we+Ye*te._invScaleY,$t=me(It,Vt),Gt=O($t-qe);if(De=Ee+Gt,se.frontplot.attr("transform",o(ee.xOffset2,ee.yOffset2)+s([-Gt,ae,fe])),ee.vangles){Fe=ee.radialAxisAngle+Gt;var Jt=o(he,re)+s(-Gt),kt=o(he,re)+s(-Fe);se.bg.attr("transform",Jt),se["radial-grid"].attr("transform",Jt),se["radial-axis"].attr("transform",kt),se["radial-line"].select("line").attr("transform",kt),ee.updateRadialAxisTitle($e,Ct,Fe)}else ee.clipPaths.forTraces.select("path").attr("transform",o(ae,fe)+s(Gt));oe.each(function(){var tt=e.select(this),at=l.getTranslate(tt);tt.attr("transform",o(at.x,at.y)+s([Gt]))}),de.each(function(){var tt=e.select(this),at=tt.select("text"),vt=l.getTranslate(tt);tt.attr("transform",s([Gt,at.attr("x"),at.attr("y")])+o(vt.x,vt.y))}),ne.rotation=i.modHalf(De,360),ee.updateAngularAxis($e,Ct),ee._hasClipOnAxisFalse&&!i.isFullCircle(ee.sectorInRad)&&pe.call(l.hideOutsideRangePoints,ee);var ft=!1;for(var zt in ee.traceHash)if(n.traceIs(zt,"gl")){var Pt=ee.traceHash[zt],Et=i.filterVisible(Pt),Wt=Pt[0][0].trace._module;Wt.plot(ie,ee,Et,Ct),Et.length&&(ft=!0)}ft&&(M(ie),w(ie));var ze={};Ge(ze),ie.emit("plotly_relayouting",ze)}t(Je,"moveFn");function Ge(Ue){Ue[ee.id+".angularaxis.rotation"]=De,ee.vangles&&(Ue[ee.id+".radialaxis.angle"]=Fe)}t(Ge,"computeRotationUpdates");function et(){de.select("text").attr("transform",null);var Ue={};Ge(Ue),n.call("_guiRelayout",ie,Ue)}t(et,"doneFn"),Te.prepFn=function(Ue,Ye,$e){var Ct=te[ee.id];Ee=Ct.angularaxis.rotation;var It=xe.getBoundingClientRect();ye=Ye-It.left,we=$e-It.top,ie._fullLayout._calcInverseTransform(ie);var Vt=i.apply3DTransform(te._invTransform)(ye,we);ye=Vt[0],we=Vt[1],qe=me(ye,we),Te.moveFn=Je,Te.doneFn=et,T(ie)},ee.vangles&&!i.isFullCircle(ee.sectorInRad)&&(Te.prepFn=i.noop,_(e.select(xe),null)),g.init(Te)},H.isPtInside=function(te){if(this.isSmith)return!0;var ee=this.sectorInRad,ie=this.vangles,se=this.angularAxis.c2g(te.theta),W=this.radialAxis,ne=W.c2l(te.r),he=W._rl,re=ie?S.isPtInsidePolygon:i.isPtInsideSector;return re(ne,se,he,ee,ie)},H.pathArc=function(te){var ee=this.sectorInRad,ie=this.vangles,se=ie?S.pathPolygon:i.pathArc;return se(te,ee[0],ee[1],ie)},H.pathSector=function(te){var ee=this.sectorInRad,ie=this.vangles,se=ie?S.pathPolygon:i.pathSector;return se(te,ee[0],ee[1],ie)},H.pathAnnulus=function(te,ee){var ie=this.sectorInRad,se=this.vangles,W=se?S.pathPolygonAnnulus:i.pathAnnulus;return W(te,ee,ie[0],ie[1],se)},H.pathSubplot=function(){var te=this.innerRadius,ee=this.radius;return te?this.pathAnnulus(te,ee):this.pathSector(ee)},H.fillViewInitialKey=function(te,ee){te in this.viewInitial||(this.viewInitial[te]=ee)};function j(te){var ee=te.ticks+String(te.ticklen)+String(te.showticklabels);return"side"in te&&(ee+=te.side),ee}t(j,"strTickLayout");function X(te){var ee=te[0],ie=te[1],se=ie-ee,W=R(ee,360),ne=W+se,he=Math.cos(F(W)),re=Math.sin(F(W)),ae=Math.cos(F(ne)),fe=Math.sin(F(ne)),ce,xe,Te,me;return W<=90&&ne>=90||W>90&&ne>=450?me=1:re<=0&&fe<=0?me=0:me=Math.max(re,fe),W<=180&&ne>=180||W>180&&ne>=540?ce=-1:he>=0&&ae>=0?ce=0:ce=Math.min(he,ae),W<=270&&ne>=270||W>270&&ne>=630?xe=-1:re>=0&&fe>=0?xe=0:xe=Math.min(re,fe),ne>=360?Te=1:he<=0&&ae<=0?Te=0:Te=Math.max(he,ae),[ce,xe,Te,me]}t(X,"computeSectorBBox");function G(te,ee){var ie=t(function(W){return i.angleDist(te,W)},"fn"),se=i.findIndexOfMin(ee,ie);return ee[se]}t(G,"snapToVertexAngle");function $(te,ee,ie){return ee?(te.attr("display",null),te.attr(ie)):te&&te.attr("display","none"),te}return t($,"updateElement"),p6}t(n0e,"requirePolar$1");var g6,ine;function i0e(){if(ine)return g6;ine=1;var e=Fo,r=Jl,n=vo.attributes,i=Nt.exports.extendFlat,s=_o.overrideAll,o=s({color:r.color,showline:i({},r.showline,{dflt:!0}),linecolor:r.linecolor,linewidth:r.linewidth,showgrid:i({},r.showgrid,{dflt:!0}),gridcolor:r.gridcolor,gridwidth:r.gridwidth,griddash:r.griddash},"plot","from-root"),a=s({tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,ticklabelstep:r.ticklabelstep,showticklabels:r.showticklabels,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,minexponent:r.minexponent,separatethousands:r.separatethousands,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,layer:r.layer},"plot","from-root"),l={visible:i({},r.visible,{dflt:!0}),type:i({},r.type,{values:["-","linear","log","date","category"]}),autotypenumbers:r.autotypenumbers,autorange:i({},r.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc",description:["If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","If *normal*, the range is computed in relation to the extrema","of the input data (same behavior as for cartesian axes)."].join(" ")},range:i({},r.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:r.categoryorder,categoryarray:r.categoryarray,angle:{valType:"angle",editType:"plot",description:["Sets the angle (in degrees) from which the radial axis is drawn.","Note that by default, radial axis line on the theta=0 line","corresponds to a line pointing right (like what mathematicians prefer).","Defaults to the first `polar.sector` angle."].join(" ")},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot",description:["Determines on which side of radial axis line","the tick and tick labels appear."].join(" ")},title:{text:i({},r.title.text,{editType:"plot",dflt:""}),font:i({},r.title.font,{editType:"plot"}),editType:"plot"},hoverformat:r.hoverformat,uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, `angle`, and `title` if in `editable: true` configuration.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc",_deprecated:{title:r._deprecated.title,titlefont:r._deprecated.titlefont}};i(l,o,a);var u={visible:i({},r.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the angular axis type.","If *linear*, set `thetaunit` to determine the unit in which axis value are shown.","If *category, use `period` to set the number of integer coordinates around polar axis."].join(" ")},autotypenumbers:r.autotypenumbers,categoryorder:r.categoryorder,categoryarray:r.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc",description:["Sets the format unit of the formatted *theta* values.","Has an effect only when `angularaxis.type` is *linear*."].join(" ")},period:{valType:"number",editType:"calc",min:0,description:["Set the angular period.","Has an effect only when `angularaxis.type` is *category*."].join(" ")},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc",description:["Sets the direction corresponding to positive angles."].join(" ")},rotation:{valType:"angle",editType:"calc",description:["Sets that start position (in degrees) of the angular axis","By default, polar subplots with `direction` set to *counterclockwise*","get a `rotation` of *0*","which corresponds to due East (like what mathematicians prefer).","In turn, polar with `direction` set to *clockwise* get a rotation of *90*","which corresponds to due North (like on a compass),"].join(" ")},hoverformat:r.hoverformat,uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `rotation`.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc"};return i(u,o,a),g6={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot",description:["Sets angular span of this polar subplot with two angles (in degrees).","Sector are assumed to be spanned in the counterclockwise direction","with *0* corresponding to rightmost limit of the polar subplot."].join(" ")},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the fraction of the radius to cut out of the polar subplot."].join(" ")},bgcolor:{valType:"color",editType:"plot",dflt:e.background,description:"Set the background color of the subplot"},radialaxis:l,angularaxis:u,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot",description:["Determines if the radial axis grid lines and angular axis line are drawn","as *circular* sectors or as *linear* (polygon) sectors.","Has an effect only when the angular axis has `type` *category*.","Note that `radialaxis.angle` is snapped to the angle of the closest","vertex when `gridshape` is *circular*","(so that radial axis scale is the same as the data scale)."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis attributes,","if not overridden in the individual axes.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc"},g6}t(i0e,"requireLayout_attributes$2");var y6,one;function rUe(){if(one)return y6;one=1;var e=Nt.exports,r=$a.exports,n=ei,i=Fy(),s=Ns.getSubplotData,o=ky,a=J1,l=L0,u=R0,f=j8,h=Lw,v=Q1(),c=i0e(),d=r0e(),g=_B(),p=g.axisNames;function b(y,T,_,M){var w=_("bgcolor");M.bgColor=r.combine(w,M.paper_bgcolor);var x=_("sector");_("hole");var A=s(M.fullData,g.name,M.id),S=M.layoutOut,k;function L(ee,ie){return _(k+"."+ee,ie)}t(L,"coerceAxis");for(var P=0;P<p.length;P++){k=p[P],e.isPlainObject(y[k])||(y[k]={});var D=y[k],B=n.newContainer(T,k);B._id=B._name=k,B._attr=M.id+"."+k,B._traceIndices=A.map(function(ee){return ee._expandedIndex});var z=g.axisName2dataArray[k],R=m(D,B,L,A,z,M);f(D,B,L,{axData:A,dataAttr:z});var F=L("visible");switch(d(B,T,S),L("uirevision",T.uirevision),B._m=1,k){case"radialaxis":var O=L("autorange",!B.isValidRange(D.range));D.autorange=O,O&&(R==="linear"||R==="-")&&L("rangemode"),O==="reversed"&&(B._m=-1),L("range"),B.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){e.log("Polar plots do not support date angular axes yet.");for(var q=0;q<A.length;q++)A[q].visible=!1;R=D.type=B.type="linear"}L(R==="linear"?"thetaunit":"period");var H=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[H]);break}if(u(D,B,L,B.type,{tickSuffixDflt:B.thetaunit==="degrees"?"\xB0":void 0}),F){var j,X,G,$,te=M.font||{};j=L("color"),X=j===D.color?j:te.color,G=te.size,$=te.family,o(D,B,L,B.type),l(D,B,L,B.type,{font:{color:X,size:G,family:$}}),a(D,B,L,{outerTicks:!0}),h(D,B,L,{dfltColor:j,bgColor:M.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[k]}),L("layer"),k==="radialaxis"&&(L("side"),L("angle",x[0]),L("title.text"),e.coerceFont(L,"title.font",{color:X,size:e.bigFont(G),family:$}))}R!=="category"&&L("hoverformat"),B._input=D}T.angularaxis.type==="category"&&_("gridshape")}t(b,"handleDefaults");function m(y,T,_,M,w,x){var A=_("autotypenumbers",x.autotypenumbersDflt),S=_("type");if(S==="-"){for(var k,L=0;L<M.length;L++)if(M[L].visible){k=M[L];break}k&&k[w]&&(T.type=v(k[w],"gregorian",{noMultiCategory:!0,autotypenumbers:A})),T.type==="-"?T.type="linear":y.type=T.type}return T.type}return t(m,"handleAxisTypeDefaults"),y6=t(function(T,_,M){i(T,_,M,{type:g.name,attributes:c,handleDefaults:b,font:_.font,autotypenumbersDflt:_.autotypenumbers,paper_bgcolor:_.paper_bgcolor,fullData:M,layoutOut:_})},"supplyLayoutDefaults"),y6}t(rUe,"requireLayout_defaults$2");var m6,sne;function TB(){if(sne)return m6;sne=1;var e=Ns.getSubplotCalcData,r=Nt.exports.counterRegex,n=n0e(),i=_B(),s=i.attr,o=i.name,a=r(o),l={};l[s]={valType:"subplotid",dflt:o,editType:"calc",description:["Sets a reference between this trace's data coordinates and","a polar subplot.","If *polar* (the default value), the data refer to `layout.polar`.","If *polar2*, the data refer to `layout.polar2`, and so on."].join(" ")};function u(h){for(var v=h._fullLayout,c=h.calcdata,d=v._subplots[o],g=0;g<d.length;g++){var p=d[g],b=e(c,o,p),m=v[p]._subplot;m||(m=n(h,p),v[p]._subplot=m),m.plot(b,v,h._promises)}}t(u,"plot");function f(h,v,c,d){for(var g=d._subplots[o]||[],p=d._has&&d._has("gl"),b=v._has&&v._has("gl"),m=p&&!b,y=0;y<g.length;y++){var T=g[y],_=d[T]._subplot;if(!v[T]&&!!_){_.framework.remove(),_.layers["radial-axis-title"].remove();for(var M in _.clipPaths)_.clipPaths[M].remove()}m&&_._scene&&(_._scene.destroy(),_._scene=null)}}return t(f,"clean"),m6={attr:s,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:l,layoutAttributes:i0e(),supplyLayoutDefaults:rUe(),plot:u,clean:f,toSVG:Ti.toSVG},m6}t(TB,"requirePolar");var x6,lne;function M3(){if(lne)return x6;lne=1;var e=Un.hovertemplateAttrs,r=Un.texttemplateAttrs,n=cn.extendFlat,i=Ps,s=Ni,o=i.line;return x6={mode:i.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the radial coordinates"},theta:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the angular coordinates"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Alternate to `r`.","Builds a linear space of r coordinates.","Use with `dr`","where `r0` is the starting coordinate and `dr` the step."].join(" ")},dr:{valType:"number",dflt:1,editType:"calc",description:"Sets the r coordinate step."},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Alternate to `theta`.","Builds a linear space of theta coordinates.","Use with `dtheta`","where `theta0` is the starting coordinate and `dtheta` the step."].join(" ")},dtheta:{valType:"number",editType:"calc",description:["Sets the theta coordinate step.","By default, the `dtheta` step equals the subplot's period divided","by the length of the `r` coordinates."].join(" ")},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes",description:["Sets the unit of input *theta* values.","Has an effect only when on *linear* angular axes."].join(" ")},text:i.text,texttemplate:r({editType:"plot"},{keys:["r","theta","text"]}),hovertext:i.hovertext,line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:n({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:i.connectgaps,marker:i.marker,cliponaxis:n({},i.cliponaxis,{dflt:!1}),textposition:i.textposition,textfont:i.textfont,fill:n({},i.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterpolar has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:i.fillcolor,hoverinfo:n({},s.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:i.hoveron,hovertemplate:e(),selected:i.selected,unselected:i.unselected},x6}t(M3,"requireAttributes$3");var b6,une;function AB(){if(une)return b6;une=1;var e=Nt.exports,r=ho,n=Ph,i=mv,s=ox,o=xv,a=dd,l=vd.PTS_LINESONLY,u=M3();function f(v,c,d,g){function p(y,T){return e.coerce(v,c,u,y,T)}t(p,"coerce");var b=h(v,c,g,p);if(!b){c.visible=!1;return}p("thetaunit"),p("mode",b<l?"lines+markers":"lines"),p("text"),p("hovertext"),c.hoveron!=="fills"&&p("hovertemplate"),r.hasLines(c)&&(i(v,c,d,g,p,{backoff:!0}),s(v,c,p),p("connectgaps")),r.hasMarkers(c)&&n(v,c,d,g,p,{gradient:!0}),r.hasText(c)&&(p("texttemplate"),o(v,c,g,p));var m=[];(r.hasMarkers(c)||r.hasText(c))&&(p("cliponaxis"),p("marker.maxdisplayed"),m.push("points")),p("fill"),c.fill!=="none"&&(a(v,c,d,p),r.hasLines(c)||s(v,c,p)),(c.fill==="tonext"||c.fill==="toself")&&m.push("fills"),p("hoveron",m.join("+")||"points"),e.coerceSelectionMarkerOpacity(c,p)}t(f,"supplyDefaults");function h(v,c,d,g){var p=g("r"),b=g("theta"),m;if(p)b?m=Math.min(p.length,b.length):(m=p.length,g("theta0"),g("dtheta"));else{if(!b)return 0;m=c.theta.length,g("r0"),g("dr")}return c._length=m,m}return t(h,"handleRThetaDefaults"),b6={handleRThetaDefaults:h,supplyDefaults:f},b6}t(AB,"requireDefaults$3");var _6,fne;function SB(){if(fne)return _6;fne=1;var e=Nt.exports,r=nn();return _6=t(function(i,s,o){var a={},l=o[s.subplot]._subplot,u,f;l?(u=l.radialAxis,f=l.angularAxis):(l=o[s.subplot],u=l.radialaxis,f=l.angularaxis);var h=u.c2l(i.r);a.rLabel=r.tickText(u,h,!0).text;var v=f.thetaunit==="degrees"?e.rad2deg(i.theta):i.theta;return a.thetaLabel=r.tickText(f,v,!0).text,a},"formatLabels"),_6}t(SB,"requireFormat_labels$2");var w6,cne;function aUe(){if(cne)return w6;cne=1;var e=xn,r=jn.BADNUM,n=nn(),i=Dh,s=pd,o=Ih,a=kh.calcMarkerSize;return w6=t(function(u,f){for(var h=u._fullLayout,v=f.subplot,c=h[v].radialaxis,d=h[v].angularaxis,g=c.makeCalcdata(f,"r"),p=d.makeCalcdata(f,"theta"),b=f._length,m=new Array(b),y=0;y<b;y++){var T=g[y],_=p[y],M=m[y]={};e(T)&&e(_)?(M.r=T,M.theta=_):M.r=r}var w=a(f,b);return f._extremes.x=n.findExtremes(c,g,{ppad:w}),i(u,f),s(m,f),o(m,f),m},"calc"),w6}t(aUe,"requireCalc$3");var T6,hne;function nUe(){if(hne)return T6;hne=1;var e=sx,r=jn.BADNUM;return T6=t(function(i,s,o){for(var a=s.layers.frontplot.select("g.scatterlayer"),l=s.xaxis,u=s.yaxis,f={xaxis:l,yaxis:u,plot:s.framework,layerClipId:s._hasClipOnAxisFalse?s.clipIds.forTraces:null},h=s.radialAxis,v=s.angularAxis,c=0;c<o.length;c++)for(var d=o[c],g=0;g<d.length;g++){g===0&&(d[0].trace._xA=l,d[0].trace._yA=u);var p=d[g],b=p.r;if(b===r)p.x=p.y=r;else{var m=h.c2g(b),y=v.c2g(p.theta);p.x=m*Math.cos(y),p.y=m*Math.sin(y)}}e(i,f,o,a)},"plot"),T6}t(nUe,"requirePlot$3");var A6,vne;function MB(){if(vne)return A6;vne=1;var e=ux;function r(i,s,o,a){var l=e(i,s,o,a);if(!(!l||l[0].index===!1)){var u=l[0];if(u.index===void 0)return l;var f=i.subplot,h=u.cd[u.index],v=u.trace;if(!!f.isPtInside(h))return u.xLabelVal=void 0,u.yLabelVal=void 0,n(h,v,f,u),u.hovertemplate=v.hovertemplate,l}}t(r,"hoverPoints");function n(i,s,o,a){var l=o.radialAxis,u=o.angularAxis;l._hovertitle="r",u._hovertitle="\u03B8";var f={};f[s.subplot]={_subplot:o};var h=s._module.formatLabels(i,s,f);a.rLabel=h.rLabel,a.thetaLabel=h.thetaLabel;var v=i.hi||s.hoverinfo,c=[];function d(p,b){c.push(p._hovertitle+": "+b)}if(t(d,"textPart"),!s.hovertemplate){var g=v.split("+");g.indexOf("all")!==-1&&(g=["r","theta","text"]),g.indexOf("r")!==-1&&d(l,a.rLabel),g.indexOf("theta")!==-1&&d(u,a.thetaLabel),g.indexOf("text")!==-1&&a.text&&(c.push(a.text),delete a.text),a.extraText=c.join("<br>")}}return t(n,"makeHoverPointText"),A6={hoverPoints:r,makeHoverPointText:n},A6}t(MB,"requireHover$3");var S6,dne;function iUe(){return dne||(dne=1,S6={moduleType:"trace",name:"scatterpolar",basePlotModule:TB(),categories:["polar","symbols","showLegend","scatter-like"],attributes:M3(),supplyDefaults:AB().supplyDefaults,colorbar:_u,formatLabels:SB(),calc:aUe(),plot:nUe(),style:kf.style,styleOnSelect:kf.styleOnSelect,hoverPoints:MB().hoverPoints,selectPoints:fx,meta:{hrName:"scatter_polar",description:["The scatterpolar trace type encompasses line charts, scatter charts, text charts, and bubble charts","in polar coordinates.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}),S6}t(iUe,"requireScatterpolar$1");var pne;function oUe(){return pne||(pne=1,function(e){e.exports=iUe()}(f6)),f6.exports}t(oUe,"requireScatterpolar");var M6={exports:{}},k6,gne;function o0e(){if(gne)return k6;gne=1;var e=M3(),r=b3(),n=Un.texttemplateAttrs;return k6={mode:e.mode,r:e.r,theta:e.theta,r0:e.r0,dr:e.dr,theta0:e.theta0,dtheta:e.dtheta,thetaunit:e.thetaunit,text:e.text,texttemplate:n({editType:"plot"},{keys:["r","theta","text"]}),hovertext:e.hovertext,hovertemplate:e.hovertemplate,line:r.line,connectgaps:r.connectgaps,marker:r.marker,fill:r.fill,fillcolor:r.fillcolor,textposition:r.textposition,textfont:r.textfont,hoverinfo:e.hoverinfo,selected:e.selected,unselected:e.unselected},k6}t(o0e,"requireAttributes$2");var E6,yne;function sUe(){if(yne)return E6;yne=1;var e=Nt.exports,r=ho,n=AB().handleRThetaDefaults,i=Ph,s=mv,o=xv,a=dd,l=vd.PTS_LINESONLY,u=o0e();return E6=t(function(h,v,c,d){function g(b,m){return e.coerce(h,v,u,b,m)}t(g,"coerce");var p=n(h,v,d,g);if(!p){v.visible=!1;return}g("thetaunit"),g("mode",p<l?"lines+markers":"lines"),g("text"),g("hovertext"),v.hoveron!=="fills"&&g("hovertemplate"),r.hasLines(v)&&(s(h,v,c,d,g),g("connectgaps")),r.hasMarkers(v)&&i(h,v,c,d,g,{noAngleRef:!0,noStandOff:!0}),r.hasText(v)&&(g("texttemplate"),o(h,v,d,g)),g("fill"),v.fill!=="none"&&a(h,v,c,g),e.coerceSelectionMarkerOpacity(v,g)},"supplyDefaults"),E6}t(sUe,"requireDefaults$2");var C6,mne;function lUe(){if(mne)return C6;mne=1;var e=SB();return C6=t(function(n,i,s){var o=n.i;return"r"in n||(n.r=i._r[o]),"theta"in n||(n.theta=i._theta[o]),e(n,i,s)},"formatLabels"),C6}t(lUe,"requireFormat_labels$1");var L6,xne;function uUe(){if(xne)return L6;xne=1;var e=Dh,r=kh.calcMarkerSize,n=yy(),i=nn(),s=O0().TOO_MANY_POINTS;return L6=t(function(a,l){var u=a._fullLayout,f=l.subplot,h=u[f].radialaxis,v=u[f].angularaxis,c=l._r=h.makeCalcdata(l,"r"),d=l._theta=v.makeCalcdata(l,"theta"),g=l._length,p={};g<c.length&&(c=c.slice(0,g)),g<d.length&&(d=d.slice(0,g)),p.r=c,p.theta=d,e(a,l);var b=p.opts=n.style(a,l),m;return g<s?m=r(l,g):b.marker&&(m=2*(b.marker.sizeAvg||Math.max(b.marker.size,3))),l._extremes.x=i.findExtremes(h,c,{ppad:m}),[{x:!1,y:!1,t:p,trace:l}]},"calc"),L6}t(uUe,"requireCalc$2");var R6,bne;function fUe(){if(bne)return R6;bne=1;var e=tB(),r=MB().makeHoverPointText;function n(i,s,o,a){var l=i.cd,u=l[0].t,f=u.r,h=u.theta,v=e.hoverPoints(i,s,o,a);if(!(!v||v[0].index===!1)){var c=v[0];if(c.index===void 0)return v;var d=i.subplot,g=c.cd[c.index],p=c.trace;if(g.r=f[c.index],g.theta=h[c.index],!!d.isPtInside(g))return c.xLabelVal=void 0,c.yLabelVal=void 0,r(g,p,d,c),v}}return t(n,"hoverPoints"),R6={hoverPoints:n},R6}t(fUe,"requireHover$2");var P6,_ne;function cUe(){return _ne||(_ne=1,P6={moduleType:"trace",name:"scatterpolargl",basePlotModule:TB(),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:o0e(),supplyDefaults:sUe(),colorbar:_u,formatLabels:lUe(),calc:uUe(),hoverPoints:fUe().hoverPoints,selectPoints:Rde(),meta:{hrName:"scatter_polar_gl",description:["The scatterpolargl trace type encompasses line charts, scatter charts, and bubble charts","in polar coordinates using the WebGL plotting engine.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}),P6}t(cUe,"requireBase_index");var o_={exports:{}},wne;function hUe(){if(wne)return o_.exports;wne=1;var e=aB(),r=xn,n=ape(),i=Cde(),s=yy(),o=Nt.exports,a=O0().TOO_MANY_POINTS,l={};return o_.exports=t(function(f,h,v){if(!!v.length){var c=h.radialAxis,d=h.angularAxis,g=i(f,h);return v.forEach(function(p){if(!(!p||!p[0]||!p[0].trace)){var b=p[0],m=b.trace,y=b.t,T=m._length,_=y.r,M=y.theta,w=y.opts,x,A=_.slice(),S=M.slice();for(x=0;x<_.length;x++)h.isPtInside({r:_[x],theta:M[x]})||(A[x]=NaN,S[x]=NaN);var k=new Array(T*2),L=Array(T),P=Array(T);for(x=0;x<T;x++){var D=A[x],B,z;if(r(D)){var R=c.c2g(D),F=d.c2g(S[x],m.thetaunit);B=R*Math.cos(F),z=R*Math.sin(F)}else B=z=NaN;L[x]=k[x*2]=B,P[x]=k[x*2+1]=z}y.tree=e(k),w.marker&&T>=a&&(w.marker.cluster=y.tree),w.marker&&(w.markerSel.positions=w.markerUnsel.positions=w.marker.positions=k),w.line&&k.length>1&&o.extendFlat(w.line,s.linePositions(f,m,k)),w.text&&(o.extendFlat(w.text,{positions:k},s.textPosition(f,m,w.text,w.marker)),o.extendFlat(w.textSel,{positions:k},s.textPosition(f,m,w.text,w.markerSel)),o.extendFlat(w.textUnsel,{positions:k},s.textPosition(f,m,w.text,w.markerUnsel))),w.fill&&!g.fill2d&&(g.fill2d=!0),w.marker&&!g.scatter2d&&(g.scatter2d=!0),w.line&&!g.line2d&&(g.line2d=!0),w.text&&!g.glText&&(g.glText=!0),g.lineOptions.push(w.line),g.fillOptions.push(w.fill),g.markerOptions.push(w.marker),g.markerSelectedOptions.push(w.markerSel),g.markerUnselectedOptions.push(w.markerUnsel),g.textOptions.push(w.text),g.textSelectedOptions.push(w.textSel),g.textUnselectedOptions.push(w.textUnsel),g.selectBatch.push([]),g.unselectBatch.push([]),y.x=L,y.y=P,y.rawx=L,y.rawy=P,y.r=_,y.theta=M,y.positions=k,y._scene=g,y.index=g.count,g.count++}}),n(f,h,v)}},"plot"),o_.exports.reglPrecompiled=l,o_.exports}t(hUe,"requirePlot$2");var D6,Tne;function vUe(){if(Tne)return D6;Tne=1;var e=cUe();return e.plot=hUe(),D6=e,D6}t(vUe,"requireScatterpolargl$1");var Ane;function dUe(){return Ane||(Ane=1,function(e){e.exports=vUe()}(M6)),M6.exports}t(dUe,"requireScatterpolargl");var I6={exports:{}},z6,Sne;function s0e(){if(Sne)return z6;Sne=1;var e=Un.hovertemplateAttrs,r=cn.extendFlat,n=M3(),i=gd();return z6={r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,base:r({},i.base,{description:["Sets where the bar base is drawn (in radial axis units).","In *stack* barmode,","traces that set *base* will be excluded","and drawn in *overlay* mode instead."].join(" ")}),offset:r({},i.offset,{description:["Shifts the angular position where the bar is drawn","(in *thetatunit* units)."].join(" ")}),width:r({},i.width,{description:["Sets the bar angular width (in *thetaunit* units)."].join(" ")}),text:r({},i.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:r({},i.hovertext,{description:"Same as `text`."}),marker:i.marker,hoverinfo:n.hoverinfo,hovertemplate:e(),selected:i.selected,unselected:i.unselected},z6}t(s0e,"requireAttributes$1");var F6,Mne;function l0e(){return Mne||(Mne=1,F6={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *stack*, the bars are stacked on top of one another","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc",description:["Sets the gap between bars of","adjacent location coordinates.","Values are unitless, they represent fractions of the minimum difference","in bar positions in the data."].join(" ")}}),F6}t(l0e,"requireLayout_attributes$1");var B6,kne;function pUe(){if(kne)return B6;kne=1;var e=Nt.exports,r=AB().handleRThetaDefaults,n=i7(),i=s0e();return B6=t(function(o,a,l,u){function f(v,c){return e.coerce(o,a,i,v,c)}t(f,"coerce");var h=r(o,a,u,f);if(!h){a.visible=!1;return}f("thetaunit"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),n(o,a,f,l,u),e.coerceSelectionMarkerOpacity(a,f)},"supplyDefaults"),B6}t(pUe,"requireDefaults$1");var O6,Ene;function gUe(){if(Ene)return O6;Ene=1;var e=Nt.exports,r=l0e();return O6=t(function(n,i,s){var o={},a;function l(h,v){return e.coerce(n[a]||{},i[a],r,h,v)}t(l,"coerce");for(var u=0;u<s.length;u++){var f=s[u];f.type==="barpolar"&&f.visible===!0&&(a=f.subplot,o[a]||(l("barmode"),l("bargap"),o[a]=1))}},"layout_defaults$1"),O6}t(gUe,"requireLayout_defaults$1");var N6,Cne;function Lne(){if(Cne)return N6;Cne=1;var e=Qu.hasColorscale,r=Lf,n=zw(),i=hx().setGroupPositions,s=Ih,o=Na.traceIs,a=Nt.exports.extendFlat;function l(f,h){for(var v=f._fullLayout,c=h.subplot,d=v[c].radialaxis,g=v[c].angularaxis,p=d.makeCalcdata(h,"r"),b=g.makeCalcdata(h,"theta"),m=h._length,y=new Array(m),T=p,_=b,M=0;M<m;M++)y[M]={p:_[M],s:T[M]};function w(x){var A=h[x];A!==void 0&&(h["_"+x]=Array.isArray(A)?g.makeCalcdata(h,x):g.d2c(A,h.thetaunit))}return t(w,"d2c"),g.type==="linear"&&(w("width"),w("offset")),e(h,"marker")&&r(f,h,{vals:h.marker.color,containerStr:"marker",cLetter:"c"}),e(h,"marker.line")&&r(f,h,{vals:h.marker.line.color,containerStr:"marker.line",cLetter:"c"}),n(y,h),s(y,h),y}t(l,"calc");function u(f,h,v){for(var c=f.calcdata,d=[],g=0;g<c.length;g++){var p=c[g],b=p[0].trace;b.visible===!0&&o(b,"bar")&&b.subplot===v&&d.push(p)}var m=a({},h.radialaxis,{_id:"x"}),y=h.angularaxis;i(f,y,m,d,{mode:h.barmode,norm:h.barnorm,gap:h.bargap,groupgap:h.bargroupgap})}return t(u,"crossTraceCalc"),N6={calc:l,crossTraceCalc:u},N6}t(Lne,"requireCalc$1");var q6,Rne;function yUe(){if(Rne)return q6;Rne=1;var e=Va.exports,r=xn,n=Nt.exports,i=bn.exports,s=wB();q6=t(function(l,u,f){var h=u.xaxis,v=u.yaxis,c=u.radialAxis,d=u.angularAxis,g=o(u),p=u.layers.frontplot.select("g.barlayer");n.makeTraceGroups(p,f,"trace bars").each(function(){var b=e.select(this),m=n.ensureSingle(b,"g","points"),y=m.selectAll("g.point").data(n.identity);y.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),y.exit().remove(),y.each(function(T){var _=e.select(this),M=T.rp0=c.c2p(T.s0),w=T.rp1=c.c2p(T.s1),x=T.thetag0=d.c2g(T.p0),A=T.thetag1=d.c2g(T.p1),S;if(!r(M)||!r(w)||!r(x)||!r(A)||M===w||x===A)S="M0,0Z";else{var k=c.c2g(T.s1),L=(x+A)/2;T.ct=[h.c2p(k*Math.cos(L)),v.c2p(k*Math.sin(L))],S=g(M,w,x,A)}n.ensureSingle(_,"path").attr("d",S)}),i.setClipUrl(b,u._hasClipOnAxisFalse?u.clipIds.forTraces:null,l)})},"plot");function o(a){var l=a.cxx,u=a.cyy;return a.vangles?function(f,h,v,c){var d,g;n.angleDelta(v,c)>0?(d=v,g=c):(d=c,g=v);var p=s.findEnclosingVertexAngles(d,a.vangles)[0],b=s.findEnclosingVertexAngles(g,a.vangles)[1],m=[p,(d+g)/2,b];return s.pathPolygonAnnulus(f,h,d,g,m,l,u)}:function(f,h,v,c){return n.pathAnnulus(f,h,v,c,l,u)}}return t(o,"makePathFn"),q6}t(yUe,"requirePlot$1");var U6,Pne;function mUe(){if(Pne)return U6;Pne=1;var e=Ko,r=Nt.exports,n=vx().getTraceColor,i=r.fillText,s=MB().makeHoverPointText,o=wB().isPtInsidePolygon;return U6=t(function(l,u,f){var h=l.cd,v=h[0].trace,c=l.subplot,d=c.radialAxis,g=c.angularAxis,p=c.vangles,b=p?o:r.isPtInsideSector,m=l.maxHoverDistance,y=g._period||2*Math.PI,T=Math.abs(d.g2p(Math.sqrt(u*u+f*f))),_=Math.atan2(f,u);d.range[0]>d.range[1]&&(_+=Math.PI);var M=t(function(S){return b(T,_,[S.rp0,S.rp1],[S.thetag0,S.thetag1],p)?m+Math.min(1,Math.abs(S.thetag1-S.thetag0)/y)-1+(S.rp1-T)/(S.rp1-S.rp0)-1:1/0},"distFn");if(e.getClosest(h,M,l),l.index!==!1){var w=l.index,x=h[w];l.x0=l.x1=x.ct[0],l.y0=l.y1=x.ct[1];var A=r.extendFlat({},x,{r:x.s,theta:x.p});return i(x,v,l),s(A,v,c,l),l.hovertemplate=v.hovertemplate,l.color=n(v,x),l.xLabelVal=l.yLabelVal=void 0,x.s<0&&(l.idealAlign="left"),[l]}},"hoverPoints"),U6}t(mUe,"requireHover$1");var H6,Dne;function xUe(){return Dne||(Dne=1,H6={moduleType:"trace",name:"barpolar",basePlotModule:TB(),categories:["polar","bar","showLegend"],attributes:s0e(),layoutAttributes:l0e(),supplyDefaults:pUe(),supplyLayoutDefaults:gUe(),calc:Lne().calc,crossTraceCalc:Lne().crossTraceCalc,plot:yUe(),colorbar:_u,formatLabels:SB(),style:Eh().style,styleOnSelect:Eh().styleOnSelect,hoverPoints:mUe(),selectPoints:dx(),meta:{hrName:"bar_polar",description:["The data visualized by the radial span of the bars is set in `r`"].join(" ")}}),H6}t(xUe,"requireBarpolar$1");var Ine;function bUe(){return Ine||(Ine=1,function(e){e.exports=xUe()}(I6)),I6.exports}t(bUe,"requireBarpolar");var $6={exports:{}},V6,zne;function u0e(){return zne||(zne=1,V6={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}),V6}t(u0e,"requireConstants");var G6,Fne;function f0e(){if(Fne)return G6;Fne=1;var e=Fo,r=Jl,n=vo.attributes,i=Nt.exports.extendFlat,s=_o.overrideAll,o=s({color:r.color,showline:i({},r.showline,{dflt:!0}),linecolor:r.linecolor,linewidth:r.linewidth,showgrid:i({},r.showgrid,{dflt:!0}),gridcolor:r.gridcolor,gridwidth:r.gridwidth,griddash:r.griddash},"plot","from-root"),a=s({ticklen:r.ticklen,tickwidth:i({},r.tickwidth,{dflt:2}),tickcolor:r.tickcolor,showticklabels:r.showticklabels,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,tickfont:r.tickfont,tickformat:r.tickformat,hoverformat:r.hoverformat,layer:r.layer},"plot","from-root"),l=i({visible:i({},r.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot",description:"Sets the values at which ticks on this axis appear."},tickangle:i({},r.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks",description:["Determines whether ticks are drawn or not.","If **, this axis' ticks are not drawn.","If *top* (*bottom*), this axis' are drawn above (below)","the axis line."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Determines on which side of real axis line","the tick and tick labels appear."].join(" ")},editType:"calc"},o,a),u=i({visible:i({},r.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot",description:["Sets the values at which ticks on this axis appear.","Defaults to `realaxis.tickvals` plus the same as negatives and zero."].join(" ")},ticks:r.ticks,editType:"calc"},o,a);return G6={domain:n({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:e.background,description:"Set the background color of the subplot"},realaxis:l,imaginaryaxis:u,editType:"calc"},G6}t(f0e,"requireLayout_attributes");var j6,Bne;function _Ue(){if(Bne)return j6;Bne=1;var e=Nt.exports,r=$a.exports,n=ei,i=Fy(),s=Ns.getSubplotData,o=R0,a=L0,l=Lw,u=hd(),f=f0e(),h=u0e(),v=h.axisNames,c=g(function(p){return p.slice().reverse().map(function(b){return-b}).concat([0]).concat(p)},String);function d(p,b,m,y){var T=m("bgcolor");y.bgColor=r.combine(T,y.paper_bgcolor);var _=s(y.fullData,h.name,y.id),M=y.layoutOut,w;function x(H,j){return m(w+"."+H,j)}t(x,"coerceAxis");for(var A=0;A<v.length;A++){w=v[A],e.isPlainObject(p[w])||(p[w]={});var S=p[w],k=n.newContainer(b,w);k._id=k._name=w,k._attr=y.id+"."+w,k._traceIndices=_.map(function(H){return H._expandedIndex});var L=x("visible");if(k.type="linear",u(k,M),o(S,k,x,k.type),L){var P=w==="realaxis";if(P&&x("side"),P)x("tickvals");else{var D=c(b.realaxis.tickvals||f.realaxis.tickvals.dflt);x("tickvals",D)}var B,z,R,F,O=y.font||{};L&&(B=x("color"),z=B===S.color?B:O.color,R=O.size,F=O.family),a(S,k,x,k.type,{noTicklabelstep:!0,noAng:!P,noExp:!0,font:{color:z,size:R,family:F}}),e.coerce2(p,b,f,w+".ticklen"),e.coerce2(p,b,f,w+".tickwidth"),e.coerce2(p,b,f,w+".tickcolor",b.color);var q=x("ticks");q||(delete b[w].ticklen,delete b[w].tickwidth,delete b[w].tickcolor),l(S,k,x,{dfltColor:B,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[w]}),x("layer")}x("hoverformat"),delete k.type,k._input=S}}t(d,"handleDefaults"),j6=t(function(b,m,y){i(b,m,y,{noUirevision:!0,type:h.name,attributes:f,handleDefaults:d,font:m.font,paper_bgcolor:m.paper_bgcolor,fullData:y,layoutOut:m})},"supplyLayoutDefaults");function g(p,b){var m={};return function(y){var T=b?b(y):y;if(T in m)return m[T];var _=p(y);return m[T]=_,_}}return t(g,"memoize"),j6}t(_Ue,"requireLayout_defaults");var Y6,One;function wUe(){if(One)return Y6;One=1;var e=Ns.getSubplotCalcData,r=Nt.exports.counterRegex,n=n0e(),i=u0e(),s=i.attr,o=i.name,a=r(o),l={};l[s]={valType:"subplotid",dflt:o,editType:"calc",description:["Sets a reference between this trace's data coordinates and","a smith subplot.","If *smith* (the default value), the data refer to `layout.smith`.","If *smith2*, the data refer to `layout.smith2`, and so on."].join(" ")};function u(h){for(var v=h._fullLayout,c=h.calcdata,d=v._subplots[o],g=0;g<d.length;g++){var p=d[g],b=e(c,o,p),m=v[p]._subplot;m||(m=n(h,p,!0),v[p]._subplot=m),m.plot(b,v,h._promises)}}t(u,"plot");function f(h,v,c,d){for(var g=d._subplots[o]||[],p=0;p<g.length;p++){var b=g[p],m=d[b]._subplot;if(!v[b]&&!!m){m.framework.remove();for(var y in m.clipPaths)m.clipPaths[y].remove()}}}return t(f,"clean"),Y6={attr:s,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:l,layoutAttributes:f0e(),supplyLayoutDefaults:_Ue(),plot:u,clean:f,toSVG:Ti.toSVG},Y6}t(wUe,"requireSmith");var W6,Nne;function c0e(){if(Nne)return W6;Nne=1;var e=Un.hovertemplateAttrs,r=Un.texttemplateAttrs,n=cn.extendFlat,i=Ps,s=Ni,o=i.line;return W6={mode:i.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the real component of the data, in units of normalized impedance","such that real=1, imag=0 is the center of the chart."].join(" ")},imag:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the imaginary component of the data, in units of normalized impedance","such that real=1, imag=0 is the center of the chart."].join(" ")},text:i.text,texttemplate:r({editType:"plot"},{keys:["real","imag","text"]}),hovertext:i.hovertext,line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:n({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:i.connectgaps,marker:i.marker,cliponaxis:n({},i.cliponaxis,{dflt:!1}),textposition:i.textposition,textfont:i.textfont,fill:n({},i.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scattersmith has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:i.fillcolor,hoverinfo:n({},s.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:i.hoveron,hovertemplate:e(),selected:i.selected,unselected:i.unselected},W6}t(c0e,"requireAttributes");var X6,qne;function TUe(){if(qne)return X6;qne=1;var e=Nt.exports,r=ho,n=Ph,i=mv,s=ox,o=xv,a=dd,l=vd.PTS_LINESONLY,u=c0e();X6=t(function(v,c,d,g){function p(y,T){return e.coerce(v,c,u,y,T)}t(p,"coerce");var b=f(v,c,g,p);if(!b){c.visible=!1;return}p("mode",b<l?"lines+markers":"lines"),p("text"),p("hovertext"),c.hoveron!=="fills"&&p("hovertemplate"),r.hasLines(c)&&(i(v,c,d,g,p,{backoff:!0}),s(v,c,p),p("connectgaps")),r.hasMarkers(c)&&n(v,c,d,g,p,{gradient:!0}),r.hasText(c)&&(p("texttemplate"),o(v,c,g,p));var m=[];(r.hasMarkers(c)||r.hasText(c))&&(p("cliponaxis"),p("marker.maxdisplayed"),m.push("points")),p("fill"),c.fill!=="none"&&(a(v,c,d,p),r.hasLines(c)||s(v,c,p)),(c.fill==="tonext"||c.fill==="toself")&&m.push("fills"),p("hoveron",m.join("+")||"points"),e.coerceSelectionMarkerOpacity(c,p)},"supplyDefaults");function f(h,v,c,d){var g=d("real"),p=d("imag"),b;return g&&p&&(b=Math.min(g.length,p.length)),v._length=b,b}return t(f,"handleRealImagDefaults"),X6}t(TUe,"requireDefaults");var Z6,Une;function AUe(){if(Une)return Z6;Une=1;var e=nn();return Z6=t(function(n,i,s){var o={},a=s[i.subplot]._subplot;return o.realLabel=e.tickText(a.radialAxis,n.real,!0).text,o.imagLabel=e.tickText(a.angularAxis,n.imag,!0).text,o},"formatLabels"),Z6}t(AUe,"requireFormat_labels");var K6,Hne;function SUe(){if(Hne)return K6;Hne=1;var e=xn,r=jn.BADNUM,n=Dh,i=pd,s=Ih,o=kh.calcMarkerSize;return K6=t(function(l,u){for(var f=l._fullLayout,h=u.subplot,v=f[h].realaxis,c=f[h].imaginaryaxis,d=v.makeCalcdata(u,"real"),g=c.makeCalcdata(u,"imag"),p=u._length,b=new Array(p),m=0;m<p;m++){var y=d[m],T=g[m],_=b[m]={};e(y)&&e(T)?(_.real=y,_.imag=T):_.real=r}return o(u,p),n(l,u),i(b,u),s(b,u),b},"calc"),K6}t(SUe,"requireCalc");var J6,$ne;function MUe(){if($ne)return J6;$ne=1;var e=sx,r=jn.BADNUM,n=a0e(),i=n.smith;return J6=t(function(o,a,l){for(var u=a.layers.frontplot.select("g.scatterlayer"),f=a.xaxis,h=a.yaxis,v={xaxis:f,yaxis:h,plot:a.framework,layerClipId:a._hasClipOnAxisFalse?a.clipIds.forTraces:null},c=0;c<l.length;c++)for(var d=l[c],g=0;g<d.length;g++){g===0&&(d[0].trace._xA=f,d[0].trace._yA=h);var p=d[g],b=p.real;if(b===r)p.x=p.y=r;else{var m=i([b,p.imag]);p.x=m[0],p.y=m[1]}}e(o,v,l,u)},"plot"),J6}t(MUe,"requirePlot");var Q6,Vne;function kUe(){if(Vne)return Q6;Vne=1;var e=ux;function r(i,s,o,a){var l=e(i,s,o,a);if(!(!l||l[0].index===!1)){var u=l[0];if(u.index===void 0)return l;var f=i.subplot,h=u.cd[u.index],v=u.trace;if(!!f.isPtInside(h))return u.xLabelVal=void 0,u.yLabelVal=void 0,n(h,v,f,u),u.hovertemplate=v.hovertemplate,l}}t(r,"hoverPoints");function n(i,s,o,a){var l=o.radialAxis,u=o.angularAxis;l._hovertitle="real",u._hovertitle="imag";var f={};f[s.subplot]={_subplot:o};var h=s._module.formatLabels(i,s,f);a.realLabel=h.realLabel,a.imagLabel=h.imagLabel;var v=i.hi||s.hoverinfo,c=[];function d(p,b){c.push(p._hovertitle+": "+b)}if(t(d,"textPart"),!s.hovertemplate){var g=v.split("+");g.indexOf("all")!==-1&&(g=["real","imag","text"]),g.indexOf("real")!==-1&&d(l,a.realLabel),g.indexOf("imag")!==-1&&d(u,a.imagLabel),g.indexOf("text")!==-1&&a.text&&(c.push(a.text),delete a.text),a.extraText=c.join("<br>")}}return t(n,"makeHoverPointText"),Q6={hoverPoints:r,makeHoverPointText:n},Q6}t(kUe,"requireHover");var ez,Gne;function EUe(){return Gne||(Gne=1,ez={moduleType:"trace",name:"scattersmith",basePlotModule:wUe(),categories:["smith","symbols","showLegend","scatter-like"],attributes:c0e(),supplyDefaults:TUe(),colorbar:_u,formatLabels:AUe(),calc:SUe(),plot:MUe(),style:kf.style,styleOnSelect:kf.styleOnSelect,hoverPoints:kUe().hoverPoints,selectPoints:fx,meta:{hrName:"scatter_smith",description:["The scattersmith trace type encompasses line charts, scatter charts, text charts, and bubble charts","in smith coordinates.","The data visualized as scatter point or lines is set in","`real` and `imag` (imaginary) coordinates","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}),ez}t(EUe,"requireScattersmith$1");var jne;function CUe(){return jne||(jne=1,function(e){e.exports=EUe()}($6)),$6.exports}t(CUe,"requireScattersmith");var tz={exports:{}},Qp={},rz={},Yne;function k3(){return Yne||(Yne=1,rz.pointsAccessorFunction=function(e,r){for(var n,i,s=0;s<e.length&&(n=e[s],n!==r);s++)!n._indexToPoints||n.enabled===!1||(i=n._indexToPoints);var o=i?function(a){return i[a]}:function(a){return[a]};return o}),rz}t(k3,"requireHelpers");var Wne;function LUe(){if(Wne)return Qp;Wne=1;var e=nn(),r=Nt.exports,n=dp,i=k3().pointsAccessorFunction,s=jn.BADNUM;Qp.moduleType="transform",Qp.name="aggregate";var o=Qp.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this aggregate transform is enabled or disabled."].join(" ")},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the grouping target to which the aggregation is applied.","Data points with matching group values will be coalesced into","one point, using the supplied aggregation functions to reduce data","in other data arrays.","If a string, `groups` is assumed to be a reference to a data array","in the parent trace object.","To aggregate by nested variables, use *.* to access them.","For example, set `groups` to *marker.color* to aggregate","about the marker color array.","If an array, `groups` is itself the data array by which we aggregate."].join(" ")},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc",description:["A reference to the data array in the parent trace to aggregate.","To aggregate by nested variables, use *.* to access them.","For example, set `groups` to *marker.color* to aggregate","over the marker color array.","The referenced array must already exist, unless `func` is *count*,","and each array may only be referenced once."].join(" ")},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc",description:["Sets the aggregation function.","All values from the linked `target`, corresponding to the same value","in the `groups` array, are collected and reduced by this function.","*count* is simply the number of values in the `groups` array, so does","not even require the linked array to exist. *first* (*last*) is just","the first (last) linked value.","Invalid values are ignored, so for example in *avg* they do not","contribute to either the numerator or the denominator.","Any data type (numeric, date, category) may be aggregated with any","function, even though in certain cases it is unlikely to make sense,","for example a sum of dates or average of categories.","*median* will return the average of the two central values if there is","an even count. *mode* will return the first value to reach the maximum","count, in case of a tie.","*change* will return the difference between the first and last linked values.","*range* will return the difference between the min and max linked values."].join(" ")},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc",description:["*stddev* supports two formula variants: *sample* (normalize by N-1)","and *population* (normalize by N)."].join(" ")},enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this aggregation function is enabled or disabled."].join(" ")},editType:"calc"},editType:"calc"},a=o.aggregations;Qp.supplyDefaults=function(c,d){var g={},p;function b(P,D){return r.coerce(c,g,o,P,D)}t(b,"coerce");var m=b("enabled");if(!m)return g;var y=n.findArrayAttributes(d),T={};for(p=0;p<y.length;p++)T[y[p]]=1;var _=b("groups");if(!Array.isArray(_)){if(!T[_])return g.enabled=!1,g;T[_]=0}var M=c.aggregations||[],w=g.aggregations=new Array(M.length),x;function A(P,D){return r.coerce(M[p],x,a,P,D)}for(t(A,"coercei"),p=0;p<M.length;p++){x={_index:p};var S=A("target"),k=A("func"),L=A("enabled");L&&S&&(T[S]||k==="count"&&T[S]===void 0)?(k==="stddev"&&A("funcmode"),T[S]=0,w[p]=x):w[p]={enabled:!1,_index:p}}for(p=0;p<y.length;p++)T[y[p]]&&w.push({target:y[p],func:a.func.dflt,enabled:!0,_index:-1});return g},Qp.calcTransform=function(c,d,g){if(!!g.enabled){var p=g.groups,b=r.getTargetArray(d,{target:p});if(!!b){var m,y,T,_,M={},w={},x=[],A=i(d.transforms,g),S=b.length;for(d._length&&(S=Math.min(S,d._length)),m=0;m<S;m++)y=b[m],T=M[y],T===void 0?(M[y]=x.length,_=[m],x.push(_),w[M[y]]=A(m)):(x[T].push(m),w[M[y]]=(w[M[y]]||[]).concat(A(m)));g._indexToPoints=w;var k=g.aggregations;for(m=0;m<k.length;m++)l(c,d,x,k[m]);typeof p=="string"&&l(c,d,x,{target:p,func:"first",enabled:!0}),d._length=x.length}}};function l(c,d,g,p){if(!!p.enabled){for(var b=p.target,m=r.nestedProperty(d,b),y=m.get(),T=e.getDataConversions(c,d,b,y),_=u(p,T),M=new Array(g.length),w=0;w<g.length;w++)M[w]=_(y,g[w]);m.set(M),p.func==="count"&&r.pushUnique(d._arrayAttrs,b)}}t(l,"aggregateOneArray");function u(c,d){var g=c.func,p=d.d2c,b=d.c2d;switch(g){case"count":return f;case"first":return h;case"last":return v;case"sum":return function(m,y){for(var T=0,_=0;_<y.length;_++){var M=p(m[y[_]]);M!==s&&(T+=M)}return b(T)};case"avg":return function(m,y){for(var T=0,_=0,M=0;M<y.length;M++){var w=p(m[y[M]]);w!==s&&(T+=w,_++)}return _?b(T/_):s};case"min":return function(m,y){for(var T=1/0,_=0;_<y.length;_++){var M=p(m[y[_]]);M!==s&&(T=Math.min(T,M))}return T===1/0?s:b(T)};case"max":return function(m,y){for(var T=-1/0,_=0;_<y.length;_++){var M=p(m[y[_]]);M!==s&&(T=Math.max(T,M))}return T===-1/0?s:b(T)};case"range":return function(m,y){for(var T=1/0,_=-1/0,M=0;M<y.length;M++){var w=p(m[y[M]]);w!==s&&(T=Math.min(T,w),_=Math.max(_,w))}return _===-1/0||T===1/0?s:b(_-T)};case"change":return function(m,y){var T=p(m[y[0]]),_=p(m[y[y.length-1]]);return T===s||_===s?s:b(_-T)};case"median":return function(m,y){for(var T=[],_=0;_<y.length;_++){var M=p(m[y[_]]);M!==s&&T.push(M)}if(!T.length)return s;T.sort(r.sorterAsc);var w=(T.length-1)/2;return b((T[Math.floor(w)]+T[Math.ceil(w)])/2)};case"mode":return function(m,y){for(var T={},_=0,M=s,w=0;w<y.length;w++){var x=p(m[y[w]]);if(x!==s){var A=T[x]=(T[x]||0)+1;A>_&&(_=A,M=x)}}return _?b(M):s};case"rms":return function(m,y){for(var T=0,_=0,M=0;M<y.length;M++){var w=p(m[y[M]]);w!==s&&(T+=w*w,_++)}return _?b(Math.sqrt(T/_)):s};case"stddev":return function(m,y){var T=0,_=0,M=1,w=s,x;for(x=0;x<y.length&&w===s;x++)w=p(m[y[x]]);if(w===s)return s;for(;x<y.length;x++){var A=p(m[y[x]]);if(A!==s){var S=A-w;T+=S,_+=S*S,M++}}var k=c.funcmode==="sample"?M-1:M;return k?Math.sqrt((_-T*T/M)/k):0}}}t(u,"getAggregateFunction");function f(c,d){return d.length}t(f,"count");function h(c,d){return c[d[0]]}t(h,"first");function v(c,d){return c[d[d.length-1]]}return t(v,"last"),Qp}t(LUe,"requireAggregate$1");var Xne;function RUe(){return Xne||(Xne=1,function(e){e.exports=LUe()}(tz)),tz.exports}t(RUe,"requireAggregate");var az={exports:{}},nz={},Zne;function PUe(){return Zne||(Zne=1,function(e){var r=Nt.exports,n=Na,i=nn(),s=k3().pointsAccessorFunction,o=Uw(),a=o.COMPARISON_OPS,l=o.INTERVAL_OPS,u=o.SET_OPS;e.moduleType="transform",e.name="filter",e.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this filter transform is enabled or disabled."].join(" ")},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the filter target by which the filter is applied.","If a string, `target` is assumed to be a reference to a data array","in the parent trace object.","To filter about nested variables, use *.* to access them.","For example, set `target` to *marker.color* to filter","about the marker color array.","If an array, `target` is then the data array by which the filter is applied."].join(" ")},operation:{valType:"enumerated",values:[].concat(a).concat(l).concat(u),dflt:"=",editType:"calc",description:["Sets the filter operation.","*=* keeps items equal to `value`","*!=* keeps items not equal to `value`","*<* keeps items less than `value`","*<=* keeps items less than or equal to `value`","*>* keeps items greater than `value`","*>=* keeps items greater than or equal to `value`","*[]* keeps items inside `value[0]` to `value[1]` including both bounds","*()* keeps items inside `value[0]` to `value[1]` excluding both bounds","*[)* keeps items inside `value[0]` to `value[1]` including `value[0]` but excluding `value[1]","*(]* keeps items inside `value[0]` to `value[1]` excluding `value[0]` but including `value[1]","*][* keeps items outside `value[0]` to `value[1]` and equal to both bounds","*)(* keeps items outside `value[0]` to `value[1]`","*](* keeps items outside `value[0]` to `value[1]` and equal to `value[0]`","*)[* keeps items outside `value[0]` to `value[1]` and equal to `value[1]`","*{}* keeps items present in a set of values","*}{* keeps items not present in a set of values"].join(" ")},value:{valType:"any",dflt:0,editType:"calc",description:["Sets the value or values by which to filter.","Values are expected to be in the same type as the data linked","to `target`.","When `operation` is set to one of","the comparison values ("+a+")","`value` is expected to be a number or a string.","When `operation` is set to one of the interval values","("+l+")","`value` is expected to be 2-item array where the first item","is the lower bound and the second item is the upper bound.","When `operation`, is set to one of the set values","("+u+")","`value` is expected to be an array with as many items as","the desired set elements."].join(" ")},preservegaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps in data arrays produced by the filter operation","are preserved.","Setting this to *true* might be useful when plotting a line chart","with `connectgaps` set to *false*."].join(" ")},editType:"calc"},e.supplyDefaults=function(h){var v={};function c(b,m){return r.coerce(h,v,e.attributes,b,m)}t(c,"coerce");var d=c("enabled");if(d){var g=c("target");if(r.isArrayOrTypedArray(g)&&g.length===0)return v.enabled=!1,v;c("preservegaps"),c("operation"),c("value");var p=n.getComponentMethod("calendars","handleDefaults");p(h,v,"valuecalendar",null),p(h,v,"targetcalendar",null)}return v},e.calcTransform=function(h,v,c){if(!c.enabled)return;var d=r.getTargetArray(v,c);if(!d)return;var g=c.target,p=d.length;v._length&&(p=Math.min(p,v._length));var b=c.targetcalendar,m=v._arrayAttrs,y=c.preservegaps;if(typeof g=="string"){var T=r.nestedProperty(v,g+"calendar").get();T&&(b=T)}var _=i.getDataToCoordFunc(h,v,g,d),M=f(c,_,b),w={},x={},A=0;function S(z,R){for(var F=0;F<m.length;F++){var O=r.nestedProperty(v,m[F]);z(O,R)}}t(S,"forAllAttrs");var k,L;y?(k=t(function(z){w[z.astr]=r.extendDeep([],z.get()),z.set(new Array(p))},"initFn"),L=t(function(z,R){var F=w[z.astr][R];z.get()[R]=F},"fillFn")):(k=t(function(z){w[z.astr]=r.extendDeep([],z.get()),z.set([])},"initFn"),L=t(function(z,R){var F=w[z.astr][R];z.get().push(F)},"fillFn")),S(k);for(var P=s(v.transforms,c),D=0;D<p;D++){var B=M(d[D]);B?(S(L,D),x[A++]=P(D)):y&&A++}c._indexToPoints=x,v._length=A};function f(h,v,c){var d=h.operation,g=h.value,p=Array.isArray(g);function b(_){return _.indexOf(d)!==-1}t(b,"isOperationIn");var m=t(function(_){return v(_,0,h.valuecalendar)},"d2cValue"),y=t(function(_){return v(_,0,c)},"d2cTarget"),T;switch(b(a)?T=m(p?g[0]:g):b(l)?T=p?[m(g[0]),m(g[1])]:[m(g),m(g)]:b(u)&&(T=p?g.map(m):[m(g)]),d){case"=":return function(_){return y(_)===T};case"!=":return function(_){return y(_)!==T};case"<":return function(_){return y(_)<T};case"<=":return function(_){return y(_)<=T};case">":return function(_){return y(_)>T};case">=":return function(_){return y(_)>=T};case"[]":return function(_){var M=y(_);return M>=T[0]&&M<=T[1]};case"()":return function(_){var M=y(_);return M>T[0]&&M<T[1]};case"[)":return function(_){var M=y(_);return M>=T[0]&&M<T[1]};case"(]":return function(_){var M=y(_);return M>T[0]&&M<=T[1]};case"][":return function(_){var M=y(_);return M<=T[0]||M>=T[1]};case")(":return function(_){var M=y(_);return M<T[0]||M>T[1]};case"](":return function(_){var M=y(_);return M<=T[0]||M>T[1]};case")[":return function(_){var M=y(_);return M<T[0]||M>=T[1]};case"{}":return function(_){return T.indexOf(y(_))!==-1};case"}{":return function(_){return T.indexOf(y(_))===-1}}}t(f,"getFilterFunc")}(nz)),nz}t(PUe,"requireFilter$1");var Kne;function DUe(){return Kne||(Kne=1,function(e){e.exports=PUe()}(az)),az.exports}t(DUe,"requireFilter");var iz={exports:{}},oz={},Jne;function IUe(){return Jne||(Jne=1,function(e){var r=Nt.exports,n=dp,i=so.exports,s=k3().pointsAccessorFunction;e.moduleType="transform",e.name="groupby",e.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this group-by transform is enabled or disabled."].join(" ")},groups:{valType:"data_array",dflt:[],editType:"calc",description:["Sets the groups in which the trace data will be split.","For example, with `x` set to *[1, 2, 3, 4]* and","`groups` set to *['a', 'b', 'a', 'b']*,","the groupby transform with split in one trace","with `x` [1, 3] and one trace with `x` [2, 4]."].join(" ")},nameformat:{valType:"string",editType:"calc",description:["Pattern by which grouped traces are named. If only one trace is present,",'defaults to the group name (`"%{group}"`), otherwise defaults to the group name','with trace name (`"%{group} (%{trace})"`). Available escape sequences are `%{group}`, which',"inserts the group name, and `%{trace}`, which inserts the trace name. If grouping","GDP data by country when more than one trace is present, for example, the",'default "%{group} (%{trace})" would return "Monaco (GDP per capita)".'].join(" ")},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc",description:["The group value which receives these styles."].join(" ")},value:{valType:"any",dflt:{},editType:"calc",description:["Sets each group styles.","For example, with `groups` set to *['a', 'b', 'a', 'b']*","and `styles` set to *[{target: 'a', value: { marker: { color: 'red' } }}]","marker points in group *'a'* will be drawn in red."].join(" "),_compareAsJSON:!0},editType:"calc"},editType:"calc"},e.supplyDefaults=function(a,l,u){var f,h={};function v(m,y){return r.coerce(a,h,e.attributes,m,y)}t(v,"coerce");var c=v("enabled");if(!c)return h;v("groups"),v("nameformat",u._dataLength>1?"%{group} (%{trace})":"%{group}");var d=a.styles,g=h.styles=[];if(d)for(f=0;f<d.length;f++){var p=g[f]={};r.coerce(d[f],g[f],e.attributes.styles,"target");var b=r.coerce(d[f],g[f],e.attributes.styles,"value");r.isPlainObject(b)?p.value=r.extendDeep({},b):b&&delete p.value}return h},e.transform=function(a,l){var u,f,h,v=[];for(f=0;f<a.length;f++)for(u=o(a[f],l),h=0;h<u.length;h++)v.push(u[h]);return v};function o(a,l){var u,f,h,v,c,d,g,p,b,m,y=l.transform,T=l.transformIndex,_=a.transforms[T].groups,M=s(a.transforms,y);if(!r.isArrayOrTypedArray(_)||_.length===0)return[a];var w=r.filterUnique(_),x=new Array(w.length),A=_.length,S=n.findArrayAttributes(a),k=y.styles||[],L={};for(u=0;u<k.length;u++)L[k[u].target]=k[u].value;y.styles&&(m=r.keyedContainer(y,"styles","target","value.name"));var P={},D={};for(u=0;u<w.length;u++){d=w[u],P[d]=u,D[d]=0,g=x[u]=r.extendDeepNoArrays({},a),g._group=d,g.transforms[T]._indexToPoints={};var B=null;for(m&&(B=m.get(d)),B||B===""?g.name=B:g.name=r.templateString(y.nameformat,{trace:a.name,group:d}),p=g.transforms,g.transforms=[],f=0;f<p.length;f++)g.transforms[f]=r.extendDeepNoArrays({},p[f]);for(f=0;f<S.length;f++)r.nestedProperty(g,S[f]).set([])}for(h=0;h<S.length;h++){for(v=S[h],f=0,b=[];f<w.length;f++)b[f]=r.nestedProperty(x[f],v).get();for(c=r.nestedProperty(a,v).get(),f=0;f<A;f++)b[P[_[f]]].push(c[f])}for(f=0;f<A;f++){g=x[P[_[f]]];var z=g.transforms[T]._indexToPoints;z[D[_[f]]]=M(f),D[_[f]]++}for(u=0;u<w.length;u++)d=w[u],g=x[u],i.clearExpandedTraceDefaultColors(g),g=r.extendDeepNoArrays(g,L[d]||{});return x}t(o,"transformOne")}(oz)),oz}t(IUe,"requireGroupby$1");var Qne;function zUe(){return Qne||(Qne=1,function(e){e.exports=IUe()}(iz)),iz.exports}t(zUe,"requireGroupby");var sz={exports:{}},lz={},eie;function FUe(){return eie||(eie=1,function(e){var r=Nt.exports,n=nn(),i=k3().pointsAccessorFunction,s=jn.BADNUM;e.moduleType="transform",e.name="sort",e.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc",description:["Determines whether this sort transform is enabled or disabled."].join(" ")},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc",description:["Sets the target by which the sort transform is applied.","If a string, *target* is assumed to be a reference to a data array","in the parent trace object.","To sort about nested variables, use *.* to access them.","For example, set `target` to *marker.size* to sort","about the marker size array.","If an array, *target* is then the data array by which","the sort transform is applied."].join(" ")},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc",description:["Sets the sort transform order."].join(" ")},editType:"calc"},e.supplyDefaults=function(l){var u={};function f(v,c){return r.coerce(l,u,e.attributes,v,c)}t(f,"coerce");var h=f("enabled");return h&&(f("target"),f("order")),u},e.calcTransform=function(l,u,f){if(!!f.enabled){var h=r.getTargetArray(u,f);if(!!h){var v=f.target,c=h.length;u._length&&(c=Math.min(c,u._length));var d=u._arrayAttrs,g=n.getDataToCoordFunc(l,u,v,h),p=o(f,h,g,c),b=i(u.transforms,f),m={},y,T;for(y=0;y<d.length;y++){var _=r.nestedProperty(u,d[y]),M=_.get(),w=new Array(c);for(T=0;T<c;T++)w[T]=M[p[T]];_.set(w)}for(T=0;T<c;T++)m[T]=b(p[T]);f._indexToPoints=m,u._length=c}}};function o(l,u,f,h){var v=new Array(h),c=new Array(h),d;for(d=0;d<h;d++)v[d]={v:u[d],i:d};for(v.sort(a(l,f)),d=0;d<h;d++)c[d]=v[d].i;return c}t(o,"getIndices");function a(l,u){switch(l.order){case"ascending":return function(f,h){var v=u(f.v),c=u(h.v);return v===s?1:c===s?-1:v-c};case"descending":return function(f,h){var v=u(f.v),c=u(h.v);return v===s?1:c===s?-1:c-v}}}t(a,"getSortFunc")}(lz)),lz}t(FUe,"requireSort$1");var tie;function BUe(){return tie||(tie=1,function(e){e.exports=FUe()}(sz)),sz.exports}t(BUe,"requireSort");var uz={exports:{}},fz={exports:{}},cz={exports:{}},rie;function Tu(){if(rie)return cz.exports;rie=1;var e=Os;function r(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}t(r,"Calendars"),e(r.prototype,{instance:function(l,u){l=(l||"gregorian").toLowerCase(),u=u||"";var f=this._localCals[l+"-"+u];if(!f&&this.calendars[l]&&(f=new this.calendars[l](u),this._localCals[l+"-"+u]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,l);return f},newDate:function(l,u,f,h,v){return h=(l!=null&&l.year?l.calendar():typeof h=="string"?this.instance(h,v):h)||this.instance(),h.newDate(l,u,f)},substituteDigits:function(l){return function(u){return(u+"").replace(/[0-9]/g,function(f){return l[f]})}},substituteChineseDigits:function(l,u){return function(f){for(var h="",v=0;f>0;){var c=f%10;h=(c===0?"":l[c]+u[v])+h,v++,f=Math.floor(f/10)}return h.indexOf(l[1]+u[1])===0&&(h=h.substr(1)),h||l[0]}}});function n(l,u,f,h){if(this._calendar=l,this._year=u,this._month=f,this._day=h,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}t(n,"CDate");function i(l,u){return l=""+l,"000000".substring(0,u-l.length)+l}t(i,"pad"),e(n.prototype,{newDate:function(l,u,f){return this._calendar.newDate(l==null?this:l,u,f)},year:function(l){return arguments.length===0?this._year:this.set(l,"y")},month:function(l){return arguments.length===0?this._month:this.set(l,"m")},day:function(l){return arguments.length===0?this._day:this.set(l,"d")},date:function(l,u,f){if(!this._calendar.isValid(l,u,f))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=l,this._month=u,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(l,u){return this._calendar.add(this,l,u)},set:function(l,u){return this._calendar.set(this,l,u)},compareTo:function(l){if(this._calendar.name!==l._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,l._calendar.local.name);var u=this._year!==l._year?this._year-l._year:this._month!==l._month?this.monthOfYear()-l.monthOfYear():this._day-l._day;return u===0?0:u<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(l){return this._calendar.fromJD(l)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(l){return this._calendar.fromJSDate(l)},toString:function(){return(this.year()<0?"-":"")+i(Math.abs(this.year()),4)+"-"+i(this.month(),2)+"-"+i(this.day(),2)}});function s(){this.shortYearCutoff="+10"}t(s,"BaseCalendar"),e(s.prototype,{_validateLevel:0,newDate:function(l,u,f){return l==null?this.today():(l.year&&(this._validate(l,u,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),f=l.day(),u=l.month(),l=l.year()),new n(this,l,u,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(l){var u=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return u.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(l){var u=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(u.year()<0?"-":"")+i(Math.abs(u.year()),4)},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(l,u){var f=this._validate(l,u,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(l,u){var f=(u+this.firstMonth-2*this.minMonth)%this.monthsInYear(l)+this.minMonth;return this._validate(l,f,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),f},daysInYear:function(l){var u=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(u)?366:365},dayOfYear:function(l,u,f){var h=this._validate(l,u,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return h.toJD()-this.newDate(h.year(),this.fromMonthOfYear(h.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(l,u,f){var h=this._validate(l,u,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(h))+2)%this.daysInWeek()},extraInfo:function(l,u,f){return this._validate(l,u,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(l,u,f){return this._validate(l,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(l,this._add(l,u,f),u,f)},_add:function(l,u,f){if(this._validateLevel++,f==="d"||f==="w"){var h=l.toJD()+u*(f==="w"?this.daysInWeek():1),v=l.calendar().fromJD(h);return this._validateLevel--,[v.year(),v.month(),v.day()]}try{var c=l.year()+(f==="y"?u:0),d=l.monthOfYear()+(f==="m"?u:0),v=l.day(),g=t(function(m){for(;d<m.minMonth;)c--,d+=m.monthsInYear(c);for(var y=m.monthsInYear(c);d>y-1+m.minMonth;)c++,d-=y,y=m.monthsInYear(c)},"resyncYearMonth");f==="y"?(l.month()!==this.fromMonthOfYear(c,d)&&(d=this.newDate(c,l.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(c)),v=Math.min(v,this.daysInMonth(c,this.fromMonthOfYear(c,d)))):f==="m"&&(g(this),v=Math.min(v,this.daysInMonth(c,this.fromMonthOfYear(c,d))));var p=[c,this.fromMonthOfYear(c,d),v];return this._validateLevel--,p}catch(b){throw this._validateLevel--,b}},_correctAdd:function(l,u,f,h){if(!this.hasYearZero&&(h==="y"||h==="m")&&(u[0]===0||l.year()>0!=u[0]>0)){var v={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[h],c=f<0?-1:1;u=this._add(l,f*v[0]+c*v[1],v[2])}return l.date(u[0],u[1],u[2])},set:function(l,u,f){this._validate(l,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var h=f==="y"?u:l.year(),v=f==="m"?u:l.month(),c=f==="d"?u:l.day();return(f==="y"||f==="m")&&(c=Math.min(c,this.daysInMonth(h,v))),l.date(h,v,c)},isValid:function(l,u,f){this._validateLevel++;var h=this.hasYearZero||l!==0;if(h){var v=this.newDate(l,u,this.minDay);h=u>=this.minMonth&&u-this.minMonth<this.monthsInYear(v)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(v)}return this._validateLevel--,h},toJSDate:function(l,u,f){var h=this._validate(l,u,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(h)).toJSDate()},fromJSDate:function(l){return this.fromJD(a.instance().fromJSDate(l).toJD())},_validate:function(l,u,f,h){if(l.year){if(this._validateLevel===0&&this.name!==l.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,l.calendar().local.name);return l}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(l,u,f))throw h.replace(/\{0\}/,this.local.name);var v=this.newDate(l,u,f);return this._validateLevel--,v}catch(c){throw this._validateLevel--,c}}});function o(l){this.local=this.regionalOptions[l]||this.regionalOptions[""]}t(o,"GregorianCalendar"),o.prototype=new s,e(o.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var u=this._validate(f,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),f=u.year()+(u.year()<0?1:0);return f%4===0&&(f%100!==0||f%400===0)},weekOfYear:function(l,u,f){var h=this.newDate(l,u,f);return h.add(4-(h.dayOfWeek()||7),"d"),Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(l,u){var f=this._validate(l,u,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(l,u,f){return(this.dayOfWeek(l,u,f)||7)<6},toJD:function(l,u,f){var h=this._validate(l,u,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);l=h.year(),u=h.month(),f=h.day(),l<0&&l++,u<3&&(u+=12,l--);var v=Math.floor(l/100),c=2-v+Math.floor(v/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(u+1))+f+c-1524.5},fromJD:function(l){var u=Math.floor(l+.5),f=Math.floor((u-186721625e-2)/36524.25);f=u+1+f-Math.floor(f/4);var h=f+1524,v=Math.floor((h-122.1)/365.25),c=Math.floor(365.25*v),d=Math.floor((h-c)/30.6001),g=h-c-Math.floor(d*30.6001),p=d-(d>13.5?13:1),b=v-(p>2.5?4716:4715);return b<=0&&b--,this.newDate(b,p,g)},toJSDate:function(l,u,f){var h=this._validate(l,u,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),v=new Date(h.year(),h.month()-1,h.day());return v.setHours(0),v.setMinutes(0),v.setSeconds(0),v.setMilliseconds(0),v.setHours(v.getHours()>12?v.getHours()+2:0),v},fromJSDate:function(l){return this.newDate(l.getFullYear(),l.getMonth()+1,l.getDate())}});var a=cz.exports=new r;return a.cdate=n,a.baseCalendar=s,a.calendars.gregorian=o,cz.exports}t(Tu,"requireMain");var aie={},nie;function OUe(){if(nie)return aie;nie=1;var e=Os,r=Tu();return e(r.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),r.local=r.regionalOptions[""],e(r.cdate.prototype,{formatDate:function(n,i){return typeof n!="string"&&(i=n,n=""),this._calendar.formatDate(n||"",this,i)}}),e(r.baseCalendar.prototype,{UNIX_EPOCH:r.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:r.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,i,s){if(typeof n!="string"&&(s=i,i=n,n=""),!i)return"";if(i.calendar()!==this)throw r.local.invalidFormat||r.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat,s=s||{};var o=s.dayNamesShort||this.local.dayNamesShort,a=s.dayNames||this.local.dayNames,l=s.monthNumbers||this.local.monthNumbers,u=s.monthNamesShort||this.local.monthNamesShort,f=s.monthNames||this.local.monthNames;s.calculateWeek||this.local.calculateWeek;for(var h=t(function(M,w){for(var x=1;_+x<n.length&&n.charAt(_+x)===M;)x++;return _+=x-1,Math.floor(x/(w||1))>1},"doubled"),v=t(function(M,w,x,A){var S=""+w;if(h(M,A))for(;S.length<x;)S="0"+S;return S},"formatNumber"),c=t(function(M,w,x,A){return h(M)?A[w]:x[w]},"formatName"),d=this,g=t(function(M){return typeof l=="function"?l.call(d,M,h("m")):m(v("m",M.month(),2))},"formatMonth"),p=t(function(M,w){return w?typeof f=="function"?f.call(d,M):f[M.month()-d.minMonth]:typeof u=="function"?u.call(d,M):u[M.month()-d.minMonth]},"formatMonthName"),b=this.local.digits,m=t(function(M){return s.localNumbers&&b?b(M):M},"localiseNumbers"),y="",T=!1,_=0;_<n.length;_++)if(T)n.charAt(_)==="'"&&!h("'")?T=!1:y+=n.charAt(_);else switch(n.charAt(_)){case"d":y+=m(v("d",i.day(),2));break;case"D":y+=c("D",i.dayOfWeek(),o,a);break;case"o":y+=v("o",i.dayOfYear(),3);break;case"w":y+=v("w",i.weekOfYear(),2);break;case"m":y+=g(i);break;case"M":y+=p(i,h("M"));break;case"y":y+=h("y",2)?i.year():(i.year()%100<10?"0":"")+i.year()%100;break;case"Y":h("Y",2),y+=i.formatYear();break;case"J":y+=i.toJD();break;case"@":y+=(i.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(i.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":h("'")?y+="'":T=!0;break;default:y+=n.charAt(_)}return y},parseDate:function(n,i,s){if(i==null)throw r.local.invalidArguments||r.regionalOptions[""].invalidArguments;if(i=typeof i=="object"?i.toString():i+"",i==="")return null;n=n||this.local.dateFormat,s=s||{};var o=s.shortYearCutoff||this.shortYearCutoff;o=typeof o!="string"?o:this.today().year()%100+parseInt(o,10);for(var a=s.dayNamesShort||this.local.dayNamesShort,l=s.dayNames||this.local.dayNames,u=s.parseMonth||this.local.parseMonth,f=s.monthNumbers||this.local.monthNumbers,h=s.monthNamesShort||this.local.monthNamesShort,v=s.monthNames||this.local.monthNames,c=-1,d=-1,g=-1,p=-1,b=-1,m=!1,y=!1,T=t(function(B,z){for(var R=1;L+R<n.length&&n.charAt(L+R)===B;)R++;return L+=R-1,Math.floor(R/(z||1))>1},"doubled"),_=t(function(B,z){var R=T(B,z),F=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(B)+1],O=new RegExp("^-?\\d{1,"+F+"}"),q=i.substring(k).match(O);if(!q)throw(r.local.missingNumberAt||r.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=q[0].length,parseInt(q[0],10)},"getNumber"),M=this,w=t(function(){if(typeof f=="function"){T("m");var B=f.call(M,i.substring(k));return k+=B.length,B}return _("m")},"getMonthNumber"),x=t(function(B,z,R,F){for(var O=T(B,F)?R:z,q=0;q<O.length;q++)if(i.substr(k,O[q].length).toLowerCase()===O[q].toLowerCase())return k+=O[q].length,q+M.minMonth;throw(r.local.unknownNameAt||r.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},"getName"),A=t(function(){if(typeof v=="function"){var B=T("M")?v.call(M,i.substring(k)):h.call(M,i.substring(k));return k+=B.length,B}return x("M",h,v)},"getMonthName"),S=t(function(){if(i.charAt(k)!==n.charAt(L))throw(r.local.unexpectedLiteralAt||r.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},"checkLiteral"),k=0,L=0;L<n.length;L++)if(y)n.charAt(L)==="'"&&!T("'")?y=!1:S();else switch(n.charAt(L)){case"d":p=_("d");break;case"D":x("D",a,l);break;case"o":b=_("o");break;case"w":_("w");break;case"m":g=w();break;case"M":g=A();break;case"y":var P=L;m=!T("y",2),L=P,d=_("y",2);break;case"Y":d=_("Y",2);break;case"J":c=_("J")+.5,i.charAt(k)==="."&&(k++,_("J"));break;case"@":c=_("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=_("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=i.length;break;case"'":T("'")?S():y=!0;break;default:S()}if(k<i.length)throw r.local.unexpectedText||r.regionalOptions[""].unexpectedText;if(d===-1?d=this.today().year():d<100&&m&&(d+=o===-1?1900:this.today().year()-this.today().year()%100-(d<=o?0:100)),typeof g=="string"&&(g=u.call(this,d,g)),b>-1){g=1,p=b;for(var D=this.daysInMonth(d,g);p>D;D=this.daysInMonth(d,g))g++,p-=D}return c>-1?this.fromJD(c):this.newDate(d,g,p)},determineDate:function(n,i,s,o,a){s&&typeof s!="object"&&(a=o,o=s,s=null),typeof o!="string"&&(a=o,o="");var l=this,u=t(function(f){try{return l.parseDate(o,f,a)}catch{}f=f.toLowerCase();for(var h=(f.match(/^c/)&&s?s.newDate():null)||l.today(),v=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,c=v.exec(f);c;)h.add(parseInt(c[1],10),c[2]||"d"),c=v.exec(f);return h},"offsetString");return i=i?i.newDate():null,n=n==null?i:typeof n=="string"?u(n):typeof n=="number"?isNaN(n)||n===1/0||n===-1/0?i:l.today().add(n,"d"):l.newDate(n),n}}),aie}t(OUe,"requirePlus");var iie={},oie;function NUe(){if(oie)return iie;oie=1;var e=Tu(),r=Os,n=e.instance();function i(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}t(i,"ChineseCalendar"),i.prototype=new e.baseCalendar,r(i.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(c,d){if(typeof c=="string"){var g=c.match(o);return g?g[0]:""}var p=this._validateYear(c),b=c.month(),m=""+this.toChineseMonth(p,b);return d&&m.length<2&&(m="0"+m),this.isIntercalaryMonth(p,b)&&(m+="i"),m},monthNames:function(c){if(typeof c=="string"){var d=c.match(a);return d?d[0]:""}var g=this._validateYear(c),p=c.month(),b=this.toChineseMonth(g,p),m=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][b-1];return this.isIntercalaryMonth(g,p)&&(m="\u95F0"+m),m},monthNamesShort:function(c){if(typeof c=="string"){var d=c.match(l);return d?d[0]:""}var g=this._validateYear(c),p=c.month(),b=this.toChineseMonth(g,p),m=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][b-1];return this.isIntercalaryMonth(g,p)&&(m="\u95F0"+m),m},parseMonth:function(c,d){c=this._validateYear(c);var g=parseInt(d),p;if(isNaN(g))d[0]==="\u95F0"&&(p=!0,d=d.substring(1)),d[d.length-1]==="\u6708"&&(d=d.substring(0,d.length-1)),g=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(d);else{var b=d[d.length-1];p=b==="i"||b==="I"}var m=this.toMonthIndex(c,g,p);return m},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,d){if(c.year&&(c=c.year()),typeof c!="number"||c<1888||c>2111)throw d.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,d,g){var p=this.intercalaryMonth(c),b=g&&d!==p;if(b||d<1||d>12)throw e.local.invalidMonth.replace(/\{0\}/,this.local.name);var m;return p?!g&&d<=p?m=d-1:m=d:m=d-1,m},toChineseMonth:function(c,d){c.year&&(c=c.year(),d=c.month());var g=this.intercalaryMonth(c),p=g?12:11;if(d<0||d>p)throw e.local.invalidMonth.replace(/\{0\}/,this.local.name);var b;return g?d<g?b=d+1:b=d:b=d+1,b},intercalaryMonth:function(c){c=this._validateYear(c);var d=u[c-u[0]],g=d>>13;return g},isIntercalaryMonth:function(c,d){c.year&&(c=c.year(),d=c.month());var g=this.intercalaryMonth(c);return!!g&&g===d},leapYear:function(c){return this.intercalaryMonth(c)!==0},weekOfYear:function(c,d,g){var p=this._validateYear(c,e.local.invalidyear),b=f[p-f[0]],m=b>>9&4095,y=b>>5&15,T=b&31,_;_=n.newDate(m,y,T),_.add(4-(_.dayOfWeek()||7),"d");var M=this.toJD(c,d,g)-_.toJD();return 1+Math.floor(M/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,d){c.year&&(d=c.month(),c=c.year()),c=this._validateYear(c);var g=u[c-u[0]],p=g>>13,b=p?12:11;if(d>b)throw e.local.invalidMonth.replace(/\{0\}/,this.local.name);var m=g&1<<12-d?30:29;return m},weekDay:function(c,d,g){return(this.dayOfWeek(c,d,g)||7)<6},toJD:function(c,d,g){var p=this._validate(c,m,g,e.local.invalidDate);c=this._validateYear(p.year()),d=p.month(),g=p.day();var b=this.isIntercalaryMonth(c,d),m=this.toChineseMonth(c,d),y=v(c,m,g,b);return n.toJD(y.year,y.month,y.day)},fromJD:function(c){var d=n.fromJD(c),g=h(d.year(),d.month(),d.day()),p=this.toMonthIndex(g.year,g.month,g.isIntercalary);return this.newDate(g.year,p,g.day)},fromString:function(c){var d=c.match(s),g=this._validateYear(+d[1]),p=+d[2],b=!!d[3],m=this.toMonthIndex(g,p,b),y=+d[4];return this.newDate(g,m,y)},add:function(c,d,g){var p=c.year(),b=c.month(),m=this.isIntercalaryMonth(p,b),y=this.toChineseMonth(p,b),T=Object.getPrototypeOf(i.prototype).add.call(this,c,d,g);if(g==="y"){var _=T.year(),M=T.month(),w=this.isIntercalaryMonth(_,y),x=m&&w?this.toMonthIndex(_,y,!0):this.toMonthIndex(_,y,!1);x!==M&&T.month(x)}return T}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,o=/^\d?\d[iI]?/m,a=/^??[]?/m,l=/^??[]?/m;e.calendars.chinese=i;var u=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function h(c,d,g,p){var b,m;if(typeof c=="object")b=c,m=d||{};else{var y=typeof c=="number"&&c>=1888&&c<=2111;if(!y)throw new Error("Solar year outside range 1888-2111");var T=typeof d=="number"&&d>=1&&d<=12;if(!T)throw new Error("Solar month outside range 1 - 12");var _=typeof g=="number"&&g>=1&&g<=31;if(!_)throw new Error("Solar day outside range 1 - 31");b={year:c,month:d,day:g},m=p||{}}var M=f[b.year-f[0]],w=b.year<<9|b.month<<5|b.day;m.year=w>=M?b.year:b.year-1,M=f[m.year-f[0]];var x=M>>9&4095,A=M>>5&15,S=M&31,k,L=new Date(x,A-1,S),P=new Date(b.year,b.month-1,b.day);k=Math.round((P-L)/(24*3600*1e3));var D=u[m.year-u[0]],B;for(B=0;B<13;B++){var z=D&1<<12-B?30:29;if(k<z)break;k-=z}var R=D>>13;return!R||B<R?(m.isIntercalary=!1,m.month=1+B):B===R?(m.isIntercalary=!0,m.month=B):(m.isIntercalary=!1,m.month=B),m.day=1+k,m}t(h,"toLunar");function v(c,d,g,p,b){var m,y;if(typeof c=="object")y=c,m=d||{};else{var T=typeof c=="number"&&c>=1888&&c<=2111;if(!T)throw new Error("Lunar year outside range 1888-2111");var _=typeof d=="number"&&d>=1&&d<=12;if(!_)throw new Error("Lunar month outside range 1 - 12");var M=typeof g=="number"&&g>=1&&g<=30;if(!M)throw new Error("Lunar day outside range 1 - 30");var w;typeof p=="object"?(w=!1,m=p):(w=!!p,m=b||{}),y={year:c,month:d,day:g,isIntercalary:w}}var x;x=y.day-1;var A=u[y.year-u[0]],S=A>>13,k;S&&(y.month>S||y.isIntercalary)?k=y.month:k=y.month-1;for(var L=0;L<k;L++){var P=A&1<<12-L?30:29;x+=P}var D=f[y.year-f[0]],B=D>>9&4095,z=D>>5&15,R=D&31,F=new Date(B,z-1,R+x);return m.year=F.getFullYear(),m.month=1+F.getMonth(),m.day=F.getDate(),m}return t(v,"toSolar"),iie}t(NUe,"requireChinese");var sie={},lie;function qUe(){if(lie)return sie;lie=1;var e=Tu(),r=Os;function n(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}return t(n,"CopticCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var s=this._validate(o,this.minMonth,this.minDay,e.local.invalidYear),o=s.year()+(s.year()<0?1:0);return o%4===3||o%4===-1},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear),13},weekOfYear:function(i,s,o){var a=this.newDate(i,s,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(i,s){var o=this._validate(i,s,this.minDay,e.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===13&&this.leapYear(o.year())?1:0)},weekDay:function(i,s,o){return(this.dayOfWeek(i,s,o)||7)<6},toJD:function(i,s,o){var a=this._validate(i,s,o,e.local.invalidDate);return i=a.year(),i<0&&i++,a.day()+(a.month()-1)*30+(i-1)*365+Math.floor(i/4)+this.jdEpoch-1},fromJD:function(i){var s=Math.floor(i)+.5-this.jdEpoch,o=Math.floor((s-Math.floor((s+366)/1461))/365)+1;o<=0&&o--,s=Math.floor(i)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(s/30)+1,l=s-(a-1)*30+1;return this.newDate(o,a,l)}}),e.calendars.coptic=n,sie}t(qUe,"requireCoptic");var uie={},fie;function UUe(){if(fie)return uie;fie=1;var e=Tu(),r=Os;function n(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}t(n,"DiscworldCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(s){return this._validate(s,this.minMonth,this.minDay,e.local.invalidYear),!1},monthsInYear:function(s){return this._validate(s,this.minMonth,this.minDay,e.local.invalidYear),13},daysInYear:function(s){return this._validate(s,this.minMonth,this.minDay,e.local.invalidYear),400},weekOfYear:function(s,o,a){var l=this.newDate(s,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(s,o){var a=this._validate(s,o,this.minDay,e.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(s,o,a){var l=this._validate(s,o,a,e.local.invalidDate);return(l.day()+1)%8},weekDay:function(s,o,a){var l=this.dayOfWeek(s,o,a);return l>=2&&l<=6},extraInfo:function(s,o,a){var l=this._validate(s,o,a,e.local.invalidDate);return{century:i[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(s,o,a){var l=this._validate(s,o,a,e.local.invalidDate);return s=l.year()+(l.year()<0?1:0),o=l.month(),a=l.day(),a+(o>1?16:0)+(o>2?(o-2)*32:0)+(s-1)*400+this.jdEpoch-1},fromJD:function(s){s=Math.floor(s+.5)-Math.floor(this.jdEpoch)-1;var o=Math.floor(s/400)+1;s-=(o-1)*400,s+=s>15?16:0;var a=Math.floor(s/32)+1,l=s-(a-1)*32+1;return this.newDate(o<=0?o-1:o,a,l)}});var i={20:"Fruitbat",21:"Anchovy"};return e.calendars.discworld=n,uie}t(UUe,"requireDiscworld");var cie={},hie;function HUe(){if(hie)return cie;hie=1;var e=Tu(),r=Os;function n(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}return t(n,"EthiopianCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var s=this._validate(o,this.minMonth,this.minDay,e.local.invalidYear),o=s.year()+(s.year()<0?1:0);return o%4===3||o%4===-1},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear),13},weekOfYear:function(i,s,o){var a=this.newDate(i,s,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(i,s){var o=this._validate(i,s,this.minDay,e.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===13&&this.leapYear(o.year())?1:0)},weekDay:function(i,s,o){return(this.dayOfWeek(i,s,o)||7)<6},toJD:function(i,s,o){var a=this._validate(i,s,o,e.local.invalidDate);return i=a.year(),i<0&&i++,a.day()+(a.month()-1)*30+(i-1)*365+Math.floor(i/4)+this.jdEpoch-1},fromJD:function(i){var s=Math.floor(i)+.5-this.jdEpoch,o=Math.floor((s-Math.floor((s+366)/1461))/365)+1;o<=0&&o--,s=Math.floor(i)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(s/30)+1,l=s-(a-1)*30+1;return this.newDate(o,a,l)}}),e.calendars.ethiopian=n,cie}t(HUe,"requireEthiopian");var vie={},die;function $Ue(){if(die)return vie;die=1;var e=Tu(),r=Os;function n(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}t(n,"HebrewCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(s){var o=this._validate(s,this.minMonth,this.minDay,e.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(s){return s=s<0?s+1:s,i(s*7+1,19)<7},monthsInYear:function(s){return this._validate(s,this.minMonth,this.minDay,e.local.invalidYear),this._leapYear(s.year?s.year():s)?13:12},weekOfYear:function(s,o,a){var l=this.newDate(s,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(s){var o=this._validate(s,this.minMonth,this.minDay,e.local.invalidYear);return s=o.year(),this.toJD(s===-1?1:s+1,7,1)-this.toJD(s,7,1)},daysInMonth:function(s,o){return s.year&&(o=s.month(),s=s.year()),this._validate(s,o,this.minDay,e.local.invalidMonth),o===12&&this.leapYear(s)||o===8&&i(this.daysInYear(s),10)===5?30:o===9&&i(this.daysInYear(s),10)===3?29:this.daysPerMonth[o-1]},weekDay:function(s,o,a){return this.dayOfWeek(s,o,a)!==6},extraInfo:function(s,o,a){var l=this._validate(s,o,a,e.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(s,o,a){var l=this._validate(s,o,a,e.local.invalidDate);s=l.year(),o=l.month(),a=l.day();var u=s<=0?s+1:s,f=this.jdEpoch+this._delay1(u)+this._delay2(u)+a+1;if(o<7){for(var h=7;h<=this.monthsInYear(s);h++)f+=this.daysInMonth(s,h);for(var h=1;h<o;h++)f+=this.daysInMonth(s,h)}else for(var h=7;h<o;h++)f+=this.daysInMonth(s,h);return f},_delay1:function(s){var o=Math.floor((235*s-234)/19),a=12084+13753*o,l=o*29+Math.floor(a/25920);return i(3*(l+1),7)<3&&l++,l},_delay2:function(s){var o=this._delay1(s-1),a=this._delay1(s),l=this._delay1(s+1);return l-a===356?2:a-o===382?1:0},fromJD:function(s){s=Math.floor(s)+.5;for(var o=Math.floor((s-this.jdEpoch)*98496/35975351)-1;s>=this.toJD(o===-1?1:o+1,7,1);)o++;for(var a=s<this.toJD(o,1,1)?7:1;s>this.toJD(o,a,this.daysInMonth(o,a));)a++;var l=s-this.toJD(o,a,1)+1;return this.newDate(o,a,l)}});function i(s,o){return s-o*Math.floor(s/o)}return t(i,"mod"),e.calendars.hebrew=n,vie}t($Ue,"requireHebrew");var pie={},gie;function VUe(){if(gie)return pie;gie=1;var e=Tu(),r=Os;function n(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}return t(n,"IslamicCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(i){var s=this._validate(i,this.minMonth,this.minDay,e.local.invalidYear);return(s.year()*11+14)%30<11},weekOfYear:function(i,s,o){var a=this.newDate(i,s,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(i){return this.leapYear(i)?355:354},daysInMonth:function(i,s){var o=this._validate(i,s,this.minDay,e.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(i,s,o){return this.dayOfWeek(i,s,o)!==5},toJD:function(i,s,o){var a=this._validate(i,s,o,e.local.invalidDate);return i=a.year(),s=a.month(),o=a.day(),i=i<=0?i+1:i,o+Math.ceil(29.5*(s-1))+(i-1)*354+Math.floor((3+11*i)/30)+this.jdEpoch-1},fromJD:function(i){i=Math.floor(i)+.5;var s=Math.floor((30*(i-this.jdEpoch)+10646)/10631);s=s<=0?s-1:s;var o=Math.min(12,Math.ceil((i-29-this.toJD(s,1,1))/29.5)+1),a=i-this.toJD(s,o,1)+1;return this.newDate(s,o,a)}}),e.calendars.islamic=n,pie}t(VUe,"requireIslamic");var yie={},mie;function GUe(){if(mie)return yie;mie=1;var e=Tu(),r=Os;function n(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}return t(n,"JulianCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var s=this._validate(o,this.minMonth,this.minDay,e.local.invalidYear),o=s.year()<0?s.year()+1:s.year();return o%4===0},weekOfYear:function(i,s,o){var a=this.newDate(i,s,o);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(i,s){var o=this._validate(i,s,this.minDay,e.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(i,s,o){return(this.dayOfWeek(i,s,o)||7)<6},toJD:function(i,s,o){var a=this._validate(i,s,o,e.local.invalidDate);return i=a.year(),s=a.month(),o=a.day(),i<0&&i++,s<=2&&(i--,s+=12),Math.floor(365.25*(i+4716))+Math.floor(30.6001*(s+1))+o-1524.5},fromJD:function(i){var s=Math.floor(i+.5),o=s+1524,a=Math.floor((o-122.1)/365.25),l=Math.floor(365.25*a),u=Math.floor((o-l)/30.6001),f=u-Math.floor(u<14?1:13),h=a-Math.floor(f>2?4716:4715),v=o-l-Math.floor(30.6001*u);return h<=0&&h--,this.newDate(h,f,v)}}),e.calendars.julian=n,yie}t(GUe,"requireJulian");var xie={},bie;function jUe(){if(bie)return xie;bie=1;var e=Tu(),r=Os;function n(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}t(n,"MayanCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(o){return this._validate(o,this.minMonth,this.minDay,e.local.invalidYear),!1},formatYear:function(o){var a=this._validate(o,this.minMonth,this.minDay,e.local.invalidYear);o=a.year();var l=Math.floor(o/400);o=o%400,o+=o<0?400:0;var u=Math.floor(o/20);return l+"."+u+"."+o%20},forYear:function(o){if(o=o.split("."),o.length<3)throw"Invalid Mayan year";for(var a=0,l=0;l<o.length;l++){var u=parseInt(o[l],10);if(Math.abs(u)>19||l>0&&u<0)throw"Invalid Mayan year";a=a*20+u}return a},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,e.local.invalidYear),18},weekOfYear:function(o,a,l){return this._validate(o,a,l,e.local.invalidDate),0},daysInYear:function(o){return this._validate(o,this.minMonth,this.minDay,e.local.invalidYear),360},daysInMonth:function(o,a){return this._validate(o,a,this.minDay,e.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(o,a,l){var u=this._validate(o,a,l,e.local.invalidDate);return u.day()},weekDay:function(o,a,l){return this._validate(o,a,l,e.local.invalidDate),!0},extraInfo:function(o,a,l){var u=this._validate(o,a,l,e.local.invalidDate),f=u.toJD(),h=this._toHaab(f),v=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[h[0]-1],haabMonth:h[0],haabDay:h[1],tzolkinDayName:this.local.tzolkinMonths[v[0]-1],tzolkinDay:v[0],tzolkinTrecena:v[1]}},_toHaab:function(o){o-=this.jdEpoch;var a=i(o+8+(18-1)*20,365);return[Math.floor(a/20)+1,i(a,20)]},_toTzolkin:function(o){return o-=this.jdEpoch,[s(o+20,20),s(o+4,13)]},toJD:function(o,a,l){var u=this._validate(o,a,l,e.local.invalidDate);return u.day()+u.month()*20+u.year()*360+this.jdEpoch},fromJD:function(o){o=Math.floor(o)+.5-this.jdEpoch;var a=Math.floor(o/360);o=o%360,o+=o<0?360:0;var l=Math.floor(o/20),u=o%20;return this.newDate(a,l,u)}});function i(o,a){return o-a*Math.floor(o/a)}t(i,"mod");function s(o,a){return i(o-1,a)+1}return t(s,"amod"),e.calendars.mayan=n,xie}t(jUe,"requireMayan");var _ie={},wie;function YUe(){if(wie)return _ie;wie=1;var e=Tu(),r=Os;function n(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}t(n,"NanakshahiCalendar"),n.prototype=new e.baseCalendar;var i=e.instance("gregorian");return r(n.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(s){var o=this._validate(s,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return i.leapYear(o.year()+(o.year()<1?1:0)+1469)},weekOfYear:function(s,o,a){var l=this.newDate(s,o,a);return l.add(1-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(s,o){var a=this._validate(s,o,this.minDay,e.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(s,o,a){return(this.dayOfWeek(s,o,a)||7)<6},toJD:function(u,o,a){var l=this._validate(u,o,a,e.local.invalidMonth),u=l.year();u<0&&u++;for(var f=l.day(),h=1;h<l.month();h++)f+=this.daysPerMonth[h-1];return f+i.toJD(u+1468,3,13)},fromJD:function(s){s=Math.floor(s+.5);for(var o=Math.floor((s-(this.jdEpoch-1))/366);s>=this.toJD(o+1,1,1);)o++;for(var a=s-Math.floor(this.toJD(o,1,1)+.5)+1,l=1;a>this.daysInMonth(o,l);)a-=this.daysInMonth(o,l),l++;return this.newDate(o,l,a)}}),e.calendars.nanakshahi=n,_ie}t(YUe,"requireNanakshahi");var Tie={},Aie;function WUe(){if(Aie)return Tie;Aie=1;var e=Tu(),r=Os;function n(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}return t(n,"NepaliCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(i){return this.daysInYear(i)!==this.daysPerYear},weekOfYear:function(i,s,o){var a=this.newDate(i,s,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(i){var s=this._validate(i,this.minMonth,this.minDay,e.local.invalidYear);if(i=s.year(),typeof this.NEPALI_CALENDAR_DATA[i]>"u")return this.daysPerYear;for(var o=0,a=this.minMonth;a<=12;a++)o+=this.NEPALI_CALENDAR_DATA[i][a];return o},daysInMonth:function(i,s){return i.year&&(s=i.month(),i=i.year()),this._validate(i,s,this.minDay,e.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[i]>"u"?this.daysPerMonth[s-1]:this.NEPALI_CALENDAR_DATA[i][s]},weekDay:function(i,s,o){return this.dayOfWeek(i,s,o)!==6},toJD:function(i,s,o){var a=this._validate(i,s,o,e.local.invalidDate);i=a.year(),s=a.month(),o=a.day();var l=e.instance(),u=0,f=s,h=i;this._createMissingCalendarData(i);var v=i-(f>9||f===9&&o>=this.NEPALI_CALENDAR_DATA[h][0]?56:57);for(s!==9&&(u=o,f--);f!==9;)f<=0&&(f=12,h--),u+=this.NEPALI_CALENDAR_DATA[h][f],f--;return s===9?(u+=o-this.NEPALI_CALENDAR_DATA[h][0],u<0&&(u+=l.daysInYear(v))):u+=this.NEPALI_CALENDAR_DATA[h][9]-this.NEPALI_CALENDAR_DATA[h][0],l.newDate(v,1,1).add(u,"d").toJD()},fromJD:function(i){var s=e.instance(),o=s.fromJD(i),a=o.year(),l=o.dayOfYear(),u=a+56;this._createMissingCalendarData(u);for(var f=9,h=this.NEPALI_CALENDAR_DATA[u][0],v=this.NEPALI_CALENDAR_DATA[u][f]-h+1;l>v;)f++,f>12&&(f=1,u++),v+=this.NEPALI_CALENDAR_DATA[u][f];var c=this.NEPALI_CALENDAR_DATA[u][f]-(v-l);return this.newDate(u,f,c)},_createMissingCalendarData:function(i){var s=this.daysPerMonth.slice(0);s.unshift(17);for(var o=i-1;o<i+2;o++)typeof this.NEPALI_CALENDAR_DATA[o]>"u"&&(this.NEPALI_CALENDAR_DATA[o]=s)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),e.calendars.nepali=n,Tie}t(WUe,"requireNepali");var Sie={},Mie;function XUe(){if(Mie)return Sie;Mie=1;var e=Tu(),r=Os;function n(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}t(n,"PersianCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(s){var o=this._validate(s,this.minMonth,this.minDay,e.local.invalidYear);return((o.year()-(o.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(s,o,a){var l=this.newDate(s,o,a);return l.add(-((l.dayOfWeek()+1)%7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(s,o){var a=this._validate(s,o,this.minDay,e.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(s,o,a){return this.dayOfWeek(s,o,a)!==5},toJD:function(s,o,a){var l=this._validate(s,o,a,e.local.invalidDate);s=l.year(),o=l.month(),a=l.day();var u=s-(s>=0?474:473),f=474+i(u,2820);return a+(o<=7?(o-1)*31:(o-1)*30+6)+Math.floor((f*682-110)/2816)+(f-1)*365+Math.floor(u/2820)*1029983+this.jdEpoch-1},fromJD:function(s){s=Math.floor(s)+.5;var o=s-this.toJD(475,1,1),a=Math.floor(o/1029983),l=i(o,1029983),u=2820;if(l!==1029982){var f=Math.floor(l/366),h=i(l,366);u=Math.floor((2134*f+2816*h+2815)/1028522)+f+1}var v=u+2820*a+474;v=v<=0?v-1:v;var c=s-this.toJD(v,1,1)+1,d=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),g=s-this.toJD(v,d,1)+1;return this.newDate(v,d,g)}});function i(s,o){return s-o*Math.floor(s/o)}return t(i,"mod"),e.calendars.persian=n,e.calendars.jalali=n,Sie}t(XUe,"requirePersian");var kie={},Eie;function ZUe(){if(Eie)return kie;Eie=1;var e=Tu(),r=Os,n=e.instance();function i(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}return t(i,"TaiwanCalendar"),i.prototype=new e.baseCalendar,r(i.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(a){var o=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(o.year());return n.leapYear(a)},weekOfYear:function(u,o,a){var l=this._validate(u,this.minMonth,this.minDay,e.local.invalidYear),u=this._t2gYear(l.year());return n.weekOfYear(u,l.month(),l.day())},daysInMonth:function(s,o){var a=this._validate(s,o,this.minDay,e.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(s,o,a){return(this.dayOfWeek(s,o,a)||7)<6},toJD:function(u,o,a){var l=this._validate(u,o,a,e.local.invalidDate),u=this._t2gYear(l.year());return n.toJD(u,l.month(),l.day())},fromJD:function(s){var o=n.fromJD(s),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(s){return s+this.yearsOffset+(s>=-this.yearsOffset&&s<=-1?1:0)},_g2tYear:function(s){return s-this.yearsOffset-(s>=1&&s<=this.yearsOffset?1:0)}}),e.calendars.taiwan=i,kie}t(ZUe,"requireTaiwan");var Cie={},Lie;function KUe(){if(Lie)return Cie;Lie=1;var e=Tu(),r=Os,n=e.instance();function i(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}return t(i,"ThaiCalendar"),i.prototype=new e.baseCalendar,r(i.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var o=this._validate(a,this.minMonth,this.minDay,e.local.invalidYear),a=this._t2gYear(o.year());return n.leapYear(a)},weekOfYear:function(u,o,a){var l=this._validate(u,this.minMonth,this.minDay,e.local.invalidYear),u=this._t2gYear(l.year());return n.weekOfYear(u,l.month(),l.day())},daysInMonth:function(s,o){var a=this._validate(s,o,this.minDay,e.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(s,o,a){return(this.dayOfWeek(s,o,a)||7)<6},toJD:function(u,o,a){var l=this._validate(u,o,a,e.local.invalidDate),u=this._t2gYear(l.year());return n.toJD(u,l.month(),l.day())},fromJD:function(s){var o=n.fromJD(s),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(s){return s-this.yearsOffset-(s>=1&&s<=this.yearsOffset?1:0)},_g2tYear:function(s){return s+this.yearsOffset+(s>=-this.yearsOffset&&s<=-1?1:0)}}),e.calendars.thai=i,Cie}t(KUe,"requireThai");var Rie={},Pie;function JUe(){if(Pie)return Rie;Pie=1;var e=Tu(),r=Os;function n(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}t(n,"UmmAlQuraCalendar"),n.prototype=new e.baseCalendar,r(n.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(s){var o=this._validate(s,this.minMonth,this.minDay,e.local.invalidYear);return this.daysInYear(o.year())===355},weekOfYear:function(s,o,a){var l=this.newDate(s,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(s){for(var o=0,a=1;a<=12;a++)o+=this.daysInMonth(s,a);return o},daysInMonth:function(s,o){for(var a=this._validate(s,o,this.minDay,e.local.invalidMonth),l=a.toJD()-24e5+.5,u=0,f=0;f<i.length;f++){if(i[f]>l)return i[u]-i[u-1];u++}return 30},weekDay:function(s,o,a){return this.dayOfWeek(s,o,a)!==5},toJD:function(s,o,a){var l=this._validate(s,o,a,e.local.invalidDate),u=12*(l.year()-1)+l.month()-15292,f=l.day()+i[u-1]-1;return f+24e5-.5},fromJD:function(s){for(var o=s-24e5+.5,a=0,l=0;l<i.length&&!(i[l]>o);l++)a++;var u=a+15292,f=Math.floor((u-1)/12),h=f+1,v=u-12*f,c=o-i[a-1]+1;return this.newDate(h,v,c)},isValid:function(s,o,a){var l=e.baseCalendar.prototype.isValid.apply(this,arguments);return l&&(s=s.year!=null?s.year:s,l=s>=1276&&s<=1500),l},_validate:function(s,o,a,l){var u=e.baseCalendar.prototype._validate.apply(this,arguments);if(u.year<1276||u.year>1500)throw l.replace(/\{0\}/,this.local.name);return u}}),e.calendars.ummalqura=n;var i=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];return Rie}t(JUe,"requireUmmalqura");var Die;function QUe(){return Die||(Die=1,function(e){e.exports=Tu(),OUe(),NUe(),qUe(),UUe(),HUe(),$Ue(),VUe(),GUe(),jUe(),YUe(),WUe(),XUe(),ZUe(),KUe(),JUe()}(fz)),fz.exports}t(QUe,"requireCalendars$2");var hz,Iie;function eHe(){if(Iie)return hz;Iie=1;var e=QUe(),r=Nt.exports,n=jn,i=n.EPOCHJD,s=n.ONEDAY,o={valType:"enumerated",values:r.sortObjectKeys(e.calendars),editType:"calc",dflt:"gregorian"},a=t(function(w,x,A,S){var k={};return k[A]=o,r.coerce(w,x,k,A,S)},"handleDefaults"),l=t(function(w,x,A,S){for(var k=0;k<A.length;k++)a(w,x,A[k]+"calendar",S.calendar)},"handleTraceDefaults"),u={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},f={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},h={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},v="##",c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:v,w:v,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function d(w,x,A){for(var S=Math.floor((x+.05)/s)+i,k=p(A).fromJD(S),L=0,P,D,B,z,R;(L=w.indexOf("%",L))!==-1;)P=w.charAt(L+1),P==="0"||P==="-"||P==="_"?(B=3,D=w.charAt(L+2),P==="_"&&(P="-")):(D=P,P="0",B=2),z=c[D],z?(z===v?R=v:R=k.formatDate(z[P]),w=w.substr(0,L)+R+w.substr(L+B),L+=R.length):L+=B;return w}t(d,"worldCalFmt");var g={};function p(w){var x=g[w];return x||(x=g[w]=e.instance(w),x)}t(p,"getCal");function b(w){return r.extendFlat({},o,{description:w})}t(b,"makeAttrs");function m(w){return"Sets the calendar system to use with `"+w+"` date data."}t(m,"makeTraceAttrsDescription");var y={xcalendar:b(m("x"))},T=r.extendFlat({},y,{ycalendar:b(m("y"))}),_=r.extendFlat({},T,{zcalendar:b(m("z"))}),M=b(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));return hz={moduleType:"component",name:"calendars",schema:{traces:{scatter:T,bar:T,box:T,heatmap:T,contour:T,histogram:T,histogram2d:T,histogram2dcontour:T,scatter3d:_,surface:_,mesh3d:_,scattergl:T,ohlc:y,candlestick:y},layout:{calendar:b(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:M},yaxis:{calendar:M},scene:{xaxis:{calendar:M},yaxis:{calendar:M},zaxis:{calendar:M}},polar:{radialaxis:{calendar:M}}},transforms:{filter:{valuecalendar:b(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:b(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:a,handleTraceDefaults:l,CANONICAL_SUNDAY:f,CANONICAL_TICK:u,DFLTRANGE:h,getCal:p,worldCalFmt:d},hz}t(eHe,"requireCalendars$1");var zie;function tHe(){return zie||(zie=1,function(e){e.exports=eHe()}(uz)),uz.exports}t(tHe,"requireCalendars");var h0e=Bie.exports;h0e.register([rLe(),iLe(),uLe(),dLe(),mLe(),wLe(),SLe(),FLe(),GLe(),rRe(),hRe(),URe(),YRe(),PDe(),UDe(),XDe(),rIe(),bIe(),AIe(),MIe(),LIe(),zIe(),qIe(),VIe(),l7e(),c7e(),W9e(),uBe(),xBe(),TBe(),RBe(),BBe(),YBe(),KBe(),iOe(),KNe(),aqe(),fqe(),Dqe(),Uqe(),jqe(),Kqe(),tUe(),oUe(),dUe(),bUe(),CUe(),RUe(),DUe(),zUe(),BUe(),tHe()]);var Fie=h0e;const v0e={__name:"VuePlotly",props:{data:{type:Array,required:!0},layout:{type:Object,required:!0},useResizeHandler:{type:Boolean,default:!1},debug:{type:Boolean,default:!1}},setup(e){const r=e,n=lme(null),i={isBrowser:typeof window<"u",promise:Promise.resolve(),unmounting:!1,resizeHandler:null};ume(()=>{i.unmounting=!1,s(!0)});function s(a){i.promise=i.promise.then(()=>{if(!i.unmounting){if(!n.value)throw new Error("container not mounted");return Fie.react(n.value,{data:r.data,layout:r.layout})}}).then(()=>{i.unmounting||o(a)}).catch(l=>{console.error(l)})}t(s,"updatePlotly");function o(a){!i.isBrowser||(r.useResizeHandler&&!i.resizeHandler?(i.resizeHandler=()=>Fie.Plots.resize(n.value),window.addEventListener("resize",i.resizeHandler),a&&i.resizeHandler()):!r.useResizeHandler&&i.resizeHandler&&(window.removeEventListener("resize",i.resizeHandler),i.resizeHandler=null))}return t(o,"syncWindowResize"),(a,l)=>(cme(),fme("div",{ref_key:"container",ref:n},null,512))}},d0e=v0e;v0e.__docgenInfo={exportName:"default",displayName:"VuePlotly",description:"",tags:{},props:[{name:"data",type:{name:"array"},required:!0},{name:"layout",type:{name:"object"},required:!0},{name:"useResizeHandler",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"debug",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}]};const uHe={parameters:{storySource:{source:`import VuePlotly from './VuePlotly.vue';

// More on default export: https://storybook.js.org/docs/vue/writing-stories/introduction#default-export
export default {
  title: 'Example/VuePlotly',
  component: VuePlotly,
  // More on argTypes: https://storybook.js.org/docs/vue/api/argtypes
  // argTypes: {
  //   data: {},
  //   layout: {},
  //   size: {
  //     control: { type: 'select' },
  //     options: ['small', 'medium', 'large'],
  //   },
  // },
};

// More on component templates: https://storybook.js.org/docs/vue/writing-stories/introduction#using-args
const Template = (args) => ({
  // Components used in your story \`template\` are defined in the \`components\` object
  components: { VuePlotly },
  // The story's \`args\` need to be mapped into the template through the \`setup()\` method
  setup() {
    return { args };
  },
  template: '<vue-plotly v-bind="args" />',
});

export const Primary = Template.bind({});
Primary.args = {
  data: [
    {
      x: [1, 2, 4],
      y: [2, 6, 3],
      type: 'scatter',
      mode: 'lines+markers',
      marker: { color: 'red' },
    },
    { type: 'bar', x: [1, 2, 3], y: [2, 5, 3] },
  ],
  layout: { width: 320, height: 240, title: 'A Fancy Plot' },
};
`,locationsMap:{primary:{startLoc:{col:17,line:19},endLoc:{col:2,line:27},startBody:{col:17,line:19},endBody:{col:2,line:27}}}}},title:"Example/VuePlotly",component:d0e},rHe=t(e=>({components:{VuePlotly:d0e},setup(){return{args:e}},template:'<vue-plotly v-bind="args" />'}),"Template"),aHe=rHe.bind({});aHe.args={data:[{x:[1,2,4],y:[2,6,3],type:"scatter",mode:"lines+markers",marker:{color:"red"}},{type:"bar",x:[1,2,3],y:[2,5,3]}],layout:{width:320,height:240,title:"A Fancy Plot"}};const fHe=["Primary"];export{aHe as Primary,fHe as __namedExportsOrder,uHe as default};
//# sourceMappingURL=VuePlotly.stories.9423ec7e.js.map
